commit 875e4f2f7dded3978cc82836eabae9d6b40a4ecd
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Tue Dec 20 19:02:17 2011 -0500

    BUG: Index.format bug excluding name field with timestamps

diff --git a/RELEASE.rst b/RELEASE.rst
index 57ef8408f..95ff7b793 100644
--- a/RELEASE.rst
+++ b/RELEASE.rst
@@ -66,6 +66,7 @@ pandas 0.6.2
   - Return empty string from Series.to_string when called on empty Series (GH
     #488)
   - Fix exception passing empty list to DataFrame.from_records
+  - Fix Index.format bug (excluding name field) with datetimes with time info
 
 Thanks
 ------
diff --git a/pandas/core/index.py b/pandas/core/index.py
index dd11e5548..6a667e98d 100644
--- a/pandas/core/index.py
+++ b/pandas/core/index.py
@@ -244,7 +244,7 @@ class Index(np.ndarray):
             zero_time = time(0, 0)
             for dt in self:
                 if dt.time() != zero_time or dt.tzinfo is not None:
-                    return ['%s' % x for x in self]
+                    return result + ['%s' % x for x in self]
                 result.append(dt.strftime("%Y-%m-%d"))
             return result
 
diff --git a/pandas/tests/test_index.py b/pandas/tests/test_index.py
index b9afc9f31..7e304d797 100644
--- a/pandas/tests/test_index.py
+++ b/pandas/tests/test_index.py
@@ -272,6 +272,14 @@ class TestIndex(unittest.TestCase):
 
         self.strIndex[:0].format()
 
+    def test_format_with_name_time_info(self):
+        # bug I fixed 12/20/2011
+        inc = timedelta(hours=4)
+        dates = Index([dt + inc for dt in self.dateIndex], name='something')
+
+        formatted = dates.format(name=True)
+        self.assert_(formatted[0] == 'something')
+
     def test_take(self):
         indexer = [4, 3, 0, 2]
         result = self.dateIndex.take(indexer)
diff --git a/vb_suite/reindex.py b/vb_suite/reindex.py
index f73536cb8..5dbc7dffd 100644
--- a/vb_suite/reindex.py
+++ b/vb_suite/reindex.py
@@ -46,4 +46,5 @@ s2 = s1[::2]
 """
 statement = "s1.reindex(s2.index)"
 reindex_multi = Benchmark(statement, setup,
-                          name='reindex_multiindex')
+                          name='reindex_multiindex',
+                          start_date=datetime(2011, 8, 1))
diff --git a/vb_suite/run_suite.py b/vb_suite/run_suite.py
index 1cab9065e..6d07ce189 100644
--- a/vb_suite/run_suite.py
+++ b/vb_suite/run_suite.py
@@ -21,6 +21,8 @@ python setup.py clean
 BUILD = """
 python setup.py build_ext --inplace
 """
+dependencies = ['pandas_vb_common.py']
+
 START_DATE = datetime(2011, 3, 1)
 
 repo = GitRepo(REPO_PATH)
@@ -29,6 +31,7 @@ to_consider = repo.shas.truncate(START_DATE)
 
 runner = BenchmarkRunner(all_benchmarks, REPO_PATH, REPO_URL,
                          BUILD, DB_PATH, TMP_DIR, PREPARE,
-                         run_option='eod', start_date=START_DATE)
+                         run_option='eod', start_date=START_DATE,
+                         module_dependencies=dependencies)
 
 runner.run()
