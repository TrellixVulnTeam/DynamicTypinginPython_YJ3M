commit d85db2a07f3a20105afe8abc41fbdc3f6d4efd52
Author: Jeff Reback <jeff@reback.net>
Date:   Thu Nov 19 15:31:43 2015 -0500

    ENH: fixup tilde expansion, xref #11438

diff --git a/pandas/core/format.py b/pandas/core/format.py
index efa4b182f..87d0fa086 100644
--- a/pandas/core/format.py
+++ b/pandas/core/format.py
@@ -13,7 +13,7 @@ from pandas.compat import(StringIO, lzip, range, map, zip, reduce, u,
                           OrderedDict)
 from pandas.util.terminal import get_terminal_size
 from pandas.core.config import get_option, set_option
-from pandas.io.common import _get_handle, UnicodeWriter
+from pandas.io.common import _get_handle, UnicodeWriter, _expand_user
 import pandas.core.common as com
 import pandas.lib as lib
 from pandas.tslib import iNaT, Timestamp, Timedelta, format_array_from_datetime
@@ -343,7 +343,7 @@ class DataFrameFormatter(TableFormatter):
                  index_names=True, line_width=None, max_rows=None,
                  max_cols=None, show_dimensions=False, **kwds):
         self.frame = frame
-        self.buf = buf if buf is not None else StringIO()
+        self.buf = _expand_user(buf) if buf is not None else StringIO()
         self.show_index_names = index_names
 
         if sparsify is None:
@@ -1276,7 +1276,7 @@ class CSVFormatter(object):
         if path_or_buf is None:
             path_or_buf = StringIO()
 
-        self.path_or_buf = path_or_buf
+        self.path_or_buf = _expand_user(path_or_buf)
         self.sep = sep
         self.na_rep = na_rep
         self.float_format = float_format
diff --git a/pandas/core/frame.py b/pandas/core/frame.py
index a3e5e7820..64a166390 100644
--- a/pandas/core/frame.py
+++ b/pandas/core/frame.py
@@ -53,7 +53,6 @@ from pandas.util.decorators import (cache_readonly, deprecate, Appender,
 from pandas.tseries.period import PeriodIndex
 from pandas.tseries.index import DatetimeIndex
 from pandas.tseries.tdi import TimedeltaIndex
-from pandas.io.common import _expand_user
 
 import pandas.core.algorithms as algos
 import pandas.core.base as base
@@ -1315,7 +1314,6 @@ class DataFrame(NDFrame):
             .. versionadded:: 0.16.0
 
         """
-        path_or_buf = _expand_user(path_or_buf)
         formatter = fmt.CSVFormatter(self, path_or_buf,
                                      line_terminator=line_terminator,
                                      sep=sep, encoding=encoding,
@@ -1518,7 +1516,6 @@ class DataFrame(NDFrame):
                           FutureWarning, stacklevel=2)
             col_space = colSpace
 
-        buf = _expand_user(buf)
         formatter = fmt.DataFrameFormatter(self, buf=buf, columns=columns,
                                            col_space=col_space, na_rep=na_rep,
                                            formatters=formatters,
@@ -1569,7 +1566,6 @@ class DataFrame(NDFrame):
                           FutureWarning, stacklevel=2)
             col_space = colSpace
 
-        buf = _expand_user(buf)
         formatter = fmt.DataFrameFormatter(self, buf=buf, columns=columns,
                                            col_space=col_space, na_rep=na_rep,
                                            header=header, index=index,
