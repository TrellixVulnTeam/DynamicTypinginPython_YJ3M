commit 49812cf5c4e4907cbab220634baaa9f320f78d2a
Author: William Ayd <william.ayd@icloud.com>
Date:   Tue Feb 13 15:56:31 2018 -0800

    Explicitly set dtype of np.lexsort in group_rank (#19679)

diff --git a/pandas/_libs/groupby_helper.pxi.in b/pandas/_libs/groupby_helper.pxi.in
index 48dac7bf1..1d77a373b 100644
--- a/pandas/_libs/groupby_helper.pxi.in
+++ b/pandas/_libs/groupby_helper.pxi.in
@@ -531,7 +531,7 @@ def group_rank_{{name}}(ndarray[float64_t, ndim=2] out,
     # each label corresponds to a different group value,
     # the mask helps you differentiate missing values before
     # performing sort on the actual values
-    _as = np.lexsort(order)
+    _as = np.lexsort(order).view(dtype=np.int64)
 
     if not ascending:
         _as = _as[::-1]
