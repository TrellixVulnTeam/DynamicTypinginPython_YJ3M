commit e83a29f3a8cdd1e426ff35af89993d11c60725dc
Author: Chang She <chang@lambdafoundry.com>
Date:   Wed May 23 18:50:33 2012 -0400

    DOC: more notifications for daily doc build

diff --git a/doc/make.py b/doc/make.py
index 98767ae67..5568e4a5b 100755
--- a/doc/make.py
+++ b/doc/make.py
@@ -99,26 +99,37 @@ def all():
 def auto_dev_build(debug=False):
     msg = ''
     try:
+        step = 'clean'
         clean()
+        step = 'html'
         html()
-        latex()
+        step = 'upload dev'
         upload_dev()
+        if not debug():
+            sendmail(step)
+
+        step = 'latex'
+        latex()
+        step = 'upload pdf'
         upload_dev_pdf()
         if not debug:
-            sendmail()
+            sendmail(step)
     except (Exception, SystemExit), inst:
         msg += str(inst) + '\n'
-        sendmail(msg)
+        sendmail(step, msg)
 
-def sendmail(err_msg=None):
+def sendmail(step=None, err_msg=None):
     from_name, to_name = _get_config()
 
-    if err_msg is None:
-        msgstr = 'Daily docs build completed successfully'
-        subject = "DOC: daily build successful"
+    if step is None:
+        step = ''
+
+    if err_msg is None or '[ERROR]' not in err_msg:
+        msgstr = 'Daily docs %s completed successfully' % step
+        subject = "DOC: %s successful" % step
     else:
         msgstr = err_msg
-        subject = "DOC: daily build failed"
+        subject = "DOC: %s failed" % step
 
     import smtplib
     from email.MIMEText import MIMEText
