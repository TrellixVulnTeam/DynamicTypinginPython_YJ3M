commit a488ab8c2a63a93f0a3e314fe5b1ba54b43d4118
Author: alimcmaster1 <alimcmaster1@gmail.com>
Date:   Sun Feb 3 17:44:31 2019 +0000

    TST: tests for categorical apply (#25095)

diff --git a/pandas/tests/series/test_apply.py b/pandas/tests/series/test_apply.py
index 90cf6916d..162a27db3 100644
--- a/pandas/tests/series/test_apply.py
+++ b/pandas/tests/series/test_apply.py
@@ -163,6 +163,18 @@ class TestSeriesApply():
         with tm.assert_produces_warning(FutureWarning):
             tsdf.A.agg({'foo': ['sum', 'mean']})
 
+    @pytest.mark.parametrize('series', [
+        ['1-1', '1-1', np.NaN],
+        ['1-1', '1-2', np.NaN]])
+    def test_apply_categorical_with_nan_values(self, series):
+        # GH 20714 bug fixed in: GH 24275
+        s = pd.Series(series, dtype='category')
+        result = s.apply(lambda x: x.split('-')[0])
+        result = result.astype(object)
+        expected = pd.Series(['1', '1', np.NaN], dtype='category')
+        expected = expected.astype(object)
+        tm.assert_series_equal(result, expected)
+
 
 class TestSeriesAggregate():
 
