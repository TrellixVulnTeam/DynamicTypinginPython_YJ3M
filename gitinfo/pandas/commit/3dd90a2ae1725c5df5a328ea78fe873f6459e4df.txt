commit 3dd90a2ae1725c5df5a328ea78fe873f6459e4df
Author: Jeff Reback <jeff@reback.net>
Date:   Tue May 8 07:39:47 2018 -0400

    COMPAT: 32-bit indexing compat (#20977)
    
    xref #20939

diff --git a/pandas/core/indexing.py b/pandas/core/indexing.py
index 858d08d73..2c40be17c 100755
--- a/pandas/core/indexing.py
+++ b/pandas/core/indexing.py
@@ -1318,7 +1318,7 @@ class _NDFrameIndexer(_NDFrameIndexerBase):
                     (indexer,
                      missing) = labels.get_indexer_non_unique(objarr)
                     # 'indexer' has dupes, create 'check' using 'missing'
-                    check = np.zeros(len(objarr))
+                    check = np.zeros(len(objarr), dtype=np.intp)
                     check[missing] = -1
 
                 mask = check == -1
@@ -2469,7 +2469,7 @@ def maybe_convert_indices(indices, n):
         if len(indices) == 0:
             # If list is empty, np.array will return float and cause indexing
             # errors.
-            return np.empty(0, dtype=np.int_)
+            return np.empty(0, dtype=np.intp)
 
     mask = indices < 0
     if mask.any():
