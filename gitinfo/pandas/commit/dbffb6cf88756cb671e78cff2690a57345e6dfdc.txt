commit dbffb6cf88756cb671e78cff2690a57345e6dfdc
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Sun Aug 12 15:55:14 2012 -0400

    BUG: fix performance problem in infer_freq for non-unique indexes (short circuit immediately) close #1686

diff --git a/RELEASE.rst b/RELEASE.rst
index 295ad4297..6727421d5 100644
--- a/RELEASE.rst
+++ b/RELEASE.rst
@@ -78,6 +78,7 @@ pandas 0.8.2
   - Fix method='time' interpolation with intraday data (#1698)
   - Don't plot all-NA DataFrame columns as zeros (#1696)
   - Fix bug in scatter_plot with by option (#1716)
+  - Fix performance problem in infer_freq with lots of non-unique stamps (#1686)
 
 pandas 0.8.1
 ============
diff --git a/pandas/tseries/frequencies.py b/pandas/tseries/frequencies.py
index 198fa142e..af1715409 100644
--- a/pandas/tseries/frequencies.py
+++ b/pandas/tseries/frequencies.py
@@ -733,12 +733,18 @@ class _FrequencyInferer(object):
         if len(index) < 3:
             raise ValueError('Need at least 3 dates to infer frequency')
 
-        self.deltas = lib.unique_deltas(self.values)
-        self.is_unique = len(self.deltas) == 1
         self.is_monotonic = self.index.is_monotonic
 
+    @cache_readonly
+    def deltas(self):
+        return lib.unique_deltas(self.values)
+
+    @cache_readonly
+    def is_unique(self):
+        return len(self.deltas) == 1
+
     def get_freq(self):
-        if not self.is_monotonic:
+        if not self.is_monotonic or not self.index.is_unique:
             return None
 
         delta = self.deltas[0]
