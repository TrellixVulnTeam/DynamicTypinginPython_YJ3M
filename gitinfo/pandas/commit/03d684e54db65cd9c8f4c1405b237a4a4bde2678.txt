commit 03d684e54db65cd9c8f4c1405b237a4a4bde2678
Author: Jeff Reback <jeff@reback.net>
Date:   Tue Mar 15 09:08:22 2016 -0400

    CI: add in support for coverage via Codecov
    
    Author: Jeff Reback <jeff@reback.net>
    
    Closes #12632 from jreback/codecov and squashes the following commits:
    
    47d7351 [Jeff Reback] CI: add codecov
    cf06455 [Jeff Reback] CI: remove BUILD_TYPE env variable

diff --git a/.travis.yml b/.travis.yml
index 0c2f1b0d0..7d31ae65d 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -36,26 +36,26 @@ matrix:
       - LOCALE_OVERRIDE="zh_CN.GB18030"
       - FULL_DEPS=true
       - JOB_TAG=_LOCALE
-      - BUILD_TYPE=conda
     - python: 2.7
       env:
       - JOB_NAME: "27_nslow"
       - NOSE_ARGS="not slow and not disabled"
       - FULL_DEPS=true
       - CLIPBOARD_GUI=gtk2
+      - LINT=true
     - python: 3.4
       env:
       - JOB_NAME: "34_nslow"
       - NOSE_ARGS="not slow and not disabled"
       - FULL_DEPS=true
       - CLIPBOARD=xsel
-      - BUILD_TYPE=conda
     - python: 3.5
       env:
       - JOB_NAME: "35_nslow"
       - NOSE_ARGS="not slow and not network and not disabled"
       - FULL_DEPS=true
       - CLIPBOARD=xsel
+      - COVERAGE=true
     - python: 2.7
       env:
       - JOB_NAME: "27_slow"
@@ -87,14 +87,12 @@ matrix:
       - JOB_NAME: "27_nslow_nnet_COMPAT"
       - NOSE_ARGS="not slow and not network and not disabled"
       - LOCALE_OVERRIDE="it_IT.UTF-8"
-      - BUILD_TYPE=conda
       - INSTALL_TEST=true
       - JOB_TAG=_COMPAT
     - python: 2.7
       env:
       - JOB_NAME: "doc_build"
       - FULL_DEPS=true
-      - BUILD_TYPE=conda
       - DOC_BUILD=true # if rst files were changed, build docs in parallel with tests
       - JOB_TAG=_DOC_BUILD
     allow_failures:
@@ -129,14 +127,12 @@ matrix:
         - JOB_NAME: "27_nslow_nnet_COMPAT"
         - NOSE_ARGS="not slow and not network and not disabled"
         - LOCALE_OVERRIDE="it_IT.UTF-8"
-        - BUILD_TYPE=conda
         - INSTALL_TEST=true
         - JOB_TAG=_COMPAT
       - python: 2.7
         env:
         - JOB_NAME: "doc_build"
         - FULL_DEPS=true
-        - BUILD_TYPE=conda
         - DOC_BUILD=true
         - JOB_TAG=_DOC_BUILD
 
@@ -159,6 +155,7 @@ install:
   - ci/submit_ccache.sh
 
 before_script:
+  - source activate pandas && pip install codecov
   - ci/install_db.sh
 
 script:
@@ -166,7 +163,9 @@ script:
   - ci/run_build_docs.sh
   - ci/script.sh
   - ci/lint.sh
-# nothing here, or failed tests won't fail travis
+
+after_success:
+  - source activate pandas && codecov
 
 after_script:
   - ci/install_test.sh
diff --git a/ci/install_travis.sh b/ci/install_travis.sh
index 996061ac2..07d33f56b 100755
--- a/ci/install_travis.sh
+++ b/ci/install_travis.sh
@@ -85,7 +85,7 @@ conda info -a || exit 1
 
 # build deps
 REQ="ci/requirements-${TRAVIS_PYTHON_VERSION}${JOB_TAG}.build"
-time conda create -n pandas python=$TRAVIS_PYTHON_VERSION nose flake8 || exit 1
+time conda create -n pandas python=$TRAVIS_PYTHON_VERSION nose coverage flake8 || exit 1
 
 # may have additional installation instructions for this build
 INSTALL="ci/install-${TRAVIS_PYTHON_VERSION}${JOB_TAG}.sh"
diff --git a/ci/lint.sh b/ci/lint.sh
index 4350ecd8b..56bfb4cb0 100755
--- a/ci/lint.sh
+++ b/ci/lint.sh
@@ -5,13 +5,19 @@ echo "inside $0"
 source activate pandas
 
 RET=0
-for path in 'core' 'io' 'stats' 'compat' 'sparse' 'tools' 'tseries' 'tests' 'computation' 'util'
-do
-    echo "linting -> pandas/$path"
-    flake8 pandas/$path --filename '*.py'
-    if [ $? -ne "0" ]; then
-        RET=1
-    fi
-done
+
+if [ "$LINT" ]; then
+    echo "Linting"
+    for path in 'core' 'io' 'stats' 'compat' 'sparse' 'tools' 'tseries' 'tests' 'computation' 'util'
+    do
+        echo "linting -> pandas/$path"
+        flake8 pandas/$path --filename '*.py'
+        if [ $? -ne "0" ]; then
+            RET=1
+        fi
+    done
+else
+    echo "NOT Linting"
+fi
 
 exit $RET
diff --git a/ci/script.sh b/ci/script.sh
index b2e02d27c..e2ba883b8 100755
--- a/ci/script.sh
+++ b/ci/script.sh
@@ -19,6 +19,9 @@ fi
 
 if [ "$BUILD_TEST" ]; then
     echo "We are not running nosetests as this is simply a build test."
+elif [ "$COVERAGE" ]; then
+    echo nosetests --exe -A "$NOSE_ARGS" pandas --with-coverage --with-xunit --xunit-file=/tmp/nosetests.xml
+    nosetests --exe -A "$NOSE_ARGS" pandas --with-coverage --cover-package=pandas --cover-tests --with-xunit --xunit-file=/tmp/nosetests.xml
 else
     echo nosetests --exe -A "$NOSE_ARGS" pandas --doctest-tests --with-xunit --xunit-file=/tmp/nosetests.xml
     nosetests --exe -A "$NOSE_ARGS" pandas --doctest-tests --with-xunit --xunit-file=/tmp/nosetests.xml
