commit a35bf1a6ecd76ecbdcb56415966fc7832a3821d7
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Tue Dec 13 17:53:14 2011 -0500

    BLD: don't convert git revision to unicode on Python 2.x

diff --git a/setup.py b/setup.py
index 5049aa91d..687f98050 100755
--- a/setup.py
+++ b/setup.py
@@ -141,7 +141,12 @@ if not ISRELEASED:
         import subprocess
         pipe = subprocess.Popen(["git", "rev-parse", "--short", "HEAD"],
                                 stdout=subprocess.PIPE).stdout
-        rev = pipe.read().strip().decode('ascii')
+        rev = pipe.read().strip()
+
+        # makes distutils blow up on Python 2.7
+        if sys.version_info[0] >= 3:
+            rev = rev.decode('ascii')
+
         FULLVERSION += "-%s" % rev
     except:
         warnings.warn("WARNING: Couldn't get git revision")
