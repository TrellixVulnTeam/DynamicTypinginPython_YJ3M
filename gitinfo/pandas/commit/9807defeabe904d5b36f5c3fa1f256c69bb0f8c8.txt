commit 9807defeabe904d5b36f5c3fa1f256c69bb0f8c8
Author: y-p <yoval@gmx.com>
Date:   Wed Mar 27 03:39:15 2013 +0200

    BLD: fix path handling in test_perf

diff --git a/test_perf.sh b/test_perf.sh
index fdd962358..dbfced1a3 100755
--- a/test_perf.sh
+++ b/test_perf.sh
@@ -9,7 +9,7 @@ echo "Setting the BUILD_CACHE_DIR env var to a temp directory will"
 echo "potentially speed up subsequent runs.\n"
 
 
-cd "$BASEDIR/vb_suite/"
-python test_perf.py $@
+#cd "$BASEDIR/vb_suite/"
+python "$BASEDIR"/vb_suite/test_perf.py $@
 
-cd "$CURDIR"
+#cd "$CURDIR"
diff --git a/vb_suite/test_perf.py b/vb_suite/test_perf.py
index 292b4ad3f..192a11148 100755
--- a/vb_suite/test_perf.py
+++ b/vb_suite/test_perf.py
@@ -232,22 +232,23 @@ def main():
         args.log_file = os.path.abspath(
             os.path.join(REPO_PATH, 'vb_suite.log'))
 
+    saved_dir =  os.path.abspath(os.curdir)
     if args.outdf:
         # not bullet-proof but enough for us
         if os.path.sep not in args.outdf:
-            args.outdf = os.path.join(os.curdir, args.outdf)
+            args.outdf = os.path.join(saved_dir, args.outdf)
 
     if args.log_file:
         # not bullet-proof but enough for us
         if os.path.sep not in args.log_file:
-            args.log_file = os.path.join(os.curdir, args.log_file)
+            args.log_file = os.path.join(saved_dir, args.log_file)
 
     random.seed(args.seed)
     np.random.seed(args.seed)
 
     prprint("LOG_FILE = %s\n" % args.log_file)
 
-    saved_dir = os.path.curdir
+
     # move away from the pandas root dit, to avoid possible import
     # surprises
     os.chdir(os.path.dirname(os.path.abspath(__file__)))
