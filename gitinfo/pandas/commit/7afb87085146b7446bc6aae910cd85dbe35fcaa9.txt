commit 7afb87085146b7446bc6aae910cd85dbe35fcaa9
Author: Martin Winkel <martin.winkel.pps@gmail.com>
Date:   Tue Apr 21 00:34:36 2020 +0200

    added CI checks to avoid direct imports from conftest (#33664)

diff --git a/ci/code_checks.sh b/ci/code_checks.sh
index 45b7db74f..427be459d 100755
--- a/ci/code_checks.sh
+++ b/ci/code_checks.sh
@@ -150,7 +150,13 @@ if [[ -z "$CHECK" || "$CHECK" == "patterns" ]]; then
     # Check for imports from pandas._testing instead of `import pandas._testing as tm`
     invgrep -R --include="*.py*" -E "from pandas._testing import" pandas/tests
     RET=$(($RET + $?)) ; echo $MSG "DONE"
-    invgrep -R --include="*.py*" -E "from pandas.util import testing as tm" pandas/tests
+    invgrep -R --include="*.py*" -E "from pandas import _testing as tm" pandas/tests
+    RET=$(($RET + $?)) ; echo $MSG "DONE"
+
+    # No direct imports from conftest
+    invgrep -R --include="*.py*" -E "conftest import" pandas/tests
+    RET=$(($RET + $?)) ; echo $MSG "DONE"
+    invgrep -R --include="*.py*" -E "import conftest" pandas/tests
     RET=$(($RET + $?)) ; echo $MSG "DONE"
 
     MSG='Check for use of exec' ; echo $MSG
