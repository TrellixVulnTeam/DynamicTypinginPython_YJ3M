commit 885bf173765d5f056ee7407cc242c3aff89f82ac
Author: jreback <jeff@reback.net>
Date:   Fri Oct 11 08:13:39 2013 -0400

    TST: addtl pytables tests

diff --git a/pandas/io/pytables.py b/pandas/io/pytables.py
index 0411934b9..0fff14013 100644
--- a/pandas/io/pytables.py
+++ b/pandas/io/pytables.py
@@ -1801,7 +1801,7 @@ class DataCol(IndexCol):
             elif dtype == u('date'):
                 try:
                     self.data = np.array(
-                        [date.fromordinal(v) for v in data], dtype=object)
+                        [date.fromordinal(v) for v in self.data], dtype=object)
                 except (ValueError):
                     self.data = np.array(
                         [date.fromtimestamp(v) for v in self.data], dtype=object)
@@ -3882,7 +3882,7 @@ def _unconvert_index(data, kind, encoding=None):
                 [date.fromordinal(v) for v in data], dtype=object)
         except (ValueError):
             index = np.array(
-                [date.fromtimestamp(v) for v in self.data], dtype=object)
+                [date.fromtimestamp(v) for v in data], dtype=object)
     elif kind in (u('integer'), u('float')):
         index = np.array(data)
     elif kind in (u('string')):
diff --git a/pandas/io/tests/test_pytables.py b/pandas/io/tests/test_pytables.py
index 835198400..4f03f29d7 100644
--- a/pandas/io/tests/test_pytables.py
+++ b/pandas/io/tests/test_pytables.py
@@ -1809,6 +1809,16 @@ class TestHDFStore(unittest.TestCase):
         import time
         import os
 
+        # original method
+        with ensure_clean(self.path) as store:
+
+            today = datetime.date(2013,9,10)
+            df = DataFrame([1,2,3], index = [today, today, today])
+            store['obj1'] = df
+            result = store['obj1']
+            assert_frame_equal(result, df)
+
+        # with tz setting
         orig_tz = os.environ.get('TZ')
 
         def setTZ(tz):
