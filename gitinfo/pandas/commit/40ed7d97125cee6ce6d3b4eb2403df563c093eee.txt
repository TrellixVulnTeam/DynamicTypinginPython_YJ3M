commit 40ed7d97125cee6ce6d3b4eb2403df563c093eee
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Sat Nov 3 11:23:22 2012 -0400

    BUG: partial indexing bug: python2.5 support + tweak #2107

diff --git a/RELEASE.rst b/RELEASE.rst
index 4fb918d76..a2bc0fa9b 100644
--- a/RELEASE.rst
+++ b/RELEASE.rst
@@ -42,6 +42,7 @@ pandas 0.9.1
   - Enable referencing of Excel columns by their column names (#1936)
   - DataFrame.dot can accept ndarrays (#2042)
   - Support negative periods in Panel.shift (#2164)
+  - Make .drop(...) work with non-unique indexes (#2101)
 
 **Bug fixes**
 
@@ -63,6 +64,7 @@ pandas 0.9.1
   - Use index name(s) (if any) in DataFrame.to_records (#2161)
   - Don't lose index names in Panel.to_frame/DataFrame.to_panel (#2163)
   - Work around length-0 boolean indexing NumPy bug (#2096)
+  - Fix partial integer indexing bug in DataFrame.xs (#2107)
 
 pandas 0.9.0
 ============
diff --git a/pandas/core/frame.py b/pandas/core/frame.py
index d389d8c93..08d4f6561 100644
--- a/pandas/core/frame.py
+++ b/pandas/core/frame.py
@@ -2026,9 +2026,7 @@ class DataFrame(NDFrame):
             else:
                 indexer = loc
                 lev_num = labels._get_level_number(level)
-                lev = labels.levels[lev_num]
-                is_int_type = com.is_integer_dtype(lev)
-                if is_int_type:
+                if labels.levels[lev_num].inferred_type == 'integer':
                     indexer = self.index[loc]
 
             result = self.ix[indexer]
diff --git a/pandas/tests/test_multilevel.py b/pandas/tests/test_multilevel.py
index 2cd568a05..d8fb0cb9b 100644
--- a/pandas/tests/test_multilevel.py
+++ b/pandas/tests/test_multilevel.py
@@ -360,11 +360,10 @@ x   q   30      3    -0.6662 -0.5243 -0.3580  0.89145  2.5838"""
         assert_frame_equal(result, expected)
 
         #GH2107
-        import itertools
         from string import letters
         dates = range(20111201, 20111205)
         ids = letters[:5]
-        idx = MultiIndex.from_tuples([x for x in itertools.product(dates, ids)])
+        idx = MultiIndex.from_tuples([x for x in cart_product(dates, ids)])
         idx.names = ['date', 'secid']
         df = DataFrame(np.random.randn(len(idx), 3), idx, ['X', 'Y', 'Z'])
         rs = df.xs(20111201, level='date')
