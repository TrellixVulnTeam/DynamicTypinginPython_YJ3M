commit 051c3ba307c21dcf0a6122ca2d346977b0b33b35
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Fri May 25 14:52:25 2012 -0400

    ENH: ujson python 3 defines

diff --git a/pandas/src/ujson/python/objToJSON.c b/pandas/src/ujson/python/objToJSON.c
index 3bf99484a..f4bed8f86 100644
--- a/pandas/src/ujson/python/objToJSON.c
+++ b/pandas/src/ujson/python/objToJSON.c
@@ -1086,17 +1086,17 @@ void Object_beginTypeContext (JSOBJ _obj, JSONTypeContext *tc)
         return;
     }
     else
-    if (PyString_Check(obj))
+    if (PyUnicode_Check(obj))
     {
         PRINTMARK();
-        pc->PyTypeToJSON = PyStringToUTF8; tc->type = JT_UTF8;
+        pc->PyTypeToJSON = PyUnicodeToUTF8; tc->type = JT_UTF8;
         return;
     }
     else
-    if (PyUnicode_Check(obj))
+    if (PyString_Check(obj))
     {
         PRINTMARK();
-        pc->PyTypeToJSON = PyUnicodeToUTF8; tc->type = JT_UTF8;
+        pc->PyTypeToJSON = PyStringToUTF8; tc->type = JT_UTF8;
         return;
     }
     else
