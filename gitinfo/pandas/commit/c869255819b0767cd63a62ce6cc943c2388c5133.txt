commit c869255819b0767cd63a62ce6cc943c2388c5133
Author: Terji Petersen <contribute@tensortable.com>
Date:   Sat Dec 21 19:55:52 2019 +0000

    CLN: move code out of try clause in merge.py (#30382)

diff --git a/pandas/core/reshape/merge.py b/pandas/core/reshape/merge.py
index 0fb029c84..3dfd5fed3 100644
--- a/pandas/core/reshape/merge.py
+++ b/pandas/core/reshape/merge.py
@@ -116,20 +116,20 @@ def _groupby_and_merge(
 
     # if we can groupby the rhs
     # then we can get vastly better perf
-    try:
 
-        # we will check & remove duplicates if indicated
-        if check_duplicates:
-            if on is None:
-                on = []
-            elif not isinstance(on, (list, tuple)):
-                on = [on]
-
-            if right.duplicated(by + on).any():
-                _right = right.drop_duplicates(by + on, keep="last")
-                # TODO: use overload to refine return type of drop_duplicates
-                assert _right is not None  # needed for mypy
-                right = _right
+    # we will check & remove duplicates if indicated
+    if check_duplicates:
+        if on is None:
+            on = []
+        elif not isinstance(on, (list, tuple)):
+            on = [on]
+
+        if right.duplicated(by + on).any():
+            _right = right.drop_duplicates(by + on, keep="last")
+            # TODO: use overload to refine return type of drop_duplicates
+            assert _right is not None  # needed for mypy
+            right = _right
+    try:
         rby = right.groupby(by, sort=False)
     except KeyError:
         rby = None
