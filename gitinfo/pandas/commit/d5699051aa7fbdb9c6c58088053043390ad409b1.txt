commit d5699051aa7fbdb9c6c58088053043390ad409b1
Author: Sofiane Mahiou <sofiane-mahiou@hotmail.fr>
Date:   Tue Nov 5 20:57:39 2019 +0000

    TST: Adding styler applymap multindex & code test [Ref: #25858] (#29346)
    
    * TST: Adding styler applymap multindex & code test
    
    Closes gh-25858

diff --git a/pandas/tests/io/formats/test_style.py b/pandas/tests/io/formats/test_style.py
index fa725ccae..e5af74bdd 100644
--- a/pandas/tests/io/formats/test_style.py
+++ b/pandas/tests/io/formats/test_style.py
@@ -376,6 +376,25 @@ class TestStyler:
 
         (df.style.applymap(color_negative_red, subset=idx[:, idx["b", "d"]]).render())
 
+    def test_applymap_subset_multiindex_code(self):
+        # https://github.com/pandas-dev/pandas/issues/25858
+        # Checks styler.applymap works with multindex when codes are provided
+        codes = np.array([[0, 0, 1, 1], [0, 1, 0, 1]])
+        columns = pd.MultiIndex(
+            levels=[["a", "b"], ["%", "#"]], codes=codes, names=["", ""]
+        )
+        df = DataFrame(
+            [[1, -1, 1, 1], [-1, 1, 1, 1]], index=["hello", "world"], columns=columns
+        )
+        pct_subset = pd.IndexSlice[:, pd.IndexSlice[:, "%":"%"]]
+
+        def color_negative_red(val):
+            color = "red" if val < 0 else "black"
+            return "color: %s" % color
+
+        df.loc[pct_subset]
+        df.style.applymap(color_negative_red, subset=pct_subset)
+
     def test_where_with_one_style(self):
         # GH 17474
         def f(x):
