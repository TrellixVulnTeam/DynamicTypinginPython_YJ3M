commit c82d7e28323424e2704e3509d80d03d9bb5a6659
Author: jreback <jeff@reback.net>
Date:   Thu Mar 21 13:44:25 2013 -0400

    BUG: HDFStore bug when appending to a table, .typ not recreated on 2nd appends
          when min_itemsize is specified it caused an Exception

diff --git a/pandas/io/pytables.py b/pandas/io/pytables.py
index 929d9182f..fd9127efa 100644
--- a/pandas/io/pytables.py
+++ b/pandas/io/pytables.py
@@ -1162,6 +1162,10 @@ class DataCol(IndexCol):
             elif self.dtype.startswith('bool'):
                 self.kind = 'bool'
 
+            # set my typ if we need
+            if self.typ is None:
+                self.typ = getattr(self.description,self.cname,None)
+
     def set_atom(self, block, existing_col, min_itemsize, nan_rep, **kwargs):
         """ create and setup my atom from the block b """
 
diff --git a/pandas/io/tests/test_pytables.py b/pandas/io/tests/test_pytables.py
index a40284ff1..158cb3516 100644
--- a/pandas/io/tests/test_pytables.py
+++ b/pandas/io/tests/test_pytables.py
@@ -659,6 +659,15 @@ class TestHDFStore(unittest.TestCase):
             result = store.select('df')
             tm.assert_frame_equal(result, df)
 
+        with ensure_clean(self.path) as store:
+
+            # infer the .typ on subsequent appends
+            df = DataFrame(dict(A = 'foo', B = 'bar'),index=range(10))
+            store.remove('df')
+            store.append('df', df[:5], min_itemsize=200)
+            store.append('df', df[5:], min_itemsize=200)
+            tm.assert_frame_equal(store['df'], df)
+
     def test_append_with_data_columns(self):
 
         with ensure_clean(self.path) as store:
