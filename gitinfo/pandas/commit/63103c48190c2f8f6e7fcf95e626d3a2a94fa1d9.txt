commit 63103c48190c2f8f6e7fcf95e626d3a2a94fa1d9
Author: Chang She <chang@lambdafoundry.com>
Date:   Fri Dec 28 11:51:06 2012 -0500

    BUG: fix for com.in_interactive_session #2585

diff --git a/pandas/core/common.py b/pandas/core/common.py
index e635c6f77..869cc513d 100644
--- a/pandas/core/common.py
+++ b/pandas/core/common.py
@@ -1219,17 +1219,16 @@ def in_interactive_session():
 
     returns True if running under python/ipython interactive shell
     """
-    try:
-        ipy = __IPYTHON__
-        if ipy:
-            return True
-    except:
-        pass
-    finally:
+    def check_main():
         import __main__ as main
         return (not hasattr(main, '__file__') or
                 get_option('mode.sim_interactive'))
 
+    try:
+        return __IPYTHON__ or check_main()
+    except:
+        return check_main()
+
 def in_qtconsole():
     """
     check if we're inside an IPython qtconsole
