commit dc716b061d9a0bc6a59f4e02d72b9952cce28927
Author: Jeff Reback <jeff@reback.net>
Date:   Fri Jun 9 22:09:24 2017 -0400

    COMPAT: numpy 1.13 test compat (#16654)
    
    * COMPAT: numpy 1.13 test compat
    
    * CI: fix doc build to 1.12

diff --git a/ci/requirements-3.6_DOC.build b/ci/requirements-3.6_DOC.build
index bdcfe2810..37faaa7e4 100644
--- a/ci/requirements-3.6_DOC.build
+++ b/ci/requirements-3.6_DOC.build
@@ -1,5 +1,5 @@
 python=3.6*
 python-dateutil
 pytz
-numpy
+numpy=1.12*
 cython
diff --git a/pandas/compat/numpy/__init__.py b/pandas/compat/numpy/__init__.py
index 4a9a2647e..2c5a18973 100644
--- a/pandas/compat/numpy/__init__.py
+++ b/pandas/compat/numpy/__init__.py
@@ -15,6 +15,7 @@ _np_version_under1p10 = _nlv < '1.10'
 _np_version_under1p11 = _nlv < '1.11'
 _np_version_under1p12 = _nlv < '1.12'
 _np_version_under1p13 = _nlv < '1.13'
+_np_version_under1p14 = _nlv < '1.14'
 
 if _nlv < '1.7.0':
     raise ImportError('this version of pandas is incompatible with '
@@ -74,4 +75,6 @@ __all__ = ['np',
            '_np_version_under1p10',
            '_np_version_under1p11',
            '_np_version_under1p12',
+           '_np_version_under1p13',
+           '_np_version_under1p14'
            ]
diff --git a/pandas/tests/test_expressions.py b/pandas/tests/test_expressions.py
index fae7bfa51..08c3a25e6 100644
--- a/pandas/tests/test_expressions.py
+++ b/pandas/tests/test_expressions.py
@@ -13,7 +13,7 @@ import numpy as np
 
 from pandas.core.api import DataFrame, Panel
 from pandas.core.computation import expressions as expr
-from pandas import compat, _np_version_under1p11
+from pandas import compat, _np_version_under1p11, _np_version_under1p13
 from pandas.util.testing import (assert_almost_equal, assert_series_equal,
                                  assert_frame_equal, assert_panel_equal,
                                  assert_panel4d_equal, slow)
@@ -420,6 +420,10 @@ class TestExpressions(object):
             f = getattr(operator, name)
             fe = getattr(operator, sub_funcs[subs[op]])
 
+            # >= 1.13.0 these are now TypeErrors
+            if op == '-' and not _np_version_under1p13:
+                continue
+
             with tm.use_numexpr(True, min_elements=5):
                 with tm.assert_produces_warning(check_stacklevel=False):
                     r = f(df, df)
