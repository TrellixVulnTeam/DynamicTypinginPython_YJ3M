commit 7918d6000d3ccd5d19713698a47b429cecfe1c63
Author: Max Grender-Jones <maxgrenderjones@gmail.com>
Date:   Sat Apr 26 23:47:55 2014 +0100

    Fix for GH 6885 - get_dummies chokes on unicode values

diff --git a/doc/source/release.rst b/doc/source/release.rst
index 8a92b318e..91bf6084e 100644
--- a/doc/source/release.rst
+++ b/doc/source/release.rst
@@ -451,6 +451,7 @@ Bug Fixes
 - Bug in ``DataFrame.plot`` draws unnecessary axes when enabling ``subplots`` and ``kind=scatter`` (:issue:`6951`)
 - Bug in ``read_csv`` from a filesystem with non-utf-8 encoding (:issue:`6807`)
 - Bug in ``iloc`` when setting / aligning (:issue:``6766`)
+- Bug causing UnicodeEncodeError when get_dummies called with unicode values and a prefix (:issue:`6885`)
 
 pandas 0.13.1
 -------------
diff --git a/pandas/core/reshape.py b/pandas/core/reshape.py
index 196b80a83..75b95973a 100644
--- a/pandas/core/reshape.py
+++ b/pandas/core/reshape.py
@@ -1019,7 +1019,7 @@ def get_dummies(data, prefix=None, prefix_sep='_', dummy_na=False):
         dummy_mat[cat.labels == -1] = 0
 
     if prefix is not None:
-        dummy_cols = ['%s%s%s' % (prefix, prefix_sep, str(v))
+        dummy_cols = ['%s%s%s' % (prefix, prefix_sep, v)
                       for v in levels]
     else:
         dummy_cols = levels
diff --git a/pandas/tests/test_reshape.py b/pandas/tests/test_reshape.py
index b04fb979e..424276179 100644
--- a/pandas/tests/test_reshape.py
+++ b/pandas/tests/test_reshape.py
@@ -18,7 +18,7 @@ from numpy.testing import assert_array_equal
 from pandas.core.reshape import (melt, convert_dummies, lreshape, get_dummies,
                                  wide_to_long)
 import pandas.util.testing as tm
-from pandas.compat import StringIO, cPickle, range
+from pandas.compat import StringIO, cPickle, range, u
 
 _multiprocess_can_split_ = True
 
@@ -199,6 +199,16 @@ class TestGetDummies(tm.TestCase):
         exp_just_na = DataFrame(Series(1.0,index=[0]),columns=[nan])
         assert_array_equal(res_just_na.values, exp_just_na.values)
 
+    def test_unicode(self):  # See GH 6885 - get_dummies chokes on unicode values
+        import unicodedata
+        e = 'e'
+        eacute = unicodedata.lookup('LATIN SMALL LETTER E WITH ACUTE')
+        s = [e, eacute, eacute]
+        res = get_dummies(s, prefix='letter')
+        exp = DataFrame({'letter_e': {0: 1.0, 1: 0.0, 2: 0.0},
+                        u('letter_%s') % eacute: {0: 0.0, 1: 1.0, 2: 1.0}})
+        assert_frame_equal(res, exp)
+
 class TestConvertDummies(tm.TestCase):
     def test_convert_dummies(self):
         df = DataFrame({'A': ['foo', 'bar', 'foo', 'bar',
