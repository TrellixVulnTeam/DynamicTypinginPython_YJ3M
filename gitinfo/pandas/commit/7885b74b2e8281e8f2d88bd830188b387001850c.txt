commit 7885b74b2e8281e8f2d88bd830188b387001850c
Author: Chang She <chang@lambdafoundry.com>
Date:   Tue May 1 16:54:27 2012 -0400

    TST: skip timeseries plotting tests if no matplotlib

diff --git a/pandas/tseries/tests/test_plotting.py b/pandas/tseries/tests/test_plotting.py
index e418871c3..eea002af3 100644
--- a/pandas/tseries/tests/test_plotting.py
+++ b/pandas/tseries/tests/test_plotting.py
@@ -21,6 +21,18 @@ import pandas.util.testing as tm
 
 class TestTSPlot(unittest.TestCase):
 
+    @classmethod
+    def setUpClass(cls):
+        import sys
+        if 'IPython' in sys.modules:
+            raise nose.SkipTest
+
+        try:
+            import matplotlib as mpl
+            mpl.use('Agg', warn=False)
+        except ImportError:
+            raise nose.SkipTest
+
     def setUp(self):
         freq = ['S', 'T', 'H', 'D', 'W', 'M', 'Q', 'Y']
         idx = [period_range('12/31/1999', freq=x, periods=100) for x in freq]
