commit 6039aa5a735016242276b979930dfb2c1456958d
Author: Chang She <changshe@gmail.com>
Date:   Mon Sep 17 22:46:56 2012 -0400

    BUG: asof returns different types #1810

diff --git a/pandas/core/index.py b/pandas/core/index.py
index 2b58f9d74..74faa567d 100644
--- a/pandas/core/index.py
+++ b/pandas/core/index.py
@@ -11,7 +11,7 @@ from pandas.util.decorators import cache_readonly
 import pandas.core.common as com
 import pandas.lib as lib
 import pandas._algos as _algos
-
+from pandas.lib import Timestamp
 
 __all__ = ['Index']
 
@@ -434,6 +434,8 @@ class Index(np.ndarray):
             else:
                 return np.nan
 
+        if not isinstance(label, Timestamp):
+            label = Timestamp(label)
         return label
 
     def asof_locs(self, where, mask):
diff --git a/pandas/tests/test_index.py b/pandas/tests/test_index.py
index 81eb18c7e..4d10a22aa 100644
--- a/pandas/tests/test_index.py
+++ b/pandas/tests/test_index.py
@@ -22,6 +22,7 @@ from pandas.tseries.index import _to_m8
 import pandas.tseries.offsets as offsets
 
 import pandas as pd
+from pandas.lib import Timestamp
 
 class TestIndex(unittest.TestCase):
 
@@ -130,6 +131,9 @@ class TestIndex(unittest.TestCase):
         d = self.dateIndex[-1]
         self.assert_(self.dateIndex.asof(d + timedelta(1)) == d)
 
+        d = self.dateIndex[0].to_datetime()
+        self.assert_(isinstance(self.dateIndex.asof(d), Timestamp))
+
     def test_argsort(self):
         result = self.strIndex.argsort()
         expected = np.array(self.strIndex).argsort()
@@ -1677,5 +1681,3 @@ if __name__ == '__main__':
     nose.runmodule(argv=[__file__,'-vvs','-x','--pdb', '--pdb-failure'],
                          # '--with-coverage', '--cover-package=pandas.core'],
                    exit=False)
-
-
