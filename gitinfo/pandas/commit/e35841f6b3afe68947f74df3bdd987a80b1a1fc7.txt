commit e35841f6b3afe68947f74df3bdd987a80b1a1fc7
Author: ganevgv <ganevgv@users.noreply.github.com>
Date:   Thu Nov 7 22:13:27 2019 +0000

    TST: new test for incorrect series assignment (#29378)
    
    * add incorrect series assignment
    
    * add incorrect series assignment
    
    * passes git diff upstream
    
    * change test name
    
    * change name test
    
    Co-Authored-By: Simon Hawkins <simonjayhawkins@gmail.com>

diff --git a/pandas/tests/series/indexing/test_indexing.py b/pandas/tests/series/indexing/test_indexing.py
index 4673dabca..5aba29209 100644
--- a/pandas/tests/series/indexing/test_indexing.py
+++ b/pandas/tests/series/indexing/test_indexing.py
@@ -391,6 +391,22 @@ def test_setslice(datetime_series):
     assert sl.index.is_unique is True
 
 
+def test_2d_to_1d_assignment_raises():
+    x = np.random.randn(2, 2)
+    y = pd.Series(range(2))
+
+    msg = (
+        r"shape mismatch: value array of shape \(2,2\) could not be"
+        r" broadcast to indexing result of shape \(2,\)"
+    )
+    with pytest.raises(ValueError, match=msg):
+        y.loc[range(2)] = x
+
+    msg = r"could not broadcast input array from shape \(2,2\) into shape \(2\)"
+    with pytest.raises(ValueError, match=msg):
+        y.loc[:] = x
+
+
 # FutureWarning from NumPy about [slice(None, 5).
 @pytest.mark.filterwarnings("ignore:Using a non-tuple:FutureWarning")
 def test_basic_getitem_setitem_corner(datetime_series):
