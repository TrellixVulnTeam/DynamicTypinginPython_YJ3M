commit db69993ee63ef32648718d20995080697e8fd749
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Wed Sep 7 18:52:41 2011 -0400

    BUG: r2 needs to use transformed data

diff --git a/pandas/stats/plm.py b/pandas/stats/plm.py
index 7549f7ea3..8dab4b88e 100644
--- a/pandas/stats/plm.py
+++ b/pandas/stats/plm.py
@@ -366,8 +366,8 @@ class PanelOLS(OLS):
 
     @cache_readonly
     def _r2_raw(self):
-        Y = self._y.values.squeeze()
-        X = self._x.values
+        Y = self._y_trans.values.squeeze()
+        X = self._x_trans.values
 
         resid = Y - np.dot(X, self._beta_raw)
 
