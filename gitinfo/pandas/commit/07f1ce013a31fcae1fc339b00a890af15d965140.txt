commit 07f1ce013a31fcae1fc339b00a890af15d965140
Author: Vytautas Jancauskas <unaudio@gmail.com>
Date:   Wed Aug 15 01:49:21 2012 +0300

    Added the iris data set example to tests

diff --git a/pandas/tests/test_rplot.py b/pandas/tests/test_rplot.py
index 7a9589b7b..9681eafca 100644
--- a/pandas/tests/test_rplot.py
+++ b/pandas/tests/test_rplot.py
@@ -254,5 +254,16 @@ class TestRPlot(unittest.TestCase):
 		self.fig = plt.gcf()
 		self.plot.render(self.fig)
 
+	def test_rplot_iris(self):
+		path = os.path.join(curpath(), 'data/iris.csv')
+		plt.figure()
+		self.data = read_csv(path, sep=',')
+		plot = rplot.RPlot(self.data, x='SepalLength', y='SepalWidth')
+		plot + rplot.GeomPoint(colour=rplot.ScaleGradient('PetalLength', colour1=(0.0, 1.0, 0.5), colour2=(1.0, 0.0, 0.5)), 
+			size=rplot.ScaleSize('PetalWidth', min_size=10.0, max_size=200.0),
+			shape=rplot.ScaleShape('Name'))
+		self.fig = plt.gcf()
+		plot.render(self.fig)
+
 if __name__ == '__main__':
 	unittest.main()
\ No newline at end of file
diff --git a/pandas/tools/rplot.py b/pandas/tools/rplot.py
index e9ac6b985..6fa037ccf 100644
--- a/pandas/tools/rplot.py
+++ b/pandas/tools/rplot.py
@@ -138,9 +138,9 @@ class ScaleSize(Scale):
 		data: pandas DataFrame
 		index: pandas DataFrame row index
 		"""
-		x = data[column].iget(index)
-		a = float(min(data[column]))
-		b = float(max(data[column]))
+		x = data[self.column].iget(index)
+		a = float(min(data[self.column]))
+		b = float(max(data[self.column]))
 		return self.transform(self.min_size + ((x - a) / (b - a)) * 
 			(self.max_size - self.min_size))
 
