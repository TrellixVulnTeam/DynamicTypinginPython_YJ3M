commit de22a483ace1c0cb1ff6ac1d245c4afe5e514ce6
Author: pilkibun <51503352+pilkibun@users.noreply.github.com>
Date:   Fri Jun 28 12:33:25 2019 +0000

    TST: Add missing tests for loc slicing of PeriodIndex, TimedeltaIndex (#27086)

diff --git a/pandas/tests/indexing/test_datetime.py b/pandas/tests/indexing/test_datetime.py
index 4c865d00b..d4da34cab 100644
--- a/pandas/tests/indexing/test_datetime.py
+++ b/pandas/tests/indexing/test_datetime.py
@@ -313,3 +313,19 @@ class TestDatetimeIndex:
                                 columns=['value'],
                                 dtype=object)
         tm.assert_frame_equal(result, expected)
+
+    def test_loc_str_slicing(self):
+        ix = pd.period_range(start='2017-01-01', end='2018-01-01', freq='M')
+        ser = ix.to_series()
+        result = ser.loc[:"2017-12"]
+        expected = ser.iloc[:-1]
+
+        tm.assert_series_equal(result, expected)
+
+    def test_loc_label_slicing(self):
+        ix = pd.period_range(start='2017-01-01', end='2018-01-01', freq='M')
+        ser = ix.to_series()
+        result = ser.loc[:ix[-2]]
+        expected = ser.iloc[:-1]
+
+        tm.assert_series_equal(result, expected)
diff --git a/pandas/tests/indexing/test_timedelta.py b/pandas/tests/indexing/test_timedelta.py
index 8e7a71ad3..e3f5bcff4 100644
--- a/pandas/tests/indexing/test_timedelta.py
+++ b/pandas/tests/indexing/test_timedelta.py
@@ -95,3 +95,19 @@ class TestTimedeltaIndexing:
 
         assert expected == result
         tm.assert_frame_equal(df, df_copy)
+
+    def test_loc_str_slicing(self):
+        ix = pd.timedelta_range(start='1 day', end='2 days', freq='1H')
+        ser = ix.to_series()
+        result = ser.loc[:"1 days"]
+        expected = ser.iloc[:-1]
+
+        tm.assert_series_equal(result, expected)
+
+    def test_loc_slicing(self):
+        ix = pd.timedelta_range(start='1 day', end='2 days', freq='1H')
+        ser = ix.to_series()
+        result = ser.loc[:ix[-2]]
+        expected = ser.iloc[:-1]
+
+        tm.assert_series_equal(result, expected)
