commit da8bc6c47a3d1f772d3e5cec00966b58c646a800
Author: Takafumi Arakaki <aka.tkf@gmail.com>
Date:   Sat Apr 21 04:57:53 2012 +0200

    BUG: fix max recursion error in test_reindex_items
    
    It looks like sorting by dtype itself does not work.
    To see that, try this snippet:
    
    >>> from numpy import dtype
    >>> sorted([dtype('bool'), dtype('float64'), dtype('complex64'),
    ...         dtype('float64'), dtype('object')])
    [dtype('bool'),
     dtype('float64'),
     dtype('complex64'),
     dtype('float64'),
     dtype('object')]

diff --git a/pandas/core/internals.py b/pandas/core/internals.py
index 198c57ba2..77969ffa2 100644
--- a/pandas/core/internals.py
+++ b/pandas/core/internals.py
@@ -1135,7 +1135,7 @@ def _consolidate(blocks, items):
     """
     Merge blocks having same dtype
     """
-    get_dtype = lambda x: x.dtype
+    get_dtype = lambda x: x.dtype.name
 
     # sort by dtype
     grouper = itertools.groupby(sorted(blocks, key=get_dtype),
