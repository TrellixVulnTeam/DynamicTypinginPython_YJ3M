commit 698de83989ccd1f606146ab05951c90349cb57c4
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Tue Nov 24 15:27:54 2009 +0000

    fixed numpy.flatiter issue
    
    git-svn-id: http://pandas.googlecode.com/svn/trunk@57 d5231056-7de3-11de-ac95-d976489f1ece

diff --git a/pandas/lib/src/isnull.pyx b/pandas/lib/src/isnull.pyx
index f37b60dbe..16ac405cb 100644
--- a/pandas/lib/src/isnull.pyx
+++ b/pandas/lib/src/isnull.pyx
@@ -18,7 +18,7 @@ cdef ndarray _isnullobj(input):
     iter= PyArray_IterNew(input)
 
     for i from 0 <= i < length:
-        val = PyArray_GETITEM(input, <void *> iter.dataptr)
+        val = PyArray_GETITEM(input, PyArray_ITER_DATA(iter))
 
         if _checknull(val):
             result[i] = 1
diff --git a/pandas/lib/src/tseries.c b/pandas/lib/src/tseries.c
index a4991408d..10ad8e3a0 100644
--- a/pandas/lib/src/tseries.c
+++ b/pandas/lib/src/tseries.c
@@ -1,4 +1,4 @@
-/* Generated by Cython 0.12.rc1 on Mon Nov 23 17:47:01 2009 */
+/* Generated by Cython 0.12.rc1 on Tue Nov 24 10:14:38 2009 */
 
 #define PY_SSIZE_T_CLEAN
 #include "Python.h"
@@ -888,7 +888,6 @@ static char __pyx_k____mul__[] = "__mul__";
 static char __pyx_k____pow__[] = "__pow__";
 static char __pyx_k____sub__[] = "__sub__";
 static char __pyx_k__asarray[] = "asarray";
-static char __pyx_k__dataptr[] = "dataptr";
 static char __pyx_k__float64[] = "float64";
 static char __pyx_k__keyfunc[] = "keyfunc";
 static char __pyx_k__object_[] = "object_";
@@ -968,7 +967,6 @@ static PyObject *__pyx_n_s__byteorder;
 static PyObject *__pyx_n_s__com;
 static PyObject *__pyx_n_s__copy;
 static PyObject *__pyx_n_s__data;
-static PyObject *__pyx_n_s__dataptr;
 static PyObject *__pyx_n_s__datetime;
 static PyObject *__pyx_n_s__descr;
 static PyObject *__pyx_n_s__dtype;
@@ -1793,7 +1791,7 @@ static  PyArrayObject *__pyx_f_7tseries__isnullobj(PyObject *__pyx_v_input) {
  *     iter= PyArray_IterNew(input)
  * 
  *     for i from 0 <= i < length:             # <<<<<<<<<<<<<<
- *         val = PyArray_GETITEM(input, <void *> iter.dataptr)
+ *         val = PyArray_GETITEM(input, PyArray_ITER_DATA(iter))
  * 
  */
   __pyx_t_7 = __pyx_v_length;
@@ -1802,31 +1800,28 @@ static  PyArrayObject *__pyx_f_7tseries__isnullobj(PyObject *__pyx_v_input) {
     /* "H:\pandas\pandas\lib\src\isnull.pyx":21
  * 
  *     for i from 0 <= i < length:
- *         val = PyArray_GETITEM(input, <void *> iter.dataptr)             # <<<<<<<<<<<<<<
+ *         val = PyArray_GETITEM(input, PyArray_ITER_DATA(iter))             # <<<<<<<<<<<<<<
  * 
  *         if _checknull(val):
  */
     if (!(likely(((__pyx_v_input) == Py_None) || likely(__Pyx_TypeTest(__pyx_v_input, __pyx_ptype_5numpy_ndarray))))) {__pyx_filename = __pyx_f[3]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
-    __pyx_t_5 = PyObject_GetAttr(((PyObject *)__pyx_v_iter), __pyx_n_s__dataptr); if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[3]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
+    __pyx_t_5 = PyArray_GETITEM(((PyArrayObject *)__pyx_v_input), PyArray_ITER_DATA(__pyx_v_iter)); if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[3]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
     __Pyx_GOTREF(__pyx_t_5);
-    __pyx_t_1 = PyArray_GETITEM(((PyArrayObject *)__pyx_v_input), ((void *)__pyx_t_5)); if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[3]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
-    __Pyx_GOTREF(__pyx_t_1);
-    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     __Pyx_DECREF(__pyx_v_val);
-    __pyx_v_val = __pyx_t_1;
-    __pyx_t_1 = 0;
+    __pyx_v_val = __pyx_t_5;
+    __pyx_t_5 = 0;
 
     /* "H:\pandas\pandas\lib\src\isnull.pyx":23
- *         val = PyArray_GETITEM(input, <void *> iter.dataptr)
+ *         val = PyArray_GETITEM(input, PyArray_ITER_DATA(iter))
  * 
  *         if _checknull(val):             # <<<<<<<<<<<<<<
  *             result[i] = 1
  * 
  */
-    __pyx_t_1 = __pyx_f_7tseries__checknull(__pyx_v_val); if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[3]; __pyx_lineno = 23; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
-    __Pyx_GOTREF(__pyx_t_1);
-    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_1); if (unlikely(__pyx_t_11 < 0)) {__pyx_filename = __pyx_f[3]; __pyx_lineno = 23; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
-    __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
+    __pyx_t_5 = __pyx_f_7tseries__checknull(__pyx_v_val); if (unlikely(!__pyx_t_5)) {__pyx_filename = __pyx_f[3]; __pyx_lineno = 23; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
+    __Pyx_GOTREF(__pyx_t_5);
+    __pyx_t_11 = __Pyx_PyObject_IsTrue(__pyx_t_5); if (unlikely(__pyx_t_11 < 0)) {__pyx_filename = __pyx_f[3]; __pyx_lineno = 23; __pyx_clineno = __LINE__; goto __pyx_L1_error;}
+    __Pyx_DECREF(__pyx_t_5); __pyx_t_5 = 0;
     if (__pyx_t_11) {
 
       /* "H:\pandas\pandas\lib\src\isnull.pyx":24
@@ -19416,7 +19411,6 @@ static __Pyx_StringTabEntry __pyx_string_tab[] = {
   {&__pyx_n_s__com, __pyx_k__com, sizeof(__pyx_k__com), 0, 0, 1, 1},
   {&__pyx_n_s__copy, __pyx_k__copy, sizeof(__pyx_k__copy), 0, 0, 1, 1},
   {&__pyx_n_s__data, __pyx_k__data, sizeof(__pyx_k__data), 0, 0, 1, 1},
-  {&__pyx_n_s__dataptr, __pyx_k__dataptr, sizeof(__pyx_k__dataptr), 0, 0, 1, 1},
   {&__pyx_n_s__datetime, __pyx_k__datetime, sizeof(__pyx_k__datetime), 0, 0, 1, 1},
   {&__pyx_n_s__descr, __pyx_k__descr, sizeof(__pyx_k__descr), 0, 0, 1, 1},
   {&__pyx_n_s__dtype, __pyx_k__dtype, sizeof(__pyx_k__dtype), 0, 0, 1, 1},
