commit 9eed2e41610a39eed8fe24a98f30652cbf05865a
Author: immerrr <immerrr@gmail.com>
Date:   Fri Jul 18 21:33:57 2014 +0400

    TST: add mixed-type panels & frames to generate_legacy_pickles
    
    Don't generate them for pre-0.14.1 as they cannot be unpickled.

diff --git a/pandas/io/tests/data/legacy_pickle/0.13.0/0.13.0_x86_64_linux_2.7.8.pickle b/pandas/io/tests/data/legacy_pickle/0.13.0/0.13.0_x86_64_linux_2.7.8.pickle
new file mode 100644
index 000000000..3ffecb77e
Binary files /dev/null and b/pandas/io/tests/data/legacy_pickle/0.13.0/0.13.0_x86_64_linux_2.7.8.pickle differ
diff --git a/pandas/io/tests/data/legacy_pickle/0.14.0/0.14.0_x86_64_linux_2.7.8.pickle b/pandas/io/tests/data/legacy_pickle/0.14.0/0.14.0_x86_64_linux_2.7.8.pickle
new file mode 100644
index 000000000..19cbcddc4
Binary files /dev/null and b/pandas/io/tests/data/legacy_pickle/0.14.0/0.14.0_x86_64_linux_2.7.8.pickle differ
diff --git a/pandas/io/tests/data/legacy_pickle/0.14.1/0.14.1_x86_64_linux_2.7.8.pickle b/pandas/io/tests/data/legacy_pickle/0.14.1/0.14.1_x86_64_linux_2.7.8.pickle
new file mode 100644
index 000000000..af530fcd3
Binary files /dev/null and b/pandas/io/tests/data/legacy_pickle/0.14.1/0.14.1_x86_64_linux_2.7.8.pickle differ
diff --git a/pandas/io/tests/generate_legacy_pickles.py b/pandas/io/tests/generate_legacy_pickles.py
index 3a0386c76..b20a1e5b6 100644
--- a/pandas/io/tests/generate_legacy_pickles.py
+++ b/pandas/io/tests/generate_legacy_pickles.py
@@ -1,6 +1,7 @@
 """ self-contained to write legacy pickle files """
 from __future__ import print_function
 
+
 def _create_sp_series():
 
     import numpy as np
@@ -53,6 +54,7 @@ def _create_sp_frame():
 def create_data():
     """ create the pickle data """
 
+    from distutils.version import LooseVersion
     import numpy as np
     import pandas
     from pandas import (Series,TimeSeries,DataFrame,Panel,
@@ -92,13 +94,23 @@ def create_data():
                                 index=MultiIndex.from_tuples(tuple(zip(*[['bar','bar','baz','baz','baz'],
                                                                        ['one','two','one','two','three']])),
                                                              names=['first','second'])),
-                 dup = DataFrame(np.arange(15).reshape(5, 3).astype(np.float64),
-                                 columns=['A', 'B', 'A']))
+                 dup=DataFrame(np.arange(15).reshape(5, 3).astype(np.float64),
+                               columns=['A', 'B', 'A']))
     panel = dict(float = Panel(dict(ItemA = frame['float'], ItemB = frame['float']+1)),
                  dup = Panel(np.arange(30).reshape(3, 5, 2).astype(np.float64),
                              items=['A', 'B', 'A']))
 
+    if LooseVersion(pandas.__version__) >= '0.14.1':
+        # Pre-0.14.1 versions generated non-unpicklable mixed-type frames and
+        # panels if their columns/items were non-unique.
+        mixed_dup_df = DataFrame(data)
+        mixed_dup_df.columns = list("ABCDA")
+
+        mixed_dup_panel = Panel(dict(ItemA=frame['float'], ItemB=frame['int']))
+        mixed_dup_panel.items = ['ItemA', 'ItemA']
 
+        frame['mixed_dup'] = mixed_dup_df
+        panel['mixed_dup'] = mixed_dup_panel
 
     return dict( series = series,
                  frame = frame,
