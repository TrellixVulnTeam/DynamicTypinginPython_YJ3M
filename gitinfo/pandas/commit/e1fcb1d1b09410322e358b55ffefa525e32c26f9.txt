commit e1fcb1d1b09410322e358b55ffefa525e32c26f9
Author: jreback <jeff@reback.net>
Date:   Wed Dec 12 17:43:46 2012 -0500

    BUG: fixed string truncation in values by passing min_itemsize = { 'values' : 1024 }

diff --git a/pandas/io/pytables.py b/pandas/io/pytables.py
index 984ac6d11..3d39bfc60 100644
--- a/pandas/io/pytables.py
+++ b/pandas/io/pytables.py
@@ -1403,8 +1403,16 @@ class Table(object):
 
             # a string column
             if b.dtype.name == 'object':
-                atom  = _tables().StringCol(itemsize = values.dtype.itemsize, shape = shape)
-                utype = 'S8'
+                
+                # specified min_itemsize?
+                if isinstance(min_itemsize, dict):
+                    min_itemsize = int(min_itemsize.get('values'))
+
+                if min_itemsize is None:
+                    min_itemsize = values.dtype.itemsize
+
+                atom  = _tables().StringCol(itemsize = min_itemsize, shape = shape)
+                utype = 'S%s' % min_itemsize
             else:
                 atom  = getattr(_tables(),"%sCol" % b.dtype.name.capitalize())(shape = shape)
                 utype = atom._deftype
diff --git a/pandas/io/tests/test_pytables.py b/pandas/io/tests/test_pytables.py
index 8bb5fdaf5..20129894c 100644
--- a/pandas/io/tests/test_pytables.py
+++ b/pandas/io/tests/test_pytables.py
@@ -320,6 +320,16 @@ class TestHDFStore(unittest.TestCase):
         self.store.append('s4', wp)
         self.assertRaises(Exception, self.store.append, 's4', wp2)
 
+        # avoid truncation on elements
+        df = DataFrame([[123,'asdqwerty'], [345,'dggnhebbsdfbdfb']])
+        self.store.append('df_big',df, min_itemsize = { 'values' : 1024 })
+        tm.assert_frame_equal(self.store.select('df_big'), df)
+
+        # avoid truncation on elements
+        df = DataFrame([[123,'asdqwerty'], [345,'dggnhebbsdfbdfb']])
+        self.store.append('df_big2',df, min_itemsize = { 'values' : 300 })
+        tm.assert_frame_equal(self.store.select('df_big2'), df)
+
     def test_create_table_index(self):
         wp = tm.makePanel()
         self.store.append('p5', wp)
