commit de66b56d865fdf74d19d876696b4b80a1ad5267e
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Mon May 14 20:15:40 2012 -0400

    TST: verify consistently set group name, close #184

diff --git a/pandas/tests/test_groupby.py b/pandas/tests/test_groupby.py
index 524738e09..b1c59bade 100644
--- a/pandas/tests/test_groupby.py
+++ b/pandas/tests/test_groupby.py
@@ -1770,6 +1770,32 @@ class TestGroupBy(unittest.TestCase):
                                       'D' : [foo, bar]})
         assert_frame_equal(result, expected)
 
+    def test_set_group_name(self):
+        def f(group):
+            assert group.name is not None
+            return group
+
+        def freduce(group):
+            assert group.name is not None
+            return group.sum()
+
+        def foo(x):
+            return freduce(x)
+
+        def _check_all(grouped):
+            # make sure all these work
+            grouped.apply(f)
+            grouped.aggregate(freduce)
+            grouped.aggregate({'C': freduce, 'D': freduce})
+            grouped.transform(f)
+
+            grouped['C'].apply(f)
+            grouped['C'].aggregate(freduce)
+            grouped['C'].aggregate([freduce, foo])
+            grouped['C'].transform(f)
+
+        _check_all(self.df.groupby('A'))
+        _check_all(self.df.groupby(['A', 'B']))
 
 
 def _check_groupby(df, result, keys, field, f=lambda x: x.sum()):
