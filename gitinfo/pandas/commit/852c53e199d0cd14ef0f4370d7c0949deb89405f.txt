commit 852c53e199d0cd14ef0f4370d7c0949deb89405f
Author: Pietro Battiston <me@pietrobattiston.it>
Date:   Tue Dec 19 12:12:23 2017 +0100

    BUG: raise error for groupby() with invalid tuple key (#18826)
    
    closes #18798

diff --git a/doc/source/whatsnew/v0.22.0.txt b/doc/source/whatsnew/v0.22.0.txt
index 326f979bd..0579a80aa 100644
--- a/doc/source/whatsnew/v0.22.0.txt
+++ b/doc/source/whatsnew/v0.22.0.txt
@@ -316,6 +316,7 @@ Groupby/Resample/Rolling
 ^^^^^^^^^^^^^^^^^^^^^^^^
 
 - Bug when grouping by a single column and aggregating with a class like ``list`` or ``tuple`` (:issue:`18079`)
+- Fixed regression in :func:`DataFrame.groupby` which would not emit an error when called with a tuple key not in the index (:issue:`18798`)
 -
 -
 
diff --git a/pandas/core/groupby.py b/pandas/core/groupby.py
index b4223ac0a..ced120fbd 100644
--- a/pandas/core/groupby.py
+++ b/pandas/core/groupby.py
@@ -2977,7 +2977,7 @@ def _get_grouper(obj, key=None, axis=0, level=None, sort=True,
 
 
 def _is_label_like(val):
-    return (isinstance(val, compat.string_types) or
+    return (isinstance(val, (compat.string_types, tuple)) or
             (val is not None and is_scalar(val)))
 
 
diff --git a/pandas/tests/groupby/test_groupby.py b/pandas/tests/groupby/test_groupby.py
index 3327612b0..cf4a6ec1c 100644
--- a/pandas/tests/groupby/test_groupby.py
+++ b/pandas/tests/groupby/test_groupby.py
@@ -2750,7 +2750,6 @@ class TestGroupBy(MixIn):
 
         assert "Interpreting tuple 'by' as a list" in str(w[0].message)
 
-    @pytest.mark.xfail(reason="GH-18798")
     def test_tuple_correct_keyerror(self):
         # https://github.com/pandas-dev/pandas/issues/18798
         df = pd.DataFrame(1, index=range(3),
