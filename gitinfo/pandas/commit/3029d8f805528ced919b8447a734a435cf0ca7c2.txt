commit 3029d8f805528ced919b8447a734a435cf0ca7c2
Author: jbrockmendel <jbrockmendel@gmail.com>
Date:   Wed Dec 25 14:28:19 2019 -0800

    CI: clean environment.yml, comment that req-dev is generated (#30392)

diff --git a/environment.yml b/environment.yml
index 2b171d097..f930458d0 100644
--- a/environment.yml
+++ b/environment.yml
@@ -33,7 +33,8 @@ dependencies:
   - nbconvert>=5.4.1
   - nbsphinx
   - pandoc
-  # Dask and its dependencies
+
+  # Dask and its dependencies (that dont install with dask)
   - dask-core
   - toolz>=0.7.3
   - fsspec>=0.5.1
@@ -54,6 +55,8 @@ dependencies:
   - pytest>=5.0.1
   - pytest-cov
   - pytest-xdist>=1.21
+
+  # downstream tests
   - seaborn
   - statsmodels
 
@@ -74,22 +77,28 @@ dependencies:
   - scipy>=1.1
 
   # optional for io
-  - beautifulsoup4>=4.6.0  # pandas.read_html
+  # ---------------
+  # pd.read_html
+  - beautifulsoup4>=4.6.0
+  - html5lib
+  - lxml
+
+  # pd.read_excel, DataFrame.to_excel, pd.ExcelWriter, pd.ExcelFile
+  - openpyxl<=3.0.1
+  - xlrd
+  - xlsxwriter
+  - xlwt
+  - odfpy
+
   - fastparquet>=0.3.2  # pandas.read_parquet, DataFrame.to_parquet
-  - html5lib  # pandas.read_html
-  - lxml  # pandas.read_html
-  - openpyxl<=3.0.1  # pandas.read_excel, DataFrame.to_excel, pandas.ExcelWriter, pandas.ExcelFile
   - pyarrow>=0.13.1  # pandas.read_parquet, DataFrame.to_parquet, pandas.read_feather, DataFrame.to_feather
+  - python-snappy  # required by pyarrow
+
   - pyqt>=5.9.2  # pandas.read_clipboard
   - pytables>=3.4.2  # pandas.read_hdf, DataFrame.to_hdf
-  - python-snappy  # required by pyarrow
   - s3fs  # pandas.read_csv... when using 's3://...' path
   - sqlalchemy  # pandas.read_sql, DataFrame.to_sql
   - xarray  # DataFrame.to_xarray
-  - xlrd  # pandas.read_excel, DataFrame.to_excel, pandas.ExcelWriter, pandas.ExcelFile
-  - xlsxwriter  # pandas.read_excel, DataFrame.to_excel, pandas.ExcelWriter, pandas.ExcelFile
-  - xlwt  # pandas.read_excel, DataFrame.to_excel, pandas.ExcelWriter, pandas.ExcelFile
-  - odfpy  # pandas.read_excel
   - pyreadstat  # pandas.read_spss
   - pip:
     - git+https://github.com/pandas-dev/pandas-sphinx-theme.git@master
diff --git a/requirements-dev.txt b/requirements-dev.txt
index 5f67726a3..827bb809d 100644
--- a/requirements-dev.txt
+++ b/requirements-dev.txt
@@ -1,3 +1,6 @@
+# This file is auto-generated from environment.yml, do not modify.
+# See that file for comments about the need/usage of each depdendency.
+
 numpy>=1.15
 python-dateutil>=2.6.1
 pytz
@@ -48,20 +51,20 @@ matplotlib>=2.2.2
 numexpr>=2.6.8
 scipy>=1.1
 beautifulsoup4>=4.6.0
-fastparquet>=0.3.2
 html5lib
 lxml
 openpyxl<=3.0.1
+xlrd
+xlsxwriter
+xlwt
+odfpy
+fastparquet>=0.3.2
 pyarrow>=0.13.1
+python-snappy
 pyqt5>=5.9.2
 tables>=3.4.2
-python-snappy
 s3fs
 sqlalchemy
 xarray
-xlrd
-xlsxwriter
-xlwt
-odfpy
 pyreadstat
 git+https://github.com/pandas-dev/pandas-sphinx-theme.git@master
\ No newline at end of file
diff --git a/scripts/generate_pip_deps_from_conda.py b/scripts/generate_pip_deps_from_conda.py
index 6f809669d..1d2c33aee 100755
--- a/scripts/generate_pip_deps_from_conda.py
+++ b/scripts/generate_pip_deps_from_conda.py
@@ -87,9 +87,14 @@ def main(conda_fname, pip_fname, compare=False):
         elif isinstance(dep, dict) and len(dep) == 1 and "pip" in dep:
             pip_deps += dep["pip"]
         else:
-            raise ValueError("Unexpected dependency {}".format(dep))
+            raise ValueError(f"Unexpected dependency {dep}")
 
-    pip_content = "\n".join(pip_deps)
+    fname = os.path.split(conda_fname)[1]
+    header = (
+        f"# This file is auto-generated from {fname}, do not modify.\n"
+        "# See that file for comments about the need/usage of each depdendency.\n\n"
+    )
+    pip_content = header + "\n".join(pip_deps)
 
     if compare:
         with open(pip_fname) as pip_fd:
