commit 572db3320ef1a476f7853f1acbed2a5a7a80bc66
Author: Kaiqi Dong <kaiqi@kth.se>
Date:   Sat Jan 4 22:33:40 2020 +0100

    PLT: Add tests for missing markers (#30687)

diff --git a/pandas/tests/plotting/test_frame.py b/pandas/tests/plotting/test_frame.py
index bdf37ac7e..1c429bafa 100644
--- a/pandas/tests/plotting/test_frame.py
+++ b/pandas/tests/plotting/test_frame.py
@@ -3271,6 +3271,34 @@ class TestDataFramePlots(TestPlotBase):
         with pytest.raises(TypeError):
             df.plot()
 
+    def test_missing_markers_legend(self):
+        # 14958
+        df = pd.DataFrame(np.random.randn(8, 3), columns=["A", "B", "C"])
+        ax = df.plot(y=["A"], marker="x", linestyle="solid")
+        df.plot(y=["B"], marker="o", linestyle="dotted", ax=ax)
+        df.plot(y=["C"], marker="<", linestyle="dotted", ax=ax)
+
+        self._check_legend_labels(ax, labels=["A", "B", "C"])
+        self._check_legend_marker(ax, expected_markers=["x", "o", "<"])
+
+    def test_missing_markers_legend_using_style(self):
+        # 14563
+        df = pd.DataFrame(
+            {
+                "A": [1, 2, 3, 4, 5, 6],
+                "B": [2, 4, 1, 3, 2, 4],
+                "C": [3, 3, 2, 6, 4, 2],
+                "X": [1, 2, 3, 4, 5, 6],
+            }
+        )
+
+        fig, ax = self.plt.subplots()
+        for kind in "ABC":
+            df.plot("X", kind, label=kind, ax=ax, style=".")
+
+        self._check_legend_labels(ax, labels=["A", "B", "C"])
+        self._check_legend_marker(ax, expected_markers=[".", ".", "."])
+
 
 def _generate_4_axes_via_gridspec():
     import matplotlib.pyplot as plt
