commit d7d96b1b946cae99db2f96c42d224cc860d06125
Author: jbrockmendel <jbrockmendel@gmail.com>
Date:   Wed Jan 8 21:44:37 2020 -0800

    CLN: remove to_M8 (#30840)

diff --git a/pandas/core/arrays/datetimes.py b/pandas/core/arrays/datetimes.py
index d9c4b27da..60ee60876 100644
--- a/pandas/core/arrays/datetimes.py
+++ b/pandas/core/arrays/datetimes.py
@@ -70,22 +70,6 @@ def tz_to_dtype(tz):
         return DatetimeTZDtype(tz=tz)
 
 
-def _to_M8(key, tz=None):
-    """
-    Timestamp-like => dt64
-    """
-    if not isinstance(key, Timestamp):
-        # this also converts strings
-        key = Timestamp(key)
-        if key.tzinfo is not None and tz is not None:
-            # Don't tz_localize(None) if key is already tz-aware
-            key = key.tz_convert(tz)
-        else:
-            key = key.tz_localize(tz)
-
-    return np.int64(conversion.pydt_to_i8(key)).view(_NS_DTYPE)
-
-
 def _field_accessor(name, field, docstring=None):
     def f(self):
         values = self.asi8
diff --git a/pandas/core/indexes/datetimes.py b/pandas/core/indexes/datetimes.py
index 0c40900d5..b62081800 100644
--- a/pandas/core/indexes/datetimes.py
+++ b/pandas/core/indexes/datetimes.py
@@ -16,7 +16,6 @@ from pandas.core.dtypes.missing import is_valid_nat_for_dtype, isna
 from pandas.core.accessor import delegate_names
 from pandas.core.arrays.datetimes import (
     DatetimeArray,
-    _to_M8,
     tz_to_dtype,
     validate_tz_from_dtype,
 )
diff --git a/pandas/tests/tseries/offsets/test_offsets.py b/pandas/tests/tseries/offsets/test_offsets.py
index c8b322b3c..2f00a58fe 100644
--- a/pandas/tests/tseries/offsets/test_offsets.py
+++ b/pandas/tests/tseries/offsets/test_offsets.py
@@ -23,7 +23,7 @@ from pandas.compat.numpy import np_datetime64_compat
 from pandas.errors import PerformanceWarning
 
 import pandas._testing as tm
-from pandas.core.indexes.datetimes import DatetimeIndex, _to_M8, date_range
+from pandas.core.indexes.datetimes import DatetimeIndex, date_range
 from pandas.core.series import Series
 
 from pandas.io.pickle import read_pickle
@@ -81,17 +81,6 @@ class WeekDay:
     SUN = 6
 
 
-####
-# Misc function tests
-####
-
-
-def test_to_M8():
-    valb = datetime(2007, 10, 1)
-    valu = _to_M8(valb)
-    assert isinstance(valu, np.datetime64)
-
-
 #####
 # DateOffset Tests
 #####
