commit 8acdf801c501a0ce2ac14ddd676cd248f0f32180
Author: Jeff Reback <jeff@reback.net>
Date:   Thu Jan 11 08:21:53 2018 -0500

    CI: move location of setting non-blocking IO (#19184)

diff --git a/.travis.yml b/.travis.yml
index 5cc654796..ca1dfcae4 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -95,6 +95,9 @@ matrix:
 
 before_install:
   - echo "before_install"
+  # set non-blocking IO on travis
+  # https://github.com/travis-ci/travis-ci/issues/8920#issuecomment-352661024
+  - python -c 'import os,sys,fcntl; flags = fcntl.fcntl(sys.stdout, fcntl.F_GETFL); fcntl.fcntl(sys.stdout, fcntl.F_SETFL, flags&~os.O_NONBLOCK);'
   - source ci/travis_process_gbq_encryption.sh
   - export PATH="$HOME/miniconda3/bin:$PATH"
   - df -h
diff --git a/ci/install_travis.sh b/ci/install_travis.sh
index 272e7f2e0..4ec5b0a9d 100755
--- a/ci/install_travis.sh
+++ b/ci/install_travis.sh
@@ -101,9 +101,6 @@ time conda create -n pandas --file=${REQ} || exit 1
 
 source activate pandas
 
-# https://github.com/travis-ci/travis-ci/issues/8920#issuecomment-352661024
-python -c "import fcntl; fcntl.fcntl(1, fcntl.F_SETFL, 0)"
-
 # may have addtl installation instructions for this build
 echo
 echo "[build addtl installs]"
