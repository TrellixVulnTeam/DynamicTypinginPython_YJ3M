commit b1b70c7390e589bbfa0d8896aa76e64bec0cf51e
Author: Andrew Wieteska <48889395+arw2019@users.noreply.github.com>
Date:   Tue Jun 30 09:01:23 2020 -0400

    BUG: HDFStore unable to create colindex w/o error thrown (#34983)

diff --git a/doc/source/whatsnew/v1.1.0.rst b/doc/source/whatsnew/v1.1.0.rst
index f172fee7b..0ca19ffd1 100644
--- a/doc/source/whatsnew/v1.1.0.rst
+++ b/doc/source/whatsnew/v1.1.0.rst
@@ -1042,6 +1042,7 @@ I/O
 - Bug in :meth:`read_excel` for ODS files removes 0.0 values (:issue:`27222`)
 - Bug in :meth:`ujson.encode` was raising an `OverflowError` with numbers larger than sys.maxsize (:issue: `34395`)
 - Bug in :meth:`HDFStore.append_to_multiple` was raising a ``ValueError`` when the min_itemsize parameter is set (:issue:`11238`)
+- Bug in :meth:`~HDFStore.create_table` now raises an error when `column` argument was not specified in `data_columns` on input (:issue:`28156`)
 - :meth:`read_json` now could read line-delimited json file from a file url while `lines` and `chunksize` are set.
 
 Plotting
diff --git a/pandas/io/pytables.py b/pandas/io/pytables.py
index 0e5d7b007..981b380f8 100644
--- a/pandas/io/pytables.py
+++ b/pandas/io/pytables.py
@@ -3569,7 +3569,6 @@ class Table(Fixed):
         for c in columns:
             v = getattr(table.cols, c, None)
             if v is not None:
-
                 # remove the index if the kind/optlevel have changed
                 if v.is_indexed:
                     index = v.index
@@ -3597,6 +3596,13 @@ class Table(Fixed):
                             "data_columns when initializing the table."
                         )
                     v.create_index(**kw)
+            elif c in self.non_index_axes[0][1]:
+                # GH 28156
+                raise AttributeError(
+                    f"column {c} is not a data_column.\n"
+                    f"In order to read column {c} you must reload the dataframe \n"
+                    f"into HDFStore and include {c} with the data_columns argument."
+                )
 
     def _read_axes(
         self, where, start: Optional[int] = None, stop: Optional[int] = None
diff --git a/pandas/tests/io/pytables/test_store.py b/pandas/tests/io/pytables/test_store.py
index c69992471..df014171b 100644
--- a/pandas/tests/io/pytables/test_store.py
+++ b/pandas/tests/io/pytables/test_store.py
@@ -1727,6 +1727,37 @@ class TestHDFStore:
                 with pytest.raises(TypeError):
                     store.create_table_index("f2")
 
+    def test_create_table_index_data_columns_argument(self, setup_path):
+        # GH 28156
+
+        with ensure_clean_store(setup_path) as store:
+
+            with catch_warnings(record=True):
+
+                def col(t, column):
+                    return getattr(store.get_storer(t).table.cols, column)
+
+                # data columns
+                df = tm.makeTimeDataFrame()
+                df["string"] = "foo"
+                df["string2"] = "bar"
+                store.append("f", df, data_columns=["string"])
+                assert col("f", "index").is_indexed is True
+                assert col("f", "string").is_indexed is True
+
+                msg = "'Cols' object has no attribute 'string2'"
+                with pytest.raises(AttributeError, match=msg):
+                    col("f", "string2").is_indexed
+
+                # try to index a col which isn't a data_column
+                msg = (
+                    f"column string2 is not a data_column.\n"
+                    f"In order to read column string2 you must reload the dataframe \n"
+                    f"into HDFStore and include string2 with the data_columns argument."
+                )
+                with pytest.raises(AttributeError, match=msg):
+                    store.create_table_index("f", columns=["string2"])
+
     def test_append_hierarchical(self, setup_path):
         index = MultiIndex(
             levels=[["foo", "bar", "baz", "qux"], ["one", "two", "three"]],
