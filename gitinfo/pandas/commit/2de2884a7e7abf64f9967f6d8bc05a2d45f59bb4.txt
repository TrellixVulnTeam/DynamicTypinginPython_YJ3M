commit 2de2884a7e7abf64f9967f6d8bc05a2d45f59bb4
Author: Ka Wo Chen <kawoc@tepper.cmu.edu>
Date:   Sat May 14 08:02:48 2016 -0400

    BUG: GH12896 where extra elements are returned in MultiIndex slicing
    
    closes #12896
    
    Author: Ka Wo Chen <kawoc@tepper.cmu.edu>
    
    Closes #13117 from kawochen/BUG-FIX-12896 and squashes the following commits:
    
    7d49346 [Ka Wo Chen] BUG: GH12896 where extra elements are returned in MultiIndex slicing

diff --git a/doc/source/whatsnew/v0.18.2.txt b/doc/source/whatsnew/v0.18.2.txt
index e92cb8cef..3ac466158 100644
--- a/doc/source/whatsnew/v0.18.2.txt
+++ b/doc/source/whatsnew/v0.18.2.txt
@@ -134,7 +134,7 @@ Bug Fixes
 
 
 
-
+- Bug in ``MultiIndex`` slicing where extra elements were returned when level is non-unique (:issue:`12896`)
 
 
 
diff --git a/pandas/indexes/multi.py b/pandas/indexes/multi.py
index db2f80ae7..6f3360cdf 100644
--- a/pandas/indexes/multi.py
+++ b/pandas/indexes/multi.py
@@ -1761,7 +1761,8 @@ class MultiIndex(Index):
 
             else:
                 m = np.zeros(len(labels), dtype=bool)
-                m[np.in1d(labels, r, assume_unique=True)] = True
+                m[np.in1d(labels, r,
+                          assume_unique=Index(labels).is_unique)] = True
 
             return m
 
diff --git a/pandas/tests/indexing/test_indexing.py b/pandas/tests/indexing/test_indexing.py
index 4b8b5ae25..fdc9d3599 100644
--- a/pandas/tests/indexing/test_indexing.py
+++ b/pandas/tests/indexing/test_indexing.py
@@ -2334,6 +2334,18 @@ Region_1,Site_2,3977723089,A,5/20/2015 8:33,5/20/2015 9:09,Yes,No"""
         self.assertFalse(result.index.is_unique)
         assert_frame_equal(result, expected)
 
+        # GH12896
+        # numpy-implementation dependent bug
+        ints = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 12, 13, 14, 14, 16,
+                17, 18, 19, 200000, 200000]
+        n = len(ints)
+        idx = MultiIndex.from_arrays([['a'] * n, ints])
+        result = Series([1] * n, index=idx)
+        result = result.sort_index()
+        result = result.loc[(slice(None), slice(100000))]
+        expected = Series([1] * (n - 2), index=idx[:-2]).sort_index()
+        assert_series_equal(result, expected)
+
     def test_multiindex_slicers_datetimelike(self):
 
         # GH 7429
