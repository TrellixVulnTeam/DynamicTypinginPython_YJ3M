commit b0b3dd403f69a3a596a1b4077597a746bdd541bd
Author: Vytautas Jancauskas <unaudio@gmail.com>
Date:   Fri Aug 17 17:03:35 2012 +0300

    fix the case when there is no legend

diff --git a/pandas/tools/rplot.py b/pandas/tools/rplot.py
index 713d29895..31b6dda3a 100644
--- a/pandas/tools/rplot.py
+++ b/pandas/tools/rplot.py
@@ -773,7 +773,9 @@ def adjust_subplots(fig, axes, trellis, layers):
 		legend = dictionary_union(legend, layer.legend)
 	patches = []
 	labels = []
-	if len(legend.keys()[0]) == 2:
+	if len(legend.keys()) == 0:
+		key_function = lambda tup: tup
+	elif len(legend.keys()[0]) == 2:
 		key_function = lambda tup: (tup[1])
 	else:
 		key_function = lambda tup: (tup[1], tup[3])
@@ -843,7 +845,9 @@ class RPlot:
 				legend = dictionary_union(legend, layer.legend)
 			patches = []
 			labels = []
-			if len(legend.keys()[0]) == 2:
+			if len(legend.keys()) == 0:
+				key_function = lambda tup: tup
+			elif len(legend.keys()[0]) == 2:
 				key_function = lambda tup: (tup[1])
 			else:
 				key_function = lambda tup: (tup[1], tup[3])
