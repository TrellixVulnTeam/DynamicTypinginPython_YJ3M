commit 231a6da9461a851e9831c3a5a1a70c72fb9ac4e3
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Thu Dec 8 14:49:25 2011 -0500

    ENH: accept ndarray input to __setitem__ in Panel, GH #452

diff --git a/pandas/core/panel.py b/pandas/core/panel.py
index ed5537d0a..f8e7eb664 100644
--- a/pandas/core/panel.py
+++ b/pandas/core/panel.py
@@ -513,7 +513,9 @@ class Panel(NDFrame):
             value = value.reindex(index=self.major_axis,
                                   columns=self.minor_axis)
             mat = value.values
-
+        elif isinstance(value, np.ndarray):
+            assert(value.shape == (N, K))
+            mat = np.asarray(value)
         elif np.isscalar(value):
             dtype = _infer_dtype(value)
             mat = np.empty((N, K), dtype=dtype)
diff --git a/pandas/tests/test_panel.py b/pandas/tests/test_panel.py
index 154e0eb09..4eb5ec043 100644
--- a/pandas/tests/test_panel.py
+++ b/pandas/tests/test_panel.py
@@ -387,6 +387,20 @@ class CheckIndexing(object):
         self.panel['ItemP'] = self.panel['ItemA'] > 0
         self.assert_(self.panel['ItemP'].values.dtype == np.bool_)
 
+    def test_setitem_ndarray(self):
+        from pandas import DateRange, datetools
+
+        timeidx = DateRange(start=datetime(2009,1,1),
+                            end=datetime(2009,12,31),
+                            offset=datetools.MonthEnd())
+        lons_coarse = np.linspace(-177.5, 177.5, 72)
+        lats_coarse = np.linspace(-87.5, 87.5, 36)
+        P = Panel(items=timeidx, major_axis=lons_coarse, minor_axis=lats_coarse)
+        data = np.random.randn(72*36).reshape((72,36))
+        key = datetime(2009,2,28)
+        P[key] = data
+
+        assert_almost_equal(P[key].values, data)
 
     def test_major_xs(self):
         ref = self.panel['ItemA']
