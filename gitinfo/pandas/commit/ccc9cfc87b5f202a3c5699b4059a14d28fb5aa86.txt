commit ccc9cfc87b5f202a3c5699b4059a14d28fb5aa86
Author: Thomas Kluyver <takowl@gmail.com>
Date:   Thu Oct 6 19:39:08 2011 +0100

    All but one test now passing on Python 3.

diff --git a/pandas/core/common.py b/pandas/core/common.py
index 493f26b8e..ea2aea1ef 100644
--- a/pandas/core/common.py
+++ b/pandas/core/common.py
@@ -414,7 +414,7 @@ def rands(n):
     """Generates a random alphanumeric string of length *n*"""
     from random import Random
     import string
-    return ''.join(Random().sample(string.letters+string.digits, n))
+    return ''.join(Random().sample(string.ascii_letters+string.digits, n))
 
 def adjoin(space, *lists):
     """
@@ -485,7 +485,8 @@ class groupby(dict):
     try:
         __iter__ = dict.iteritems
     except AttributeError:  # Python 3
-        __iter__ = dict.items
+        def __iter__(self):
+            return iter(dict.items(self))
 
 def map_indices_py(arr):
     """
diff --git a/pandas/core/frame.py b/pandas/core/frame.py
index b1db6289b..82726c107 100644
--- a/pandas/core/frame.py
+++ b/pandas/core/frame.py
@@ -476,7 +476,7 @@ class DataFrame(NDFrame):
                                default_fill_value=fill_value)
 
     def to_csv(self, path, nanRep='', cols=None, header=True,
-              index=True, index_label=None, mode='wb'):
+              index=True, index_label=None, mode='w'):
         """
         Write DataFrame to a comma-separated values (csv) file
 
@@ -495,7 +495,7 @@ class DataFrame(NDFrame):
             Column label for index column(s) if desired. If None is given, and
             `header` and `index` are True, then the index names are used. A
             sequence should be given if the DataFrame uses MultiIndex.
-        mode : Python write mode, default 'wb'
+        mode : Python write mode, default 'w'
         """
         f = open(path, mode)
         csvout = csv.writer(f)
@@ -670,7 +670,7 @@ class DataFrame(NDFrame):
 
     def get_dtype_counts(self):
         counts = {}
-        for _, series in self.iteritems():
+        for _, series in self.iterkv():
             if series.dtype in counts:
                 counts[series.dtype] += 1
             else:
diff --git a/pandas/tests/test_index.py b/pandas/tests/test_index.py
index 70f1946b0..c8d225ad9 100644
--- a/pandas/tests/test_index.py
+++ b/pandas/tests/test_index.py
@@ -800,7 +800,7 @@ class TestMultiIndex(unittest.TestCase):
         assert_almost_equal(r1, rexp1)
 
         self.assertRaises(Exception, idx1.get_indexer,
-                          list(zip(*idx2.get_tuple_index())[0]))
+                          list(list(zip(*idx2.get_tuple_index()))[0]))
 
     def test_format(self):
         self.index.format()
