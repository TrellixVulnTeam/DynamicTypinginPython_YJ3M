commit a14874f3e85bae66c32ab1ae4c1cd8a72e741ffe
Author: Tom Augspurger <TomAugspurger@users.noreply.github.com>
Date:   Fri Jun 21 17:10:44 2019 -0500

    xfail test_missing_required_dependency test (#26993)

diff --git a/pandas/tests/test_downstream.py b/pandas/tests/test_downstream.py
index 9fe8b0f95..bb662e996 100644
--- a/pandas/tests/test_downstream.py
+++ b/pandas/tests/test_downstream.py
@@ -133,13 +133,20 @@ def test_pyarrow(df):
     tm.assert_frame_equal(result, df)
 
 
+@pytest.mark.xfail(reason="pandas-wheels-50", strict=False)
 def test_missing_required_dependency():
     # GH 23868
-    # use the -S flag to disable site-packages
-    call = ['python', '-S', '-c', 'import pandas']
+    # To ensure proper isolation, we pass these flags
+    # -S : disable site-packages
+    # -s : disable user site-packages
+    # -E : disable PYTHON* env vars, especially PYTHONPATH
+    # And, that's apparently not enough, so we give up.
+    # https://github.com/MacPython/pandas-wheels/pull/50
+    call = ['python', '-sSE', '-c', 'import pandas']
 
     with pytest.raises(subprocess.CalledProcessError) as exc:
         subprocess.check_output(call, stderr=subprocess.STDOUT)
 
     output = exc.value.stdout.decode()
-    assert all(x in output for x in ['numpy', 'pytz', 'dateutil'])
+    for name in ['numpy', 'pytz', 'dateutil']:
+        assert name in output
