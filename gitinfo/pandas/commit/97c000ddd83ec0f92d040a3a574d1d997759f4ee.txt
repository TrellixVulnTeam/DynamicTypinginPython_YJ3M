commit 97c000ddd83ec0f92d040a3a574d1d997759f4ee
Author: Vytautas Jancauskas <unaudio@gmail.com>
Date:   Tue Aug 14 01:22:42 2012 +0300

    Added test_sequence_layers method

diff --git a/pandas/tests/test_rplot.py b/pandas/tests/test_rplot.py
index 3c3a81b46..a9d51f47b 100644
--- a/pandas/tests/test_rplot.py
+++ b/pandas/tests/test_rplot.py
@@ -29,6 +29,10 @@ class TestUtilityFunctions(unittest.TestCase):
 	"""
 	Tests for RPlot utility functions.
 	"""
+	def setUp(self):
+		path = os.path.join(curpath(), 'data/iris.csv')
+		self.data = read_csv(path, sep=',')
+
 	def test_make_aes1(self):
 		aes = rplot.make_aes()
 		self.assertTrue(aes['x'] is None)
@@ -74,6 +78,19 @@ class TestUtilityFunctions(unittest.TestCase):
 			if key != 'size' and key != 'shape':
 				self.assertTrue(layer2.aes[key] is None)
 
+	def test_sequence_layers(self):
+		layer1 = rplot.Layer(self.data)
+		layer2 = rplot.GeomPoint(x='SepalLength', y='SepalWidth', size=rplot.ScaleSize('PetalLength'))
+		layer3 = rplot.GeomPolyFit(2)
+		result = rplot.sequence_layers([layer1, layer2, layer3])
+		self.assertEqual(len(result), 3)
+		last = result[-1]
+		self.assertEqual(last.aes['x'], 'SepalLength')
+		self.assertEqual(last.aes['y'], 'SepalWidth')
+		self.assertTrue(isinstance(last.aes['size'], rplot.ScaleSize))
+		self.assertTrue(self.data is last.data)
+		self.assertTrue(rplot.sequence_layers([layer1])[0] is layer1)
+
 class TestScaleGradient(unittest.TestCase):
 	def setUp(self):
 		path = os.path.join(curpath(), 'data/iris.csv')
