commit 11de13140f66b7f04ded53f7890738061512df3b
Author: Tom Augspurger <TomAugspurger@users.noreply.github.com>
Date:   Wed Feb 14 13:56:51 2018 -0600

    CI: Move conda build and ASV check to cron job (#19698)
    
    * CI: Remove ASV run
    
    * CI: Removed conda build test
    
    * Removed asv.sh step
    
    * Removed the ASV matrix item

diff --git a/.travis.yml b/.travis.yml
index 4cbe7f86b..b1168f183 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -52,7 +52,7 @@ matrix:
     # In allow_failures
     - dist: trusty
       env:
-        - JOB="3.5_CONDA_BUILD_TEST" TEST_ARGS="--skip-slow --skip-network" CONDA_BUILD_TEST=true
+        - JOB="3.5" TEST_ARGS="--skip-slow --skip-network"
     - dist: trusty
       env:
         - JOB="3.6" TEST_ARGS="--skip-slow --skip-network" PANDAS_TESTING_MODE="deprecate" CONDA_FORGE=true COVERAGE=true
@@ -73,17 +73,13 @@ matrix:
       env:
         - JOB="3.6_NUMPY_DEV" TEST_ARGS="--skip-slow --skip-network" PANDAS_TESTING_MODE="deprecate"
     # In allow_failures
-    - dist: trusty
-      env:
-        - JOB="3.6_ASV" ASV=true
-    # In allow_failures
     - dist: trusty
       env:
         - JOB="3.6_DOC" DOC=true
     allow_failures:
       - dist: trusty
         env:
-          - JOB="3.5_CONDA_BUILD_TEST" TEST_ARGS="--skip-slow --skip-network" CONDA_BUILD_TEST=true
+          - JOB="3.5" TEST_ARGS="--skip-slow --skip-network"
       - dist: trusty
         env:
           - JOB="2.7_SLOW" SLOW=true
@@ -97,9 +93,6 @@ matrix:
       - dist: trusty
         env:
           - JOB="3.6_NUMPY_DEV" TEST_ARGS="--skip-slow --skip-network" PANDAS_TESTING_MODE="deprecate"
-      - dist: trusty
-        env:
-          - JOB="3.6_ASV" ASV=true
       - dist: trusty
         env:
           - JOB="3.6_DOC" DOC=true
@@ -135,7 +128,6 @@ script:
   - ci/script_single.sh
   - ci/script_multi.sh
   - ci/lint.sh
-  - ci/asv.sh
   - echo "checking imports"
   - source activate pandas && python ci/check_imports.py
   - echo "script done"
diff --git a/ci/asv.sh b/ci/asv.sh
deleted file mode 100755
index 1e9a8d638..000000000
--- a/ci/asv.sh
+++ /dev/null
@@ -1,35 +0,0 @@
-#!/bin/bash
-
-echo "inside $0"
-
-source activate pandas
-
-RET=0
-
-if [ "$ASV" ]; then
-    echo "Check for failed asv benchmarks"
-
-    cd asv_bench
-
-    asv machine --yes
-
-    time asv dev | tee failed_asv.txt
-
-    echo "The following asvs benchmarks (if any) failed."
-
-    cat failed_asv.txt | grep "failed" failed_asv.txt
-
-    if [ $? = "0" ]; then
-        RET=1
-    fi
-
-    echo "DONE displaying failed asvs benchmarks."
-
-    rm failed_asv.txt
-
-    echo "Check for failed asv benchmarks DONE"
-else
-    echo "NOT checking for failed asv benchmarks"
-fi
-
-exit $RET
diff --git a/ci/install_travis.sh b/ci/install_travis.sh
index 6e270519e..458ff083b 100755
--- a/ci/install_travis.sh
+++ b/ci/install_travis.sh
@@ -50,12 +50,6 @@ conda config --set ssl_verify false || exit 1
 conda config --set quiet true --set always_yes true --set changeps1 false || exit 1
 conda update -q conda
 
-if [ "$CONDA_BUILD_TEST" ]; then
-    echo
-    echo "[installing conda-build]"
-    conda install conda-build
-fi
-
 echo
 echo "[add channels]"
 conda config --remove channels defaults || exit 1
@@ -122,7 +116,7 @@ if [ "$COVERAGE" ]; then
 fi
 
 echo
-if [ -z "$PIP_BUILD_TEST" ] && [ -z "$CONDA_BUILD_TEST" ]; then
+if [ -z "$PIP_BUILD_TEST" ] ; then
 
     # build but don't install
     echo "[build em]"
@@ -177,15 +171,6 @@ if [ "$PIP_BUILD_TEST" ]; then
     conda uninstall -y cython
     time pip install dist/*tar.gz || exit 1
 
-elif [ "$CONDA_BUILD_TEST" ]; then
-
-    # build & install testing
-    echo "[building conda recipe]"
-    time conda build ./conda.recipe --python 3.5 -q --no-test || exit 1
-
-    echo "[installing]"
-    conda install pandas --use-local || exit 1
-
 else
 
     # install our pandas
diff --git a/ci/requirements-3.5_CONDA_BUILD_TEST.build b/ci/requirements-3.5.build
similarity index 100%
rename from ci/requirements-3.5_CONDA_BUILD_TEST.build
rename to ci/requirements-3.5.build
diff --git a/ci/requirements-3.5_CONDA_BUILD_TEST.pip b/ci/requirements-3.5.pip
similarity index 100%
rename from ci/requirements-3.5_CONDA_BUILD_TEST.pip
rename to ci/requirements-3.5.pip
diff --git a/ci/requirements-3.5_CONDA_BUILD_TEST.run b/ci/requirements-3.5.run
similarity index 100%
rename from ci/requirements-3.5_CONDA_BUILD_TEST.run
rename to ci/requirements-3.5.run
diff --git a/ci/requirements-3.5_CONDA_BUILD_TEST.sh b/ci/requirements-3.5.sh
similarity index 86%
rename from ci/requirements-3.5_CONDA_BUILD_TEST.sh
rename to ci/requirements-3.5.sh
index 093fdbcf2..529e1e874 100644
--- a/ci/requirements-3.5_CONDA_BUILD_TEST.sh
+++ b/ci/requirements-3.5.sh
@@ -2,7 +2,7 @@
 
 source activate pandas
 
-echo "install 35 CONDA_BUILD_TEST"
+echo "install 35"
 
 # pip install python-dateutil to get latest
 conda remove -n pandas python-dateutil --force
diff --git a/ci/requirements-3.6_ASV.build b/ci/requirements-3.6_ASV.build
deleted file mode 100644
index bc72eed2a..000000000
--- a/ci/requirements-3.6_ASV.build
+++ /dev/null
@@ -1,5 +0,0 @@
-python=3.6*
-python-dateutil
-pytz
-numpy=1.13*
-cython
diff --git a/ci/requirements-3.6_ASV.run b/ci/requirements-3.6_ASV.run
deleted file mode 100644
index 6c45e3371..000000000
--- a/ci/requirements-3.6_ASV.run
+++ /dev/null
@@ -1,25 +0,0 @@
-ipython
-ipykernel
-ipywidgets
-sphinx=1.5*
-nbconvert
-nbformat
-notebook
-matplotlib
-seaborn
-scipy
-lxml
-beautifulsoup4
-html5lib
-pytables
-python-snappy
-openpyxl
-xlrd
-xlwt
-xlsxwriter
-sqlalchemy
-numexpr
-bottleneck
-statsmodels
-xarray
-pyqt
diff --git a/ci/requirements-3.6_ASV.sh b/ci/requirements-3.6_ASV.sh
deleted file mode 100755
index 8a46f85db..000000000
--- a/ci/requirements-3.6_ASV.sh
+++ /dev/null
@@ -1,7 +0,0 @@
-#!/bin/bash
-
-source activate pandas
-
-echo "[install ASV_BUILD deps]"
-
-pip install git+https://github.com/spacetelescope/asv
diff --git a/ci/script_multi.sh b/ci/script_multi.sh
index 766e51625..6c354fc4c 100755
--- a/ci/script_multi.sh
+++ b/ci/script_multi.sh
@@ -18,7 +18,7 @@ fi
 export PYTHONHASHSEED=$(python -c 'import random; print(random.randint(1, 4294967295))')
 echo PYTHONHASHSEED=$PYTHONHASHSEED
 
-if [ "$PIP_BUILD_TEST" ] || [ "$CONDA_BUILD_TEST" ]; then
+if [ "$PIP_BUILD_TEST" ] ; then
     echo "[build-test]"
 
     echo "[env]"
@@ -37,9 +37,6 @@ if [ "$PIP_BUILD_TEST" ] || [ "$CONDA_BUILD_TEST" ]; then
 elif [ "$DOC" ]; then
     echo "We are not running pytest as this is a doc-build"
 
-elif [ "$ASV" ]; then
-    echo "We are not running pytest as this is an asv-build"
-
 elif [ "$COVERAGE" ]; then
     echo pytest -s -n 2 -m "not single" --cov=pandas --cov-report xml:/tmp/cov-multiple.xml --junitxml=/tmp/multiple.xml --strict $TEST_ARGS pandas
     pytest -s -n 2 -m "not single" --cov=pandas --cov-report xml:/tmp/cov-multiple.xml --junitxml=/tmp/multiple.xml --strict $TEST_ARGS pandas
diff --git a/ci/script_single.sh b/ci/script_single.sh
index 153847ab2..74b0e897f 100755
--- a/ci/script_single.sh
+++ b/ci/script_single.sh
@@ -16,15 +16,12 @@ if [ "$SLOW" ]; then
     TEST_ARGS="--only-slow --skip-network"
 fi
 
-if [ "$PIP_BUILD_TEST" ] || [ "$CONDA_BUILD_TEST" ]; then
+if [ "$PIP_BUILD_TEST" ]; then
     echo "We are not running pytest as this is a build test."
 
 elif [ "$DOC" ]; then
     echo "We are not running pytest as this is a doc-build"
 
-elif [ "$ASV" ]; then
-    echo "We are not running pytest as this is an asv-build"
-
 elif [ "$COVERAGE" ]; then
     echo pytest -s -m "single" --strict --cov=pandas --cov-report xml:/tmp/cov-single.xml --junitxml=/tmp/single.xml $TEST_ARGS pandas
     pytest -s -m "single" --strict --cov=pandas --cov-report xml:/tmp/cov-single.xml --junitxml=/tmp/single.xml $TEST_ARGS pandas
