commit 894eac64d764ff3cc417342d8106ba24d78d5d91
Author: h-vetinari <33685575+h-vetinari@users.noreply.github.com>
Date:   Fri Oct 11 17:13:01 2019 +0200

    TST: add test coverage for maybe_promote (#23982)

diff --git a/pandas/tests/dtypes/cast/test_promote.py b/pandas/tests/dtypes/cast/test_promote.py
index 1989ab3f9..5c61574ed 100644
--- a/pandas/tests/dtypes/cast/test_promote.py
+++ b/pandas/tests/dtypes/cast/test_promote.py
@@ -504,6 +504,16 @@ def test_maybe_promote_bytes_with_any(bytes_dtype, any_numpy_dtype_reduced, box)
     )
 
 
+# override parametrization of box to add special case for bytes
+@pytest.mark.parametrize(
+    "box",
+    [
+        (True, None),  # fill_value wrapped in array with auto-dtype (fixed len)
+        (True, "bytes"),  # fill_value wrapped in array with generic bytes-dtype
+        (True, object),  # fill_value wrapped in array with object dtype
+        (False, None),  # fill_value directly
+    ],
+)
 def test_maybe_promote_any_with_bytes(any_numpy_dtype_reduced, bytes_dtype, box):
     dtype = np.dtype(any_numpy_dtype_reduced)
     fill_dtype = np.dtype(bytes_dtype)
