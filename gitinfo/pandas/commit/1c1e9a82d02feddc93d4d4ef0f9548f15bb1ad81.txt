commit 1c1e9a82d02feddc93d4d4ef0f9548f15bb1ad81
Author: y-p <yoval@gmx.com>
Date:   Wed Mar 6 13:15:51 2013 +0200

    TST: pathological objects cause infinite loop when passed to pprint_thing

diff --git a/pandas/tests/test_format.py b/pandas/tests/test_format.py
index dbe697927..0f4048c3e 100644
--- a/pandas/tests/test_format.py
+++ b/pandas/tests/test_format.py
@@ -1076,6 +1076,18 @@ c  10  11  12  13  14\
         result = df.to_html(classes=["sortable", "draggable"])
         self.assertEqual(result, expected)
 
+    def test_pprint_pathological_object(self):
+        """
+        if the test fails, the stack will overflow and nose crash,
+        but it won't hang.
+        """
+        class A:
+            def __getitem__(self, key):
+                return 3 # obviously simplified
+        self.assertTrue("A instance" in repr(A()) )
+        df = pandas.DataFrame([A()])
+        repr(df) # just don't dine
+
     def test_float_trim_zeros(self):
         vals = [2.08430917305e+10, 3.52205017305e+10, 2.30674817305e+10,
                 2.03954217305e+10, 5.59897817305e+10]
