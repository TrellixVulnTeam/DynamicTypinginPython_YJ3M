commit 7bbc4e0bfabe7613a080ae3c373b0bd4d839a11c
Author: y-p <yoval@gmx.com>
Date:   Wed Aug 15 10:23:18 2012 +0300

    console_encode() will default to utf-8 when sys.stdin.encoding is None (ipnb)

diff --git a/pandas/core/common.py b/pandas/core/common.py
index 435f09830..c7de9d6fc 100644
--- a/pandas/core/common.py
+++ b/pandas/core/common.py
@@ -844,7 +844,7 @@ def console_encode(value):
 
     try:
         import sys
-        return value.encode(sys.stdin.encoding, 'replace')
+        return value.encode(sys.stdin.encoding or 'utf-8', 'replace')
     except (AttributeError, TypeError):
         return value.encode('ascii', 'replace')
 
diff --git a/pandas/tests/test_common.py b/pandas/tests/test_common.py
index 77679033c..c00f14d1c 100644
--- a/pandas/tests/test_common.py
+++ b/pandas/tests/test_common.py
@@ -297,6 +297,13 @@ class TestTake(unittest.TestCase):
         expected[:, [2, 4]] = np.nan
         tm.assert_almost_equal(result, expected)
 
+    def test_console_encode(self):
+
+        # stub test
+        # need to mock-out sys.stdin.encoding=None for real test
+        result = com.console_encode(u"\u05d0")
+        assert not result == '?'
+
 
 if __name__ == '__main__':
     import nose
