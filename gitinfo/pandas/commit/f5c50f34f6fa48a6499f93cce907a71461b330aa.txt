commit f5c50f34f6fa48a6499f93cce907a71461b330aa
Author: y-p <yoval@gmx.com>
Date:   Wed Mar 27 20:24:09 2013 +0200

    TST: DataFrame.to_records(index=True) doesn't work with MultiIndex GH3189

diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index fc475122a..e197241fd 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -3303,6 +3303,16 @@ class TestDataFrame(unittest.TestCase, CheckIndexing,
         rs = df.to_records(convert_datetime64=False)
         self.assert_(rs['index'][0] == df.index.values[0])
 
+    def test_to_records_with_multindex(self):
+        # GH3189
+        index = [['bar', 'bar', 'baz', 'baz', 'foo', 'foo', 'qux', 'qux'],
+                 ['one', 'two', 'one', 'two', 'one', 'two', 'one', 'two']]
+        data = np.zeros((8, 4))
+        df = DataFrame(data, index=index)
+        r = df.to_records(index=True)['level_0']
+        self.assertTrue('bar' in r)
+        self.assertTrue('one' not in r)
+
     def test_to_records_with_Mapping_type(self):
         import email
         from email.parser import Parser
