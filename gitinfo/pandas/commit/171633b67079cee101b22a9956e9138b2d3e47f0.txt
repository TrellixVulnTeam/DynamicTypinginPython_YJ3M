commit 171633b67079cee101b22a9956e9138b2d3e47f0
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Fri Nov 2 18:03:22 2012 -0400

    BUG: don't lose index names in to_frame/to_panel. close #2163

diff --git a/RELEASE.rst b/RELEASE.rst
index 513f12e0a..2b8f71cde 100644
--- a/RELEASE.rst
+++ b/RELEASE.rst
@@ -60,6 +60,7 @@ pandas 0.9.1
   - Box datetime64 values as Timestamp objects in Series/DataFrame.iget (#2148)
   - Fix Timestamp indexing bug in DatetimeIndex.insert (#2155)
   - Use index name(s) (if any) in DataFrame.to_records (#2161)
+  - Don't lose index names in Panel.to_frame/DataFrame.to_panel (#2163)
 
 pandas 0.9.0
 ============
diff --git a/pandas/core/frame.py b/pandas/core/frame.py
index 6710bc683..dcb743f94 100644
--- a/pandas/core/frame.py
+++ b/pandas/core/frame.py
@@ -1061,6 +1061,7 @@ class DataFrame(NDFrame):
             selfsorted = self
 
         major_axis, minor_axis = selfsorted.index.levels
+
         major_labels, minor_labels = selfsorted.index.labels
 
         shape = len(major_axis), len(minor_axis)
@@ -1072,6 +1073,13 @@ class DataFrame(NDFrame):
                                       ref_items=selfsorted.columns)
             new_blocks.append(newb)
 
+        # preserve names, if any
+        major_axis = major_axis.copy()
+        major_axis.name = self.index.names[0]
+
+        minor_axis = minor_axis.copy()
+        minor_axis.name = self.index.names[1]
+
         new_axes = [selfsorted.columns, major_axis, minor_axis]
         new_mgr = BlockManager(new_blocks, new_axes)
 
diff --git a/pandas/core/panel.py b/pandas/core/panel.py
index ce5286453..dbdebd470 100755
--- a/pandas/core/panel.py
+++ b/pandas/core/panel.py
@@ -1082,9 +1082,12 @@ class Panel(NDFrame):
         minor_labels = np.arange(K).reshape(1, K)[np.zeros(N, dtype=int)]
         minor_labels = minor_labels.ravel()[selector]
 
+        maj_name = self.major_axis.name or 'major'
+        min_name = self.minor_axis.name or 'minor'
+
         index = MultiIndex(levels=[self.major_axis, self.minor_axis],
                            labels=[major_labels, minor_labels],
-                           names=['major', 'minor'])
+                           names=[maj_name, min_name])
 
         return DataFrame(data, index=index, columns=self.items)
 
diff --git a/pandas/tests/test_panel.py b/pandas/tests/test_panel.py
index 1cf4e73e2..d3726bda8 100755
--- a/pandas/tests/test_panel.py
+++ b/pandas/tests/test_panel.py
@@ -1015,6 +1015,18 @@ class TestPanel(unittest.TestCase, PanelTests, CheckIndexing,
         # names
         self.assertEqual(unfiltered.index.names, ['major', 'minor'])
 
+        # preserve original index names
+        df = DataFrame(np.random.randn(6, 2),
+                       index=[['a', 'a', 'b', 'b', 'c', 'c'],
+                              [0, 1, 0, 1, 0, 1]],
+                       columns=['one', 'two'])
+        df.index.names = ['foo', 'bar']
+        df.columns.name = 'baz'
+
+        rdf = df.to_panel().to_frame()
+        self.assertEqual(rdf.index.names, df.index.names)
+        self.assertEqual(rdf.columns.names, df.columns.names)
+
     def test_to_frame_mixed(self):
         panel = self.panel.fillna(0)
         panel['str'] = 'foo'
@@ -1253,7 +1265,7 @@ class TestPanel(unittest.TestCase, PanelTests, CheckIndexing,
                    [[1.5, np.nan, 3.],
                     [1.5, np.nan, 3.],
                     [1.5, np.nan, 3.],
-                    [1.5, np.nan, 3.]]]) 
+                    [1.5, np.nan, 3.]]])
 
         other = Panel([[[3.6, 2., np.nan],
                         [np.nan, np.nan, 7]]], items=[1])
