commit dd55e440e7d2e45c84a559cd5b572b9c091f84b7
Author: Terji Petersen <contribute@tensortable.com>
Date:   Sat Nov 2 15:36:33 2019 +0000

    BUG: Categorical.from_codes should not warn on empty codes (#29336)

diff --git a/pandas/core/arrays/categorical.py b/pandas/core/arrays/categorical.py
index 4f37bfc52..612e54ba4 100644
--- a/pandas/core/arrays/categorical.py
+++ b/pandas/core/arrays/categorical.py
@@ -673,7 +673,7 @@ class Categorical(ExtensionArray, PandasObject):
             raise ValueError(msg)
 
         codes = np.asarray(codes)  # #21767
-        if not is_integer_dtype(codes):
+        if len(codes) and not is_integer_dtype(codes):
             msg = "codes need to be array-like integers"
             if is_float_dtype(codes):
                 icodes = codes.astype("i8")
diff --git a/pandas/tests/arrays/categorical/test_constructors.py b/pandas/tests/arrays/categorical/test_constructors.py
index 237ec17f5..6eb26d26e 100644
--- a/pandas/tests/arrays/categorical/test_constructors.py
+++ b/pandas/tests/arrays/categorical/test_constructors.py
@@ -526,6 +526,9 @@ class TestCategoricalConstructors:
         codes = [1.0, 2.0, 0]  # integer, but in float dtype
         dtype = CategoricalDtype(categories=["a", "b", "c"])
 
+        # empty codes should not raise for floats
+        Categorical.from_codes([], dtype.categories)
+
         with tm.assert_produces_warning(FutureWarning):
             cat = Categorical.from_codes(codes, dtype.categories)
         tm.assert_numpy_array_equal(cat.codes, np.array([1, 2, 0], dtype="i1"))
