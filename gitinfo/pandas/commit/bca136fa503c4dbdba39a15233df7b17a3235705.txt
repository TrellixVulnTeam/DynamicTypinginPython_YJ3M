commit bca136fa503c4dbdba39a15233df7b17a3235705
Author: Alex Rychyk <odiscort@gmail.com>
Date:   Thu Aug 9 13:33:34 2018 +0300

    Fixed MemoryError in resampling with NaT in TimedeltaIndex (#22253)

diff --git a/doc/source/whatsnew/v0.23.5.txt b/doc/source/whatsnew/v0.23.5.txt
index 916a24635..f9247bc04 100644
--- a/doc/source/whatsnew/v0.23.5.txt
+++ b/doc/source/whatsnew/v0.23.5.txt
@@ -33,7 +33,7 @@ Bug Fixes
 
 **Groupby/Resample/Rolling**
 
--
+- Bug in :meth:`DataFrame.resample` when resampling ``NaT`` in ``TimeDeltaIndex`` (:issue:`13223`).
 -
 
 **Missing**
diff --git a/pandas/core/resample.py b/pandas/core/resample.py
index 08bfec89a..4a3625b2d 100644
--- a/pandas/core/resample.py
+++ b/pandas/core/resample.py
@@ -1383,8 +1383,7 @@ class TimeGrouper(Grouper):
                 data=[], freq=self.freq, name=ax.name)
             return binner, [], labels
 
-        start = ax[0]
-        end = ax[-1]
+        start, end = ax.min(), ax.max()
         labels = binner = TimedeltaIndex(start=start,
                                          end=end,
                                          freq=self.freq,
diff --git a/pandas/tests/test_resample.py b/pandas/tests/test_resample.py
index de4dc2bcf..d11077668 100644
--- a/pandas/tests/test_resample.py
+++ b/pandas/tests/test_resample.py
@@ -2887,6 +2887,16 @@ class TestTimedeltaIndex(Base):
                                                    freq='1T'))
         assert_frame_equal(result, expected)
 
+    def test_resample_with_nat(self):
+        # GH 13223
+        index = pd.to_timedelta(['0s', pd.NaT, '2s'])
+        result = DataFrame({'value': [2, 3, 5]}, index).resample('1s').mean()
+        expected = DataFrame({'value': [2.5, np.nan, 5.0]},
+                             index=timedelta_range('0 day',
+                                                   periods=3,
+                                                   freq='1S'))
+        assert_frame_equal(result, expected)
+
 
 class TestResamplerGrouper(object):
 
