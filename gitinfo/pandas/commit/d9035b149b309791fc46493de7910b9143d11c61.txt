commit d9035b149b309791fc46493de7910b9143d11c61
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Fri Nov 2 19:06:02 2012 -0400

    BUG: work around numpy zero-length boolean indexing bug. close #2096

diff --git a/RELEASE.rst b/RELEASE.rst
index b43fa4fec..4fb918d76 100644
--- a/RELEASE.rst
+++ b/RELEASE.rst
@@ -62,6 +62,7 @@ pandas 0.9.1
   - Fix Timestamp indexing bug in DatetimeIndex.insert (#2155)
   - Use index name(s) (if any) in DataFrame.to_records (#2161)
   - Don't lose index names in Panel.to_frame/DataFrame.to_panel (#2163)
+  - Work around length-0 boolean indexing NumPy bug (#2096)
 
 pandas 0.9.0
 ============
diff --git a/pandas/core/indexing.py b/pandas/core/indexing.py
index 531431c06..1ab2c3b7f 100644
--- a/pandas/core/indexing.py
+++ b/pandas/core/indexing.py
@@ -120,11 +120,15 @@ class _NDFrameIndexer(object):
             try:
                 for item in item_labels[het_idx]:
                     data = self.obj[item]
-                    data.values[plane_indexer] = value
+                    values = data.values
+                    if np.prod(values.shape):
+                        values[plane_indexer] = value
             except ValueError:
                 for item, v in zip(item_labels[het_idx], value):
                     data = self.obj[item]
-                    data.values[plane_indexer] = v
+                    values = data.values
+                    if np.prod(values.shape):
+                        values[plane_indexer] = v
         else:
             if isinstance(indexer, tuple):
                 indexer = _maybe_convert_ix(*indexer)
@@ -135,7 +139,10 @@ class _NDFrameIndexer(object):
             if isinstance(value, DataFrame):
                 value = self._align_frame(indexer, value)
 
-            self.obj.values[indexer] = value
+            # 2096
+            values = self.obj.values
+            if np.prod(values.shape):
+                values[indexer] = value
 
     def _align_series(self, indexer, ser):
         # indexer to assign Series can be tuple or scalar
diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index d8bde3da9..2282ea6ad 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -163,6 +163,18 @@ class CheckIndexing(object):
 
         assert_almost_equal(df.values, arr)
 
+    def test_boolean_index_empty_corner(self):
+        # #2096
+        from pandas import DatetimeIndex
+        blah = DataFrame(np.empty([0, 1]), columns=['A'],
+                         index=DatetimeIndex([]))
+
+        # both of these should succeed trivially
+        k = np.array([], bool)
+
+        blah[k]
+        blah[k] = 0
+
     def test_getitem_ix_mixed_integer(self):
         df = DataFrame(np.random.randn(4, 3),
                        index=[1, 10, 'C', 'E'], columns=[1, 2, 3])
