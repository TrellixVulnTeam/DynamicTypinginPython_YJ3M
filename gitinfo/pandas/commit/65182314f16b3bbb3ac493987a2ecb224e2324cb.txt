commit 65182314f16b3bbb3ac493987a2ecb224e2324cb
Author: Chang She <changshe@gmail.com>
Date:   Mon Dec 3 08:27:52 2012 -0500

    BUG: failure if to_html gets index formatters

diff --git a/pandas/core/format.py b/pandas/core/format.py
index f62e68a0f..3b668f522 100644
--- a/pandas/core/format.py
+++ b/pandas/core/format.py
@@ -622,7 +622,7 @@ class HTMLFormatter(object):
 
         if '__index__' in self.fmt.formatters:
             f = self.fmt.formatters['__index__']
-            index_values = self.frame.index.values.map(f)
+            index_values = self.frame.index.map(f)
         else:
             index_values = self.frame.index.format()
 
diff --git a/pandas/tests/test_format.py b/pandas/tests/test_format.py
index c93ecb591..168e4afd9 100644
--- a/pandas/tests/test_format.py
+++ b/pandas/tests/test_format.py
@@ -328,6 +328,46 @@ class TestDataFrameFormatting(unittest.TestCase):
 </table>"""
         self.assertEquals(result, expected)
 
+    def test_to_html_index_formatter(self):
+        df = DataFrame([[0, 1], [2, 3], [4, 5], [6, 7]],
+                       columns=['foo', None], index=range(4))
+
+        f = lambda x: 'abcd'[x]
+        result = df.to_html(formatters={'__index__': f})
+        expected = """\
+<table border="1" class="dataframe">
+  <thead>
+    <tr style="text-align: right;">
+      <th></th>
+      <th>foo</th>
+      <th></th>
+    </tr>
+  </thead>
+  <tbody>
+    <tr>
+      <td><strong>a</strong></td>
+      <td> 0</td>
+      <td> 1</td>
+    </tr>
+    <tr>
+      <td><strong>b</strong></td>
+      <td> 2</td>
+      <td> 3</td>
+    </tr>
+    <tr>
+      <td><strong>c</strong></td>
+      <td> 4</td>
+      <td> 5</td>
+    </tr>
+    <tr>
+      <td><strong>d</strong></td>
+      <td> 6</td>
+      <td> 7</td>
+    </tr>
+  </tbody>
+</table>"""
+        self.assertEquals(result, expected)
+
 
     def test_nonunicode_nonascii_alignment(self):
         df = DataFrame([["aa\xc3\xa4\xc3\xa4", 1], ["bbbb", 2]])
