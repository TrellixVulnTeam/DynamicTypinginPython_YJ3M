commit 6203957e30321403ee819655877adac2e1f789e6
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Wed Dec 28 17:29:37 2011 -0500

    BUG: return NA in all-NA case in Series.corr instead of raising exception, GH #548

diff --git a/RELEASE.rst b/RELEASE.rst
index 4d8f0d840..cc5d09bb0 100644
--- a/RELEASE.rst
+++ b/RELEASE.rst
@@ -36,7 +36,6 @@ pandas 0.6.2
     prevent accidentally modifying the data source (GH #316)
   - Refactor to remove deprecated ``LongPanel`` class (PR #552)
   - Deprecated ``Panel.to_long``, renamed to ``to_frame``
-  - Added ``DataFrame.to_panel`` with code adapted from ``LongPanel.to_long``
 
 **New features / modules**
 
@@ -47,7 +46,8 @@ pandas 0.6.2
   - Add dict-like ``get`` function to DataFrame and Panel (PR #521)
   - DataFrame.iterrows method for efficiently iterating through the rows of a
     DataFrame
-  - A
+  - Added ``DataFrame.to_panel`` with code adapted from ``LongPanel.to_long``
+  - ``reindex_axis`` method added to DataFrame
 
 **Improvements to existing features**
 
@@ -99,14 +99,15 @@ pandas 0.6.2
   - Fix type inference logic with boolean lists and arrays in DataFrame indexing
   - Use centered sum of squares in R-square computation if entity_effects=True
     in panel regression
+  - Handle all NA case in Series.corr, was raising exception (GH #548)
 
 Thanks
 ------
 - Craig Austin
-- Andreas Hilboll
-- Matt Harrison
 - Mario Gamboa-Cavazos
 - Arthur Gerigk
+- Matt Harrison
+- Andreas Hilboll
 - Adam Klein
 - Gregg Lind
 - Solomon Negusse
@@ -115,6 +116,7 @@ Thanks
 - Sam Reckoner
 - Craig Reeson
 - Jan Schulz
+- Ted Square
 - Dieter Vandenbussche
 
 pandas 0.6.1
diff --git a/pandas/core/nanops.py b/pandas/core/nanops.py
index e304504e7..5861e104c 100644
--- a/pandas/core/nanops.py
+++ b/pandas/core/nanops.py
@@ -230,14 +230,15 @@ def nancorr(a, b, method='pearson'):
     a, b: ndarrays
     """
     assert(len(a) == len(b))
-    if len(a) == 0:
-        return np.nan
 
     valid = notnull(a) & notnull(b)
     if not valid.all():
         a = a[valid]
         b = b[valid]
 
+    if len(a) == 0:
+        return np.nan
+
     f = get_corr_func(method)
     return f(a, b)
 
diff --git a/pandas/tests/test_series.py b/pandas/tests/test_series.py
index d1b0d318a..f09fd6346 100644
--- a/pandas/tests/test_series.py
+++ b/pandas/tests/test_series.py
@@ -981,6 +981,11 @@ class TestSeries(unittest.TestCase, CheckNameIntegration):
         # No overlap
         self.assert_(np.isnan(self.ts[::2].corr(self.ts[1::2])))
 
+        # all NA
+        cp = self.ts[:10].copy()
+        cp[:] = np.nan
+        self.assert_(isnull(cp.corr(cp)))
+
         A = tm.makeTimeSeries()
         B = tm.makeTimeSeries()
         result = A.corr(B)
