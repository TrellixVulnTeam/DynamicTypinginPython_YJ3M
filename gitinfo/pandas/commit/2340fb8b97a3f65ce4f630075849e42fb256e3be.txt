commit 2340fb8b97a3f65ce4f630075849e42fb256e3be
Author: Jeff Reback <jeff@reback.net>
Date:   Wed Mar 1 14:16:50 2017 -0500

    BLD: fix 2.7_LOCALE build
    
    simplify install_travis.sh, always using a clean miniconda install
    bump matplotlib to 1.4.0 for _LOCALE, numpy to 1.8.2
    
    So this removes our testing of mpl 1.2.1 with numpy 1.7.1.
    We *still* test elsewhere 1.7.1, and mpl 1.3.1 (with 1.8.2)
    
    Author: Jeff Reback <jeff@reback.net>
    
    Closes #15540 from jreback/build and squashes the following commits:
    
    58b6f2f [Jeff Reback] BLD: fix 2.7_LOCALE build

diff --git a/ci/install_travis.sh b/ci/install_travis.sh
index 802d8c9f6..b337f6e44 100755
--- a/ci/install_travis.sh
+++ b/ci/install_travis.sh
@@ -32,58 +32,50 @@ edit_init
 home_dir=$(pwd)
 echo "[home_dir: $home_dir]"
 
-MINICONDA_DIR="$HOME/miniconda3"
+# install miniconda
+echo "[Using clean Miniconda install]"
 
-if [ -d "$MINICONDA_DIR" ] && [ -e "$MINICONDA_DIR/bin/conda" ] && [ "$USE_CACHE" ]; then
-    echo "[Miniconda install already present from cache: $MINICONDA_DIR]"
-
-    conda config --set always_yes yes --set changeps1 no || exit 1
-    echo "[update conda]"
-    conda update -q conda || exit 1
-
-    # Useful for debugging any issues with conda
-    conda info -a || exit 1
-
-    # set the compiler cache to work
-    if [ "${TRAVIS_OS_NAME}" == "linux" ]; then
-        echo "[Using ccache]"
-        export PATH=/usr/lib/ccache:/usr/lib64/ccache:$PATH
-        gcc=$(which gcc)
-        echo "[gcc: $gcc]"
-        ccache=$(which ccache)
-        echo "[ccache: $ccache]"
-        export CC='ccache gcc'
-    fi
+MINICONDA_DIR="$HOME/miniconda3"
+if [ -d "$MINICONDA_DIR" ]; then
+    rm -rf "$MINICONDA_DIR"
+fi
 
+# install miniconda
+if [ "${TRAVIS_OS_NAME}" == "osx" ]; then
+    wget http://repo.continuum.io/miniconda/Miniconda3-latest-MacOSX-x86_64.sh -O miniconda.sh || exit 1
+else
+    wget http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh || exit 1
+fi
+bash miniconda.sh -b -p "$MINICONDA_DIR" || exit 1
+
+echo "[update conda]"
+conda config --set ssl_verify false || exit 1
+conda config --set always_yes true --set changeps1 false || exit 1
+conda update -q conda
+
+# add the pandas channel to take priority
+# to add extra packages
+echo "[add channels]"
+conda config --add channels pandas || exit 1
+conda config --remove channels defaults || exit 1
+conda config --add channels defaults || exit 1
+
+conda install anaconda-client
+
+# Useful for debugging any issues with conda
+conda info -a || exit 1
+
+# set the compiler cache to work
+if [ "$USE_CACHE" ] && "${TRAVIS_OS_NAME}" == "linux" ]; then
+    echo "[Using ccache]"
+    export PATH=/usr/lib/ccache:/usr/lib64/ccache:$PATH
+    gcc=$(which gcc)
+    echo "[gcc: $gcc]"
+    ccache=$(which ccache)
+    echo "[ccache: $ccache]"
+    export CC='ccache gcc'
 else
-    echo "[Using clean Miniconda install]"
     echo "[Not using ccache]"
-    rm -rf "$MINICONDA_DIR"
-    # install miniconda
-    if [ "${TRAVIS_OS_NAME}" == "osx" ]; then
-        wget http://repo.continuum.io/miniconda/Miniconda3-latest-MacOSX-x86_64.sh -O miniconda.sh || exit 1
-    else
-        wget http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh || exit 1
-    fi
-    bash miniconda.sh -b -p "$MINICONDA_DIR" || exit 1
-
-    echo "[update conda]"
-    conda config --set ssl_verify false || exit 1
-    conda config --set always_yes true --set changeps1 false || exit 1
-    conda update -q conda
-
-    # add the pandas channel to take priority
-    # to add extra packages
-    echo "[add channels]"
-    conda config --add channels pandas || exit 1
-    conda config --remove channels defaults || exit 1
-    conda config --add channels defaults || exit 1
-
-    conda install anaconda-client
-
-    # Useful for debugging any issues with conda
-    conda info -a || exit 1
-
 fi
 
 # may have installation instructions for this build
diff --git a/ci/requirements-2.7_LOCALE.build b/ci/requirements-2.7_LOCALE.build
index c17730b91..28e2b9685 100644
--- a/ci/requirements-2.7_LOCALE.build
+++ b/ci/requirements-2.7_LOCALE.build
@@ -1,4 +1,4 @@
 python-dateutil
 pytz=2013b
-numpy=1.7.1
+numpy=1.8.2
 cython=0.23
diff --git a/ci/requirements-2.7_LOCALE.run b/ci/requirements-2.7_LOCALE.run
index 1a9b42d83..5d7cc31b7 100644
--- a/ci/requirements-2.7_LOCALE.run
+++ b/ci/requirements-2.7_LOCALE.run
@@ -1,16 +1,14 @@
 python-dateutil
 pytz=2013b
-numpy=1.7.1
+numpy=1.8.2
 xlwt=0.7.5
 openpyxl=1.6.2
 xlsxwriter=0.4.6
 xlrd=0.9.2
 bottleneck=0.8.0
-matplotlib=1.2.1
-patsy=0.1.0
+matplotlib=1.3.1
 sqlalchemy=0.8.1
 html5lib=1.0b2
 lxml=3.2.1
-scipy=0.11.0
+scipy
 beautiful-soup=4.2.1
-bigquery=2.0.17
