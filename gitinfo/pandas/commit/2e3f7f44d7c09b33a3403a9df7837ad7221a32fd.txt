commit 2e3f7f44d7c09b33a3403a9df7837ad7221a32fd
Author: Thomas Kluyver <takowl@gmail.com>
Date:   Sat Mar 31 21:13:32 2012 +0100

    Various fixes so test_url() passes on Python 3.

diff --git a/pandas/core/common.py b/pandas/core/common.py
index 15cc0442d..be605d57e 100644
--- a/pandas/core/common.py
+++ b/pandas/core/common.py
@@ -667,10 +667,10 @@ def _get_handle(path, mode, encoding=None):
 if py3compat.PY3:  # pragma: no cover
     def UnicodeReader(f, dialect=csv.excel, encoding="utf-8", **kwds):
         # ignore encoding
-        return csv.reader(f, dialect=csv.excel, **kwds)
+        return csv.reader(f, dialect=dialect, **kwds)
 
     def UnicodeWriter(f, dialect=csv.excel, encoding="utf-8", **kwds):
-        return csv.writer(f, dialect=csv.excel, **kwds)
+        return csv.writer(f, dialect=dialect, **kwds)
 else:
     class UnicodeReader:
         """
diff --git a/pandas/io/parsers.py b/pandas/io/parsers.py
index f82a7a932..c4a136c8c 100644
--- a/pandas/io/parsers.py
+++ b/pandas/io/parsers.py
@@ -125,9 +125,9 @@ def _read(cls, filepath_or_buffer, kwds):
                 errors = 'strict'
             else:
                 errors = 'replace'
-            filepath_or_buffer = TextIOWrapper(filepath_or_buffer,
-                                               encoding=encoding,
-                                               errors=errors)
+                encoding = 'utf-8'
+            filepath_or_buffer = StringIO(filepath_or_buffer.read().decode(encoding, errors))
+
     if hasattr(filepath_or_buffer, 'read'):
         f = filepath_or_buffer
     else:
diff --git a/setup.py b/setup.py
index adc799ca2..4251ef10d 100755
--- a/setup.py
+++ b/setup.py
@@ -393,7 +393,8 @@ setup(name=DISTNAME,
                 ],
       package_data={'pandas.io' : ['tests/*.h5',
                                    'tests/*.csv',
-                                   'tests/*.xls'],
+                                   'tests/*.xls',
+                                   'tests/*.table'],
                     'pandas.tests' : ['data/*.pickle',
                                       'data/*.csv']
                    },
