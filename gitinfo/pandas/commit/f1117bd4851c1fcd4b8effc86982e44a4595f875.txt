commit f1117bd4851c1fcd4b8effc86982e44a4595f875
Author: Tom Augspurger <TomAugspurger@users.noreply.github.com>
Date:   Wed Dec 4 10:41:34 2019 -0600

    CI: disable numpydev job (#30049)
    
    * CI: disable numpydev job
    
    xref https://github.com/pandas-dev/pandas/issues/30043.
    Will take some time to fix all these cases.
    
    * mypy fixup

diff --git a/ci/azure/posix.yml b/ci/azure/posix.yml
index a10fd402b..081145f84 100644
--- a/ci/azure/posix.yml
+++ b/ci/azure/posix.yml
@@ -44,13 +44,15 @@ jobs:
           PATTERN: "not slow and not network"
           LOCALE_OVERRIDE: "zh_CN.UTF-8"
 
-        py37_np_dev:
-          ENV_FILE: ci/deps/azure-37-numpydev.yaml
-          CONDA_PY: "37"
-          PATTERN: "not slow and not network"
-          TEST_ARGS: "-W error"
-          PANDAS_TESTING_MODE: "deprecate"
-          EXTRA_APT: "xsel"
+        # Disabled for NumPy object-dtype warning.
+        # https://github.com/pandas-dev/pandas/issues/30043
+        # py37_np_dev:
+        #   ENV_FILE: ci/deps/azure-37-numpydev.yaml
+        #   CONDA_PY: "37"
+        #   PATTERN: "not slow and not network"
+        #   TEST_ARGS: "-W error"
+        #   PANDAS_TESTING_MODE: "deprecate"
+        #   EXTRA_APT: "xsel"
 
   steps:
     - script: |
diff --git a/pandas/core/generic.py b/pandas/core/generic.py
index ea73241e5..c52b1c65a 100644
--- a/pandas/core/generic.py
+++ b/pandas/core/generic.py
@@ -9133,7 +9133,7 @@ class NDFrame(PandasObject, SelectionMixin):
             if freq == orig_freq:
                 new_data = self._data.copy()
                 new_data.axes[block_axis] = index.shift(periods)
-            else:
+            elif orig_freq is not None:
                 msg = (
                     f"Given freq {freq.rule_code} does not match"
                     f" PeriodIndex freq {orig_freq.rule_code}"
