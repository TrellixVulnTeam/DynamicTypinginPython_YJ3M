commit 17c0e296ea2e4976527d6fe6aba68d99169066fd
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Tue Feb 7 18:40:58 2012 -0500

    DOC: stable and dev docs to pydata.org

diff --git a/doc/make.py b/doc/make.py
index d7bfbed68..4e7175f1d 100755
--- a/doc/make.py
+++ b/doc/make.py
@@ -26,10 +26,20 @@ os.environ['PYTHONPATH'] = '..'
 SPHINX_BUILD = 'sphinxbuild'
 
 def sf():
-    'push a copy to the sf site'
+    'push a copy to the sf'
     os.system('cd build/html; rsync -avz . wesmckinn,pandas@web.sf.net'
               ':/home/groups/p/pa/pandas/htdocs/ -essh --cvs-exclude')
 
+def upload_dev():
+    'push a copy to the pydata dev directory'
+    os.system('cd build/html; rsync -avz . pandas@pandas.pydata.org'
+              ':/usr/share/nginx/pandas/pandas-docs/dev/ -essh')
+
+def upload_stable():
+    'push a copy to the pydata dev directory'
+    os.system('cd build/html; rsync -avz . pandas@pandas.pydata.org'
+              ':/usr/share/nginx/pandas/pandas-docs/stable/ -essh')
+
 def sfpdf():
     'push a copy to the sf site'
     os.system('cd build/latex; scp pandas.pdf wesmckinn,pandas@web.sf.net'
@@ -84,6 +94,8 @@ def all():
 
 funcd = {
     'html'     : html,
+    'upload_dev' : upload_dev,
+    'upload_stable' : upload_stable,
     'latex'    : latex,
     'clean'    : clean,
     'sf'       : sf,
diff --git a/pandas/core/format.py b/pandas/core/format.py
index 45a575ad2..fb9c8c74c 100644
--- a/pandas/core/format.py
+++ b/pandas/core/format.py
@@ -443,6 +443,8 @@ class GenericArrayFormatter(object):
             if float_format is None:
                 fmt_str = '%% .%dg' % print_config.precision
                 float_format = lambda x: fmt_str % x
+        else:
+            float_format = self.float_format
 
         formatter = _stringify if self.formatter is None else self.formatter
 
@@ -536,11 +538,11 @@ def _trim_zeros(str_floats):
     """
     # TODO: what if exponential?
     trimmed = str_floats
-    while len(str_floats) > 0 and all([x[-1] == '0' for x in trimmed]):
+    while len(str_floats) > 0 and all([x.endswith('0') for x in trimmed]):
         trimmed = [x[:-1] for x in trimmed]
 
     # trim decimal points
-    return [x[:-1] if x[-1] == '.' else x for x in trimmed]
+    return [x[:-1] if x.endswith('.') else x for x in trimmed]
 
 
 def single_column_table(column):
diff --git a/vb_suite/groupby.py b/vb_suite/groupby.py
index 1ae4c72a0..bb1be6331 100644
--- a/vb_suite/groupby.py
+++ b/vb_suite/groupby.py
@@ -56,7 +56,8 @@ df = DataFrame(randn(1000, 1000))
 """
 
 groupby_frame_cython_many_columns = Benchmark('df.groupby(labels).sum()', setup,
-                                              start_date=datetime(2011, 8, 1))
+                                              start_date=datetime(2011, 8, 1),
+                                              logy=True)
 
 #----------------------------------------------------------------------
 # single key, long, integer key
@@ -69,5 +70,5 @@ df = DataFrame(data)
 
 groupby_frame_singlekey_integer = \
     Benchmark('df.groupby(labels).sum()', setup,
-              start_date=datetime(2011, 8, 1))
+              start_date=datetime(2011, 8, 1), logy=True)
 
