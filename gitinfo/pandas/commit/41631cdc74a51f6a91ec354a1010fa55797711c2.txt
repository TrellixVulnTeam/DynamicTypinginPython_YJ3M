commit 41631cdc74a51f6a91ec354a1010fa55797711c2
Author: Chang She <chang@lambdafoundry.com>
Date:   Fri Apr 27 13:56:59 2012 -0400

    BUG: PeriodIndex tries to take frequency from first element. GH #1118

diff --git a/pandas/tseries/period.py b/pandas/tseries/period.py
index 125811821..1ef070859 100644
--- a/pandas/tseries/period.py
+++ b/pandas/tseries/period.py
@@ -508,8 +508,12 @@ class PeriodIndex(Int64Index):
             except:
                 data = np.array(data, dtype='O')
 
+            if freq is None and len(data) > 0:
+                freq = getattr(data[0], 'freq')
+
             if freq is None:
-                raise ValueError('freq cannot be none')
+                raise ValueError(('freq not specified and cannot be inferred '
+                                  'from first element'))
 
             data = _period_unbox_array(data, check=freq)
         else:
@@ -523,15 +527,23 @@ class PeriodIndex(Int64Index):
                     data = lib.period_asfreq_arr(data.values, base1, mult1,
                                                  base2, mult2, b'E')
             else:
+                if freq is None and len(data) > 0:
+                    freq = getattr(data[0], 'freq')
+
                 if freq is None:
-                    raise ValueError('freq cannot be none')
+                    raise ValueError(('freq not specified and cannot be '
+                                      'inferred from first element'))
 
                 if data.dtype == np.datetime64:
                     data = dt64arr_to_periodarr(data, freq)
                 elif data.dtype == np.int64:
                     pass
                 else:
-                    data = data.astype('i8')
+                    try:
+                        data = data.astype('i8')
+                    except:
+                        data = data.astype('O')
+                        data = _period_unbox_array(data, check=freq)
 
         data = np.array(data, dtype=np.int64, copy=False)
 
diff --git a/pandas/tseries/tests/test_period.py b/pandas/tseries/tests/test_period.py
index a3c27baff..dfe0a0411 100644
--- a/pandas/tseries/tests/test_period.py
+++ b/pandas/tseries/tests/test_period.py
@@ -974,6 +974,25 @@ class TestPeriodIndex(TestCase):
         except ValueError:
             pass
 
+        # infer freq from first element
+        i2 = PeriodIndex(end_intv)
+        assert_equal(len(i2), 1)
+        assert_equal(i2[0], end_intv)
+
+        i2 = PeriodIndex([end_intv, Period('2005-05-05', 'B')])
+        assert_equal(len(i2), 2)
+        assert_equal(i2[0], end_intv)
+
+        i2 = PeriodIndex(np.array([end_intv, Period('2005-05-05', 'B')]))
+        assert_equal(len(i2), 2)
+        assert_equal(i2[0], end_intv)
+
+        # Mixed freq should fail
+        vals = [end_intv, Period('2006-12-31', 'w')]
+        self.assertRaises(ValueError, PeriodIndex, vals)
+        vals = np.array(vals)
+        self.assertRaises(ValueError, PeriodIndex, vals)
+
     def test_shift(self):
         ii1 = PeriodIndex(freq='A', start='1/1/2001', end='12/1/2009')
         ii2 = PeriodIndex(freq='A', start='1/1/2002', end='12/1/2010')
