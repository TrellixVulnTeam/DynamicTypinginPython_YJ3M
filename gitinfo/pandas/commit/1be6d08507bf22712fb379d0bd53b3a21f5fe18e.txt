commit 1be6d08507bf22712fb379d0bd53b3a21f5fe18e
Author: Chris Billington <chrisjbillington@gmail.com>
Date:   Thu Feb 9 22:05:43 2012 +1000

    Fixed regression with Panels caused by NDFrame not checking if it was  DataFrame before assuming it had a 'columns' attribute.

diff --git a/pandas/core/generic.py b/pandas/core/generic.py
index 5df457859..780e7dda2 100644
--- a/pandas/core/generic.py
+++ b/pandas/core/generic.py
@@ -291,7 +291,7 @@ class NDFrame(PandasObject):
         self._item_cache.clear()
 
     def _set_item(self, key, value):
-        if isinstance(self.columns, MultiIndex):
+        if hasattr(self,'columns') and isinstance(self.columns, MultiIndex):
             # Pad the key with empty strings if lower levels of the key
             # aren't specified:
             if not isinstance(key, tuple):
@@ -310,7 +310,9 @@ class NDFrame(PandasObject):
         Delete item
         """
         deleted = False
-        if isinstance(self.columns, MultiIndex) and key not in self.columns:
+        if (hasattr(self,'columns') and 
+                isinstance(self.columns, MultiIndex)
+                and key not in self.columns):
             # Allow shorthand to delete all columns whose first len(key)
             # elements match key:
             if not isinstance(key,tuple):
