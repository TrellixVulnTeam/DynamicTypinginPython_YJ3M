commit 8856caf40aed2169e6a942c5bb81cd7f16df41ce
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Wed Jun 6 21:10:23 2012 -0400

    BUG: fix asfreq bug on PeriodIndex

diff --git a/pandas/src/plib.pyx b/pandas/src/plib.pyx
index 41870c3af..8e2e0f2c1 100644
--- a/pandas/src/plib.pyx
+++ b/pandas/src/plib.pyx
@@ -189,7 +189,7 @@ def period_asfreq_arr(ndarray[int64_t] arr, int freq1, int freq2, bint end):
 
     for i in range(n):
         val = func(arr[i], relation, &finfo)
-        if val == -1:
+        if val == INT32_MIN:
             raise ValueError("Unable to convert to desired frequency.")
         result[i] = val
 
diff --git a/pandas/tseries/tests/test_period.py b/pandas/tseries/tests/test_period.py
index ea89cf73f..0bfe60cc5 100644
--- a/pandas/tseries/tests/test_period.py
+++ b/pandas/tseries/tests/test_period.py
@@ -470,7 +470,6 @@ class TestFreqConversion(TestCase):
 
         assert_equal(ival_Q.asfreq('Q'), ival_Q)
 
-
     def test_conv_monthly(self):
         # frequency conversion tests: from Monthly Frequency
 
@@ -977,6 +976,16 @@ class TestPeriodIndex(TestCase):
         exp_index = _get_with_delta(delta)
         self.assert_(result.index.equals(exp_index))
 
+    def test_to_timestamp_quarterly_bug(self):
+        years = np.arange(1960, 2000).repeat(4)
+        quarters = np.tile(range(4), 40)
+
+        pindex = PeriodIndex(year=years, quarter=quarters)
+
+        stamps = pindex.to_timestamp('D', 'end')
+        expected = DatetimeIndex([x.to_timestamp('D', 'end') for x in pindex])
+        self.assert_(stamps.equals(expected))
+
     def test_as_frame_columns(self):
         rng = period_range('1/1/2000', periods=5)
         df = DataFrame(randn(10, 5), columns=rng)
