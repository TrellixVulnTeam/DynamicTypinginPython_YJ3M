commit 24133e8554764e23483faa3ea68263d06697f24a
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Fri Dec 7 17:34:19 2012 -0500

    BUG: don't allow to_panel to succeed if index is not unique. close #2441

diff --git a/RELEASE.rst b/RELEASE.rst
index e3a01caf7..bf8b5cc5c 100644
--- a/RELEASE.rst
+++ b/RELEASE.rst
@@ -140,6 +140,7 @@ pandas 0.10.0
   - Fix GroupBy.apply issue when using BinGrouper to do ts binning (#2300)
   - Fix issues resulting from datetime.datetime columns being converted to
     datetime64 when calling DataFrame.apply. (#2374)
+  - Raise exception when calling to_panel on non uniquely-indexed frame (#2441)
 
 
 pandas 0.9.1
diff --git a/pandas/core/frame.py b/pandas/core/frame.py
index cb7633e32..ffa475db3 100644
--- a/pandas/core/frame.py
+++ b/pandas/core/frame.py
@@ -1200,6 +1200,10 @@ class DataFrame(NDFrame):
             len(self.index.levels) != 2):
             raise AssertionError('Must have 2-level MultiIndex')
 
+        if not self.index.is_unique:
+            raise Exception("Can't convert non-uniquely indexed "
+                            "DataFrame to Panel")
+
         self._consolidate_inplace()
 
         # minor axis must be sorted
diff --git a/pandas/tests/test_panel.py b/pandas/tests/test_panel.py
index cb4cc9eef..355da62b6 100644
--- a/pandas/tests/test_panel.py
+++ b/pandas/tests/test_panel.py
@@ -1128,6 +1128,12 @@ class TestPanel(unittest.TestCase, PanelTests, CheckIndexing,
         panel = df.to_panel()
         self.assert_(isnull(panel[0].ix[1, [0, 1]]).all())
 
+    def test_to_panel_duplicates(self):
+        # #2441
+        df = DataFrame({'a': [0, 0, 1], 'b': [1, 1, 1], 'c': [1, 2, 3]})
+        idf = df.set_index(['a', 'b'])
+        self.assertRaises(Exception, idf.to_panel)
+
     def test_filter(self):
         pass
 
