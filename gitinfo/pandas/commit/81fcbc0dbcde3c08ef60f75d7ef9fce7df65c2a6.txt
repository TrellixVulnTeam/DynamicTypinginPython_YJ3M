commit 81fcbc0dbcde3c08ef60f75d7ef9fce7df65c2a6
Author: jreback <jeff@reback.net>
Date:   Sun Aug 10 09:21:07 2014 -0400

    INT: use platform_int for np.repeat related (GH7975)

diff --git a/pandas/core/groupby.py b/pandas/core/groupby.py
index 1f89bfe4c..7c24c339d 100644
--- a/pandas/core/groupby.py
+++ b/pandas/core/groupby.py
@@ -2318,7 +2318,7 @@ class SeriesGroupBy(GroupBy):
             func = getattr(self,func)
         values = func().values
         counts = self.count().values
-        values = np.repeat(values, counts)
+        values = np.repeat(values, com._ensure_platform_int(counts))
 
         # the values/counts are repeated according to the group index
         indices = self.indices
diff --git a/pandas/tests/test_groupby.py b/pandas/tests/test_groupby.py
index 3a744129f..3def1b74a 100644
--- a/pandas/tests/test_groupby.py
+++ b/pandas/tests/test_groupby.py
@@ -803,7 +803,8 @@ class TestGroupBy(tm.TestCase):
 
         grp=df.groupby('id')['val']
 
-        expected = pd.Series(np.repeat(grp.mean().values, grp.count().values),index=df.index)
+        values = np.repeat(grp.mean().values, com._ensure_platform_int(grp.count().values))
+        expected = pd.Series(values,index=df.index)
         result = grp.transform(np.mean)
         assert_series_equal(result,expected)
 
