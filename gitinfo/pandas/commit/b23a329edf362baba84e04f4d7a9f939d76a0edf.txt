commit b23a329edf362baba84e04f4d7a9f939d76a0edf
Author: Jeff Reback <jeff@reback.net>
Date:   Thu Nov 17 08:31:01 2016 -0500

    BLD: add py3.6 build
    generic support for additional installation instructions (e.g. 3.4_slow build)
    remove 2.7_NUMPY_DEV build files (not longer on travis)
    use python 3.5 for root conda env, use PYTHON_VERSION to designate conda installation

diff --git a/.travis.yml b/.travis.yml
index 4eefd6ca8..9e54fecc7 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -34,6 +34,7 @@ matrix:
       compiler: clang
       osx_image: xcode6.4
       env:
+        - PYTHON_VERSION=3.5
         - JOB_NAME: "35_osx"
         - NOSE_ARGS="not slow and not network and not disabled"
         - BUILD_TYPE=conda
@@ -43,6 +44,7 @@ matrix:
         - USE_CACHE=true
     - python: 2.7
       env:
+        - PYTHON_VERSION=2.7
         - JOB_NAME: "27_slow_nnet_LOCALE"
         - NOSE_ARGS="slow and not network and not disabled"
         - LOCALE_OVERRIDE="zh_CN.UTF-8"
@@ -56,6 +58,7 @@ matrix:
           - language-pack-zh-hans
     - python: 2.7
       env:
+        - PYTHON_VERSION=2.7
         - JOB_NAME: "27_nslow"
         - NOSE_ARGS="not slow and not disabled"
         - FULL_DEPS=true
@@ -69,6 +72,7 @@ matrix:
           - python-gtk2
     - python: 3.4
       env:
+        - PYTHON_VERSION=3.4
         - JOB_NAME: "34_nslow"
         - NOSE_ARGS="not slow and not disabled"
         - FULL_DEPS=true
@@ -81,6 +85,7 @@ matrix:
           - xsel
     - python: 3.5
       env:
+        - PYTHON_VERSION=3.5
         - JOB_NAME: "35_nslow"
         - NOSE_ARGS="not slow and not network and not disabled"
         - FULL_DEPS=true
@@ -95,6 +100,7 @@ matrix:
 #    In allow_failures
     - python: 2.7
       env:
+        - PYTHON_VERSION=2.7
         - JOB_NAME: "27_slow"
         - JOB_TAG=_SLOW
         - NOSE_ARGS="slow and not network and not disabled"
@@ -104,6 +110,7 @@ matrix:
 #    In allow_failures
     - python: 3.4
       env:
+        - PYTHON_VERSION=3.4
         - JOB_NAME: "34_slow"
         - JOB_TAG=_SLOW
         - NOSE_ARGS="slow and not network and not disabled"
@@ -118,6 +125,7 @@ matrix:
 #    In allow_failures
     - python: 2.7
       env:
+        - PYTHON_VERSION=2.7
         - JOB_NAME: "27_build_test_conda"
         - JOB_TAG=_BUILD_TEST
         - NOSE_ARGS="not slow and not disabled"
@@ -125,9 +133,23 @@ matrix:
         - BUILD_TEST=true
         - CACHE_NAME="27_build_test_conda"
         - USE_CACHE=true
+#    In allow_failures
+    - python: 3.6-dev
+      env:
+        - PYTHON_VERSION=3.6
+        - JOB_NAME: "36_dev"
+        - JOB_TAG=_DEV
+        - NOSE_ARGS="not slow and not network and not disabled"
+        - PANDAS_TESTING_MODE="deprecate"
+      addons:
+        apt:
+          packages:
+          - libatlas-base-dev
+          - gfortran
 #    In allow_failures
     - python: 3.5
       env:
+        - PYTHON_VERSION=3.5
         - JOB_NAME: "35_numpy_dev"
         - JOB_TAG=_NUMPY_DEV
         - NOSE_ARGS="not slow and not network and not disabled"
@@ -142,6 +164,7 @@ matrix:
 #    In allow_failures
     - python: 2.7
       env:
+        - PYTHON_VERSION=2.7
         - JOB_NAME: "27_nslow_nnet_COMPAT"
         - NOSE_ARGS="not slow and not network and not disabled"
         - LOCALE_OVERRIDE="it_IT.UTF-8"
@@ -156,6 +179,7 @@ matrix:
 #    In allow_failures
     - python: 3.5
       env:
+        - PYTHON_VERSION=3.5
         - JOB_NAME: "35_ascii"
         - JOB_TAG=_ASCII
         - NOSE_ARGS="not slow and not network and not disabled"
@@ -165,6 +189,7 @@ matrix:
 #    In allow_failures
     - python: 2.7
       env:
+        - PYTHON_VERSION=2.7
         - JOB_NAME: "doc_build"
         - FULL_DEPS=true
         - DOC_BUILD=true
@@ -174,6 +199,7 @@ matrix:
     allow_failures:
       - python: 2.7
         env:
+        - PYTHON_VERSION=2.7
         - JOB_NAME: "27_slow"
         - JOB_TAG=_SLOW
         - NOSE_ARGS="slow and not network and not disabled"
@@ -182,6 +208,7 @@ matrix:
         - USE_CACHE=true
       - python: 3.4
         env:
+        - PYTHON_VERSION=3.4
         - JOB_NAME: "34_slow"
         - JOB_TAG=_SLOW
         - NOSE_ARGS="slow and not network and not disabled"
@@ -195,6 +222,7 @@ matrix:
             - xsel
       - python: 2.7
         env:
+        - PYTHON_VERSION=2.7
         - JOB_NAME: "27_build_test_conda"
         - JOB_TAG=_BUILD_TEST
         - NOSE_ARGS="not slow and not disabled"
@@ -202,14 +230,27 @@ matrix:
         - BUILD_TEST=true
         - CACHE_NAME="27_build_test_conda"
         - USE_CACHE=true
-      - python: 3.5
+      - python: 3.6-dev
         env:
-        - JOB_NAME: "35_numpy_dev"
-        - JOB_TAG=_NUMPY_DEV
+        - PYTHON_VERSION=3.6
+        - JOB_NAME: "36_dev"
+        - JOB_TAG=_DEV
         - NOSE_ARGS="not slow and not network and not disabled"
         - PANDAS_TESTING_MODE="deprecate"
-        - CACHE_NAME="35_numpy_dev"
-        - USE_CACHE=true
+        addons:
+          apt:
+            packages:
+            - libatlas-base-dev
+            - gfortran
+      - python: 3.5
+        env:
+          - PYTHON_VERSION=3.5
+          - JOB_NAME: "35_numpy_dev"
+          - JOB_TAG=_NUMPY_DEV
+          - NOSE_ARGS="not slow and not network and not disabled"
+          - PANDAS_TESTING_MODE="deprecate"
+          - CACHE_NAME="35_numpy_dev"
+          - USE_CACHE=true
         addons:
           apt:
             packages:
@@ -217,6 +258,7 @@ matrix:
             - gfortran
       - python: 2.7
         env:
+        - PYTHON_VERSION=2.7
         - JOB_NAME: "27_nslow_nnet_COMPAT"
         - NOSE_ARGS="not slow and not network and not disabled"
         - LOCALE_OVERRIDE="it_IT.UTF-8"
@@ -230,6 +272,7 @@ matrix:
             - language-pack-it
       - python: 3.5
         env:
+        - PYTHON_VERSION=3.5
         - JOB_NAME: "35_ascii"
         - JOB_TAG=_ASCII
         - NOSE_ARGS="not slow and not network and not disabled"
@@ -238,6 +281,7 @@ matrix:
         - USE_CACHE=true
       - python: 2.7
         env:
+        - PYTHON_VERSION=2.7
         - JOB_NAME: "doc_build"
         - FULL_DEPS=true
         - DOC_BUILD=true
diff --git a/ci/install-2.7_NUMPY_DEV.sh b/ci/install-2.7_NUMPY_DEV.sh
deleted file mode 100644
index 22ac8f654..000000000
--- a/ci/install-2.7_NUMPY_DEV.sh
+++ /dev/null
@@ -1,18 +0,0 @@
-#!/bin/bash
-
-source activate pandas
-
-echo "install numpy master wheel"
-
-# remove the system installed numpy
-pip uninstall numpy -y
-
-# we need these for numpy
-
-# these wheels don't play nice with the conda libgfortran / openblas
-# time conda install -n pandas libgfortran openblas || exit 1
-
-# install numpy wheel from master
-pip install --pre --upgrade --no-index --timeout=60 --trusted-host travis-dev-wheels.scipy.org -f http://travis-dev-wheels.scipy.org/ numpy
-
-true
diff --git a/ci/install-3.6_DEV.sh b/ci/install-3.6_DEV.sh
new file mode 100644
index 000000000..e24533313
--- /dev/null
+++ b/ci/install-3.6_DEV.sh
@@ -0,0 +1,29 @@
+#!/bin/bash
+
+echo "install 3.6 dev"
+
+conda config --set add_pip_as_python_dependency false
+conda create -n pandas python=3.6 -c conda-forge/label/prerelease
+
+source activate pandas
+
+# ensure we have pip
+python -m ensurepip
+pip3.6 install nose
+
+# build cython
+git clone https://github.com/cython/cython.git
+cd cython
+git checkout 0.25.1
+python setup.py install
+cd ..
+
+# remove the system installed numpy
+pip3.6 uninstall numpy -y
+
+# install deps
+pip3.6 install numpy
+pip3.6 install pytz
+pip3.6 install python-dateutil
+
+true
diff --git a/ci/install_travis.sh b/ci/install_travis.sh
index 98ce36acc..39f6808b9 100755
--- a/ci/install_travis.sh
+++ b/ci/install_travis.sh
@@ -31,9 +31,6 @@ edit_init
 home_dir=$(pwd)
 echo "home_dir: [$home_dir]"
 
-python_major_version="${TRAVIS_PYTHON_VERSION:0:1}"
-[ "$python_major_version" == "2" ] && python_major_version=""
-
 MINICONDA_DIR="$HOME/miniconda"
 
 if [ -d "$MINICONDA_DIR" ] && [ -e "$MINICONDA_DIR/bin/conda" ] && [ "$USE_CACHE" ]; then
@@ -63,9 +60,9 @@ else
     rm -rf "$MINICONDA_DIR"
     # install miniconda
     if [ "${TRAVIS_OS_NAME}" == "osx" ]; then
-        wget http://repo.continuum.io/miniconda/Miniconda-latest-MacOSX-x86_64.sh -O miniconda.sh || exit 1
+        wget http://repo.continuum.io/miniconda/Miniconda3-latest-MacOSX-x86_64.sh -O miniconda.sh || exit 1
     else
-        wget http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh || exit 1
+        wget http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh || exit 1
     fi
     bash miniconda.sh -b -p "$MINICONDA_DIR" || exit 1
 
@@ -84,21 +81,25 @@ else
 
     # Useful for debugging any issues with conda
     conda info -a || exit 1
-
-    time conda create -n pandas python=$TRAVIS_PYTHON_VERSION nose coverage flake8 || exit 1
-
 fi
-# build deps
-REQ="ci/requirements-${TRAVIS_PYTHON_VERSION}${JOB_TAG}.build"
 
-# may have additional installation instructions for this build
-INSTALL="ci/install-${TRAVIS_PYTHON_VERSION}${JOB_TAG}.sh"
+# may have installation instructions for this build
+INSTALL="ci/install-${PYTHON_VERSION}${JOB_TAG}.sh"
 if [ -e ${INSTALL} ]; then
     time bash $INSTALL || exit 1
+else
+
+    # create new env
+    time conda create -n pandas python=$PYTHON_VERSION nose coverage flake8 || exit 1
 fi
 
+# build deps
+REQ="ci/requirements-${PYTHON_VERSION}${JOB_TAG}.build"
+
 # install deps
-time conda install -n pandas --file=${REQ} || exit 1
+if [ -e ${REQ} ]; then
+    time conda install -n pandas --file=${REQ} || exit 1
+fi
 
 source activate pandas
 
@@ -106,7 +107,7 @@ if [ "$BUILD_TEST" ]; then
 
     # build testing
     pip uninstall --yes cython
-    pip install cython==0.15.1
+    pip install cython==0.19.1
     ( python setup.py build_ext --inplace && python setup.py develop ) || true
 
 else
@@ -117,14 +118,22 @@ else
 
     # we may have run installations
     echo "conda installs"
-    REQ="ci/requirements-${TRAVIS_PYTHON_VERSION}${JOB_TAG}.run"
-    time conda install -n pandas --file=${REQ} || exit 1
+    REQ="ci/requirements-${PYTHON_VERSION}${JOB_TAG}.run"
+    if [ -e ${REQ} ]; then
+        time conda install -n pandas --file=${REQ} || exit 1
+    fi
 
     # we may have additional pip installs
     echo "pip installs"
-    REQ="ci/requirements-${TRAVIS_PYTHON_VERSION}${JOB_TAG}.pip"
+    REQ="ci/requirements-${PYTHON_VERSION}${JOB_TAG}.pip"
     if [ -e ${REQ} ]; then
-        pip install --upgrade -r $REQ
+       pip install --upgrade -r $REQ
+    fi
+
+    # may have addtl installation instructions for this build
+    REQ="ci/requirements-${PYTHON_VERSION}${JOB_TAG}.sh"
+    if [ -e ${REQ} ]; then
+        time bash $REQ || exit 1
     fi
 
     # remove any installed pandas package
@@ -138,9 +147,5 @@ else
 
 fi
 
-if [ "$JOB_NAME" == "34_slow" ]; then
-    conda install -c conda-forge/label/rc -c conda-forge matplotlib
-fi
-
 echo "done"
 exit 0
diff --git a/ci/requirements-2.7_NUMPY_DEV.build b/ci/requirements-2.7_NUMPY_DEV.build
deleted file mode 100644
index d15edbfa3..000000000
--- a/ci/requirements-2.7_NUMPY_DEV.build
+++ /dev/null
@@ -1,3 +0,0 @@
-python-dateutil
-pytz
-cython
diff --git a/ci/requirements-2.7_NUMPY_DEV.run b/ci/requirements-2.7_NUMPY_DEV.run
deleted file mode 100644
index 0aa987bae..000000000
--- a/ci/requirements-2.7_NUMPY_DEV.run
+++ /dev/null
@@ -1,2 +0,0 @@
-python-dateutil
-pytz
diff --git a/ci/requirements-3.4_SLOW.sh b/ci/requirements-3.4_SLOW.sh
new file mode 100644
index 000000000..bc8fb7914
--- /dev/null
+++ b/ci/requirements-3.4_SLOW.sh
@@ -0,0 +1,7 @@
+#!/bin/bash
+
+source activate pandas
+
+echo "install 34_slow"
+
+conda install -n pandas -c conda-forge/label/rc -c conda-forge matplotlib
diff --git a/ci/install-3.5_NUMPY_DEV.sh b/ci/requirements-3.5_NUMPY_DEV.sh
similarity index 100%
rename from ci/install-3.5_NUMPY_DEV.sh
rename to ci/requirements-3.5_NUMPY_DEV.sh
