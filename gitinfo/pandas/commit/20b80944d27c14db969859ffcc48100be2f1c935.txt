commit 20b80944d27c14db969859ffcc48100be2f1c935
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Thu May 24 13:28:03 2012 -0400

    BLD: msvc fix (hopefully) + start resample benchmarks later in 2012

diff --git a/pandas/src/ujson/python/objToJSON.c b/pandas/src/ujson/python/objToJSON.c
index 63d68199c..d5ff7e79a 100644
--- a/pandas/src/ujson/python/objToJSON.c
+++ b/pandas/src/ujson/python/objToJSON.c
@@ -100,9 +100,10 @@ enum PANDAS_FORMAT
 
 void initObjToJSON(void)
 {
+    PyObject *mod_frame;
     PyDateTime_IMPORT;
 
-    PyObject *mod_frame = PyImport_ImportModule("pandas.core.frame");
+    mod_frame = PyImport_ImportModule("pandas.core.frame");
     if (mod_frame)
     {
         cls_dataframe = PyObject_GetAttrString(mod_frame, "DataFrame");
@@ -941,7 +942,7 @@ char** NpyArr_encodeLabels(PyArrayObject* labels, JSONObjectEncoder* enc, npy_in
     for (i = 0; i < num; i++)
     {
         item = getitem(dataptr, labels);
-        if (!item) 
+        if (!item)
         {
             NpyArr_freeLabels(ret, num);
             ret = 0;
diff --git a/vb_suite/timeseries.py b/vb_suite/timeseries.py
index 98efe7917..853c473ed 100644
--- a/vb_suite/timeseries.py
+++ b/vb_suite/timeseries.py
@@ -12,6 +12,9 @@ except NameError:
     def date_range(start=None, end=None, periods=None, freq=None):
         return DateRange(start, end, periods=periods, offset=freq)
 
+if hasattr(Series, 'convert'):
+    Series.resample = Series.convert
+
 ts = Series(np.random.randn(N), index=rng)
 """
 
@@ -39,11 +42,13 @@ setup = common_setup + """
 
 """
 
-timeseries_1min_5min_ohlc = Benchmark("ts[:10000].convert('5min', how='ohlc')",
-                                      common_setup)
+timeseries_1min_5min_ohlc = Benchmark("ts[:10000].resample('5min', how='ohlc')",
+                                      common_setup,
+                                      start_date=datetime(2012, 5, 1))
 
-timeseries_1min_5min_mean = Benchmark("ts[:10000].convert('5min', how='mean')",
-                                      common_setup)
+timeseries_1min_5min_mean = Benchmark("ts[:10000].resample('5min', how='mean')",
+                                      common_setup,
+                                      start_date=datetime(2012, 5, 1))
 
 #----------------------------------------------------------------------
 # Irregular alignment
