commit ebbe2a284208926326967a9a0bb5fa60639ed042
Author: jbrockmendel <jbrockmendel@gmail.com>
Date:   Wed Dec 11 04:53:12 2019 -0800

    REF: pass dtype and data to pytables IndexCol constructor (#30186)

diff --git a/pandas/io/pytables.py b/pandas/io/pytables.py
index e64101585..b40637b97 100644
--- a/pandas/io/pytables.py
+++ b/pandas/io/pytables.py
@@ -2198,6 +2198,8 @@ class DataCol(IndexCol):
         table=None,
         meta=None,
         metadata=None,
+        dtype=None,
+        data=None,
     ):
         super().__init__(
             name=name,
@@ -2212,8 +2214,8 @@ class DataCol(IndexCol):
             meta=meta,
             metadata=metadata,
         )
-        self.dtype = None
-        self.data = None
+        self.dtype = dtype
+        self.data = data
 
     @property
     def dtype_attr(self) -> str:
@@ -3849,6 +3851,8 @@ class Table(Fixed):
                 meta = "category"
                 metadata = np.array(data_converted.categories, copy=False).ravel()
 
+            data, dtype_name = _get_data_and_dtype_name(data_converted)
+
             col = klass(
                 name=adj_name,
                 cname=new_name,
@@ -3860,8 +3864,9 @@ class Table(Fixed):
                 ordered=ordered,
                 meta=meta,
                 metadata=metadata,
+                dtype=dtype_name,
+                data=data,
             )
-            col.set_data(data_converted)
             col.update_info(self.info)
 
             vaxes.append(col)
