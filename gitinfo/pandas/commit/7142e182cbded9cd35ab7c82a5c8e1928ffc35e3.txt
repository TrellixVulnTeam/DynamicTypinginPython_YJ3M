commit 7142e182cbded9cd35ab7c82a5c8e1928ffc35e3
Author: Jay Bourque <jay.bourque@continuum.io>
Date:   Fri Oct 5 13:22:43 2012 -0500

    Fix EOF issue
    
    Fix EOF issue due to parser_handle_eof() not explicitely returning a value if state is START_RECORD.
    This results in the return value sometimes incorrectly set to -1 on Mac OS (seems to work okay on linux though).

diff --git a/pandas/src/parser/parser.c b/pandas/src/parser/parser.c
index 808f97fbf..1ab8a52b3 100644
--- a/pandas/src/parser/parser.c
+++ b/pandas/src/parser/parser.c
@@ -1744,6 +1744,11 @@ int parser_handle_eof(parser_t *self) {
 
         return 0;
     }
+    else if (self->datalen == 0 && (self->state == START_RECORD)) {
+        return 0;
+    }
+
+    return -1;
 }
 
 int parser_consume_rows(parser_t *self, size_t nrows) {
