commit 04356a83c0dc8a749c84e168535e6673f2548ec6
Author: Erik Fredriksen <erik.cfr@gmail.com>
Date:   Tue May 23 21:52:22 2017 +0200

    BUG: wide_to_long should check for unique id vars (#16382) (#16403)
    
    * BUG: wide_to_long should check for unique id vars (#16382)
    
    * Fix uncaught lint error
    
    * Add whatsnew note (bug fix)

diff --git a/doc/source/whatsnew/v0.20.2.txt b/doc/source/whatsnew/v0.20.2.txt
index b4675e03c..e24b0c229 100644
--- a/doc/source/whatsnew/v0.20.2.txt
+++ b/doc/source/whatsnew/v0.20.2.txt
@@ -81,8 +81,10 @@ Reshaping
 ^^^^^^^^^
 
 - Bug in ``DataFrame.stack`` with unsorted levels in MultiIndex columns (:issue:`16323`)
+- Bug in ``pd.wide_to_long()`` where no error was raised when ``i`` was not a unique identifier (:issue:`16382`)
 - Bug in ``Series.isin(..)`` with a list of tuples (:issue:`16394`)
 
+
 Numeric
 ^^^^^^^
 - Bug in .interpolate(), where limit_direction was not respected when limit=None (default) was passed (:issue:16282)
diff --git a/pandas/core/reshape/reshape.py b/pandas/core/reshape/reshape.py
index b0ed6d4c4..f944dfe22 100644
--- a/pandas/core/reshape/reshape.py
+++ b/pandas/core/reshape/reshape.py
@@ -1046,6 +1046,9 @@ def wide_to_long(df, stubnames, i, j, sep="", suffix='\d+'):
     else:
         i = list(i)
 
+    if df[i].duplicated().any():
+        raise ValueError("the id variables need to uniquely identify each row")
+
     value_vars = list(map(lambda stub:
                           get_var_names(df, stub, sep, suffix), stubnames))
 
diff --git a/pandas/tests/reshape/test_reshape.py b/pandas/tests/reshape/test_reshape.py
index 79626d890..d47a95924 100644
--- a/pandas/tests/reshape/test_reshape.py
+++ b/pandas/tests/reshape/test_reshape.py
@@ -976,3 +976,14 @@ class TestWideToLong(object):
         exp_frame = exp_frame.set_index(['famid', 'birth', 'age'])[['ht']]
         long_frame = wide_to_long(df, 'ht', i=['famid', 'birth'], j='age')
         tm.assert_frame_equal(long_frame, exp_frame)
+
+    def test_non_unique_idvars(self):
+        # GH16382
+        # Raise an error message if non unique id vars (i) are passed
+        df = pd.DataFrame({
+            'A_A1': [1, 2, 3, 4, 5],
+            'B_B1': [1, 2, 3, 4, 5],
+            'x': [1, 1, 1, 1, 1]
+        })
+        with pytest.raises(ValueError):
+            wide_to_long(df, ['A_A', 'B_B'], i='x', j='colname')
