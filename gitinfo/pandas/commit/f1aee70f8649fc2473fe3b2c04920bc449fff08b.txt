commit f1aee70f8649fc2473fe3b2c04920bc449fff08b
Author: jreback <jeff@reback.net>
Date:   Wed Aug 7 15:11:11 2013 -0400

    ER: GH3777, raise a NotImplementedError for Panel -> Panel setting with alignment

diff --git a/doc/source/release.rst b/doc/source/release.rst
index c43fcf3f7..00309b7a3 100644
--- a/doc/source/release.rst
+++ b/doc/source/release.rst
@@ -132,6 +132,7 @@ pandas 0.13
   - Fixed Panel slicing issued in ``xs`` that was returning an incorrect dimmed object
     (:issue:`4016`)
   - Fixed Panel assignment with a transposed frame (:issue:`3830`)
+  - Raise on set indexing with a Panel and a Panel as a value which needs alignment (:issue:`3777`)
 
 pandas 0.12
 ===========
diff --git a/pandas/core/indexing.py b/pandas/core/indexing.py
index 78567f871..a4d2cffc3 100644
--- a/pandas/core/indexing.py
+++ b/pandas/core/indexing.py
@@ -100,7 +100,7 @@ class _NDFrameIndexer(object):
         return tuple(keyidx)
 
     def _setitem_with_indexer(self, indexer, value):
-        from pandas.core.frame import DataFrame, Series
+        from pandas import Panel, DataFrame, Series
 
         # also has the side effect of consolidating in-place
 
@@ -181,6 +181,9 @@ class _NDFrameIndexer(object):
             if isinstance(value, DataFrame):
                 value = self._align_frame(indexer, value)
 
+            if isinstance(value, Panel):
+                value = self._align_panel(indexer, value)
+
             # 2096
             values = self.obj.values
             if np.prod(values.shape):
@@ -269,6 +272,11 @@ class _NDFrameIndexer(object):
 
         raise ValueError('Incompatible indexer with DataFrame')
 
+    def _align_panel(self, indexer, df):
+        is_frame = self.obj.ndim == 2
+        is_panel = self.obj.ndim >= 3
+        raise NotImplementedError("cannot set using an indexer with a Panel yet!")
+
     def _getitem_tuple(self, tup):
         try:
             return self._getitem_lowerdim(tup)
diff --git a/pandas/tests/test_indexing.py b/pandas/tests/test_indexing.py
index 41dc6ba62..385e762af 100644
--- a/pandas/tests/test_indexing.py
+++ b/pandas/tests/test_indexing.py
@@ -877,12 +877,27 @@ class TestIndexing(unittest.TestCase):
         # GH4016, date selection returns a frame when a partial string selection
         ind = date_range(start="2000", freq="D", periods=1000)
         df = DataFrame(np.random.randn(len(ind), 5), index=ind, columns=list('ABCDE'))
-        panel = Panel({'frame_'+c:df for c in list('ABC')})
+        panel = Panel(dict([ ('frame_'+c,df) for c in list('ABC') ]))
 
         test2 = panel.ix[:, "2002":"2002-12-31"]
         test1 = panel.ix[:, "2002"]
         tm.assert_panel_equal(test1,test2)
 
+    def test_panel_assignment(self):
+
+        # GH3777
+        wp = Panel(randn(2, 5, 4), items=['Item1', 'Item2'], major_axis=date_range('1/1/2000', periods=5), minor_axis=['A', 'B', 'C', 'D'])
+        wp2 = Panel(randn(2, 5, 4), items=['Item1', 'Item2'], major_axis=date_range('1/1/2000', periods=5), minor_axis=['A', 'B', 'C', 'D'])
+        expected = wp.loc[['Item1', 'Item2'], :, ['A', 'B']]
+
+        def f():
+            wp.loc[['Item1', 'Item2'], :, ['A', 'B']] = wp2.loc[['Item1', 'Item2'], :, ['A', 'B']]
+        self.assertRaises(NotImplementedError, f)
+
+        #wp.loc[['Item1', 'Item2'], :, ['A', 'B']] = wp2.loc[['Item1', 'Item2'], :, ['A', 'B']]
+        #result = wp.loc[['Item1', 'Item2'], :, ['A', 'B']]
+        #tm.assert_panel_equal(result,expected)
+
     def test_multi_assign(self):
 
         # GH 3626, an assignement of a sub-df to a df
