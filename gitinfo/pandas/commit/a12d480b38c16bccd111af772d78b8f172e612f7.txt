commit a12d480b38c16bccd111af772d78b8f172e612f7
Author: y-p <yoval@gmx.com>
Date:   Mon Mar 25 19:26:44 2013 +0200

    SCR: test_perf can save results frame to pickle file, -d

diff --git a/vb_suite/test_perf.py b/vb_suite/test_perf.py
index 90a98918c..8cde2f3ab 100755
--- a/vb_suite/test_perf.py
+++ b/vb_suite/test_perf.py
@@ -56,7 +56,12 @@ parser.add_argument('-m', '--min-duration',
 parser.add_argument('-o', '--output',
                     metavar="<file>",
                     dest='log_file',
-                    help='path of file in which to save the report (default: vb_suite.log).')
+                    help='path of file in which to save the textual report (default: vb_suite.log).')
+parser.add_argument('-d', '--outdf',
+                    metavar="FNAME",
+                    dest='outdf',
+                    default=None,
+                    help='Name of file to df.save() the result table into. Will overwrite')
 parser.add_argument('-r', '--regex',
                     metavar="REGEX",
                     dest='regex',
@@ -198,7 +203,7 @@ Test name                      | target[ms] |  base[ms]  |   ratio    |
         logfile.close()
 
         prprint(s)
-        prprint("Results were also written to the logfile at '%s'\n" %
+        prprint("Results were also written to the logfile at '%s'" %
                 args.log_file)
 
     finally:
@@ -206,6 +211,11 @@ Test name                      | target[ms] |  base[ms]  |   ratio    |
         shutil.rmtree(TMP_DIR)
         logfile.close()
 
+    if args.outdf:
+
+        opath = os.path.abspath(os.path.join(os.curdir,args.outdf))
+        prprint("The results DataFrame was written to '%s'\n" %  opath)
+        totals.save(opath)
 
 # hack , vbench.git ignores some commits, but we
 # need to be able to reference any commit.
