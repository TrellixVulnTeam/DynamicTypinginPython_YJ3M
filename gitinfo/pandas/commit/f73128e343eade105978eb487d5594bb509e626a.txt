commit f73128e343eade105978eb487d5594bb509e626a
Author: y-p <yoval@gmx.com>
Date:   Wed Jan 9 16:48:25 2013 +0200

    CLN: correct stdin override idiom

diff --git a/pandas/tests/test_format.py b/pandas/tests/test_format.py
index 1488f4a1f..4f77da10a 100644
--- a/pandas/tests/test_format.py
+++ b/pandas/tests/test_format.py
@@ -143,9 +143,12 @@ class TestDataFrameFormatting(unittest.TestCase):
             self.assert_(len(line) == line_len)
 
         # it works even if sys.stdin in None
-        sys.stdin = None
-        repr(df)
-        sys.stdin = sys.__stdin__
+        _stdin= sys.stdin
+        try:
+            sys.stdin = None
+            repr(df)
+        finally:
+            sys.stdin = _stdin
 
     def test_to_string_unicode_columns(self):
         df = DataFrame({u'\u03c3': np.arange(10.)})
