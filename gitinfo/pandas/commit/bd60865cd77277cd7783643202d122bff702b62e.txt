commit bd60865cd77277cd7783643202d122bff702b62e
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Sat Sep 15 14:40:25 2012 -0400

    BUG: try to work around mingw32 segfault in #1898

diff --git a/RELEASE.rst b/RELEASE.rst
index 09551770d..40f5f0d5b 100644
--- a/RELEASE.rst
+++ b/RELEASE.rst
@@ -46,6 +46,7 @@ pandas 0.9.0
   - Add args/kwds options to Series.apply (#1829)
   - Add inplace option to Series/DataFrame.reset_index (#1797)
   - Add quoting option for DataFrame.to_csv (#1902)
+  - Indicate long column value truncation in DataFrame output with ... (#1854)
 
 **API Changes**
 
diff --git a/pandas/src/hashtable.pyx b/pandas/src/hashtable.pyx
index 8fa18e372..97abbff21 100644
--- a/pandas/src/hashtable.pyx
+++ b/pandas/src/hashtable.pyx
@@ -65,12 +65,15 @@ cdef class ObjectVector:
         # Create a 1D array, of length 'size'
         result = PyArray_SimpleNewFromData(1, shape,
                                            np.NPY_OBJECT, self.vec.a)
-        if xfer_data:
-            self.owndata = 0
-            util.set_array_owndata(result)
 
-        return result
+        # urgh, mingw32 barfs because of this
+
+        # if xfer_data:
+        #     self.owndata = 0
+        #     util.set_array_owndata(result)
+        # return result
 
+        return result.copy()
 
     cdef inline append(self, object o):
         kv_object_push(&self.vec, <PyObject*> o)
diff --git a/pandas/tests/test_algos.py b/pandas/tests/test_algos.py
index a159ddcce..25a28c686 100644
--- a/pandas/tests/test_algos.py
+++ b/pandas/tests/test_algos.py
@@ -41,6 +41,10 @@ class TestUnique(unittest.TestCase):
         result = algos.unique(arr)
         self.assert_(isinstance(result, np.ndarray))
 
+    def test_object_refcount_bug(self):
+        lst = ['A', 'B', 'C', 'D', 'E']
+        for i in xrange(1000):
+            len(algos.unique(lst))
 
 def test_quantile():
     s = Series(np.random.randn(100))
