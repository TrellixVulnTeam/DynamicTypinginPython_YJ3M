commit be66c2735611a56649ea7289755782a98f03e4bb
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Wed Mar 14 22:49:38 2012 -0400

    BUG: possible out of bounds access on 0-length Series, close #917

diff --git a/pandas/src/util.pxd b/pandas/src/util.pxd
index 3730c72ce..df1b1b7b9 100644
--- a/pandas/src/util.pxd
+++ b/pandas/src/util.pxd
@@ -22,9 +22,9 @@ cdef inline object get_value_at(ndarray arr, object loc):
     i = <Py_ssize_t> loc
     sz = cnp.PyArray_SIZE(arr)
 
-    if i < 0:
+    if i < 0 and sz > 0:
         i += sz
-    elif i >= sz:
+    elif i >= sz or sz == 0:
         raise IndexError('index out of bounds')
 
     return get_value_1d(arr, i)
diff --git a/pandas/tests/test_series.py b/pandas/tests/test_series.py
index 6fc9ec6d0..4134e59fc 100644
--- a/pandas/tests/test_series.py
+++ b/pandas/tests/test_series.py
@@ -465,6 +465,10 @@ class TestSeries(unittest.TestCase, CheckNameIntegration):
         # don't segfault, GH #495
         self.assertRaises(IndexError, self.ts.__getitem__, len(self.ts))
 
+        # GH #917
+        s = Series([])
+        self.assertRaises(IndexError, s.__getitem__, -1)
+
     def test_getitem_box_float64(self):
         value = self.ts[5]
         self.assert_(isinstance(value, np.float64))
diff --git a/setup.py b/setup.py
index b1e9f2f83..33772c9af 100755
--- a/setup.py
+++ b/setup.py
@@ -347,7 +347,8 @@ sparse_ext = Extension('pandas._sparse',
                        include_dirs=[np.get_include()])
 
 engines_ext = Extension('pandas._engines',
-                        depends=['pandas/src/numpy_helper.h'],
+                        depends=['pandas/src/numpy_helper.h',
+                                 'pandas/src/util.pxd'],
                         sources=[srcpath('engines', suffix=suffix)],
                         include_dirs=[np.get_include()])
 
