commit 023634ce031283bf4b1daad793f8ebcbc6edd8c7
Author: Chang She <chang@lambdafoundry.com>
Date:   Sat May 5 19:00:09 2012 -0400

    BUG: unicode index handling in HDFStore. GH #626

diff --git a/pandas/io/pytables.py b/pandas/io/pytables.py
index ecc18967b..65baa69d7 100644
--- a/pandas/io/pytables.py
+++ b/pandas/io/pytables.py
@@ -923,9 +923,13 @@ def _convert_index(index):
                             dtype=np.int32)
         return converted, 'date', _tables().Time32Col()
     elif inferred_type =='string':
-        converted = np.array(list(values), dtype=np.str_)
-        itemsize = converted.dtype.itemsize
-        return converted, 'string', _tables().StringCol(itemsize)
+        try:
+            converted = np.array(list(values), dtype=np.str_)
+            itemsize = converted.dtype.itemsize
+            return converted, 'string', _tables().StringCol(itemsize)
+        except UnicodeError: # Write an all unicode index as object array
+            atom = _tables().ObjectAtom()
+            return np.asarray(values, dtype='O'), 'object', atom
     elif inferred_type == 'integer':
         # take a guess for now, hope the values fit
         atom = _tables().Int64Col()
diff --git a/pandas/io/tests/test_pytables.py b/pandas/io/tests/test_pytables.py
index b5331bea5..04d7a6801 100644
--- a/pandas/io/tests/test_pytables.py
+++ b/pandas/io/tests/test_pytables.py
@@ -615,6 +615,12 @@ class TestHDFStore(unittest.TestCase):
         self.assertEquals(type(result.index), type(df.index))
         self.assertEquals(result.index.freq, df.index.freq)
 
+    def test_unicode_index(self):
+        unicode_values = [u'\u03c3', u'\u03c3\u03c3']
+
+        s = Series(np.random.randn(len(unicode_values)), unicode_values)
+        self._check_roundtrip(s, tm.assert_series_equal)
+
 
 def curpath():
     pth, _ = os.path.split(os.path.abspath(__file__))
