commit 4391dfdbc483ad0fb7fc3edff707459952fd0375
Author: y-p <yoval@gmx.com>
Date:   Mon Mar 25 20:20:24 2013 +0200

    BUG: check_less_precise in assert_almost_equal with val=float throws exception

diff --git a/pandas/util/testing.py b/pandas/util/testing.py
index bcd3fb6a3..de66a0df4 100644
--- a/pandas/util/testing.py
+++ b/pandas/util/testing.py
@@ -136,8 +136,8 @@ def assert_almost_equal(a, b, check_less_precise = False):
 
         # deal with differing dtypes
         if check_less_precise:
-            dtype_a = np.dtype(a)
-            dtype_b = np.dtype(b)
+            dtype_a = np.dtype(type(a))
+            dtype_b = np.dtype(type(b))
             if dtype_a.kind == 'i' and dtype_b == 'i':
                 pass
             if dtype_a.kind == 'f' and dtype_b == 'f':
