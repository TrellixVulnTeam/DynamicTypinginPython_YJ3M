commit 41e6083b30c66e6f2d5ef1dbac35683f976ba7bd
Author: Adam Klein <adamklein@gmail.com>
Date:   Wed Jan 25 08:40:54 2012 -0500

    BUG: #680 incorporate @takluyver comments

diff --git a/pandas/core/common.py b/pandas/core/common.py
index 0d974ccf4..7677cfcc4 100644
--- a/pandas/core/common.py
+++ b/pandas/core/common.py
@@ -818,8 +818,8 @@ def console_encode(value):
     if not isinstance(value, unicode):
         return value
 
-    import sys
-    if sys.stdin is not None and sys.stdin.encoding is not None:
-        return value.encode(sys.stdin.encoding)
-    else:
+    try:
+        import sys
+        return value.encode(sys.stdin.encoding, 'replace')
+    except AttributeError:
         return value.encode('ascii', 'replace')
