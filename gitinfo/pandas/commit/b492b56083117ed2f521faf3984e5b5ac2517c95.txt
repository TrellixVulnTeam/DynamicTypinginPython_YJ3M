commit b492b56083117ed2f521faf3984e5b5ac2517c95
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Sat May 26 18:11:45 2012 -0400

    TST: suppress Series warnings, speed up Series.__getitem__ in typical use cases

diff --git a/pandas/core/series.py b/pandas/core/series.py
index b97d4addd..64752e34a 100644
--- a/pandas/core/series.py
+++ b/pandas/core/series.py
@@ -38,6 +38,8 @@ __all__ = ['Series', 'TimeSeries']
 _np_version = np.version.short_version
 _np_version_under1p6 = LooseVersion(_np_version) < '1.6'
 
+_SHOW_WARNINGS = True
+
 #----------------------------------------------------------------------
 # Wrapper function for Series arithmetic methods
 
@@ -498,10 +500,14 @@ copy : boolean, default False
             return self.values[indexer]
 
     def __setitem__(self, key, value):
-        values = self.values
         try:
-            values[self.index.get_loc(key)] = value
-            return
+            try:
+                self.index._engine.set_value(self, key, value)
+                return
+            except KeyError:
+                values = self.values
+                values[self.index.get_loc(key)] = value
+                return
         except KeyError:
             if (com.is_integer(key)
                 and not self.index.inferred_type == 'integer'):
@@ -2723,7 +2729,7 @@ def _resolve_offset(freq, kwds):
         offset = freq
         warn = False
 
-    if warn:
+    if warn and _SHOW_WARNINGS:
         import warnings
         warnings.warn("'timeRule' and 'offset' parameters are deprecated,"
                       " please use 'freq' instead",
diff --git a/pandas/tests/test_series.py b/pandas/tests/test_series.py
index 7ef73b9e8..882e7b054 100644
--- a/pandas/tests/test_series.py
+++ b/pandas/tests/test_series.py
@@ -15,6 +15,7 @@ from pandas import (Index, Series, TimeSeries, DataFrame, isnull, notnull,
                     bdate_range, date_range)
 from pandas.core.index import MultiIndex
 from pandas.tseries.index import Timestamp, DatetimeIndex
+import pandas.core.series as smod
 import pandas._tseries as lib
 
 import pandas.core.datetools as datetools
@@ -1954,12 +1955,14 @@ class TestSeries(unittest.TestCase, CheckNameIntegration):
 
         self.assertRaises(ValueError, ps.shift, freq='D')
 
-        #legacy support
+        # legacy support
+        smod._SHOW_WARNINGS = False
         shifted4 = ps.shift(1, timeRule='B')
         assert_series_equal(shifted2, shifted4)
 
         shifted5 = ps.shift(1, offset=datetools.bday)
         assert_series_equal(shifted5, shifted4)
+        smod._SHOW_WARNINGS = True
 
     def test_tshift(self):
         # PeriodIndex
