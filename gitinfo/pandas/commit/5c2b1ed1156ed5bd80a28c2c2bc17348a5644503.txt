commit 5c2b1ed1156ed5bd80a28c2c2bc17348a5644503
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Sun Nov 6 22:30:40 2011 -0500

    TST: some benchmark scripts

diff --git a/bench/bench_pivot.R b/bench/bench_pivot.R
new file mode 100644
index 000000000..06dc6a105
--- /dev/null
+++ b/bench/bench_pivot.R
@@ -0,0 +1,27 @@
+library(reshape2)
+
+
+n <- 100000
+a.size <- 5
+b.size <- 5
+
+data <- data.frame(a=sample(letters[1:a.size], n, replace=T),
+                   b=sample(letters[1:b.size], n, replace=T),
+                   c=rnorm(n),
+                   d=rnorm(n))
+
+timings <- numeric()
+
+# acast(melt(data, id=c("a", "b")), a ~ b, mean)
+# acast(melt(data, id=c("a", "b")), a + b ~ variable, mean)
+
+for (i in 1:10) {
+  gc()
+  tim <- system.time(acast(melt(data, id=c("a", "b")), a ~ b, mean,
+                           subset=.(variable=="c")))
+  timings[i] = tim[3]
+}
+
+mean(timings)
+
+acast(melt(data, id=c("a", "b")), a ~ b, mean, subset=.(variable="c"))
diff --git a/bench/bench_pivot.py b/bench/bench_pivot.py
new file mode 100644
index 000000000..007bd0aae
--- /dev/null
+++ b/bench/bench_pivot.py
@@ -0,0 +1,16 @@
+from pandas import *
+import string
+
+
+n = 100000
+asize = 5
+bsize = 5
+
+letters = np.asarray(list(string.letters), dtype=object)
+
+data = DataFrame(dict(foo=letters[:asize][np.random.randint(0, asize, n)],
+                      bar=letters[:bsize][np.random.randint(0, bsize, n)],
+                      baz=np.random.randn(n),
+                      qux=np.random.randn(n)))
+
+table = pivot_table(data, xby=['foo', 'bar'])
diff --git a/bench/duplicated.R b/bench/duplicated.R
new file mode 100644
index 000000000..eb2376df2
--- /dev/null
+++ b/bench/duplicated.R
@@ -0,0 +1,22 @@
+N <- 100000
+
+k1 = rep(NA, N)
+k2 = rep(NA, N)
+for (i in 1:N){
+  k1[i] <- paste(sample(letters, 1), collapse="")
+  k2[i] <- paste(sample(letters, 1), collapse="")
+}
+df <- data.frame(a=k1, b=k2, c=rep(1:100, N / 100))
+df2 <- data.frame(a=k1, b=k2)
+
+timings <- numeric()
+timings2 <- numeric()
+for (i in 1:50) {
+  gc()
+  timings[i] = system.time(deduped <- df[!duplicated(df),])[3]
+  gc()
+  timings2[i] = system.time(deduped <- df[!duplicated(df[,c("a", "b")]),])[3]
+}
+
+mean(timings)
+mean(timings2)
