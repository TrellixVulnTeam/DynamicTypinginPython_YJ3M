commit 8a18af8d135cf5a5d13bee765f7db969ce573d87
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Wed Mar 27 22:19:08 2013 -0400

    ENH: better error message when discretization might create an ambiguity. close #1978

diff --git a/RELEASE.rst b/RELEASE.rst
index c12c02270..2689e50f2 100644
--- a/RELEASE.rst
+++ b/RELEASE.rst
@@ -243,6 +243,7 @@ pandas 0.11.0
 
 .. _GH622: https://github.com/pydata/pandas/issues/622
 .. _GH797: https://github.com/pydata/pandas/issues/797
+.. _GH1978: https://github.com/pydata/pandas/issues/1978
 .. _GH2758: https://github.com/pydata/pandas/issues/2758
 .. _GH2121: https://github.com/pydata/pandas/issues/2121
 .. _GH2809: https://github.com/pydata/pandas/issues/2809
diff --git a/pandas/tools/tests/test_tile.py b/pandas/tools/tests/test_tile.py
index f886d545b..c3462dfc6 100644
--- a/pandas/tools/tests/test_tile.py
+++ b/pandas/tools/tests/test_tile.py
@@ -135,6 +135,9 @@ class TestCut(unittest.TestCase):
         expected = qcut(arr, 4)
         self.assert_(factor.equals(expected))
 
+    def test_qcut_all_bins_same(self):
+        self.assertRaises(Exception, qcut, [0,0,0,0,0,0,0,0,0,0], 3)
+
     def test_cut_out_of_bounds(self):
         arr = np.random.randn(100)
 
diff --git a/pandas/tools/tile.py b/pandas/tools/tile.py
index 96b4db452..4c68594a8 100644
--- a/pandas/tools/tile.py
+++ b/pandas/tools/tile.py
@@ -4,6 +4,7 @@ Quantilization functions and related stuff
 
 from pandas.core.api import DataFrame, Series
 from pandas.core.categorical import Categorical
+from pandas.core.index import _ensure_index
 import pandas.core.algorithms as algos
 import pandas.core.common as com
 import pandas.core.nanops as nanops
@@ -149,6 +150,9 @@ def _bins_to_cuts(x, bins, right=True, labels=None, retbins=False,
     side = 'left' if right else 'right'
     ids = bins.searchsorted(x, side=side)
 
+    if len(algos.unique(bins)) < len(bins):
+        raise Exception('Bin edges must be unique: %s' % repr(bins))
+
     if include_lowest:
         ids[x == bins[0]] = 1
 
