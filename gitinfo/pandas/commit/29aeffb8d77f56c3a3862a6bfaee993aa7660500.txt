commit 29aeffb8d77f56c3a3862a6bfaee993aa7660500
Author: Matthew Roeschke <emailformattr@gmail.com>
Date:   Sat Feb 18 04:08:54 2017 -0800

    BUG: rolling not accepting Timedelta-like window args (#15443)
    
    Remove unnecessary pd.Timedelta

diff --git a/doc/source/whatsnew/v0.20.0.txt b/doc/source/whatsnew/v0.20.0.txt
index 8e48dbbb0..ae4a3d3c3 100644
--- a/doc/source/whatsnew/v0.20.0.txt
+++ b/doc/source/whatsnew/v0.20.0.txt
@@ -551,6 +551,7 @@ Bug Fixes
 - Bug in ``.to_json()`` causing single byte ascii characters to be expanded to four byte unicode (:issue:`15344`)
 - Bug in ``.read_json()`` for Python 2 where ``lines=True`` and contents contain non-ascii unicode characters (:issue:`15132`)
 - Bug in ``.rolling/expanding()`` functions where ``count()`` was not counting ``np.Inf``, nor handling ``object`` dtypes (:issue:`12541`)
+- Bug in ``.rolling()`` where ``pd.Timedelta`` or ``datetime.timedelta`` was not accepted as a ``window`` argument (:issue:`15440`)
 - Bug in ``DataFrame.resample().median()`` if duplicate column names are present (:issue:`14233`)
 
 - Bug in ``DataFrame.groupby().describe()`` when grouping on ``Index`` containing tuples (:issue:`14848`)
diff --git a/pandas/core/window.py b/pandas/core/window.py
index 50de6b84d..3f9aa2b0f 100644
--- a/pandas/core/window.py
+++ b/pandas/core/window.py
@@ -10,6 +10,7 @@ from __future__ import division
 import warnings
 import numpy as np
 from collections import defaultdict
+from datetime import timedelta
 
 from pandas.types.generic import (ABCSeries,
                                   ABCDataFrame,
@@ -1014,7 +1015,8 @@ class Rolling(_Rolling_and_Expanding):
 
         # we allow rolling on a datetimelike index
         if (self.is_datetimelike and
-                isinstance(self.window, (compat.string_types, DateOffset))):
+                isinstance(self.window, (compat.string_types, DateOffset,
+                                         timedelta))):
 
             self._validate_monotonic()
             freq = self._validate_freq()
diff --git a/pandas/tests/test_window.py b/pandas/tests/test_window.py
index 1bb1f9142..452e8999a 100644
--- a/pandas/tests/test_window.py
+++ b/pandas/tests/test_window.py
@@ -4,7 +4,7 @@ import sys
 import warnings
 from warnings import catch_warnings
 
-from datetime import datetime
+from datetime import datetime, timedelta
 from numpy.random import randn
 import numpy as np
 from distutils.version import LooseVersion
@@ -401,6 +401,24 @@ class TestRolling(Base):
             with self.assertRaises(ValueError):
                 c(-1, win_type='boxcar')
 
+    def test_constructor_with_timedelta_window(self):
+        # GH 15440
+        n = 10
+        df = pd.DataFrame({'value': np.arange(n)},
+                          index=pd.date_range('2015-12-24',
+                                              periods=n,
+                                              freq="D"))
+        expected_data = np.append([0., 1.], np.arange(3., 27., 3))
+        for window in [timedelta(days=3), pd.Timedelta(days=3)]:
+            result = df.rolling(window=window).sum()
+            expected = pd.DataFrame({'value': expected_data},
+                                    index=pd.date_range('2015-12-24',
+                                                        periods=n,
+                                                        freq="D"))
+            tm.assert_frame_equal(result, expected)
+            expected = df.rolling('3D').sum()
+            tm.assert_frame_equal(result, expected)
+
     def test_numpy_compat(self):
         # see gh-12811
         r = rwindow.Rolling(Series([2, 4, 6]), window=2)
