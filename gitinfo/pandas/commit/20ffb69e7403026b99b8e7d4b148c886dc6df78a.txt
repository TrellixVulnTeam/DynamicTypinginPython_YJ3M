commit 20ffb69e7403026b99b8e7d4b148c886dc6df78a
Author: Jeff Reback <jeff@reback.net>
Date:   Sun Nov 25 11:01:03 2012 -0500

    testing for PyTables 2.3 was incorrect (for allowing indexing support); added test to catch

diff --git a/pandas/io/pytables.py b/pandas/io/pytables.py
index 760905170..a4897878f 100644
--- a/pandas/io/pytables.py
+++ b/pandas/io/pytables.py
@@ -68,7 +68,7 @@ _LEGACY_MAP = {
 
 # oh the troubles to reduce import time
 _table_mod = None
-_table_supports_index = True
+_table_supports_index = False
 
 def _tables():
     global _table_mod
@@ -79,7 +79,7 @@ def _tables():
 
         # version requirements
         major, minor, subv = tables.__version__.split('.')
-        if major >= 2 and minor >= 3:
+        if int(major) >= 2 and int(minor) >= 3:
             _table_supports_index = True
 
     return _table_mod
diff --git a/pandas/io/tests/test_pytables.py b/pandas/io/tests/test_pytables.py
index 2287d36bd..f2eb025b6 100644
--- a/pandas/io/tests/test_pytables.py
+++ b/pandas/io/tests/test_pytables.py
@@ -184,6 +184,11 @@ class TestHDFStore(unittest.TestCase):
         self.store.put('f2', df)
         self.assertRaises(Exception, self.store.create_table_index, 'f2')
 
+        # try to change the version supports flag
+        from pandas.io import pytables
+        pytables._table_supports_index = False
+        self.assertRaises(Exception, self.store.create_table_index, 'f')
+
     def test_append_diff_item_order(self):
         wp = tm.makePanel()
         wp1 = wp.ix[:, :10, :]
