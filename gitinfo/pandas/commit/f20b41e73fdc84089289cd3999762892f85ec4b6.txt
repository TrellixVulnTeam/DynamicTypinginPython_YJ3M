commit f20b41e73fdc84089289cd3999762892f85ec4b6
Author: Yuichiro Kaneko <spiketeika@gmail.com>
Date:   Tue Jul 5 01:01:16 2016 +0900

    TST: Move `test_crosstab_margins` to `TestPivotTable` (#13553)
    
    This test case assert `pivot_table` method.
    So it should be defined on `TestPivotTable`.

diff --git a/pandas/tools/tests/test_pivot.py b/pandas/tools/tests/test_pivot.py
index 7ec4018d3..cda2343fb 100644
--- a/pandas/tools/tests/test_pivot.py
+++ b/pandas/tools/tests/test_pivot.py
@@ -801,6 +801,26 @@ class TestPivotTable(tm.TestCase):
         expected = pd.DataFrame(table.values, index=ix, columns=cols)
         tm.assert_frame_equal(table, expected)
 
+    def test_categorical_margins(self):
+        # GH 10989
+        df = pd.DataFrame({'x': np.arange(8),
+                           'y': np.arange(8) // 4,
+                           'z': np.arange(8) % 2})
+
+        expected = pd.DataFrame([[1.0, 2.0, 1.5], [5, 6, 5.5], [3, 4, 3.5]])
+        expected.index = Index([0, 1, 'All'], name='y')
+        expected.columns = Index([0, 1, 'All'], name='z')
+
+        data = df.copy()
+        table = data.pivot_table('x', 'y', 'z', margins=True)
+        tm.assert_frame_equal(table, expected)
+
+        data = df.copy()
+        data.y = data.y.astype('category')
+        data.z = data.z.astype('category')
+        table = data.pivot_table('x', 'y', 'z', margins=True)
+        tm.assert_frame_equal(table, expected)
+
 
 class TestCrosstab(tm.TestCase):
 
@@ -919,26 +939,6 @@ class TestCrosstab(tm.TestCase):
                                    names=['b', 'c'])
         tm.assert_index_equal(res.columns, m)
 
-    def test_categorical_margins(self):
-        # GH 10989
-        df = pd.DataFrame({'x': np.arange(8),
-                           'y': np.arange(8) // 4,
-                           'z': np.arange(8) % 2})
-
-        expected = pd.DataFrame([[1.0, 2.0, 1.5], [5, 6, 5.5], [3, 4, 3.5]])
-        expected.index = Index([0, 1, 'All'], name='y')
-        expected.columns = Index([0, 1, 'All'], name='z')
-
-        data = df.copy()
-        table = data.pivot_table('x', 'y', 'z', margins=True)
-        tm.assert_frame_equal(table, expected)
-
-        data = df.copy()
-        data.y = data.y.astype('category')
-        data.z = data.z.astype('category')
-        table = data.pivot_table('x', 'y', 'z', margins=True)
-        tm.assert_frame_equal(table, expected)
-
     def test_crosstab_no_overlap(self):
         # GS 10291
 
