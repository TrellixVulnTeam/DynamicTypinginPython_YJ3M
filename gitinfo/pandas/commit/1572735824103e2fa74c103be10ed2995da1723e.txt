commit 1572735824103e2fa74c103be10ed2995da1723e
Author: y-p <yoval@gmx.com>
Date:   Sun Mar 10 21:16:05 2013 +0200

    TST: df.from_records should accept values deriving from ABC collection.Mapping

diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index 1c30dfd1a..8cd462007 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -3246,6 +3246,22 @@ class TestDataFrame(unittest.TestCase, CheckIndexing,
         rs = df.to_records(convert_datetime64=False)
         self.assert_(rs['index'][0] == df.index.values[0])
 
+    def test_to_records_with_Mapping_type(self):
+        import email
+        from email.parser import Parser
+        import collections
+
+        collections.Mapping.register(email.message.Message)
+
+        headers = Parser().parsestr('From: <user@example.com>\n'
+                'To: <someone_else@example.com>\n'
+                'Subject: Test message\n'
+                '\n'
+                'Body would go here\n')
+
+        frame = DataFrame.from_records([headers])
+        all( x in frame for x in ['Type','Subject','From'])
+
     def test_from_records_to_records(self):
         # from numpy documentation
         arr = np.zeros((2,), dtype=('i4,f4,a10'))
