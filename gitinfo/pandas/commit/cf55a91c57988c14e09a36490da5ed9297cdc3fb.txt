commit cf55a91c57988c14e09a36490da5ed9297cdc3fb
Author: y-p <yoval@gmx.com>
Date:   Tue Apr 9 22:21:04 2013 +0300

    BUG: work around mpl 1.2.1 regression,  ax.axhline(0) with log=true GH3298

diff --git a/pandas/tests/test_graphics.py b/pandas/tests/test_graphics.py
index 74409de4a..b130aabeb 100644
--- a/pandas/tests/test_graphics.py
+++ b/pandas/tests/test_graphics.py
@@ -406,6 +406,9 @@ class TestDataFramePlots(unittest.TestCase):
                          ax.patches[0].get_x() + ax.patches[0].get_width())
     @slow
     def test_bar_log(self):
+        # GH3254, GH3298 matplotlib/matplotlib#1882, #1892
+        # regressions in 1.2.1
+
         df = DataFrame({'A': [3] * 5, 'B': range(5)}, index=range(5))
         ax = df.plot(kind='bar', grid=True,log=True)
         self.assertEqual(ax.yaxis.get_ticklocs()[0],1.0)
diff --git a/pandas/tools/plotting.py b/pandas/tools/plotting.py
index 50d57d429..1f879f9ac 100644
--- a/pandas/tools/plotting.py
+++ b/pandas/tools/plotting.py
@@ -1325,6 +1325,7 @@ class BarPlot(MPLPlot):
         else:
             self.tickoffset = 0.375
         self.bar_width = 0.5
+        self.log = kwargs.pop('log',False)
         MPLPlot.__init__(self, data, **kwargs)
 
     def _args_adjust(self):
@@ -1335,9 +1336,9 @@ class BarPlot(MPLPlot):
     def bar_f(self):
         if self.kind == 'bar':
             def f(ax, x, y, w, start=None, **kwds):
-                return ax.bar(x, y, w, bottom=start, **kwds)
+                return ax.bar(x, y, w, bottom=start,log=self.log, **kwds)
         elif self.kind == 'barh':
-            def f(ax, x, y, w, start=None, **kwds):
+            def f(ax, x, y, w, start=None, log=self.log, **kwds):
                 return ax.barh(x, y, w, left=start, **kwds)
         else:
             raise NotImplementedError
@@ -1411,7 +1412,8 @@ class BarPlot(MPLPlot):
                 ax.set_xticks(self.ax_pos + self.tickoffset)
                 ax.set_xticklabels(str_index, rotation=self.rot,
                                    fontsize=self.fontsize)
-                ax.axhline(0, color='k', linestyle='--')
+                if not self.log: # GH3254+
+                    ax.axhline(0, color='k', linestyle='--')
                 if name is not None:
                     ax.set_xlabel(name)
             else:
