commit 42894795c1551b6da3e4c856a62447bf44f2fa8a
Author: Chang She <changshe@gmail.com>
Date:   Thu Nov 29 12:49:44 2012 -0500

    TST: check whether a repr_html is based on max cols/rows faking a qtconsole

diff --git a/pandas/tests/test_format.py b/pandas/tests/test_format.py
index d265074c1..bd4261e2d 100644
--- a/pandas/tests/test_format.py
+++ b/pandas/tests/test_format.py
@@ -782,6 +782,21 @@ class TestDataFrameFormatting(unittest.TestCase):
 
         fmt.reset_printoptions()
 
+    def test_fake_qtconsole_repr_html(self):
+        def get_ipython():
+            return {'config' :
+                        {'KernelApp' :
+                             {'parent_appname' : 'ipython-qtconsole'}}}
+
+        repstr = self.frame._repr_html_()
+        self.assert_(repstr is not None)
+
+        fmt.set_printoptions(max_rows=5, max_columns=2)
+
+        self.assert_(self.frame._repr_html_() is None)
+
+        fmt.reset_printoptions()
+
     def test_to_html_with_classes(self):
         df = pandas.DataFrame()
         result = df.to_html(classes="sortable draggable")
