commit 0543a21abffa134037f598de350f543dbf5d44bb
Author: y-p <yoval@gmx.com>
Date:   Tue Jan 14 22:08:11 2014 +0200

    BLD: ipython_directive, decode ipython output as utf8+replace

diff --git a/doc/sphinxext/ipython_directive.py b/doc/sphinxext/ipython_directive.py
index b4bd60ba5..e228542b6 100644
--- a/doc/sphinxext/ipython_directive.py
+++ b/doc/sphinxext/ipython_directive.py
@@ -320,6 +320,14 @@ class EmbeddedSphinxShell(object):
                 self.IP.run_cell(source_raw, store_history=store_history)
         finally:
             sys.stdout = stdout
+            buflist = self.cout.buflist
+            for i in range(len(buflist)):
+                try:
+                # print(buflist[i])
+                    if not isinstance(buflist[i], unicode):
+                        buflist[i] = buflist[i].decode('utf8','replace')
+                except:
+                    pass
 
     def process_image(self, decorator):
         """
