commit 30580e7acd6cafd55616d91bedbb8999d65177f5
Author: Jim Crist <crist042@umn.edu>
Date:   Mon Apr 13 11:38:20 2015 -0500

    Groupby transform preserves output dtype
    
    Previously `transform` output was always the same dtype as the groupby
    object. This allows the output dtype to differ from the input. Fixes #9807.

diff --git a/doc/source/whatsnew/v0.16.1.txt b/doc/source/whatsnew/v0.16.1.txt
index 6c6adec68..a0d81567d 100644
--- a/doc/source/whatsnew/v0.16.1.txt
+++ b/doc/source/whatsnew/v0.16.1.txt
@@ -134,6 +134,9 @@ Bug Fixes
 
 - Bug in unequal comparisons between a ``Series`` of dtype `"category"` and a scalar (e.g. ``Series(Categorical(list("abc"), categories=list("cba"), ordered=True)) > "b"``, which wouldn't use the order of the categories but use the lexicographical order. (:issue:`9848`)
 
+
 - Bug in unequal comparisons between categorical data and a scalar, which was not in the categories (e.g. ``Series(Categorical(list("abc"), ordered=True)) > "d"``. This returned ``False`` for all elements, but now raises a ``TypeError``. Equality comparisons also now return ``False`` for ``==`` and ``True`` for ``!=``. (:issue:`9848`)
 
 - Bug in ``MultiIndex.sortlevel()`` results in unicode level name breaks (:issue:`9875`)
+
+- Bug in which ``groupby.transform`` incorrectly enforced output dtypes to match input dtypes. (:issue:`9807`)
diff --git a/pandas/core/groupby.py b/pandas/core/groupby.py
index 6d98b3b99..fe8204260 100644
--- a/pandas/core/groupby.py
+++ b/pandas/core/groupby.py
@@ -3006,7 +3006,7 @@ class NDFrameGroupBy(GroupBy):
         if ((not isinstance(obj.index,MultiIndex) and
              type(result.index) != type(obj.index)) or
             len(result.index) != len(obj.index)):
-            results = obj.values.copy()
+            results = np.empty_like(obj.values, result.values.dtype)
             indices = self.indices
             for (name, group), (i, row) in zip(self, result.iterrows()):
                 indexer = indices[name]
diff --git a/pandas/tests/test_groupby.py b/pandas/tests/test_groupby.py
index e7001eb09..87536b9bf 100644
--- a/pandas/tests/test_groupby.py
+++ b/pandas/tests/test_groupby.py
@@ -1003,6 +1003,14 @@ class TestGroupBy(tm.TestCase):
             for idx in gp.index:
                 assert_fp_equal(res.xs(idx), agged[idx])
 
+    def test_transform_dtype(self):
+        # GH 9807
+        # Check transform dtype output is preserved
+        df = DataFrame([[1, 3], [2, 3]])
+        result = df.groupby(1).transform('mean')
+        expected = DataFrame([[1.5], [1.5]])
+        assert_frame_equal(result, expected)
+
     def test_transform_bug(self):
         # GH 5712
         # transforming on a datetime column
