commit e5fec876f526405072155286b662be8b016eec70
Author: Kaiqi Dong <kaiqi@kth.se>
Date:   Wed Sep 11 03:43:54 2019 +0200

    CLN: timeseries in plotting clean up (#28020)

diff --git a/pandas/plotting/_matplotlib/timeseries.py b/pandas/plotting/_matplotlib/timeseries.py
index f3fcb090e..f160e50d8 100644
--- a/pandas/plotting/_matplotlib/timeseries.py
+++ b/pandas/plotting/_matplotlib/timeseries.py
@@ -304,23 +304,6 @@ def _maybe_convert_index(ax, data):
 # Do we need the rest for convenience?
 
 
-def format_timedelta_ticks(x, pos, n_decimals):
-    """
-    Convert seconds to 'D days HH:MM:SS.F'
-    """
-    s, ns = divmod(x, 1e9)
-    m, s = divmod(s, 60)
-    h, m = divmod(m, 60)
-    d, h = divmod(h, 24)
-    decimals = int(ns * 10 ** (n_decimals - 9))
-    s = r"{:02d}:{:02d}:{:02d}".format(int(h), int(m), int(s))
-    if n_decimals > 0:
-        s += ".{{:0{:0d}d}}".format(n_decimals).format(decimals)
-    if d != 0:
-        s = "{:d} days ".format(int(d)) + s
-    return s
-
-
 def _format_coord(freq, t, y):
     return "t = {0}  y = {1:8f}".format(Period(ordinal=int(t), freq=freq), y)
 
diff --git a/pandas/tests/plotting/test_converter.py b/pandas/tests/plotting/test_converter.py
index 7001264c4..aabe16d50 100644
--- a/pandas/tests/plotting/test_converter.py
+++ b/pandas/tests/plotting/test_converter.py
@@ -388,3 +388,21 @@ class TestPeriodConverter:
         r1 = self.pc.convert([data, data], None, self.axis)
         r2 = [self.pc.convert(data, None, self.axis) for _ in range(2)]
         assert r1 == r2
+
+
+class TestTimeDeltaConverter:
+    """Test timedelta converter"""
+
+    @pytest.mark.parametrize(
+        "x, decimal, format_expected",
+        [
+            (0.0, 0, "00:00:00"),
+            (3972320000000, 1, "01:06:12.3"),
+            (713233432000000, 2, "8 days 06:07:13.43"),
+            (32423432000000, 4, "09:00:23.4320"),
+        ],
+    )
+    def test_format_timedelta_ticks(self, x, decimal, format_expected):
+        tdc = converter.TimeSeries_TimedeltaFormatter
+        result = tdc.format_timedelta_ticks(x, pos=None, n_decimals=decimal)
+        assert result == format_expected
