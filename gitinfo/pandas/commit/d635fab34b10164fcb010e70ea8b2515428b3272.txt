commit d635fab34b10164fcb010e70ea8b2515428b3272
Author: Jeff Reback <jeff@reback.net>
Date:   Tue Oct 20 16:56:05 2015 -0400

    DEPR: fix VisibleDeprecationWarnings in sparse

diff --git a/pandas/sparse/array.py b/pandas/sparse/array.py
index b765fdb8d..f275a34ca 100644
--- a/pandas/sparse/array.py
+++ b/pandas/sparse/array.py
@@ -283,7 +283,15 @@ to sparse
         if com.is_integer(key):
             return self._get_val_at(key)
         else:
-            data_slice = self.values[key]
+            if isinstance(key, SparseArray):
+                key = np.asarray(key)
+            if hasattr(key,'__len__') and len(self) != len(key):
+                indices = self.sp_index
+                if hasattr(indices,'to_int_index'):
+                    indices = indices.to_int_index()
+                data_slice = self.values.take(indices.indices)[key]
+            else:
+                data_slice = self.values[key]
             return self._constructor(data_slice)
 
     def __getslice__(self, i, j):
@@ -513,7 +521,12 @@ def make_sparse(arr, kind='block', fill_value=nan):
     else:
         mask = arr != fill_value
 
-    indices = np.arange(length, dtype=np.int32)[mask]
+    length = len(arr)
+    if length != mask.size:
+        # the arr is a SparseArray
+        indices = mask.sp_index.indices
+    else:
+        indices = np.arange(length, dtype=np.int32)[mask]
 
     if kind == 'block':
         locs, lens = splib.get_blocks(indices)
