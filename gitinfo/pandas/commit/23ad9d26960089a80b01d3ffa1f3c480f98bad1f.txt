commit 23ad9d26960089a80b01d3ffa1f3c480f98bad1f
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Tue Dec 22 05:08:54 2009 +0000

    latest Makefile
    
    git-svn-id: http://pandas.googlecode.com/svn/trunk@93 d5231056-7de3-11de-ac95-d976489f1ece

diff --git a/doc/Makefile b/doc/Makefile
index 150851a92..7ce3d3a1b 100644
--- a/doc/Makefile
+++ b/doc/Makefile
@@ -1,11 +1,16 @@
 # Makefile for Sphinx documentation
 #
 
+PYVER = 2.5
+PYTHON = python$(PYVER)
+
 # You can set these variables from the command line.
 SPHINXOPTS    =
 SPHINXBUILD   = sphinx-build
 PAPER         =
 
+NEED_AUTOSUMMARY = $(shell $(PYTHON) -c 'import sphinx; print sphinx.__version__ < "0.7" and "1" or ""')
+
 # Internal variables.
 PAPEROPT_a4     = -D latex_paper_size=a4
 PAPEROPT_letter = -D latex_paper_size=letter
@@ -27,7 +32,18 @@ help:
 	@echo "  doctest   to run all doctests embedded in the documentation (if enabled)"
 
 clean:
-	-rm -rf build/*
+	-rm -rf build/* source/generated
+
+
+generate: build/generate-stamp
+build/generate-stamp: $(wildcard source/*.rst)
+	mkdir -p build
+ifeq ($(NEED_AUTOSUMMARY),1)
+	$(PYTHON) \
+		./sphinxext/autosummary_generate.py source/*.rst \
+		-p dump.xml -o source/generated
+endif
+	touch build/generate-stamp
 
 html:
 	$(SPHINXBUILD) -b html $(ALLSPHINXOPTS) build/html
diff --git a/doc/build.sh b/doc/build.sh
deleted file mode 100755
index 829541208..000000000
--- a/doc/build.sh
+++ /dev/null
@@ -1,8 +0,0 @@
-#!/bin/sh
-
-export PYTHONPATH=/Users/wesm/code/pandas/
-
-echo $PYTHONPATH
-
-python make.py clean
-python make.py html
\ No newline at end of file
