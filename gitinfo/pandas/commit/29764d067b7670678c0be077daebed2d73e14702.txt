commit 29764d067b7670678c0be077daebed2d73e14702
Author: y-p <yoval@gmx.com>
Date:   Tue Apr 2 21:44:11 2013 +0300

    BLD: test_perf -H shouldn't die if a vbench raises

diff --git a/vb_suite/test_perf.py b/vb_suite/test_perf.py
index d4c1a319a..2d7fb459c 100755
--- a/vb_suite/test_perf.py
+++ b/vb_suite/test_perf.py
@@ -199,16 +199,25 @@ def profile_head_single(benchmarks):
 
     print( "Running %d benchmarks" % len(benchmarks))
     for b in benchmarks:
-        d = b.run()
+        try:
+            d = b.run()
+        except Exception as e: # if a single vbench bursts into flames, don't die.
+            try:
+                err =  d.get("traceback","")
+            except:
+                pass
+            print("%s died with:\n%s\nSkipping...\n" % (b.name, err))
+
         d.update(dict(name=b.name))
-        results.append(dict(name=d['name'],timing=d['timing']))
+        results.append(dict(name=b.name,timing=d.get('timing',np.nan)))
 
     df = DataFrame(results)
     df.columns = ["name",HEAD_COL]
     return df.set_index("name")[HEAD_COL]
 
 def profile_head(benchmarks):
-    print( "profile_head")
+
+
     ss= [profile_head_single(benchmarks) for i in range(args.hrepeats)]
 
     results = DataFrame(ss)
