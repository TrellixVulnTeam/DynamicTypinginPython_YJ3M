commit 4c3916310a86c3e4dab6d30858a984a6f4a64103
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Sat Jan 21 18:02:04 2012 -0500

    ENH: break circular reference causing memory leak in sparse array / series / frame, GH #663

diff --git a/pandas/sparse/array.py b/pandas/sparse/array.py
index 0d15b1f37..214197035 100644
--- a/pandas/sparse/array.py
+++ b/pandas/sparse/array.py
@@ -135,7 +135,6 @@ to sparse
 
         # Change the class of the array to be the subclass type.
         output = subarr.view(cls)
-        output._sp_values = subarr
         output.sp_index = sparse_index
         output.fill_value = np.float64(fill_value)
         return output
diff --git a/pandas/sparse/series.py b/pandas/sparse/series.py
index 71eeef547..4001ef7b0 100644
--- a/pandas/sparse/series.py
+++ b/pandas/sparse/series.py
@@ -133,7 +133,6 @@ class SparseSeries(SparseArray, Series):
 
         # Change the class of the array to be the subclass type.
         output = subarr.view(cls)
-        output._sp_values = subarr
         output.sp_index = sparse_index
         output.fill_value = np.float64(fill_value)
         output.index = index
diff --git a/scripts/roll_median_leak.py b/scripts/roll_median_leak.py
index 2dbd356a9..c45f32106 100644
--- a/scripts/roll_median_leak.py
+++ b/scripts/roll_median_leak.py
@@ -14,8 +14,12 @@ import psutil
 pid = os.getpid()
 proc = psutil.Process(pid)
 
-s = Series(np.random.randn(10000))
+lst = SparseList()
+lst.append([5] * 5)
+lst.append(np.repeat(np.nan, 1000000))
 
-for _ in xrange(5):
-    # print proc.get_memory_info()
-    result = rolling_median(s, 1000)
+sdf = SparseDataFrame({'A' : lst.to_array()})
+
+for _ in xrange(10000):
+    print proc.get_memory_info()
+    chunk = sdf[sdf['A'] == 5]
