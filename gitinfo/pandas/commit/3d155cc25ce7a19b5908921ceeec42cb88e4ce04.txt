commit 3d155cc25ce7a19b5908921ceeec42cb88e4ce04
Author: y-p <yoval@gmx.com>
Date:   Fri Jan 31 22:23:21 2014 +0200

    BLD/DOC: ip_directive use py3 compat text_type

diff --git a/doc/sphinxext/ipython_directive.py b/doc/sphinxext/ipython_directive.py
index 86050a346..ff2379eb7 100644
--- a/doc/sphinxext/ipython_directive.py
+++ b/doc/sphinxext/ipython_directive.py
@@ -134,8 +134,10 @@ from IPython.utils.py3compat import PY3
 
 if PY3:
     from io import StringIO
+    text_type = str
 else:
     from StringIO import StringIO
+    text_type = unicode
 
 #-----------------------------------------------------------------------------
 # Globals
@@ -255,8 +257,7 @@ class DecodingStringIO(StringIO, object):
         self.encodings = encodings
 
     def write(self,data):
-        #py 3 compat here
-        if isinstance(data,unicode):
+        if isinstance(data, text_type):
             return super(DecodingStringIO, self).write(data)
         else:
             for enc in self.encodings:
