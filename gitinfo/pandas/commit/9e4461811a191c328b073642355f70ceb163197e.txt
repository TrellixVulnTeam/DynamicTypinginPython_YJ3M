commit 9e4461811a191c328b073642355f70ceb163197e
Author: Gabriel Tutui <gntutui@gmail.com>
Date:   Mon Jul 6 18:28:07 2020 -0300

    TST: Add test for category equalness on applies (#21239) (#35125)

diff --git a/pandas/tests/frame/test_apply.py b/pandas/tests/frame/test_apply.py
index 114b3c0d0..3a32278e2 100644
--- a/pandas/tests/frame/test_apply.py
+++ b/pandas/tests/frame/test_apply.py
@@ -793,6 +793,18 @@ class TestDataFrameApply:
         result = df.apply(lambda x: x.astype("object"))
         tm.assert_frame_equal(result, expected)
 
+    @pytest.mark.parametrize("val", ["asd", 12, None, np.NaN])
+    def test_apply_category_equalness(self, val):
+        # Check if categorical comparisons on apply, GH 21239
+        df_values = ["asd", None, 12, "asd", "cde", np.NaN]
+        df = pd.DataFrame({"a": df_values}, dtype="category")
+
+        result = df.a.apply(lambda x: x == val)
+        expected = pd.Series(
+            [np.NaN if pd.isnull(x) else x == val for x in df_values], name="a"
+        )
+        tm.assert_series_equal(result, expected)
+
 
 class TestInferOutputShape:
     # the user has supplied an opaque UDF where
