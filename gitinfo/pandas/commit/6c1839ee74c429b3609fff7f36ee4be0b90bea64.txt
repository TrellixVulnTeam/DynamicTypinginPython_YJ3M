commit 6c1839ee74c429b3609fff7f36ee4be0b90bea64
Author: Chang She <changshe@gmail.com>
Date:   Thu Dec 13 22:18:49 2012 -0500

    BUG: diff should cast n to int #2523

diff --git a/pandas/core/common.py b/pandas/core/common.py
index 386343dc3..2b9e19f90 100644
--- a/pandas/core/common.py
+++ b/pandas/core/common.py
@@ -455,6 +455,7 @@ _diff_special = {
 }
 
 def diff(arr, n, axis=0):
+    n = int(n)
     dtype = arr.dtype
     if issubclass(dtype.type, np.integer):
         dtype = np.float64
diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index a3be5e517..0c5ca5533 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -5504,6 +5504,11 @@ class TestDataFrame(unittest.TestCase, CheckIndexing,
         xp = self.tsframe - self.tsframe.shift(-1)
         assert_frame_equal(rs, xp)
 
+    def test_diff_float_n(self):
+        rs = self.tsframe.diff(1.)
+        xp = self.tsframe.diff(1)
+        assert_frame_equal(rs, xp)
+
     def test_pct_change(self):
         rs = self.tsframe.pct_change(fill_method=None)
         assert_frame_equal(rs, self.tsframe / self.tsframe.shift(1) - 1)
