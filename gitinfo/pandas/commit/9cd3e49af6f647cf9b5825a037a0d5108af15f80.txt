commit 9cd3e49af6f647cf9b5825a037a0d5108af15f80
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Mon Jan 16 12:55:13 2012 -0500

    BUG: don't lose index names when adding row margin

diff --git a/RELEASE.rst b/RELEASE.rst
index f397c2c6c..27e3ff175 100644
--- a/RELEASE.rst
+++ b/RELEASE.rst
@@ -208,7 +208,8 @@ pandas 0.7.0
   - Fix TypeError with tuple subclasses (e.g. namedtuple) in
     DataFrame.from_records (GH #611)
   - Catch misreported console size when running IPython within Emacs
-  - Fix minor bug in pivot table margins
+  - Fix minor bug in pivot table margins, loss of index names and length-1
+    'All' tuple in row labels
 
 Thanks
 ------
diff --git a/pandas/tools/pivot.py b/pandas/tools/pivot.py
index 76d4a10c5..63bda01a8 100644
--- a/pandas/tools/pivot.py
+++ b/pandas/tools/pivot.py
@@ -153,7 +153,10 @@ def _add_margins(table, data, values, rows=None, cols=None, aggfunc=np.mean):
             row_margin[k] = grand_margin[k]
 
     margin_dummy = DataFrame(row_margin, columns=[key]).T
+
+    row_names = result.index.names
     result = result.append(margin_dummy)
+    result.index.names = row_names
 
     return result
 
diff --git a/pandas/tools/tests/test_pivot.py b/pandas/tools/tests/test_pivot.py
index 2e00f3e34..f1a517712 100644
--- a/pandas/tools/tests/test_pivot.py
+++ b/pandas/tools/tests/test_pivot.py
@@ -188,6 +188,9 @@ class TestCrosstab(unittest.TestCase):
         result = crosstab(a, [b, c], rownames=['a'], colnames=('b', 'c'),
                           margins=True)
 
+        self.assertEqual(result.index.names, ['a'])
+        self.assertEqual(result.columns.names, ['b', 'c'])
+
         all_cols = result['All', '']
         exp_cols = df.groupby(['a']).size()
         exp_cols = exp_cols.append(Series([len(df)], index=['All']))
