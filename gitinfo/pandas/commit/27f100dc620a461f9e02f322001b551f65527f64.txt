commit 27f100dc620a461f9e02f322001b551f65527f64
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Tue Dec 13 15:21:16 2011 -0500

    TST: can't pass 'i8' to take py2.5/win32 array...

diff --git a/pandas/src/stats.pyx b/pandas/src/stats.pyx
index 87bc394f1..2a39050b3 100644
--- a/pandas/src/stats.pyx
+++ b/pandas/src/stats.pyx
@@ -23,8 +23,12 @@ def rank_1d_float64(object in_arr):
 
     n = len(values)
     ranks = np.empty(n, dtype='f8')
-    argsorted = values.argsort().astype('i8')
-    sorted_data = values.take(argsorted)
+
+    # py2.5/win32 hack, can't pass i8
+    _as = values.argsort()
+    sorted_data = values.take(_as)
+
+    argsorted = _as.astype('i8')
 
     for i in range(n):
         sum_ranks += i + 1
@@ -111,8 +115,10 @@ def rank_1d_generic(object in_arr):
     n = len(values)
     ranks = np.empty(n, dtype='f8')
 
-    argsorted = values.argsort().astype('i8')
-    sorted_data = values.take(argsorted)
+    # py2.5/win32 hack, can't pass i8
+    _as = values.argsort()
+    sorted_data = values.take(_as)
+    argsorted = _as.astype('i8')
 
     for i in range(n):
         sum_ranks += i + 1
