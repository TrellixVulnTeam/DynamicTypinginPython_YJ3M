commit 5d28f26bb3b2a4fa7adc0808be54d49a70b1589b
Author: Jeff Reback <jeff@reback.net>
Date:   Sat Mar 25 11:56:18 2017 -0400

    CI: fix coverage file location
    
    CI: clean up some unused env variables
    
    Author: Jeff Reback <jeff@reback.net>
    
    Closes #15792 from jreback/ci and squashes the following commits:
    
    8100d6d [Jeff Reback] CI: fix coverage file location

diff --git a/.travis.yml b/.travis.yml
index eb2a58b06..d78e4dab3 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -39,7 +39,6 @@ matrix:
         - TEST_ARGS="--skip-slow --skip-network"
         - JOB_TAG=_OSX
         - TRAVIS_PYTHON_VERSION=3.5
-        - CACHE_NAME="35_osx"
         - USE_CACHE=true
     - python: 2.7
       env:
@@ -47,9 +46,7 @@ matrix:
         - JOB_NAME: "27_slow_nnet_LOCALE"
         - TEST_ARGS="--only-slow --skip-network"
         - LOCALE_OVERRIDE="zh_CN.UTF-8"
-        - FULL_DEPS=true
         - JOB_TAG=_LOCALE
-        - CACHE_NAME="27_slow_nnet_LOCALE"
         - USE_CACHE=true
       addons:
         apt:
@@ -60,10 +57,8 @@ matrix:
         - PYTHON_VERSION=2.7
         - JOB_NAME: "27_nslow"
         - TEST_ARGS="--skip-slow"
-        - FULL_DEPS=true
         - CLIPBOARD_GUI=gtk2
         - LINT=true
-        - CACHE_NAME="27_nslow"
         - USE_CACHE=true
       addons:
         apt:
@@ -74,10 +69,8 @@ matrix:
         - PYTHON_VERSION=3.5
         - JOB_NAME: "35_nslow"
         - TEST_ARGS="--skip-slow --skip-network"
-        - FULL_DEPS=true
         - CLIPBOARD=xsel
         - COVERAGE=true
-        - CACHE_NAME="35_nslow"
         - USE_CACHE=true
       addons:
         apt:
@@ -96,28 +89,24 @@ matrix:
           packages:
           - libatlas-base-dev
           - gfortran
-#    In allow_failures
+    # In allow_failures
     - python: 2.7
       env:
         - PYTHON_VERSION=2.7
         - JOB_NAME: "27_slow"
         - JOB_TAG=_SLOW
         - TEST_ARGS="--only-slow --skip-network"
-        - FULL_DEPS=true
-        - CACHE_NAME="27_slow"
         - USE_CACHE=true
-#    In allow_failures
+    # In allow_failures
     - python: 2.7
       env:
         - PYTHON_VERSION=2.7
         - JOB_NAME: "27_build_test"
         - JOB_TAG=_BUILD_TEST
         - TEST_ARGS="--skip-slow"
-        - FULL_DEPS=true
         - BUILD_TEST=true
-        - CACHE_NAME="27_build_test"
         - USE_CACHE=true
-#    In allow_failures
+    # In allow_failures
     - python: 3.5
       env:
         - PYTHON_VERSION=3.5
@@ -125,17 +114,14 @@ matrix:
         - JOB_TAG=_NUMPY_DEV
         - TEST_ARGS="--skip-slow --skip-network"
         - PANDAS_TESTING_MODE="deprecate"
-        - CACHE_NAME="35_numpy_dev"
         - USE_CACHE=true
-#    In allow_failures
+    # In allow_failures
     - python: 3.5
       env:
         - PYTHON_VERSION=3.5
         - JOB_NAME: "doc_build"
-        - FULL_DEPS=true
         - DOC_BUILD=true
         - JOB_TAG=_DOC_BUILD
-        - CACHE_NAME="doc_build"
         - USE_CACHE=true
     allow_failures:
       - python: 2.7
@@ -144,8 +130,6 @@ matrix:
         - JOB_NAME: "27_slow"
         - JOB_TAG=_SLOW
         - TEST_ARGS="--only-slow --skip-network"
-        - FULL_DEPS=true
-        - CACHE_NAME="27_slow"
         - USE_CACHE=true
       - python: 2.7
         env:
@@ -153,9 +137,7 @@ matrix:
         - JOB_NAME: "27_build_test"
         - JOB_TAG=_BUILD_TEST
         - TEST_ARGS="--skip-slow"
-        - FULL_DEPS=true
         - BUILD_TEST=true
-        - CACHE_NAME="27_build_test"
         - USE_CACHE=true
       - python: 3.5
         env:
@@ -164,16 +146,13 @@ matrix:
         - JOB_TAG=_NUMPY_DEV
         - TEST_ARGS="--skip-slow --skip-network"
         - PANDAS_TESTING_MODE="deprecate"
-        - CACHE_NAME="35_numpy_dev"
         - USE_CACHE=true
       - python: 3.5
         env:
         - PYTHON_VERSION=3.5
         - JOB_NAME: "doc_build"
-        - FULL_DEPS=true
         - DOC_BUILD=true
         - JOB_TAG=_DOC_BUILD
-        - CACHE_NAME="doc_build"
         - USE_CACHE=true
 
 before_install:
@@ -209,7 +188,9 @@ script:
   - echo "script done"
 
 after_success:
-  - source activate pandas && codecov
+  - if [ "$COVERAGE" ]; then
+        source activate pandas && codecov --file /tmp/cov-single.xml /tmp/cov-multiple.xml;
+    fi
 
 after_script:
   - echo "after_script start"
diff --git a/ci/script_multi.sh b/ci/script_multi.sh
index 2d1211b2f..f0fbb8c54 100755
--- a/ci/script_multi.sh
+++ b/ci/script_multi.sh
@@ -27,8 +27,8 @@ if [ "$BUILD_TEST" ]; then
     cd /tmp
     python -c "import pandas; pandas.test(['-n 2'])"
 elif [ "$COVERAGE" ]; then
-    echo pytest -s -n 2 -m "not single" --cov=pandas --cov-append --cov-report xml:/tmp/cov.xml --junitxml=/tmp/multiple.xml $TEST_ARGS pandas
-    pytest -s -n 2 -m "not single" --cov=pandas --cov-append --cov-report xml:/tmp/cov.xml --junitxml=/tmp/multiple.xml $TEST_ARGS pandas
+    echo pytest -s -n 2 -m "not single" --cov=pandas --cov-report xml:/tmp/cov-multiple.xml --junitxml=/tmp/multiple.xml $TEST_ARGS pandas
+    pytest -s -n 2 -m "not single" --cov=pandas --cov-report xml:/tmp/cov-multiple.xml --junitxml=/tmp/multiple.xml $TEST_ARGS pandas
 else
     echo pytest -n 2 -m "not single" --junitxml=/tmp/multiple.xml $TEST_ARGS pandas
     pytest -n 2 -m "not single" --junitxml=/tmp/multiple.xml $TEST_ARGS pandas # TODO: doctest
diff --git a/ci/script_single.sh b/ci/script_single.sh
index 2d7962352..86e822cb5 100755
--- a/ci/script_single.sh
+++ b/ci/script_single.sh
@@ -20,8 +20,8 @@ fi
 if [ "$BUILD_TEST" ]; then
     echo "We are not running pytest as this is simply a build test."
 elif [ "$COVERAGE" ]; then
-    echo pytest -s -m "single" --cov=pandas --cov-report xml:/tmp/cov.xml --junitxml=/tmp/single.xml $TEST_ARGS pandas
-    pytest -s -m "single" --cov=pandas --cov-report xml:/tmp/cov.xml --junitxml=/tmp/single.xml $TEST_ARGS pandas
+    echo pytest -s -m "single" --cov=pandas --cov-report xml:/tmp/cov-single.xml --junitxml=/tmp/single.xml $TEST_ARGS pandas
+    pytest -s -m "single" --cov=pandas --cov-report xml:/tmp/cov-single.xml --junitxml=/tmp/single.xml $TEST_ARGS pandas
 else
     echo pytest -m "single" --junitxml=/tmp/single.xml $TEST_ARGS pandas
     pytest -m "single" --junitxml=/tmp/single.xml $TEST_ARGS pandas # TODO: doctest
