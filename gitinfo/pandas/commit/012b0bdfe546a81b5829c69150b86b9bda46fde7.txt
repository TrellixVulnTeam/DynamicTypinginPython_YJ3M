commit 012b0bdfe546a81b5829c69150b86b9bda46fde7
Author: jbrockmendel <jbrockmendel@gmail.com>
Date:   Mon Dec 30 05:18:54 2019 -0800

    POC/TST: dynamic xfail (#30521)

diff --git a/pandas/tests/groupby/test_transform.py b/pandas/tests/groupby/test_transform.py
index c46180c1d..dde71ee51 100644
--- a/pandas/tests/groupby/test_transform.py
+++ b/pandas/tests/groupby/test_transform.py
@@ -765,9 +765,12 @@ def test_transform_with_non_scalar_group():
     ],
 )
 @pytest.mark.parametrize("agg_func", ["count", "rank", "size"])
-def test_transform_numeric_ret(cols, exp, comp_func, agg_func):
+def test_transform_numeric_ret(cols, exp, comp_func, agg_func, request):
     if agg_func == "size" and isinstance(cols, list):
-        pytest.xfail("'size' transformation not supported with NDFrameGroupy")
+        # https://github.com/pytest-dev/pytest/issues/6300
+        # workaround to xfail fixture/param permutations
+        reason = "'size' transformation not supported with NDFrameGroupy"
+        request.node.add_marker(pytest.mark.xfail(reason=reason))
 
     # GH 19200
     df = pd.DataFrame(
