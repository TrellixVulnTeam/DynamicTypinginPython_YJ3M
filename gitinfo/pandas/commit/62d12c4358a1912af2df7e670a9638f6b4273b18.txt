commit 62d12c4358a1912af2df7e670a9638f6b4273b18
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Tue Jan 17 15:02:51 2012 -0500

    BUG: passing a string to aggfunc like 'mean' won't break _add_margins, GH #618

diff --git a/pandas/tools/pivot.py b/pandas/tools/pivot.py
index be864cf7a..1c15f7c48 100644
--- a/pandas/tools/pivot.py
+++ b/pandas/tools/pivot.py
@@ -128,7 +128,10 @@ def _add_margins(table, data, values, rows=None, cols=None, aggfunc=np.mean):
     grand_margin = {}
     for k, v in data[values].iteritems():
         try:
-            grand_margin[k] = aggfunc(v)
+            if isinstance(aggfunc, basestring):
+                grand_margin[k] = getattr(v, aggfunc)()
+            else:
+                grand_margin[k] = aggfunc(v)
         except TypeError:
             pass
 
