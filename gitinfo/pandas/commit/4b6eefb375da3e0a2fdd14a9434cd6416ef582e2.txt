commit 4b6eefb375da3e0a2fdd14a9434cd6416ef582e2
Author: jreback <jeff@reback.net>
Date:   Sun Sep 8 21:25:40 2013 -0400

    TST: (GH4550) where with a dup index in Series

diff --git a/pandas/tests/test_series.py b/pandas/tests/test_series.py
index b0911ed10..829477aa9 100644
--- a/pandas/tests/test_series.py
+++ b/pandas/tests/test_series.py
@@ -1373,6 +1373,15 @@ class TestSeries(unittest.TestCase, CheckNameIntegration):
         rs.where(cond, -s, inplace=True)
         assert_series_equal(rs, s.where(cond, -s))
 
+    def test_where_dups(self):
+        # GH 4550
+        # where crashes with dups in index
+        s1 = Series(range(3))
+        s2 = Series(range(3))
+        comb = pd.concat([s1,s2])
+        result = comb.where(comb < 2)
+        expected = Series([0,1,np.nan,0,1,np.nan],index=[0,1,2,0,1,2])
+
     def test_mask(self):
         s = Series(np.random.randn(5))
         cond = s > 0
