commit 9df4af5b4efb83699276fb93d9e2c08f7fa9e703
Author: y-p <yoval@gmx.com>
Date:   Fri Mar 22 20:51:41 2013 +0200

    TST: fix test_bar_colors tests

diff --git a/.travis.yml b/.travis.yml
index 13c9ee226..86a6f0549 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -3,7 +3,6 @@ language: python
 python:
   - 2.6
   - 2.7
-#  - 3.1 # travis EOL
   - 3.2
   - 3.3
 
diff --git a/pandas/core/config_init.py b/pandas/core/config_init.py
index c50147bea..692f5cfb8 100644
--- a/pandas/core/config_init.py
+++ b/pandas/core/config_init.py
@@ -164,7 +164,7 @@ def mpl_style_cb(key):
     val = cf.get_option(key)
 
     if 'matplotlib' not in sys.modules.keys():
-        if not(key): # starting up, we get reset to None
+        if not(val): # starting up, we get reset to None
             return val
         raise Exception("matplotlib has not been imported. aborting")
 
diff --git a/pandas/tests/test_graphics.py b/pandas/tests/test_graphics.py
index 15199a886..676f48378 100644
--- a/pandas/tests/test_graphics.py
+++ b/pandas/tests/test_graphics.py
@@ -70,7 +70,7 @@ class TestSeriesPlots(unittest.TestCase):
         import matplotlib.pyplot as plt
         import matplotlib.colors as colors
 
-        default_colors = 'brgyk'
+        default_colors = plt.rcParams.get('axes.color_cycle')
         custom_colors = 'rgcby'
 
         plt.close('all')
