commit 97cef6cc773f7972c8719f5d9dd2e34d8f5fc0dc
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Sat May 26 13:57:54 2012 -0400

    TST: skip failing UJSON tests on Python 2.5

diff --git a/pandas/src/ujson/python/objToJSON.c b/pandas/src/ujson/python/objToJSON.c
index 86afccd35..5efffee89 100644
--- a/pandas/src/ujson/python/objToJSON.c
+++ b/pandas/src/ujson/python/objToJSON.c
@@ -1084,17 +1084,17 @@ void Object_beginTypeContext (JSOBJ _obj, JSONTypeContext *tc)
         return;
     }
     else
-    if (PyUnicode_Check(obj))
+    if (PyString_Check(obj))
     {
         PRINTMARK();
-        pc->PyTypeToJSON = PyUnicodeToUTF8; tc->type = JT_UTF8;
+        pc->PyTypeToJSON = PyStringToUTF8; tc->type = JT_UTF8;
         return;
     }
     else
-    if (PyString_Check(obj))
+    if (PyUnicode_Check(obj))
     {
         PRINTMARK();
-        pc->PyTypeToJSON = PyStringToUTF8; tc->type = JT_UTF8;
+        pc->PyTypeToJSON = PyUnicodeToUTF8; tc->type = JT_UTF8;
         return;
     }
     else
diff --git a/pandas/tests/test_ujson.py b/pandas/tests/test_ujson.py
index 7481d0aae..bfe83d5a6 100644
--- a/pandas/tests/test_ujson.py
+++ b/pandas/tests/test_ujson.py
@@ -9,6 +9,7 @@ except ImportError:
     import simplejson as json
 import math
 import platform
+import sys
 import time
 import datetime
 import calendar
@@ -21,6 +22,13 @@ from numpy.testing import (assert_array_equal, assert_array_almost_equal_nulp,
 from pandas import DataFrame, Series, Index
 import pandas.util.testing as tm
 
+
+def _skip_if_python25():
+    import nose
+    major, minor = sys.version_info[:2]
+    if major == 2 and minor == 5:
+        raise nose.SkipTest
+        
 class UltraJSONTests(TestCase):
     def test_encodeDictWithUnicodeKeys(self):
         input = { u"key1": u"value1", u"key1": u"value1", u"key1": u"value1", u"key1": u"value1", u"key1": u"value1", u"key1": u"value1" }
@@ -135,6 +143,7 @@ class UltraJSONTests(TestCase):
         self.assertEquals(dec, json.loads(enc))
 
     def test_encodeUnicodeSurrogatePair(self):
+        _skip_if_python25()
         input = "\xf0\x90\x8d\x86"
         enc = ujson.encode(input)
         dec = ujson.decode(enc)
@@ -143,6 +152,7 @@ class UltraJSONTests(TestCase):
         self.assertEquals(dec, json.loads(enc))
 
     def test_encodeUnicode4BytesUTF8(self):
+        _skip_if_python25()
         input = "\xf0\x91\x80\xb0TRAILINGNORMAL"
         enc = ujson.encode(input)
         dec = ujson.decode(enc)
@@ -151,6 +161,7 @@ class UltraJSONTests(TestCase):
         self.assertEquals(dec, json.loads(enc))
 
     def test_encodeUnicode4BytesUTF8Highest(self):
+        _skip_if_python25()
         input = "\xf3\xbf\xbf\xbfTRAILINGNORMAL"
         enc = ujson.encode(input)
 
@@ -270,6 +281,7 @@ class UltraJSONTests(TestCase):
         self.assert_(roundtrip == stamp.value)
 
     def test_encodeToUTF8(self):
+        _skip_if_python25()    
         input = "\xe6\x97\xa5\xd1\x88"
         enc = ujson.encode(input, ensure_ascii=False)
         dec = ujson.decode(enc)
