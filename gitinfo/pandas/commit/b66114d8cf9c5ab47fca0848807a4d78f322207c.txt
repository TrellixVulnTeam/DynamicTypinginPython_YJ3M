commit b66114d8cf9c5ab47fca0848807a4d78f322207c
Author: Marc Garcia <garcia.marc@gmail.com>
Date:   Thu Dec 27 23:35:14 2018 +0000

    CI: Moving CircleCI build to Travis (#24449)

diff --git a/.circleci/config.yml b/.circleci/config.yml
deleted file mode 100644
index 6b516b217..000000000
--- a/.circleci/config.yml
+++ /dev/null
@@ -1,38 +0,0 @@
-version: 2
-jobs:
-  build:
-    docker:
-      - image: continuumio/miniconda:latest
-      # databases configuration
-      - image: circleci/postgres:9.6.5-alpine-ram
-        environment:
-            POSTGRES_USER: postgres
-            POSTGRES_DB: pandas_nosetest
-      - image: circleci/mysql:8-ram
-        environment:
-          MYSQL_USER: "root"
-          MYSQL_HOST: "localhost"
-          MYSQL_ALLOW_EMPTY_PASSWORD: "true"
-          MYSQL_DATABASE: "pandas_nosetest"
-
-    environment:
-      JOB: "3.6_LOCALE"
-      ENV_FILE: "ci/deps/circle-36-locale.yaml"
-      LOCALE_OVERRIDE: "zh_CN.UTF-8"
-      MINICONDA_DIR: /home/ubuntu/miniconda3
-    steps:
-      - checkout
-      - run:
-          name: build
-          command: |
-            ./ci/circle/install_circle.sh
-            export PATH="$MINICONDA_DIR/bin:$PATH"
-            source activate pandas-dev
-            python -c "import pandas; pandas.show_versions();"
-      - run:
-          name: test
-          command: |
-            export PATH="$MINICONDA_DIR/bin:$PATH"
-            source activate pandas-dev
-            echo "pytest -m "not slow and not network" --strict --durations=10 --color=no --junitxml=$CIRCLE_TEST_REPORTS/reports/junit.xml pandas"
-            pytest       -m "not slow and not network" --strict --durations=10 --color=no --junitxml=$CIRCLE_TEST_REPORTS/reports/junit.xml pandas
diff --git a/.travis.yml b/.travis.yml
index c30a7f3f5..da17aaa1a 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -43,6 +43,7 @@ matrix:
         apt:
           packages:
           - language-pack-zh-hans
+
     - dist: trusty
       env:
         - JOB="2.7" ENV_FILE="ci/deps/travis-27.yaml" PATTERN="not slow"
@@ -50,9 +51,15 @@ matrix:
         apt:
           packages:
           - python-gtk2
+
+    - dist: trusty
+      env:
+        - JOB="3.6, locale" ENV_FILE="ci/deps/travis-36-locale.yaml" PATTERN="not slow and not network" LOCALE_OVERRIDE="zh_CN.UTF-8"
+
     - dist: trusty
       env:
         - JOB="3.6, coverage" ENV_FILE="ci/deps/travis-36.yaml" PATTERN="not slow and not network" PANDAS_TESTING_MODE="deprecate" COVERAGE=true
+
     - dist: trusty
       env:
         - JOB="3.7, NumPy dev" ENV_FILE="ci/deps/travis-37-numpydev.yaml" PATTERN="not slow and not network" TEST_ARGS="-W error" PANDAS_TESTING_MODE="deprecate"
diff --git a/README.md b/README.md
index be45faf06..ce2281870 100644
--- a/README.md
+++ b/README.md
@@ -45,14 +45,6 @@
     </a>
   </td>
 </tr>
-<tr>
-  <td></td>
-  <td>
-    <a href="https://circleci.com/gh/pandas-dev/pandas">
-    <img src="https://circleci.com/gh/circleci/mongofinil/tree/master.svg?style=shield&circle-token=223d8cafa7b02902c3e150242520af8944e34671" alt="circleci build status" />
-    </a>
-  </td>
-</tr>
 <tr>
   <td></td>
   <td>
diff --git a/ci/circle/install_circle.sh b/ci/circle/install_circle.sh
deleted file mode 100755
index 0918e8790..000000000
--- a/ci/circle/install_circle.sh
+++ /dev/null
@@ -1,81 +0,0 @@
-#!/usr/bin/env bash
-
-home_dir=$(pwd)
-echo "[home_dir: $home_dir]"
-
-echo "[ls -ltr]"
-ls -ltr
-
-apt-get update -y && apt-get install -y build-essential postgresql-client-9.6
-
-echo "[update conda]"
-conda config --set ssl_verify false || exit 1
-conda config --set always_yes true --set changeps1 false || exit 1
-conda update -q conda
-
-# add the pandas channel to take priority
-# to add extra packages
-echo "[add channels]"
-conda config --add channels pandas || exit 1
-conda config --remove channels defaults || exit 1
-conda config --add channels defaults || exit 1
-
-# Useful for debugging any issues with conda
-conda info -a || exit 1
-
-# support env variables passed
-export ENVS_FILE=".envs"
-
-# make sure that the .envs file exists. it is ok if it is empty
-touch $ENVS_FILE
-
-# assume all command line arguments are environmental variables
-for var in "$@"
-do
-    echo "export $var" >> $ENVS_FILE
-done
-
-echo "[environmental variable file]"
-cat $ENVS_FILE
-source $ENVS_FILE
-
-# edit the locale override if needed
-if [ -n "$LOCALE_OVERRIDE" ]; then
-
-    apt-get update && apt-get -y install locales locales-all
-
-    export LANG=$LOCALE_OVERRIDE
-    export LC_ALL=$LOCALE_OVERRIDE
-
-    python -c "import locale; locale.setlocale(locale.LC_ALL, \"$LOCALE_OVERRIDE\")" || exit 1;
-
-    echo "[Adding locale to the first line of pandas/__init__.py]"
-    rm -f pandas/__init__.pyc
-    sedc="3iimport locale\nlocale.setlocale(locale.LC_ALL, \"$LOCALE_OVERRIDE\")\n"
-    sed -i "$sedc" pandas/__init__.py
-    echo "[head -4 pandas/__init__.py]"
-    head -4 pandas/__init__.py
-    echo
-fi
-
-# create envbuild deps
-echo "[create env]"
-time conda env create -q --file="${ENV_FILE}" || exit 1
-
-source activate pandas-dev
-
-# remove any installed pandas package
-# w/o removing anything else
-echo
-echo "[removing installed pandas]"
-conda remove pandas -y --force
-pip uninstall -y pandas
-
-# build but don't install
-echo "[build em]"
-time python setup.py build_ext --inplace || exit 1
-
-echo
-echo "[show environment]"
-
-conda list
diff --git a/ci/deps/circle-36-locale.yaml b/ci/deps/travis-36-locale.yaml
similarity index 100%
rename from ci/deps/circle-36-locale.yaml
rename to ci/deps/travis-36-locale.yaml
diff --git a/doc/source/contributing.rst b/doc/source/contributing.rst
index 281dbd72d..a68e5c700 100644
--- a/doc/source/contributing.rst
+++ b/doc/source/contributing.rst
@@ -686,13 +686,13 @@ See :ref:`contributing.warnings` for more.
 Testing With Continuous Integration
 -----------------------------------
 
-The *pandas* test suite will run automatically on `Travis-CI <https://travis-ci.org/>`__,
-`Azure Pipelines <https://azure.microsoft.com/en-us/services/devops/pipelines/>`__,
-and `Circle CI <https://circleci.com/>`__ continuous integration services, once your pull request is submitted.
+The *pandas* test suite will run automatically on `Travis-CI <https://travis-ci.org/>`__ and
+`Azure Pipelines <https://azure.microsoft.com/en-us/services/devops/pipelines/>`__
+continuous integration services, once your pull request is submitted.
 However, if you wish to run the test suite on a branch prior to submitting the pull request,
 then the continuous integration services need to be hooked to your GitHub repository. Instructions are here
-for `Travis-CI <http://about.travis-ci.org/docs/user/getting-started/>`__,
-`Azure Pipelines <https://docs.microsoft.com/en-us/azure/devops/pipelines/>`__, and `CircleCI <https://circleci.com/>`__.
+for `Travis-CI <http://about.travis-ci.org/docs/user/getting-started/>`__ and
+`Azure Pipelines <https://docs.microsoft.com/en-us/azure/devops/pipelines/>`__.
 
 A pull-request will be considered for merging when you have an all 'green' build. If any tests are failing,
 then you will get a red 'X', where you can click through to see the individual failed tests.
@@ -704,8 +704,7 @@ This is an example of a green build.
 
    Each time you push to *your* fork, a *new* run of the tests will be triggered on the CI.
    You can enable the auto-cancel feature, which removes any non-currently-running tests for that same pull-request, for
-   `Travis-CI here <https://docs.travis-ci.com/user/customizing-the-build/#Building-only-the-latest-commit>`__ and
-   for `CircleCI here <https://circleci.com/changelog-legacy/#option-to-auto-cancel-redundant-builds>`__.
+   `Travis-CI here <https://docs.travis-ci.com/user/customizing-the-build/#Building-only-the-latest-commit>`__.
 
 .. _contributing.tdd:
 
