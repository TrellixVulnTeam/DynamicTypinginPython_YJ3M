commit a6379b61b29b38ef55b7f3126c95614d404bd58d
Author: Joris Van den Bossche <jorisvandenbossche@gmail.com>
Date:   Mon Sep 21 00:22:48 2015 +0200

    PERF: compare freq strings in extract_ordinals (GH11084)
    
    freq attribute changed to return Offset object instead of string,
    making this comparison much slower

diff --git a/pandas/src/period.pyx b/pandas/src/period.pyx
index 1dbf469a9..2a7c2135f 100644
--- a/pandas/src/period.pyx
+++ b/pandas/src/period.pyx
@@ -439,10 +439,12 @@ def extract_ordinals(ndarray[object] values, freq):
         ndarray[int64_t] ordinals = np.empty(n, dtype=np.int64)
         object p
 
+    freqstr = Period._maybe_convert_freq(freq).freqstr
+
     for i in range(n):
         p = values[i]
         ordinals[i] = p.ordinal
-        if p.freq != freq:
+        if p.freqstr != freqstr:
             raise ValueError("%s is wrong freq" % p)
 
     return ordinals
