commit a34701bf0ef1ce8da630c8661ca95e0dd3b1cb03
Author: Chang She <chang@lambdafoundry.com>
Date:   Wed May 2 10:22:55 2012 -0400

    BUG: removed reference to unimported datetools in tseries/index.py. added test case for shifting with freq string

diff --git a/pandas/tests/test_index.py b/pandas/tests/test_index.py
index 1ff9b06a0..dcad7b8c8 100644
--- a/pandas/tests/test_index.py
+++ b/pandas/tests/test_index.py
@@ -16,6 +16,7 @@ from pandas.util import py3compat
 import pandas.util.testing as tm
 
 from pandas.tseries.index import _to_m8
+import pandas.tseries.offsets as offsets
 
 class TestIndex(unittest.TestCase):
 
@@ -165,6 +166,9 @@ class TestIndex(unittest.TestCase):
         shifted = self.dateIndex.shift(5, timedelta(1))
         self.assert_(np.array_equal(shifted, self.dateIndex + timedelta(5)))
 
+        shifted = self.dateIndex.shift(1, 'B')
+        self.assert_(np.array_equal(shifted, self.dateIndex + offsets.bday))
+
     def test_intersection(self):
         first = self.strIndex[:20]
         second = self.strIndex[:10]
diff --git a/pandas/tseries/index.py b/pandas/tseries/index.py
index b900fa780..0623da756 100644
--- a/pandas/tseries/index.py
+++ b/pandas/tseries/index.py
@@ -547,7 +547,7 @@ class DatetimeIndex(Int64Index):
         """
         if freq is not None and freq != self.offset:
             if isinstance(freq, basestring):
-                freq = datetools.to_offset(freq)
+                freq = to_offset(freq)
             return Index.shift(self, n, freq)
 
         if n == 0:
