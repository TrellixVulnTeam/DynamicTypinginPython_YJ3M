commit 4bbf5830f2280c6af7e1fb276217f2d932cf1f64
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Tue May 8 15:29:12 2012 -0400

    TST: verify Index of datetime.datetime -> DatetimeIndex, close #1187

diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index bc587f508..557c88a55 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -21,7 +21,7 @@ import pandas.core.common as com
 import pandas.core.format as fmt
 import pandas.core.datetools as datetools
 from pandas.core.api import (DataFrame, Index, Series, notnull, isnull,
-                             MultiIndex)
+                             MultiIndex, DatetimeIndex)
 from pandas.io.parsers import (ExcelFile, ExcelWriter)
 
 from pandas.util.testing import (assert_almost_equal,
@@ -1308,6 +1308,14 @@ class TestDataFrame(unittest.TestCase, CheckIndexing,
         expected = df.set_index(['A', 'B'], drop=False)
         assert_frame_equal(result, expected)
 
+    def test_set_index_cast_datetimeindex(self):
+        df = DataFrame({'A' : [datetime(2000, 1, 1) + timedelta(i)
+                               for i in range(1000)],
+                        'B' : np.random.randn(1000)})
+
+        idf = df.set_index('A')
+        self.assert_(isinstance(idf.index, DatetimeIndex))
+
     def test_set_columns(self):
         cols = Index(np.arange(len(self.mixed_frame.columns)))
         self.mixed_frame.columns = cols
diff --git a/pandas/tests/test_series.py b/pandas/tests/test_series.py
index 632405723..cae37f679 100644
--- a/pandas/tests/test_series.py
+++ b/pandas/tests/test_series.py
@@ -869,6 +869,12 @@ class TestSeries(unittest.TestCase, CheckNameIntegration):
                         name=('foo', 'bar', 'baz'))
         repr(biggie)
 
+    def test_timeseries_repr_object_dtype(self):
+        index = Index([datetime(2000, 1, 1) + timedelta(i)
+                       for i in range(1000)], dtype=object)
+        ts = Series(np.random.randn(len(index)), index)
+        repr(ts)
+
     def test_iter(self):
         for i, val in enumerate(self.series):
             self.assertEqual(val, self.series[i])
