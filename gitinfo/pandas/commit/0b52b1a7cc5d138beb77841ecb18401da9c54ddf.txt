commit 0b52b1a7cc5d138beb77841ecb18401da9c54ddf
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Fri Feb 17 19:50:36 2012 -0500

    BUG: fix mixed float/int indexing slicing problem described in #780

diff --git a/pandas/core/indexing.py b/pandas/core/indexing.py
index 53fa3070c..40eae0b49 100644
--- a/pandas/core/indexing.py
+++ b/pandas/core/indexing.py
@@ -243,6 +243,18 @@ class _NDFrameIndexer(object):
                               and not labels.inferred_type == 'integer'
                               and not isinstance(labels, MultiIndex))
 
+
+            # last ditch effort: if we are mixed and have integers
+            try:
+                if labels.inferred_type == 'mixed' and int_slice:
+                    if obj.start is not None:
+                        i = labels.get_loc(obj.start)
+                    if obj.stop is not None:
+                        j = labels.get_loc(obj.stop)
+                    position_slice = False
+            except KeyError:
+                pass
+
             if null_slice or position_slice:
                 slicer = obj
             else:
@@ -308,6 +320,17 @@ class _NDFrameIndexer(object):
                           and not isinstance(labels, MultiIndex)
                           and not float_slice)
 
+        # last ditch effort: if we are mixed and have integers
+        try:
+            if labels.inferred_type == 'mixed' and int_slice:
+                if start is not None:
+                    i = labels.get_loc(start)
+                if stop is not None:
+                    j = labels.get_loc(stop)
+                position_slice = False
+        except KeyError:
+            pass
+
         if null_slice or position_slice:
             slicer = slice_obj
         else:
diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index f8978da54..a8dcd7229 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -797,6 +797,20 @@ class CheckIndexing(object):
         expected.ix[mask] = 0
         assert_frame_equal(cp, expected)
 
+    def test_getitem_setitem_float_labels(self):
+        index = Index([1.5, 2, 3, 4, 5])
+        df = DataFrame(np.random.randn(5, 5), index=index)
+
+        result = df.ix[1.5:4]
+        expected = df.reindex([1.5, 2, 3, 4])
+        assert_frame_equal(result, expected)
+        self.assertEqual(len(result), 4)
+
+        result = df.ix[4:5]
+        expected = df.reindex([4, 5])
+        assert_frame_equal(result, expected)
+        self.assertEqual(len(result), 2)
+
     def test_setitem_single_column_mixed(self):
         df = DataFrame(randn(5, 3), index=['a', 'b', 'c', 'd', 'e'],
                        columns=['foo', 'bar', 'baz'])
