commit a7760e3e5aa889574dc36c4870e026f3e13270aa
Author: John W. O'Brien <neirbowj@users.noreply.github.com>
Date:   Thu Jun 1 15:50:37 2017 -0400

    TST: Skip test_database_uri_string if pg8000 importable (#16528)

diff --git a/pandas/tests/io/test_sql.py b/pandas/tests/io/test_sql.py
index a6ad44ba3..deeb8cba2 100644
--- a/pandas/tests/io/test_sql.py
+++ b/pandas/tests/io/test_sql.py
@@ -948,6 +948,13 @@ class TestSQLApi(SQLAlchemyMixIn, _TestSQLApi):
 
         # using driver that will not be installed on Travis to trigger error
         # in sqlalchemy.create_engine -> test passing of this error to user
+        try:
+            # the rest of this test depends on pg8000's being absent
+            import pg8000  # noqa
+            pytest.skip("pg8000 is installed")
+        except ImportError:
+            pass
+
         db_uri = "postgresql+pg8000://user:pass@host/dbname"
         with tm.assert_raises_regex(ImportError, "pg8000"):
             sql.read_sql("select * from table", db_uri)
