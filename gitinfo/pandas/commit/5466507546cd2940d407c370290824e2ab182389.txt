commit 5466507546cd2940d407c370290824e2ab182389
Author: Chang She <chang@lambdafoundry.com>
Date:   Thu Jun 7 23:30:45 2012 -0400

    ENH: set_xlim using str for irregular index #1427

diff --git a/pandas/tests/test_graphics.py b/pandas/tests/test_graphics.py
index e4975c37d..1b40d7cd7 100644
--- a/pandas/tests/test_graphics.py
+++ b/pandas/tests/test_graphics.py
@@ -3,7 +3,9 @@ import os
 import string
 import unittest
 
-from pandas import Series, DataFrame, MultiIndex, PeriodIndex
+from datetime import datetime
+
+from pandas import Series, DataFrame, MultiIndex, PeriodIndex, date_range
 import pandas.util.testing as tm
 
 import numpy as np
@@ -51,6 +53,16 @@ class TestSeriesPlots(unittest.TestCase):
 
         Series(np.random.randn(10)).plot(kind='bar',color='black')
 
+    @slow
+    def test_irregular_datetime(self):
+        rng = date_range('1/1/2000', '3/1/2000')
+        rng = rng[[0,1,2,3,5,9,10,11,12]]
+        ser = Series(np.random.randn(len(rng)), rng)
+        ax = ser.plot()
+        xp = datetime(1999, 1, 1).toordinal()
+        ax.set_xlim('1/1/1999', '1/1/2001')
+        self.assert_(xp == ax.get_xlim()[0])
+
     @slow
     def test_hist(self):
         _check_plot_works(self.ts.hist)
diff --git a/pandas/tools/plotting.py b/pandas/tools/plotting.py
index b9cadfa43..49cbc5979 100644
--- a/pandas/tools/plotting.py
+++ b/pandas/tools/plotting.py
@@ -6,12 +6,13 @@ import numpy as np
 
 from pandas.util.decorators import cache_readonly
 import pandas.core.common as com
-from pandas.core.index import MultiIndex
+from pandas.core.index import Index, MultiIndex
 from pandas.core.series import Series
 from pandas.tseries.frequencies import to_calendar_freq
 from pandas.tseries.index import DatetimeIndex
 from pandas.tseries.period import PeriodIndex
 from pandas.tseries.offsets import DateOffset
+import pandas.tseries.tools as datetools
 
 def _get_standard_kind(kind):
     return {'density' : 'kde'}.get(kind, kind)
@@ -469,6 +470,24 @@ class KdePlot(MPLPlot):
         if self.subplots and self.legend:
             self.axes[0].legend(loc='best')
 
+class DatetimeConverter(object):
+
+    @classmethod
+    def convert(cls, values, units, axis):
+        def try_parse(values):
+            try:
+                return datetools.to_datetime(values).toordinal()
+            except Exception:
+                return values
+
+        if (com.is_integer(values) or
+            com.is_float(values)):
+            return values
+        elif isinstance(values, str):
+            return try_parse(values)
+        elif isinstance(values, Index):
+            return values.map(try_parse)
+        return map(try_parse, values)
 
 class LinePlot(MPLPlot):
 
@@ -509,6 +528,10 @@ class LinePlot(MPLPlot):
 
                 plotf(ax, x, y, style, label=label, **self.kwds)
                 ax.grid(self.grid)
+                idx = getattr(self.data, 'index', None)
+                if isinstance(idx, DatetimeIndex) or (idx is not None and
+                    idx.inferred_type == 'datetime'):
+                    ax.get_xaxis().converter = DatetimeConverter
 
     def _maybe_convert_index(self, data):
         # tsplot converts automatically, but don't want to convert index
