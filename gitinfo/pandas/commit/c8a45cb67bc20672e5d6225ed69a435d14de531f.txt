commit c8a45cb67bc20672e5d6225ed69a435d14de531f
Author: y-p <yoval@gmx.com>
Date:   Sun Nov 11 02:07:13 2012 +0200

    TST: df with dupe cols should raise KeyError on accessing non-existent col via list

diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index 0b36e8d39..c30dde8cc 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -62,6 +62,15 @@ class CheckIndexing(object):
         self.assert_('random' not in self.frame)
         self.assertRaises(Exception, self.frame.__getitem__, 'random')
 
+    def test_getitem_dupe_cols(self):
+        df=DataFrame([[1,2,3],[4,5,6]],columns=['a','a','b'])
+        try:
+            df[['baf']]
+        except KeyError:
+            pass
+        else:
+            self.fail("Dataframe failed to raise KeyError")
+
     def test_get(self):
         b = self.frame.get('B')
         assert_series_equal(b, self.frame['B'])
