commit 5a1bb2729f7a21408391bfa562b7ae9b46b85980
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Sat Jan 21 18:21:08 2012 -0500

    ENH: string format None and None and not NaN

diff --git a/pandas/core/common.py b/pandas/core/common.py
index 3b2e72d50..0c043da96 100644
--- a/pandas/core/common.py
+++ b/pandas/core/common.py
@@ -595,6 +595,8 @@ def _format(s, dtype, space=None, na_rep=None, float_format=None,
         return _make_int_format(s)
     else:
         if na_rep is not None and lib.checknull(s):
+            if s is None:
+                return 'None'
             return na_rep
         else:
             # object dtype
diff --git a/scripts/roll_median_leak.py b/scripts/roll_median_leak.py
index c45f32106..19ba946ca 100644
--- a/scripts/roll_median_leak.py
+++ b/scripts/roll_median_leak.py
@@ -15,11 +15,10 @@ pid = os.getpid()
 proc = psutil.Process(pid)
 
 lst = SparseList()
-lst.append([5] * 5)
+lst.append([5] * 10000)
 lst.append(np.repeat(np.nan, 1000000))
 
-sdf = SparseDataFrame({'A' : lst.to_array()})
-
 for _ in xrange(10000):
     print proc.get_memory_info()
+    sdf = SparseDataFrame({'A' : lst.to_array()})
     chunk = sdf[sdf['A'] == 5]
