commit 51793db20ebd0f87141ac72d1f07e0e2a9236656
Author: jreback <jeff@reback.net>
Date:   Sat Mar 16 16:16:55 2013 -0400

    PERF: added frame_to_csv2 vbench, revised frame_to_csv_mixed

diff --git a/vb_suite/io_bench.py b/vb_suite/io_bench.py
index ba386bd0e..dc335a4f9 100644
--- a/vb_suite/io_bench.py
+++ b/vb_suite/io_bench.py
@@ -44,17 +44,34 @@ df = DataFrame(np.random.randn(3000, 30))
 """
 frame_to_csv = Benchmark("df.to_csv('__test__.csv')", setup,
                          start_date=datetime(2011, 1, 1))
+#----------------------------------
+
+setup = common_setup + """
+df=DataFrame({'A':range(100000)})
+df['B'] = df.A + 1.0
+df['C'] = df.A + 2.0
+df['D'] = df.A + 3.0
+"""
+frame_to_csv2 = Benchmark("df.to_csv('__test__.csv')", setup,
+                         start_date=datetime(2011, 1, 1))
 
 #----------------------------------
 setup = common_setup + """
 from pandas import concat, Timestamp
 
-df_float  = DataFrame(np.random.randn(1000, 30),dtype='float64')
-df_int    = DataFrame(np.random.randn(1000, 30),dtype='int64')
-df_bool   = DataFrame(True,index=df_float.index,columns=df_float.columns)
-df_object = DataFrame('foo',index=df_float.index,columns=df_float.columns)
-df_dt     = DataFrame(Timestamp('20010101'),index=df_float.index,columns=df_float.columns)
+def create_cols(name):
+    return [ "%s%03d" % (name,i) for i in xrange(5) ]
+df_float  = DataFrame(np.random.randn(10000, 5),dtype='float64',columns=create_cols('float'))
+df_int    = DataFrame(np.random.randn(10000, 5),dtype='int64',columns=create_cols('int'))
+df_bool   = DataFrame(True,index=df_float.index,columns=create_cols('bool'))
+df_object = DataFrame('foo',index=df_float.index,columns=create_cols('object'))
+df_dt     = DataFrame(Timestamp('20010101'),index=df_float.index,columns=create_cols('date'))
+
+# add in some nans
+df_float.ix[30:500,1:3] = np.nan
+
 df        = concat([ df_float, df_int, df_bool, df_object, df_dt ], axis=1)
+
 """
 frame_to_csv_mixed = Benchmark("df.to_csv('__test__.csv')", setup,
                                start_date=datetime(2012, 6, 1))
