commit fefa2bfcb528ec495dba7883ee277bed1b0ebc4e
Author: Andy Hayden <andyhayden1@gmail.com>
Date:   Sat Jul 6 21:53:45 2013 +0100

    CLN make cartesian product faster

diff --git a/pandas/tools/util.py b/pandas/tools/util.py
index f8eda18b4..1f2905b86 100644
--- a/pandas/tools/util.py
+++ b/pandas/tools/util.py
@@ -18,11 +18,15 @@ def cartesian_product(X):
  	array([1, 2, 1, 2, 1, 2])]
 
     '''
-    lenX = map(len, X)
+
+    lenX = np.fromiter((len(x) for x in X), dtype=int)
     cumprodX = np.cumproduct(lenX)
-    a = np.insert(cumprodX, 0, 1)
-    b = a[-1] / a[1:]
-    return [np.tile(np.repeat(x, b[i]), 
-    	            np.product(a[i]))
-               for i, x in enumerate(X)]
 
+    a = np.roll(cumprodX, 1)
+    a[0] = 1
+
+    b = cumprodX[-1] / cumprodX
+
+    return [np.tile(np.repeat(x, b[i]), 
+                    np.product(a[i]))
+               for i, x in enumerate(X)]
\ No newline at end of file
