commit ecf3359c1ceb3675c37cf24b2067780a8a21ed73
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Thu Dec 3 16:19:22 2009 +0000

    fix to DataMatrix constructor
    
    git-svn-id: http://pandas.googlecode.com/svn/trunk@68 d5231056-7de3-11de-ac95-d976489f1ece

diff --git a/pandas/core/matrix.py b/pandas/core/matrix.py
index c9fe9bb6f..04a7403ff 100644
--- a/pandas/core/matrix.py
+++ b/pandas/core/matrix.py
@@ -91,15 +91,16 @@ class DataMatrix(DataFrame):
                         objectDict[k] = v
 
                 if columns is None:
-                    columns = Index(sorted(valueDict))
+                    valueColumns = Index(sorted(valueDict))
                     objectColumns = Index(sorted(objectDict))
                 else:
-                    columns = Index([c for c in columns if c in valueDict])
+                    valueColumns = Index([c for c in columns if c in valueDict])
                     objectColumns = Index([c for c in columns if c in objectDict])
 
                 if len(valueDict) == 0:
                     dtype = np.object_
                     valueDict = objectDict
+                    valueColumns = objectColumns
                 else:
                     dtype = np.float_
                     if len(objectDict) > 0:
@@ -108,12 +109,12 @@ class DataMatrix(DataFrame):
                     else:
                         objects = None
 
-                values = np.empty((len(index), len(columns)), dtype=dtype)
+                values = np.empty((len(index), len(valueColumns)), dtype=dtype)
 
-                for i, col in enumerate(columns):
+                for i, col in enumerate(valueColumns):
                     values[:, i] = valueDict[col]
 
-            return index, columns, values, objects
+            return index, valueColumns, values, objects
 
         if isinstance(data, dict):
             index, columns, values, objects = handleDict(data, index,
