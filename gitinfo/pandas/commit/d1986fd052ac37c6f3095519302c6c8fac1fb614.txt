commit d1986fd052ac37c6f3095519302c6c8fac1fb614
Author: Alex Rychyk <odiscort@gmail.com>
Date:   Wed Aug 29 15:32:42 2018 +0300

    TEST: added test for agg with list-like func (#22467)

diff --git a/pandas/tests/groupby/aggregate/test_other.py b/pandas/tests/groupby/aggregate/test_other.py
index 606539a56..61db4cee1 100644
--- a/pandas/tests/groupby/aggregate/test_other.py
+++ b/pandas/tests/groupby/aggregate/test_other.py
@@ -512,3 +512,14 @@ def test_agg_category_nansum(observed):
     if observed:
         expected = expected[expected != 0]
     tm.assert_series_equal(result, expected)
+
+
+def test_agg_list_like_func():
+    # GH 18473
+    df = pd.DataFrame({'A': [str(x) for x in range(3)],
+                       'B': [str(x) for x in range(3)]})
+    grouped = df.groupby('A', as_index=False, sort=False)
+    result = grouped.agg({'B': lambda x: list(x)})
+    expected = pd.DataFrame({'A': [str(x) for x in range(3)],
+                             'B': [[str(x)] for x in range(3)]})
+    tm.assert_frame_equal(result, expected)
