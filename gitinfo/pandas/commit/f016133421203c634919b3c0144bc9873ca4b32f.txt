commit f016133421203c634919b3c0144bc9873ca4b32f
Author: Marc Abramowitz <marc@marc-abramowitz.com>
Date:   Mon Jun 11 17:46:13 2012 -0700

    Make tox work across versions of Python from 2.5 to 3.2

diff --git a/setup.py b/setup.py
index 915f70598..034487b8f 100755
--- a/setup.py
+++ b/setup.py
@@ -201,11 +201,14 @@ if not ISRELEASED:
 else:
     FULLVERSION += QUALIFIER
 
-def write_version_py(filename='pandas/version.py'):
+def write_version_py(filename=None):
     cnt = """\
 version = '%s'
 short_version = '%s'
 """
+    if not filename:
+        filename = os.path.join(os.path.dirname(__file__), 'pandas', 'version.py')
+
     a = open(filename, 'w')
     try:
         a.write(cnt % (FULLVERSION, VERSION))
diff --git a/tox.ini b/tox.ini
index 500dcda7e..2f5f998b5 100644
--- a/tox.ini
+++ b/tox.ini
@@ -8,11 +8,32 @@ envlist = py25, py26, py27, py31, py32
 
 [testenv]
 commands =
-    {envpython} setup.py clean
-    {envpython} setup.py build_ext --inplace
-    nosetests pandas
+    {envpython} setup.py clean build_ext install
+    {envbindir}/nosetests tests
+    rm -rf {toxinidir}/build {toxinidir}/tests
 deps =
     cython
     numpy >= 1.6.1
     nose
     pytz
+
+[testenv:py25]
+changedir = .tox/py25/lib/python2.5/site-packages/pandas
+deps =
+    cython
+    numpy >= 1.6.1
+    nose
+    pytz
+    simplejson
+
+[testenv:py26]
+changedir = .tox/py26/lib/python2.6/site-packages/pandas
+
+[testenv:py27]
+changedir = .tox/py27/lib/python2.7/site-packages/pandas
+
+[testenv:py31]
+changedir = .tox/py31/lib/python3.1/site-packages/pandas
+
+[testenv:py32]
+changedir = .tox/py32/lib/python3.2/site-packages/pandas
