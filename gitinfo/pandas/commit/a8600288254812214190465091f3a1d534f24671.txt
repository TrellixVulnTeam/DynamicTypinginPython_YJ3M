commit a8600288254812214190465091f3a1d534f24671
Author: Tim D. Smith <github@tim-smith.us>
Date:   Tue Jul 17 07:18:52 2018 -0500

    Use the Agg backend for docs builds (#21914)
    
    * Use the Agg backend for docs builds
    
    This uses a non-interactive Agg matplotlib backend to build docs, which avoids trying to use the default MacOS backend, which can fail in some environments.
    
    Closes #21913.
    
    * Modify make.py instead of adding a matplotlibrc

diff --git a/doc/make.py b/doc/make.py
index 4d54a2415..d85747458 100755
--- a/doc/make.py
+++ b/doc/make.py
@@ -363,6 +363,10 @@ def main():
     sys.path.append(args.python_path)
     globals()['pandas'] = importlib.import_module('pandas')
 
+    # Set the matplotlib backend to the non-interactive Agg backend for all
+    # child processes.
+    os.environ['MPLBACKEND'] = 'module://matplotlib.backends.backend_agg'
+
     builder = DocBuilder(args.num_jobs, not args.no_api, args.single,
                          args.verbosity)
     getattr(builder, args.command)()
