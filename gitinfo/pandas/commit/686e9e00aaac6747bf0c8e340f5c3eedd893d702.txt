commit 686e9e00aaac6747bf0c8e340f5c3eedd893d702
Author: Jeff Reback <jeff@reback.net>
Date:   Mon Mar 27 10:06:32 2017 -0400

    CI: make generic 3.5 builds
    
    CI: rename BUILD_DOC -> DOC

diff --git a/.travis.yml b/.travis.yml
index 777280e3c..1053f8925 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -1,5 +1,7 @@
 sudo: false
 language: python
+# Default Python version is usually 2.7
+python: 3.5
 
 # To turn off cached cython files and compiler cache
 # set NOCACHE-true
@@ -7,6 +9,7 @@ language: python
 # travis cache --delete inside the project directory from the travis command line client
 # The cash directories will be deleted if anything in ci/ changes in a commit
 cache:
+ ccache: true
  directories:
   - $HOME/.cache # cython cache
   - $HOME/.ccache # compiler cache
@@ -23,69 +26,67 @@ git:
 
 matrix:
     fast_finish: true
+    exclude:
+      # Exclude the default Python 3.5 build
+      - python: 3.5
     include:
-    - language: objective-c
-      os: osx
-      cache:
-        ccache: true
-        directories:
-          - $HOME/.cache # cython cache
-          - $HOME/.ccache # compiler cache
+    - os: osx
+      language: generic
       env:
-        - JOB="3.5_OSX" TEST_ARGS="--skip-slow --skip-network" TRAVIS_PYTHON_VERSION=3.5
-    - python: 2.7
+        - JOB="3.5_OSX" TEST_ARGS="--skip-slow --skip-network"
+    - os: linux
       env:
         - JOB="2.7_LOCALE" TEST_ARGS="--only-slow --skip-network" LOCALE_OVERRIDE="zh_CN.UTF-8"
       addons:
         apt:
           packages:
           - language-pack-zh-hans
-    - python: 2.7
+    - os: linux
       env:
         - JOB="2.7" TEST_ARGS="--skip-slow" LINT=true
       addons:
         apt:
           packages:
           - python-gtk2
-    - python: 3.5
+    - os: linux
       env:
         - JOB="3.5" TEST_ARGS="--skip-slow --skip-network" COVERAGE=true
       addons:
         apt:
           packages:
           - xsel
-    - python: 3.6
+    - os: linux
       env:
         - JOB="3.6" TEST_ARGS="--skip-slow --skip-network" PANDAS_TESTING_MODE="deprecate" CONDA_FORGE=true
     # In allow_failures
-    - python: 2.7
+    - os: linux
       env:
         - JOB="2.7_SLOW" TEST_ARGS="--only-slow --skip-network"
     # In allow_failures
-    - python: 2.7
+    - os: linux
       env:
         - JOB="2.7_BUILD_TEST" TEST_ARGS="--skip-slow" BUILD_TEST=true
     # In allow_failures
-    - python: 3.6
+    - os: linux
       env:
         - JOB="3.6_NUMPY_DEV" TEST_ARGS="--skip-slow --skip-network" PANDAS_TESTING_MODE="deprecate"
     # In allow_failures
-    - python: 3.5
+    - os: linux
       env:
-        - JOB="3.5_DOC_BUILD" DOC_BUILD=true
+        - JOB="3.5_DOC" DOC=true
     allow_failures:
-      - python: 2.7
+      - os: linux
         env:
           - JOB="2.7_SLOW" TEST_ARGS="--only-slow --skip-network"
-      - python: 2.7
+      - os: linux
         env:
           - JOB="2.7_BUILD_TEST" TEST_ARGS="--skip-slow" BUILD_TEST=true
-      - python: 3.6
+      - os: linux
         env:
           - JOB="3.6_NUMPY_DEV" TEST_ARGS="--skip-slow --skip-network" PANDAS_TESTING_MODE="deprecate"
-      - python: 3.5
+      - os: linux
         env:
-          - JOB="3.5_DOC_BUILD" DOC_BUILD=true
+          - JOB="3.5_DOC" DOC=true
 
 before_install:
   - echo "before_install"
diff --git a/ci/build_docs.sh b/ci/build_docs.sh
index bfe7a1eed..1356d0970 100755
--- a/ci/build_docs.sh
+++ b/ci/build_docs.sh
@@ -17,7 +17,7 @@ if [ "$?" != "0" ]; then
 fi
 
 
-if [ x"$DOC_BUILD" != x"" ]; then
+if [ "$DOC" ]; then
 
     echo "Will build docs"
 
diff --git a/ci/requirements-3.5_DOC_BUILD.build b/ci/requirements-3.5_DOC.build
similarity index 88%
rename from ci/requirements-3.5_DOC_BUILD.build
rename to ci/requirements-3.5_DOC.build
index f7befe3b3..73aeb3192 100644
--- a/ci/requirements-3.5_DOC_BUILD.build
+++ b/ci/requirements-3.5_DOC.build
@@ -1,6 +1,5 @@
 python=3.5*
 python-dateutil
 pytz
-nomkl
 numpy
 cython
diff --git a/ci/requirements-3.5_DOC_BUILD.run b/ci/requirements-3.5_DOC.run
similarity index 100%
rename from ci/requirements-3.5_DOC_BUILD.run
rename to ci/requirements-3.5_DOC.run
diff --git a/ci/requirements-3.5_DOC_BUILD.sh b/ci/requirements-3.5_DOC.sh
similarity index 100%
rename from ci/requirements-3.5_DOC_BUILD.sh
rename to ci/requirements-3.5_DOC.sh
diff --git a/ci/script_multi.sh b/ci/script_multi.sh
index f0fbb8c54..88ecaf344 100755
--- a/ci/script_multi.sh
+++ b/ci/script_multi.sh
@@ -4,11 +4,6 @@ echo "[script multi]"
 
 source activate pandas
 
-# don't run the tests for the doc build
-if [ x"$DOC_BUILD" != x"" ]; then
-    exit 0
-fi
-
 if [ -n "$LOCALE_OVERRIDE" ]; then
     export LC_ALL="$LOCALE_OVERRIDE";
     echo "Setting LC_ALL to $LOCALE_OVERRIDE"
@@ -26,6 +21,8 @@ echo PYTHONHASHSEED=$PYTHONHASHSEED
 if [ "$BUILD_TEST" ]; then
     cd /tmp
     python -c "import pandas; pandas.test(['-n 2'])"
+elif [ "$DOC" ]; then
+    echo "We are not running pytest as this is a doc-build"
 elif [ "$COVERAGE" ]; then
     echo pytest -s -n 2 -m "not single" --cov=pandas --cov-report xml:/tmp/cov-multiple.xml --junitxml=/tmp/multiple.xml $TEST_ARGS pandas
     pytest -s -n 2 -m "not single" --cov=pandas --cov-report xml:/tmp/cov-multiple.xml --junitxml=/tmp/multiple.xml $TEST_ARGS pandas
diff --git a/ci/script_single.sh b/ci/script_single.sh
index 86e822cb5..db637679f 100755
--- a/ci/script_single.sh
+++ b/ci/script_single.sh
@@ -4,11 +4,6 @@ echo "[script_single]"
 
 source activate pandas
 
-# don't run the tests for the doc build
-if [ x"$DOC_BUILD" != x"" ]; then
-    exit 0
-fi
-
 if [ -n "$LOCALE_OVERRIDE" ]; then
     export LC_ALL="$LOCALE_OVERRIDE";
     echo "Setting LC_ALL to $LOCALE_OVERRIDE"
@@ -18,7 +13,9 @@ if [ -n "$LOCALE_OVERRIDE" ]; then
 fi
 
 if [ "$BUILD_TEST" ]; then
-    echo "We are not running pytest as this is simply a build test."
+    echo "We are not running pytest as this is a build test."
+elif [ "$DOC" ]; then
+    echo "We are not running pytest as this is a doc-build"
 elif [ "$COVERAGE" ]; then
     echo pytest -s -m "single" --cov=pandas --cov-report xml:/tmp/cov-single.xml --junitxml=/tmp/single.xml $TEST_ARGS pandas
     pytest -s -m "single" --cov=pandas --cov-report xml:/tmp/cov-single.xml --junitxml=/tmp/single.xml $TEST_ARGS pandas
