commit 7679eeee509449e39ad2e544b9fa4260f01900a7
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Sun Dec 9 16:27:00 2012 -0500

    BUG: fix usecols case when passing names and usecols relative to passed names. close #2465

diff --git a/pandas/io/tests/test_parsers.py b/pandas/io/tests/test_parsers.py
index 29fbabf82..b51f22be9 100644
--- a/pandas/io/tests/test_parsers.py
+++ b/pandas/io/tests/test_parsers.py
@@ -1783,11 +1783,14 @@ a,b,c
         expected = expected[['b', 'c']]
         tm.assert_frame_equal(result, expected)
 
+        result2 = self.read_csv(StringIO(data), names=['a', 'b', 'c'],
+                                header=None, usecols=['b', 'c'])
+        tm.assert_frame_equal(result2, result)
+
         # length conflict, passed names and usecols disagree
         self.assertRaises(ValueError, self.read_csv, StringIO(data),
                           names=['a', 'b'], usecols=[1], header=None)
 
-
     def test_pure_python_failover(self):
         data = "a,b,c\n1,2,3#ignore this!\n4,5,6#ignorethistoo"
 
@@ -1951,14 +1954,17 @@ class TestParseSQL(unittest.TestCase):
         expected = np.array([1.5, np.nan, 3, 4.2], dtype='f8')
         assert_same_values_and_dtype(result, expected)
 
+
 def assert_same_values_and_dtype(res, exp):
     assert(res.dtype == exp.dtype)
     assert_almost_equal(res, exp)
 
+
 def curpath():
     pth, _ = os.path.split(os.path.abspath(__file__))
     return pth
 
+
 if __name__ == '__main__':
     nose.runmodule(argv=[__file__,'-vvs','-x','--pdb', '--pdb-failure'],
                    exit=False)
diff --git a/pandas/src/parser.pyx b/pandas/src/parser.pyx
index d84ab8024..b06cc9244 100644
--- a/pandas/src/parser.pyx
+++ b/pandas/src/parser.pyx
@@ -993,7 +993,10 @@ cdef class TextReader:
 
     cdef _get_column_name(self, Py_ssize_t i, Py_ssize_t nused):
         if self.has_usecols and self.names is not None:
-            return self.names[nused]
+            if len(self.names) == len(self.usecols):
+                return self.names[nused]
+            else:
+                return self.names[i]
         else:
             if self.header is not None:
                 return self.header[i - self.leading_cols]
