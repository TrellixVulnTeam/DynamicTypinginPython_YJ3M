commit e61f47a3b9907a27000706d19038f4ee78b9ada8
Author: Kaiqi Dong <kaiqi@kth.se>
Date:   Mon Jan 27 13:28:09 2020 +0100

    CI: Fix jedi upgrades causes deprecation warning (#31323)

diff --git a/pandas/tests/arrays/categorical/test_warnings.py b/pandas/tests/arrays/categorical/test_warnings.py
index f66c327e9..9e164a250 100644
--- a/pandas/tests/arrays/categorical/test_warnings.py
+++ b/pandas/tests/arrays/categorical/test_warnings.py
@@ -14,6 +14,16 @@ class TestCategoricalWarnings:
 
         code = "import pandas as pd; c = Categorical([])"
         await ip.run_code(code)
-        with tm.assert_produces_warning(None):
+
+        # GH 31324 newer jedi version raises Deprecation warning
+        import jedi
+
+        if jedi.__version__ < "0.16.0":
+            warning = tm.assert_produces_warning(None)
+        else:
+            warning = tm.assert_produces_warning(
+                DeprecationWarning, check_stacklevel=False
+            )
+        with warning:
             with provisionalcompleter("ignore"):
                 list(ip.Completer.completions("c.", 1))
diff --git a/pandas/tests/indexes/test_base.py b/pandas/tests/indexes/test_base.py
index d40a22577..e72963de0 100644
--- a/pandas/tests/indexes/test_base.py
+++ b/pandas/tests/indexes/test_base.py
@@ -2413,7 +2413,17 @@ Index(['a', 'bb', 'ccc', 'a', 'bb', 'ccc', 'a', 'bb', 'ccc', 'a',
 
         code = "import pandas as pd; idx = pd.Index([1, 2])"
         await ip.run_code(code)
-        with tm.assert_produces_warning(None):
+
+        # GH 31324 newer jedi version raises Deprecation warning
+        import jedi
+
+        if jedi.__version__ < "0.16.0":
+            warning = tm.assert_produces_warning(None)
+        else:
+            warning = tm.assert_produces_warning(
+                DeprecationWarning, check_stacklevel=False
+            )
+        with warning:
             with provisionalcompleter("ignore"):
                 list(ip.Completer.completions("idx.", 4))
 
