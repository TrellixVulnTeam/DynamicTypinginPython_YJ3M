commit 14a58b6a5ff13f9a21451e8b8cd2d9bfcb839f8e
Author: Adam Klein <adamklein@gmail.com>
Date:   Thu Mar 1 12:55:03 2012 -0500

    TST: fixed reference to legacy time rules

diff --git a/pandas/core/groupby.py b/pandas/core/groupby.py
index ab38284d4..f3b655c51 100644
--- a/pandas/core/groupby.py
+++ b/pandas/core/groupby.py
@@ -626,7 +626,7 @@ class Grouper(object):
 
         return name_list
 
-def generate_bins_generic(values, binner, closed, label, drop):
+def generate_bins_generic(values, binner, closed, label):
     """
     Generate bin edge offsets and bin labels for one array using another array
     which has bin edge values. Both arrays must be sorted.
@@ -691,7 +691,7 @@ def generate_bins_generic(values, binner, closed, label, drop):
             break
 
         # if we've seen some values or not ignoring empty bins
-        if vc != 0 or not drop:
+        if vc != 0:
             bins[bc] = j
             bc += 1
             vc = 0
diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index 21afaedac..a325714cb 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -3379,7 +3379,7 @@ class TestDataFrame(unittest.TestCase, CheckIndexing,
         shiftedFrame = self.tsframe.shift(5, offset=datetools.BDay())
         self.assert_(len(shiftedFrame) == len(self.tsframe))
 
-        shiftedFrame2 = self.tsframe.shift(5, timeRule='WEEKDAY')
+        shiftedFrame2 = self.tsframe.shift(5, timeRule='B')
         assert_frame_equal(shiftedFrame, shiftedFrame2)
 
         d = self.tsframe.index[0]
diff --git a/pandas/tests/test_series.py b/pandas/tests/test_series.py
index ae5c4c95f..8d69cc5f9 100644
--- a/pandas/tests/test_series.py
+++ b/pandas/tests/test_series.py
@@ -1645,8 +1645,8 @@ class TestSeries(unittest.TestCase, CheckNameIntegration):
         unshifted = self.ts.shift(0, offset=offset)
         assert_series_equal(unshifted, self.ts)
 
-        shifted = self.ts.shift(1, timeRule='WEEKDAY')
-        unshifted = shifted.shift(-1, timeRule='WEEKDAY')
+        shifted = self.ts.shift(1, timeRule='B')
+        unshifted = shifted.shift(-1, timeRule='B')
 
         assert_series_equal(unshifted, self.ts)
 
