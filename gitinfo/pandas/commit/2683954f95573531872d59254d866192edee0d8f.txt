commit 2683954f95573531872d59254d866192edee0d8f
Author: Marco Neumann <marco.neumann@blue-yonder.com>
Date:   Fri Oct 18 17:32:51 2019 +0000

    TST: add regression test for all-none-groupby (#29067)
    
    Closes #21624

diff --git a/pandas/tests/groupby/test_groupby.py b/pandas/tests/groupby/test_groupby.py
index 6212a3747..dff5baa9b 100644
--- a/pandas/tests/groupby/test_groupby.py
+++ b/pandas/tests/groupby/test_groupby.py
@@ -1944,3 +1944,13 @@ def test_shift_bfill_ffill_tz(tz_naive_fixture, op, expected):
     result = getattr(grouped, op)()
     expected = DataFrame(expected).assign(time=lambda x: x.time.dt.tz_localize(tz))
     assert_frame_equal(result, expected)
+
+
+def test_groupby_only_none_group():
+    # see GH21624
+    # this was crashing with "ValueError: Length of passed values is 1, index implies 0"
+    df = pd.DataFrame({"g": [None], "x": 1})
+    actual = df.groupby("g")["x"].transform("sum")
+    expected = pd.Series([np.nan], name="x")
+
+    assert_series_equal(actual, expected)
