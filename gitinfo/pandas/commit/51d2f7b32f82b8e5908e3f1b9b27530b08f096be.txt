commit 51d2f7b32f82b8e5908e3f1b9b27530b08f096be
Author: TomAugspurger <thomas-augspurger@uiowa.edu>
Date:   Sat Apr 27 13:43:15 2013 -0500

    ENH: Better error message if a bad series name is passed to the
    get_data_fred function.

diff --git a/pandas/io/data.py b/pandas/io/data.py
index d3255ef4a..43178fdcf 100644
--- a/pandas/io/data.py
+++ b/pandas/io/data.py
@@ -369,8 +369,15 @@ def get_data_fred(name=None, start=dt.datetime(2010, 1, 1),
     data = read_csv(urllib.urlopen(url), index_col=0, parse_dates=True,
                     header=None, skiprows=1, names=["DATE", name],
                     na_values='.')
-    return data.truncate(start, end)
-
+    try:
+        return data.truncate(start, end)
+    except KeyError:
+        if data.ix[3].name[7:12] == 'Error':
+            raise Exception("Failed to get the data. "
+                            "Check that {} is valid FRED "
+                            "series.".format(name))
+        else:
+            raise
 
 def get_data_famafrench(name, start=None, end=None):
     start, end = _sanitize_dates(start, end)
diff --git a/pandas/io/tests/test_fred.py b/pandas/io/tests/test_fred.py
index 5eaca28c8..3e951e544 100644
--- a/pandas/io/tests/test_fred.py
+++ b/pandas/io/tests/test_fred.py
@@ -74,6 +74,12 @@ class TestFred(unittest.TestCase):
         result = web.get_data_fred("A09024USA144NNBR", start="1915").ix[:5]
         assert (result.values == expected).all()
 
+    @slow
+    @network
+    def test_invalid_series(self):
+        name = "NOT A REAL SERIES"
+        self.assertRaises(Exception, web.get_data_fred, name)
+
 if __name__ == '__main__':
     nose.runmodule(argv=[__file__, '-vvs', '-x', '--pdb', '--pdb-failure'],
                    exit=False)
