commit bb7d1da0d42b575815a4cb1b1d1cbb1055c481bb
Author: jreback <jeff@reback.net>
Date:   Sun Mar 17 06:06:03 2013 +0200

    TST: test for to_csv on failing vbench
    
    duplicate column names across dtypes is a problem, and not-easy to fix,
    so letting test fail .

diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index 286fb5906..9452cc8b8 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -4593,6 +4593,19 @@ class TestDataFrame(unittest.TestCase, CheckIndexing,
         assert_frame_equal(rs, df)
         os.remove(filename)
 
+    def test_to_csv_mixed_dups_cols(self):
+        filename = '__tmp_to_csv_mixed_dup_cols__.csv'
+
+        df_float  = DataFrame(np.random.randn(1000, 30),dtype='float64')
+        df_int    = DataFrame(np.random.randn(1000, 30),dtype='int64')
+        df_bool   = DataFrame(True,index=df_float.index,columns=df_float.columns)
+        df_object = DataFrame('foo',index=df_float.index,columns=df_float.columns)
+        df_dt     = DataFrame(Timestamp('20010101'),index=df_float.index,columns=df_float.columns)
+        df        = pan.concat([ df_float, df_int, df_bool, df_object, df_dt ], axis=1)
+
+        #### this raises because we have duplicate column names across dtypes ####
+        self.assertRaises(Exception, df.to_csv, filename)
+
     def test_to_csv_chunking(self):
         filename = '__tmp_to_csv_chunking__.csv'
 
