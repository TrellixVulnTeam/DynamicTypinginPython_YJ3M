commit b225898728b708c22ee068ba499b052b692b3b7c
Author: Chang She <chang@lambdafoundry.com>
Date:   Mon Jun 25 14:26:43 2012 -0400

    BUG: DataFrame plotting with inferred freq

diff --git a/pandas/tools/plotting.py b/pandas/tools/plotting.py
index 30505cfc4..985d58895 100644
--- a/pandas/tools/plotting.py
+++ b/pandas/tools/plotting.py
@@ -660,18 +660,22 @@ class LinePlot(MPLPlot):
         if (isinstance(data.index, DatetimeIndex) and
             isinstance(data, DataFrame)):
             freq = getattr(data.index, 'freqstr', None)
+
+            if freq is None:
+                freq = getattr(data.index, 'inferred_freq', None)
+
             if isinstance(freq, DateOffset):
                 freq = freq.rule_code
 
             freq = get_period_alias(freq)
 
-            if freq is None:
-                freq = getattr(data.index, 'inferred_freq', None)
-
             if freq is None:
                 ax, _ = self._get_ax_and_style(0)
                 freq = getattr(ax, 'freq', None)
 
+            if freq is None:
+                raise ValueError('Could not get frequency alias for plotting')
+
             data = DataFrame(data.values,
                              index=data.index.to_period(freq=freq),
                              columns=data.columns)
diff --git a/pandas/tseries/tests/test_plotting.py b/pandas/tseries/tests/test_plotting.py
index 718249330..c88102a31 100644
--- a/pandas/tseries/tests/test_plotting.py
+++ b/pandas/tseries/tests/test_plotting.py
@@ -49,6 +49,22 @@ class TestTSPlot(unittest.TestCase):
                                     columns=['A', 'B', 'C'])
                                     for x in idx]
 
+    @slow
+    def test_frame_inferred(self):
+        # inferred freq
+        import matplotlib.pyplot as plt
+        plt.close('all')
+        idx = date_range('1/1/1987', freq='MS', periods=100)
+        idx = DatetimeIndex(idx.values, freq=None)
+        df = DataFrame(np.random.randn(len(idx), 3), index=idx)
+        df.plot()
+
+        # axes freq
+        idx = idx[0:40] + idx[45:99]
+        df2 = DataFrame(np.random.randn(len(idx), 3), index=idx)
+        df2.plot()
+        plt.close('all')
+
     @slow
     def test_tsplot(self):
         from pandas.tseries.plotting import tsplot
