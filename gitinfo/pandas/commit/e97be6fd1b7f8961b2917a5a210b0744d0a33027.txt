commit e97be6fd1b7f8961b2917a5a210b0744d0a33027
Author: Jeff Reback <jeff@reback.net>
Date:   Sat Feb 24 12:21:03 2018 -0500

    COMPAT: fixup decimal extension for indexing compat (#19882)

diff --git a/pandas/tests/extension/base/getitem.py b/pandas/tests/extension/base/getitem.py
index 31ed8b9e0..566ba1721 100644
--- a/pandas/tests/extension/base/getitem.py
+++ b/pandas/tests/extension/base/getitem.py
@@ -18,7 +18,8 @@ class BaseGetitemTests(BaseExtensionTests):
         self.assert_series_equal(result, expected)
 
     def test_iloc_frame(self, data):
-        df = pd.DataFrame({"A": data, 'B': np.arange(len(data))})
+        df = pd.DataFrame({"A": data, 'B':
+                           np.arange(len(data), dtype='int64')})
         expected = pd.DataFrame({"A": data[:4]})
 
         # slice -> frame
@@ -49,7 +50,8 @@ class BaseGetitemTests(BaseExtensionTests):
         self.assert_series_equal(result, expected)
 
     def test_loc_frame(self, data):
-        df = pd.DataFrame({"A": data, 'B': np.arange(len(data))})
+        df = pd.DataFrame({"A": data,
+                           'B': np.arange(len(data), dtype='int64')})
         expected = pd.DataFrame({"A": data[:4]})
 
         # slice -> frame
diff --git a/pandas/tests/extension/decimal/array.py b/pandas/tests/extension/decimal/array.py
index f526ac599..8b2eaadec 100644
--- a/pandas/tests/extension/decimal/array.py
+++ b/pandas/tests/extension/decimal/array.py
@@ -8,6 +8,7 @@ import numpy as np
 import pandas as pd
 from pandas.core.arrays import ExtensionArray
 from pandas.core.dtypes.base import ExtensionDtype
+from pandas.core.dtypes.common import _ensure_platform_int
 
 
 class DecimalDtype(ExtensionDtype):
@@ -68,6 +69,7 @@ class DecimalArray(ExtensionArray):
     def take(self, indexer, allow_fill=True, fill_value=None):
         mask = indexer == -1
 
+        indexer = _ensure_platform_int(indexer)
         out = self.values.take(indexer)
         out[mask] = self._na_value
 
