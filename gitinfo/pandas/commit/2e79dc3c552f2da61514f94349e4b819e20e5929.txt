commit 2e79dc3c552f2da61514f94349e4b819e20e5929
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Wed Oct 19 16:18:47 2011 -0400

    ENH: speed up isnull, some bugs to be fixed still

diff --git a/pandas/src/tseries.pyx b/pandas/src/tseries.pyx
index 765c5c7eb..d384fe951 100644
--- a/pandas/src/tseries.pyx
+++ b/pandas/src/tseries.pyx
@@ -223,38 +223,23 @@ def array_to_datetime(ndarray[int64_t, ndim=1] arr):
 cdef double INF = <double> np.inf
 cdef double NEGINF = -INF
 
-cdef inline _isnan(object o):
-    return o != o
-
 cdef inline _checknull(object val):
-    if isinstance(val, (float, np.floating)):
-        return val != val or val == INF or val == NEGINF
-    else:
-        return val is None
+    return val is None or val != val
 
 cpdef checknull(object val):
     return _checknull(val)
 
-def isnullobj(ndarray input):
-    cdef int i, length
+def isnullobj(ndarray[object] arr):
+    cdef Py_ssize_t i, n
     cdef object val
-    cdef ndarray[npy_int8, ndim=1] result
-    cdef flatiter iter
-
-    length = PyArray_SIZE(input)
-
-    result = <ndarray> np.zeros(length, dtype=np.int8)
-
-    iter= PyArray_IterNew(input)
-
-    for i from 0 <= i < length:
-        val = PyArray_GETITEM(input, PyArray_ITER_DATA(iter))
+    cdef ndarray[uint8_t, cast=True] result
 
+    n = len(arr)
+    result = np.zeros(n, dtype=bool)
+    for i from 0 <= i < n:
+        val = arr[i]
         if _checknull(val):
             result[i] = 1
-
-        PyArray_ITER_NEXT(iter)
-
     return result
 
 def list_to_object_array(list obj):
