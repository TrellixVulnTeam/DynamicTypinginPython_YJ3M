commit ace341efcaabddd3d694aca11bf734a5d4b1f31d
Author: Thierry Moisan <thierry.moisan@gmail.com>
Date:   Tue Sep 18 09:00:17 2018 -0400

    Test in scripts/validate_docstrings.py that the short summary is always one line long (#22617)

diff --git a/scripts/tests/test_validate_docstrings.py b/scripts/tests/test_validate_docstrings.py
index 0c0757c69..00496f771 100644
--- a/scripts/tests/test_validate_docstrings.py
+++ b/scripts/tests/test_validate_docstrings.py
@@ -362,6 +362,15 @@ class BadSummaries(object):
         which is not correct.
         """
 
+    def two_paragraph_multi_line(self):
+        """
+        Extends beyond one line
+        which is not correct.
+
+        Extends beyond one line, which in itself is correct but the
+        previous short summary should still be an issue.
+        """
+
 
 class BadParameters(object):
     """
@@ -556,7 +565,9 @@ class TestValidator(object):
         ('BadSummaries', 'no_capitalization',
          ('Summary must start with infinitive verb',)),
         ('BadSummaries', 'multi_line',
-         ('a short summary in a single line should be present',)),
+         ('Summary should fit in a single line.',)),
+        ('BadSummaries', 'two_paragraph_multi_line',
+         ('Summary should fit in a single line.',)),
         # Parameters tests
         ('BadParameters', 'missing_params',
          ('Parameters {**kwargs} not documented',)),
diff --git a/scripts/validate_docstrings.py b/scripts/validate_docstrings.py
index 83bb38248..790a62b53 100755
--- a/scripts/validate_docstrings.py
+++ b/scripts/validate_docstrings.py
@@ -163,10 +163,12 @@ class Docstring(object):
 
     @property
     def summary(self):
-        if not self.doc['Extended Summary'] and len(self.doc['Summary']) > 1:
-            return ''
         return ' '.join(self.doc['Summary'])
 
+    @property
+    def num_summary_lines(self):
+        return len(self.doc['Summary'])
+
     @property
     def extended_summary(self):
         if not self.doc['Extended Summary'] and len(self.doc['Summary']) > 1:
@@ -452,6 +454,8 @@ def validate_one(func_name):
             errs.append('Summary must start with infinitive verb, '
                         'not third person (e.g. use "Generate" instead of '
                         '"Generates")')
+        if doc.num_summary_lines > 1:
+            errs.append("Summary should fit in a single line.")
     if not doc.extended_summary:
         wrns.append('No extended summary found')
 
