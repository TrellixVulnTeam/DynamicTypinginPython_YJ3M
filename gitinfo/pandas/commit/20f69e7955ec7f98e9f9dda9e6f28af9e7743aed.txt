commit 20f69e7955ec7f98e9f9dda9e6f28af9e7743aed
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Mon May 7 12:42:32 2012 -0400

    TST: unit test and close #522

diff --git a/RELEASE.rst b/RELEASE.rst
index 6df7b0adb..5e05dc91b 100644
--- a/RELEASE.rst
+++ b/RELEASE.rst
@@ -60,6 +60,7 @@ pandas 0.8.0
     (#1142)
   - Fix label slicing issues with float index values (#1167)
   - Fix segfault caused by empty groups passed to groupby (#1048)
+  - Fix occasionally misbehaved reindexing in the presence of NaN labels (#522)
 
 pandas 0.7.3
 ============
diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index 9e2ad9471..a6adc0c6b 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -4914,6 +4914,23 @@ class TestDataFrame(unittest.TestCase, CheckIndexing,
         newFrame = self.frame.reindex_axis(cols, axis=1)
         assert_frame_equal(newFrame, self.frame)
 
+    def test_reindex_with_nans(self):
+        df = DataFrame([[1,2], [3,4], [np.nan,np.nan], [7,8], [9,10]],
+                       columns=['a', 'b'],
+                       index=[100.0, 101.0, np.nan, 102.0, 103.0])
+
+        result = df.reindex(index=[101.0, 102.0, 103.0])
+        expected = df.ix[[1, 3, 4]]
+        assert_frame_equal(result, expected)
+
+        result = df.reindex(index=[103.0])
+        expected = df.ix[[4]]
+        assert_frame_equal(result, expected)
+
+        result = df.reindex(index=[101.0])
+        expected = df.ix[[1]]
+        assert_frame_equal(result, expected)
+
     def test_rename_objects(self):
         renamed = self.mixed_frame.rename(columns=str.upper)
         self.assert_('FOO' in renamed)
