commit 9a7da37d06f205c147828debf49502405e94e142
Author: Adam Klein <adamklein@gmail.com>
Date:   Tue Feb 7 16:12:09 2012 -0500

    ENH: fix git/sha lookup for jenkins

diff --git a/setup.py b/setup.py
index 0aec949a3..2e8e5ed8b 100755
--- a/setup.py
+++ b/setup.py
@@ -171,16 +171,17 @@ ISRELEASED = False
 VERSION = '%d.%d.%d' % (MAJOR, MINOR, MICRO)
 QUALIFIER = 'rc1'
 
-try:
-    sha = os.environ['GIT_COMMIT']
-    if sha is not None and sha != '':
-        QUALIFER = sha
-except KeyError:
-    pass
-
 FULLVERSION = VERSION
 if not ISRELEASED:
-    FULLVERSION += '.dev'
+    try:
+        sha = os.environ['GIT_COMMIT']
+        if sha is not None and sha != '':
+            FULLVERSION += sha
+        else:
+            FULLVERSION += '.dev'
+    except KeyError:
+        FULLVERSION += '.dev'
+
     try:
         import subprocess
         pipe = subprocess.Popen(["git", "rev-parse", "--short", "HEAD"],
