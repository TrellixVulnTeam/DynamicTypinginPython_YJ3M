commit 2e90c7f2bbc9d4f5389d9ea4a4e29ebd2ab4f140
Author: OlivierLuG <59281854+OlivierLuG@users.noreply.github.com>
Date:   Sat Jun 13 21:58:20 2020 +0200

    TST: boolean indexing using .iloc #20627 (#34622)
    
    * added a test for issue #20627
    
    * added a test for issue #20627 (review taken into account)
    
    * TST: boolean indexing using .iloc #20627
    
    * TST #20627 added tests, and take review into account
    
    * Updated test_iloc.py to pass CI testing

diff --git a/pandas/tests/indexing/test_iloc.py b/pandas/tests/indexing/test_iloc.py
index c97cd81c8..c5f401028 100644
--- a/pandas/tests/indexing/test_iloc.py
+++ b/pandas/tests/indexing/test_iloc.py
@@ -705,6 +705,25 @@ class TestiLoc2:
         expected = pd.Categorical(["C", "B", "A"])
         tm.assert_categorical_equal(cat, expected)
 
+    def test_iloc_with_boolean_operation(self):
+        # GH 20627
+        result = DataFrame([[0, 1], [2, 3], [4, 5], [6, np.nan]])
+        result.iloc[result.index <= 2] *= 2
+        expected = DataFrame([[0, 2], [4, 6], [8, 10], [6, np.nan]])
+        tm.assert_frame_equal(result, expected)
+
+        result.iloc[result.index > 2] *= 2
+        expected = DataFrame([[0, 2], [4, 6], [8, 10], [12, np.nan]])
+        tm.assert_frame_equal(result, expected)
+
+        result.iloc[[True, True, False, False]] *= 2
+        expected = DataFrame([[0, 4], [8, 12], [8, 10], [12, np.nan]])
+        tm.assert_frame_equal(result, expected)
+
+        result.iloc[[False, False, True, True]] /= 2
+        expected = DataFrame([[0.0, 4.0], [8.0, 12.0], [4.0, 5.0], [6.0, np.nan]])
+        tm.assert_frame_equal(result, expected)
+
 
 class TestILocSetItemDuplicateColumns:
     def test_iloc_setitem_scalar_duplicate_columns(self):
