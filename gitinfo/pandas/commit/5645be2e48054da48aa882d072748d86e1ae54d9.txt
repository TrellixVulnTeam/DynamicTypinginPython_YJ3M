commit 5645be2e48054da48aa882d072748d86e1ae54d9
Author: Chang She <changshe@gmail.com>
Date:   Sat Nov 24 02:59:23 2012 -0500

    TST: better suppress deprecation warnings

diff --git a/pandas/sparse/tests/test_sparse.py b/pandas/sparse/tests/test_sparse.py
index 87ffa0822..f6412e09c 100644
--- a/pandas/sparse/tests/test_sparse.py
+++ b/pandas/sparse/tests/test_sparse.py
@@ -31,6 +31,7 @@ from pandas.sparse.api import (SparseSeries, SparseTimeSeries,
 import pandas.tests.test_frame as test_frame
 import pandas.tests.test_panel as test_panel
 import pandas.tests.test_series as test_series
+from pandas.util.py3compat import StringIO
 
 from test_array import assert_sp_array_equal
 
@@ -819,7 +820,11 @@ class TestSparseDataFrame(TestCase, test_frame.SafeForSparse):
         pass
 
     def test_sparse_series_ops(self):
+        import sys
+        buf = StringIO()
+        sys.stderr = buf
         self._check_all(self._check_frame_ops)
+        sys.stderr = sys.__stderr__
 
     def _check_frame_ops(self, frame):
         fill = frame.default_fill_value
diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index 149485fad..955cfedd7 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -3479,8 +3479,6 @@ class TestDataFrame(unittest.TestCase, CheckIndexing,
         smaller_added2 = self.tsframe + smaller_ts
         assert_frame_equal(smaller_added, smaller_added2)
 
-        sys.stderr = sys.__stderr__
-
         # length 0
         result = self.tsframe + ts[:0]
 
@@ -3493,6 +3491,8 @@ class TestDataFrame(unittest.TestCase, CheckIndexing,
         result = frame * ts
         self.assertEqual(len(result), len(ts))
 
+        sys.stderr = sys.__stderr__
+
     def test_combineFunc(self):
         result = self.frame * 2
         self.assert_(np.array_equal(result.values, self.frame.values * 2))
