commit 61d2fb7845d81fc9e8498eb09dc32877c646f4a8
Author: Chang She <chang@lambdafoundry.com>
Date:   Thu Jun 14 23:25:50 2012 -0400

    BUG: mask NaNs in non-ts plots

diff --git a/pandas/tools/plotting.py b/pandas/tools/plotting.py
index 0f957edcf..dc264bd20 100644
--- a/pandas/tools/plotting.py
+++ b/pandas/tools/plotting.py
@@ -615,6 +615,10 @@ class LinePlot(MPLPlot):
                 if self.style:
                     style = self.style
 
+                mask = com.isnull(y)
+                if mask.any():
+                    y = np.ma.array(y)
+                    y = np.ma.masked_where(mask, y)
                 plotf(ax, x, y, style, label=label, **self.kwds)
                 ax.grid(self.grid)
                 idx = getattr(self.data, 'index', None)
diff --git a/pandas/tseries/tests/test_plotting.py b/pandas/tseries/tests/test_plotting.py
index f001685e0..35a3233f0 100644
--- a/pandas/tseries/tests/test_plotting.py
+++ b/pandas/tseries/tests/test_plotting.py
@@ -207,6 +207,34 @@ class TestTSPlot(unittest.TestCase):
         mask = data.mask
         self.assert_(mask[5:25, 1].all())
 
+        # irregular
+        plt.close('all')
+        ts = tm.makeTimeSeries()
+        ts = ts[[0, 1, 2, 5, 7, 9, 12, 15, 20]]
+        ts[2:5] = np.nan
+        ax = ts.plot()
+        lines = ax.get_lines()
+        self.assert_(len(lines) == 1)
+        l = lines[0]
+        data = l.get_xydata()
+        self.assert_(isinstance(data, np.ma.core.MaskedArray))
+        mask = data.mask
+        self.assert_(mask[2:5, 1].all())
+
+        # non-ts
+        plt.close('all')
+        idx = [0, 1, 2, 5, 7, 9, 12, 15, 20]
+        ser = Series(np.random.randn(len(idx)), idx)
+        ser[2:5] = np.nan
+        ax = ser.plot()
+        lines = ax.get_lines()
+        self.assert_(len(lines) == 1)
+        l = lines[0]
+        data = l.get_xydata()
+        self.assert_(isinstance(data, np.ma.core.MaskedArray))
+        mask = data.mask
+        self.assert_(mask[2:5, 1].all())
+
     @slow
     def test_secondary_y(self):
         import matplotlib.pyplot as plt
