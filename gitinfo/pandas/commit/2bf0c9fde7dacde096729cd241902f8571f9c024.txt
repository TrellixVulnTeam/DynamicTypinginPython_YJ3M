commit 2bf0c9fde7dacde096729cd241902f8571f9c024
Author: Tom Augspurger <TomAugspurger@users.noreply.github.com>
Date:   Mon Jan 13 14:45:42 2020 -0600

    Compat for util.testing import (#30973)
    
    * Compat for util.testing import
    
    Closes #30869

diff --git a/pandas/tests/api/test_api.py b/pandas/tests/api/test_api.py
index 8b897524c..406d5f055 100644
--- a/pandas/tests/api/test_api.py
+++ b/pandas/tests/api/test_api.py
@@ -1,6 +1,9 @@
+import subprocess
 import sys
 from typing import List
 
+import pytest
+
 import pandas as pd
 from pandas import api, compat
 import pandas._testing as tm
@@ -311,3 +314,18 @@ class TestTesting(Base):
 
         assert "pandas.util.testing is deprecated" in str(m[0].message)
         assert "pandas.testing instead" in str(m[0].message)
+
+    def test_util_in_top_level(self):
+        # in a subprocess to avoid import caching issues
+        out = subprocess.check_output(
+            [
+                sys.executable,
+                "-c",
+                "import pandas; pandas.util.testing.assert_series_equal",
+            ],
+            stderr=subprocess.STDOUT,
+        ).decode()
+        assert "pandas.util.testing is deprecated" in out
+
+        with pytest.raises(AttributeError, match="foo"):
+            pd.util.foo
diff --git a/pandas/util/__init__.py b/pandas/util/__init__.py
index d906c0371..b5271dbc0 100644
--- a/pandas/util/__init__.py
+++ b/pandas/util/__init__.py
@@ -1,3 +1,30 @@
 from pandas.util._decorators import Appender, Substitution, cache_readonly  # noqa
 
+from pandas import compat
 from pandas.core.util.hashing import hash_array, hash_pandas_object  # noqa
+
+# compatibility for import pandas; pandas.util.testing
+
+if compat.PY37:
+
+    def __getattr__(name):
+        if name == "testing":
+            import pandas.util.testing
+
+            return pandas.util.testing
+        else:
+            raise AttributeError(f"module 'pandas.util' has no attribute '{name}'")
+
+
+else:
+
+    class _testing:
+        def __getattr__(self, item):
+            import pandas.util.testing
+
+            return getattr(pandas.util.testing, item)
+
+    testing = _testing()
+
+
+del compat
