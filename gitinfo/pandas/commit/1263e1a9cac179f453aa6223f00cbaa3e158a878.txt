commit 1263e1a9cac179f453aa6223f00cbaa3e158a878
Author: Saurav Chakravorty <sauravchakravorty@gmail.com>
Date:   Thu May 16 18:41:17 2019 +0530

    CI/DOC: fix clipboard on travis (#26103)
    
    Co-authored-by: Joris Van den Bossche <jorisvandenbossche@gmail.com>

diff --git a/.travis.yml b/.travis.yml
index 022e11b7d..ce8817133 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -86,6 +86,14 @@ install:
   - ci/submit_cython_cache.sh
   - echo "install done"
 
+before_script:
+  # display server (for clipboard functionality) needs to be started here,
+  # does not work if done in install:setup_env.sh (GH-26103)
+  - export DISPLAY=":99.0"
+  - echo "sh -e /etc/init.d/xvfb start"
+  - sh -e /etc/init.d/xvfb start
+  - sleep 3
+
 script:
   - echo "script start"
   - source activate pandas-dev
diff --git a/ci/setup_env.sh b/ci/setup_env.sh
index 414a5c870..e2667558a 100755
--- a/ci/setup_env.sh
+++ b/ci/setup_env.sh
@@ -118,16 +118,10 @@ echo "conda list"
 conda list
 
 # Install DB for Linux
-export DISPLAY=":99."
 if [ ${TRAVIS_OS_NAME} == "linux" ]; then
   echo "installing dbs"
   mysql -e 'create database pandas_nosetest;'
   psql -c 'create database pandas_nosetest;' -U postgres
-
-  echo
-  echo "sh -e /etc/init.d/xvfb start"
-  sh -e /etc/init.d/xvfb start
-  sleep 3
 else
    echo "not using dbs on non-linux"
 fi
