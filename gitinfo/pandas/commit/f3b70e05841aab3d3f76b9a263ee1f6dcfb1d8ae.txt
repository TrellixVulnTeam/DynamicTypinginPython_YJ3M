commit f3b70e05841aab3d3f76b9a263ee1f6dcfb1d8ae
Author: jreback <jeff@reback.net>
Date:   Wed Jun 12 10:20:37 2013 -0400

    CLN: avoid Unboundlocal error in tools/merge/_get_concatenaged_data (GH3833)

diff --git a/pandas/tools/merge.py b/pandas/tools/merge.py
index 9cdddc47a..75e35b403 100644
--- a/pandas/tools/merge.py
+++ b/pandas/tools/merge.py
@@ -984,11 +984,11 @@ class _Concatenator(object):
         return blockmaps, reindexed_data
 
     def _get_concatenated_data(self):
-        try:
-            # need to conform to same other (joined) axes for block join
-            blockmaps, rdata = self._prepare_blocks()
-            kinds = _get_all_block_kinds(blockmaps)
+        # need to conform to same other (joined) axes for block join
+        blockmaps, rdata = self._prepare_blocks()
+        kinds = _get_all_block_kinds(blockmaps)
 
+        try:
             new_blocks = []
             for kind in kinds:
                 klass_blocks = [mapping.get(kind) for mapping in blockmaps]
