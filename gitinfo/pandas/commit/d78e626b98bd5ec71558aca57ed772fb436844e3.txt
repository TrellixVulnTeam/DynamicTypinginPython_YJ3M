commit d78e626b98bd5ec71558aca57ed772fb436844e3
Author: Wes McKinney <wesmckinn@gmail.com>
Date:   Tue Jan 24 13:55:07 2012 -0500

    BUG: fix segfault in infer_dtype for length-0 indexes

diff --git a/pandas/src/inference.pyx b/pandas/src/inference.pyx
index a87b9feaf..65b07e979 100644
--- a/pandas/src/inference.pyx
+++ b/pandas/src/inference.pyx
@@ -40,6 +40,8 @@ def infer_dtype(object _values):
         values = list_to_object_array(_values)
 
     n = len(values)
+    if n == 0:
+        return 'empty'
 
     val_kind = values.dtype.type
     if val_kind in _TYPE_MAP:
diff --git a/pandas/tests/test_tseries.py b/pandas/tests/test_tseries.py
index 9958d413e..24798fd62 100644
--- a/pandas/tests/test_tseries.py
+++ b/pandas/tests/test_tseries.py
@@ -268,6 +268,13 @@ def test_arrmap():
 
 class TestTypeInference(unittest.TestCase):
 
+    def test_length_zero(self):
+        result = lib.infer_dtype(np.array([], dtype='i4'))
+        self.assertEqual(result, 'empty')
+
+        result = lib.infer_dtype(np.array([], dtype='O'))
+        self.assertEqual(result, 'empty')
+
     def test_integers(self):
         arr = np.array([1, 2, 3, np.int64(4), np.int32(5)], dtype='O')
         result = lib.infer_dtype(arr)
