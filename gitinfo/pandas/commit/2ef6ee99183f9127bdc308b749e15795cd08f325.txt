commit 2ef6ee99183f9127bdc308b749e15795cd08f325
Author: Adam Klein <adamklein@gmail.com>
Date:   Thu Mar 8 12:41:30 2012 -0500

    BUG: close #881, setitem boolean indexing on dataframe

diff --git a/pandas/core/frame.py b/pandas/core/frame.py
index b9ed748c8..12ed7f4d7 100644
--- a/pandas/core/frame.py
+++ b/pandas/core/frame.py
@@ -1515,7 +1515,12 @@ class DataFrame(NDFrame):
             for k1, k2 in zip(keys, value.columns):
                 self[k1] = value[k2]
         else:
-            self.ix[:, keys] = value
+            if isinstance(keys, np.ndarray) and keys.dtype == np.bool_:
+                # boolean slicing should happen on rows, consistent with
+                # behavior of getitem
+                self.ix[keys, :] = value
+            else:
+                self.ix[:, keys] = value
 
     def _set_item(self, key, value):
         """
diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index 094ce1e37..ee0a9cf1f 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -531,6 +531,16 @@ class CheckIndexing(object):
         frame.ix[:, 'B':'C'] = 4.
         assert_frame_equal(frame, expected)
 
+        # new corner case of boolean slicing / setting
+        frame = DataFrame(zip([2,3,9,6,7], [np.nan]*5),
+                          columns=['a','b'])
+        lst = [100]
+        lst.extend([np.nan]*4)
+        expected = DataFrame(zip([100,3,9,6,7], lst), columns=['a','b'])
+        frame[frame['a'] == 2] = 100
+        assert_frame_equal(frame, expected)
+
+
     def test_fancy_getitem_slice_mixed(self):
         sliced = self.mixed_frame.ix[:, -3:]
         self.assert_(sliced['D'].dtype == np.float64)
