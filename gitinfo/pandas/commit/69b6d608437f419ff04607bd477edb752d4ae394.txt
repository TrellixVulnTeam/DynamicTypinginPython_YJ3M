commit 69b6d608437f419ff04607bd477edb752d4ae394
Author: y-p <yoval@gmx.com>
Date:   Thu Mar 14 08:14:08 2013 +0200

    BUG: add length check on categorical grouper, GH3011

diff --git a/doc/source/v0.11.0.txt b/doc/source/v0.11.0.txt
index 60ec7de5c..ce2cfed94 100644
--- a/doc/source/v0.11.0.txt
+++ b/doc/source/v0.11.0.txt
@@ -316,6 +316,9 @@ Bug Fixes
     reporting (GH2807_)
   - Fix pretty-printing of infinite data structures (closes GH2978_)
   - str.contains ignored na argument (GH2806_)
+  - Substitute warning for segfault when grouping with categorical grouper
+    of mismatched length (GH3011_)
+
 
 See the `full release notes
 <https://github.com/pydata/pandas/blob/master/RELEASE.rst>`__ or issue tracker
@@ -331,3 +334,4 @@ on GitHub for a complete list.
 .. _GH2806: https://github.com/pydata/pandas/issues/2806
 .. _GH2807: https://github.com/pydata/pandas/issues/2807
 .. _GH2918: https://github.com/pydata/pandas/issues/2918
+.. _GH3011: https://github.com/pydata/pandas/issues/3011
diff --git a/pandas/core/groupby.py b/pandas/core/groupby.py
index 3f12f773d..9e5e9f640 100644
--- a/pandas/core/groupby.py
+++ b/pandas/core/groupby.py
@@ -1310,6 +1310,11 @@ def _get_grouper(obj, key=None, axis=0, level=None, sort=True):
             exclusions.append(gpr)
             name = gpr
             gpr = obj[gpr]
+
+        if (isinstance(gpr,Categorical) and len(gpr) != len(obj)):
+            errmsg = "Categorical grouper must have len(grouper) == len(data)"
+            raise AssertionError(errmsg)
+
         ping = Grouping(group_axis, gpr, name=name, level=level, sort=sort)
         groupings.append(ping)
 
