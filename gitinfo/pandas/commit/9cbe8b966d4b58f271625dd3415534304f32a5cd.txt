commit 9cbe8b966d4b58f271625dd3415534304f32a5cd
Author: Nicolas Bonnotte <nicolas.bonnotte@qucit.com>
Date:   Sun Nov 8 17:10:46 2015 +0100

    BUG: multi-index to_native_types is not passing thru parameters, #7791

diff --git a/doc/source/whatsnew/v0.17.1.txt b/doc/source/whatsnew/v0.17.1.txt
index ff45d2880..3f1a827ad 100755
--- a/doc/source/whatsnew/v0.17.1.txt
+++ b/doc/source/whatsnew/v0.17.1.txt
@@ -126,3 +126,4 @@ Bug Fixes
 
 
 - Bug in the link-time error caused by C ``inline`` functions on FreeBSD 10+ (with ``clang``) (:issue:`10510`)
+- Bug in ``DataFrame.to_csv`` in passing through arguments for formatting ``MultiIndexes``, including ``date_format`` (:issue:`7791`)
diff --git a/pandas/core/index.py b/pandas/core/index.py
index 855e3f013..edca7893c 100644
--- a/pandas/core/index.py
+++ b/pandas/core/index.py
@@ -4327,7 +4327,12 @@ class MultiIndex(Index):
         return sum(name == n for n in self.names) > 1
 
     def _format_native_types(self, **kwargs):
-        return self.values
+        # we go through the levels and format them
+        levels = [level._format_native_types(**kwargs)
+                  for level in self.levels]
+        mi = MultiIndex(levels=levels, labels=self.labels, names=self.names,
+                        sortorder=self.sortorder, verify_integrity=False)
+        return mi.values
 
     @property
     def _constructor(self):
diff --git a/pandas/tests/test_format.py b/pandas/tests/test_format.py
index 140b54225..22555a84c 100644
--- a/pandas/tests/test_format.py
+++ b/pandas/tests/test_format.py
@@ -2952,6 +2952,17 @@ $1$,$2$
         self.assertEqual(df_day.to_csv(), expected_default_day)
         self.assertEqual(df_day.to_csv(date_format='%Y-%m-%d'), expected_default_day)
 
+        # testing if date_format parameter is taken into account for
+        # multi-indexed dataframes (GH 7791)
+        df_sec['B'] = 0
+        df_sec['C'] = 1
+        expected_ymd_sec = 'A,B,C\n2013-01-01,0,1\n'
+        df_sec_grouped = df_sec.groupby([pd.Grouper(key='A', freq='1h'), 'B'])
+        self.assertEqual(
+            df_sec_grouped.mean().to_csv(date_format='%Y-%m-%d'),
+            expected_ymd_sec
+        )
+
     # deprecation GH11274
     def test_to_csv_engine_kw_deprecation(self):
         with tm.assert_produces_warning(FutureWarning):
diff --git a/pandas/tests/test_frame.py b/pandas/tests/test_frame.py
index 1b57d53a5..8a01b1ca1 100644
--- a/pandas/tests/test_frame.py
+++ b/pandas/tests/test_frame.py
@@ -7341,6 +7341,13 @@ class TestDataFrame(tm.TestCase, CheckIndexing,
         df.to_csv(buf, encoding='utf-8', index=False)
         self.assertEqual(buf.getvalue(), text)
 
+        # testing if quoting parameter is passed through with multi-indexes
+        # related to issue #7791
+        df = pd.DataFrame({'a': [1, 2], 'b': [3, 4], 'c': [5, 6]})
+        df = df.set_index(['a', 'b'])
+        expected = '"a","b","c"\n"1","3","5"\n"2","4","6"\n'
+        self.assertEqual(df.to_csv(quoting=csv.QUOTE_ALL), expected)
+
     def test_to_csv_unicodewriter_quoting(self):
         df = DataFrame({'A': [1, 2, 3], 'B': ['foo', 'bar', 'baz']})
 
