commit e67dbf61236c479acc77db1fbeb98d1c06ff9a0b
Author: Michael Frister <michael+git@frister.net>
Date:   Thu Mar 8 23:08:08 2012 +0100

    Handle Transfer-Encoding header values case insensitive
    
    According to HTTP/1.1 RFC 2616 Section 3.6.

diff --git a/libmproxy/proxy.py b/libmproxy/proxy.py
index 3a7f807e..c5833d0c 100644
--- a/libmproxy/proxy.py
+++ b/libmproxy/proxy.py
@@ -106,7 +106,7 @@ def read_chunked(fp, limit):
 
 def read_http_body(rfile, connection, headers, all, limit):
     if 'transfer-encoding' in headers:
-        if not ",".join(headers["transfer-encoding"]) == "chunked":
+        if not ",".join(headers["transfer-encoding"]).lower() == "chunked":
             raise IOError('Invalid transfer-encoding')
         content = read_chunked(rfile, limit)
     elif "content-length" in headers:
