commit 0a296817d68a17012985a59af52625e81725c7e5
Author: Blown_Snail <Blown_Snail@foxmail.com>
Date:   Sun Feb 23 15:06:13 2020 +0800

    Fix wrong behavior of --allow-hosts options

diff --git a/mitmproxy/proxy/config.py b/mitmproxy/proxy/config.py
index e98faabf..982afb75 100644
--- a/mitmproxy/proxy/config.py
+++ b/mitmproxy/proxy/config.py
@@ -23,7 +23,7 @@ class HostMatcher:
         if self.handle in ["ignore", "tcp"]:
             return any(rex.search(host) for rex in self.regexes)
         else:  # self.handle == "allow"
-            return any(not rex.search(host) for rex in self.regexes)
+            return not any(rex.search(host) for rex in self.regexes)
 
     def __bool__(self):
         return bool(self.patterns)
