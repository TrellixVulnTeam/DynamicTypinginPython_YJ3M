commit 2bbffef3e1b1494e1e833fa67f53f3f088600b97
Author: gorogoroumaru <force.minpiku@gmail.com>
Date:   Sat Jul 11 21:42:46 2020 +0900

    add default timeout value (#4068)

diff --git a/mitmproxy/net/tcp.py b/mitmproxy/net/tcp.py
index 07cee466..b76a48bf 100644
--- a/mitmproxy/net/tcp.py
+++ b/mitmproxy/net/tcp.py
@@ -125,7 +125,9 @@ class Reader(_FileLike):
                 # underlying BIO could not satisfy the needs of SSL_read() to continue the
                 # operation. In this case a call to SSL_get_error with the return value of
                 # SSL_read() will yield SSL_ERROR_WANT_READ or SSL_ERROR_WANT_WRITE.
-                if (time.time() - start) < self.o.gettimeout():
+                # 300 is OpenSSL default timeout
+                timeout = self.o.gettimeout() or 300
+                if (time.time() - start) < timeout:
                     time.sleep(0.1)
                     continue
                 else:
