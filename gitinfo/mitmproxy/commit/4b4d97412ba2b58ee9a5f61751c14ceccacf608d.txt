commit 4b4d97412ba2b58ee9a5f61751c14ceccacf608d
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sat May 12 13:38:15 2018 +1200

    clientreplay: don't restrict outbound replay address to listen host
    
    Fixes #2647

diff --git a/mitmproxy/addons/clientplayback.py b/mitmproxy/addons/clientplayback.py
index e9fbadce..99ba1d8d 100644
--- a/mitmproxy/addons/clientplayback.py
+++ b/mitmproxy/addons/clientplayback.py
@@ -59,9 +59,7 @@ class RequestReplayThread(basethread.BaseThread):
                 # In all modes, we directly connect to the server displayed
                 if self.options.mode.startswith("upstream:"):
                     server_address = server_spec.parse_with_mode(self.options.mode)[1].address
-                    server = connections.ServerConnection(
-                        server_address, (self.options.listen_host, 0)
-                    )
+                    server = connections.ServerConnection(server_address)
                     server.connect()
                     if r.scheme == "https":
                         connect_request = http.make_connect_request((r.data.host, r.port))
@@ -85,10 +83,7 @@ class RequestReplayThread(basethread.BaseThread):
                         r.first_line_format = "absolute"
                 else:
                     server_address = (r.host, r.port)
-                    server = connections.ServerConnection(
-                        server_address,
-                        (self.options.listen_host, 0)
-                    )
+                    server = connections.ServerConnection(server_address)
                     server.connect()
                     if r.scheme == "https":
                         server.establish_tls(
