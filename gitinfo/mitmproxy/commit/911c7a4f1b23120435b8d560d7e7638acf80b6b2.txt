commit 911c7a4f1b23120435b8d560d7e7638acf80b6b2
Author: Shadab Zafar <dufferzafar0@gmail.com>
Date:   Tue Jul 19 12:19:42 2016 +0530

    Update toggling of marked attribute on pressing "m"

diff --git a/mitmproxy/console/flowlist.py b/mitmproxy/console/flowlist.py
index 6beac203..a70aae20 100644
--- a/mitmproxy/console/flowlist.py
+++ b/mitmproxy/console/flowlist.py
@@ -196,10 +196,7 @@ class ConnectionItem(urwid.WidgetWrap):
             self.master.state.set_focus_flow(f)
             signals.flowlist_change.send(self)
         elif key == "m":
-            if self.state.flow_marked(self.flow):
-                self.state.set_flow_marked(self.flow, False)
-            else:
-                self.state.set_flow_marked(self.flow, True)
+            self.flow.marked = not self.flow.marked
             signals.flowlist_change.send(self)
         elif key == "M":
             if self.state.mark_filter:
