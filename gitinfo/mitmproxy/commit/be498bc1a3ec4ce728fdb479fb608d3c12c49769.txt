commit be498bc1a3ec4ce728fdb479fb608d3c12c49769
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sun Aug 16 19:55:55 2015 +1200

    Adapt mitmdump and mitmweb for certifi and release process

diff --git a/release/mitmdump.spec b/release/mitmdump.spec
index f9b0311c..5ea6d0ce 100644
--- a/release/mitmdump.spec
+++ b/release/mitmdump.spec
@@ -2,23 +2,28 @@
 
 from glob import glob
 
-a = Analysis(['./mitmdump'],
+VENV = "../release/venv"
+
+a = Analysis(['../mitmproxy/mitmdump'],
              hiddenimports=[],
              hookspath=None,
              runtime_hooks=None,
              excludes=None,
           )
 a.datas = Tree(
-  "./libmproxy/onboarding/templates",
+  "../mitmproxy/libmproxy/onboarding/templates",
   prefix="libmproxy/onboarding/templates"
 )
 a.datas += Tree(
-  "./libmproxy/onboarding/static",
+  "../mitmproxy/libmproxy/onboarding/static",
   prefix="libmproxy/onboarding/static"
 )
 a.datas += Tree(
-    "../venv.mitmproxy/lib/python2.7/site-packages/cryptography/hazmat/bindings/openssl/src",
-    prefix = "cryptography/hazmat/bindings/openssl/src"
+    os.path.join(
+        VENV,
+        "lib/python2.7/site-packages/certifi",
+    ),
+    prefix = "certifi"
 )
 pyz = PYZ(a.pure)
 exe = EXE(pyz,
diff --git a/release/mitmweb.spec b/release/mitmweb.spec
index 565482e6..21ae2890 100644
--- a/release/mitmweb.spec
+++ b/release/mitmweb.spec
@@ -2,31 +2,36 @@
 
 from glob import glob
 
-a = Analysis(['./mitmweb'],
+VENV = "../release/venv"
+
+a = Analysis(['../mitmproxy/mitmweb'],
              hiddenimports=[],
              hookspath=None,
              runtime_hooks=None,
              excludes=None,
           )
 a.datas = Tree(
-  "./libmproxy/onboarding/templates",
+  "../mitmproxy/libmproxy/onboarding/templates",
   prefix="libmproxy/onboarding/templates"
 )
 a.datas += Tree(
-  "./libmproxy/onboarding/static",
+  "../mitmproxy/libmproxy/onboarding/static",
   prefix="libmproxy/onboarding/static"
 )
 a.datas += Tree(
-  "./libmproxy/web/templates",
+  "../mitmproxy/libmproxy/web/templates",
   prefix="libmproxy/web/templates"
 )
 a.datas += Tree(
-  "./libmproxy/web/static",
+  "../mitmproxy/libmproxy/web/static",
   prefix="libmproxy/web/static"
 )
 a.datas += Tree(
-    "../venv.mitmproxy/lib/python2.7/site-packages/cryptography/hazmat/bindings/openssl/src",
-    prefix = "cryptography/hazmat/bindings/openssl/src"
+    os.path.join(
+        VENV,
+        "lib/python2.7/site-packages/certifi",
+    ),
+    prefix = "certifi"
 )
 pyz = PYZ(a.pure)
 exe = EXE(pyz,
