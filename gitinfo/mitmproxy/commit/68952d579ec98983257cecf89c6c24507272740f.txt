commit 68952d579ec98983257cecf89c6c24507272740f
Author: phil plante <unhappyrobot@gmail.com>
Date:   Thu Jan 24 20:46:50 2013 -0800

    Force flush of file content in dump
    
    The dump file would be end up corrupted sometimes when working with mitmdump in a VM. Â Adding an explicit flush seems to have resolved the file sync issues.

diff --git a/libmproxy/tnetstring.py b/libmproxy/tnetstring.py
index d9be19bc..58519675 100644
--- a/libmproxy/tnetstring.py
+++ b/libmproxy/tnetstring.py
@@ -101,6 +101,7 @@ def dump(value,file,encoding=None):
     the given file.
     """
     file.write(dumps(value,encoding))
+    file.flush()
 
 
 def _rdumpq(q,size,value,encoding=None):
