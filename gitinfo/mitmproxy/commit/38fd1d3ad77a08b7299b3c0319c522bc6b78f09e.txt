commit 38fd1d3ad77a08b7299b3c0319c522bc6b78f09e
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Wed Jul 6 12:14:48 2016 -0700

    fix issue introduced in 72f3b2b

diff --git a/mitmproxy/stateobject.py b/mitmproxy/stateobject.py
index 4074fbbf..5e4ae6e3 100644
--- a/mitmproxy/stateobject.py
+++ b/mitmproxy/stateobject.py
@@ -53,7 +53,7 @@ class StateObject(netlib.basetypes.Serializable):
         state = state.copy()
         for attr, cls in six.iteritems(self._stateobject_attributes):
             val = state.pop(attr)
-            if state.get(attr) is None:
+            if val is None:
                 setattr(self, attr, val)
             else:
                 curr = getattr(self, attr)
