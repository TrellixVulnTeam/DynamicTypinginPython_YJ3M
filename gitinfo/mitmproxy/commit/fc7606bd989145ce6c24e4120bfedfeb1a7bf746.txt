commit fc7606bd989145ce6c24e4120bfedfeb1a7bf746
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Wed Nov 2 08:51:26 2016 +1300

    tests: minor cleanup for tests/mitmproxy/tutils.py

diff --git a/test/mitmproxy/test_proxy.py b/test/mitmproxy/test_proxy.py
index 4ac6c177..ab210e65 100644
--- a/test/mitmproxy/test_proxy.py
+++ b/test/mitmproxy/test_proxy.py
@@ -1,6 +1,7 @@
 from mitmproxy.test import tflow
 import os
 import mock
+import argparse
 from OpenSSL import SSL
 
 from mitmproxy.tools import cmdline
@@ -55,10 +56,21 @@ class TestServerConnection:
         assert "foo" in repr(sc)
 
 
+class MockParser(argparse.ArgumentParser):
+
+    """
+    argparse.ArgumentParser sys.exits() by default.
+    Make it more testable by throwing an exception instead.
+    """
+
+    def error(self, message):
+        raise Exception(message)
+
+
 class TestProcessProxyOptions:
 
     def p(self, *args):
-        parser = tutils.MockParser()
+        parser = MockParser()
         cmdline.common_options(parser)
         args = parser.parse_args(args=args)
         opts = cmdline.get_common_options(args)
diff --git a/test/mitmproxy/tutils.py b/test/mitmproxy/tutils.py
index e3611e27..e95c5ea3 100644
--- a/test/mitmproxy/tutils.py
+++ b/test/mitmproxy/tutils.py
@@ -1,4 +1,3 @@
-import argparse
 import sys
 from contextlib import contextmanager
 from unittest.case import SkipTest
@@ -64,10 +63,6 @@ def tdummyflow(client_conn=True, server_conn=True, err=None):
     return f
 
 
-def get_body_line(last_displayed_body, line_nb):
-    return last_displayed_body.contents()[line_nb + 2]
-
-
 @contextmanager
 def chdir(dir):
     orig_dir = os.getcwd()
@@ -84,17 +79,6 @@ def tmpdir(*args, **kwargs):
     shutil.rmtree(temp_workdir)
 
 
-class MockParser(argparse.ArgumentParser):
-
-    """
-    argparse.ArgumentParser sys.exits() by default.
-    Make it more testable by throwing an exception instead.
-    """
-
-    def error(self, message):
-        raise Exception(message)
-
-
 raises = mitmproxy.test.tutils.raises
 
 
