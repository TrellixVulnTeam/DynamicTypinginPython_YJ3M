commit 2a5164351f0f5e32106ed3c18d0bf1711c4bb147
Author: naivekun <naivekun0817@gmail.com>
Date:   Sat Feb 29 00:27:06 2020 +0800

    extend tests for headers.replace()

diff --git a/test/mitmproxy/net/http/test_headers.py b/test/mitmproxy/net/http/test_headers.py
index 8fc8b027..eb065fec 100644
--- a/test/mitmproxy/net/http/test_headers.py
+++ b/test/mitmproxy/net/http/test_headers.py
@@ -88,6 +88,12 @@ class TestHeaders:
         headers = Headers(Host="foobarfoo.com", Accept="foo/bar")
         replacements = headers.replace("foo", "bar", count=1)
         assert replacements == 1
+        assert headers["Host"] == "barbarfoo.com"
+        assert headers["Accept"] == "foo/bar"
+        replacements = headers.replace("foo", "bar", count=2)
+        assert replacements == 2
+        assert headers["Host"] == "barbarbar.com"
+        assert headers["Accept"] == "bar/bar"
 
 
 def test_parse_content_type():
