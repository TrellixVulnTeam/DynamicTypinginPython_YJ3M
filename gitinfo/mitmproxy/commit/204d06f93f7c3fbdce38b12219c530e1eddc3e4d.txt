commit 204d06f93f7c3fbdce38b12219c530e1eddc3e4d
Author: Ujjwal Verma <ujjwalverma1111@gmail.com>
Date:   Wed May 17 11:05:49 2017 +0530

    Increased xml_html contentview coverage

diff --git a/test/mitmproxy/contentviews/test_xml_html.py b/test/mitmproxy/contentviews/test_xml_html.py
index 2b0aee4d..8148fd4c 100644
--- a/test/mitmproxy/contentviews/test_xml_html.py
+++ b/test/mitmproxy/contentviews/test_xml_html.py
@@ -11,6 +11,13 @@ def test_simple():
     v = full_eval(xml_html.ViewXmlHtml())
     assert v(b"foo") == ('XML', [[('text', 'foo')]])
     assert v(b"<html></html>") == ('HTML', [[('text', '<html></html>')]])
+    assert v(b"<>") == ('XML', [[('text', '<>')]])
+    assert v(b"<p") == ('XML', [[('text', '<p')]])
+
+    with open(data.path("simple.html")) as f:
+        input = f.read()
+    tokens = xml_html.tokenize(input)
+    assert str(next(tokens)) == "Tag(<!DOCTYPE html>)"
 
 
 @pytest.mark.parametrize("filename", [
@@ -18,6 +25,7 @@ def test_simple():
     "cdata.xml",
     "comment.xml",
     "inline.html",
+    "test.html"
 ])
 def test_format_xml(filename):
     path = data.path(filename)
diff --git a/test/mitmproxy/contentviews/test_xml_html_data/test-formatted.html b/test/mitmproxy/contentviews/test_xml_html_data/test-formatted.html
new file mode 100644
index 00000000..0eb60004
--- /dev/null
+++ b/test/mitmproxy/contentviews/test_xml_html_data/test-formatted.html
@@ -0,0 +1,44 @@
+<!DOCTYPE html>
+<html lang="en">
+<head>
+  <meta charset="UTF-8">
+  <title>Title</title>
+</head>
+<body>
+  <p>
+    Lorem ipsum dolor
+    <p>
+      sit amet, consectetur
+      <p>
+        adipiscing elit, sed
+        <p>
+          do eiusmod tempor
+          <p>
+            incididunt ut
+            <p>
+              labore et dolore
+              <p>
+                magna aliqua.
+                <p>
+                  Ut enim ad minim
+                  <p>
+                    veniam, quis nostrud
+                    <p>
+                      exercitation
+                      <p>
+                        ullamco laboris
+                        <p>
+                          nisi ut aliquip ex ea
+                          <p>
+                            commodo consequat.
+                            <p>
+                              Duis aute irure
+                              <p>
+                              dolor in reprehenderit
+                              <p>
+                              in voluptate velit
+                              <p>
+                              esse cillum dolore
+                              <p>eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
+</body>
+</html>
diff --git a/test/mitmproxy/contentviews/test_xml_html_data/test.html b/test/mitmproxy/contentviews/test_xml_html_data/test.html
new file mode 100644
index 00000000..e74ac314
--- /dev/null
+++ b/test/mitmproxy/contentviews/test_xml_html_data/test.html
@@ -0,0 +1,14 @@
+<!DOCTYPE html>
+<html lang="en">
+<head>
+    <meta charset="UTF-8">
+    <title>Title</title>
+</head>
+<body>
+<p>Lorem ipsum dolor<p>sit amet, consectetur <p>adipiscing elit, sed<p>do eiusmod tempor<p> incididunt ut<p> labore et dolore<p> magna aliqua.
+        <p>Ut enim ad minim <p>veniam, quis nostrud <p>exercitation <p>ullamco laboris <p>
+        nisi ut aliquip ex ea <p>commodo consequat.<p>Duis aute irure <p>dolor in reprehenderit <p>in voluptate velit<p> esse cillum dolore <p>eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
+
+
+</body>
+</html>
\ No newline at end of file
