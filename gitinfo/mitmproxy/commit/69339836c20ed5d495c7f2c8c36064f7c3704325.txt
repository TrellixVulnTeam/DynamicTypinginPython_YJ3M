commit 69339836c20ed5d495c7f2c8c36064f7c3704325
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sun Feb 24 15:36:35 2013 +1300

    Adapt to netlib API changes.

diff --git a/libpathod/pathoc.py b/libpathod/pathoc.py
index ae9edaf0..0a3e8d06 100644
--- a/libpathod/pathoc.py
+++ b/libpathod/pathoc.py
@@ -35,7 +35,7 @@ class Pathoc(tcp.TCPClient):
             self.http_connect(connect_to, self.wfile, self.rfile)
         if self.ssl:
             try:
-                self.convert_to_ssl(sni=self.sni, clientcert=self.clientcert)
+                self.convert_to_ssl(sni=self.sni, cert=self.clientcert)
             except tcp.NetLibError, v:
                 raise PathocError(str(v))
 
diff --git a/test/test_pathod.py b/test/test_pathod.py
index 7f3edb63..412d1031 100644
--- a/test/test_pathod.py
+++ b/test/test_pathod.py
@@ -39,7 +39,7 @@ class TestTimeout(tutils.DaemonTests):
     def test_noweb(self):
         # FIXME: Add float values to spec language, reduce test timeout to
         # increase test performance
-        tutils.raises("blank server response", self.pathoc, "get:/:p1,1")
+        tutils.raises("server disconnect", self.pathoc, "get:/:p1,1")
         assert self.d.last_log()["type"] == "timeout"
 
 
