commit 7c72776b2d1edc3453f536d4cb761faf4b2b71aa
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Thu Apr 16 14:09:40 2020 +0200

    include full client certificate chain
    
    Testing this requires quite a bit of effort, so it makes sense to not waste any effort here and only do it for the sans-io implementation.

diff --git a/mitmproxy/net/tls.py b/mitmproxy/net/tls.py
index d8e943d3..4c0f1d6b 100644
--- a/mitmproxy/net/tls.py
+++ b/mitmproxy/net/tls.py
@@ -297,7 +297,7 @@ def create_client_context(
     if cert:
         try:
             context.use_privatekey_file(cert)
-            context.use_certificate_file(cert)
+            context.use_certificate_chain_file(cert)
         except SSL.Error as v:
             raise exceptions.TlsException("SSL client certificate error: %s" % str(v))
     return context
