commit 5e2a80fba1589604f7f310ea143ff24ea2dd0aa9
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Mon Dec 12 12:18:33 2016 +1300

    Minor fixes

diff --git a/mitmproxy/tools/console/master.py b/mitmproxy/tools/console/master.py
index 536dc03d..d8355324 100644
--- a/mitmproxy/tools/console/master.py
+++ b/mitmproxy/tools/console/master.py
@@ -386,11 +386,10 @@ class ConsoleMaster(master.Master):
         )
 
     def _write_flows(self, path, flows):
-        f = open(path, "wb")
-        fw = io.FlowWriter(f)
-        for i in flows:
-            fw.add(i)
-        f.close()
+        with open(path, "wb") as f:
+            fw = io.FlowWriter(f)
+            for i in flows:
+                fw.add(i)
 
     def save_one_flow(self, path, flow):
         return self._write_flows(path, [flow])
