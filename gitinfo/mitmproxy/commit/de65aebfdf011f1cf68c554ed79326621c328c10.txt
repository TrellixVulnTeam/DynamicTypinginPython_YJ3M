commit de65aebfdf011f1cf68c554ed79326621c328c10
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Sat Sep 24 18:28:30 2016 -0700

    fix tests

diff --git a/mitmproxy/dump.py b/mitmproxy/dump.py
index 9c40ff2d..3d725ca1 100644
--- a/mitmproxy/dump.py
+++ b/mitmproxy/dump.py
@@ -48,7 +48,7 @@ class DumpMaster(flow.FlowMaster):
         self.options = self.options  # type: Options
         self.set_stream_large_bodies(options.stream_large_bodies)
 
-        if not self.options.no_server:
+        if not self.options.no_server and server:
             print("Proxy server listening at http://{}".format(server.address))
 
         if self.server and self.options.http2 and not tcp.HAS_ALPN:  # pragma: no cover
