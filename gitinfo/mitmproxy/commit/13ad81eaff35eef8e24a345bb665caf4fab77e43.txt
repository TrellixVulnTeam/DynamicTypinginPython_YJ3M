commit 13ad81eaff35eef8e24a345bb665caf4fab77e43
Author: Pierre Gordon <pierregordon@protonmail.com>
Date:   Tue Apr 9 15:23:07 2019 -0500

    Remove the confdir argument
    
    Closes #3266

diff --git a/mitmproxy/tools/_main.py b/mitmproxy/tools/_main.py
index f1c763b2..b95d73ab 100644
--- a/mitmproxy/tools/_main.py
+++ b/mitmproxy/tools/_main.py
@@ -87,7 +87,7 @@ def run(
         arg_check.check()
         sys.exit(1)
     try:
-        opts.confdir = args.confdir
+        opts.set(*args.setoptions, defer=True)
         optmanager.load_paths(
             opts,
             os.path.join(opts.confdir, OPTIONS_FILE_NAME),
@@ -110,7 +110,6 @@ def run(
         if args.commands:
             master.commands.dump()
             sys.exit(0)
-        opts.set(*args.setoptions, defer=True)
         if extra:
             opts.update(**extra(args))
 
diff --git a/mitmproxy/tools/cmdline.py b/mitmproxy/tools/cmdline.py
index ad934ca2..a7820f76 100644
--- a/mitmproxy/tools/cmdline.py
+++ b/mitmproxy/tools/cmdline.py
@@ -20,12 +20,6 @@ def common_options(parser, opts):
         action='store_true',
         help="Show all commands and their signatures",
     )
-    parser.add_argument(
-        "--confdir",
-        type=str, dest="confdir", default=core.CONF_DIR,
-        metavar="PATH",
-        help="Path to the mitmproxy config directory"
-    )
     parser.add_argument(
         "--set",
         type=str, dest="setoptions", default=[],
