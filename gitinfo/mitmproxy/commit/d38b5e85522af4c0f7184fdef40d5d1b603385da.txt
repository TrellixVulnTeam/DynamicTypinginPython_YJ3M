commit d38b5e85522af4c0f7184fdef40d5d1b603385da
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Thu Jan 4 14:57:17 2018 +0100

    do not add leading zeroes to .dev version part.
    
    wheel normalizes to no leading zeroes, and we don't want to special-case
    that.

diff --git a/mitmproxy/version.py b/mitmproxy/version.py
index 3073c3d3..44ec32d4 100644
--- a/mitmproxy/version.py
+++ b/mitmproxy/version.py
@@ -48,7 +48,7 @@ def get_version(dev: bool = False, build: bool = False, refresh: bool = False) -
 
             # Add suffix for non-tagged releases
             if tag_dist > 0:
-                mitmproxy_version += ".dev{tag_dist:04}".format(tag_dist=tag_dist)
+                mitmproxy_version += ".dev{tag_dist}".format(tag_dist=tag_dist)
                 # The wheel build tag (we use the commit) must start with a digit, so we include "0x"
                 mitmproxy_version += "-0x{commit}".format(commit=commit)
 
diff --git a/test/mitmproxy/test_version.py b/test/mitmproxy/test_version.py
index f8d646dc..6e36ffd8 100644
--- a/test/mitmproxy/test_version.py
+++ b/test/mitmproxy/test_version.py
@@ -27,7 +27,7 @@ def test_get_version():
         assert version.get_version(True, True) == "3.0.0"
 
         m.return_value = b"tag-2-cafecafe"
-        assert version.get_version(True, True) == "3.0.0.dev0002-0xcafecaf"
+        assert version.get_version(True, True) == "3.0.0.dev2-0xcafecaf"
 
         m.side_effect = subprocess.CalledProcessError(-1, 'git describe --tags --long')
         assert version.get_version(True, True) == "3.0.0"
