commit 32957976f512ba0af75bae54670c0eb6b0e5456c
Author: Matthew Shao <me@matshao.com>
Date:   Tue Aug 8 22:33:41 2017 +0800

    [web] Remove activeFetches and onMessage in StaticBackend.

diff --git a/web/src/js/backends/static.js b/web/src/js/backends/static.js
index 676468ce..1de6b294 100644
--- a/web/src/js/backends/static.js
+++ b/web/src/js/backends/static.js
@@ -21,34 +21,16 @@ export default class StaticBackend {
    }
 
    fetchData(resource) {
-       let queue = []
-       this.activeFetches[resource] = queue
        fetchApi(`/${resource}`)
            .then(res => res.json())
            .then(json => {
-               if (this.activeFetches[resource] === queue)
-                   this.receive(resource, json)
+               this.receive(resource, json)
            })
    }
 
-   onMessage(msg) {
-       if (msg.cmd === CMD_RESET) {
-           return this.fetchData(msg.resource)
-       }
-       if (msg.resource in this.activeFetches) {
-           this.activeFetches[msg.resource].push(msg)
-       } else {
-           let type = `${msg.resource}_${msg.cmd}`.toUpperCase()
-           this.store.dispatch({ type, ...msg})
-       }
-   }
-
    receive(resource, data) {
        let type = `${resource}_RECEIVE`.toUpperCase()
        this.store.dispatch({ type, cmd: "receive", resource, data })
-       let queue = this.activeFetches[resource]
-       delete this.activeFetches[resource]
-       queue.forEach(msg => this.onMessage(msg))
    }
 
 }
