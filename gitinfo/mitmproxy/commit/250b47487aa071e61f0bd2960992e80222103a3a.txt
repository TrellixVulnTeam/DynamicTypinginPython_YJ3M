commit 250b47487aa071e61f0bd2960992e80222103a3a
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sat Jun 11 09:34:40 2016 +1200

    tox: Pull Py3 test list out into an environment variable
    
    Suggestion from @resam

diff --git a/tox.ini b/tox.ini
index 85b3429e..ffd78359 100644
--- a/tox.ini
+++ b/tox.ini
@@ -6,6 +6,8 @@ deps =
   -rrequirements.txt
   codecov>=2.0.5
 passenv = CI TRAVIS_BUILD_ID TRAVIS TRAVIS_BRANCH TRAVIS_JOB_NUMBER TRAVIS_PULL_REQUEST TRAVIS_JOB_ID TRAVIS_REPO_SLUG TRAVIS_COMMIT
+setenv =
+    PY3TESTS =  test/netlib test/mitmproxy/script test/pathod/test_utils.py test/pathod/test_log.py test/pathod/test_language_generators.py test/pathod/test_language_writer.py test/pathod/test_language_base.py test/pathod/test_language_http.py test/pathod/test_language_websocket.py test/pathod/test_language_http2.py
 
 [testenv:py27]
 commands =
@@ -15,7 +17,7 @@ commands =
 # remove bash & pipe & grep hack after cryptography ships with openssl 1.1.0
 whitelist_externals = bash
 commands =
-  bash -c 'set -o pipefail ; py.test -n 8 --color=yes --timeout 60 test/netlib test/mitmproxy/script test/pathod/test_utils.py test/pathod/test_log.py test/pathod/test_language_generators.py test/pathod/test_language_writer.py test/pathod/test_language_base.py test/pathod/test_language_http.py test/pathod/test_language_websocket.py test/pathod/test_language_http2.py 2>&1 | grep -v Cryptography_locking_cb'
+  bash -c 'set -o pipefail ; py.test -n 8 --color=yes --timeout 60 {env:PY3TESTS:} 2>&1 | grep -v Cryptography_locking_cb'
 
 [testenv:py27-ci]
 commands =
@@ -26,7 +28,7 @@ commands =
 # remove bash & pipe & grep hack after cryptography ships with openssl 1.1.0
 whitelist_externals = bash
 commands =
-  bash -c 'set -o pipefail ; py.test --cov netlib --cov mitmproxy --cov pathod --color=yes --timeout 60 test/netlib test/mitmproxy/script test/pathod/test_utils.py test/pathod/test_log.py test/pathod/test_language_generators.py test/pathod/test_language_writer.py test/pathod/test_language_base.py test/pathod/test_language_http.py test/pathod/test_language_websocket.py test/pathod/test_language_http2.py 2>&1 | grep -v Cryptography_locking_cb'
+  bash -c 'set -o pipefail ; py.test --cov netlib --cov mitmproxy --cov pathod --color=yes --timeout 60 {env:PY3TESTS:} 2>&1 | grep -v Cryptography_locking_cb'
   codecov -e TOXENV
 
 [testenv:docs]
