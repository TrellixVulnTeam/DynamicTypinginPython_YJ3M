commit b7a2fc85537dca60fb18d25965289d876bd3bd38
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Thu Apr 30 08:41:13 2015 +1200

    testing: http read_request corner case

diff --git a/test/test_http.py b/test/test_http.py
index 962eb9cb..f1a31b93 100644
--- a/test/test_http.py
+++ b/test/test_http.py
@@ -440,6 +440,11 @@ class TestReadRequest():
             self.tst,
             "get / HTTP/1.1\r\nfoo"
         )
+        tutils.raises(
+            tcp.NetLibDisconnect,
+            self.tst,
+            "\r\n"
+        )
 
     def test_asterisk_form_in(self):
         v = self.tst("OPTIONS * HTTP/1.1")
