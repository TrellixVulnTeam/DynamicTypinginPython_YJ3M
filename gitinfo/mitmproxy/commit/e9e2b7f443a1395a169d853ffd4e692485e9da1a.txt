commit e9e2b7f443a1395a169d853ffd4e692485e9da1a
Author: Matthew Shao <me@matshao.com>
Date:   Mon Aug 13 15:17:57 2018 +0800

    [web] Fixes #3228:API endpoint error

diff --git a/web/src/js/__tests__/ducks/flowsSpec.js b/web/src/js/__tests__/ducks/flowsSpec.js
index d749d9e1..2bc5b38e 100644
--- a/web/src/js/__tests__/ducks/flowsSpec.js
+++ b/web/src/js/__tests__/ducks/flowsSpec.js
@@ -159,7 +159,7 @@ describe('flows actions', () => {
         store.dispatch(flowActions.uploadContent(tflow, 'foo', 'foo'))
         // window.Blob's lastModified is always the current time,
         // which causes flaky tests on comparison.
-        expect(fetchApi).toBeCalledWith('/flows/1/foo/content', { method: 'POST', body: expect.anything()})
+        expect(fetchApi).toBeCalledWith('/flows/1/foo/content.data', { method: 'POST', body: expect.anything()})
     })
 
     it('should handle clear action', () => {
diff --git a/web/src/js/ducks/flows.js b/web/src/js/ducks/flows.js
index 523ec396..841feeba 100644
--- a/web/src/js/ducks/flows.js
+++ b/web/src/js/ducks/flows.js
@@ -209,7 +209,7 @@ export function uploadContent(flow, file, type) {
     const body = new FormData()
     file       = new window.Blob([file], { type: 'plain/text' })
     body.append('file', file)
-    return dispatch => fetchApi(`/flows/${flow.id}/${type}/content`, { method: 'POST', body })
+    return dispatch => fetchApi(`/flows/${flow.id}/${type}/content.data`, { method: 'POST', body })
 }
 
 
