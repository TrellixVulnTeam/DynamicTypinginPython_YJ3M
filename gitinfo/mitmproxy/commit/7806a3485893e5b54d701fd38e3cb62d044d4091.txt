commit 7806a3485893e5b54d701fd38e3cb62d044d4091
Author: Vane11ope <Vane11opeSchw33tz@gmail.com>
Date:   Thu Jul 2 09:46:24 2020 +0900

    List was not cycled right for tab autocompletion

diff --git a/mitmproxy/tools/console/commander/commander.py b/mitmproxy/tools/console/commander/commander.py
index 0feae28e..9d2ccb64 100644
--- a/mitmproxy/tools/console/commander/commander.py
+++ b/mitmproxy/tools/console/commander/commander.py
@@ -28,15 +28,17 @@ class ListCompleter(Completer):
             if o.startswith(start):
                 self.options.append(o)
         self.options.sort()
-        self.offset = 0
+        self.pos = None
 
     def cycle(self, forward: bool = True) -> str:
         if not self.options:
             return self.start
-        ret = self.options[self.offset]
-        delta = 1 if forward else -1
-        self.offset = (self.offset + delta) % len(self.options)
-        return ret
+        if self.pos is None:
+            self.pos = 0 if forward else len(self.options) - 1
+        else:
+            delta = 1 if forward else -1
+            self.pos = (self.pos + delta) % len(self.options)
+        return self.options[self.pos]
 
 
 class CompletionState(typing.NamedTuple):
