commit 35a914a549858ec64cffe5db3a70efa390696716
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sat Jan 21 14:39:36 2012 +1300

    Fix unit tests broken during previous commit.

diff --git a/test/test_utils.py b/test/test_utils.py
index 8d89ed22..d9546993 100644
--- a/test/test_utils.py
+++ b/test/test_utils.py
@@ -138,12 +138,12 @@ class udummy_cert(libpry.AutoTree):
         d = self.tmpdir()
         cacert = os.path.join(d, "foo/cert.cnf")
         assert utils.dummy_ca(cacert)
-        assert utils.dummy_cert(
+        p = utils.dummy_cert(
             os.path.join(d, "foo"),
             cacert,
             "foo.com"
         )
-        assert os.path.exists(os.path.join(d, "foo", "foo.com.pem"))
+        assert os.path.exists(p)
         # Short-circuit
         assert utils.dummy_cert(
             os.path.join(d, "foo"),
@@ -153,12 +153,12 @@ class udummy_cert(libpry.AutoTree):
 
     def test_no_ca(self):
         d = self.tmpdir()
-        assert utils.dummy_cert(
+        p = utils.dummy_cert(
             d,
             None,
             "foo.com"
         )
-        assert os.path.exists(os.path.join(d, "foo.com.pem"))
+        assert os.path.exists(p)
 
 
 class uLRUCache(libpry.AutoTree):
