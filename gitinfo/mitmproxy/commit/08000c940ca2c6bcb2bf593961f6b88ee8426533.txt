commit 08000c940ca2c6bcb2bf593961f6b88ee8426533
Author: Shadab Zafar <dufferzafar0@gmail.com>
Date:   Fri Jul 22 11:45:14 2016 +0530

    Test marked property while serialization roundtrip

diff --git a/test/mitmproxy/test_flow.py b/test/mitmproxy/test_flow.py
index 36b212a7..74992130 100644
--- a/test/mitmproxy/test_flow.py
+++ b/test/mitmproxy/test_flow.py
@@ -615,6 +615,7 @@ class TestSerialize:
     def test_roundtrip(self):
         sio = io.BytesIO()
         f = tutils.tflow()
+        f.marked = True
         f.request.content = bytes(bytearray(range(256)))
         w = flow.FlowWriter(sio)
         w.add(f)
@@ -627,6 +628,7 @@ class TestSerialize:
         f2 = l[0]
         assert f2.get_state() == f.get_state()
         assert f2.request == f.request
+        assert f2.marked
 
     def test_load_flows(self):
         r = self._treader()
