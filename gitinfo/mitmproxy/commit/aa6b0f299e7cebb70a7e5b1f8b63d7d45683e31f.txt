commit aa6b0f299e7cebb70a7e5b1f8b63d7d45683e31f
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Tue Feb 21 13:00:04 2017 +0100

    minor changes

diff --git a/mitmproxy/net/check.py b/mitmproxy/net/check.py
index ac2b6830..d30c1df6 100644
--- a/mitmproxy/net/check.py
+++ b/mitmproxy/net/check.py
@@ -1,5 +1,5 @@
+import ipaddress
 import re
-from ipaddress import ip_address
 
 # Allow underscore in host name
 _label_valid = re.compile(b"(?!-)[A-Z\d\-_]{1,63}(?<!-)$", re.IGNORECASE)
@@ -7,20 +7,23 @@ _label_valid = re.compile(b"(?!-)[A-Z\d\-_]{1,63}(?<!-)$", re.IGNORECASE)
 
 def is_valid_host(host: bytes) -> bool:
     """
-        Checks if a hostname is valid.
+    Checks if the passed bytes are a valid DNS hostname or an IPv4/IPv6 address.
     """
     try:
         host.decode("idna")
     except ValueError:
         return False
+    # RFC1035: 255 bytes or less.
     if len(host) > 255:
         return False
     if host and host[-1:] == b".":
         host = host[:-1]
+    # DNS hostname
     if all(_label_valid.match(x) for x in host.split(b".")):
         return True
+    # IPv4/IPv6 address
     try:
-        ip_address(host.decode('idna'))
+        ipaddress.ip_address(host.decode('idna'))
         return True
     except ValueError:
         return False
