commit 38ebc8159008ca6b92c4de62e8228493d9b57673
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sat Jun 30 11:24:41 2012 +1200

    Add error when -T is passed on an unsupported platform.

diff --git a/libmproxy/proxy.py b/libmproxy/proxy.py
index 392714ff..af4a83ec 100644
--- a/libmproxy/proxy.py
+++ b/libmproxy/proxy.py
@@ -425,6 +425,8 @@ def process_proxy_options(parser, options):
         parser.errror("Can't set both reverse proxy and transparent proxy.")
 
     if options.transparent_proxy:
+        if not platform.resolver:
+            parser.error("Transparent mode not supported on this platform.")
         trans = dict(
             resolver = platform.resolver,
             sslports = TRANSPARENT_SSL_PORTS
