commit 7fdc0a94db657ecc7a361004f1924fc30a2e4329
Author: Kostya Esmukov <kostya.shift@gmail.com>
Date:   Sat May 14 15:59:21 2016 +0400

    Fixed HTTP2 headers being folded. (#1143) (#1144)

diff --git a/mitmproxy/protocol/http2.py b/mitmproxy/protocol/http2.py
index 702b1b33..140a94d4 100644
--- a/mitmproxy/protocol/http2.py
+++ b/mitmproxy/protocol/http2.py
@@ -56,7 +56,7 @@ class SafeH2Connection(H2Connection):
         with self.lock:
             if is_zombie():  # pragma: no cover
                 return
-            self.send_headers(stream_id, headers)
+            self.send_headers(stream_id, headers.fields)
             self.conn.send(self.data_to_send())
 
     def safe_send_body(self, is_zombie, stream_id, chunks):
