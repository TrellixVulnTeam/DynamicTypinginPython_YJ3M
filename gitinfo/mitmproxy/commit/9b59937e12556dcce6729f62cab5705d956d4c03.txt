commit 9b59937e12556dcce6729f62cab5705d956d4c03
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Mon Jun 5 00:19:19 2017 +0200

    always pretend to have a tty in tests

diff --git a/test/mitmproxy/tools/console/test_master.py b/test/mitmproxy/tools/console/test_master.py
index c87c9e83..7732483f 100644
--- a/test/mitmproxy/tools/console/test_master.py
+++ b/test/mitmproxy/tools/console/test_master.py
@@ -1,3 +1,5 @@
+import pytest
+
 from mitmproxy.test import tflow
 from mitmproxy.test import tutils
 from mitmproxy.tools import console
@@ -6,6 +8,13 @@ from mitmproxy import options
 from mitmproxy.tools.console import common
 from ... import tservers
 import urwid
+from unittest import mock
+
+
+@pytest.fixture(scope="module", autouse=True)
+def definitely_atty():
+    with mock.patch("sys.stdout.isatty", lambda: True):
+        yield
 
 
 def test_format_keyvals():
