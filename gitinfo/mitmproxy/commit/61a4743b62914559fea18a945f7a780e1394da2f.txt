commit 61a4743b62914559fea18a945f7a780e1394da2f
Author: Shadab Zafar <dufferzafar0@gmail.com>
Date:   Mon Feb 8 21:55:07 2016 +0530

    Test exact return value of flow_export.curl_command

diff --git a/test/test_export_flow.py b/test/test_export_flow.py
index 867c209a..d93912c8 100644
--- a/test/test_export_flow.py
+++ b/test/test_export_flow.py
@@ -4,7 +4,6 @@ from . import tutils
 
 req_get = netlib.tutils.treq(
     method='GET',
-    headers=None,
     content=None,
 )
 
@@ -13,10 +12,22 @@ req_post = netlib.tutils.treq(
     headers=None,
 )
 
+req_patch = netlib.tutils.treq(
+    method='PATCH',
+    path=b"/path?query=param",
+)
+
 
-def test_request_simple():
+def test_curl_command():
     flow = tutils.tflow(req=req_get)
-    assert flow_export.curl_command(flow)
+    result = """curl -H 'header:qvalue' 'http://address/path'"""
+    assert flow_export.curl_command(flow) == result
 
     flow = tutils.tflow(req=req_post)
-    assert flow_export.curl_command(flow)
+    result = """curl -X POST 'http://address/path' --data-binary 'content'"""
+    assert flow_export.curl_command(flow) == result
+
+    flow = tutils.tflow(req=req_patch)
+    result = """curl -H 'header:qvalue' -X PATCH 'http://address/path?query=param' --data-binary 'content'"""
+    assert flow_export.curl_command(flow) == result
+
