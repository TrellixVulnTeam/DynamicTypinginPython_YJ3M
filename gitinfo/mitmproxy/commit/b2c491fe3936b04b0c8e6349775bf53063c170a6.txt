commit b2c491fe3936b04b0c8e6349775bf53063c170a6
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sat Jul 21 17:50:21 2012 +1200

    Handle socket disconnects on reads.

diff --git a/netlib/tcp.py b/netlib/tcp.py
index 8771e789..ac4fab95 100644
--- a/netlib/tcp.py
+++ b/netlib/tcp.py
@@ -66,6 +66,8 @@ class FileLike:
                     raise NetLibTimeout
             except socket.timeout:
                 raise NetLibTimeout
+            except socket.error:
+                raise NetLibDisconnect
             if not data:
                 break
             result += data
