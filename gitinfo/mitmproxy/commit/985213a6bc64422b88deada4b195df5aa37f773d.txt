commit 985213a6bc64422b88deada4b195df5aa37f773d
Author: Thomas Kriechbaumer <thomas@kriechbaumer.name>
Date:   Sat Feb 20 18:52:52 2016 +0100

    fix tests

diff --git a/mitmproxy/dump.py b/mitmproxy/dump.py
index d7f076cf..7b4609b4 100644
--- a/mitmproxy/dump.py
+++ b/mitmproxy/dump.py
@@ -73,7 +73,7 @@ class DumpMaster(flow.FlowMaster):
 
         self.set_stream_large_bodies(options.stream_large_bodies)
 
-        if self.server.config.http2 and not tcp.HAS_ALPN:  # pragma: no cover
+        if self.server and self.server.config.http2 and not tcp.HAS_ALPN:  # pragma: no cover
             print("ALPN support missing (OpenSSL 1.0.2+ required)!\n"
                 "HTTP/2 is disabled. Use --no-http2 to silence this warning.",
                 file=sys.stderr)
