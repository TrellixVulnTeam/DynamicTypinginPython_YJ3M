commit ace79afefc7b9d8055a043a3a80d4cb8cee8a59e
Author: Thomas Kriechbaumer <thomas@kriechbaumer.name>
Date:   Sat Sep 28 19:52:18 2019 +0200

    bump more deps

diff --git a/setup.py b/setup.py
index a40df8f7..83981efb 100644
--- a/setup.py
+++ b/setup.py
@@ -81,7 +81,7 @@ setup(
         "tornado>=4.3,<5.2",
         "urwid>=2.0.1,<2.1",
         "wsproto>=0.14.0,<0.15.0",
-        "publicsuffix2~=2.20",
+        "publicsuffix2>=2.20190812,<3",
         "zstandard>=0.11.0,<0.13.0",
     ],
     extras_require={
@@ -90,22 +90,21 @@ setup(
         ],
         'dev': [
             "asynctest>=0.12.0",
-            "flake8>=3.5,<=3.7.8",
+            "flake8>=3.7.8,<3.8",
             "Flask>=1.0,<1.2",
             "mypy>=0.590,<0.591",
             "parver>=0.1,<2.0",
-            "pytest-asyncio>=0.8",
-            "pytest-cov>=2.5.1,<3",
-            "pytest-faulthandler>=1.3.1,<2",
-            "pytest-timeout>=1.2.1,<2",
-            "pytest-xdist>=1.22,<2",
-            "pytest>=4.0,<5",
-            "requests>=2.9.1, <3",
+            "pytest-asyncio>=0.10.0,<0.11",
+            "pytest-cov>=2.7.1,<3",
+            "pytest-timeout>=1.3.3,<2",
+            "pytest-xdist>=1.29,<2",
+            "pytest>=5.1.3,<6",
+            "requests>=2.9.1,<3",
             "tox>=3.5,<3.15",
-            "rstcheck>=2.2, <4.0",
+            "rstcheck>=2.2,<4.0",
         ],
         'examples': [
-            "beautifulsoup4>=4.4.1, <4.7"
+            "beautifulsoup4>=4.4.1,<4.7"
         ]
     }
 )
diff --git a/test/full_coverage_plugin.py b/test/full_coverage_plugin.py
index f99dc7ab..ab1206ea 100644
--- a/test/full_coverage_plugin.py
+++ b/test/full_coverage_plugin.py
@@ -31,8 +31,8 @@ def pytest_configure(config):
     global no_full_cov
 
     enable_coverage = (
-        len(config.getoption('file_or_dir')) == 0 and
-        len(config.getoption('full_cov')) > 0 and
+        config.getoption('file_or_dir') and len(config.getoption('file_or_dir')) == 0 and
+        config.getoption('full_cov') and len(config.getoption('full_cov')) > 0 and
         config.pluginmanager.getplugin("_cov") is not None and
         config.pluginmanager.getplugin("_cov").cov_controller is not None and
         config.pluginmanager.getplugin("_cov").cov_controller.cov is not None
diff --git a/test/individual_coverage.py b/test/individual_coverage.py
index 097b290f..54180eac 100755
--- a/test/individual_coverage.py
+++ b/test/individual_coverage.py
@@ -19,29 +19,29 @@ def run_tests(src, test, fail):
             e = pytest.main([
                 '-qq',
                 '--disable-pytest-warnings',
-                '--no-faulthandler',
                 '--cov', src.replace('.py', '').replace('/', '.'),
                 '--cov-fail-under', '100',
                 '--cov-report', 'term-missing:skip-covered',
+                '-o', 'faulthandler_timeout=0',
                 test
             ])
 
     if e == 0:
         if fail:
-            print("UNEXPECTED SUCCESS:", src, "Please remove this file from setup.cfg tool:individual_coverage/exclude.")
+            print("FAIL DUE TO UNEXPECTED SUCCESS:", src, "Please remove this file from setup.cfg tool:individual_coverage/exclude.")
             e = 42
         else:
-            print("SUCCESS:           ", src)
+            print("Success:", src)
     else:
         if fail:
-            print("IGNORING FAIL:     ", src)
+            print("Ignoring allowed fail:", src)
             e = 0
         else:
             cov = [l for l in stdout.getvalue().split("\n") if (src in l) or ("was never imported" in l)]
             if len(cov) == 1:
-                print("FAIL:              ", cov[0])
+                print("FAIL:", cov[0])
             else:
-                print("FAIL:              ", src, test, stdout.getvalue(), stdout.getvalue())
+                print("FAIL:", src, test, stdout.getvalue(), stdout.getvalue())
                 print(stderr.getvalue())
                 print(stdout.getvalue())
 
diff --git a/tox.ini b/tox.ini
index 8efe04f5..8c8fbaa2 100644
--- a/tox.ini
+++ b/tox.ini
@@ -1,5 +1,5 @@
 [tox]
-envlist = py36, py37, lint
+envlist = py35, py36, py37, lint, individual_coverage, wheeltest, docs
 skipsdist = True
 toxworkdir={env:TOX_WORK_DIR:.tox}
 
