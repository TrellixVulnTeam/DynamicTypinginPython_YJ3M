commit a21c989ccdcb8f96a1b98fd216d9cb3ee1173681
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sun Jul 28 22:40:51 2013 +1200

    Fix startup with no state.
    
    Bug introduced in previous patch.

diff --git a/libmproxy/console/__init__.py b/libmproxy/console/__init__.py
index cf4fc988..69fa6fa8 100644
--- a/libmproxy/console/__init__.py
+++ b/libmproxy/console/__init__.py
@@ -204,7 +204,10 @@ class StatusBar(common.WWrap):
             self.message("")
 
         fc = self.master.state.flow_count()
-        offset = min(self.master.state.focus + 1, fc)
+        if self.master.state.focus is None:
+            offset = 0
+        else:
+            offset = min(self.master.state.focus + 1, fc)
         t = [
             ('heading', ("[%s/%s]"%(offset, fc)).ljust(9))
         ]
