commit a07415783b5181e49156fab1fb8dc893b87db792
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Fri Apr 6 09:22:01 2018 +1200

    Remove socket listen backlog constraint
    
    I have no idea why we did this, but the default value is 128, and setting it
    this low drops connections under conditions our users can reasonably be expeted
    to reach.

diff --git a/mitmproxy/net/tcp.py b/mitmproxy/net/tcp.py
index 62783023..b842f11f 100644
--- a/mitmproxy/net/tcp.py
+++ b/mitmproxy/net/tcp.py
@@ -547,7 +547,6 @@ class Counter:
 
 
 class TCPServer:
-    request_queue_size = 20
 
     def __init__(self, address):
         self.address = address
@@ -580,7 +579,7 @@ class TCPServer:
             self.socket.bind(self.address)
 
         self.address = self.socket.getsockname()
-        self.socket.listen(self.request_queue_size)
+        self.socket.listen()
         self.handler_counter = Counter()
 
     def connection_thread(self, connection, client_address):
