commit 6ae0f07e704caf4e855ffe6aa407b1ab8a666e18
Author: Matthew Shao <me@matshao.com>
Date:   Wed Jul 26 15:32:49 2017 +0800

    [web] Fix conflict.

diff --git a/mitmproxy/optmanager.py b/mitmproxy/optmanager.py
index 83082153..c28ec685 100644
--- a/mitmproxy/optmanager.py
+++ b/mitmproxy/optmanager.py
@@ -512,15 +512,14 @@ def serialize(opts, text, defaults=False):
     return ruamel.yaml.round_trip_dump(data)
 
 
-def save(opts, path=None, defaults=False):
+def save(opts, path, defaults=False):
     """
-        If the path is given, save to path, otherwise return the serialized data.
-
-        If the destination file exists, modify it in-place.
+        Save to path. If the destination file exists, modify it in-place.
 
         Raises OptionsError if the existing data is corrupt.
     """
-    if path and os.path.exists(path) and os.path.isfile(path):
+    path = os.path.expanduser(path)
+    if os.path.exists(path) and os.path.isfile(path):
         with open(path, "rt", encoding="utf8") as f:
             try:
                 data = f.read()
@@ -531,9 +530,5 @@ def save(opts, path=None, defaults=False):
     else:
         data = ""
     data = serialize(opts, data, defaults)
-
-    if path:
-        with open(path, "wt", encoding="utf8") as f:
-            f.write(data)
-    else:
-        return data
+    with open(path, "wt", encoding="utf8") as f:
+        f.write(data)
diff --git a/mitmproxy/tools/web/app.py b/mitmproxy/tools/web/app.py
index f9f44162..6552a3a1 100644
--- a/mitmproxy/tools/web/app.py
+++ b/mitmproxy/tools/web/app.py
@@ -21,7 +21,8 @@ from mitmproxy import optmanager
 from mitmproxy import options
 import mitmproxy.tools.web.master # noqa
 
-CONFIG_PATH = os.path.expanduser(os.path.join(options.CA_DIR, 'config.yaml'))
+CONFIG_PATH = os.path.join(options.CA_DIR, 'config.yaml')
+
 
 def flow_to_json(flow: mitmproxy.flow.Flow) -> dict:
     """
