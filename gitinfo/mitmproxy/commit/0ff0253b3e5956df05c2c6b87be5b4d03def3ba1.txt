commit 0ff0253b3e5956df05c2c6b87be5b4d03def3ba1
Author: Aldo Cortesi <aldo@corte.si>
Date:   Fri Apr 28 12:15:28 2017 +1200

    console: save flows to command

diff --git a/mitmproxy/tools/console/flowlist.py b/mitmproxy/tools/console/flowlist.py
index c4de1042..a930a8e5 100644
--- a/mitmproxy/tools/console/flowlist.py
+++ b/mitmproxy/tools/console/flowlist.py
@@ -133,18 +133,6 @@ class FlowItem(urwid.WidgetWrap):
     def selectable(self):
         return True
 
-    def save_flows_prompt(self, k):
-        if k == "l":
-            signals.status_prompt_path.send(
-                prompt = "Save listed flows to",
-                callback = self.master.save_flows
-            )
-        else:
-            signals.status_prompt_path.send(
-                prompt = "Save this flow to",
-                callback = self.master.save_one_flow,
-                args = (self.flow,)
-            )
 
     def server_replay_prompt(self, k):
         a = self.master.addons.get("serverplayback")
@@ -217,16 +205,6 @@ class FlowItem(urwid.WidgetWrap):
             self.flow.revert()
             signals.flowlist_change.send(self)
             signals.status_message.send(message="Reverted.")
-        elif key == "w":
-            signals.status_prompt_onekey.send(
-                self,
-                prompt = "Save",
-                keys = (
-                    ("listed flows", "l"),
-                    ("this flow", "t"),
-                ),
-                callback = self.save_flows_prompt,
-            )
         elif key == "X":
             if self.flow.killable:
                 self.flow.kill()
diff --git a/mitmproxy/tools/console/master.py b/mitmproxy/tools/console/master.py
index d2339060..00cd06fe 100644
--- a/mitmproxy/tools/console/master.py
+++ b/mitmproxy/tools/console/master.py
@@ -144,6 +144,7 @@ def default_keymap(km):
     km.add("v", "set console_order_reversed=toggle", context="flowlist")
     km.add("f", "console.command 'set view_filter='", context="flowlist")
     km.add("e", "set console_eventlog=toggle", context="flowlist")
+    km.add("w", "console.command 'save.file @shown '", context="flowlist")
 
 
 class ConsoleMaster(master.Master):
