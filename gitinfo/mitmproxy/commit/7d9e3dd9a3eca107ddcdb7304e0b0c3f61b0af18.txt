commit 7d9e3dd9a3eca107ddcdb7304e0b0c3f61b0af18
Author: Nikita Stupin <18281368+nikitastupin@users.noreply.github.com>
Date:   Wed Jul 15 22:36:00 2020 +0300

    Add tests for TCP flow interception

diff --git a/test/mitmproxy/addons/test_intercept.py b/test/mitmproxy/addons/test_intercept.py
index b3d24626..1d10fbc9 100644
--- a/test/mitmproxy/addons/test_intercept.py
+++ b/test/mitmproxy/addons/test_intercept.py
@@ -42,3 +42,13 @@ def test_simple():
         f = tflow.tflow(resp=True)
         tctx.cycle(r, f)
         assert f.intercepted
+
+        tctx.configure(r, intercept_active=False)
+        f = tflow.ttcpflow()
+        tctx.cycle(r, f)
+        assert not f.intercepted
+
+        tctx.configure(r, intercept_active=True)
+        f = tflow.ttcpflow()
+        tctx.cycle(r, f)
+        assert f.intercepted
