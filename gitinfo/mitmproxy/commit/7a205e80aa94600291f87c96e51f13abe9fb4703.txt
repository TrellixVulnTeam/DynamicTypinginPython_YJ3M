commit 7a205e80aa94600291f87c96e51f13abe9fb4703
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Thu Feb 9 14:21:25 2017 +0100

    improve stateobject tests

diff --git a/test/mitmproxy/test_stateobject.py b/test/mitmproxy/test_stateobject.py
index b9ffe7ae..edec92c2 100644
--- a/test/mitmproxy/test_stateobject.py
+++ b/test/mitmproxy/test_stateobject.py
@@ -17,6 +17,9 @@ class Child(StateObject):
         obj.set_state(state)
         return obj
 
+    def __eq__(self, other):
+        return isinstance(other, Child) and self.x == other.x
+
 
 class Container(StateObject):
     def __init__(self):
@@ -60,4 +63,7 @@ def test_container_list():
         "child": None,
         "children": [{"x": 42}, {"x": 44}]
     }
-    assert len(a.copy().children) == 2
+    copy = a.copy()
+    assert len(copy.children) == 2
+    assert copy.children is not a.children
+    assert copy.children[0] is not a.children[0]
