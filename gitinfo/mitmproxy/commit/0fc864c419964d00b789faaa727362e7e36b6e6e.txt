commit 0fc864c419964d00b789faaa727362e7e36b6e6e
Author: Thomas Roth <code@leveldown.de>
Date:   Wed Feb 24 23:32:56 2010 +0100

    Fixes a bug which caused a crash if you've tried to accept a connection which wasn't intercepted.

diff --git a/libmproxy/console.py b/libmproxy/console.py
index 677f8627..fe2fa4b2 100644
--- a/libmproxy/console.py
+++ b/libmproxy/console.py
@@ -540,11 +540,12 @@ class Flow:
         self.intercepting = True
 
     def accept_intercept(self):
-        if not self.request.acked:
-            self.request.ack()
-        elif self.response and not self.response.acked:
-            self.response.ack()
-        self.intercepting = False
+        if self.request:
+            if not self.request.acked:
+                self.request.ack()
+            elif self.response and not self.response.acked:
+                self.response.ack()
+            self.intercepting = False
 
 
 class State:
diff --git a/todo b/todo
index 0362cf35..b949157f 100644
--- a/todo
+++ b/todo
@@ -15,7 +15,6 @@ Future:
 Bugs:
     
     - Exception handling for regular expression compiler in filt.py.
-    - Fix crash cause on undefined request in libmproxy/console.py:543
     - Fix crash on illegal regular expression on libmproxy/filt.py:76
     - In some circumstances, long URLs in list view are line-broken oddly.
     - Termination sometimes hangs.
