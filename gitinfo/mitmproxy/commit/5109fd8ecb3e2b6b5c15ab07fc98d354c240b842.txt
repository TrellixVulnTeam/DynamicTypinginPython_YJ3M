commit 5109fd8ecb3e2b6b5c15ab07fc98d354c240b842
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Thu Nov 3 08:08:34 2016 +1300

    Change antiquated test cipher suites
    
    This breaks Travis, possibly due to OpenSSL version.

diff --git a/test/mitmproxy/net/test_tcp.py b/test/mitmproxy/net/test_tcp.py
index 151cb12b..3238ab2f 100644
--- a/test/mitmproxy/net/test_tcp.py
+++ b/test/mitmproxy/net/test_tcp.py
@@ -380,14 +380,14 @@ class TestSNI(tservers.ServerTestBase):
 class TestServerCipherList(tservers.ServerTestBase):
     handler = ClientCipherListHandler
     ssl = dict(
-        cipher_list='RC4-SHA'
+        cipher_list='AES256-GCM-SHA384'
     )
 
     def test_echo(self):
         c = tcp.TCPClient(("127.0.0.1", self.port))
         with c.connect():
             c.convert_to_ssl(sni="foo.com")
-            assert c.rfile.readline() == b"['RC4-SHA']"
+            assert c.rfile.readline() == b"['AES256-GCM-SHA384']"
 
 
 class TestServerCurrentCipher(tservers.ServerTestBase):
@@ -400,14 +400,14 @@ class TestServerCurrentCipher(tservers.ServerTestBase):
             self.wfile.flush()
 
     ssl = dict(
-        cipher_list='RC4-SHA'
+        cipher_list='AES256-GCM-SHA384'
     )
 
     def test_echo(self):
         c = tcp.TCPClient(("127.0.0.1", self.port))
         with c.connect():
             c.convert_to_ssl(sni="foo.com")
-            assert b"RC4-SHA" in c.rfile.readline()
+            assert b'AES256-GCM-SHA384' in c.rfile.readline()
 
 
 class TestServerCipherListError(tservers.ServerTestBase):
