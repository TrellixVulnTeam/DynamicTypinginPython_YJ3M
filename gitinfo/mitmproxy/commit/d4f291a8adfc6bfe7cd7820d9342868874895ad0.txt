commit d4f291a8adfc6bfe7cd7820d9342868874895ad0
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Fri Sep 9 10:03:36 2016 +1200

    Fix immediate server replay-related crash in mitmproxy

diff --git a/mitmproxy/console/master.py b/mitmproxy/console/master.py
index a6942ca4..9d2fb78b 100644
--- a/mitmproxy/console/master.py
+++ b/mitmproxy/console/master.py
@@ -248,9 +248,6 @@ class ConsoleMaster(flow.FlowMaster):
         if options.client_replay:
             self.client_playback_path(options.client_replay)
 
-        if options.server_replay:
-            self.server_playback_path(options.server_replay)
-
         self.view_stack = []
 
         if options.app:
diff --git a/mitmproxy/console/statusbar.py b/mitmproxy/console/statusbar.py
index 43d68d51..a099e744 100644
--- a/mitmproxy/console/statusbar.py
+++ b/mitmproxy/console/statusbar.py
@@ -148,13 +148,13 @@ class StatusBar(urwid.WidgetWrap):
             r.append("[")
             r.append(("heading_key", "cplayback"))
             r.append(":%s to go]" % self.master.client_playback.count())
-        if self.master.server_playback:
+        if self.master.options.server_replay:
             r.append("[")
             r.append(("heading_key", "splayback"))
             if self.master.options.nopop:
-                r.append(":%s in file]" % self.master.server_playback.count())
+                r.append(":%s in file]" % self.master.options.server_replay.count())
             else:
-                r.append(":%s to go]" % self.master.server_playback.count())
+                r.append(":%s to go]" % self.master.options.server_replay.count())
         if self.master.options.ignore_hosts:
             r.append("[")
             r.append(("heading_key", "I"))
