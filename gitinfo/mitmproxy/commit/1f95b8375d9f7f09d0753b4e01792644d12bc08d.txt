commit 1f95b8375d9f7f09d0753b4e01792644d12bc08d
Author: Thomas Kriechbaumer <thomas@kriechbaumer.name>
Date:   Sun Feb 25 17:49:54 2018 +0100

    improve release instructions

diff --git a/release/README.md b/release/README.md
index 67a23c02..b2f97aab 100644
--- a/release/README.md
+++ b/release/README.md
@@ -16,7 +16,11 @@ Make sure run all these steps on the correct branch you want to create a new rel
 - Attach all files from the new release folder on https://snapshots.mitmproxy.org
 
 ## PyPi
-- Upload wheel to pypi: `twine upload <mitmproxy-...-.whl`
+- `tox -e rtool -- upload-release`
+
+## Homebrew
+- `tox -e rtool -- homebrew-pr`
+- The Homebrew maintainers are typically very fast and detect our new relese within a day, but we can be a nice citizen and create the PR ourself.
 
 ## Docker
 - Update docker-releases repo
@@ -36,11 +40,6 @@ Make sure run all these steps on the correct branch you want to create a new rel
   - `git push --tags` to push the new tag
   - Check the build details page again
 
-## Homebrew
-- The Homebrew maintainers are typically very fast and detect our new relese within a day
-- If you want to speed this up:
-  - `brew bump-formula-pr --url=https://github.com/mitmproxy/mitmproxy/archive/v3.0.2.tar.gz mitmproxy`
-
 ## Prepare for next release
 
  - Last but not least, bump the version on master in [https://github.com/mitmproxy/mitmproxy/blob/master/mitmproxy/version.py](mitmproxy/version.py) for major releases.
diff --git a/release/rtool.py b/release/rtool.py
index 9050107e..171ce6b0 100755
--- a/release/rtool.py
+++ b/release/rtool.py
@@ -286,6 +286,20 @@ def upload_release(username, password, repository):
     ])
 
 
+@cli.command("homebrew-pr")
+def homebrew_pr():
+    """
+    Create a new Homebrew PR
+    """
+    print("Creating a new PR with Homebrew...")
+    subprocess.check_call([
+        "brew",
+        "bump-formula-pr",
+        "--url", "https://github.com/mitmproxy/mitmproxy/archive/v{}".format(get_version()),
+        "mitmproxy",
+    ])
+
+
 @cli.command("upload-snapshot")
 @click.option("--host", envvar="SNAPSHOT_HOST", prompt=True)
 @click.option("--port", envvar="SNAPSHOT_PORT", type=int, default=22)
