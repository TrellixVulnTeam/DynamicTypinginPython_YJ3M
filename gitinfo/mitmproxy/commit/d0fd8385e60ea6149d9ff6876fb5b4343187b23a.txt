commit d0fd8385e60ea6149d9ff6876fb5b4343187b23a
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Wed Jun 27 12:11:55 2012 +1200

    Fix termiantion error in file read.

diff --git a/netlib/tcp.py b/netlib/tcp.py
index 9b1fc65e..0ab7f0e4 100644
--- a/netlib/tcp.py
+++ b/netlib/tcp.py
@@ -17,7 +17,7 @@ class FileLike:
 
     def read(self, length):
         result = ''
-        while len(result) < length:
+        while length > 0:
             try:
                 data = self.o.read(length)
             except (SSL.ZeroReturnError, SSL.SysCallError):
@@ -25,6 +25,7 @@ class FileLike:
             if not data:
                 break
             result += data
+            length -= len(data)
         return result
 
     def write(self, v):
