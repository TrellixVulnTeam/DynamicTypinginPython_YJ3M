commit ecf076cb2413bd71083841fee1b522131a9dea40
Author: Vane11ope <Vane11opeSchw33tz@gmail.com>
Date:   Sun Jul 5 10:40:48 2020 +0900

    Add tests for list completer

diff --git a/test/mitmproxy/tools/console/test_commander.py b/test/mitmproxy/tools/console/test_commander.py
index 839f81e5..c096325b 100644
--- a/test/mitmproxy/tools/console/test_commander.py
+++ b/test/mitmproxy/tools/console/test_commander.py
@@ -31,23 +31,35 @@ class TestListCompleter:
             [
                 "",
                 ["a", "b", "c"],
-                ["a", "b", "c", "a"]
+                ["a", "b", "c", "a"],
+                ["c", "b", "a", "c"],
+                ["a", "c", "a", "c"]
             ],
             [
                 "xxx",
                 ["a", "b", "c"],
+                ["xxx", "xxx", "xxx"],
+                ["xxx", "xxx", "xxx"],
                 ["xxx", "xxx", "xxx"]
             ],
             [
                 "b",
                 ["a", "b", "ba", "bb", "c"],
-                ["b", "ba", "bb", "b"]
+                ["b", "ba", "bb", "b"],
+                ["bb", "ba", "b", "bb"],
+                ["b", "bb", "b", "bb"]
             ],
         ]
-        for start, opts, cycle in tests:
+        for start, opts, cycle, cycle_reverse, cycle_mix in tests:
             c = commander.ListCompleter(start, opts)
             for expected in cycle:
                 assert c.cycle() == expected
+            for expected in cycle_reverse:
+                assert c.cycle(False) == expected
+            forward = True
+            for expected in cycle_mix:
+                assert c.cycle(forward) == expected
+                forward = not forward
 
 
 class TestCommandEdit:
