commit bbfdc7b7de21434cf14b639fd9e9d65c55cff530
Author: Rune Halvorsen <runefh@gmail.com>
Date:   Sat Feb 25 00:43:00 2012 +0100

    Use shlex to parse EDITOR.

diff --git a/libmproxy/console/__init__.py b/libmproxy/console/__init__.py
index 2039d7b1..5b2ec0cd 100644
--- a/libmproxy/console/__init__.py
+++ b/libmproxy/console/__init__.py
@@ -13,7 +13,7 @@
 # You should have received a copy of the GNU General Public License
 # along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
-import mailcap, mimetypes, tempfile, os, subprocess, glob, time
+import mailcap, mimetypes, tempfile, os, subprocess, glob, time, shlex
 import os.path, sys
 import urwid
 from .. import controller, utils, flow, version
@@ -433,7 +433,8 @@ class ConsoleMaster(flow.FlowMaster):
         #If no EDITOR is set, assume 'vi'
         if not c:
             c = "vi"
-        cmd = [c, name]
+        cmd = shlex.split(c)
+        cmd.append(name)
         self.ui.stop()
         try:
             subprocess.call(cmd)
