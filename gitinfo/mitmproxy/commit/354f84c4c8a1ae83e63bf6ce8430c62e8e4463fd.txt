commit 354f84c4c8a1ae83e63bf6ce8430c62e8e4463fd
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Tue Nov 24 19:05:37 2015 +0100

    skip timing tests on appveyor

diff --git a/test/test_proxy.py b/test/test_proxy.py
index 57ad606d..b3e7258a 100644
--- a/test/test_proxy.py
+++ b/test/test_proxy.py
@@ -148,7 +148,7 @@ class TestProcessProxyOptions:
 
 class TestProxyServer:
     # binding to 0.0.0.0:1 works without special permissions on Windows
-    @tutils.SkipWindows
+    @tutils.skip_windows
     def test_err(self):
         conf = ProxyConfig(
             port=1
diff --git a/test/test_server.py b/test/test_server.py
index 83b6423a..3a4a1a7b 100644
--- a/test/test_server.py
+++ b/test/test_server.py
@@ -509,6 +509,7 @@ class TestProxy(tservers.HTTPProxTest):
         assert "host" in f.request.headers
         assert f.response.status_code == 304
 
+    @tutils.skip_appveyor
     def test_response_timestamps(self):
         # test that we notice at least 1 sec delay between timestamps
         # in response object
@@ -519,6 +520,7 @@ class TestProxy(tservers.HTTPProxTest):
         # timestamp_start might fire a bit late, so we play safe and only require 300ms.
         assert 0.3 <= response.timestamp_end - response.timestamp_start
 
+    @tutils.skip_appveyor
     def test_request_timestamps(self):
         # test that we notice a delay between timestamps in request object
         connection = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
@@ -537,7 +539,7 @@ class TestProxy(tservers.HTTPProxTest):
                                 0].request, self.master.state.view[0].response
         assert response.status_code == 304  # sanity test for our low level request
         # timestamp_start might fire a bit late, so we play safe and only require 300ms.
-        assert 0.3 < (request.timestamp_end - request.timestamp_start)
+        assert 0.3 <= request.timestamp_end - request.timestamp_start
 
     def test_request_tcp_setup_timestamp_presence(self):
         # tests that the client_conn a tcp connection has a tcp_setup_timestamp
diff --git a/test/tutils.py b/test/tutils.py
index cc8c407f..8f92b596 100644
--- a/test/tutils.py
+++ b/test/tutils.py
@@ -15,13 +15,24 @@ from libmproxy.models import (
 )
 
 
-def _SkipWindows(*args):
+def _skip_windows(*args):
     raise SkipTest("Skipped on Windows.")
 
 
-def SkipWindows(fn):
+def skip_windows(fn):
     if os.name == "nt":
-        return _SkipWindows
+        return _skip_windows
+    else:
+        return fn
+
+
+def _skip_appveyor(*args):
+    raise SkipTest("Skipped on AppVeyor.")
+
+
+def skip_appveyor(fn):
+    if "APPVEYOR" in os.environ:
+        return _skip_appveyor
     else:
         return fn
 
