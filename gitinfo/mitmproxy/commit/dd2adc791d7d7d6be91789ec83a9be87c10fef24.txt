commit dd2adc791d7d7d6be91789ec83a9be87c10fef24
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Mon Sep 8 18:58:07 2014 +0200

    improve distribution

diff --git a/.travis.yml b/.travis.yml
index 653f0d8c..7c4dca92 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -3,10 +3,7 @@ python:
   - "2.7"
 # command to install dependencies, e.g. pip install -r requirements.txt --use-mirrors
 install: 
-  - "pip install -r requirements.txt --use-mirrors"
-  - "pip install ."
-  - "pip install --upgrade git+https://github.com/mitmproxy/pathod.git"
-  - "pip install -r test/requirements.txt --use-mirrors"
+  - "pip install --src .. -r requirements.txt"
 # command to run tests, e.g. python setup.py test
 script: 
   - "nosetests --with-cov --cov-report term-missing"
diff --git a/requirements.txt b/requirements.txt
index 7b45f7c3..e3ef3a23 100644
--- a/requirements.txt
+++ b/requirements.txt
@@ -1,2 +1,2 @@
-pyasn1>=0.1.7
-pyOpenSSL>=0.14
\ No newline at end of file
+-e git+https://github.com/mitmproxy/pathod.git#egg=pathod
+-e .[dev]
\ No newline at end of file
diff --git a/setup.py b/setup.py
index 80582772..8609662f 100644
--- a/setup.py
+++ b/setup.py
@@ -2,6 +2,7 @@ from distutils.core import setup
 import fnmatch, os.path
 from netlib import version
 
+
 def _fnmatch(name, patternList):
     for i in patternList:
         if fnmatch.fnmatch(name, i):
@@ -65,29 +66,44 @@ def findPackages(path, dataExclude=[]):
     return packages, package_data
 
 
-long_description = file("README.mkd", "rb").read()
+with open("README.mkd", "rb") as f:
+    long_description = f.read()
+
 packages, package_data = findPackages("netlib")
 setup(
-        name = "netlib",
-        version = version.VERSION,
-        description = "A collection of network utilities used by pathod and mitmproxy.",
-        long_description = long_description,
-        author = "Aldo Cortesi",
-        author_email = "aldo@corte.si",
-        url = "http://github.com/mitmproxy/netlib",
-        packages = packages,
-        package_data = package_data,
-        classifiers = [
-            "License :: OSI Approved :: MIT License",
-            "Development Status :: 3 - Alpha",
-            "Operating System :: POSIX",
-            "Programming Language :: Python",
-            "Programming Language :: Python :: 2",
-            "Topic :: Internet",
-            "Topic :: Internet :: WWW/HTTP :: HTTP Servers",
-            "Topic :: Software Development :: Testing",
-            "Topic :: Software Development :: Testing :: Traffic Generation",
-            "Topic :: Internet :: WWW/HTTP",
-        ],
-        install_requires=["pyasn1>0.1.2", "pyopenssl>=0.14", "passlib>=1.6.2"],
+    name="netlib",
+    version=version.VERSION,
+    description="A collection of network utilities used by pathod and mitmproxy.",
+    long_description=long_description,
+    author="Aldo Cortesi",
+    author_email="aldo@corte.si",
+    url="http://github.com/mitmproxy/netlib",
+    packages=packages,
+    package_data=package_data,
+    classifiers=[
+        "License :: OSI Approved :: MIT License",
+        "Development Status :: 3 - Alpha",
+        "Operating System :: POSIX",
+        "Programming Language :: Python",
+        "Programming Language :: Python :: 2",
+        "Topic :: Internet",
+        "Topic :: Internet :: WWW/HTTP",
+        "Topic :: Internet :: WWW/HTTP :: HTTP Servers",
+        "Topic :: Software Development :: Testing",
+        "Topic :: Software Development :: Testing :: Traffic Generation",
+    ],
+    install_requires=[
+        "pyasn1>=0.1.7",
+        "pyOpenSSL>=0.14",
+        "passlib>=1.6.2"
+    ],
+    extras_require={
+        'dev': [
+            "mock>=1.0.1",
+            "nose>=1.3.0",
+            "nose-cov>=1.6",
+            "coveralls>=0.4.1",
+            "pathod>=0.10"
+        ]
+    }
 )
