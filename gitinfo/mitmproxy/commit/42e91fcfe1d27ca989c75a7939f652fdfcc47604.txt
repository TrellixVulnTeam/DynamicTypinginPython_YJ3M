commit 42e91fcfe1d27ca989c75a7939f652fdfcc47604
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Tue May 31 20:32:28 2016 +1200

    http2.frame -> http2.framereader

diff --git a/mitmproxy/protocol/http2.py b/mitmproxy/protocol/http2.py
index ffea7fae..6ca78347 100644
--- a/mitmproxy/protocol/http2.py
+++ b/mitmproxy/protocol/http2.py
@@ -14,7 +14,7 @@ from hyperframe.frame import PriorityFrame
 from netlib.tcp import ssl_read_select
 from netlib.exceptions import HttpException
 from netlib.http import Headers
-from netlib.http.http2 import frame
+from netlib.http.http2 import framereader
 import netlib.http.url
 
 from .base import Layer
@@ -234,7 +234,7 @@ class Http2Layer(Layer):
 
                 with source_conn.h2.lock:
                     try:
-                        raw_frame = b''.join(frame.http2_read_raw_frame(source_conn.rfile))
+                        raw_frame = b''.join(framereader.http2_read_raw_frame(source_conn.rfile))
                     except:
                         # read frame failed: connection closed
                         self._kill_all_streams()
diff --git a/netlib/http/http2/frame.py b/netlib/http/http2/framereader.py
similarity index 100%
rename from netlib/http/http2/frame.py
rename to netlib/http/http2/framereader.py
diff --git a/test/mitmproxy/test_protocol_http2.py b/test/mitmproxy/test_protocol_http2.py
index 5ab42cae..23072260 100644
--- a/test/mitmproxy/test_protocol_http2.py
+++ b/test/mitmproxy/test_protocol_http2.py
@@ -13,7 +13,7 @@ from mitmproxy.cmdline import APP_HOST, APP_PORT
 
 import netlib
 from ..netlib import tservers as netlib_tservers
-from netlib.http.http2 import frame
+from netlib.http.http2 import framereader
 
 from . import tservers
 
@@ -48,7 +48,7 @@ class _Http2ServerBase(netlib_tservers.ServerTestBase):
             done = False
             while not done:
                 try:
-                    raw = b''.join(frame.http2_read_raw_frame(self.rfile))
+                    raw = b''.join(framereader.http2_read_raw_frame(self.rfile))
                     events = h2_conn.receive_data(raw)
                 except:
                     break
@@ -200,7 +200,7 @@ class TestSimple(_Http2TestBase, _Http2ServerBase):
         done = False
         while not done:
             try:
-                events = h2_conn.receive_data(b''.join(frame.http2_read_raw_frame(client.rfile)))
+                events = h2_conn.receive_data(b''.join(framereader.http2_read_raw_frame(client.rfile)))
             except:
                 break
             client.wfile.write(h2_conn.data_to_send())
@@ -270,7 +270,7 @@ class TestWithBodies(_Http2TestBase, _Http2ServerBase):
         done = False
         while not done:
             try:
-                events = h2_conn.receive_data(b''.join(frame.http2_read_raw_frame(client.rfile)))
+                events = h2_conn.receive_data(b''.join(framereader.http2_read_raw_frame(client.rfile)))
             except:
                 break
             client.wfile.write(h2_conn.data_to_send())
@@ -362,7 +362,7 @@ class TestPushPromise(_Http2TestBase, _Http2ServerBase):
         responses = 0
         while not done:
             try:
-                raw = b''.join(frame.http2_read_raw_frame(client.rfile))
+                raw = b''.join(framereader.http2_read_raw_frame(client.rfile))
                 events = h2_conn.receive_data(raw)
             except:
                 break
@@ -412,7 +412,7 @@ class TestPushPromise(_Http2TestBase, _Http2ServerBase):
         responses = 0
         while not done:
             try:
-                events = h2_conn.receive_data(b''.join(frame.http2_read_raw_frame(client.rfile)))
+                events = h2_conn.receive_data(b''.join(framereader.http2_read_raw_frame(client.rfile)))
             except:
                 break
             client.wfile.write(h2_conn.data_to_send())
@@ -479,7 +479,7 @@ class TestConnectionLost(_Http2TestBase, _Http2ServerBase):
         done = False
         while not done:
             try:
-                raw = b''.join(frame.http2_read_raw_frame(client.rfile))
+                raw = b''.join(framereader.http2_read_raw_frame(client.rfile))
                 h2_conn.receive_data(raw)
             except:
                 break
diff --git a/test/netlib/http/http2/test_connections.py b/test/netlib/http/http2/test_connections.py
index be68a28c..27cc30ba 100644
--- a/test/netlib/http/http2/test_connections.py
+++ b/test/netlib/http/http2/test_connections.py
@@ -6,7 +6,7 @@ from netlib import tcp, http
 from netlib.tutils import raises
 from netlib.exceptions import TcpDisconnect
 from netlib.http.http2.connections import HTTP2Protocol, TCPHandler
-from netlib.http.http2 import frame
+from netlib.http.http2 import framereader
 
 from ... import tservers
 
@@ -111,11 +111,11 @@ class TestPerformServerConnectionPreface(tservers.ServerTestBase):
             self.wfile.flush()
 
             # check empty settings frame
-            raw = frame.http2_read_raw_frame(self.rfile)
+            raw = framereader.http2_read_raw_frame(self.rfile)
             assert raw == codecs.decode('00000c040000000000000200000000000300000001', 'hex_codec')
 
             # check settings acknowledgement
-            raw = frame.http2_read_raw_frame(self.rfile)
+            raw = framereader.http2_read_raw_frame(self.rfile)
             assert raw == codecs.decode('000000040100000000', 'hex_codec')
 
             # send settings acknowledgement
