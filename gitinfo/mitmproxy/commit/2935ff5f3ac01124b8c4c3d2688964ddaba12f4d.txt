commit 2935ff5f3ac01124b8c4c3d2688964ddaba12f4d
Author: Matthew Shao <me@matshao.com>
Date:   Mon May 22 08:53:59 2017 +0800

    [web] Set some value as constant, so _tflow.js would not change.

diff --git a/test/mitmproxy/tools/web/test_app.py b/test/mitmproxy/tools/web/test_app.py
index f6072efb..5427b995 100644
--- a/test/mitmproxy/tools/web/test_app.py
+++ b/test/mitmproxy/tools/web/test_app.py
@@ -278,9 +278,15 @@ class TestApp(tornado.testing.AsyncHTTPTestCase):
         ws_client2.close()
 
     def test_generate_tflow_js(self):
-        tflow_json = _json.dumps(
-            app.flow_to_json(tflow.tflow(resp=True, err=True)), indent=4, sort_keys=True
-        )
+        _tflow = app.flow_to_json(tflow.tflow(resp=True, err=True))
+        # Set some value as constant, so that _tflow.js would not change every time.
+        _tflow['client_conn']['id'] = "4a18d1a0-50a1-48dd-9aa6-d45d74282939"
+        _tflow['id'] = "d91165be-ca1f-4612-88a9-c0f8696f3e29"
+        _tflow['error']['timestamp'] = 1495370312.4814785
+        _tflow['response']['timestamp_end'] = 1495370312.4814625
+        _tflow['response']['timestamp_start'] = 1495370312.481462
+        _tflow['server_conn']['id'] = "f087e7b2-6d0a-41a8-a8f0-e1a4761395f8"
+        tflow_json = _json.dumps(_tflow, indent=4, sort_keys=True)
         here = os.path.abspath(os.path.dirname(__file__))
         web_root = os.path.join(here, os.pardir, os.pardir, os.pardir, os.pardir, 'web')
         tflow_path = os.path.join(web_root, 'src/js/__tests__/ducks/_tflow.js')
