commit 9ececa637d69ee3991fbc82f3cd64ae781a86f5d
Author: Thomas Kriechbaumer <thomas@kriechbaumer.name>
Date:   Mon Jun 8 15:28:19 2015 +0200

    http2: add warning for missing ALPN support

diff --git a/libpathod/pathoc.py b/libpathod/pathoc.py
index ba06b2f1..e9bd5f56 100644
--- a/libpathod/pathoc.py
+++ b/libpathod/pathoc.py
@@ -216,6 +216,10 @@ class Pathoc(tcp.TCPClient):
         self.ws_framereader = None
 
         if self.use_http2:
+            if not OpenSSL._util.lib.Cryptography_HAS_ALPN:  # pragma: nocover
+                print >> sys.stderr, "HTTP/2 requires ALPN support. Please use OpenSSL >= 1.0.2."
+                print >> sys.stderr, "Pathoc might not be working as expected without ALPN."
+
             self.protocol = http2.HTTP2Protocol(self)
         else:
             # TODO: create HTTP or Websockets protocol
@@ -259,7 +263,7 @@ class Pathoc(tcp.TCPClient):
             an HTTP CONNECT request.
         """
         if self.use_http2 and not self.ssl:
-            raise ValueError("HTTP2 without SSL is not supported.")
+            raise NotImplementedError("HTTP2 without SSL is not supported.")
 
         tcp.TCPClient.connect(self)
 
