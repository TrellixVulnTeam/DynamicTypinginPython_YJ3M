commit 2beae27541be19c22e15a2c02e8fbee254bb8e6c
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Tue May 5 11:16:29 2015 +1200

    websockets: fix actions on frames

diff --git a/libpathod/language/websockets.py b/libpathod/language/websockets.py
index 4b8a8148..a6674988 100644
--- a/libpathod/language/websockets.py
+++ b/libpathod/language/websockets.py
@@ -152,7 +152,7 @@ class WebsocketFrame(message.Message):
 
     def resolve(self, settings, msg=None):
         return self.__class__(
-            [i.resolve(settings, msg) for i in self.tokens]
+            [i.resolve(settings, self) for i in self.tokens]
         )
 
     def spec(self):
diff --git a/test/test_language_websocket.py b/test/test_language_websocket.py
index e313c591..8abb55aa 100644
--- a/test/test_language_websocket.py
+++ b/test/test_language_websocket.py
@@ -13,6 +13,7 @@ class TestWebsocketFrame:
     def test_values(self):
         specs = [
             "wf",
+            "wf:dr",
             "wf:b'foo'",
             "wf:cbinary",
             "wf:c1",
