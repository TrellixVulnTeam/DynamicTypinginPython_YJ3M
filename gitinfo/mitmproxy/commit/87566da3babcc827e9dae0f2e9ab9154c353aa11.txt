commit 87566da3babcc827e9dae0f2e9ab9154c353aa11
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Mon Sep 28 11:18:00 2015 +0200

    fix mitmproxy/mitmproxy#784

diff --git a/netlib/http/http1/read.py b/netlib/http/http1/read.py
index 4c898348..73c7deed 100644
--- a/netlib/http/http1/read.py
+++ b/netlib/http/http1/read.py
@@ -218,11 +218,6 @@ def _get_first_line(rfile):
         raise HttpReadDisconnect("Remote disconnected")
     if not line:
         raise HttpReadDisconnect("Remote disconnected")
-    line = line.strip()
-    try:
-        line.decode("ascii")
-    except ValueError:
-        raise HttpSyntaxException("Non-ascii characters in first line: {}".format(line))
     return line.strip()
 
 
diff --git a/netlib/utils.py b/netlib/utils.py
index 6f6d1ea0..8b9548ed 100644
--- a/netlib/utils.py
+++ b/netlib/utils.py
@@ -237,8 +237,9 @@ def parse_url(url):
     if isinstance(url, six.binary_type):
         host = parsed.hostname
 
-        # this should not raise a ValueError
-        decode_parse_result(parsed, "ascii")
+        # this should not raise a ValueError,
+        # but we try to be very forgiving here and accept just everything.
+        # decode_parse_result(parsed, "ascii")
     else:
         host = parsed.hostname.encode("idna")
         parsed = encode_parse_result(parsed, "ascii")
diff --git a/test/http/http1/test_read.py b/test/http/http1/test_read.py
index 9eb02a24..36cf7e1d 100644
--- a/test/http/http1/test_read.py
+++ b/test/http/http1/test_read.py
@@ -211,6 +211,10 @@ def test_read_response_line():
 
     assert t(b"HTTP/1.1 200 OK") == (b"HTTP/1.1", 200, b"OK")
     assert t(b"HTTP/1.1 200") == (b"HTTP/1.1", 200, b"")
+
+    # https://github.com/mitmproxy/mitmproxy/issues/784
+    assert t(b"HTTP/1.1 200") == (b"HTTP/1.1 Non-Autoris\xc3\xa9", 200, b"")
+
     with raises(HttpSyntaxException):
         assert t(b"HTTP/1.1")
 
