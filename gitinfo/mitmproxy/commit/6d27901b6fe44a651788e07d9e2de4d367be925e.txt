commit 6d27901b6fe44a651788e07d9e2de4d367be925e
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Sat Sep 19 11:59:05 2015 +0200

    fix replay functionality

diff --git a/libmproxy/protocol/http_replay.py b/libmproxy/protocol/http_replay.py
index 14fbe547..b7faad07 100644
--- a/libmproxy/protocol/http_replay.py
+++ b/libmproxy/protocol/http_replay.py
@@ -80,17 +80,17 @@ class RequestReplayThread(threading.Thread):
                 server.wfile.write(http1.assemble_request(r))
                 server.wfile.flush()
                 self.flow.server_conn = server
-                self.flow.response = http1.read_response(
+                self.flow.response = HTTPResponse.wrap(http1.read_response(
                     server.rfile,
                     r,
                     body_size_limit=self.config.body_size_limit
-                )
+                ))
             if self.channel:
                 response_reply = self.channel.ask("response", self.flow)
                 if response_reply == Kill:
                     raise Kill()
-        except (ReplayException, HttpException, TcpException) as v:
-            self.flow.error = Error(repr(v))
+        except (ReplayException, HttpException, TcpException) as e:
+            self.flow.error = Error(str(e))
             if self.channel:
                 self.channel.ask("error", self.flow)
         except Kill:
