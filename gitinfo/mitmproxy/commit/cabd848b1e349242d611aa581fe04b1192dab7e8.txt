commit cabd848b1e349242d611aa581fe04b1192dab7e8
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sun Jan 19 18:08:59 2014 +1300

    Release test script and checklist.

diff --git a/release/release-checklist b/release/release-checklist
new file mode 100644
index 00000000..d44f8a41
--- /dev/null
+++ b/release/release-checklist
@@ -0,0 +1,25 @@
+
+- Bump the version number: 
+
+    mitmproxy/libmproxy/version.py
+    mitmproxy/requirements.txt
+    netlib/netlib/version.py
+    netlib/requirements.txt
+    pathod/netlib/version.py
+    pathod/requirements.txt
+
+
+- Render the docs:
+    cshape doc-src doc
+
+- Run the test release, make sure the output is sensible
+    ./release/test-release
+
+- Build sdist packages:
+    python ./setup.py sdist
+
+- Test the packages by installing in a virtualenv:
+    - cd dist
+    - tar -xzvf pkgfile.tgz
+    - virtualenv venv
+
diff --git a/release/test-release b/release/test-release
new file mode 100755
index 00000000..8b53c14c
--- /dev/null
+++ b/release/test-release
@@ -0,0 +1,37 @@
+#!/bin/bash
+
+MITMPROXY_DIR=~/mitmproxy/mitmproxy
+NETLIB_DIR=~/mitmproxy/netlib
+PATHOD_DIR=~/mitmproxy/pathod
+DST=/tmp/mitmproxy_release
+
+rm -rf $DST
+mkdir -p $DST
+
+cd $NETLIB_DIR
+echo "Creating netlib source distribution..."
+python ./setup.py -q sdist --dist-dir $DST
+
+echo "Creating mitmproxy source distribution..."
+cd $MITMPROXY_DIR
+python ./setup.py -q sdist --dist-dir $DST
+
+echo "Creating pathod source distribution..."
+cd $PATHOD_DIR
+python ./setup.py -q sdist --dist-dir $DST
+
+echo "Creating virtualenv for test install..."
+virtualenv -q $DST/venv
+
+echo "Installing netlib..."
+$DST/venv/bin/pip -q install --download-cache ~/.pipcache $DST/netlib*
+echo "Installing pathod..."
+$DST/venv/bin/pip -q install --download-cache ~/.pipcache $DST/pathod*
+echo "Installing mitmproxy..."
+$DST/venv/bin/pip -q install --download-cache ~/.pipcache $DST/mitmproxy*
+
+echo "Running binaries..."
+$DST/venv/bin/mitmproxy --version
+$DST/venv/bin/mitmdump --version
+$DST/venv/bin/pathod --version
+$DST/venv/bin/pathoc --version
