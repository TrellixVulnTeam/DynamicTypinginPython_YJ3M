commit 297cf5d565a1f86e7ffd0cabd2174c41925626e9
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Thu Jul 28 09:33:20 2016 +1200

    mitmdump: send script .done when terminating after flow read
    
    Fixes #1439

diff --git a/mitmproxy/dump.py b/mitmproxy/dump.py
index 83f44d87..e59fd23e 100644
--- a/mitmproxy/dump.py
+++ b/mitmproxy/dump.py
@@ -118,5 +118,6 @@ class DumpMaster(flow.FlowMaster):
 
     def run(self):  # pragma: no cover
         if self.options.rfile and not self.options.keepserving:
+            self.addons.done()
             return
         super(DumpMaster, self).run()
