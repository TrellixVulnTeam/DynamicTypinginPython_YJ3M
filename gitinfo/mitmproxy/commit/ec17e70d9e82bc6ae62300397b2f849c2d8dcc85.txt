commit ec17e70d9e82bc6ae62300397b2f849c2d8dcc85
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Tue Nov 11 14:00:28 2014 +1300

    Remove entry points in favor of vanilla scripts, fix test-release

diff --git a/release/test-release b/release/test-release
index 8b53c14c..8cbcea8c 100755
--- a/release/test-release
+++ b/release/test-release
@@ -23,15 +23,16 @@ python ./setup.py -q sdist --dist-dir $DST
 echo "Creating virtualenv for test install..."
 virtualenv -q $DST/venv
 
+cd $DST
 echo "Installing netlib..."
-$DST/venv/bin/pip -q install --download-cache ~/.pipcache $DST/netlib*
+./venv/bin/pip -q install --download-cache ~/.pipcache ./netlib*
 echo "Installing pathod..."
-$DST/venv/bin/pip -q install --download-cache ~/.pipcache $DST/pathod*
+./venv/bin/pip -q install --download-cache ~/.pipcache ./pathod*
 echo "Installing mitmproxy..."
-$DST/venv/bin/pip -q install --download-cache ~/.pipcache $DST/mitmproxy*
+./venv/bin/pip -q install --download-cache ~/.pipcache ./mitmproxy*
 
 echo "Running binaries..."
-$DST/venv/bin/mitmproxy --version
-$DST/venv/bin/mitmdump --version
-$DST/venv/bin/pathod --version
-$DST/venv/bin/pathoc --version
+./venv/bin/mitmproxy --version
+./venv/bin/mitmdump --version
+./venv/bin/pathod --version
+./venv/bin/pathoc --version
diff --git a/setup.py b/setup.py
index ead61118..e9d8f8cb 100644
--- a/setup.py
+++ b/setup.py
@@ -36,10 +36,6 @@ for script in scripts:
 if os.name == "nt":
     deps.add("pydivert>=0.0.4")  # Transparent proxying on Windows
 
-console_scripts = [
-    "%s = libmproxy.main:%s" % (s, s) for s in scripts
-]
-
 
 setup(
     name="mitmproxy",
@@ -66,14 +62,9 @@ setup(
         "Topic :: Internet :: Proxy Servers",
         "Topic :: Software Development :: Testing"
     ],
-
     packages=find_packages(),
     include_package_data=True,
-
-    entry_points={
-        'console_scripts': console_scripts
-    },
-
+    scripts = scripts,
     install_requires=list(deps),
     extras_require={
         'dev': [
