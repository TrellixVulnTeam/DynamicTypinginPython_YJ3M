commit c622e4a64983aa159b5a0710d86628a366c17dd1
Author: lymanZerga11 <lymanZerga11@users.noreply.github.com>
Date:   Sun Feb 12 23:10:49 2017 +0800

    Create test_flowlist.py

diff --git a/test/mitmproxy/console/test_flowlist.py b/test/mitmproxy/console/test_flowlist.py
new file mode 100644
index 00000000..861be863
--- /dev/null
+++ b/test/mitmproxy/console/test_flowlist.py
@@ -0,0 +1,33 @@
+import mitmproxy.tools.console.flowlist as flowlist
+from mitmproxy.test import tutils
+from mitmproxy.test import tflow
+from mitmproxy.tools import console
+from mitmproxy import proxy
+from mitmproxy import options
+from mitmproxy.tools.console import common
+from .. import mastertest
+import pytest
+from unittest import mock
+
+class ScriptError(Exception):
+    pass
+
+def mock_add_log(message):
+    raise ScriptError(message)
+
+class TestFlowlist(mastertest.MasterTest):
+    def mkmaster(self, **opts):
+        if "verbosity" not in opts:
+            opts["verbosity"] = 1
+        o = options.Options(**opts)
+        return console.master.ConsoleMaster(o, proxy.DummyServer())
+    
+    @mock.patch('mitmproxy.tools.console.signals.status_message.send', side_effect = mock_add_log)
+    def test_new_request(self,test_func):
+        m = self.mkmaster()
+        x = flowlist.FlowListBox(m)
+        with pytest.raises(ScriptError) as e:
+            x.new_request("nonexistent url", "GET")
+        assert "Invalid URL" in str(e)
+        
+        
