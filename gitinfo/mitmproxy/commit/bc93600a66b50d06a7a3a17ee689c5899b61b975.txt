commit bc93600a66b50d06a7a3a17ee689c5899b61b975
Author: Thomas Kriechbaumer <thomas@kriechbaumer.name>
Date:   Thu Sep 3 13:53:45 2015 +0200

    http2: add GoAway support for client

diff --git a/libmproxy/protocol/http.py b/libmproxy/protocol/http.py
index b345ee06..222af45f 100644
--- a/libmproxy/protocol/http.py
+++ b/libmproxy/protocol/http.py
@@ -237,6 +237,11 @@ class Http2Layer(_HttpLayer):
             # simply accept them, and hide them from the log.
             # Ideally we should forward them to the server.
             return
+        if isinstance(frame, GoAwayFrame):
+            # Client wants to terminate the connection,
+            # relay it to the server.
+            self.server_conn.send(frame.to_bytes())
+            return
         if isinstance(frame, PingFrame):
             # respond with pong
             self.server_conn.send(PingFrame(flags=Frame.FLAG_ACK, payload=frame.payload).to_bytes())
