commit 9674a0869c2a333f74178e305677259e7ac379c3
Author: Ryo Onodera <ryoqun@gmail.com>
Date:   Tue Mar 31 16:07:04 2015 +0900

    Make the Websocket's connection header value case-insensitive

diff --git a/examples/ignore_websocket.py b/examples/ignore_websocket.py
index 48093951..f7a94bdf 100644
--- a/examples/ignore_websocket.py
+++ b/examples/ignore_websocket.py
@@ -26,7 +26,8 @@ def done(context):
 
 @concurrent
 def response(context, flow):
-    if flow.response.headers.get_first("Connection", None) == "Upgrade":
+    value = flow.response.headers.get_first("Connection", None)
+    if value and value.upper() == "UPGRADE":
         # We need to send the response manually now...
         flow.client_conn.send(flow.response.assemble())
         # ...and then delegate to tcp passthrough.
