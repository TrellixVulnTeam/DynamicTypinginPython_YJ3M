commit aea3837d4ae637af42f716acb27d7ea8394ece35
Author: Thomas Kriechbaumer <thomas@kriechbaumer.name>
Date:   Sun Jan 10 11:45:26 2016 +0100

    remove code duplication

diff --git a/libmproxy/dump.py b/libmproxy/dump.py
index 22a2b75c..c2a3268a 100644
--- a/libmproxy/dump.py
+++ b/libmproxy/dump.py
@@ -85,12 +85,12 @@ class DumpMaster(flow.FlowMaster):
             self.set_stickyauth(options.stickyauth)
 
         if options.outfile:
-            path = os.path.expanduser(options.outfile[0])
-            try:
-                f = open(path, options.outfile[1])
-                self.start_stream(f, self.filt)
-            except IOError as v:
-                raise DumpError(v.strerror)
+            err = self.start_stream_to_path(
+                options.outfile[0],
+                options.outfile[1]
+            )
+            if err:
+                raise DumpError(err)
 
         if options.replacements:
             for i in options.replacements:
