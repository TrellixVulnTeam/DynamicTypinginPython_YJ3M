commit 8ec44c627770e5a41faabbf724ad54ed518e08f6
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sat Jul 21 14:12:45 2012 +1200

    Allow Python string escape sequences in value literals.

diff --git a/libpathod/rparse.py b/libpathod/rparse.py
index e71265ea..9d0f7e79 100644
--- a/libpathod/rparse.py
+++ b/libpathod/rparse.py
@@ -165,7 +165,7 @@ class FileGenerator:
 
 class _Value:
     def __init__(self, val):
-        self.val = val
+        self.val = val.decode("string_escape")
 
     def get_generator(self, settings):
         return LiteralGenerator(self.val)
diff --git a/test/test_rparse.py b/test/test_rparse.py
index dfc8c758..11c831c6 100644
--- a/test/test_rparse.py
+++ b/test/test_rparse.py
@@ -40,7 +40,11 @@ class TestMisc:
     def test_valueliteral(self):
         v = rparse.ValueLiteral("foo")
         assert v.expr()
-        assert str(v)
+        assert v.val == "foo"
+
+        v = rparse.ValueLiteral(r"foo\n")
+        assert v.expr()
+        assert v.val == "foo\n"
 
     def test_valuenakedliteral(self):
         v = rparse.ValueNakedLiteral("foo")
