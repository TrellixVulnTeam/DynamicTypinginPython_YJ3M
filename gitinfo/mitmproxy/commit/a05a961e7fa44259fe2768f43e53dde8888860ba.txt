commit a05a961e7fa44259fe2768f43e53dde8888860ba
Author: Thomas Kriechbaumer <thomas@kriechbaumer.name>
Date:   Wed Jan 20 19:31:37 2016 +0100

    cleanup lock usage

diff --git a/libmproxy/protocol/http.py b/libmproxy/protocol/http.py
index dad97fc3..a8626af8 100644
--- a/libmproxy/protocol/http.py
+++ b/libmproxy/protocol/http.py
@@ -163,7 +163,7 @@ class SafeH2Connection(H2Connection):
             self.conn.send(self.data_to_send())
 
     def safe_update_settings(self, new_settings):
-        with self.conn.h2.lock:
+        with self.lock:
             self.update_settings(new_settings)
             self.conn.send(self.data_to_send())
 
