commit e18ac4b672e8645388dc8057801092ce417f1511
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Tue Jan 28 20:30:16 2014 +0100

    re-add server attribute to BaseHandler

diff --git a/netlib/tcp.py b/netlib/tcp.py
index bad166d0..729e513e 100644
--- a/netlib/tcp.py
+++ b/netlib/tcp.py
@@ -297,9 +297,11 @@ class BaseHandler(SocketCloseMixin):
     """
     rbufsize = -1
     wbufsize = -1
-    def __init__(self, connection, address):
+
+    def __init__(self, connection, address, server):
         self.connection = connection
         self.address = Address.wrap(address)
+        self.server = server
         self.rfile = Reader(self.connection.makefile('rb', self.rbufsize))
         self.wfile = Writer(self.connection.makefile('wb', self.wbufsize))
 
diff --git a/netlib/test.py b/netlib/test.py
index 565b97cd..2f6a7107 100644
--- a/netlib/test.py
+++ b/netlib/test.py
@@ -50,7 +50,7 @@ class TServer(tcp.TCPServer):
         self.last_handler = None
 
     def handle_client_connection(self, request, client_address):
-        h = self.handler_klass(request, client_address)
+        h = self.handler_klass(request, client_address, self)
         self.last_handler = h
         if self.ssl:
             cert = certutils.SSLCert.from_pem(
