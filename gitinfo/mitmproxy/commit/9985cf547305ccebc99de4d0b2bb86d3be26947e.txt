commit 9985cf547305ccebc99de4d0b2bb86d3be26947e
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sun Jul 1 09:37:03 2012 +1200

    Flush after terminal output.
    
    Makes behaviour on the shell less mysterious.

diff --git a/libmproxy/dump.py b/libmproxy/dump.py
index ea4ac0b3..a58405ed 100644
--- a/libmproxy/dump.py
+++ b/libmproxy/dump.py
@@ -143,6 +143,7 @@ class DumpMaster(flow.FlowMaster):
     def add_event(self, e, level="info"):
         if self.eventlog:
             print >> self.outfile, e
+            self.outfile.flush()
 
     def handle_log(self, l):
         self.add_event(l.msg)
@@ -200,6 +201,8 @@ class DumpMaster(flow.FlowMaster):
             print >> self.outfile
             print >> self.outfile, result
             print >> self.outfile, "\n"
+        if self.o.verbosity:
+            self.outfile.flush()
 
         self.state.delete_flow(f)
         if self.o.wfile:
