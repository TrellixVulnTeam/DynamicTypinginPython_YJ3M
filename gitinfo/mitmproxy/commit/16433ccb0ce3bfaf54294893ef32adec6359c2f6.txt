commit 16433ccb0ce3bfaf54294893ef32adec6359c2f6
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Fri Feb 12 21:57:48 2016 +0100

    automatically delete old snapshots

diff --git a/rtool.py b/rtool.py
index 2d6c6b59..348fcd4a 100644
--- a/rtool.py
+++ b/rtool.py
@@ -13,6 +13,7 @@ import tarfile
 import platform
 import click
 import pysftp
+import fnmatch
 from six.moves import shlex_quote
 
 # https://virtualenv.pypa.io/en/latest/userguide.html#windows-notes
@@ -362,6 +363,11 @@ def upload_snapshot(host, port, user, private_key, private_key_password, sdist,
                     remote_filename = f.replace(get_version(project), get_snapshot_version(project))
                     symlink_path = "../{}".format(f.replace(get_version(project), "latest"))
 
+                    old_version = f.replace(get_version(project), "*")
+                    for f in sftp.listdir():
+                        if fnmatch.fnmatch(f, old_version):
+                            sftp.remove(f)
+
                     print("Uploading {} as {}...".format(f, remote_filename))
                     with click.progressbar(length=os.stat(local_path).st_size) as bar:
                         sftp.put(
