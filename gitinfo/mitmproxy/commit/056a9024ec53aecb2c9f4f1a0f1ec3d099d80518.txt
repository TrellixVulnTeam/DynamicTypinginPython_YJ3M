commit 056a9024ec53aecb2c9f4f1a0f1ec3d099d80518
Author: Yoav Shai <gergesh@gmail.com>
Date:   Thu Dec 5 22:36:26 2019 +0200

    Add message to ContentView metadata

diff --git a/mitmproxy/contentviews/__init__.py b/mitmproxy/contentviews/__init__.py
index 1e71d942..67e00833 100644
--- a/mitmproxy/contentviews/__init__.py
+++ b/mitmproxy/contentviews/__init__.py
@@ -103,6 +103,7 @@ def get_message_content_view(viewname, message):
         metadata["query"] = message.query
     if isinstance(message, http.Message):
         metadata["headers"] = message.headers
+    metadata["message"] = message
 
     description, lines, error = get_content_view(
         viewmode, content, **metadata
