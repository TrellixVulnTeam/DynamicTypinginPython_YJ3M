commit 0cb2e656cd37d97f89e39d1fc6abd0bc39a3d0d2
Author: Thomas Kriechbaumer <thomas@kriechbaumer.name>
Date:   Sat May 21 17:42:47 2016 +0200

    immediately send push to client

diff --git a/mitmproxy/protocol/http2.py b/mitmproxy/protocol/http2.py
index 1cc12792..c04bd507 100644
--- a/mitmproxy/protocol/http2.py
+++ b/mitmproxy/protocol/http2.py
@@ -174,6 +174,7 @@ class Http2Layer(Layer):
             parent_eid = self.server_to_client_stream_ids[event.parent_stream_id]
             with self.client_conn.h2.lock:
                 self.client_conn.h2.push_stream(parent_eid, event.pushed_stream_id, event.headers)
+                self.client_conn.send(self.client_conn.h2.data_to_send())
 
             headers = Headers([[str(k), str(v)] for k, v in event.headers])
             headers['x-mitmproxy-pushed'] = 'true'
