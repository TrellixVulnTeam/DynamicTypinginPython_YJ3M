commit 9b961a8236ea4f9486f18046239d3d3c26f5ca9f
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Mon Mar 14 15:56:25 2011 +1300

    Use raw_display instead of curses_display.

diff --git a/doc-src/faq.html b/doc-src/faq.html
index 56397147..769227bd 100644
--- a/doc-src/faq.html
+++ b/doc-src/faq.html
@@ -1,19 +1,9 @@
 
 <div class="faq">
 
-    <p class="question">On some sites I see a lot of "Connection from.."
-    entries that never complete.</p>
-
-    <p> This is probably because the page requests resources from SSL-protected
-    domains. These requests are intercepted by mitmproxy, but because we're
-    using a bogus certificate, the browser-side of the connection hangs. The
-    browser doesn't prompt you to add a certificate trust exception for remote
-    page components, only for the primary domain being visited. </p>
-    
-    <p> To solve this, use something like FireBug to find out which page
-    components are hanging. Visit the relevant domains using your browser, and
-    add a certificate trust exception for each one. </p>
+    <p class="question">Any tips for running mitmproxy on OSX?</p>
 
+    Coming soon.
 
     <p class="question">I'm pentesting an non-browser app that checks SSL
     certificate validity. How do I make it trust the MITMProxy certificate?</p>
diff --git a/doc-src/index.html b/doc-src/index.html
index 71e82087..49e7327f 100644
--- a/doc-src/index.html
+++ b/doc-src/index.html
@@ -1,19 +1,21 @@
 
 
 * [Introduction](@!urlTo("intro.html")!@)
-* [mitmproxy](@!urlTo("mitmproxy.html")!@) - Console-based HTTP Swiss Army Knife.
-    * [Tutorial](@!urlTo("mitmproxy/tutorial.html")!@)
-* [mitmdump](@!urlTo("mitmdump.html")!@) - tcpdump for HTTP conversations
-    * [Tutorial](@!urlTo("mitmproxy/tutorial.html")!@)
-* [Client scripts](@!urlTo("scripts.html")!@) - Writing client scripts for mitmproxy and mitmdump
-* [libmproxy](@!urlTo("library.html")!@) - Using the mitmproxy library
-* [SSL](@!urlTo("ssl.html")!@) - Installing mitmproxy's SSL certificate
-    * Browsers:
-        * [Firefox](@!urlTo("ssl.html")!@#firefox)
-        * [Chrome](@!urlTo("ssl.html")!@#chrome)
-        * [Safari](@!urlTo("ssl.html")!@#safari)
-        * [IE8](@!urlTo("ssl.html")!@#ie)
-    * Global installation:
+* Tutorials
+    * Client replay: a 30 second example
+    * Scripting: On-the-fly modifications to HTTP conversations
+    * Breaking iPhone apps for fun and profit
+* Reference
+    * [mitmproxy - HTTP Swiss Army Knife](@!urlTo("/mitmproxy.html")!@)
+    * [mitmdump - A tcpdump-like tool for HTTP](@!urlTo("/mitmdump.html")!@)
+    * [Client scripts](@!urlTo("scripts.html")!@)
+    * [libmproxy](@!urlTo("library.html")!@) - Using the mitmproxy library
+* Installing mitmproxy's SSL certificate
+    * [Firefox](@!urlTo("ssl.html")!@#firefox)
+    * [Chrome](@!urlTo("ssl.html")!@#chrome)
+    * [Safari](@!urlTo("ssl.html")!@#safari)
+    * [IE8](@!urlTo("ssl.html")!@#ie)
+    * System-wide installation:
         * [Windows 7](@!urlTo("ssl.html")!@#windows7)
         * [iPhone/iPad](@!urlTo("ssl.html")!@#ios)
 * [FAQ](@!urlTo("faq.html")!@)
diff --git a/doc-src/index.py b/doc-src/index.py
index c0546ab1..35f55811 100644
--- a/doc-src/index.py
+++ b/doc-src/index.py
@@ -31,9 +31,7 @@ pages = [
     Page("index.html", "Index"),
     Page("intro.html", "Introduction"),
     Page("mitmproxy.html", "mitmproxy"),
-    Directory("mitmproxy"),
     Page("mitmdump.html", "mitmdump"),
-    Directory("mitmdump"),
     Page("scripts.html", "External scripts"),
     Page("library.html", "libmproxy: mitmproxy as a library"),
     Page("ssl.html", "SSL"),
diff --git a/doc-src/mitmdump/index.py b/doc-src/mitmdump/index.py
deleted file mode 100644
index 312ece1d..00000000
--- a/doc-src/mitmdump/index.py
+++ /dev/null
@@ -1,5 +0,0 @@
-from countershape import Page, Directory, PythonModule, markup
-
-pages = [
-    Page("tutorial.html", "Tutorial"),
-]
diff --git a/doc-src/mitmdump/tutorial.html b/doc-src/mitmdump/tutorial.html
deleted file mode 100644
index e69de29b..00000000
diff --git a/doc-src/mitmproxy/index.py b/doc-src/mitmproxy/index.py
deleted file mode 100644
index 312ece1d..00000000
--- a/doc-src/mitmproxy/index.py
+++ /dev/null
@@ -1,5 +0,0 @@
-from countershape import Page, Directory, PythonModule, markup
-
-pages = [
-    Page("tutorial.html", "Tutorial"),
-]
diff --git a/doc-src/mitmproxy/tutorial.html b/doc-src/mitmproxy/tutorial.html
deleted file mode 100644
index e69de29b..00000000
diff --git a/libmproxy/console.py b/libmproxy/console.py
index 757f11c8..ee8d54e5 100644
--- a/libmproxy/console.py
+++ b/libmproxy/console.py
@@ -16,7 +16,7 @@
 import Queue, mailcap, mimetypes, tempfile, os, subprocess, glob, time
 import os.path, sys
 import cStringIO
-import urwid.curses_display
+import urwid.raw_display
 import urwid
 import controller, utils, filt, proxy, flow
 
@@ -992,7 +992,7 @@ class ConsoleMaster(flow.FlowMaster):
         self.viewstate = VIEW_CONNLIST
         self.currentflow = None
 
-        self.ui = urwid.curses_display.Screen()
+        self.ui = urwid.raw_display.Screen()
         self.ui.register_palette(self.palette)
         self.conn_list_view = ConnectionListView(self, self.state)
 
@@ -1027,7 +1027,7 @@ class ConsoleMaster(flow.FlowMaster):
         self.make_view()
 
     def view_connlist(self):
-        if self.ui.s:
+        if self.ui.started:
             self.ui.clear()
         if self.currentflow:
             try:
