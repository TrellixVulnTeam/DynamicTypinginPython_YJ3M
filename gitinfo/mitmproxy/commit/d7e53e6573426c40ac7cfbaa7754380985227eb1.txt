commit d7e53e6573426c40ac7cfbaa7754380985227eb1
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Fri Mar 20 09:30:29 2015 +1300

    Fix crashes on mouse click when input is being handled

diff --git a/libmproxy/console/__init__.py b/libmproxy/console/__init__.py
index 198b7bbe..70b82d1d 100644
--- a/libmproxy/console/__init__.py
+++ b/libmproxy/console/__init__.py
@@ -617,8 +617,6 @@ class ConsoleMaster(flow.FlowMaster):
                         self.prompt_execute(k)
                 elif k == "enter":
                     self.prompt_execute()
-                else:
-                    self.view.keypress(self.loop.screen_size, k)
             else:
                 k = self.view.keypress(self.loop.screen_size, k)
                 if k:
@@ -943,7 +941,7 @@ class ConsoleMaster(flow.FlowMaster):
                 mkup.append(",")
         prompt.extend(mkup)
         prompt.append(")? ")
-        self.onekey = "".join(i[1] for i in keys)
+        self.onekey = set(i[1] for i in keys)
         self.prompt(prompt, "", callback, *args)
 
     def prompt_done(self):
