commit f91ed91bf1408c9d998b27c478edb83b0e026572
Author: Charles d'Hondt <charles.dhondt@gmail.com>
Date:   Fri Apr 28 16:40:34 2017 +0200

    fix

diff --git a/mitmproxy/addons/proxyauth.py b/mitmproxy/addons/proxyauth.py
index 4ca69bc9..eac216c3 100644
--- a/mitmproxy/addons/proxyauth.py
+++ b/mitmproxy/addons/proxyauth.py
@@ -114,7 +114,6 @@ class ProxyAuth:
             if conn:
                 conn.search(parts[1][1:], '('+parts[0]+username+')', attributes=['objectclass'])
                 if ctx.options.proxyauth.split(":")[3] in conn.entries[0]['objectclass']:
-                    conn.unbind()
                     return username, password
 
         return None
@@ -135,6 +134,7 @@ class ProxyAuth:
             self.nonanonymous = False
             self.singleuser = None
             self.htpasswd = None
+            self.ldapserver = None
             if ctx.options.proxyauth:
                 if ctx.options.proxyauth == "any":
                     self.nonanonymous = True
