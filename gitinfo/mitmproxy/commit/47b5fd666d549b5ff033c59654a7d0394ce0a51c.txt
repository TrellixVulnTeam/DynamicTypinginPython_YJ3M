commit 47b5fd666d549b5ff033c59654a7d0394ce0a51c
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Fri Jul 27 02:13:21 2012 +1200

    Fix mitmproxy file reading.

diff --git a/libmproxy/console/__init__.py b/libmproxy/console/__init__.py
index 898e858f..c047f9f9 100644
--- a/libmproxy/console/__init__.py
+++ b/libmproxy/console/__init__.py
@@ -550,7 +550,7 @@ class ConsoleMaster(flow.FlowMaster):
             ret = self.load_flows(self.options.rfile)
             if ret and self.state.flow_count():
                 self.add_event("File truncated or corrupted. Loaded as many flows as possible.")
-            else:
+            elif not self.state.flow_count():
                 self.shutdown()
                 print >> sys.stderr, "Could not load file:", ret
                 sys.exit(1)
