commit 26cefc95e847cf7c2c583a55c727e603baba20e9
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Fri Aug 31 13:33:18 2012 +1200

    Make grid editor file reading more robust.

diff --git a/libmproxy/console/grideditor.py b/libmproxy/console/grideditor.py
index 321d0e8b..0c07b60d 100644
--- a/libmproxy/console/grideditor.py
+++ b/libmproxy/console/grideditor.py
@@ -291,10 +291,14 @@ class GridEditor(common.WWrap):
             return None
 
     def read_file(self, p, unescaped=False):
-        p = os.path.expanduser(p)
-        d = file(p, "r").read()
-        self.walker.set_current_value(d, unescaped)
-        self.walker._modified()
+        if p:
+            try:
+                p = os.path.expanduser(p)
+                d = file(p, "r").read()
+                self.walker.set_current_value(d, unescaped)
+                self.walker._modified()
+            except IOError, v:
+                return str(v)
 
     def keypress(self, size, key):
         if self.walker.editing:
