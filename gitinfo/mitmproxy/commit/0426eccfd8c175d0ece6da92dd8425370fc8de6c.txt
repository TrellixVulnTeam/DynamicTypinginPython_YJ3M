commit 0426eccfd8c175d0ece6da92dd8425370fc8de6c
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Sun Sep 28 03:55:16 2014 +0200

    fix tests

diff --git a/setup.py b/setup.py
index 2ff2d0be..1dd0e7d2 100644
--- a/setup.py
+++ b/setup.py
@@ -99,7 +99,7 @@ setup(
     ],
     install_requires=[
         'netlib>=%s' % version.MINORVERSION,
-        "requests>=2.4.0",
+        "requests>=2.4.1",
         "Flask>=0.10.1"
     ],
     extras_require={
diff --git a/test/test_test.py b/test/test_test.py
index d26ce07b..0a05f1c1 100644
--- a/test/test_test.py
+++ b/test/test_test.py
@@ -2,7 +2,6 @@ import logging
 import requests
 from libpathod import test
 import tutils
-from requests.packages.urllib3.exceptions import ProtocolError
 logging.disable(logging.CRITICAL)
 
 class TestDaemonManual:
@@ -11,7 +10,7 @@ class TestDaemonManual:
             rsp = requests.get("http://localhost:%s/p/202:da"%d.port)
             assert rsp.ok
             assert rsp.status_code == 202
-        tutils.raises(ProtocolError, requests.get, "http://localhost:%s/p/202:da"%d.port)
+        tutils.raises(requests.ConnectionError, requests.get, "http://localhost:%s/p/202:da"%d.port)
 
     def test_startstop_ssl(self):
         d = test.Daemon(ssl=True)
@@ -19,7 +18,7 @@ class TestDaemonManual:
         assert rsp.ok
         assert rsp.status_code == 202
         d.shutdown()
-        tutils.raises(ProtocolError, requests.get, "http://localhost:%s/p/202:da"%d.port)
+        tutils.raises(requests.ConnectionError, requests.get, "http://localhost:%s/p/202:da"%d.port)
 
     def test_startstop_ssl_explicit(self):
         ssloptions = dict(
@@ -32,6 +31,6 @@ class TestDaemonManual:
         assert rsp.ok
         assert rsp.status_code == 202
         d.shutdown()
-        tutils.raises(ProtocolError, requests.get, "http://localhost:%s/p/202:da"%d.port)
+        tutils.raises(requests.ConnectionError, requests.get, "http://localhost:%s/p/202:da"%d.port)
 
 
