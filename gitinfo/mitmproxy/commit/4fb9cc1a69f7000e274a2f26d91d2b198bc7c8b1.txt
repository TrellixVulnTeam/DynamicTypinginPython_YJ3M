commit 4fb9cc1a69f7000e274a2f26d91d2b198bc7c8b1
Author: Thomas Kriechbaumer <thomas@kriechbaumer.name>
Date:   Fri May 26 17:58:38 2017 +0200

    fail-safe flowfilter

diff --git a/mitmproxy/flowfilter.py b/mitmproxy/flowfilter.py
index 83c98bad..4edf0413 100644
--- a/mitmproxy/flowfilter.py
+++ b/mitmproxy/flowfilter.py
@@ -344,6 +344,8 @@ class FUrl(_Rex):
 
     @only(http.HTTPFlow)
     def __call__(self, f):
+        if not f.request:
+            return False
         return self.re.search(f.request.pretty_url)
 
 
