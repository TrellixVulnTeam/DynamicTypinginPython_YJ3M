commit 55e471af407c5ee9dfb0292e45f4d9586e9fd524
Author: lymanZerga11 <lymanZerga11@users.noreply.github.com>
Date:   Sun Feb 12 23:06:11 2017 +0800

    Catch ValueErrors from url.parse()

diff --git a/mitmproxy/tools/console/flowlist.py b/mitmproxy/tools/console/flowlist.py
index 39811ce1..83ad63f3 100644
--- a/mitmproxy/tools/console/flowlist.py
+++ b/mitmproxy/tools/console/flowlist.py
@@ -338,9 +338,10 @@ class FlowListBox(urwid.ListBox):
         )
 
     def new_request(self, url, method):
-        parts = mitmproxy.net.http.url.parse(str(url))
-        if not parts:
-            signals.status_message.send(message="Invalid Url")
+        try:
+            parts = mitmproxy.net.http.url.parse(str(url))
+        except ValueError as e:
+            signals.status_message.send(message = "Invalid URL: " + str(e))
             return
         scheme, host, port, path = parts
         f = self.master.create_request(method, scheme, host, port, path)
