commit 737c74b010cd6069beae092e0cc319ee4cb6e35b
Author: Ujjwal Verma <ujjwalverma1111@gmail.com>
Date:   Thu Jan 11 18:30:38 2018 +0530

    Update GIF parser

diff --git a/mitmproxy/contrib/kaitaistruct/gif.py b/mitmproxy/contrib/kaitaistruct/gif.py
index 820df568..76d7fc16 100644
--- a/mitmproxy/contrib/kaitaistruct/gif.py
+++ b/mitmproxy/contrib/kaitaistruct/gif.py
@@ -35,9 +35,11 @@ class Gif(KaitaiStruct):
             self.global_color_table = self._root.ColorTable(io, self, self._root)
 
         self.blocks = []
-        while not self._io.is_eof():
-            self.blocks.append(self._root.Block(self._io, self, self._root))
-
+        while True:
+            _ = self._root.Block(self._io, self, self._root)
+            self.blocks.append(_)
+            if  ((self._io.is_eof()) or (_.block_type == self._root.BlockType.end_of_file)) :
+                break
 
     class ImageData(KaitaiStruct):
         def __init__(self, _io, _parent=None, _root=None):
