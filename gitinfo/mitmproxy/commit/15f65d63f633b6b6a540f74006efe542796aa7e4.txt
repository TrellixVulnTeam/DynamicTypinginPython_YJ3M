commit 15f65d63f633b6b6a540f74006efe542796aa7e4
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sun Mar 22 17:28:13 2015 +1300

    Trigger flow change when flow elements are edited

diff --git a/libmproxy/console/flowview.py b/libmproxy/console/flowview.py
index fcb967cc..04440888 100644
--- a/libmproxy/console/flowview.py
+++ b/libmproxy/console/flowview.py
@@ -532,19 +532,28 @@ class FlowView(urwid.WidgetWrap):
 
     def set_headers(self, lst, conn):
         conn.headers = flow.ODictCaseless(lst)
+        signals.flow_change.send(self, flow = self.flow)
 
     def set_query(self, lst, conn):
         conn.set_query(flow.ODict(lst))
+        signals.flow_change.send(self, flow = self.flow)
 
     def set_path_components(self, lst, conn):
         conn.set_path_components([i[0] for i in lst])
+        signals.flow_change.send(self, flow = self.flow)
 
     def set_form(self, lst, conn):
         conn.set_form_urlencoded(flow.ODict(lst))
+        signals.flow_change.send(self, flow = self.flow)
 
     def edit_form(self, conn):
         self.master.view_grideditor(
-            grideditor.URLEncodedFormEditor(self.master, conn.get_form_urlencoded().lst, self.set_form, conn)
+            grideditor.URLEncodedFormEditor(
+                self.master,
+                conn.get_form_urlencoded().lst,
+                self.set_form,
+                conn
+            )
         )
 
     def edit_form_confirm(self, key, conn):
@@ -586,7 +595,14 @@ class FlowView(urwid.WidgetWrap):
             else:
                 self.edit_form(message)
         elif part == "h":
-            self.master.view_grideditor(grideditor.HeaderEditor(self.master, message.headers.lst, self.set_headers, message))
+            self.master.view_grideditor(
+                grideditor.HeaderEditor(
+                    self.master,
+                    message.headers.lst,
+                    self.set_headers,
+                    message
+                )
+            )
         elif part == "p":
             p = message.get_path_components()
             p = [[i] for i in p]
