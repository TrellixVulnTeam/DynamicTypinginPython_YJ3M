commit 79bbc41cb458ffd19b09e957e9b562befbad58b9
Author: arjun23496 <arjun.k018@gmail.com>
Date:   Fri Aug 26 12:13:34 2016 +0530

    Fixes #1471 - Change .* to match entire body

diff --git a/mitmproxy/builtins/replace.py b/mitmproxy/builtins/replace.py
index c938d683..a5dae33e 100644
--- a/mitmproxy/builtins/replace.py
+++ b/mitmproxy/builtins/replace.py
@@ -36,9 +36,9 @@ class Replace:
         for rex, s, cpatt in self.lst:
             if cpatt(f):
                 if f.response:
-                    f.response.replace(rex, s)
+                    f.response.replace(rex, s, re.DOTALL)
                 else:
-                    f.request.replace(rex, s)
+                    f.request.replace(rex, s, re.DOTALL)
 
     def request(self, flow):
         if not flow.reply.has_message:
