commit 3bd238de37cc7d1a556adf6e9c668e1867442b27
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Sun Dec 8 15:46:11 2013 +0100

    backport changes to fix tests

diff --git a/libmproxy/dump.py b/libmproxy/dump.py
index 55fd94b3..83139b46 100644
--- a/libmproxy/dump.py
+++ b/libmproxy/dump.py
@@ -8,8 +8,9 @@ class DumpError(Exception): pass
 class Options(object):
     attributes = [
         "app",
-        "app_domain",
-        "app_ip",
+        "app_external",
+        "app_host",
+        "app_port",
         "anticache",
         "anticomp",
         "client_replay",
diff --git a/test/test_dump.py b/test/test_dump.py
index 255651a9..3b79c721 100644
--- a/test/test_dump.py
+++ b/test/test_dump.py
@@ -111,7 +111,7 @@ class TestDumpMaster:
         o = dump.Options(app=True)
         s = mock.MagicMock()
         m = dump.DumpMaster(s, o, None)
-        assert s.apps.add.call_count == 2
+        assert s.apps.add.call_count == 1
 
     def test_replacements(self):
         o = dump.Options(replacements=[(".*", "content", "foo")])
diff --git a/test/tservers.py b/test/tservers.py
index eb3b91a4..f886d42d 100644
--- a/test/tservers.py
+++ b/test/tservers.py
@@ -163,12 +163,12 @@ class HTTPProxTest(ProxTestBase):
         if self.ssl:
             p = libpathod.pathoc.Pathoc("127.0.0.1", self.proxy.port, True)
             print "PRE"
-            p.connect((APP_IP, 80))
+            p.connect((APP_HOST, APP_PORT))
             print "POST"
             return p.request("get:'/%s'"%page)
         else:
             p = self.pathoc()
-            return p.request("get:'http://%s/%s'"%(APP_DOMAIN, page))
+            return p.request("get:'http://%s/%s'"%(APP_HOST, page))
 
 
 class TResolver:
