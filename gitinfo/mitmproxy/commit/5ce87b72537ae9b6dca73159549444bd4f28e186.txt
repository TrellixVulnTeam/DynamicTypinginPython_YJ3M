commit 5ce87b72537ae9b6dca73159549444bd4f28e186
Author: Nikita Stupin <18281368+nikitastupin@users.noreply.github.com>
Date:   Sun May 3 10:28:43 2020 +0300

    Assert viewmode not None

diff --git a/mitmproxy/contentviews/__init__.py b/mitmproxy/contentviews/__init__.py
index 063b8cfe..f5c31eef 100644
--- a/mitmproxy/contentviews/__init__.py
+++ b/mitmproxy/contentviews/__init__.py
@@ -121,6 +121,9 @@ def get_tcp_content_view(viewname: str, data: bytes):
     if not viewmode:
         viewmode = get("auto")
 
+    # https://github.com/mitmproxy/mitmproxy/pull/3970#issuecomment-623024447
+    assert viewmode
+
     description, lines, error = get_content_view(viewmode, data)
 
     return description, lines, error
