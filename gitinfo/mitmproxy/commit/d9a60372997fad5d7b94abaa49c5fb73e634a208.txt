commit d9a60372997fad5d7b94abaa49c5fb73e634a208
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Sun Feb 9 02:54:07 2014 +0100

    fix comments

diff --git a/libmproxy/flow.py b/libmproxy/flow.py
index f4c24f28..f8ad2444 100644
--- a/libmproxy/flow.py
+++ b/libmproxy/flow.py
@@ -467,7 +467,7 @@ class FlowMaster(controller.Master):
                     flask.request.environ.get('werkzeug.server.shutdown')()
 
             # Workaround: Monkey-patch shutdown function to stop the app.
-            # Improve this when we switch flask werkzeug for something useful.
+            # Improve this when we switch werkzeugs http server for something useful.
             _shutdown = self.shutdown
             def _shutdownwrap():
                 _shutdown()
diff --git a/libmproxy/protocol/http.py b/libmproxy/protocol/http.py
index e91e865a..bddd87df 100644
--- a/libmproxy/protocol/http.py
+++ b/libmproxy/protocol/http.py
@@ -975,6 +975,12 @@ class HTTPHandler(ProtocolHandler, TemporaryServerChangeMixin):
         self.c.client_conn.wfile.flush()
 
     def hook_reconnect(self, upstream_request):
+        """
+        If the authority request has been forwarded upstream (because we have another proxy server there),
+        money-patch the ConnectionHandler.server_reconnect function to resend the CONNECT request on reconnect.
+        Hooking code isn't particulary beautiful, but it isolates this edge-case from
+        the protocol-agnostic ConnectionHandler
+        """
         self.c.log("Hook reconnect function")
         original_reconnect_func = self.c.server_reconnect
 
@@ -997,11 +1003,6 @@ class HTTPHandler(ProtocolHandler, TemporaryServerChangeMixin):
     def ssl_upgrade(self):
         """
         Upgrade the connection to SSL after an authority (CONNECT) request has been made.
-        If the authority request has been forwarded upstream (because we have another proxy server there),
-        money-patch the ConnectionHandler.server_reconnect function to resend the request on reconnect.
-
-        This isn't particular beautiful code, but it isolates this rare edge-case from the
-        protocol-agnostic ConnectionHandler
         """
         self.c.log("Received CONNECT request. Upgrading to SSL...")
         self.c.mode = "transparent"
