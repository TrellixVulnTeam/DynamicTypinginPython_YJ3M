commit c573d8c2920b87fe058db9263069f5d89feabd78
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Thu Sep 10 10:30:57 2015 +0200

    inline scripts: provide __file__

diff --git a/libmproxy/script.py b/libmproxy/script.py
index db909a5d..b4ecfbbf 100644
--- a/libmproxy/script.py
+++ b/libmproxy/script.py
@@ -95,8 +95,8 @@ class Script:
         """
         if self.ns is not None:
             self.unload()
-        ns = {}
         script_dir = os.path.dirname(os.path.abspath(self.args[0]))
+        ns = {'__file__': os.path.abspath(self.args[0])}
         sys.path.append(script_dir)
         try:
             execfile(self.args[0], ns, ns)
