commit b7d89f691999e8b6de63389388467eefaa3b6111
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sun Sep 2 12:57:49 2012 +1200

    Don't run replace or header hooks on error.

diff --git a/libmproxy/flow.py b/libmproxy/flow.py
index 868419e5..44bb1018 100644
--- a/libmproxy/flow.py
+++ b/libmproxy/flow.py
@@ -1493,8 +1493,6 @@ class FlowMaster(controller.Master):
 
     def handle_error(self, r):
         f = self.state.add_error(r)
-        self.replacehooks.run(f)
-        self.setheaders.run(f)
         if f:
             self.run_script_hook("error", f)
         if self.client_playback:
