commit 4e6a99185485698eaaf4a9178b8aab0119ab77fe
Author: gorogoroumaru <zokutyou2@gmail.com>
Date:   Sun Jul 12 16:46:33 2020 +0900

    moved "ctx.master.addons.trigger" function outside of "with self.q.mutex"

diff --git a/mitmproxy/addons/clientplayback.py b/mitmproxy/addons/clientplayback.py
index 6a3cc5fb..82021d2f 100644
--- a/mitmproxy/addons/clientplayback.py
+++ b/mitmproxy/addons/clientplayback.py
@@ -180,7 +180,7 @@ class ClientPlayback:
             self.q.queue.clear()
             for f in lst:
                 f.revert()
-            ctx.master.addons.trigger("update", lst)
+        ctx.master.addons.trigger("update", lst)
         ctx.log.alert("Client replay queue cleared.")
 
     @command.command("replay.client")
