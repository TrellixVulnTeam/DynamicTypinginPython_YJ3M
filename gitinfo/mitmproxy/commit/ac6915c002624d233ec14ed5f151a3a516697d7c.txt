commit ac6915c002624d233ec14ed5f151a3a516697d7c
Author: Thomas Kriechbaumer <thomas@kriechbaumer.name>
Date:   Mon Feb 20 10:21:28 2017 +0100

    improve tests

diff --git a/test/mitmproxy/utils/test_debug.py b/test/mitmproxy/utils/test_debug.py
index b6d6407c..4371ef70 100644
--- a/test/mitmproxy/utils/test_debug.py
+++ b/test/mitmproxy/utils/test_debug.py
@@ -2,14 +2,19 @@ import io
 import subprocess
 import sys
 from unittest import mock
+import pytest
 
 from mitmproxy.utils import debug
 
 
-def test_dump_system_info():
-    setattr(sys, 'frozen', True)
-    assert debug.dump_system_info()
+@pytest.mark.parametrize("precompiled", [True, False])
+def test_dump_system_info_precompiled(precompiled):
+    sys.frozen = None
+    with mock.patch.object(sys, 'frozen', precompiled):
+        assert ("Precompiled Binary" in debug.dump_system_info()) == precompiled
 
+
+def test_dump_system_info_version():
     with mock.patch('subprocess.check_output') as m:
         m.side_effect = subprocess.CalledProcessError(-1, 'git describe --tags --long')
         assert 'release version' in debug.dump_system_info()
