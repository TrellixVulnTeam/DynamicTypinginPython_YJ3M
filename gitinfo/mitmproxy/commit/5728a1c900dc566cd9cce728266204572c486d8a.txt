commit 5728a1c900dc566cd9cce728266204572c486d8a
Author: Schamper <Schamper@users.noreply.github.com>
Date:   Tue Sep 6 17:00:08 2016 +0200

    Make 'none' synonymous to 'identity'

diff --git a/netlib/encoding.py b/netlib/encoding.py
index d25af3e5..9b8b3868 100644
--- a/netlib/encoding.py
+++ b/netlib/encoding.py
@@ -34,7 +34,7 @@ def decode(encoded, encoding, errors='strict'):
     Raises:
         ValueError, if decoding fails.
     """
-    if len(encoded) == 0 or encoding == "none":
+    if len(encoded) == 0:
         return encoded
 
     global _cache
@@ -76,7 +76,7 @@ def encode(decoded, encoding, errors='strict'):
     Raises:
         ValueError, if encoding fails.
     """
-    if len(decoded) == 0 or encoding == "none":
+    if len(decoded) == 0:
         return decoded
 
     global _cache
@@ -162,12 +162,14 @@ def encode_deflate(content):
 
 
 custom_decode = {
+    "none": identity,
     "identity": identity,
     "gzip": decode_gzip,
     "deflate": decode_deflate,
     "br": decode_brotli,
 }
 custom_encode = {
+    "none": identity,
     "identity": identity,
     "gzip": encode_gzip,
     "deflate": encode_deflate,
diff --git a/test/netlib/test_encoding.py b/test/netlib/test_encoding.py
index 9effb4d5..e1175ef0 100644
--- a/test/netlib/test_encoding.py
+++ b/test/netlib/test_encoding.py
@@ -4,18 +4,17 @@ import pytest
 from netlib import encoding, tutils
 
 
-def test_identity():
-    assert b"string" == encoding.decode(b"string", "identity")
-    assert b"string" == encoding.encode(b"string", "identity")
+@pytest.mark.parametrize("encoder", [
+    'identity',
+    'none',
+])
+def test_identity(encoder):
+    assert b"string" == encoding.decode(b"string", encoder)
+    assert b"string" == encoding.encode(b"string", encoder)
     with tutils.raises(ValueError):
         encoding.encode(b"string", "nonexistent encoding")
 
 
-def test_none():
-    assert b"string" == encoding.decode(b"string", "none")
-    assert b"string" == encoding.encode(b"string", "none")
-
-
 @pytest.mark.parametrize("encoder", [
     'gzip',
     'br',
