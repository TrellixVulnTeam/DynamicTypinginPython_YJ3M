commit fa09bfa4895352bdc866e512cc7e76b9757b4b58
Author: Fenil Gandhi <fanilgandhi@gmail.com>
Date:   Sat Mar 3 09:44:46 2018 +0530

    Fix for wrapping up extra-long urls in flowdetailview

diff --git a/mitmproxy/tools/console/flowview.py b/mitmproxy/tools/console/flowview.py
index 9420c105..650a9366 100644
--- a/mitmproxy/tools/console/flowview.py
+++ b/mitmproxy/tools/console/flowview.py
@@ -30,12 +30,14 @@ class FlowViewHeader(urwid.WidgetWrap):
         self.focus_changed()
 
     def focus_changed(self):
+        cols, _ = self.master.ui.get_cols_rows()
         if self.master.view.focus.flow:
             self._w = common.format_flow(
                 self.master.view.focus.flow,
                 False,
                 extended=True,
-                hostheader=self.master.options.showhost
+                hostheader=self.master.options.showhost,
+                max_url_len=cols,
             )
         else:
             self._w = urwid.Pile([])
