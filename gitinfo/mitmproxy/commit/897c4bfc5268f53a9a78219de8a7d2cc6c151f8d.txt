commit 897c4bfc5268f53a9a78219de8a7d2cc6c151f8d
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Wed Mar 9 12:18:08 2011 +1300

    Think harder about timestamps. Just save seconds since the epoch as a float.

diff --git a/libmproxy/utils.py b/libmproxy/utils.py
index 5f0b833d..6568c445 100644
--- a/libmproxy/utils.py
+++ b/libmproxy/utils.py
@@ -16,14 +16,15 @@ import re, os, subprocess, datetime, textwrap, errno, sys, time, pytz
 
 
 def timestamp():
-    d = datetime.datetime.utcnow()
-    return list(d.timetuple())
+    """
+        Returns a serializable UTC timestamp.
+    """
+    return time.time()
 
 
 def format_timestamp(s):
-    s = time.struct_time(s)
+    s = time.localtime(s)
     d = datetime.datetime.fromtimestamp(time.mktime(s))
-    d = d - datetime.timedelta(seconds=time.altzone)
     return d.strftime("%Y-%m-%d %H:%M:%S")
 
 
