commit ec588f88221edb19137209a66431fdf4517c215c
Author: smill@cuckoo.sh <smill@cuckoo.sh>
Date:   Thu Sep 22 08:51:17 2016 +0000

    Removed obsolete code.

diff --git a/mitmproxy/protocol/base.py b/mitmproxy/protocol/base.py
index 206999ef..b2caeb16 100644
--- a/mitmproxy/protocol/base.py
+++ b/mitmproxy/protocol/base.py
@@ -163,12 +163,8 @@ class ServerConnectionMixin(object):
         self.server_conn.close()
         self.channel.tell("serverdisconnect", self.server_conn)
 
-        if self.config.options.spoof_source_address:
-            self.server_conn = models.ServerConnection(
-                address, (self.ctx.client_conn.address.host, 0), True)
-        else:
-            self.server_conn = models.ServerConnection(
-                address, (self.server_conn.source_address.host, 0))
+        self.server_conn = models.ServerConnection(address,
+                (self.server_conn.source_address.host, 0), self.config.options.spoof_source_address)
 
     def connect(self):
         """
