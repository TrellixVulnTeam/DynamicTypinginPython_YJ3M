commit f4da81f749c5f3660c6dfeaab435c344c1005945
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Wed Oct 19 22:05:25 2016 +1300

    pathoc: handle error when selecting on read file

diff --git a/pathod/pathoc.py b/pathod/pathoc.py
index e3b4d1ae..e9fa5c43 100644
--- a/pathod/pathoc.py
+++ b/pathod/pathoc.py
@@ -121,7 +121,10 @@ class WebsocketFrameReader(basethread.BaseThread):
             while True:
                 if self.ws_read_limit == 0:
                     return
-                r, _, _ = select.select([self.rfile], [], [], 0.05)
+                try:
+                    r, _, _ = select.select([self.rfile], [], [], 0.05)
+                except OSError:
+                    return
                 delta = time.time() - starttime
                 if not r and self.timeout and delta > self.timeout:
                     return
