commit c6896d7392efe7147f1e08447fd8861be9eca66c
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Tue Apr 3 11:28:07 2012 +1200

    Add ClientConnect info to details view.

diff --git a/libmproxy/console/flowdetailview.py b/libmproxy/console/flowdetailview.py
index 7391347e..6c5e7fe2 100644
--- a/libmproxy/console/flowdetailview.py
+++ b/libmproxy/console/flowdetailview.py
@@ -88,6 +88,15 @@ class FlowDetailsView(urwid.ListBox):
                         ]
                     )
                 text.extend(common.format_keyvals(parts, key="key", val="text", indent=4))
-        return text
 
+        if self.flow.request.client_conn:
+            text.append(urwid.Text([("head", "Client Connection:")]))
+            cc = self.flow.request.client_conn
+            parts = [
+                ["Address", "%s:%s"%tuple(cc.address)],
+                ["Requests", "%s"%cc.requestcount],
+                ["Closed", "%s"%cc.close],
+            ]
+            text.extend(common.format_keyvals(parts, key="key", val="text", indent=4))
 
+        return text
