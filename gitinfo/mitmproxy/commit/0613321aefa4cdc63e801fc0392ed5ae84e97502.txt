commit 0613321aefa4cdc63e801fc0392ed5ae84e97502
Author: Henrik Nordstrom <henrik@henriknordstrom.net>
Date:   Tue Feb 8 15:07:29 2011 +0100

    Optimize CONNECT responses, sent in a single packet

diff --git a/libmproxy/proxy.py b/libmproxy/proxy.py
index c08040e6..b879a405 100644
--- a/libmproxy/proxy.py
+++ b/libmproxy/proxy.py
@@ -407,9 +407,11 @@ class ProxyHandler(SocketServer.StreamRequestHandler):
                 d = self.rfile.readline()
                 if not d.strip():
                     break
-            self.wfile.write('HTTP/1.1 200 Connection established\r\n')
-            self.wfile.write('Proxy-agent: %s\r\n'%NAME)
-            self.wfile.write('\r\n')
+            self.wfile.write(
+                        'HTTP/1.1 200 Connection established\r\n' +
+                        ('Proxy-agent: %s\r\n'%NAME) +
+                        '\r\n'
+                        )
             self.wfile.flush()
             self.connection = ssl.wrap_socket(
                 self.connection,
