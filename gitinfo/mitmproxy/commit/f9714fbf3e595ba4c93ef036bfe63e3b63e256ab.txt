commit f9714fbf3e595ba4c93ef036bfe63e3b63e256ab
Author: Matthew Shao <me@matshao.com>
Date:   Tue Feb 21 11:59:50 2017 +0800

    Fix #1928, @concurrent decorator now works for class methods.

diff --git a/mitmproxy/script/concurrent.py b/mitmproxy/script/concurrent.py
index 366929a5..87cdca96 100644
--- a/mitmproxy/script/concurrent.py
+++ b/mitmproxy/script/concurrent.py
@@ -29,4 +29,7 @@ def concurrent(fn):
             "script.concurrent (%s)" % fn.__name__,
             target=run
         ).start()
-    return _concurrent
+    if "." in fn.__qualname__:
+        return staticmethod(_concurrent)
+    else:
+        return _concurrent
