commit dbbda030200e50768c92f48cf4189d96775b0684
Author: Clemens <cle1000.cb@gmail.com>
Date:   Tue Jun 7 11:22:52 2016 +0200

    sorting done, ready to review

diff --git a/mitmproxy/web/static/app.js b/mitmproxy/web/static/app.js
index e1f87736..7d6f5ce0 100644
--- a/mitmproxy/web/static/app.js
+++ b/mitmproxy/web/static/app.js
@@ -4900,12 +4900,10 @@ var sortedRemove = function sortedRemove(list, sortFn, item) {
 };
 
 function sortedIndexOf(list, value, sortFn) {
-    if (sortFn === false) {
-        var i = 0;
-        while (i < list.length && list[i].id !== value.id) {
-            i++;
-        }
-        return i;
+    if (!sortFn) {
+        sortFn = function sortFn(x) {
+            return 0;
+        }; // This triggers the linear search for flows that have the same sort value.
     }
 
     var low = 0,
diff --git a/web/src/js/ducks/flows.js b/web/src/js/ducks/flows.js
index c4444a9f..83a7b12c 100644
--- a/web/src/js/ducks/flows.js
+++ b/web/src/js/ducks/flows.js
@@ -37,7 +37,7 @@ function makeSortFn(sort){
 
     let sortKeyFun = column.sortKeyFun;
     if (sort.sortDesc) {
-        sortKeyFun = function () {
+        sortKeyFun = sortKeyFun && function () {
             const k = column.sortKeyFun.apply(this, arguments);
             return _.isString(k) ? reverseString("" + k) : -k;
         };
