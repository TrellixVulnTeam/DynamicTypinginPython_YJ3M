commit 9f69540d572791839afca071acfcbb987a298c6c
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Thu Jul 18 17:54:33 2019 +0200

    fix addon deconstruction

diff --git a/mitmproxy/addonmanager.py b/mitmproxy/addonmanager.py
index 4214d6ea..8a565a73 100644
--- a/mitmproxy/addonmanager.py
+++ b/mitmproxy/addonmanager.py
@@ -184,7 +184,7 @@ class AddonManager:
                 raise exceptions.AddonManagerError("No such addon: %s" % n)
             self.chain = [i for i in self.chain if i is not a]
             del self.lookup[_get_name(a)]
-        self.invoke_addon(a, "done")
+        self.invoke_addon(addon, "done")
 
     def __len__(self):
         return len(self.chain)
