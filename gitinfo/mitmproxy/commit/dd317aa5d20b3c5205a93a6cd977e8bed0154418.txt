commit dd317aa5d20b3c5205a93a6cd977e8bed0154418
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Fri Aug 28 17:35:22 2015 +0200

    fix alpn

diff --git a/libpathod/pathoc.py b/libpathod/pathoc.py
index e93e6208..62c9669b 100644
--- a/libpathod/pathoc.py
+++ b/libpathod/pathoc.py
@@ -19,6 +19,8 @@ import language.websockets
 from . import utils, log
 
 import logging
+from netlib.http.http1 import HTTP1Protocol
+
 logging.getLogger("hpack").setLevel(logging.WARNING)
 
 
@@ -284,7 +286,7 @@ class Pathoc(tcp.TCPClient):
         self.sslinfo = None
         if self.ssl:
             try:
-                alpn_protos = [b'http1.1']  # TODO: move to a new HTTP1 protocol
+                alpn_protos = [HTTP1Protocol.ALPN_PROTO_HTTP1]
                 if self.use_http2:
                     alpn_protos.append(http2.HTTP2Protocol.ALPN_PROTO_H2)
 
diff --git a/test/test_pathoc.py b/test/test_pathoc.py
index 54590174..ec68424a 100644
--- a/test/test_pathoc.py
+++ b/test/test_pathoc.py
@@ -290,7 +290,7 @@ class TestDaemonHTTP2(_TestDaemon):
             c.connect()
 
             _, kwargs = c.convert_to_ssl.call_args
-            assert set(kwargs['alpn_protos']) == set([b'http1.1', b'h2'])
+            assert set(kwargs['alpn_protos']) == set([b'http/1.1', b'h2'])
 
         def test_request(self):
             c = pathoc.Pathoc(
