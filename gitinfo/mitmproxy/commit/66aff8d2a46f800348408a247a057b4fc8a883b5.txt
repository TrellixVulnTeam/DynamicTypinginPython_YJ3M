commit 66aff8d2a46f800348408a247a057b4fc8a883b5
Author: madt1m <blackjuniper@protonmail.com>
Date:   Sat Jun 30 12:20:27 2018 +0200

    view can load from both io interfaces

diff --git a/mitmproxy/addons/view.py b/mitmproxy/addons/view.py
index 3730aa8d..25142a2c 100644
--- a/mitmproxy/addons/view.py
+++ b/mitmproxy/addons/view.py
@@ -447,9 +447,17 @@ class View(collections.Sequence):
             Load flows into the view, without processing them with addons.
         """
         try:
-            dh = io.DbHandler(path)
-            for f in dh.load():
-                self.add([f.copy()])
+            if path.endswith(".sqlite"):
+                dh = io.DbHandler(path)
+                for f in dh.load():
+                    self.add([f.copy()])
+            else:
+                with open(path, "rb") as f:
+                    for i in io.FlowReader(f).stream():
+                        # Do this to get a new ID, so we can load the same file N times and
+                        # get new flows each time. It would be more efficient to just have a
+                        # .newid() method or something.
+                        self.add([i.copy()])
         except exceptions.TypeError as e:
             ctx.log.error(str(e))
         except IOError as e:
