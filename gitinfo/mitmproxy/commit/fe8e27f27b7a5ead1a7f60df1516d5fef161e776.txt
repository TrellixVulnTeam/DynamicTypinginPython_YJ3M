commit fe8e27f27b7a5ead1a7f60df1516d5fef161e776
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Fri Apr 17 15:27:50 2015 +1200

    Housekeeping: .env and fix unit tests

diff --git a/.env b/.env
new file mode 100644
index 00000000..7f847e29
--- /dev/null
+++ b/.env
@@ -0,0 +1,5 @@
+DIR=`dirname $0`
+if [ -z "$VIRTUAL_ENV" ] && [ -f $DIR/../venv.mitmproxy/bin/activate ]; then
+    echo "Activating mitmproxy virtualenv..."
+    source $DIR/../venv.mitmproxy/bin/activate
+fi
diff --git a/test/test_pathod.py b/test/test_pathod.py
index 8b37b545..e90547bc 100644
--- a/test/test_pathod.py
+++ b/test/test_pathod.py
@@ -32,7 +32,7 @@ class TestTimeout(tutils.DaemonTests):
     def test_noweb(self):
         # FIXME: Add float values to spec language, reduce test timeout to
         # increase test performance
-        tutils.raises("server disconnect", self.pathoc, "get:/:p1,1")
+        tutils.raises(tcp.NetLibDisconnect, self.pathoc, "get:/:p1,1")
         assert self.d.last_log()["type"] == "timeout"
 
 
