commit c89378047b9af7e54afdfd0efcb4215e090856bd
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sun Jun 16 15:50:08 2013 +1200

    Formalize OSX binary script a bit more.

diff --git a/release/osx-binaries b/release/osx-binaries
index 651b6bf3..a5f17ba5 100755
--- a/release/osx-binaries
+++ b/release/osx-binaries
@@ -5,12 +5,19 @@
 # First, have a recent checkout of the dev version of pyinstaller. Change into
 # the pyinstaller directory, and then run this script.
 
-mkdir -p /tmp/osx-mitmproxy
+DST=/tmp/osx-mitmproxy
+MITMPROXY=~/mitmproxy/mitmproxy
+PYINST_CMD="./pyinstaller.py -F --clean"
+
+rm -rf $DST
+mkdir -p $DST
 rm -rf mitmproxy
 rm -rf mitmdump
 
-./pyinstaller.py -F ~/mitmproxy/mitmproxy/mitmproxy
-cp mitmproxy/dist/mitmproxy /tmp/osx-mitmproxy
+$PYINST_CMD $MITMPROXY/mitmproxy
+cp mitmproxy/dist/mitmproxy $DST
+
+$PYINST_CMD $MITMPROXY/mitmdump
+cp mitmdump/dist/mitmdump $DST
 
-./pyinstaller.py -F ~/mitmproxy/mitmproxy/mitmdump
-cp mitmdump/dist/mitmdump /tmp/osx-mitmproxy
+cshape $MITMPROXY/doc-src $DST/doc
