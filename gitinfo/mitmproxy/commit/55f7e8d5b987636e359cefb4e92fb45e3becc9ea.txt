commit 55f7e8d5b987636e359cefb4e92fb45e3becc9ea
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sat Jul 13 14:44:09 2013 +1200

    Don't take minor version into account when checking serialized data compatiblity.

diff --git a/libmproxy/flow.py b/libmproxy/flow.py
index 10c5da5d..427f1547 100644
--- a/libmproxy/flow.py
+++ b/libmproxy/flow.py
@@ -790,6 +790,7 @@ class Response(HTTPMsg):
             cookies.append((cookie_name, (cookie_value, cookie_parameters)))
         return dict(cookies)
 
+
 class ClientDisconnect:
     """
         A client disconnection event.
@@ -1654,7 +1655,7 @@ class FlowReader:
         try:
             while 1:
                 data = tnetstring.load(self.fo)
-                if tuple(data["version"]) != version.IVERSION:
+                if tuple(data["version"][:1]) != version.IVERSION[:1]:
                     v = ".".join(str(i) for i in data["version"])
                     raise FlowReadError("Incompatible serialized data version: %s"%v)
                 off = self.fo.tell()
diff --git a/libmproxy/proxy.py b/libmproxy/proxy.py
index 8dfae77a..e68aae87 100644
--- a/libmproxy/proxy.py
+++ b/libmproxy/proxy.py
@@ -88,7 +88,7 @@ class ServerConnection(tcp.TCPClient):
     def terminate(self):
         try:
             self.wfile.flush()
-        except IOError:
+        except IOError: # pragma: no cover
             pass
         try:
             self.connection.close()
