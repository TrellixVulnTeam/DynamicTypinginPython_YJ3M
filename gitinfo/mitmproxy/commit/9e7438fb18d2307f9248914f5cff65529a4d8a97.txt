commit 9e7438fb18d2307f9248914f5cff65529a4d8a97
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Wed Oct 19 23:16:18 2016 +1300

    console: fix master invocation order

diff --git a/mitmproxy/tools/console/master.py b/mitmproxy/tools/console/master.py
index e80cb0af..b3fd0adb 100644
--- a/mitmproxy/tools/console/master.py
+++ b/mitmproxy/tools/console/master.py
@@ -224,7 +224,7 @@ class ConsoleMaster(master.Master):
     palette = []
 
     def __init__(self, options, server):
-        master.Master.__init__(self, options, server)
+        super().__init__(options, server)
         self.state = ConsoleState()
         self.stream_path = None
         # This line is just for type hinting
diff --git a/mitmproxy/tools/main.py b/mitmproxy/tools/main.py
index 05ae780e..5d4e8dc9 100644
--- a/mitmproxy/tools/main.py
+++ b/mitmproxy/tools/main.py
@@ -68,7 +68,7 @@ def mitmproxy(args=None):  # pragma: no cover
         console_options.no_mouse = args.no_mouse
 
         server = process_options(parser, console_options, args)
-        m = console.master.ConsoleMaster(server, console_options)
+        m = console.master.ConsoleMaster(console_options, server)
     except exceptions.OptionsError as e:
         print("mitmproxy: %s" % e, file=sys.stderr)
         sys.exit(1)
