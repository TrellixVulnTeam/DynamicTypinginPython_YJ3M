commit b1f410c78d95a2c791d4bea461f0cb6aaeb5b59b
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sat Jun 9 20:42:43 2012 +1200

    Join thread on test exit to avoid race condition.

diff --git a/libpathod/test.py b/libpathod/test.py
index b7475bc9..dcbb65d5 100644
--- a/libpathod/test.py
+++ b/libpathod/test.py
@@ -20,6 +20,7 @@ class Daemon:
 
     def shutdown(self):
         requests.post("%s/api/shutdown"%self.urlbase, verify=False)
+        self.thread.join()
 
 
 class PaThread(threading.Thread):
