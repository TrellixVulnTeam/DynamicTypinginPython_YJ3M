commit 4fdc2179e25926d531ea8c4a5d6fc78ce75cd6ff
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Tue Jul 10 16:34:39 2012 +1200

    Don't write empty values.

diff --git a/netlib/tcp.py b/netlib/tcp.py
index 53ad8a05..6ba58d86 100644
--- a/netlib/tcp.py
+++ b/netlib/tcp.py
@@ -63,10 +63,11 @@ class FileLike:
         return result
 
     def write(self, v):
-        try:
-            return self.o.sendall(v)
-        except SSL.SysCallError:
-            raise NetLibDisconnect()
+        if v:
+            try:
+                return self.o.sendall(v)
+            except SSL.SysCallError:
+                raise NetLibDisconnect()
 
     def readline(self, size = None):
         result = ''
