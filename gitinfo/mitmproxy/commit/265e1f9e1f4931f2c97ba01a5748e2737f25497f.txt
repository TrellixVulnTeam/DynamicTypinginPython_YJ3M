commit 265e1f9e1f4931f2c97ba01a5748e2737f25497f
Author: madt1m <blackjuniper@protonmail.com>
Date:   Sat Jun 23 03:52:46 2018 +0200

    Fixed a bug in protobuf loading -> no return

diff --git a/mitmproxy/io/db.py b/mitmproxy/io/db.py
index b59650ab..63cb0880 100644
--- a/mitmproxy/io/db.py
+++ b/mitmproxy/io/db.py
@@ -39,4 +39,4 @@ class DbHandler:
         flows = []
         self._c.execute('SELECT pbuf_blob FROM FLOWS')
         for row in self._c.fetchall():
-            flows.append(HTTPFlow.from_state(protobuf.loads(row[0])))
+            flows.append((protobuf.loads(row[0])))
diff --git a/mitmproxy/io/protobuf.py b/mitmproxy/io/protobuf.py
index dc526d36..bb24cddc 100644
--- a/mitmproxy/io/protobuf.py
+++ b/mitmproxy/io/protobuf.py
@@ -1,5 +1,6 @@
 from mitmproxy import flow
 from mitmproxy import exceptions
+from mitmproxy.http import HTTPFlow
 from mitmproxy.io.proto import http_pb2
 
 
@@ -41,6 +42,7 @@ def loads(blob: bytes) -> flow.Flow:
     state = dict()
     r.ParseFromString(blob)
     _dump_object(r, state)
+    return HTTPFlow.from_state(state)
 
 
 def _dump_object(obj, d):
