commit 426f84d93036f1a9236061259c53cc2d36bd3d46
Author: Matthew Shao <me@matshao.com>
Date:   Fri Mar 11 08:44:51 2016 +0800

    Add update_focus method in console/__init__.py.

diff --git a/mitmproxy/console/__init__.py b/mitmproxy/console/__init__.py
index f31c4bbc..16615cbc 100644
--- a/mitmproxy/console/__init__.py
+++ b/mitmproxy/console/__init__.py
@@ -50,7 +50,7 @@ class ConsoleState(flow.State):
         if self.focus is None:
             self.set_focus(0)
         elif self.follow_focus:
-            self.set_focus(len(self.view) - 1)
+            self.update_focus()
         self.set_flow_marked(f, False)
         return f
 
@@ -59,7 +59,7 @@ class ConsoleState(flow.State):
         if self.focus is None:
             self.set_focus(0)
         elif self.follow_focus:
-            self.set_focus(self.flow_count())
+            self.update_focus()
         return f
 
     def set_limit(self, limit):
@@ -82,6 +82,9 @@ class ConsoleState(flow.State):
         else:
             self.focus = None
 
+    def update_focus(self):
+        self.set_focus(len(self.view) - 1)
+
     def set_focus_flow(self, f):
         self.set_focus(self.view.index(f))
 
