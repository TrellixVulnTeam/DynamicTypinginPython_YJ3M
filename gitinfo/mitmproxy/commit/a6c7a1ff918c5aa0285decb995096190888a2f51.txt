commit a6c7a1ff918c5aa0285decb995096190888a2f51
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sun Oct 16 11:34:27 2016 +1300

    scripts: handle SystemExit from scripts explicitly

diff --git a/mitmproxy/builtins/script.py b/mitmproxy/builtins/script.py
index bbefc5c7..15ee4936 100644
--- a/mitmproxy/builtins/script.py
+++ b/mitmproxy/builtins/script.py
@@ -88,6 +88,8 @@ def scriptenv(path, args):
     sys.path.append(script_dir)
     try:
         yield
+    except SystemExit as v:
+        ctx.log.error("Script exited with code %s" % v.code)
     except Exception:
         etype, value, tb = sys.exc_info()
         tb = cut_traceback(tb, "scriptenv").tb_next
