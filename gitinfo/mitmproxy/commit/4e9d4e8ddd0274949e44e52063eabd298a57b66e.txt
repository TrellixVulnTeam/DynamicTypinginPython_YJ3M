commit 4e9d4e8ddd0274949e44e52063eabd298a57b66e
Author: Aldo Cortesi <aldo@nullcube.com>
Date:   Sun Jul 1 11:53:46 2012 +1200

    Tweak upstream SNI.

diff --git a/libmproxy/proxy.py b/libmproxy/proxy.py
index 6ab1d489..f13dce60 100644
--- a/libmproxy/proxy.py
+++ b/libmproxy/proxy.py
@@ -88,7 +88,7 @@ class ServerConnection(tcp.TCPClient):
                 path = os.path.join(self.config.clientcerts, self.host) + ".pem"
                 if os.path.exists(clientcert):
                     clientcert = path
-            self.convert_to_ssl(clientcert=clientcert)
+            self.convert_to_ssl(clientcert=clientcert, sni=self.host)
 
     def send(self, request):
         self.requestcount += 1
