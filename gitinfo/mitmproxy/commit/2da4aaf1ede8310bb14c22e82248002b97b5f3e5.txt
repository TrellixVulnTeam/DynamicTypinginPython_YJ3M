commit 2da4aaf1ede8310bb14c22e82248002b97b5f3e5
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Mon Sep 21 18:39:37 2015 +0200

    adjust to netlib changes

diff --git a/.coveragerc b/.coveragerc
index 27a4aa3d..7e978294 100644
--- a/.coveragerc
+++ b/.coveragerc
@@ -1,2 +1,10 @@
+[run]
+branch = True
+
 [report]
+show_missing = True
 include = *libpathod*
+exclude_lines =
+    pragma: nocover
+    pragma: no cover
+    raise NotImplementedError()
diff --git a/libpathod/protocols/http.py b/libpathod/protocols/http.py
index 0ed6c01e..1f1765cb 100644
--- a/libpathod/protocols/http.py
+++ b/libpathod/protocols/http.py
@@ -23,7 +23,7 @@ class HTTPProtocol(object):
                 msg="Access denied: web interface disabled"
             )
         lg("app: %s %s" % (method, path))
-        req = wsgi.Request("http", method, path, headers, body)
+        req = wsgi.Request("http", method, path, b"HTTP/1.1", headers, body)
         flow = wsgi.Flow(self.pathod_handler.address, req)
         sn = self.pathod_handler.connection.getsockname()
         a = wsgi.WSGIAdaptor(
