commit b27db1fc812b5b9935599caf5d0a2cdfe34d7322
Author: Maximilian Hils <git@maximilianhils.com>
Date:   Tue Jul 19 18:09:33 2016 -0700

    minor fixes

diff --git a/mitmproxy/contrib/tnetstring.py b/mitmproxy/contrib/tnetstring.py
index d99a83f9..86236caa 100644
--- a/mitmproxy/contrib/tnetstring.py
+++ b/mitmproxy/contrib/tnetstring.py
@@ -188,9 +188,9 @@ def load(file_handle):
 
 
 def parse(data_type, data):
+    # type: (int, bytes) -> TSerializable
     if six.PY2:
         data_type = ord(data_type)
-    # type: (int, bytes) -> TSerializable
     if data_type == ord(b','):
         return data
     if data_type == ord(b';'):
diff --git a/mitmproxy/flow/io_compat.py b/mitmproxy/flow/io_compat.py
index bcfbd375..8cd883c3 100644
--- a/mitmproxy/flow/io_compat.py
+++ b/mitmproxy/flow/io_compat.py
@@ -4,6 +4,7 @@ This module handles the import of mitmproxy flows generated by old versions.
 from __future__ import absolute_import, print_function, division
 
 import six
+from typing import Any  # noqa
 
 from netlib import version, strutils
 
diff --git a/netlib/encoding.py b/netlib/encoding.py
index 8b67b543..e3cf5f30 100644
--- a/netlib/encoding.py
+++ b/netlib/encoding.py
@@ -12,7 +12,7 @@ from typing import Union  # noqa
 
 
 def decode(obj, encoding, errors='strict'):
-    # type: (Union[str, bytes], str) -> Union[str, bytes]
+    # type: (Union[str, bytes], str, str) -> Union[str, bytes]
     """
     Decode the given input object
 
@@ -36,7 +36,7 @@ def decode(obj, encoding, errors='strict'):
 
 
 def encode(obj, encoding, errors='strict'):
-    # type: (Union[str, bytes], str) -> Union[str, bytes]
+    # type: (Union[str, bytes], str, str) -> Union[str, bytes]
     """
     Encode the given input object
 
diff --git a/release/setup.py b/release/setup.py
index 78155140..601654e5 100644
--- a/release/setup.py
+++ b/release/setup.py
@@ -7,7 +7,7 @@ setup(
     install_requires=[
         "click>=6.2, <7.0",
         "twine>=1.6.5, <1.7",
-        "virtualenv>=14.0.5, <14.1",
+        "virtualenv>=14.0.5, <15.1",
         "wheel>=0.29.0, <0.30",
         "six>=1.10.0, <1.11",
         "pysftp>=0.2.8, !=0.2.9, <0.3",
