commit 17e664124ae441d1775f0fe9ad7ff2d2a1d527d3
Author: byron <byron@plot.ly>
Date:   Sat Aug 17 03:13:56 2019 -0400

    :alembic: tune

diff --git a/dash/_utils.py b/dash/_utils.py
index 3bfa781d..6cb98c20 100644
--- a/dash/_utils.py
+++ b/dash/_utils.py
@@ -147,9 +147,9 @@ def compute_md5(path):
     with open(path) as fp:
         content = fp.read()
         try:
-            buf = content.encode("utf-8")
-        except UnicodeDecodeError:
-            buf = content.decode('utf-8')
+            buf = unicode(content, 'utf-8').encode('utf-8')  # noqa:F821
+        except NameError:
+            buf = content.encode('utf-8')
         return hashlib.md5(buf).hexdigest()
 
 
diff --git a/tests/integration/test_race_conditions.py b/tests/integration/test_race_conditions.py
index 28ad06f3..2c7cdd05 100644
--- a/tests/integration/test_race_conditions.py
+++ b/tests/integration/test_race_conditions.py
@@ -16,7 +16,7 @@ class Tests(IntegrationTests):
         pass
 
 
-DELAY_TIME = 0.5
+DELAY_TIME = 0.7
 
 
 def create_race_conditions_test(endpoints):
