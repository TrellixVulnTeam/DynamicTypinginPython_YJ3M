commit f216dabcef6a675c4d50c5abd7e65a2b018781bb
Author: Philippe Duval <philippe@plot.ly>
Date:   Thu Aug 23 12:23:57 2018 -0400

    Update circle.

diff --git a/.circleci/config.yml b/.circleci/config.yml
new file mode 100644
index 00000000..94d848c0
--- /dev/null
+++ b/.circleci/config.yml
@@ -0,0 +1,73 @@
+version: 2
+
+jobs:
+  "python-2.7": &test-template
+    docker:
+      - image: circleci/python:2.7-stretch-node-browsers
+    environment:
+      PERCY_PARALLEL_TOTAL: 2
+
+    working_directory: ~/repo
+
+    steps:
+      - checkout
+
+      - run:
+          name: Set PERCY_NONCE
+          command: echo export PERCY_PARALLEL_NONCE=$CIRCLE_WORKFLOW_ID >> $HOME/.circlerc
+
+      - run:
+          name: Write Job name
+          command: echo $CIRCLE_JOB > circlejob.txt
+
+      - restore_cache:
+          key: deps1-{{ .Branch }}-{{ checksum "dev-requirements.txt" }}-{{ checksum "package.json" }}-{{ checksum ".circleci/config.yml" }}-{{ checksum "circlejob.txt" }}
+
+      - run:
+          name: Install dependencies
+          command: |
+              sudo pip install virtualenv --upgrade
+              python -m venv venv || virtualenv venv
+              . venv/bin/activate
+              pip install -r dev-requirements.txt --quiet
+              npm install --ignore-scripts
+
+      - run:
+          name: Build
+          command: npm run build-prod
+
+      - save_cache:
+          key: deps1-{{ .Branch }}-{{ checksum "dev-requirements.txt" }}-{{ checksum "package.json" }}-{{ checksum ".circleci/config.yml" }}-{{ checksum "circlejob.txt" }}
+          paths:
+              - "venv"
+              - "node_modules"
+
+      - run:
+          name: Npm test
+          command:  npm test
+
+      - run:
+          name: Run tests
+          command: |
+              . venv/bin/activate
+              python --version
+              python -m unittest tests.test_render.Tests
+              python -m unittest tests.test_race_conditions.Tests
+
+  "python-3.6":
+    <<: *test-template
+    docker:
+      - image: circleci/python:3.6-stretch-node-browsers
+
+  "python-3.7":
+    <<: *test-template
+    docker:
+      - image: circleci/python:3.7-stretch-node-browsers
+
+workflows:
+  version: 2
+  build:
+    jobs:
+      - "python-2.7"
+      - "python-3.6"
+      - "python-3.7"
\ No newline at end of file
diff --git a/circle.yml b/circle.yml
deleted file mode 100644
index 05f43484..00000000
--- a/circle.yml
+++ /dev/null
@@ -1,24 +0,0 @@
-machine:
-    pre:
-        - echo export PERCY_PARALLEL_NONCE=$CIRCLE_BUILD_NUM >> $HOME/.circlerc
-
-    node:
-        version: 6.9.2
-    post:
-        - pyenv global 2.7.10 3.6.2
-    environment:
-        TOX_PYTHON_27: python2.7
-        TOX_PYTHON_36: python3.6
-
-dependencies:
-    pre:
-        - pip install tox
-        - pip install -r dev-requirements.txt
-        - npm install
-        - npm run build-prod
-
-
-test:
-    override:
-        - tox
-        - npm run test
diff --git a/dev-requirements.txt b/dev-requirements.txt
index d2aa3b14..e5d48870 100644
--- a/dev-requirements.txt
+++ b/dev-requirements.txt
@@ -4,5 +4,4 @@ dash==0.18.3
 percy
 selenium
 mock
-tox
 six
diff --git a/tox.ini b/tox.ini
deleted file mode 100644
index d4484999..00000000
--- a/tox.ini
+++ /dev/null
@@ -1,27 +0,0 @@
-[tox]
-envlist = py27,py36
-
-[testenv]
-deps = -rdev-requirements.txt
-
-passenv = *
-
-[testenv:py27]
-basepython =
-    {env:TOX_PYTHON_27}
-setenv =
-    PERCY_PARALLEL_TOTAL=4
-commands =
-    python --version
-    python -m unittest tests.test_render.Tests
-    python -m unittest tests.test_race_conditions.Tests
-
-[testenv:py36]
-basepython =
-    {env:TOX_PYTHON_36}
-setenv =
-    PERCY_PARALLEL_TOTAL=4
-commands =
-    python --version
-    python -m unittest tests.test_render.Tests
-    python -m unittest tests.test_race_conditions.Tests
