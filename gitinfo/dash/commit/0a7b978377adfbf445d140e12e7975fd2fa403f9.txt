commit 0a7b978377adfbf445d140e12e7975fd2fa403f9
Author: Chris P <christopher.parmer@gmail.com>
Date:   Sun Apr 19 09:40:23 2015 -0400

    define socket at start

diff --git a/static/js/plotlyEmbed.js b/static/js/plotlyEmbed.js
index 4ff03e06..d923f56d 100644
--- a/static/js/plotlyEmbed.js
+++ b/static/js/plotlyEmbed.js
@@ -1,3 +1,4 @@
+var socket = io.connect(window.location.protocol + '//' + document.domain + ':' + location.port);
 $(document).ready(function(){
 
     function init_graph_obj(id){
@@ -24,7 +25,6 @@ $(document).ready(function(){
 
     // the socket.io documentation recommends sending an explicit package upon connection
     // this is specially important when using the global namespace
-    var socket = io.connect(window.location.protocol + '//' + document.domain + ':' + location.port);
 
     socket.on('connect', function() {
         socket.emit('my event', {data: 'I\'m connected!'});
