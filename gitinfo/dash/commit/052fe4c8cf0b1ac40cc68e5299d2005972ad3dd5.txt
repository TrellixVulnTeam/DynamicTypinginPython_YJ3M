commit 052fe4c8cf0b1ac40cc68e5299d2005972ad3dd5
Author: alexcjohnson <alex@plot.ly>
Date:   Wed Oct 2 13:57:20 2019 -0400

    robustify hot reload test

diff --git a/tests/integration/devtools/test_hot_reload.py b/tests/integration/devtools/test_hot_reload.py
index 1bb2b44d..b57bba4d 100644
--- a/tests/integration/devtools/test_hot_reload.py
+++ b/tests/integration/devtools/test_hot_reload.py
@@ -1,9 +1,17 @@
 import os
-import textwrap
+from time import sleep
+
 import dash_html_components as html
 import dash
 
 
+RED_BG = """
+#hot-reload-content {
+    background-color: red;
+}
+"""
+
+
 def test_dvhr001_hot_reload(dash_duo):
     app = dash.Dash(__name__, assets_folder="hr_assets")
     app.layout = html.Div([html.H3("Hot reload")], id="hot-reload-content")
@@ -12,7 +20,7 @@ def test_dvhr001_hot_reload(dash_duo):
         app,
         dev_tools_hot_reload=True,
         dev_tools_hot_reload_interval=0.1,
-        dev_tools_hot_reload_max_retry=30,
+        dev_tools_hot_reload_max_retry=100,
     )
 
     # default overload color is blue
@@ -24,18 +32,11 @@ def test_dvhr001_hot_reload(dash_duo):
         os.path.dirname(__file__), "hr_assets", "hot_reload.css"
     )
     with open(hot_reload_file, "r+") as fp:
+        sleep(1)  # ensure a new mod time
         old_content = fp.read()
         fp.truncate(0)
         fp.seek(0)
-        fp.write(
-            textwrap.dedent(
-                """
-        #hot-reload-content {
-            background-color: red;
-        }
-        """
-            )
-        )
+        fp.write(RED_BG)
 
     try:
         # red is live changed during the test execution
@@ -43,5 +44,10 @@ def test_dvhr001_hot_reload(dash_duo):
             "#hot-reload-content", "background-color", "rgba(255, 0, 0, 1)"
         )
     finally:
+        sleep(1)  # ensure a new mod time
         with open(hot_reload_file, "w") as f:
             f.write(old_content)
+
+    dash_duo.wait_for_style_to_equal(
+        "#hot-reload-content", "background-color", "rgba(0, 0, 255, 1)"
+    )
