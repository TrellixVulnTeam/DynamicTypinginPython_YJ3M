commit 821bdeba7be654bc17b60102919a80a0dd328664
Author: byron <byron@plot.ly>
Date:   Mon Nov 18 00:20:41 2019 -0500

    mute pytest11 if no testing modules installed

diff --git a/dash/testing/plugin.py b/dash/testing/plugin.py
index 715d6ef6..b2206006 100644
--- a/dash/testing/plugin.py
+++ b/dash/testing/plugin.py
@@ -13,15 +13,13 @@ try:
 except ImportError:
     pass
 
-WEBDRIVERS = {"Chrome", "Firefox"}
-
 
 def pytest_addoption(parser):
     dash = parser.getgroup("Dash", "Dash Integration Tests")
 
     dash.addoption(
         "--webdriver",
-        choices=tuple(WEBDRIVERS),
+        choices=("Chrome", "Firefox"),
         default="Chrome",
         help="Name of the selenium driver to use",
     )
diff --git a/setup.py b/setup.py
index ec8cafd8..03b5d5f4 100644
--- a/setup.py
+++ b/setup.py
@@ -1,6 +1,20 @@
 import io
+import pkgutil
 from setuptools import setup, find_packages
 
+ENTRY_POINTS = {
+    "console_scripts": [
+        "dash-generate-components = "
+        "dash.development.component_generator:cli",
+        "renderer = dash.development.build_process:renderer",
+    ]
+}
+
+# this is not a complete guess, but picking two typical dash dependencies in
+# require-testing.txt
+if pkgutil.find_loader("waitress") and pkgutil.find_loader("percy"):
+    ENTRY_POINTS["pytest11"] = ["dash = dash.testing.plugin"]
+
 main_ns = {}
 exec(open("dash/version.py").read(), main_ns)  # pylint: disable=exec-used
 
@@ -26,19 +40,12 @@ setup(
     long_description=io.open("README.md", encoding="utf-8").read(),
     long_description_content_type="text/markdown",
     install_requires=read_req_file("install"),
-    python_requires='>=2.7, !=3.0.*, !=3.1.*, !=3.2.*',
+    python_requires=">=2.7, !=3.0.*, !=3.1.*, !=3.2.*",
     extras_require={
         "dev": read_req_file("dev"),
         "testing": read_req_file("testing"),
     },
-    entry_points={
-        "console_scripts": [
-            "dash-generate-components = "
-            "dash.development.component_generator:cli",
-            "renderer = dash.development.build_process:renderer",
-        ],
-        "pytest11": ["dash = dash.testing.plugin"],
-    },
+    entry_points=ENTRY_POINTS,
     url="https://plot.ly/dash",
     classifiers=[
         "Development Status :: 5 - Production/Stable",
