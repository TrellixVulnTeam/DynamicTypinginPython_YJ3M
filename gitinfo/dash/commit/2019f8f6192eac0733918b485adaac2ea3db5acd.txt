commit 2019f8f6192eac0733918b485adaac2ea3db5acd
Author: alexcjohnson <alex@plot.ly>
Date:   Thu Jan 30 23:39:26 2020 -0500

    fix callback_context

diff --git a/dash/_utils.py b/dash/_utils.py
index bf4c92c8..08def4d9 100644
--- a/dash/_utils.py
+++ b/dash/_utils.py
@@ -203,9 +203,9 @@ def stringify_id(id_):
     return id_
 
 
-def inputs_to_dict(inputs):
+def inputs_to_dict(inputs_list):
     inputs = {}
-    for i in inputs:
+    for i in inputs_list:
         inputsi = i if isinstance(i, list) else [i]
         for ii in inputsi:
             id_str = stringify_id(ii["id"])
diff --git a/dash/dash.py b/dash/dash.py
index 7fe922b9..0a87bebb 100644
--- a/dash/dash.py
+++ b/dash/dash.py
@@ -925,7 +925,7 @@ class Dash(object):
                 if isinstance(output_value, _NoUpdate):
                     raise PreventUpdate
 
-                output_spec = flask.g.outputs_list
+                output_spec = self._outputs_list
                 # wrap single outputs so we can treat them all the same
                 # for validation and response creation
                 if not multi:
@@ -975,7 +975,8 @@ class Dash(object):
         flask.g.inputs_list = inputs = body.get("inputs", [])
         flask.g.states_list = state = body.get("state", [])
         output = body["output"]
-        flask.g.outputs_list = body.get("outputs") or split_callback_id(output)
+        outputs_list = body.get("outputs") or split_callback_id(output)
+        flask.g.outputs_list = self._outputs_list = outputs_list
 
         flask.g.input_values = input_values = inputs_to_dict(inputs)
         flask.g.state_values = inputs_to_dict(state)
@@ -991,6 +992,7 @@ class Dash(object):
         args = inputs_to_vals(inputs) + inputs_to_vals(state)
 
         response.set_data(self.callback_map[output]["callback"](*args))
+        del self._outputs_list
         return response
 
     def _setup_server(self):
