commit 18d25abce3f3d4fab0c9248861572244c18cffea
Author: Ryan Marren <rymarr@tuta.io>
Date:   Tue Aug 14 20:41:37 2018 -0400

    Change _validate_layout to accept functions that return layouts.

diff --git a/dash/dash.py b/dash/dash.py
index 80691b9f..4b86c71a 100644
--- a/dash/dash.py
+++ b/dash/dash.py
@@ -875,10 +875,15 @@ class Dash(object):
                 'Make sure to set the `layout` attribute of your application '
                 'before running the server.')
 
+        if callable(self.layout):
+            to_validate = self.layout()  # pylint: disable=not-callable
+        else:
+            to_validate = self.layout
+
         layout_id = getattr(self.layout, 'id', None)
 
         component_ids = {layout_id} if layout_id else set()
-        for component in self.layout.traverse():
+        for component in to_validate.traverse():
             component_id = getattr(component, 'id', None)
             if component_id and component_id in component_ids:
                 raise exceptions.DuplicateIdError(
diff --git a/tests/test_integration.py b/tests/test_integration.py
index 7826de6b..bec9bbd1 100644
--- a/tests/test_integration.py
+++ b/tests/test_integration.py
@@ -12,7 +12,7 @@ import dash
 import time
 
 from dash.dependencies import Input, Output
-from dash.exceptions import PreventUpdate
+from dash.exceptions import PreventUpdate, NoLayoutException
 from .IntegrationTests import IntegrationTests
 from .utils import assert_clean_console, invincible, wait_for
 
@@ -482,3 +482,14 @@ class Tests(IntegrationTests):
                 (("//script[@src='{}']", x) for x in js_urls),
                 (("//link[@href='{}']", x) for x in css_urls)):
             self.driver.find_element_by_xpath(fmt.format(url))
+
+    def test_func_layout_accepted(self):
+
+        app = dash.Dash()
+
+        def create_layout():
+            return html.Div('Hello World')
+        app.layout = create_layout
+
+        self.startServer(app)
+        time.sleep(0.5)
