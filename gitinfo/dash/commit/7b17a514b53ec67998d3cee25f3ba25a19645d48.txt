commit 7b17a514b53ec67998d3cee25f3ba25a19645d48
Author: byron <byron@plot.ly>
Date:   Thu Jul 18 23:15:37 2019 -0400

    :bug: fix one typo indent, add wait.until for process server

diff --git a/dash/testing/application_runners.py b/dash/testing/application_runners.py
index 7f2f9ecc..7456bff3 100644
--- a/dash/testing/application_runners.py
+++ b/dash/testing/application_runners.py
@@ -146,8 +146,7 @@ class ThreadedRunner(BaseDashRunner):
                 kwargs["port"] = self.port
             else:
                 self.port = kwargs["port"]
-
-        app.run_server(threaded=True, **kwargs)
+            app.run_server(threaded=True, **kwargs)
 
         self.thread = threading.Thread(target=run)
         self.thread.daemon = True
@@ -195,6 +194,9 @@ class ProcessRunner(BaseDashRunner):
             self.proc = subprocess.Popen(
                 args, stdout=subprocess.PIPE, stderr=subprocess.PIPE
             )
+            # wait until server is able to answer http request
+            wait.until(lambda: self.accessible(self.url), timeout=3)
+
         except (OSError, ValueError):
             logger.exception("process server has encountered an error")
             self.started = False
