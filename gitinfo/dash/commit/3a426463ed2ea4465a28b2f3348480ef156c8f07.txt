commit 3a426463ed2ea4465a28b2f3348480ef156c8f07
Author: byron <byron@plot.ly>
Date:   Fri May 10 14:11:42 2019 -0400

    :truck: restructure the test for test_assets

diff --git a/pytest.ini b/pytest.ini
index 41eb9cd2..57958253 100644
--- a/pytest.ini
+++ b/pytest.ini
@@ -1,3 +1,4 @@
 [pytest]
-log_cli_level = INFO
 addopts = -rsxX -v
+log_print=True
+log_cli_level=DEBUG
\ No newline at end of file
diff --git a/tests/integration/IntegrationTests.py b/tests/integration/IntegrationTests.py
index f1ba42da..555c5253 100644
--- a/tests/integration/IntegrationTests.py
+++ b/tests/integration/IntegrationTests.py
@@ -40,7 +40,7 @@ class IntegrationTests(unittest.TestCase):
         cls.percy_runner = percy.Runner(
             loader=percy.ResourceLoader(
                 webdriver=cls.driver,
-                base_url='/assets', root_dir='tests/integration/assets'))
+                base_url='/assets', root_dir='tests/assets'))
 
         cls.percy_runner.initialize_build()
 
@@ -55,9 +55,9 @@ class IntegrationTests(unittest.TestCase):
 
     def tearDown(self):
         try:
-            time.sleep(2)
+            time.sleep(1)
             self.server_process.terminate()
-            time.sleep(2)
+            time.sleep(1.5)
         except AttributeError:
             pass
         finally:
diff --git a/tests/integration/assets/load_first.js b/tests/integration/dash_assets/assets/load_first.js
similarity index 100%
rename from tests/integration/assets/load_first.js
rename to tests/integration/dash_assets/assets/load_first.js
diff --git a/tests/integration/assets/load_ignored.js b/tests/integration/dash_assets/assets/load_ignored.js
similarity index 100%
rename from tests/integration/assets/load_ignored.js
rename to tests/integration/dash_assets/assets/load_ignored.js
diff --git a/tests/integration/assets/nested_css/nested.css b/tests/integration/dash_assets/assets/nested_css/nested.css
similarity index 100%
rename from tests/integration/assets/nested_css/nested.css
rename to tests/integration/dash_assets/assets/nested_css/nested.css
diff --git a/tests/integration/assets/nested_js/load_after.js b/tests/integration/dash_assets/assets/nested_js/load_after.js
similarity index 100%
rename from tests/integration/assets/nested_js/load_after.js
rename to tests/integration/dash_assets/assets/nested_js/load_after.js
diff --git a/tests/integration/assets/nested_js/load_after1.js b/tests/integration/dash_assets/assets/nested_js/load_after1.js
similarity index 100%
rename from tests/integration/assets/nested_js/load_after1.js
rename to tests/integration/dash_assets/assets/nested_js/load_after1.js
diff --git a/tests/integration/assets/nested_js/load_after10.js b/tests/integration/dash_assets/assets/nested_js/load_after10.js
similarity index 100%
rename from tests/integration/assets/nested_js/load_after10.js
rename to tests/integration/dash_assets/assets/nested_js/load_after10.js
diff --git a/tests/integration/assets/nested_js/load_after11.js b/tests/integration/dash_assets/assets/nested_js/load_after11.js
similarity index 100%
rename from tests/integration/assets/nested_js/load_after11.js
rename to tests/integration/dash_assets/assets/nested_js/load_after11.js
diff --git a/tests/integration/assets/nested_js/load_after2.js b/tests/integration/dash_assets/assets/nested_js/load_after2.js
similarity index 100%
rename from tests/integration/assets/nested_js/load_after2.js
rename to tests/integration/dash_assets/assets/nested_js/load_after2.js
diff --git a/tests/integration/assets/nested_js/load_after3.js b/tests/integration/dash_assets/assets/nested_js/load_after3.js
similarity index 100%
rename from tests/integration/assets/nested_js/load_after3.js
rename to tests/integration/dash_assets/assets/nested_js/load_after3.js
diff --git a/tests/integration/assets/nested_js/load_after4.js b/tests/integration/dash_assets/assets/nested_js/load_after4.js
similarity index 100%
rename from tests/integration/assets/nested_js/load_after4.js
rename to tests/integration/dash_assets/assets/nested_js/load_after4.js
diff --git a/tests/integration/assets/nested_js/load_last.js b/tests/integration/dash_assets/assets/nested_js/load_last.js
similarity index 100%
rename from tests/integration/assets/nested_js/load_last.js
rename to tests/integration/dash_assets/assets/nested_js/load_last.js
diff --git a/tests/integration/assets/reset.css b/tests/integration/dash_assets/assets/reset.css
similarity index 100%
rename from tests/integration/assets/reset.css
rename to tests/integration/dash_assets/assets/reset.css
diff --git a/tests/integration/dash_assets/test_assets.py b/tests/integration/dash_assets/test_assets.py
new file mode 100644
index 00000000..a634dfb0
--- /dev/null
+++ b/tests/integration/dash_assets/test_assets.py
@@ -0,0 +1,72 @@
+import json
+
+import dash_html_components as html
+import dash_core_components as dcc
+
+from dash import Dash
+from tests.integration.IntegrationTests import IntegrationTests
+from tests.integration.utils import wait_for, invincible
+
+class TestAssets(IntegrationTests):
+
+    def setUp(self):
+        def wait_for_element_by_id(id_):
+            wait_for(lambda: None is not invincible(
+                lambda: self.driver.find_element_by_id(id_)
+            ))
+            return self.driver.find_element_by_id(id_)
+        self.wait_for_element_by_id = wait_for_element_by_id
+
+    def test_assets(self):
+        app = Dash(__name__, assets_ignore='.*ignored.*')
+        app.index_string = '''
+        <!DOCTYPE html>
+        <html>
+            <head>
+                {%metas%}
+                <title>{%title%}</title>
+                {%css%}
+            </head>
+            <body>
+                <div id="tested"></div>
+                {%app_entry%}
+                <footer>
+                    {%config%}
+                    {%scripts%}
+                    {%renderer%}
+                </footer>
+            </body>
+        </html>
+        '''
+
+        app.layout = html.Div([
+            html.Div('Content', id='content'),
+            dcc.Input(id='test')
+        ], id='layout')
+
+        self.startServer(app)
+
+        # time.sleep(3600)
+
+        body = self.driver.find_element_by_tag_name('body')
+
+        body_margin = body.value_of_css_property('margin')
+        self.assertEqual('0px', body_margin)
+
+        content = self.wait_for_element_by_id('content')
+        content_padding = content.value_of_css_property('padding')
+        self.assertEqual('8px', content_padding)
+
+        tested = self.wait_for_element_by_id('tested')
+        tested = json.loads(tested.text)
+
+        order = ('load_first', 'load_after', 'load_after1',
+                 'load_after10', 'load_after11', 'load_after2',
+                 'load_after3', 'load_after4', )
+
+        self.assertEqual(len(order), len(tested))
+
+        for idx, _ in enumerate(tested):
+            self.assertEqual(order[idx], tested[idx])
+
+        self.percy_snapshot('test assets includes')
diff --git a/tests/integration/test_integration.py b/tests/integration/test_integration.py
index 6a835b77..b0002285 100644
--- a/tests/integration/test_integration.py
+++ b/tests/integration/test_integration.py
@@ -228,7 +228,7 @@ class Tests(IntegrationTests):
 
         # React wraps text and numbers with e.g. <!-- react-text: 20 -->
         # Remove those
-        comment_regex = '<!--[^\[](.*?)-->'  # noqa: W605
+        comment_regex = r'<!--[^\[](.*?)-->'  # noqa: W605
 
         # Somehow the html attributes are unordered.
         # Try different combinations (they're all valid html)
@@ -389,60 +389,6 @@ class Tests(IntegrationTests):
 
         self.percy_snapshot('custom-index')
 
-    def test_assets(self):
-        app = Dash(__name__, assets_ignore='.*ignored.*')
-        app.index_string = '''
-        <!DOCTYPE html>
-        <html>
-            <head>
-                {%metas%}
-                <title>{%title%}</title>
-                {%css%}
-            </head>
-            <body>
-                <div id="tested"></div>
-                {%app_entry%}
-                <footer>
-                    {%config%}
-                    {%scripts%}
-                    {%renderer%}
-                </footer>
-            </body>
-        </html>
-        '''
-
-        app.layout = html.Div([
-            html.Div('Content', id='content'),
-            dcc.Input(id='test')
-        ], id='layout')
-
-        self.startServer(app)
-
-        # time.sleep(3600)
-
-        body = self.driver.find_element_by_tag_name('body')
-
-        body_margin = body.value_of_css_property('margin')
-        self.assertEqual('0px', body_margin)
-
-        content = self.wait_for_element_by_id('content')
-        content_padding = content.value_of_css_property('padding')
-        self.assertEqual('8px', content_padding)
-
-        tested = self.wait_for_element_by_id('tested')
-        tested = json.loads(tested.text)
-
-        order = ('load_first', 'load_after', 'load_after1',
-                 'load_after10', 'load_after11', 'load_after2',
-                 'load_after3', 'load_after4', )
-
-        self.assertEqual(len(order), len(tested))
-
-        for idx, _ in enumerate(tested):
-            self.assertEqual(order[idx], tested[idx])
-
-        self.percy_snapshot('test assets includes')
-
     def test_invalid_index_string(self):
         app = Dash()
 
