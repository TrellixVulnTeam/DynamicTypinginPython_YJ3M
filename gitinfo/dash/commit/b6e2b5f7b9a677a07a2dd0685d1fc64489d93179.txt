commit b6e2b5f7b9a677a07a2dd0685d1fc64489d93179
Author: Ryan Marren <rymarr@tuta.io>
Date:   Wed Oct 10 15:08:31 2018 -0400

    Fix 'UNDO' error.

diff --git a/src/reducers/reducer.js b/src/reducers/reducer.js
index cc12cff2..21fda93f 100644
--- a/src/reducers/reducer.js
+++ b/src/reducers/reducer.js
@@ -51,9 +51,7 @@ function getInputHistoryState(itempath, props, state) {
 function recordHistory(reducer) {
     return function (state, action) {
         // Record initial state
-        if (action.type === 'ON_PROP_CHANGE' &&
-            R.isEmpty(state.history.present)
-        ) {
+        if (action.type === 'ON_PROP_CHANGE') {
             const {itempath, props} = action.payload;
             const historyEntry = getInputHistoryState(itempath, props, state);
             if (historyEntry && !R.isEmpty(historyEntry.props)) {
@@ -77,7 +75,7 @@ function recordHistory(reducer) {
                 nextState.history = {
                     past: [
                         ...nextState.history.past,
-                        nextState.history.present
+                        state.history.present
                     ],
                     present: historyEntry,
                     future: []
