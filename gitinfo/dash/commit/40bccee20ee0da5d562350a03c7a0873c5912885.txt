commit 40bccee20ee0da5d562350a03c7a0873c5912885
Author: chriddyp <chris@plot.ly>
Date:   Tue Apr 18 17:52:58 2017 -0400

    :bug: support endpoints that don't return JSON, like 403 responses

diff --git a/src/actions/api.js b/src/actions/api.js
index 16a961bb..652b8b4c 100644
--- a/src/actions/api.js
+++ b/src/actions/api.js
@@ -34,20 +34,32 @@ function apiThunk(endpoint, method, store, id, body) {
             payload: {id, status: 'loading'}
         });
         return request[method](endpoint, body)
-        .then(res => res.json().then(
-            json => {
+        .then(res => {
+            const contentType = res.headers.get("content-type");
+            if(contentType && contentType.indexOf("application/json") !== -1) {
+                return res.json().then(
+                    json => {
+                        dispatch({
+                            type: store,
+                            payload: {
+                                status: res.status,
+                                content: json,
+                                id
+                            }
+                        });
+                        return json;
+                    }
+                )
+            } else {
                 dispatch({
                     type: store,
                     payload: {
-                        status: res.status,
-                        content: json,
-                        id
+                        id,
+                        status: res.status
                     }
                 });
-                return json;
             }
-        ))
-        .catch(err => {
+        }).catch(err => {
             /* eslint-disable no-console */
             console.error(err);
             /* eslint-enable no-console */
@@ -67,7 +79,7 @@ export function getLayout() {
         '/layout',
         'GET',
         'layoutRequest'
-    )
+    );
 }
 
 export function getDependencies() {
