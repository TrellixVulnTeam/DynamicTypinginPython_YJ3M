commit 9c2f38ac84fdea954f7156e45f088133e4238a0f
Author: byron <byron@plot.ly>
Date:   Fri May 10 15:52:14 2019 -0400

    :wrench: make let integration run the last failed as second chance

diff --git a/.circleci/config.yml b/.circleci/config.yml
index 4aefa24d..8879fda4 100644
--- a/.circleci/config.yml
+++ b/.circleci/config.yml
@@ -86,7 +86,7 @@ jobs:
           name: ⚙️ run integration test
           command: |
             . venv/bin/activate
-            pytest --junitxml=test-reports/junit_intg.xml tests/integration
+            pytest --junitxml=test-reports/junit_intg.xml tests/integration || pytest --lf --junitxml=test-reports/junit_intg.xml
       - store_test_results:
           path: test-reports
       - store_artifacts:
diff --git a/tests/integration/test_render.py b/tests/integration/test_render.py
index 228b0063..bce62adb 100644
--- a/tests/integration/test_render.py
+++ b/tests/integration/test_render.py
@@ -1161,7 +1161,7 @@ class Tests(IntegrationTests):
         chapter2_assertions()
         self.assertEqual(call_counts['button-output'].value, 0)
         time.sleep(5)
-        wait_for(lambda: call_counts['button-output'].value)
+        wait_for(lambda: call_counts['button-output'].value == 1)
         time.sleep(2)  # liberally wait for the front-end to process request
         chapter2_assertions()
         self.assertTrue(self.is_console_clean())
