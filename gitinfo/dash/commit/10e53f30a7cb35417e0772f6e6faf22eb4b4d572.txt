commit 10e53f30a7cb35417e0772f6e6faf22eb4b4d572
Author: byron <byron@plot.ly>
Date:   Mon Nov 4 13:12:59 2019 -0500

    update config

diff --git a/.circleci/config.yml b/.circleci/config.yml
index 2853e034..c0c7fbdb 100644
--- a/.circleci/config.yml
+++ b/.circleci/config.yml
@@ -1,5 +1,11 @@
 version: 2
 jobs:
+  percy-finalize:
+    docker:
+      - image: percyio/agent
+    steps:
+      - run: percy finalize --all
+
   artifacts:
     docker:
       - image: circleci/python:3.7-stretch-node-browsers
@@ -216,7 +222,7 @@ jobs:
       - run:
           name: ðŸ¦” percy finalize
           command: npx percy finalize --all
-          when: always
+          when: on_fail
 
   test-36:
       <<: *test
@@ -245,7 +251,12 @@ workflows:
           requires:
             - build-core-37
             - build-misc-37
+      - percy-finalize:
+          requires:
+            - test-37
       - artifacts:
+          requires:
+            - percy-finalize
           filters:
             branches:
               only:
