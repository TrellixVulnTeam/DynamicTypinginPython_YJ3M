commit 410234bda784856e4692a0156ee70f6c5752a06b
Author: Marc-Andr√© Rivet <Marc-Andre-Rivet@users.noreply.github.com>
Date:   Mon Mar 4 16:49:24 2019 -0500

    Improve build (#130)

diff --git a/.circleci/config.yml b/.circleci/config.yml
index 838bbc44..bb7db32f 100644
--- a/.circleci/config.yml
+++ b/.circleci/config.yml
@@ -20,36 +20,42 @@ jobs:
           name: Write Job name
           command: echo $CIRCLE_JOB > circlejob.txt
 
-      - restore_cache:
-          key: deps1-{{ .Branch }}-{{ checksum "dev-requirements.txt" }}-{{ checksum "package.json" }}-{{ checksum ".circleci/config.yml" }}-{{ checksum "circlejob.txt" }}
-
       - run:
           name: Install dependencies
           command: |
-              sudo pip install virtualenv --upgrade
+              sudo pip install --upgrade virtualenv
               python -m venv venv || virtualenv venv
               . venv/bin/activate
-              pip install -e .
               pip install -r dev-requirements.txt --quiet
-              pip list | grep dash
               npm install --ignore-scripts
 
-      - run:
-          name: Build
-          command: npm run build
-
-      - save_cache:
-          key: deps1-{{ .Branch }}-{{ checksum "dev-requirements.txt" }}-{{ checksum "package.json" }}-{{ checksum ".circleci/config.yml" }}-{{ checksum "circlejob.txt" }}
-          paths:
-              - "venv"
-              - "node_modules"
-
       - run:
           name: Lint & format
           command: |
               npm run lint:test
               npm run format:test
 
+      - run:
+          name: Install dependencies (dash)
+          command: |
+              git clone git@github.com:plotly/dash.git
+              git clone git@github.com:plotly/dash-core-components.git
+              git clone git@github.com:plotly/dash-html-components.git
+              git clone git@github.com:plotly/dash-table.git
+              . venv/bin/activate
+              pip install -e ./dash --quiet
+              cd dash-core-components && npm install --ignore-scripts && npm run build && pip install -e . && cd ..
+              cd dash-html-components && npm install --ignore-scripts && npm run build && pip install -e . && cd ..
+              cd dash-table && npm install --ignore-scripts && npm run build && pip install -e . && cd ..
+
+      - run:
+          name: Build
+          command: |
+              . venv/bin/activate
+              npm run build
+              pip install -e . --quiet
+              pip list | grep dash
+
       - run:
           name: Run tests
           command: |
diff --git a/dev-requirements.txt b/dev-requirements.txt
index 0b236f72..0932e63a 100644
--- a/dev-requirements.txt
+++ b/dev-requirements.txt
@@ -1,6 +1,4 @@
--e git+git://github.com/plotly/dash.git@master#egg=dash
--e git+git://github.com/plotly/dash-core-components@fix-select-css#egg=dash-core-components
 percy
 selenium
 mock
-six
+six
\ No newline at end of file
