commit 73c8c001bc4e570ecc2b17d35652739c7b637957
Author: Philippe Duval <philippe@plot.ly>
Date:   Tue Aug 14 17:58:21 2018 -0400

    Include external js before assets, add tests.

diff --git a/dash/dash.py b/dash/dash.py
index 054f6d3a..d128fda2 100644
--- a/dash/dash.py
+++ b/dash/dash.py
@@ -352,13 +352,11 @@ class Dash(object):
         srcs = self._collect_and_register_resources(
             self.scripts._resources._filter_resources(
                 dash_renderer._js_dist_dependencies
-            ) +
-            self.scripts.get_all_scripts() +
-            self.scripts._resources._filter_resources(
-                dash_renderer._js_dist
-            )
-        )
-        srcs = srcs[:-1] + self._external_scripts + [srcs[-1]]
+            )) + self._external_scripts + self._collect_and_register_resources(
+                self.scripts.get_all_scripts() +
+                self.scripts._resources._filter_resources(
+                    dash_renderer._js_dist
+                ))
 
         return '\n'.join([
             _format_tag('script', src)
diff --git a/tests/assets/load_first.js b/tests/assets/load_first.js
index b6837850..22c77997 100644
--- a/tests/assets/load_first.js
+++ b/tests/assets/load_first.js
@@ -1 +1,7 @@
-window.tested = ['load_first'];
\ No newline at end of file
+window.tested = ['load_first'];
+var ramdaTest = document.getElementById('ramda-test');
+if (ramdaTest) {
+    ramdaTest.innerHTML = R.join(' ', R.concat(['hello'], ['world']).map(function(x) {
+        return _.capitalize(x);
+    }));
+}
diff --git a/tests/assets/reset.css b/tests/assets/reset.css
index 8c521ddd..c7c7b586 100644
--- a/tests/assets/reset.css
+++ b/tests/assets/reset.css
@@ -1 +1,2 @@
 body {margin: 0;}
+button {height: 18px}
diff --git a/tests/test_integration.py b/tests/test_integration.py
index 7826de6b..aab043a3 100644
--- a/tests/test_integration.py
+++ b/tests/test_integration.py
@@ -452,11 +452,17 @@ class Tests(IntegrationTests):
             'https://www.google-analytics.com/analytics.js',
             {'src': 'https://cdn.polyfill.io/v2/polyfill.min.js'},
             {
-                'src': 'https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.10/lodash.core.js',
-                'integrity': 'sha256-Qqd/EfdABZUcAxjOkMi8eGEivtdTkh3b65xCZL4qAQA=',
+                'src': 'https://cdnjs.cloudflare.com/ajax/libs/ramda/0.25.0/ramda.min.js',
+                'integrity': 'sha256-YN22NHB7zs5+LjcHWgk3zL0s+CRnzCQzDOFnndmUamY=',
+                'crossorigin': 'anonymous'
+            },
+            {
+                'src': 'https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.10/lodash.min.js',
+                'integrity': 'sha256-VKITM616rVzV+MI3kZMNUDoY5uTsuSl1ZvEeZhNoJVk=',
                 'crossorigin': 'anonymous'
             }
         ]
+
         css_files = [
             'https://codepen.io/chriddyp/pen/bWLwgP.css',
             {
@@ -467,8 +473,30 @@ class Tests(IntegrationTests):
             }
         ]
 
-        app = dash.Dash(
-            external_scripts=js_files, external_stylesheets=css_files)
+        app = dash.Dash(__name__,
+                        external_scripts=js_files,
+                        external_stylesheets=css_files)
+
+        app.index_string = '''
+        <!DOCTYPE html>
+        <html>
+            <head>
+                {%metas%}
+                <title>{%title%}</title>
+                {%css%}
+            </head>
+            <body>
+                <div id="tested"></div>
+                <div id="ramda-test"></div>
+                <button type="button" id="btn">Btn</button>
+                {%app_entry%}
+                <footer>
+                    {%config%}
+                    {%scripts%}
+                </footer>
+            </body>
+        </html>
+        '''
 
         app.layout = html.Div()
 
@@ -482,3 +510,13 @@ class Tests(IntegrationTests):
                 (("//script[@src='{}']", x) for x in js_urls),
                 (("//link[@href='{}']", x) for x in css_urls)):
             self.driver.find_element_by_xpath(fmt.format(url))
+
+        # Ensure the button style was overloaded by reset (set to 38px in codepen)
+        btn = self.driver.find_element_by_id('btn')
+        btn_height = btn.value_of_css_property('height')
+
+        self.assertEqual('18px', btn_height)
+
+        # ensure ramda was loaded before the assets so they can use it.
+        lo_test = self.driver.find_element_by_id('ramda-test')
+        self.assertEqual('Hello World', lo_test.text)
