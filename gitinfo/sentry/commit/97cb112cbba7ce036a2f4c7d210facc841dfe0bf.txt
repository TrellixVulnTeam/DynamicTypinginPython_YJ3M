commit 97cb112cbba7ce036a2f4c7d210facc841dfe0bf
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Nov 2 11:54:44 2015 -0800

    Make sure we catch all urls in all cases

diff --git a/src/sentry/utils/data_scrubber.py b/src/sentry/utils/data_scrubber.py
index 319a57699c..ba2639040c 100644
--- a/src/sentry/utils/data_scrubber.py
+++ b/src/sentry/utils/data_scrubber.py
@@ -44,7 +44,7 @@ class SensitiveDataFilter(object):
     """
     MASK = '*' * 8
     VALUES_RE = re.compile(r'\b(?:\d[ -]*?){13,16}\b')
-    URL_PASSWORD_RE = re.compile(r'\b([\'"]?(?:[a-z0-9]+:)?//[^:]+:)([^@]+)@')
+    URL_PASSWORD_RE = re.compile(r'\b((?:[a-z0-9]+:)?//[^:]+:)([^@]+)@')
 
     def __init__(self, fields=None):
         if fields:
diff --git a/tests/sentry/utils/test_data_scrubber.py b/tests/sentry/utils/test_data_scrubber.py
index 1fe360a6de..a408dbb1d0 100644
--- a/tests/sentry/utils/test_data_scrubber.py
+++ b/tests/sentry/utils/test_data_scrubber.py
@@ -164,8 +164,8 @@ class SensitiveDataFilterTest(TestCase):
 
     def test_sanitize_url_escaped(self):
         proc = SensitiveDataFilter()
-        result = proc.sanitize('foo', "'redis://redis:foo@localhost:6379/0'")
-        self.assertEquals(result, "'redis://redis:%s@localhost:6379/0'" % proc.MASK)
+        result = proc.sanitize('foo', "foo 'redis://redis:foo@localhost:6379/0' bar")
+        self.assertEquals(result, "foo 'redis://redis:%s@localhost:6379/0' bar" % proc.MASK)
 
     def test_sanitize_http_body(self):
         data = {
