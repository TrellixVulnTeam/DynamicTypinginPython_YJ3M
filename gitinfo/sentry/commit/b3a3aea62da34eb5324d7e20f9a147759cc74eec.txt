commit b3a3aea62da34eb5324d7e20f9a147759cc74eec
Author: Jan Michael Auer <account@jauer.org>
Date:   Wed May 30 10:08:53 2018 -0700

    fix(native): Fix version normalization related to mechanism (#8592)

diff --git a/src/sentry/interfaces/exception.py b/src/sentry/interfaces/exception.py
index df690ed1d7..7c7c3d4c99 100644
--- a/src/sentry/interfaces/exception.py
+++ b/src/sentry/interfaces/exception.py
@@ -882,10 +882,8 @@ class SingleException(Interface):
         return cls(**kwargs)
 
     def to_json(self):
-        if self.mechanism:
-            mechanism = self.mechanism.to_json()
-        else:
-            mechanism = None
+        mechanism = isinstance(self.mechanism, Mechanism) and \
+            self.mechanism.to_json() or self.mechanism or None
 
         if self.stacktrace:
             stacktrace = self.stacktrace.to_json()
@@ -908,10 +906,8 @@ class SingleException(Interface):
         }
 
     def get_api_context(self, is_public=False):
-        if self.mechanism:
-            mechanism = self.mechanism.to_json()
-        else:
-            mechanism = None
+        mechanism = isinstance(self.mechanism, Mechanism) and \
+            self.mechanism.to_json() or self.mechanism or None
 
         if self.stacktrace:
             stacktrace = self.stacktrace.get_api_context(is_public=is_public)
diff --git a/src/sentry/lang/native/utils.py b/src/sentry/lang/native/utils.py
index 66adaa56fc..4e21ebd391 100644
--- a/src/sentry/lang/native/utils.py
+++ b/src/sentry/lang/native/utils.py
@@ -86,7 +86,7 @@ def get_sdk_from_os(data):
     if 'name' not in data or 'version' not in data:
         return
     try:
-        version = data['version'].split('-', 1)[0] + '.0' * 3
+        version = six.text_type(data['version']).split('-', 1)[0] + '.0' * 3
         system_version = tuple(int(x) for x in version.split('.')[:3])
     except ValueError:
         return
