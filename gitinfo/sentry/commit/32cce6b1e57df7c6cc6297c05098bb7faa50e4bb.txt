commit 32cce6b1e57df7c6cc6297c05098bb7faa50e4bb
Author: Alex Hofsteede <alex@hofsteede.com>
Date:   Thu Feb 21 15:53:42 2019 -0800

    fix: Check that an integer string is a reasonable primary key (#12142)
    
    Fixes: SENTRY-9F5

diff --git a/src/sentry/db/models/manager.py b/src/sentry/db/models/manager.py
index 0c7895a17b..915e399593 100644
--- a/src/sentry/db/models/manager.py
+++ b/src/sentry/db/models/manager.py
@@ -22,6 +22,7 @@ from django.db.models.signals import (post_save, post_delete, post_init, class_p
 from django.utils.encoding import smart_text
 
 from sentry import nodestore
+from sentry.db.models.fields import BoundedIntegerField
 from sentry.utils.cache import cache
 from sentry.utils.hashlib import md5_text
 from sentry.utils.validators import is_event_id
@@ -350,7 +351,7 @@ class EventManager(BaseManager):
         # TODO (alexh) deprecate lookup by id so we can move to snuba.
 
         event = None
-        if id_or_event_id.isdigit():
+        if id_or_event_id.isdigit() and int(id_or_event_id) <= BoundedIntegerField.MAX_VALUE:
             # If its a numeric string, check if it's an event Primary Key first
             try:
                 if project_id is None:
