commit 2c59c8d0a3fd85078e1806ba1a04a3231c9b098d
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Jun 28 14:53:06 2015 -0700

    Dont support pre/post context without context_line

diff --git a/src/sentry/interfaces/stacktrace.py b/src/sentry/interfaces/stacktrace.py
index acc4a131b1..d736c1dbe0 100644
--- a/src/sentry/interfaces/stacktrace.py
+++ b/src/sentry/interfaces/stacktrace.py
@@ -166,13 +166,17 @@ class Frame(Interface):
             extra_data = dict(enumerate(extra_data))
 
         # XXX: handle lines which were sent as 'null'
-        pre_context = data.get('pre_context', None)
-        if pre_context:
-            pre_context = [c or '' for c in pre_context]
-
-        post_context = data.get('post_context', None)
-        if post_context:
-            post_context = [c or '' for c in post_context]
+        context_line = trim(data.get('context_line'), 256)
+        if context_line is not None:
+            pre_context = data.get('pre_context', None)
+            if pre_context:
+                pre_context = [c or '' for c in pre_context]
+
+            post_context = data.get('post_context', None)
+            if post_context:
+                post_context = [c or '' for c in post_context]
+        else:
+            pre_context, post_context = None, None
 
         kwargs = {
             'abs_path': trim(abs_path, 256),
@@ -180,7 +184,7 @@ class Frame(Interface):
             'module': trim(data.get('module'), 256),
             'function': trim(data.get('function'), 256),
             'in_app': validate_bool(data.get('in_app'), False),
-            'context_line': trim(data.get('context_line'), 256),
+            'context_line': context_line,
             # TODO(dcramer): trim pre/post_context
             'pre_context': pre_context,
             'post_context': post_context,
