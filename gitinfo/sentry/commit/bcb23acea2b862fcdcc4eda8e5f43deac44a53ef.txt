commit bcb23acea2b862fcdcc4eda8e5f43deac44a53ef
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Sep 9 13:22:36 2015 -0500

    Update user agents support for headers as lists (fixes GH-1922)

diff --git a/src/sentry/plugins/sentry_useragents/models.py b/src/sentry/plugins/sentry_useragents/models.py
index 02b4ed328a..2f1984ffb0 100644
--- a/src/sentry/plugins/sentry_useragents/models.py
+++ b/src/sentry/plugins/sentry_useragents/models.py
@@ -26,15 +26,18 @@ class UserAgentPlugin(TagPlugin):
             return []
         if not http.headers:
             return []
-        if 'User-Agent' not in http.headers:
-            return []
-        ua = Parse(http.headers['User-Agent'])
-        if not ua:
-            return []
-        result = self.get_tag_from_ua(ua)
-        if not result:
-            return []
-        return [result]
+
+        output = []
+        for key, value in http.headers:
+            if key != 'User-Agent':
+                continue
+            ua = Parse(value)
+            if not ua:
+                continue
+            result = self.get_tag_from_ua(ua)
+            if result:
+                output.append(result)
+        return result
 
 
 class BrowserPlugin(UserAgentPlugin):
