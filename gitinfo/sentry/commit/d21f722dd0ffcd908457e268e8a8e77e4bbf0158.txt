commit d21f722dd0ffcd908457e268e8a8e77e4bbf0158
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Fri Oct 6 10:55:23 2017 -0700

    build: Add additional install-python-develop target
    
    This splits out the install-python-tests target into two targets, one
    for developing (which includes the tests requirements), one one for
    running the full test suite *with* optional dependencies.

diff --git a/Makefile b/Makefile
index 660ffdb0a9..e6aa6602f8 100644
--- a/Makefile
+++ b/Makefile
@@ -32,7 +32,7 @@ install-brew:
 install-python:
 	# must be executed serialially
 	$(MAKE) install-python-base
-	$(MAKE) install-python-tests
+	$(MAKE) install-python-develop
 
 install-python-base:
 	@echo "--> Installing Python dependencies"
@@ -42,9 +42,12 @@ install-python-base:
 	$(PIP) install ujson
 	$(PIP) install "file://`pwd`#egg=sentry[dev]"
 
-install-python-tests:
+install-python-develop:
 	$(PIP) install "file://`pwd`#egg=sentry[dev,tests]"
 
+install-python-tests:
+	$(PIP) install "file://`pwd`#egg=sentry[dev,tests,optional]"
+
 dev-postgres: install-python
 
 dev-docs:
@@ -195,7 +198,8 @@ travis-setup-cassandra:
 	echo 'create table nodestore (key text primary key, value blob, flags int);' | cqlsh -k sentry --cqlversion=3.1.7
 travis-install-python:
 	$(MAKE) travis-upgrade-pip
-	$(MAKE) install-python install-python
+	$(MAKE) install-python-base
+	$(MAKE) install-python-tests
 	python -m pip install codecov
 travis-noop:
 	@echo "nothing to do here."
@@ -214,11 +218,11 @@ travis-install-acceptance: install-yarn travis-install-postgres
 travis-install-network: travis-install-postgres
 travis-install-js:
 	$(MAKE) travis-upgrade-pip
-	$(MAKE) install-python install-yarn
+	$(MAKE) travis-install-python install-yarn
 travis-install-cli: travis-install-postgres
 travis-install-dist:
 	$(MAKE) travis-upgrade-pip
-	$(MAKE) install-python install-yarn
+	$(MAKE) travis-install-python install-yarn
 travis-install-django-18: travis-install-postgres
 	pip install "Django>=1.8,<1.9"
 
