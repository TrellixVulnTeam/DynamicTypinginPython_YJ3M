commit 2f5b7db8ec07b8107276c8d6d87854ab1050fe6f
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Nov 22 14:26:11 2014 -0800

    Add email inviation functionality to member settings/creation

diff --git a/src/sentry/templates/sentry/organization-member-settings.html b/src/sentry/templates/sentry/organization-member-settings.html
index 81d1ec790a..c3a7e55a25 100644
--- a/src/sentry/templates/sentry/organization-member-settings.html
+++ b/src/sentry/templates/sentry/organization-member-settings.html
@@ -61,6 +61,7 @@
     </fieldset>
 
     <div class="form-actions">
+      <button type="submit" name="op" value="reinvite" class="btn btn-default">{% trans "Resend Invite" %}</button>
       <button type="submit" class="btn btn-primary">{% trans "Save Changes" %}</button>
     </div>
   </form>
diff --git a/src/sentry/web/frontend/create_organization_member.py b/src/sentry/web/frontend/create_organization_member.py
index f5b07e0eb3..67a682616e 100644
--- a/src/sentry/web/frontend/create_organization_member.py
+++ b/src/sentry/web/frontend/create_organization_member.py
@@ -56,6 +56,8 @@ class InviteOrganizationMemberForm(forms.ModelForm):
             data=om.get_audit_log_data(),
         )
 
+        om.send_invite_email()
+
         return om, True
 
 
diff --git a/src/sentry/web/frontend/organization_member_settings.py b/src/sentry/web/frontend/organization_member_settings.py
index 4dec17aa67..c5110c6b5a 100644
--- a/src/sentry/web/frontend/organization_member_settings.py
+++ b/src/sentry/web/frontend/organization_member_settings.py
@@ -4,7 +4,7 @@ from django import forms
 from django.contrib import messages
 from django.core.urlresolvers import reverse
 from django.http import HttpResponseRedirect
-from django.utils.translation import ugettext_lazy as _
+from django.utils.translation import ugettext_lazy as _, ugettext
 
 from sentry.models import (
     AuditLogEntry, AuditLogEntryEvent, OrganizationMember,
@@ -82,6 +82,19 @@ class OrganizationMemberSettingsView(OrganizationView):
         except OrganizationMember.DoesNotExist:
             return HttpResponseRedirect(reverse('sentry'))
 
+        if request.POST.get('op') == 'reinvite' and member.is_pending:
+            messages.success(request, ugettext('An invitation to join %(organization)s has been sent to %(email)s') % {
+                'organization': organization.name,
+                'email': member.email,
+            })
+
+            member.send_invite_email()
+
+            redirect = reverse('sentry-organization-member-settings',
+                               args=[organization.id, member.id])
+
+            return HttpResponseRedirect(redirect)
+
         form = self.get_form(request, member)
         if form.is_valid():
             member = form.save()
