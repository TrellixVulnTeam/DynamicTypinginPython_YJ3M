commit 12d9364c20eb94708e94191b6a785fac4e301db8
Author: Mark Story <mark@mark-story.com>
Date:   Mon Mar 11 14:19:07 2019 -0400

    fix(tests) Dismiss the assistant in tests (#12348)
    
    By dismissing the assistant ahead of time we shouldn't ever see it in
    visual snapshots.
    
    The client provided by BaseTestCase does not have the same baked in
    defaults as the APITestCase does.

diff --git a/tests/acceptance/test_issue_details.py b/tests/acceptance/test_issue_details.py
index fe29cd6e9f..b20f0a7653 100644
--- a/tests/acceptance/test_issue_details.py
+++ b/tests/acceptance/test_issue_details.py
@@ -1,6 +1,9 @@
 from __future__ import absolute_import
 
+import json
+
 from datetime import datetime
+from django.conf import settings
 from django.utils import timezone
 
 from sentry.testutils import AcceptanceTestCase
@@ -27,6 +30,7 @@ class IssueDetailsTest(AcceptanceTestCase):
             name='Bengal',
         )
         self.login_as(self.user)
+        self.dismiss_assistant()
 
     def create_sample_event(self, platform, default=None, sample_name=None):
         event = create_sample_event(
@@ -93,6 +97,7 @@ class IssueDetailsTest(AcceptanceTestCase):
             platform='javascript'
         )
 
+        self.dismiss_assistant()
         self.browser.get(
             u'/{}/{}/issues/{}/events/{}/'.format(self.org.slug,
                                                   self.project.slug, event.group.id, event.id)
@@ -121,6 +126,7 @@ class IssueDetailsTest(AcceptanceTestCase):
             platform='cordova'
         )
 
+        self.dismiss_assistant()
         self.browser.get(
             u'/{}/{}/issues/{}/'.format(self.org.slug, self.project.slug, event.group.id)
         )
@@ -131,7 +137,6 @@ class IssueDetailsTest(AcceptanceTestCase):
         event = self.create_sample_event(
             platform='pii'
         )
-
         self.browser.get(
             u'/{}/{}/issues/{}/'.format(self.org.slug, self.project.slug, event.group.id)
         )
@@ -190,3 +195,19 @@ class IssueDetailsTest(AcceptanceTestCase):
         self.browser.wait_until('.entries')
         self.browser.wait_until('[data-test-id="linked-issues"]')
         self.browser.wait_until('[data-test-id="loaded-device-name"]')
+
+    def dismiss_assistant(self):
+        # Forward session cookie to django client.
+        self.client.cookies[settings.SESSION_COOKIE_NAME] = self.session.session_key
+
+        res = self.client.put(
+            '/api/0/assistant/',
+            content_type='application/json',
+            data=json.dumps({'guide_id': 1, 'status': 'viewed', 'useful': True}))
+        assert res.status_code == 201
+
+        res = self.client.put(
+            '/api/0/assistant/',
+            content_type='application/json',
+            data=json.dumps({'guide_id': 3, 'status': 'viewed', 'useful': True}))
+        assert res.status_code == 201
