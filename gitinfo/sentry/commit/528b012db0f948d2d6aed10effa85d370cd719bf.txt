commit 528b012db0f948d2d6aed10effa85d370cd719bf
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Wed Apr 30 01:58:31 2014 -0300

    Fall back to using the original frame.function name when not found in
    smap

diff --git a/src/sentry/tasks/fetch_source.py b/src/sentry/tasks/fetch_source.py
index c29c93e858..eb99cdc06e 100644
--- a/src/sentry/tasks/fetch_source.py
+++ b/src/sentry/tasks/fetch_source.py
@@ -352,7 +352,10 @@ def expand_javascript_source(data, **kwargs):
                 frame.colno = state.src_col
                 # The offending function is always the previous function in the stack
                 # Honestly, no idea what the bottom most frame is, so we're ignoring that atm
-                frame.function = last_state.name if last_state else state.name
+                if last_state:
+                    frame.function = last_state.name or frame.function
+                else:
+                    frame.function = state.name or frame.function
                 frame.abs_path = abs_path
                 frame.filename = state.src
                 frame.module = generate_module(state.src)
