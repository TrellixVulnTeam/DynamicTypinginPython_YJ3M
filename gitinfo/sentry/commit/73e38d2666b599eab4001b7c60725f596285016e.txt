commit 73e38d2666b599eab4001b7c60725f596285016e
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Oct 14 13:48:20 2014 +0100

    Improve assigned activity rendering

diff --git a/src/sentry/models/user.py b/src/sentry/models/user.py
index 0f7a3fe1eb..045fd10bdb 100644
--- a/src/sentry/models/user.py
+++ b/src/sentry/models/user.py
@@ -66,6 +66,9 @@ class User(Model, AbstractBaseUser):
         # the admin requires this method
         return self.is_superuser
 
+    def get_display_name(self):
+        return self.first_name or self.email
+
     def get_full_name(self):
         return self.first_name
 
diff --git a/src/sentry/templatetags/sentry_activity.py b/src/sentry/templatetags/sentry_activity.py
index f2a865751a..6fdd040392 100644
--- a/src/sentry/templatetags/sentry_activity.py
+++ b/src/sentry/templatetags/sentry_activity.py
@@ -9,7 +9,7 @@ from django import template
 from django.utils.html import escape, urlize, linebreaks
 from django.utils.safestring import mark_safe
 
-from sentry.models import Activity
+from sentry.models import Activity, User
 from sentry.templatetags.sentry_helpers import timesince
 from sentry.utils.avatar import get_gravatar_url
 
@@ -26,7 +26,7 @@ ACTIVITY_ACTION_STRINGS = {
     Activity.SET_REGRESSION: 'marked this event as a regression',
     Activity.CREATE_ISSUE: u'created an issue on {provider:s} titled <a href="{location:s}">{title:s}</a>',
     Activity.FIRST_SEEN: 'first saw this event',
-    Activity.ASSIGNED: 'assigned this event',
+    Activity.ASSIGNED: 'assigned this event to {user:s}',
     Activity.UNASSIGNED: 'unassigned this event',
 }
 
@@ -41,6 +41,17 @@ def render_activity(item):
 
     if item.type == Activity.CREATE_ISSUE:
         action_str = action_str.format(**item.data)
+    elif item.type == Activity.ASSIGNED:
+        if item.data['assignee'] == item.user_id:
+            assignee_name = 'themselves'
+        else:
+            try:
+                assignee = User.objects.get(id=item.data['assignee'])
+            except User.DoesNotExist:
+                assignee_name = 'unknown'
+            else:
+                assignee_name = assignee.get_display_name()
+        action_str = action_str.format(user=assignee_name)
 
     output = ''
 
