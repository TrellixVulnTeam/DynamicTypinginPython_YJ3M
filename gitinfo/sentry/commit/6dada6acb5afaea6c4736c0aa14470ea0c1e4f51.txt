commit 6dada6acb5afaea6c4736c0aa14470ea0c1e4f51
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jan 19 23:08:38 2015 -0800

    Simplify urls

diff --git a/src/sentry/auth/helper.py b/src/sentry/auth/helper.py
index 3102a2a382..0f8fcf5530 100644
--- a/src/sentry/auth/helper.py
+++ b/src/sentry/auth/helper.py
@@ -70,10 +70,7 @@ class AuthHelper(object):
         idx = self.request.session['auth']['idx']
         return self.pipeline[idx]
 
-    def get_next_url(self):
-        return self.request.build_absolute_uri(reverse('sentry-auth-sso'))
-
-    def get_current_url(self):
+    def get_url(self):
         return self.request.build_absolute_uri(reverse('sentry-auth-sso'))
 
     def next_step(self):
diff --git a/src/sentry/auth/providers/oauth2.py b/src/sentry/auth/providers/oauth2.py
index 761f58fe7f..13fecf3fb5 100644
--- a/src/sentry/auth/providers/oauth2.py
+++ b/src/sentry/auth/providers/oauth2.py
@@ -51,7 +51,7 @@ class OAuth2Login(AuthView):
 
         params = self.get_authorize_params(
             state=state,
-            redirect_uri=absolute_uri(helper.get_next_url()),
+            redirect_uri=absolute_uri(helper.get_url()),
         )
 
         redirect_uri = self.get_authorize_url() + '?' + urlencode(params)
@@ -89,7 +89,7 @@ class OAuth2Callback(AuthView):
         # TODO: this needs the auth yet
         params = safe_urlencode(self.get_token_params(
             code=code,
-            redirect_uri=absolute_uri(helper.get_current_url()),
+            redirect_uri=absolute_uri(helper.get_url()),
         ))
         req = safe_urlopen(self.access_token_url, data=params)
         body = safe_urlread(req)
