commit 769a255fbcaf1b657f1a76ff89d3ffa6998e4ada
Author: Markus Ullmann <mail@markus-ullmann.de>
Date:   Mon Nov 16 20:07:55 2015 +0100

    Support unix socket connections in redis pool

diff --git a/src/sentry/utils/redis.py b/src/sentry/utils/redis.py
index 71863eef65..077ab5be9d 100644
--- a/src/sentry/utils/redis.py
+++ b/src/sentry/utils/redis.py
@@ -17,11 +17,17 @@ _pool_lock = Lock()
 
 
 def _shared_pool(**opts):
-    key = '%s:%s/%s' % (
-        opts['host'],
-        opts['port'],
-        opts['db'],
-    )
+    if 'host' in opts:
+        key = '%s:%s/%s' % (
+            opts['host'],
+            opts['port'],
+            opts['db'],
+        )
+    else:
+        key = '%s/%s' % (
+            opts['path'],
+            opts['db']
+        )
     pool = _pool_cache.get(key)
     if pool is not None:
         return pool
