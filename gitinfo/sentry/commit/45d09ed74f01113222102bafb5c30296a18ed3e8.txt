commit 45d09ed74f01113222102bafb5c30296a18ed3e8
Author: Matej Minar <matej.minar@sentry.io>
Date:   Fri May 29 12:59:59 2020 +0200

    Revert "feat(ui): Limit release files and commits (#19066)" (#19080)
    
    This reverts commit 6b2e50763206917527859419f879a883abb9dafc.

diff --git a/src/sentry/api/endpoints/filechange.py b/src/sentry/api/endpoints/filechange.py
index bb095905e4..79f3eb6997 100644
--- a/src/sentry/api/endpoints/filechange.py
+++ b/src/sentry/api/endpoints/filechange.py
@@ -21,7 +21,6 @@ class CommitFileChangeEndpoint(OrganizationReleasesBaseEndpoint):
         :pparam string organization_slug: the slug of the organization the
                                           release belongs to.
         :pparam string version: the version identifier of the release.
-        :qparam int limit: how many files should be returned at maximum
         :auth: required
         """
         try:
@@ -32,18 +31,12 @@ class CommitFileChangeEndpoint(OrganizationReleasesBaseEndpoint):
         if not self.has_release_permission(request, organization, release):
             raise ResourceDoesNotExist
 
-        limit_param = request.GET.get("limit")
-        try:
-            limit = int(limit_param) if limit_param is not None else None
-        except ValueError:
-            limit = None
-
         queryset = list(
             CommitFileChange.objects.filter(
                 commit_id__in=ReleaseCommit.objects.filter(release=release).values_list(
                     "commit_id", flat=True
                 )
-            )[:limit]
+            )
         )
 
         context = serialize(queryset, request.user)
diff --git a/src/sentry/static/sentry/app/views/releasesV2/detail/commits/index.tsx b/src/sentry/static/sentry/app/views/releasesV2/detail/commits/index.tsx
index 3d0884bb39..bb1b9a8ba1 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/detail/commits/index.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/detail/commits/index.tsx
@@ -15,7 +15,6 @@ import AsyncView from 'app/views/asyncView';
 import routeTitleGen from 'app/utils/routeTitle';
 import {formatVersion} from 'app/utils/formatters';
 import withOrganization from 'app/utils/withOrganization';
-import Pagination from 'app/components/pagination';
 
 import {getCommitsByRepository, CommitsByRepository} from '../utils';
 import ReleaseNoCommitData from '../releaseNoCommitData';
@@ -122,7 +121,7 @@ class ReleaseCommits extends AsyncView<Props, State> {
 
   renderBody() {
     const {orgId} = this.props.params;
-    const {commits, commitsPageLinks, repos, activeRepo} = this.state;
+    const {commits, repos, activeRepo} = this.state;
 
     const commitsByRepository = getCommitsByRepository(commits);
     const reposToRender =
@@ -153,8 +152,6 @@ class ReleaseCommits extends AsyncView<Props, State> {
         {reposToRender.map(repoName =>
           this.renderCommitsForRepo(repoName, commitsByRepository)
         )}
-
-        <Pagination pageLinks={commitsPageLinks} />
       </React.Fragment>
     );
   }
diff --git a/src/sentry/static/sentry/app/views/releasesV2/detail/filesChanged/index.tsx b/src/sentry/static/sentry/app/views/releasesV2/detail/filesChanged/index.tsx
index d3f3c62300..50e088f103 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/detail/filesChanged/index.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/detail/filesChanged/index.tsx
@@ -13,15 +13,10 @@ import withOrganization from 'app/utils/withOrganization';
 import routeTitleGen from 'app/utils/routeTitle';
 import {formatVersion} from 'app/utils/formatters';
 import {Panel, PanelBody} from 'app/components/panels';
-import Button from 'app/components/button';
 
 import {getFilesByRepository} from '../utils';
 import ReleaseNoCommitData from '../releaseNoCommitData';
 
-import {ReleaseContext} from '..';
-
-const FILES_LIMIT = 200;
-
 type RouteParams = {
   orgId: string;
   release: string;
@@ -53,25 +48,13 @@ class FilesChanged extends AsyncView<Props, State> {
       [
         'fileList',
         `/organizations/${orgId}/releases/${encodeURIComponent(release)}/commitfiles/`,
-        {
-          query: {
-            limit: this.shouldFetchAll() ? null : FILES_LIMIT,
-          },
-        },
       ],
       ['repos', `/organizations/${orgId}/repos/`],
     ];
   }
 
-  shouldFetchAll() {
-    const {location} = this.props;
-
-    return location.query.full === '1';
-  }
-
   renderBody() {
-    const {params, location} = this.props;
-    const {orgId} = params;
+    const {orgId} = this.props.params;
     const {fileList, repos} = this.state;
     const filesByRepository = getFilesByRepository(fileList);
 
@@ -82,35 +65,14 @@ class FilesChanged extends AsyncView<Props, State> {
     return (
       <ContentBox>
         {fileList.length ? (
-          <React.Fragment>
-            {Object.entries(filesByRepository).map(([repository, file]) => (
-              <RepositoryFileSummary
-                key={repository}
-                repository={repository}
-                fileChangeSummary={file}
-                collapsable={false}
-              />
-            ))}
-
-            <ReleaseContext.Consumer>
-              {({releaseMeta}) =>
-                !this.shouldFetchAll() && releaseMeta.commitFilesChanged > FILES_LIMIT ? (
-                  <ShowAllWrapper>
-                    <Button
-                      priority="primary"
-                      size="small"
-                      to={{
-                        pathname: location.pathname,
-                        query: {...location.query, full: 1},
-                      }}
-                    >
-                      {t('Show all')}
-                    </Button>
-                  </ShowAllWrapper>
-                ) : null
-              }
-            </ReleaseContext.Consumer>
-          </React.Fragment>
+          Object.keys(filesByRepository).map(repository => (
+            <RepositoryFileSummary
+              key={repository}
+              repository={repository}
+              fileChangeSummary={filesByRepository[repository]}
+              collapsable={false}
+            />
+          ))
         ) : (
           <Panel>
             <PanelBody>
@@ -133,8 +95,4 @@ const ContentBox = styled('div')`
   }
 `;
 
-const ShowAllWrapper = styled('div')`
-  text-align: center;
-`;
-
 export default withOrganization(FilesChanged);
diff --git a/src/sentry/static/sentry/app/views/releasesV2/list/index.tsx b/src/sentry/static/sentry/app/views/releasesV2/list/index.tsx
index f64129e937..a5564cca93 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/list/index.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/list/index.tsx
@@ -208,7 +208,7 @@ class ReleasesList extends AsyncView<Props, State> {
       return <LoadingIndicator />;
     }
 
-    if (!releases?.length) {
+    if (!releases.length) {
       return this.renderEmptyMessage();
     }
 
