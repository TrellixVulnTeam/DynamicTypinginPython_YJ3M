commit 6d7684fb5165426671436fc144851bcf9c34a54d
Author: MeredithAnya <meredith.a.heller@gmail.com>
Date:   Thu Mar 21 08:31:28 2019 -0700

    fixes JAVASCRIPT-5VV (#12481)
    
    * fixes JAVASCRIPT-5VV

diff --git a/src/sentry/static/sentry/app/components/events/interfaces/openInButton.jsx b/src/sentry/static/sentry/app/components/events/interfaces/openInButton.jsx
index 39c6eb3f73..edbd0d44df 100644
--- a/src/sentry/static/sentry/app/components/events/interfaces/openInButton.jsx
+++ b/src/sentry/static/sentry/app/components/events/interfaces/openInButton.jsx
@@ -34,10 +34,10 @@ class OpenInButton extends React.Component {
   fetchIssueLinkComponents() {
     const {api, organization, group} = this.props;
     const hasOrganization = !!organization;
-    const features = new Set(organization.features);
-    const hasSentryApps = hasOrganization && features.has('sentry-apps');
+    const hasSentryApps =
+      hasOrganization && new Set(organization.features).has('sentry-apps');
 
-    if (hasSentryApps && group && group.project) {
+    if (hasSentryApps && group && group.project && group.project.id) {
       api
         .requestPromise(
           `/organizations/${organization.slug}/sentry-app-components/?filter=stacktrace-link&projectId=${group
diff --git a/tests/js/spec/components/events/interfaces/openInButton.spec.jsx b/tests/js/spec/components/events/interfaces/openInButton.spec.jsx
index d0da4beb27..025809901b 100644
--- a/tests/js/spec/components/events/interfaces/openInButton.spec.jsx
+++ b/tests/js/spec/components/events/interfaces/openInButton.spec.jsx
@@ -112,4 +112,24 @@ describe('OpenInButton', function() {
       expect(response).not.toHaveBeenCalled();
     });
   });
+
+  describe('without organization prop passed', function() {
+    it('does not make api request', async function() {
+      const response = Client.addMockResponse({
+        method: 'GET',
+        url: `/organizations/${org.slug}/sentry-app-components/?filter=stacktrace-link&projectId=${group
+          .project.id}`,
+        body: [],
+      });
+      const wrapper = mount(
+        <OpenInButton api={api} filename={filename} lineNo={lineNo} />,
+        TestStubs.routerContext()
+      );
+      await tick();
+      wrapper.update();
+      expect(wrapper.state().components).toEqual([]);
+      expect(wrapper.find('Button').exists()).toEqual(false);
+      expect(response).not.toHaveBeenCalled();
+    });
+  });
 });
