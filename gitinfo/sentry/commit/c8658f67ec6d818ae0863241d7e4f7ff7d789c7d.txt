commit c8658f67ec6d818ae0863241d7e4f7ff7d789c7d
Author: sudong.cai <sudong.cai@tarsocial.com>
Date:   Mon Jun 11 16:51:17 2018 +0800

    fix(cleanup): remove old nodestore values although silent
    
    It's a terrible mistake that, if not silent, `cleanup` does not remove old nodestore values.

diff --git a/src/sentry/runner/commands/cleanup.py b/src/sentry/runner/commands/cleanup.py
index 5a07bfbf5d..71e72d53bc 100644
--- a/src/sentry/runner/commands/cleanup.py
+++ b/src/sentry/runner/commands/cleanup.py
@@ -242,13 +242,13 @@ def cleanup(days, project, concurrency, max_procs, silent, model, router, timed)
     else:
         if not silent:
             click.echo("Removing old NodeStore values")
-        else:
-            cutoff = timezone.now() - timedelta(days=days)
-            try:
-                nodestore.cleanup(cutoff)
-            except NotImplementedError:
-                click.echo(
-                    "NodeStore backend does not support cleanup operation", err=True)
+
+        cutoff = timezone.now() - timedelta(days=days)
+        try:
+            nodestore.cleanup(cutoff)
+        except NotImplementedError:
+            click.echo(
+                "NodeStore backend does not support cleanup operation", err=True)
 
     for bqd in BULK_QUERY_DELETES:
         if len(bqd) == 4:
