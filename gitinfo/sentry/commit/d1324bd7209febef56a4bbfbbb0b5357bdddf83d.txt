commit d1324bd7209febef56a4bbfbbb0b5357bdddf83d
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Mon Oct 1 17:37:05 2018 -0700

    fix(integrations): Re-enable repos if they've been migrated to new integration

diff --git a/src/sentry/tasks/integrations.py b/src/sentry/tasks/integrations.py
index 31a95e0a60..bbe397d858 100644
--- a/src/sentry/tasks/integrations.py
+++ b/src/sentry/tasks/integrations.py
@@ -4,7 +4,8 @@ import logging
 
 from sentry import analytics, features
 from sentry.models import (
-    ExternalIssue, Group, GroupLink, GroupStatus, Integration, Organization, Repository, User
+    ExternalIssue, Group, GroupLink, GroupStatus, Integration, Organization,
+    ObjectStatus, Repository, User
 )
 from sentry.integrations.exceptions import IntegrationError
 from sentry.mediators.plugins import Migrator
@@ -189,6 +190,9 @@ def migrate_repo(repo_id, integration_id, organization_id):
 
         repo.integration_id = integration_id
         repo.provider = 'integrations:%s' % (integration.provider,)
+        # check against disabled specifically -- don't want to accidentally un-delete repos
+        if repo.status == ObjectStatus.DISABLED:
+            repo.status = ObjectStatus.VISIBLE
         repo.save()
         logger.info(
             'repo.migrated',
