commit f295781e2991371ea773436104914f5a39402460
Author: David Cramer <dcramer@gmail.com>
Date:   Thu May 10 18:35:01 2012 -0500

    Handle issue with fast buffer in queue

diff --git a/sentry/manager.py b/sentry/manager.py
index 21f23e204b..7e59aa270f 100644
--- a/sentry/manager.py
+++ b/sentry/manager.py
@@ -508,6 +508,10 @@ class GroupManager(BaseManager, ChartMixin):
             group.update(score=ScoreClause(group))
             silence = 0
 
+            # We need to commit because the queue can run too fast and hit
+            # an issue with the group not existing before the buffers run
+            transaction.commit_unless_managed(using=group._state.db)
+
         # Determine if we've sampled enough data to store this event
         if not settings.SAMPLE_DATA or group.times_seen % min(count_limit(group.times_seen), time_limit(silence)) == 0:
             is_sample = False
diff --git a/setup.py b/setup.py
index 19c5420b16..50af105cfa 100755
--- a/setup.py
+++ b/setup.py
@@ -64,7 +64,7 @@ install_requires = [
 
 setup(
     name='sentry',
-    version='4.2.0',
+    version='4.2.1',
     author='David Cramer',
     author_email='dcramer@gmail.com',
     url='http://github.com/dcramer/sentry',
