commit 3ee95842a3151e1bb99bfba8f258326b3cb07583
Author: David Wang <davidw1339@gmail.com>
Date:   Thu Nov 7 22:27:57 2019 -0800

    fix(ui): Ensure projects are loaded before setting GlobalSelectionStore (#15512)
    
    Fixing an error that will happen when a user starts in the lighweight org context (projects page) which will trigger a request for /teams. If the user then navigates to a heavyweight org while the /projects haven't loaded, a new request for a detailed org will be requested and the sentry loading gif will show. During this time if the /teams endpoint were to return then the app will wrongly assume that the detailed org context has been returned when the org context that has come back only has teams and no projects.
    
    TLDR: Check for the existence of projects before using it in global selection store.

diff --git a/src/sentry/static/sentry/app/views/organizationContext.jsx b/src/sentry/static/sentry/app/views/organizationContext.jsx
index 108ed2168b..8b2cc0bd71 100644
--- a/src/sentry/static/sentry/app/views/organizationContext.jsx
+++ b/src/sentry/static/sentry/app/views/organizationContext.jsx
@@ -191,6 +191,7 @@ const OrganizationContext = createReactClass({
       // lead to very confusing behavior.
       if (
         this.props.detailed &&
+        organization.projects &&
         !this.props.routes.find(
           ({path}) => path && path.includes('/organizations/:orgId/issues/:groupId/')
         )
