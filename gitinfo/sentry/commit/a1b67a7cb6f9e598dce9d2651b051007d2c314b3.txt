commit a1b67a7cb6f9e598dce9d2651b051007d2c314b3
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Nov 11 10:33:37 2015 -0800

    More precise check for blob removal

diff --git a/src/sentry/models/file.py b/src/sentry/models/file.py
index 0dcfd3a091..f1697b2087 100644
--- a/src/sentry/models/file.py
+++ b/src/sentry/models/file.py
@@ -149,8 +149,7 @@ class File(Model):
 
     def delete(self, *args, **kwargs):
         super(File, self).delete(*args, **kwargs)
-        if self.blob_id and not File.objects.filter(blob=self.blob_id).exists():
-            self.blob.deletefile()
+        if self.blob and not File.objects.filter(blob=self.blob).exists():
             self.blob.delete()
 
     def ensure_blob(self):
