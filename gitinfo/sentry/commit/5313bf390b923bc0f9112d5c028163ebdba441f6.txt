commit 5313bf390b923bc0f9112d5c028163ebdba441f6
Author: Jess MacQueen <macqueen@users.noreply.github.com>
Date:   Tue Mar 13 11:47:50 2018 -0700

    feat(ui): Combine your and all teams in new settings (#7586)

diff --git a/src/sentry/static/sentry/app/routes.jsx b/src/sentry/static/sentry/app/routes.jsx
index 3597132d90..200be8791a 100644
--- a/src/sentry/static/sentry/app/routes.jsx
+++ b/src/sentry/static/sentry/app/routes.jsx
@@ -474,7 +474,8 @@ function routes() {
       <Route path="settings/" component={errorHandler(OrganizationGeneralSettingsView)} />
 
       <Route name="Teams" path="teams/">
-        <IndexRedirect to="your-teams" />
+        <IndexRoute component={errorHandler(OrganizationTeams)} />
+
         <Route
           path="all-teams/"
           name="All Teams"
diff --git a/src/sentry/static/sentry/app/views/organizationTeams/organizationTeamsView.jsx b/src/sentry/static/sentry/app/views/organizationTeams/organizationTeamsView.jsx
index 085bc5f15b..8ce8a9ccfd 100644
--- a/src/sentry/static/sentry/app/views/organizationTeams/organizationTeamsView.jsx
+++ b/src/sentry/static/sentry/app/views/organizationTeams/organizationTeamsView.jsx
@@ -22,6 +22,10 @@ class OrganizationTeamsView extends React.Component {
     params: PropTypes.object,
   };
 
+  static contextTypes = {
+    location: PropTypes.object.isRequired,
+  };
+
   render() {
     let {
       allTeams,
@@ -45,7 +49,15 @@ class OrganizationTeamsView extends React.Component {
         <div className="col-md-9">
           <div className="team-list">
             <ul className="nav nav-tabs border-bottom">
-              <ListLink to={`${urlPrefix}teams/your-teams/`}>{t('Your Teams')}</ListLink>
+              <ListLink
+                to={`${urlPrefix}teams/your-teams/`}
+                isActive={loc => {
+                  let pathname = this.context.location.pathname;
+                  return pathname === `${urlPrefix}teams/` || pathname === loc.pathname;
+                }}
+              >
+                {t('Your Teams')}
+              </ListLink>
               <ListLink to={`${urlPrefix}teams/all-teams/`}>
                 {t('All Teams')}{' '}
                 <span className="badge badge-soft">{allTeams.length}</span>
diff --git a/src/sentry/static/sentry/app/views/settings/team/allTeamsList.jsx b/src/sentry/static/sentry/app/views/settings/team/allTeamsList.jsx
index a577f4bbba..f37f9dafeb 100644
--- a/src/sentry/static/sentry/app/views/settings/team/allTeamsList.jsx
+++ b/src/sentry/static/sentry/app/views/settings/team/allTeamsList.jsx
@@ -4,8 +4,8 @@ import {Link} from 'react-router';
 
 import SentryTypes from '../../../proptypes';
 
-import Panel from '../components/panel';
 import AllTeamsRow from './allTeamsRow';
+import EmptyMessage from '../components/emptyMessage';
 import {tct} from '../../../locale';
 
 class AllTeamsList extends React.Component {
@@ -33,17 +33,18 @@ class AllTeamsList extends React.Component {
     });
 
     if (teamNodes.length !== 0) {
-      return <Panel>{teamNodes}</Panel>;
+      return teamNodes;
     }
 
     // TODO(jess): update this link to use url prefix when create team
     // has been moved to new settings
-    return tct(
-      "You don't have any teams for this organization yet. Get started by [link:creating your first team].",
-      {
-        root: <p />,
-        link: <Link to={`/organizations/${organization.slug}/teams/new/`} />,
-      }
+    return (
+      <EmptyMessage>
+        {tct('No teams here. You can always [link:create one].', {
+          root: <p />,
+          link: <Link to={`/organizations/${organization.slug}/teams/new/`} />,
+        })}
+      </EmptyMessage>
     );
   }
 }
diff --git a/src/sentry/static/sentry/app/views/settings/team/organizationTeamsView.jsx b/src/sentry/static/sentry/app/views/settings/team/organizationTeamsView.jsx
index bb49969370..421ea25a6a 100644
--- a/src/sentry/static/sentry/app/views/settings/team/organizationTeamsView.jsx
+++ b/src/sentry/static/sentry/app/views/settings/team/organizationTeamsView.jsx
@@ -5,7 +5,9 @@ import SentryTypes from '../../../proptypes';
 import {t} from '../../../locale';
 import AllTeamsList from './allTeamsList';
 import {getOrganizationState} from '../../../mixins/organizationState';
-import ListLink from '../../../components/listLink';
+import Panel from '../components/panel';
+import PanelHeader from '../components/panelHeader';
+import PanelBody from '../components/panelBody';
 import Button from '../../../components/buttons/button';
 import recreateRoute from '../../../utils/recreateRoute';
 import SettingsPageHeader from '../components/settingsPageHeader';
@@ -17,7 +19,6 @@ class OrganizationTeamsView extends React.Component {
     organization: SentryTypes.Organization,
     access: PropTypes.object,
     features: PropTypes.object,
-    route: PropTypes.object,
     routes: PropTypes.array,
     params: PropTypes.object,
   };
@@ -29,7 +30,6 @@ class OrganizationTeamsView extends React.Component {
       organization,
       access,
       features,
-      route,
       routes,
       params,
     } = this.props;
@@ -59,30 +59,38 @@ class OrganizationTeamsView extends React.Component {
     let teamRoute = routes.find(({path}) => path === 'teams/');
     let urlPrefix = recreateRoute(teamRoute, {routes, params, stepBack: -1});
 
-    let tabs = (
-      <ul className="nav nav-tabs border-bottom">
-        <ListLink to={`${urlPrefix}teams/your-teams/`}>{t('Your Teams')}</ListLink>
-        <ListLink to={`${urlPrefix}teams/all-teams/`}>
-          {t('All Teams')} <span className="badge badge-soft">{allTeams.length}</span>
-        </ListLink>
-      </ul>
-    );
+    let activeTeamIds = new Set(activeTeams.map(team => team.id));
+    let otherTeams = allTeams.filter(team => !activeTeamIds.has(team.id));
 
     return (
       <div className="team-list">
-        <SettingsPageHeader title={t('Teams')} tabs={tabs} action={action} />
-        <AllTeamsList
-          urlPrefix={urlPrefix}
-          organization={org}
-          teamList={route.allTeams ? allTeams : activeTeams}
-          access={access}
-          openMembership={
-            !!(
-              route.allTeams &&
-              (features.has('open-membership') || access.has('org:write'))
-            )
-          }
-        />
+        <SettingsPageHeader title={t('Teams')} action={action} />
+        <Panel>
+          <PanelHeader>{t('Your Teams')}</PanelHeader>
+          <PanelBody>
+            <AllTeamsList
+              urlPrefix={urlPrefix}
+              organization={org}
+              teamList={activeTeams}
+              access={access}
+              openMembership={false}
+            />
+          </PanelBody>
+        </Panel>
+        <Panel>
+          <PanelHeader>{t('Other Teams')}</PanelHeader>
+          <PanelBody>
+            <AllTeamsList
+              urlPrefix={urlPrefix}
+              organization={org}
+              teamList={otherTeams}
+              access={access}
+              openMembership={
+                !!(features.has('open-membership') || access.has('org:write'))
+              }
+            />
+          </PanelBody>
+        </Panel>
       </div>
     );
   }
