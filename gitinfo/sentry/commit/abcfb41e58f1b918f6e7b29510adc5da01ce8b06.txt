commit abcfb41e58f1b918f6e7b29510adc5da01ce8b06
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Jan 30 20:22:39 2015 -0800

    Initial work on rule editor

diff --git a/src/sentry/static/sentry/app/views/ruleEditor.jsx b/src/sentry/static/sentry/app/views/ruleEditor.jsx
new file mode 100644
index 0000000000..bd52661519
--- /dev/null
+++ b/src/sentry/static/sentry/app/views/ruleEditor.jsx
@@ -0,0 +1,146 @@
+/*** @jsx React.DOM */
+var React = require("react");
+var Reflux = require("reflux");
+var Router = require("react-router");
+var $ = require("jquery");
+
+var api = require("../api");
+var utils = require("../utils");
+
+var RuleAction = React.createClass({
+  propTypes: {
+    type: React.PropTypes.string.isRequired
+  },
+
+  render: function() {
+    return (
+      <tr>
+        <td></td>
+        <td className="align-right">
+          <button className="btn btn-default btn-sm">
+            <span className="icon-trash"></span>
+          </button>
+        </td>
+      </tr>
+    );
+  }
+});
+
+var RuleCondition = React.createClass({
+  propTypes: {
+    type: React.PropTypes.string.isRequired
+  },
+
+  render: function() {
+    return (
+      <tr>
+        <td></td>
+        <td className="align-right">
+          <button className="btn btn-default btn-sm">
+            <span className="icon-trash"></span>
+          </button>
+        </td>
+      </tr>
+    );
+  }
+});
+
+var RuleConditonList = React.createClass({
+  render: function() {
+    var conditions = [];
+
+    return (
+      <div className="box">
+          <div className="box-header" style={{paddingTop: '5px', paddingBottom: 0, fontWeight: 500}}>
+              Every time
+              <select name="action_match" style={{width: '100px'}}
+                      className="select2-small select2-inline">
+                <option value="all">all of</option>
+                <option value="any">any of</option>
+                <option value="none">none of</option>
+              </select>
+              these conditions are met:
+          </div>
+          <div className="box-content" style={{padding: '0 10px 6px'}}>
+            <table className="condition-list table table-light" style={{marginBottom: '10px'}}>
+                <col />
+                <col style={{width: '10%', textAlign: 'right'}} />
+                <tbody>
+                  {conditions}
+                </tbody>
+            </table>
+            <div className="controls">
+                <select placeholder="add a condition"></select>
+            </div>
+          </div>
+      </div>
+    );
+  }
+});
+
+var RuleActionList = React.createClass({
+  render: function() {
+    var actions = [];
+
+    return (
+      <div className="box">
+        <div className="box-header">
+          <h3>Take these actions:</h3>
+        </div>
+        <div className="box-content" style={{padding: '0 10px 6px'}}>
+          <table className="action-list table table-light" style={{marginBottom: '10px'}}>
+            <col />
+            <col style={{width: '25%', textAlign: 'right'}} />
+            <tbody>
+              {actions}
+            </tbody>
+          </table>
+          <div className="controls">
+            <select placeholder="add an action"></select>
+          </div>
+        </div>
+      </div>
+    );
+  }
+});
+
+var RuleLabel = React.createClass({
+  render: function() {
+    return (
+      <div className="box">
+        <div className="box-header">
+          <h3>Rule label:</h3>
+        </div>
+        <div className="box-content" style={{padding: '10px'}}>
+          <input type="text" name="label" className="form-control"
+                 placeholder="e.g. My Rule Name" />
+        </div>
+      </div>
+    );
+  }
+});
+
+var RuleEditor = React.createClass({
+  propTypes: {
+    actions: React.PropTypes.instanceOf(Array).isRequired,
+    conditions: React.PropTypes.instanceOf(Array).isRequired
+  },
+
+  render: function() {
+    return (
+      <form>
+        <h3>
+          {rule.id ? 'Edit Rule' : 'New Rule'}
+          <small>Applying to Events</small>
+        </h3>
+
+        <RuleLabel />
+        <RuleConditionList />
+        <RuleActionList />
+        <div className="actions">
+          <button className="btn btn-primary btn-lg">Save Rule</button>
+        </div>
+      </form>
+    );
+  }
+});
diff --git a/src/sentry/templates/sentry/projects/rules/new.html b/src/sentry/templates/sentry/projects/rules/new.html
index 7c5829f743..76136a1dd0 100644
--- a/src/sentry/templates/sentry/projects/rules/new.html
+++ b/src/sentry/templates/sentry/projects/rules/new.html
@@ -4,86 +4,17 @@
 {% load i18n %}
 {% load sentry_helpers %}
 
-{% block controller %}EditProjectRuleCtrl{% endblock %}
-
 {% block inner %}
-    <h3>
-        {% if rule.id %}
-            {% trans "Edit Rule" %}
-        {% else %}
-            {% trans "New Rule" %}
-        {% endif %}
-        <small>Applying to Events</small>
-    </h3>
-
-    <form method="POST" action="." name="editRuleForm">
-        {% csrf_token %}
-
-        {% if not form_is_valid %}
-            <div class="alert-block alert alert-error">
-                <p>{% trans "There were errors with your submission. Please ensure all options are filled out correctly." %}</p>
-            </div>
-        {% endif %}
-
-        {{ form|as_crispy_errors }}
-
-
-        <div class="box">
-          <div class="box-header">
-            <h3>{% trans "Rule label:" %}</h3>
-          </div>
-          <div class="box-content" style="padding: 10px;">
-            <input type="text" name="label" class="form-control" placeholder="{% trans "e.g. My Rule Name" %}">
-          </div>
-        </div>
-
-        <div class="box">
-            <div class="box-header" style="padding-top: 5px; padding-bottom: 0px; font-weight: 500">
-                Every time <select name="action_match" style="width:100px;" class="select2-small select2-inline">
-                    <option value="all">all of</option>
-                    <option value="any">any of</option>
-                    <option value="none">none of</option>
-                </select> these conditions are met:
-            </div>
-            <div class="box-content" style="padding: 0 10px 6px;">
-              <table class="condition-list table table-light" style="margin-bottom: 10px;">
-                  <col>
-                  <col style="width: 10%; text-align: right">
-                  <tbody></tbody>
-              </table>
-              <div class="controls">
-                  <select id="condition-select" placeholder="add a condition"></select>
-              </div>
-            </div>
-        </div>
-
-        <div class="box">
-            <div class="box-header">
-                <h3>Take these actions:</h3>
-            </div>
-            <div class="box-content" style="padding: 0 10px 6px;">
-              <table class="action-list table table-light" style="margin-bottom: 10px;">
-                  <col>
-                  <col style="width: 25%; text-align: right">
-                  <tbody></tbody>
-              </table>
-              <div class="controls">
-                  <select id="action-select" placeholder="add an action"></select>
-              </div>
-            </div>
-        </div>
-
-        <div class="actions">
-            <button type="submit" class="btn btn-primary btn-lg">{% trans "Save Rule" %}</button>
-        </div>
-    </form>
-
-    <script>
-    window.SentryApp.ruleData = {
+  <div id="blk_rule_editor"></div>
+  <script>
+  $(function(){
+    React.render(React.createFactory(RuleEditor)({
       actions: {{ action_list|safe }},
       conditions: {{ condition_list|safe }},
-      formData: {{ form_data|to_json|safe }},
-      formErrors: {{ form_errors|to_json|safe }}
-    };
-    </script>
+      // formData: {{ form_data|to_json|safe }},
+      // formErrors: {{ form_errors|to_json|safe }}
+      project: {% serialize project %}
+    }), document.getElementById('blk_rule_editor'));
+  });
+  </script>
 {% endblock %}
