commit 4bbee1a32233d03285b85d9d517120b0e32d039d
Author: William Mak <william@wmak.io>
Date:   Mon Mar 23 11:56:58 2020 -0400

    fix(search) - Duration like values break on non duration fields
    
    - user.id:400d is being treated as a duration, they needed to be treated
      as text fields

diff --git a/src/sentry/api/event_search.py b/src/sentry/api/event_search.py
index 96b31856ae..785b97df3b 100644
--- a/src/sentry/api/event_search.py
+++ b/src/sentry/api/event_search.py
@@ -450,7 +450,7 @@ class SearchVisitor(NodeVisitor):
                 raise InvalidSearchQuery(six.text_type(exc))
             return SearchFilter(search_key, operator, SearchValue(search_value))
         else:
-            search_value = operator + search_value if operator != "=" else search_value
+            search_value = operator + search_value.text if operator != "=" else search_value.text
             return self._handle_basic_filter(search_key, "=", SearchValue(search_value))
 
     def visit_rel_time_filter(self, node, children):
diff --git a/tests/sentry/api/test_event_search.py b/tests/sentry/api/test_event_search.py
index d01b13ddb6..82eb5db585 100644
--- a/tests/sentry/api/test_event_search.py
+++ b/tests/sentry/api/test_event_search.py
@@ -556,6 +556,20 @@ class ParseSearchQueryTest(unittest.TestCase):
             with self.assertRaisesRegexp(InvalidSearchQuery, "Invalid format for numeric search"):
                 parse_search_query(invalid_query)
 
+    def test_duration_on_non_duration_field(self):
+        assert parse_search_query("user.id:500s") == [
+            SearchFilter(
+                key=SearchKey(name="user.id"), operator="=", value=SearchValue(raw_value="500s")
+            )
+        ]
+
+    def test_negated_duration_on_non_duration_field(self):
+        assert parse_search_query("!user.id:500s") == [
+            SearchFilter(
+                key=SearchKey(name="user.id"), operator="!=", value=SearchValue(raw_value="500s")
+            )
+        ]
+
     def test_duration_filter(self):
         assert parse_search_query("transaction.duration:>500s") == [
             SearchFilter(
