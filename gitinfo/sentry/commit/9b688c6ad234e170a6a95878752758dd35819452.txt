commit 9b688c6ad234e170a6a95878752758dd35819452
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Thu Apr 13 13:22:23 2017 -0700

    Ignore duplicates for VersionDSymFile

diff --git a/src/sentry/lang/native/plugin.py b/src/sentry/lang/native/plugin.py
index cb01d2b72c..3651fab696 100644
--- a/src/sentry/lang/native/plugin.py
+++ b/src/sentry/lang/native/plugin.py
@@ -12,6 +12,7 @@ from symsynd.heuristics import find_best_instruction
 from symsynd.utils import parse_addr
 
 from sentry import options
+from django.db import IntegrityError
 from sentry.models import Project, EventError, VersionDSymFile, DSymPlatform, \
     DSymApp
 from sentry.plugins import Plugin2
@@ -459,12 +460,18 @@ class NativeStacktraceProcessor(StacktraceProcessor):
                     data={'name': app_info.name},
                     platform=DSymPlatform.APPLE,
                 )
-                version_dsym_file, created = VersionDSymFile.objects.get_or_create(
-                    dsym_file=dsym_file,
-                    dsym_app=dsym_app,
-                    version=app_info.version,
-                    build=app_info.build,
-                )
+                try:
+                    version_dsym_file, created = VersionDSymFile.objects.get_or_create(
+                        dsym_file=dsym_file,
+                        dsym_app=dsym_app,
+                        version=app_info.version,
+                        build=app_info.build,
+                    )
+                except IntegrityError:
+                    # XXX: this can currently happen because we only
+                    # support one app per dsym file.  Since this can
+                    # happen in some cases anyways we ignore it.
+                    pass
 
         self.sym = Symbolizer(self.project, self.image_lookup,
                               cpu_name=self.cpu_name,
