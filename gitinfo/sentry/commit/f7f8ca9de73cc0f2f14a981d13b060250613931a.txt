commit f7f8ca9de73cc0f2f14a981d13b060250613931a
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Aug 10 13:15:13 2014 -0700

    Convert Dashboard to Angular

diff --git a/src/sentry/static/sentry/app/base.js b/src/sentry/static/sentry/app/base.js
index d0c486d675..387d37d900 100644
--- a/src/sentry/static/sentry/app/base.js
+++ b/src/sentry/static/sentry/app/base.js
@@ -179,8 +179,6 @@
 
         }),
 
-        DashboardPage: BasePage,
-
         GroupDetailsPage: BasePage.extend({
 
             initialize: function(data){
diff --git a/src/sentry/static/sentry/app/controllers/teamDashboard.js b/src/sentry/static/sentry/app/controllers/teamDashboard.js
index 1a966916e7..11862611d8 100644
--- a/src/sentry/static/sentry/app/controllers/teamDashboard.js
+++ b/src/sentry/static/sentry/app/controllers/teamDashboard.js
@@ -6,9 +6,69 @@
   SentryApp.classy.controller({
     name: 'TeamDashboardCtrl',
 
+    inject: ['$scope', '$http', '$timeout', 'Collection', 'selectedTeam'],
+
     init: function() {
       $('#chart').height('150px');
       app.charts.createBasic('#chart');
+
+      var newGroupList = new this.Collection([], {limit: 5});
+      var trendingGroupList = new this.Collection([], {limit: 5});
+
+      this.loadNewGroups('1440', newGroupList);
+      this.loadTrendingGroups('1440', trendingGroupList);
+
+      this.$scope.newGroupList = newGroupList;
+      this.$scope.trendingGroupList = trendingGroupList;
+    },
+
+    loadNewGroups: function(minutes, groupList) {
+      var baseUrl = '/api/0/teams/' + this.selectedTeam.id + '/groups/new/';
+
+      if (groupList === undefined) {
+        groupList = this.$scope.newGroupList;
+      }
+
+      this.loadGroups(groupList, baseUrl, minutes);
+    },
+
+    loadTrendingGroups: function(minutes, groupList) {
+      var baseUrl = '/api/0/teams/' + this.selectedTeam.id + '/groups/trending/';
+
+      if (groupList === undefined) {
+        groupList = this.$scope.trendingGroupList;
+      }
+
+      this.loadGroups(groupList, baseUrl, minutes);
+    },
+
+    loadGroups: function(groupList, baseUrl, minutes) {
+      var url = baseUrl + '?limit=5&minutes=' + minutes,
+          $scope = this.$scope,
+          $http = this.$http,
+          $timeout = this.$timeout;
+
+      groupList.state = 'loading';
+      groupList.selected = minutes;
+
+      $http.get(url)
+        .success(function(data) {
+          $timeout(function(){
+            groupList.empty();
+            groupList.extend(data);
+            if (groupList.length) {
+              groupList.state = 'results';
+            } else {
+              groupList.state = 'no-results';
+            }
+          });
+        })
+        .error(function(){
+          $timeout(function(){
+            groupList.empty();
+            groupList.state = 'error';
+          });
+        });
     }
   });
 }());
diff --git a/src/sentry/templates/sentry/dashboard.html b/src/sentry/templates/sentry/dashboard.html
index 4cc5ab997e..abe9b8b72f 100644
--- a/src/sentry/templates/sentry/dashboard.html
+++ b/src/sentry/templates/sentry/dashboard.html
@@ -29,32 +29,57 @@
                     </div>
                     <div class="row">
                         <div class="col-md-6">
-                          <div class="box">
-                            <div class="box-header clearfix">
-                                <h3 class="pull-left">{% trans "Trends" %}</h3>
-                                <ul class="nav nav-pills nav-small pull-right">
-                                    <li><a href="#top_events" data-toggle="ajtab" data-uri="{% url 'sentry-api-groups-trends' team.slug %}?minutes=15&amp;limit=5">{% trans "15 minutes" %}</a></li>
-                                    <li><a href="#top_events" data-toggle="ajtab" data-uri="{% url 'sentry-api-groups-trends' team.slug %}?minutes=60&amp;limit=5">{% trans "60 minutes" %}</a></li>
-                                    <li class="active"><a href="#top_events" data-toggle="ajtab" data-uri="{% url 'sentry-api-groups-trends' team.slug %}?minutes=1440&amp;limit=5">{% trans "24 hours" %}</a></li>
-                                </ul>
-                            </div>
-                            <div class="box-content with-padding">
-                                <div class="tab-pane active" id="top_events"><p>{% trans "Loading ..." %}</p></div>
+                            <div class="box">
+                                <div class="box-header clearfix">
+                                    <h3 class="pull-left">{% trans "Trends" %}</h3>
+                                    <ul class="nav nav-pills nav-small pull-right">
+                                        <li ng-class="trendingGroupList.selected == '15' ? 'active': ''">
+                                            <a href="#" ng-click="loadTrendingGroups('15')">{% trans "15 minutes" %}</a></li>
+                                        <li ng-class="trendingGroupList.selected == '60' ? 'active': ''">
+                                            <a href="#" ng-click="loadTrendingGroups('60')">{% trans "60 minutes" %}</a></li>
+                                        <li ng-class="trendingGroupList.selected == '1440' ? 'active': ''">
+                                            <a href="#" ng-click="loadTrendingGroups('1440')">{% trans "24 hours" %}</a></li>
+                                    </ul>
+                                </div>
+                                <div class="box-content with-padding">
+                                    <div class="tab-pane active">
+                                        <p ng-show="trendingGroupList.state == 'loading'">{% trans "Loading ..." %}</p>
+                                        <p ng-show="trendingGroupList.state == 'error'">{% trans "There was an error fetching data from the server." %}</p>
+                                        <ul ng-show="trendingGroupList.state == 'results'">
+                                            <li ng-repeat="group in trendingGroupList">
+                                                <% group.title %>
+                                            </li>
+                                        </ul>
+                                        <p ng-show="trendingGroupList.state == 'no-results'">{% trans "There are no events within the selected time window." %}</p>
+                                    </div>
+                                </div>
                             </div>
-                          </div>
                         </div>
                         <div class="col-md-6">
-                          <div class="box">
-                            <div class="box-header clearfix">
-                                <h3 class="pull-left">{% trans "New Events" %}</h3>
-                                <ul class="nav nav-pills nav-small pull-right">
-                                    <li><a href="#new_events" data-toggle="ajtab" data-uri="{% url 'sentry-api-groups-new' team.slug %}?minutes=15&amp;limit=5">{% trans "15 minutes" %}</a></li>
-                                    <li><a href="#new_events" data-toggle="ajtab" data-uri="{% url 'sentry-api-groups-new' team.slug %}?minutes=60&amp;limit=5">{% trans "60 minutes" %}</a></li>
-                                    <li class="active"><a href="#new_events" data-toggle="ajtab" data-uri="{% url 'sentry-api-groups-new' team.slug %}?minutes=1440&amp;limit=5">{% trans "24 hours" %}</a></li>
-                                </ul>
-                            </div>
-                            <div class="box-content with-padding">
-                                <div class="tab-pane active" id="new_events"><p>{% trans "Loading ..." %}</p></div>
+                            <div class="box">
+                                <div class="box-header clearfix">
+                                    <h3 class="pull-left">{% trans "New Events" %}</h3>
+                                    <ul class="nav nav-pills nav-small pull-right">
+                                        <li ng-class="newGroupList.selected == '15' ? 'active': ''">
+                                            <a href="#" ng-click="loadNewGroups('15')">{% trans "15 minutes" %}</a></li>
+                                        <li ng-class="newGroupList.selected == '60' ? 'active': ''">
+                                            <a href="#" ng-click="loadNewGroups('60')">{% trans "60 minutes" %}</a></li>
+                                        <li ng-class="newGroupList.selected == '1440' ? 'active': ''">
+                                            <a href="#" ng-click="loadNewGroups('1440')">{% trans "24 hours" %}</a></li>
+                                    </ul>
+                                </div>
+                                <div class="box-content with-padding">
+                                    <div class="tab-pane active">
+                                        <p ng-show="newGroupList.state == 'loading'">{% trans "Loading ..." %}</p>
+                                        <p ng-show="newGroupList.state == 'error'">{% trans "There was an error fetching data from the server." %}</p>
+                                        <ul ng-show="newGroupList.state == 'results'">
+                                            <li ng-repeat="group in newGroupList">
+                                                <% group.title %>
+                                            </li>
+                                        </ul>
+                                        <p ng-show="newGroupList.state == 'no-results'">{% trans "There are no events within the selected time window." %}</p>
+                                    </div>
+                                </div>
                             </div>
                         </div>
                     </div>
@@ -65,8 +90,4 @@
             </div>
         {% endblock %}
     </div>
-
-    <script>
-    new app.DashboardPage();
-    </script>
 {% endblock %}
