commit ed14af1a842c66268e3476fe1e4f59150ed0561f
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Dec 26 15:04:49 2012 -0800

    Organize tags in their own page

diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index 9121850319..cfd00c8eaf 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -457,6 +457,48 @@ footer {
     color: @linkColor;
   }
 }
+
+ul.tag-list {
+  list-style: none;
+  margin-left: 0;
+  margin-bottom: 15px;
+
+  li {
+    margin-bottom: 5px;
+  }
+}
+
+.progressbar {
+  position: relative;
+  border: 1px solid lighten(@linkColor, 10%);
+  height: 1.5em;
+  line-height: 1.5em;
+
+  > a,
+  > div {
+    top: 0px;
+    left: 0px;
+    right: 0px;
+    bottom: 0px;
+    max-width: 100%;
+    position: absolute;
+  }
+
+  > a {
+    left: 5px;
+    
+    span {
+      position: absolute;
+      right: 5px;
+    }
+  }
+
+  > div {
+    background-color: lighten(@linkColor, 40%);
+    text-indent: -100000em;
+  }
+}
+
 .sparkline {
   position: relative;
 
diff --git a/src/sentry/templates/sentry/groups/details.html b/src/sentry/templates/sentry/groups/details.html
index 46905801df..cb677c5bf8 100644
--- a/src/sentry/templates/sentry/groups/details.html
+++ b/src/sentry/templates/sentry/groups/details.html
@@ -87,18 +87,16 @@
     <div id="event_list"></div>
 
     <section class="body">
-        <ul class="nav nav-tabs">
+        <ul class="nav nav-pills">
             <li{% if page == 'details' %} class="active"{% endif %}>
                 <a href="{% url sentry-group group.project.slug group.id %}">{% trans "Details" %}</a>
             </li>
+            <li{% if page == 'tag_list' %} class="active"{% endif %}>
+                <a href="{% url sentry-group-tags group.project.slug group.id %}">{% trans "Tags" %}</a>
+            </li>
             <li{% if page == 'event_list' %} class="active"{% endif %}>
-                <a href="{% url sentry-group-events group.project.slug group.id %}">{% trans "Events" %}</a>
+                <a href="{% url sentry-group-events group.project.slug group.id %}">{% trans "Similar Events" %}</a>
             </li>
-            {% for tag in group.get_tags %}
-                <li{% if page == 'tag_details' and tag == tag_name %} class="active"{% endif %}>
-                    <a href="{% url sentry-group-tag-details group.project.slug group.id tag %}">{{ tag|titlize }}</a>
-                </li>
-            {% endfor %}
             {% for label, link, is_active in group|get_panels:request %}
                 <li{% if is_active %} class="active"{% endif %}><a href="{{ link }}">{{ label }}</a></li>
             {% endfor %}
diff --git a/src/sentry/templates/sentry/groups/tag_list.html b/src/sentry/templates/sentry/groups/tag_list.html
new file mode 100644
index 0000000000..10bf5aa356
--- /dev/null
+++ b/src/sentry/templates/sentry/groups/tag_list.html
@@ -0,0 +1,39 @@
+{% extends "sentry/groups/details.html" %}
+
+{% load i18n %}
+{% load sentry_helpers %}
+
+{% block inner %}
+    {% for tag_name, tag_values in tag_list %}
+        {% if not forloop.counter|divisibleby:2 %}
+            {% if not forloop.first %}
+                </div>
+            {% endif %}
+            <div class="row-fluid">
+        {% endif %}
+        <div class="span6">
+            <div class="page-header">
+                <span class="pull-right"><a href="{% url sentry-group-tag-details group.project.slug group.id tag_name %}">More Details</a></span>
+
+                <h4>{{ tag_name|titlize }}</h4>
+            </div>
+
+            <ul class="tag-list">
+                {% for tag_value, times_seen, percent in tag_values %}
+                    <li>
+                        <div class="progressbar">
+                            <div style="width:{{ percent }}%;">{{ times_seen }}</div>
+                            <a href="{% url sentry group.project.slug %}?{{ tag_name }}={{ tag_value }}">
+                                {{ tag_value }}
+                                <span>{{ times_seen|small_count }} ({{ percent }}%)</span>
+                            </a>
+                        </div>
+                    </li>
+                {% endfor %}
+            </ul>
+        </div>
+        {% if forloop.last %}
+            </div>
+        {% endif %}
+    {% endfor %}
+{% endblock %}
\ No newline at end of file
diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index 331baea1df..6b9314c694 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -5,6 +5,7 @@ sentry.web.frontend.groups
 :copyright: (c) 2010-2012 by the Sentry Team, see AUTHORS for more details.
 :license: BSD, see LICENSE for more details.
 """
+from __future__ import division
 
 import datetime
 import logging
@@ -265,6 +266,29 @@ def group(request, project, group):
     }, request)
 
 
+@has_group_access
+def group_tag_list(request, project, group):
+    def percent(total, this):
+        return int(this / total * 100)
+
+    # O(N) db access
+    tag_list = []
+    for tag_name in group.get_tags():
+        tag_list.append((tag_name, [
+            (value, times_seen, percent(group.times_seen, times_seen))
+            for (value, times_seen, first_seen, last_seen)
+            in group.get_unique_tags(tag_name)[:5]
+        ]))
+
+    return render_to_response('sentry/groups/tag_list.html', {
+        'project': project,
+        'group': group,
+        'page': 'tag_list',
+        'tag_list': tag_list,
+        'can_admin_event': can_admin_group(request.user, group),
+    }, request)
+
+
 @has_group_access
 def group_tag_details(request, project, group, tag_name):
     return render_to_response('sentry/plugins/bases/tag/index.html', {
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 492edc58d1..e6c11b3764 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -150,6 +150,7 @@ urlpatterns = patterns('',
     url(r'^(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/events/(?P<event_id>\d+)/$', groups.group_event_details, name='sentry-group-event'),
     url(r'^(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/events/(?P<event_id_or_latest>(\d+|latest))/json/$', groups.group_event_details_json, name='sentry-group-event-json'),
     url(r'^(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/actions/(?P<slug>[\w_-]+)/', groups.group_plugin_action, name='sentry-group-plugin-action'),
+    url(r'^(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/tags/$', groups.group_tag_list, name='sentry-group-tags'),
     url(r'^(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/tags/(?P<tag_name>[^/]+)/$', groups.group_tag_details, name='sentry-group-tag-details'),
 
     url(r'^(?P<project_id>[\w_-]+)/events/$', events.event_list, name='sentry-events'),
