commit 66ea4131eb58ae4745390d2a7a686f73aa2c098a
Author: Ben Vinegar <benvinegar@users.noreply.github.com>
Date:   Mon Sep 12 13:13:50 2016 -0700

    After adding user, redirect to org members page (#4104)

diff --git a/src/sentry/web/frontend/create_organization_member.py b/src/sentry/web/frontend/create_organization_member.py
index 9a4993b039..0c53fdfd5a 100644
--- a/src/sentry/web/frontend/create_organization_member.py
+++ b/src/sentry/web/frontend/create_organization_member.py
@@ -53,18 +53,21 @@ class CreateOrganizationMemberView(OrganizationView):
         if form.is_valid():
             om, created = form.save(request.user, organization, request.META['REMOTE_ADDR'])
 
+            user_display = form.cleaned_data.get('email', None)
+            if not user_display:
+                user_display = form.cleaned_data['user']
+
             if created:
                 messages.add_message(request, messages.SUCCESS,
-                    _('The organization member was added.'))
+                    _('The organization member %s was added.') % user_display)
 
                 member_invited.send(member=om, user=request.user, sender=self)
 
             else:
                 messages.add_message(request, messages.INFO,
-                    _('The organization member already exists.'))
+                    _('The organization member %s already exists.') % user_display)
 
-            redirect = reverse('sentry-organization-member-settings',
-                               args=[organization.slug, om.id])
+            redirect = reverse('sentry-organization-members', args=[organization.slug])
 
             return HttpResponseRedirect(redirect)
 
diff --git a/tests/sentry/web/frontend/test_create_organization_member.py b/tests/sentry/web/frontend/test_create_organization_member.py
index 29eb3739b3..16ccf72859 100644
--- a/tests/sentry/web/frontend/test_create_organization_member.py
+++ b/tests/sentry/web/frontend/test_create_organization_member.py
@@ -80,7 +80,7 @@ class CreateOrganizationMemberTest(TestCase):
         assert len(om_teams) == 1
         assert om_teams[0].team_id == team.id
 
-        redirect_uri = reverse('sentry-organization-member-settings', args=[organization.slug, member.id])
+        redirect_uri = reverse('sentry-organization-members', args=[organization.slug])
         assert resp['Location'] == 'http://testserver' + redirect_uri
 
         assert len(mail.outbox) == 1
@@ -113,7 +113,7 @@ class CreateOrganizationMemberTest(TestCase):
         assert member.email is None
         assert member.role == 'member'
 
-        redirect_uri = reverse('sentry-organization-member-settings', args=[organization.slug, member.id])
+        redirect_uri = reverse('sentry-organization-members', args=[organization.slug])
         assert resp['Location'] == 'http://testserver' + redirect_uri
 
     def test_valid_for_direct_add(self):
@@ -137,7 +137,7 @@ class CreateOrganizationMemberTest(TestCase):
 
         assert member.email is None
 
-        redirect_uri = reverse('sentry-organization-member-settings', args=[organization.slug, member.id])
+        redirect_uri = reverse('sentry-organization-members', args=[organization.slug])
         assert resp['Location'] == 'http://testserver' + redirect_uri
 
     def test_invalid_user_for_direct_add(self):
