commit 6f731df86f7329abfac63a5fabf55a299a8f0fe7
Author: William Mak <william@wmak.io>
Date:   Thu Jan 16 16:48:17 2020 -0500

    fix(releases) - Only update author name when it changes (#16490)
    
    * fix(releases) - Only update author name when it changes
    
    - Switch from `create_or_update` to `get_or_create`, since
      `create_or_update` will run an update every time even if the data is
      the same.
    - With these changes we should only update when the name has changed.

diff --git a/src/sentry/models/release.py b/src/sentry/models/release.py
index a76778c0c1..133a2fb1fd 100644
--- a/src/sentry/models/release.py
+++ b/src/sentry/models/release.py
@@ -403,15 +403,13 @@ class Release(Model):
                         author = None
                     elif author_email not in authors:
                         author_data = {"name": data.get("author_name")}
-                        author, created = CommitAuthor.objects.create_or_update(
+                        author, created = CommitAuthor.objects.get_or_create(
                             organization_id=self.organization_id,
                             email=author_email,
-                            values=author_data,
+                            defaults=author_data,
                         )
-                        if not created:
-                            author = CommitAuthor.objects.get(
-                                organization_id=self.organization_id, email=author_email
-                            )
+                        if author.name != author_data["name"]:
+                            author.update(name=author_data["name"])
                         authors[author_email] = author
                     else:
                         author = authors[author_email]
