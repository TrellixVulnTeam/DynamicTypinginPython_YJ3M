commit 5674f264fb2d79585a83b20713935be66fa42b9c
Author: Megan Heskett <meg.heskett@gmail.com>
Date:   Thu Apr 11 11:45:35 2019 -0700

    Add plan cancelled to audit log (#12713)

diff --git a/src/sentry/models/auditlogentry.py b/src/sentry/models/auditlogentry.py
index fd8f65d3d2..01d367debc 100644
--- a/src/sentry/models/auditlogentry.py
+++ b/src/sentry/models/auditlogentry.py
@@ -68,6 +68,7 @@ class AuditLogEntryEvent(object):
     SET_ONDEMAND = 90
     TRIAL_STARTED = 91
     PLAN_CHANGED = 92
+    PLAN_CANCELLED = 93
 
     SERVICEHOOK_ADD = 100
     SERVICEHOOK_EDIT = 101
@@ -162,6 +163,7 @@ class AuditLogEntry(Model):
             (AuditLogEntryEvent.SET_ONDEMAND, 'ondemand.edit'),
             (AuditLogEntryEvent.TRIAL_STARTED, 'trial.started'),
             (AuditLogEntryEvent.PLAN_CHANGED, 'plan.changed'),
+            (AuditLogEntryEvent.PLAN_CANCELLED, 'plan.cancelled'),
         )
     )
     ip_address = models.GenericIPAddressField(null=True, unpack_ipv4=True)
@@ -304,6 +306,8 @@ class AuditLogEntry(Model):
             return 'started trial'
         elif self.event == AuditLogEntryEvent.PLAN_CHANGED:
             return 'changed plan to %s' % (self.data['plan_name'], )
+        elif self.event == AuditLogEntryEvent.PLAN_CANCELLED:
+            return 'cancelled plan'
 
         elif self.event == AuditLogEntryEvent.SERVICEHOOK_ADD:
             return 'added a service hook for "%s"' % (truncatechars(self.data['url'], 64), )
diff --git a/src/sentry/static/sentry/app/views/settings/organizationAuditLog/index.jsx b/src/sentry/static/sentry/app/views/settings/organizationAuditLog/index.jsx
index 3dde1a86b3..2a32c3f12c 100644
--- a/src/sentry/static/sentry/app/views/settings/organizationAuditLog/index.jsx
+++ b/src/sentry/static/sentry/app/views/settings/organizationAuditLog/index.jsx
@@ -57,6 +57,7 @@ const EVENT_TYPES = [
   'ondemand.edit',
   'trial.started',
   'plan.changed',
+  'plan.cancelled',
 ].sort();
 
 class OrganizationAuditLog extends AsyncView {
diff --git a/tests/js/spec/views/settings/__snapshots__/auditLogView.spec.jsx.snap b/tests/js/spec/views/settings/__snapshots__/auditLogView.spec.jsx.snap
index 81a11fa750..ddd548a1a1 100644
--- a/tests/js/spec/views/settings/__snapshots__/auditLogView.spec.jsx.snap
+++ b/tests/js/spec/views/settings/__snapshots__/auditLogView.spec.jsx.snap
@@ -88,6 +88,7 @@ exports[`OrganizationAuditLog renders 1`] = `
         "org.edit",
         "org.remove",
         "org.restore",
+        "plan.cancelled",
         "plan.changed",
         "project.accept-transfer",
         "project.create",
