commit 33266d6e4023e0368c26cb2a7503eae27881377e
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Sun Jan 19 00:12:06 2014 -0800

    Move short_url to property

diff --git a/src/sentry/interfaces.py b/src/sentry/interfaces.py
index 9af9bff645..bf5a364bc1 100644
--- a/src/sentry/interfaces.py
+++ b/src/sentry/interfaces.py
@@ -968,7 +968,7 @@ class Http(Interface):
     .. note:: This interface can be passed as the 'request' key in addition
               to the full interface path.
     """
-    attrs = ('url', 'short_url', 'method', 'data', 'query_string', 'cookies', 'headers',
+    attrs = ('url', 'method', 'data', 'query_string', 'cookies', 'headers',
              'env')
 
     display_score = 1000
@@ -1000,7 +1000,6 @@ class Http(Interface):
             data = dict(enumerate(data))
 
         self.url = urlparse.urlunsplit((scheme, netloc, path, query, fragment))
-        self.short_url = urlparse.urlunsplit((scheme, netloc, path, None, None))
         self.method = method
         self.data = data
         self.query_string = query
@@ -1025,6 +1024,11 @@ class Http(Interface):
         self.headers = headers or {}
         self.env = env or {}
 
+    @property
+    def short_url(self):
+        scheme, netloc, path, _, _ = urlparse.urlsplit(self.url)
+        return urlparse.urlunsplit((scheme, netloc, path, None, None))
+
     def serialize(self):
         return {
             'url': self.url,
