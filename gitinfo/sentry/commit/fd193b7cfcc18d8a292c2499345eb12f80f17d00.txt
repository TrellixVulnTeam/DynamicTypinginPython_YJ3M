commit fd193b7cfcc18d8a292c2499345eb12f80f17d00
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Aug 13 14:39:17 2015 -0700

    Make user appearance settings available to React
    
    Refs GH-1765

diff --git a/src/sentry/api/serializers/models/user.py b/src/sentry/api/serializers/models/user.py
index 27d75b56d3..0a6353197e 100644
--- a/src/sentry/api/serializers/models/user.py
+++ b/src/sentry/api/serializers/models/user.py
@@ -1,7 +1,9 @@
 from __future__ import absolute_import
 
+from django.conf import settings
+
 from sentry.api.serializers import Serializer, register
-from sentry.models import User
+from sentry.models import User, UserOption
 from sentry.utils.avatar import get_gravatar_url
 
 
@@ -15,4 +17,18 @@ class UserSerializer(Serializer):
             'email': obj.email,
             'avatarUrl': get_gravatar_url(obj.email, size=32),
         }
+        if obj == user:
+            options = {
+                o.key: o.value
+                for o in UserOption.objects.filter(
+                    user=user,
+                    project__isnull=True,
+                )
+            }
+            d['options'] = {
+                'language': options.get('language') or 'en',
+                'stacktraceOrder': int(options.get('stacktrace_order', -1) or -1),
+                'timezone': options.get('timezone') or settings.SENTRY_DEFAULT_TIME_ZONE,
+
+            }
         return d
