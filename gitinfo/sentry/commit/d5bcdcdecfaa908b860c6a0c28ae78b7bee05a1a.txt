commit d5bcdcdecfaa908b860c6a0c28ae78b7bee05a1a
Author: Burak Yigit Kaya <byk@sentry.io>
Date:   Tue Oct 15 00:17:57 2019 +0300

    build: Fix node heap fail during static asset build (#15079)

diff --git a/src/sentry/utils/distutils/commands/build_assets.py b/src/sentry/utils/distutils/commands/build_assets.py
index 79084e399a..811741c6bb 100644
--- a/src/sentry/utils/distutils/commands/build_assets.py
+++ b/src/sentry/utils/distutils/commands/build_assets.py
@@ -127,6 +127,8 @@ class BuildAssetsCommand(BaseBuildCommand):
         env = dict(os.environ)
         env["SENTRY_STATIC_DIST_PATH"] = self.sentry_static_dist_path
         env["NODE_ENV"] = "production"
+        # TODO: Our JS builds should not require 4GB heap space
+        env["NODE_OPTIONS"] = ((env.get("NODE_OPTIONS", "") + " --max-old-space-size=4096")).lstrip()
         self._run_yarn_command(["webpack", "--bail"], env=env)
 
     def _write_version_file(self, version_info):
