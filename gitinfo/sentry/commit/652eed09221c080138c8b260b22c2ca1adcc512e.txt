commit 652eed09221c080138c8b260b22c2ca1adcc512e
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Jun 9 13:00:19 2013 -0700

    Revert "Remove unused setup.py hack"
    
    This reverts commit f898d40d41758028610b085941c16d4754a91daf.

diff --git a/setup.py b/setup.py
index cc09993c7a..e954e36003 100755
--- a/setup.py
+++ b/setup.py
@@ -24,6 +24,16 @@ any application.
 
 from setuptools import setup, find_packages
 
+# Hack to prevent stupid "TypeError: 'NoneType' object is not callable" error
+# in multiprocessing/util.py _exit_function when running `python
+# setup.py test` (see
+# http://www.eby-sarna.com/pipermail/peak/2010-May/003357.html)
+for m in ('multiprocessing', 'billiard'):
+    try:
+        __import__(m)
+    except ImportError:
+        pass
+
 dev_requires = [
     'flake8>=1.7.0,<2.0',
 ]
