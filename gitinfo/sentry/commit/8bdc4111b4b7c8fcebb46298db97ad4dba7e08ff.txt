commit 8bdc4111b4b7c8fcebb46298db97ad4dba7e08ff
Author: Mark Story <mark@sentry.io>
Date:   Fri Aug 31 16:17:30 2018 -0400

    feat(teams) Remove unused code for team deletion
    
    These views and templates have been moved to react.

diff --git a/src/sentry/templates/sentry/help/index.html b/src/sentry/templates/sentry/help/index.html
deleted file mode 100644
index 23de1d7c17..0000000000
--- a/src/sentry/templates/sentry/help/index.html
+++ /dev/null
@@ -1,46 +0,0 @@
-{% extends "sentry/layout.html" %}
-
-{% load i18n %}
-{% load sentry_docs %}
-{% load sentry_helpers %}
-
-{% block wrapperclass %}docs{% endblock %}
-
-{% block scripts_bottom %}
-  <script>
-    (function(){
-      if($("#toc").length) {
-        var toc = $("#toc");
-
-        $(".docs .main h4").each(function(i) {
-          $(toc).append('<li><a href="#' + $(this).attr("id") +'">' + $(this).text() +'</a></li>');
-        })
-      }
-    })();
-  </script>
-{% endblock %}
-
-{% block sidebar %}
-  {% render_doc_sidebar %}
-{% endblock %}
-
-{% block main %}
-  <h3>Sentry Documentation</h3>
-  <p>Welcome to the Sentry Docs. Reading through the guides and reference here will give you a complete understanding of how Sentry works and how to get the most out of it. We recommend that you read through the Guides first, then on to the client installation instructions for your specific platform.</p>
-
-  <h3>Contacting a human</h3>
-  <p>If your specific question or concern isn't covered in the docs, we're here to help. Please don't hesitate to:</p>
-
-  <ul>
-    <li><a href="https://groups.google.com/group/getsentry">Post to our public user group</a></li>
-    <li><a href="irc://irc.freenode.net/sentry">Chat with us on #sentry (irc.freenode.net)</a></li>
-    {% block help_contact_links %}
-        {% comment %}This block is used by sentry.io{% endcomment %}
-    {% endblock %}
-  </ul>
-
-  <h3>Contributing</h3>
-
-  <p>Just like Sentry itself, our docs are <a href="https://github.com/getsentry/sentry">open source</a>. If you've found an error or think something could be explained more clearly, you're always welcomed (and encouraged) to submit a pull request.</p>
-
-{% endblock main %}
diff --git a/src/sentry/templates/sentry/teams/base.html b/src/sentry/templates/sentry/teams/base.html
deleted file mode 100644
index 3958c8ee7d..0000000000
--- a/src/sentry/templates/sentry/teams/base.html
+++ /dev/null
@@ -1,11 +0,0 @@
-{% extends "sentry/bases/modal.html" %}
-
-{% load i18n %}
-
-{% block title %}{% trans "Team List" %} | {{ block.super }}{% endblock %}
-
-{% block bodyclass %}{% endblock %}
-
-{% block content %}
-        {% block main %}{% endblock %}
-{% endblock %}
diff --git a/src/sentry/templates/sentry/teams/remove.html b/src/sentry/templates/sentry/teams/remove.html
deleted file mode 100644
index 67d1dfd21e..0000000000
--- a/src/sentry/templates/sentry/teams/remove.html
+++ /dev/null
@@ -1,32 +0,0 @@
-{% extends "sentry/bases/modal.html" %}
-
-{% load crispy_forms_tags %}
-{% load i18n %}
-{% load sentry_helpers %}
-
-{% block title %}{% trans "Remove Team" %} | {{ block.super }}{% endblock %}
-
-{% block main %}
-  <div class="page-header">
-    <h2>
-      {% trans "Remove Team" %}
-      <small>#{{ team.slug }}</small>
-    </h2>
-  </div>
-  <form action="" method="post">
-    {% csrf_token %}
-
-    <p><strong>{% trans "Removing this team is permanent and cannot be undone!" %}</strong></p>
-
-    {{ form|as_crispy_errors }}
-
-    {% for field in form %}
-      {{ field|as_crispy_field }}
-    {% endfor %}
-
-    <fieldset class="form-actions">
-      <button type="submit" class="btn btn-danger">{% trans "Remove Team" %}</button>
-      <a href="{% absolute_uri '/organizations/{}/teams/{}/settings/' team.organization.slug team.slug %}" class="btn btn-default">{% trans "Cancel" %}</a>
-    </fieldset>
-  </form>
-{% endblock %}
diff --git a/src/sentry/web/frontend/remove_team.py b/src/sentry/web/frontend/remove_team.py
deleted file mode 100644
index 10910f1d63..0000000000
--- a/src/sentry/web/frontend/remove_team.py
+++ /dev/null
@@ -1,45 +0,0 @@
-from __future__ import absolute_import
-
-from django import forms
-from django.contrib import messages
-from django.core.urlresolvers import reverse
-from django.http import HttpResponseRedirect
-from django.utils.translation import ugettext_lazy as _
-
-from sentry.api import client
-from sentry.web.frontend.base import TeamView
-
-
-class RemoveTeamForm(forms.Form):
-    pass
-
-
-class RemoveTeamView(TeamView):
-    required_scope = 'team:admin'
-    sudo_required = True
-
-    def get_form(self, request):
-        if request.method == 'POST':
-            return RemoveTeamForm(request.POST)
-        return RemoveTeamForm(None)
-
-    def handle(self, request, organization, team):
-        form = self.get_form(request)
-
-        if form.is_valid():
-            client.delete(
-                '/teams/{}/{}/'.format(organization.slug, team.slug), request=request, is_sudo=True
-            )
-
-            messages.add_message(
-                request, messages.SUCCESS,
-                _(u'The team #%r was scheduled for deletion.') % (team.slug.encode('utf-8'), )
-            )
-
-            return HttpResponseRedirect(reverse('sentry'))
-
-        context = {
-            'form': form,
-        }
-
-        return self.respond('sentry/teams/remove.html', context)
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index c9a11b2e7d..ab021e76c9 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -47,7 +47,6 @@ from sentry.web.frontend.release_webhook import ReleaseWebhookView
 from sentry.web.frontend.restore_organization import RestoreOrganizationView
 from sentry.web.frontend.team_avatar import TeamAvatarPhotoView
 from sentry.web.frontend.account_identity import AccountIdentityAssociateView
-from sentry.web.frontend.remove_team import RemoveTeamView
 from sentry.web.frontend.sudo import SudoView
 from sentry.web.frontend.unsubscribe_issue_notifications import \
     UnsubscribeIssueNotificationsView
@@ -438,13 +437,6 @@ urlpatterns += patterns(
         react_page_view,
         name='sentry-organization-stats'
     ),
-
-    # TODO REMOVEME #NEW-SETTINGS, redirect to team settings?
-    url(
-        r'^organizations/(?P<organization_slug>[\w_-]+)/teams/(?P<team_slug>[\w_-]+)/remove/$',
-        RemoveTeamView.as_view(),
-        name='sentry-remove-team'
-    ),
     url(
         r'^organizations/(?P<organization_slug>[\w_-]+)/teams/new/$', react_page_view),
     url(
diff --git a/tests/sentry/web/frontend/test_remove_team.py b/tests/sentry/web/frontend/test_remove_team.py
deleted file mode 100644
index 8f96c7eae2..0000000000
--- a/tests/sentry/web/frontend/test_remove_team.py
+++ /dev/null
@@ -1,49 +0,0 @@
-from __future__ import absolute_import
-
-from django.core.urlresolvers import reverse
-
-from sentry.models import Team, TeamStatus, DeletedTeam
-from sentry.testutils import TestCase, PermissionTestCase
-
-
-class RemoveTeamPermissionTest(PermissionTestCase):
-    def setUp(self):
-        super(RemoveTeamPermissionTest, self).setUp()
-        self.path = reverse('sentry-remove-team', args=[self.organization.slug, self.team.slug])
-
-    def test_teamless_admin_cannot_load(self):
-        self.assert_teamless_admin_cannot_access(self.path)
-
-    def test_team_admin_can_load(self):
-        self.assert_team_admin_can_access(self.path)
-
-    def test_owner_can_load(self):
-        self.assert_owner_can_access(self.path)
-
-
-class RemoveTeamTest(TestCase):
-    def setUp(self):
-        super(RemoveTeamTest, self).setUp()
-        self.owner = self.create_user(email='example@example.com')
-        self.organization = self.create_organization(owner=self.owner)
-        self.team = self.create_team(name='bar', organization=self.organization)
-        self.path = reverse('sentry-remove-team', args=[self.organization.slug, self.team.slug])
-        self.login_as(self.owner)
-
-    def test_does_load(self):
-        resp = self.client.get(self.path)
-
-        assert resp.status_code == 200
-        self.assertTemplateUsed(resp, 'sentry/teams/remove.html')
-
-    def test_valid_params(self):
-        resp = self.client.post(self.path)
-
-        assert resp.status_code == 302
-        assert resp['Location'] == 'http://testserver' + reverse('sentry')
-
-        team = Team.objects.get(id=self.team.id)
-
-        assert team.status == TeamStatus.PENDING_DELETION
-        deleted_team = DeletedTeam.objects.get(slug=team.slug)
-        self.assert_valid_deleted_log(deleted_team, team)
