commit cce650be47f38adf2e55a37ff2b686db535e3b2b
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue Jul 5 16:24:18 2016 +0300

    Added test for stacktrace frame address normalization

diff --git a/tests/sentry/interfaces/test_stacktrace.py b/tests/sentry/interfaces/test_stacktrace.py
index 0b30842c51..811d4bae78 100644
--- a/tests/sentry/interfaces/test_stacktrace.py
+++ b/tests/sentry/interfaces/test_stacktrace.py
@@ -449,6 +449,19 @@ class StacktraceTest(TestCase):
             {'x': '<nan>'},
         )
 
+    def test_address_normalization(self):
+        interface = Frame.to_python({
+            'lineno': 1,
+            'filename': 'blah.c',
+            'function': 'main',
+            'instruction_addr': 123456,
+            'symbol_addr': '123450',
+            'image_addr': '0x0',
+        })
+        assert interface.instruction_addr == '0x1e240'
+        assert interface.symbol_addr == '0x1e23a'
+        assert interface.image_addr == '0x0'
+
 
 class SlimFrameDataTest(TestCase):
     def test_under_max(self):
