commit fd61e6e0b174ebd6499b59c81a8bd06876f05028
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Sep 4 20:41:13 2014 -0700

    Render rule fields with crispy forms

diff --git a/src/sentry/rules/base.py b/src/sentry/rules/base.py
index f1315af309..3a5c45a08d 100644
--- a/src/sentry/rules/base.py
+++ b/src/sentry/rules/base.py
@@ -39,6 +39,7 @@ from __future__ import absolute_import
 
 import re
 
+from crispy_forms.templatetags.crispy_forms_filters import as_crispy_field
 from django.utils.html import escape
 from django.utils.safestring import mark_safe
 
@@ -59,14 +60,17 @@ class RuleBase(object):
     def __init__(self, project, data=None):
         self.project = project
         self.data = data or {}
+        self.had_data = data is not None
 
     def get_option(self, key):
         return self.data.get(key)
 
     def get_form_instance(self):
-        return self.form_cls(
-            self.data,
-        )
+        if self.had_data:
+            data = self.data
+        else:
+            data = None
+        return self.form_cls(data)
 
     def render_label(self):
         return self.label.format(**self.data)
@@ -79,7 +83,7 @@ class RuleBase(object):
 
         def replace_field(match):
             field = match.group(1)
-            return unicode(form[field])
+            return as_crispy_field(form[field])
 
         return mark_safe(re.sub(r'{([^}]+)}', replace_field, escape(self.label)))
 
