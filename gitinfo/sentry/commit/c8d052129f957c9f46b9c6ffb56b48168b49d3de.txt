commit c8d052129f957c9f46b9c6ffb56b48168b49d3de
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Feb 3 07:11:40 2015 -0800

    Dont bother lifting lock on keys (let it expire when pending happens)

diff --git a/src/sentry/buffer/redis.py b/src/sentry/buffer/redis.py
index 4b42c83796..e5b4a1db06 100644
--- a/src/sentry/buffer/redis.py
+++ b/src/sentry/buffer/redis.py
@@ -116,24 +116,21 @@ class RedisBuffer(Buffer):
             return
         self.conn.expire(lock_key, 10)
 
-        try:
-            with self.conn.map() as conn:
-                values = conn.hgetall(key)
-                conn.delete(key)
-
-            if not values:
-                return
-
-            model = import_string(values['m'])
-            filters = pickle.loads(values['f'])
-            incr_values = {}
-            extra_values = {}
-            for k, v in values.iteritems():
-                if k.startswith('i+'):
-                    incr_values[k[2:]] = int(v)
-                elif k.startswith('e+'):
-                    extra_values[k[2:]] = pickle.loads(v)
-
-            super(RedisBuffer, self).process(model, incr_values, filters, extra_values)
-        finally:
-            self.conn.delete(lock_key)
+        with self.conn.map() as conn:
+            values = conn.hgetall(key)
+            conn.delete(key)
+
+        if not values:
+            return
+
+        model = import_string(values['m'])
+        filters = pickle.loads(values['f'])
+        incr_values = {}
+        extra_values = {}
+        for k, v in values.iteritems():
+            if k.startswith('i+'):
+                incr_values[k[2:]] = int(v)
+            elif k.startswith('e+'):
+                extra_values[k[2:]] = pickle.loads(v)
+
+        super(RedisBuffer, self).process(model, incr_values, filters, extra_values)
