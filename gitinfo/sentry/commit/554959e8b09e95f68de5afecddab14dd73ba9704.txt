commit 554959e8b09e95f68de5afecddab14dd73ba9704
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Sep 11 02:42:50 2014 -0700

    Move help page links into sidebar

diff --git a/src/sentry/templatetags/sentry_docs.py b/src/sentry/templatetags/sentry_docs.py
index 9ace118003..77c8c7e93d 100644
--- a/src/sentry/templatetags/sentry_docs.py
+++ b/src/sentry/templatetags/sentry_docs.py
@@ -1,6 +1,9 @@
+from __future__ import absolute_import, print_function
+
 from django import template
 
 from sentry.api.base import DocSection
+from sentry.models import HelpPage
 
 register = template.Library()
 
@@ -11,6 +14,10 @@ def render_doc_sidebar(context):
         ({'id': v.name.lower(), 'name': v.value} for v in DocSection),
         key=lambda x: x['name'])
 
+    pages = list(HelpPage.objects.filter(is_visible=True))
+    pages.sort(key=lambda x: (-x.priority, x.title))
+
     return {
         'api_sections': api_sections,
+        'page_list': pages,
     }
diff --git a/src/sentry/web/frontend/help_index.py b/src/sentry/web/frontend/help_index.py
index c2cdde319b..8723f6f835 100644
--- a/src/sentry/web/frontend/help_index.py
+++ b/src/sentry/web/frontend/help_index.py
@@ -2,18 +2,10 @@ from __future__ import absolute_import, print_function
 
 from django.views.generic import View
 
-from sentry.models import HelpPage
 from sentry.web.helpers import render_to_response
 
 
 class HelpIndexView(View):
 
     def get(self, request):
-        pages = list(HelpPage.objects.filter(is_visible=True))
-        pages.sort(key=lambda x: (-x.priority, x.title))
-
-        context = {
-            'page_list': pages,
-        }
-
-        return render_to_response('sentry/help/index.html', context, request)
+        return render_to_response('sentry/help/index.html', {}, request)
diff --git a/tests/sentry/web/frontend/test_help_index.py b/tests/sentry/web/frontend/test_help_index.py
index d3afaabecc..92961f649a 100644
--- a/tests/sentry/web/frontend/test_help_index.py
+++ b/tests/sentry/web/frontend/test_help_index.py
@@ -1,33 +1,11 @@
 from django.core.urlresolvers import reverse
 
-from sentry.models import HelpPage
 from sentry.testutils import TestCase
 
 
 class HelpIndexTest(TestCase):
     def test_simple(self):
-        page1 = HelpPage.objects.create(
-            title='foo',
-            content='bar',
-            priority=50,
-        )
-        page2 = HelpPage.objects.create(
-            title='foo',
-            content='bar',
-            priority=100,
-        )
-        page3 = HelpPage.objects.create(
-            title='foo',
-            content='bar',
-            priority=100,
-            is_visible=False,
-        )
-
         path = reverse('sentry-help')
 
         resp = self.client.get(path)
         assert resp.status_code == 200
-        assert resp.context['page_list'] == [
-            page2,
-            page1,
-        ]
