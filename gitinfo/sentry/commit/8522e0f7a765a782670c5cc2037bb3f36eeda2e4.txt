commit 8522e0f7a765a782670c5cc2037bb3f36eeda2e4
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Thu Nov 21 10:00:25 2019 -0800

    build(git-hooks): Fix always calling make (#15751)
    
    The post-merge hook was always calling make even if dependent files were changed

diff --git a/config/hooks/post-merge b/config/hooks/post-merge
index 8a5f0e1457..6730c84aa4 100755
--- a/config/hooks/post-merge
+++ b/config/hooks/post-merge
@@ -13,9 +13,10 @@ grep -E --quiet 'requirements.*\.txt' "$files_changed_upstream" && py="install-s
 grep -E --quiet 'yarn.lock' "$files_changed_upstream"           && js="install-yarn-pkgs "
 grep -E --quiet 'migrations' "$files_changed_upstream"          && migrations="apply-migrations "
 
+[[ "$py" || "$js" || "$migrations" ]] && needs_update=1
 update_command="make ${py}${js}${migrations}"
 
-[[ "$py" || "$js" || "$migrations" ]] && cat <<EOF
+[[ "$needs_update" ]] && cat <<EOF
 
 [${red}${bold}!!!${reset}] ${red} It looks like some dependencies have changed that will require your intervention. Run the following to update:${reset}
 
@@ -23,6 +24,6 @@ update_command="make ${py}${js}${migrations}"
 
 EOF
 
-if [[ "$SENTRY_POST_MERGE_AUTO_UPDATE" ]]; then
+if [[ "$SENTRY_POST_MERGE_AUTO_UPDATE" && "$needs_update" ]]; then
   $update_command
 fi
