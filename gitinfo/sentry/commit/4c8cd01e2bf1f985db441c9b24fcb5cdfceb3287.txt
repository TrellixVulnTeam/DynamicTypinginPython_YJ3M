commit 4c8cd01e2bf1f985db441c9b24fcb5cdfceb3287
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Jun 11 08:46:37 2019 -0700

    ref(sentry10): Remove ProjectLink and ProjectState (#13626)
    
    Remove project related helpers that aren't needed in Sentry 10

diff --git a/src/sentry/static/sentry/app/components/projectLink.jsx b/src/sentry/static/sentry/app/components/projectLink.jsx
deleted file mode 100644
index a34a12eac8..0000000000
--- a/src/sentry/static/sentry/app/components/projectLink.jsx
+++ /dev/null
@@ -1,50 +0,0 @@
-import PropTypes from 'prop-types';
-import React from 'react';
-import {Link as RouterLink} from 'react-router';
-
-/**
- * A modified link used for navigating between project pages that
- * will keep the environment in the querystring when navigating if it's present
- *
- * Falls back to <a> if there is no router present.
- */
-class ProjectLink extends React.Component {
-  static propTypes = {
-    to: PropTypes.oneOfType([PropTypes.string, PropTypes.object]).isRequired,
-  };
-
-  static contextTypes = {
-    location: PropTypes.object,
-  };
-
-  render() {
-    const {location} = this.context;
-
-    if (location) {
-      const hasEnvironment = 'environment' in location.query;
-
-      let {to} = this.props;
-
-      if (hasEnvironment) {
-        if (typeof to === 'string') {
-          to = {pathname: to, query: {environment: location.query.environment}};
-        } else {
-          to.query = {...to.query, environment: location.query.environment};
-        }
-      }
-
-      const routerProps = to ? {...this.props, to} : {...this.props};
-
-      return <RouterLink {...routerProps}>{this.props.children}</RouterLink>;
-    } else {
-      const {to, ...props} = this.props;
-      return (
-        <a {...props} href={to}>
-          {this.props.children}
-        </a>
-      );
-    }
-  }
-}
-
-export default ProjectLink;
diff --git a/src/sentry/static/sentry/app/mixins/projectState.jsx b/src/sentry/static/sentry/app/mixins/projectState.jsx
deleted file mode 100644
index 39208111fc..0000000000
--- a/src/sentry/static/sentry/app/mixins/projectState.jsx
+++ /dev/null
@@ -1,16 +0,0 @@
-import SentryTypes from 'app/sentryTypes';
-import OrganizationState from 'app/mixins/organizationState';
-
-const ProjectState = {
-  mixins: [OrganizationState],
-
-  contextTypes: {
-    project: SentryTypes.Project,
-  },
-
-  getProject() {
-    return this.context.project;
-  },
-};
-
-export default ProjectState;
diff --git a/src/sentry/static/sentry/app/utils/withPlugins.jsx b/src/sentry/static/sentry/app/utils/withPlugins.jsx
index 4e7160ef28..01af2013b6 100644
--- a/src/sentry/static/sentry/app/utils/withPlugins.jsx
+++ b/src/sentry/static/sentry/app/utils/withPlugins.jsx
@@ -6,69 +6,74 @@ import {defined} from 'app/utils';
 import {fetchPlugins} from 'app/actionCreators/plugins';
 import getDisplayName from 'app/utils/getDisplayName';
 import PluginsStore from 'app/stores/pluginsStore';
-import ProjectState from 'app/mixins/projectState';
 import SentryTypes from 'app/sentryTypes';
 
+import withOrganization from 'app/utils/withOrganization';
+import withProject from 'app/utils/withProject';
+
 /**
  * Higher order component that fetches list of plugins and
  * passes PluginsStore to component as `plugins`
  */
 const withPlugins = WrappedComponent =>
-  createReactClass({
-    displayName: `withPlugins(${getDisplayName(WrappedComponent)})`,
-    propTypes: {
-      organization: SentryTypes.Organization,
-      project: SentryTypes.Project,
-    },
-    mixins: [ProjectState, Reflux.connect(PluginsStore, 'store')],
+  withOrganization(
+    withProject(
+      createReactClass({
+        displayName: `withPlugins(${getDisplayName(WrappedComponent)})`,
+        propTypes: {
+          organization: SentryTypes.Organization,
+          project: SentryTypes.Project,
+        },
+        mixins: [Reflux.connect(PluginsStore, 'store')],
 
-    componentDidMount() {
-      this.fetchPlugins();
-    },
+        componentDidMount() {
+          this.fetchPlugins();
+        },
 
-    componentDidUpdate(prevProps, prevState, prevContext) {
-      const organization = this.props.organization || this.getOrganization();
-      const project = this.props.project || this.getProject();
+        componentDidUpdate(prevProps, prevState, prevContext) {
+          const {organization, project} = this.props;
 
-      // Only fetch plugins when a org slug or project slug has changed
-      const prevOrg = prevProps.organization || (prevContext && prevContext.organization);
-      const prevProject = prevProps.project || (prevContext && prevContext.project);
+          // Only fetch plugins when a org slug or project slug has changed
+          const prevOrg =
+            prevProps.organization || (prevContext && prevContext.organization);
+          const prevProject = prevProps.project || (prevContext && prevContext.project);
 
-      // If previous org/project is undefined then it means:
-      // the HoC has mounted, `fetchPlugins` has been called (via cDM), and
-      // store was updated. We don't need to fetchPlugins again (or it will cause an infinite loop)
-      //
-      // This is for the unusual case where component is mounted and receives a new org/project prop
-      // e.g. when switching projects via breadcrumbs in settings.
-      if (!defined(prevProject) || !defined(prevOrg)) {
-        return;
-      }
+          // If previous org/project is undefined then it means:
+          // the HoC has mounted, `fetchPlugins` has been called (via cDM), and
+          // store was updated. We don't need to fetchPlugins again (or it will cause an infinite loop)
+          //
+          // This is for the unusual case where component is mounted and receives a new org/project prop
+          // e.g. when switching projects via breadcrumbs in settings.
+          if (!defined(prevProject) || !defined(prevOrg)) {
+            return;
+          }
 
-      const isOrgSame = prevOrg.slug === organization.slug;
-      const isProjectSame = prevProject.slug === project.slug;
+          const isOrgSame = prevOrg.slug === organization.slug;
+          const isProjectSame = prevProject.slug === project.slug;
 
-      // Don't do anything if org and project are the same
-      if (isOrgSame && isProjectSame) {
-        return;
-      }
+          // Don't do anything if org and project are the same
+          if (isOrgSame && isProjectSame) {
+            return;
+          }
 
-      this.fetchPlugins();
-    },
+          this.fetchPlugins();
+        },
 
-    fetchPlugins() {
-      const organization = this.props.organization || this.getOrganization();
-      const project = this.props.project || this.getProject();
+        fetchPlugins() {
+          const {organization, project} = this.props;
 
-      if (!project || !organization) {
-        return;
-      }
+          if (!project || !organization) {
+            return;
+          }
 
-      fetchPlugins({projectId: project.slug, orgId: organization.slug});
-    },
+          fetchPlugins({projectId: project.slug, orgId: organization.slug});
+        },
 
-    render() {
-      return <WrappedComponent {...this.props} plugins={this.state.store} />;
-    },
-  });
+        render() {
+          return <WrappedComponent {...this.props} plugins={this.state.store} />;
+        },
+      })
+    )
+  );
 
 export default withPlugins;
diff --git a/tests/js/spec/components/__snapshots__/projectLink.spec.jsx.snap b/tests/js/spec/components/__snapshots__/projectLink.spec.jsx.snap
deleted file mode 100644
index bf762b4308..0000000000
--- a/tests/js/spec/components/__snapshots__/projectLink.spec.jsx.snap
+++ /dev/null
@@ -1,45 +0,0 @@
-// Jest Snapshot v1, https://goo.gl/fbAQLP
-
-exports[`ProjectLink does not have environment in query 1`] = `
-<Link
-  onlyActiveOnIndex={false}
-  style={Object {}}
-  to="http://some.url/"
->
-  Go somewhere!
-</Link>
-`;
-
-exports[`ProjectLink has environment in query 1`] = `
-<Link
-  onlyActiveOnIndex={false}
-  style={Object {}}
-  to={
-    Object {
-      "pathname": "http://some.url/",
-      "query": Object {
-        "environment": "staging",
-      },
-    }
-  }
->
-  Go somewhere!
-</Link>
-`;
-
-exports[`ProjectLink has environment in query 2`] = `
-<Link
-  onlyActiveOnIndex={false}
-  style={Object {}}
-  to={
-    Object {
-      "pathname": "http://some.url/",
-      "query": Object {
-        "environment": "",
-      },
-    }
-  }
->
-  Go somewhere!
-</Link>
-`;
diff --git a/tests/js/spec/components/eventOrGroupExtraDetails.spec.jsx b/tests/js/spec/components/eventOrGroupExtraDetails.spec.jsx
index 08a3635291..6986148922 100644
--- a/tests/js/spec/components/eventOrGroupExtraDetails.spec.jsx
+++ b/tests/js/spec/components/eventOrGroupExtraDetails.spec.jsx
@@ -3,8 +3,6 @@ import {shallow} from 'enzyme';
 import toJson from 'enzyme-to-json';
 import EventOrGroupExtraDetails from 'app/components/eventOrGroupExtraDetails';
 
-jest.mock('app/mixins/projectState');
-
 describe('EventOrGroupExtraDetails', function() {
   it('renders last and first seen', function() {
     const component = shallow(
diff --git a/tests/js/spec/components/projectLink.spec.jsx b/tests/js/spec/components/projectLink.spec.jsx
deleted file mode 100644
index d4bd8141e7..0000000000
--- a/tests/js/spec/components/projectLink.spec.jsx
+++ /dev/null
@@ -1,45 +0,0 @@
-import React from 'react';
-import {shallow} from 'enzyme';
-import ProjectLink from 'app/components/projectLink';
-
-const path = 'http://some.url/';
-
-describe('ProjectLink', function() {
-  it('has environment in query', function() {
-    const environments = ['staging', ''];
-
-    environments.forEach(function(env) {
-      const wrapper = shallow(<ProjectLink to={path}>Go somewhere!</ProjectLink>, {
-        context: {
-          location: {
-            query: {
-              environment: env,
-            },
-          },
-        },
-      });
-
-      const updatedToProp = wrapper.find('Link').prop('to');
-
-      expect(updatedToProp).toEqual({pathname: path, query: {environment: env}});
-
-      expect(wrapper).toMatchSnapshot();
-    });
-  });
-
-  it('does not have environment in query', function() {
-    const wrapper = shallow(<ProjectLink to={path}>Go somewhere!</ProjectLink>, {
-      context: {
-        location: {
-          query: {},
-        },
-      },
-    });
-
-    const updatedToProp = wrapper.find('Link').prop('to');
-
-    expect(updatedToProp).toEqual(path);
-
-    expect(wrapper).toMatchSnapshot();
-  });
-});
diff --git a/tests/js/spec/views/__snapshots__/projectPluginDetails.spec.jsx.snap b/tests/js/spec/views/__snapshots__/projectPluginDetails.spec.jsx.snap
index 4e358e1b73..095873bc6d 100644
--- a/tests/js/spec/views/__snapshots__/projectPluginDetails.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/projectPluginDetails.spec.jsx.snap
@@ -1,7 +1,7 @@
 // Jest Snapshot v1, https://goo.gl/fbAQLP
 
 exports[`ProjectPluginDetails renders 1`] = `
-<withPlugins(ProjectPluginDetails)
+<WithOrganizationMockWrapper
   location={
     Object {
       "pathame": "/mock-pathname/",
@@ -56,7 +56,7 @@ exports[`ProjectPluginDetails renders 1`] = `
     }
   }
 >
-  <ProjectPluginDetails
+  <withProject(withPlugins(ProjectPluginDetails))
     location={
       Object {
         "pathame": "/mock-pathname/",
@@ -98,14 +98,6 @@ exports[`ProjectPluginDetails renders 1`] = `
         "projectId": "project-slug",
       }
     }
-    plugins={
-      Object {
-        "error": null,
-        "loading": true,
-        "pageLinks": null,
-        "plugins": Array [],
-      }
-    }
     project={
       Object {
         "environments": Array [],
@@ -119,114 +111,205 @@ exports[`ProjectPluginDetails renders 1`] = `
       }
     }
   >
-    <SideEffect(DocumentTitle)
-      title="Sentry - Sentry"
+    <withPlugins(ProjectPluginDetails)
+      location={
+        Object {
+          "pathame": "/mock-pathname/",
+          "query": Object {},
+        }
+      }
+      organization={
+        Object {
+          "access": Array [
+            "org:read",
+            "org:write",
+            "org:admin",
+            "org:integrations",
+            "project:read",
+            "project:write",
+            "project:admin",
+            "team:read",
+            "team:write",
+            "team:admin",
+          ],
+          "features": Array [],
+          "id": "3",
+          "name": "Organization Name",
+          "onboardingTasks": Array [],
+          "projects": Array [],
+          "scrapeJavaScript": true,
+          "slug": "org-slug",
+          "status": Object {
+            "id": "active",
+            "name": "active",
+          },
+          "teams": Array [],
+        }
+      }
+      params={
+        Object {
+          "orgId": "org-slug",
+          "pluginId": "amazon-sqs",
+          "projectId": "project-slug",
+        }
+      }
+      project={
+        Object {
+          "environments": Array [],
+          "hasAccess": true,
+          "id": "2",
+          "isBookmarked": false,
+          "isMember": true,
+          "name": "Project Name",
+          "slug": "project-slug",
+          "teams": Array [],
+        }
+      }
     >
-      <DocumentTitle
-        title="Sentry - Sentry"
+      <ProjectPluginDetails
+        location={
+          Object {
+            "pathame": "/mock-pathname/",
+            "query": Object {},
+          }
+        }
+        organization={
+          Object {
+            "access": Array [
+              "org:read",
+              "org:write",
+              "org:admin",
+              "org:integrations",
+              "project:read",
+              "project:write",
+              "project:admin",
+              "team:read",
+              "team:write",
+              "team:admin",
+            ],
+            "features": Array [],
+            "id": "3",
+            "name": "Organization Name",
+            "onboardingTasks": Array [],
+            "projects": Array [],
+            "scrapeJavaScript": true,
+            "slug": "org-slug",
+            "status": Object {
+              "id": "active",
+              "name": "active",
+            },
+            "teams": Array [],
+          }
+        }
+        params={
+          Object {
+            "orgId": "org-slug",
+            "pluginId": "amazon-sqs",
+            "projectId": "project-slug",
+          }
+        }
+        plugins={
+          Object {
+            "error": null,
+            "loading": true,
+            "pageLinks": null,
+            "plugins": Array [],
+          }
+        }
+        project={
+          Object {
+            "environments": Array [],
+            "hasAccess": true,
+            "id": "2",
+            "isBookmarked": false,
+            "isMember": true,
+            "name": "Project Name",
+            "slug": "project-slug",
+            "teams": Array [],
+          }
+        }
       >
-        <div>
-          <SettingsPageHeading
-            action={
-              <div
-                className="pull-right"
-              >
-                <Button
-                  disabled={false}
-                  onClick={[Function]}
-                  size="small"
-                  style={
-                    Object {
-                      "marginRight": "6px",
-                    }
-                  }
-                >
-                  Enable Plugin
-                </Button>
-                <Button
-                  disabled={false}
-                  onClick={[Function]}
-                  size="small"
-                >
-                  Reset Configuration
-                </Button>
-              </div>
-            }
-            noTitleStyles={false}
-            title="Amazon SQS"
+        <SideEffect(DocumentTitle)
+          title="Sentry - Sentry"
+        >
+          <DocumentTitle
+            title="Sentry - Sentry"
           >
-            <Wrapper>
-              <div
-                className="css-1r5ylk7-Wrapper e1kblvez2"
+            <div>
+              <SettingsPageHeading
+                action={
+                  <div
+                    className="pull-right"
+                  >
+                    <Button
+                      disabled={false}
+                      onClick={[Function]}
+                      size="small"
+                      style={
+                        Object {
+                          "marginRight": "6px",
+                        }
+                      }
+                    >
+                      Enable Plugin
+                    </Button>
+                    <Button
+                      disabled={false}
+                      onClick={[Function]}
+                      size="small"
+                    >
+                      Reset Configuration
+                    </Button>
+                  </div>
+                }
+                noTitleStyles={false}
+                title="Amazon SQS"
               >
-                <Flex
-                  align="center"
-                >
-                  <Base
-                    align="center"
-                    className="css-5ipae5"
+                <Wrapper>
+                  <div
+                    className="css-1r5ylk7-Wrapper e1kblvez2"
                   >
-                    <div
-                      className="css-5ipae5"
-                      is={null}
+                    <Flex
+                      align="center"
                     >
-                      <Title
-                        styled={false}
+                      <Base
+                        align="center"
+                        className="css-5ipae5"
                       >
-                        <Base
-                          className="css-1ky52ze-Title e1kblvez0"
-                        >
-                          <div
-                            className="css-1ky52ze-Title e1kblvez0"
-                            is={null}
-                          >
-                            <HeaderTitle>
-                              <h4
-                                className="css-1w8ttcn-HeaderTitle e6lvex72"
-                              >
-                                Amazon SQS
-                              </h4>
-                            </HeaderTitle>
-                          </div>
-                        </Base>
-                      </Title>
-                      <Action>
                         <div
-                          className="css-18luhfc-Action e1kblvez1"
+                          className="css-5ipae5"
+                          is={null}
                         >
-                          <div
-                            className="pull-right"
+                          <Title
+                            styled={false}
                           >
-                            <Button
-                              disabled={false}
-                              onClick={[Function]}
-                              size="small"
-                              style={
-                                Object {
-                                  "marginRight": "6px",
-                                }
-                              }
+                            <Base
+                              className="css-1ky52ze-Title e1kblvez0"
                             >
-                              <StyledButton
-                                aria-disabled={false}
-                                aria-label="Enable Plugin"
-                                disabled={false}
-                                onClick={[Function]}
-                                role="button"
-                                size="small"
-                                style={
-                                  Object {
-                                    "marginRight": "6px",
-                                  }
-                                }
+                              <div
+                                className="css-1ky52ze-Title e1kblvez0"
+                                is={null}
                               >
-                                <ForwardRef
-                                  aria-disabled={false}
-                                  aria-label="Enable Plugin"
-                                  className="css-1uhlusb-StyledButton-getColors e12ma6z0"
+                                <HeaderTitle>
+                                  <h4
+                                    className="css-1w8ttcn-HeaderTitle e6lvex72"
+                                  >
+                                    Amazon SQS
+                                  </h4>
+                                </HeaderTitle>
+                              </div>
+                            </Base>
+                          </Title>
+                          <Action>
+                            <div
+                              className="css-18luhfc-Action e1kblvez1"
+                            >
+                              <div
+                                className="pull-right"
+                              >
+                                <Button
                                   disabled={false}
                                   onClick={[Function]}
-                                  role="button"
                                   size="small"
                                   style={
                                     Object {
@@ -234,10 +317,10 @@ exports[`ProjectPluginDetails renders 1`] = `
                                     }
                                   }
                                 >
-                                  <button
+                                  <StyledButton
                                     aria-disabled={false}
                                     aria-label="Enable Plugin"
-                                    className="css-1uhlusb-StyledButton-getColors e12ma6z0"
+                                    disabled={false}
                                     onClick={[Function]}
                                     role="button"
                                     size="small"
@@ -247,453 +330,482 @@ exports[`ProjectPluginDetails renders 1`] = `
                                       }
                                     }
                                   >
-                                    <ButtonLabel
+                                    <ForwardRef
+                                      aria-disabled={false}
+                                      aria-label="Enable Plugin"
+                                      className="css-1uhlusb-StyledButton-getColors e12ma6z0"
+                                      disabled={false}
+                                      onClick={[Function]}
+                                      role="button"
                                       size="small"
+                                      style={
+                                        Object {
+                                          "marginRight": "6px",
+                                        }
+                                      }
                                     >
-                                      <Component
-                                        className="css-7ui8bl-ButtonLabel e12ma6z1"
+                                      <button
+                                        aria-disabled={false}
+                                        aria-label="Enable Plugin"
+                                        className="css-1uhlusb-StyledButton-getColors e12ma6z0"
+                                        onClick={[Function]}
+                                        role="button"
                                         size="small"
+                                        style={
+                                          Object {
+                                            "marginRight": "6px",
+                                          }
+                                        }
                                       >
-                                        <span
-                                          className="css-7ui8bl-ButtonLabel e12ma6z1"
+                                        <ButtonLabel
+                                          size="small"
                                         >
-                                          Enable Plugin
-                                        </span>
-                                      </Component>
-                                    </ButtonLabel>
-                                  </button>
-                                </ForwardRef>
-                              </StyledButton>
-                            </Button>
-                            <Button
-                              disabled={false}
-                              onClick={[Function]}
-                              size="small"
-                            >
-                              <StyledButton
-                                aria-disabled={false}
-                                aria-label="Reset Configuration"
-                                disabled={false}
-                                onClick={[Function]}
-                                role="button"
-                                size="small"
-                              >
-                                <ForwardRef
-                                  aria-disabled={false}
-                                  aria-label="Reset Configuration"
-                                  className="css-1uhlusb-StyledButton-getColors e12ma6z0"
+                                          <Component
+                                            className="css-7ui8bl-ButtonLabel e12ma6z1"
+                                            size="small"
+                                          >
+                                            <span
+                                              className="css-7ui8bl-ButtonLabel e12ma6z1"
+                                            >
+                                              Enable Plugin
+                                            </span>
+                                          </Component>
+                                        </ButtonLabel>
+                                      </button>
+                                    </ForwardRef>
+                                  </StyledButton>
+                                </Button>
+                                <Button
                                   disabled={false}
                                   onClick={[Function]}
-                                  role="button"
                                   size="small"
                                 >
-                                  <button
+                                  <StyledButton
                                     aria-disabled={false}
                                     aria-label="Reset Configuration"
-                                    className="css-1uhlusb-StyledButton-getColors e12ma6z0"
+                                    disabled={false}
                                     onClick={[Function]}
                                     role="button"
                                     size="small"
                                   >
-                                    <ButtonLabel
+                                    <ForwardRef
+                                      aria-disabled={false}
+                                      aria-label="Reset Configuration"
+                                      className="css-1uhlusb-StyledButton-getColors e12ma6z0"
+                                      disabled={false}
+                                      onClick={[Function]}
+                                      role="button"
                                       size="small"
                                     >
-                                      <Component
-                                        className="css-7ui8bl-ButtonLabel e12ma6z1"
+                                      <button
+                                        aria-disabled={false}
+                                        aria-label="Reset Configuration"
+                                        className="css-1uhlusb-StyledButton-getColors e12ma6z0"
+                                        onClick={[Function]}
+                                        role="button"
                                         size="small"
                                       >
-                                        <span
-                                          className="css-7ui8bl-ButtonLabel e12ma6z1"
+                                        <ButtonLabel
+                                          size="small"
                                         >
-                                          Reset Configuration
-                                        </span>
-                                      </Component>
-                                    </ButtonLabel>
-                                  </button>
-                                </ForwardRef>
-                              </StyledButton>
-                            </Button>
-                          </div>
+                                          <Component
+                                            className="css-7ui8bl-ButtonLabel e12ma6z1"
+                                            size="small"
+                                          >
+                                            <span
+                                              className="css-7ui8bl-ButtonLabel e12ma6z1"
+                                            >
+                                              Reset Configuration
+                                            </span>
+                                          </Component>
+                                        </ButtonLabel>
+                                      </button>
+                                    </ForwardRef>
+                                  </StyledButton>
+                                </Button>
+                              </div>
+                            </div>
+                          </Action>
                         </div>
-                      </Action>
-                    </div>
-                  </Base>
-                </Flex>
-              </div>
-            </Wrapper>
-          </SettingsPageHeading>
-          <div
-            className="row"
-          >
-            <div
-              className="col-md-7"
-            >
-              <withApi(PluginConfig)
-                data={
-                  Object {
-                    "assets": Array [],
-                    "author": Object {
-                      "name": "Sentry Team",
-                      "url": "https://github.com/getsentry/sentry",
-                    },
-                    "canDisable": true,
-                    "enabled": false,
-                    "hasConfiguration": true,
-                    "id": "amazon-sqs",
-                    "isHidden": false,
-                    "name": "Amazon SQS",
-                    "slug": "amazon-sqs",
-                    "version": "8.23.0.dev0",
-                  }
-                }
-                enabled={false}
-                onDisablePlugin={[Function]}
-                organization={
-                  Object {
-                    "access": Array [
-                      "org:read",
-                      "org:write",
-                      "org:admin",
-                      "org:integrations",
-                      "project:read",
-                      "project:write",
-                      "project:admin",
-                      "team:read",
-                      "team:write",
-                      "team:admin",
-                    ],
-                    "features": Array [],
-                    "id": "3",
-                    "name": "Organization Name",
-                    "onboardingTasks": Array [],
-                    "projects": Array [],
-                    "scrapeJavaScript": true,
-                    "slug": "org-slug",
-                    "status": Object {
-                      "id": "active",
-                      "name": "active",
-                    },
-                    "teams": Array [],
-                  }
-                }
-                project={
-                  Object {
-                    "environments": Array [],
-                    "hasAccess": true,
-                    "id": "2",
-                    "isBookmarked": false,
-                    "isMember": true,
-                    "name": "Project Name",
-                    "slug": "project-slug",
-                    "teams": Array [],
-                  }
-                }
+                      </Base>
+                    </Flex>
+                  </div>
+                </Wrapper>
+              </SettingsPageHeading>
+              <div
+                className="row"
               >
-                <PluginConfig
-                  api={Client {}}
-                  data={
-                    Object {
-                      "assets": Array [],
-                      "author": Object {
-                        "name": "Sentry Team",
-                        "url": "https://github.com/getsentry/sentry",
-                      },
-                      "canDisable": true,
-                      "enabled": false,
-                      "hasConfiguration": true,
-                      "id": "amazon-sqs",
-                      "isHidden": false,
-                      "name": "Amazon SQS",
-                      "slug": "amazon-sqs",
-                      "version": "8.23.0.dev0",
+                <div
+                  className="col-md-7"
+                >
+                  <withApi(PluginConfig)
+                    data={
+                      Object {
+                        "assets": Array [],
+                        "author": Object {
+                          "name": "Sentry Team",
+                          "url": "https://github.com/getsentry/sentry",
+                        },
+                        "canDisable": true,
+                        "enabled": false,
+                        "hasConfiguration": true,
+                        "id": "amazon-sqs",
+                        "isHidden": false,
+                        "name": "Amazon SQS",
+                        "slug": "amazon-sqs",
+                        "version": "8.23.0.dev0",
+                      }
                     }
-                  }
-                  enabled={false}
-                  onDisablePlugin={[Function]}
-                  organization={
-                    Object {
-                      "access": Array [
-                        "org:read",
-                        "org:write",
-                        "org:admin",
-                        "org:integrations",
-                        "project:read",
-                        "project:write",
-                        "project:admin",
-                        "team:read",
-                        "team:write",
-                        "team:admin",
-                      ],
-                      "features": Array [],
-                      "id": "3",
-                      "name": "Organization Name",
-                      "onboardingTasks": Array [],
-                      "projects": Array [],
-                      "scrapeJavaScript": true,
-                      "slug": "org-slug",
-                      "status": Object {
-                        "id": "active",
-                        "name": "active",
-                      },
-                      "teams": Array [],
+                    enabled={false}
+                    onDisablePlugin={[Function]}
+                    organization={
+                      Object {
+                        "access": Array [
+                          "org:read",
+                          "org:write",
+                          "org:admin",
+                          "org:integrations",
+                          "project:read",
+                          "project:write",
+                          "project:admin",
+                          "team:read",
+                          "team:write",
+                          "team:admin",
+                        ],
+                        "features": Array [],
+                        "id": "3",
+                        "name": "Organization Name",
+                        "onboardingTasks": Array [],
+                        "projects": Array [],
+                        "scrapeJavaScript": true,
+                        "slug": "org-slug",
+                        "status": Object {
+                          "id": "active",
+                          "name": "active",
+                        },
+                        "teams": Array [],
+                      }
                     }
-                  }
-                  project={
-                    Object {
-                      "environments": Array [],
-                      "hasAccess": true,
-                      "id": "2",
-                      "isBookmarked": false,
-                      "isMember": true,
-                      "name": "Project Name",
-                      "slug": "project-slug",
-                      "teams": Array [],
+                    project={
+                      Object {
+                        "environments": Array [],
+                        "hasAccess": true,
+                        "id": "2",
+                        "isBookmarked": false,
+                        "isMember": true,
+                        "name": "Project Name",
+                        "slug": "project-slug",
+                        "teams": Array [],
+                      }
                     }
-                  }
-                >
-                  <Panel
-                    className="plugin-config ref-plugin-config-amazon-sqs"
                   >
-                    <Component
-                      className="plugin-config ref-plugin-config-amazon-sqs css-10qfvek-Panel e1laxa7d0"
+                    <PluginConfig
+                      api={Client {}}
+                      data={
+                        Object {
+                          "assets": Array [],
+                          "author": Object {
+                            "name": "Sentry Team",
+                            "url": "https://github.com/getsentry/sentry",
+                          },
+                          "canDisable": true,
+                          "enabled": false,
+                          "hasConfiguration": true,
+                          "id": "amazon-sqs",
+                          "isHidden": false,
+                          "name": "Amazon SQS",
+                          "slug": "amazon-sqs",
+                          "version": "8.23.0.dev0",
+                        }
+                      }
+                      enabled={false}
+                      onDisablePlugin={[Function]}
+                      organization={
+                        Object {
+                          "access": Array [
+                            "org:read",
+                            "org:write",
+                            "org:admin",
+                            "org:integrations",
+                            "project:read",
+                            "project:write",
+                            "project:admin",
+                            "team:read",
+                            "team:write",
+                            "team:admin",
+                          ],
+                          "features": Array [],
+                          "id": "3",
+                          "name": "Organization Name",
+                          "onboardingTasks": Array [],
+                          "projects": Array [],
+                          "scrapeJavaScript": true,
+                          "slug": "org-slug",
+                          "status": Object {
+                            "id": "active",
+                            "name": "active",
+                          },
+                          "teams": Array [],
+                        }
+                      }
+                      project={
+                        Object {
+                          "environments": Array [],
+                          "hasAccess": true,
+                          "id": "2",
+                          "isBookmarked": false,
+                          "isMember": true,
+                          "name": "Project Name",
+                          "slug": "project-slug",
+                          "teams": Array [],
+                        }
+                      }
                     >
-                      <div
-                        className="plugin-config ref-plugin-config-amazon-sqs css-10qfvek-Panel e1laxa7d0"
+                      <Panel
+                        className="plugin-config ref-plugin-config-amazon-sqs"
                       >
-                        <PanelHeader
-                          hasButtons={true}
+                        <Component
+                          className="plugin-config ref-plugin-config-amazon-sqs css-10qfvek-Panel e1laxa7d0"
                         >
-                          <Component
-                            className="css-1m2bast-PanelHeader-getPadding e1p8v8nv0"
-                            hasButtons={true}
+                          <div
+                            className="plugin-config ref-plugin-config-amazon-sqs css-10qfvek-Panel e1laxa7d0"
                           >
-                            <Flex
-                              align="center"
-                              className="css-1m2bast-PanelHeader-getPadding e1p8v8nv0"
-                              justify="space-between"
+                            <PanelHeader
+                              hasButtons={true}
                             >
-                              <Base
-                                align="center"
-                                className="e1p8v8nv0 css-yowjp-PanelHeader-getPadding"
-                                justify="space-between"
+                              <Component
+                                className="css-1m2bast-PanelHeader-getPadding e1p8v8nv0"
+                                hasButtons={true}
                               >
-                                <div
-                                  className="e1p8v8nv0 css-yowjp-PanelHeader-getPadding"
-                                  is={null}
+                                <Flex
+                                  align="center"
+                                  className="css-1m2bast-PanelHeader-getPadding e1p8v8nv0"
+                                  justify="space-between"
                                 >
-                                  <Flex
+                                  <Base
                                     align="center"
-                                    flex="1"
+                                    className="e1p8v8nv0 css-yowjp-PanelHeader-getPadding"
+                                    justify="space-between"
                                   >
-                                    <Base
-                                      align="center"
-                                      className="css-1yrw3fm"
-                                      flex="1"
+                                    <div
+                                      className="e1p8v8nv0 css-yowjp-PanelHeader-getPadding"
+                                      is={null}
                                     >
-                                      <div
-                                        className="css-1yrw3fm"
-                                        is={null}
+                                      <Flex
+                                        align="center"
+                                        flex="1"
                                       >
-                                        <Flex
+                                        <Base
                                           align="center"
-                                          mr={1}
+                                          className="css-1yrw3fm"
+                                          flex="1"
                                         >
-                                          <Base
-                                            align="center"
-                                            className="css-fbx8di"
-                                            mr={1}
+                                          <div
+                                            className="css-1yrw3fm"
+                                            is={null}
                                           >
-                                            <div
-                                              className="css-fbx8di"
-                                              is={null}
+                                            <Flex
+                                              align="center"
+                                              mr={1}
                                             >
-                                              <PluginIcon
-                                                pluginId="amazon-sqs"
-                                                size={20}
+                                              <Base
+                                                align="center"
+                                                className="css-fbx8di"
+                                                mr={1}
                                               >
-                                                <IntegrationIcon
-                                                  image={Object {}}
-                                                  size={20}
+                                                <div
+                                                  className="css-fbx8di"
+                                                  is={null}
                                                 >
-                                                  <div
-                                                    className="css-1sk2vxu-IntegrationIcon e1bhjds90"
+                                                  <PluginIcon
+                                                    pluginId="amazon-sqs"
                                                     size={20}
-                                                  />
-                                                </IntegrationIcon>
-                                              </PluginIcon>
-                                            </div>
-                                          </Base>
-                                        </Flex>
-                                        <span>
-                                          Amazon SQS
-                                        </span>
-                                      </div>
-                                    </Base>
-                                  </Flex>
-                                </div>
-                              </Base>
-                            </Flex>
-                          </Component>
-                        </PanelHeader>
-                        <PanelBody
-                          direction="column"
-                          disablePadding={true}
-                          flex={true}
-                          pt={2}
-                          px={2}
-                          wrap="wrap"
-                        >
-                          <Flex
-                            className="css-a4ya23-textStyles"
-                            direction="column"
-                            pt={2}
-                            px={2}
-                            wrap="wrap"
-                          >
-                            <Base
-                              className="css-z9mjil-textStyles"
+                                                  >
+                                                    <IntegrationIcon
+                                                      image={Object {}}
+                                                      size={20}
+                                                    >
+                                                      <div
+                                                        className="css-1sk2vxu-IntegrationIcon e1bhjds90"
+                                                        size={20}
+                                                      />
+                                                    </IntegrationIcon>
+                                                  </PluginIcon>
+                                                </div>
+                                              </Base>
+                                            </Flex>
+                                            <span>
+                                              Amazon SQS
+                                            </span>
+                                          </div>
+                                        </Base>
+                                      </Flex>
+                                    </div>
+                                  </Base>
+                                </Flex>
+                              </Component>
+                            </PanelHeader>
+                            <PanelBody
                               direction="column"
+                              disablePadding={true}
+                              flex={true}
                               pt={2}
                               px={2}
                               wrap="wrap"
                             >
-                              <div
-                                className="css-z9mjil-textStyles"
-                                is={null}
+                              <Flex
+                                className="css-a4ya23-textStyles"
+                                direction="column"
+                                pt={2}
+                                px={2}
+                                wrap="wrap"
                               >
-                                <div
-                                  dangerouslySetInnerHTML={
-                                    Object {
-                                      "__html": undefined,
-                                    }
-                                  }
-                                />
-                                <PluginSettings
-                                  organization={
-                                    Object {
-                                      "access": Array [
-                                        "org:read",
-                                        "org:write",
-                                        "org:admin",
-                                        "org:integrations",
-                                        "project:read",
-                                        "project:write",
-                                        "project:admin",
-                                        "team:read",
-                                        "team:write",
-                                        "team:admin",
-                                      ],
-                                      "features": Array [],
-                                      "id": "3",
-                                      "name": "Organization Name",
-                                      "onboardingTasks": Array [],
-                                      "projects": Array [],
-                                      "scrapeJavaScript": true,
-                                      "slug": "org-slug",
-                                      "status": Object {
-                                        "id": "active",
-                                        "name": "active",
-                                      },
-                                      "teams": Array [],
-                                    }
-                                  }
-                                  plugin={
-                                    DefaultPlugin {
-                                      "assets": Array [],
-                                      "author": Object {
-                                        "name": "Sentry Team",
-                                        "url": "https://github.com/getsentry/sentry",
-                                      },
-                                      "canDisable": true,
-                                      "enabled": false,
-                                      "hasConfiguration": true,
-                                      "id": "amazon-sqs",
-                                      "isHidden": false,
-                                      "name": "Amazon SQS",
-                                      "slug": "amazon-sqs",
-                                      "version": "8.23.0.dev0",
-                                    }
-                                  }
-                                  project={
-                                    Object {
-                                      "environments": Array [],
-                                      "hasAccess": true,
-                                      "id": "2",
-                                      "isBookmarked": false,
-                                      "isMember": true,
-                                      "name": "Project Name",
-                                      "slug": "project-slug",
-                                      "teams": Array [],
-                                    }
-                                  }
-                                />
-                              </div>
-                            </Base>
-                          </Flex>
-                        </PanelBody>
-                      </div>
-                    </Component>
-                  </Panel>
-                </PluginConfig>
-              </withApi(PluginConfig)>
-            </div>
-            <div
-              className="col-md-4 col-md-offset-1"
-            >
-              <div
-                className="pluginDetails-meta"
-              >
-                <h4>
-                  Plugin Information
-                </h4>
-                <dl
-                  className="flat"
+                                <Base
+                                  className="css-z9mjil-textStyles"
+                                  direction="column"
+                                  pt={2}
+                                  px={2}
+                                  wrap="wrap"
+                                >
+                                  <div
+                                    className="css-z9mjil-textStyles"
+                                    is={null}
+                                  >
+                                    <div
+                                      dangerouslySetInnerHTML={
+                                        Object {
+                                          "__html": undefined,
+                                        }
+                                      }
+                                    />
+                                    <PluginSettings
+                                      organization={
+                                        Object {
+                                          "access": Array [
+                                            "org:read",
+                                            "org:write",
+                                            "org:admin",
+                                            "org:integrations",
+                                            "project:read",
+                                            "project:write",
+                                            "project:admin",
+                                            "team:read",
+                                            "team:write",
+                                            "team:admin",
+                                          ],
+                                          "features": Array [],
+                                          "id": "3",
+                                          "name": "Organization Name",
+                                          "onboardingTasks": Array [],
+                                          "projects": Array [],
+                                          "scrapeJavaScript": true,
+                                          "slug": "org-slug",
+                                          "status": Object {
+                                            "id": "active",
+                                            "name": "active",
+                                          },
+                                          "teams": Array [],
+                                        }
+                                      }
+                                      plugin={
+                                        DefaultPlugin {
+                                          "assets": Array [],
+                                          "author": Object {
+                                            "name": "Sentry Team",
+                                            "url": "https://github.com/getsentry/sentry",
+                                          },
+                                          "canDisable": true,
+                                          "enabled": false,
+                                          "hasConfiguration": true,
+                                          "id": "amazon-sqs",
+                                          "isHidden": false,
+                                          "name": "Amazon SQS",
+                                          "slug": "amazon-sqs",
+                                          "version": "8.23.0.dev0",
+                                        }
+                                      }
+                                      project={
+                                        Object {
+                                          "environments": Array [],
+                                          "hasAccess": true,
+                                          "id": "2",
+                                          "isBookmarked": false,
+                                          "isMember": true,
+                                          "name": "Project Name",
+                                          "slug": "project-slug",
+                                          "teams": Array [],
+                                        }
+                                      }
+                                    />
+                                  </div>
+                                </Base>
+                              </Flex>
+                            </PanelBody>
+                          </div>
+                        </Component>
+                      </Panel>
+                    </PluginConfig>
+                  </withApi(PluginConfig)>
+                </div>
+                <div
+                  className="col-md-4 col-md-offset-1"
                 >
-                  <dt>
-                    Name
-                  </dt>
-                  <dd>
-                    Amazon SQS
-                  </dd>
-                  <dt>
-                    Author
-                  </dt>
-                  <dd>
-                    Sentry Team
-                  </dd>
-                  <div>
-                    <dt>
-                      URL
-                    </dt>
-                    <dd>
-                      <ForwardRef
-                        href="https://github.com/getsentry/sentry"
-                        rel="noreferrer noopener"
-                        target="_blank"
-                      >
-                        <a
-                          href="https://github.com/getsentry/sentry"
-                          rel="noreferrer noopener"
-                          target="_blank"
-                        >
-                          github.com/getsentry/sentry
-                        </a>
-                      </ForwardRef>
-                    </dd>
+                  <div
+                    className="pluginDetails-meta"
+                  >
+                    <h4>
+                      Plugin Information
+                    </h4>
+                    <dl
+                      className="flat"
+                    >
+                      <dt>
+                        Name
+                      </dt>
+                      <dd>
+                        Amazon SQS
+                      </dd>
+                      <dt>
+                        Author
+                      </dt>
+                      <dd>
+                        Sentry Team
+                      </dd>
+                      <div>
+                        <dt>
+                          URL
+                        </dt>
+                        <dd>
+                          <ForwardRef
+                            href="https://github.com/getsentry/sentry"
+                            rel="noreferrer noopener"
+                            target="_blank"
+                          >
+                            <a
+                              href="https://github.com/getsentry/sentry"
+                              rel="noreferrer noopener"
+                              target="_blank"
+                            >
+                              github.com/getsentry/sentry
+                            </a>
+                          </ForwardRef>
+                        </dd>
+                      </div>
+                      <dt>
+                        Version
+                      </dt>
+                      <dd>
+                        8.23.0.dev0
+                      </dd>
+                    </dl>
                   </div>
-                  <dt>
-                    Version
-                  </dt>
-                  <dd>
-                    8.23.0.dev0
-                  </dd>
-                </dl>
+                </div>
               </div>
             </div>
-          </div>
-        </div>
-      </DocumentTitle>
-    </SideEffect(DocumentTitle)>
-  </ProjectPluginDetails>
-</withPlugins(ProjectPluginDetails)>
+          </DocumentTitle>
+        </SideEffect(DocumentTitle)>
+      </ProjectPluginDetails>
+    </withPlugins(ProjectPluginDetails)>
+  </withProject(withPlugins(ProjectPluginDetails))>
+</WithOrganizationMockWrapper>
 `;
diff --git a/tests/js/spec/views/organizationGroupDetails/groupMergedView.spec.jsx b/tests/js/spec/views/organizationGroupDetails/groupMergedView.spec.jsx
index a9d3741512..b7c1660efa 100644
--- a/tests/js/spec/views/organizationGroupDetails/groupMergedView.spec.jsx
+++ b/tests/js/spec/views/organizationGroupDetails/groupMergedView.spec.jsx
@@ -8,11 +8,6 @@ import {Client} from 'app/api';
 import events from 'app-test/mocks/events';
 
 jest.mock('app/api');
-jest.mock('app/mixins/projectState', () => {
-  return {
-    getFeatures: () => new Set([]),
-  };
-});
 
 const mockData = {
   merged: [
