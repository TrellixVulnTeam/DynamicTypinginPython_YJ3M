commit 2b34b27a91b6fbc5e5b3781816f4f46e9ba10467
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Feb 4 20:08:01 2015 -0800

    Functional resolve/bookmark

diff --git a/src/sentry/static/sentry/app/views/aggregate.jsx b/src/sentry/static/sentry/app/views/aggregate.jsx
index 0e40c1459f..0465a18768 100644
--- a/src/sentry/static/sentry/app/views/aggregate.jsx
+++ b/src/sentry/static/sentry/app/views/aggregate.jsx
@@ -42,12 +42,13 @@ var AggregateDetails = React.createClass({
     });
   },
 
-  getAggregateDetailsEndpoint: function() {
+  getAggregateDetailsEndpoint() {
     return '/groups/' + this.getParams().aggregateId + '/';
   },
 
-  render: function() {
+  render() {
     var aggregate = this.state.aggregate;
+    var params = this.getParams();
 
     if (!aggregate) {
       return <div />;
@@ -56,6 +57,8 @@ var AggregateDetails = React.createClass({
     return (
       <div className={this.props.className}>
         <AggregateHeader
+            orgId={params.orgId}
+            projectId={params.projectId}
             aggregate={aggregate}
             statsPeriod={this.state.statsPeriod}
             memberList={this.props.memberList} />
diff --git a/src/sentry/static/sentry/app/views/aggregate/header.jsx b/src/sentry/static/sentry/app/views/aggregate/header.jsx
index 3e6069135d..70f502d18f 100644
--- a/src/sentry/static/sentry/app/views/aggregate/header.jsx
+++ b/src/sentry/static/sentry/app/views/aggregate/header.jsx
@@ -2,6 +2,7 @@
 
 var React = require("react");
 
+var api = require("../../api");
 var AssigneeSelector = require("../../components/assigneeSelector");
 var Count = require("../../components/count");
 var PropTypes = require("../../proptypes");
@@ -9,12 +10,35 @@ var TimeSince = require("../../components/timeSince");
 
 var AggregateHeader = React.createClass({
   propTypes: {
+    orgId: React.PropTypes.string.isRequired,
+    projectId: React.PropTypes.string.isRequired,
     aggregate: PropTypes.Aggregate.isRequired,
     memberList: React.PropTypes.instanceOf(Array).isRequired,
     statsPeriod: React.PropTypes.string.isRequired
   },
 
-  render: function() {
+  onToggleResolve() {
+    api.bulkUpdate({
+      orgId: this.props.orgId,
+      projectId: this.props.projectId,
+      itemIds: [this.props.aggregate.id],
+      data: {
+        status: this.props.aggregate.status === 'resolved' ? 'unresolved' : 'resolved'
+      }
+    });
+  },
+
+  onToggleBookmark() {
+    api.bulkUpdate({
+      orgId: this.props.orgId,
+      projectId: this.props.projectId,
+      itemIds: [this.props.aggregate.id],
+      data: {
+        isBookmarked: !this.props.aggregate.isBookmarked
+      }
+    });
+  },
+  render() {
     var data = this.props.aggregate,
         userCount = 0;
 
@@ -37,6 +61,16 @@ var AggregateHeader = React.createClass({
       className += " isResolved";
     }
 
+    var resolveClassName = "group-resolve btn btn-default btn-sm";
+    if (data.status === "resolved") {
+      resolveClassName += " active";
+    }
+
+    var bookmarkClassName = "group-bookmark btn btn-default btn-sm";
+    if (data.isBookmarked) {
+      bookmarkClassName += " active";
+    }
+
     return (
       <div className={className}>
         <div className="row">
@@ -79,10 +113,14 @@ var AggregateHeader = React.createClass({
         </div>
         <div className="group-actions">
           <div className="btn-group">
-            <a href="#" className="group-resolve btn btn-default btn-sm"
-               data-action="resolve"><span className="icon-checkmark"></span></a>
-            <a href="#" className="group-bookmark btn btn-default btn-sm"
-               data-action="bookmark"><span className="icon-bookmark"></span></a>
+            <a className={resolveClassName}
+               onClick={this.onToggleResolve}>
+              <span className="icon-checkmark"></span>
+            </a>
+            <a className={bookmarkClassName}
+               onClick={this.onToggleBookmark}>
+              <span className="icon-bookmark"></span>
+            </a>
           </div>
           <div className="btn-group">
             <a href="#" className="group-remove btn btn-default btn-sm"
