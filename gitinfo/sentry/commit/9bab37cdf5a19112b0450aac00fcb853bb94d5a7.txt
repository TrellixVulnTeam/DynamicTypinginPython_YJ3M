commit 9bab37cdf5a19112b0450aac00fcb853bb94d5a7
Author: Megan Heskett <meg.heskett@gmail.com>
Date:   Wed Oct 2 11:09:36 2019 -0700

    feat(request-join): Add request join email (#14819)

diff --git a/src/sentry/templates/sentry/emails/organization-join-request.html b/src/sentry/templates/sentry/emails/organization-join-request.html
new file mode 100644
index 0000000000..ad3f60483e
--- /dev/null
+++ b/src/sentry/templates/sentry/emails/organization-join-request.html
@@ -0,0 +1,15 @@
+{% extends "sentry/emails/base.html" %}
+
+{% load i18n %}
+
+{% block main %}
+  <h3>Request for Access</h3>
+
+  <p><strong>{{ email }}</strong> is requesting to join the <a href="{{ organization_link }}">{{ organization.name }}</a> organization.</p>
+
+  <a href="{{ pending_requests_link }}" class="btn">View access requests</a>
+
+  <p class="via">
+    You are receiving this email because you're listed as an organization Owner or Manager.
+  </p>
+{% endblock %}
diff --git a/src/sentry/templates/sentry/emails/organization-join-request.txt b/src/sentry/templates/sentry/emails/organization-join-request.txt
new file mode 100644
index 0000000000..3f26919f3d
--- /dev/null
+++ b/src/sentry/templates/sentry/emails/organization-join-request.txt
@@ -0,0 +1,9 @@
+Request for Access
+
+{{ email }} is requesting to join the {{ organization.name }} organization.
+
+View access requests by clicking the link below:
+
+    {{ pending_requests_link }}
+
+You are receiving this email because you're listed as an organization Owner or Manager.
diff --git a/src/sentry/web/debug_urls.py b/src/sentry/web/debug_urls.py
index 90b08d7e23..016c7efd93 100644
--- a/src/sentry/web/debug_urls.py
+++ b/src/sentry/web/debug_urls.py
@@ -14,6 +14,9 @@ from sentry.web.frontend.debug.debug_trigger_error import DebugTriggerErrorView
 from sentry.web.frontend.debug.debug_error_embed import DebugErrorPageEmbedView
 from sentry.web.frontend.debug.debug_incident_activity_email import DebugIncidentActivityEmailView
 from sentry.web.frontend.debug.debug_invalid_identity_email import DebugInvalidIdentityEmailView
+from sentry.web.frontend.debug.debug_organization_join_request import (
+    DebugOrganizationJoinRequestEmailView,
+)
 from sentry.web.frontend.debug.debug_mfa_added_email import DebugMfaAddedEmailView
 from sentry.web.frontend.debug.debug_mfa_removed_email import DebugMfaRemovedEmailView
 from sentry.web.frontend.debug.debug_new_release_email import DebugNewReleaseEmailView
@@ -75,6 +78,7 @@ urlpatterns = patterns(
         DebugResolvedInReleaseUpcomingEmailView.as_view(),
     ),
     url(r"^debug/mail/request-access/$", sentry.web.frontend.debug.mail.request_access),
+    url(r"^debug/mail/join-request/$", DebugOrganizationJoinRequestEmailView.as_view()),
     url(r"^debug/mail/access-approved/$", sentry.web.frontend.debug.mail.access_approved),
     url(r"^debug/mail/invitation/$", sentry.web.frontend.debug.mail.invitation),
     url(r"^debug/mail/invalid-identity/$", DebugInvalidIdentityEmailView.as_view()),
diff --git a/src/sentry/web/frontend/debug/debug_organization_join_request.py b/src/sentry/web/frontend/debug/debug_organization_join_request.py
new file mode 100644
index 0000000000..ac19836a20
--- /dev/null
+++ b/src/sentry/web/frontend/debug/debug_organization_join_request.py
@@ -0,0 +1,29 @@
+from __future__ import absolute_import, print_function
+
+from django.core.urlresolvers import reverse
+from django.views.generic import View
+
+from sentry.models import Organization
+from sentry.utils.http import absolute_uri
+
+from .mail import MailPreview
+
+
+class DebugOrganizationJoinRequestEmailView(View):
+    def get(self, request):
+        org = Organization(id=1, slug="default", name="Default")
+        context = {
+            "organization": org,
+            "email": "test@gmail.com",
+            "pending_requests_link": absolute_uri(
+                reverse("sentry-organization-members", args=[org.slug])
+            ),
+            "organization_link": absolute_uri(
+                reverse("sentry-organization-index", args=[org.slug])
+            ),
+        }
+        return MailPreview(
+            html_template="sentry/emails/organization-join-request.html",
+            text_template="sentry/emails/organization-join-request.txt",
+            context=context,
+        ).render(request)
