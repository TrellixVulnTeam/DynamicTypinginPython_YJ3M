commit 0e55088e80a81e6c70dd7e0fc5eddb364dde4a36
Author: Mark Story <mark@sentry.io>
Date:   Tue Jun 30 15:24:58 2020 -0400

    fix(ui) Fix rendering of disabled buttons when account lacks full discover (#19633)
    
    The hovercard anchor elements were around all three buttons breaking the
    grid spacing.

diff --git a/src/sentry/static/sentry/app/views/eventsV2/table/tableActions.tsx b/src/sentry/static/sentry/app/views/eventsV2/table/tableActions.tsx
index 30d6621e95..a28b762b6f 100644
--- a/src/sentry/static/sentry/app/views/eventsV2/table/tableActions.tsx
+++ b/src/sentry/static/sentry/app/views/eventsV2/table/tableActions.tsx
@@ -28,6 +28,15 @@ type Props = {
   showTags: boolean;
 };
 
+function handleDownloadAsCsv(title: string, {organization, eventView, tableData}: Props) {
+  trackAnalyticsEvent({
+    eventKey: 'discover_v2.results.download_csv',
+    eventName: 'Discoverv2: Download CSV',
+    organization_id: parseInt(organization.id, 10),
+  });
+  downloadAsCsv(tableData, eventView.getColumns(), title);
+}
+
 function renderDownloadButton(canEdit: boolean, props: Props) {
   const {tableData} = props;
   if (!tableData || (tableData.data && tableData.data.length < 50)) {
@@ -44,15 +53,6 @@ function renderDownloadButton(canEdit: boolean, props: Props) {
   }
 }
 
-function handleDownloadAsCsv(title: string, {organization, eventView, tableData}: Props) {
-  trackAnalyticsEvent({
-    eventKey: 'discover_v2.results.download_csv',
-    eventName: 'Discoverv2: Download CSV',
-    organization_id: parseInt(organization.id, 10),
-  });
-  downloadAsCsv(tableData, eventView.getColumns(), title);
-}
-
 function renderBrowserExportButton(canEdit: boolean, {isLoading, ...props}: Props) {
   const disabled = isLoading || canEdit === false;
   const onClick = disabled
@@ -123,9 +123,14 @@ function renderSummaryButton({onChangeShowTags, showTags}: Props) {
   );
 }
 
-function HeaderActions(props: Props) {
+type FeatureWrapperProps = Props & {
+  children: (hasFeature: boolean, props: Props) => React.ReactNode;
+};
+
+function FeatureWrapper(props: FeatureWrapperProps) {
   const noEditMessage = t('Requires discover query feature.');
   const editFeatures = ['organizations:discover-query'];
+
   const renderDisabled = p => (
     <Hovercard
       body={
@@ -146,15 +151,23 @@ function HeaderActions(props: Props) {
       renderDisabled={renderDisabled}
       features={editFeatures}
     >
-      {({hasFeature}) => (
-        <React.Fragment>
-          {renderEditButton(hasFeature, props)}
-          {renderDownloadButton(hasFeature, props)}
-          {renderSummaryButton(props)}
-        </React.Fragment>
-      )}
+      {({hasFeature}) => props.children(hasFeature, props)}
     </Feature>
   );
 }
 
+function HeaderActions(props: Props) {
+  return (
+    <React.Fragment>
+      <FeatureWrapper {...props} key="edit">
+        {renderEditButton}
+      </FeatureWrapper>
+      <FeatureWrapper {...props} key="download">
+        {renderDownloadButton}
+      </FeatureWrapper>
+      {renderSummaryButton(props)}
+    </React.Fragment>
+  );
+}
+
 export default HeaderActions;
