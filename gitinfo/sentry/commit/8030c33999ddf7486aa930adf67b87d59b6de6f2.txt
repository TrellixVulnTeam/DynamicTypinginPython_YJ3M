commit 8030c33999ddf7486aa930adf67b87d59b6de6f2
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Apr 7 13:36:51 2013 -0700

    Handle a couple of odd cases of missing values in metadata

diff --git a/src/sentry/manager.py b/src/sentry/manager.py
index ed75946ec3..9bed2b6dcc 100644
--- a/src/sentry/manager.py
+++ b/src/sentry/manager.py
@@ -965,7 +965,7 @@ class InstanceMetaManager(BaseManager):
                 })
             )
             self._metadata[instance.pk] = result
-        return self._metadata[instance.pk]
+        return self._metadata.get(instance.pk, {})
 
     def clear_cache(self, **kwargs):
         self._metadata = {}
@@ -1035,7 +1035,7 @@ class UserOptionManager(BaseManager):
                 )
             )
             self._metadata[metakey] = result
-        return self._metadata[metakey]
+        return self._metadata.get(metakey, {})
 
     def clear_cache(self, **kwargs):
         self._metadata = {}
