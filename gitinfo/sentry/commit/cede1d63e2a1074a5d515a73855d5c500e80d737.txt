commit cede1d63e2a1074a5d515a73855d5c500e80d737
Author: Jess MacQueen <macqueen@users.noreply.github.com>
Date:   Fri Aug 3 11:02:41 2018 -0700

    fix(integrations): Use external issue key for display on issue details page (#9304)

diff --git a/src/sentry/static/sentry/app/components/group/externalIssueActions.jsx b/src/sentry/static/sentry/app/components/group/externalIssueActions.jsx
index 0bd791c3aa..4798afb182 100644
--- a/src/sentry/static/sentry/app/components/group/externalIssueActions.jsx
+++ b/src/sentry/static/sentry/app/components/group/externalIssueActions.jsx
@@ -246,6 +246,7 @@ class ExternalIssueActions extends AsyncComponent {
           onOpen={this.openModal}
           externalIssueLink={issue ? issue.url : null}
           externalIssueId={issue ? issue.id : null}
+          externalIssueKey={issue ? issue.key : null}
           onClose={this.deleteIssue.bind(this)}
           integrationType={selectedIntegration.provider.key}
         />
diff --git a/src/sentry/static/sentry/app/components/issueSyncListElement.jsx b/src/sentry/static/sentry/app/components/issueSyncListElement.jsx
index 02ab1a9726..2a3d8b45c0 100644
--- a/src/sentry/static/sentry/app/components/issueSyncListElement.jsx
+++ b/src/sentry/static/sentry/app/components/issueSyncListElement.jsx
@@ -9,6 +9,7 @@ class IssueSyncElement extends React.Component {
   static propTypes = {
     externalIssueLink: PropTypes.string,
     externalIssueId: PropTypes.string,
+    externalIssueKey: PropTypes.string,
     onOpen: PropTypes.func,
     onClose: PropTypes.func,
     integrationType: PropTypes.string,
@@ -22,17 +23,6 @@ class IssueSyncElement extends React.Component {
     return this.props.onClose(this.props.externalIssueId);
   };
 
-  getPrefix() {
-    switch (this.props.integrationType) {
-      case 'github':
-        return 'GH-';
-      case 'github_enterprise':
-        return 'GHE-';
-      default:
-        return this.getPrettyName() + '-';
-    }
-  }
-
   getIcon() {
     switch (this.props.integrationType) {
       case 'github':
@@ -77,11 +67,11 @@ class IssueSyncElement extends React.Component {
     if (this.props.children) {
       return this.props.children;
     }
-    if (this.props.externalIssueId) {
-      return `${this.getPrefix()}${this.props.externalIssueId}`;
-    } else {
-      return `Link ${this.getPrettyName()} Issue`;
+    if (this.props.externalIssueKey) {
+      return this.props.externalIssueKey;
     }
+
+    return `Link ${this.getPrettyName()} Issue`;
   }
 
   render() {
diff --git a/tests/js/spec/components/group/__snapshots__/externalIssueActions.spec.jsx.snap b/tests/js/spec/components/group/__snapshots__/externalIssueActions.spec.jsx.snap
index 2e7fb38c07..dc864e761e 100644
--- a/tests/js/spec/components/group/__snapshots__/externalIssueActions.spec.jsx.snap
+++ b/tests/js/spec/components/group/__snapshots__/externalIssueActions.spec.jsx.snap
@@ -3,6 +3,7 @@
 exports[`ExternalIssueActions with an external issue linked renders 1`] = `
 <IssueSyncElement
   externalIssueId="100"
+  externalIssueKey="getsentry/sentry#2"
   externalIssueLink="https://github.com/MeredithAnya/testing/issues/2"
   integrationType="github"
   onClose={[Function]}
@@ -47,7 +48,7 @@ exports[`ExternalIssueActions with an external issue linked renders 1`] = `
             className="css-1ado49n-IntegrationLink e1vaar1z2"
             href="https://github.com/MeredithAnya/testing/issues/2"
           >
-            GH-100
+            getsentry/sentry#2
           </a>
         </IntegrationLink>
       </div>
@@ -148,6 +149,7 @@ exports[`ExternalIssueActions with no external issues linked renders 1`] = `
 >
   <IssueSyncElement
     externalIssueId={null}
+    externalIssueKey={null}
     externalIssueLink={null}
     integrationType="github"
     onClose={[Function]}
diff --git a/tests/js/spec/components/group/externalIssueActions.spec.jsx b/tests/js/spec/components/group/externalIssueActions.spec.jsx
index 0d17168686..9e67eb7596 100644
--- a/tests/js/spec/components/group/externalIssueActions.spec.jsx
+++ b/tests/js/spec/components/group/externalIssueActions.spec.jsx
@@ -49,7 +49,11 @@ describe('ExternalIssueActions', function() {
 
   describe('with an external issue linked', function() {
     let externalIssues = [
-      {id: '100', url: 'https://github.com/MeredithAnya/testing/issues/2'},
+      {
+        id: '100',
+        url: 'https://github.com/MeredithAnya/testing/issues/2',
+        key: 'getsentry/sentry#2',
+      },
     ];
     let integration = TestStubs.GitHubIntegration({externalIssues});
     let wrapper = mount(
@@ -61,7 +65,7 @@ describe('ExternalIssueActions', function() {
     });
 
     it('renders Link GitHub Issue when no issues currently linked', function() {
-      expect(wrapper.find('IntegrationLink a').text()).toEqual('GH-100');
+      expect(wrapper.find('IntegrationLink a').text()).toEqual('getsentry/sentry#2');
     });
 
     describe('deletes linked issue', function() {
