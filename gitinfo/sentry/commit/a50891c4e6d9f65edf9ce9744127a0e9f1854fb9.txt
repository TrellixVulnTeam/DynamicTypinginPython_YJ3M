commit a50891c4e6d9f65edf9ce9744127a0e9f1854fb9
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Sat Feb 16 07:47:50 2019 +0100

    fix: Fix percy glitches (#12093)
    
    * fix: Prevent Percy screenshot from constantly changing
    
    * fix: Fix more Percy glitches
    
    * fix(samples): Move code to not impact production

diff --git a/src/sentry/web/frontend/debug/mail.py b/src/sentry/web/frontend/debug/mail.py
index e884d10b21..6f724fda2b 100644
--- a/src/sentry/web/frontend/debug/mail.py
+++ b/src/sentry/web/frontend/debug/mail.py
@@ -267,6 +267,9 @@ def alert(request):
     event_manager = EventManager(data)
     event_manager.normalize()
     event = event_manager.save(project.id)
+    # Prevent Percy screenshot from constantly changing
+    event.datetime = datetime(2017, 9, 6, 0, 0)
+    event.save()
     event_type = event_manager.get_event_type()
 
     group.message = event_manager.get_search_message()
diff --git a/tests/acceptance/test_issue_details.py b/tests/acceptance/test_issue_details.py
index f3be959b82..fe29cd6e9f 100644
--- a/tests/acceptance/test_issue_details.py
+++ b/tests/acceptance/test_issue_details.py
@@ -4,7 +4,15 @@ from datetime import datetime
 from django.utils import timezone
 
 from sentry.testutils import AcceptanceTestCase
-from sentry.utils.samples import create_sample_event
+from sentry.utils.samples import create_sample_event as _create_sample_event
+
+
+def create_sample_event(*args, **kwargs):
+    event = _create_sample_event(*args, **kwargs)
+    # Prevent Percy screenshot from constantly changing
+    event.datetime = datetime(2017, 9, 6, 0, 0)
+    event.save()
+    return event
 
 
 class IssueDetailsTest(AcceptanceTestCase):
