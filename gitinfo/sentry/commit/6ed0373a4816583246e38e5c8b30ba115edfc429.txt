commit 6ed0373a4816583246e38e5c8b30ba115edfc429
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Mon Nov 25 13:25:04 2019 +0100

    fix: Do not throw 500s on invalid transactions (#15797)

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index b331f5d450..75f6b6e150 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -632,7 +632,14 @@ class StoreView(APIView):
         del data
 
         self.pre_normalize(event_manager, helper)
-        event_manager.normalize()
+
+        try:
+            event_manager.normalize()
+        except semaphore.ProcessingActionInvalidTransaction as e:
+            track_outcome(
+                organization_id, project_id, key.id, Outcome.INVALID, "invalid_transaction"
+            )
+            raise APIError(e)
 
         data = event_manager.get_data()
         dict_data = dict(data)
