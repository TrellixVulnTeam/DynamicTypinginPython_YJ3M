commit 56d0e1d2ed63f7d2d91e86a94dd24888a30e1174
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Sun Feb 10 09:20:30 2013 -0800

    Allow 'localhost' to be used as a valid origin

diff --git a/src/sentry/web/forms/fields.py b/src/sentry/web/forms/fields.py
index 39f8cfc640..b969dde642 100644
--- a/src/sentry/web/forms/fields.py
+++ b/src/sentry/web/forms/fields.py
@@ -14,6 +14,10 @@ from django.utils.safestring import mark_safe
 from django.utils.translation import ugettext_lazy as _
 
 
+# Special case origins that don't fit the normal regex pattern, but are valid
+WHITELIST_ORIGINS = ('*', 'localhost')
+
+
 class RadioFieldRenderer(RadioFieldRenderer):
     """
     This is identical to Django's builtin widget, except that
@@ -62,7 +66,7 @@ class OriginsField(CharField):
         return values
 
     def is_valid_origin(self, value):
-        if value == '*':
+        if value in WHITELIST_ORIGINS:
             return True
 
         if '://' in value:
diff --git a/tests/sentry/web/forms/fields/tests.py b/tests/sentry/web/forms/fields/tests.py
index 3998296cc8..c0aec76ef2 100644
--- a/tests/sentry/web/forms/fields/tests.py
+++ b/tests/sentry/web/forms/fields/tests.py
@@ -37,3 +37,8 @@ class OriginsFieldTest(TestCase):
         value = '*.example.com:80'
         with self.assertRaises(forms.ValidationError):
             self.field.clean(value)
+
+    def test_supports_localhost(self):
+        value = 'localhost'
+        result = self.field.clean(value)
+        self.assertEquals(result, ['localhost'])
