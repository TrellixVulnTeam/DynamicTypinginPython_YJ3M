commit 033eb1e4e177cdd7ac9f3d9543266223bb60dcc1
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Dec 29 22:56:06 2011 -0800

    Added restart back in

diff --git a/docs/cli/index.rst b/docs/cli/index.rst
index c9064f1e3e..d7762098a4 100644
--- a/docs/cli/index.rst
+++ b/docs/cli/index.rst
@@ -10,18 +10,28 @@ for help on a specific command.
 Builtin Commands
 ----------------
 
-.. data:: start
+.. data:: start [services]
 
     Starts all background services.
 
+    If services are passed, only starts the given services.
+
     ::
 
         sentry start --daemon
 
-.. data:: stop
+.. data:: stop [services]
+
+    Stops all background services.
+
+    If services are passed, only stops the given services.
+
+.. data:: restart [services]
 
     Stops all background services.
 
+    If services are passed, only restarts the given services.
+
 .. data:: upgrade
 
     Performs any needed database migrations.
@@ -30,7 +40,7 @@ Builtin Commands
 
     Performs all trim operations based on your configuration.
 
-.. data:: manage
+.. data:: manage [command] [args]
 
     A wrapper around ``django-admin.py`` (aka ``manage.py``).
 
diff --git a/sentry/commands/__init__.py b/sentry/commands/__init__.py
index 948662d53a..4bf9e89273 100644
--- a/sentry/commands/__init__.py
+++ b/sentry/commands/__init__.py
@@ -7,5 +7,5 @@ sentry.commands
 """
 from sentry.commands.cleanup import cleanup
 from sentry.commands.manage import manage
-from sentry.commands.control import start, stop
+from sentry.commands.control import start, stop, restart
 from sentry.commands.upgrade import upgrade
diff --git a/sentry/commands/control.py b/sentry/commands/control.py
index e17c16add1..41e4a6aec2 100644
--- a/sentry/commands/control.py
+++ b/sentry/commands/control.py
@@ -84,3 +84,14 @@ def stop(args):
     proc = get_daemon_for_service(service)
 
     proc.stop()
+
+
+@consume_args
+def restart(args):
+    # TODO: we should improve upon this so it just discovers the PID
+    # for an app and sends the signal
+    service = get_service_from_args(args)
+
+    proc = get_daemon_for_service(service)
+
+    proc.restart()
diff --git a/sentry/services/daemon.py b/sentry/services/daemon.py
index 6e9a7c11b8..82c0cd32d7 100644
--- a/sentry/services/daemon.py
+++ b/sentry/services/daemon.py
@@ -93,9 +93,7 @@ class Daemon(object):
         """
         Stop, then start.
         """
-        print "stopping"
-        self.daemon_context.close()
-        print "starting"
+        self.stop()
         self.start()
 
     def _terminate_daemon_process(self):
