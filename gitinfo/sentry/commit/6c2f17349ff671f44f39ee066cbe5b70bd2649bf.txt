commit 6c2f17349ff671f44f39ee066cbe5b70bd2649bf
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Oct 5 18:06:46 2015 -0700

    Add buffer.pending-size metric

diff --git a/src/sentry/buffer/redis.py b/src/sentry/buffer/redis.py
index 2c72087ed3..f8283200ba 100644
--- a/src/sentry/buffer/redis.py
+++ b/src/sentry/buffer/redis.py
@@ -103,13 +103,16 @@ class RedisBuffer(Buffer):
                 keys = conn.zrange(self.pending_key, 0, -1)
                 if not keys:
                     continue
+                keycount = 0
                 for key in keys:
+                    keycount += 1
                     process_incr.apply_async(kwargs={
                         'key': key,
                     })
                 pipe = conn.pipeline()
                 pipe.zrem(self.pending_key, *keys)
                 pipe.execute()
+                metrics.timing('buffer.pending-size', keycount)
         finally:
             client.delete(lock_key)
 
