commit b81a81a1b220acb3599cf88bd6bc4909c5e2e948
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Thu Mar 8 14:06:14 2018 -0800

    test(environments): Add projectLink test

diff --git a/tests/js/spec/components/__snapshots__/projectLink.spec.jsx.snap b/tests/js/spec/components/__snapshots__/projectLink.spec.jsx.snap
new file mode 100644
index 0000000000..bf762b4308
--- /dev/null
+++ b/tests/js/spec/components/__snapshots__/projectLink.spec.jsx.snap
@@ -0,0 +1,45 @@
+// Jest Snapshot v1, https://goo.gl/fbAQLP
+
+exports[`ProjectLink does not have environment in query 1`] = `
+<Link
+  onlyActiveOnIndex={false}
+  style={Object {}}
+  to="http://some.url/"
+>
+  Go somewhere!
+</Link>
+`;
+
+exports[`ProjectLink has environment in query 1`] = `
+<Link
+  onlyActiveOnIndex={false}
+  style={Object {}}
+  to={
+    Object {
+      "pathname": "http://some.url/",
+      "query": Object {
+        "environment": "staging",
+      },
+    }
+  }
+>
+  Go somewhere!
+</Link>
+`;
+
+exports[`ProjectLink has environment in query 2`] = `
+<Link
+  onlyActiveOnIndex={false}
+  style={Object {}}
+  to={
+    Object {
+      "pathname": "http://some.url/",
+      "query": Object {
+        "environment": "",
+      },
+    }
+  }
+>
+  Go somewhere!
+</Link>
+`;
diff --git a/tests/js/spec/components/projectLink.spec.jsx b/tests/js/spec/components/projectLink.spec.jsx
new file mode 100644
index 0000000000..d4bd8141e7
--- /dev/null
+++ b/tests/js/spec/components/projectLink.spec.jsx
@@ -0,0 +1,45 @@
+import React from 'react';
+import {shallow} from 'enzyme';
+import ProjectLink from 'app/components/projectLink';
+
+const path = 'http://some.url/';
+
+describe('ProjectLink', function() {
+  it('has environment in query', function() {
+    const environments = ['staging', ''];
+
+    environments.forEach(function(env) {
+      const wrapper = shallow(<ProjectLink to={path}>Go somewhere!</ProjectLink>, {
+        context: {
+          location: {
+            query: {
+              environment: env,
+            },
+          },
+        },
+      });
+
+      const updatedToProp = wrapper.find('Link').prop('to');
+
+      expect(updatedToProp).toEqual({pathname: path, query: {environment: env}});
+
+      expect(wrapper).toMatchSnapshot();
+    });
+  });
+
+  it('does not have environment in query', function() {
+    const wrapper = shallow(<ProjectLink to={path}>Go somewhere!</ProjectLink>, {
+      context: {
+        location: {
+          query: {},
+        },
+      },
+    });
+
+    const updatedToProp = wrapper.find('Link').prop('to');
+
+    expect(updatedToProp).toEqual(path);
+
+    expect(wrapper).toMatchSnapshot();
+  });
+});
