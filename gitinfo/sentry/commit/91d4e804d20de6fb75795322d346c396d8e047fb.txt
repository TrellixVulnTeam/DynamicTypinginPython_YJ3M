commit 91d4e804d20de6fb75795322d346c396d8e047fb
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Feb 5 12:34:37 2015 -0800

    Add user information to router

diff --git a/src/sentry/templates/sentry/bases/react.html b/src/sentry/templates/sentry/bases/react.html
index e7b4017ae9..ac0fdbfdba 100644
--- a/src/sentry/templates/sentry/bases/react.html
+++ b/src/sentry/templates/sentry/bases/react.html
@@ -1,5 +1,7 @@
 {% extends "sentry/layout.html" %}
 
+{% load sentry_api %}
+
 {% block breadcrumb_outer %}
   <div id="blk_breadcrumb"></div>
   <script>
@@ -11,12 +13,19 @@
 {% endblock %}
 
 {% block content %}
-  <div id="blk_content"></div>
+  <div id="blk_router"></div>
   <script>
   $(function(){
     Router.run(routes, Router.HistoryLocation, function(Handler) {
       React.render(React.createFactory(Handler)({
-      }), document.getElementById('blk_content'));
+        {% if request.user.is_authenticated %}
+          'isAuthenticated': true,
+          'user': {% serialize request.user %}
+        {% else %}
+          'isAuthenticated': false,
+          'user': null
+        {% endif %}
+      }), document.getElementById('blk_router'));
     });
   });
   </script>
diff --git a/src/sentry/web/frontend/react_page.py b/src/sentry/web/frontend/react_page.py
index b6f439d2f3..e7854399db 100644
--- a/src/sentry/web/frontend/react_page.py
+++ b/src/sentry/web/frontend/react_page.py
@@ -7,4 +7,8 @@ from sentry.web.frontend.base import OrganizationView
 # generic
 class ReactPageView(OrganizationView):
     def handle(self, request, **kwargs):
+        if request.user.is_authenticated():
+            # remove lazy eval
+            request.user = request.user._wrapped
+
         return self.respond('sentry/bases/react.html')
