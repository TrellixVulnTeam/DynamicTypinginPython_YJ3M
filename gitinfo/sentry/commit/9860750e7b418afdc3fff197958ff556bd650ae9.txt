commit 9860750e7b418afdc3fff197958ff556bd650ae9
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Thu Oct 18 10:10:16 2018 -0700

    ref(api): Use parse_stats_period from utils

diff --git a/src/sentry/api/endpoints/organization_health.py b/src/sentry/api/endpoints/organization_health.py
index b7fd468e4d..baef5a28dd 100644
--- a/src/sentry/api/endpoints/organization_health.py
+++ b/src/sentry/api/endpoints/organization_health.py
@@ -9,7 +9,6 @@ from django.utils import timezone
 
 from sentry.api.bases import OrganizationEndpoint, EnvironmentMixin
 from sentry.api.exceptions import ResourceDoesNotExist
-from sentry.api.utils import parse_stats_period
 from sentry.models import (
     Project, ProjectStatus, OrganizationMemberTeam,
     Environment,
@@ -19,6 +18,7 @@ from sentry.api.serializers.snuba import (
     SnubaLookup,
 )
 from sentry.utils import snuba
+from sentry.utils.dates import parse_stats_period
 
 
 SnubaResultSet = namedtuple('SnubaResultSet', ('current', 'previous'))
diff --git a/src/sentry/api/utils.py b/src/sentry/api/utils.py
index 38006ed4b7..c4fbb3d351 100644
--- a/src/sentry/api/utils.py
+++ b/src/sentry/api/utils.py
@@ -1,11 +1,11 @@
 from __future__ import absolute_import
 
-import re
 from datetime import timedelta
 
 from django.utils import timezone
 
 from sentry.search.utils import parse_datetime_string, InvalidQuery
+from sentry.utils.dates import parse_stats_period
 
 MIN_STATS_PERIOD = timedelta(hours=1)
 MAX_STATS_PERIOD = timedelta(days=90)
@@ -15,23 +15,6 @@ class InvalidParams(Exception):
     pass
 
 
-def parse_stats_period(period):
-    """
-    Convert a value such as 1h into a
-    proper timedelta.
-    """
-    m = re.match('^(\d+)([hdms]?)$', period)
-    if not m:
-        return None
-    value, unit = m.groups()
-    value = int(value)
-    if not unit:
-        unit = 's'
-    return timedelta(**{
-        {'h': 'hours', 'd': 'days', 'm': 'minutes', 's': 'seconds'}[unit]: value,
-    })
-
-
 def get_date_range_from_params(params):
     # Returns (start, end) or raises an `InvalidParams` exception
     now = timezone.now()
