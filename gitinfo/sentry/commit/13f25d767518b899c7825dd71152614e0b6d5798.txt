commit 13f25d767518b899c7825dd71152614e0b6d5798
Author: William Mak <william@wmak.io>
Date:   Mon Jun 22 19:17:07 2020 -0400

    chore(discover): Add a query.period tag so we can filter on it
    
    - Useful for discover dashboards too

diff --git a/src/sentry/api/bases/organization.py b/src/sentry/api/bases/organization.py
index 987ae2cf5f..a181b19d54 100644
--- a/src/sentry/api/bases/organization.py
+++ b/src/sentry/api/bases/organization.py
@@ -22,7 +22,7 @@ from sentry.models import (
 )
 from sentry.utils import auth
 from sentry.utils.hashlib import hash_values
-from sentry.utils.sdk import bind_organization_context
+from sentry.utils.sdk import bind_organization_context, configure_scope
 from sentry.utils.compat import map
 
 
@@ -257,6 +257,9 @@ class OrganizationEndpoint(Endpoint):
         # from the request
         try:
             start, end = get_date_range_from_params(request.GET, optional=date_filter_optional)
+            if start and end:
+                with configure_scope() as scope:
+                    scope.set_tag("query.period", (end - start).total_seconds())
         except InvalidParams as e:
             raise ParseError(detail=u"Invalid date range: {}".format(e))
 
