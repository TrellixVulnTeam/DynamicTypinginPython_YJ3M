commit 2dede2725ce5253c609f55df883c79340e22f539
Author: Stephen Cefali <scefali@sentry.io>
Date:   Fri Feb 21 08:44:29 2020 -0800

    feat(integration-directory): hide deprecated plugins (#17165)

diff --git a/src/sentry/plugins/__init__.py b/src/sentry/plugins/__init__.py
index 6ba15ff2d6..c7c002cc87 100644
--- a/src/sentry/plugins/__init__.py
+++ b/src/sentry/plugins/__init__.py
@@ -13,4 +13,5 @@ HIDDEN_PLUGINS = (
     "campfire",
     "youtrack",
     "clubhouse",
+    "pagerduty",
 )
diff --git a/src/sentry/static/sentry/app/views/organizationIntegrations/constants.tsx b/src/sentry/static/sentry/app/views/organizationIntegrations/constants.tsx
index d127d1061d..fe3b8aa04f 100644
--- a/src/sentry/static/sentry/app/views/organizationIntegrations/constants.tsx
+++ b/src/sentry/static/sentry/app/views/organizationIntegrations/constants.tsx
@@ -7,14 +7,3 @@ export const colors = {
   [NOT_INSTALLED]: 'gray2',
   [PENDING]: 'yellowOrange',
 };
-
-export const legacyIds = [
-  'jira',
-  'bitbucket',
-  'github',
-  'gitlab',
-  'slack',
-  'pagerduty',
-  'clubhouse',
-  'vsts',
-];
diff --git a/src/sentry/static/sentry/app/views/organizationIntegrations/integrationListDirectory.tsx b/src/sentry/static/sentry/app/views/organizationIntegrations/integrationListDirectory.tsx
index 240db81eb1..a6a893e89b 100644
--- a/src/sentry/static/sentry/app/views/organizationIntegrations/integrationListDirectory.tsx
+++ b/src/sentry/static/sentry/app/views/organizationIntegrations/integrationListDirectory.tsx
@@ -25,7 +25,6 @@ import withOrganization from 'app/utils/withOrganization';
 import SearchInput from 'app/components/forms/searchInput';
 import {createFuzzySearch} from 'app/utils/createFuzzySearch';
 import IntegrationRow from './integrationRow';
-import {legacyIds} from './constants';
 
 type AppOrProviderOrPlugin = SentryApp | IntegrationProvider | PluginWithProjectList;
 
@@ -252,7 +251,7 @@ export class OrganizationIntegrations extends AsyncComponent<
   renderPlugin = (plugin: PluginWithProjectList) => {
     const {organization} = this.props;
 
-    const isLegacy = legacyIds.includes(plugin.id);
+    const isLegacy = plugin.isHidden;
     const displayName = `${plugin.name} ${!!isLegacy ? '(Legacy)' : ''}`;
     //hide legacy integrations if we don't have any projects with them
     if (isLegacy && !plugin.projectList.length) {
diff --git a/src/sentry/static/sentry/app/views/organizationIntegrations/pluginDetailedView.tsx b/src/sentry/static/sentry/app/views/organizationIntegrations/pluginDetailedView.tsx
index e7341fbf39..e91b874754 100644
--- a/src/sentry/static/sentry/app/views/organizationIntegrations/pluginDetailedView.tsx
+++ b/src/sentry/static/sentry/app/views/organizationIntegrations/pluginDetailedView.tsx
@@ -10,7 +10,6 @@ import * as modal from 'app/actionCreators/modal';
 import ContextPickerModal from 'app/components/contextPickerModal';
 import {t} from 'app/locale';
 import AbstractIntegrationDetailedView from './abstractIntegrationDetailedView';
-import {legacyIds} from './constants';
 
 type State = {
   plugins: PluginWithProjectList[];
@@ -50,7 +49,7 @@ class PluginDetailedView extends AbstractIntegrationDetailedView<
   }
 
   get integrationName() {
-    const isLegacy = legacyIds.includes(this.plugin.id);
+    const isLegacy = this.plugin.isHidden;
     const displayName = `${this.plugin.name} ${isLegacy ? '(Legacy)' : ''}`;
     return displayName;
   }
diff --git a/tests/js/spec/views/organizationIntegrations/integrationListDirectory.spec.jsx b/tests/js/spec/views/organizationIntegrations/integrationListDirectory.spec.jsx
index e4d9108563..c99d4e1762 100644
--- a/tests/js/spec/views/organizationIntegrations/integrationListDirectory.spec.jsx
+++ b/tests/js/spec/views/organizationIntegrations/integrationListDirectory.spec.jsx
@@ -241,7 +241,7 @@ describe('IntegrationListDirectory', function() {
               status: 'unknown',
               description: 'Send alerts to PagerDuty.',
               isTestable: true,
-              isHidden: false,
+              isHidden: true,
               hasConfiguration: true,
               features: [],
               shortName: 'PagerDuty',
diff --git a/tests/js/spec/views/organizationIntegrations/pluginDetailedView.spec.js b/tests/js/spec/views/organizationIntegrations/pluginDetailedView.spec.js
index b919649608..7521da31c3 100644
--- a/tests/js/spec/views/organizationIntegrations/pluginDetailedView.spec.js
+++ b/tests/js/spec/views/organizationIntegrations/pluginDetailedView.spec.js
@@ -30,7 +30,7 @@ describe('PluginDetailedView', function() {
             status: 'unknown',
             description: 'Send alerts to PagerDuty.',
             isTestable: true,
-            isHidden: false,
+            isHidden: true,
             hasConfiguration: true,
             features: [],
             shortName: 'PagerDuty',
