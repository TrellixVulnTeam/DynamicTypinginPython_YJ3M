commit 4a5c70919ff0b5bf2caa43e048a334abe1b10681
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Wed Apr 19 13:53:27 2017 +0200

    Serialize distribution with event

diff --git a/src/sentry/api/serializers/models/event.py b/src/sentry/api/serializers/models/event.py
index ba9b47e205..31e1be67aa 100644
--- a/src/sentry/api/serializers/models/event.py
+++ b/src/sentry/api/serializers/models/event.py
@@ -118,6 +118,7 @@ class EventSerializer(Serializer):
             'eventID': six.text_type(obj.event_id),
             'size': obj.size,
             'entries': attrs['entries'],
+            'distribution': obj.distribution,
             # See GH-3248
             'message': obj.get_legacy_message(),
             'user': attrs['user'],
diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index 03a52926ff..2687c852f8 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -479,6 +479,10 @@ class EventManager(object):
                 name=distribution,
                 date_added=date
             )
+            tags['sentry:distribution'] = '%s/%s' % (
+                tags['sentry:release'],
+                distribution.name,
+            )
         else:
             distribution = None
 
diff --git a/src/sentry/models/event.py b/src/sentry/models/event.py
index efb061d7b6..bb16fc6753 100644
--- a/src/sentry/models/event.py
+++ b/src/sentry/models/event.py
@@ -203,12 +203,19 @@ class Event(Model):
                 return v
         return None
 
+    @property
+    def distribution(self):
+        dist = self.get_tag('sentry:distribution')
+        if dist:
+            return dist.split('/', 1)[-1]
+
     def as_dict(self):
         # We use a OrderedDict to keep elements ordered for a potential JSON serializer
         data = OrderedDict()
         data['id'] = self.event_id
         data['project'] = self.project_id
         data['release'] = self.get_tag('sentry:release')
+        data['distribution'] = self.distribution
         data['platform'] = self.platform
         data['culprit'] = self.group.culprit
         data['message'] = self.get_legacy_message()
