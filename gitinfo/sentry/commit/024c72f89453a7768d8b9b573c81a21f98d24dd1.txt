commit 024c72f89453a7768d8b9b573c81a21f98d24dd1
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jan 21 19:11:07 2013 -0800

    Various fixes for url structures

diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index 2ad0a568f4..e633ca4a17 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -152,12 +152,13 @@ def dashboard(request, team):
     if not project_list and can_create_projects(request.user, team=team):
         return HttpResponseRedirect(reverse('sentry-new-project', args=[team.slug]))
 
-    for project in project_list.values():
+    for project in project_list:
         project.team = team
 
     return render_to_response('sentry/dashboard.html', {
         'team': team,
-        'project_list': project_list.values(),
+        'project_list': project_list,
+        'SECTION': 'events',
     }, request)
 
 
@@ -183,7 +184,9 @@ def search(request, team, project):
         top_matches = list(event_list[:2])
         if len(top_matches) == 0:
             return render_to_response('sentry/invalid_message_id.html', {
+                'team': team,
                 'project': project,
+                'SECTION': 'events',
             }, request)
         elif len(top_matches) == 1:
             group = top_matches[0]
@@ -198,7 +201,9 @@ def search(request, team, project):
             event = Event.objects.get(project=project, event_id=query)
         except Event.DoesNotExist:
             return render_to_response('sentry/invalid_message_id.html', {
+                'team': team,
                 'project': project,
+                'SECTION': 'events',
             }, request)
         else:
             return HttpResponseRedirect(reverse('sentry-group-event', {
@@ -230,6 +235,7 @@ def search(request, team, project):
         'query': query,
         'sort': sort,
         'sort_label': sort_label,
+        'SECTION': 'events',
     }, request)
 
 
@@ -264,7 +270,7 @@ def group_list(request, team, project):
         'filters': response['filters'],
         'SORT_OPTIONS': SORT_OPTIONS,
         'HAS_TRENDING': has_trending(),
-        'SECTION': 'stream',
+        'SECTION': 'events',
     }, request)
 
 
@@ -282,6 +288,7 @@ def render_with_group_context(group, template, context, request=None):
         'json_data': event.data.get('extra', {}),
         'version_data': event.data.get('modules', None),
         'can_admin_event': can_admin_group(request.user, group),
+        'SECTION': 'events',
     })
 
     return render_to_response(template, context, request)
@@ -382,6 +389,7 @@ def group_event_details(request, team, project, group, event_id):
         'json_data': event.data.get('extra', {}),
         'version_data': event.data.get('modules', None),
         'can_admin_event': can_admin_group(request.user, group),
+        'SECTION': 'events',
     }, request)
 
 
diff --git a/src/sentry/web/frontend/teams.py b/src/sentry/web/frontend/teams.py
index 38e129c16f..559235ec9f 100644
--- a/src/sentry/web/frontend/teams.py
+++ b/src/sentry/web/frontend/teams.py
@@ -99,6 +99,7 @@ def manage_team(request, team):
         'page': 'details',
         'form': form,
         'team': team,
+        'SECTION': 'team',
     })
 
     return render_to_response('sentry/teams/manage.html', context, request)
@@ -119,6 +120,7 @@ def manage_team_projects(request, team):
         'page': 'projects',
         'team': team,
         'project_list': project_list,
+        'SECTION': 'team',
     })
 
     return render_to_response('sentry/teams/projects/index.html', context, request)
@@ -141,6 +143,7 @@ def manage_team_members(request, team):
         'team': team,
         'member_list': member_list,
         'pending_member_list': pending_member_list,
+        'SECTION': 'team',
     })
 
     return render_to_response('sentry/teams/members/index.html', context, request)
@@ -163,6 +166,7 @@ def remove_team(request, team):
         'page': 'settings',
         'form': form,
         'team': team,
+        'SECTION': 'team',
     })
 
     return render_to_response('sentry/teams/remove.html', context, request)
@@ -207,6 +211,7 @@ def new_team_member(request, team):
         'team': team,
         'add_form': add_form,
         'invite_form': invite_form,
+        'SECTION': 'team',
     })
 
     return render_to_response('sentry/teams/members/new.html', context, request)
@@ -290,6 +295,7 @@ def edit_team_member(request, team, member_id):
         'member': member,
         'team': team,
         'form': form,
+        'SECTION': 'team',
     })
 
     return render_to_response('sentry/teams/members/edit.html', context, request)
@@ -319,6 +325,7 @@ def remove_team_member(request, team, member_id):
         'page': 'members',
         'member': member,
         'team': team,
+        'SECTION': 'team',
     })
 
     return render_to_response('sentry/teams/members/remove.html', context, request)
@@ -444,6 +451,7 @@ def create_new_team_project(request, team):
         'form': form,
         'team': team,
         'page': 'projects',
+        'SECTION': 'team',
     })
 
     return render_to_response('sentry/teams/projects/new.html', context, request)
