commit 5f20dc91bcd754888244cdd8a8393a12489f4495
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Tue Mar 21 11:27:24 2017 -0700

    check that there are users before querying for them fixes SENTRY-317 (#5114)

diff --git a/src/sentry/plugins/sentry_mail/activity/release.py b/src/sentry/plugins/sentry_mail/activity/release.py
index 5888261a22..2148e1943e 100644
--- a/src/sentry/plugins/sentry_mail/activity/release.py
+++ b/src/sentry/plugins/sentry_mail/activity/release.py
@@ -59,14 +59,17 @@ class ReleaseActivityEmail(ActivityEmail):
                 c.author.email for c in self.commit_list
                 if c.author
             ])
-            users = {
-                ue.email: ue.user
-                for ue in UserEmail.objects.filter(
-                    in_iexact('email', self.email_list),
-                    is_verified=True,
-                    user__sentry_orgmember_set__organization=self.organization,
-                ).select_related('user')
-            }
+            if self.email_list:
+                users = {
+                    ue.email: ue.user
+                    for ue in UserEmail.objects.filter(
+                        in_iexact('email', self.email_list),
+                        is_verified=True,
+                        user__sentry_orgmember_set__organization=self.organization,
+                    ).select_related('user')
+                }
+            else:
+                users = {}
 
             for commit in self.commit_list:
                 repos[commit.repository_id]['commits'].append(
