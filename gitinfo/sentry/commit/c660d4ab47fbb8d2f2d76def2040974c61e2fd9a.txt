commit c660d4ab47fbb8d2f2d76def2040974c61e2fd9a
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Aug 27 20:07:09 2013 -0700

    Only record GroupSeen if user is a member of the project

diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index 9276e93a08..e46fb19789 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -392,16 +392,17 @@ def group(request, team, project, group, event_id=None):
     event.group = group
     event.project = project
 
-    # update that the user has seen this group
-    create_or_update(
-        GroupSeen,
-        group=group,
-        user=request.user,
-        project=project,
-        defaults={
-            'last_seen': timezone.now(),
-        }
-    )
+    if project in Project.objects.get_for_user(request.user, team=team):
+        # update that the user has seen this group
+        create_or_update(
+            GroupSeen,
+            group=group,
+            user=request.user,
+            project=project,
+            defaults={
+                'last_seen': timezone.now(),
+            }
+        )
 
     # filter out dupe activity items
     activity_items = set()
