commit c9710caf174453a232498d54451b3829291a99c4
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Fri Jan 18 13:03:49 2019 -0800

    fix(stream): Fix issue activity url [ISSUE-278] (#11608)
    
    Stream does not have groupId from router params, it comes from props

diff --git a/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx b/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx
index e0d46424aa..587fc06377 100644
--- a/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx
+++ b/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx
@@ -13,6 +13,7 @@ import space from 'app/styles/space';
 
 class EventOrGroupExtraDetails extends React.Component {
   static propTypes = {
+    id: PropTypes.string,
     lastSeen: PropTypes.string,
     firstSeen: PropTypes.string,
     subscriptionDetails: PropTypes.shape({
@@ -31,12 +32,14 @@ class EventOrGroupExtraDetails extends React.Component {
   getIssuesPath() {
     const {orgId, projectId} = this.props.params;
 
-    return projectId ? `/${orgId}/${projectId}/issues` : `/organizations/${orgId}/issues`;
+    return projectId
+      ? `/${orgId}/${projectId}/issues/`
+      : `/organizations/${orgId}/issues/`;
   }
 
   render() {
     const {
-      params: {groupId},
+      id,
       lastSeen,
       firstSeen,
       subscriptionDetails,
@@ -75,7 +78,7 @@ class EventOrGroupExtraDetails extends React.Component {
         <GroupExtraCommentsAndLogger>
           {numComments > 0 && (
             <Box mr={2}>
-              <CommentsLink to={`${issuesPath}${groupId}/activity/`} className="comments">
+              <CommentsLink to={`${issuesPath}${id}/activity/`} className="comments">
                 <GroupExtraIcon
                   src="icon-comment-sm"
                   mentioned={
diff --git a/src/sentry/static/sentry/app/components/stream/group.jsx b/src/sentry/static/sentry/app/components/stream/group.jsx
index 1655b9ef5d..5f7e77539a 100644
--- a/src/sentry/static/sentry/app/components/stream/group.jsx
+++ b/src/sentry/static/sentry/app/components/stream/group.jsx
@@ -98,7 +98,7 @@ const StreamGroup = createReactClass({
         )}
         <GroupSummary w={[8 / 12, 8 / 12, 6 / 12]} ml={canSelect ? 1 : 2} mr={1} flex="1">
           <EventOrGroupHeader data={data} query={query} />
-          <EventOrGroupExtraDetails group {...data} />
+          <EventOrGroupExtraDetails {...data} />
         </GroupSummary>
         <Box w={160} mx={2} className="hidden-xs hidden-sm">
           <GroupChart id={data.id} statsPeriod={this.props.statsPeriod} data={data} />
diff --git a/src/sentry/static/sentry/app/views/groupDetails/shared/groupSimilar/similarItem.jsx b/src/sentry/static/sentry/app/views/groupDetails/shared/groupSimilar/similarItem.jsx
index ead164c781..9a751d1f47 100644
--- a/src/sentry/static/sentry/app/views/groupDetails/shared/groupSimilar/similarItem.jsx
+++ b/src/sentry/static/sentry/app/views/groupDetails/shared/groupSimilar/similarItem.jsx
@@ -118,7 +118,7 @@ const SimilarIssueItem = createReactClass({
             </div>
             <div className="event-details level-error" style={{flex: 1}}>
               <EventOrGroupHeader data={issue} />
-              <EventOrGroupExtraDetails {...issue} lastSeen={null} showAssignee group />
+              <EventOrGroupExtraDetails {...issue} lastSeen={null} showAssignee />
             </div>
           </FlowLayout>
           <button
diff --git a/src/sentry/static/sentry/app/views/projectDashboard/eventNode.jsx b/src/sentry/static/sentry/app/views/projectDashboard/eventNode.jsx
index 99722c5246..dea4b21d81 100644
--- a/src/sentry/static/sentry/app/views/projectDashboard/eventNode.jsx
+++ b/src/sentry/static/sentry/app/views/projectDashboard/eventNode.jsx
@@ -25,10 +25,7 @@ const EventNode = createReactClass({
       <li className="group row">
         <div className="col-xs-8 event-details">
           <EventOrGroupHeader data={group} hideIcons hideLevel />
-          <EventOrGroupExtraDetails
-            lastSeen={group.lastSeen}
-            firstSeen={group.firstSeen}
-          />
+          <EventOrGroupExtraDetails {...group} />
         </div>
 
         <div className="col-xs-2 event-count align-right">
diff --git a/tests/js/spec/components/__snapshots__/streamGroup.spec.jsx.snap b/tests/js/spec/components/__snapshots__/streamGroup.spec.jsx.snap
index 8c8a87615f..bc16d94b80 100644
--- a/tests/js/spec/components/__snapshots__/streamGroup.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/streamGroup.spec.jsx.snap
@@ -68,7 +68,6 @@ exports[`StreamGroup renders with anchors 1`] = `
     />
     <withRouter(EventOrGroupExtraDetails)
       assignedTo={null}
-      group={true}
       id="1337"
       project={
         Object {
diff --git a/tests/js/spec/views/groupDetails/__snapshots__/groupSimilar.spec.jsx.snap b/tests/js/spec/views/groupDetails/__snapshots__/groupSimilar.spec.jsx.snap
index 21f173bb0d..7a55caabe2 100644
--- a/tests/js/spec/views/groupDetails/__snapshots__/groupSimilar.spec.jsx.snap
+++ b/tests/js/spec/views/groupDetails/__snapshots__/groupSimilar.spec.jsx.snap
@@ -764,7 +764,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                       ],
                                       Array [
                                         Object {
-                                          "pathname": "/org-slug/project-slug/issues",
+                                          "pathname": "/org-slug/project-slug/issues/",
                                           "query": Object {
                                             "query": "logger:javascript",
                                           },
@@ -778,7 +778,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                       ],
                                       Array [
                                         Object {
-                                          "pathname": "/org-slug/project-slug/issues",
+                                          "pathname": "/org-slug/project-slug/issues/",
                                           "query": Object {
                                             "query": "logger:javascript",
                                           },
@@ -940,7 +940,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                     ],
                                                     Array [
                                                       Object {
-                                                        "pathname": "/org-slug/project-slug/issues",
+                                                        "pathname": "/org-slug/project-slug/issues/",
                                                         "query": Object {
                                                           "query": "logger:javascript",
                                                         },
@@ -954,7 +954,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                     ],
                                                     Array [
                                                       Object {
-                                                        "pathname": "/org-slug/project-slug/issues",
+                                                        "pathname": "/org-slug/project-slug/issues/",
                                                         "query": Object {
                                                           "query": "logger:javascript",
                                                         },
@@ -1049,7 +1049,6 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                             count="90"
                             culprit="length(app/views/groupSimilar/groupSimilarView)"
                             firstSeen="2017-07-10T18:32:43Z"
-                            group={true}
                             hasSeen={false}
                             id="271"
                             isBookmarked={false}
@@ -1088,7 +1087,6 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                               count="90"
                               culprit="length(app/views/groupSimilar/groupSimilarView)"
                               firstSeen="2017-07-10T18:32:43Z"
-                              group={true}
                               hasSeen={false}
                               id="271"
                               isBookmarked={false}
@@ -1135,7 +1133,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                       ],
                                       Array [
                                         Object {
-                                          "pathname": "/org-slug/project-slug/issues",
+                                          "pathname": "/org-slug/project-slug/issues/",
                                           "query": Object {
                                             "query": "logger:javascript",
                                           },
@@ -1149,7 +1147,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                       ],
                                       Array [
                                         Object {
-                                          "pathname": "/org-slug/project-slug/issues",
+                                          "pathname": "/org-slug/project-slug/issues/",
                                           "query": Object {
                                             "query": "logger:javascript",
                                           },
@@ -1292,7 +1290,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                   style={Object {}}
                                                   to={
                                                     Object {
-                                                      "pathname": "/org-slug/project-slug/issues",
+                                                      "pathname": "/org-slug/project-slug/issues/",
                                                       "query": Object {
                                                         "query": "logger:javascript",
                                                       },
