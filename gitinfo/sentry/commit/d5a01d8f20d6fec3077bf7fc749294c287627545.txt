commit d5a01d8f20d6fec3077bf7fc749294c287627545
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Apr 30 14:00:40 2019 -0700

    ref: Extract subscribe button into a component (#12988)
    
    Extract subscribe button into a separate component. We will be
    reusing this for incident subscriptions.

diff --git a/src/sentry/static/sentry/app/components/group/sidebar.jsx b/src/sentry/static/sentry/app/components/group/sidebar.jsx
index 341541062c..e6e4e35b8b 100644
--- a/src/sentry/static/sentry/app/components/group/sidebar.jsx
+++ b/src/sentry/static/sentry/app/components/group/sidebar.jsx
@@ -2,7 +2,6 @@ import PropTypes from 'prop-types';
 import React from 'react';
 import {isEqual, pickBy, keyBy, isObject} from 'lodash';
 import createReactClass from 'create-react-class';
-import classNames from 'classnames';
 
 import SentryTypes from 'app/sentryTypes';
 import withApi from 'app/utils/withApi';
@@ -13,6 +12,7 @@ import OrganizationState from 'app/mixins/organizationState';
 import IndicatorStore from 'app/stores/indicatorStore';
 import TagDistributionMeter from 'app/components/group/tagDistributionMeter';
 import LoadingError from 'app/components/loadingError';
+import SubscribeButton from 'app/components/subscribeButton';
 import {t, tct} from 'app/locale';
 
 import ExternalIssueList from 'app/components/group/externalIssuesList';
@@ -238,10 +238,6 @@ const GroupSidebar = createReactClass({
     const projectId = project.slug;
     const organization = this.getOrganization();
 
-    const subscribeBtnClass = classNames('btn btn-default btn-subscribe', {
-      subscribed: group.isSubscribed,
-    });
-
     return (
       <div className="group-stats">
         <SuggestedOwners project={project} group={group} event={this.props.event} />
@@ -297,10 +293,10 @@ const GroupSidebar = createReactClass({
         </h6>
         <p className="help-block">{this.getNotificationText()}</p>
         {this.canChangeSubscriptionState() && (
-          <a className={subscribeBtnClass} onClick={this.toggleSubscription}>
-            <span className="icon-signal" />
-            {group.isSubscribed ? t('Unsubscribe') : t('Subscribe')}
-          </a>
+          <SubscribeButton
+            isSubscribed={group.isSubscribed}
+            onClick={this.toggleSubscription}
+          />
         )}
       </div>
     );
diff --git a/src/sentry/static/sentry/app/components/subscribeButton.jsx b/src/sentry/static/sentry/app/components/subscribeButton.jsx
new file mode 100644
index 0000000000..f3489e6a4e
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/subscribeButton.jsx
@@ -0,0 +1,39 @@
+import PropTypes from 'prop-types';
+import React from 'react';
+import styled from 'react-emotion';
+
+import Button from 'app/components/button';
+
+import {t} from 'app/locale';
+
+export default class SubscribeButton extends React.Component {
+  static propTypes = {
+    isSubscribed: PropTypes.bool.isRequired,
+    onClick: PropTypes.func.isRequired,
+  };
+
+  render() {
+    const {isSubscribed, onClick} = this.props;
+
+    return (
+      <Button size="small" onClick={onClick}>
+        <Content>
+          <SignalIcon className="icon-signal" isSubscribed={isSubscribed} />
+          {isSubscribed ? t('Unsubscribe') : t('Subscribe')}
+        </Content>
+      </Button>
+    );
+  }
+}
+
+const Content = styled('span')`
+  font-size: 14px;
+  display: flex;
+  align-items: center;
+`;
+
+const SignalIcon = styled('span')`
+  font-size: 18px;
+  margin-right: 5px;
+  ${p => p.isSubscribed && `color: ${p.theme.blue}`};
+`;
diff --git a/src/sentry/static/sentry/less/group-detail.less b/src/sentry/static/sentry/less/group-detail.less
index 2e5bfd17b0..20bac33cdb 100644
--- a/src/sentry/static/sentry/less/group-detail.less
+++ b/src/sentry/static/sentry/less/group-detail.less
@@ -425,20 +425,6 @@
     }
   }
 
-  .btn-subscribe {
-    padding: 4px 10px;
-
-    .icon-signal {
-      margin-right: 5px;
-    }
-
-    &.subscribed {
-      .icon-signal {
-        color: @blue;
-      }
-    }
-  }
-
   .help-block {
     font-size: 100%;
     line-height: 1.3;
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index 67ca9b5905..2737f06f7b 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -253,12 +253,6 @@ fieldset[disabled] .btn-danger.active,
     width: 0;
     margin-right: -6px;
   }
-
-  .icon-signal {
-    font-size: 18px;
-    position: relative;
-    top: 2px;
-  }
 }
 
 /* Small button icons */
diff --git a/tests/js/spec/components/group/sidebar.spec.jsx b/tests/js/spec/components/group/sidebar.spec.jsx
index 46cb1c85f1..b0fa97bd29 100644
--- a/tests/js/spec/components/group/sidebar.spec.jsx
+++ b/tests/js/spec/components/group/sidebar.spec.jsx
@@ -124,7 +124,7 @@ describe('GroupSidebar', function() {
     });
 
     it('can subscribe', function() {
-      const btn = wrapper.find('.btn-subscribe');
+      const btn = wrapper.find('SubscribeButton');
 
       btn.simulate('click');
 
