commit c7a3fc474f4380ee4629ac0f8dcdf4cbe01e0b57
Author: Ayesha Omarali <ayesha.omarali@gmail.com>
Date:   Wed Jun 27 16:45:39 2018 -0700

    feat(ui): Add Stacked Icons to Project Cards (#8864)
    
    * added platformlist to project cards
    
    * updated test to check if icon correctly corresponds to the platform
    
    * https://getsentry.atlassian.net/browse/APP-370

diff --git a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
index a8465ea7e6..f16643984d 100644
--- a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
+++ b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
@@ -202,12 +202,7 @@ const ProjectSelector = createReactClass({
   getProjectNode(team, project, highlightText, hasSingleTeam, isSelected) {
     let projectId = project.slug;
     let label = this.getProjectLabel(team, project, hasSingleTeam, highlightText);
-    let platforms;
-    if (typeof project.platforms !== 'undefined') {
-      platforms = project && project.platforms;
-    } else {
-      platforms = [];
-    }
+    const platforms = (project && project.platforms) || [];
 
     let menuItemProps = {
       key: projectId, // TODO: what if two projects w/ same name under diff orgs?
@@ -223,7 +218,6 @@ const ProjectSelector = createReactClass({
 
     return (
       <MenuItem {...menuItemProps}>
-        {/*ideally an icon here...*/}
         <ProjectBadge>
           <Flex>
             <StyledPlatformList platforms={platforms} direction="left" />
diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
index 0be5550ec2..566bc3523f 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
@@ -16,7 +16,7 @@ import {t} from 'app/locale';
 import {update, loadStatsForProject} from 'app/actionCreators/projects';
 import ProjectsStatsStore from 'app/stores/projectsStatsStore';
 import overflowEllipsis from 'app/styles/overflowEllipsis';
-import Platformicon from 'app/components/platformicon';
+import PlatformList from 'app/components/platformList';
 
 import Chart from './chart';
 import NoEvents from './noEvents';
@@ -62,13 +62,15 @@ class ProjectCard extends React.Component {
       ? t('Remove from bookmarks')
       : t('Add to bookmarks');
 
+    const platforms = (project && project.platforms) || [];
+
     return (
       <ProjectCardWrapper data-test-id={slug} width={['100%', '50%', '33%', '25%']}>
         {stats ? (
           <StyledProjectCard>
             <Flex justify="space-between" align="center">
               <Box ml={2}>
-                <StyledPlatformicon size="24" platform={project.platform || 'generic'} />
+                <PlatformList direction={'right'} platforms={platforms} />
               </Box>
               <StyledTitle>
                 {hasProjectAccess ? (
@@ -101,13 +103,6 @@ class ProjectCard extends React.Component {
   }
 }
 
-const StyledPlatformicon = styled(Platformicon)`
-  display: block;
-  color: white;
-  border-radius: 3px;
-  max-width: 24px;
-`;
-
 const ProjectCardContainer = createReactClass({
   propTypes: {
     project: SentryTypes.Project,
@@ -154,7 +149,7 @@ const ChartContainer = styled.div`
 
 const StyledTitle = styled.div`
   ${overflowEllipsis};
-  padding: 16px 8px;
+  padding: 16px 4px;
 `;
 
 const ProjectCardWrapper = styled(Box)`
diff --git a/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap b/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
index 6adac6ade1..c89bc0d09e 100644
--- a/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
+++ b/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
@@ -14,7 +14,9 @@ exports[`ProjectCard renders 1`] = `
       "isBookmarked": false,
       "isMember": true,
       "name": "Project Name",
-      "platform": "javascript",
+      "platforms": Array [
+        "javascript",
+      ],
       "slug": "project-slug",
       "stats": Array [
         Array [
@@ -42,7 +44,7 @@ exports[`ProjectCard renders 1`] = `
     }
   >
     <Base
-      className="css-3jemnr-ProjectCardWrapper efesc7i3"
+      className="css-3jemnr-ProjectCardWrapper efesc7i2"
       data-test-id="project-slug"
       width={
         Array [
@@ -54,13 +56,13 @@ exports[`ProjectCard renders 1`] = `
       }
     >
       <div
-        className="css-3jemnr-ProjectCardWrapper efesc7i3"
+        className="css-3jemnr-ProjectCardWrapper efesc7i2"
         data-test-id="project-slug"
         is={null}
       >
         <StyledProjectCard>
           <div
-            className="css-18be1td-StyledProjectCard efesc7i4"
+            className="css-18be1td-StyledProjectCard efesc7i3"
           >
             <Flex
               align="center"
@@ -86,36 +88,60 @@ exports[`ProjectCard renders 1`] = `
                         className="css-1dvsqd3"
                         is={null}
                       >
-                        <StyledPlatformicon
-                          platform="javascript"
-                          size="24"
+                        <PlatformList
+                          direction="right"
+                          platforms={
+                            Array [
+                              "javascript",
+                            ]
+                          }
                         >
-                          <Platformicon
-                            className="css-12pxqdy-StyledPlatformicon efesc7i0"
-                            platform="javascript"
-                            size="24"
+                          <PlatformIcons
+                            direction="right"
+                            platforms={
+                              Array [
+                                "javascript",
+                              ]
+                            }
                           >
-                            <img
-                              className="css-12pxqdy-StyledPlatformicon efesc7i0"
-                              height="24"
-                              src={
-                                Object {
-                                  "default": Object {
-                                    "id": "test",
-                                    "viewBox": Object {},
-                                  },
-                                }
-                              }
-                              width="24"
-                            />
-                          </Platformicon>
-                        </StyledPlatformicon>
+                            <div
+                              className="css-1wtj5bg-PlatformIcons ezvce7z0"
+                              direction="right"
+                            >
+                              <StyledPlatformIcon
+                                key="javascript"
+                                platform="javascript"
+                                size="16px"
+                              >
+                                <Platformicon
+                                  className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
+                                  platform="javascript"
+                                  size="16px"
+                                >
+                                  <img
+                                    className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
+                                    height="16px"
+                                    src={
+                                      Object {
+                                        "default": Object {
+                                          "id": "test",
+                                          "viewBox": Object {},
+                                        },
+                                      }
+                                    }
+                                    width="16px"
+                                  />
+                                </Platformicon>
+                              </StyledPlatformIcon>
+                            </div>
+                          </PlatformIcons>
+                        </PlatformList>
                       </div>
                     </Base>
                   </Box>
                   <StyledTitle>
                     <div
-                      className="css-zq8dzg-StyledTitle efesc7i2"
+                      className="css-25y8kw-StyledTitle efesc7i1"
                     >
                       <div>
                         project-slug
@@ -132,7 +158,7 @@ exports[`ProjectCard renders 1`] = `
                       title="Add to bookmarks"
                     >
                       <a
-                        className="tip project-select-bookmark icon icon-star-solid css-31kf5u-Star efesc7i5"
+                        className="tip project-select-bookmark icon icon-star-solid css-31kf5u-Star efesc7i4"
                         onClick={[Function]}
                         title="Add to bookmarks"
                       />
@@ -143,7 +169,7 @@ exports[`ProjectCard renders 1`] = `
             </Flex>
             <ChartContainer>
               <div
-                className="css-1s8o1vf-ChartContainer efesc7i1"
+                className="css-1s8o1vf-ChartContainer efesc7i0"
               >
                 <Chart
                   noEvents={true}
@@ -362,7 +388,9 @@ exports[`ProjectCard renders 1`] = `
                   "isBookmarked": false,
                   "isMember": true,
                   "name": "Project Name",
-                  "platform": "javascript",
+                  "platforms": Array [
+                    "javascript",
+                  ],
                   "slug": "project-slug",
                   "stats": Array [
                     Array [
diff --git a/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx b/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
index f1ec2ddfd2..8d06fe1e17 100644
--- a/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
+++ b/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
@@ -14,7 +14,7 @@ describe('ProjectCard', function() {
       <ProjectCard
         project={TestStubs.Project({
           stats: [[1525042800, 1], [1525046400, 2]],
-          platform: 'javascript',
+          platforms: ['javascript'],
         })}
         params={{orgId: 'org-slug'}}
       />,
@@ -24,7 +24,7 @@ describe('ProjectCard', function() {
     projectMock = MockApiClient.addMockResponse({
       url: '/projects/org-slug/project-slug/',
       method: 'PUT',
-      data: TestStubs.Project({isBookmarked: false, platform: 'javascript'}),
+      data: TestStubs.Project({isBookmarked: false, platforms: ['javascript']}),
     });
   });
 
@@ -94,7 +94,9 @@ describe('ProjectCard', function() {
   });
 
   it('renders with platform', function() {
-    expect(wrapper.find('Platformicon[platform="javascript"]')).toHaveLength(1);
+    expect(wrapper.find('PlatformList')).toHaveLength(1);
+    const icons = wrapper.find('StyledPlatformIcon');
+    expect(icons.first().prop('platform')).toBe('javascript');
   });
 
   it('renders loading placeholder card if there are no stats', function() {
