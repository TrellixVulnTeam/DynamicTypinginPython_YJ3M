commit 7de3b86d94789328328491898e8a9f9c6eb0a3f4
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Fri Jul 10 12:15:54 2020 -0700

    chore(ts): Convert PlatformList (#19783)

diff --git a/src/sentry/static/sentry/app/components/events/interfaces/spans/inlineDocs.tsx b/src/sentry/static/sentry/app/components/events/interfaces/spans/inlineDocs.tsx
index 2b8b918b98..2ffa156d51 100644
--- a/src/sentry/static/sentry/app/components/events/interfaces/spans/inlineDocs.tsx
+++ b/src/sentry/static/sentry/app/components/events/interfaces/spans/inlineDocs.tsx
@@ -43,7 +43,7 @@ class InlineDocs extends React.Component<Props, State> {
 
     this.setState({loading: true});
 
-    let tracingPlatform: PlatformKey = '';
+    let tracingPlatform: PlatformKey;
     switch (platform) {
       case 'sentry.python': {
         tracingPlatform = 'python-tracing';
diff --git a/src/sentry/static/sentry/app/components/platformIcon.tsx b/src/sentry/static/sentry/app/components/platformIcon.tsx
index ce62e36998..b895f76133 100644
--- a/src/sentry/static/sentry/app/components/platformIcon.tsx
+++ b/src/sentry/static/sentry/app/components/platformIcon.tsx
@@ -1,4 +1,3 @@
-import PropTypes from 'prop-types';
 import React from 'react';
 
 const PLATFORM_TO_ICON = {
@@ -83,11 +82,4 @@ const PlatformIcon = ({platform, size, width, height, ...props}: Props) => {
   );
 };
 
-PlatformIcon.propTypes = {
-  platform: PropTypes.string.isRequired,
-  size: PropTypes.string,
-  width: PropTypes.string,
-  height: PropTypes.string,
-};
-
 export default PlatformIcon;
diff --git a/src/sentry/static/sentry/app/components/platformList.jsx b/src/sentry/static/sentry/app/components/platformList.jsx
deleted file mode 100644
index df748d2b83..0000000000
--- a/src/sentry/static/sentry/app/components/platformList.jsx
+++ /dev/null
@@ -1,87 +0,0 @@
-import React from 'react';
-import PropTypes from 'prop-types';
-import styled from '@emotion/styled';
-
-import PlatformIcon from 'app/components/platformIcon';
-
-class PlatformList extends React.Component {
-  static propTypes = {
-    platforms: PropTypes.array,
-    direction: PropTypes.oneOf(['right', 'left']),
-    /**
-     * Maximum number of platform icons to display
-     */
-    max: PropTypes.number,
-    /**
-     * Platform icon size in pixels
-     */
-    size: PropTypes.number,
-    /**
-     * Will set container width to be size of having `this.props.max` icons
-     * This is good for lists where the project name is displayed
-     */
-    consistentWidth: PropTypes.bool,
-  };
-
-  static defaultProps = {
-    platforms: [],
-    direction: 'right',
-    max: 3,
-    size: 16,
-    consistentWidth: false,
-  };
-
-  getIcon = (platform, index) => {
-    const {size} = this.props;
-    return <StyledPlatformIcon key={platform + index} platform={platform} size={size} />;
-  };
-
-  getIcons = platforms =>
-    platforms
-      .slice()
-      .reverse()
-      .map(this.getIcon);
-
-  render() {
-    const {platforms, max, size, direction, consistentWidth, className} = this.props;
-    const platformsPreview = platforms.slice(0, max);
-    return (
-      <PlatformIcons
-        direction={direction}
-        max={max}
-        size={size}
-        consistentWidth={consistentWidth}
-        className={className}
-      >
-        {platforms.length > 0 ? (
-          this.getIcons(platformsPreview)
-        ) : (
-          <StyledPlatformIcon size={size} platform="default" />
-        )}
-      </PlatformIcons>
-    );
-  }
-}
-
-const getOverlapWidth = size => Math.round(size / 4);
-
-const PlatformIcons = styled('div')`
-  display: flex;
-  flex-shrink: 0;
-  flex-direction: row;
-  justify-content: ${p => (p.direction === 'right' ? 'flex-end' : 'flex-start')};
-  ${p =>
-    p.consistentWidth && `width: ${p.size + (p.max - 1) * getOverlapWidth(p.size)}px;`};
-`;
-
-const StyledPlatformIcon = styled(({size, ...props}) => (
-  <PlatformIcon size={`${size}px`} {...props} />
-))`
-  border-radius: 3px;
-  box-shadow: 0 0 0 1px #fff;
-  &:not(:first-child) {
-    margin-left: ${p => `${p.size * -1 + getOverlapWidth(p.size)}px;`};
-  }
-`;
-
-export default PlatformList;
diff --git a/src/sentry/static/sentry/app/components/platformList.tsx b/src/sentry/static/sentry/app/components/platformList.tsx
new file mode 100644
index 0000000000..150de76a9e
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/platformList.tsx
@@ -0,0 +1,87 @@
+import React from 'react';
+import styled from '@emotion/styled';
+
+import PlatformIcon from 'app/components/platformIcon';
+import {PlatformKey} from 'app/data/platformCategories';
+
+type Props = {
+  platforms?: PlatformKey[];
+  direction?: 'right' | 'left';
+  /**
+   * Maximum number of platform icons to display
+   */
+  max?: number;
+  /**
+   * Platform icon size in pixels
+   */
+  size?: number;
+  /**
+   * Will set container width to be size of having `this.props.max` icons
+   * This is good for lists where the project name is displayed
+   */
+  consistentWidth?: boolean;
+  className?: string;
+};
+
+const PlatformList = ({
+  platforms = [],
+  direction = 'right',
+  max = 3,
+  size = 16,
+  consistentWidth = false,
+  className,
+}: Props) => {
+  const getIcon = (platform: PlatformKey, index: number) => (
+    <StyledPlatformIcon key={platform + index} platform={platform} size={size} />
+  );
+
+  const getIcons = (items: PlatformKey[]) =>
+    items
+      .slice()
+      .reverse()
+      .map(getIcon);
+
+  const platformsPreview = platforms.slice(0, max);
+  return (
+    <PlatformIcons
+      direction={direction}
+      max={max}
+      size={size}
+      consistentWidth={consistentWidth}
+      className={className}
+    >
+      {platforms.length > 0 ? (
+        getIcons(platformsPreview)
+      ) : (
+        <StyledPlatformIcon size={size} platform="default" />
+      )}
+    </PlatformIcons>
+  );
+};
+
+const getOverlapWidth = (size: number) => Math.round(size / 4);
+
+type IconsProps = Required<Pick<Props, 'direction' | 'consistentWidth' | 'max' | 'size'>>;
+
+const PlatformIcons = styled('div')<IconsProps>`
+  display: flex;
+  flex-shrink: 0;
+  flex-direction: row;
+  justify-content: ${p => (p.direction === 'right' ? 'flex-end' : 'flex-start')};
+  ${p =>
+    p.consistentWidth && `width: ${p.size + (p.max - 1) * getOverlapWidth(p.size)}px;`};
+`;
+
+type IconProps = Omit<React.ComponentProps<typeof PlatformIcon>, 'size'> & {size: number};
+
+const StyledPlatformIcon = styled(({size, ...props}: IconProps) => (
+  <PlatformIcon size={`${size}px`} {...props} />
+))`
+  border-radius: ${p => p.theme.borderRadius};
+  box-shadow: 0 0 0 1px ${p => p.theme.white};
+  &:not(:first-child) {
+    margin-left: ${p => `${p.size * -1 + getOverlapWidth(p.size)}px;`};
+  }
+`;
+
+export default PlatformList;
diff --git a/src/sentry/static/sentry/app/data/platformCategories.tsx b/src/sentry/static/sentry/app/data/platformCategories.tsx
index 1742c3d44c..2ce0e913bb 100644
--- a/src/sentry/static/sentry/app/data/platformCategories.tsx
+++ b/src/sentry/static/sentry/app/data/platformCategories.tsx
@@ -94,7 +94,7 @@ export const sourceMaps: PlatformKey[] = [
 
 // TODO(epurkhiser): I've added these since there was a need to have them in
 // the platform key type. However I have not added them anywhere else.
-const tracing = ['python-tracing', 'node-tracing'];
+const tracing = ['python-tracing', 'node-tracing'] as const;
 
 export type PlatformKey =
   | typeof popular[number]
diff --git a/tests/js/spec/views/organizationGroupDetails/__snapshots__/groupSimilar.spec.jsx.snap b/tests/js/spec/views/organizationGroupDetails/__snapshots__/groupSimilar.spec.jsx.snap
index d68d122583..07a2e118da 100644
--- a/tests/js/spec/views/organizationGroupDetails/__snapshots__/groupSimilar.spec.jsx.snap
+++ b/tests/js/spec/views/organizationGroupDetails/__snapshots__/groupSimilar.spec.jsx.snap
@@ -1455,8 +1455,6 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                             >
                                                               <PlatformList
                                                                 className="css-7c3lwm-StyledAvatar e165dl3i1"
-                                                                consistentWidth={false}
-                                                                direction="right"
                                                                 forwardedRef={null}
                                                                 hideName={true}
                                                                 max={1}
@@ -1471,7 +1469,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                                   size={14}
                                                                 >
                                                                   <div
-                                                                    className="e165dl3i1 css-dyodzz-PlatformIcons-StyledAvatar ezvce7z0"
+                                                                    className="e165dl3i1 css-dyodzz-PlatformIcons-StyledAvatar e1n7dwy90"
                                                                     direction="right"
                                                                     max={1}
                                                                     size={14}
@@ -1481,17 +1479,17 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                                       size={14}
                                                                     >
                                                                       <Component
-                                                                        className="css-7okses-StyledPlatformIcon ezvce7z1"
+                                                                        className="css-f6mbrk-StyledPlatformIcon e1n7dwy91"
                                                                         platform="default"
                                                                         size={14}
                                                                       >
                                                                         <PlatformIcon
-                                                                          className="css-7okses-StyledPlatformIcon ezvce7z1"
+                                                                          className="css-f6mbrk-StyledPlatformIcon e1n7dwy91"
                                                                           platform="default"
                                                                           size="14px"
                                                                         >
                                                                           <img
-                                                                            className="css-7okses-StyledPlatformIcon ezvce7z1"
+                                                                            className="css-f6mbrk-StyledPlatformIcon e1n7dwy91"
                                                                             height="14px"
                                                                             src={
                                                                               Object {
diff --git a/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap b/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
index bbc853de5b..017fd6a6e2 100644
--- a/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
+++ b/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
@@ -391,8 +391,6 @@ exports[`ProjectCard renders 1`] = `
                                         >
                                           <PlatformList
                                             className="css-1neg7x4-StyledAvatar e165dl3i1"
-                                            consistentWidth={false}
-                                            direction="right"
                                             forwardedRef={null}
                                             max={1}
                                             platforms={
@@ -410,7 +408,7 @@ exports[`ProjectCard renders 1`] = `
                                               size={18}
                                             >
                                               <div
-                                                className="e165dl3i1 css-corue1-PlatformIcons-StyledAvatar ezvce7z0"
+                                                className="e165dl3i1 css-corue1-PlatformIcons-StyledAvatar e1n7dwy90"
                                                 direction="right"
                                                 max={1}
                                                 size={18}
@@ -421,17 +419,17 @@ exports[`ProjectCard renders 1`] = `
                                                   size={18}
                                                 >
                                                   <Component
-                                                    className="css-d510pr-StyledPlatformIcon ezvce7z1"
+                                                    className="css-pkjq7x-StyledPlatformIcon e1n7dwy91"
                                                     platform="javascript"
                                                     size={18}
                                                   >
                                                     <PlatformIcon
-                                                      className="css-d510pr-StyledPlatformIcon ezvce7z1"
+                                                      className="css-pkjq7x-StyledPlatformIcon e1n7dwy91"
                                                       platform="javascript"
                                                       size="18px"
                                                     >
                                                       <img
-                                                        className="css-d510pr-StyledPlatformIcon ezvce7z1"
+                                                        className="css-pkjq7x-StyledPlatformIcon e1n7dwy91"
                                                         height="18px"
                                                         src={
                                                           Object {
