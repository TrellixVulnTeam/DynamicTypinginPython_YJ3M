commit 27998c06d0d003e16f747353ccac43dd4392bfef
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Fri May 4 15:37:21 2018 -0700

    fix(github-app): Rename config keys to avoid conflicts (#8323)

diff --git a/src/sentry/identity/github/provider.py b/src/sentry/identity/github/provider.py
index 2bcf6d9225..df7edf4251 100644
--- a/src/sentry/identity/github/provider.py
+++ b/src/sentry/identity/github/provider.py
@@ -28,10 +28,10 @@ class GitHubIdentityProvider(OAuth2Provider):
     oauth_scopes = ()
 
     def get_oauth_client_id(self):
-        return options.get('github.client-id')
+        return options.get('github-app.client-id')
 
     def get_oauth_client_secret(self):
-        return options.get('github.client-secret')
+        return options.get('github-app.client-secret')
 
     def build_identity(self, data):
         data = data['data']
diff --git a/src/sentry/integrations/github/integration.py b/src/sentry/integrations/github/integration.py
index 476e1d8003..0dc90470b1 100644
--- a/src/sentry/integrations/github/integration.py
+++ b/src/sentry/integrations/github/integration.py
@@ -106,7 +106,7 @@ class GitHubIntegration(Integration):
 
 class GitHubInstallationRedirect(PipelineView):
     def get_app_url(self):
-        name = options.get('github.app-name')
+        name = options.get('github-app.name')
         return 'https://github.com/apps/%s' % name
 
     def dispatch(self, request, pipeline):
diff --git a/src/sentry/integrations/github/payload.py b/src/sentry/integrations/github/payload.py
index 3c4a4f98d2..75517862d1 100644
--- a/src/sentry/integrations/github/payload.py
+++ b/src/sentry/integrations/github/payload.py
@@ -27,7 +27,7 @@ class GitHubAppsEndpoint(Endpoint):
         return super(GitHubAppsEndpoint, self).dispatch(request, *args, **kwargs)
 
     def get_secret(self):
-        return options.get('github.webhook-secret')
+        return options.get('github-app.webhook-secret')
 
     def is_valid_signature(self, method, body, secret, signature):
         if method != 'sha1':
diff --git a/src/sentry/integrations/github/utils.py b/src/sentry/integrations/github/utils.py
index 898afbe60b..542093c9c2 100644
--- a/src/sentry/integrations/github/utils.py
+++ b/src/sentry/integrations/github/utils.py
@@ -18,7 +18,7 @@ def get_jwt():
         # JWT expiration time (10 minute maximum)
         'exp': exp,
         # Integration's GitHub identifier
-        'iss': options.get('github.app-id'),
+        'iss': options.get('github-app.id'),
     }
 
-    return jwt.encode(payload, options.get('github.private-key'), algorithm='RS256')
+    return jwt.encode(payload, options.get('github-app.private-key'), algorithm='RS256')
diff --git a/src/sentry/options/defaults.py b/src/sentry/options/defaults.py
index 1639901874..2d55719c5b 100644
--- a/src/sentry/options/defaults.py
+++ b/src/sentry/options/defaults.py
@@ -123,12 +123,13 @@ register('slack.client-secret', flags=FLAG_PRIORITIZE_DISK)
 register('slack.verification-token', flags=FLAG_PRIORITIZE_DISK)
 
 # Github Integration
-register('github.app-id', default=0)
-register('github.app-name', default='')
-register('github.webhook-secret', default='')
-register('github.private-key', default='')
-register('github.client-id', flags=FLAG_PRIORITIZE_DISK)
-register('github.client-secret', flags=FLAG_PRIORITIZE_DISK)
+register('github-app.id', default=0)
+register('github-app.name', default='')
+register('github-app.webhook-secret', default='')
+register('github-app.private-key', default='')
+register('github-app.client-id', flags=FLAG_PRIORITIZE_DISK)
+register('github-app.client-secret', flags=FLAG_PRIORITIZE_DISK)
+
 # VSTS Integration
 register('vsts.client-id', flags=FLAG_PRIORITIZE_DISK)
 register('vsts.client-secret', flags=FLAG_PRIORITIZE_DISK)
diff --git a/src/sentry/utils/pytest/sentry.py b/src/sentry/utils/pytest/sentry.py
index dc0a8cb3c1..2c10ec2f55 100644
--- a/src/sentry/utils/pytest/sentry.py
+++ b/src/sentry/utils/pytest/sentry.py
@@ -146,9 +146,9 @@ def pytest_configure(config):
             'slack.client-secret': 'slack-client-secret',
             'slack.verification-token': 'slack-verification-token',
 
-            'github.app-name': 'sentry-test-app',
-            'github.client-id': 'github-client-id',
-            'github.client-secret': 'github-client-secret',
+            'github-app.name': 'sentry-test-app',
+            'github-app.client-id': 'github-client-id',
+            'github-app.client-secret': 'github-client-secret',
 
             'vsts.client-id': 'vsts-client-id',
             'vsts.client-secret': 'vsts-client-secret',
