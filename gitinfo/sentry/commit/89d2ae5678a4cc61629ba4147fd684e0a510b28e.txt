commit 89d2ae5678a4cc61629ba4147fd684e0a510b28e
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Wed Jun 29 13:25:34 2016 +0200

    API context for threads

diff --git a/src/sentry/interfaces/threads.py b/src/sentry/interfaces/threads.py
index f7d2a742c8..e3bfb8ebc9 100644
--- a/src/sentry/interfaces/threads.py
+++ b/src/sentry/interfaces/threads.py
@@ -49,5 +49,23 @@ class Threads(Interface):
             'threads': [export_thread(x) for x in self.threads],
         }
 
+    def get_api_context(self, is_public=False):
+        def export_thread(data):
+            rv = {
+                'index': data['index'],
+                'id': data['id'],
+                'current': data['current'],
+                'name': data['name'],
+                'stacktrace': None,
+            }
+            if data['stacktrace']:
+                rv['stacktrace'] = data['stacktrace'].get_api_context(
+                    is_public=is_public)
+            return data
+
+        return {
+            'threads': [export_thread(x) for x in self.threads],
+        }
+
     def get_path(self):
         return 'threads'
