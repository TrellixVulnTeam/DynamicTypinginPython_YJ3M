commit 7da15a682dc0b51889a4c8a667fcb090b09c5942
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Mar 16 13:48:00 2012 -0700

    Correct get_send_to behavior

diff --git a/sentry/plugins/bases/notify.py b/sentry/plugins/bases/notify.py
index 85311b00e5..88b7334d12 100644
--- a/sentry/plugins/bases/notify.py
+++ b/sentry/plugins/bases/notify.py
@@ -39,8 +39,8 @@ class NotifyPlugin(Plugin):
             send_to_list |= set(settings.ADMINS)
 
         send_to_members = self.get_option('send_to_members', project)
-        if send_to_members:
-            send_to_list |= set(project.member_set.values_list('user__id', 'user__email'))
+        if send_to_members and project:
+            send_to_list |= set(project.member_set.values_list('user__email', flat=True))
 
         return filter(bool, send_to_list)
 
diff --git a/sentry/plugins/sentry_mail/__init__.py b/sentry/plugins/sentry_mail/__init__.py
index 6568571223..bfb7580c7c 100644
--- a/sentry/plugins/sentry_mail/__init__.py
+++ b/sentry/plugins/sentry_mail/__init__.py
@@ -83,14 +83,7 @@ class MailProcessor(NotifyPlugin):
         )
 
     def get_send_to(self, project=None):
-        send_to_list = self.get_option('send_to', project)
-        if not send_to_list:
-            if self.send_to is not None:
-                send_to_list = self.send_to
-            elif project is not None:
-                send_to_list = list(project.member_set.values_list('user__email', flat=True))
-            else:
-                send_to_list = []
+        send_to_list = self.get_option('send_to', project) or []
 
         if isinstance(send_to_list, basestring):
             send_to_list = send_to_list.split(',')
