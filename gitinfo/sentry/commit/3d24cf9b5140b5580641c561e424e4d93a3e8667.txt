commit 3d24cf9b5140b5580641c561e424e4d93a3e8667
Author: Dan Fuller <dfuller@sentry.io>
Date:   Mon May 20 15:50:03 2019 -0700

    refs: Change get_key_quota to only cache feature handler
    
    https://github.com/getsentry/sentry/pull/13236#issuecomment-493279641

diff --git a/src/sentry/quotas/base.py b/src/sentry/quotas/base.py
index a311903fb3..0622afb7b1 100644
--- a/src/sentry/quotas/base.py
+++ b/src/sentry/quotas/base.py
@@ -76,19 +76,14 @@ class Quota(Service):
         # XXX(epurkhiser): Avoid excessive feature manager checks (which can be
         # expensive depending on feature handlers) for project rate limits.
         # This happens on /store.
-        cache_key = u'project:{}:key:{}:rate-limits'.format(
-            key.project.id,
-            key.id,
-        )
+        cache_key = u'project:{}:features:rate-limits'.format(key.project.id)
 
-        rate_limit = default_cache.get(cache_key)
-        if rate_limit is None:
+        has_rate_limits = default_cache.get(cache_key)
+        if has_rate_limits is None:
             has_rate_limits = features.has('projects:rate-limits', key.project)
-            rate_limit = key.rate_limit if has_rate_limits else (0, 0)
-
-            default_cache.set(cache_key, rate_limit, 600)
+            default_cache.set(cache_key, has_rate_limits, 600)
 
-        return rate_limit
+        return key.rate_limit if has_rate_limits else (0, 0)
 
     def get_project_quota(self, project):
         from sentry.models import Organization, OrganizationOption
