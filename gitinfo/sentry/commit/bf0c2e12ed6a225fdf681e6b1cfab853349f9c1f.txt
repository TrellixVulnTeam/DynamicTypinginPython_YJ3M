commit bf0c2e12ed6a225fdf681e6b1cfab853349f9c1f
Author: Scott Cooper <scttcper@gmail.com>
Date:   Tue Jun 9 15:43:34 2020 -0700

    fix(alerts): Add back open in discover button (#19257)

diff --git a/src/sentry/static/sentry/app/views/alerts/details/body.tsx b/src/sentry/static/sentry/app/views/alerts/details/body.tsx
index a7a86d91ff..490cf8409d 100644
--- a/src/sentry/static/sentry/app/views/alerts/details/body.tsx
+++ b/src/sentry/static/sentry/app/views/alerts/details/body.tsx
@@ -234,6 +234,7 @@ export default class DetailsBody extends React.Component<Props> {
                   <Placeholder height="200px" />
                 )}
               </PanelBody>
+              {this.renderChartActions()}
             </ChartPanel>
           </PageContent>
           <DetailWrapper>
diff --git a/tests/js/spec/views/alerts/details/index.spec.jsx b/tests/js/spec/views/alerts/details/index.spec.jsx
index 4593035a0e..590253bff0 100644
--- a/tests/js/spec/views/alerts/details/index.spec.jsx
+++ b/tests/js/spec/views/alerts/details/index.spec.jsx
@@ -50,6 +50,10 @@ describe('IncidentDetails', function() {
       body: TestStubs.IncidentStats({totalEvents: 555, uniqueUsers: 12}),
     });
 
+    MockApiClient.addMockResponse({
+      url: '/organizations/org-slug/projects/',
+      body: [],
+    });
     MockApiClient.addMockResponse({
       url: '/organizations/org-slug/incidents/456/',
       statusCode: 404,
@@ -105,6 +109,19 @@ describe('IncidentDetails', function() {
     ).toBe('2 weeks');
   });
 
+  it('renders open in discover button', async function() {
+    const discoverOrg = {...organization, features: ['discover-basic', 'discover-query']};
+    const wrapper = createWrapper(
+      {},
+      {...routerContext, context: {...routerContext.context, organization: discoverOrg}}
+    );
+    await tick();
+    wrapper.update();
+
+    const chartActions = wrapper.find('ChartActions');
+    expect(chartActions.find('Button').text()).toBe('Open in Discover');
+  });
+
   it('handles invalid incident', async function() {
     const wrapper = createWrapper({params: {orgId: 'org-slug', alertId: '456'}});
     await tick();
