commit f30b3e9e1589f189d480ac601cfe1098db979beb
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Dec 31 13:35:58 2013 -0800

    Catch a KeyError when assuming all users returned from UserOption exists in user_ids

diff --git a/src/sentry/utils/email.py b/src/sentry/utils/email.py
index 8b28aa6839..6acd752120 100644
--- a/src/sentry/utils/email.py
+++ b/src/sentry/utils/email.py
@@ -76,8 +76,12 @@ class MessageBuilder(object):
                 key='alert_email',
             )
             for option in (o for o in queryset if o.value):
-                user_ids.remove(option.user_id)
-                email_list.add(option.value)
+                try:
+                    user_ids.remove(option.user_id)
+                    email_list.add(option.value)
+                except KeyError:
+                    # options.user_id might not exist in user_ids set
+                    pass
 
         if user_ids:
             email_list |= set(User.objects.filter(
