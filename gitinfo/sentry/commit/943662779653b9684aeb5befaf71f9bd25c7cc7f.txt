commit 943662779653b9684aeb5befaf71f9bd25c7cc7f
Author: Mark Story <mark@sentry.io>
Date:   Mon Mar 2 14:40:21 2020 -0500

    fix(ui) Don't corrupt the saved search store with non-array things. (#17406)
    
    Fixes JAVASCRIPT-21MG

diff --git a/src/sentry/static/sentry/app/stores/savedSearchesStore.jsx b/src/sentry/static/sentry/app/stores/savedSearchesStore.jsx
index 80b35074ba..46c08450b8 100644
--- a/src/sentry/static/sentry/app/stores/savedSearchesStore.jsx
+++ b/src/sentry/static/sentry/app/stores/savedSearchesStore.jsx
@@ -114,6 +114,9 @@ const SavedSearchesStore = Reflux.createStore({
   },
 
   onFetchSavedSearchesSuccess(data) {
+    if (!Array.isArray(data)) {
+      data = [];
+    }
     this.state = {
       ...this.state,
       savedSearches: data,
@@ -122,7 +125,7 @@ const SavedSearchesStore = Reflux.createStore({
     this.trigger(this.state);
   },
 
-  onFetchSavedSearchesError(resp) {
+  onFetchSavedSearchesError(_resp) {
     this.state = {
       ...this.state,
       savedSearches: [],
@@ -150,7 +153,7 @@ const SavedSearchesStore = Reflux.createStore({
     this.trigger(this.state);
   },
 
-  onPinSearch(type, query, ...args) {
+  onPinSearch(type, query) {
     const existingSearch = this.findByQuery(query);
 
     if (existingSearch) {
diff --git a/tests/js/spec/stores/savedSearchesStore.spec.jsx b/tests/js/spec/stores/savedSearchesStore.spec.jsx
index a29e32e6e4..ab6fbcdd56 100644
--- a/tests/js/spec/stores/savedSearchesStore.spec.jsx
+++ b/tests/js/spec/stores/savedSearchesStore.spec.jsx
@@ -53,6 +53,18 @@ describe('SavedSearchesStore', function() {
     expect(SavedSearchesStore.get().isLoading).toBe(false);
   });
 
+  it('failed fetches do not corrupt store', async function() {
+    Client.addMockResponse({
+      url: '/organizations/org-1/searches/',
+      body: '',
+    });
+    await fetchSavedSearches(api, 'org-1', {});
+    await tick();
+
+    expect(SavedSearchesStore.get().savedSearches).toHaveLength(0);
+    expect(SavedSearchesStore.get().isLoading).toBe(false);
+  });
+
   it('creates a new pin search', async function() {
     await fetchSavedSearches(api, 'org-1', {});
     await tick();
