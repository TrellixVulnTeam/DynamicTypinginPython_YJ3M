commit 086c16aaa350d1fe5f107862f8d885bc8dd8a8a6
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Mar 3 14:44:30 2015 -0800

    Basic frontend for tag values

diff --git a/src/sentry/static/sentry/app/proptypes.jsx b/src/sentry/static/sentry/app/proptypes.jsx
index dce65364a5..512338fa3d 100644
--- a/src/sentry/static/sentry/app/proptypes.jsx
+++ b/src/sentry/static/sentry/app/proptypes.jsx
@@ -17,6 +17,9 @@ var PropTypes = {
   Project: React.PropTypes.shape({
     id: React.PropTypes.string.isRequired
   }),
+  TagKey: React.PropTypes.shape({
+    key: React.PropTypes.string.isRequired
+  }),
   Team: React.PropTypes.shape({
     id: React.PropTypes.string.isRequired
   }),
diff --git a/src/sentry/static/sentry/app/routes.jsx b/src/sentry/static/sentry/app/routes.jsx
index c27c033016..b90ffe9b7e 100644
--- a/src/sentry/static/sentry/app/routes.jsx
+++ b/src/sentry/static/sentry/app/routes.jsx
@@ -8,6 +8,7 @@ var DefaultRoute = Router.DefaultRoute;
 var GroupDetails = require("./views/groupDetails");
 var GroupEvents = require("./views/groupEvents");
 var GroupTags = require("./views/groupTags");
+var GroupTagValues = require("./views/groupTagValues");
 var GroupOverview = require("./views/groupOverview");
 var ProjectDetails = require("./views/projectDetails");
 var PropTypes = require("./proptypes");
@@ -40,6 +41,7 @@ var routes = (
         <DefaultRoute name="groupOverview" handler={GroupOverview} />
         <Route name="groupEventDetails" path="events/:eventId/" handler={GroupOverview} />
         <Route name="groupTags" path="tags/" handler={GroupTags} />
+        <Route name="groupTagValues" path="tags/:tagKey/" handler={GroupTagValues} />
         <Route name="groupEvents" path="events/" handler={GroupEvents} />
       </Route>
     </Route>
diff --git a/src/sentry/static/sentry/app/views/groupTagValues.jsx b/src/sentry/static/sentry/app/views/groupTagValues.jsx
new file mode 100644
index 0000000000..98ce64bf89
--- /dev/null
+++ b/src/sentry/static/sentry/app/views/groupTagValues.jsx
@@ -0,0 +1,108 @@
+/*** @jsx React.DOM */
+
+var React = require("react");
+var Router = require("react-router");
+
+var api = require("../api");
+var Count = require("../components/count");
+var GroupState = require("../mixins/groupState");
+var LoadingError = require("../components/loadingError");
+var LoadingIndicator = require("../components/loadingIndicator");
+var PropTypes = require("../proptypes");
+
+var GroupTagValues = React.createClass({
+  mixins: [GroupState, Router.State],
+
+  getInitialState() {
+    return {
+      tagKey: null,
+      tagValueList: null,
+      loading: true,
+      error: false
+    };
+  },
+
+  componentWillMount() {
+    this.fetchData();
+  },
+
+  fetchData() {
+    var params = this.getParams();
+
+    this.setState({
+      loading: true,
+      error: false
+    });
+
+    api.request('/groups/' + this.getGroup().id + '/tags/' + this.getParams().tagKey + '/', {
+      success: (data) => {
+        this.setState({
+          tagKey: data,
+          loading: this.state.tagValueList === null
+        });
+      },
+      error: (error) => {
+        this.setState({
+          error: true,
+          loading: false
+        });
+      }
+    });
+
+    api.request('/groups/' + this.getGroup().id + '/tags/' + this.getParams().tagKey + '/values/', {
+      success: (data) => {
+        this.setState({
+          tagValueList: data,
+          loading: this.state.tagKey === null
+        });
+      },
+      error: (error) => {
+        this.setState({
+          error: true,
+          loading: false
+        });
+      }
+    });
+  },
+
+  render() {
+    if (this.state.loading) {
+      return <LoadingIndicator />;
+    } else if (this.state.error) {
+      return <LoadingError onRetry={this.fetchData} />;
+    }
+
+    var tagKey = this.state.tagKey;
+    var children = this.state.tagValueList.map((tagValue, tagValueIdx) => {
+      var pct = parseInt(tagValue.count / tagKey.totalValues * 100, 10);
+      return (
+        <li key={tagValueIdx}>
+          <a className="tag-bar" href="">
+            <span className="tag-bar-background" style={{width: pct + '%'}}></span>
+            <span className="tag-bar-label">{tagValue.value}</span>
+            <span className="tag-bar-count"><Count value={tagValue.count} /></span>
+          </a>
+        </li>
+      );
+    });
+
+    return (
+      <div className="box">
+        <div className="box-content with-padding">
+          <div className="page-header">
+            <span className="pull-right">
+              <a href="">More Details</a>
+            </span>
+            <h5>{tagKey.name} <small><Count value={tagKey.totalValues} /></small></h5>
+          </div>
+
+          <ul className="list-unstyled">
+            {children}
+          </ul>
+        </div>
+      </div>
+    );
+  }
+});
+
+module.exports = GroupTagValues;
diff --git a/src/sentry/static/sentry/app/views/groupTags.jsx b/src/sentry/static/sentry/app/views/groupTags.jsx
index 8c5e71b3af..f5300f7de9 100644
--- a/src/sentry/static/sentry/app/views/groupTags.jsx
+++ b/src/sentry/static/sentry/app/views/groupTags.jsx
@@ -1,6 +1,7 @@
 /*** @jsx React.DOM */
 
 var React = require("react");
+var {Link} = require("react-router");
 
 var api = require("../api");
 var Count = require("../components/count");
@@ -71,13 +72,20 @@ var GroupTags = React.createClass({
           );
         });
 
+        var routeParams = {
+          orgId: this.getOrganization().slug,
+          projectId: this.getProject().slug,
+          groupId: this.getGroup().id,
+          tagKey: tag.key
+        };
+
         return (
           <div className="col-md-6" key={tagIdx}>
             <div className="box">
               <div className="box-content with-padding">
                 <div className="page-header">
                   <span className="pull-right">
-                    <a href="">More Details</a>
+                    <Link to="groupTagValues" params={routeParams}>More Details</Link>
                   </span>
                   <h5>{tag.name} <small><Count value={tag.totalValues} /></small></h5>
                 </div>
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index dba7ea50a1..027ad290cf 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -377,7 +377,7 @@ urlpatterns += patterns('',
         name='sentry-group-plugin-action'),
     url(r'^(?P<organization_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/tags/$', ReactPageView.as_view(),
         name='sentry-group-tags'),
-    url(r'^(?P<organization_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/tags/(?P<tag_name>[^/]+)/$', groups.group_tag_details,
+    url(r'^(?P<organization_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/tags/(?P<tag_name>[^/]+)/$', ReactPageView.as_view(),
         name='sentry-group-tag-details'),
     url(r'^(?P<organization_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/alerts/$', alerts.alert_list,
         name='sentry-alerts'),
