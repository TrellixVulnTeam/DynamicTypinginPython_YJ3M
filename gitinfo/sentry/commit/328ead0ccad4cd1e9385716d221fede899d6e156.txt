commit 328ead0ccad4cd1e9385716d221fede899d6e156
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Apr 23 16:37:51 2015 -0700

    Nydus 0.11.0

diff --git a/setup.py b/setup.py
index a3c711b4af..172d1abd7b 100755
--- a/setup.py
+++ b/setup.py
@@ -87,7 +87,7 @@ install_requires = [
     'logan>=0.5.8.2,<0.6.0',
     'lxml>=3.4.1',
     'mock>=0.8.0',
-    'nydus>=0.10.7,<0.11.0',
+    'nydus>=0.11.0,<0.12.0',
     'markdown>=2.4.1,<2.5.0',
     'progressbar>=2.2,<2.4',
     'Pygments>=1.6.0,<1.7.0',
diff --git a/src/sentry/buffer/redis.py b/src/sentry/buffer/redis.py
index e5b4a1db06..b821b5f379 100644
--- a/src/sentry/buffer/redis.py
+++ b/src/sentry/buffer/redis.py
@@ -83,7 +83,7 @@ class RedisBuffer(Buffer):
             for column, value in extra.iteritems():
                 pipe.hset(key, 'e+' + column, pickle.dumps(value))
         pipe.expire(key, self.key_expire)
-        pipe.zadd(self.pending_key, key, time())
+        pipe.zadd(self.pending_key, time(), key)
         pipe.execute()
 
     def process_pending(self):
diff --git a/tests/sentry/buffer/redis/tests.py b/tests/sentry/buffer/redis/tests.py
index 34f9635088..50696ae954 100644
--- a/tests/sentry/buffer/redis/tests.py
+++ b/tests/sentry/buffer/redis/tests.py
@@ -29,8 +29,8 @@ class RedisBufferTest(TestCase):
     @mock.patch('sentry.buffer.redis.RedisBuffer._make_key', mock.Mock(return_value='foo'))
     @mock.patch('sentry.buffer.redis.process_incr')
     def test_process_pending(self, process_incr):
-        self.buf.conn.zadd('b:p', 'foo', 1)
-        self.buf.conn.zadd('b:p', 'bar', 2)
+        self.buf.conn.zadd('b:p', 1, 'foo')
+        self.buf.conn.zadd('b:p', 2, 'bar')
         self.buf.process_pending()
         assert len(process_incr.apply_async.mock_calls) == 2
         process_incr.apply_async.assert_any_call(kwargs={'key': 'foo'})
