commit 16e39af9e32094290ead1e66af36eef71ba3a9fe
Author: Ted Kaemming <ted@kaemming.com>
Date:   Thu Mar 31 16:26:31 2016 -0700

    Be more aggressive about closing open files in `PreviewBackend`.

diff --git a/src/sentry/utils/email.py b/src/sentry/utils/email.py
index 2dfd78fc05..fe4a0d894f 100644
--- a/src/sentry/utils/email.py
+++ b/src/sentry/utils/email.py
@@ -409,9 +409,12 @@ class PreviewBackend(BaseEmailBackend):
                 prefix='sentry-email-preview-',
                 suffix='.eml',
             )
-            preview.write(content)
-            preview.flush()
-            preview.close()
+            try:
+                preview.write(content)
+                preview.flush()
+            finally:
+                preview.close()
+
             subprocess.check_call(('open', preview.name))
 
         return len(email_messages)
