commit c8c19d51a180ca588eb37a57c7405a59ff8164a8
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Mon Feb 26 18:35:43 2018 -0800

    feat(slack): Add analytics to slack actions

diff --git a/src/sentry/integrations/slack/action_endpoint.py b/src/sentry/integrations/slack/action_endpoint.py
index b6649263f7..a778e37122 100644
--- a/src/sentry/integrations/slack/action_endpoint.py
+++ b/src/sentry/integrations/slack/action_endpoint.py
@@ -2,6 +2,7 @@ from __future__ import absolute_import
 
 from django.core.urlresolvers import reverse
 
+from sentry import analytics
 from sentry import http, options
 from sentry.api import client
 from sentry.api.base import Endpoint
@@ -47,6 +48,7 @@ class SlackActionEndpoint(Endpoint):
             assignee = None
 
         self.update_group(group, identity, {'assignedTo': assignee})
+        analytics.record('integrations.slack.assign', actor_id=identity.user_id)
 
     def on_status(self, request, identity, group, action, data, integration):
         status = action['value']
@@ -63,6 +65,13 @@ class SlackActionEndpoint(Endpoint):
 
         self.update_group(group, identity, status)
 
+        analytics.record(
+            'integrations.slack.status',
+            status=status['status'],
+            resolve_type=resolve_type,
+            actor_id=identity.user_id
+        )
+
     def update_group(self, group, identity, data):
         event_write_key = ApiKey(
             organization=group.project.organization,
@@ -253,11 +262,13 @@ class SlackActionEndpoint(Endpoint):
         # Handle interaction actions
         try:
             for action in action_list:
-                if action['name'] == 'status':
+                action_type = action['name']
+
+                if action_type == 'status':
                     self.on_status(request, identity, group, action, data, integration)
-                elif action['name'] == 'assign':
+                elif action_type == 'assign':
                     self.on_assign(request, identity, group, action)
-                elif action['name'] == 'resolve_dialog':
+                elif action_type == 'resolve_dialog':
                     self.open_resolve_dialog(data, group, integration)
                     defer_attachment_update = True
         except client.ApiError as e:
diff --git a/src/sentry/integrations/slack/analytics.py b/src/sentry/integrations/slack/analytics.py
new file mode 100644
index 0000000000..59664bbabb
--- /dev/null
+++ b/src/sentry/integrations/slack/analytics.py
@@ -0,0 +1,25 @@
+from __future__ import absolute_import, print_function
+
+from sentry import analytics
+
+
+class SlackIntegrationAssign(analytics.Event):
+    type = 'integrations.slack.assign'
+
+    attributes = (
+        analytics.Attribute('actor_id', required=False),
+    )
+
+
+class SlackIntegrationStatus(analytics.Event):
+    type = 'integrations.slack.status'
+
+    attributes = (
+        analytics.Attribute('status'),
+        analytics.Attribute('resolve_type', required=False),
+        analytics.Attribute('actor_id', required=False),
+    )
+
+
+analytics.register(SlackIntegrationAssign)
+analytics.register(SlackIntegrationStatus)
