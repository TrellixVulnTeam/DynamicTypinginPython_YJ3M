commit b2c8af28a3d82d07b83ff8a4dba45969cb396b21
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jun 5 10:20:27 2014 -0700

    Only re-set cache on success

diff --git a/src/sentry/tasks/store.py b/src/sentry/tasks/store.py
index bd18e6913d..a7ea7e903a 100644
--- a/src/sentry/tasks/store.py
+++ b/src/sentry/tasks/store.py
@@ -34,7 +34,8 @@ def preprocess_event(cache_key=None, data=None, **kwargs):
                 expand_javascript_source(data)
             except Exception as e:
                 logger.exception(u'Error fetching javascript source: %r [%s]', data['event_id'], e)
-            cache.set(cache_key, data, 3600)
+            else:
+                cache.set(cache_key, data, 3600)
     finally:
         if cache_key:
             data = None
