commit 06f3ab7d02d34abcad079fed8ac9ddab088ed6ba
Author: Mark Story <mark@sentry.io>
Date:   Mon Apr 13 17:00:16 2020 -0400

    fix(api) Handle missing group in committers API (#18225)
    
    Don't 500 when a transaction event is used in the committer's API.
    
    Fixes SENTRY-C5V

diff --git a/src/sentry/api/endpoints/event_file_committers.py b/src/sentry/api/endpoints/event_file_committers.py
index 7616bf90a9..0d1e94d7bb 100644
--- a/src/sentry/api/endpoints/event_file_committers.py
+++ b/src/sentry/api/endpoints/event_file_committers.py
@@ -4,7 +4,7 @@ from rest_framework.response import Response
 
 from sentry import eventstore
 from sentry.api.bases.project import ProjectEndpoint
-from sentry.models import Commit, Release
+from sentry.models import Commit, Group, Release
 from sentry.utils.committers import get_serialized_event_file_committers
 
 
@@ -30,6 +30,8 @@ class EventFileCommittersEndpoint(ProjectEndpoint):
             committers = get_serialized_event_file_committers(
                 project, event, frame_limit=int(request.GET.get("frameLimit", 25))
             )
+        except Group.DoesNotExist:
+            return Response({"detail": "Issue not found"}, status=404)
         except Release.DoesNotExist:
             return Response({"detail": "Release not found"}, status=404)
         except Commit.DoesNotExist:
diff --git a/tests/sentry/api/endpoints/test_event_committers.py b/tests/sentry/api/endpoints/test_event_committers.py
index 98f72a8e4f..d650478fbd 100644
--- a/tests/sentry/api/endpoints/test_event_committers.py
+++ b/tests/sentry/api/endpoints/test_event_committers.py
@@ -7,6 +7,7 @@ from django.core.urlresolvers import reverse
 from sentry.testutils import APITestCase
 from sentry.testutils.factories import DEFAULT_EVENT_DATA
 from sentry.testutils.helpers.datetime import iso_format, before_now
+from sentry.utils.samples import load_data
 
 # TODO(dcramer): These tests rely too much on implicit fixtures
 
@@ -53,6 +54,31 @@ class EventCommittersTest(APITestCase):
         #                                                                    ] == 'admin@localhost'
         # TODO(maxbittker) test more edge cases here
 
+    def test_no_group(self):
+        self.login_as(user=self.user)
+
+        project = self.create_project()
+
+        min_ago = iso_format(before_now(minutes=1))
+        event_data = load_data("transaction")
+        event_data["start_timestamp"] = min_ago
+        event_data["timestamp"] = min_ago
+
+        event = self.store_event(data=event_data, project_id=project.id)
+
+        url = reverse(
+            "sentry-api-0-event-file-committers",
+            kwargs={
+                "event_id": event.event_id,
+                "project_slug": event.project.slug,
+                "organization_slug": event.project.organization.slug,
+            },
+        )
+
+        response = self.client.get(url, format="json")
+        assert response.status_code == 404, response.content
+        assert response.data["detail"] == "Issue not found"
+
     def test_no_release(self):
         self.login_as(user=self.user)
 
