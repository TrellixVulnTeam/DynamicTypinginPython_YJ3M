commit 553746dd737b0d19088c14da78a1a870d1fd0e13
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Mar 18 01:29:34 2014 -0700

    Also grant sudo on registration

diff --git a/src/sentry/web/frontend/accounts.py b/src/sentry/web/frontend/accounts.py
index 87ab83c50f..376ecf7c66 100644
--- a/src/sentry/web/frontend/accounts.py
+++ b/src/sentry/web/frontend/accounts.py
@@ -43,8 +43,7 @@ def login(request):
     if form.is_valid():
         login_user(request, form.get_user())
         response = login_redirect(request)
-        grant_sudo_privileges(request, response)
-        return response
+        return grant_sudo_privileges(request, response)
 
     request.session.set_test_cookie()
 
@@ -102,7 +101,8 @@ def register(request):
 
         login_user(request, user)
 
-        return login_redirect(request)
+        response = login_redirect(request)
+        return grant_sudo_privileges(request, response)
 
     return render_to_response('sentry/register.html', {
         'form': form,
