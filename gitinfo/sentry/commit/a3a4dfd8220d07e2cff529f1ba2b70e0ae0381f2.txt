commit a3a4dfd8220d07e2cff529f1ba2b70e0ae0381f2
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Thu Jan 24 15:33:15 2013 -0800

    Send a gif for GET requests. Fixes #732

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 7afede9bfb..b02e49b437 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -39,6 +39,10 @@ from sentry.web.helpers import render_to_response, get_project_list
 error_logger = logging.getLogger('sentry.errors.api.http')
 logger = logging.getLogger('sentry.api.http')
 
+# Transparent 1x1 gif
+# See http://probablyprogramming.com/2009/03/15/the-tiniest-gif-ever
+PIXEL = 'R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='.decode('base64')
+
 
 def api(func):
     @wraps(func)
@@ -227,12 +231,15 @@ class StoreView(APIView):
     @never_cache
     def post(self, request, project, auth, **kwargs):
         data = request.raw_post_data
-        return self.process(request, project, auth, data, **kwargs)
+        self.process(request, project, auth, data, **kwargs)
+        return HttpResponse()
 
     @never_cache
     def get(self, request, project, auth, **kwargs):
         data = request.GET.get('sentry_data', '')
-        return self.process(request, project, auth, data, **kwargs)
+        self.process(request, project, auth, data, **kwargs)
+        # We should return a simple 1x1 gif for browser so they don't throw a warning
+        return HttpResponse(PIXEL, content_type='image/gif')
 
     def process(self, request, project, auth, data, **kwargs):
         result = plugins.first('has_perm', request.user, 'create_event', project)
@@ -252,8 +259,6 @@ class StoreView(APIView):
 
         logger.info('New event from project %r (id=%s)', project.slug, data['event_id'])
 
-        return HttpResponse()
-
 
 @csrf_exempt
 @has_access
