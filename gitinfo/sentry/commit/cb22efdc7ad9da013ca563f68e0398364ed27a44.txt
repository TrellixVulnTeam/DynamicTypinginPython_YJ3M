commit cb22efdc7ad9da013ca563f68e0398364ed27a44
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Wed May 22 14:03:36 2019 -0700

    feat(ui): Connect Activity list API (#13298)
    
    This connects the Incident Activity list component to the API to fetch a list of activities.
    
    Fixes SEN-617

diff --git a/src/sentry/static/sentry/app/actionCreators/incident.jsx b/src/sentry/static/sentry/app/actionCreators/incident.jsx
index 9c9072810f..e25c44b966 100644
--- a/src/sentry/static/sentry/app/actionCreators/incident.jsx
+++ b/src/sentry/static/sentry/app/actionCreators/incident.jsx
@@ -46,7 +46,9 @@ export async function createIncident(
 /**
  * Fetches a list of activities for an incident
  */
-export async function fetchIncidentActivities(api, orgId, incidentId) {}
+export async function fetchIncidentActivities(api, orgId, incidentId) {
+  return api.requestPromise(`/organizations/${orgId}/incidents/${incidentId}/activity/`);
+}
 
 /**
  * Creates a note for an incident
diff --git a/src/sentry/static/sentry/app/views/organizationIncidents/details/activity.jsx b/src/sentry/static/sentry/app/views/organizationIncidents/details/activity.jsx
index c8676b6ef9..8ad2e75bae 100644
--- a/src/sentry/static/sentry/app/views/organizationIncidents/details/activity.jsx
+++ b/src/sentry/static/sentry/app/views/organizationIncidents/details/activity.jsx
@@ -14,7 +14,6 @@ import {
 import {t} from 'app/locale';
 import {uniqueId} from 'app/utils/guid';
 import ActivityItem from 'app/components/activity/item';
-import Avatar from 'app/components/avatar';
 import ConfigStore from 'app/stores/configStore';
 import ErrorBoundary from 'app/components/errorBoundary';
 import LoadingError from 'app/components/loadingError';
@@ -175,13 +174,10 @@ class Activity extends React.Component {
                         <ErrorBoundary mini key={`note-${activity.id}`}>
                           <Note
                             showTime
-                            item={activity}
+                            user={activity.user}
+                            modelId={activity.id}
                             text={activity.comment}
-                            id={`note-${activity.id}`}
-                            author={{
-                              name: authorName,
-                              avatar: <Avatar user={activity.user} size={38} />,
-                            }}
+                            authorName={authorName}
                             onDelete={this.handleDeleteNote}
                             onUpdate={this.handleUpdateNote}
                             busy={this.state.updateBusy}
@@ -240,7 +236,7 @@ class ActivityContainer extends React.Component {
       const activities = await fetchIncidentActivities(api, orgId, incidentId);
       this.setState({activities, loading: false});
     } catch (err) {
-      this.setState({loading: false, error: err});
+      this.setState({loading: false, error: !!err});
     }
   }
 
diff --git a/tests/js/spec/views/organizationIncidents/details/index.spec.jsx b/tests/js/spec/views/organizationIncidents/details/index.spec.jsx
index 97eac6eaed..9bcfb03bdc 100644
--- a/tests/js/spec/views/organizationIncidents/details/index.spec.jsx
+++ b/tests/js/spec/views/organizationIncidents/details/index.spec.jsx
@@ -58,7 +58,9 @@ describe('IncidentDetails', function() {
     const wrapper = createWrapper({params: {orgId: 'org-slug', incidentId: '456'}});
     await tick();
     wrapper.update();
-    expect(wrapper.find('LoadingError')).toHaveLength(1);
+
+    // Activtiy will additionally have a LoadingError
+    expect(wrapper.find('LoadingError')).toHaveLength(2);
   });
 
   it('changes status to closed', async function() {
