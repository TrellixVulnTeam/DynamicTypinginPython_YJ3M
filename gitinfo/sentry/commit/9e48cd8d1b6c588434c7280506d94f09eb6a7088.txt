commit 9e48cd8d1b6c588434c7280506d94f09eb6a7088
Author: David Cramer <dcramer@gmail.com>
Date:   Fri May 4 12:11:40 2012 -0700

    Correct behavior of optional project_id in has_access

diff --git a/sentry/web/decorators.py b/sentry/web/decorators.py
index cb5be852c5..000c23f5f5 100644
--- a/sentry/web/decorators.py
+++ b/sentry/web/decorators.py
@@ -36,6 +36,9 @@ def has_access(group_or_func=None):
                 return HttpResponseRedirect(get_login_url())
 
             # XXX: if project_id isn't set, should we only allow superuser?
+            if not project_id:
+                return func(request, None, *args, **kwargs)
+
             if project_id.isdigit():
                 lookup_kwargs = {'id': int(project_id)}
             else:
