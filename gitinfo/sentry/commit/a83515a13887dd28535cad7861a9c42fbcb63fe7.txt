commit a83515a13887dd28535cad7861a9c42fbcb63fe7
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Thu Feb 2 20:38:09 2017 +0100

    Added a test for emoji culprits

diff --git a/tests/sentry/interfaces/test_stacktrace.py b/tests/sentry/interfaces/test_stacktrace.py
index e03328c72f..30f0992393 100644
--- a/tests/sentry/interfaces/test_stacktrace.py
+++ b/tests/sentry/interfaces/test_stacktrace.py
@@ -388,6 +388,19 @@ class StacktraceTest(TestCase):
         ]))
         assert stacktrace.get_culprit_string(platform='cocoa') == '-[CRLCrashAsyncSafeThread crash]'
 
+    def test_emoji_culprit(self):
+        stacktrace = Stacktrace.to_python(dict(frames=[
+            {
+                'filename': 'foo/baz.c',
+                'package': '/foo/bar/baz.dylib',
+                'module': u'\U0001f62d',
+                'lineno': 1,
+                'in_app': True,
+                'function': u'\U0001f60d',
+            }
+        ]))
+        assert stacktrace.get_culprit_string(platform='javascript') == u'\U0001f60d(\U0001f62d)'
+
     def test_exclude_libswiftCore_from_in_app(self):
         stacktrace = Stacktrace.to_python(dict(frames=[
             {
