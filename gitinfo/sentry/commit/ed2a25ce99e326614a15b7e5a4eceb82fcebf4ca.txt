commit ed2a25ce99e326614a15b7e5a4eceb82fcebf4ca
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Mar 25 15:37:26 2011 -0700

    Redirect to Sentry's index if HTTP_REFERER is not set (fixes GH-82)

diff --git a/sentry/views.py b/sentry/views.py
index 79aeadb13a..1a483cc1cc 100644
--- a/sentry/views.py
+++ b/sentry/views.py
@@ -234,7 +234,7 @@ def ajax_handler(request):
         group.status = 1
         
         if not request.is_ajax():
-            return HttpResponseRedirect(request.META['HTTP_REFERER'])
+            return HttpResponseRedirect(request.META.get('HTTP_REFERER') or reverse('sentry'))
         
         data = [
             (m.pk, {
@@ -369,4 +369,4 @@ def group_plugin_action(request, group_id, slug):
     response = cls(group_id)(request, group)
     if response:
         return response
-    return HttpResponseRedirect(request.META['HTTP_REFERER'])
+    return HttpResponseRedirect(request.META.get('HTTP_REFERER') or reverse('sentry'))
