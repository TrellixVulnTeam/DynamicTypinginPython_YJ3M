commit 930a4ebab5b98b5f8108ba40e466d6541d126e3e
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 26 17:39:36 2011 -0800

    Method is optional for Http

diff --git a/sentry/interfaces.py b/sentry/interfaces.py
index f1aa5d371f..aebf365b85 100644
--- a/sentry/interfaces.py
+++ b/sentry/interfaces.py
@@ -191,13 +191,14 @@ class Http(Interface):
     # methods as defined by http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html
     METHODS = ('GET', 'POST', 'PUT', 'OPTIONS', 'HEAD', 'DELETE', 'TRACE', 'CONNECT')
 
-    def __init__(self, url, method, data=None, query_string=None, cookies=None, headers=None, env=None, **kwargs):
+    def __init__(self, url, method=None, data=None, query_string=None, cookies=None, headers=None, env=None, **kwargs):
         if data is None:
             data = {}
 
-        method = method.upper()
+        if method:
+            method = method.upper()
 
-        assert method in self.METHODS
+            assert method in self.METHODS
 
         urlparts = urlparse.urlsplit(url)
 
diff --git a/sentry/templates/sentry/partial/interfaces/http.html b/sentry/templates/sentry/partial/interfaces/http.html
index 2dd34bf0ec..2ac12ff0cc 100644
--- a/sentry/templates/sentry/partial/interfaces/http.html
+++ b/sentry/templates/sentry/partial/interfaces/http.html
@@ -14,11 +14,11 @@
             <tbody>
                 <tr>
                     <th>{% trans "URL:" %}</th>
-                    <td><a href="{{ url }}">{{ url|escape }}</a></td>
+                    <td><a href="{{ url }}">{{ url }}</a></td>
                 </tr>
                 <tr>
                     <th>{% trans "Method:" %}</th>
-                    <td>{{ method }}</td>
+                    <td>{% if method %}{{ method }}{% else %}<em>No method recorded.</em>{% endif %}</td>
                 </tr>
                 <tr>
                     <th>{% trans "Query:" %}</th>
