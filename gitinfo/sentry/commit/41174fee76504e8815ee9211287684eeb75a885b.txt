commit 41174fee76504e8815ee9211287684eeb75a885b
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Sep 3 17:50:47 2011 -0700

    Added SENTRY_MAIL_LEVEL setting (fixes #205)

diff --git a/docs/config/index.rst b/docs/config/index.rst
index 6dcc93c5bc..056c16b65e 100644
--- a/docs/config/index.rst
+++ b/docs/config/index.rst
@@ -326,4 +326,10 @@ Should Sentry be protected by a username and password (using @login_required) or
 SENTRY_AUTO_LOG_STACKS
 ######################
 
-Should Sentry automatically log frame stacks (including locals) for ``create_from_record`` (``logging``) calls as it would for exceptions. Defaults to ``False``.
\ No newline at end of file
+Should Sentry automatically log frame stacks (including locals) for ``create_from_record`` (``logging``) calls as it would for exceptions. Defaults to ``False``.
+
+#################
+SENTRY_MAIL_LEVEL
+#################
+
+The threshold level on which messages should be emailed to ``ADMINS``. Defaults to ``logging.DEBUG``.
\ No newline at end of file
diff --git a/sentry/conf/defaults.py b/sentry/conf/defaults.py
index 50624d240f..5ebd485df6 100644
--- a/sentry/conf/defaults.py
+++ b/sentry/conf/defaults.py
@@ -87,6 +87,9 @@ AUTO_LOG_STACKS = False
 # Only store a portion of all messages per unique group
 SAMPLE_DATA = True
 
+# Restrict emails to only messages >= this value
+MAIL_LEVEL = logging.DEBUG
+
 ## The following settings refer to the built-in webserver
 
 WEB_HOST = 'localhost'
diff --git a/sentry/utils/manager.py b/sentry/utils/manager.py
index bc117b246f..16296a905f 100644
--- a/sentry/utils/manager.py
+++ b/sentry/utils/manager.py
@@ -193,7 +193,7 @@ class SentryManager(models.Manager):
             except Exception, exc:
                 warnings.warn(u'Unable to process log entry: %s' % (exc,))
         else:
-            if mail:
+            if mail and int(group.level) >= settings.MAIL_LEVEL:
                 group.mail_admins()
             return instance
 
