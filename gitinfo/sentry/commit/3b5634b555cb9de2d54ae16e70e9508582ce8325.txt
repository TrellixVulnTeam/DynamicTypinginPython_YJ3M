commit 3b5634b555cb9de2d54ae16e70e9508582ce8325
Author: ted kaemming <ted@kaemming.com>
Date:   Wed Oct 31 16:24:00 2018 -0700

    fix(deletions): Perform manual transaction management (#10367)

diff --git a/src/sentry/db/deletion.py b/src/sentry/db/deletion.py
index af155f6d8e..e6c47abc4d 100644
--- a/src/sentry/db/deletion.py
+++ b/src/sentry/db/deletion.py
@@ -132,6 +132,8 @@ class BulkDeleteQuery(object):
         cutoff = timezone.now() - timedelta(days=self.days)
 
         with dbc.get_new_connection(dbc.get_connection_params()) as conn:
+            conn.autocommit = False
+
             chunk = []
 
             completed = False
@@ -201,6 +203,8 @@ class BulkDeleteQuery(object):
                     if i < batch_size:
                         completed = True
 
+                conn.commit()
+
             if chunk:
                 yield tuple(chunk)
 
