commit 1692d7e415dffb39a8e390de6b7ddd10fd97593b
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Wed May 2 13:40:30 2018 -0700

    feat(dashboard): New project card empty state design (#8285)

diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/noEvents.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/noEvents.jsx
index 7efcbedf0c..8e1e429d4a 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard/noEvents.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/noEvents.jsx
@@ -1,31 +1,16 @@
 import React from 'react';
-import PropTypes from 'prop-types';
 import styled from 'react-emotion';
 import {Flex} from 'grid-emotion';
 
-import Button from 'app/components/buttons/button';
-
 import {t} from 'app/locale';
 
 export default class NoEvents extends React.Component {
-  static propTypes = {
-    projectId: PropTypes.string,
-    orgId: PropTypes.string,
-    platformId: PropTypes.string,
-  };
   render() {
-    const {orgId, projectId, platformId} = this.props;
-    const link = `/${orgId}/${projectId}/getting-started/${platformId
-      ? platformId + '/'
-      : ''}`;
-
     return (
       <Container>
-        <Background align="center" justify="center">
-          <Button size="small" to={link}>
-            {t('Configure project')}
-          </Button>
-        </Background>
+        <EmptyText align="center" justify="center">
+          {t('No activity yet.')}
+        </EmptyText>
       </Container>
     );
   }
@@ -38,9 +23,10 @@ const Container = styled.div`
   right: 0;
 `;
 
-const Background = styled(Flex)`
+const EmptyText = styled(Flex)`
   background-color: rgba(175, 163, 187, 0.2);
   margin-left: 4px;
   margin-right: 4px;
   height: 80px;
+  color: ${p => p.theme.gray2};
 `;
diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/platformList.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/platformList.jsx
index c521719e86..28f257ae62 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard/platformList.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/platformList.jsx
@@ -1,14 +1,19 @@
 import React from 'react';
 import PropTypes from 'prop-types';
+import {withRouter} from 'react-router';
 import styled from 'react-emotion';
 import {Flex} from 'grid-emotion';
+
+import SentryTypes from 'app/proptypes';
 import {t} from 'app/locale';
+import Button from 'app/components/buttons/button';
 
 const MAX_PLATFORMS = 5;
 
-export default class PlatformList extends React.Component {
+class PlatformList extends React.Component {
   static propTypes = {
-    platforms: PropTypes.arrayOf(PropTypes.string),
+    project: SentryTypes.Project,
+    orgId: PropTypes.string,
   };
 
   getIcon(platform) {
@@ -30,14 +35,26 @@ export default class PlatformList extends React.Component {
     );
   }
   render() {
-    const platforms = this.props.platforms.slice(0, MAX_PLATFORMS);
+    const {project, orgId} = this.props;
+    const platforms = project.platforms.slice(0, MAX_PLATFORMS);
+
+    const link = `/${orgId}/${project.slug}/getting-started/${project.platform
+      ? project.platform + '/'
+      : ''}`;
 
-    if (!platforms.length)
+    if (!platforms.length) {
       return (
         <NoPlatforms align="center" p={2}>
-          {t('No platforms yet')}
+          {project.firstEvent ? (
+            t('No platforms yet')
+          ) : (
+            <Button size="small" to={link}>
+              {t('Install an SDK')}
+            </Button>
+          )}
         </NoPlatforms>
       );
+    }
 
     return (
       <Flex align="center">
@@ -74,3 +91,5 @@ const NoPlatforms = styled(Flex)`
   color: ${p => p.theme.gray2};
   height: 70px;
 `;
+
+export default withRouter(PlatformList);
diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
index ffe6731bfa..61b7b04b78 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
@@ -58,15 +58,9 @@ class ProjectCard extends React.Component {
         </Flex>
         <ChartContainer>
           <Chart stats={stats} noEvents={!project.firstEvent} />
-          {!project.firstEvent && (
-            <NoEvents
-              orgId={params.orgId}
-              projectId={project.slug}
-              platformId={project.platform}
-            />
-          )}
+          {!project.firstEvent && <NoEvents />}
         </ChartContainer>
-        <PlatformList platforms={project.platforms} />
+        <PlatformList project={project} orgId={params.orgId} />
       </StyledProjectCard>
     );
   }
diff --git a/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap b/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
index 03083458c1..5b79c75470 100644
--- a/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
+++ b/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
@@ -282,175 +282,153 @@ exports[`ProjectCard renders 1`] = `
               </StyledBarChart>
             </div>
           </Chart>
-          <NoEvents
-            orgId="org-slug"
-            projectId="project-slug"
-          >
+          <NoEvents>
             <Container>
               <div
                 className="css-1m9okvh-Container eks1zeg0"
               >
-                <Background
+                <EmptyText
                   align="center"
                   justify="center"
                 >
                   <Base
                     align="center"
-                    className="css-yrqnia-Background eks1zeg1"
+                    className="css-1qof738-EmptyText eks1zeg1"
                     justify="center"
                   >
                     <div
-                      className="css-yrqnia-Background eks1zeg1"
+                      className="css-1qof738-EmptyText eks1zeg1"
                       is={null}
                     >
-                      <Button
-                        disabled={false}
-                        size="small"
-                        to="/org-slug/project-slug/getting-started/"
-                      >
-                        <StyledButton
-                          aria-label="Configure project"
-                          disabled={false}
-                          onClick={[Function]}
-                          role="button"
-                          size="small"
-                          to="/org-slug/project-slug/getting-started/"
-                        >
-                          <Component
-                            aria-label="Configure project"
-                            className="css-dvpz5-StyledButton-getColors e17811v30"
-                            disabled={false}
-                            onClick={[Function]}
-                            role="button"
-                            size="small"
-                            to="/org-slug/project-slug/getting-started/"
-                          >
-                            <Link
-                              aria-label="Configure project"
-                              className="css-dvpz5-StyledButton-getColors e17811v30"
-                              disabled={false}
-                              onClick={[Function]}
-                              onlyActiveOnIndex={false}
-                              role="button"
-                              size="small"
-                              style={Object {}}
-                              to="/org-slug/project-slug/getting-started/"
-                            >
-                              <a
-                                aria-label="Configure project"
-                                className="css-dvpz5-StyledButton-getColors e17811v30"
-                                disabled={false}
-                                onClick={[Function]}
-                                role="button"
-                                size="small"
-                                style={Object {}}
-                              >
-                                <ButtonLabel
-                                  size="small"
-                                >
-                                  <Component
-                                    className="css-179w01k-ButtonLabel e17811v31"
-                                    size="small"
-                                  >
-                                    <Flex
-                                      align="center"
-                                      className="css-179w01k-ButtonLabel e17811v31"
-                                      size="small"
-                                    >
-                                      <Base
-                                        align="center"
-                                        className="e17811v31 css-8mahft-ButtonLabel"
-                                        size="small"
-                                      >
-                                        <div
-                                          className="e17811v31 css-8mahft-ButtonLabel"
-                                          is={null}
-                                          size="small"
-                                        >
-                                          Configure project
-                                        </div>
-                                      </Base>
-                                    </Flex>
-                                  </Component>
-                                </ButtonLabel>
-                              </a>
-                            </Link>
-                          </Component>
-                        </StyledButton>
-                      </Button>
+                      No activity yet.
                     </div>
                   </Base>
-                </Background>
+                </EmptyText>
               </div>
             </Container>
           </NoEvents>
         </div>
       </ChartContainer>
-      <PlatformList
-        platforms={
-          Array [
-            "javascript",
-          ]
+      <withRouter(PlatformList)
+        orgId="org-slug"
+        project={
+          Object {
+            "hasAccess": true,
+            "id": "2",
+            "isBookmarked": false,
+            "isMember": true,
+            "name": "Project Name",
+            "platforms": Array [
+              "javascript",
+            ],
+            "slug": "project-slug",
+            "teams": Array [],
+          }
         }
       >
-        <Flex
-          align="center"
+        <PlatformList
+          location={
+            Object {
+              "query": Object {},
+            }
+          }
+          orgId="org-slug"
+          project={
+            Object {
+              "hasAccess": true,
+              "id": "2",
+              "isBookmarked": false,
+              "isMember": true,
+              "name": "Project Name",
+              "platforms": Array [
+                "javascript",
+              ],
+              "slug": "project-slug",
+              "teams": Array [],
+            }
+          }
+          router={
+            Object {
+              "createHref": [MockFunction] {
+                "calls": Array [
+                  Array [
+                    "/org-slug/project-slug/",
+                  ],
+                ],
+              },
+              "go": [MockFunction],
+              "goBack": [MockFunction],
+              "goForward": [MockFunction],
+              "isActive": [MockFunction],
+              "listen": [MockFunction],
+              "location": Object {
+                "query": Object {},
+              },
+              "push": [MockFunction],
+              "replace": [MockFunction],
+              "setRouteLeaveHook": [MockFunction],
+            }
+          }
         >
-          <Base
+          <Flex
             align="center"
-            className="css-5ipae5"
           >
-            <div
+            <Base
+              align="center"
               className="css-5ipae5"
-              is={null}
             >
               <div
-                className="org-dashboard-platform-list"
+                className="css-5ipae5"
+                is={null}
               >
-                <Flex
-                  direction="row-reverse"
-                  p={2}
+                <div
+                  className="org-dashboard-platform-list"
                 >
-                  <Base
-                    className="css-1tznizk"
+                  <Flex
                     direction="row-reverse"
                     p={2}
                   >
-                    <div
+                    <Base
                       className="css-1tznizk"
-                      is={null}
+                      direction="row-reverse"
+                      p={2}
                     >
-                      <StyledPlatformIconWrapper
-                        className="javascript"
-                        key="javascript"
+                      <div
+                        className="css-1tznizk"
+                        is={null}
                       >
-                        <span
-                          className="javascript css-128o7xp-StyledPlatformIconWrapper e1mca4c60"
+                        <StyledPlatformIconWrapper
+                          className="javascript"
+                          key="javascript"
                         >
-                          <StyledPlatformIcon
-                            className="platformicon platformicon-javascript"
+                          <span
+                            className="javascript css-128o7xp-StyledPlatformIconWrapper e1mca4c60"
                           >
-                            <span
-                              className="platformicon platformicon-javascript css-hf0kxf-StyledPlatformIcon e1mca4c61"
-                            />
-                          </StyledPlatformIcon>
-                        </span>
-                      </StyledPlatformIconWrapper>
-                    </div>
-                  </Base>
-                </Flex>
-              </div>
-              <PlatformText>
-                <div
-                  className="css-12aj0sd-PlatformText e1mca4c62"
-                >
-                  javascript
+                            <StyledPlatformIcon
+                              className="platformicon platformicon-javascript"
+                            >
+                              <span
+                                className="platformicon platformicon-javascript css-hf0kxf-StyledPlatformIcon e1mca4c61"
+                              />
+                            </StyledPlatformIcon>
+                          </span>
+                        </StyledPlatformIconWrapper>
+                      </div>
+                    </Base>
+                  </Flex>
                 </div>
-              </PlatformText>
-            </div>
-          </Base>
-        </Flex>
-      </PlatformList>
+                <PlatformText>
+                  <div
+                    className="css-12aj0sd-PlatformText e1mca4c62"
+                  >
+                    javascript
+                  </div>
+                </PlatformText>
+              </div>
+            </Base>
+          </Flex>
+        </PlatformList>
+      </withRouter(PlatformList)>
     </div>
   </StyledProjectCard>
 </ProjectCard>
diff --git a/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx b/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
index 12ceb74ad3..a9dd42470a 100644
--- a/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
+++ b/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
@@ -57,7 +57,7 @@ describe('ProjectCard', function() {
     wrapper = mount(
       <ProjectCard
         project={TestStubs.Project({
-          platforms: ['javascript'],
+          platforms: [],
           firstEvent: null,
           platform: 'csharp',
         })}
