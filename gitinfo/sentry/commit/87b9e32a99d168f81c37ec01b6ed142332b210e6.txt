commit 87b9e32a99d168f81c37ec01b6ed142332b210e6
Author: Jess MacQueen <jess@getsentry.com>
Date:   Fri Oct 27 12:39:52 2017 -0700

    Revert "feat(api): Store a non-mutated copy of event data in preprocess hash cache (#5992)"
    
    This reverts commit b2ebbc80f773b2b758f5d4a37c1901cbb3d478d9.

diff --git a/src/sentry/filters/preprocess_hashes.py b/src/sentry/filters/preprocess_hashes.py
deleted file mode 100644
index 383cd1836a..0000000000
--- a/src/sentry/filters/preprocess_hashes.py
+++ /dev/null
@@ -1,13 +0,0 @@
-from __future__ import absolute_import
-
-from django.core.cache import cache, get_cache, InvalidCacheBackendError
-
-
-try:
-    hash_cache = get_cache('preprocess_hash')
-except InvalidCacheBackendError:
-    hash_cache = cache
-
-
-def get_raw_cache_key(project_id, event_id):
-    return 'e:raw:{1}:{0}'.format(project_id, event_id)
diff --git a/src/sentry/tasks/store.py b/src/sentry/tasks/store.py
index d37758b622..172bc4f57d 100644
--- a/src/sentry/tasks/store.py
+++ b/src/sentry/tasks/store.py
@@ -16,7 +16,6 @@ from time import time
 from django.utils import timezone
 
 from sentry.cache import default_cache
-from sentry.filters.preprocess_hashes import get_raw_cache_key, hash_cache
 from sentry.tasks.base import instrumented_task
 from sentry.utils import metrics
 from sentry.utils.safe import safe_execute
@@ -58,16 +57,12 @@ def _do_preprocess_event(cache_key, data, start_time, event_id, process_event):
         error_logger.error('preprocess.failed.empty', extra={'cache_key': cache_key})
         return
 
-    project_id = data['project']
+    project = data['project']
     Raven.tags_context({
-        'project': project_id,
+        'project': project,
     })
 
     if should_process(data):
-        # save another version of data for some projects to generate
-        # preprocessing hash that won't be modified by pipeline
-        hash_cache.set(get_raw_cache_key(project_id, data['event_id']), data)
-
         process_event.delay(cache_key=cache_key, start_time=start_time, event_id=event_id)
         return
 
diff --git a/tests/sentry/tasks/test_store.py b/tests/sentry/tasks/test_store.py
index 5eea6729b9..5c7eae3300 100644
--- a/tests/sentry/tasks/test_store.py
+++ b/tests/sentry/tasks/test_store.py
@@ -1,7 +1,6 @@
 from __future__ import absolute_import
 
 import mock
-import uuid
 
 from sentry.plugins import Plugin2
 from sentry.tasks.store import preprocess_event, process_event
@@ -43,7 +42,6 @@ class StoreTasksTest(PluginTestCase):
 
         data = {
             'project': project.id,
-            'event_id': uuid.uuid4().hex,
             'platform': 'mattlang',
             'message': 'test',
             'extra': {
