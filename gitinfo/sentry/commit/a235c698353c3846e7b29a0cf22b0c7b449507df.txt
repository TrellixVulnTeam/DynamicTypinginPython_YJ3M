commit a235c698353c3846e7b29a0cf22b0c7b449507df
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Fri Feb 26 00:33:23 2016 +0100

    Added basic interface test

diff --git a/tests/sentry/interfaces/test_applecrashreport.py b/tests/sentry/interfaces/test_applecrashreport.py
new file mode 100644
index 0000000000..d1f2a6aa59
--- /dev/null
+++ b/tests/sentry/interfaces/test_applecrashreport.py
@@ -0,0 +1,45 @@
+# -*- coding: utf-8 -*-
+
+from __future__ import absolute_import
+
+from exam import fixture
+
+from sentry.interfaces.applecrash import AppleCrashReport
+from sentry.testutils import TestCase
+
+
+class AppleCrashReportTest(TestCase):
+    @fixture
+    def interface(self):
+        return AppleCrashReport.to_python(dict(
+            crash={
+                'diagnosis': 'Aha',
+                'error': {},
+                'threads': [],
+            },
+            binary_images=[
+                {
+                    "cpu_subtype": 9,
+                    "cpu_type": 12,
+                    "image_addr": 749568,
+                    "image_size": 262144,
+                    "image_vmaddr": 16384,
+                    "name": (
+                        '/private/var/mobile/Containers/Bundle/Application'
+                        '/436352A9-1BE2-4934-9C6F-237CC7DFF27B'
+                        '/Crash-Tester.app/Crash-Tester'
+                    ),
+                    "uuid": "8094558B-3641-36F7-BA80-A1AAABCF72DA"
+                }
+            ],
+        ))
+
+    def test_path(self):
+        assert self.interface.get_path() == 'sentry.interfaces.AppleCrashReport'
+
+    def test_serialize_unserialize_behavior(self):
+        result = type(self.interface).to_python(self.interface.to_json())
+        assert result.to_json() == self.interface.to_json()
+
+    def test_empty_hash(self):
+        assert self.interface.get_hash() == []
diff --git a/tests/sentry/test_event_manager.py b/tests/sentry/test_event_manager.py
index 7095a04630..658fd6da0a 100644
--- a/tests/sentry/test_event_manager.py
+++ b/tests/sentry/test_event_manager.py
@@ -129,6 +129,18 @@ class EventManagerTest(TransactionTestCase):
         assert 'sentry.interfaces.User' not in data
 
     def test_platform_is_saved(self):
+        manager = EventManager(self.make_event(**{
+            'sentry.interfaces.AppleCrashReport': {
+                'crash': {},
+                'binary_images': []
+            }
+        }))
+        manager.normalize()
+        event = manager.save(1)
+
+        assert 'sentry.interfacse.AppleCrashReport' not in event.interfaces
+
+    def test_ephemral_interfaces_removed_on_save(self):
         manager = EventManager(self.make_event(platform='python'))
         event = manager.save(1)
 
