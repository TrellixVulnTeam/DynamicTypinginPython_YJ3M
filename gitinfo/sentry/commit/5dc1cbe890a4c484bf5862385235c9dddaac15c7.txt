commit 5dc1cbe890a4c484bf5862385235c9dddaac15c7
Author: Chris Jennings <chriskjennings@gmail.com>
Date:   Wed Oct 10 15:08:28 2018 -0700

    fix(ui): fix settingsLayout so that truncate will work in child panels (#10010)
    
    * fix(ui): fix settingsLayout so that trunacate will work in panels. rewrite discarded events tab to use Panel/PanelItem.
    
    * Remove unused styles
    
    * Revert accidental removal of message margin
    
    * Remove unused className. Use Panel/EmptyMessage instead of old empty state.
    
    * Use styled component instead of inline css

diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsLayout.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsLayout.jsx
index 57f8526e81..a032081bb7 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsLayout.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsLayout.jsx
@@ -85,6 +85,7 @@ const SidebarWrapper = styled(Box)`
  */
 const Content = styled(Box)`
   flex: 1;
+  min-width: 0; /* keep children from stretching container */
 `;
 
 const SettingsSubheader = styled('div')`
diff --git a/src/sentry/static/sentry/app/views/settings/project/projectFilters/groupTombstones.jsx b/src/sentry/static/sentry/app/views/settings/project/projectFilters/groupTombstones.jsx
index dbbd4b5f37..8ac6c5d968 100644
--- a/src/sentry/static/sentry/app/views/settings/project/projectFilters/groupTombstones.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/projectFilters/groupTombstones.jsx
@@ -1,6 +1,8 @@
 import PropTypes from 'prop-types';
 import React from 'react';
+import styled from 'react-emotion';
 import _ from 'lodash';
+import {Box} from 'grid-emotion';
 
 import {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';
 import {t} from 'app/locale';
@@ -9,6 +11,8 @@ import Avatar from 'app/components/avatar';
 import EventOrGroupHeader from 'app/components/eventOrGroupHeader';
 import LinkWithConfirmation from 'app/components/linkWithConfirmation';
 import Tooltip from 'app/components/tooltip';
+import {Panel, PanelItem} from 'app/components/panels';
+import EmptyMessage from 'app/views/settings/components/emptyMessage';
 
 class GroupTombstoneRow extends React.Component {
   static propTypes = {
@@ -23,22 +27,23 @@ class GroupTombstoneRow extends React.Component {
       actor = data.actor;
 
     return (
-      <li className={`group row level-${data.level} type-${data.type}`}>
-        <div className="col-md-10 event-details issue">
+      <PanelItem align="center">
+        <StyledBox>
           <EventOrGroupHeader
             includeLink={false}
             hideIcons={true}
+            className="truncate"
             {..._.omit(this.props, 'undiscard')}
           />
-        </div>
-        <div className="col-md-1 event-actor">
+        </StyledBox>
+        <Box w={20} mx={30}>
           {actor && (
             <Tooltip title={t('Discarded by %s', actor.name || actor.email)}>
               <Avatar user={data.actor} />
             </Tooltip>
           )}
-        </div>
-        <div className="col-md-1 event-undiscard">
+        </Box>
+        <Box w={30}>
           <Tooltip title={t('Undiscard')}>
             <LinkWithConfirmation
               className="group-remove btn btn-default btn-sm"
@@ -56,8 +61,8 @@ class GroupTombstoneRow extends React.Component {
               <span className="icon-trash undiscard" />
             </LinkWithConfirmation>
           </Tooltip>
-        </div>
-      </li>
+        </Box>
+      </PanelItem>
     );
   }
 }
@@ -89,39 +94,40 @@ class GroupTombstones extends AsyncComponent {
   };
 
   renderEmpty() {
-    return <div className="box empty">{t('You have no discarded issues')}</div>;
+    return (
+      <Panel>
+        <EmptyMessage>{t('You have no discarded issues')}</EmptyMessage>
+      </Panel>
+    );
   }
 
   renderBody() {
     let {orgId, projectId} = this.props;
     let {tombstones} = this.state;
 
-    return (
-      <div>
-        <div className="row" style={{paddingTop: 10}}>
-          <div className="col-md-12 discarded-groups">
-            {tombstones.length ? (
-              <ul className="group-list">
-                {tombstones.map(data => {
-                  return (
-                    <GroupTombstoneRow
-                      key={data.id}
-                      data={data}
-                      orgId={orgId}
-                      projectId={projectId}
-                      onUndiscard={this.handleUndiscard}
-                    />
-                  );
-                })}
-              </ul>
-            ) : (
-              this.renderEmpty()
-            )}
-          </div>
-        </div>
-      </div>
+    return tombstones.length ? (
+      <Panel>
+        {tombstones.map(data => {
+          return (
+            <GroupTombstoneRow
+              key={data.id}
+              data={data}
+              orgId={orgId}
+              projectId={projectId}
+              onUndiscard={this.handleUndiscard}
+            />
+          );
+        })}
+      </Panel>
+    ) : (
+      this.renderEmpty()
     );
   }
 }
 
+const StyledBox = styled(Box)`
+  flex: 1;
+  min-width: 0; /* keep child content from stretching flex item */
+`;
+
 export default GroupTombstones;
diff --git a/src/sentry/static/sentry/app/views/settings/project/projectFilters/index.jsx b/src/sentry/static/sentry/app/views/settings/project/projectFilters/index.jsx
index cdc6143583..9df1731e6a 100644
--- a/src/sentry/static/sentry/app/views/settings/project/projectFilters/index.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/projectFilters/index.jsx
@@ -37,7 +37,7 @@ class ProjectFilters extends React.Component {
           <ProjectFiltersChart params={this.props.params} />
 
           {features.has('discard-groups') && (
-            <NavTabs style={{paddingTop: '30px'}}>
+            <NavTabs underlined style={{paddingTop: '30px'}}>
               <li className={filterType === 'data-filters' ? 'active' : ''}>
                 <Link to={recreateRoute('data-filters/', {...this.props, stepBack: -1})}>
                   {t('Data Filters')}
diff --git a/src/sentry/static/sentry/less/discarded-groups.less b/src/sentry/static/sentry/less/discarded-groups.less
deleted file mode 100644
index b5ac31a2a1..0000000000
--- a/src/sentry/static/sentry/less/discarded-groups.less
+++ /dev/null
@@ -1,23 +0,0 @@
-/**
-* Discarded Groups
-* ============================================================================
-*/
-
-.discarded-groups {
-  .group-list {
-    .event-actor,
-    .event-undiscard {
-      text-align: center;
-      padding: 12px 0 8px 0;
-    }
-
-    .event-undiscard {
-      .btn:hover {
-        color: #fff;
-        background: @red;
-        border-color: @red-dark;
-        text-shadow: 0 1px 0 rgba(0, 0, 0, 0.15);
-      }
-    }
-  }
-}
diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index e97c7ba440..184ce94122 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -35,7 +35,6 @@
 @import url('./admin.less');
 @import url('./auth.less');
 @import url('./dashboard.less');
-@import url('./discarded-groups.less');
 @import url('./docs.less');
 @import url('./group-detail.less');
 @import url('./organization.less');
