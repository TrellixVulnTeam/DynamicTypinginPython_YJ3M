commit e64b775652e378bc6e8c71d1df029b4c2b23a917
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Thu Apr 26 13:31:24 2018 -0700

    feat(ui): Add "hideEmail" prop to `<UserBadge>` (#8145)

diff --git a/docs-ui/components/userBadge.stories.js b/docs-ui/components/userBadge.stories.js
index 190f966628..4dbfdf0a0c 100644
--- a/docs-ui/components/userBadge.stories.js
+++ b/docs-ui/components/userBadge.stories.js
@@ -9,9 +9,14 @@ const user = {
   email: 'chris.clark@sentry.io',
 };
 
-storiesOf('UserBadge', module).add(
-  'default',
-  withInfo('A standard two-line user badge. It contains a link to the user.')(() => (
-    <UserBadge user={user} />
-  ))
-);
+storiesOf('UserBadge', module)
+  .add(
+    'default',
+    withInfo('A standard two-line user badge. It contains a link to the user.')(() => (
+      <UserBadge user={user} />
+    ))
+  )
+  .add(
+    'hides email',
+    withInfo('Can hide the user email')(() => <UserBadge user={user} hideEmail />)
+  );
diff --git a/src/sentry/static/sentry/app/components/userBadge.jsx b/src/sentry/static/sentry/app/components/userBadge.jsx
index 7eb4bd7e72..bc8d55818a 100644
--- a/src/sentry/static/sentry/app/components/userBadge.jsx
+++ b/src/sentry/static/sentry/app/components/userBadge.jsx
@@ -13,16 +13,21 @@ const UserBadge = ({
   orgId,
   avatarSize,
   useLink,
+  hideEmail,
   ...props
 }) => {
   return (
     <StyledUserBadge {...props}>
       <StyledAvatar user={user} size={avatarSize} />
       <StyledNameAndEmail>
-        <StyledName useLink={useLink} to={`/settings/${orgId}/members/${user.id}`}>
+        <StyledName
+          useLink={useLink}
+          hideEmail={hideEmail}
+          to={`/settings/${orgId}/members/${user.id}`}
+        >
           {displayName || user.name || user.email}
         </StyledName>
-        <StyledEmail>{displayEmail || user.email}</StyledEmail>
+        {!hideEmail && <StyledEmail>{displayEmail || user.email}</StyledEmail>}
       </StyledNameAndEmail>
     </StyledUserBadge>
   );
@@ -35,10 +40,12 @@ UserBadge.propTypes = {
   user: PropTypes.object,
   orgId: PropTypes.string,
   useLink: PropTypes.bool,
+  hideEmail: PropTypes.bool,
 };
 
 UserBadge.defaultProps = {
   useLink: true,
+  hideEmail: false,
 };
 
 const StyledUserBadge = styled('div')`
@@ -60,10 +67,11 @@ const StyledEmail = styled('div')`
 `;
 
 const StyledName = styled(
-  ({useLink, ...props}) => (useLink ? <Link {...props} /> : <span {...props} />)
+  ({useLink, hideEmail, to, ...props}) =>
+    useLink ? <Link to={to} {...props} /> : <span {...props} />
 )`
   font-weight: bold;
-  margin-bottom: ${space(0.5)};
+  margin-bottom: ${p => (!p.hideEmail ? space(0.5) : 0)};
   ${overflowEllipsis};
 `;
 
diff --git a/tests/js/spec/components/userBadge.spec.jsx b/tests/js/spec/components/userBadge.spec.jsx
new file mode 100644
index 0000000000..d35ce98f4f
--- /dev/null
+++ b/tests/js/spec/components/userBadge.spec.jsx
@@ -0,0 +1,42 @@
+import React from 'react';
+import {mount, shallow} from 'enzyme';
+
+import UserBadge from 'app/components/userBadge';
+
+describe('UserBadge', function() {
+  let user = TestStubs.User();
+
+  it('renders', function() {
+    let wrapper = mount(<UserBadge user={user} />);
+
+    expect(wrapper.find('StyledUserBadge')).toHaveLength(1);
+    expect(wrapper.find('StyledName').prop('children')).toBe('Foo Bar');
+    expect(wrapper.find('StyledEmail').prop('children')).toBe('foo@example.com');
+    expect(wrapper.find('StyledName Link')).toHaveLength(1);
+  });
+
+  it('can display alternate display names/emails', function() {
+    let wrapper = shallow(
+      <UserBadge
+        user={user}
+        displayName="Other Display Name"
+        displayEmail="Other Display Email"
+      />
+    );
+
+    expect(wrapper.find('StyledName').prop('children')).toBe('Other Display Name');
+    expect(wrapper.find('StyledEmail').prop('children')).toBe('Other Display Email');
+  });
+
+  it('does not use a link for member name', function() {
+    let wrapper = mount(<UserBadge user={user} useLink={false} />);
+
+    expect(wrapper.find('StyledName Link')).toHaveLength(0);
+  });
+
+  it('can hide email address', function() {
+    let wrapper = mount(<UserBadge user={user} hideEmail />);
+
+    expect(wrapper.find('StyledEmail')).toHaveLength(0);
+  });
+});
diff --git a/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap b/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap
index a572542e65..c5f5f6ff20 100644
--- a/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap
@@ -37,6 +37,7 @@ exports[`TeamMembers render() renders 1`] = `
   >
     <UserBadge
       avatarSize={36}
+      hideEmail={false}
       orgId="org-slug"
       useLink={true}
       user={
@@ -82,6 +83,7 @@ exports[`TeamMembers render() renders 1`] = `
   >
     <UserBadge
       avatarSize={36}
+      hideEmail={false}
       orgId="org-slug"
       useLink={true}
       user={
@@ -127,6 +129,7 @@ exports[`TeamMembers render() renders 1`] = `
   >
     <UserBadge
       avatarSize={36}
+      hideEmail={false}
       orgId="org-slug"
       useLink={true}
       user={
@@ -172,6 +175,7 @@ exports[`TeamMembers render() renders 1`] = `
   >
     <UserBadge
       avatarSize={36}
+      hideEmail={false}
       orgId="org-slug"
       useLink={true}
       user={
