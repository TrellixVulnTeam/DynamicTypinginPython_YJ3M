commit 87f30db35c649fda1d8bd19fb3ce019fbed94249
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Sep 4 17:14:08 2012 -0400

    Suggest and support HTTP_USER_AGENT for passing in the client version

diff --git a/docs/developer/client/index.rst b/docs/developer/client/index.rst
index 267c7c8820..04ece02e5e 100644
--- a/docs/developer/client/index.rst
+++ b/docs/developer/client/index.rst
@@ -292,6 +292,9 @@ An authentication header is expected to be sent along with the message body, whi
     sentry_timestamp=<current timestamp>,
     sentry_key=<public api key>
 
+.. note:: You should include the client version string in the User-Agent portion of the header, and it will be used if
+          sentry_client is not sent in the auth header.
+
 .. data:: sentry_version
 
     The protocol version. This should be sent as the value '2.0'.
@@ -302,6 +305,8 @@ An authentication header is expected to be sent along with the message body, whi
 
     For example, the Python client might send this as 'raven-python/1.0'
 
+    This should be included in your User-Agent header rather than here if you're using the HTTP protocol.
+
 .. data:: sentry_timestamp
 
     The unix timestamp representing the time at which this POST request was generated.
@@ -322,6 +327,7 @@ the path is the BASE_URI/api/store/. So given the following DSN::
 The request body should then somewhat resemble the following::
 
     POST /api/store/
+    User-Agen': raven-python1.0
     X-Sentry-Auth: Sentry sentry_version=2.0, sentry_timestamp=1329096377,
         sentry_key=b70a31b3510c4cf793964a185cfe1fd0, sentry_client=raven-python/1.0
 
diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 2bb95e8659..de0bbf3271 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -116,7 +116,8 @@ def store(request, project=None):
        the user be authenticated, and a project_id be sent in the GET variables.
 
     """
-    logger.debug('Inbound %r request from %r', request.method, request.META['REMOTE_ADDR'])
+    logger.debug('Inbound %r request from %r (%s)', request.method, request.META['REMOTE_ADDR'],
+        request.META.get('HTTP_USER_AGENT'))
     client = '<unknown client>'
 
     response = HttpResponse()
@@ -128,7 +129,7 @@ def store(request, project=None):
 
             if auth_vars:
                 server_version = auth_vars.get('sentry_version', '1.0')
-                client = auth_vars.get('sentry_client')
+                client = auth_vars.get('sentry_client', request.META.get('HTTP_USER_AGENT'))
             else:
                 server_version = request.GET.get('version', '1.0')
                 client = request.META.get('HTTP_USER_AGENT', request.GET.get('client'))
