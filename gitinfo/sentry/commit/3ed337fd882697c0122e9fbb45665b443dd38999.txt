commit 3ed337fd882697c0122e9fbb45665b443dd38999
Author: Katie Lundsgaard <katie@getsentry.com>
Date:   Thu Jul 13 16:10:49 2017 -0700

    Return 404 if `GroupTombstone` does not exist

diff --git a/src/sentry/api/endpoints/group_tombstone_details.py b/src/sentry/api/endpoints/group_tombstone_details.py
index 10abf76696..2e6d0dc548 100644
--- a/src/sentry/api/endpoints/group_tombstone_details.py
+++ b/src/sentry/api/endpoints/group_tombstone_details.py
@@ -3,6 +3,7 @@ from __future__ import absolute_import
 from rest_framework.response import Response
 
 from sentry.api.bases import ProjectEndpoint
+from sentry.api.exceptions import ResourceDoesNotExist
 
 from sentry.models import (
     GroupHash, GroupTombstone,
@@ -24,6 +25,15 @@ class GroupTombstoneDetailsEndpoint(ProjectEndpoint):
         :pparam string tombstone_id: the ID of the tombstone to remove.
         :auth: required
         """
+
+        try:
+            tombstone = GroupTombstone.objects.get(
+                project_id=project.id,
+                id=tombstone_id
+            )
+        except GroupTombstone.DoesNotExist:
+            raise ResourceDoesNotExist
+
         GroupHash.objects.filter(
             project_id=project.id,
             group_tombstone_id=tombstone_id,
@@ -32,12 +42,6 @@ class GroupTombstoneDetailsEndpoint(ProjectEndpoint):
             group_tombstone_id=None,
         )
 
-        try:
-            GroupTombstone.objects.get(
-                project_id=project.id,
-                id=tombstone_id
-            ).delete()
-        except GroupTombstone.DoesNotExist:
-            pass
+        tombstone.delete()
 
         return Response(status=204)
diff --git a/tests/sentry/api/endpoints/test_group_tombstone_details.py b/tests/sentry/api/endpoints/test_group_tombstone_details.py
index 77107cda53..e183b364f7 100644
--- a/tests/sentry/api/endpoints/test_group_tombstone_details.py
+++ b/tests/sentry/api/endpoints/test_group_tombstone_details.py
@@ -101,6 +101,6 @@ class GroupTombstoneDetailsTest(APITestCase):
                        )
         response = self.client.delete(path)
 
-        assert response.status_code == 204, response
+        assert response.status_code == 404, response
         assert GroupHash.objects.filter(group_tombstone_id=tombstone.id).exists()
         assert GroupTombstone.objects.filter(project_id=self.project.id, id=tombstone.id).exists()
