commit c4c6feb0ecd69892f53182632d8bd51b76a81449
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Fri Dec 7 11:24:37 2018 -0800

    tests(events-stream): Add simple percy snapshots for stream (#10955)

diff --git a/src/sentry/static/sentry/app/components/emptyStateWarning.jsx b/src/sentry/static/sentry/app/components/emptyStateWarning.jsx
index b03aad9aa3..453cc46001 100644
--- a/src/sentry/static/sentry/app/components/emptyStateWarning.jsx
+++ b/src/sentry/static/sentry/app/components/emptyStateWarning.jsx
@@ -27,7 +27,7 @@ class EmptyStateWarning extends React.Component {
     }
 
     return (
-      <EmptyStreamWrapper className="ref-empty-state">
+      <EmptyStreamWrapper data-test-id="empty-state">
         <Icon className="icon icon-exclamation" />
         {this.props.children}
       </EmptyStreamWrapper>
diff --git a/src/sentry/static/sentry/app/views/organizationEvents/index.jsx b/src/sentry/static/sentry/app/views/organizationEvents/index.jsx
index 72c7bcb5f8..cdb40d1a24 100644
--- a/src/sentry/static/sentry/app/views/organizationEvents/index.jsx
+++ b/src/sentry/static/sentry/app/views/organizationEvents/index.jsx
@@ -213,11 +213,9 @@ class OrganizationEventsContainer extends React.Component {
       organization.projects && organization.projects.filter(({isMember}) => isMember);
 
     return (
-      <Feature features={['global-views']} renderDisabled>
-        <EventsContext.Provider
-          value={{actions: this.actions, ...this.state.queryValues}}
-        >
-          <OrganizationEventsContent>
+      <EventsContext.Provider value={{actions: this.actions, ...this.state.queryValues}}>
+        <OrganizationEventsContent>
+          <Feature features={['global-views']} renderDisabled>
             <Header>
               <HeaderItemPosition>
                 <MultipleProjectSelector
@@ -266,9 +264,9 @@ class OrganizationEventsContainer extends React.Component {
 
               {children}
             </Body>
-          </OrganizationEventsContent>
-        </EventsContext.Provider>
-      </Feature>
+          </Feature>
+        </OrganizationEventsContent>
+      </EventsContext.Provider>
     );
   }
 }
diff --git a/tests/acceptance/test_organization_events.py b/tests/acceptance/test_organization_events.py
new file mode 100644
index 0000000000..0610bf9a97
--- /dev/null
+++ b/tests/acceptance/test_organization_events.py
@@ -0,0 +1,38 @@
+from __future__ import absolute_import
+
+from sentry.testutils import AcceptanceTestCase
+
+FEATURE_NAME = 'organizations:global-views'
+
+
+class OrganizationEventsTest(AcceptanceTestCase):
+    def setUp(self):
+        super(OrganizationEventsTest, self).setUp()
+        self.user = self.create_user('foo@example.com')
+        self.org = self.create_organization(owner=None, name='Rowdy Tiger')
+        self.team = self.create_team(organization=self.org, name='Mariachi Band')
+        self.project = self.create_project(
+            organization=self.org,
+            teams=[self.team],
+            name='Bengal',
+        )
+        self.create_member(
+            user=self.user,
+            organization=self.org,
+            role='owner',
+            teams=[self.team],
+        )
+
+        self.login_as(self.user)
+        self.path = u'/organizations/{}/events/'.format(self.org.slug)
+
+    def test_no_access(self):
+        self.browser.get(self.path)
+        self.browser.wait_until_not('.loading-indicator')
+        self.browser.snapshot('global events - no access')
+
+    def test_events_empty(self):
+        with self.feature(FEATURE_NAME):
+            self.browser.get(self.path)
+            self.browser.wait_until('[data-test-id="empty-state"]')
+            self.browser.snapshot('global events - empty')
diff --git a/tests/acceptance/test_project_releases.py b/tests/acceptance/test_project_releases.py
index 67242c17e4..ffa6cbb95f 100644
--- a/tests/acceptance/test_project_releases.py
+++ b/tests/acceptance/test_project_releases.py
@@ -39,7 +39,7 @@ class ProjectReleasesTest(AcceptanceTestCase):
         self.browser.get(self.path)
         self.browser.wait_until_not('.loading')
         self.browser.wait_until('.ref-project-releases')
-        self.browser.wait_until('.ref-empty-state')
+        self.browser.wait_until('[data-test-id="empty-state"]')
         self.browser.snapshot('project releases without releases')
 
 
diff --git a/tests/js/spec/views/__snapshots__/projectDebugFiles.spec.jsx.snap b/tests/js/spec/views/__snapshots__/projectDebugFiles.spec.jsx.snap
index 1879854e15..131f16605f 100644
--- a/tests/js/spec/views/__snapshots__/projectDebugFiles.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/projectDebugFiles.spec.jsx.snap
@@ -211,10 +211,11 @@ exports[`ProjectDebugFiles renders 1`] = `
               small={false}
             >
               <EmptyStreamWrapper
-                className="ref-empty-state"
+                data-test-id="empty-state"
               >
                 <div
-                  className="ref-empty-state css-n38n5f-EmptyStreamWrapper ernlsnc0"
+                  className="css-n38n5f-EmptyStreamWrapper ernlsnc0"
+                  data-test-id="empty-state"
                 >
                   <Icon
                     className="icon icon-exclamation"
diff --git a/tests/js/spec/views/__snapshots__/projectSavedSearches.spec.jsx.snap b/tests/js/spec/views/__snapshots__/projectSavedSearches.spec.jsx.snap
index a5662924ab..09b6b36cb8 100644
--- a/tests/js/spec/views/__snapshots__/projectSavedSearches.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/projectSavedSearches.spec.jsx.snap
@@ -1027,10 +1027,11 @@ exports[`ProjectSavedSearches renders empty 1`] = `
                     small={false}
                   >
                     <EmptyStreamWrapper
-                      className="ref-empty-state"
+                      data-test-id="empty-state"
                     >
                       <div
-                        className="ref-empty-state css-n38n5f-EmptyStreamWrapper ernlsnc0"
+                        className="css-n38n5f-EmptyStreamWrapper ernlsnc0"
+                        data-test-id="empty-state"
                       >
                         <Icon
                           className="icon icon-exclamation"
