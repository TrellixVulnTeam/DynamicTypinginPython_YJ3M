commit 6afac7d0cdae855b0d6c88a8211731c774d85cfb
Author: hustcc <i@hust.cc>
Date:   Mon Jan 18 17:22:03 2016 +0800

    issue#2562, Can not select Chinese locale.

diff --git a/src/sentry/conf/locale.py b/src/sentry/conf/locale.py
index 9906210fdd..8e6af11dab 100644
--- a/src/sentry/conf/locale.py
+++ b/src/sentry/conf/locale.py
@@ -2,7 +2,14 @@ import os
 import json
 import sentry
 
+#change locale file dir name to locale code
+def dirname_to_local(dir_name):
+    if '_' in dir_name:
+        pre, post = dir_name.split('_', 1)
+        dir_name = '{}-{}'.format(pre, post.lower())
+    return dir_name
 
 with open(os.path.join(os.path.dirname(sentry.__file__),
                        'locale', 'catalogs.json'), 'r') as f:
     CATALOGS = json.load(f)['supported_locales']
+    CATALOGS = [dirname_to_local(dirname) for dirname in CATALOGS]
