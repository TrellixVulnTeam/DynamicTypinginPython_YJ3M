commit 07bcae66cd24e32deec67efa8787364f51dcf4e2
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jan 3 16:25:40 2013 -0800

    Correct formatNumber when a number is > 2 digits

diff --git a/src/sentry/static/sentry/scripts/utils.js b/src/sentry/static/sentry/scripts/utils.js
index a178591a78..79b5f3b969 100644
--- a/src/sentry/static/sentry/scripts/utils.js
+++ b/src/sentry/static/sentry/scripts/utils.js
@@ -63,7 +63,7 @@
                 o = Math.floor(number / x);
                 p = number % x;
                 if (o > 0) {
-                    if (('' + o.length) > 2 || !p)
+                    if (o / 10 > 10 || !p)
                         return '' + o + y;
                     return '' + this.floatFormat(number / x, 1) + y;
                 }
diff --git a/tests/js/spec/formatNumber.js b/tests/js/spec/formatNumber.js
index a15225d569..9124117744 100644
--- a/tests/js/spec/formatNumber.js
+++ b/tests/js/spec/formatNumber.js
@@ -11,6 +11,11 @@ describe("formatNumber", function() {
     expect(app.utils.formatNumber(5334)).toBe('5.3k');
   });
 
+  it("handles thousands", function() {
+    expect(app.utils.formatNumber(533334)).toBe('533k');
+  });
+
+
   it("doesnt format small numbers", function() {
     expect(app.utils.formatNumber(15)).toBe('15');
   });
