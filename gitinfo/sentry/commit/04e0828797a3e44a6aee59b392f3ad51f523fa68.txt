commit 04e0828797a3e44a6aee59b392f3ad51f523fa68
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Dec 26 23:37:41 2012 -0800

    Working implementation (sidebar is hidden)

diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index 33329c729e..e31727cfb1 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -1257,7 +1257,7 @@ legend {
     left: 0;
     right: 0;
     top: 0;
-    margin: 0 300px 0 0;
+    margin: 0;
     z-index: 1000000;
   }
 }
diff --git a/src/sentry/static/sentry/scripts/app.js b/src/sentry/static/sentry/scripts/app.js
index 29233e3ea5..8865183b73 100644
--- a/src/sentry/static/sentry/scripts/app.js
+++ b/src/sentry/static/sentry/scripts/app.js
@@ -173,22 +173,70 @@
             });
 
             var $event_nav = $('#event_nav');
+            var $window = $(window);
+            var $nav_links = $event_nav.find('a[href*=#]');
+            var $nav_targets = $nav_links.map(function(){
+                if (this.hash) {
+                    return $(this.hash);
+                }
+            });
             var scroll_offset = $event_nav.offset().top;
-                
-            $event_nav.scrollspy();
+            var event_nav_height = $event_nav.outerHeight();
+            var last_target;
+
+            $nav_links.click(function(e){
+                var $el = $(this);
+                var target = $(this.hash);
+
+                $el.parent().addClass('active').siblings().removeClass('active');
+
+                $('html,body').animate({
+                    scrollTop: $(target).position().top + 55
+                }, 'fast');
+
+                e.preventDefault();
+            });
 
-            $(window).resize(function(){
+            $window.resize(function(){
                 $event_nav.height($event_nav.outerHeight() + 'px');
             }).resize();
 
-            $(window).scroll(function(){
-                if ($(window).scrollTop() > scroll_offset) {
+            $window.scroll(function(){
+                // Change fixed nav if needed
+                if ($window.scrollTop() > scroll_offset) {
                     if (!$event_nav.hasClass('fixed')) {
                         $event_nav.addClass('fixed');
                     }
                 } else if ($event_nav.hasClass('fixed')) {
                     $event_nav.removeClass('fixed');
                 }
+
+                // Get container scroll position
+                var from_top = $(this).scrollTop() + event_nav_height + 20;
+               
+                // Get id of current scroll item
+                var cur = $nav_targets.map(function(){
+                    if ($(this).offset().top < from_top) {
+                        return this;
+                    }
+                });
+
+                // Get the id of the current element
+                cur = cur[cur.length - 1];
+                var target = cur && cur.length ? cur[0].id : "";
+               
+                if (!target) {
+                    target = $nav_targets[0].id;
+                }
+
+                if (last_target !== target) {
+                   last_target = target;
+
+                   // Set/remove active class
+                   $nav_links
+                     .parent().removeClass("active")
+                     .end().filter("[href=#" + target + "]").parent().addClass("active");
+                }      
             });
         }
 
diff --git a/src/sentry/templates/sentry/groups/details.html b/src/sentry/templates/sentry/groups/details.html
index 693e9cf4c0..dec4001904 100644
--- a/src/sentry/templates/sentry/groups/details.html
+++ b/src/sentry/templates/sentry/groups/details.html
@@ -6,6 +6,8 @@
 
 {% block title %}{{ group.error }} | {{ block.super }}{% endblock %}
 
+{% block bodyclass %}{% endblock %}
+
 {% block breadcrumb %}
     {{ block.super }}
     <li class="divider">/</li>
@@ -101,6 +103,16 @@
                         </a>
                     </li>
                 {% endfor %}
+                {% if json_data %}
+                    <li>
+                        <a href="{% if page != 'details' %}{% url sentry-group group.project.slug group.id %}{% endif %}#extra">{% trans "Additional Data" %}</a>
+                    </li>
+                {% endif %}
+                {% if version_data %}
+                    <li>
+                        <a href="{% if page != 'details' %}{% url sentry-group group.project.slug group.id %}{% endif %}#versions">{% trans "Versions" %}</a>
+                    </li>
+                {% endif %}
                 <li{% if page == 'tag_list' %} class="active"{% endif %}>
                     <a href="{% url sentry-group-tags group.project.slug group.id %}">{% trans "Tags" %}</a>
                 </li>
diff --git a/src/sentry/templates/sentry/partial/_event_details.html b/src/sentry/templates/sentry/partial/_event_details.html
index 206d78128b..412e15e56a 100644
--- a/src/sentry/templates/sentry/partial/_event_details.html
+++ b/src/sentry/templates/sentry/partial/_event_details.html
@@ -45,7 +45,7 @@
 {% endif %}
 
 {% if version_data %}
-    <div id="versioninfo">
+    <div id="versions">
         <div class="page-header">
             <h2>{% trans "Package Versions" %}</h2>
         </div>
