commit 6bb6322779bd69f1e3d77eb1e9e80f2bd259f593
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Aug 31 18:22:47 2010 -0700

    Fix shortening of frames data

diff --git a/sentry/manager.py b/sentry/manager.py
index cf01337f0a..255f8d8c84 100644
--- a/sentry/manager.py
+++ b/sentry/manager.py
@@ -142,13 +142,14 @@ class DBLogManager(models.Manager):
             return f
 
         def shorten(var):
-            var = to_unicode(var)
+            if not isinstance(var, basestring):
+                var = to_unicode(var)
             if len(var) > 500:
                 var = var[:500] + '...'
             return var
 
         reporter = ExceptionReporter(None, exc_type, exc_value, traceback)
-        frames = varmap(shorten, reporter.get_traceback_frames)
+        frames = varmap(shorten, reporter.get_traceback_frames())
 
         data = kwargs.pop('data', {}) or {}
         data['__sentry__'] = {
