commit 628950bec971df78f5956546047bfc647287c509
Author: Jess MacQueen <jess@getsentry.com>
Date:   Wed May 11 13:35:10 2016 -0700

    don't fetch from cache right after setting cache

diff --git a/src/sentry/models/useravatar.py b/src/sentry/models/useravatar.py
index b5ae5a8978..e94990b47b 100644
--- a/src/sentry/models/useravatar.py
+++ b/src/sentry/models/useravatar.py
@@ -64,7 +64,6 @@ class UserAvatar(Model):
                 image = image.resize((size, size))
                 image_file = StringIO()
                 image.save(image_file, 'PNG')
-                photo_file = image_file.getvalue()
-                cache.set(cache_key, photo_file)
-                photo = cache.get(cache_key)
+                photo = image_file.getvalue()
+                cache.set(cache_key, photo)
         return photo
