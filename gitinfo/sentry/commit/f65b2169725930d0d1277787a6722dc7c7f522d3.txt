commit f65b2169725930d0d1277787a6722dc7c7f522d3
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Oct 30 02:14:42 2015 -0700

    Dont allow role to be specified on member add

diff --git a/src/sentry/templates/sentry/create-organization-member.html b/src/sentry/templates/sentry/create-organization-member.html
index f157068846..134d48fb0c 100644
--- a/src/sentry/templates/sentry/create-organization-member.html
+++ b/src/sentry/templates/sentry/create-organization-member.html
@@ -21,31 +21,9 @@
     {% csrf_token %}
 
     {% for field in form %}
-      {% if field.name != "role" %}
-        {{ field|as_crispy_field }}
-      {% endif %}
+      {{ field|as_crispy_field }}
     {% endfor %}
 
-    <div class="box">
-      <div class="box-header">
-        <h3>{% trans "Role" %}</h3>
-      </div>
-      <div class="box-content with-padding">
-        <ul class="radio-inputs">
-          {% for role in role_list %}
-            <li class="radio">
-              <label>
-                <input type="radio" name="role" value="{{ role.id }}"
-                       {% if role.id == form.role.value %} checked{% endif %} />
-                {{ role.name }}
-                <div class="help-block">{{ role.desc|linebreaksbr }}</div>
-              </label>
-            </li>
-          {% endfor %}
-        </ul>
-      </div>
-    </div>
-
     <div class="form-actions">
       <button type="submit" class="btn btn-primary">{% trans "Add Member" %}</button>
     </div>
diff --git a/src/sentry/web/forms/add_organization_member.py b/src/sentry/web/forms/add_organization_member.py
index e75be530aa..bc95dc8b3a 100644
--- a/src/sentry/web/forms/add_organization_member.py
+++ b/src/sentry/web/forms/add_organization_member.py
@@ -13,7 +13,7 @@ class AddOrganizationMemberForm(forms.ModelForm):
     user = UserField()
 
     class Meta:
-        fields = ('user', 'role')
+        fields = ('user',)
         model = OrganizationMember
 
     def save(self, actor, organization, ip_address):
diff --git a/src/sentry/web/forms/invite_organization_member.py b/src/sentry/web/forms/invite_organization_member.py
index fdd476f2d4..c85b5d64de 100644
--- a/src/sentry/web/forms/invite_organization_member.py
+++ b/src/sentry/web/forms/invite_organization_member.py
@@ -13,7 +13,7 @@ class InviteOrganizationMemberForm(forms.ModelForm):
     email = forms.EmailField()
 
     class Meta:
-        fields = ('email', 'role')
+        fields = ('email',)
         model = OrganizationMember
 
     def save(self, actor, organization, ip_address):
diff --git a/tests/sentry/web/frontend/test_create_organization_member.py b/tests/sentry/web/frontend/test_create_organization_member.py
index a978132041..af2076e2f6 100644
--- a/tests/sentry/web/frontend/test_create_organization_member.py
+++ b/tests/sentry/web/frontend/test_create_organization_member.py
@@ -40,7 +40,6 @@ class CreateOrganizationMemberTest(TestCase):
 
         with self.settings(SENTRY_ENABLE_INVITES=True):
             resp = self.client.post(path, {
-                'role': 'admin',
                 'email': 'foo@example.com',
             })
         assert resp.status_code == 302
@@ -50,7 +49,6 @@ class CreateOrganizationMemberTest(TestCase):
             email='foo@example.com',
         )
 
-        assert member.role == 'admin'
         assert member.user is None
 
         redirect_uri = reverse('sentry-organization-member-settings', args=[organization.slug, member.id])
@@ -75,7 +73,6 @@ class CreateOrganizationMemberTest(TestCase):
 
         with self.settings(SENTRY_ENABLE_INVITES=True):
             resp = self.client.post(path, {
-                'role': 'member',
                 'email': 'foo@example.com',
             })
 
@@ -83,7 +80,6 @@ class CreateOrganizationMemberTest(TestCase):
 
         member = OrganizationMember.objects.get(id=member.id)
 
-        assert member.role == 'member'
         assert member.email is None
 
         redirect_uri = reverse('sentry-organization-member-settings', args=[organization.slug, member.id])
@@ -98,7 +94,6 @@ class CreateOrganizationMemberTest(TestCase):
 
         with self.settings(SENTRY_ENABLE_INVITES=False):
             resp = self.client.post(path, {
-                'role': 'member',
                 'user': 'foo@example.com',
             })
         assert resp.status_code == 302
@@ -108,7 +103,6 @@ class CreateOrganizationMemberTest(TestCase):
             user=user,
         )
 
-        assert member.role == 'member'
         assert member.email is None
 
         redirect_uri = reverse('sentry-organization-member-settings', args=[organization.slug, member.id])
@@ -121,7 +115,6 @@ class CreateOrganizationMemberTest(TestCase):
 
         with self.settings(SENTRY_ENABLE_INVITES=False):
             resp = self.client.post(path, {
-                'role': 'member',
                 'user': 'bar@example.com',
             })
 
