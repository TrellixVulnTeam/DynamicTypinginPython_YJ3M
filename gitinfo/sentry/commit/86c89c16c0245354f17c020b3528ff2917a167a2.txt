commit 86c89c16c0245354f17c020b3528ff2917a167a2
Author: ted kaemming <t.kaemming+github@gmail.com>
Date:   Fri Aug 19 10:53:03 2016 -0700

    Add TSDB counter for Release instances. (#3974)

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index 40de289e09..9388e293d4 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -588,10 +588,15 @@ class EventManager(object):
                 datetime=date,
             )
 
-        tsdb.incr_multi([
+        counters = [
             (tsdb.models.group, group.id),
             (tsdb.models.project, project.id),
-        ], timestamp=event.datetime)
+        ]
+
+        if release:
+            counters.append((tsdb.models.release, release.id))
+
+        tsdb.incr_multi(counters, timestamp=event.datetime)
 
         frequencies = [
             # (tsdb.models.frequent_projects_by_organization, {
@@ -610,6 +615,7 @@ class EventManager(object):
                 },
             })
         ]
+
         if release:
             frequencies.append(
                 (tsdb.models.frequent_releases_by_group, {
diff --git a/src/sentry/tsdb/base.py b/src/sentry/tsdb/base.py
index beb38f2fbb..570b0f5e54 100644
--- a/src/sentry/tsdb/base.py
+++ b/src/sentry/tsdb/base.py
@@ -31,6 +31,7 @@ class TSDBModel(Enum):
     group = 4
     group_tag_key = 5
     group_tag_value = 6
+    release = 7
 
     # the number of events sent to the server
     project_total_received = 100
