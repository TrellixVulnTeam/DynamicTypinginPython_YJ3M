commit 2941a9f25fe77e5257488e88e517b9e5771658d2
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Fri Jan 5 10:14:07 2018 -0800

    fix(ui): Fix Org Members nav perms (member:read) (#6871)
    
    Fixes JAVASCRIPT-2T1

diff --git a/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx b/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx
index 096691f8c4..92a06de86b 100644
--- a/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx
@@ -23,7 +23,9 @@ RouterOrBrowserLink.propTypes = {
 };
 
 const OrgSettingsMenu = ({access, org, features}) => {
-  if (!access.has('org:read')) return null;
+  // Everything requires `org:write` or more permission except
+  // "Members" which requires `member:read`
+  if (!access.has('org:write') && !access.has('member:read')) return null;
 
   let hasNewSettings = features.has('new-settings');
   let pathPrefix = `${hasNewSettings
@@ -34,17 +36,18 @@ const OrgSettingsMenu = ({access, org, features}) => {
     <div>
       <h6 className="nav-header with-divider">{t('Manage')}</h6>
       <ul className="nav nav-stacked">
-        {access.has('org:read') && (
-          <ListLink to={`${pathPrefix}/members/`}>
-            {t('Members')}&nbsp;
-            {access.has('org:write') &&
-              org.pendingAccessRequests > 0 && (
-                <span className="badge" style={{marginLeft: 5}}>
-                  {org.pendingAccessRequests}
-                </span>
-              )}
-          </ListLink>
-        )}
+        {access.has('org:read') &&
+          access.has('member:read') && (
+            <ListLink to={`${pathPrefix}/members/`}>
+              {t('Members')}&nbsp;
+              {access.has('org:write') &&
+                org.pendingAccessRequests > 0 && (
+                  <span className="badge" style={{marginLeft: 5}}>
+                    {org.pendingAccessRequests}
+                  </span>
+                )}
+            </ListLink>
+          )}
         {features.has('sso') &&
           access.has('org:admin') && (
             <RouterOrBrowserLink
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsNavigation.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsNavigation.jsx
index 6f144e0a3c..e839e9d57e 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsNavigation.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsNavigation.jsx
@@ -26,7 +26,11 @@ class SettingsNavigation extends React.Component {
         {navWithHooks.map(config => (
           <SettingsNavigationGroup key={config.name} {...otherProps} {...config} />
         ))}
-        {hooks.map((Hook, i) => Hook)}
+        {hooks.map((Hook, i) =>
+          React.cloneElement(Hook, {
+            key: `hook-${i}`,
+          })
+        )}
       </Box>
     );
   }
diff --git a/src/sentry/static/sentry/app/views/settings/organization/navigationConfiguration.jsx b/src/sentry/static/sentry/app/views/settings/organization/navigationConfiguration.jsx
index ebab23a863..733f949b1a 100644
--- a/src/sentry/static/sentry/app/views/settings/organization/navigationConfiguration.jsx
+++ b/src/sentry/static/sentry/app/views/settings/organization/navigationConfiguration.jsx
@@ -30,7 +30,7 @@ const organizationNavigation = [
 
           return `${organization.pendingAccessRequests}`;
         },
-        show: ({access}) => access.has('org:read'),
+        show: ({access}) => access.has('member:read'),
       },
       {
         path: `${pathPrefix}/auth/`,
