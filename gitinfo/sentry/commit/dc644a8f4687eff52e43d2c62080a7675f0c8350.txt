commit dc644a8f4687eff52e43d2c62080a7675f0c8350
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jan 27 12:43:13 2015 -0800

    Minor perf improvements to store API

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 8f1d740f4d..1ef2f6881c 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -315,7 +315,8 @@ class StoreView(APIView):
         event_received.send_robust(ip=request.META['REMOTE_ADDR'], sender=type(self))
 
         # TODO: improve this API (e.g. make RateLimit act on __ne__)
-        rate_limit = safe_execute(app.quotas.is_rate_limited, project=project)
+        rate_limit = safe_execute(app.quotas.is_rate_limited, project=project,
+                                  _with_transaction=False)
         if isinstance(rate_limit, bool):
             rate_limit = RateLimit(is_limited=rate_limit, retry_after=None)
 
@@ -333,7 +334,8 @@ class StoreView(APIView):
                 (app.tsdb.models.organization_total_received, project.organization_id),
             ])
 
-        result = plugins.first('has_perm', request.user, 'create_event', project)
+        result = plugins.first('has_perm', request.user, 'create_event', project,
+                               version=1)
         if result is False:
             raise APIForbidden('Creation of this event was blocked')
 
