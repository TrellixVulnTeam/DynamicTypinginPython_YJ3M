commit 123ec879fd2fa3305985a4ba539b35957046f374
Author: Jan Michael Auer <jan.auer@sentry.io>
Date:   Mon Jun 3 11:06:55 2019 +0200

    feat(settings): Add setting for builtin DIF sources (#13493)
    
    Moves builtin DIF sources for native symbolication to
    settings so that they can be overridden.

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 5e5f06bf9d..1f1f419372 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -1571,6 +1571,115 @@ SENTRY_MINIDUMP_CACHE = False
 # The location for cached minidumps
 SENTRY_MINIDUMP_PATH = '/tmp/minidump'
 
+# Internal sources for debug information files
+SENTRY_BUILTIN_SOURCES = {
+    'microsoft': {
+        'type': 'http',
+        'id': 'sentry:microsoft',
+        'name': 'Microsoft',
+        'layout': {'type': 'symstore'},
+        'filters': {
+            'filetypes': ['pdb', 'pe'],
+            'path_patterns': ['?:/windows/**']
+        },
+        'url': 'https://msdl.microsoft.com/download/symbols/',
+        'is_public': True,
+    },
+    'citrix': {
+        'type': 'http',
+        'id': 'sentry:citrix',
+        'name': 'Citrix',
+        'layout': {'type': 'symstore'},
+        'filters': {
+            'filetypes': ['pdb', 'pe']
+        },
+        'url': 'http://ctxsym.citrix.com/symbols/',
+        'is_public': True,
+    },
+    'intel': {
+        'type': 'http',
+        'id': 'sentry:intel',
+        'name': 'Intel',
+        'layout': {'type': 'symstore'},
+        'filters': {
+            'filetypes': ['pdb', 'pe']
+        },
+        'url': 'https://software.intel.com/sites/downloads/symbols/',
+        'is_public': True,
+    },
+    'amd': {
+        'type': 'http',
+        'id': 'sentry:amd',
+        'name': 'AMD',
+        'layout': {'type': 'symstore'},
+        'filters': {
+            'filetypes': ['pdb', 'pe']
+        },
+        'url': 'https://download.amd.com/dir/bin/',
+        'is_public': True,
+    },
+    'nvidia': {
+        'type': 'http',
+        'id': 'sentry:nvidia',
+        'name': 'NVIDIA',
+        'layout': {'type': 'symstore'},
+        'filters': {
+            'filetypes': ['pdb', 'pe']
+        },
+        'url': 'https://driver-symbols.nvidia.com/',
+        'is_public': True,
+    },
+    'chromium': {
+        'type': 'http',
+        'id': 'sentry:chromium',
+        'name': 'Chromium',
+        'layout': {'type': 'symstore'},
+        'filters': {
+            'filetypes': ['pdb', 'pe']
+        },
+        'url': 'https://chromium-browser-symsrv.commondatastorage.googleapis.com/',
+        'is_public': True,
+    },
+    'unity': {
+        'type': 'http',
+        'id': 'sentry:unity',
+        'name': 'Unity',
+        'layout': {'type': 'symstore'},
+        'filters': {
+            'filetypes': ['pdb', 'pe']
+        },
+        'url': 'https://symbolserver.unity3d.com/',
+        'is_public': True,
+    },
+    'mozilla': {
+        'type': 'http',
+        'id': 'sentry:mozilla',
+        'name': 'Mozilla',
+        'layout': {'type': 'symstore'},
+        'url': 'https://symbols.mozilla.org/',
+        'is_public': True,
+    },
+    'autodesk': {
+        'type': 'http',
+        'id': 'sentry:autodesk',
+        'name': 'Autodesk',
+        'layout': {'type': 'symstore'},
+        'url': 'http://symbols.autodesk.com/',
+        'is_public': True,
+    },
+    'electron': {
+        'type': 'http',
+        'id': 'sentry:electron',
+        'name': 'Electron',
+        'layout': {'type': 'native'},
+        'url': 'https://electron-symbols.githubapp.com/',
+        'filters': {
+            'filetypes': ['pdb', 'breakpad'],
+        },
+        'is_public': True,
+    }
+}
+
 # Relay
 # List of PKs whitelisted by Sentry.  All relays here are always
 # registered as internal relays.
diff --git a/src/sentry/lang/native/symbolicator.py b/src/sentry/lang/native/symbolicator.py
index 337d32c35e..02f0b764c4 100644
--- a/src/sentry/lang/native/symbolicator.py
+++ b/src/sentry/lang/native/symbolicator.py
@@ -6,6 +6,7 @@ import logging
 import six
 import time
 
+from django.conf import settings
 from django.core.urlresolvers import reverse
 
 from requests.exceptions import RequestException
@@ -29,104 +30,6 @@ SYMBOLICATOR_TIMEOUT = 5
 logger = logging.getLogger(__name__)
 
 
-BUILTIN_SOURCES = {
-    'microsoft': {
-        'type': 'http',
-        'id': 'sentry:microsoft',
-        'layout': {'type': 'symstore'},
-        'filters': {
-            'filetypes': ['pdb', 'pe'],
-            'path_patterns': ['?:/windows/**']
-        },
-        'url': 'https://msdl.microsoft.com/download/symbols/',
-        'is_public': True,
-    },
-    'citrix': {
-        'type': 'http',
-        'id': 'sentry:citrix',
-        'layout': {'type': 'symstore'},
-        'filters': {
-            'filetypes': ['pdb', 'pe']
-        },
-        'url': 'http://ctxsym.citrix.com/symbols/',
-        'is_public': True,
-    },
-    'intel': {
-        'type': 'http',
-        'id': 'sentry:intel',
-        'layout': {'type': 'symstore'},
-        'filters': {
-            'filetypes': ['pdb', 'pe']
-        },
-        'url': 'https://software.intel.com/sites/downloads/symbols/',
-        'is_public': True,
-    },
-    'amd': {
-        'type': 'http',
-        'id': 'sentry:amd',
-        'layout': {'type': 'symstore'},
-        'filters': {
-            'filetypes': ['pdb', 'pe']
-        },
-        'url': 'https://download.amd.com/dir/bin/',
-        'is_public': True,
-    },
-    'nvidia': {
-        'type': 'http',
-        'id': 'sentry:nvidia',
-        'layout': {'type': 'symstore'},
-        'filters': {
-            'filetypes': ['pdb', 'pe']
-        },
-        'url': 'https://driver-symbols.nvidia.com/',
-        'is_public': True,
-    },
-    'chromium': {
-        'type': 'http',
-        'id': 'sentry:chromium',
-        'layout': {'type': 'symstore'},
-        'filters': {
-            'filetypes': ['pdb', 'pe']
-        },
-        'url': 'https://chromium-browser-symsrv.commondatastorage.googleapis.com/',
-        'is_public': True,
-    },
-    'unity': {
-        'type': 'http',
-        'id': 'sentry:unity',
-        'layout': {'type': 'symstore'},
-        'filters': {
-            'filetypes': ['pdb', 'pe']
-        },
-        'url': 'https://symbolserver.unity3d.com/',
-        'is_public': True,
-    },
-    'mozilla': {
-        'type': 'http',
-        'id': 'sentry:mozilla',
-        'layout': {'type': 'symstore'},
-        'url': 'https://symbols.mozilla.org/',
-        'is_public': True,
-    },
-    'autodesk': {
-        'type': 'http',
-        'id': 'sentry:autodesk',
-        'layout': {'type': 'symstore'},
-        'url': 'http://symbols.autodesk.com/',
-        'is_public': True,
-    },
-    'electron': {
-        'type': 'http',
-        'id': 'sentry:electron',
-        'layout': {'type': 'native'},
-        'url': 'https://electron-symbols.githubapp.com/',
-        'filters': {
-            'filetypes': ['pdb', 'breakpad'],
-        },
-        'is_public': True,
-    }
-}
-
 VALID_LAYOUTS = (
     'native',
     'symstore',
@@ -382,7 +285,7 @@ def get_sources_for_project(project):
     # Add builtin sources last to ensure that custom sources have precedence
     # over our defaults.
     builtin_sources = project.get_option('sentry:builtin_symbol_sources') or []
-    for key, source in six.iteritems(BUILTIN_SOURCES):
+    for key, source in six.iteritems(settings.SENTRY_BUILTIN_SOURCES):
         if key in builtin_sources:
             sources.append(source)
 
