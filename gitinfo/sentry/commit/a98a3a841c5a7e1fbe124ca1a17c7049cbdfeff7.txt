commit a98a3a841c5a7e1fbe124ca1a17c7049cbdfeff7
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Fri Apr 19 13:44:09 2019 -0700

    fix: Prevent double loading of organization details endpoint (#12818)

diff --git a/src/sentry/static/sentry/app/views/organizationContext.jsx b/src/sentry/static/sentry/app/views/organizationContext.jsx
index 266f400ae7..606ad52958 100644
--- a/src/sentry/static/sentry/app/views/organizationContext.jsx
+++ b/src/sentry/static/sentry/app/views/organizationContext.jsx
@@ -61,7 +61,7 @@ const OrganizationContext = createReactClass({
     };
   },
 
-  componentWillMount() {
+  componentDidMount() {
     this.fetchData();
   },
 
@@ -71,9 +71,13 @@ const OrganizationContext = createReactClass({
       this.props.params.orgId &&
       prevProps.params.orgId !== this.props.params.orgId;
 
+    const organizationLoadingChanged =
+      prevProps.organizationsLoading !== this.props.organizationsLoading &&
+      this.props.organizationsLoading === false;
+
     if (
       hasOrgIdAndChanged ||
-      prevProps.organizationsLoading !== this.props.organizationsLoading ||
+      organizationLoadingChanged ||
       (this.props.location.state === 'refresh' && prevProps.location.state !== 'refresh')
     ) {
       this.remountComponent();
diff --git a/tests/js/spec/views/organizationContext.spec.jsx b/tests/js/spec/views/organizationContext.spec.jsx
index 7cb76593c4..0aa0a0a586 100644
--- a/tests/js/spec/views/organizationContext.spec.jsx
+++ b/tests/js/spec/views/organizationContext.spec.jsx
@@ -160,7 +160,7 @@ describe('OrganizationContext', function() {
 
     wrapper = createWrapper({
       useLastOrganization: true,
-      params: {},
+      params: {orgId: 'foo'},
       organizationsLoading: true,
       organizations: [],
     });
