commit 9fca64c70500f0218e4e0bc97a099efb480b2b1c
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Nov 24 15:49:15 2015 -0800

    Move acting user credentials into /auth/

diff --git a/src/sentry/api/endpoints/auth_index.py b/src/sentry/api/endpoints/auth_index.py
index 44177175ad..1fd9255d38 100644
--- a/src/sentry/api/endpoints/auth_index.py
+++ b/src/sentry/api/endpoints/auth_index.py
@@ -4,9 +4,9 @@ from django.contrib.auth import login, logout
 from django.contrib.auth.models import AnonymousUser
 from rest_framework.response import Response
 
-from sentry.api import client
 from sentry.api.authentication import QuietBasicAuthentication
 from sentry.api.base import Endpoint
+from sentry.api.serializers import serialize
 
 
 class AuthIndexEndpoint(Endpoint):
@@ -26,6 +26,14 @@ class AuthIndexEndpoint(Endpoint):
     # this time.
     # doc_section = DocSection.ACCOUNTS
 
+    def get(self, request):
+        if not request.user.is_authenticated():
+            return Response(status=400)
+
+        data = serialize(request.user, request.user)
+        data['isSuperuser'] = request.is_superuser()
+        return Response(data)
+
     def post(self, request):
         """
         Authenticate a User
@@ -48,7 +56,7 @@ class AuthIndexEndpoint(Endpoint):
         # Must use the real request object that Django knows about
         login(request._request, request.user)
 
-        return client.get('/users/me/', request=request)
+        return self.get(request)
 
     def delete(self, request, *args, **kwargs):
         """
diff --git a/src/sentry/api/endpoints/user_details.py b/src/sentry/api/endpoints/user_details.py
index b7c90b96d4..a2b9afdd0e 100644
--- a/src/sentry/api/endpoints/user_details.py
+++ b/src/sentry/api/endpoints/user_details.py
@@ -20,7 +20,6 @@ class UserSerializer(serializers.ModelSerializer):
 class UserDetailsEndpoint(UserEndpoint):
     def get(self, request, user):
         data = serialize(user, request.user)
-        data['isSuperuser'] = user == request.user and request.is_superuser()
         return Response(data)
 
     @sudo_required
