commit 18febe7413b665e99a734b76cb098757f889700f
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Aug 13 18:19:02 2015 -0700

    Improve filename handling on frames

diff --git a/src/sentry/interfaces/stacktrace.py b/src/sentry/interfaces/stacktrace.py
index 5d34901fa0..ae15b055f9 100644
--- a/src/sentry/interfaces/stacktrace.py
+++ b/src/sentry/interfaces/stacktrace.py
@@ -83,7 +83,7 @@ def is_newest_frame_first(event):
 
 
 def is_url(filename):
-    return '://' in filename
+    return filename.startswith(('file:', 'http:', 'https:'))
 
 
 def remove_function_outliers(function):
@@ -143,13 +143,13 @@ class Frame(Interface):
             abs_path = filename
 
         if not filename:
+            if abs_path and is_url(abs_path):
+                urlparts = urlparse(abs_path)
+                if urlparts.path:
+                    filename = urlparts.path
+        else:
             filename = abs_path
 
-        if abs_path and is_url(abs_path):
-            urlparts = urlparse(abs_path)
-            if urlparts.path:
-                filename = urlparts.path
-
         assert filename or data.get('function') or data.get('module')
 
         context_locals = data.get('vars') or {}
