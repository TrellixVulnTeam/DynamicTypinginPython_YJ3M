commit 115a3e61ea71c110446fd900033667f74bb229c4
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Nov 30 09:55:05 2014 -0800

    Add link to access group migration on home

diff --git a/src/sentry/templates/sentry/bases/organization.html b/src/sentry/templates/sentry/bases/organization.html
index 1e59073cd9..437f67b725 100644
--- a/src/sentry/templates/sentry/bases/organization.html
+++ b/src/sentry/templates/sentry/bases/organization.html
@@ -2,6 +2,7 @@
 
 {% load crispy_forms_tags %}
 {% load i18n %}
+{% load sentry_helpers %}
 
 {% block title %}{% trans "Organization Settings" %} | {{ block.super }}{% endblock %}
 
@@ -33,6 +34,12 @@
         </a>
       </li>
     </ul>
+
+    {% if request.user|needs_access_group_migration:organization %}
+      <div class="alert alert-block alert-info">
+        <p>You have access groups that need to be migrated into the new organization structure. <a href="{% url 'sentry-organization-access-group-migration' organization.id %}">Get Started</a></p>
+      </div>
+    {% endif %}
     {% block inner %}{% endblock %}
   </section>
 {% endblock %}
diff --git a/src/sentry/templatetags/sentry_helpers.py b/src/sentry/templatetags/sentry_helpers.py
index 4099b80ec6..95e59058a3 100644
--- a/src/sentry/templatetags/sentry_helpers.py
+++ b/src/sentry/templatetags/sentry_helpers.py
@@ -500,3 +500,16 @@ def localized_datetime(context, dt, format='DATETIME_FORMAT'):
 @register.filter
 def list_organizations(user):
     return Organization.objects.get_for_user(user)
+
+
+@register.filter
+def needs_access_group_migration(user, organization):
+    from sentry.models import AccessGroup, OrganizationMember, OrganizationMemberType
+
+    return OrganizationMember.objects.filter(
+        user=user,
+        organization=organization,
+        type=OrganizationMemberType.ADMIN,
+    ).exists() and AccessGroup.objects.filter(
+        team__organization=organization
+    ).exists()
