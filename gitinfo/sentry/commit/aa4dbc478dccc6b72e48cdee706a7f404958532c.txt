commit aa4dbc478dccc6b72e48cdee706a7f404958532c
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jun 4 21:56:58 2014 -0700

    Remove JSON event list

diff --git a/src/sentry/constants.py b/src/sentry/constants.py
index 73cc43c59c..23185f4e1e 100644
--- a/src/sentry/constants.py
+++ b/src/sentry/constants.py
@@ -158,9 +158,6 @@ DEFAULT_LOGGER_NAME = 'root'
 DEFAULT_ALERT_PROJECT_THRESHOLD = (500, 25)  # 500%, 25 events
 DEFAULT_ALERT_GROUP_THRESHOLD = (1000, 25)  # 1000%, 25 events
 
-# The maximum number of events which can be requested as JSON
-MAX_JSON_RESULTS = 1000
-
 # Default paginator value
 EVENTS_PER_PAGE = 15
 
diff --git a/src/sentry/templates/sentry/groups/details.html b/src/sentry/templates/sentry/groups/details.html
index 9282502ec0..a602d946c4 100644
--- a/src/sentry/templates/sentry/groups/details.html
+++ b/src/sentry/templates/sentry/groups/details.html
@@ -141,10 +141,9 @@
                 <li><a href="{{ link }}">{{ label }}</a></li>
             {% endfor %}
         {% endif %}
-        <li><a {% ifequal page 'event_list' %}{% if event %}
+        <li><a {% if event.id %}
         href="{% url 'sentry-group-event-json' group.team.slug project.slug group.id event.id %}"{% else %}
-        href="{% url 'sentry-group-event-json' group.team.slug project.slug group.id "latest" %}"{% endif %}{% else %}
-        href="{% url 'sentry-group-events-json' group.team.slug project.slug group.id %}"{% endifequal %}
+        href="{% url 'sentry-group-event-json' group.team.slug project.slug group.id 'latest' %}"{% endif %}
         >{% trans "Raw JSON Data" %}</a></li>
         {% if can_admin_event %}
             <li><a href="{% url 'sentry-api-remove-group' group.team.slug project.slug group.id %}"
diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index 0d446c831a..3df255087e 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -21,8 +21,7 @@ from django.utils import timezone
 
 from sentry import app
 from sentry.constants import (
-    SORT_OPTIONS, MEMBER_USER, MAX_JSON_RESULTS, DEFAULT_SORT_OPTION,
-    EVENTS_PER_PAGE
+    SORT_OPTIONS, MEMBER_USER, DEFAULT_SORT_OPTION, EVENTS_PER_PAGE
 )
 from sentry.db.models import create_or_update
 from sentry.models import (
@@ -416,25 +415,6 @@ def group_event_list(request, team, project, group):
     }, request)
 
 
-@has_access(MEMBER_USER)
-def group_event_list_json(request, team, project, group_id):
-    group = get_object_or_404(Group, id=group_id, project=project)
-
-    limit = request.GET.get('limit', MAX_JSON_RESULTS)
-    try:
-        limit = int(limit)
-    except ValueError:
-        return HttpResponse('non numeric limit', status=400, mimetype='text/plain')
-    if limit > MAX_JSON_RESULTS:
-        return HttpResponse("too many objects requested", mimetype='text/plain', status=400)
-
-    events = group.event_set.order_by('-id')[:limit]
-
-    Event.objects.bind_nodes(events, 'data')
-
-    return HttpResponse(json.dumps([event.as_dict() for event in events]), mimetype='application/json')
-
-
 @has_access(MEMBER_USER)
 def group_event_details_json(request, team, project, group_id, event_id_or_latest):
     group = get_object_or_404(Group, pk=group_id, project=project)
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 5b7232a9eb..32c4b285e5 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -331,8 +331,6 @@ urlpatterns += patterns('',
         name='sentry-group'),
     url(r'^(?P<team_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/events/$', groups.group_event_list,
         name='sentry-group-events'),
-    url(r'^(?P<team_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/events/json/$', groups.group_event_list_json,
-        name='sentry-group-events-json'),
     url(r'^(?P<team_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/events/(?P<event_id>\d+)/$', groups.group,
         name='sentry-group-event'),
     url(r'^(?P<team_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/events/(?P<event_id>\d+)/replay/$', events.replay_event,
diff --git a/tests/sentry/web/frontend/groups/tests.py b/tests/sentry/web/frontend/groups/tests.py
index ea8ceed87b..240c12dedd 100644
--- a/tests/sentry/web/frontend/groups/tests.py
+++ b/tests/sentry/web/frontend/groups/tests.py
@@ -10,7 +10,6 @@ from django.utils import timezone
 from exam import before, fixture
 
 from sentry.models import GroupSeen, Group
-from sentry.constants import MAX_JSON_RESULTS
 from sentry.testutils import TestCase
 
 
@@ -183,37 +182,6 @@ class GroupEventDetailsTest(TestCase):
         assert resp.context['event'] == self.event
 
 
-class GroupEventListJsonTest(TestCase):
-    @fixture
-    def path(self):
-        return reverse('sentry-group-events-json', kwargs={
-            'team_slug': self.team.slug,
-            'project_id': self.project.slug,
-            'group_id': self.group.id,
-        })
-
-    def test_does_render(self):
-        self.login()
-
-        event = self.create_event(
-            event_id='a' * 32, datetime=timezone.now() - timedelta(minutes=1))
-        event2 = self.create_event(
-            event_id='b' * 32, datetime=timezone.now())
-
-        resp = self.client.get(self.path)
-        assert resp.status_code == 200
-        assert resp['Content-Type'] == 'application/json'
-        data = json.loads(resp.content)
-        assert len(data) == 2
-        assert data[0]['id'] == str(event2.event_id)
-        assert data[1]['id'] == str(event.event_id)
-
-    def test_does_not_allow_beyond_limit(self):
-        self.login()
-        resp = self.client.get(self.path, {'limit': MAX_JSON_RESULTS + 1})
-        assert resp.status_code == 400
-
-
 class GroupEventJsonTest(TestCase):
     @fixture
     def path(self):
