commit a66bc1b6befc950d3ff146923e2a281df71cf66d
Author: James Cunningham <cunninghamjt09@gmail.com>
Date:   Thu Oct 10 18:11:25 2019 -0700

    perf(db): Explicitly rebind Organization alongside Project. (#15041)
    
    * perf(db): Explicitly rebind Organization alongside Project.
    
    * switch to explicitly binding on cache property

diff --git a/src/sentry/tasks/post_process.py b/src/sentry/tasks/post_process.py
index 4cf0c511cc..360bcdada2 100644
--- a/src/sentry/tasks/post_process.py
+++ b/src/sentry/tasks/post_process.py
@@ -132,7 +132,7 @@ def post_process_group(event, is_new, is_regression, is_new_group_environment, *
         # NOTE: we must pass through the full Event object, and not an
         # event_id since the Event object may not actually have been stored
         # in the database due to sampling.
-        from sentry.models import Project
+        from sentry.models import Project, Organization
         from sentry.models.group import get_group_with_redirect
         from sentry.rules.processor import RuleProcessor
         from sentry.tasks.servicehooks import process_service_hook
@@ -150,9 +150,12 @@ def post_process_group(event, is_new, is_regression, is_new_group_environment, *
         with configure_scope() as scope:
             scope.set_tag("project", event.project_id)
 
-        # Re-bind Project since we're pickling the whole Event object
-        # which may contain a stale Project.
+        # Re-bind Project and Org since we're pickling the whole Event object
+        # which may contain stale parent models.
         event.project = Project.objects.get_from_cache(id=event.project_id)
+        event.project._organization_cache = Organization.objects.get_from_cache(
+            id=event.project.organization_id
+        )
 
         _capture_stats(event, is_new)
 
@@ -195,10 +198,7 @@ def post_process_group(event, is_new, is_regression, is_new_group_environment, *
 
             for plugin in plugins.for_project(event.project):
                 plugin_post_process_group(
-                    plugin_slug=plugin.slug,
-                    event=event,
-                    is_new=is_new,
-                    is_regresion=is_regression,
+                    plugin_slug=plugin.slug, event=event, is_new=is_new, is_regresion=is_regression
                 )
 
         event_processed.send_robust(
