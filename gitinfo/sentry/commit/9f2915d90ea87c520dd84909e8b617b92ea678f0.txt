commit 9f2915d90ea87c520dd84909e8b617b92ea678f0
Author: Jess MacQueen <macqueen@users.noreply.github.com>
Date:   Mon Aug 27 13:30:11 2018 -0700

    fix(jira): Pass integration id instead of installation object to sync task (#9488)

diff --git a/src/sentry/integrations/jira/installed.py b/src/sentry/integrations/jira/installed.py
index 3d0c0c648e..d0a38b69d0 100644
--- a/src/sentry/integrations/jira/installed.py
+++ b/src/sentry/integrations/jira/installed.py
@@ -26,6 +26,9 @@ class JiraInstalledEndpoint(Endpoint):
         # Sync integration metadata from Jira. This msut be executed *after*
         # the integration has been isntalled on Jira as the access tokens will
         # not work until then.
-        sync_metadata.apply_async([integration.get_installation(None)], countdown=10)
+        sync_metadata.apply_async(
+            kwargs={'integration_id': integration.id},
+            countdown=10,
+        )
 
         return self.respond()
diff --git a/src/sentry/tasks/integrations.py b/src/sentry/tasks/integrations.py
index 9f61a81dee..2d5c39767b 100644
--- a/src/sentry/tasks/integrations.py
+++ b/src/sentry/tasks/integrations.py
@@ -38,8 +38,10 @@ def post_comment(external_issue_id, data, **kwargs):
     default_retry_delay=20,
     max_retries=5
 )
-@retry(on=(IntegrationError,))
-def sync_metadata(installation):
+@retry(on=(IntegrationError,), exclude=(Integration.DoesNotExist,))
+def sync_metadata(integration_id, **kwargs):
+    integration = Integration.objects.get(id=integration_id)
+    installation = integration.get_installation(None)
     installation.sync_metadata()
 
 
