commit 9720dab673ca76e98f2fa7d97afbb0eb7f071226
Author: Matej Minar <matej.minar@sentry.io>
Date:   Wed May 13 21:09:27 2020 +0200

    feat(ui): Add open in issues button to release detail page (#18777)
    
    This PR adds "Open in Issues" button to release detail page.

diff --git a/src/sentry/static/sentry/app/components/charts/styles.tsx b/src/sentry/static/sentry/app/components/charts/styles.tsx
index 5fa0ae4366..7f1cbbf193 100644
--- a/src/sentry/static/sentry/app/components/charts/styles.tsx
+++ b/src/sentry/static/sentry/app/components/charts/styles.tsx
@@ -42,9 +42,9 @@ export const InlineContainer = styled('div')`
   display: flex;
   flex-direction: row;
   align-items: center;
-  margin-left: ${space(2)};
+  margin-right: ${space(2)};
 
-  &:first-child {
-    margin-left: 0;
+  &:last-child {
+    margin-right: 0;
   }
 `;
diff --git a/src/sentry/static/sentry/app/views/releasesV2/detail/overview/issues.tsx b/src/sentry/static/sentry/app/views/releasesV2/detail/overview/issues.tsx
index 7d67fdf56e..d35ee2b738 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/detail/overview/issues.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/detail/overview/issues.tsx
@@ -18,6 +18,8 @@ import Feature from 'app/components/acl/feature';
 import {URL_PARAM} from 'app/constants/globalSelectionHeader';
 import {getUtcDateString} from 'app/utils/dates';
 import DropdownButton from 'app/components/dropdownButton';
+import ButtonBar from 'app/components/buttonBar';
+import {stringifyQueryObject, QueryResults} from 'app/utils/tokenizeSearch';
 
 enum IssuesType {
   NEW = 'new',
@@ -70,6 +72,27 @@ class Issues extends React.Component<Props, State> {
     return discoverView.getResultsViewUrlTarget(orgId);
   }
 
+  getIssuesUrl() {
+    const {version, orgId} = this.props;
+    const {issuesType} = this.state;
+    const {queryParams} = this.getIssuesEndpoint();
+    const query: QueryResults = {query: []};
+
+    if (issuesType === IssuesType.NEW) {
+      query['first-release'] = [version];
+    } else {
+      query.release = [version];
+    }
+
+    return {
+      pathname: `/organizations/${orgId}/issues/`,
+      query: {
+        ...queryParams,
+        query: stringifyQueryObject(query),
+      },
+    };
+  }
+
   getIssuesEndpoint(): {path: string; queryParams: IssuesQueryParams} {
     const {version, orgId, location} = this.props;
     const {issuesType} = this.state;
@@ -175,11 +198,15 @@ class Issues extends React.Component<Props, State> {
             ))}
           </DropdownControl>
 
-          <Feature features={['discover-basic']}>
-            <DiscoverButton to={this.getDiscoverUrl()}>
-              {t('Open in Discover')}
-            </DiscoverButton>
-          </Feature>
+          <ButtonBar gap={1}>
+            <Feature features={['discover-basic']}>
+              <OpenInButton to={this.getDiscoverUrl()}>
+                {t('Open in Discover')}
+              </OpenInButton>
+            </Feature>
+
+            <OpenInButton to={this.getIssuesUrl()}>{t('Open in Issues')}</OpenInButton>
+          </ButtonBar>
         </ControlsWrapper>
 
         <TableWrapper>
@@ -198,19 +225,27 @@ class Issues extends React.Component<Props, State> {
   }
 }
 
+// used in media query
 const FilterButton = styled(DropdownButton)``;
-const DiscoverButton = styled(Button)``;
+const OpenInButton = styled(Button)``;
 
 const ControlsWrapper = styled('div')`
   display: flex;
   align-items: center;
   justify-content: space-between;
   margin-bottom: ${space(1)};
-  @media (max-width: ${p => p.theme.breakpoints[0]}) {
-    ${FilterButton}, ${DiscoverButton} {
+  @media (max-width: ${p => p.theme.breakpoints[2]}) {
+    ${FilterButton}, ${OpenInButton} {
       font-size: ${p => p.theme.fontSizeSmall};
     }
   }
+
+  @media (max-width: ${p => p.theme.breakpoints[0]}) {
+    display: block;
+    ${FilterButton} {
+      margin-bottom: ${space(1)};
+    }
+  }
 `;
 
 const TableWrapper = styled('div')`
