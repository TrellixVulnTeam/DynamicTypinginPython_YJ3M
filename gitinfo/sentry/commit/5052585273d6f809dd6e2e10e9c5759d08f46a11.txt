commit 5052585273d6f809dd6e2e10e9c5759d08f46a11
Author: Artemy Tregubenko <me@arty.name>
Date:   Fri Jan 10 11:37:13 2014 +0100

    generate module for files without source maps
    
    When javascript files are loaded in the browser directly without concatenation and source maps, the displayed module name is the full URL of the script. This commit fixes it and generates a proper module name for such files as well.

diff --git a/src/sentry/tasks/fetch_source.py b/src/sentry/tasks/fetch_source.py
index 19bf7623ee..23cd0023a2 100644
--- a/src/sentry/tasks/fetch_source.py
+++ b/src/sentry/tasks/fetch_source.py
@@ -273,6 +273,9 @@ def expand_javascript_source(data, **kwargs):
         # TODO: we're currently running splitlines twice
         if not sourcemap:
             source_code[filename] = (result.body.splitlines(), None)
+            for f in frames:
+                if f.abs_path == filename:
+                    f.module = generate_module(filename)
             continue
         else:
             logger.debug('Found sourcemap %r for minified script %r', sourcemap[:256], result.url)
