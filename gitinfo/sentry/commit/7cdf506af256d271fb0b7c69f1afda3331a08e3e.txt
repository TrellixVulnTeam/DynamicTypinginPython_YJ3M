commit 7cdf506af256d271fb0b7c69f1afda3331a08e3e
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Mar 3 13:25:05 2013 -0800

    Correct tests under mysql

diff --git a/tests/sentry/search/tests.py b/tests/sentry/search/tests.py
index 023d7ccebe..855928530d 100644
--- a/tests/sentry/search/tests.py
+++ b/tests/sentry/search/tests.py
@@ -6,23 +6,28 @@ from sentry.models import SearchDocument
 from sentry.testutils import TestCase
 
 
+def norm_date(dt):
+    # mysql isnt playing nice
+    return dt.replace(microsecond=0)
+
+
 class SearchIndexTest(TestCase):
     def test_index_behavior(self):
         event = self.event
 
         doc = SearchDocument.objects.index(event)
-        self.assertEquals(doc.project, event.project)
-        self.assertEquals(doc.group, event.group)
-        self.assertEquals(doc.total_events, 1)
-        self.assertEquals(doc.date_added, event.group.first_seen)
-        self.assertEquals(doc.date_changed, event.group.last_seen)
+        assert doc.project == event.project
+        assert doc.group == event.group
+        assert doc.total_events == 1
+        assert norm_date(doc.date_added) == norm_date(event.group.first_seen)
+        assert norm_date(doc.date_changed) == norm_date(event.group.last_seen)
 
         doc = SearchDocument.objects.index(event)
-        self.assertEquals(doc.project, event.project)
-        self.assertEquals(doc.group, event.group)
-        self.assertEquals(doc.total_events, 2)
-        self.assertEquals(doc.date_added, event.group.first_seen)
-        self.assertEquals(doc.date_changed, event.group.last_seen)
+        assert doc.project == event.project
+        assert doc.group == event.group
+        assert doc.total_events == 2
+        assert norm_date(doc.date_added) == norm_date(event.group.first_seen)
+        assert norm_date(doc.date_changed) == norm_date(event.group.last_seen)
 
     def test_search(self):
         event = self.event
@@ -30,4 +35,4 @@ class SearchIndexTest(TestCase):
 
         results = list(SearchDocument.objects.search(event.project, event.message.upper()))
         [res] = results
-        self.assertEqual(res.id, doc.id)
+        assert res.id == doc.id
