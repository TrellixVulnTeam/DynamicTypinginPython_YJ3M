commit 0ca4ac737d6de8a83fe4bb1ff6c857c712f304ea
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Wed Jun 19 14:06:41 2019 -0700

    ref(ui): Fix font size on releases list -- refactor "repo label" (#13738)
    
    This fixes the font size on Releases list and refactors "repo label" to be a component.

diff --git a/docs-ui/components/repoLabel.stories.js b/docs-ui/components/repoLabel.stories.js
new file mode 100644
index 0000000000..bc0f59dbc8
--- /dev/null
+++ b/docs-ui/components/repoLabel.stories.js
@@ -0,0 +1,12 @@
+import React from 'react';
+import {storiesOf} from '@storybook/react';
+import {withInfo} from '@storybook/addon-info';
+
+import RepoLabel from 'app/components/repoLabel';
+
+storiesOf('RepoLabel', module).add(
+  'default',
+  withInfo('A badge to use for repo names')(() => {
+    return <RepoLabel>prod</RepoLabel>;
+  })
+);
diff --git a/src/sentry/static/sentry/app/components/repoLabel.jsx b/src/sentry/static/sentry/app/components/repoLabel.jsx
new file mode 100644
index 0000000000..2d91c76137
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/repoLabel.jsx
@@ -0,0 +1,25 @@
+import styled from 'react-emotion';
+
+import overflowEllipsis from 'app/styles/overflowEllipsis';
+
+const RepoLabel = styled('span')`
+  /* label mixin from bootstrap */
+  font-weight: 700;
+  color: ${p => p.theme.white};
+  text-align: center;
+  white-space: nowrap;
+  border-radius: 0.25em;
+  /* end of label mixin from bootstrap */
+
+  ${overflowEllipsis};
+
+  display: inline-block;
+  vertical-align: text-bottom;
+  line-height: 1;
+  background: ${p => p.theme.gray1};
+  padding: 3px;
+  max-width: 86px;
+  font-size: ${p => p.theme.fontSizeSmall};
+`;
+
+export default RepoLabel;
diff --git a/src/sentry/static/sentry/app/components/versionHoverCard.jsx b/src/sentry/static/sentry/app/components/versionHoverCard.jsx
index 331187986a..816faae9f2 100644
--- a/src/sentry/static/sentry/app/components/versionHoverCard.jsx
+++ b/src/sentry/static/sentry/app/components/versionHoverCard.jsx
@@ -1,21 +1,20 @@
+import {Box} from 'grid-emotion';
 import PropTypes from 'prop-types';
 import React from 'react';
-import createReactClass from 'create-react-class';
 import _ from 'lodash';
+import createReactClass from 'create-react-class';
+import styled from 'react-emotion';
 
+import {getShortVersion} from 'app/utils';
+import {t, tct} from 'app/locale';
 import AvatarList from 'app/components/avatar/avatarList';
-
-import {Box} from 'grid-emotion';
 import Button from 'app/components/button';
+import Hovercard from 'app/components/hovercard';
 import LastCommit from 'app/components/lastCommit';
-import LoadingIndicator from 'app/components/loadingIndicator';
 import LoadingError from 'app/components/loadingError';
+import LoadingIndicator from 'app/components/loadingIndicator';
+import RepoLabel from 'app/components/repoLabel';
 import TimeSince from 'app/components/timeSince';
-import Hovercard from 'app/components/hovercard';
-
-import {getShortVersion} from 'app/utils';
-import {t, tct} from 'app/locale';
-
 import withApi from 'app/utils/withApi';
 
 const VersionHoverCard = createReactClass({
@@ -187,19 +186,7 @@ const VersionHoverCard = createReactClass({
                 return (
                   <div className="deploy" key={idx}>
                     <div className="deploy-meta" style={{position: 'relative'}}>
-                      <strong
-                        className="repo-label truncate"
-                        style={{
-                          padding: 3,
-                          display: 'inline-block',
-                          width: 86,
-                          maxWidth: 86,
-                          textAlign: 'center',
-                          fontSize: 12,
-                        }}
-                      >
-                        {env}
-                      </strong>
+                      <VersionRepoLabel>{env}</VersionRepoLabel>
                       {dateFinished && (
                         <span
                           className="text-light"
@@ -250,3 +237,7 @@ const VersionHoverCard = createReactClass({
 export {VersionHoverCard};
 
 export default withApi(VersionHoverCard);
+
+const VersionRepoLabel = styled(RepoLabel)`
+  width: 86px;
+`;
diff --git a/src/sentry/static/sentry/app/views/organizationReleases/detail/releaseDeploys.jsx b/src/sentry/static/sentry/app/views/organizationReleases/detail/releaseDeploys.jsx
index cee5401586..08517bc0e4 100644
--- a/src/sentry/static/sentry/app/views/organizationReleases/detail/releaseDeploys.jsx
+++ b/src/sentry/static/sentry/app/views/organizationReleases/detail/releaseDeploys.jsx
@@ -1,10 +1,12 @@
-import React from 'react';
 import PropTypes from 'prop-types';
+import React from 'react';
+import styled from 'react-emotion';
 
+import {t} from 'app/locale';
 import InlineSvg from 'app/components/inlineSvg';
-import TimeSince from 'app/components/timeSince';
 import Link from 'app/components/links/link';
-import {t} from 'app/locale';
+import RepoLabel from 'app/components/repoLabel';
+import TimeSince from 'app/components/timeSince';
 
 export default class ReleaseDeploys extends React.Component {
   static propTypes = {
@@ -35,10 +37,10 @@ export default class ReleaseDeploys extends React.Component {
                     <Link to={path} title={t('View in stream')}>
                       <div className="row row-flex row-center-vertically">
                         <div className="col-xs-6">
-                          <span className="repo-label" style={{verticalAlign: 'bottom'}}>
+                          <ReleaseRepoLabel>
                             {deploy.environment}
                             <InlineSvg src="icon-open" style={{marginLeft: 6}} />
-                          </span>
+                          </ReleaseRepoLabel>
                         </div>
                         <div className="col-xs-6 align-right">
                           <small>
@@ -55,3 +57,8 @@ export default class ReleaseDeploys extends React.Component {
     );
   }
 }
+
+const ReleaseRepoLabel = styled(RepoLabel)`
+  padding: 5px 8px;
+  vertical-align: bottom;
+`;
diff --git a/src/sentry/static/sentry/app/views/organizationReleases/list/latestDeployOrReleaseTime.jsx b/src/sentry/static/sentry/app/views/organizationReleases/list/latestDeployOrReleaseTime.jsx
index 9c180cf74f..80369836f5 100644
--- a/src/sentry/static/sentry/app/views/organizationReleases/list/latestDeployOrReleaseTime.jsx
+++ b/src/sentry/static/sentry/app/views/organizationReleases/list/latestDeployOrReleaseTime.jsx
@@ -1,9 +1,13 @@
 import PropTypes from 'prop-types';
 import React from 'react';
 import createReactClass from 'create-react-class';
-import Tooltip from 'app/components/tooltip';
-import TimeSince from 'app/components/timeSince';
+import styled from 'react-emotion';
+
 import {t} from 'app/locale';
+import RepoLabel from 'app/components/repoLabel';
+import TimeSince from 'app/components/timeSince';
+import Tooltip from 'app/components/tooltip';
+import space from 'app/styles/space';
 
 const LatestDeployOrReleaseTime = createReactClass({
   displayName: 'LatestDeployOrReleaseTime',
@@ -24,21 +28,17 @@ const LatestDeployOrReleaseTime = createReactClass({
         {latestDeploy && latestDeploy.dateFinished ? (
           <div className="deploy">
             <p className="m-b-0 text-light">
-              <span
-                className="repo-label"
+              <ReleaseRepoLabel
                 style={{
                   padding: 3,
-                  display: 'inline-block',
                   width: 70,
                   maxWidth: 86,
-                  textAlign: 'center',
                   fontSize: 12,
                 }}
               >
                 {latestDeploy.environment + ' '}
-              </span>{' '}
-              <span className="icon icon-clock" />{' '}
-              <TimeSince date={latestDeploy.dateFinished} />
+              </ReleaseRepoLabel>{' '}
+              <TimeWithIcon date={latestDeploy.dateFinished} />
               {earlierDeploysNum > 0 && (
                 <Tooltip title={t('%s earlier deploys', earlierDeploysNum)}>
                   <span className="badge">{earlierDeploysNum}</span>
@@ -47,9 +47,7 @@ const LatestDeployOrReleaseTime = createReactClass({
             </p>
           </div>
         ) : (
-          <p className="m-b-0 text-light">
-            <span className="icon icon-clock" /> <TimeSince date={release.dateCreated} />
-          </p>
+          <TimeWithIcon date={release.dateCreated} />
         )}
       </div>
     );
@@ -57,3 +55,23 @@ const LatestDeployOrReleaseTime = createReactClass({
 });
 
 export default LatestDeployOrReleaseTime;
+
+const ReleaseRepoLabel = styled(RepoLabel)`
+  width: 70px;
+`;
+
+const TimeWithIcon = styled(({date, ...props}) => (
+  <span {...props}>
+    <ClockIcon className="icon icon-clock" />
+    <TimeSince date={date} />
+  </span>
+))`
+  display: inline-flex;
+  align-items: center;
+  color: ${p => p.theme.gray2};
+  font-size: ${p => p.theme.fontSizeSmall};
+`;
+
+const ClockIcon = styled('span')`
+  margin-right: ${space(0.25)};
+`;
diff --git a/src/sentry/static/sentry/app/views/organizationReleases/list/releaseList.jsx b/src/sentry/static/sentry/app/views/organizationReleases/list/releaseList.jsx
index c71c346b1d..395fb02c8b 100644
--- a/src/sentry/static/sentry/app/views/organizationReleases/list/releaseList.jsx
+++ b/src/sentry/static/sentry/app/views/organizationReleases/list/releaseList.jsx
@@ -47,7 +47,7 @@ class ReleaseList extends React.Component {
                 </CountColumn>
                 <LastEventColumn>
                   {release.lastEvent ? (
-                    <SmallTimeSince date={release.lastEvent} />
+                    <TimeSince date={release.lastEvent} />
                   ) : (
                     <span>â€”</span>
                   )}
@@ -73,7 +73,3 @@ const VersionWrapper = styled('div')`
   margin-bottom: ${space(0.25)};
   ${overflowEllipsis};
 `;
-
-const SmallTimeSince = styled(TimeSince)`
-  font-size: ${p => p.theme.fontSizeSmall};
-`;
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index e2abe3844b..73a3739f5b 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -1762,15 +1762,6 @@ header + .alert {
 * ============================================================================
 */
 
-.repo-label {
-  .label;
-  display: inline-block;
-  vertical-align: text-bottom;
-  padding: 5px 8px;
-  line-height: 1;
-  background: @40;
-}
-
 /**
 * Project nav
 * ============================================================================
