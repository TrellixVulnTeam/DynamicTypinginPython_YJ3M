commit 19ab63b628a75db360ed9df61a37bb63b50f56c0
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Feb 26 10:58:41 2013 -0800

    Fail a bit more softly when theres an error in the sourcemap parsing

diff --git a/src/sentry/tasks/fetch_source.py b/src/sentry/tasks/fetch_source.py
index 8e699f339d..822d3256e3 100644
--- a/src/sentry/tasks/fetch_source.py
+++ b/src/sentry/tasks/fetch_source.py
@@ -13,6 +13,7 @@ from collections import namedtuple
 from urlparse import urljoin
 
 from celery.task import task
+from django.utils.simplejson import JSONDecodeError
 from sentry.utils.cache import cache
 from sentry.utils.sourcemaps import sourcemap_to_index, find_source
 
@@ -200,7 +201,13 @@ def fetch_javascript_source(event, **kwargs):
             # If the file starts with that string, ignore the entire first line.
             if body.startswith(")]}'"):
                 body = body.split('\n', 1)[1]
-            index = sourcemap_to_index(body)
+            try:
+                index = sourcemap_to_index(body)
+            except JSONDecodeError:
+                logger.warning('Failed parsing sourcemap JSON: %r', body[:15],
+                    exc_info=True)
+                continue
+
             sourcemaps[sourcemap] = index
 
             # queue up additional source files for download
