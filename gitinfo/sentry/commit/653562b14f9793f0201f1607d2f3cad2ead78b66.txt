commit 653562b14f9793f0201f1607d2f3cad2ead78b66
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 15 10:54:08 2014 -0800

    More explicit fixture helpers

diff --git a/src/sentry/testutils/fixtures.py b/src/sentry/testutils/fixtures.py
index 71c991e3a4..43a1a7f0e2 100644
--- a/src/sentry/testutils/fixtures.py
+++ b/src/sentry/testutils/fixtures.py
@@ -14,7 +14,8 @@ from exam import fixture
 from uuid import uuid4
 
 from sentry.models import (
-    Activity, Event, Group, Organization, Project, Team, User
+    Activity, Event, Group, Organization, OrganizationMember,
+    OrganizationMemberType, Project, Team, User
 )
 from sentry.utils.compat import pickle
 from sentry.utils.strings import decompress
@@ -40,7 +41,8 @@ class Fixtures(object):
         return self.create_organization(
             name='baz',
             slug='baz',
-            owner=self.user)
+            owner=self.user,
+        )
 
     @fixture
     def team(self):
@@ -76,14 +78,23 @@ class Fixtures(object):
         )
 
     def create_organization(self, **kwargs):
-        kwargs.setdefault('name', 'foo')
+        kwargs.setdefault('name', uuid4().hex)
         if not kwargs.get('owner'):
             kwargs['owner'] = self.user
 
         return Organization.objects.create(**kwargs)
 
+    def create_member(self, teams=None, **kwargs):
+        kwargs.setdefault('type', OrganizationMemberType.MEMBER)
+
+        om = OrganizationMember.objects.create(**kwargs)
+        if teams:
+            for team in teams:
+                om.teams.add(team)
+        return om
+
     def create_team(self, **kwargs):
-        kwargs.setdefault('name', 'foo')
+        kwargs.setdefault('name', uuid4().hex)
         if not kwargs.get('slug'):
             kwargs['slug'] = slugify(six.text_type(kwargs['name']))
         if not kwargs.get('organization'):
@@ -94,7 +105,7 @@ class Fixtures(object):
         return Team.objects.create(**kwargs)
 
     def create_project(self, **kwargs):
-        kwargs.setdefault('name', 'Bar')
+        kwargs.setdefault('name', uuid4().hex)
         if not kwargs.get('slug'):
             kwargs['slug'] = slugify(six.text_type(kwargs['name']))
         if not kwargs.get('team'):
@@ -107,10 +118,13 @@ class Fixtures(object):
     def create_project_key(self, project, user):
         return project.key_set.get_or_create(user=user)[0]
 
-    def create_user(self, email, **kwargs):
+    def create_user(self, email=None, **kwargs):
+        if not email:
+            email = uuid4().hex + '@example.com'
+
         kwargs.setdefault('username', email)
         kwargs.setdefault('is_staff', True)
-        kwargs.setdefault('is_superuser', True)
+        kwargs.setdefault('is_superuser', False)
 
         user = User(email=email, **kwargs)
         user.set_password('admin')
