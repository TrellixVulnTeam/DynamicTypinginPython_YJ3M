commit 177bf8783c5f0829ce10ff53e746ca21e48160dd
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jul 15 14:10:14 2015 -0700

    Refactor lint to include tests
    
    - Rename .js to .jsx where appropriate
    - Fix various lint issues

diff --git a/.jshintignore b/.jshintignore
index 68c95b8121..9121e8ba17 100644
--- a/.jshintignore
+++ b/.jshintignore
@@ -1,4 +1,3 @@
-tests/
 src/sentry/templates/sentry/error-page-embed.js
 src/sentry/static/sentry/scripts/lib/
 src/sentry/static/sentry/dist/
diff --git a/Makefile b/Makefile
index c407e4ec10..1fc662d0ee 100644
--- a/Makefile
+++ b/Makefile
@@ -98,8 +98,7 @@ lint-python:
 lint-js:
 	@echo "--> Linting JavaScript files"
 	@npm install
-	@${NPM_ROOT}/.bin/jsxhint --jsx-only src
-	@${NPM_ROOT}/.bin/jshint src
+	@npm run lint
 	@echo ""
 
 coverage: develop
diff --git a/package.json b/package.json
index a6fde5822b..6d1ea8f143 100644
--- a/package.json
+++ b/package.json
@@ -39,7 +39,8 @@
   "APIMethod": "stub",
   "proxyURL": "http://localhost:8000",
   "scripts": {
-    "test": "node_modules/karma/bin/karma start tests/karma.conf.js --single-run"
+    "test": "node_modules/karma/bin/karma start tests/karma.conf.js --single-run",
+    "lint": "node_modules/.bin/jsxhint --jsx-only src tests/js && node_modules/.bin/jshint src tests/js"
   },
   "devDependencies": {
     "babel-core": "^5.6.15",
diff --git a/tests/js/helpers/stubRouterContext.jsx b/tests/js/helpers/stubRouterContext.jsx
index c0ddf07785..33eb59af4d 100644
--- a/tests/js/helpers/stubRouterContext.jsx
+++ b/tests/js/helpers/stubRouterContext.jsx
@@ -17,7 +17,7 @@ module.exports = (Component, props, stubs) => {
     isActive() {},
     getRouteAtDepth() {},
     setRouteComponentAtDepth() {}
-  }, stubs)
+  }, stubs);
 
   return React.createClass({
     childContextTypes: {
@@ -33,7 +33,7 @@ module.exports = (Component, props, stubs) => {
     },
 
     render() {
-      return <Component ref="stub" {...props} />
+      return <Component ref="stub" {...props} />;
     }
   });
 };
diff --git a/tests/js/spec/components/barChart.spec.js b/tests/js/spec/components/barChart.spec.jsx
similarity index 96%
rename from tests/js/spec/components/barChart.spec.js
rename to tests/js/spec/components/barChart.spec.jsx
index 472b2ebe8e..3ac5cfce2d 100644
--- a/tests/js/spec/components/barChart.spec.js
+++ b/tests/js/spec/components/barChart.spec.jsx
@@ -1,3 +1,4 @@
+/*jshint expr: true*/
 var React = require("react/addons");
 
 var BarChart = require("app/components/barChart");
diff --git a/tests/js/spec/stores/selectedGroupStore.spec.js b/tests/js/spec/stores/selectedGroupStore.spec.js
index 4689ba9b99..4ce2fd5b9e 100644
--- a/tests/js/spec/stores/selectedGroupStore.spec.js
+++ b/tests/js/spec/stores/selectedGroupStore.spec.js
@@ -1,3 +1,4 @@
+/*jshint expr: true*/
 var GroupStore = require('app/stores/groupStore');
 var SelectedGroupStore = require('app/stores/selectedGroupStore');
 
diff --git a/tests/js/spec/utils/streamManager.spec.js b/tests/js/spec/utils/streamManager.spec.js
index 3d44260323..fb6df89da3 100644
--- a/tests/js/spec/utils/streamManager.spec.js
+++ b/tests/js/spec/utils/streamManager.spec.js
@@ -1,3 +1,4 @@
+/*jshint expr: true*/
 var Reflux = require('reflux');
 var StreamManager = require('app/utils/streamManager');
 
diff --git a/tests/js/spec/views/stream.spec.js b/tests/js/spec/views/stream.spec.jsx
similarity index 99%
rename from tests/js/spec/views/stream.spec.js
rename to tests/js/spec/views/stream.spec.jsx
index 654d1ae2ad..6ad729ee4f 100644
--- a/tests/js/spec/views/stream.spec.js
+++ b/tests/js/spec/views/stream.spec.jsx
@@ -1,3 +1,4 @@
+/*jshint expr: true*/
 var React = require("react/addons");
 var Cookies = require("js-cookie");
 
@@ -158,7 +159,7 @@ describe("Stream", function() {
         pageLinks: '',
         loading: true,
         error: false
-      }
+      };
       var wrapper = React.render(<this.Element />, document.body);
       var actual = wrapper.refs.stub.getInitialState();
 
diff --git a/tests/js/spec/views/stream/filterSelectLink.spec.js b/tests/js/spec/views/stream/filterSelectLink.spec.jsx
similarity index 98%
rename from tests/js/spec/views/stream/filterSelectLink.spec.js
rename to tests/js/spec/views/stream/filterSelectLink.spec.jsx
index f866e12716..c654ed8adc 100644
--- a/tests/js/spec/views/stream/filterSelectLink.spec.js
+++ b/tests/js/spec/views/stream/filterSelectLink.spec.jsx
@@ -1,3 +1,4 @@
+/*jshint expr: true*/
 var React = require("react/addons");
 
 var FilterSelectLink = require("app/views/stream/filterSelectLink");
diff --git a/tests/js/spec/views/stream/searchBar.spec.js b/tests/js/spec/views/stream/searchBar.spec.jsx
similarity index 99%
rename from tests/js/spec/views/stream/searchBar.spec.js
rename to tests/js/spec/views/stream/searchBar.spec.jsx
index cc44d25e06..026213aaac 100644
--- a/tests/js/spec/views/stream/searchBar.spec.js
+++ b/tests/js/spec/views/stream/searchBar.spec.jsx
@@ -1,3 +1,4 @@
+/*jshint expr: true*/
 var React = require("react/addons");
 
 var SearchBar = require("app/views/stream/searchBar");
diff --git a/tests/tests.webpack.js b/tests/tests.webpack.js
index 8eb7fc8fb7..990c585db9 100644
--- a/tests/tests.webpack.js
+++ b/tests/tests.webpack.js
@@ -1,3 +1,3 @@
-var context = require.context('./', true, /\.spec\.js$/);
+var context = require.context('./', true, /\.spec\.jsx?$/);
 context.keys().forEach(context);
 module.exports = context;
