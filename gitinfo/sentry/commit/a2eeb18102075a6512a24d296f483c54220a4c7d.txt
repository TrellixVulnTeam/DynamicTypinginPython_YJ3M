commit a2eeb18102075a6512a24d296f483c54220a4c7d
Author: Mark Story <mark@sentry.io>
Date:   Mon Sep 9 14:01:16 2019 -0400

    fix(ui) Use better pattern when looking for aggregates (#14604)
    
    The `count()` aggregate doesn't require any fields. Use the same pattern
    we use elsewhere to ensure aggregates are detected the same.

diff --git a/src/sentry/static/sentry/app/views/eventsV2/utils.tsx b/src/sentry/static/sentry/app/views/eventsV2/utils.tsx
index 208764ae4b..63f2ff1925 100644
--- a/src/sentry/static/sentry/app/views/eventsV2/utils.tsx
+++ b/src/sentry/static/sentry/app/views/eventsV2/utils.tsx
@@ -21,6 +21,8 @@ export type EventQuery = {
   per_page?: number;
 };
 
+const AGGREGATE_PATTERN = /^([^\(]+)\(([a-z\._+]*)\)$/;
+
 /**
  * Takes a view and determines if there are any aggregate fields in it.
  *
@@ -32,8 +34,7 @@ export function hasAggregateField(eventView: EventView): boolean {
   return eventView
     .getFieldNames()
     .some(
-      field =>
-        AGGREGATE_ALIASES.includes(field as any) || field.match(/[a-z_]+\([a-z_\.]+\)/)
+      field => AGGREGATE_ALIASES.includes(field as any) || field.match(AGGREGATE_PATTERN)
     );
 }
 
@@ -166,8 +167,6 @@ export function getFieldRenderer(
   return partial(FIELD_FORMATTERS.string.renderFunc, fieldName);
 }
 
-const AGGREGATE_PATTERN = /^([^\(]+)\(([a-z\._+]*)\)$/;
-
 /**
  * Get the alias that the API results will have for a given aggregate function name
  */
