commit 9c87c1ae59f6d1eae39e2bcecee0b192cb8bf3f5
Author: Chris Clark <christopherchristopherclark@gmail.com>
Date:   Tue Apr 10 13:51:22 2018 -0700

    fix(settings): user badge improvements (#7933)
    
    * improved user badge styles
    
    use scaled units
    
    fix a bug where links were not working for userBadge
    
    user badge needs flex grow
    
    better avi size for setting search
    
    don't need height and width explicitly defined
    
    * revert organizationMemberRow because it supports both old and new settings and it looks fine
    
    * tests
    
    * improvements to the way userBadge handles unlinked display

diff --git a/src/sentry/static/sentry/app/components/userBadge.jsx b/src/sentry/static/sentry/app/components/userBadge.jsx
index af3860c7f9..7eb4bd7e72 100644
--- a/src/sentry/static/sentry/app/components/userBadge.jsx
+++ b/src/sentry/static/sentry/app/components/userBadge.jsx
@@ -4,6 +4,7 @@ import styled from 'react-emotion';
 import Avatar from './avatar';
 import Link from './link';
 import overflowEllipsis from '../styles/overflowEllipsis';
+import space from '../styles/space';
 
 const UserBadge = ({
   displayName,
@@ -14,17 +15,13 @@ const UserBadge = ({
   useLink,
   ...props
 }) => {
-  const LinkOrText = useLink ? (
-    <StyledLink to={`/settings/${orgId}/members/${user.id}`} />
-  ) : (
-    'div'
-  );
-
   return (
     <StyledUserBadge {...props}>
       <StyledAvatar user={user} size={avatarSize} />
       <StyledNameAndEmail>
-        <LinkOrText>{displayName || user.name || user.email}</LinkOrText>
+        <StyledName useLink={useLink} to={`/settings/${orgId}/members/${user.id}`}>
+          {displayName || user.name || user.email}
+        </StyledName>
         <StyledEmail>{displayEmail || user.email}</StyledEmail>
       </StyledNameAndEmail>
     </StyledUserBadge>
@@ -41,7 +38,7 @@ UserBadge.propTypes = {
 };
 
 UserBadge.defaultProps = {
-  userLink: true,
+  useLink: true,
 };
 
 const StyledUserBadge = styled('div')`
@@ -57,21 +54,23 @@ const StyledNameAndEmail = styled('div')`
 
 const StyledEmail = styled('div')`
   font-size: 0.875em;
+  margin-top: ${space(0.5)};
+  color: ${p => p.theme.gray2};
   ${overflowEllipsis};
 `;
 
-const StyledLink = styled(Link)`
+const StyledName = styled(
+  ({useLink, ...props}) => (useLink ? <Link {...props} /> : <span {...props} />)
+)`
   font-weight: bold;
-  margin-bottom: 0.2em;
+  margin-bottom: ${space(0.5)};
   ${overflowEllipsis};
 `;
 
 const StyledAvatar = styled(props => <Avatar {...props} />)`
-  width: 2em;
-  height: 2em;
-  min-width: 2em;
-  min-height: 2em;
-  margin-right: 0.5em;
+  min-width: ${space(3)};
+  min-height: ${space(3)};
+  margin-right: ${space(1)};
 `;
 
 export default UserBadge;
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsSearch.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsSearch.jsx
index 3f765161c8..df5c9c5ce6 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsSearch.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsSearch.jsx
@@ -58,7 +58,9 @@ class SearchResult extends React.Component {
     }
 
     if (sourceType === 'member') {
-      return <UserBadge userLink={false} orgId={params.orgId} user={model} />;
+      return (
+        <UserBadge useLink={false} orgId={params.orgId} user={model} avatarSize={32} />
+      );
     }
 
     if (sourceType === 'organization') {
diff --git a/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap b/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap
index 9c79cd7e13..a572542e65 100644
--- a/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap
@@ -38,6 +38,7 @@ exports[`TeamMembers render() renders 1`] = `
     <UserBadge
       avatarSize={36}
       orgId="org-slug"
+      useLink={true}
       user={
         Object {
           "email": "sentry1@test.com",
@@ -58,7 +59,6 @@ exports[`TeamMembers render() renders 1`] = `
           },
         }
       }
-      userLink={true}
     />
     <Button
       disabled={false}
@@ -83,6 +83,7 @@ exports[`TeamMembers render() renders 1`] = `
     <UserBadge
       avatarSize={36}
       orgId="org-slug"
+      useLink={true}
       user={
         Object {
           "email": "sentry2@test.com",
@@ -103,7 +104,6 @@ exports[`TeamMembers render() renders 1`] = `
           },
         }
       }
-      userLink={true}
     />
     <Button
       disabled={false}
@@ -128,6 +128,7 @@ exports[`TeamMembers render() renders 1`] = `
     <UserBadge
       avatarSize={36}
       orgId="org-slug"
+      useLink={true}
       user={
         Object {
           "email": "sentry3@test.com",
@@ -148,7 +149,6 @@ exports[`TeamMembers render() renders 1`] = `
           },
         }
       }
-      userLink={true}
     />
     <Button
       disabled={false}
@@ -173,6 +173,7 @@ exports[`TeamMembers render() renders 1`] = `
     <UserBadge
       avatarSize={36}
       orgId="org-slug"
+      useLink={true}
       user={
         Object {
           "email": "sentry4@test.com",
@@ -193,7 +194,6 @@ exports[`TeamMembers render() renders 1`] = `
           },
         }
       }
-      userLink={true}
     />
     <Button
       disabled={false}
