commit 1b04281fc53b1710f9433f494579590ac2af5b8e
Author: Chris Clark <christopherchristopherclark@gmail.com>
Date:   Thu Jan 24 11:28:32 2019 -0800

    fix(onboarding): replace weird progress node circles with svgs (#11593)
    
    * fix visual bugs with progress nodes and convert to svg/styled-components
    
    * center align icons and shorten last test bit to two lines so it looks normal

diff --git a/src/sentry/static/sentry/app/icons/icon-circle-empty.svg b/src/sentry/static/sentry/app/icons/icon-circle-empty.svg
new file mode 100644
index 0000000000..9da3d25c8c
--- /dev/null
+++ b/src/sentry/static/sentry/app/icons/icon-circle-empty.svg
@@ -0,0 +1,11 @@
+<svg
+  width="24"
+  height="24"
+  xmlns="http://www.w3.org/2000/svg"
+>
+  <path
+    d="M12 24C5.373 24 0 18.627 0 12S5.373 0 12 0s12 5.373 12 12-5.373 12-12 12zm0-2c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"
+    fill="currentColor"
+    fill-rule="nonzero"
+  />
+</svg>
diff --git a/src/sentry/static/sentry/app/views/onboarding/progress.jsx b/src/sentry/static/sentry/app/views/onboarding/progress.jsx
index 4aab16fdab..7a7bd58d67 100644
--- a/src/sentry/static/sentry/app/views/onboarding/progress.jsx
+++ b/src/sentry/static/sentry/app/views/onboarding/progress.jsx
@@ -1,11 +1,13 @@
 import PropTypes from 'prop-types';
 import React from 'react';
 import createReactClass from 'create-react-class';
-import classNames from 'classnames';
+import styled from 'react-emotion';
 
 import {analytics, amplitude} from 'app/utils/analytics';
 import ConfigStore from 'app/stores/configStore';
 import HookStore from 'app/stores/hookStore';
+import InlineSvg from 'app/components/inlineSvg';
+import space from 'app/styles/space';
 import {onboardingSteps, stepDescriptions} from 'app/views/onboarding/utils';
 
 const ProgressNodes = createReactClass({
@@ -69,17 +71,17 @@ const ProgressNodes = createReactClass({
   },
 
   node(stepKey, stepIndex) {
-    let nodeClass = classNames('node', {
-      done: stepIndex < this.inferStep(),
-      active: stepIndex === this.inferStep(),
-    });
-
+    const done = stepIndex < this.inferStep();
+    const active = stepIndex === this.inferStep();
     let descriptions = this.getAsset('descriptions');
+
     return (
-      <div className={nodeClass} key={stepIndex}>
-        <span className={nodeClass} />
-        {descriptions[stepKey]}
-      </div>
+      <Node key={stepIndex} done={done} active={active} data-test-id="node">
+        <NodeIcon src={done ? 'icon-circle-check' : 'icon-circle-empty'} />
+        <NodeDescription data-test-id="node-description">
+          {descriptions[stepKey]}
+        </NodeDescription>
+      </Node>
     );
   },
 
@@ -92,7 +94,7 @@ const ProgressNodes = createReactClass({
         <div className="sentry-flag">
           <span href="/" className="icon-sentry-logo-full" />
         </div>
-        <div className="progress-nodes">{steps.map(this.node)}</div>
+        <React.Fragment>{steps.map(this.node)}</React.Fragment>
         <div className="stuck">
           <a
             href={
@@ -110,4 +112,26 @@ const ProgressNodes = createReactClass({
   },
 });
 
+const Node = styled('div')`
+  display: flex;
+  align-items: center;
+  width: 220px;
+  margin: auto;
+  margin-bottom: ${space(4)};
+  color: ${p => (p.active ? '#fff' : p.theme.gray2)};
+  font-weight: ${p => (p.active ? 600 : 400)};
+`;
+
+const NodeIcon = styled(InlineSvg)`
+  position: relative;
+  margin-right: ${space(1.5)};
+  width: 22px;
+  height: 22px;
+`;
+
+const NodeDescription = styled('div')`
+  flex: 1;
+  line-height: 1.2;
+`;
+
 export default ProgressNodes;
diff --git a/src/sentry/static/sentry/app/views/onboarding/utils.js b/src/sentry/static/sentry/app/views/onboarding/utils.js
index 46166c393f..7bad985e57 100644
--- a/src/sentry/static/sentry/app/views/onboarding/utils.js
+++ b/src/sentry/static/sentry/app/views/onboarding/utils.js
@@ -108,7 +108,7 @@ const onboardingSteps = {organization: 0, project: 1, configure: 2};
 const stepDescriptions = {
   organization: t('Create an organization in Sentry'),
   project: t('Tell us about your project'),
-  configure: t('Configure your application and send an event'),
+  configure: t('Send an event from your application'),
 };
 
 function getPlatformName(platform) {
diff --git a/src/sentry/static/sentry/less/onboarding.less b/src/sentry/static/sentry/less/onboarding.less
index 47499ee502..10c5e28ff7 100644
--- a/src/sentry/static/sentry/less/onboarding.less
+++ b/src/sentry/static/sentry/less/onboarding.less
@@ -91,52 +91,6 @@
       padding: 14px 20px 11px;
     }
 
-    .progress-nodes {
-      div.node {
-        width: 190px;
-        margin: auto;
-        margin-bottom: 30px;
-        display: flex;
-        color: @50;
-        position: relative;
-        padding-left: 26px;
-        border-color: @50;
-        line-height: 1.2;
-        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
-
-        &.active {
-          color: white;
-          font-weight: 600;
-
-          &::before {
-            border-color: white;
-          }
-        }
-
-        span.node {
-          &::before {
-            content: '';
-            position: absolute;
-            left: -10px;
-            border-radius: 100%;
-            width: 22px;
-            height: 22px;
-            margin: 1px 8px 0 0;
-            border: 3px solid;
-          }
-
-          &.done {
-            &::before {
-              font-size: 14px;
-              content: '●';
-              text-align: center;
-              line-height: 16px;
-            }
-          }
-        }
-      }
-    }
-
     .stuck {
       position: absolute;
       bottom: 0px;
diff --git a/tests/js/spec/views/onboarding/__snapshots__/index.spec.jsx.snap b/tests/js/spec/views/onboarding/__snapshots__/index.spec.jsx.snap
index 2db8faac0b..72fe1935b4 100644
--- a/tests/js/spec/views/onboarding/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/views/onboarding/__snapshots__/index.spec.jsx.snap
@@ -74,37 +74,153 @@ exports[`OnboardingWizard render() should render and respond to click events 1`]
                   href="/"
                 />
               </div>
-              <div
-                className="progress-nodes"
+              <Node
+                active={false}
+                data-test-id="node"
+                done={true}
+                key="0"
               >
                 <div
-                  className="node done"
-                  key="0"
+                  className="css-zrjk08-Node e1en1fxy0"
+                  data-test-id="node"
                 >
-                  <span
-                    className="node done"
-                  />
-                  Create an organization in Sentry
+                  <NodeIcon
+                    src="icon-circle-check"
+                  >
+                    <InlineSvg
+                      className="css-1y5anzy-NodeIcon e1en1fxy1"
+                      src="icon-circle-check"
+                    >
+                      <StyledSvg
+                        className="css-1y5anzy-NodeIcon e1en1fxy1"
+                        height="1em"
+                        viewBox={Object {}}
+                        width="1em"
+                      >
+                        <svg
+                          className="e1en1fxy1 css-x6jhby-StyledSvg-NodeIcon e2idor0"
+                          height="1em"
+                          viewBox={Object {}}
+                          width="1em"
+                        >
+                          <use
+                            href="#test"
+                            xlinkHref="#test"
+                          />
+                        </svg>
+                      </StyledSvg>
+                    </InlineSvg>
+                  </NodeIcon>
+                  <NodeDescription
+                    data-test-id="node-description"
+                  >
+                    <div
+                      className="css-yyeqaq-NodeDescription e1en1fxy2"
+                      data-test-id="node-description"
+                    >
+                      Create an organization in Sentry
+                    </div>
+                  </NodeDescription>
                 </div>
+              </Node>
+              <Node
+                active={true}
+                data-test-id="node"
+                done={false}
+                key="1"
+              >
                 <div
-                  className="node active"
-                  key="1"
+                  className="css-pe396z-Node e1en1fxy0"
+                  data-test-id="node"
                 >
-                  <span
-                    className="node active"
-                  />
-                  Tell us about your project
+                  <NodeIcon
+                    src="icon-circle-empty"
+                  >
+                    <InlineSvg
+                      className="css-1y5anzy-NodeIcon e1en1fxy1"
+                      src="icon-circle-empty"
+                    >
+                      <StyledSvg
+                        className="css-1y5anzy-NodeIcon e1en1fxy1"
+                        height="1em"
+                        viewBox={Object {}}
+                        width="1em"
+                      >
+                        <svg
+                          className="e1en1fxy1 css-x6jhby-StyledSvg-NodeIcon e2idor0"
+                          height="1em"
+                          viewBox={Object {}}
+                          width="1em"
+                        >
+                          <use
+                            href="#test"
+                            xlinkHref="#test"
+                          />
+                        </svg>
+                      </StyledSvg>
+                    </InlineSvg>
+                  </NodeIcon>
+                  <NodeDescription
+                    data-test-id="node-description"
+                  >
+                    <div
+                      className="css-yyeqaq-NodeDescription e1en1fxy2"
+                      data-test-id="node-description"
+                    >
+                      Tell us about your project
+                    </div>
+                  </NodeDescription>
                 </div>
+              </Node>
+              <Node
+                active={false}
+                data-test-id="node"
+                done={false}
+                key="2"
+              >
                 <div
-                  className="node"
-                  key="2"
+                  className="css-zrjk08-Node e1en1fxy0"
+                  data-test-id="node"
                 >
-                  <span
-                    className="node"
-                  />
-                  Configure your application and send an event
+                  <NodeIcon
+                    src="icon-circle-empty"
+                  >
+                    <InlineSvg
+                      className="css-1y5anzy-NodeIcon e1en1fxy1"
+                      src="icon-circle-empty"
+                    >
+                      <StyledSvg
+                        className="css-1y5anzy-NodeIcon e1en1fxy1"
+                        height="1em"
+                        viewBox={Object {}}
+                        width="1em"
+                      >
+                        <svg
+                          className="e1en1fxy1 css-x6jhby-StyledSvg-NodeIcon e2idor0"
+                          height="1em"
+                          viewBox={Object {}}
+                          width="1em"
+                        >
+                          <use
+                            href="#test"
+                            xlinkHref="#test"
+                          />
+                        </svg>
+                      </StyledSvg>
+                    </InlineSvg>
+                  </NodeIcon>
+                  <NodeDescription
+                    data-test-id="node-description"
+                  >
+                    <div
+                      className="css-yyeqaq-NodeDescription e1en1fxy2"
+                      data-test-id="node-description"
+                    >
+                      Send an event from your application
+                    </div>
+                  </NodeDescription>
                 </div>
-              </div>
+              </Node>
               <div
                 className="stuck"
               >
@@ -1222,37 +1338,153 @@ exports[`OnboardingWizard render() should render and respond to click events 2`]
                   href="/"
                 />
               </div>
-              <div
-                className="progress-nodes"
+              <Node
+                active={false}
+                data-test-id="node"
+                done={true}
+                key="0"
               >
                 <div
-                  className="node done"
-                  key="0"
+                  className="css-zrjk08-Node e1en1fxy0"
+                  data-test-id="node"
                 >
-                  <span
-                    className="node done"
-                  />
-                  Create an organization in Sentry
+                  <NodeIcon
+                    src="icon-circle-check"
+                  >
+                    <InlineSvg
+                      className="css-1y5anzy-NodeIcon e1en1fxy1"
+                      src="icon-circle-check"
+                    >
+                      <StyledSvg
+                        className="css-1y5anzy-NodeIcon e1en1fxy1"
+                        height="1em"
+                        viewBox={Object {}}
+                        width="1em"
+                      >
+                        <svg
+                          className="e1en1fxy1 css-x6jhby-StyledSvg-NodeIcon e2idor0"
+                          height="1em"
+                          viewBox={Object {}}
+                          width="1em"
+                        >
+                          <use
+                            href="#test"
+                            xlinkHref="#test"
+                          />
+                        </svg>
+                      </StyledSvg>
+                    </InlineSvg>
+                  </NodeIcon>
+                  <NodeDescription
+                    data-test-id="node-description"
+                  >
+                    <div
+                      className="css-yyeqaq-NodeDescription e1en1fxy2"
+                      data-test-id="node-description"
+                    >
+                      Create an organization in Sentry
+                    </div>
+                  </NodeDescription>
                 </div>
+              </Node>
+              <Node
+                active={true}
+                data-test-id="node"
+                done={false}
+                key="1"
+              >
                 <div
-                  className="node active"
-                  key="1"
+                  className="css-pe396z-Node e1en1fxy0"
+                  data-test-id="node"
                 >
-                  <span
-                    className="node active"
-                  />
-                  Tell us about your project
+                  <NodeIcon
+                    src="icon-circle-empty"
+                  >
+                    <InlineSvg
+                      className="css-1y5anzy-NodeIcon e1en1fxy1"
+                      src="icon-circle-empty"
+                    >
+                      <StyledSvg
+                        className="css-1y5anzy-NodeIcon e1en1fxy1"
+                        height="1em"
+                        viewBox={Object {}}
+                        width="1em"
+                      >
+                        <svg
+                          className="e1en1fxy1 css-x6jhby-StyledSvg-NodeIcon e2idor0"
+                          height="1em"
+                          viewBox={Object {}}
+                          width="1em"
+                        >
+                          <use
+                            href="#test"
+                            xlinkHref="#test"
+                          />
+                        </svg>
+                      </StyledSvg>
+                    </InlineSvg>
+                  </NodeIcon>
+                  <NodeDescription
+                    data-test-id="node-description"
+                  >
+                    <div
+                      className="css-yyeqaq-NodeDescription e1en1fxy2"
+                      data-test-id="node-description"
+                    >
+                      Tell us about your project
+                    </div>
+                  </NodeDescription>
                 </div>
+              </Node>
+              <Node
+                active={false}
+                data-test-id="node"
+                done={false}
+                key="2"
+              >
                 <div
-                  className="node"
-                  key="2"
+                  className="css-zrjk08-Node e1en1fxy0"
+                  data-test-id="node"
                 >
-                  <span
-                    className="node"
-                  />
-                  Configure your application and send an event
+                  <NodeIcon
+                    src="icon-circle-empty"
+                  >
+                    <InlineSvg
+                      className="css-1y5anzy-NodeIcon e1en1fxy1"
+                      src="icon-circle-empty"
+                    >
+                      <StyledSvg
+                        className="css-1y5anzy-NodeIcon e1en1fxy1"
+                        height="1em"
+                        viewBox={Object {}}
+                        width="1em"
+                      >
+                        <svg
+                          className="e1en1fxy1 css-x6jhby-StyledSvg-NodeIcon e2idor0"
+                          height="1em"
+                          viewBox={Object {}}
+                          width="1em"
+                        >
+                          <use
+                            href="#test"
+                            xlinkHref="#test"
+                          />
+                        </svg>
+                      </StyledSvg>
+                    </InlineSvg>
+                  </NodeIcon>
+                  <NodeDescription
+                    data-test-id="node-description"
+                  >
+                    <div
+                      className="css-yyeqaq-NodeDescription e1en1fxy2"
+                      data-test-id="node-description"
+                    >
+                      Send an event from your application
+                    </div>
+                  </NodeDescription>
                 </div>
-              </div>
+              </Node>
               <div
                 className="stuck"
               >
diff --git a/tests/js/spec/views/onboarding/__snapshots__/progress.spec.jsx.snap b/tests/js/spec/views/onboarding/__snapshots__/progress.spec.jsx.snap
index 814f12ae3e..d45cfa4e69 100644
--- a/tests/js/spec/views/onboarding/__snapshots__/progress.spec.jsx.snap
+++ b/tests/js/spec/views/onboarding/__snapshots__/progress.spec.jsx.snap
@@ -12,37 +12,51 @@ exports[`ProgressNodes render() should render step 0 if no projectId 1`] = `
       href="/"
     />
   </div>
-  <div
-    className="progress-nodes"
+  <Node
+    active={false}
+    data-test-id="node"
+    done={true}
+    key="0"
   >
-    <div
-      className="node done"
-      key="0"
+    <NodeIcon
+      src="icon-circle-check"
+    />
+    <NodeDescription
+      data-test-id="node-description"
     >
-      <span
-        className="node done"
-      />
       Create an organization in Sentry
-    </div>
-    <div
-      className="node active"
-      key="1"
+    </NodeDescription>
+  </Node>
+  <Node
+    active={true}
+    data-test-id="node"
+    done={false}
+    key="1"
+  >
+    <NodeIcon
+      src="icon-circle-empty"
+    />
+    <NodeDescription
+      data-test-id="node-description"
     >
-      <span
-        className="node active"
-      />
       Tell us about your project
-    </div>
-    <div
-      className="node"
-      key="2"
+    </NodeDescription>
+  </Node>
+  <Node
+    active={false}
+    data-test-id="node"
+    done={false}
+    key="2"
+  >
+    <NodeIcon
+      src="icon-circle-empty"
+    />
+    <NodeDescription
+      data-test-id="node-description"
     >
-      <span
-        className="node"
-      />
-      Configure your application and send an event
-    </div>
-  </div>
+      Send an event from your application
+    </NodeDescription>
+  </Node>
   <div
     className="stuck"
   >
@@ -72,37 +86,51 @@ exports[`ProgressNodes render() should render step 1 if has projectId 1`] = `
       href="/"
     />
   </div>
-  <div
-    className="progress-nodes"
+  <Node
+    active={false}
+    data-test-id="node"
+    done={true}
+    key="0"
   >
-    <div
-      className="node done"
-      key="0"
+    <NodeIcon
+      src="icon-circle-check"
+    />
+    <NodeDescription
+      data-test-id="node-description"
     >
-      <span
-        className="node done"
-      />
       Create an organization in Sentry
-    </div>
-    <div
-      className="node done"
-      key="1"
+    </NodeDescription>
+  </Node>
+  <Node
+    active={false}
+    data-test-id="node"
+    done={true}
+    key="1"
+  >
+    <NodeIcon
+      src="icon-circle-check"
+    />
+    <NodeDescription
+      data-test-id="node-description"
     >
-      <span
-        className="node done"
-      />
       Tell us about your project
-    </div>
-    <div
-      className="node active"
-      key="2"
+    </NodeDescription>
+  </Node>
+  <Node
+    active={true}
+    data-test-id="node"
+    done={false}
+    key="2"
+  >
+    <NodeIcon
+      src="icon-circle-empty"
+    />
+    <NodeDescription
+      data-test-id="node-description"
     >
-      <span
-        className="node active"
-      />
-      Configure your application and send an event
-    </div>
-  </div>
+      Send an event from your application
+    </NodeDescription>
+  </Node>
   <div
     className="stuck"
   >
diff --git a/tests/js/spec/views/onboarding/progress.spec.jsx b/tests/js/spec/views/onboarding/progress.spec.jsx
index 81440e6a07..7c53c7d332 100644
--- a/tests/js/spec/views/onboarding/progress.spec.jsx
+++ b/tests/js/spec/views/onboarding/progress.spec.jsx
@@ -20,17 +20,18 @@ describe('ProgressNodes', function() {
       };
       let wrapper = shallow(<ProgressNodes {...baseProps} />, baseContext);
 
-      expect(wrapper.find('.node')).toHaveLength(6);
-      expect(wrapper.find('.active')).toHaveLength(2);
+      expect(wrapper.find('[data-test-id="node"]')).toHaveLength(3);
+      expect(wrapper.find('[data-test-id="node"]').find({active: true})).toHaveLength(1);
       expect(
         wrapper
-          .find('.active')
-          .first()
-          .last()
+          .find('[data-test-id="node"]')
+          .find({active: true})
+          .find('[data-test-id="node-description"]')
+          .children()
           .text()
       ).toEqual('Tell us about your project');
 
-      expect(wrapper.find('.done')).toHaveLength(2);
+      expect(wrapper.find('[data-test-id="node"]').find({done: true})).toHaveLength(1);
 
       expect(wrapper).toMatchSnapshot();
     });
@@ -54,17 +55,18 @@ describe('ProgressNodes', function() {
 
       let wrapper = shallow(<ProgressNodes {...props} />, baseContext);
 
-      expect(wrapper.find('.node')).toHaveLength(6);
-      expect(wrapper.find('.active')).toHaveLength(2);
+      expect(wrapper.find('[data-test-id="node"]')).toHaveLength(3);
+      expect(wrapper.find('[data-test-id="node"]').find({active: true})).toHaveLength(1);
       expect(
         wrapper
-          .find('.active')
-          .first()
-          .last()
+          .find('[data-test-id="node"]')
+          .find({active: true})
+          .find('[data-test-id="node-description"]')
+          .children()
           .text()
-      ).toEqual('Configure your application and send an event');
+      ).toEqual('Send an event from your application');
 
-      expect(wrapper.find('.done')).toHaveLength(4);
+      expect(wrapper.find('[data-test-id="node"]').find({done: true})).toHaveLength(2);
 
       expect(wrapper).toMatchSnapshot();
     });
