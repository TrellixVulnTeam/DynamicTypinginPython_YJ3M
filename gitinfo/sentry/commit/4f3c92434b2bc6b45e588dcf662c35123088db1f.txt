commit 4f3c92434b2bc6b45e588dcf662c35123088db1f
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Thu Jan 9 14:53:00 2020 -0800

    fix(saml): Wrap individual idp config tabs with forms (#16373)

diff --git a/src/sentry/auth/providers/saml2/generic/templates/sentry_auth_saml2/select-idp.html b/src/sentry/auth/providers/saml2/generic/templates/sentry_auth_saml2/select-idp.html
index 975e7be95d..2d7457aabd 100644
--- a/src/sentry/auth/providers/saml2/generic/templates/sentry_auth_saml2/select-idp.html
+++ b/src/sentry/auth/providers/saml2/generic/templates/sentry_auth_saml2/select-idp.html
@@ -23,19 +23,17 @@
   </li>
 </ul>
 
-<form action="" method="post" class="form-stacked">
-  {% csrf_token %}
+<div class="tab-content">
+  <div class="tab-pane {% if op == "url" %}active{% endif %}" id="metadata-url">
+    <p>Provide a Metadata URL to retrieve the IdP details.</p>
+    <form action="" method="post" class="form-stacked">
+      {% csrf_token %}
 
-  {% if plugin %}
-      <input type="hidden" name="plugin" value="{{ plugin.slug }}" />
-  {% endif %}
-
-  <input type="hidden" name="provider" value="saml2" />
-
-  <div class="tab-content">
-    <div class="tab-pane {% if op == "url" %}active{% endif %}" id="metadata-url">
-      <p>Provide a Metadata URL to retrieve the IdP details.</p>
+      {% if plugin %}
+          <input type="hidden" name="plugin" value="{{ plugin.slug }}" />
+      {% endif %}
 
+      <input type="hidden" name="provider" value="saml2" />
       {{ forms.url|as_crispy_errors }}
 
       {% for field in forms.url %}
@@ -48,11 +46,19 @@
           class="btn btn-primary"
           name="action_save" value="url">{% trans "Get metadata" %}</button>
       </fieldset>
-    </div>
+    </form>
+  </div>
 
-    <div class="tab-pane {% if op == "xml" %}active{% endif %}" id="xml">
-      <p>Provide the raw Metadata XML IdP details.</p>
+  <div class="tab-pane {% if op == "xml" %}active{% endif %}" id="xml">
+    <p>Provide the raw Metadata XML IdP details.</p>
+    <form action="" method="post" class="form-stacked">
+      {% csrf_token %}
 
+      {% if plugin %}
+          <input type="hidden" name="plugin" value="{{ plugin.slug }}" />
+      {% endif %}
+
+      <input type="hidden" name="provider" value="saml2" />
       {{ forms.xml|as_crispy_errors }}
 
       {% for field in forms.xml %}
@@ -65,13 +71,21 @@
           class="btn btn-primary"
           name="action_save" value="xml">{% trans "Parse Metadata" %}</button>
       </fieldset>
-    </div>
+    </form>
+  </div>
+
+  <div class="tab-pane {% if op == "idp" %}active{% endif %}" id="idp-data">
+    <p>
+      Provide your individual Identity Provider metadata fields.
+    </p>
+    <form action="" method="post" class="form-stacked">
+      {% csrf_token %}
 
-    <div class="tab-pane {% if op == "idp" %}active{% endif %}" id="idp-data">
-      <p>
-        Provide your individual Identity Provider metadata fields.
-      </p>
+      {% if plugin %}
+          <input type="hidden" name="plugin" value="{{ plugin.slug }}" />
+      {% endif %}
 
+      <input type="hidden" name="provider" value="saml2" />
       {{ forms.idp|as_crispy_errors }}
 
       {% for field in forms.idp %}
@@ -84,7 +98,7 @@
           class="btn btn-primary"
           name="action_save" value="idp">{% trans "Save Metadata" %}</button>
       </fieldset>
-    </div>
+    </form>
   </div>
-</form>
+</div>
 {% endblock %}
