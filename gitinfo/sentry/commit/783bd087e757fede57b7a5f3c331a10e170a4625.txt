commit 783bd087e757fede57b7a5f3c331a10e170a4625
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Oct 20 15:55:58 2010 -0700

    Support long messages by splitting them on the first newline

diff --git a/sentry/models.py b/sentry/models.py
index 95dc61c87e..026c5af6c2 100644
--- a/sentry/models.py
+++ b/sentry/models.py
@@ -105,6 +105,12 @@ class MessageBase(Model):
         return self.traceback or ''
     description.short_description = _('description')
 
+    def has_two_part_message(self):
+        return '\n' in self.message.strip('\n')
+    
+    def message_top(self):
+        return self.message.split('\n')[0]
+
 class GroupedMessage(MessageBase):
     status          = models.PositiveIntegerField(default=0, choices=STATUS_LEVELS, db_index=True)
     times_seen      = models.PositiveIntegerField(default=1)
diff --git a/sentry/templates/sentry/group/details.html b/sentry/templates/sentry/group/details.html
index 926cd25203..ae44300069 100644
--- a/sentry/templates/sentry/group/details.html
+++ b/sentry/templates/sentry/group/details.html
@@ -38,7 +38,7 @@
         <ul class="messages" id="message_list">
             <li class="{% cycle 'row1' 'row2' %} level-{{ group.level }} active" id="group_{{ group.pk }}" data-sentry-count="{{ group.times_seen }}">
                 <span class="count count-digits-{{ group.times_seen|num_digits }}">{{ group.times_seen }}</span>
-                <h3>{% if group.view %}{{ group.view }}{% else %}{{ group.message }}{% endif %}</h3>
+                <h3>{% if group.view %}{{ group.view }}{% else %}{{ group.message_top }}{% endif %}</h3>
                 <span class="last_seen">{{ group.last_seen|timesince }}</span>
                 <span class="status status-{{ group.status }}">{{ group.get_status_display }}</span>
                 <p class="message">
@@ -150,6 +150,11 @@
                     {% endif %}
                 {% endwith %}
                 
+                {% if group.has_two_part_message %}
+                    <h2>Full Message</h2>
+                    <pre>{{ group.message }}</pre>
+                {% endif %}
+                
                 {% if traceback %}
 
                     <h2>Sample Traceback</h2>
diff --git a/sentry/templates/sentry/partial/_group.html b/sentry/templates/sentry/partial/_group.html
index 31e62eb345..9502679230 100644
--- a/sentry/templates/sentry/partial/_group.html
+++ b/sentry/templates/sentry/partial/_group.html
@@ -2,7 +2,7 @@
 
 <li class="{% cycle 'row1' 'row2' %} level-{{ group.level }}{% if priority %} priority-{{ priority }}{% endif %}" id="group_{{ group.pk }}" data-sentry-count="{{ group.times_seen }}">
     <span class="count count-digits-{{ group.times_seen|num_digits }}">{{ group.times_seen }}</span>
-    <h3><a href="{% url sentry-group group.pk %}">{% if group.view %}{{ group.view }}{% else %}{{ group.message }}{% endif %}</a></h3>
+    <h3><a href="{% url sentry-group group.pk %}">{% if group.view %}{{ group.view }}{% else %}{{ group.message_top }}{% endif %}</a></h3>
     <span class="last_seen">{{ group.last_seen|timesince }}</span>
     <span class="status status-{{ group.status }}">{{ group.get_status_display }}</span>
     <p class="message">
