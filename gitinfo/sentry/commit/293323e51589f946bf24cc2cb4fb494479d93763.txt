commit 293323e51589f946bf24cc2cb4fb494479d93763
Author: Daniel Griesser <daniel.griesser.86@gmail.com>
Date:   Thu Apr 20 15:30:27 2017 +0200

    Use dist of release instead of fetching it

diff --git a/src/sentry/lang/javascript/processor.py b/src/sentry/lang/javascript/processor.py
index 4226167755..1570cc5dbf 100644
--- a/src/sentry/lang/javascript/processor.py
+++ b/src/sentry/lang/javascript/processor.py
@@ -23,7 +23,7 @@ except ImportError:
 
 from sentry import http
 from sentry.interfaces.stacktrace import Stacktrace
-from sentry.models import EventError, Release, ReleaseFile, Distribution
+from sentry.models import EventError, Release, ReleaseFile
 from sentry.utils.cache import cache
 from sentry.utils.files import compress_file
 from sentry.utils.hashlib import md5_text
@@ -497,10 +497,7 @@ class JavaScriptStacktraceProcessor(StacktraceProcessor):
                 version=self.data['release'],
             )
             if self.data.get('dist'):
-                self.dist = Distribution.objects.get(
-                    release=self.release,
-                    name=self.data['dist']
-                )
+                self.dist = self.release.get_dist(self.data['dist'])
         self.populate_source_cache(frames)
         return True
 
diff --git a/src/sentry/models/release.py b/src/sentry/models/release.py
index f93f7ba102..86562c9700 100644
--- a/src/sentry/models/release.py
+++ b/src/sentry/models/release.py
@@ -212,6 +212,16 @@ class Release(Model):
             }
         )[0]
 
+    def get_dist(self, name):
+        from sentry.models import Distribution
+        try:
+            return Distribution.objects.get(
+                name=name,
+                release=self
+            )
+        except Distribution.DoesNotExist:
+            pass
+
     def add_project(self, project):
         """
         Add a project to this release.
