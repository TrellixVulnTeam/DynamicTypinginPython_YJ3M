commit 2f46cfff61f86a545bf38218cf04d06ae4bbaf56
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Aug 6 11:04:20 2015 -0700

    Add client api request and response metrics

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 63da2f2b8d..541f6bbc67 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -146,6 +146,17 @@ class APIView(BaseView):
                                     content_type='text/plain',
                                     status=500)
 
+        if helper.context.version:
+            metrics.incr('client-api.v%s.requests' % (
+                helper.context.version,
+            ))
+            metrics.incr('client-api.v%s.responses.%s' % (
+                helper.context.version, response.status_code
+            ))
+            metrics.incr('client-api.v%s.responses.%sxx' % (
+                helper.context.version, str(response.status_code)[0]
+            ))
+
         if response.status_code != 200 and origin:
             # We allow all origins on errors
             response['Access-Control-Allow-Origin'] = '*'
