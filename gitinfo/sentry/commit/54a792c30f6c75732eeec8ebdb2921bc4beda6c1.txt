commit 54a792c30f6c75732eeec8ebdb2921bc4beda6c1
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Wed Mar 20 23:38:25 2019 +0100

    ref: Measure event size in eventstream (#12480)
    
    * ref: Measure event size in eventstream
    
    * fix: Missing import
    
    * fix: Disable Percy for alternative acceptance test run
    
    * fix: Imported wrong metrics module

diff --git a/.travis.yml b/.travis.yml
index 22ca0cda4a..0ca37a3b8f 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -143,7 +143,7 @@ matrix:
 
     # XXX(markus): Remove after rust interfaces are done
     - python: 2.7
-      env: TEST_SUITE=acceptance SENTRY_TEST_USE_RUST_INTERFACE_RENORMALIZATION=1
+      env: TEST_SUITE=acceptance SENTRY_TEST_USE_RUST_INTERFACE_RENORMALIZATION=1 PERCY_ENABLE=0
       services:
         - memcached
         - redis-server
diff --git a/src/sentry/eventstream/kafka/protocol.py b/src/sentry/eventstream/kafka/protocol.py
index e532600f1e..0b80f30bb7 100644
--- a/src/sentry/eventstream/kafka/protocol.py
+++ b/src/sentry/eventstream/kafka/protocol.py
@@ -5,7 +5,7 @@ import logging
 from datetime import datetime
 
 from sentry.models import Event
-from sentry.utils import json
+from sentry.utils import json, metrics
 
 
 logger = logging.getLogger(__name__)
@@ -94,6 +94,8 @@ def get_task_kwargs_for_message(value):
     can be applied to a post-processing task, or ``None`` if no task should be
     dispatched.
     """
+
+    metrics.timing('evenstream.events.size.data', len(value))
     payload = json.loads(value)
 
     try:
