commit 3d5daf65d6f5df5e1255a1e36d644aa3a3f28c0d
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Dec 26 17:26:59 2012 -0800

    Improve navbar

diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index 7ebeeac160..8b71aaf858 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -4,6 +4,7 @@
 @baseFontSize: 13px;
 @grayDark: #404f60;
 @gray: #6d757e;
+@navbarInverseLinkBackgroundActive: #333;
 
 @linkColor: #4593DE;
 
@@ -74,6 +75,7 @@ h3 {
     height: 50px;
     background: url(../images/dashboard/navbar-bg.gif);
     border: 0;
+    padding-right: 0;
     border-bottom: 1px solid #2c333a;
     .box-shadow(0 1px 0 rgba(255,255,255, .5));
 
@@ -131,14 +133,14 @@ h3 {
   }
 
   .nav {
-    margin: 12px 0 0 10px;
+    margin: 13px 0 0 10px;
 
     > li {
-      margin: 0 0 0 14px;
+      margin: 0 0 0 10px;
       > a {
         color: #dde2e7;
         display: block;
-        padding: 3px;
+        padding: 3px 8px;
         text-shadow: 0 1px 3px rgba(0, 0, 0, .45);
         font-size: 13px;
       }
@@ -167,9 +169,13 @@ h3 {
         .border-radius(3px);
       }
 
-      &.active > a {
+      &.active > a,
+      &.active:hover > a,
+      &.active:focus > a {
         color: @navbarInverseLinkColorActive;
-        background-color: @navbarInverseLinkBackgroundActive;
+        #gradient > .vertical(rgba(0,0,0, .3), rgba(0,0,0, .1));
+        @shadow: inset 0 1px 2px rgba(0,0,0,.1), 0 1px 0px rgba(255,255,255,.15);
+        .box-shadow(@shadow);
       }
     }
   }
diff --git a/src/sentry/templates/sentry/header.html b/src/sentry/templates/sentry/header.html
index d7b6c68659..19b6231245 100644
--- a/src/sentry/templates/sentry/header.html
+++ b/src/sentry/templates/sentry/header.html
@@ -17,9 +17,9 @@
 
                 <ul class="nav">
                     {% if project %}
-                        <li{% if PAGE == 'dashboard' %} class="active"{% endif %}><a href="{% url sentry-stream project.slug %}">{% trans "Stream" %}</a></li>
-                        <li><a href="{% url sentry-manage-project project.slug %}">{% trans "Settings" %}</a></li>
-                        <li><a href="{% url sentry-project-client-help project.slug %}">{% trans "Client Configuration" %}</a></li>
+                        <li{% if SECTION == 'stream' %} class="active"{% endif %}><a href="{% url sentry-stream project.slug %}">{% trans "Stream" %}</a></li>
+                        <li{% if SECTION == 'settings' %} class="active"{% endif %}><a href="{% url sentry-manage-project project.slug %}">{% trans "Settings" %}</a></li>
+                        <li{% if SECTION == 'docs' %} class="active"{% endif %}><a href="{% url sentry-project-client-help project.slug %}">{% trans "Client Configuration" %}</a></li>
                     {% endif %}
                 </ul>
                 <ul class="nav pull-right">
diff --git a/src/sentry/web/frontend/docs.py b/src/sentry/web/frontend/docs.py
index 931d603bac..6a5b98174d 100644
--- a/src/sentry/web/frontend/docs.py
+++ b/src/sentry/web/frontend/docs.py
@@ -68,6 +68,7 @@ def client_help(request, project):
     context = {
         'page': 'client_help',
         'project': project,
+        'SECTION': 'docs',
     }
     context.update(get_key_context(request.user, project))
 
@@ -86,6 +87,7 @@ def client_guide(request, project, platform):
         'platform_title': platform.title(),
         'project': project,
         'page': 'client_help_%s' % (platform,),
+        'SECTION': 'docs',
     }
     context.update(get_key_context(request.user, project))
 
diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index 6b9314c694..9c4cecc95a 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -244,7 +244,7 @@ def group_list(request, project):
         'filters': response['filters'],
         'SORT_OPTIONS': SORT_OPTIONS,
         'HAS_TRENDING': has_trending(),
-        'PAGE': 'dashboard',
+        'SECTION': 'stream',
     }, request)
 
 
diff --git a/src/sentry/web/frontend/projects.py b/src/sentry/web/frontend/projects.py
index 82eafa1da7..20b6ffb5dd 100644
--- a/src/sentry/web/frontend/projects.py
+++ b/src/sentry/web/frontend/projects.py
@@ -195,6 +195,7 @@ def manage_project(request, project):
         'form': form,
         'project': project,
         'TEAM_LIST': team_list.values(),
+        'SECTION': 'settings',
     })
 
     return render_to_response('sentry/projects/manage.html', context, request)
@@ -224,6 +225,7 @@ def manage_project_team(request, project):
         'member_list': member_list,
         'pending_member_list': pending_member_list,
         'can_add_member': can_add_team_member(request.user, project.team),
+        'SECTION': 'settings',
     })
 
     return render_to_response('sentry/projects/team.html', context, request)
@@ -250,6 +252,7 @@ def manage_project_keys(request, project):
         'project': project,
         'key_list': key_list,
         'can_add_key': can_add_project_key(request.user, project),
+        'SECTION': 'settings',
     })
 
     return render_to_response('sentry/projects/keys.html', context, request)
@@ -304,6 +307,7 @@ def manage_project_tags(request, project):
         'page': 'tags',
         'project': project,
         'form': form,
+        'SECTION': 'settings',
     }
     return render_to_response('sentry/projects/manage_tags.html', context, request)
 
@@ -326,6 +330,7 @@ def manage_plugins(request, project):
     context.update({
         'page': 'plugins',
         'project': project,
+        'SECTION': 'settings',
     })
 
     return render_to_response('sentry/projects/plugins/list.html', context, request)
@@ -361,6 +366,7 @@ def configure_project_plugin(request, project, slug):
         'view': view,
         'project': project,
         'plugin': plugin,
+        'SECTION': 'settings',
     })
 
     return render_to_response('sentry/projects/plugins/configure.html', context, request)
