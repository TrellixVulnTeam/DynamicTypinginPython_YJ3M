commit 5469407f83d1b3cb75cc6e817f8b95f13782d983
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Wed Mar 16 17:23:41 2016 +0100

    Fall back to old method for project selector on highlight.  This fixes SF-NT

diff --git a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
index 16e8a4b4bd..6317351659 100644
--- a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
+++ b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
@@ -75,29 +75,10 @@ const ProjectSelector = React.createClass({
     this.refs.dropdownLink && this.refs.dropdownLink.close();
   },
 
-  highlight(text, highlightText) {
-    if (!highlightText) {
-      return text;
-    }
-    highlightText = highlightText.toLowerCase();
-    let idx = text.toLowerCase().indexOf(highlightText);
-    if (idx === -1) {
-      return text;
-    }
-    return (
-      <span>
-        {text.substr(0, idx)}
-        <strong className="highlight">
-          {text.substr(idx, highlightText.length)}
-        </strong>
-        {text.substr(idx + highlightText.length)}
-      </span>
-    );
-  },
-
   getProjectNode(team, project, highlightText, hasSingleTeam) {
     let projectId = project.slug;
-    let label = this.getProjectLabel(team, project, hasSingleTeam);
+    let label = this.getProjectLabel(team, project, hasSingleTeam,
+                                     highlightText);
 
     let menuItemProps = {
       key: projectId, // TODO: what if two projects w/ same name under diff orgs?
@@ -110,20 +91,43 @@ const ProjectSelector = React.createClass({
       ...this.getProjectUrlProps(project)
     };
 
-    return <MenuItem {...menuItemProps}>{this.highlight(label, highlightText)}</MenuItem>;
+    return <MenuItem {...menuItemProps}>{label}</MenuItem>;
   },
 
-  getProjectLabel(team, project, hasSingleTeam) {
-    let label;
+  getProjectLabel(team, project, hasSingleTeam, highlightText) {
+    let label, text;
     if (!hasSingleTeam && project.name.indexOf(team.name) === -1) {
       label = (
         <span>{team.name} / <ProjectLabel
             project={project} organization={this.props.organization}/></span>
       );
+      text = team.name + ' / ' + project.name;
     } else {
       label = <span>{project.name}</span>;
+      text = project.name;
     }
-    return label;
+
+    if (!highlightText) {
+      return label;
+    }
+
+    // in case we have something to highlight we just render a replacement
+    // selector without the callsigns.
+    // TODO(mitsuhiko): make this work with the project label.
+    highlightText = highlightText.toLowerCase();
+    let idx = text.toLowerCase().indexOf(highlightText);
+    if (idx === -1) {
+      return text;
+    }
+    return (
+      <span>
+        {text.substr(0, idx)}
+        <strong className="highlight">
+          {text.substr(idx, highlightText.length)}
+        </strong>
+        {text.substr(idx + highlightText.length)}
+      </span>
+    );
   },
 
   /**
