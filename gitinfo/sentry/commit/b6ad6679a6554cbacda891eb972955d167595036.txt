commit b6ad6679a6554cbacda891eb972955d167595036
Author: Ted Kaemming <ted@kaemming.com>
Date:   Tue Nov 24 20:41:40 2015 -0800

    Handle `Project.DoesNotExist` during digest delivery.
    
    This fixes https://app.getsentry.com/sentry/sentry/group/97906008/.

diff --git a/src/sentry/tasks/digests.py b/src/sentry/tasks/digests.py
index dff858d44b..46f5d931a5 100644
--- a/src/sentry/tasks/digests.py
+++ b/src/sentry/tasks/digests.py
@@ -1,15 +1,22 @@
 from __future__ import absolute_import
 
+import logging
 import time
 
 from sentry.digests.notifications import (
     build_digest,
     split_key,
 )
-from sentry.models import ProjectOption
+from sentry.models import (
+    Project,
+    ProjectOption,
+)
 from sentry.tasks.base import instrumented_task
 
 
+logger = logging.getLogger(__name__)
+
+
 @instrumented_task(
     name='sentry.tasks.digests.schedule_digests',
     queue='digests.scheduling')
@@ -39,7 +46,12 @@ def schedule_digests():
 def deliver_digest(key, schedule_timestamp=None):
     from sentry.app import digests
 
-    plugin, project = split_key(key)
+    try:
+        plugin, project = split_key(key)
+    except Project.DoesNotExist as error:
+        logger.info('Cannot deliver digest %r due to error: %s', key, error)
+        return
+
     minimum_delay = ProjectOption.objects.get_value(
         project,
         '{0}:digests:{1}'.format(plugin.get_conf_key(), 'minimum_delay'),
