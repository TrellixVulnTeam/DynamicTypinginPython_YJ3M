commit 04bdf9919d765eba5cffd5e09ae0cf1a7b1db164
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Sep 12 12:58:04 2017 -0700

    ref(build): Fix deprecated behavior in pytest

diff --git a/setup.cfg b/setup.cfg
index 5b7d92bc48..905b0dc93a 100644
--- a/setup.cfg
+++ b/setup.cfg
@@ -1,4 +1,4 @@
-[pytest]
+[tool:pytest]
 python_files = test*.py
 addopts = --tb=native -p no:doctest -p no:warnings
 norecursedirs = bin dist docs htmlcov script hooks node_modules .* {args}
diff --git a/src/sentry/utils/pytest/selenium.py b/src/sentry/utils/pytest/selenium.py
index 2217e637d9..5b8e02c326 100644
--- a/src/sentry/utils/pytest/selenium.py
+++ b/src/sentry/utils/pytest/selenium.py
@@ -224,9 +224,10 @@ def _environment(request):
     config._environment.append(('Driver', config.option.selenium_driver))
 
 
-@pytest.mark.tryfirst
-def pytest_runtest_makereport(item, call, __multicall__):
-    report = __multicall__.execute()
+@pytest.hookimpl(tryfirst=True, hookwrapper=True)
+def pytest_runtest_makereport(item, call):
+    outcome = yield
+    report = outcome.get_result()
     summary = []
     extra = getattr(report, 'extra', [])
     driver = getattr(item, '_driver', None)
@@ -238,7 +239,6 @@ def pytest_runtest_makereport(item, call, __multicall__):
     if summary:
         report.sections.append(('selenium', '\n'.join(summary)))
     report.extra = extra
-    return report
 
 
 def _gather_url(item, report, driver, summary, extra):
