commit 51daff80c5dab3e78f780dc4a7c9aca38039a7c1
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Jun 14 12:49:06 2016 -0700

    Handle API login when password is expired (#3484)
    
    Fixes SENTRY-1E2

diff --git a/src/sentry/api/endpoints/auth_index.py b/src/sentry/api/endpoints/auth_index.py
index 6dcbce6e38..3408fb4116 100644
--- a/src/sentry/api/endpoints/auth_index.py
+++ b/src/sentry/api/endpoints/auth_index.py
@@ -61,10 +61,15 @@ class AuthIndexEndpoint(Endpoint):
             return Response({
                 '2fa_required': True,
                 'message': 'Cannot sign-in with basic auth when 2fa is enabled.'
-            }, status=400)
+            }, status=403)
 
-        # Must use the real request object that Django knows about
-        auth.login(request._request, request.user)
+        try:
+            # Must use the real request object that Django knows about
+            auth.login(request._request, request.user)
+        except auth.AuthUserPasswordExpired:
+            return Response({
+                'message': 'Cannot sign-in with basic auth because password has expired.',
+            }, status=403)
 
         return self.get(request)
 
