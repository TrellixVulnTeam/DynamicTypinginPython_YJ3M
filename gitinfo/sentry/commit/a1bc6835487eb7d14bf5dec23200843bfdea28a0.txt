commit a1bc6835487eb7d14bf5dec23200843bfdea28a0
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Apr 16 22:21:00 2015 -0700

    Enforce utf-8 key names

diff --git a/src/sentry/tsdb/redis.py b/src/sentry/tsdb/redis.py
index 8e0b240c7d..f6de62b4a4 100644
--- a/src/sentry/tsdb/redis.py
+++ b/src/sentry/tsdb/redis.py
@@ -81,6 +81,9 @@ class RedisTSDB(BaseTSDB):
         # Redis, whereas long strings (say tag values) will store in a more
         # efficient hashed format.
         if not isinstance(key, six.integer_types):
+            # enforce utf-8 encoding
+            if isinstance(key, unicode):
+                key = key.encode('utf-8')
             return md5(repr(key)).hexdigest()
         return key
 
