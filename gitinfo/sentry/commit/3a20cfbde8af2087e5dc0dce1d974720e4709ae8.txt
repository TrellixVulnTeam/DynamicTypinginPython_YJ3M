commit 3a20cfbde8af2087e5dc0dce1d974720e4709ae8
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Feb 13 21:26:16 2013 -0800

    Better hasing of exceptions when a stacktrace is present

diff --git a/src/sentry/interfaces.py b/src/sentry/interfaces.py
index b2baa24de3..b7be8d67cc 100644
--- a/src/sentry/interfaces.py
+++ b/src/sentry/interfaces.py
@@ -349,7 +349,11 @@ class Stacktrace(Interface):
     def get_composite_hash(self, interfaces):
         output = self.get_hash()
         if 'sentry.interfaces.Exception' in interfaces:
-            output.append(interfaces['sentry.interfaces.Exception'].type)
+            exc = interfaces['sentry.interfaces.Exception']
+            if exc.type:
+                output.append(exc.type)
+            elif not output:
+                output.append(exc.value)
         return output
 
     def get_hash(self):
