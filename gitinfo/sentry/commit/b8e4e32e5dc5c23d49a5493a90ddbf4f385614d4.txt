commit b8e4e32e5dc5c23d49a5493a90ddbf4f385614d4
Author: Max Bittker <maxbittker@gmail.com>
Date:   Wed Feb 22 20:32:08 2017 -0500

    add kaspersky lab to browser extension filters (#4952)
    
    * add kapersky lab to browser extension filters
    
    * match->search

diff --git a/src/sentry/filters/browser_extensions.py b/src/sentry/filters/browser_extensions.py
index ea79a2edbf..6b35cbcbd5 100644
--- a/src/sentry/filters/browser_extensions.py
+++ b/src/sentry/filters/browser_extensions.py
@@ -48,6 +48,8 @@ EXTENSION_EXC_SOURCES = re.compile('|'.join((
     # Other
     r'webappstoolbarba\.texthelp\.com\/',
     r'metrics\.itunes\.apple\.com\.edgesuite\.net\/',
+    # Kaspersky Protection browser extension
+    r'kaspersky-labs\.com',
 )), re.I)
 
 
@@ -83,7 +85,7 @@ class BrowserExtensionsFilter(Filter):
 
         exc_source = self.get_exception_source(data)
         if exc_source:
-            if EXTENSION_EXC_SOURCES.match(exc_source):
+            if EXTENSION_EXC_SOURCES.search(exc_source):
                 return True
 
         return False
diff --git a/tests/sentry/filters/test_browser_extensions.py b/tests/sentry/filters/test_browser_extensions.py
index f4d90a22d0..64faf95eb0 100644
--- a/tests/sentry/filters/test_browser_extensions.py
+++ b/tests/sentry/filters/test_browser_extensions.py
@@ -47,6 +47,10 @@ class BrowserExtensionsFilterTest(TestCase):
         data = self.get_mock_data(exc_value='null is not an object (evaluating \'elt.parentNode\')')
         assert self.apply_filter(data)
 
+    def test_filters_kaspersky_extension(self):
+        data = self.get_mock_data(exc_source='https://ff.kis.v2.scr.kaspersky-labs.com/14E4A3DB-9B72-1047-8296-E970532BF7B7/main.js')
+        assert self.apply_filter(data)
+
     def test_filters_chrome_extensions(self):
         data = self.get_mock_data(exc_source='chrome://my-extension/or/something')
         assert self.apply_filter(data)
