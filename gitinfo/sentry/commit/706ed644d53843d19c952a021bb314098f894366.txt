commit 706ed644d53843d19c952a021bb314098f894366
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Mon Jan 21 13:11:26 2019 +0100

    feat: Add normalize in rust flag (#11629)

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index ce824bc0d9..1e104a27aa 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -441,12 +441,15 @@ class EventManager(object):
 
         self._data = data
 
+    def use_rust_normalize(self):
+        return ENABLE_RUST
+
     def normalize(self):
         if self._normalized:
             raise RuntimeError('Already normalized')
         self._normalized = True
 
-        if ENABLE_RUST:
+        if self.use_rust_normalize():
             from semaphore.processing import StoreNormalizer
             rust_normalizer = StoreNormalizer(
                 geoip_lookup=rust_geoip,
diff --git a/src/sentry/options/defaults.py b/src/sentry/options/defaults.py
index 935cb25029..b54eb08e90 100644
--- a/src/sentry/options/defaults.py
+++ b/src/sentry/options/defaults.py
@@ -157,3 +157,5 @@ register('eventstream.kafka.send-post_process-task', type=Bool, default=True)
 # Ingest refactor
 register('store.process-in-kafka', type=Bool, default=False)
 register('store.kafka-sample-rate', default=0.0)
+register('store.projects-normalize-in-rust-opt-in', type=Sequence, default=[])
+register('store.projects-normalize-in-rust-opt-out', type=Sequence, default=[])
