commit 55c376c36e476fe4521348b46488607c388a0441
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Wed Apr 19 14:04:26 2017 +0200

    Added basic distribution test

diff --git a/src/sentry/constants.py b/src/sentry/constants.py
index 62f67baa86..34e0d1c900 100644
--- a/src/sentry/constants.py
+++ b/src/sentry/constants.py
@@ -160,6 +160,7 @@ CLIENT_RESERVED_ATTRS = (
     'tags',
     'platform',
     'release',
+    'distribution',
     'environment',
 )
 
diff --git a/tests/sentry/coreapi/tests.py b/tests/sentry/coreapi/tests.py
index eac1c9f13e..b082776edb 100644
--- a/tests/sentry/coreapi/tests.py
+++ b/tests/sentry/coreapi/tests.py
@@ -363,6 +363,17 @@ class ValidateDataTest(BaseAPITest):
         assert data['errors'][0]['name'] == 'release'
         assert data['errors'][0]['value'] == 'a' * 65
 
+    def test_distribution_too_long(self):
+        data = self.helper.validate_data(self.project, {
+            'release': 'a' * 62,
+            'distribution': 'b' * 65,
+        })
+        assert not data.get('distribution')
+        assert len(data['errors']) == 1
+        assert data['errors'][0]['type'] == 'value_too_long'
+        assert data['errors'][0]['name'] == 'distribution'
+        assert data['errors'][0]['value'] == 'b' * 65
+
     def test_release_as_non_string(self):
         data = self.helper.validate_data(self.project, {
             'release': 42,
