commit 8042041c4ab11f5a99f6ad1e915e4d990b7d400f
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Tue Nov 5 16:08:45 2019 +0100

    fix: Fix invocation of fnmatch with None (#15441)

diff --git a/src/sentry/ownership/grammar.py b/src/sentry/ownership/grammar.py
index 2dcb0279a5..9ffb93038d 100644
--- a/src/sentry/ownership/grammar.py
+++ b/src/sentry/ownership/grammar.py
@@ -90,7 +90,7 @@ class Matcher(namedtuple("Matcher", "type pattern")):
             url = data["request"]["url"]
         except KeyError:
             return False
-        return glob_match(url, self.pattern, ignorecase=True)
+        return url and glob_match(url, self.pattern, ignorecase=True)
 
     def test_path(self, data):
         for frame in _iter_frames(data):
diff --git a/tests/sentry/ownership/test_grammar.py b/tests/sentry/ownership/test_grammar.py
index 261c696b34..b59e065e35 100644
--- a/tests/sentry/ownership/test_grammar.py
+++ b/tests/sentry/ownership/test_grammar.py
@@ -58,6 +58,11 @@ def test_matcher_test_url():
     assert not Matcher("url", "*.js").test({})
 
 
+def test_matcher_test_none():
+    data = {"request": {"url": None}}
+    assert not Matcher("url", "").test(data)
+
+
 def test_matcher_test_exception():
     data = {
         "exception": {
