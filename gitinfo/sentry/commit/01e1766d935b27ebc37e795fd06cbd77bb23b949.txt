commit 01e1766d935b27ebc37e795fd06cbd77bb23b949
Author: Dena Mwangi <dena@getsentry.com>
Date:   Wed Feb 27 14:17:21 2019 -0800

    feat(business): Add power feature icons  (#12114)

diff --git a/src/sentry/static/sentry/app/components/hovercard.jsx b/src/sentry/static/sentry/app/components/hovercard.jsx
index 19d41c39ab..4d6b6b58c8 100644
--- a/src/sentry/static/sentry/app/components/hovercard.jsx
+++ b/src/sentry/static/sentry/app/components/hovercard.jsx
@@ -15,6 +15,7 @@ class Hovercard extends React.Component {
     containerClassName: PropTypes.string,
     header: PropTypes.node,
     body: PropTypes.node,
+    bodyClassName: PropTypes.string,
   };
 
   static defaultProps = {
@@ -81,7 +82,7 @@ class Hovercard extends React.Component {
   }
 
   render() {
-    const {containerClassName, className, header, body} = this.props;
+    const {bodyClassName, containerClassName, className, header, body} = this.props;
     const {rendered, visible, position} = this.state;
 
     // Maintain the hovercard class name for BC with less styles
@@ -104,7 +105,7 @@ class Hovercard extends React.Component {
             innerRef={this.cardElement}
           >
             {header && <Header>{header}</Header>}
-            {body && <Body>{body}</Body>}
+            {body && <Body className={bodyClassName}>{body}</Body>}
           </StyledHovercard>
         )}
       </Container>
diff --git a/src/sentry/static/sentry/app/components/sidebar/broadcasts.jsx b/src/sentry/static/sentry/app/components/sidebar/broadcasts.jsx
index 50ecf56f01..8392734ae1 100644
--- a/src/sentry/static/sentry/app/components/sidebar/broadcasts.jsx
+++ b/src/sentry/static/sentry/app/components/sidebar/broadcasts.jsx
@@ -150,6 +150,7 @@ const Broadcasts = createReactClass({
           icon={<InlineSvg src="icon-broadcast" size="22px" />}
           label={t("What's new")}
           onClick={this.handleShowPanel}
+          id="broadcasts"
         />
 
         {showPanel &&
diff --git a/src/sentry/static/sentry/app/components/sidebar/help.jsx b/src/sentry/static/sentry/app/components/sidebar/help.jsx
index cab6ed96e8..986b634781 100644
--- a/src/sentry/static/sentry/app/components/sidebar/help.jsx
+++ b/src/sentry/static/sentry/app/components/sidebar/help.jsx
@@ -44,6 +44,7 @@ class SidebarHelp extends React.Component {
                   hasPanel={false}
                   icon={<InlineSvg src="icon-circle-question" />}
                   label={t('Help')}
+                  id="help"
                 />
               </HelpActor>
 
diff --git a/src/sentry/static/sentry/app/components/sidebar/index.jsx b/src/sentry/static/sentry/app/components/sidebar/index.jsx
index 9ec07221f2..dec410cda2 100644
--- a/src/sentry/static/sentry/app/components/sidebar/index.jsx
+++ b/src/sentry/static/sentry/app/components/sidebar/index.jsx
@@ -15,6 +15,7 @@ import {load as loadIncidents} from 'app/actionCreators/incidents';
 import {t} from 'app/locale';
 import ConfigStore from 'app/stores/configStore';
 import Feature from 'app/components/acl/feature';
+import HookStore from 'app/stores/hookStore';
 import InlineSvg from 'app/components/inlineSvg';
 import PreferencesStore from 'app/stores/preferencesStore';
 import SentryTypes from 'app/sentryTypes';
@@ -261,6 +262,7 @@ class Sidebar extends React.Component {
                     icon={<InlineSvg src="icon-issues" />}
                     label={t('Issues')}
                     to={`/organizations/${organization.slug}/issues/`}
+                    id="issues"
                   />
                 </Feature>
 
@@ -275,6 +277,7 @@ class Sidebar extends React.Component {
                     icon={<InlineSvg src="icon-stack" />}
                     label={t('Events')}
                     to={`/organizations/${organization.slug}/events/`}
+                    id="events"
                   />
                 </Feature>
 
@@ -290,6 +293,7 @@ class Sidebar extends React.Component {
                       icon={<InlineSvg src="icon-releases" />}
                       label={t('Releases')}
                       to={`/organizations/${organization.slug}/releases/`}
+                      id="releases"
                     />
                     <SidebarItem
                       {...sidebarItemProps}
@@ -301,6 +305,7 @@ class Sidebar extends React.Component {
                       icon={<InlineSvg src="icon-support" />}
                       label={t('User Feedback')}
                       to={`/organizations/${organization.slug}/user-feedback/`}
+                      id="user-feedback"
                     />
                   </React.Fragment>
                 )}
@@ -313,6 +318,7 @@ class Sidebar extends React.Component {
                       icon={<InlineSvg src="icon-discover" />}
                       label={t('Discover')}
                       to={`/organizations/${organization.slug}/discover/`}
+                      id="discover"
                     />
                   </Feature>
                 )}
@@ -327,6 +333,7 @@ class Sidebar extends React.Component {
                     icon={<InlineSvg src="icon-health" />}
                     label={t('Dashboards')}
                     to={`/organizations/${organization.slug}/dashboards/`}
+                    id="customizable-dashboards"
                   />
                   <SidebarItem
                     {...sidebarItemProps}
@@ -334,6 +341,7 @@ class Sidebar extends React.Component {
                     icon={<InlineSvg src="icon-discover" />}
                     label={t('Discover')}
                     to={`/organizations/${organization.slug}/discover/`}
+                    id="discover"
                   />
                 </SidebarSection>
               </Feature>
@@ -349,6 +357,7 @@ class Sidebar extends React.Component {
                   icon={<InlineSvg src="icon-labs" />}
                   label={t('Monitors')}
                   to={`/organizations/${organization.slug}/monitors/`}
+                  id="monitors"
                 />
               </Feature>
 
@@ -360,6 +369,7 @@ class Sidebar extends React.Component {
                     icon={<InlineSvg src="icon-user" />}
                     label={t('Assigned to me')}
                     to={`/organizations/${organization.slug}/issues/assigned/`}
+                    id="assigned"
                   />
                   <SidebarItem
                     {...sidebarItemProps}
@@ -367,6 +377,7 @@ class Sidebar extends React.Component {
                     icon={<InlineSvg src="icon-star" />}
                     label={t('Bookmarked issues')}
                     to={`/organizations/${organization.slug}/issues/bookmarks/`}
+                    id="bookmarks"
                   />
                   <SidebarItem
                     {...sidebarItemProps}
@@ -374,6 +385,7 @@ class Sidebar extends React.Component {
                     icon={<InlineSvg src="icon-history" />}
                     label={t('Recently viewed')}
                     to={`/organizations/${organization.slug}/issues/history/`}
+                    id="history"
                   />
                 </SidebarSection>
               )}
@@ -385,6 +397,7 @@ class Sidebar extends React.Component {
                   icon={<InlineSvg src="icon-activity" />}
                   label={t('Activity')}
                   to={`/organizations/${organization.slug}/activity/`}
+                  id="activity"
                 />
                 <SidebarItem
                   {...sidebarItemProps}
@@ -392,6 +405,7 @@ class Sidebar extends React.Component {
                   icon={<InlineSvg src="icon-stats" />}
                   label={t('Stats')}
                   to={`/organizations/${organization.slug}/stats/`}
+                  id="stats"
                 />
               </SidebarSection>
 
@@ -402,6 +416,7 @@ class Sidebar extends React.Component {
                   icon={<InlineSvg src="icon-settings" />}
                   label={t('Settings')}
                   to={`/settings/${organization.slug}/`}
+                  id="settings"
                 />
               </SidebarSection>
             </React.Fragment>
@@ -411,6 +426,11 @@ class Sidebar extends React.Component {
         {hasOrganization && (
           <SidebarSectionGroup>
             <SidebarSection>
+              {HookStore.get('sidebar:bottom-items').length > 0 &&
+                HookStore.get('sidebar:bottom-items')[0]({
+                  organization,
+                  ...sidebarItemProps,
+                })}
               <SidebarHelp
                 orientation={orientation}
                 collapsed={collapsed}
diff --git a/src/sentry/static/sentry/app/components/sidebar/sidebarItem.jsx b/src/sentry/static/sentry/app/components/sidebar/sidebarItem.jsx
index ed2283776c..4c5f53e56c 100644
--- a/src/sentry/static/sentry/app/components/sidebar/sidebarItem.jsx
+++ b/src/sentry/static/sentry/app/components/sidebar/sidebarItem.jsx
@@ -3,6 +3,8 @@ import PropTypes from 'prop-types';
 import React from 'react';
 import styled, {css} from 'react-emotion';
 
+import HookOrDefault from 'app/components/hookOrDefault';
+
 import Link from '../link';
 import TextOverflow from '../textOverflow';
 import Tooltip from '../tooltip';
@@ -69,6 +71,12 @@ class SidebarItem extends React.Component {
 
     const isTop = orientation === 'top';
     const placement = isTop ? 'bottom' : 'right';
+    const LabelHook = HookOrDefault({
+      hookName: 'sidebar:item-label',
+      defaultComponent: ({children}) => {
+        return <React.Fragment>{children}</React.Fragment>;
+      },
+    });
 
     return (
       <Tooltip
@@ -89,7 +97,9 @@ class SidebarItem extends React.Component {
             {!collapsed &&
               !isTop && (
                 <SidebarItemLabel>
-                  <TextOverflow>{label}</TextOverflow>
+                  <LabelHook id={this.props.id}>
+                    <TextOverflow>{label}</TextOverflow>
+                  </LabelHook>
                 </SidebarItemLabel>
               )}
             {badge > 0 && (
@@ -192,6 +202,9 @@ const SidebarItemLabel = styled('span')`
   white-space: nowrap;
   opacity: 1;
   flex: 1;
+  display: flex;
+  align-items: center;
+  justify-content: space-between;
 `;
 
 const getCollapsedBadgeStyle = ({collapsed, theme}) => {
diff --git a/src/sentry/static/sentry/app/stores/hookStore.jsx b/src/sentry/static/sentry/app/stores/hookStore.jsx
index 4ccf699f9c..0fdc83e121 100644
--- a/src/sentry/static/sentry/app/stores/hookStore.jsx
+++ b/src/sentry/static/sentry/app/stores/hookStore.jsx
@@ -33,6 +33,8 @@ const validHookNames = new Set([
   'organization:header',
   'sidebar:help-menu',
   'sidebar:organization-dropdown-menu',
+  'sidebar:bottom-items',
+  'sidebar:item-label',
 
   // Used to provide a component for integration features.
   'integrations:feature-gates',
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsNavItem.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsNavItem.jsx
index 9ca1dc9197..95375bf6d6 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsNavItem.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsNavItem.jsx
@@ -4,6 +4,7 @@ import React from 'react';
 import styled from 'react-emotion';
 
 import Badge from 'app/components/badge';
+import HookOrDefault from 'app/components/hookOrDefault';
 import Tag from 'app/views/settings/components/tag';
 
 class SettingsNavItem extends React.Component {
@@ -11,10 +12,18 @@ class SettingsNavItem extends React.Component {
     label: PropTypes.node.isRequired,
     badge: PropTypes.node,
     index: PropTypes.bool,
+    id: PropTypes.string,
   };
 
   render() {
-    const {badge, label, index, ...props} = this.props;
+    const {badge, label, index, id, ...props} = this.props;
+
+    const LabelHook = HookOrDefault({
+      hookName: 'sidebar:item-label',
+      defaultComponent: ({children}) => {
+        return <React.Fragment>{children}</React.Fragment>;
+      },
+    });
 
     let renderedBadge = '';
 
@@ -30,7 +39,9 @@ class SettingsNavItem extends React.Component {
 
     return (
       <StyledNavItem onlyActiveOnIndex={index} activeClassName="active" {...props}>
-        {label} {badge ? renderedBadge : null}
+        <LabelHook id={id}>{label}</LabelHook>
+
+        {badge ? renderedBadge : null}
       </StyledNavItem>
     );
   }
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsNavigationGroup.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsNavigationGroup.jsx
index c4b89f58fd..cec8aac778 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsNavigationGroup.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsNavigationGroup.jsx
@@ -25,6 +25,7 @@ export default class NavigationGroup extends React.Component {
     project: SentryTypes.Project,
     access: PropTypes.object,
     features: PropTypes.object,
+    id: PropTypes.string,
   };
 
   static contextTypes = {
@@ -38,7 +39,7 @@ export default class NavigationGroup extends React.Component {
     return (
       <NavSection data-test-id={name}>
         <SettingsHeading>{name}</SettingsHeading>
-        {items.map(({path, title, index, show, badge}) => {
+        {items.map(({path, title, index, show, badge, id}) => {
           if (typeof show === 'function' && !show(this.props)) return null;
           if (typeof show !== 'undefined' && !show) return null;
           const badgeResult = typeof badge === 'function' ? badge(this.props) : null;
@@ -54,6 +55,7 @@ export default class NavigationGroup extends React.Component {
               label={title}
               index={index}
               badge={badgeResult}
+              id={id}
             />
           );
         })}
diff --git a/src/sentry/static/sentry/app/views/settings/organization/navigationConfiguration.jsx b/src/sentry/static/sentry/app/views/settings/organization/navigationConfiguration.jsx
index 23ebb0d194..85abc454cf 100644
--- a/src/sentry/static/sentry/app/views/settings/organization/navigationConfiguration.jsx
+++ b/src/sentry/static/sentry/app/views/settings/organization/navigationConfiguration.jsx
@@ -11,16 +11,19 @@ const organizationNavigation = [
         title: t('General Settings'),
         index: true,
         description: t('Configure general settings for an organization'),
+        id: 'general',
       },
       {
         path: `${pathPrefix}/projects/`,
         title: t('Projects'),
         description: t("View and manage an organization's projects"),
+        id: 'projects',
       },
       {
         path: `${pathPrefix}/teams/`,
         title: t('Teams'),
         description: t("Manage an organization's teams"),
+        id: 'teams',
       },
       {
         path: `${pathPrefix}/members/`,
@@ -34,22 +37,26 @@ const organizationNavigation = [
         },
         show: ({access}) => access.has('member:read'),
         description: t('Manage user membership for an organization'),
+        id: 'members',
       },
       {
         path: `${pathPrefix}/auth/`,
         title: t('Auth'),
         description: t('Configure single sign-on'),
+        id: 'sso-saml2',
       },
       {
         path: `${pathPrefix}/api-keys/`,
         title: t('API Keys'),
         show: ({access, features}) => features.has('api-keys') && access.has('org:admin'),
+        id: 'api-keys',
       },
       {
         path: `${pathPrefix}/audit-log/`,
         title: t('Audit Log'),
         show: ({access}) => access.has('org:write'),
         description: t('View the audit log for an organization'),
+        id: 'audit-log',
       },
       {
         path: `${pathPrefix}/rate-limits/`,
@@ -57,11 +64,13 @@ const organizationNavigation = [
         show: ({access, features}) =>
           features.has('legacy-rate-limits') && access.has('org:write'),
         description: t('Configure rate limits for all projects in the organization'),
+        id: 'rate-limits',
       },
       {
         path: `${pathPrefix}/repos/`,
         title: t('Repositories'),
         description: t('Manage repositories connected to the organization'),
+        id: 'repos',
       },
       {
         path: `${pathPrefix}/integrations/`,
@@ -69,12 +78,14 @@ const organizationNavigation = [
         description: t(
           'Manage organization-level integrations, including: Slack, Github, Bitbucket, Jira, and Azure DevOps'
         ),
+        id: 'integrations',
       },
       {
         path: `${pathPrefix}/developer-settings/`,
         title: t('Developer Settings'),
         show: ({access, features}) => features.has('sentry-apps'),
         description: t('Manage developer applications'),
+        id: 'developer-settings',
       },
     ],
   },
