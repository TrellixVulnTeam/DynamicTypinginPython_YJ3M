commit 24aed77974cf9874cda6fe077155b3025085bcb0
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Thu May 16 09:10:28 2019 -0700

    feat(ui): Add DatePickerField when creating an Incident [SEN-634] (#13216)
    
    This allows you to pick a start date when creating a new (manual) Incident
    
    Fixes SEN-634

diff --git a/src/sentry/static/sentry/app/actionCreators/incident.jsx b/src/sentry/static/sentry/app/actionCreators/incident.jsx
index 8e838836b3..f2340458f2 100644
--- a/src/sentry/static/sentry/app/actionCreators/incident.jsx
+++ b/src/sentry/static/sentry/app/actionCreators/incident.jsx
@@ -13,7 +13,13 @@ import {t} from 'app/locale';
  * @param {String} title Title of the incident
  * @param {String[]} groups List of group ids
  */
-export async function createIncident(api, organization, title, groups) {
+export async function createIncident(
+  api,
+  organization,
+  title,
+  groups,
+  dateStarted = new Date()
+) {
   addLoadingMessage(t('Creating new incident...'));
 
   try {
@@ -24,7 +30,7 @@ export async function createIncident(api, organization, title, groups) {
         data: {
           title,
           groups,
-          dateStarted: new Date(),
+          dateStarted,
           query: '',
         },
       }
diff --git a/src/sentry/static/sentry/app/components/modals/createIncidentModal.jsx b/src/sentry/static/sentry/app/components/modals/createIncidentModal.jsx
index 916a7c1e9f..a3cfba615b 100644
--- a/src/sentry/static/sentry/app/components/modals/createIncidentModal.jsx
+++ b/src/sentry/static/sentry/app/components/modals/createIncidentModal.jsx
@@ -4,6 +4,7 @@ import React from 'react';
 
 import {createIncident} from 'app/actionCreators/incident';
 import {t} from 'app/locale';
+import DatePickerField from 'app/views/settings/components/forms/datePickerField';
 import Form from 'app/views/settings/components/forms/form';
 import SentryTypes from 'app/sentryTypes';
 import TextField from 'app/views/settings/components/forms/textField';
@@ -26,7 +27,13 @@ class CreateIncidentModal extends React.Component {
     setFormSavingState();
 
     try {
-      const incident = await createIncident(api, organization, data.title, issues);
+      const incident = await createIncident(
+        api,
+        organization,
+        data.title,
+        issues,
+        data.dateStarted
+      );
       onSuccess(incident);
     } catch (err) {
       onError(err);
@@ -63,6 +70,9 @@ class CreateIncidentModal extends React.Component {
             onSubmit={this.handleSubmit}
             onSubmitSuccess={this.handleSuccess}
             requireChanges
+            initialData={{
+              date: new Date(),
+            }}
           >
             <TextField
               name="title"
@@ -74,6 +84,15 @@ class CreateIncidentModal extends React.Component {
               inline={false}
               flexibleControlStateSize
             />
+            <DatePickerField
+              name="dateStarted"
+              label={t('Date Started')}
+              help={t('This should be around when the incident first began.')}
+              required
+              stacked
+              inline={false}
+              flexibleControlStateSize
+            />
           </Form>
         </Body>
       </React.Fragment>
