commit b5140dbca1697b83593a5eddadca80e81572ced1
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Feb 15 12:14:48 2016 -0800

    Correct behavior for querying on events

diff --git a/src/sentry/utils/apidocs.py b/src/sentry/utils/apidocs.py
index f3b263f61f..b9f760af2b 100644
--- a/src/sentry/utils/apidocs.py
+++ b/src/sentry/utils/apidocs.py
@@ -406,7 +406,7 @@ class Runner(object):
                 project=project,
             ).delete()
             Event.objects.filter(
-                project=project,
+                project_id=project.id,
             ).delete()
             project.delete()
 
@@ -423,7 +423,7 @@ class Runner(object):
                 project__organization=org,
             ).delete()
             Event.objects.filter(
-                project__organization=org,
+                project_id__in=org.project_set.values('id'),
             ).delete()
             org.delete()
 
