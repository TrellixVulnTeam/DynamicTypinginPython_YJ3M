commit 7aa676f5f62592407a26d8beeebb03384aecf0cb
Author: josh <josh@jrl.ninja>
Date:   Thu Dec 5 11:43:38 2019 -0800

    feat(django 1.10): disable DATA_UPLOAD_MAX_MEMORY_SIZE for now (#15920)
    
    DATA_UPLOAD_MAX_MEMORY_SIZE was added in Django 1.10, but we currently rely on some hacks in our middleware which set Content-Length to be very large in certain cases. The easiest way to move forward with the Django upgrade is to emulate previous behavior in Django <= 1.9 which does not have this check, but we'll want to look into this soon.

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 2cd544894e..0dd88c4433 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -276,6 +276,14 @@ MIDDLEWARE_CLASSES = (
 
 ROOT_URLCONF = "sentry.conf.urls"
 
+# TODO(joshuarli): Django 1.10 introduced this option, which restricts the size of a
+# request body. We have some middleware in sentry.middleware.proxy that sets the
+# Content Length to max uint32 in certain cases related to minidump.
+# Once relay's fully rolled out, that can be deleted.
+# Until then, the safest and easiest thing to do is to disable this check
+# to leave things the way they were with Django <1.9.
+DATA_UPLOAD_MAX_MEMORY_SIZE = None
+
 TEMPLATES = [
     {
         "BACKEND": "django.template.backends.django.DjangoTemplates",
