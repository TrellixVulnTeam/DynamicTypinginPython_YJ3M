commit a5a5679331284486b8332a4122888ff77a9d1fd7
Author: Dan Fuller <dfuller@sentry.io>
Date:   Thu Oct 31 17:49:04 2019 -0700

    ref: Use redis clients properly
    
    Uses changes from matt's pr here: https://github.com/getsentry/sentry/pull/15377
    
    And relies on having setting in https://github.com/getsentry/getsentry/pull/3293 merged

diff --git a/src/sentry/incidents/subscription_processor.py b/src/sentry/incidents/subscription_processor.py
index 9553061783..36139706cf 100644
--- a/src/sentry/incidents/subscription_processor.py
+++ b/src/sentry/incidents/subscription_processor.py
@@ -392,9 +392,5 @@ def update_alert_rule_stats(alert_rule, subscription, last_update, alert_counts,
 
 
 def get_redis_client():
-    cluster_key = getattr(settings, "SENTRY_INCIDENT_RULES_REDIS_CLUSTER", None)
-    if cluster_key is None:
-        client = redis.clusters.get("default").get_local_client(0)
-    else:
-        client = redis.redis_clusters.get(cluster_key)
-    return client
+    cluster_key = getattr(settings, "SENTRY_INCIDENT_RULES_REDIS_CLUSTER", "default")
+    return redis.redis_clusters.get(cluster_key)
