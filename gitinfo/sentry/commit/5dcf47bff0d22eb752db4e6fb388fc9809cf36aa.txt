commit 5dcf47bff0d22eb752db4e6fb388fc9809cf36aa
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Feb 12 14:23:16 2013 -0800

    Expire fetch_javascript_source after 15 minutes

diff --git a/src/sentry/manager.py b/src/sentry/manager.py
index ad25fca067..f444efd8b5 100644
--- a/src/sentry/manager.py
+++ b/src/sentry/manager.py
@@ -484,7 +484,7 @@ class GroupManager(BaseManager, ChartMixin):
 
         if settings.SCRAPE_JAVASCRIPT_CONTEXT and event.platform == 'javascript' and not is_sample:
             try:
-                maybe_delay(fetch_javascript_source, event)
+                maybe_delay(fetch_javascript_source, event, expires=3600)
             except Exception, e:
                 transaction.rollback_unless_managed(using=group._state.db)
                 logger.exception(u'Error fetching javascript source: %s', e)
diff --git a/tests/sentry/manager/tests.py b/tests/sentry/manager/tests.py
index eccb573363..439e28c74b 100644
--- a/tests/sentry/manager/tests.py
+++ b/tests/sentry/manager/tests.py
@@ -224,7 +224,7 @@ class SentryManagerTest(TestCase):
         with self.Settings(SENTRY_SCRAPE_JAVASCRIPT_CONTEXT=True):
             event = Group.objects.from_kwargs(1, message='hello', platform='javascript')
 
-            maybe_delay.assert_any_call(fetch_javascript_source, event)
+            maybe_delay.assert_any_call(fetch_javascript_source, event, expires=900)
 
     def test_add_tags(self):
         event = Group.objects.from_kwargs(1, message='rrr')
