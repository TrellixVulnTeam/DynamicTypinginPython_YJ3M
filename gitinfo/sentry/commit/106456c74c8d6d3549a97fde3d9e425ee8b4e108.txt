commit 106456c74c8d6d3549a97fde3d9e425ee8b4e108
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jul 30 12:30:58 2015 -0700

    Correct call to get_annotations

diff --git a/src/sentry/api/serializers/models/group.py b/src/sentry/api/serializers/models/group.py
index 0c657640d7..8419a40a79 100644
--- a/src/sentry/api/serializers/models/group.py
+++ b/src/sentry/api/serializers/models/group.py
@@ -83,7 +83,7 @@ class GroupSerializer(Serializer):
             for plugin in plugins.for_project(project=item.project, version=1):
                 safe_execute(plugin.tags, None, item, annotations)
             for plugin in plugins.for_project(project=item.project, version=2):
-                annotations.extend(safe_execute(plugin.get_annotations, item) or ())
+                annotations.extend(safe_execute(plugin.get_annotations, group=item) or ())
 
             result[item] = {
                 'assigned_to': serialize(assignees.get(item.id)),
diff --git a/src/sentry/templatetags/sentry_plugins.py b/src/sentry/templatetags/sentry_plugins.py
index 025d6970c3..d72c248b28 100644
--- a/src/sentry/templatetags/sentry_plugins.py
+++ b/src/sentry/templatetags/sentry_plugins.py
@@ -84,7 +84,7 @@ def get_annotations(group, request=None):
 
     annotation_list = []
     for plugin in plugins.for_project(project, version=2):
-        for value in (safe_execute(plugin.get_annotations, request, group) or ()):
+        for value in (safe_execute(plugin.get_annotations, group=group) or ()):
             annotation = safe_execute(Annotation, **value)
             if annotation:
                 annotation_list.append(annotation)
diff --git a/tests/sentry/templatetags/test_sentry_plugins.py b/tests/sentry/templatetags/test_sentry_plugins.py
index f23f84cddc..fb60343ced 100644
--- a/tests/sentry/templatetags/test_sentry_plugins.py
+++ b/tests/sentry/templatetags/test_sentry_plugins.py
@@ -11,7 +11,7 @@ class SamplePlugin(Plugin2):
     def get_actions(self, request, group):
         return [('Example Action', 'http://example.com?id=%s' % (group.id,))]
 
-    def get_annotations(self, request, group):
+    def get_annotations(self, group):
         return [
             {'label': 'Example Tag', 'url': 'http://example.com?id=%s' % (group.id,)},
             {'label': 'Example Two'},
