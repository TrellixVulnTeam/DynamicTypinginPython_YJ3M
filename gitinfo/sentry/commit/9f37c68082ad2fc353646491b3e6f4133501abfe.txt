commit 9f37c68082ad2fc353646491b3e6f4133501abfe
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Wed Nov 15 14:14:07 2017 -0800

    fix(workflow): Show error message when roles list is invalid (#6557)
    
    + log data when this happens.
    
    Fixes JAVASCRIPT-2MJ

diff --git a/src/sentry/static/sentry/app/views/inviteMember/inviteMember.jsx b/src/sentry/static/sentry/app/views/inviteMember/inviteMember.jsx
index 6ef98935ac..600cfe2772 100644
--- a/src/sentry/static/sentry/app/views/inviteMember/inviteMember.jsx
+++ b/src/sentry/static/sentry/app/views/inviteMember/inviteMember.jsx
@@ -39,15 +39,31 @@ const InviteMember = React.createClass({
     let {slug} = this.getOrganization();
     this.api.request(`/organizations/${slug}/members/me/`, {
       method: 'GET',
-      success: ({roles}) => {
-        this.setState({roleList: roles, loading: false});
-        if (!roles || roles.filter(({allowed}) => allowed).length === 0) {
-          // not allowed to invite, redirect
-          this.redirectToMemberPage();
+      success: resp => {
+        let {roles} = resp || {};
+
+        if (!resp || !roles) {
+          this.setState({
+            loading: false,
+            error: {
+              role: 'Error loading roles, will default to "member"',
+            },
+          });
+
+          Raven.captureMessage('[members]: data fetch invalid response', {
+            extra: {resp, state: this.state},
+          });
+        } else {
+          this.setState({roleList: roles, loading: false});
+
+          if (roles.filter(({allowed}) => allowed).length === 0) {
+            // not allowed to invite, redirect
+            this.redirectToMemberPage();
+          }
         }
       },
       error: error => {
-        Raven.captureMessage('data fetch error ', {
+        Raven.captureMessage('[members]: data fetch error ', {
           extra: {error, state: this.state},
         });
       },
