commit 5956d2791ca69f61663a02478f49a571b766dc6b
Author: Chris Clark <christopherchristopherclark@gmail.com>
Date:   Wed Nov 21 13:06:38 2018 -0800

    fix(discover): move sidebar to the left, improve negative space, fix header vibrations  (#10709)
    
    * to the left, to the right
    
    * restore accidentally removed flex functionality

diff --git a/src/sentry/static/sentry/app/styles/animations.jsx b/src/sentry/static/sentry/app/styles/animations.jsx
index 3918c9f5e2..b771f463c7 100644
--- a/src/sentry/static/sentry/app/styles/animations.jsx
+++ b/src/sentry/static/sentry/app/styles/animations.jsx
@@ -72,6 +72,18 @@ export const slideInRight = keyframes`
   }
 `;
 
+export const slideInLeft = keyframes`
+  0% {
+    transform: translateX(-20px);
+    opacity: 0;
+  }
+
+  100% {
+    transform: translateX(0);
+    opacity: 1;
+  }
+`;
+
 export const slideInUp = keyframes`
   0% {
     transform: translateY(10px);
diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/discover.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/discover.jsx
index b44520eb0c..36b3272471 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/discover.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/discover.jsx
@@ -1,7 +1,6 @@
 import PropTypes from 'prop-types';
 import React from 'react';
 import moment from 'moment';
-import {Box} from 'grid-emotion';
 import {browserHistory} from 'react-router';
 
 import {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';
@@ -36,6 +35,7 @@ import {
   DiscoverHeader,
   Body,
   BodyContent,
+  HeadingContainer,
   Heading,
   Sidebar,
   SidebarTabs,
@@ -303,6 +303,41 @@ export default class OrganizationDiscover extends React.Component {
 
     return (
       <DiscoverContainer>
+        <Sidebar>
+          {this.renderSidebarNav()}
+          {view === 'saved' && (
+            <SavedQueryWrapper>
+              <SavedQueryList organization={organization} savedQuery={savedQuery} />
+            </SavedQueryWrapper>
+          )}
+          {view === 'query' && (
+            <NewQuery
+              organization={organization}
+              queryBuilder={queryBuilder}
+              isFetchingQuery={isFetchingQuery || isLoading}
+              onUpdateField={this.updateField}
+              onRunQuery={this.runQuery}
+              onReset={this.reset}
+              isLoading={isLoading}
+            />
+          )}
+          {isEditingSavedQuery &&
+            savedQuery && (
+              <QueryPanel title={t('Edit Query')} onClose={toggleEditMode}>
+                <EditSavedQuery
+                  savedQuery={savedQuery}
+                  queryBuilder={queryBuilder}
+                  isFetchingQuery={isFetchingQuery}
+                  onUpdateField={this.updateField}
+                  onRunQuery={this.runQuery}
+                  onReset={this.reset}
+                  onDeleteQuery={this.deleteSavedQuery}
+                  onSaveQuery={this.updateSavedQuery}
+                  isLoading={isLoading}
+                />
+              </QueryPanel>
+            )}
+        </Sidebar>
         <DiscoverHeader>
           <HeaderItemPosition>
             <MultipleProjectSelector
@@ -340,52 +375,19 @@ export default class OrganizationDiscover extends React.Component {
             )}
             {!shouldDisplayResult && (
               <React.Fragment>
-                <Box mt={1} mb={2}>
-                  <Heading>
-                    {t('Discover')} <BetaTag />
-                  </Heading>
-                </Box>
+                <div>
+                  <HeadingContainer>
+                    <Heading>
+                      {t('Discover')}  <BetaTag />
+                    </Heading>
+                  </HeadingContainer>
+                </div>
                 <Intro updateQuery={this.updateFields} />
               </React.Fragment>
             )}
             {isFetchingQuery && <ResultLoading />}
           </BodyContent>
         </Body>
-        <Sidebar>
-          {this.renderSidebarNav()}
-          {view === 'saved' && (
-            <SavedQueryWrapper>
-              <SavedQueryList organization={organization} savedQuery={savedQuery} />
-            </SavedQueryWrapper>
-          )}
-          {view === 'query' && (
-            <NewQuery
-              organization={organization}
-              queryBuilder={queryBuilder}
-              isFetchingQuery={isFetchingQuery || isLoading}
-              onUpdateField={this.updateField}
-              onRunQuery={this.runQuery}
-              onReset={this.reset}
-              isLoading={isLoading}
-            />
-          )}
-          {isEditingSavedQuery &&
-            savedQuery && (
-              <QueryPanel title={t('Edit Query')} onClose={toggleEditMode}>
-                <EditSavedQuery
-                  savedQuery={savedQuery}
-                  queryBuilder={queryBuilder}
-                  isFetchingQuery={isFetchingQuery}
-                  onUpdateField={this.updateField}
-                  onRunQuery={this.runQuery}
-                  onReset={this.reset}
-                  onDeleteQuery={this.deleteSavedQuery}
-                  onSaveQuery={this.updateSavedQuery}
-                  isLoading={isLoading}
-                />
-              </QueryPanel>
-            )}
-        </Sidebar>
       </DiscoverContainer>
     );
   }
diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/result/index.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/result/index.jsx
index 9e88bc0ebb..ee97a32723 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/result/index.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/result/index.jsx
@@ -8,14 +8,13 @@ import getDynamicText from 'app/utils/getDynamicText';
 import BarChart from 'app/components/charts/barChart';
 import LineChart from 'app/components/charts/lineChart';
 import InlineSvg from 'app/components/inlineSvg';
-import {Flex} from 'grid-emotion';
 
 import {getChartData, getChartDataByDay, getRowsPageRange, downloadAsCsv} from './utils';
 import Table from './table';
 import Pagination from './pagination';
 import VisualizationsToggle from './visualizationsToggle';
 import {
-  ResultTitle,
+  HeadingContainer,
   Heading,
   ResultSummary,
   ResultContainer,
@@ -152,23 +151,19 @@ export default class Result extends React.Component {
 
   renderSavedQueryHeader() {
     return (
-      <Flex align="center">
+      <React.Fragment>
         <Heading>
           {getDynamicText({value: this.props.savedQuery.name, fixed: 'saved query'})}
         </Heading>
         <SavedQueryAction onClick={this.props.onToggleEdit}>
           <InlineSvg src="icon-edit" />
         </SavedQueryAction>
-      </Flex>
+      </React.Fragment>
     );
   }
 
   renderQueryResultHeader() {
-    return (
-      <Flex>
-        <Heading>{t('Result')}</Heading>
-      </Flex>
-    );
+    return <Heading>{t('Result')}</Heading>;
   }
 
   render() {
@@ -193,9 +188,9 @@ export default class Result extends React.Component {
     return (
       <ResultContainer>
         <div>
-          <ResultTitle>
+          <HeadingContainer>
             {savedQuery ? this.renderSavedQueryHeader() : this.renderQueryResultHeader()}
-          </ResultTitle>
+          </HeadingContainer>
           {this.renderToggle()}
         </div>
         <ResultInnerContainer innerRef={this.setDimensions}>
diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/styles.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/styles.jsx
index faf30ec29c..0ca0ce5857 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/styles.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/styles.jsx
@@ -4,7 +4,7 @@ import {Flex, Box} from 'grid-emotion';
 import {keyframes} from 'emotion';
 
 import space from 'app/styles/space';
-import {slideInRight} from 'app/styles/animations';
+import {slideInLeft} from 'app/styles/animations';
 
 import {Panel, PanelItem} from 'app/components/panels';
 import Button from 'app/components/button';
@@ -48,11 +48,6 @@ export const PageTitle = styled.h2`
   height: ${HEADER_HEIGHT}px;
 `;
 
-export const ResultTitle = styled(Box)`
-  min-width: 70px;
-  margin: ${space(1)} 0 ${space(2)};
-`;
-
 export const ResultViewButtons = styled(NavTabs)`
   @media (max-width: ${theme.breakpoints[1]}) {
     display: none;
@@ -80,9 +75,9 @@ export const DownloadCsvButton = styled(Button)`
 `;
 
 export const Sidebar = styled(props => (
-  <Flex {...props} direction="column" w={[320, 320, 320, 380]} />
+  <Flex {...props} direction="column" w={[300, 300, 300, 360]} />
 ))`
-  border-left: 1px solid ${p => p.theme.borderDark};
+  border-right: 1px solid ${p => p.theme.borderDark};
   min-width: 320px;
   position: relative;
   padding-top: ${HEADER_HEIGHT}px;
@@ -98,7 +93,7 @@ export const Body = styled(Flex)`
 export const BodyContent = styled(Flex)`
   flex: 1;
   flex-direction: column;
-  padding: ${space(2)} 32px 32px 32px;
+  padding: ${space(3)} ${space(4)} ${space(4)} ${space(4)};
   overflow-y: scroll;
   position: relative;
   background: ${p => p.theme.whiteDark};
@@ -111,7 +106,7 @@ export const LoadingContainer = styled(Flex)`
 `;
 
 export const SidebarTabs = styled(props => <NavTabs {...props} underlined={true} />)`
-  padding: 20px 30px 0;
+  padding: ${space(3)} ${space(3)} 0;
   margin: 0;
 `;
 
@@ -120,6 +115,12 @@ export const PlaceholderText = styled.div`
   font-size: 15px;
 `;
 
+export const HeadingContainer = styled(Flex)`
+  min-width: 70px;
+  margin: ${space(1)} 0 ${space(2)};
+  align-items: center;
+`;
+
 export const Heading = styled.h2`
   font-size: ${p => p.theme.headerFontSize};
   line-height: ${p => p.theme.headerFontSize};
@@ -129,7 +130,7 @@ export const Heading = styled.h2`
 `;
 
 export const Fieldset = styled.fieldset`
-  margin: ${space(3)} ${space(4)};
+  margin: ${space(3)};
 `;
 
 export const SelectListItem = styled(Flex)`
@@ -211,6 +212,7 @@ export const ChartNote = styled(Box)`
 export const SavedQueryAction = styled(Link)`
   color: ${p => p.theme.gray6};
   margin-left: ${space(2)};
+  display: flex;
 `;
 
 export const SavedQueryWrapper = styled('div')`
@@ -249,7 +251,7 @@ export const QueryPanelContainer = styled('div')`
   background-color: white;
   top: ${HEADER_HEIGHT}px;
   border-right: 1px solid ${p => p.theme.borderLight};
-  animation: ${slideInRight} 0.2s ease-in;
+  animation: ${slideInLeft} 0.2s ease-in;
   overflow-y: scroll;
 `;
 
