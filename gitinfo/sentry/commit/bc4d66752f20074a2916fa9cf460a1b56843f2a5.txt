commit bc4d66752f20074a2916fa9cf460a1b56843f2a5
Author: Chris Clark <christopherchristopherclark@gmail.com>
Date:   Wed Feb 28 14:07:41 2018 -0800

    feat(settings): team index is the member list (#7403)
    
    * user badge template
    
    * reorganize panels a bit
    
    * remove delete dropdown
    
    * new add member button positioning
    
    * orgId is a string duh

diff --git a/src/sentry/static/sentry/app/components/userBadge.jsx b/src/sentry/static/sentry/app/components/userBadge.jsx
new file mode 100644
index 0000000000..18313d3bc5
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/userBadge.jsx
@@ -0,0 +1,25 @@
+import PropTypes from 'prop-types';
+import React from 'react';
+import Avatar from './avatar';
+import Link from './link';
+
+const UserBadge = ({user, orgId}) => {
+  return (
+    <div>
+      <Avatar user={user} size={80} />
+      <h5>
+        <Link to={`/settings/organization/${orgId}/members/${user.id}`}>
+          {user.email}
+        </Link>
+      </h5>
+      {user.email}
+    </div>
+  );
+};
+
+UserBadge.propTypes = {
+  user: PropTypes.object,
+  orgId: PropTypes.string,
+};
+
+export default UserBadge;
diff --git a/src/sentry/static/sentry/app/routes.jsx b/src/sentry/static/sentry/app/routes.jsx
index 247c24ebcf..385563ae72 100644
--- a/src/sentry/static/sentry/app/routes.jsx
+++ b/src/sentry/static/sentry/app/routes.jsx
@@ -463,18 +463,18 @@ function routes() {
         />
 
         <Route name="Team" path=":teamId/" component={errorHandler(TeamDetails)}>
-          <IndexRedirect to="settings/" />
-          <Route
-            path="settings/"
-            name="Settings"
-            component={errorHandler(TeamSettings)}
-          />
+          <IndexRedirect to="members/" />
           <Route path="members/" name="Members" component={errorHandler(TeamMembers)} />
           <Route
             path="projects/"
             name="Projects"
             component={errorHandler(TeamProjects)}
           />
+          <Route
+            path="settings/"
+            name="settings"
+            component={errorHandler(TeamSettings)}
+          />
         </Route>
       </Route>
 
diff --git a/src/sentry/static/sentry/app/views/settings/team/teamMembers.jsx b/src/sentry/static/sentry/app/views/settings/team/teamMembers.jsx
index 3d94613afb..f864aaf8d9 100644
--- a/src/sentry/static/sentry/app/views/settings/team/teamMembers.jsx
+++ b/src/sentry/static/sentry/app/views/settings/team/teamMembers.jsx
@@ -1,9 +1,9 @@
 import React from 'react';
 import createReactClass from 'create-react-class';
-import {Link} from 'react-router';
+import styled from 'react-emotion';
 
 import ApiMixin from '../../../mixins/apiMixin';
-import Avatar from '../../../components/avatar';
+import UserBadge from '../../../components/userBadge';
 import Button from '../../../components/buttons/button';
 import IndicatorStore from '../../../stores/indicatorStore';
 import {leaveTeam} from '../../../actionCreators/teams';
@@ -11,8 +11,16 @@ import LoadingError from '../../../components/loadingError';
 import LoadingIndicator from '../../../components/loadingIndicator';
 import OrganizationState from '../../../mixins/organizationState';
 import Tooltip from '../../../components/tooltip';
+import Panel from '../components/panel';
+import PanelHeader from '../components/panelHeader';
 import {t} from '../../../locale';
 
+const PanelHeaderContentContainer = styled('div')`
+  display: flex;
+  align-items: center;
+  justify-content: space-between;
+`;
+
 const TeamMembers = createReactClass({
   displayName: 'TeamMembers',
   mixins: [ApiMixin, OrganizationState],
@@ -96,6 +104,26 @@ const TeamMembers = createReactClass({
     });
   },
 
+  addMemberButton(access, orgId) {
+    return access.has('org:write') ? (
+      <Button
+        priority="primary"
+        size="small"
+        className="pull-right"
+        to={`/settings/organization/${orgId}/members/new/`}
+      >
+        <span className="icon-plus" /> {t('Invite Member')}
+      </Button>
+    ) : (
+      <a
+        className="btn btn-primary btn-sm btn-disabled tip pull-right"
+        title={t('You do not have enough permission to add new members')}
+      >
+        <span className="icon-plus" /> {t('Invite Member')}
+      </a>
+    );
+  },
+
   render() {
     if (this.state.loading) return <LoadingIndicator />;
     else if (this.state.error) return <LoadingError onRetry={this.fetchData} />;
@@ -106,73 +134,47 @@ const TeamMembers = createReactClass({
 
     return (
       <div>
-        <div style={{marginBottom: 20}} className="clearfix">
-          {access.has('org:write') ? (
-            <Button
-              priority="primary"
-              size="small"
-              className="pull-right"
-              to={`/settings/organization/${params.orgId}/members/new/`}
-            >
-              <span className="icon-plus" /> {t('Invite Member')}
-            </Button>
-          ) : (
-            <a
-              className="btn btn-primary btn-sm btn-disabled tip pull-right"
-              title={t('You do not have enough permission to add new members')}
-            >
-              <span className="icon-plus" /> {t('Invite Member')}
-            </a>
-          )}
-        </div>
-
-        <table className="table member-list">
-          <colgroup>
-            <col />
-            <col width="150" />
-          </colgroup>
-          <thead>
-            <tr>
-              <th>{t('Member')}</th>
-            </tr>
-          </thead>
-          <tbody>
-            {this.state.memberList.map((member, i) => {
-              return (
-                <tr key={i}>
-                  <td className="table-user-info">
-                    <Avatar user={member} size={80} />
-                    <h5>
-                      <Link
-                        to={`/settings/organization/${params.orgId}/members/${member.id}`}
-                      >
-                        {member.email}
-                      </Link>
-                    </h5>
-                    {member.email}
-                  </td>
-                  <td>
-                    {access.has('org:write') ? (
-                      <Button size="small" onClick={this.removeMember.bind(this, member)}>
-                        {t('Remove')}
-                      </Button>
-                    ) : (
-                      <Tooltip
-                        title={t("You don't have have permission to remove members")}
-                      >
-                        <span>
-                          <Button size="small" disabled={true}>
-                            {t('Remove')}
-                          </Button>
-                        </span>
-                      </Tooltip>
-                    )}
-                  </td>
-                </tr>
-              );
-            })}
-          </tbody>
-        </table>
+        <Panel>
+          <PanelHeader>
+            <PanelHeaderContentContainer>
+              <div>{t('Members')}</div>
+              {this.addMemberButton(access, params.orgId)}
+            </PanelHeaderContentContainer>
+          </PanelHeader>
+          <table className="table member-list">
+            <tbody>
+              {this.state.memberList.map((member, i) => {
+                return (
+                  <tr key={i}>
+                    <td className="table-user-info">
+                      <UserBadge user={member} orgId={params.orgId} />
+                    </td>
+                    <td>
+                      {access.has('org:write') ? (
+                        <Button
+                          size="small"
+                          onClick={this.removeMember.bind(this, member)}
+                        >
+                          {t('Remove')}
+                        </Button>
+                      ) : (
+                        <Tooltip
+                          title={t("You don't have have permission to remove members")}
+                        >
+                          <span>
+                            <Button size="small" disabled={true}>
+                              {t('Remove')}
+                            </Button>
+                          </span>
+                        </Tooltip>
+                      )}
+                    </td>
+                  </tr>
+                );
+              })}
+            </tbody>
+          </table>
+        </Panel>
       </div>
     );
   },
diff --git a/src/sentry/static/sentry/app/views/teamDetails.jsx b/src/sentry/static/sentry/app/views/teamDetails.jsx
index ad8befce52..b97ef9059c 100644
--- a/src/sentry/static/sentry/app/views/teamDetails.jsx
+++ b/src/sentry/static/sentry/app/views/teamDetails.jsx
@@ -7,11 +7,9 @@ import Reflux from 'reflux';
 import {fetchTeamDetails} from '../actionCreators/teams';
 import {t} from '../locale';
 import ApiMixin from '../mixins/apiMixin';
-import DropdownLink from '../components/dropdownLink';
 import ListLink from '../components/listLink';
 import LoadingError from '../components/loadingError';
 import LoadingIndicator from '../components/loadingIndicator';
-import MenuItem from '../components/menuItem';
 import OrganizationState from '../mixins/organizationState';
 import TeamStore from '../stores/teamStore';
 import recreateRoute from '../utils/recreateRoute';
@@ -89,33 +87,20 @@ const TeamDetails = createReactClass({
     else if (!team || this.state.error) return <LoadingError onRetry={this.fetchData} />;
 
     let routePrefix = recreateRoute('', {routes, params, stepBack: -1}); //`/organizations/${orgId}/teams/${teamId}`;
-    let access = this.getAccess();
 
     //TODO(maxbittker) remove hack to not show this page on old settings
     let onNewSettings = routePrefix.startsWith('/settings/');
 
-    const features = new Set(this.context.organization.features);
     return (
       <div>
         <h3>{team.name}</h3>
 
-        {!features.has('new-settings') &&
-          access.has('team:admin') && (
-            <DropdownLink anchorRight title={t('More')}>
-              <MenuItem
-                href={`/organizations/${params.orgId}/teams/${params.teamId}/remove/`}
-              >
-                {t('Remove Team')}
-              </MenuItem>
-            </DropdownLink>
-          )}
-
         <ul className="nav nav-tabs border-bottom">
-          <ListLink to={`${routePrefix}settings/`}>{t('Settings')}</ListLink>
           <ListLink to={`${routePrefix}members/`}>{t('Members')}</ListLink>
           {onNewSettings ? (
             <ListLink to={`${routePrefix}projects/`}>{t('Projects')}</ListLink>
           ) : null}
+          <ListLink to={`${routePrefix}settings/`}>{t('Settings')}</ListLink>
         </ul>
 
         {children &&
diff --git a/src/sentry/static/sentry/less/components/button.less b/src/sentry/static/sentry/less/components/button.less
index 907c65aa0c..ebeec4fd9e 100644
--- a/src/sentry/static/sentry/less/components/button.less
+++ b/src/sentry/static/sentry/less/components/button.less
@@ -9,6 +9,7 @@
   cursor: pointer;
   font-size: 14px;
   padding: 0;
+  text-transform: none;
 
   .button-label {
     padding: 12px 16px;
diff --git a/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap b/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap
index 7274198f7a..0a0b7b4909 100644
--- a/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/teamMembers.spec.jsx.snap
@@ -2,190 +2,150 @@
 
 exports[`TeamMembers render() renders 1`] = `
 <div>
-  <div
-    className="clearfix"
-    style={
-      Object {
-        "marginBottom": 20,
-      }
-    }
-  >
-    <Button
-      className="pull-right"
-      disabled={false}
-      priority="primary"
-      size="small"
-      to="/settings/organization/org-slug/members/new/"
+  <Panel>
+    <PanelHeader>
+      <PanelHeaderContentContainer>
+        <div>
+          Members
+        </div>
+        <Button
+          className="pull-right"
+          disabled={false}
+          priority="primary"
+          size="small"
+          to="/settings/organization/org-slug/members/new/"
+        >
+          <span
+            className="icon-plus"
+          />
+           
+          Invite Member
+        </Button>
+      </PanelHeaderContentContainer>
+    </PanelHeader>
+    <table
+      className="table member-list"
     >
-      <span
-        className="icon-plus"
-      />
-       
-      Invite Member
-    </Button>
-  </div>
-  <table
-    className="table member-list"
-  >
-    <colgroup>
-      <col />
-      <col
-        width="150"
-      />
-    </colgroup>
-    <thead>
-      <tr>
-        <th>
-          Member
-        </th>
-      </tr>
-    </thead>
-    <tbody>
-      <tr
-        key="0"
-      >
-        <td
-          className="table-user-info"
+      <tbody>
+        <tr
+          key="0"
         >
-          <Avatar
-            className="avatar"
-            gravatar={true}
-            size={80}
-            user={
-              Object {
-                "email": "",
-                "flags": Object {
-                  "sso:linked": false,
-                },
-                "id": "1",
-                "name": "",
-                "pending": false,
-                "roleName": "",
-                "user": Object {
-                  "email": "sentry1@test.com",
-                  "has2fa": false,
+          <td
+            className="table-user-info"
+          >
+            <UserBadge
+              orgId="org-slug"
+              user={
+                Object {
+                  "email": "",
+                  "flags": Object {
+                    "sso:linked": false,
+                  },
                   "id": "1",
-                  "name": "Sentry 1 Name",
-                  "username": "Sentry 1 Username",
-                },
+                  "name": "",
+                  "pending": false,
+                  "roleName": "",
+                  "user": Object {
+                    "email": "sentry1@test.com",
+                    "has2fa": false,
+                    "id": "1",
+                    "name": "Sentry 1 Name",
+                    "username": "Sentry 1 Username",
+                  },
+                }
               }
-            }
-          />
-          <h5>
-            <Link
-              onlyActiveOnIndex={false}
-              style={Object {}}
-              to="/settings/organization/org-slug/members/1"
             />
-          </h5>
-        </td>
-        <td>
-          <Button
-            disabled={false}
-            onClick={[Function]}
-            size="small"
-          >
-            Remove
-          </Button>
-        </td>
-      </tr>
-      <tr
-        key="1"
-      >
-        <td
-          className="table-user-info"
+          </td>
+          <td>
+            <Button
+              disabled={false}
+              onClick={[Function]}
+              size="small"
+            >
+              Remove
+            </Button>
+          </td>
+        </tr>
+        <tr
+          key="1"
         >
-          <Avatar
-            className="avatar"
-            gravatar={true}
-            size={80}
-            user={
-              Object {
-                "email": "",
-                "flags": Object {
-                  "sso:linked": false,
-                },
-                "id": "2",
-                "name": "",
-                "pending": false,
-                "roleName": "",
-                "user": Object {
-                  "email": "sentry2@test.com",
-                  "has2fa": true,
+          <td
+            className="table-user-info"
+          >
+            <UserBadge
+              orgId="org-slug"
+              user={
+                Object {
+                  "email": "",
+                  "flags": Object {
+                    "sso:linked": false,
+                  },
                   "id": "2",
-                  "name": "Sentry 2 Name",
-                  "username": "Sentry 2 Username",
-                },
+                  "name": "",
+                  "pending": false,
+                  "roleName": "",
+                  "user": Object {
+                    "email": "sentry2@test.com",
+                    "has2fa": true,
+                    "id": "2",
+                    "name": "Sentry 2 Name",
+                    "username": "Sentry 2 Username",
+                  },
+                }
               }
-            }
-          />
-          <h5>
-            <Link
-              onlyActiveOnIndex={false}
-              style={Object {}}
-              to="/settings/organization/org-slug/members/2"
             />
-          </h5>
-        </td>
-        <td>
-          <Button
-            disabled={false}
-            onClick={[Function]}
-            size="small"
-          >
-            Remove
-          </Button>
-        </td>
-      </tr>
-      <tr
-        key="2"
-      >
-        <td
-          className="table-user-info"
+          </td>
+          <td>
+            <Button
+              disabled={false}
+              onClick={[Function]}
+              size="small"
+            >
+              Remove
+            </Button>
+          </td>
+        </tr>
+        <tr
+          key="2"
         >
-          <Avatar
-            className="avatar"
-            gravatar={true}
-            size={80}
-            user={
-              Object {
-                "email": "",
-                "flags": Object {
-                  "sso:linked": true,
-                },
-                "id": "3",
-                "name": "",
-                "pending": false,
-                "roleName": "",
-                "user": Object {
-                  "email": "sentry3@test.com",
-                  "has2fa": true,
+          <td
+            className="table-user-info"
+          >
+            <UserBadge
+              orgId="org-slug"
+              user={
+                Object {
+                  "email": "",
+                  "flags": Object {
+                    "sso:linked": true,
+                  },
                   "id": "3",
-                  "name": "Sentry 3 Name",
-                  "username": "Sentry 3 Username",
-                },
+                  "name": "",
+                  "pending": false,
+                  "roleName": "",
+                  "user": Object {
+                    "email": "sentry3@test.com",
+                    "has2fa": true,
+                    "id": "3",
+                    "name": "Sentry 3 Name",
+                    "username": "Sentry 3 Username",
+                  },
+                }
               }
-            }
-          />
-          <h5>
-            <Link
-              onlyActiveOnIndex={false}
-              style={Object {}}
-              to="/settings/organization/org-slug/members/3"
             />
-          </h5>
-        </td>
-        <td>
-          <Button
-            disabled={false}
-            onClick={[Function]}
-            size="small"
-          >
-            Remove
-          </Button>
-        </td>
-      </tr>
-    </tbody>
-  </table>
+          </td>
+          <td>
+            <Button
+              disabled={false}
+              onClick={[Function]}
+              size="small"
+            >
+              Remove
+            </Button>
+          </td>
+        </tr>
+      </tbody>
+    </table>
+  </Panel>
 </div>
 `;
