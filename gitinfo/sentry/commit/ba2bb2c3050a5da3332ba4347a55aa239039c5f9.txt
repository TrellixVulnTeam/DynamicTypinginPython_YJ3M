commit ba2bb2c3050a5da3332ba4347a55aa239039c5f9
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Jun 6 18:45:57 2016 -0700

    GroupMeta should get merged when merging groups
    
    Fixes GH-3411

diff --git a/src/sentry/tasks/merge.py b/src/sentry/tasks/merge.py
index a10fa06165..148bcd5200 100644
--- a/src/sentry/tasks/merge.py
+++ b/src/sentry/tasks/merge.py
@@ -28,7 +28,7 @@ def merge_group(from_object_id=None, to_object_id=None, **kwargs):
     # TODO(mattrobenolt): Write tests for all of this
     from sentry.models import (
         Activity, Group, GroupAssignee, GroupHash, GroupRuleStatus, GroupTagKey,
-        GroupTagValue, EventMapping, Event, UserReport, GroupRedirect,
+        GroupTagValue, EventMapping, Event, UserReport, GroupRedirect, GroupMeta,
     )
 
     if not (from_object_id and to_object_id):
@@ -49,7 +49,7 @@ def merge_group(from_object_id=None, to_object_id=None, **kwargs):
 
     model_list = (
         Activity, GroupAssignee, GroupHash, GroupRuleStatus, GroupTagValue,
-        GroupTagKey, EventMapping, Event, UserReport, GroupRedirect,
+        GroupTagKey, EventMapping, Event, UserReport, GroupRedirect, GroupMeta,
     )
 
     has_more = merge_objects(model_list, group, new_group, logger=logger)
diff --git a/tests/sentry/tasks/test_merge.py b/tests/sentry/tasks/test_merge.py
index a67f96ca86..6f4901508d 100644
--- a/tests/sentry/tasks/test_merge.py
+++ b/tests/sentry/tasks/test_merge.py
@@ -1,7 +1,5 @@
 from __future__ import absolute_import
 
-import pytest
-
 from sentry.tasks.merge import merge_group, rehash_group_events
 from sentry.models import Event, Group, GroupMeta, GroupRedirect, GroupTagKey, GroupTagValue
 from sentry.testutils import TestCase
@@ -108,15 +106,13 @@ class MergeGroupTest(TestCase):
             key='key2',
         ).times_seen == 10
 
-    # TODO - Add code to merge GroupMeta
-    @pytest.mark.xfail(run=False)
     def test_merge_with_group_meta(self):
         project1 = self.create_project()
         group1 = self.create_group(project1)
         event1 = self.create_event('a' * 32, group=group1, data={'foo': 'bar'})
         project2 = self.create_project()
         group2 = self.create_group(project2)
-        event2 = self.create_event('b' * 32, group=group2, data={'foo': 'baz'})
+        self.create_event('b' * 32, group=group2, data={'foo': 'baz'})
 
         GroupMeta.objects.create(
             group=event1.group,
