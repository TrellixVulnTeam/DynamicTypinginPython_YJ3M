commit 71dda5582fc0addd4152d976fc58b6702db9ea91
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Mar 27 12:19:15 2018 -0700

    style: Clean up alert rule styles (#7794)
    
    Use the standard trash can button
    Use components for form elements where possible

diff --git a/src/sentry/static/sentry/app/views/ruleEditor/index.jsx b/src/sentry/static/sentry/app/views/ruleEditor/index.jsx
index ab3c81b483..0df8c35992 100644
--- a/src/sentry/static/sentry/app/views/ruleEditor/index.jsx
+++ b/src/sentry/static/sentry/app/views/ruleEditor/index.jsx
@@ -4,7 +4,8 @@ import React from 'react';
 import createReactClass from 'create-react-class';
 import styled from 'react-emotion';
 
-import {Select2Field} from '../../components/forms';
+import {Select2Field, TextField} from '../../components/forms';
+import Button from '../../components/buttons/button';
 import {
   addErrorMessage,
   addSuccessMessage,
@@ -201,35 +202,30 @@ const RuleEditor = createReactClass({
               </div>
             )}
             <h6>{t('Rule name')}:</h6>
-            <div className="control-group">
-              <input
-                type="text"
-                className="form-control"
-                defaultValue={name}
-                required={true}
-                placeholder={t('My Rule Name')}
-                onChange={e => this.handleChange('name', e.target.value)}
-              />
-            </div>
+            <TextField
+              name="name"
+              defaultValue={name}
+              required={true}
+              placeholder={t('My Rule Name')}
+              onChange={val => this.handleChange('name', val)}
+            />
 
             <hr />
 
-            <div className="node-match-selector">
-              <AlertRuleRow>
-                {t(
-                  'Every time %s of these conditions are met:',
-                  <Select2Field
-                    className={this.hasError('actionMatch') ? ' error' : ''}
-                    style={{marginBottom: 0, marginLeft: 5, marginRight: 5}}
-                    name="actionMatch"
-                    value={actionMatch}
-                    required={true}
-                    choices={ACTION_MATCH_CHOICES}
-                    onChange={val => this.handleChange('actionMatch', val)}
-                  />
-                )}
-              </AlertRuleRow>
-            </div>
+            <AlertRuleRow>
+              {t(
+                'Every time %s of these conditions are met:',
+                <Select2Field
+                  className={this.hasError('actionMatch') ? ' error' : ''}
+                  style={{marginBottom: 0, marginLeft: 5, marginRight: 5, width: 100}}
+                  name="actionMatch"
+                  value={actionMatch}
+                  required={true}
+                  choices={ACTION_MATCH_CHOICES}
+                  onChange={val => this.handleChange('actionMatch', val)}
+                />
+              )}
+            </AlertRuleRow>
 
             {this.hasError('conditions') && (
               <p className="error">{this.state.error.conditions[0]}</p>
@@ -288,9 +284,9 @@ const RuleEditor = createReactClass({
             </div>
 
             <div className="actions">
-              <button className="btn btn-primary btn-lg" disabled={loading}>
+              <Button priority="primary" disabled={loading}>
                 {t('Save Rule')}
-              </button>
+              </Button>
             </div>
           </PanelBody>
         </Panel>
diff --git a/src/sentry/static/sentry/app/views/ruleEditor/ruleNode.jsx b/src/sentry/static/sentry/app/views/ruleEditor/ruleNode.jsx
index 6994760caa..34ddce19cf 100644
--- a/src/sentry/static/sentry/app/views/ruleEditor/ruleNode.jsx
+++ b/src/sentry/static/sentry/app/views/ruleEditor/ruleNode.jsx
@@ -3,6 +3,7 @@ import React from 'react';
 import ReactDOM from 'react-dom';
 import styled, {cx} from 'react-emotion';
 import $ from 'jquery';
+import Button from '../../components/buttons/button';
 
 class RuleNode extends React.Component {
   static propTypes = {
@@ -52,9 +53,9 @@ class RuleNode extends React.Component {
           <span ref="html" dangerouslySetInnerHTML={{__html: node.html}} />
         </RuleNodeForm>
         <RuleNodeControls>
-          <a onClick={this.props.onDelete}>
-            <span className="icon-trash" />
-          </a>
+          <Button onClick={this.props.onDelete} type="button" tabIndex="-1" size="small">
+            <span className="icon icon-trash" />
+          </Button>
         </RuleNodeControls>
       </RuleNodeRow>
     );
diff --git a/src/sentry/static/sentry/less/project-settings.less b/src/sentry/static/sentry/less/project-settings.less
index 55e1b3dd8d..8efcef1358 100644
--- a/src/sentry/static/sentry/less/project-settings.less
+++ b/src/sentry/static/sentry/less/project-settings.less
@@ -127,15 +127,6 @@
 
 .rules-list,
 .rule-detail {
-  .node-match-selector {
-    .select2-container {
-      margin: 0 5px;
-      display: inline-block;
-      width: 100px;
-      max-width: none;
-    }
-  }
-
   h6 {
     font-weight: 600;
 
diff --git a/tests/js/spec/views/__snapshots__/projectAlertRuleDetails.spec.jsx.snap b/tests/js/spec/views/__snapshots__/projectAlertRuleDetails.spec.jsx.snap
index fa504ae4bb..5ed5dc7936 100644
--- a/tests/js/spec/views/__snapshots__/projectAlertRuleDetails.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/projectAlertRuleDetails.spec.jsx.snap
@@ -1,7 +1,7 @@
 // Jest Snapshot v1, https://goo.gl/fbAQLP
 
 exports[`ProjectAlertRuleDetails Edit alert rule renders 1`] = `
-.glamor-17 {
+.glamor-19 {
   background: #fff;
   border: 1px solid;
   margin-bottom: NaNpx;
@@ -41,7 +41,7 @@ exports[`ProjectAlertRuleDetails Edit alert rule renders 1`] = `
   padding: 15px 20px;
 }
 
-.glamor-16 {
+.glamor-18 {
   padding: 20px;
 }
 
@@ -67,6 +67,18 @@ exports[`ProjectAlertRuleDetails Edit alert rule renders 1`] = `
   margin-bottom: 10px;
 }
 
+.glamor-16 {
+  box-sizing: border-box;
+  display: -webkit-box;
+  display: -webkit-flex;
+  display: -ms-flexbox;
+  display: flex;
+  -webkit-align-items: center;
+  -webkit-box-align: center;
+  -ms-flex-align: center;
+  align-items: center;
+}
+
 <ProjectAlertRuleDetails
   params={
     Object {
@@ -156,7 +168,7 @@ exports[`ProjectAlertRuleDetails Edit alert rule renders 1`] = `
               className="rule-detail"
             >
               <div
-                className="rule-detail glamor-17 glamor-18"
+                className="rule-detail glamor-19 glamor-20"
               >
                 <PanelHeader>
                   <StyledPanelHeader>
@@ -190,120 +202,135 @@ exports[`ProjectAlertRuleDetails Edit alert rule renders 1`] = `
                   flex={false}
                 >
                   <div
-                    className="glamor-16"
+                    className="glamor-18"
                   >
                     <h6>
                       Rule name
                       :
                     </h6>
-                    <div
-                      className="control-group"
-                    >
-                      <input
-                        className="form-control"
-                        defaultValue=""
-                        onChange={[Function]}
-                        placeholder="My Rule Name"
-                        required={true}
-                        type="text"
-                      />
-                    </div>
-                    <hr />
-                    <div
-                      className="node-match-selector"
+                    <TextField
+                      defaultValue=""
+                      disabled={false}
+                      hideErrorMessage={false}
+                      name="name"
+                      onChange={[Function]}
+                      placeholder="My Rule Name"
+                      required={true}
                     >
-                      <AlertRuleRow>
-                        <h6
-                          className="glamor-8 glamor-9"
+                      <div
+                        className="control-group required"
+                      >
+                        <div
+                          className="controls"
                         >
-                          Every time 
-                          <Select2Field
-                            allowClear={false}
-                            allowEmpty={false}
-                            choices={
-                              Array [
-                                Array [
-                                  "all",
-                                  "all",
-                                ],
-                                Array [
-                                  "any",
-                                  "any",
-                                ],
-                                Array [
-                                  "none",
-                                  "none",
-                                ],
-                              ]
-                            }
-                            className=""
+                          <input
+                            className="form-control"
                             disabled={false}
-                            escapeMarkup={true}
-                            hideErrorMessage={false}
-                            key="1"
-                            multiple={false}
-                            name="actionMatch"
+                            id="id-name"
+                            name="name"
                             onChange={[Function]}
-                            placeholder="--"
+                            placeholder="My Rule Name"
                             required={true}
+                            type="text"
+                            value=""
+                          />
+                        </div>
+                      </div>
+                    </TextField>
+                    <hr />
+                    <AlertRuleRow>
+                      <h6
+                        className="glamor-8 glamor-9"
+                      >
+                        Every time 
+                        <Select2Field
+                          allowClear={false}
+                          allowEmpty={false}
+                          choices={
+                            Array [
+                              Array [
+                                "all",
+                                "all",
+                              ],
+                              Array [
+                                "any",
+                                "any",
+                              ],
+                              Array [
+                                "none",
+                                "none",
+                              ],
+                            ]
+                          }
+                          className=""
+                          disabled={false}
+                          escapeMarkup={true}
+                          hideErrorMessage={false}
+                          key="1"
+                          multiple={false}
+                          name="actionMatch"
+                          onChange={[Function]}
+                          placeholder="--"
+                          required={true}
+                          style={
+                            Object {
+                              "marginBottom": 0,
+                              "marginLeft": 5,
+                              "marginRight": 5,
+                              "width": 100,
+                            }
+                          }
+                          value="all"
+                        >
+                          <div
+                            className="control-group required"
                             style={
                               Object {
                                 "marginBottom": 0,
                                 "marginLeft": 5,
                                 "marginRight": 5,
+                                "width": 100,
                               }
                             }
-                            value="all"
                           >
                             <div
-                              className="control-group required"
-                              style={
-                                Object {
-                                  "marginBottom": 0,
-                                  "marginLeft": 5,
-                                  "marginRight": 5,
-                                }
-                              }
+                              className="controls"
                             >
-                              <div
-                                className="controls"
+                              <select
+                                className="form-control"
+                                disabled={false}
+                                id="id-actionMatch"
+                                multiple={false}
+                                onChange={[Function]}
+                                placeholder="--"
+                                required={true}
+                                value="all"
                               >
-                                <select
-                                  className="form-control"
-                                  disabled={false}
-                                  id="id-actionMatch"
-                                  multiple={false}
-                                  onChange={[Function]}
-                                  placeholder="--"
-                                  required={true}
+                                <option
+                                  key="all"
                                   value="all"
                                 >
-                                  <option
-                                    key="all"
-                                    value="all"
-                                  >
-                                    all
-                                  </option>
-                                  <option
-                                    key="any"
-                                    value="any"
-                                  >
-                                    any
-                                  </option>
-                                  <option
-                                    key="none"
-                                    value="none"
-                                  >
-                                    none
-                                  </option>
-                                </select>
-                              </div>
+                                  all
+                                </option>
+                                <option
+                                  key="any"
+                                  value="any"
+                                >
+                                  any
+                                </option>
+                                <option
+                                  key="none"
+                                  value="none"
+                                >
+                                  none
+                                </option>
+                              </select>
                             </div>
-                          </Select2Field>
-                           of these conditions are met:
-                        </h6>
-                      </AlertRuleRow>
-                    </div>
+                          </div>
+                        </Select2Field>
+                         of these conditions are met:
+                      </h6>
+                    </AlertRuleRow>
                     <RuleNodeList
                       className="rule-condition-list"
                       initialItems={Array []}
@@ -667,12 +694,34 @@ exports[`ProjectAlertRuleDetails Edit alert rule renders 1`] = `
                     <div
                       className="actions"
                     >
-                      <button
-                        className="btn btn-primary btn-lg"
+                      <Button
                         disabled={false}
+                        priority="primary"
                       >
-                        Save Rule
-                      </button>
+                        <button
+                          className="button button-primary"
+                          disabled={false}
+                          onClick={[Function]}
+                          role="button"
+                        >
+                          <Flex
+                            align="center"
+                            className="button-label"
+                          >
+                            <Base
+                              align="center"
+                              className="button-label glamor-16"
+                            >
+                              <div
+                                className="button-label glamor-16"
+                                is={null}
+                              >
+                                Save Rule
+                              </div>
+                            </Base>
+                          </Flex>
+                        </button>
+                      </Button>
                     </div>
                   </div>
                 </PanelBody>
@@ -687,7 +736,7 @@ exports[`ProjectAlertRuleDetails Edit alert rule renders 1`] = `
 `;
 
 exports[`ProjectAlertRuleDetails New alert rule renders 1`] = `
-.glamor-17 {
+.glamor-19 {
   background: #fff;
   border: 1px solid;
   margin-bottom: NaNpx;
@@ -727,7 +776,7 @@ exports[`ProjectAlertRuleDetails New alert rule renders 1`] = `
   padding: 15px 20px;
 }
 
-.glamor-16 {
+.glamor-18 {
   padding: 20px;
 }
 
@@ -753,6 +802,18 @@ exports[`ProjectAlertRuleDetails New alert rule renders 1`] = `
   margin-bottom: 10px;
 }
 
+.glamor-16 {
+  box-sizing: border-box;
+  display: -webkit-box;
+  display: -webkit-flex;
+  display: -ms-flexbox;
+  display: flex;
+  -webkit-align-items: center;
+  -webkit-box-align: center;
+  -ms-flex-align: center;
+  align-items: center;
+}
+
 <ProjectAlertRuleDetails
   params={
     Object {
@@ -842,7 +903,7 @@ exports[`ProjectAlertRuleDetails New alert rule renders 1`] = `
               className="rule-detail"
             >
               <div
-                className="rule-detail glamor-17 glamor-18"
+                className="rule-detail glamor-19 glamor-20"
               >
                 <PanelHeader>
                   <StyledPanelHeader>
@@ -876,120 +937,135 @@ exports[`ProjectAlertRuleDetails New alert rule renders 1`] = `
                   flex={false}
                 >
                   <div
-                    className="glamor-16"
+                    className="glamor-18"
                   >
                     <h6>
                       Rule name
                       :
                     </h6>
-                    <div
-                      className="control-group"
-                    >
-                      <input
-                        className="form-control"
-                        defaultValue=""
-                        onChange={[Function]}
-                        placeholder="My Rule Name"
-                        required={true}
-                        type="text"
-                      />
-                    </div>
-                    <hr />
-                    <div
-                      className="node-match-selector"
+                    <TextField
+                      defaultValue=""
+                      disabled={false}
+                      hideErrorMessage={false}
+                      name="name"
+                      onChange={[Function]}
+                      placeholder="My Rule Name"
+                      required={true}
                     >
-                      <AlertRuleRow>
-                        <h6
-                          className="glamor-8 glamor-9"
+                      <div
+                        className="control-group required"
+                      >
+                        <div
+                          className="controls"
                         >
-                          Every time 
-                          <Select2Field
-                            allowClear={false}
-                            allowEmpty={false}
-                            choices={
-                              Array [
-                                Array [
-                                  "all",
-                                  "all",
-                                ],
-                                Array [
-                                  "any",
-                                  "any",
-                                ],
-                                Array [
-                                  "none",
-                                  "none",
-                                ],
-                              ]
-                            }
-                            className=""
+                          <input
+                            className="form-control"
                             disabled={false}
-                            escapeMarkup={true}
-                            hideErrorMessage={false}
-                            key="1"
-                            multiple={false}
-                            name="actionMatch"
+                            id="id-name"
+                            name="name"
                             onChange={[Function]}
-                            placeholder="--"
+                            placeholder="My Rule Name"
                             required={true}
+                            type="text"
+                            value=""
+                          />
+                        </div>
+                      </div>
+                    </TextField>
+                    <hr />
+                    <AlertRuleRow>
+                      <h6
+                        className="glamor-8 glamor-9"
+                      >
+                        Every time 
+                        <Select2Field
+                          allowClear={false}
+                          allowEmpty={false}
+                          choices={
+                            Array [
+                              Array [
+                                "all",
+                                "all",
+                              ],
+                              Array [
+                                "any",
+                                "any",
+                              ],
+                              Array [
+                                "none",
+                                "none",
+                              ],
+                            ]
+                          }
+                          className=""
+                          disabled={false}
+                          escapeMarkup={true}
+                          hideErrorMessage={false}
+                          key="1"
+                          multiple={false}
+                          name="actionMatch"
+                          onChange={[Function]}
+                          placeholder="--"
+                          required={true}
+                          style={
+                            Object {
+                              "marginBottom": 0,
+                              "marginLeft": 5,
+                              "marginRight": 5,
+                              "width": 100,
+                            }
+                          }
+                          value="all"
+                        >
+                          <div
+                            className="control-group required"
                             style={
                               Object {
                                 "marginBottom": 0,
                                 "marginLeft": 5,
                                 "marginRight": 5,
+                                "width": 100,
                               }
                             }
-                            value="all"
                           >
                             <div
-                              className="control-group required"
-                              style={
-                                Object {
-                                  "marginBottom": 0,
-                                  "marginLeft": 5,
-                                  "marginRight": 5,
-                                }
-                              }
+                              className="controls"
                             >
-                              <div
-                                className="controls"
+                              <select
+                                className="form-control"
+                                disabled={false}
+                                id="id-actionMatch"
+                                multiple={false}
+                                onChange={[Function]}
+                                placeholder="--"
+                                required={true}
+                                value="all"
                               >
-                                <select
-                                  className="form-control"
-                                  disabled={false}
-                                  id="id-actionMatch"
-                                  multiple={false}
-                                  onChange={[Function]}
-                                  placeholder="--"
-                                  required={true}
+                                <option
+                                  key="all"
                                   value="all"
                                 >
-                                  <option
-                                    key="all"
-                                    value="all"
-                                  >
-                                    all
-                                  </option>
-                                  <option
-                                    key="any"
-                                    value="any"
-                                  >
-                                    any
-                                  </option>
-                                  <option
-                                    key="none"
-                                    value="none"
-                                  >
-                                    none
-                                  </option>
-                                </select>
-                              </div>
+                                  all
+                                </option>
+                                <option
+                                  key="any"
+                                  value="any"
+                                >
+                                  any
+                                </option>
+                                <option
+                                  key="none"
+                                  value="none"
+                                >
+                                  none
+                                </option>
+                              </select>
                             </div>
-                          </Select2Field>
-                           of these conditions are met:
-                        </h6>
-                      </AlertRuleRow>
-                    </div>
+                          </div>
+                        </Select2Field>
+                         of these conditions are met:
+                      </h6>
+                    </AlertRuleRow>
                     <RuleNodeList
                       className="rule-condition-list"
                       initialItems={Array []}
@@ -1353,12 +1429,34 @@ exports[`ProjectAlertRuleDetails New alert rule renders 1`] = `
                     <div
                       className="actions"
                     >
-                      <button
-                        className="btn btn-primary btn-lg"
+                      <Button
                         disabled={false}
+                        priority="primary"
                       >
-                        Save Rule
-                      </button>
+                        <button
+                          className="button button-primary"
+                          disabled={false}
+                          onClick={[Function]}
+                          role="button"
+                        >
+                          <Flex
+                            align="center"
+                            className="button-label"
+                          >
+                            <Base
+                              align="center"
+                              className="button-label glamor-16"
+                            >
+                              <div
+                                className="button-label glamor-16"
+                                is={null}
+                              >
+                                Save Rule
+                              </div>
+                            </Base>
+                          </Flex>
+                        </button>
+                      </Button>
                     </div>
                   </div>
                 </PanelBody>
