commit 69f4f37cffe283a9fd4aca92ccfd6285dcac9c03
Author: Matte Noble <me@mattenoble.com>
Date:   Fri Dec 14 12:47:38 2018 -0800

    ref(app-platform): App Platform Celery Queue (#11026)
    
    Adds a dedicated queue for App Platform tasks.

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index d82a3b7ba0..7e2faed2bd 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -454,6 +454,7 @@ CELERY_IMPORTS = (
 CELERY_QUEUES = [
     Queue('activity.notify', routing_key='activity.notify'),
     Queue('alerts', routing_key='alerts'),
+    Queue('app_platform', routing_key='app_platform'),
     Queue('auth', routing_key='auth'),
     Queue('assemble', routing_key='assemble'),
     Queue('buffers.process_pending', routing_key='buffers.process_pending'),
diff --git a/src/sentry/tasks/app_platform.py b/src/sentry/tasks/app_platform.py
index 371083339f..b7db6cabbf 100644
--- a/src/sentry/tasks/app_platform.py
+++ b/src/sentry/tasks/app_platform.py
@@ -12,7 +12,7 @@ logger = logging.Logger('sentry.tasks.app_platform')
 
 @instrumented_task(
     name='sentry.tasks.app_platform.installation_webhook',
-    queue='integrations',  # Sharing this for now. Should it have its own?
+    queue='app_platform',
     default_retry_delay=(60 * 5),  # 5 minutes
     max_retries=3,
 )
diff --git a/src/sentry/tasks/servicehooks.py b/src/sentry/tasks/servicehooks.py
index c1a0f72c03..1a173ee9d1 100644
--- a/src/sentry/tasks/servicehooks.py
+++ b/src/sentry/tasks/servicehooks.py
@@ -33,6 +33,7 @@ TYPES = {
 
 @instrumented_task(
     'sentry.tasks.process_resource_change',
+    queue='app_platform',
     default_retry_delay=60 * 5,
     max_retries=5,
 )
