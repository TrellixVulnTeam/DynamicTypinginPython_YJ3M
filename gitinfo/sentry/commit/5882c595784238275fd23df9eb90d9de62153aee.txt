commit 5882c595784238275fd23df9eb90d9de62153aee
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 26 14:08:27 2011 -0800

    Clean up replay request form

diff --git a/sentry/templates/sentry/events/replay_request.html b/sentry/templates/sentry/events/replay_request.html
index 343ffd415a..4869575848 100644
--- a/sentry/templates/sentry/events/replay_request.html
+++ b/sentry/templates/sentry/events/replay_request.html
@@ -7,43 +7,33 @@
 {% block heading %}{% trans "Replay Request" %}{% endblock %}
 
 {% block content %}
-    <div id="body">
-        <h2>Request</h2>
+    <div class="span16">
         {% if form.errors %}
             <p class="error">{% trans "Please fill out all fields." %}</p>
         {% endif %}
 
-        <form method="post" action="" class="replay-form">
+        <form class="form-stacked" action="" method="post">
             {% csrf_token %}
-            <table>
-                <colgroup>
-                    <col width="100px"/>
-                    <col/>
-                </colgroup>
-                <tr>
-                    <td>{{ form.url.label_tag }}</td>
-                    <td>{{ form.url }}</td>
-                </tr>
-                <tr>
-                    <td>{{ form.method.label_tag }}</td>
-                    <td>{{ form.method }}</td>
-                </tr>
-                <tr>
-                    <td>{{ form.data.label_tag }}</td>
-                    <td>{{ form.data }}</td>
-                </tr>
-                <tr>
-                    <td>{{ form.headers.label_tag }}</td>
-                    <td>{{ form.headers }}</td>
-                </tr>
-            </table>
-            <div class="submit">
-                <button type="submit" class="button">{% trans "Submit" %}</button>
-            </div>
+            <fieldset>
+                {% for field in form %}
+                    <div class="clearfix{% if field.errors %} error{% endif %}">
+                        {{ field.label_tag }}
+                        <div class="input">{{ field }}</div>
+                        {% if field.help_text %}
+                            <span class="help-block">{{ field.help_text }}</span>
+                        {% endif %}
+                    </div>
+                {% endfor %}
+            </fieldset>
+            <p class="actions">
+                <button type="submit" class="btn primary">{% trans "Submit" %}</button>
+            </p>
         </form>
 
         {% if result %}
-            <h2>Result</h2>
+            <div class="page-header">
+                <h2>Result</h2>
+            </div>
             <pre><strong>{{ result.status }} {{ result.reason }}</strong>
 {% for key, value in result.headers %}{{ key }}: {{ value }}
 {% endfor %}
diff --git a/sentry/web/forms.py b/sentry/web/forms.py
index b7d7db582f..98b031f2fb 100644
--- a/sentry/web/forms.py
+++ b/sentry/web/forms.py
@@ -141,10 +141,10 @@ class NewProjectMemberForm(BaseProjectMemberForm):
 
 
 class ReplayForm(forms.Form):
-    url = forms.URLField()
+    url = forms.URLField(widget=forms.TextInput(attrs={'class': 'span8'}))
     method = forms.ChoiceField(choices=((k, k) for k in Http.METHODS))
-    data = forms.CharField(required=False, widget=forms.Textarea())
-    headers = forms.CharField(required=False, widget=forms.Textarea())
+    data = forms.CharField(required=False, widget=forms.Textarea(attrs={'class': 'span8'}))
+    headers = forms.CharField(required=False, widget=forms.Textarea(attrs={'class': 'span8'}))
 
     def clean_headers(self):
         value = self.cleaned_data.get('headers')
diff --git a/sentry/web/frontend/events.py b/sentry/web/frontend/events.py
index eb624f1f4a..a0712a2adb 100644
--- a/sentry/web/frontend/events.py
+++ b/sentry/web/frontend/events.py
@@ -63,7 +63,7 @@ def replay_event(request, project_id, event_id):
     initial = {
         'url': http.url,
         'method': http.method,
-        'headers': '\n'.join('%s: %s' % (k, v) for k, v in http.env.iteritems()),
+        'headers': '\n'.join('%s: %s' % (k, v) for k, v in http.env.iteritems() if k[0].upper() == k[0]),
         'data': urllib.urlencode(http.data),
     }
 
