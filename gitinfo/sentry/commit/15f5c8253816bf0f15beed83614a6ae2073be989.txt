commit 15f5c8253816bf0f15beed83614a6ae2073be989
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Dec 18 13:29:51 2014 -0800

    Switch to unicode safe urlquote

diff --git a/src/sentry/api/base.py b/src/sentry/api/base.py
index 935aebc600..58df30f12e 100644
--- a/src/sentry/api/base.py
+++ b/src/sentry/api/base.py
@@ -1,6 +1,7 @@
 from __future__ import absolute_import
 
 from datetime import datetime, timedelta
+from django.utils.http import urlquote
 from enum import Enum
 from pytz import utc
 from rest_framework.authentication import SessionAuthentication
@@ -8,7 +9,6 @@ from rest_framework.parsers import JSONParser
 from rest_framework.renderers import JSONRenderer
 from rest_framework.response import Response
 from rest_framework.views import APIView
-from urllib2 import quote
 
 from sentry.tsdb.base import ROLLUPS
 
@@ -58,7 +58,7 @@ class Endpoint(APIView):
         ]
 
         querystring = u'&'.join(
-            u'{0}={1}'.format(quote(k), quote(v))
+            u'{0}={1}'.format(urlquote(k), urlquote(v))
             for k, v in request.GET.iteritems()
             if k != 'cursor'
         )
diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index a9fa3cca6c..c6ec728712 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -22,13 +22,13 @@ from django.http import (
     HttpResponseForbidden, HttpResponseRedirect,
 )
 from django.utils import timezone
+from django.utils.http import urlquote
 from django.utils.translation import ugettext as _
 from django.views.decorators.cache import never_cache, cache_control
 from django.views.decorators.csrf import csrf_exempt
 from django.views.generic.base import View as BaseView
 from functools import wraps
 from raven.contrib.django.models import client as Raven
-from urllib2 import quote
 
 from sentry import app
 from sentry.api.base import LINK_HEADER
@@ -409,7 +409,7 @@ def poll(request, organization, project):
     ]
 
     querystring = u'&'.join(
-        u'{0}={1}'.format(quote(k), quote(v))
+        u'{0}={1}'.format(urlquote(k), urlquote(v))
         for k, v in request.GET.iteritems()
         if k != 'cursor'
     )
