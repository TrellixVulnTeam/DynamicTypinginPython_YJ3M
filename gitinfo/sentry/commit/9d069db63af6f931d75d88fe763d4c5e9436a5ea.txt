commit 9d069db63af6f931d75d88fe763d4c5e9436a5ea
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Thu Aug 30 11:57:44 2018 -0700

    feat(discover): Remove internal event attributes (#9564)
    
    Remove `deleted` and `retention_days` as queryable properties since these are internal event
    attributes.

diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/data.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/data.jsx
index 791f868e7c..8c4cb78ef3 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/data.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/data.jsx
@@ -25,8 +25,6 @@ const COLUMNS = [
   {name: 'platform', type: 'string'},
   {name: 'message', type: 'string'},
   {name: 'primary_hash', type: 'string'},
-  {name: 'deleted', type: 'number'},
-  {name: 'retention_days', type: 'number'},
   {name: 'timestamp', type: 'string'}, // TODO: handling datetime as string for now
   {name: 'received', type: 'string'}, // TODO: handling datetime as string for now
 
diff --git a/tests/js/spec/views/organizationDiscover/aggregations/aggregation.spec.jsx b/tests/js/spec/views/organizationDiscover/aggregations/aggregation.spec.jsx
index 6c3ef7017d..ae2596f20e 100644
--- a/tests/js/spec/views/organizationDiscover/aggregations/aggregation.spec.jsx
+++ b/tests/js/spec/views/organizationDiscover/aggregations/aggregation.spec.jsx
@@ -14,8 +14,8 @@ describe('Aggregation', function() {
           expectedTextValue: 'uniq(environment)',
         },
         {
-          value: ['avg', 'retention_days', 'avg_retention_days'],
-          expectedTextValue: 'avg(retention_days)',
+          value: ['avg', 'device_battery_level', 'avg_device_battery_level'],
+          expectedTextValue: 'avg(device_battery_level)',
         },
         {
           value: ['uniq', 'tags[message]', 'uniq_tags_message'],
diff --git a/tests/js/spec/views/organizationDiscover/aggregations/utils.spec.jsx b/tests/js/spec/views/organizationDiscover/aggregations/utils.spec.jsx
index 1021c2f454..abda7c9c56 100644
--- a/tests/js/spec/views/organizationDiscover/aggregations/utils.spec.jsx
+++ b/tests/js/spec/views/organizationDiscover/aggregations/utils.spec.jsx
@@ -16,8 +16,8 @@ const aggregationList = [
     external: ['uniq', 'message', 'uniq_message'],
   },
   {
-    internal: 'avg(retention_days)',
-    external: ['avg', 'retention_days', 'avg_retention_days'],
+    internal: 'avg(device_battery_level)',
+    external: ['avg', 'device_battery_level', 'avg_device_battery_level'],
   },
   {
     internal: 'uniq(tags[server_name])',
diff --git a/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx b/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx
index 1bc89ab6c4..0aaa847b79 100644
--- a/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx
+++ b/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx
@@ -20,12 +20,12 @@ const conditionList = [
     external: ['message', 'IS NOT NULL', null],
   },
   {
-    internal: 'retention_days = 3',
-    external: ['retention_days', '=', 3],
+    internal: 'device_battery_level = 3',
+    external: ['device_battery_level', '=', 3],
   },
   {
-    internal: 'retention_days >= 0',
-    external: ['retention_days', '>=', 0],
+    internal: 'device_battery_level >= 0',
+    external: ['device_battery_level', '>=', 0],
   },
   {
     internal: 'message NOT LIKE something%',
diff --git a/tests/js/spec/views/organizationDiscover/queryBuilder.spec.jsx b/tests/js/spec/views/organizationDiscover/queryBuilder.spec.jsx
index 25c9a812b7..dcdfc11366 100644
--- a/tests/js/spec/views/organizationDiscover/queryBuilder.spec.jsx
+++ b/tests/js/spec/views/organizationDiscover/queryBuilder.spec.jsx
@@ -11,7 +11,7 @@ describe('Query Builder', function() {
 
       expect(external.projects).toEqual([2]);
       expect(external.fields).toEqual(expect.arrayContaining([expect.any(String)]));
-      expect(external.fields).toHaveLength(47);
+      expect(external.fields).toHaveLength(45);
       expect(external.conditions).toHaveLength(0);
       expect(external.aggregations).toHaveLength(0);
       expect(external.orderby).toBe('-timestamp');
