commit 126842ba881592cf5ee4113e89df7079dd324fb5
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jul 23 23:06:40 2013 -0700

    More minor fixes for stripping

diff --git a/src/sentry/models.py b/src/sentry/models.py
index a5d35b6b7a..dc86c6d99e 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -30,7 +30,6 @@ from django.db.models.signals import post_syncdb, post_save, pre_delete
 from django.template.defaultfilters import slugify
 from django.utils import timezone
 from django.utils.datastructures import SortedDict
-from django.utils.encoding import smart_unicode
 from django.utils.translation import ugettext_lazy as _
 
 from sentry.conf import settings
@@ -478,8 +477,8 @@ class EventBase(Model):
         super(EventBase, self).save(*args, **kwargs)
 
     def error(self):
-        if strip(self.message):
-            message = smart_unicode(self.message)
+        message = strip(self.message)
+        if message:
             if len(message) > 100:
                 message = message[:97] + '...'
         else:
@@ -493,7 +492,7 @@ class EventBase(Model):
 
     def message_top(self):
         culprit = strip(self.culprit)
-        if strip(culprit):
+        if culprit:
             return culprit
         message = strip(self.message)
         if not strip(message):
diff --git a/src/sentry/utils/strings.py b/src/sentry/utils/strings.py
index 8db01d6a7e..8aaf39e769 100644
--- a/src/sentry/utils/strings.py
+++ b/src/sentry/utils/strings.py
@@ -8,6 +8,8 @@ sentry.utils.strings
 import base64
 import zlib
 
+from django.utils.encoding import smart_unicode
+
 
 def truncatechars(value, arg):
     """
@@ -40,5 +42,5 @@ def strip(value):
     if not value:
         return ''
     if not isinstance(value, basestring):
-        return unicode(value)  # fuck it
-    return value.strip()
+        return smart_unicode(value)  # fuck it
+    return smart_unicode(value).strip()
