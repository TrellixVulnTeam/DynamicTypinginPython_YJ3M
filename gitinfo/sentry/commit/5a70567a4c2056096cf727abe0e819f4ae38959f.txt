commit 5a70567a4c2056096cf727abe0e819f4ae38959f
Author: Mark Story <mark@sentry.io>
Date:   Wed Oct 9 09:32:48 2019 -0400

    fix(dashboards) Fix release events when there are no releases (#14996)
    
    Fix 500 from discover1 when getting events by release.
    This popped up after a deploy I did as the stacktrace had a new hash.
    
    Fixes SEN-1146
    Fixes SENTRY-CZE

diff --git a/src/sentry/static/sentry/app/views/dashboards/discoverQuery.jsx b/src/sentry/static/sentry/app/views/dashboards/discoverQuery.jsx
index 2b23f2dbaf..b88866f6b8 100644
--- a/src/sentry/static/sentry/app/views/dashboards/discoverQuery.jsx
+++ b/src/sentry/static/sentry/app/views/dashboards/discoverQuery.jsx
@@ -130,7 +130,7 @@ class DiscoverQuery extends React.Component {
     queries.forEach(({constraints, ...query}) => {
       if (constraints && constraints.includes('recentReleases')) {
         // Can't create query yet because no releases
-        if (!this.props.releases) {
+        if (!(this.props.releases && this.props.releases.length)) {
           return;
         }
         const newQuery = {
@@ -138,6 +138,7 @@ class DiscoverQuery extends React.Component {
           fields: [],
           conditionFields:
             this.props.releases &&
+            this.props.releases.length > 0 &&
             createReleaseFieldCondition(this.props.releases.map(({version}) => version)),
         };
         this.queryBuilders.push(
