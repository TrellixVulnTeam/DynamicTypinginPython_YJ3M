commit c60fd7c6a0f1a6d8b39489a35fdb3887cf0e5b16
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Thu Nov 8 13:26:00 2018 -0800

    ref(event search): Consolodate date regexes into one

diff --git a/src/sentry/api/event_search.py b/src/sentry/api/event_search.py
index 41d94af256..4a692ce74b 100644
--- a/src/sentry/api/event_search.py
+++ b/src/sentry/api/event_search.py
@@ -17,17 +17,14 @@ raw_search      = ~r".+$"
 # standard key:val filter
 basic_filter    = search_key sep search_value
 # filter specifically for the timestamp
-time_filter     = "timestamp" operator date_formats
+time_filter     = "timestamp" operator date_format
 
 search_key      = ~r"[a-z]*\.?[a-z]*"
 search_value    = quoted_value / value
 value           = ~r"\S*"
 quoted_value    = ~r"\"(.*)\""s
 
-date_formats    = date_time_micro / date_time / date
-date            = ~r"\d{4}-\d{2}-\d{2}"
-date_time       = ~r"\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}"
-date_time_micro = ~r"\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{1,6}"
+date_format    = ~r"\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(\.\d{1,6})?)?"
 
 # NOTE: the order in which these operators are listed matters
 # because for example, if < comes before <= it will match that
@@ -37,6 +34,7 @@ sep             = ":"
 space           = ~r" "
 """)
 
+
 FIELD_LOOKUP = {
     'user.id': {
         'snuba_name': 'user_id',
@@ -169,7 +167,7 @@ class SearchVisitor(NodeVisitor):
     def visit_operator(self, node, children):
         return node.text
 
-    def visit_date_formats(self, node, children):
+    def visit_date_format(self, node, children):
         return node.text
 
     def visit_basic_filter(self, node, children):
