commit 8b6cfe2ab0388c1fce298c1c4e6082d99acb029c
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Apr 23 15:36:33 2015 -0700

    Various cleanup for pending membership list

diff --git a/src/sentry/templates/sentry/organization-members.html b/src/sentry/templates/sentry/organization-members.html
index dffaa4091b..a50bc3fac0 100644
--- a/src/sentry/templates/sentry/organization-members.html
+++ b/src/sentry/templates/sentry/organization-members.html
@@ -34,33 +34,6 @@
         {% endfor %}
       </ul>
     </div>
-
-    <script>
-    $(function(){
-      $('.access-request-list > li a').click(function(e){
-        var $el = $(this);
-        if (!$el.data('action')) {
-          return;
-        }
-        e.preventDefault();
-
-        $.ajax({
-          method: 'PUT',
-          url: app.config.urlPrefix + '/api/0/organizations/' + app.config.organizationId + '/access-requests/' + $el.data('id') + '/',
-          contentType: 'application/json',
-          data: JSON.stringify({
-            isApproved: $el.data('action') === 'approve'
-          }),
-          success: function() {
-            $el.parents('li').remove();
-          },
-          error: function() {
-            window.alert('We were unable to act on the access request. Maybe someone else beat you to it?');
-          }
-        });
-      });
-    });
-    </script>
   {% elif ref == 'access-requests' %}
     <div class="alert alert-block alert-info">
       <p>All pending access requests have been taken care of.</p>
@@ -185,5 +158,31 @@
       }
     });
   });
+
+  $('.access-request-list li a').click(function(e){
+    var $el = $(this);
+    if (!$el.data('action')) {
+      return;
+    }
+    e.preventDefault();
+
+    $.ajax({
+      method: 'PUT',
+      url: app.config.urlPrefix + '/api/0/organizations/' + app.config.organizationId + '/access-requests/' + $el.data('id') + '/',
+      contentType: 'application/json',
+      data: JSON.stringify({
+        isApproved: $el.data('action') === 'approve'
+      }),
+      success: function() {
+        $el.parents('li').remove();
+        if (!$('.access-request-list li').length) {
+          $('.access-request-list').remove();
+        }
+      },
+      error: function() {
+        window.alert('We were unable to act on the access request. Maybe someone else beat you to it?');
+      }
+    });
+  });
   </script>
 {% endblock %}
