commit f6c83caec15d917f3d8eae4e7fd417036a1b6574
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Oct 1 16:12:47 2015 -0700

    Add permission checks for create team and create project

diff --git a/src/sentry/static/sentry/app/views/organizationTeams/index.jsx b/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
index 3ec64cf8ee..63c779987d 100644
--- a/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
+++ b/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
@@ -6,6 +6,7 @@ import ConfigStore from "../../stores/configStore";
 import OrganizationHomeContainer from "../../components/organizations/homeContainer";
 import OrganizationState from "../../mixins/organizationState";
 import TeamStore from "../../stores/teamStore";
+import TooltipMixin from "../../mixins/tooltip";
 import {sortArray} from "../../utils";
 
 import ExpandedTeamList from "./expandedTeamList";
@@ -15,7 +16,10 @@ import OrganizationStatOverview from "./organizationStatOverview";
 var OrganizationTeams = React.createClass({
   mixins: [
     OrganizationState,
-    Reflux.listenTo(TeamStore, "onTeamListChange")
+    Reflux.listenTo(TeamStore, "onTeamListChange"),
+    TooltipMixin({
+      selector: ".tip"
+    })
   ],
 
   contextTypes: {
@@ -92,13 +96,28 @@ var OrganizationTeams = React.createClass({
           <div className="col-md-9">
             <div className="team-list">
               <div className="pull-right">
-                <a href={urlPrefix + '/projects/new/'} className="btn btn-primary btn-sm"
-                   style={{marginRight: 5}}>
-                  <span className="icon-plus" /> Project
-                </a>
-                <a href={urlPrefix + '/teams/new/'} className="btn btn-primary btn-sm">
-                  <span className="icon-plus" /> Team
-                </a>
+                {access.has('project:write') ?
+                  <a href={urlPrefix + '/projects/new/'} className="btn btn-primary btn-sm"
+                     style={{marginRight: 5}}>
+                    <span className="icon-plus" /> Project
+                  </a>
+                :
+                  <a className="btn btn-primary btn-sm btn-disabled tip"
+                     title="You do not have enough permission to create new projects"
+                     style={{marginRight: 5}}>
+                    <span className="icon-plus" /> Project
+                  </a>
+                }
+                {access.has('team:write') ?
+                  <a href={urlPrefix + '/teams/new/'} className="btn btn-primary btn-sm">
+                    <span className="icon-plus" /> Team
+                  </a>
+                :
+                  <a className="btn btn-primary btn-sm btn-disabled tip"
+                     title="You do not have enough permission to create new teams">
+                    <span className="icon-plus" /> Team
+                  </a>
+                }
               </div>
               <ul className="nav nav-tabs border-bottom">
                 <li className={activeNav === "your-teams" && "active"}>
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index 07c02ec5c8..177aecf747 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -12,7 +12,8 @@
 
   .transition(all .1s);
 
-  &.disabled {
+  &.disabled,
+  &.btn-disabled {
     color: #CED3D6;
     border-color: #E3E5E6;
   }
@@ -99,7 +100,8 @@
 
 // Disabled buttons
 
-.btn-primary.disabled, .btn-primary[disabled], fieldset[disabled] .btn-primary, .btn-primary.disabled:hover, .btn-primary[disabled]:hover, fieldset[disabled] .btn-primary:hover, .btn-primary.disabled:focus, .btn-primary[disabled]:focus, fieldset[disabled] .btn-primary:focus, .btn-primary.disabled:active, .btn-primary[disabled]:active, fieldset[disabled] .btn-primary:active, .btn-primary.disabled.active, .btn-primary[disabled].active, fieldset[disabled] .btn-primary.active, .btn-danger.disabled, .btn-danger[disabled], fieldset[disabled] .btn-danger, .btn-danger.disabled:hover, .btn-danger[disabled]:hover, fieldset[disabled] .btn-danger:hover, .btn-danger.disabled:focus, .btn-danger[disabled]:focus, fieldset[disabled] .btn-danger:focus, .btn-danger.disabled:active, .btn-danger[disabled]:active, fieldset[disabled] .btn-danger:active, .btn-danger.disabled.active, .btn-danger[disabled].active, fieldset[disabled] .btn-danger.active {
+.btn-primary.disabled, .btn-primary[disabled], fieldset[disabled] .btn-primary, .btn-primary.disabled:hover, .btn-primary[disabled]:hover, fieldset[disabled] .btn-primary:hover, .btn-primary.disabled:focus, .btn-primary[disabled]:focus, fieldset[disabled] .btn-primary:focus, .btn-primary.disabled:active, .btn-primary[disabled]:active, fieldset[disabled] .btn-primary:active, .btn-primary.disabled.active, .btn-primary[disabled].active, fieldset[disabled] .btn-primary.active, .btn-danger.disabled, .btn-danger[disabled], fieldset[disabled] .btn-danger, .btn-danger.disabled:hover, .btn-danger[disabled]:hover, fieldset[disabled] .btn-danger:hover, .btn-danger.disabled:focus, .btn-danger[disabled]:focus, fieldset[disabled] .btn-danger:focus, .btn-danger.disabled:active, .btn-danger[disabled]:active, fieldset[disabled] .btn-danger:active, .btn-danger.disabled.active, .btn-danger[disabled].active, fieldset[disabled] .btn-danger.active,
+  .btn-primary.btn-disabled, .btn-primary.btn-disabled:hover {
   color: lighten(@gray, 50);
   border-color: lighten(@gray, 58);
   background: #fff;
