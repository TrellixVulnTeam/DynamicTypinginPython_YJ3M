commit 7a2e93beca6d6423fe0863ea6dfa60b13f2024c7
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Jun 26 22:12:22 2015 -0700

    Handle failures on event ID

diff --git a/src/sentry/api/base.py b/src/sentry/api/base.py
index ce39902756..1891d3b423 100644
--- a/src/sentry/api/base.py
+++ b/src/sentry/api/base.py
@@ -83,7 +83,11 @@ class Endpoint(APIView):
             import sys
             import traceback
             sys.stderr.write(traceback.format_exc())
-            event_id = raven.get_ident(raven.captureException(request=request))
+            event = raven.captureException(request=request)
+            if event:
+                event_id = raven.get_ident(event)
+            else:
+                event_id = None
             context = {
                 'detail': 'Internal Error',
                 'errorId': event_id,
