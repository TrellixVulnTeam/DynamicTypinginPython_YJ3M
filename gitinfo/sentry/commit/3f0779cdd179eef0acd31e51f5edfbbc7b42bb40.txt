commit 3f0779cdd179eef0acd31e51f5edfbbc7b42bb40
Author: Jerzy Kozera <jerzy.kozera@gmail.com>
Date:   Wed Apr 20 16:35:43 2011 +0200

    Don't fail sentry.helpers.transform with TypeError when called on class having __sentry__ method

diff --git a/sentry/helpers.py b/sentry/helpers.py
index f1d16ad423..a20e0d53f5 100644
--- a/sentry/helpers.py
+++ b/sentry/helpers.py
@@ -3,6 +3,7 @@ import sys
 import urllib
 import urllib2
 import uuid
+from types import ClassType, TypeType
 
 import django
 from django.conf import settings
@@ -79,7 +80,8 @@ def transform(value):
             return str(value)
         except:
             return to_unicode(value)
-    elif callable(getattr(value, '__sentry__', None)):
+    elif not isinstance(value, (ClassType, TypeType)) and \
+            callable(getattr(value, '__sentry__', None)):
         return value.__sentry__()
     elif not isinstance(value, (int, bool)) and value is not None:
         # XXX: we could do transform(repr(value)) here
@@ -207,4 +209,4 @@ def get_versions(module_list=None):
         if isinstance(version, (list, tuple)):
             version = '.'.join(str(o) for o in version)
         versions[module_name] = version
-    return versions
\ No newline at end of file
+    return versions
