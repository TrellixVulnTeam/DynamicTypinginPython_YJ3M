commit 3e99ace927de4d17678c2e992eccb3cd3c3888fd
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Dec 7 16:11:36 2015 -0800

    Make sure header values are coerced to string
    
    Fixes GH-2418

diff --git a/src/sentry/interfaces/http.py b/src/sentry/interfaces/http.py
index d237cf50bc..de5d3597fe 100644
--- a/src/sentry/interfaces/http.py
+++ b/src/sentry/interfaces/http.py
@@ -42,7 +42,7 @@ def format_headers(value):
         if k.lower() == 'cookie':
             cookie_header = v
         else:
-            result.append((k.title(), v))
+            result.append((k.title(), str(v)))
     return result, cookie_header
 
 
diff --git a/src/sentry/static/sentry/app/components/events/interfaces/utils.jsx b/src/sentry/static/sentry/app/components/events/interfaces/utils.jsx
index bc1416d12f..fe5ea1b576 100644
--- a/src/sentry/static/sentry/app/components/events/interfaces/utils.jsx
+++ b/src/sentry/static/sentry/app/components/events/interfaces/utils.jsx
@@ -25,7 +25,7 @@ export function getCurlCommand(data) {
   });
 
   for (let header of headers) {
-    result += ' \\\n -H "' + header[0] + ': ' + escapeQuotes(header[1]) + '"';
+    result += ' \\\n -H "' + header[0] + ': ' + escapeQuotes(header[1] + '') + '"';
   }
 
   if (typeof data.data === 'string') {
diff --git a/tests/sentry/interfaces/test_http.py b/tests/sentry/interfaces/test_http.py
index b183142b7f..5acd47e26e 100644
--- a/tests/sentry/interfaces/test_http.py
+++ b/tests/sentry/interfaces/test_http.py
@@ -122,3 +122,10 @@ class HttpTest(TestCase):
             headers={'Foo': ['1', '2']},
         ))
         assert result.headers == [('Foo', '1, 2')]
+
+    def test_header_value_str(self):
+        result = Http.to_python(dict(
+            url='http://example.com',
+            headers={'Foo': 1}
+        ))
+        assert result.headers == [('Foo', '1')]
