commit 8bc4596a8811b8bd383fa7c34a289d7d1601b473
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Fri Nov 16 19:39:26 2018 +0100

    fix: code does not exist on requests exc (#10623)

diff --git a/src/social_auth/backends/asana.py b/src/social_auth/backends/asana.py
index b664ec1a93..598ccce09d 100644
--- a/src/social_auth/backends/asana.py
+++ b/src/social_auth/backends/asana.py
@@ -59,20 +59,18 @@ class AsanaAuth(BaseOAuth2):
         """Completes loging process, must return user instance"""
         self.process_error(self.data)
         params = self.auth_complete_params(self.validate_state())
+
+        response = requests.post(self.ACCESS_TOKEN_URL, data=params,
+                                 headers=self.auth_headers())
+        if response.status_code == 400:
+            raise AuthCanceled(self)
+
+        response.raise_for_status()
+
         try:
-            response = requests.post(self.ACCESS_TOKEN_URL, data=params,
-                                     headers=self.auth_headers())
-            response.raise_for_status()
-        except requests.exceptions.HTTPError as e:
-            if e.code == 400:
-                raise AuthCanceled(self)
-            else:
-                raise
-        else:
-            try:
-                response = response.json()
-            except (ValueError, KeyError):
-                raise AuthUnknownError(self)
+            response = response.json()
+        except (ValueError, KeyError):
+            raise AuthUnknownError(self)
 
         response.pop('data')
         self.process_error(response)
