commit 93ab9bdda5d72710c55065b0feabd13fe8cfeb2d
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Thu Jan 3 11:32:04 2019 -0800

    feat(ui): Update GlobalSelectionHeader defaults (#11316)
    
    Sets default project list based on org project membership
    In time selector, showRelative defaults to true

diff --git a/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/globalSelectionHeader.jsx b/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/globalSelectionHeader.jsx
index 7b03f78a86..7a308b515d 100644
--- a/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/globalSelectionHeader.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/globalSelectionHeader.jsx
@@ -276,11 +276,17 @@ class GlobalSelectionHeader extends React.Component {
     callIfFunction(this.props.onUpdateProjects, projects);
   };
 
+  getProjects = () => {
+    return (
+      this.props.projects ||
+      this.props.organization.projects.filter(project => project.isMember)
+    );
+  };
+
   render() {
     const {
       className,
       organization,
-      projects,
       showAbsolute,
       showRelative,
       showEnvironmentSelector,
@@ -292,7 +298,7 @@ class GlobalSelectionHeader extends React.Component {
         <HeaderItemPosition>
           <MultipleProjectSelector
             organization={organization}
-            projects={projects}
+            projects={this.getProjects()}
             value={this.state.projects || this.props.selection.projects}
             onChange={this.handleChangeProjects}
             onUpdate={this.handleUpdateProjects}
diff --git a/src/sentry/static/sentry/app/components/organizations/timeRangeSelector/index.jsx b/src/sentry/static/sentry/app/components/organizations/timeRangeSelector/index.jsx
index 2b6685712e..61170ea196 100644
--- a/src/sentry/static/sentry/app/components/organizations/timeRangeSelector/index.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/timeRangeSelector/index.jsx
@@ -72,7 +72,7 @@ class TimeRangeSelector extends React.PureComponent {
 
   static defaultProps = {
     showAbsolute: true,
-    showRelative: false,
+    showRelative: true,
     utc: DEFAULT_USE_UTC,
   };
 
diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/discover.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/discover.jsx
index 36660b1909..4ae0ff833c 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/discover.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/discover.jsx
@@ -345,8 +345,6 @@ export default class OrganizationDiscover extends React.Component {
 
     const shouldDisplayResult = resultManager.shouldDisplayResult();
 
-    const projects = organization.projects.filter(project => project.isMember);
-
     const start =
       (currentQuery.start && moment.utc(currentQuery.start).toDate()) ||
       currentQuery.start;
@@ -393,11 +391,8 @@ export default class OrganizationDiscover extends React.Component {
 
         <DiscoverGlobalSelectionHeader
           organization={organization}
-          projects={projects}
           project={currentQuery.projects}
           hasCustomRouting={true}
-          showAbsolute={true}
-          showRelative={true}
           relative={currentQuery.range}
           start={start}
           end={end}
diff --git a/src/sentry/static/sentry/app/views/organizationEvents/index.jsx b/src/sentry/static/sentry/app/views/organizationEvents/index.jsx
index 2c66a3c02b..3517e12f24 100644
--- a/src/sentry/static/sentry/app/views/organizationEvents/index.jsx
+++ b/src/sentry/static/sentry/app/views/organizationEvents/index.jsx
@@ -45,9 +45,6 @@ class OrganizationEventsContainer extends React.Component {
   render() {
     const {organization, location, selection, children} = this.props;
 
-    const projects =
-      organization.projects && organization.projects.filter(({isMember}) => isMember);
-
     return (
       <EventsContext.Provider
         value={{
@@ -60,9 +57,6 @@ class OrganizationEventsContainer extends React.Component {
           <Feature features={['global-views']} renderDisabled>
             <GlobalSelectionHeader
               organization={organization}
-              projects={projects}
-              showAbsolute={true}
-              showRelative={true}
               resetParamsOnChange={['zoom', 'cursor']}
             />
 
diff --git a/src/sentry/static/sentry/app/views/userFeedback/organizationUserFeedback.jsx b/src/sentry/static/sentry/app/views/userFeedback/organizationUserFeedback.jsx
index 06110fcd4e..a676a8c4e7 100644
--- a/src/sentry/static/sentry/app/views/userFeedback/organizationUserFeedback.jsx
+++ b/src/sentry/static/sentry/app/views/userFeedback/organizationUserFeedback.jsx
@@ -101,12 +101,7 @@ class OrganizationUserFeedback extends AsyncView {
         organization={organization}
         renderDisabled={this.renderNoAccess}
       >
-        <GlobalSelectionHeader
-          organization={organization}
-          projects={organization.projects.filter(project => project.isMember)}
-          showAbsolute={true}
-          showRelative={true}
-        />
+        <GlobalSelectionHeader organization={organization} />
         <Content>
           <UserFeedbackContainer
             pageLinks={reportListPageLinks}
diff --git a/tests/js/spec/views/userFeedback/__snapshots__/organizationUserFeedback.spec.jsx.snap b/tests/js/spec/views/userFeedback/__snapshots__/organizationUserFeedback.spec.jsx.snap
index 7a5437058b..df3351e26d 100644
--- a/tests/js/spec/views/userFeedback/__snapshots__/organizationUserFeedback.spec.jsx.snap
+++ b/tests/js/spec/views/userFeedback/__snapshots__/organizationUserFeedback.spec.jsx.snap
@@ -166,9 +166,6 @@ exports[`OrganizationUserFeedback renders 1`] = `
                 "teams": Array [],
               }
             }
-            projects={Array []}
-            showAbsolute={true}
-            showRelative={true}
           >
             <withGlobalSelection(GlobalSelectionHeader)
               location={
@@ -205,7 +202,6 @@ exports[`OrganizationUserFeedback renders 1`] = `
                   "teams": Array [],
                 }
               }
-              projects={Array []}
               router={
                 Object {
                   "createHref": [MockFunction] {
@@ -297,8 +293,6 @@ exports[`OrganizationUserFeedback renders 1`] = `
                   "setRouteLeaveHook": [MockFunction],
                 }
               }
-              showAbsolute={true}
-              showRelative={true}
             >
               <GlobalSelectionHeader
                 hasCustomRouting={false}
@@ -336,7 +330,6 @@ exports[`OrganizationUserFeedback renders 1`] = `
                     "teams": Array [],
                   }
                 }
-                projects={Array []}
                 resetParamsOnChange={Array []}
                 router={
                   Object {
@@ -441,9 +434,7 @@ exports[`OrganizationUserFeedback renders 1`] = `
                     "projects": Array [],
                   }
                 }
-                showAbsolute={true}
                 showEnvironmentSelector={true}
-                showRelative={true}
               >
                 <Header>
                   <Base
