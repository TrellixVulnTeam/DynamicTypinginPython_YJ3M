commit cbc5e1e672b1deea9f9e08fd64baa283853dbb9c
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Aug 6 12:36:35 2018 -0700

    Correct invalid behavior

diff --git a/src/sentry/web/frontend/error_page_embed.py b/src/sentry/web/frontend/error_page_embed.py
index b6c1a7dadb..c1ab9372ac 100644
--- a/src/sentry/web/frontend/error_page_embed.py
+++ b/src/sentry/web/frontend/error_page_embed.py
@@ -116,14 +116,17 @@ class ErrorPageEmbedView(View):
         try:
             event_id = request.GET['eventId']
         except KeyError:
-            return self._smart_response(request, {'eventId': 'Missing or invalid parameter.'}, status=400)
+            return self._smart_response(
+                request, {'eventId': 'Missing or invalid parameter.'}, status=400)
 
         if event_id and not is_event_id(event_id):
-            return self._smart_response(request, {'eventId': 'Missing or invalid parameter.'}, status=400)
+            return self._smart_response(
+                request, {'eventId': 'Missing or invalid parameter.'}, status=400)
 
         key = self._get_project_key(request)
         if not key:
-            return self._smart_response(request, {'dsn': 'Missing or invalid parameter.'}, status=404)
+            return self._smart_response(
+                request, {'dsn': 'Missing or invalid parameter.'}, status=404)
 
         origin = self._get_origin(request)
         if not is_valid_origin(origin, key.project):
@@ -154,7 +157,7 @@ class ErrorPageEmbedView(View):
 
             try:
                 event = Event.objects.filter(project_id=report.project.id,
-                                             event_id=report.event_id).select_related('group')[0]
+                                             event_id=report.event_id)[0]
             except IndexError:
                 try:
                     report.group = Group.objects.from_event_id(report.project, report.event_id)
diff --git a/tests/sentry/api/endpoints/test_organization_member_team_details.py b/tests/sentry/api/endpoints/test_organization_member_team_details.py
index 6398b95040..d80fa9f178 100644
--- a/tests/sentry/api/endpoints/test_organization_member_team_details.py
+++ b/tests/sentry/api/endpoints/test_organization_member_team_details.py
@@ -291,7 +291,7 @@ class CreateOrganizationMemberTeamTest(APITestCase):
 
         assert not OrganizationMemberTeam.objects.filter(
             team=team,
-            organizationmember=owner,
+            organizationmember__user=owner,
         ).exists()
 
 
