commit 0683b2363708b6d15dc42abf26945fd1628bb611
Author: Jess MacQueen <jess@getsentry.com>
Date:   Thu Mar 16 14:40:33 2017 -0700

    handle possibility of release not having projects

diff --git a/src/sentry/api/endpoints/release_deploys.py b/src/sentry/api/endpoints/release_deploys.py
index 8573641490..7cade98bfb 100644
--- a/src/sentry/api/endpoints/release_deploys.py
+++ b/src/sentry/api/endpoints/release_deploys.py
@@ -136,6 +136,7 @@ class ReleaseDeploysEndpoint(OrganizationReleasesBaseEndpoint):
                     date_started=result.get('dateStarted'),
                 )
 
+            activity = None
             for project in release.projects.all():
                 activity = Activity.objects.create(
                     type=Activity.DEPLOY,
@@ -150,7 +151,8 @@ class ReleaseDeploysEndpoint(OrganizationReleasesBaseEndpoint):
                 )
             # Somewhat hacky, only send notification for one
             # Deploy Activity record because it will cover all projects
-            activity.send_notification()
+            if activity is not None:
+                activity.send_notification()
 
             # This is the closest status code that makes sense, and we want
             # a unique 2xx response code so people can understand when
