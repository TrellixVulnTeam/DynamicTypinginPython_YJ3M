commit 69bc875f98eaa68d88737305555d92388ed745c7
Author: Danny Lee <dlee@sentry.io>
Date:   Mon Oct 28 15:53:23 2019 -0700

    ref(ui): Adjusting the width of things in the GlobalSelectionHeader (#15026)

diff --git a/src/sentry/static/sentry/app/components/organizations/backToIssues.jsx b/src/sentry/static/sentry/app/components/organizations/backToIssues.tsx
similarity index 99%
rename from src/sentry/static/sentry/app/components/organizations/backToIssues.jsx
rename to src/sentry/static/sentry/app/components/organizations/backToIssues.tsx
index 959d5c6a99..dc8ecbec7a 100644
--- a/src/sentry/static/sentry/app/components/organizations/backToIssues.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/backToIssues.tsx
@@ -3,19 +3,22 @@ import {Link} from 'react-router';
 import space from 'app/styles/space';
 
 const BackToIssues = styled(Link)`
-  color: ${p => p.theme.gray4};
-  background: ${p => p.theme.offWhite2};
   display: flex;
+  width: ${space(1.5)};
+  height: ${space(1.5)};
   align-items: center;
   justify-content: center;
+
+  box-sizing: content-box;
   padding: ${space(1)};
-  width: ${space(1.5)};
-  height: ${space(1.5)};
   border-radius: 50%;
-  box-sizing: content-box;
-  z-index: 1;
+
+  color: ${p => p.theme.gray4};
+  background: ${p => p.theme.offWhite2};
   transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
 
+  z-index: 1;
+
   &:hover {
     background: ${p => p.theme.offwhite};
     transform: scale(1.125);
diff --git a/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/header.jsx b/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/header.tsx
similarity index 99%
rename from src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/header.jsx
rename to src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/header.tsx
index e8d1d407a6..045c4a0acc 100644
--- a/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/header.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/header.tsx
@@ -1,15 +1,17 @@
 import styled from 'react-emotion';
 
 const Header = styled('div')`
+  position: relative;
   display: flex;
+  width: 100%;
+  height: 60px;
+
   border-bottom: 1px solid ${p => p.theme.borderDark};
   box-shadow: ${p => p.theme.dropShadowLight};
-  font-size: ${p => p.theme.fontSizeExtraLarge};
-  height: 60px;
   z-index: ${p => p.theme.zIndex.globalSelectionHeader};
-  position: relative;
-  width: 100%;
+
   background: #fff;
+  font-size: ${p => p.theme.fontSizeExtraLarge};
 `;
 
 export default Header;
diff --git a/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/index.jsx b/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/index.jsx
index f9ffadda06..e661b09199 100644
--- a/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/index.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/globalSelectionHeader/index.jsx
@@ -549,6 +549,9 @@ class GlobalSelectionHeader extends React.Component {
             </HeaderItemPosition>
           </React.Fragment>
         )}
+
+        {!showEnvironmentSelector && <HeaderItemPosition isSpacer />}
+        {!showDateSelector && <HeaderItemPosition isSpacer />}
       </Header>
     );
   }
diff --git a/src/sentry/static/sentry/app/components/organizations/headerItem.jsx b/src/sentry/static/sentry/app/components/organizations/headerItem.tsx
similarity index 87%
rename from src/sentry/static/sentry/app/components/organizations/headerItem.jsx
rename to src/sentry/static/sentry/app/components/organizations/headerItem.tsx
index 7de92e4035..98838e4cc1 100644
--- a/src/sentry/static/sentry/app/components/organizations/headerItem.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/headerItem.tsx
@@ -8,7 +8,20 @@ import Tooltip from 'app/components/tooltip';
 import space from 'app/styles/space';
 import overflowEllipsis from 'app/styles/overflowEllipsis';
 
-class HeaderItem extends React.Component {
+type Props = {
+  icon: React.ReactElement;
+  lockedMessage: string;
+  settingsLink: string;
+  allowClear: boolean;
+  hasChanges: boolean;
+  hasSelected: boolean;
+  isOpen: boolean;
+  locked: boolean;
+  innerRef: React.Ref<HTMLDivElement>;
+  onClear: () => void;
+} & HTMLDivElement;
+
+class HeaderItem extends React.Component<Props> {
   static propTypes = {
     allowClear: PropTypes.bool,
     icon: PropTypes.element,
@@ -123,7 +136,9 @@ const StyledClose = styled(InlineSvg)`
   margin: -${space(1)} 0px -${space(1)} -${space(1)};
 `;
 
-const StyledChevron = styled('div')`
+const StyledChevron = styled('div')<{
+  isOpen: boolean;
+}>`
   transform: rotate(${p => (p.isOpen ? '180deg' : '0deg')});
   transition: 0.1s all;
   width: ${space(2)};
@@ -158,4 +173,6 @@ const StyledLock = styled(InlineSvg)`
   stroke-width: 1.5;
 `;
 
-export default React.forwardRef((props, ref) => <HeaderItem {...props} innerRef={ref} />);
+export default React.forwardRef((props: Props, ref: React.Ref<HTMLDivElement>) => (
+  <HeaderItem {...props} innerRef={ref} />
+));
diff --git a/src/sentry/static/sentry/app/components/organizations/headerItemPosition.jsx b/src/sentry/static/sentry/app/components/organizations/headerItemPosition.tsx
similarity index 52%
rename from src/sentry/static/sentry/app/components/organizations/headerItemPosition.jsx
rename to src/sentry/static/sentry/app/components/organizations/headerItemPosition.tsx
index 2fdcb982d1..1fd24f77ca 100644
--- a/src/sentry/static/sentry/app/components/organizations/headerItemPosition.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/headerItemPosition.tsx
@@ -1,13 +1,27 @@
 import styled from 'react-emotion';
+
+import theme from 'app/utils/theme';
 import {AutoCompleteRoot} from 'app/components/dropdownAutoCompleteMenu';
 import {TimeRangeRoot} from 'app/components/organizations/timeRangeSelector/index';
 
-const HeaderItemPosition = styled('div')`
+type Props = {
+  isSpacer?: boolean;
+  theme: typeof theme;
+};
+
+function getMediaQueryForSpacer(p: Props): string {
+  return p.isSpacer
+    ? `@media (max-width: ${p.theme.breakpoints[1]}) { display: none; }`
+    : '';
+}
+
+const HeaderItemPosition = styled('div')<Props>`
   display: flex;
   flex: 1;
-  max-width: 450px;
-  height: 100%;
   min-width: 0;
+  height: 100%;
+
+  ${getMediaQueryForSpacer}
 
   ${AutoCompleteRoot}, ${TimeRangeRoot} {
     flex: 1;
diff --git a/src/sentry/static/sentry/app/components/organizations/headerSeparator.jsx b/src/sentry/static/sentry/app/components/organizations/headerSeparator.tsx
similarity index 73%
rename from src/sentry/static/sentry/app/components/organizations/headerSeparator.jsx
rename to src/sentry/static/sentry/app/components/organizations/headerSeparator.tsx
index 8aa292fa26..afc889f589 100644
--- a/src/sentry/static/sentry/app/components/organizations/headerSeparator.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/headerSeparator.tsx
@@ -1,9 +1,8 @@
-import {Box} from 'grid-emotion';
 import styled from 'react-emotion';
 
 import space from 'app/styles/space';
 
-const HeaderSeparator = styled(Box)`
+const HeaderSeparator = styled('div')`
   width: 1px;
   background-color: ${p => p.theme.borderLight};
   margin: ${space(2)} 0;
diff --git a/src/sentry/static/sentry/app/components/organizations/multipleEnvironmentSelector.jsx b/src/sentry/static/sentry/app/components/organizations/multipleEnvironmentSelector.jsx
index 2e8974cc1c..04b73e64d3 100644
--- a/src/sentry/static/sentry/app/components/organizations/multipleEnvironmentSelector.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/multipleEnvironmentSelector.jsx
@@ -291,7 +291,7 @@ const StyledDropdownAutoComplete = styled(DropdownAutoComplete)`
   box-shadow: ${p => p.theme.dropShadowLight};
   border-radius: ${p => p.theme.borderRadiusBottom};
   margin-top: 0;
-  min-width: 120%;
+  min-width: 100%;
 `;
 
 class EnvironmentSelectorItem extends React.PureComponent {
diff --git a/src/sentry/static/sentry/app/components/organizations/multipleProjectSelector.jsx b/src/sentry/static/sentry/app/components/organizations/multipleProjectSelector.jsx
index 3b8007b2ab..06c1c94eb6 100644
--- a/src/sentry/static/sentry/app/components/organizations/multipleProjectSelector.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/multipleProjectSelector.jsx
@@ -303,7 +303,7 @@ const SubmitButton = styled(Button)`
 const StyledProjectSelector = styled(ProjectSelector)`
   margin: 1px 0 0 -1px;
   border-radius: ${p => p.theme.borderRadiusBottom};
-  width: 110%;
+  width: 100%;
 `;
 
 const StyledHeaderItem = styled(HeaderItem)`
diff --git a/src/sentry/static/sentry/app/components/organizations/timeRangeSelector/index.jsx b/src/sentry/static/sentry/app/components/organizations/timeRangeSelector/index.jsx
index 59361573e6..4e7c80eea7 100644
--- a/src/sentry/static/sentry/app/components/organizations/timeRangeSelector/index.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/timeRangeSelector/index.jsx
@@ -406,7 +406,7 @@ const Menu = styled('div')`
   border: 1px solid ${p => p.theme.borderDark};
   position: absolute;
   top: 100%;
-  min-width: 120%;
+  min-width: 100%;
   z-index: ${p => p.theme.zIndex.dropdown};
   box-shadow: ${p => p.theme.dropShadowLight};
   border-radius: ${p => p.theme.borderRadiusBottom};
