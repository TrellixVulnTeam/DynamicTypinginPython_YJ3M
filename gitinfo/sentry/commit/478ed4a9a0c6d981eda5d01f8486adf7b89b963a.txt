commit 478ed4a9a0c6d981eda5d01f8486adf7b89b963a
Author: Alex Hofsteede <alex@hofsteede.com>
Date:   Wed Sep 5 15:42:18 2018 -0700

    fix: list of set, not set of list (#9634)

diff --git a/src/sentry/utils/snuba.py b/src/sentry/utils/snuba.py
index fc00423328..2a92d7962c 100644
--- a/src/sentry/utils/snuba.py
+++ b/src/sentry/utils/snuba.py
@@ -245,7 +245,7 @@ def all_referenced_columns(conditions):
 
     # First flatten to remove the AND/OR nesting.
     flat_conditions = list(chain(*[[c] if is_condition(c) else c for c in conditions]))
-    return set(list(chain(*[columns_in_expr(c[0]) for c in flat_conditions])))
+    return list(set(chain(*[columns_in_expr(c[0]) for c in flat_conditions])))
 
 
 def columns_in_expr(expr):
