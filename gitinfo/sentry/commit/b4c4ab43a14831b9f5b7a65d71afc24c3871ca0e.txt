commit b4c4ab43a14831b9f5b7a65d71afc24c3871ca0e
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Sep 20 11:48:39 2014 -0700

    Ensure develop forces resource compilation

diff --git a/setup.py b/setup.py
index d1998bf167..6a2e0d2c60 100755
--- a/setup.py
+++ b/setup.py
@@ -23,7 +23,8 @@ any application.
 """
 
 from distutils import log
-from distutils.command.sdist import sdist
+from setuptools.command.sdist import sdist
+from setuptools.command.develop import develop
 from setuptools import setup, find_packages
 from subprocess import check_output
 
@@ -111,19 +112,25 @@ mysql_requires = [
 ]
 
 
+def _build_static_assets():
+    log.info("running npm install")
+    check_output(['npm', 'install', '--quiet'])
+    log.info("running sentry compilestatic")
+    check_output(['sentry', 'compilestatic'])
+
+
 class CustomSdist(sdist):
-    """
-    Identical to the built-in sdist command except that we need to generate
-    static media before building the tarball.
-    """
     def make_distribution(self):
-        log.info("running npm install")
-        check_output(['npm', 'install', '--quiet'])
-        log.info("running sentry compilestatic")
-        check_output(['sentry', 'compilestatic'])
+        _build_static_assets()
         return sdist.make_distribution(self)
 
 
+class CustomDevelop(develop):
+    def install_for_development(self):
+        _build_static_assets()
+        return develop.install_for_development(self)
+
+
 setup(
     name='sentry',
     version='7.0.0-DEV',
@@ -145,6 +152,7 @@ setup(
     },
     cmdclass={
         'sdist': CustomSdist,
+        'develop': CustomDevelop,
     },
     license='BSD',
     include_package_data=True,
