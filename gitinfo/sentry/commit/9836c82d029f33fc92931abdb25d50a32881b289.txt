commit 9836c82d029f33fc92931abdb25d50a32881b289
Author: Bernardo Heynemann <heynemann@gmail.com>
Date:   Tue Apr 23 18:07:01 2013 -0300

    Reraising the exception with the same stack trace as before as per @dcramer suggestion

diff --git a/src/sentry/utils/settings.py b/src/sentry/utils/settings.py
index 93c885d9cb..da53fd8cd7 100644
--- a/src/sentry/utils/settings.py
+++ b/src/sentry/utils/settings.py
@@ -6,6 +6,9 @@ sentry.utils.imports
 :license: BSD, see LICENSE for more details.
 """
 
+import inspect
+import sys
+
 from sentry.utils.imports import import_string
 
 PACKAGES = {
@@ -17,6 +20,33 @@ PACKAGES = {
 }
 
 
+def reraise_as(new_exception_or_type):
+    """
+    Obtained from https://github.com/dcramer/reraise/blob/master/src/reraise.py
+>>> try:
+>>> do_something_crazy()
+>>> except Exception:
+>>> reraise_as(UnhandledException)
+"""
+    __traceback_hide__ = True  # NOQA
+
+    e_type, e_value, e_traceback = sys.exc_info()
+
+    if inspect.isclass(new_exception_or_type):
+        new_type = new_exception_or_type
+        new_exception = new_exception_or_type()
+    else:
+        new_type = type(new_exception_or_type)
+        new_exception = new_exception_or_type
+
+    new_exception.__cause__ = e_value
+
+    try:
+        raise new_type, new_exception, e_traceback
+    finally:
+        del e_traceback
+
+
 def validate_settings(settings):
     for key, engine_key, engine_type in \
             [('DATABASES', 'ENGINE', 'database engine'), ('CACHES', 'BACKEND', 'caching backend')]:
@@ -34,7 +64,7 @@ def validate_dependency(settings, dependency_type, dependency, package):
         try:
             import_string(package)
         except ImportError:
-            raise ConfigurationError(ConfigurationError.get_error_message("%s %s" % (dependency_type, dependency), package))
+            reraise_as(ConfigurationError(ConfigurationError.get_error_message("%s %s" % (dependency_type, dependency), package)))
 
 
 class ConfigurationError(ValueError):
