commit 3663d3e7acdfc09fa13945e64547b2a4671b845b
Author: Ben Vinegar <ben@benv.ca>
Date:   Wed Jan 13 14:30:55 2016 -0800

    Use Raven.showReportDialog

diff --git a/src/sentry/static/sentry/app/views/routeError.jsx b/src/sentry/static/sentry/app/views/routeError.jsx
index b909918621..37139b49bf 100644
--- a/src/sentry/static/sentry/app/views/routeError.jsx
+++ b/src/sentry/static/sentry/app/views/routeError.jsx
@@ -1,42 +1,17 @@
-import jQuery from 'jquery';
+import $ from 'jquery';
 import Raven from 'raven-js';
 import React from 'react';
 
-import ConfigStore from '../stores/configStore';
-
-
-function loadScript(url) {
-  let script = document.createElement('script');
-  script.type = 'text/javascript';
-  script.async = true;
-  script.src = url;
-  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
-}
-
 const RouteError = React.createClass({
   componentWillMount() {
     // TODO(dcramer): show something in addition to embed (that contains it?)
     // TODO(dcramer): capture better context
     Raven.captureException(this.props.error);
-    this.setState({
-      errorId: Raven.lastEventId(),
-    }, () => {
-      loadScript(this.getCrashReportUrl());
-    });
+    Raven.showReportDialog();
   },
 
   componentWillUnmount() {
-    // TODO(dcramer): kill crash dialog
-  },
-
-  getCrashReportUrl() {
-    // TODO(dcramer): needs urlPrefix
-    let query = jQuery.param({
-      eventId: this.state.errorId,
-      // TODO(dcramer): dsn should come from raven-js
-      dsn: ConfigStore.get('dsn'),
-    });
-    return `/api/embed/error-page/?${query}`;
+    $('.sentry-error-embed-wrapper').remove();
   },
 
   render() {
