commit 0322a8d3957f61e9e0bd511a6b9598c1667708b1
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jan 24 18:14:55 2013 -0800

    Remove transactions from migration

diff --git a/src/sentry/migrations/0083_migrate_dupe_groups.py b/src/sentry/migrations/0083_migrate_dupe_groups.py
index 16b29795e0..8d0752a87a 100644
--- a/src/sentry/migrations/0083_migrate_dupe_groups.py
+++ b/src/sentry/migrations/0083_migrate_dupe_groups.py
@@ -12,9 +12,6 @@ class Migration(DataMigration):
         from sentry.utils.models import create_or_update
         from sentry.utils.query import RangeQuerySetWrapper
 
-        # Kill our current transaction
-        db.commit_transaction()
-
         # We don't fully merge results because it's simply not worth it
         for group in RangeQuerySetWrapper(orm['sentry.Group'].objects.all()):
 
@@ -28,8 +25,6 @@ class Migration(DataMigration):
             if not matches:
                 continue
 
-            db.start_transaction()
-
             updates = defaultdict(int)
             updates.update({
                 'first_seen': group.first_seen,
@@ -90,14 +85,8 @@ class Migration(DataMigration):
                     defaults=defaults
                 )
 
-            db.commit_transaction()
-            db.start_transaction()
-
             orm['sentry.MessageFilterValue'].objects.filter(group__in=matches).delete()
 
-            db.commit_transaction()
-            db.start_transaction()
-
             # migrate counts
             for date, data in counts.iteritems():
                 create_or_update(orm['sentry.MessageCountByMinute'],
@@ -111,14 +100,8 @@ class Migration(DataMigration):
                     }
                 )
 
-            db.commit_transaction()
-            db.start_transaction()
-
             orm['sentry.MessageCountByMinute'].objects.filter(group__in=matches).delete()
 
-            db.commit_transaction()
-            db.start_transaction()
-
             orm['sentry.Group'].objects.filter(id=group.id).update(
                 times_seen=F('times_seen') + updates['times_seen'],
                 users_seen=F('users_seen') + updates['user_seen'],
@@ -129,14 +112,9 @@ class Migration(DataMigration):
                 active_at=updates['active_at'],
             )
 
-            db.commit_transaction()
-            db.start_transaction()
-
             for other in matches:
                 other.delete()
 
-            db.commit_transaction()
-
     def backwards(self, orm):
         "Write your backwards methods here."
 
