commit bd290db23ebbc39c69096b6a593e8fde53eac52f
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Feb 12 13:10:12 2015 -0800

    Ensure Activity.send_notification is fired

diff --git a/src/sentry/api/endpoints/group_details.py b/src/sentry/api/endpoints/group_details.py
index d7fcf209f4..b354c42615 100644
--- a/src/sentry/api/endpoints/group_details.py
+++ b/src/sentry/api/endpoints/group_details.py
@@ -221,7 +221,7 @@ class GroupDetailsEndpoint(Endpoint):
                     affected = True
 
                 if affected:
-                    Activity.objects.create(
+                    activity = Activity.objects.create(
                         project=group.project,
                         group=group,
                         type=Activity.ASSIGNED,
@@ -230,10 +230,7 @@ class GroupDetailsEndpoint(Endpoint):
                             'assignee': result['assignedTo'].id,
                         }
                     )
-
-                    if request.user != assignee.user:
-                        # TODO(dcramer): send email
-                        pass
+                    activity.send_notification()
 
             else:
                 affected = GroupAssignee.objects.filter(
@@ -241,12 +238,13 @@ class GroupDetailsEndpoint(Endpoint):
                 ).delete()
 
                 if affected:
-                    Activity.objects.create(
+                    activity = Activity.objects.create(
                         project=group.project,
                         group=group,
                         type=Activity.UNASSIGNED,
                         user=request.user,
                     )
+                    activity.send_notification()
 
         return Response(serialize(group, request.user))
 
diff --git a/src/sentry/api/endpoints/project_group_index.py b/src/sentry/api/endpoints/project_group_index.py
index fe804d499d..e780362d8d 100644
--- a/src/sentry/api/endpoints/project_group_index.py
+++ b/src/sentry/api/endpoints/project_group_index.py
@@ -211,12 +211,14 @@ class ProjectGroupIndexEndpoint(Endpoint):
                 for group in group_list:
                     group.status = GroupStatus.RESOLVED
                     group.resolved_at = now
-                    Activity.objects.create(
+                    activity = Activity.objects.create(
                         project=group.project,
                         group=group,
                         type=Activity.SET_RESOLVED,
                         user=request.user,
                     )
+                    activity.send_notification()
+
         elif result.get('status'):
             new_status = STATUS_CHOICES[result['status']]
 
