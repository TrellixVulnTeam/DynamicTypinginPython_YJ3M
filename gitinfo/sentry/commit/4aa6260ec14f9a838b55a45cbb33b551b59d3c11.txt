commit 4aa6260ec14f9a838b55a45cbb33b551b59d3c11
Author: adhiraj <693121+adhiraj@users.noreply.github.com>
Date:   Thu Aug 16 15:24:55 2018 -0700

    fix(identity): Advance view correctly in VSTS oauth (#9399)
    
    When VSTS oauth does a callback, we need to check for the presence of several query params, not just 'code'.

diff --git a/src/sentry/identity/oauth2.py b/src/sentry/identity/oauth2.py
index da01e29cc9..0a343afda9 100644
--- a/src/sentry/identity/oauth2.py
+++ b/src/sentry/identity/oauth2.py
@@ -201,8 +201,9 @@ class OAuth2LoginView(PipelineView):
 
     @csrf_exempt
     def dispatch(self, request, pipeline):
-        if 'code' in request.GET:
-            return pipeline.next_step()
+        for param in ('code', 'error', 'state'):
+            if param in request.GET:
+                return pipeline.next_step()
 
         state = uuid4().hex
 
