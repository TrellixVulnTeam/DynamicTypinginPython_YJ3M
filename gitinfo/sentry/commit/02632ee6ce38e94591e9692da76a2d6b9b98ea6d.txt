commit 02632ee6ce38e94591e9692da76a2d6b9b98ea6d
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Sep 24 11:05:04 2015 -0700

    Handle transitional support for HTTP interface

diff --git a/src/sentry/plugins/sentry_useragents/models.py b/src/sentry/plugins/sentry_useragents/models.py
index 9a92dc98a6..3980506000 100644
--- a/src/sentry/plugins/sentry_useragents/models.py
+++ b/src/sentry/plugins/sentry_useragents/models.py
@@ -27,8 +27,13 @@ class UserAgentPlugin(TagPlugin):
         if not http.headers:
             return []
 
+        headers = http.headers
+        # XXX: transitional support for workers
+        if isinstance(headers, dict):
+            headers = headers.items()
+
         output = []
-        for key, value in http.headers:
+        for key, value in headers:
             if key != 'User-Agent':
                 continue
             ua = Parse(value)
