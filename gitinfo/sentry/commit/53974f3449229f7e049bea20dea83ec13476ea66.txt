commit 53974f3449229f7e049bea20dea83ec13476ea66
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jun 10 22:09:09 2014 -0700

    Enable/fix team ownership/remove team pages

diff --git a/src/sentry/static/sentry/app/controllers/manageTeamOwnership.js b/src/sentry/static/sentry/app/controllers/manageTeamOwnership.js
index 0c3c0ffc69..29a3965d87 100644
--- a/src/sentry/static/sentry/app/controllers/manageTeamOwnership.js
+++ b/src/sentry/static/sentry/app/controllers/manageTeamOwnership.js
@@ -4,22 +4,25 @@ define([
   'use strict';
 
   app.classy.controller({
+    name: 'ManageTeamOwnershipCtrl',
+
     inject: ['$scope', '$http', '$location', 'config'],
 
     init: function() {
-      $scope.newOwner = null;
+      this.$scope.newOwner = null;
+
+    },
 
-      $scope.isUnchanged = function(value) {
-        return value === null;
-      };
+    isUnchanged: function(value) {
+      return value === null;
+    },
 
-      $scope.saveForm = function() {
-        $http.put('/api/0/teams/' + this.config.teamId + '/', {
-          'owner': $scope.newOwner
-        }).success(function(data){
-          $location.path('/account/teams');
-        });
-      };
+    saveForm: function() {
+      this.$http.put('/api/0/teams/' + this.config.teamId + '/', {
+        'owner': this.$scope.newOwner
+      }).success(function(data){
+        this.$location.path('/account/teams');
+      });
     }
   });
 });
diff --git a/src/sentry/templates/sentry/bases/team.html b/src/sentry/templates/sentry/bases/team.html
index 551cd60254..26bf5312d5 100644
--- a/src/sentry/templates/sentry/bases/team.html
+++ b/src/sentry/templates/sentry/bases/team.html
@@ -27,10 +27,10 @@
         {% if selectedTeam.permission.admin %}
             <li class="divider"></li>
             <li{% if SUBSECTION == 'transfer' %} class="active"{% endif %}>
-                <a>{% trans "Transfer Ownership" %}</a>
+                <a href="{% url 'sentry-transfer-team' team.slug %}">{% trans "Transfer Ownership" %}</a>
             </li>
             <li{% if SUBSECTION == 'delete' %} class="active"{% endif %}>
-                <a>{% trans "Delete Team" %}</a>
+                <a href="{% url 'sentry-remove-team' team.slug %}">{% trans "Delete Team" %}</a>
             </li>
         {% endif %}
     </ul>
diff --git a/src/sentry/web/frontend/teams.py b/src/sentry/web/frontend/teams.py
index 013424c6eb..d6a0e0dc74 100644
--- a/src/sentry/web/frontend/teams.py
+++ b/src/sentry/web/frontend/teams.py
@@ -127,6 +127,21 @@ def manage_team(request, team):
     return render_with_team_context(team, 'sentry/teams/manage.html', context, request)
 
 
+@has_access(MEMBER_OWNER)
+@csrf_protect
+def transfer_team(request, team):
+    if not can_remove_team(request.user, team):
+        return HttpResponseRedirect(reverse('sentry'))
+
+    context = csrf(request)
+    context.update({
+        'page': 'settings',
+        'SUBSECTION': 'transfer',
+    })
+
+    return render_with_team_context(team, 'sentry/teams/manage-ownership.html', context, request)
+
+
 @has_access(MEMBER_OWNER)
 @csrf_protect
 def remove_team(request, team):
@@ -149,7 +164,7 @@ def remove_team(request, team):
     context.update({
         'page': 'settings',
         'form': form,
-        'SUBSECTION': 'settings',
+        'SUBSECTION': 'delete',
     })
 
     return render_with_team_context(team, 'sentry/teams/remove.html', context, request)
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index ed741e04dd..310d7ac44c 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -106,6 +106,8 @@ urlpatterns += patterns('',
         name='sentry-new-team'),
     url(r'^account/teams/(?P<team_slug>[\w_-]+)/settings/$', teams.manage_team,
         name='sentry-manage-team'),
+    url(r'^account/teams/(?P<team_slug>[\w_-]+)/transfer/$', teams.transfer_team,
+        name='sentry-transfer-team'),
     url(r'^account/teams/(?P<team_slug>[\w_-]+)/remove/$', teams.remove_team,
         name='sentry-remove-team'),
     url(r'^account/teams/(?P<team_slug>[\w_-]+)/groups/$', teams.manage_access_groups,
