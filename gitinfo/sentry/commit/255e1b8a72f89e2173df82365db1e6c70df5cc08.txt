commit 255e1b8a72f89e2173df82365db1e6c70df5cc08
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Wed Nov 28 14:29:47 2018 -0800

    feat(api): Add endpoint to redirect to event given project and event_id (#10670)
    
    Discover and event stream links point to new endpoint rather than using
    search mechanism which involves loading an additional page

diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx
index d33cc30b85..ba791ffbfb 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx
@@ -91,7 +91,7 @@ export default class ResultTable extends React.Component {
 
     return (
       <Tooltip title={t('Open event')} tooltipOptions={{container: 'body'}}>
-        <Link to={`/${slug}/${projectSlug}/issues/?query=${event.id}`} target="_blank">
+        <Link href={`/${slug}/${projectSlug}/events/${event.id}/`} target="_blank">
           <InlineSvg src="icon-exit" size="1em" />
         </Link>
       </Tooltip>
diff --git a/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx b/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx
index 64a8202496..1e8738a0aa 100644
--- a/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx
+++ b/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx
@@ -56,7 +56,7 @@ class EventsTable extends React.Component {
     }
 
     return (
-      <Link to={`/${organization.slug}/${project.slug}/issues/?query=${event.eventID}`}>
+      <Link href={`/${organization.slug}/${project.slug}/events/${event.eventID}/`}>
         {trimmedMessage}
       </Link>
     );
diff --git a/src/sentry/web/frontend/project_event.py b/src/sentry/web/frontend/project_event.py
new file mode 100644
index 0000000000..e0491d1c37
--- /dev/null
+++ b/src/sentry/web/frontend/project_event.py
@@ -0,0 +1,32 @@
+from __future__ import absolute_import
+
+from django.http import HttpResponseRedirect, Http404
+from django.core.urlresolvers import reverse
+
+from sentry.models import Event
+from sentry.web.frontend.base import ProjectView
+
+
+class ProjectEventRedirect(ProjectView):
+    required_scope = 'event:read'
+
+    def handle(self, request, organization, project, client_event_id):
+        """
+        Given a client event id and project, redirects to the event page
+        """
+        try:
+            event = Event.objects.get(
+                event_id=client_event_id,
+                project_id=project.id)
+        except Event.DoesNotExist:
+            raise Http404()
+
+        return HttpResponseRedirect(
+            reverse(
+                'sentry-group-event',
+                args=[
+                    organization.slug,
+                    event.project.slug,
+                    event.group_id,
+                    event.id])
+        )
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index fe6de42ec4..28eb0a7739 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -55,6 +55,7 @@ from sentry.web.frontend.setup_wizard import SetupWizardView
 from sentry.web.frontend.vsts_extension_configuration import \
     VstsExtensionConfigurationView
 from sentry.web.frontend.js_sdk_loader import JavaScriptSdkLoader
+from sentry.web.frontend.project_event import ProjectEventRedirect
 
 
 __all__ = ('urlpatterns', )
@@ -549,6 +550,11 @@ urlpatterns += patterns(
         react_page_view,
         name='sentry-group'
     ),
+    url(
+        r'^(?P<organization_slug>[\w_-]+)/(?P<project_slug>[\w_-]+)/issues/(?P<group_id>\d+)/events/(?P<event_id>\d+)/$',
+        react_page_view,
+        name='sentry-group-event'
+    ),
     url(
         r'^(?P<organization_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/$',
         react_page_view,
@@ -570,6 +576,12 @@ urlpatterns += patterns(
         name='sentry-group-plugin-action'
     ),
 
+    url(
+        r'^(?P<organization_slug>[\w_-]+)/(?P<project_slug>[\w_-]+)/events/(?P<client_event_id>[\w_-]+)/$',
+        ProjectEventRedirect.as_view(),
+        name='sentry-project-event-redirect'
+    ),
+
     # Legacy
     url(r'/$', react_page_view),
 )
diff --git a/tests/sentry/web/frontend/test_project_event.py b/tests/sentry/web/frontend/test_project_event.py
new file mode 100644
index 0000000000..695b0329ce
--- /dev/null
+++ b/tests/sentry/web/frontend/test_project_event.py
@@ -0,0 +1,50 @@
+from __future__ import absolute_import
+
+from django.core.urlresolvers import reverse
+from sentry.testutils import TestCase
+from sentry import options
+
+
+class ProjectEventTest(TestCase):
+    def setUp(self):
+        super(ProjectEventTest, self).setUp()
+        self.user = self.create_user()
+        self.login_as(self.user)
+        self.org = self.create_organization()
+        self.team = self.create_team(organization=self.org, name='Mariachi Band')
+        self.create_member(
+            user=self.user,
+            organization=self.org,
+            role='owner',
+            teams=[self.team],
+        )
+        self.project = self.create_project(organization=self.org, teams=[self.team])
+        self.group = self.create_group(project=self.project)
+        self.event = self.create_event(event_id='a' * 32, group=self.group)
+
+    def test_redirect_to_event(self):
+        resp = self.client.get(
+            reverse(
+                'sentry-project-event-redirect',
+                args=[
+                    self.org.slug,
+                    self.project.slug,
+                    'a' * 32]))
+        assert resp.status_code == 302
+        assert resp['Location'] == '{}/{}/{}/issues/{}/events/{}/'.format(
+            options.get('system.url-prefix'),
+            self.org.slug,
+            self.project.slug,
+            self.group.id,
+            self.event.id,
+        )
+
+    def test_event_not_found(self):
+        resp = self.client.get(
+            reverse(
+                'sentry-project-event-redirect',
+                args=[
+                    self.org.slug,
+                    self.project.slug,
+                    'event1']))
+        assert resp.status_code == 404
