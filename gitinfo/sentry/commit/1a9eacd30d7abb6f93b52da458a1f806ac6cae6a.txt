commit 1a9eacd30d7abb6f93b52da458a1f806ac6cae6a
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Tue Sep 25 11:52:07 2018 -0700

    fix(integrations): Handle jira ExpiredSignatureError
    fixes SENTRY-77X

diff --git a/src/sentry/integrations/jira/configure.py b/src/sentry/integrations/jira/configure.py
index 175a888729..234e1f085e 100644
--- a/src/sentry/integrations/jira/configure.py
+++ b/src/sentry/integrations/jira/configure.py
@@ -1,5 +1,7 @@
 from __future__ import absolute_import
 
+from jwt import ExpiredSignatureError
+
 from django import forms
 from django.core.urlresolvers import reverse
 from django.views.generic import View
@@ -48,6 +50,8 @@ class JiraConfigureView(View):
             integration = get_integration_from_request(request, 'jira')
         except AtlassianConnectValidationError:
             return self.get_response({'error_message': 'Unable to verify installation.'})
+        except ExpiredSignatureError:
+            return self.get_response({'refresh_required': True})
 
         if not request.user.is_authenticated():
             return self.get_response({
diff --git a/src/sentry/templates/sentry/integrations/jira-config.html b/src/sentry/templates/sentry/integrations/jira-config.html
index f54809f348..e3c9d6d51d 100644
--- a/src/sentry/templates/sentry/integrations/jira-config.html
+++ b/src/sentry/templates/sentry/integrations/jira-config.html
@@ -42,34 +42,40 @@
       </a>
     </div>
   {% else %}
-    {% if completed %}
-    <div class="aui-message aui-message-success">
-      <p class="title">
-        <strong>Saved!</strong>
-      </p>
-      <p>
-        The Sentry Jira integration is now enabled for the selected
-        organizations. Return to your sentry organization to configure the Jira
-        integration for your organization.
-      </p>
-    </div>
-    {% endif %}
+    {% if refresh_required %}
+      <div class="aui-message aui-message-info">
+        <p>This page has expired, please refresh to configure your Sentry integration</p>
+      </div>
+    {% else %}
+      {% if completed %}
+      <div class="aui-message aui-message-success">
+        <p class="title">
+          <strong>Saved!</strong>
+        </p>
+        <p>
+          The Sentry Jira integration is now enabled for the selected
+          organizations. Return to your sentry organization to configure the Jira
+          integration for your organization.
+        </p>
+      </div>
+      {% endif %}
 
-    <form class="aui top-label" action="" method="post">
-      {% csrf_token %}
-      {% for field in form %}
-        <div class="field-group top-label">
-          {{ field.errors }}
-          {{ field.label_tag }} {{ field }}
-          <div class="description">{{ field.help_text }}</div>
+      <form class="aui top-label" action="" method="post">
+        {% csrf_token %}
+        {% for field in form %}
+          <div class="field-group top-label">
+            {{ field.errors }}
+            {{ field.label_tag }} {{ field }}
+            <div class="description">{{ field.help_text }}</div>
+          </div>
+        {% endfor %}
+        <div class="field-group">
+          <button class="aui-button aui-button-primary" type="submit">
+              Save Settings
+          </button>
         </div>
-      {% endfor %}
-      <div class="field-group">
-        <button class="aui-button aui-button-primary" type="submit">
-            Save Settings
-        </button>
-      </div>
-    </form>
+      </form>
+    {% endif %}
   {% endif %}
 </body>
 {% if login_required %}
