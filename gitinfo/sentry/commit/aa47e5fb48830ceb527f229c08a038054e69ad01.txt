commit aa47e5fb48830ceb527f229c08a038054e69ad01
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jan 12 15:06:49 2015 -0600

    Fix avgtime sort in sqlite

diff --git a/src/sentry/search/django/constants.py b/src/sentry/search/django/constants.py
index 8a74fa7612..3892165b20 100644
--- a/src/sentry/search/django/constants.py
+++ b/src/sentry/search/django/constants.py
@@ -22,6 +22,7 @@ SQLITE_SORT_CLAUSES = SORT_CLAUSES.copy()
 SQLITE_SORT_CLAUSES.update({
     'date': "cast((julianday(sentry_groupedmessage.last_seen) - 2440587.5) * 86400.0 as INTEGER)",
     'new': "cast((julianday(sentry_groupedmessage.first_seen) - 2440587.5) * 86400.0 as INTEGER)",
+    'avgtime': 'CAST((sentry_groupedmessage.time_spent_total / sentry_groupedmessage.time_spent_count) as INTEGER)',
 })
 
 MYSQL_SORT_CLAUSES = SORT_CLAUSES.copy()
