commit 32886c5b3d9a247729488963377c4bff8d40b1b6
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Apr 17 15:59:35 2015 -0700

    Correct how context is handled with exceptions

diff --git a/src/sentry/interfaces/exception.py b/src/sentry/interfaces/exception.py
index 187961c7cd..5e9ba9cde1 100644
--- a/src/sentry/interfaces/exception.py
+++ b/src/sentry/interfaces/exception.py
@@ -70,6 +70,19 @@ class SingleException(Interface):
             'stacktrace': stacktrace,
         }
 
+    def get_api_context(self):
+        if self.stacktrace:
+            stacktrace = self.stacktrace.get_api_context()
+        else:
+            stacktrace = None
+
+        return {
+            'type': self.type,
+            'value': self.value,
+            'module': self.module,
+            'stacktrace': stacktrace,
+        }
+
     def get_alias(self):
         return 'exception'
 
@@ -178,6 +191,12 @@ class Exception(Interface):
             'exc_omitted': self.exc_omitted,
         }
 
+    def get_api_context(self):
+        return {
+            'values': [v.get_api_context() for v in self.values],
+            'excOmitted': self.exc_omitted,
+        }
+
     def __getitem__(self, key):
         return self.values[key]
 
