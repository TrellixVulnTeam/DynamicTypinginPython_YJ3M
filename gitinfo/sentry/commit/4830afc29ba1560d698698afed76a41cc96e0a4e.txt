commit 4830afc29ba1560d698698afed76a41cc96e0a4e
Author: Billy Vong <billyvg@gmail.com>
Date:   Tue Aug 8 14:24:07 2017 -0700

    refactor: add `anchorRight` prop to <DropdownLink>

diff --git a/docs-ui/components/dropdownLink.stories.js b/docs-ui/components/dropdownLink.stories.js
index ece28e1201..7ce38392b6 100644
--- a/docs-ui/components/dropdownLink.stories.js
+++ b/docs-ui/components/dropdownLink.stories.js
@@ -8,20 +8,20 @@ import MenuItem from 'sentry-ui/menuItem';
 
 storiesOf('DropdownLink', module)
   .add(
-    'anchor right',
-    withInfo('Anchors to right side')(() => (
+    'anchor left (default)',
+    withInfo('Anchors to left side')(() => (
       <div className="clearfix">
-        <DropdownLink anchor="right" title="Test">
+        <DropdownLink title="Test">
           <MenuItem href="">Item</MenuItem>
         </DropdownLink>
       </div>
     ))
   )
   .add(
-    'anchor left',
-    withInfo('Anchors to left side')(() => (
+    'anchor right',
+    withInfo('Anchors to right side')(() => (
       <div className="clearfix">
-        <DropdownLink anchor="left" title="Test">
+        <DropdownLink anchorRight title="Test">
           <MenuItem href="">Item</MenuItem>
         </DropdownLink>
       </div>
diff --git a/src/sentry/static/sentry/app/components/dropdownLink.jsx b/src/sentry/static/sentry/app/components/dropdownLink.jsx
index 41a3f1e6dd..83e6f1c8ef 100644
--- a/src/sentry/static/sentry/app/components/dropdownLink.jsx
+++ b/src/sentry/static/sentry/app/components/dropdownLink.jsx
@@ -7,10 +7,13 @@ require('bootstrap/js/dropdown');
 const DropdownLink = React.createClass({
   propTypes: {
     title: React.PropTypes.node,
+    /** display dropdown caret */
     caret: React.PropTypes.bool,
     disabled: React.PropTypes.bool,
     onOpen: React.PropTypes.func,
     onClose: React.PropTypes.func,
+    /** anchors menu to the right */
+    anchorRight: React.PropTypes.bool,
     topLevelClasses: React.PropTypes.string,
     menuClasses: React.PropTypes.string
   },
@@ -18,6 +21,7 @@ const DropdownLink = React.createClass({
   getDefaultProps() {
     return {
       disabled: false,
+      anchorRight: false,
       caret: true
     };
   },
@@ -58,22 +62,27 @@ const DropdownLink = React.createClass({
   },
 
   render() {
-    let className = classNames({
+    let {anchorRight, disabled} = this.props;
+
+    // Default anchor = left
+    let isRight = anchorRight;
+
+    let className = classNames(this.props.className, {
+      'dropdown-menu-right': isRight,
       'dropdown-toggle': true,
-      disabled: this.props.disabled
+      disabled
     });
 
-    let topLevelClasses = classNames({
+    let topLevelClasses = classNames(this.props.topLevelClasses, {
+      'pull-right': isRight,
+      'anchor-right': isRight,
       dropdown: true,
       open: this.state.isOpen
     });
 
     return (
-      <span className={classNames(this.props.topLevelClasses, topLevelClasses)}>
-        <a
-          className={classNames(this.props.className, className)}
-          data-toggle="dropdown"
-          ref="dropdownToggle">
+      <span className={topLevelClasses}>
+        <a className={className} data-toggle="dropdown" ref="dropdownToggle">
           {this.props.title}
           {this.props.caret && <i className="icon-arrow-down" />}
         </a>
diff --git a/src/sentry/static/sentry/app/views/accountLayout.jsx b/src/sentry/static/sentry/app/views/accountLayout.jsx
index e613907cb5..6d683c9610 100644
--- a/src/sentry/static/sentry/app/views/accountLayout.jsx
+++ b/src/sentry/static/sentry/app/views/accountLayout.jsx
@@ -22,7 +22,7 @@ const AccountLayout = React.createClass({
     return (
       <NarrowLayout header={header}>
         <h3>{t('My Settings')}</h3>
-        <DropdownLink topLevelClasses="anchor-right pull-right" title={t('More')}>
+        <DropdownLink anchorRight title={t('More')}>
           <MenuItem to="/account/authorizations/">
             {t('Authorized Applications')}
           </MenuItem>
diff --git a/src/sentry/static/sentry/app/views/organizationRepositories.jsx b/src/sentry/static/sentry/app/views/organizationRepositories.jsx
index 0d1c9ccd94..d4fbf999e2 100644
--- a/src/sentry/static/sentry/app/views/organizationRepositories.jsx
+++ b/src/sentry/static/sentry/app/views/organizationRepositories.jsx
@@ -247,6 +247,7 @@ const OrganizationRepositories = React.createClass({
   },
 
   deleteRepo(repo) {
+    // eslint-disable-next-line no-alert
     if (!confirm(t('Are you sure you want to remove this repository?'))) return;
 
     let indicator = IndicatorStore.add(t('Saving changes..'));
@@ -332,7 +333,7 @@ const OrganizationRepositories = React.createClass({
       <OrganizationHomeContainer>
         <div className="pull-right">
           <DropdownLink
-            topLevelClasses="anchor-right"
+            anchorRight
             className="btn btn-primary btn-sm"
             title={t('Add Repository')}>
             {this.state.repoConfig.providers.map(provider => {
diff --git a/src/sentry/static/sentry/app/views/teamDetails.jsx b/src/sentry/static/sentry/app/views/teamDetails.jsx
index 02824c25a1..c5e0fa0087 100644
--- a/src/sentry/static/sentry/app/views/teamDetails.jsx
+++ b/src/sentry/static/sentry/app/views/teamDetails.jsx
@@ -94,10 +94,7 @@ const TeamDetails = React.createClass({
         <h3>{team.name}</h3>
 
         {access.has('team:admin') &&
-          <DropdownLink
-            topLevelClasses="pull-right anchor-right"
-            className="dropdown-menu-right"
-            title={t('More')}>
+          <DropdownLink anchorRight title={t('More')}>
             <MenuItem href={`${routePrefix}/remove/`}>{t('Remove Team')}</MenuItem>
           </DropdownLink>}
 
diff --git a/tests/js/spec/components/__snapshots__/dropdownLink.spec.jsx.snap b/tests/js/spec/components/__snapshots__/dropdownLink.spec.jsx.snap
new file mode 100644
index 0000000000..40b898034c
--- /dev/null
+++ b/tests/js/spec/components/__snapshots__/dropdownLink.spec.jsx.snap
@@ -0,0 +1,53 @@
+// Jest Snapshot v1, https://goo.gl/fbAQLP
+
+exports[`DropdownLink renders and anchors to left by default 1`] = `
+<span
+  className="top-level-class dropdown"
+>
+  <a
+    className="dropdown-toggle"
+    data-toggle="dropdown"
+  >
+    test
+    <i
+      className="icon-arrow-down"
+    />
+  </a>
+  <ul
+    className="dropdown-menu"
+  >
+    <div>
+      1
+    </div>
+    <div>
+      2
+    </div>
+  </ul>
+</span>
+`;
+
+exports[`DropdownLink renders and anchors to right 1`] = `
+<span
+  className="top-level-class pull-right anchor-right dropdown"
+>
+  <a
+    className="dropdown-menu-right dropdown-toggle"
+    data-toggle="dropdown"
+  >
+    test
+    <i
+      className="icon-arrow-down"
+    />
+  </a>
+  <ul
+    className="dropdown-menu"
+  >
+    <div>
+      1
+    </div>
+    <div>
+      2
+    </div>
+  </ul>
+</span>
+`;
diff --git a/tests/js/spec/components/dropdownLink.spec.jsx b/tests/js/spec/components/dropdownLink.spec.jsx
index a1000f0145..482268a27f 100644
--- a/tests/js/spec/components/dropdownLink.spec.jsx
+++ b/tests/js/spec/components/dropdownLink.spec.jsx
@@ -1,5 +1,6 @@
 import React from 'react';
 import TestUtils from 'react-addons-test-utils';
+import {shallow} from 'enzyme';
 import DropdownLink from 'app/components/dropdownLink';
 
 describe('DropdownLink', function() {
@@ -7,7 +8,7 @@ describe('DropdownLink', function() {
     title: 'test',
     onOpen: () => {},
     onClose: () => {},
-    topLevelClasses: 'React.PropTypes.string',
+    topLevelClasses: 'top-level-class',
     menuClasses: ''
   };
 
@@ -24,4 +25,26 @@ describe('DropdownLink', function() {
       expect(handlers).toBe(undefined);
     });
   });
+
+  it('renders and anchors to left by default', function() {
+    let component = shallow(
+      <DropdownLink {...INPUT_1}>
+        <div>1</div>
+        <div>2</div>
+      </DropdownLink>
+    );
+
+    expect(component).toMatchSnapshot();
+  });
+
+  it('renders and anchors to right', function() {
+    let component = shallow(
+      <DropdownLink {...INPUT_1} anchorRight>
+        <div>1</div>
+        <div>2</div>
+      </DropdownLink>
+    );
+
+    expect(component).toMatchSnapshot();
+  });
 });
diff --git a/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap b/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
index 988c726860..0d0d3e477b 100644
--- a/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
+++ b/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
@@ -47,6 +47,7 @@ exports[`ProjectSelector render() can filter projects by project name 1`] = `
       </Link>
       Select a project
       <DropdownLink
+        anchorRight={false}
         caret={true}
         disabled={false}
         onClose={[Function]}
@@ -164,6 +165,7 @@ exports[`ProjectSelector render() can filter projects by team name/project name
       </Link>
       Select a project
       <DropdownLink
+        anchorRight={false}
         caret={true}
         disabled={false}
         onClose={[Function]}
@@ -270,6 +272,7 @@ exports[`ProjectSelector render() lists projects and has filter 1`] = `
     </Link>
     Select a project
     <DropdownLink
+      anchorRight={false}
       caret={true}
       disabled={false}
       onClose={[Function]}
@@ -328,6 +331,7 @@ exports[`ProjectSelector render() should show empty message and create project b
     </Link>
     Select a project
     <DropdownLink
+      anchorRight={false}
       caret={true}
       disabled={false}
       onClose={[Function]}
@@ -379,6 +383,7 @@ exports[`ProjectSelector render() should show empty message with no projects but
     </Link>
     Select a project
     <DropdownLink
+      anchorRight={false}
       caret={true}
       disabled={false}
       onClose={[Function]}
@@ -448,6 +453,7 @@ exports[`ProjectSelector render() shows empty filter message when filtering has
       </Link>
       Select a project
       <DropdownLink
+        anchorRight={false}
         caret={true}
         disabled={false}
         onClose={[Function]}
