commit e9770f4e1622f0aca029ddc716a782ab70101d33
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Fri Aug 3 14:00:45 2018 -0700

    fix(discover): Fix clearning aggregation (#9316)
    
    This fixes a bug where the aggregation wasn't being cleared properly on using the backspace/delete key in the aggregation field

diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/aggregations/aggregation.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/aggregations/aggregation.jsx
index a8d9333548..021ba53d6b 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/aggregations/aggregation.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/aggregations/aggregation.jsx
@@ -121,7 +121,9 @@ export default class Aggregation extends React.Component {
   };
 
   handleInputChange = value => {
-    return value;
+    if (value === '') {
+      this.setState({selectedFunction: null});
+    }
   };
 
   render() {
diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/conditions/condition.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/conditions/condition.jsx
index 196302c31e..71d3554cf3 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/conditions/condition.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/conditions/condition.jsx
@@ -138,7 +138,7 @@ export default class Condition extends React.Component {
     return createKeyCodes.has(keyCode);
   };
 
-  onInputChange = value => {
+  handleInputChange = value => {
     const external = getExternal(value, this.props.columns);
 
     if (!external[0] && this.state.selectedColumn) {
@@ -179,7 +179,7 @@ export default class Condition extends React.Component {
           inputRenderer={this.inputRenderer}
           valueRenderer={this.valueRenderer}
           shouldKeyDownEventCreateNewOption={this.shouldKeyDownEventCreateNewOption}
-          onInputChange={this.onInputChange}
+          onInputChange={this.handleInputChange}
         />
       </Box>
     );
