commit 4c92c4e661c3fd6cef67dc9a62384e9714fd2d8f
Author: Mark Story <mark@sentry.io>
Date:   Thu Oct 24 12:08:49 2019 -0400

    fix: Remove trace_id and span_id as exposed columns (#15259)
    
    These columns are being picked up in issue search when customers are
    trying to use tracing tags. For transactions these fields require
    properly formatted uuid values which we currently don't have formatters
    for so they don't work well there either.
    
    Fixes SENTRY-CVA

diff --git a/src/sentry/utils/snuba.py b/src/sentry/utils/snuba.py
index 223ae259eb..380e340fd9 100644
--- a/src/sentry/utils/snuba.py
+++ b/src/sentry/utils/snuba.py
@@ -124,8 +124,6 @@ TRANSACTIONS_SENTRY_SNUBA_MAP = {
     # general
     "id": "event_id",
     "project.id": "project_id",
-    "trace_id": "trace_id",
-    "span_id": "span_id",
     "title": "transaction_name",
     "message": "transaction_name",
     "transaction": "transaction_name",
diff --git a/tests/sentry/utils/test_snuba.py b/tests/sentry/utils/test_snuba.py
index bd2fb99152..fe8d1152f5 100644
--- a/tests/sentry/utils/test_snuba.py
+++ b/tests/sentry/utils/test_snuba.py
@@ -582,7 +582,7 @@ class DetectDatasetTest(TestCase):
         query = {"aggregations": [["quantileTiming(0.95)", "transaction.duration", "p95_duration"]]}
         assert detect_dataset(query) == Dataset.Transactions
 
-        query = {"aggregations": [["uniq", "trace_id", "uniq_trace_id"]]}
+        query = {"aggregations": [["uniq", "transaction.op", "uniq_transaction_op"]]}
         assert detect_dataset(query) == Dataset.Transactions
 
 
