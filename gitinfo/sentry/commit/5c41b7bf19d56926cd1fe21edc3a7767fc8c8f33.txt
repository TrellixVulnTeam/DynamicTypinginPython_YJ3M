commit 5c41b7bf19d56926cd1fe21edc3a7767fc8c8f33
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Fri Aug 24 13:29:49 2018 -0700

    fix(ui): Fix AssigneeSelector UI bugs (#9505)
    
    * fixes "Clear Assignee" background
    * fixes menu footer when no access to invite member

diff --git a/src/sentry/static/sentry/app/components/assigneeSelector.jsx b/src/sentry/static/sentry/app/components/assigneeSelector.jsx
index b440c0dffe..38dd54ed5d 100644
--- a/src/sentry/static/sentry/app/components/assigneeSelector.jsx
+++ b/src/sentry/static/sentry/app/components/assigneeSelector.jsx
@@ -12,7 +12,6 @@ import ActorAvatar from 'app/components/actorAvatar';
 import Avatar from 'app/components/avatar';
 import ConfigStore from 'app/stores/configStore';
 import DropdownAutoComplete from 'app/components/dropdownAutoComplete';
-import Feature from 'app/components/feature';
 import GroupStore from 'app/stores/groupStore';
 import Highlight from 'app/components/highlight';
 import InlineSvg from 'app/components/inlineSvg';
@@ -226,8 +225,10 @@ const AssigneeSelectorComponent = createReactClass({
 
   render() {
     let {className} = this.props;
+    let {organization} = this.context;
     let {loading, assignedTo, memberList} = this.state;
     let canInvite = ConfigStore.get('invitesEnabled');
+    let hasOrgWrite = organization.access.includes('org:write');
 
     return (
       <div className={className}>
@@ -252,7 +253,7 @@ const AssigneeSelectorComponent = createReactClass({
             menuWithArrow
             menuHeader={
               assignedTo && (
-                <ClearAssignee
+                <MenuItemWrapper
                   data-test-id="clear-assignee"
                   disabled={!loading}
                   onClick={this.clearAssignTo}
@@ -262,26 +263,25 @@ const AssigneeSelectorComponent = createReactClass({
                     <ClearAssigneeIcon />
                   </IconContainer>
                   <Label>{t('Clear Assignee')}</Label>
-                </ClearAssignee>
+                </MenuItemWrapper>
               )
             }
             menuFooter={
-              canInvite && (
-                <Feature access={['org:write']}>
-                  <InviteMemberLink
-                    data-test-id="invite-member"
-                    disabled={loading}
-                    to={`/settings/${this.context.organization
-                      .slug}/members/new/?referrer=assignee_selector`}
-                  >
-                    <MenuItemWrapper>
-                      <IconContainer>
-                        <InviteMemberIcon />
-                      </IconContainer>
-                      <Label>{t('Invite Member')}</Label>
-                    </MenuItemWrapper>
-                  </InviteMemberLink>
-                </Feature>
+              canInvite &&
+              hasOrgWrite && (
+                <InviteMemberLink
+                  data-test-id="invite-member"
+                  disabled={loading}
+                  to={`/settings/${this.context.organization
+                    .slug}/members/new/?referrer=assignee_selector`}
+                >
+                  <MenuItemWrapper>
+                    <IconContainer>
+                      <InviteMemberIcon />
+                    </IconContainer>
+                    <Label>{t('Invite Member')}</Label>
+                  </MenuItemWrapper>
+                </InviteMemberLink>
               )
             }
           >
@@ -354,11 +354,6 @@ const MenuItemWrapper = styled(({py, ...props}) => <div {...props} />)`
     `};
 `;
 
-const ClearAssignee = styled(MenuItemWrapper)`
-  background: rgba(52, 60, 69, 0.03);
-  border-bottom: 1px solid rgba(52, 60, 69, 0.06);
-`;
-
 const InviteMemberLink = styled(Link)`
   color: ${p => p.theme.textColor};
 `;
diff --git a/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx b/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx
index 990bcf9ab7..5938a9e32a 100644
--- a/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx
+++ b/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx
@@ -99,8 +99,8 @@ class DropdownAutoCompleteMenu extends React.Component {
      */
     menuWithArrow: PropTypes.bool,
 
-    menuFooter: PropTypes.element,
-    menuHeader: PropTypes.element,
+    menuFooter: PropTypes.node,
+    menuHeader: PropTypes.node,
 
     /**
      * Props to pass to menu component
diff --git a/tests/js/spec/components/assigneeSelector.spec.jsx b/tests/js/spec/components/assigneeSelector.spec.jsx
index 9e2def20b6..bb282ab05d 100644
--- a/tests/js/spec/components/assigneeSelector.spec.jsx
+++ b/tests/js/spec/components/assigneeSelector.spec.jsx
@@ -232,7 +232,7 @@ describe('AssigneeSelector', function() {
 
     openMenu();
     assigneeSelector
-      .find('ClearAssignee[data-test-id="clear-assignee"]')
+      .find('MenuItemWrapper[data-test-id="clear-assignee"]')
       .simulate('click');
 
     // api was called with empty string, clearing assignment
@@ -283,11 +283,8 @@ describe('AssigneeSelector', function() {
     assigneeSelector.unmount();
     assigneeSelector = mount(
       <AssigneeSelectorComponent id={GROUP_1.id} />,
-      TestStubs.routerContext()
+      TestStubs.routerContext([{organization: TestStubs.Organization({access: []})}])
     );
-    assigneeSelector.setContext({
-      organization: {id: '1', access: []},
-    });
     openMenu();
     assigneeSelector.update();
     expect(
