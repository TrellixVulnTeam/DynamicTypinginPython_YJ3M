commit 6cf39fb26b15d4c8161117be8eb4bf10a0985304
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Sep 19 18:23:07 2017 -0700

    fix(devserver): Don't attempt to bind `https` to ports it's not allowed
    
    This interferes when working with ngrok or other public proxying tools
    where you likely have an https url exposed externally and don't need
    local https proxy.

diff --git a/src/sentry/runner/commands/devserver.py b/src/sentry/runner/commands/devserver.py
index f36ace5568..f543b459a5 100644
--- a/src/sentry/runner/commands/devserver.py
+++ b/src/sentry/runner/commands/devserver.py
@@ -9,6 +9,7 @@ from __future__ import absolute_import, print_function
 
 import click
 import six
+from six.moves.urllib.parse import urlparse
 
 from sentry.runner.decorators import configuration, log_options
 
@@ -51,7 +52,12 @@ def devserver(reload, watchers, workers, browser_reload, styleguide, environment
     from sentry.services.http import SentryHTTPServer
 
     url_prefix = options.get('system.url-prefix', '')
-    needs_https = url_prefix.startswith('https://')
+    parsed_url = urlparse(url_prefix)
+    # Make sure we're trying to use a port that we can actually bind to
+    needs_https = (
+        parsed_url.scheme == 'https' and
+        (parsed_url.port or 443) > 1024
+    )
     has_https = False
 
     if needs_https:
@@ -99,9 +105,7 @@ def devserver(reload, watchers, workers, browser_reload, styleguide, environment
         ]
 
     if needs_https and has_https:
-        from six.moves.urllib.parse import urlparse
-        parsed_url = urlparse(url_prefix)
-        https_port = six.text_type(parsed_url.port or 443)
+        https_port = six.text_type(parsed_url.port)
         https_host = parsed_url.hostname
 
         # Determine a random port for the backend http server
