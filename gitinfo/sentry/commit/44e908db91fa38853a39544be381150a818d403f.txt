commit 44e908db91fa38853a39544be381150a818d403f
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue Mar 29 18:52:05 2016 +0200

    Reverse to original riak dumping behavior which requires valid JSON subsets.

diff --git a/src/sentry/nodestore/riak/backend.py b/src/sentry/nodestore/riak/backend.py
index 50ac952f3a..aad7d9e1e3 100644
--- a/src/sentry/nodestore/riak/backend.py
+++ b/src/sentry/nodestore/riak/backend.py
@@ -10,8 +10,9 @@ from __future__ import absolute_import
 
 import six
 
+import simplejson as json
+
 from sentry.nodestore.base import NodeStorage
-from sentry.utils import json
 from .client import RiakClient
 
 
@@ -42,7 +43,8 @@ class RiakNodeStorage(NodeStorage):
         )
 
     def set(self, id, data):
-        self.conn.put(self.bucket, id, json.dumps(data), returnbody='false')
+        self.conn.put(self.bucket, id, json.dumps(data, separators=(',', ':')),
+                      returnbody='false')
 
     def delete(self, id):
         self.conn.delete(self.bucket, id)
