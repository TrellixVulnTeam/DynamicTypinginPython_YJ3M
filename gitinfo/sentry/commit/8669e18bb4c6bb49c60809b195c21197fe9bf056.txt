commit 8669e18bb4c6bb49c60809b195c21197fe9bf056
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Sun Dec 1 18:44:32 2013 -0800

    Custom AuthenticationForm to override the username label

diff --git a/src/sentry/web/forms/accounts.py b/src/sentry/web/forms/accounts.py
index 041c2a76ad..1e8edfa9e2 100644
--- a/src/sentry/web/forms/accounts.py
+++ b/src/sentry/web/forms/accounts.py
@@ -12,6 +12,7 @@ from datetime import datetime
 
 from django import forms
 from django.contrib.auth import authenticate
+from django.contrib.auth.forms import AuthenticationForm as AuthenticationForm_
 from django.utils.translation import ugettext_lazy as _
 
 from sentry.constants import EMPTY_PASSWORD_VALUES, LANGUAGES
@@ -33,6 +34,11 @@ def _get_timezone_choices():
 TIMEZONE_CHOICES = _get_timezone_choices()
 
 
+class AuthenticationForm(AuthenticationForm_):
+    username = forms.CharField(
+        label=_('Username or email'), max_length=128)
+
+
 class RegistrationForm(forms.ModelForm):
     username = forms.EmailField(
         label=_('Email'), max_length=128,
diff --git a/src/sentry/web/frontend/accounts.py b/src/sentry/web/frontend/accounts.py
index 0f4d629c04..89b98c9964 100644
--- a/src/sentry/web/frontend/accounts.py
+++ b/src/sentry/web/frontend/accounts.py
@@ -24,7 +24,7 @@ from sentry.web.decorators import login_required
 from sentry.web.forms.accounts import (
     AccountSettingsForm, NotificationSettingsForm, AppearanceSettingsForm,
     RegistrationForm, RecoverPasswordForm, ChangePasswordRecoverForm,
-    ProjectEmailOptionsForm)
+    ProjectEmailOptionsForm, AuthenticationForm)
 from sentry.web.helpers import render_to_response
 from sentry.utils.auth import get_auth_providers
 from sentry.utils.safe import safe_execute
@@ -34,7 +34,6 @@ from sentry.utils.safe import safe_execute
 @never_cache
 def login(request):
     from django.conf import settings
-    from django.contrib.auth.forms import AuthenticationForm
 
     if request.user.is_authenticated():
         return login_redirect(request)
