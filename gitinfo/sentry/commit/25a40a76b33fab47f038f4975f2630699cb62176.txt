commit 25a40a76b33fab47f038f4975f2630699cb62176
Author: Matej Minar <matej.minar@sentry.io>
Date:   Thu Jun 4 09:23:15 2020 +0200

    fix: Fix search in debug files (#19165)
    
    Fix search in Debug Files when the file type filter is active.

diff --git a/src/sentry/api/endpoints/debug_files.py b/src/sentry/api/endpoints/debug_files.py
index 4ebe123762..617d1a1c77 100644
--- a/src/sentry/api/endpoints/debug_files.py
+++ b/src/sentry/api/endpoints/debug_files.py
@@ -133,10 +133,13 @@ class DebugFilesEndpoint(ProjectEndpoint):
         else:
             q = Q()
 
+        file_format_q = Q()
         for file_format in file_formats:
             known_file_format = DIF_MIMETYPES.get(file_format)
             if known_file_format:
-                q |= Q(file__headers__icontains=known_file_format)
+                file_format_q |= Q(file__headers__icontains=known_file_format)
+
+        q &= file_format_q
 
         queryset = ProjectDebugFile.objects.filter(q, project=project).select_related("file")
 
