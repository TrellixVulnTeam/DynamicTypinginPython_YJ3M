commit ec28088d91e181c4a9159c2897db307902f922ec
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Sep 13 09:34:29 2016 -0700

    Add basic test asserting embed respects language header

diff --git a/tests/sentry/web/frontend/test_error_page_embed.py b/tests/sentry/web/frontend/test_error_page_embed.py
index 82393e1927..8cced642a3 100644
--- a/tests/sentry/web/frontend/test_error_page_embed.py
+++ b/tests/sentry/web/frontend/test_error_page_embed.py
@@ -33,6 +33,13 @@ class ErrorPageEmbedTest(TestCase):
         assert resp.status_code == 200
         self.assertTemplateUsed(resp, 'sentry/error-page-embed.html')
 
+    def test_uses_locale_from_header(self):
+        resp = self.client.get(
+            self.path, HTTP_REFERER='http://example.com', HTTP_ACCEPT_LANGUAGE='fr')
+        assert resp.status_code == 200
+        self.assertTemplateUsed(resp, 'sentry/error-page-embed.html')
+        assert 'Fermer' in resp.content  # Close
+
     def test_submission(self):
         resp = self.client.post(self.path, {
             'name': 'Jane Doe',
