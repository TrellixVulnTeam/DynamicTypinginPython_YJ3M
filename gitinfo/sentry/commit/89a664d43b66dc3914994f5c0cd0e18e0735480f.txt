commit 89a664d43b66dc3914994f5c0cd0e18e0735480f
Author: Lauryn Brown <lauryndbrown@gmail.com>
Date:   Fri Aug 31 09:45:03 2018 -0700

    vsts flag. (#9584)

diff --git a/src/sentry/api/endpoints/organization_config_integrations.py b/src/sentry/api/endpoints/organization_config_integrations.py
index 835296f425..e5dc789c6c 100644
--- a/src/sentry/api/endpoints/organization_config_integrations.py
+++ b/src/sentry/api/endpoints/organization_config_integrations.py
@@ -27,6 +27,9 @@ class OrganizationConfigIntegrationsEndpoint(OrganizationEndpoint):
         has_jira = features.has('organizations:jira-integration',
                                 organization,
                                 actor=request.user)
+        has_vsts = features.has('organizations:vsts-integration',
+                                organization,
+                                actor=request.user)
 
         providers = []
         for provider in integrations.all():
@@ -39,6 +42,8 @@ class OrganizationConfigIntegrationsEndpoint(OrganizationEndpoint):
                 internal_integrations.remove('github')
             if has_jira:
                 internal_integrations.remove('jira')
+            if has_vsts:
+                internal_integrations.remove('vsts')
             if not has_catchall and provider.key in internal_integrations:
                 continue
 
diff --git a/src/sentry/api/endpoints/organization_repositories.py b/src/sentry/api/endpoints/organization_repositories.py
index e356a8a994..9d5e952178 100644
--- a/src/sentry/api/endpoints/organization_repositories.py
+++ b/src/sentry/api/endpoints/organization_repositories.py
@@ -100,9 +100,11 @@ class OrganizationRepositoriesEndpoint(OrganizationEndpoint):
             'organizations:github-enterprise', organization, actor=request.user)
         has_bb = provider_id == 'integrations:bitbucket' and features.has(
             'organizations:bitbucket-integration', organization, actor=request.user)
+        has_vsts = provider_id == 'integrations:vsts' and features.has(
+            'organizations:vsts-integration', organization, actor=request.user)
 
         if features.has('organizations:internal-catchall', organization,
-                        actor=request.user) or has_ghe or has_bb:
+                        actor=request.user) or has_ghe or has_bb or has_vsts:
             if provider_id is not None and provider_id.startswith('integrations:'):
                 try:
                     provider_cls = bindings.get('integration-repository.provider').get(provider_id)
diff --git a/src/sentry/api/serializers/models/organization.py b/src/sentry/api/serializers/models/organization.py
index 865de5ae20..dcd5c45869 100644
--- a/src/sentry/api/serializers/models/organization.py
+++ b/src/sentry/api/serializers/models/organization.py
@@ -127,6 +127,8 @@ class DetailedOrganizationSerializer(OrganizationSerializer):
             feature_list.append('bitbucket-integration')
         if features.has('organizations:jira-integration', obj, actor=user):
             feature_list.append('jira-integration')
+        if features.has('organizations:vsts-integration', obj, actor=user):
+            feature_list.append('vsts-integration')
         if features.has('organizations:integrations-issue-basic', obj, actor=user):
             feature_list.append('integrations-issue-basic')
         if features.has('organizations:integrations-issue-sync', obj, actor=user):
diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index f8bf497807..12ed120060 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -777,6 +777,7 @@ SENTRY_FEATURES = {
     'organizations:github-enterprise': False,
     'organizations:bitbucket-integration': False,
     'organizations:jira-integration': False,
+    'organizations:vsts-integration': False,
     'organizations:integrations-issue-basic': False,
     'organizations:integrations-issue-sync': False,
     'organizations:new-teams': True,
diff --git a/src/sentry/features/__init__.py b/src/sentry/features/__init__.py
index 90603fe8b1..48dafed034 100644
--- a/src/sentry/features/__init__.py
+++ b/src/sentry/features/__init__.py
@@ -26,6 +26,7 @@ default_manager.add('organizations:new-issue-ui', OrganizationFeature)  # NOQA
 default_manager.add('organizations:github-enterprise', OrganizationFeature)  # NOQA
 default_manager.add('organizations:bitbucket-integration', OrganizationFeature)  # NOQA
 default_manager.add('organizations:jira-integration', OrganizationFeature)  # NOQA
+default_manager.add('organizations:vsts-integration', OrganizationFeature)  # NOQA
 default_manager.add('organizations:integrations-issue-basic', OrganizationFeature)  # NOQA
 default_manager.add('organizations:integrations-issue-sync', OrganizationFeature)  # NOQA
 default_manager.add('organizations:new-teams', OrganizationFeature)  # NOQA
