commit 1a6068fb37999fbee2009da2a35fe99be379d949
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Fri Nov 13 21:24:23 2015 +0100

    Handle $$EnhancerBySpringCGLIB$$ in module paths for java.

diff --git a/src/sentry/interfaces/stacktrace.py b/src/sentry/interfaces/stacktrace.py
index 7705f4feaa..8b370d3998 100644
--- a/src/sentry/interfaces/stacktrace.py
+++ b/src/sentry/interfaces/stacktrace.py
@@ -33,6 +33,12 @@ _filename_version_re = re.compile(r"""(?:
     [a-f0-9]{40}       # sha1
 )/""", re.X | re.I)
 
+# Java Spring specific anonymous classes.
+# see: http://mydailyjava.blogspot.co.at/2013/11/cglib-missing-manual.html
+_java_enhancer_re = re.compile(r'''
+\$\$EnhancerBySpringCGLIB\$\$[a-fA-F0-9]+
+''', re.X)
+
 
 def get_context(lineno, context_line, pre_context=None, post_context=None, filename=None):
     if lineno is None:
@@ -116,6 +122,11 @@ def remove_filename_outliers(filename):
     return _filename_version_re.sub('<version>/', filename)
 
 
+def remove_module_outliers(module):
+    """Remove things that augment the module but really should not."""
+    return _java_enhancer_re.sub('', module)
+
+
 def slim_frame_data(stacktrace,
                     frame_allowance=settings.SENTRY_MAX_STACKTRACE_FRAMES):
     """
@@ -268,7 +279,7 @@ class Frame(Interface):
             if self.is_unhashable_module():
                 output.append('<module>')
             else:
-                output.append(self.module)
+                output.append(remove_module_outliers(self.module))
         elif self.filename and not self.is_url() and not self.is_caused_by():
             output.append(remove_filename_outliers(self.filename))
 
