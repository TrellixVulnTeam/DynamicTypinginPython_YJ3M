commit c09d29f533387592237560b5ff26a1cd37341419
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Mar 12 11:47:19 2015 -0700

    Add metrics to notifications

diff --git a/src/sentry/rules/actions/notify_event.py b/src/sentry/rules/actions/notify_event.py
index fc486ba25c..946b842376 100644
--- a/src/sentry/rules/actions/notify_event.py
+++ b/src/sentry/rules/actions/notify_event.py
@@ -10,6 +10,7 @@ from __future__ import absolute_import
 
 from sentry.plugins import plugins
 from sentry.rules.actions.base import EventAction
+from sentry.utils import metrics
 from sentry.utils.safe import safe_execute
 
 
@@ -38,4 +39,5 @@ class NotifyEventAction(EventAction):
             if not safe_execute(plugin.should_notify, group=group, event=event):
                 continue
 
+            metrics.incr('notifications.sent.{}'.format(plugin.slug))
             yield self.future(plugin.rule_notify)
diff --git a/src/sentry/rules/actions/notify_event_service.py b/src/sentry/rules/actions/notify_event_service.py
index 57fc6fe723..9b677f1894 100644
--- a/src/sentry/rules/actions/notify_event_service.py
+++ b/src/sentry/rules/actions/notify_event_service.py
@@ -13,6 +13,7 @@ from django import forms
 from sentry.plugins import plugins
 from sentry.rules.actions.base import EventAction
 from sentry.utils.safe import safe_execute
+from sentry.utils import metrics
 
 
 class NotifyEventServiceForm(forms.Form):
@@ -52,6 +53,7 @@ class NotifyEventServiceAction(EventAction):
             self.logger.info('Rule failed should_notify check')
             return
 
+        metrics.incr('notifications.sent.{}'.format(plugin.slug))
         yield self.future(plugin.rule_notify)
 
     def get_plugins(self):
