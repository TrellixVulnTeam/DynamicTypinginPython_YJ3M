commit 27b12f5db221762fc769e826664919d07488a290
Author: ckj <chriskjennings@gmail.com>
Date:   Wed Mar 18 22:16:35 2015 -0400

    Fix team list. Hide/Show rightbar on Orgs.

diff --git a/src/sentry/static/sentry/app/components/organizationHomeSidebar.jsx b/src/sentry/static/sentry/app/components/organizationHomeSidebar.jsx
index 07779deb9c..8bc751d979 100644
--- a/src/sentry/static/sentry/app/components/organizationHomeSidebar.jsx
+++ b/src/sentry/static/sentry/app/components/organizationHomeSidebar.jsx
@@ -8,15 +8,27 @@ var OrganizationState = require("../mixins/organizationState");
 var OrganizationHomeSidebar = React.createClass({
   mixins: [OrganizationState],
 
+  componentWillMount() {
+    // Handle out of scope classes with jQuery
+    jQuery(document.body).addClass("show-rightbar");
+  },
+
+  componentWillUnmount() {
+    // Handle out of scope classes with jQuery
+    jQuery(document.body).removeClass("show-rightbar");
+  },
+
   render() {
     var org = this.getOrganization();
     var orgParams = {orgId: org.slug};
 
     return (
-      <ul className="nav nav-stacked">
-        <ListLink to="organizationTeams" params={orgParams}>Teams</ListLink>
-        <ListLink to="organizationMembers" params={orgParams}>Members</ListLink>
-      </ul>
+      <div className="rightbar">
+        <ul className="nav nav-stacked">
+          <ListLink to="organizationTeams" params={orgParams}>Teams</ListLink>
+          <ListLink to="organizationMembers" params={orgParams}>Members</ListLink>
+        </ul>
+      </div>
     );
   }
 });
diff --git a/src/sentry/static/sentry/app/views/organizationTeams.jsx b/src/sentry/static/sentry/app/views/organizationTeams.jsx
index 064cb18e1a..9b0e7a8efa 100644
--- a/src/sentry/static/sentry/app/views/organizationTeams.jsx
+++ b/src/sentry/static/sentry/app/views/organizationTeams.jsx
@@ -21,7 +21,7 @@ var OrganizationTeams = React.createClass({
     }
 
     return (
-      <div>
+      <div className="team-list">
         <OrganizationHomeSidebar />
         <h3>Teams</h3>
         {org.teams.map((team, teamIdx) => {
@@ -30,10 +30,10 @@ var OrganizationTeams = React.createClass({
             teamId: team.slug
           };
           return (
-            <div class="box" key={team.slug}>
-              <div class="box-header">
-                <div class="pull-right actions">
-                  <a href="#"><span class="icon-settings"></span> Team Settings</a>
+            <div className="box" key={team.slug}>
+              <div className="box-header">
+                <div className="pull-right actions">
+                  <a href="#"><span className="icon-settings"></span> Team Settings</a>
                 </div>
                 <h3>
                   <Router.Link
@@ -41,8 +41,8 @@ var OrganizationTeams = React.createClass({
                     params={teamRouteParams}>{team.name}</Router.Link>
                 </h3>
               </div>
-              <div class="box-content with-padding">
-                <ul class="projects">
+              <div className="box-content with-padding">
+                <ul className="projects">
                   {team.projects.map((project) => {
                     // <p>There are no projects in this team. Would you like to <a href="#">create a project</a>?</p>
                     var projectRouteParams = {
diff --git a/src/sentry/static/sentry/less/layout.less b/src/sentry/static/sentry/less/layout.less
index 86e8718ea7..157c884b3a 100644
--- a/src/sentry/static/sentry/less/layout.less
+++ b/src/sentry/static/sentry/less/layout.less
@@ -48,7 +48,7 @@ body.show-rightbar {
   background: #fbfbfc url(../images/dashboard/sidebar-bg.png) top right repeat-y;
   background-size: 220px 2px;
 
-  #content {
+  .content {
     position: relative;
     padding-right: 220px;
   }
@@ -56,6 +56,10 @@ body.show-rightbar {
   .rightbar {
     display: block
   }
+
+  footer {
+    margin-right: 220px;
+  }
 }
 
 /**
@@ -234,7 +238,7 @@ header + .messages-container {
   display: none;
   position: absolute;
   width: 220px;
-  right: 0px;
+  right: -20px;
   top: -11px;
 
   .nav-stacked {
diff --git a/src/sentry/static/sentry/less/organization.less b/src/sentry/static/sentry/less/organization.less
index 6272dfa100..4809e3defd 100644
--- a/src/sentry/static/sentry/less/organization.less
+++ b/src/sentry/static/sentry/less/organization.less
@@ -1,146 +1,69 @@
 /**
-* Layout
+* Team list
 * ============================================================================
 */
 
-.organization {
-  .sidebar {
-    float: right;
-  }
+.team-list {
+  list-style: none;
+  padding-left: 0;
 
   .box-header {
     .pull-right {
       margin-top: -2px;
-      .icon-settings {
-        position: relative;
-        top: 1px;
-        margin-right: 2px;
-        opacity: .3;
+        .icon-settings {
+          position: relative;
+          top: 1px;
+          margin-right: 2px;
+          opacity: .3;
+        }
       }
-    }
 
-    a {
-      color: inherit;
-    }
+      a {
+        color: inherit;
+      }
   }
 
-  .teams {
+  .box-content {
+    .clearfix();
     position: relative;
-    overflow: hidden;
-    margin: 0 0 10px;
-    padding: 0;
-    list-style: none;
-
-    li {
-      display: inline-block;
-      width: 142px;
-      margin-right: 5px;
-      white-space: nowrap;
-      overflow: hidden;
-      text-overflow: ellipsis;
-      line-height: 26px;
-      font-size: 16px;
-    }
+    padding-bottom: 10px !important;
   }
-}
 
-/**
-* Team list
-* ============================================================================
-*/
-
-.team-index {
-
-  h2 {
-    font-size: 26px;
-    margin: 0 0 28px;
-    letter-spacing: -0.25px;
-  }
-
-  .team-list {
-    list-style: none;
-    padding-left: 0;
-
-    h3 a {
-      color: @gray;
-    }
-
-    .box-content {
-      position: relative;
-      overflow: hidden;
-    }
-
-    .loading {
-      display: none;
-    }
-
-    .chart {
-      display: block;
-      position: absolute;
-      left: 0;
-      right: 0;
-      bottom: -1px;
-      top: 10px;
-      opacity: .75;
-    }
-
-    ul {
-      position: relative;
-
-      overflow: hidden;
-      padding-left: 0;
-      list-style: circle;
-      margin-left: -2%;
-      margin-bottom: 0;
-
-      > li {
-        float: left;
-        width: 23%;
-        margin-left: 2%;
-        margin-bottom: 8px;
-
-        a {
-          display: block;
-          font-size: 17px;
-          white-space: nowrap;
-          overflow: hidden;
-          text-overflow: ellipsis;
-        }
-      }
-    }
+  .loading {
+    display: none;
   }
 
-  // Team settings
-
-  .team-settings {
-    .nav-tabs {
-      margin-bottom: 30px;
-    }
-
-    .box-content.with-padding {
-      padding-bottom: 15px;
-    }
+  .chart {
+    display: block;
+    position: absolute;
+    left: 0;
+    right: 0;
+    bottom: -1px;
+    top: 10px;
+    opacity: .75;
   }
 
-  .team-settings-toggle {
+  .projects {
     position: relative;
-    top: 2px;
-    margin-left: 4px;
-    opacity: .50;
-    .transition(.2s opacity);
-
-    &:hover {
-      opacity: 1;
-    }
-  }
-
-  .team-settings {
-    display: none;
-  }
-
-  .settings-open {
-    .team-settings-toggle {
-      opacity: 1;
+    overflow: hidden;
+    padding-left: 0;
+    list-style: circle;
+    margin-left: -2%;
+    margin-bottom: 0;
+
+    > li {
+      float: left;
+      width: 23%;
+      margin-left: 2%;
+      margin-bottom: 8px;
+
+      a {
+        display: block;
+        font-size: 17px;
+        white-space: nowrap;
+        overflow: hidden;
+        text-overflow: ellipsis;
+      }
     }
   }
 }
diff --git a/src/sentry/templates/sentry/layout.html b/src/sentry/templates/sentry/layout.html
index aa33dbc092..913aaf6555 100644
--- a/src/sentry/templates/sentry/layout.html
+++ b/src/sentry/templates/sentry/layout.html
@@ -8,232 +8,232 @@
 
 <!DOCTYPE html>
 <html lang="en">
-    <head>
-        <meta http-equiv="content-type" content="text/html; charset=utf-8">
-        <meta name="robots" content="NONE,NOARCHIVE">
-        <meta name="viewport" content="width=device-width, initial-scale=1">
+<head>
+  <meta http-equiv="content-type" content="text/html; charset=utf-8">
+  <meta name="robots" content="NONE,NOARCHIVE">
+  <meta name="viewport" content="width=device-width, initial-scale=1">
 
-        <link href="{% url 'sentry-media' "sentry" "images/favicon.ico" %}" rel="shortcut icon" type="image/png"/>
+  <link href="{% url 'sentry-media' "sentry" "images/favicon.ico" %}" rel="shortcut icon" type="image/png"/>
 
-        {% block css %}
-            <link href="{% url 'sentry-media' "sentry" "dist/sentry.css" %}" rel="stylesheet"/>
-            <link href="{% url 'sentry-media' 'sentry' 'vendor/platformicons/platformicons/platformicons.css' %}" type="text/css" rel="stylesheet">
-        {% endblock %}
+  {% block css %}
+  <link href="{% url 'sentry-media' "sentry" "dist/sentry.css" %}" rel="stylesheet"/>
+  <link href="{% url 'sentry-media' 'sentry' 'vendor/platformicons/platformicons/platformicons.css' %}" type="text/css" rel="stylesheet">
+  {% endblock %}
 
-        <title>{% block title %}Sentry{% endblock %}</title>
+  <title>{% block title %}Sentry{% endblock %}</title>
 
         <!--[if lt IE 9]>
         <script type="text/javascript" src="{% url 'sentry-media' "sentry" "scripts/lib/html5shiv.js" %}"></script>
         <![endif]-->
         {% block scripts %}
-            <script src="{% url 'sentry-media' "sentry" "dist/vendor.js" %}"></script>
-            <script src="{% url 'sentry-media' "sentry" "dist/app.js" %}"></script>
+        <script src="{% url 'sentry-media' "sentry" "dist/vendor.js" %}"></script>
+        <script src="{% url 'sentry-media' "sentry" "dist/app.js" %}"></script>
 
-            <script>
-            (function(){
-              for (var n in window.exports) {
-                window[n] = window.exports[n];
-              }
-              window.$ = window.jQuery;
+        <script>
+          (function(){
+            for (var n in window.exports) {
+              window[n] = window.exports[n];
+            }
+            window.$ = window.jQuery;
 
-              window.moment.locale({{ request.LANGUAGE_CODE|to_json|safe }});
-            }());
-            </script>
+            window.moment.locale({{ request.LANGUAGE_CODE|to_json|safe }});
+          }());
+        </script>
 
-            {% include "sentry/includes/ravenjs.html" %}
+        {% include "sentry/includes/ravenjs.html" %}
         {% endblock %}
 
         {% block meta %}
         {% endblock %}
-    </head>
+      </head>
 
-    <body class="{% block wrapperclass %}{% endblock %}">
-      {% block body %}
+      <body class="{% block wrapperclass %}{% endblock %}">
+        {% block body %}
         <div class="app-sidebar">
-        {% if request.user.is_authenticated %}
-        {% if organization %}
+          {% if request.user.is_authenticated %}
+          {% if organization %}
           <div class="org-selector dropdown">
             <a href="{% url 'sentry-organization-home' organization.slug %}" class="active-org">{{ organization.name }}</a>
             <a href="#" class="dropdown-toggle" data-toggle="dropdown" onclick="$(this).parent('.dropdown').toggleClass('open');"><span class="icon-arrow-down"></span></a>
             {% if list_organizations|length > 1 %}
-              <div class="dropdown-menu">
-                <ul class="orgs">
-                  {% for o in request.user|list_organizations %}
-                    {% if o.id != organization.id %}
-                    <li>
-                      <a href="{% url 'sentry-organization-home' o.slug %}">
-                          {{ o.name }}
-                      </a>
-                    </li>
-                    {% endif %}
-                  {% endfor %}
-                </ul>
-              </div>
+            <div class="dropdown-menu">
+              <ul class="orgs">
+                {% for o in request.user|list_organizations %}
+                {% if o.id != organization.id %}
+                <li>
+                  <a href="{% url 'sentry-organization-home' o.slug %}">
+                    {{ o.name }}
+                  </a>
+                </li>
+                {% endif %}
+                {% endfor %}
+              </ul>
+            </div>
             {% endif %}
           </div>
           {% endif %}
-        {% endif %}
-        <div class="app-sidebar-content">
-          {% block app-sidebar %}{% endblock %}
-          <div class="teams">
-            {% if TEAM_LIST %}
-                {% for t, p_list in TEAM_LIST %}
-                  <div class="team">
-                      <h6>
-                        <a class="pull-right" href="{% url 'sentry-manage-team' t.organization.slug t.slug %}"><span class="icon-settings"></span></a>
-                        <a href="{% url 'sentry-team-dashboard' t.organization.slug t.slug %}">{{ t.name }}</a>
-                      </h6>
-                      <ul class="project-list list-unstyled truncate">
-                          {% for p in p_list %}
-                              <li{% if p.id == project.id %} class="active"{% endif %}>
-                                  <strong><a href="{% url 'sentry-stream' t.organization.slug p.slug %}" title="{{ p.name }}">{{ p.name }}</a></strong>
-                              </li>
-                          {% endfor %}
-                      </ul>
-                  </div>
+          {% endif %}
+          <div class="app-sidebar-content">
+            {% block app-sidebar %}{% endblock %}
+            <div class="teams">
+              {% if TEAM_LIST %}
+              {% for t, p_list in TEAM_LIST %}
+              <div class="team">
+                <h6>
+                  <a class="pull-right" href="{% url 'sentry-manage-team' t.organization.slug t.slug %}"><span class="icon-settings"></span></a>
+                  <a href="{% url 'sentry-team-dashboard' t.organization.slug t.slug %}">{{ t.name }}</a>
+                </h6>
+                <ul class="project-list list-unstyled truncate">
+                  {% for p in p_list %}
+                  <li{% if p.id == project.id %} class="active"{% endif %}>
+                  <strong><a href="{% url 'sentry-stream' t.organization.slug p.slug %}" title="{{ p.name }}">{{ p.name }}</a></strong>
+                </li>
                 {% endfor %}
+              </ul>
+            </div>
+            {% endfor %}
             {% endif %}
           </div>
         </div>
         {% if request.user.is_authenticated %}
         {% block account_nav %}
-          <div class="user-nav">
-            <img src="{% gravatar_url user.email size 72 %}" class="avatar">
-            <div class="user-details">
-              <span class="user-name">{{ request.user.username }}</span>
-              <ul>
-                <li><a href="{% url 'sentry-account-settings' %}">{% trans "Account" %}</a></li>
-                <li><a href="{% url 'sentry-logout' %}">{% trans "Sign out" %}</a></li>
-              </ul>
-            </div>
+        <div class="user-nav">
+          <img src="{% gravatar_url user.email size 72 %}" class="avatar">
+          <div class="user-details">
+            <span class="user-name">{{ request.user.username }}</span>
+            <ul>
+              <li><a href="{% url 'sentry-account-settings' %}">{% trans "Account" %}</a></li>
+              <li><a href="{% url 'sentry-logout' %}">{% trans "Sign out" %}</a></li>
+            </ul>
           </div>
+        </div>
         {% endblock %}
         {% endif %}
-        </div>
-        <div class="app">
-          {% block header %}
-            <header>
-                <div class="container">
-                  {% block menu_toggle %}
-                      {% if not request.user.is_authenticated %}
-                        {% block logo %}
-                          <a href="/"><span class="icon-sentry-logo-full"></span></a>
-                        {% endblock %}
-                      {% endif %}
-                  {% endblock %}
-                  <div class="pull-right">
-                      {% block header_action %}
-                        {% if not request.user.is_authenticated %}
-                        <a href="{% url 'sentry-login' %}">{% trans "Login" %}</a>
-                        {% endif %}
-                      {% endblock %}
-                  </div>
-                  {% if request.user.is_authenticated %}
-                    {% block breadcrumb_outer %}
-                      <ul class="breadcrumb">
-                        {% block breadcrumb_inner %}
-                          {% if team %}
-                            <li>
-                              <a class="team-name" href="{% url 'sentry-team-dashboard' team.organization.slug team.slug %}">{{ team.name }}</a>
-                            </li>
-                            {% if project %}
-                            <li>
-                              <a class="project-name" href="{% url 'sentry-stream' project.organization.slug project.slug %}">{{ project.name }}</a>
-                              <a href="{% url 'sentry-manage-project' project.organization.slug project.slug %}"><span class="icon-settings"></span></a>
-                            </li>
-                            {% endif %}
-                          {% else %}
-                              <li>{% block heading %}{% endblock %}</li>
-                          {% endif %}
-                        {% endblock %}
-                      </ul>
-                      {% endblock %}
-                    {% endif %}
-                 </div>
-            </header>
+      </div>
+      <div class="app">
+        {% block header %}
+        <header>
+          <div class="container">
+            {% block menu_toggle %}
+            {% if not request.user.is_authenticated %}
+            {% block logo %}
+            <a href="/"><span class="icon-sentry-logo-full"></span></a>
+            {% endblock %}
+            {% endif %}
+            {% endblock %}
+            <div class="pull-right">
+              {% block header_action %}
+              {% if not request.user.is_authenticated %}
+              <a href="{% url 'sentry-login' %}">{% trans "Login" %}</a>
+              {% endif %}
+              {% endblock %}
+            </div>
+            {% if request.user.is_authenticated %}
+            {% block breadcrumb_outer %}
+            <ul class="breadcrumb">
+              {% block breadcrumb_inner %}
+              {% if team %}
+              <li>
+                <a class="team-name" href="{% url 'sentry-team-dashboard' team.organization.slug team.slug %}">{{ team.name }}</a>
+              </li>
+              {% if project %}
+              <li>
+                <a class="project-name" href="{% url 'sentry-stream' project.organization.slug project.slug %}">{{ project.name }}</a>
+                <a href="{% url 'sentry-manage-project' project.organization.slug project.slug %}"><span class="icon-settings"></span></a>
+              </li>
+              {% endif %}
+              {% else %}
+              <li>{% block heading %}{% endblock %}</li>
+              {% endif %}
+              {% endblock %}
+            </ul>
+            {% endblock %}
+            {% endif %}
+          </div>
+        </header>
         {% endblock %}
 
         {% block alerts %}
-            {% include "sentry/partial/alerts.html" %}
+        {% include "sentry/partial/alerts.html" %}
         {% endblock %}
 
         {% block page_header_block %}
-            <div class="toolbar">
-                <div class="container">
-                    {% block page_header %}{% endblock %}
-                </div>
-            </div>
+        <div class="toolbar">
+          <div class="container">
+            {% block page_header %}{% endblock %}
+          </div>
+        </div>
         {% endblock %}
 
         <section id="content"
-                 ng-controller="{% block controller %}DefaultCtrl{% endblock %}"
-                 class="{% block bodyclass %}{% endblock %}">
-                 <div class="rightbar">
-                   {% block rightbar %}
-                      Sup
-                   {% endblock %}
-                 </div>
-            <div class="container">
-                {% block above_content %}{% endblock %}
-                <div class="content">
-                    {% block content_before %}
-                    {% endblock %}
-
-                    {% block content %}
-                    <div class="row" id="blk_content">
-                        <div class="col-sm-3 sidebar">
-                            {% block sidebar %}
-                            {% endblock %}
-                        </div>
-                        <div class="col-sm-9" id="blk_main">
-                            {% block main %}
-                            {% endblock %}
-                        </div>
-                    </div>
-                    {% endblock %}
-
-                    {% block content_after %}
-                    {% endblock %}
-                </div>
-            </div>
-            <footer>
-              <div class="container">
-                {% block footer %}
-                  <div class="pull-right">
-                    {% if request.user.is_staff %}
-                      <a href="{% url 'sentry-admin-status' %}">{% trans "Admin" %}</a>
-                    {% endif %}
-                    {% block support_link %}{% endblock %}
-                    <a href="{% url 'sentry-help' %}">{% trans "Docs" %}</a>
-                    <a href="https://github.com/getsentry/sentry">{% trans "Contribute" %}</a>
-                  </div>
-                  <div class="version pull-left">Sentry {{ sentry_version.current }} {% if sentry_version.update_available %}<a href="#" title="You're running an old version of Sentry, did you know {{ sentry_version.latest }} is available?" class="tip icon-circle-arrow-up">&nbsp;</a>{% endif %}</div>
-                  <span class="icon-sentry-logo"></span>
+        ng-controller="{% block controller %}DefaultCtrl{% endblock %}"
+        class="{% block bodyclass %}{% endblock %}">
+        <div class="container">
+          {% block above_content %}{% endblock %}
+          <div class="content">
+            {% block content_before %}
+            {% endblock %}
+
+            {% block content %}
+            <div class="row" id="blk_content">
+              <div class="col-sm-3 sidebar">
+                {% block sidebar %}
                 {% endblock %}
               </div>
-            </footer>
-        </section>
-
-        <div class="settings-modal">
-          <div class="container">
-            <div class="settings-modal-wrap">
-              <div class="settings-modal-header">
-                <h3>Netflix</h3>
-              </div>
-              <div class="settings-modal-body">
-                <ul class="nav nav-tabs">
-                  <li class="active"><a href="#">Teams</a></li>
-                  <li><a href="#">Members</a></li>
-                  <li><a href="#">Settings</a></li>
-                </ul>
-              </div>
-              <div class="settings-modal-footer">
-                <a class="btn btn-default" href="#">Cancel</a> <a class="btn btn-primary" href="#">Save Changes</a>
+              <div class="col-sm-9" id="blk_main">
+                {% block main %}
+                {% endblock %}
               </div>
             </div>
+            {% endblock %}
+
+            {% block content_after %}
+            {% endblock %}
+
+            <div class="rightbar">
+             {% block rightbar %}
+             {% endblock %}
+           </div>
+         </div>
+       </div>
+       <footer>
+        <div class="container">
+          {% block footer %}
+          <div class="pull-right">
+            {% if request.user.is_staff %}
+            <a href="{% url 'sentry-admin-status' %}">{% trans "Admin" %}</a>
+            {% endif %}
+            {% block support_link %}{% endblock %}
+            <a href="{% url 'sentry-help' %}">{% trans "Docs" %}</a>
+            <a href="https://github.com/getsentry/sentry">{% trans "Contribute" %}</a>
+          </div>
+          <div class="version pull-left">Sentry {{ sentry_version.current }} {% if sentry_version.update_available %}<a href="#" title="You're running an old version of Sentry, did you know {{ sentry_version.latest }} is available?" class="tip icon-circle-arrow-up">&nbsp;</a>{% endif %}</div>
+          <span class="icon-sentry-logo"></span>
+          {% endblock %}
+        </div>
+      </footer>
+    </section>
+
+    <div class="settings-modal">
+      <div class="container">
+        <div class="settings-modal-wrap">
+          <div class="settings-modal-header">
+            <h3>Netflix</h3>
+          </div>
+          <div class="settings-modal-body">
+            <ul class="nav nav-tabs">
+              <li class="active"><a href="#">Teams</a></li>
+              <li><a href="#">Members</a></li>
+              <li><a href="#">Settings</a></li>
+            </ul>
+          </div>
+          <div class="settings-modal-footer">
+            <a class="btn btn-default" href="#">Cancel</a> <a class="btn btn-primary" href="#">Save Changes</a>
           </div>
         </div>
-        {% endblock %}
       </div>
-    </body>
+    </div>
+    {% endblock %}
+  </div>
+</body>
 </html>
