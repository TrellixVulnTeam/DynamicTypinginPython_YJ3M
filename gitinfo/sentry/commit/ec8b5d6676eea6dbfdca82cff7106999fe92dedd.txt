commit ec8b5d6676eea6dbfdca82cff7106999fe92dedd
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Wed May 18 23:20:33 2016 +0200

    Made app_id code not fail if options would not return a string

diff --git a/src/sentry/models/authenticator.py b/src/sentry/models/authenticator.py
index 780d85c460..c7b604308d 100644
--- a/src/sentry/models/authenticator.py
+++ b/src/sentry/models/authenticator.py
@@ -403,11 +403,13 @@ class U2fInterface(AuthenticatorInterface):
 
     @property
     def u2f_facets(self):
-        return [self.u2f_app_id]
+        app_id = self.u2f_app_id
+        return app_id and [self.app_id] or []
 
     @property
     def is_available(self):
-        return self.u2f_app_id.startswith('https://')
+        return self.u2f_app_id is not None and \
+            self.u2f_app_id.startswith('https://')
 
     def generate_new_config(self):
         return {
