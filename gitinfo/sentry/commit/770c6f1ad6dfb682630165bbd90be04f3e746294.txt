commit 770c6f1ad6dfb682630165bbd90be04f3e746294
Author: Katie Lundsgaard <katie@getsentry.com>
Date:   Thu Sep 29 16:59:30 2016 -0700

    Make user.email default for notifications if alert_email is empty string or whitespace (#4196)

diff --git a/src/sentry/web/forms/accounts.py b/src/sentry/web/forms/accounts.py
index 6a27199dd6..36f1fa0d2c 100644
--- a/src/sentry/web/forms/accounts.py
+++ b/src/sentry/web/forms/accounts.py
@@ -561,8 +561,7 @@ class ProjectEmailOptionsForm(forms.Form):
 
         self.fields['alert'].initial = has_alerts
         self.fields['workflow'].initial = has_workflow
-        self.fields['email'].initial = UserOption.objects.get_value(
-            user, project, 'mail:email', None) or alert_email
+        self.fields['email'].initial = specified_email or alert_email or user.email
 
     def save(self):
         UserOption.objects.set_value(
diff --git a/src/sentry/web/frontend/accounts.py b/src/sentry/web/frontend/accounts.py
index b95c7263a3..099de3b53d 100644
--- a/src/sentry/web/frontend/accounts.py
+++ b/src/sentry/web/frontend/accounts.py
@@ -314,12 +314,12 @@ def list_identities(request):
 @login_required
 def show_emails(request):
     user = request.user
-    primary_email = user.emails.get(email=user.email)
-    alt_emails = user.emails.all().exclude(email=primary_email.email)
+    primary_email = user.email
+    alt_emails = user.emails.all().exclude(email=primary_email)
 
     email_form = EmailForm(user, request.POST or None,
         initial={
-            'primary_email': primary_email.email,
+            'primary_email': primary_email,
         },
     )
 
