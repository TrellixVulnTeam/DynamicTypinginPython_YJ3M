commit b38cc0705cc59c99712717d87def7d2273fa3290
Author: David Cramer <dcramer@gmail.com>
Date:   Sun May 26 10:48:33 2013 +0800

    More cleanup for header

diff --git a/src/sentry/templates/sentry/bases/settings.html b/src/sentry/templates/sentry/bases/settings.html
new file mode 100644
index 0000000000..6ece5ea94f
--- /dev/null
+++ b/src/sentry/templates/sentry/bases/settings.html
@@ -0,0 +1,17 @@
+{% extends "sentry/layout.html" %}
+
+{% load i18n %}
+
+{% block title %}{{ project.name }} Settings | {{ block.super }}{% endblock %}
+
+{% block page_header %}
+    {{ block.super }}
+    <ul class="nav nav-tabs">
+        <li>
+            <a href="{% url 'sentry-stream' project.team.slug project.slug %}">{% trans "Stream" %}</a>
+        </li>
+        <li class="active">
+            <a href="{% url 'sentry-manage-project' project.team.slug project.slug %}">{% trans "Settings" %}</a>
+        </li>
+    </ul>
+{% endblock %}
diff --git a/src/sentry/templates/sentry/bases/stream.html b/src/sentry/templates/sentry/bases/stream.html
new file mode 100644
index 0000000000..4ef3648e3a
--- /dev/null
+++ b/src/sentry/templates/sentry/bases/stream.html
@@ -0,0 +1,23 @@
+{% extends "sentry/layout.html" %}
+
+{% load i18n %}
+
+{% block title %}{{ project.name }} | {{ block.super }}{% endblock %}
+
+{% block page_header %}
+    <form action="{% url 'sentry-search' project.team.slug project.slug %}" class="navbar-search pull-right" id="search">
+        <input type="hidden" name="sort" value="{% if sort %}{{ sort }}{% endif %}"/>
+        <input type="text" name="q" value="{% if query %}{{ query }}{% endif %}" placeholder="{% if HAS_SEARCH %}{% trans "Search query or event ID" %}{% else %}{% trans "Event ID" %}{% endif %}" class="search-query pull-left" />
+    </form>
+    {{ block.super }}
+    <ul class="nav nav-tabs">
+        <li class="active">
+            <a href="{% url 'sentry-stream' project.team.slug project.slug %}">{% trans "Stream" %}</a>
+        </li>
+        {% if can_admin_team %}
+            <li>
+                <a href="{% url 'sentry-manage-project' project.team.slug project.slug %}">{% trans "Settings" %}</a>
+            </li>
+        {% endif %}
+    </ul>
+{% endblock %}
diff --git a/src/sentry/templates/sentry/groups/group_list.html b/src/sentry/templates/sentry/groups/group_list.html
index 80fabd76be..236a93a99b 100644
--- a/src/sentry/templates/sentry/groups/group_list.html
+++ b/src/sentry/templates/sentry/groups/group_list.html
@@ -1,24 +1,11 @@
-{% extends "sentry/layout.html" %}
+{% extends "sentry/bases/stream.html" %}
 
-{% load url from future %}
 {% load i18n %}
 {% load sentry_helpers %}
 {% load sentry_plugins %}
 
 {% block title %}{{ project.name }} | {{ block.super }}{% endblock %}
 
-{% block breadcrumb %}
-    {{ block.super }}
-{% endblock %}
-
-{% block page_header %}
-    <form action="{% url 'sentry-search' project.team.slug project.slug %}" class="navbar-search pull-right" id="search">
-        <input type="hidden" name="sort" value="{% if sort %}{{ sort }}{% endif %}"/>
-        <input type="text" name="q" value="{% if query %}{{ query }}{% endif %}" placeholder="{% if HAS_SEARCH %}{% trans "Search query or event ID" %}{% else %}{% trans "Event ID" %}{% endif %}" class="search-query pull-left" />
-    </form>
-    {{ block.super }}
-{% endblock %}
-
 {% block sidebar %}
     <div id="chart" class="chart" data-api-url="{% url 'sentry-api-chart' project.team.slug %}" data-days="1">
         <div class="sparkline">
diff --git a/src/sentry/templates/sentry/layout.html b/src/sentry/templates/sentry/layout.html
index 9ef25b4fac..404f60ce22 100644
--- a/src/sentry/templates/sentry/layout.html
+++ b/src/sentry/templates/sentry/layout.html
@@ -62,16 +62,6 @@
                                 </a>
                             </div>
                         {% endif %}
-                        {% if project %}
-                            <ul class="nav nav-tabs">
-                                <li class="active">
-                                    <a href="{% url 'sentry-stream' project.team.slug project.slug %}">{% trans "Stream" %}</a>
-                                </li>
-                                {% if can_admin_team %}
-                                    <li><a href="{% url 'sentry-manage-project' project.team.slug project.slug %}" class="{% trans "Settings" %}">{% trans "Settings" %}</a></li>
-                                {% endif %}
-                            </ul>
-                        {% endif %}
                     {% endblock %}
                 </div>
             </section>
diff --git a/src/sentry/templates/sentry/projects/manage.html b/src/sentry/templates/sentry/projects/manage.html
index a4fb7d4c30..e671e8eff0 100644
--- a/src/sentry/templates/sentry/projects/manage.html
+++ b/src/sentry/templates/sentry/projects/manage.html
@@ -1,6 +1,5 @@
-{% extends "sentry/layout.html" %}
+{% extends "sentry/bases/settings.html" %}
 
-{% load url from future %}
 {% load crispy_forms_tags %}
 {% load i18n %}
 {% load sentry_helpers %}
diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index ba558f7fec..677f6d73ac 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -171,7 +171,6 @@ def render_with_group_context(group, template, context, request=None, event=None
         'project': group.project,
         'group': group,
         'can_admin_event': can_admin_group(request.user, group),
-        'SECTION': 'events',
     })
 
     if event:
@@ -231,7 +230,6 @@ def dashboard(request, team):
     return render_to_response('sentry/dashboard.html', {
         'team': team,
         'project_list': project_list,
-        'SECTION': 'events',
     }, request)
 
 
@@ -246,7 +244,6 @@ def wall_display(request, team):
     return render_to_response('sentry/wall.html', {
         'team': team,
         'project_list': project_list,
-        'SECTION': 'events',
     }, request)
 
 
@@ -274,7 +271,6 @@ def search(request, team, project):
             return render_to_response('sentry/invalid_message_id.html', {
                 'team': team,
                 'project': project,
-                'SECTION': 'events',
             }, request)
         else:
             return HttpResponseRedirect(reverse('sentry-group', kwargs={
@@ -295,7 +291,6 @@ def search(request, team, project):
                 return render_to_response('sentry/invalid_message_id.html', {
                     'team': team,
                     'project': project,
-                    'SECTION': 'events',
                 }, request)
             else:
                 return HttpResponseRedirect(reverse('sentry-group-event', kwargs={
@@ -333,7 +328,6 @@ def search(request, team, project):
         'query': query,
         'sort': sort,
         'sort_label': sort_label,
-        'SECTION': 'events',
     }, request)
 
 
@@ -369,7 +363,6 @@ def group_list(request, team, project):
         'filters': response['filters'],
         'SORT_OPTIONS': SORT_OPTIONS,
         'HAS_TRENDING': has_trending(),
-        'SECTION': 'events',
     }, request)
 
 
diff --git a/src/sentry/web/frontend/projects.py b/src/sentry/web/frontend/projects.py
index fad5276065..d49c6f7dce 100644
--- a/src/sentry/web/frontend/projects.py
+++ b/src/sentry/web/frontend/projects.py
@@ -32,8 +32,6 @@ def get_started(request, team, project):
     return render_to_response('sentry/get_started.html', {
         'project': project,
         'team': project.team,
-        'SECTION': 'team',
-        'SUBSECTION': 'projects'
     }, request)
 
 
@@ -66,8 +64,6 @@ def remove_project(request, team, project):
         'team': team,
         'form': form,
         'project': project,
-        'SECTION': 'team',
-        'SUBSECTION': 'projects'
     })
 
     return render_to_response('sentry/projects/remove.html', context, request)
@@ -105,8 +101,6 @@ def manage_project(request, team, project):
         'page': 'details',
         'form': form,
         'project': project,
-        'SECTION': 'team',
-        'SUBSECTION': 'projects'
     })
 
     return render_to_response('sentry/projects/manage.html', context, request)
@@ -134,8 +128,6 @@ def manage_project_keys(request, team, project):
         'project': project,
         'key_list': key_list,
         'can_add_key': can_add_project_key(request.user, project),
-        'SECTION': 'team',
-        'SUBSECTION': 'projects'
     })
 
     return render_to_response('sentry/projects/keys.html', context, request)
@@ -201,8 +193,6 @@ def manage_project_tags(request, team, project):
         'page': 'tags',
         'project': project,
         'form': form,
-        'SECTION': 'team',
-        'SUBSECTION': 'projects'
     }
     return render_to_response('sentry/projects/manage_tags.html', context, request)
 
@@ -260,8 +250,6 @@ def notification_settings(request, team, project):
         'alert_form': alert_form,
         'tag_forms': tag_forms,
         'page': 'notifications',
-        'SECTION': 'team',
-        'SUBSECTION': 'projects',
     })
     return render_to_response('sentry/projects/notifications.html', context, request)
 
@@ -290,8 +278,6 @@ def manage_plugins(request, team, project):
         'team': team,
         'page': 'plugins',
         'project': project,
-        'SECTION': 'team',
-        'SUBSECTION': 'projects'
     })
 
     return render_to_response('sentry/projects/plugins/list.html', context, request)
@@ -333,8 +319,6 @@ def configure_project_plugin(request, team, project, slug):
         'project': project,
         'plugin': plugin,
         'plugin_is_enabled': plugin.is_enabled(project),
-        'SECTION': 'team',
-        'SUBSECTION': 'projects'
     })
 
     return render_to_response('sentry/projects/plugins/configure.html', context, request)
