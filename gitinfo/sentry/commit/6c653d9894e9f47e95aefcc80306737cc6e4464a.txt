commit 6c653d9894e9f47e95aefcc80306737cc6e4464a
Author: David Cramer <dcramer@gmail.com>
Date:   Sun May 31 13:23:10 2015 +0200

    Basic functional user nav

diff --git a/src/sentry/static/sentry/app/components/projectHeader.jsx b/src/sentry/static/sentry/app/components/projectHeader.jsx
index 0ed177ffa5..4758b984de 100644
--- a/src/sentry/static/sentry/app/components/projectHeader.jsx
+++ b/src/sentry/static/sentry/app/components/projectHeader.jsx
@@ -5,6 +5,11 @@ var Router = require("react-router");
 
 var Breadcrumbs = require("./breadcrumbs");
 var ConfigStore = require("../stores/configStore");
+var DropdownLink = require("./dropdownLink");
+var Gravatar = require("./gravatar");
+var MenuItem = require("./menuItem");
+var PropTypes = require("../proptypes");
+var UserInfo = require("./userInfo");
 
 var DateRangePicker = React.createClass({
   render() {
@@ -19,6 +24,39 @@ var DateRangePicker = React.createClass({
   }
 });
 
+
+var UserNav = React.createClass({
+  propTypes: {
+    user: PropTypes.User.isRequired
+  },
+
+  shouldComponentUpdate(nextProps, nextState) {
+    return nextProps.user.id !== this.props.user.id;
+  },
+
+  render() {
+    var user = this.props.user;
+    var urlPrefix = ConfigStore.get('urlPrefix');
+
+    var title = (
+      <span>
+        <Gravatar email={user.email} className="avatar" />
+        <UserInfo user={user} className="user-name" />
+      </span>
+    );
+
+    return (
+      <DropdownLink
+          topLevelClasses={this.props.className}
+          menuClasses="dropdown-menu-right"
+          title={title}>
+        <MenuItem href={urlPrefix + '/account/settings/'}>Account</MenuItem>
+        <MenuItem href={urlPrefix + '/auth/logout/'}>Sign out</MenuItem>
+      </DropdownLink>
+    );
+  }
+});
+
 var ProjectHeader = React.createClass({
   contextTypes: {
     router: React.PropTypes.func
@@ -28,16 +66,15 @@ var ProjectHeader = React.createClass({
     var routeParams = this.context.router.getCurrentParams();
     var navSection = this.props.activeSection;
     var urlPrefix = ConfigStore.get('urlPrefix');
+    var user = ConfigStore.get('user');
 
     return (
       <div>
         <header>
           <div className="container">
-            <div className="pull-right">
-              <div className="dropdown user-nav">
-                <a className="dropdown-toggle" href="#">Dcramer <span className="icon-arrow-down"></span></a>
-              </div>
-            </div>
+            {user &&
+              <UserNav user={user} className="pull-right" />
+            }
             <a href="/"><span className="icon-sentry-logo"></span></a>
             <div className="dropdown org-selector">
               <a className="dropdown-toggle" href="#">Sentry <span className="icon-arrow-down"></span></a>
