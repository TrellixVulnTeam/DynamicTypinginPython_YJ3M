commit 2aba728857be58b5b0f0fe8785f9058396cd5a78
Author: Eric Feng <erichfeng@gmail.com>
Date:   Wed Feb 17 11:48:51 2016 -0800

    fixing the code that broke the project id tests

diff --git a/src/sentry/web/frontend/react_page.py b/src/sentry/web/frontend/react_page.py
index de792591b0..8fd6c273b9 100644
--- a/src/sentry/web/frontend/react_page.py
+++ b/src/sentry/web/frontend/react_page.py
@@ -4,8 +4,9 @@ from django.middleware.csrf import get_token as get_csrf_token
 from django.http import HttpResponse
 from django.template import loader, Context
 
+from sentry.models import Project
 from sentry.signals import first_event_pending
-from sentry.web.frontend.base import BaseView, ProjectView, OrganizationView
+from sentry.web.frontend.base import BaseView, OrganizationView
 
 
 class ReactMixin(object):
@@ -30,11 +31,8 @@ class ReactMixin(object):
 # generic
 class ReactPageView(OrganizationView, ReactMixin):
     def handle(self, request, **kwargs):
-        return self.handle_react(request)
-
-class ReactProjectPageView(ProjectView, ReactMixin):
-    def handle(self, request, organization, team, project, **kwargs):
-        if request.GET.get('onboarding'):
+        if 'project_id' in kwargs and request.GET.get('onboarding'):
+            project = Project.objects.filter(slug=kwargs['project_id']).first()
             first_event_pending.send(instance=project, user=request.user, sender=self)
         return self.handle_react(request)
 
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index f0b15e500a..cf5315c5e9 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -60,7 +60,7 @@ from sentry.web.frontend.project_rule_edit import ProjectRuleEditView
 from sentry.web.frontend.project_rule_remove import ProjectRuleRemoveView
 from sentry.web.frontend.project_settings import ProjectSettingsView
 from sentry.web.frontend.project_tags import ProjectTagsView
-from sentry.web.frontend.react_page import GenericReactPageView, ReactPageView, ReactProjectPageView
+from sentry.web.frontend.react_page import GenericReactPageView, ReactPageView
 from sentry.web.frontend.release_webhook import ReleaseWebhookView
 from sentry.web.frontend.remove_account import RemoveAccountView
 from sentry.web.frontend.remove_organization import RemoveOrganizationView
@@ -369,7 +369,7 @@ urlpatterns += patterns(
     # Keep named URL for for things using reverse
     url(r'^(?P<organization_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/issues/(?P<group_id>\d+)/$', react_page_view,
         name='sentry-group'),
-    url(r'^(?P<organization_slug>[\w_-]+)/(?P<project_slug>[\w_-]+)/$', ReactProjectPageView.as_view(),
+    url(r'^(?P<organization_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/$', react_page_view,
         name='sentry-stream'),
 
     url(r'^(?P<organization_slug>[\w_-]+)/(?P<project_slug>[\w_-]+)/(?:group|issues)/(?P<group_id>\d+)/events/(?P<event_id>\d+)/replay/$', ReplayEventView.as_view(),
