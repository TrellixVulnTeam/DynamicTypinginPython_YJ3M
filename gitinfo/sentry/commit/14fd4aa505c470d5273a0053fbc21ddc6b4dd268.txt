commit 14fd4aa505c470d5273a0053fbc21ddc6b4dd268
Author: Stephen Cefali <scefali@sentry.io>
Date:   Mon Jun 22 08:47:01 2020 -0700

    fix(json): adds serializer for translations (#19468)

diff --git a/src/sentry/utils/json.py b/src/sentry/utils/json.py
index b8c05444ae..8042b3aff3 100644
--- a/src/sentry/utils/json.py
+++ b/src/sentry/utils/json.py
@@ -9,8 +9,10 @@ import six
 import decimal
 
 from bitfield.types import BitHandler
-from django.utils.timezone import is_aware
+from django.utils.encoding import force_text
+from django.utils.functional import Promise
 from django.utils.html import mark_safe
+from django.utils.timezone import is_aware
 
 
 def better_default_encoder(o):
@@ -37,6 +39,9 @@ def better_default_encoder(o):
         return int(o)
     elif callable(o):
         return "<function>"
+    # seralization for certain Django objects here: https://docs.djangoproject.com/en/1.8/topics/serialization/
+    elif isinstance(o, Promise):
+        return force_text(o)
     raise TypeError(repr(o) + " is not JSON serializable")
 
 
diff --git a/tests/sentry/utils/json/tests.py b/tests/sentry/utils/json/tests.py
index b5cfbe3a94..783bcf3c59 100644
--- a/tests/sentry/utils/json/tests.py
+++ b/tests/sentry/utils/json/tests.py
@@ -5,6 +5,7 @@ from __future__ import absolute_import
 import datetime
 import uuid
 
+from django.utils.translation import ugettext_lazy as _
 from enum import Enum
 
 from unittest import TestCase
@@ -48,3 +49,6 @@ class JSONTest(TestCase):
         enum = Enum("foo", "a b c")
         res = enum.a
         self.assertEquals(json.dumps(res), "1")
+
+    def test_translation(self):
+        self.assertEquals(json.dumps(_("word")), u'"word"')
