commit 631cd9096bd9811a046a472bb0aa8b573e86e1f1
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jan 19 11:27:32 2017 -0800

    [releases] move release-emails behind project feature (#4790)

diff --git a/src/sentry/features/__init__.py b/src/sentry/features/__init__.py
index d4fc85d443..e85131eb7c 100644
--- a/src/sentry/features/__init__.py
+++ b/src/sentry/features/__init__.py
@@ -16,7 +16,7 @@ default_manager.add('organizations:repos', OrganizationFeature)  # NOQA
 default_manager.add('organizations:release-commits', OrganizationFeature)  # NOQA
 default_manager.add('projects:global-events', ProjectFeature)  # NOQA
 default_manager.add('projects:plugins', ProjectPluginFeature)  # NOQA
-default_manager.add('workflow:release-emails')
+default_manager.add('workflow:release-emails', ProjectFeature)  # NOQA
 default_manager.add('projects:sample-events', ProjectFeature)  # NOQA
 
 # expose public api
diff --git a/src/sentry/plugins/sentry_mail/activity/release.py b/src/sentry/plugins/sentry_mail/activity/release.py
index c5dba5b402..639a782162 100644
--- a/src/sentry/plugins/sentry_mail/activity/release.py
+++ b/src/sentry/plugins/sentry_mail/activity/release.py
@@ -51,7 +51,7 @@ class ReleaseActivityEmail(ActivityEmail):
                 sentry_orgmember_set__teams=project.team,
                 is_active=True,
             ).distinct()
-            if features.has('workflow:release-emails', actor=user)
+            if features.has('workflow:release-emails', project=self.project, actor=user)
         }
 
     def get_context(self):
