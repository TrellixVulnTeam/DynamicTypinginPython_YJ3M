commit 016e2f9e425ea4965887d0693f013af190daba98
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Thu Jul 19 14:40:00 2018 -0700

    fix(discover): Prevent KeyError if fields is not present (#9112)

diff --git a/src/sentry/api/endpoints/organization_discover.py b/src/sentry/api/endpoints/organization_discover.py
index 051f18e23c..37e0944041 100644
--- a/src/sentry/api/endpoints/organization_discover.py
+++ b/src/sentry/api/endpoints/organization_discover.py
@@ -75,7 +75,7 @@ class DiscoverSerializer(serializers.Serializer):
             (
                 re.search(pattern, field).group(1)
                 for field
-                in attrs[source] or []
+                in attrs.get(source, [])
                 if re.match(pattern, field)
             ),
             None
