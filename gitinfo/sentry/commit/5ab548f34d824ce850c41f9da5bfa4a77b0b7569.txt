commit 5ab548f34d824ce850c41f9da5bfa4a77b0b7569
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue May 31 18:19:01 2016 +0200

    Fixed some issues with dsyms for mysql

diff --git a/src/sentry/models/dsymfile.py b/src/sentry/models/dsymfile.py
index a49635f69d..97d3a454a1 100644
--- a/src/sentry/models/dsymfile.py
+++ b/src/sentry/models/dsymfile.py
@@ -79,7 +79,7 @@ class DSymSDKManager(BaseManager):
             args.append(sdk)
         cur = connection.cursor()
         cur.execute('''
-   select distinct k.*, count(b.*) as bundle_count, o.cpu_name
+   select distinct k.*, count(*) as bundle_count, o.cpu_name
               from sentry_dsymsdk k,
                    sentry_dsymbundle b,
                    sentry_dsymobject o
diff --git a/src/sentry/runner/commands/dsym.py b/src/sentry/runner/commands/dsym.py
index ab558d53c1..e19ffe6687 100644
--- a/src/sentry/runner/commands/dsym.py
+++ b/src/sentry/runner/commands/dsym.py
@@ -7,6 +7,7 @@ sentry.runner.commands.dsym
 """
 from __future__ import absolute_import
 
+import sys
 import uuid
 import json
 import click
@@ -136,6 +137,10 @@ def import_system_symbols(bundles, threads, trim_symbols, no_demangle):
     preprocessed.
     """
     import zipfile
+    from sentry.utils.db import is_mysql
+    if threads != 1 and is_mysql():
+        print >> sys.stderr, 'warning: disable threading for mysql'
+        threads = 1
     for path in bundles:
         with zipfile.ZipFile(path) as f:
             sdk_info = json.load(f.open('sdk_info'))
