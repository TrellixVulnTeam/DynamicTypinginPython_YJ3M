commit 08ed34ffec66d481e22675e89e916b0d7626093e
Author: Priscila Oliveira <priscilawebdev@gmail.com>
Date:   Fri Jun 5 16:02:55 2020 +0200

    fix(pii): Fixed  double click source suggestion (#19203)

diff --git a/src/sentry/static/sentry/app/views/settings/components/dataPrivacyRules/dataPrivacyRulesForm/source.tsx b/src/sentry/static/sentry/app/views/settings/components/dataPrivacyRules/dataPrivacyRulesForm/source.tsx
index a274db3f94..7df8117d09 100644
--- a/src/sentry/static/sentry/app/views/settings/components/dataPrivacyRules/dataPrivacyRulesForm/source.tsx
+++ b/src/sentry/static/sentry/app/views/settings/components/dataPrivacyRules/dataPrivacyRulesForm/source.tsx
@@ -44,13 +44,13 @@ class Source extends React.Component<Props, State> {
 
   componentDidMount() {
     this.loadFieldValues(this.props.value);
-    this.hideSuggestions();
+    this.toggleSuggestions(false);
   }
 
   componentDidUpdate(prevProps: Props) {
     if (prevProps.suggestions !== this.props.suggestions) {
       this.loadFieldValues(this.props.value);
-      this.hideSuggestions();
+      this.toggleSuggestions(false);
     }
 
     if (
@@ -101,14 +101,6 @@ class Source extends React.Component<Props, State> {
       s => s.value.toLowerCase().indexOf(value.toLowerCase()) > -1
     );
 
-    const showSuggestions = !(
-      filteredSuggestions.length === 1 && filteredSuggestions[0].value === value
-    );
-
-    this.setState({
-      showSuggestions,
-    });
-
     return filteredSuggestions;
   };
 
@@ -177,12 +169,6 @@ class Source extends React.Component<Props, State> {
     return this.getFilteredSuggestions(lastFieldValue?.value, lastFieldValue?.type);
   };
 
-  hideSuggestions = () => {
-    this.setState({
-      showSuggestions: false,
-    });
-  };
-
   loadFieldValues = (newValue: string) => {
     const fieldValues: Array<SourceSuggestion | Array<SourceSuggestion>> = [];
 
@@ -356,6 +342,11 @@ class Source extends React.Component<Props, State> {
     const {keyCode} = event;
     const {activeSuggestion, suggestions} = this.state;
 
+    if (keyCode === 8 || keyCode === 32) {
+      this.toggleSuggestions(true);
+      return;
+    }
+
     if (keyCode === 13) {
       this.handleClickSuggestionItem(suggestions[activeSuggestion])();
       return;
@@ -382,12 +373,16 @@ class Source extends React.Component<Props, State> {
     }
   };
 
-  handleFocus = () => {
+  toggleSuggestions = (showSuggestions: boolean) => {
     this.setState({
-      showSuggestions: true,
+      showSuggestions,
     });
   };
 
+  handleFocus = () => {
+    this.toggleSuggestions(true);
+  };
+
   render() {
     const {error, disabled, value, onBlur} = this.props;
     const {showSuggestions, suggestions, activeSuggestion, hideCaret, help} = this.state;
