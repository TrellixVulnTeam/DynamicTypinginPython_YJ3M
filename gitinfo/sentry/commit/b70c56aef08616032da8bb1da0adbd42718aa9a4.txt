commit b70c56aef08616032da8bb1da0adbd42718aa9a4
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jan 8 13:56:13 2019 -0800

    test: Add coverage for breadcrumb message scrubbing

diff --git a/tests/sentry/utils/test_data_scrubber.py b/tests/sentry/utils/test_data_scrubber.py
index bad4cccc23..1f86261397 100644
--- a/tests/sentry/utils/test_data_scrubber.py
+++ b/tests/sentry/utils/test_data_scrubber.py
@@ -442,3 +442,17 @@ class SensitiveDataFilterTest(TestCase):
         assert 'csp' in data
         csp = data['csp']
         assert csp['blocked_uri'] == 'https://example.com/?foo=[Filtered]&bar=baz'
+
+    def test_breadcrumb_message(self):
+        data = {
+            'breadcrumbs': {
+                'values': [{
+                    'message': "SELECT session_key FROM django_session WHERE session_key = 'abcdefg'",
+                }],
+            },
+        }
+
+        proc = SensitiveDataFilter(fields=['session_key'])
+        proc.apply(data)
+
+        assert data['breadcrumbs']['values'][0]['message'] == FILTER_MASK
