commit 222d865b5d35b066ac640673598377905bcd61d3
Author: Matej Minar <matej.minar@sentry.io>
Date:   Mon Jun 15 10:26:23 2020 +0200

    feat(ui): Replace crash free progress rings with icons (#19273)

diff --git a/src/sentry/static/sentry/app/views/releasesV2/list/crashFree.tsx b/src/sentry/static/sentry/app/views/releasesV2/list/crashFree.tsx
new file mode 100644
index 0000000000..6f7cdd3fb8
--- /dev/null
+++ b/src/sentry/static/sentry/app/views/releasesV2/list/crashFree.tsx
@@ -0,0 +1,44 @@
+import React from 'react';
+import styled from '@emotion/styled';
+
+import space from 'app/styles/space';
+import {IconFire, IconWarning, IconCheckmark} from 'app/icons';
+
+import {displayCrashFreePercent} from '../utils';
+
+const CRASH_FREE_DANGER_THRESHOLD = 98;
+const CRASH_FREE_WARNING_THRESHOLD = 99.5;
+
+const getIcon = (percent: number) => {
+  if (percent < CRASH_FREE_DANGER_THRESHOLD) {
+    return <IconFire color="red400" />;
+  }
+
+  if (percent < CRASH_FREE_WARNING_THRESHOLD) {
+    return <IconWarning color="yellow400" />;
+  }
+
+  return <IconCheckmark isCircled color="green400" />;
+};
+
+type Props = {
+  percent: number;
+};
+
+const CrashFree = ({percent}: Props) => {
+  return (
+    <Wrapper>
+      {getIcon(percent)}
+      {displayCrashFreePercent(percent)}
+    </Wrapper>
+  );
+};
+
+const Wrapper = styled('div')`
+  display: inline-grid;
+  grid-auto-flow: column;
+  grid-gap: ${space(0.75)};
+  align-items: center;
+`;
+
+export default CrashFree;
diff --git a/src/sentry/static/sentry/app/views/releasesV2/list/releaseHealth.tsx b/src/sentry/static/sentry/app/views/releasesV2/list/releaseHealth.tsx
index 714e0d22e3..80871b3fea 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/list/releaseHealth.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/list/releaseHealth.tsx
@@ -9,7 +9,6 @@ import GlobalSelectionLink from 'app/components/globalSelectionLink';
 import {PanelHeader, PanelBody, PanelItem} from 'app/components/panels';
 import {t, tn} from 'app/locale';
 import space from 'app/styles/space';
-import ProgressRing from 'app/components/progressRing';
 import Count from 'app/components/count';
 import {defined} from 'app/utils';
 import theme from 'app/utils/theme';
@@ -21,17 +20,13 @@ import Placeholder from 'app/components/placeholder';
 import Link from 'app/components/links/link';
 
 import HealthStatsChart from './healthStatsChart';
-import {
-  displayCrashFreePercent,
-  convertAdoptionToProgress,
-  getCrashFreePercentColor,
-  getReleaseNewIssuesUrl,
-} from '../utils';
+import {convertAdoptionToProgress, getReleaseNewIssuesUrl} from '../utils';
 import HealthStatsSubject, {StatsSubject} from './healthStatsSubject';
 import HealthStatsPeriod, {StatsPeriod} from './healthStatsPeriod';
 import AdoptionTooltip from './adoptionTooltip';
 import NotAvailable from './notAvailable';
 import ClippedHealthRows from './clippedHealthRows';
+import CrashFree from './crashFree';
 
 type Props = {
   release: Release;
@@ -133,7 +128,7 @@ const ReleaseHealth = ({
                             size={20}
                             thickness={5}
                             radius={0}
-                            palette={Array(10).fill(theme.green400)}
+                            palette={Array(10).fill(theme.purple500)}
                           />
                         </Tooltip>
                         <TextOverflow>
@@ -150,15 +145,7 @@ const ReleaseHealth = ({
                     {showPlaceholders ? (
                       <StyledPlaceholder width="60px" />
                     ) : defined(crashFreeUsers) ? (
-                      <React.Fragment>
-                        <StyledProgressRing
-                          progressColor={getCrashFreePercentColor}
-                          value={crashFreeUsers}
-                        />
-                        <ProgressRingCaption>
-                          {displayCrashFreePercent(crashFreeUsers)}
-                        </ProgressRingCaption>
-                      </React.Fragment>
+                      <CrashFree percent={crashFreeUsers} />
                     ) : (
                       <NotAvailable />
                     )}
@@ -168,15 +155,7 @@ const ReleaseHealth = ({
                     {showPlaceholders ? (
                       <StyledPlaceholder width="60px" />
                     ) : defined(crashFreeSessions) ? (
-                      <React.Fragment>
-                        <StyledProgressRing
-                          progressColor={getCrashFreePercentColor}
-                          value={crashFreeSessions}
-                        />
-                        <ProgressRingCaption>
-                          {displayCrashFreePercent(crashFreeSessions)}
-                        </ProgressRingCaption>
-                      </React.Fragment>
+                      <CrashFree percent={crashFreeSessions} />
                     ) : (
                       <NotAvailable />
                     )}
@@ -332,21 +311,11 @@ const StyledScoreBar = styled(ScoreBar)`
   margin-right: ${space(1)};
 `;
 
-const StyledProgressRing = styled(ProgressRing)`
-  position: relative;
-  top: ${space(0.5)};
-`;
-
-const ProgressRingCaption = styled('span')`
-  margin-left: ${space(1)};
-`;
-
 const ChartWrapper = styled('div')`
   flex: 1;
   g > .barchart-rect {
-    /* gray1 is too dark */
-    background: #c6becf;
-    fill: #c6becf;
+    background: ${p => p.theme.gray400};
+    fill: ${p => p.theme.gray400};
   }
 `;
 
diff --git a/src/sentry/static/sentry/app/views/releasesV2/utils/index.tsx b/src/sentry/static/sentry/app/views/releasesV2/utils/index.tsx
index 83d28c3b74..1a781292b3 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/utils/index.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/utils/index.tsx
@@ -5,11 +5,8 @@ import ConfigStore from 'app/stores/configStore';
 import OrganizationStore from 'app/stores/organizationStore';
 import {trackAnalyticsEvent} from 'app/utils/analytics';
 import {Client} from 'app/api';
-import ProgressRing from 'app/components/progressRing';
 import {stringifyQueryObject} from 'app/utils/tokenizeSearch';
 
-const CRASH_FREE_DANGER_THRESHOLD = 98;
-const CRASH_FREE_WARNING_THRESHOLD = 99.5;
 const RELEASES_VERSION_KEY = 'releases:version';
 
 export const switchReleasesVersion = (version: '1' | '2', orgId: string) => {
@@ -89,19 +86,6 @@ export const convertAdoptionToProgress = (
   numberOfProgressUnits = 10
 ): number => Math.ceil((percent * numberOfProgressUnits) / 100);
 
-type ProgressRingColorFn = React.ComponentProps<typeof ProgressRing>['progressColor'];
-export const getCrashFreePercentColor: ProgressRingColorFn = ({percent, theme}) => {
-  if (percent < CRASH_FREE_DANGER_THRESHOLD) {
-    return theme.red;
-  }
-
-  if (percent < CRASH_FREE_WARNING_THRESHOLD) {
-    return theme.yellow;
-  }
-
-  return theme.green400;
-};
-
 export const getReleaseNewIssuesUrl = (
   orgSlug: string,
   projectId: string | number | null,
