commit 38d2d44c9a6bdadb3d8f4cf5d8505343069c7b4d
Author: Ben Vinegar <benvinegar@users.noreply.github.com>
Date:   Wed Aug 31 17:15:23 2016 -0700

    Cleaner ui for assigning members to teams (#4055)

diff --git a/src/sentry/static/sentry/less/organization.less b/src/sentry/static/sentry/less/organization.less
index 4bf000c165..20e3cda2f1 100644
--- a/src/sentry/static/sentry/less/organization.less
+++ b/src/sentry/static/sentry/less/organization.less
@@ -486,6 +486,7 @@ table.project-list {
   }
 }
 
+
 /**
 * Stats Column
 * ============================================================================
@@ -783,6 +784,19 @@ table.project-list {
   }
 }
 
+/**
+* Member settings / invitations
+* ============================================================================
+*/
+
+.team-choices .team-slug {
+  display: block;
+  font-style: italic;
+  font-weight: regular;
+  color: @gray-light;
+}
+
+
 /**
 * Medium to small screens
 * ============================================================================
diff --git a/src/sentry/templates/sentry/organization-member-settings.html b/src/sentry/templates/sentry/organization-member-settings.html
index b59144ae4c..2899309956 100644
--- a/src/sentry/templates/sentry/organization-member-settings.html
+++ b/src/sentry/templates/sentry/organization-member-settings.html
@@ -105,13 +105,14 @@
       </div>
       <div class="box-content with-padding">
         <fieldset class="team-choices row">
-          {% for team_id, team_name in form.teams.field.choices %}
+          {% for team in all_teams %}
             <div class="control-group col-md-4">
               <div class="controls">
                 <label class="checkbox">
-                  <input type="checkbox" name="teams" value="{{ team_id }}"
-                         class="checkboxinput"{% if team_id in form.teams.value %} checked="checked"{% endif %}>
-                    {{ team_name }}
+                  <input type="checkbox" name="teams" value="{{ team.id }}"
+                         class="checkboxinput"{% if team.id in form.teams.value %} checked="checked"{% endif %}>
+                    {{ team.name }}
+                    <span class="team-slug">{{ team.slug }}</span>
                   </label>
               </div>
             </div>
diff --git a/src/sentry/web/forms/edit_organization_member.py b/src/sentry/web/forms/edit_organization_member.py
index a367b66fec..70f5921dc6 100644
--- a/src/sentry/web/forms/edit_organization_member.py
+++ b/src/sentry/web/forms/edit_organization_member.py
@@ -22,6 +22,7 @@ class EditOrganizationMemberForm(forms.ModelForm):
 
     def __init__(self, *args, **kwargs):
         allowed_roles = kwargs.pop('allowed_roles')
+        all_teams = kwargs.pop('all_teams')
 
         super(EditOrganizationMemberForm, self).__init__(*args, **kwargs)
 
@@ -29,9 +30,8 @@ class EditOrganizationMemberForm(forms.ModelForm):
             (r.id, r.name)
             for r in allowed_roles
         )
-        self.fields['teams'].queryset = Team.objects.filter(
-            organization=self.instance.organization,
-        )
+
+        self.fields['teams'].queryset = all_teams
 
     def save(self, actor, organization, ip_address=None):
         om = super(EditOrganizationMemberForm, self).save()
diff --git a/src/sentry/web/frontend/organization_member_settings.py b/src/sentry/web/frontend/organization_member_settings.py
index 7b969cf548..54a05445c1 100644
--- a/src/sentry/web/frontend/organization_member_settings.py
+++ b/src/sentry/web/frontend/organization_member_settings.py
@@ -13,10 +13,11 @@ from sentry.web.helpers import get_login_url
 
 
 class OrganizationMemberSettingsView(OrganizationView):
-    def get_form(self, request, member, allowed_roles):
+    def get_form(self, request, member, all_teams, allowed_roles):
         return EditOrganizationMemberForm(
             data=request.POST or None,
             instance=member,
+            all_teams=all_teams,
             allowed_roles=allowed_roles,
             initial={
                 'role': member.role,
@@ -25,7 +26,7 @@ class OrganizationMemberSettingsView(OrganizationView):
                         organizationmember=member,
                     ).values('team'),
                 ),
-            }
+            },
         )
 
     def resend_invite(self, request, organization, member, regen=False):
@@ -96,7 +97,11 @@ class OrganizationMemberSettingsView(OrganizationView):
         if member.user == request.user or not can_admin:
             return self.view_member(request, organization, member)
 
-        form = self.get_form(request, member, allowed_roles)
+        all_teams = Team.objects.filter(
+            organization=organization,
+        )
+
+        form = self.get_form(request, member, all_teams, allowed_roles)
         if form.is_valid():
             member = form.save(request.user, organization, request.META['REMOTE_ADDR'])
 
@@ -115,7 +120,8 @@ class OrganizationMemberSettingsView(OrganizationView):
             'role_list': [
                 (r, r in allowed_roles)
                 for r in roles.get_all()
-            ]
+            ],
+            'all_teams': all_teams
         }
 
         return self.respond('sentry/organization-member-settings.html', context)
