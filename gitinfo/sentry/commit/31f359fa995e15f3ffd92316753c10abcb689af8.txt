commit 31f359fa995e15f3ffd92316753c10abcb689af8
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jan 24 13:31:06 2013 -0800

    Add project-wide resolved event when clear endpoint is hit

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 749837fc5d..0cc20cf5f3 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -467,7 +467,14 @@ def clear(request, project):
 
     # TODO: should we record some kind of global event in Activity?
     event_list = response['event_list']
-    event_list.update(status=STATUS_RESOLVED)
+    happened = event_list.update(status=STATUS_RESOLVED)
+
+    if happened:
+        Activity.objects.create(
+            project=project,
+            type=Activity.SET_RESOLVED,
+            user=request.user,
+        )
 
     data = []
     response = HttpResponse(json.dumps(data))
