commit 4c7939bf5fe4b1199b6e448eac327f69194ffb31
Author: Matej Minar <matej.minar@sentry.io>
Date:   Mon May 4 16:00:28 2020 +0200

    feat(ui): Releases v2 feedback improvements (#18590)
    
    -removed artifacts will be moving to settings message
    -disabled delete button for releases with health data
    -files changed not collapsed

diff --git a/src/sentry/static/sentry/app/components/repositoryFileSummary.jsx b/src/sentry/static/sentry/app/components/repositoryFileSummary.jsx
index ebd25ee5f1..816b741b58 100644
--- a/src/sentry/static/sentry/app/components/repositoryFileSummary.jsx
+++ b/src/sentry/static/sentry/app/components/repositoryFileSummary.jsx
@@ -26,9 +26,14 @@ class RepositoryFileSummary extends React.Component {
   static propTypes = {
     fileChangeSummary: PropTypes.object,
     repository: PropTypes.string,
+    collapsable: PropTypes.bool,
+    maxWhenCollapsed: PropTypes.number,
   };
 
-  static MAX_WHEN_COLLAPSED = 5;
+  static defaultProps = {
+    collapsable: true,
+    maxWhenCollapsed: 5,
+  };
 
   constructor(...args) {
     super(...args);
@@ -45,16 +50,15 @@ class RepositoryFileSummary extends React.Component {
   };
 
   render() {
-    const {repository, fileChangeSummary} = this.props;
-    const MAX = RepositoryFileSummary.MAX_WHEN_COLLAPSED;
+    const {repository, fileChangeSummary, collapsable, maxWhenCollapsed} = this.props;
     let files = Object.keys(fileChangeSummary);
     const fileCount = files.length;
     files.sort();
-    if (this.state.collapsed && fileCount > MAX) {
-      files = files.slice(0, MAX);
+    if (this.state.collapsed && collapsable && fileCount > maxWhenCollapsed) {
+      files = files.slice(0, maxWhenCollapsed);
     }
     const numCollapsed = fileCount - files.length;
-    const canCollapse = fileCount > MAX;
+    const canCollapse = collapsable && fileCount > maxWhenCollapsed;
     return (
       <Container>
         <h5>
diff --git a/src/sentry/static/sentry/app/views/releasesV2/detail/artifacts/index.tsx b/src/sentry/static/sentry/app/views/releasesV2/detail/artifacts/index.tsx
index 2f507d2ec2..f5eb5175ee 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/detail/artifacts/index.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/detail/artifacts/index.tsx
@@ -2,7 +2,6 @@ import React from 'react';
 import {RouteComponentProps} from 'react-router/lib/Router';
 
 import {t} from 'app/locale';
-import Alert from 'app/components/alert';
 import ReleaseArtifactsV1 from 'app/views/releases/detail/releaseArtifacts';
 import AsyncView from 'app/views/asyncView';
 import routeTitleGen from 'app/utils/routeTitle';
@@ -38,20 +37,12 @@ class ReleaseArtifacts extends AsyncView<Props> {
     const {params, location} = this.props;
 
     return (
-      <React.Fragment>
-        <Alert type="warning">
-          {t(
-            'We are working on improving this experience, therefore Artifacts will be moving to Settings soon.'
-          )}
-        </Alert>
-
-        <ReleaseArtifactsV1
-          params={params}
-          location={location}
-          projectId={project.slug}
-          smallEmptyMessage
-        />
-      </React.Fragment>
+      <ReleaseArtifactsV1
+        params={params}
+        location={location}
+        projectId={project.slug}
+        smallEmptyMessage
+      />
     );
   }
 }
diff --git a/src/sentry/static/sentry/app/views/releasesV2/detail/filesChanged/index.tsx b/src/sentry/static/sentry/app/views/releasesV2/detail/filesChanged/index.tsx
index 47f9dfffd1..5a9774b49c 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/detail/filesChanged/index.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/detail/filesChanged/index.tsx
@@ -70,6 +70,7 @@ class FilesChanged extends AsyncView<Props, State> {
               key={repository}
               repository={repository}
               fileChangeSummary={filesByRepository[repository]}
+              collapsable={false}
             />
           ))
         ) : (
diff --git a/src/sentry/static/sentry/app/views/releasesV2/detail/releaseActions.tsx b/src/sentry/static/sentry/app/views/releasesV2/detail/releaseActions.tsx
index e11e0df454..bcfeecb202 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/detail/releaseActions.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/detail/releaseActions.tsx
@@ -19,9 +19,10 @@ import {deleteRelease} from './utils';
 type Props = {
   orgId: string;
   version: string;
+  hasHealthData: boolean;
 };
 
-const ReleaseActions = ({orgId, version}: Props) => {
+const ReleaseActions = ({orgId, version, hasHealthData}: Props) => {
   const handleDelete = async () => {
     const redirectPath = `/organizations/${orgId}/releases/`;
     addLoadingMessage(t('Deleting Release...'));
@@ -50,8 +51,9 @@ const ReleaseActions = ({orgId, version}: Props) => {
             title={t(
               'You can only delete releases if they have no issues or health data.'
             )}
+            disabled={!hasHealthData}
           >
-            <Button icon={<IconDelete />} />
+            <Button icon={<IconDelete />} disabled={hasHealthData} />
           </Tooltip>
         </div>
       </Confirm>
diff --git a/src/sentry/static/sentry/app/views/releasesV2/detail/releaseHeader.tsx b/src/sentry/static/sentry/app/views/releasesV2/detail/releaseHeader.tsx
index dcecf332c7..d8e5be898c 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/detail/releaseHeader.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/detail/releaseHeader.tsx
@@ -87,7 +87,11 @@ const ReleaseHeader = ({location, orgId, release, deploys, project}: Props) => {
           <ReleaseStat label={t('New Issues')}>
             <Count value={newGroups} />
           </ReleaseStat>
-          <ReleaseActions version={version} orgId={orgId} />
+          <ReleaseActions
+            version={version}
+            orgId={orgId}
+            hasHealthData={healthData?.hasHealthData}
+          />
         </StatsWrapper>
       </Layout>
 
