commit 72649256a29baae4bb9deac1349dbf201802cf8b
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Thu Nov 1 11:35:36 2018 -0700

    fix(discover): Fix date format for conditions (#10375)
    
    Format dates in a way that Clickhouse can parse. Needs to exclude
    timezone information.

diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/conditions/utils.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/conditions/utils.jsx
index 6df94a984e..0cbce90a4c 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/conditions/utils.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/conditions/utils.jsx
@@ -101,7 +101,7 @@ export function getExternal(internal, columns) {
 
     if (type === 'datetime') {
       const date = moment.utc(external[2]);
-      external[2] = date.isValid() ? date.format() : null;
+      external[2] = date.isValid() ? date.format('YYYY-MM-DDTHH:mm:ss') : null;
     }
   }
 
diff --git a/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx b/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx
index 1c91adffc2..5954e554ac 100644
--- a/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx
+++ b/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx
@@ -52,7 +52,7 @@ describe('Conditions', function() {
     });
 
     // datetime fields are expanded
-    const expected = ['received', '=', '2018-05-05T00:00:00Z'];
+    const expected = ['received', '=', '2018-05-05T00:00:00'];
     expect(getExternal('received = 2018-05-05', COLUMNS)).toEqual(expected);
   });
 
