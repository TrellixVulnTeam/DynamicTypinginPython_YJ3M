commit bfb79080d738a6a57141cf12741d42c5c919cb22
Author: Mark Story <mark@sentry.io>
Date:   Thu May 9 12:54:58 2019 -0400

    fix(email) Add shim property for django18 compatibility (#13151)
    
    Django 1.8 expects that email objects have a `reply_to` attribute. By
    adding that attribute we can have forwards compatibility. The django 1.6
    implementation of EmailMultiAlternatives ignores the `reply_to`
    attribute (https://github.com/django/django/blob/1.6.11/django/core/mail/message.py)
    
    Fixes SENTRY-AP6

diff --git a/src/sentry/tasks/email.py b/src/sentry/tasks/email.py
index 0d4cf6ff3e..32a489b163 100644
--- a/src/sentry/tasks/email.py
+++ b/src/sentry/tasks/email.py
@@ -73,4 +73,13 @@ def process_inbound_email(mailfrom, group_id, payload):
     max_retries=None
 )
 def send_email(message):
+    # HACK(django18) Django 1.8 assumes that message objects have a reply_to attribute
+    # When a message is enqueued by django 1.6 we need to patch that property on
+    # so that the message can be converted to a stdlib one.
+    #
+    # See
+    # https://github.com/django/django/blob/c686dd8e6bb3817bcf04b8f13c025b4d3c3dc6dc/django/core/mail/message.py#L273-L274
+    if not hasattr(message, 'reply_to'):
+        message.reply_to = []
+
     send_messages([message])
