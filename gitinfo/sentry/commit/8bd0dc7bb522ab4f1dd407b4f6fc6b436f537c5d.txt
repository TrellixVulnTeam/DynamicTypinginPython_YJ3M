commit 8bd0dc7bb522ab4f1dd407b4f6fc6b436f537c5d
Author: Stephen Cefali <scefali@sentry.io>
Date:   Tue Apr 28 10:02:42 2020 -0700

    fix(integrations): handle case where Content-Type header is missing (#18493)

diff --git a/src/sentry/shared_integrations/client.py b/src/sentry/shared_integrations/client.py
index 702105da9c..7d4c112736 100644
--- a/src/sentry/shared_integrations/client.py
+++ b/src/sentry/shared_integrations/client.py
@@ -62,14 +62,14 @@ class BaseApiResponse(object):
 
         # Some APIs will return JSON with an invalid content-type, so we try
         # to decode it anyways
-        if "application/json" not in response.headers["Content-Type"]:
+        if "application/json" not in response.headers.get("Content-Type", ""):
             try:
                 data = json.loads(response.text, object_pairs_hook=OrderedDict)
             except (TypeError, ValueError):
                 if allow_text:
                     return TextApiResponse(response.text, response.headers, response.status_code)
                 raise UnsupportedResponseType(
-                    response.headers["Content-Type"], response.status_code
+                    response.headers.get("Content-Type", ""), response.status_code
                 )
         else:
             data = json.loads(response.text, object_pairs_hook=OrderedDict)
