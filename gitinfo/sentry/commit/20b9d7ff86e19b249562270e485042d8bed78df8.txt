commit 20b9d7ff86e19b249562270e485042d8bed78df8
Author: Alberto Leal <mail4alberto@gmail.com>
Date:   Thu May 14 19:31:54 2020 -0400

    fix(apm): Fix transaction summary button (#18844)

diff --git a/src/sentry/static/sentry/app/views/organizationGroupDetails/eventToolbar.jsx b/src/sentry/static/sentry/app/views/organizationGroupDetails/eventToolbar.jsx
index 9c6b957b47..016f3ffd5a 100644
--- a/src/sentry/static/sentry/app/views/organizationGroupDetails/eventToolbar.jsx
+++ b/src/sentry/static/sentry/app/views/organizationGroupDetails/eventToolbar.jsx
@@ -16,7 +16,7 @@ import SentryTypes from 'app/sentryTypes';
 import Tooltip from 'app/components/tooltip';
 import getDynamicText from 'app/utils/getDynamicText';
 import space from 'app/styles/space';
-import {transactionSummaryRouteWithEventView} from 'app/views/performance/transactionSummary/utils';
+import {transactionSummaryRouteWithQuery} from 'app/views/performance/transactionSummary/utils';
 
 const formatDateDelta = (reference, observed) => {
   const duration = moment.duration(Math.abs(+observed - +reference));
@@ -87,7 +87,7 @@ const GroupEventToolbar = createReactClass({
   },
 
   renderRelatedTransactionButton() {
-    const {organization, event, orgId} = this.props;
+    const {organization, event, orgId, location} = this.props;
 
     const orgFeatures = new Set(organization.features);
 
@@ -109,10 +109,11 @@ const GroupEventToolbar = createReactClass({
       return null;
     }
 
-    const to = transactionSummaryRouteWithEventView({
+    const to = transactionSummaryRouteWithQuery({
       orgSlug: orgId,
       transaction: transactionName,
       projectID: event.projectID,
+      query: location.query,
     });
 
     return (
diff --git a/src/sentry/static/sentry/app/views/performance/table.tsx b/src/sentry/static/sentry/app/views/performance/table.tsx
index 3afb2426d7..54813aa8e1 100644
--- a/src/sentry/static/sentry/app/views/performance/table.tsx
+++ b/src/sentry/static/sentry/app/views/performance/table.tsx
@@ -22,7 +22,7 @@ import {trackAnalyticsEvent} from 'app/utils/analytics';
 import {getAggregateAlias} from 'app/utils/discover/fields';
 import {getFieldRenderer} from 'app/utils/discover/fieldRenderers';
 
-import {transactionSummaryRouteWithEventView} from './transactionSummary/utils';
+import {transactionSummaryRouteWithQuery} from './transactionSummary/utils';
 import {GridBodyCell, GridBodyCellNumber, GridHeadCell} from './styles';
 
 export function getProjectID(
@@ -102,7 +102,7 @@ class Table extends React.Component<Props> {
       if (isFirstCell) {
         // the first column of the row should link to the transaction summary view
         const projectID = getProjectID(row, projects);
-        const target = transactionSummaryRouteWithEventView({
+        const target = transactionSummaryRouteWithQuery({
           orgSlug: organization.slug,
           transaction: String(row.transaction) || '',
           projectID,
diff --git a/src/sentry/static/sentry/app/views/performance/transactionSummary/breadcrumb.tsx b/src/sentry/static/sentry/app/views/performance/transactionSummary/breadcrumb.tsx
index 7b5a81d995..fecae2457b 100644
--- a/src/sentry/static/sentry/app/views/performance/transactionSummary/breadcrumb.tsx
+++ b/src/sentry/static/sentry/app/views/performance/transactionSummary/breadcrumb.tsx
@@ -7,7 +7,7 @@ import EventView from 'app/utils/discover/eventView';
 import Breadcrumbs, {Crumb} from 'app/components/breadcrumbs';
 
 import {getPerformanceLandingUrl} from '../utils';
-import {transactionSummaryRouteWithEventView} from './utils';
+import {transactionSummaryRouteWithQuery} from './utils';
 
 type Props = {
   eventView: EventView;
@@ -37,7 +37,7 @@ class Breadcrumb extends React.Component<Props> {
       label: t('Performance'),
     });
 
-    const summaryTarget = transactionSummaryRouteWithEventView({
+    const summaryTarget = transactionSummaryRouteWithQuery({
       orgSlug: organization.slug,
       transaction: transactionName,
       projectID: eventView.project.map(id => String(id)),
diff --git a/src/sentry/static/sentry/app/views/performance/transactionSummary/utils.tsx b/src/sentry/static/sentry/app/views/performance/transactionSummary/utils.tsx
index aa87409892..a39a294722 100644
--- a/src/sentry/static/sentry/app/views/performance/transactionSummary/utils.tsx
+++ b/src/sentry/static/sentry/app/views/performance/transactionSummary/utils.tsx
@@ -4,7 +4,7 @@ export function generateTransactionSummaryRoute({orgSlug}: {orgSlug: String}): s
   return `/organizations/${orgSlug}/performance/summary/`;
 }
 
-export function transactionSummaryRouteWithEventView({
+export function transactionSummaryRouteWithQuery({
   orgSlug,
   transaction,
   projectID,
