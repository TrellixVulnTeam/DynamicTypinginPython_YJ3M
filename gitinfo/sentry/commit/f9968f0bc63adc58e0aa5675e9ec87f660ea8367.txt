commit f9968f0bc63adc58e0aa5675e9ec87f660ea8367
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Fri Aug 23 13:07:40 2019 -0700

    fix(ui): Fix nested `<form>` warnings in `<SmartSearchBar>` (#14492)
    
    Fixes some react warnings about nested `form`s

diff --git a/src/sentry/static/sentry/app/components/smartSearchBar/index.jsx b/src/sentry/static/sentry/app/components/smartSearchBar/index.jsx
index 5ed4d02555..297f3fd571 100644
--- a/src/sentry/static/sentry/app/components/smartSearchBar/index.jsx
+++ b/src/sentry/static/sentry/app/components/smartSearchBar/index.jsx
@@ -144,6 +144,10 @@ class SmartSearchBar extends React.Component {
     // Can create a saved search
     canCreateSavedSearch: PropTypes.bool,
 
+    // Wrap the input with a form
+    // Useful if search bar is used within a parent form
+    useFormWrapper: PropTypes.bool,
+
     /**
      * If this is defined, attempt to save search term scoped to the user and the current org
      */
@@ -215,6 +219,7 @@ class SmartSearchBar extends React.Component {
     supportedTags: {},
     defaultSearchItems: [[], []],
     hasPinnedSearch: false,
+    useFormWrapper: true,
   };
 
   constructor(props) {
@@ -802,6 +807,7 @@ class SmartSearchBar extends React.Component {
       pinnedSearch,
       placeholder,
       disabled,
+      useFormWrapper,
       onSidebarToggle,
     } = this.props;
 
@@ -809,6 +815,38 @@ class SmartSearchBar extends React.Component {
     const pinIconSrc = !!pinnedSearch ? 'icon-pin-filled' : 'icon-pin';
     const hasQuery = !!this.state.query;
 
+    const input = (
+      <React.Fragment>
+        <StyledInput
+          type="text"
+          placeholder={placeholder}
+          id="smart-search-input"
+          name="query"
+          innerRef={this.searchInput}
+          autoComplete="off"
+          value={this.state.query}
+          onFocus={this.onQueryFocus}
+          onBlur={this.onQueryBlur}
+          onKeyUp={this.onKeyUp}
+          onKeyDown={this.onKeyDown}
+          onChange={this.onQueryChange}
+          onClick={this.onInputClick}
+          disabled={disabled}
+        />
+        {(this.state.loading || this.state.searchItems.length > 0) && (
+          <DropdownWrapper visible={this.state.dropdownVisible}>
+            <SearchDropdown
+              className={dropdownClassName}
+              items={this.state.searchItems}
+              onClick={this.onAutoComplete}
+              loading={this.state.loading}
+              searchSubstring={this.state.searchTerm}
+            />
+          </DropdownWrapper>
+        )}
+      </React.Fragment>
+    );
+
     return (
       <Container
         className={className}
@@ -819,35 +857,11 @@ class SmartSearchBar extends React.Component {
           <SearchSvg src="icon-search" />
         </SearchLabel>
 
-        <StyledForm onSubmit={this.onSubmit}>
-          <StyledInput
-            type="text"
-            placeholder={placeholder}
-            id="smart-search-input"
-            name="query"
-            innerRef={this.searchInput}
-            autoComplete="off"
-            value={this.state.query}
-            onFocus={this.onQueryFocus}
-            onBlur={this.onQueryBlur}
-            onKeyUp={this.onKeyUp}
-            onKeyDown={this.onKeyDown}
-            onChange={this.onQueryChange}
-            onClick={this.onInputClick}
-            disabled={disabled}
-          />
-          {(this.state.loading || this.state.searchItems.length > 0) && (
-            <DropdownWrapper visible={this.state.dropdownVisible}>
-              <SearchDropdown
-                className={dropdownClassName}
-                items={this.state.searchItems}
-                onClick={this.onAutoComplete}
-                loading={this.state.loading}
-                searchSubstring={this.state.searchTerm}
-              />
-            </DropdownWrapper>
-          )}
-        </StyledForm>
+        {useFormWrapper ? (
+          <StyledForm onSubmit={this.onSubmit}>{input}</StyledForm>
+        ) : (
+          input
+        )}
         <ButtonBar>
           {this.state.query !== '' && (
             <InputButton
diff --git a/src/sentry/static/sentry/app/views/settings/projectIncidentRules/ruleForm.tsx b/src/sentry/static/sentry/app/views/settings/projectIncidentRules/ruleForm.tsx
index fba9570640..2aa5827b6f 100644
--- a/src/sentry/static/sentry/app/views/settings/projectIncidentRules/ruleForm.tsx
+++ b/src/sentry/static/sentry/app/views/settings/projectIncidentRules/ruleForm.tsx
@@ -348,6 +348,7 @@ class RuleForm extends React.Component<Props, State> {
                         {({onChange, onBlur, onKeyDown}) => {
                           return (
                             <SearchBar
+                              useFormWrapper={false}
                               organization={organization}
                               onChange={onChange}
                               onBlur={onBlur}
