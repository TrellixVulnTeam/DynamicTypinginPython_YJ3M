commit a2230ccf2f161851df501285c3fc2582b9e37afc
Author: David Cramer <dcramer@gmail.com>
Date:   Mon May 28 16:52:56 2012 -0700

    Ensure we're not returning empty values for tags from useragents

diff --git a/sentry/plugins/sentry_useragents/models.py b/sentry/plugins/sentry_useragents/models.py
index c78b6ecb6a..5863aae6dd 100644
--- a/sentry/plugins/sentry_useragents/models.py
+++ b/sentry/plugins/sentry_useragents/models.py
@@ -30,7 +30,10 @@ class UserAgentPlugin(TagPlugin):
         ua = httpagentparser.detect(http.headers['User-Agent'])
         if not ua:
             return []
-        return self.get_tag_values_from_ua(ua)
+        result = self.get_tag_from_ua(ua)
+        if not result:
+            return []
+        return [result]
 
 
 class BrowserPlugin(UserAgentPlugin):
@@ -45,8 +48,8 @@ class BrowserPlugin(UserAgentPlugin):
     tag = 'browser'
     tag_label = _('Browser Name')
 
-    def get_tag_values_from_ua(self, ua):
-        return ['%(name)s %(version)s' % ua['browser']]
+    def get_tag_from_ua(self, ua):
+        return '%(name)s %(version)s' % ua['browser']
 
 
 register(BrowserPlugin)
@@ -64,9 +67,9 @@ class OsPlugin(UserAgentPlugin):
     tag = 'os'
     tag_label = _('Operating System')
 
-    def get_tag_values_from_ua(self, ua):
+    def get_tag_from_ua(self, ua):
         if 'flavor' in ua:
-            return ['%(name)s %(version)s' % ua['flavor']]
-        return ['%(name)s %(version)s' % ua['os']]
+            return '%(name)s %(version)s' % ua['flavor']
+        return '%(name)s %(version)s' % ua['os']
 
 register(OsPlugin)
