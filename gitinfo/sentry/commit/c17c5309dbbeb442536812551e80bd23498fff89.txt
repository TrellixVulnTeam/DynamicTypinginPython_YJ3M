commit c17c5309dbbeb442536812551e80bd23498fff89
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Oct 13 11:40:29 2010 -0700

    Change action list to use a new hook 'actions' and to render like panel list

diff --git a/sentry/plugins/__init__.py b/sentry/plugins/__init__.py
index 00b1ec66c1..33d8e6e164 100644
--- a/sentry/plugins/__init__.py
+++ b/sentry/plugins/__init__.py
@@ -69,6 +69,10 @@ class GroupActionProvider:
         Handles the view logic. If no response is given, we continue to the next action provider.
         """
 
+    def actions(self, request, action_list, group):
+        """Modifies the action list for a grouped message."""
+        return action_list
+
     def panels(self, request, panel_list, group):
         """Modifies the panel list for a grouped message."""
         return panel_list
diff --git a/sentry/templates/sentry/group/details.html b/sentry/templates/sentry/group/details.html
index d425fcbd65..d04d2bdefc 100644
--- a/sentry/templates/sentry/group/details.html
+++ b/sentry/templates/sentry/group/details.html
@@ -9,8 +9,9 @@
 {% block content %}
 	<div id="sidebar">
 		<ul class="actions">
+			{# We're going to move these to the resolve action location #}
 			<li><a href="{% url sentry %}">&laquo; back to list</a></li>
-			{% for link, label in group|get_actions %}
+			{% for label, link, is_active in group|get_actions:request %}
 				<li><a href="{{ link }}">{{ label }}</a></li>
 			{% endfor %}
 		</ul>
diff --git a/sentry/templatetags/sentry_helpers.py b/sentry/templatetags/sentry_helpers.py
index c8bf533067..48fcad97e7 100644
--- a/sentry/templatetags/sentry_helpers.py
+++ b/sentry/templatetags/sentry_helpers.py
@@ -80,10 +80,13 @@ def sentry_version():
     return get_version()
 register.simple_tag(sentry_version)
 
-def get_actions(group):
+def get_actions(group, request):
+    action_list = []
     for cls in GroupActionProvider.plugins.itervalues():
         inst = cls(group.pk)
-        yield inst.url, inst.title
+        action_list = inst.actions(request, action_list, group)
+    for action in action_list:
+        yield action[0], action[1], request.META['PATH_INFO'] == action[1]
 register.filter(get_actions)
 
 def get_panels(group, request):
