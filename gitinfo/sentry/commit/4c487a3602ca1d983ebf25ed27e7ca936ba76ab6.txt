commit 4c487a3602ca1d983ebf25ed27e7ca936ba76ab6
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Aug 11 11:47:50 2013 -0700

    Dont show team settings link if user does not have admin level permissions

diff --git a/src/sentry/templates/sentry/layout.html b/src/sentry/templates/sentry/layout.html
index ff527ce3e0..2029d0183d 100644
--- a/src/sentry/templates/sentry/layout.html
+++ b/src/sentry/templates/sentry/layout.html
@@ -92,7 +92,7 @@
                             <ul class="nav pull-right">
                                 {% block account_nav %}
                                     {% if request.user.is_authenticated %}
-                                        {% if team %}
+                                        {% if team and request.user|can_admin_team:team %}
                                             <li><a href="{% url 'sentry-manage-team' team.slug %}">Team Settings</a></li>
                                         {% endif %}
                                         <li class="dropdown">
diff --git a/src/sentry/templatetags/sentry_helpers.py b/src/sentry/templatetags/sentry_helpers.py
index ae1ee489b1..d586ba9e1a 100644
--- a/src/sentry/templatetags/sentry_helpers.py
+++ b/src/sentry/templatetags/sentry_helpers.py
@@ -24,8 +24,8 @@ from django.utils.html import escape
 from django.utils.safestring import mark_safe
 from django.utils.translation import ugettext as _
 
-from sentry.constants import STATUS_MUTED, EVENTS_PER_PAGE
-from sentry.models import Group, Option
+from sentry.constants import STATUS_MUTED, EVENTS_PER_PAGE, MEMBER_OWNER
+from sentry.models import Team, Group, Option
 from sentry.web.helpers import group_is_public
 from sentry.utils import to_unicode
 from sentry.utils.avatar import get_gravatar_url
@@ -465,3 +465,14 @@ def urlquote(value, safe=''):
 @register.filter
 def basename(value):
     return os.path.basename(value)
+
+
+@register.filter
+def can_admin_team(user, team):
+    if user.is_superuser:
+        return True
+    if team.owner == user:
+        return True
+    if team in Team.objects.get_for_user(user, access=MEMBER_OWNER):
+        return True
+    return False
