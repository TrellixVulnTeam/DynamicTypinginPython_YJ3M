commit bb9c7b5488766b2b5d400d041920b4c995f31dad
Author: Alex Hofsteede <alex@hofsteede.com>
Date:   Tue Dec 12 11:53:30 2017 +1300

    fix: errors being sent in as dict (#6719)
    
    Plus a regression test
    
    fixes: SENTRY-5A1

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index aec7ac0b85..34246533a6 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -286,7 +286,7 @@ class EventManager(object):
     def normalize(self, request_env=None):
         request_env = request_env or {}
         data = self.data
-        errors = data.get('errors', [])
+        errors = data['errors'] = []
 
         # Before validating with a schema, attempt to cast values to their desired types
         # so that the schema doesn't have to take every type variation into account.
@@ -466,8 +466,6 @@ class EventManager(object):
         if data['transaction']:
             data['transaction'] = trim(data['transaction'], MAX_CULPRIT_LENGTH)
 
-        data['errors'] = errors
-
         return data
 
     def save(self, project, raw=False):
diff --git a/tests/sentry/test_event_manager.py b/tests/sentry/test_event_manager.py
index 1e4727e24b..ffb974ea45 100644
--- a/tests/sentry/test_event_manager.py
+++ b/tests/sentry/test_event_manager.py
@@ -1027,6 +1027,16 @@ class EventManagerTest(TransactionTestCase):
         )
         manager.normalize({'client_ip': '1.2.3.4'})
 
+        manager = EventManager(
+            self.make_event(
+                **{
+                    'errors': {},
+                    'sentry.interfaces.Http': {},
+                }
+            )
+        )
+        manager.normalize()
+
 
 class ProcessTimestampTest(TestCase):
     def test_iso_timestamp(self):
