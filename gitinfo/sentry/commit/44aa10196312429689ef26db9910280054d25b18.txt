commit 44aa10196312429689ef26db9910280054d25b18
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue Jul 5 16:06:35 2016 +0300

    Make sure we normalize addresses in the frame already

diff --git a/src/sentry/interfaces/stacktrace.py b/src/sentry/interfaces/stacktrace.py
index 0e2274348b..5a37712728 100644
--- a/src/sentry/interfaces/stacktrace.py
+++ b/src/sentry/interfaces/stacktrace.py
@@ -50,7 +50,20 @@ def trim_package(pkg):
     return pkg
 
 
-def get_context(lineno, context_line, pre_context=None, post_context=None, filename=None):
+def to_hex_addr(addr):
+    if addr is None:
+        return None
+    elif isinstance(addr, (int, long)):
+        return '0x%x' % addr
+    elif isinstance(addr, basestring):
+        if addr[:2] == '0x':
+            return addr
+        return '0x%x' % int(addr)
+    raise ValueError('Unsupported address format %r' % (addr,))
+
+
+def get_context(lineno, context_line, pre_context=None, post_context=None,
+                filename=None):
     if lineno is None:
         return []
 
@@ -288,9 +301,9 @@ class Frame(Interface):
             'module': trim(module, 256),
             'function': trim(function, 256),
             'package': trim(data.get('package'), 256),
-            'image_addr': trim(data.get('image_addr'), 16),
-            'symbol_addr': trim(data.get('symbol_addr'), 16),
-            'instruction_addr': trim(data.get('instruction_addr'), 16),
+            'image_addr': to_hex_addr(trim(data.get('image_addr'), 16)),
+            'symbol_addr': to_hex_addr(trim(data.get('symbol_addr'), 16)),
+            'instruction_addr': to_hex_addr(trim(data.get('instruction_addr'), 16)),
             'instruction_offset': instruction_offset,
             'in_app': in_app,
             'context_line': context_line,
