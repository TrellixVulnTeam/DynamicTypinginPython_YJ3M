commit afd0c7cffb573e46459d9e361ac22c2d7b9c3858
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Mar 21 11:18:19 2015 -0700

    Move navigation into team/project details

diff --git a/src/sentry/static/sentry/app/components/footer.jsx b/src/sentry/static/sentry/app/components/footer.jsx
new file mode 100644
index 0000000000..46bbb7b245
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/footer.jsx
@@ -0,0 +1,22 @@
+/*** @jsx React.DOM */
+
+var React = require("react");
+
+var Footer = React.createClass({
+  render() {
+    return (
+      <footer>
+        <div className="container">
+          <div className="pull-right">
+            <a href="/docs">Docs</a>
+            <a href="https://github.com/getsentry/sentry">Contribute</a>
+          </div>
+          <div className="version pull-left">Sentry sentry_version.current <a href="#" title="You're running an old version of Sentry, did you know sentry_version.latest is available?" class="tip icon-circle-arrow-up">&nbsp;</a></div>
+          <span className="icon-sentry-logo"></span>
+        </div>
+      </footer>
+    );
+  }
+});
+
+module.exports = Footer;
diff --git a/src/sentry/static/sentry/app/components/organizationFooter.jsx b/src/sentry/static/sentry/app/components/organizationFooter.jsx
deleted file mode 100644
index 66238e8c21..0000000000
--- a/src/sentry/static/sentry/app/components/organizationFooter.jsx
+++ /dev/null
@@ -1,23 +0,0 @@
-/*** @jsx React.DOM */
-
-var React = require("react");
-
-var OrganizationFooter = React.createClass({
-
-  render() {
-    return (
-      <footer>
-	      <div className="container">
-	      		<div className="pull-right">
-	      			<a href="/docs">Docs</a>
-	      			<a href="https://github.com/getsentry/sentry">Contribute</a>
-	      		</div>
-	          <div className="version pull-left">Sentry sentry_version.current <a href="#" title="You're running an old version of Sentry, did you know sentry_version.latest is available?" class="tip icon-circle-arrow-up">&nbsp;</a></div>
-	          <span className="icon-sentry-logo"></span>
-	      </div>
-	    </footer>
-    );
-  }
-});
-
-module.exports = OrganizationFooter;
diff --git a/src/sentry/static/sentry/app/components/organizationHeader.jsx b/src/sentry/static/sentry/app/components/organizationHeader.jsx
index 67f4566a2c..2c1be6b422 100644
--- a/src/sentry/static/sentry/app/components/organizationHeader.jsx
+++ b/src/sentry/static/sentry/app/components/organizationHeader.jsx
@@ -13,29 +13,6 @@ var OrganizationHeader = React.createClass({
     return (
       <header>
         <div className="container">
-          <div className="pull-right">
-            <div className="dropdown anchor-right range-picker">
-              <a href="#" className="dropdown-toggle">
-                Last 7 days
-                <span className="icon-arrow-down"></span>
-              </a>
-              <div className="dropdown-menu">
-                <ul>
-                  <li><strong><a href=""><span className="icon icon-settings"></span>Admin</a></strong></li>
-                  <li><strong><a href=""><span className="icon icon-settings"></span>Account</a></strong></li>
-                  <li><strong><a href=""><span className="icon icon-arrow-right"></span>Sign Out</a></strong></li>
-                </ul>
-              </div>
-            </div>
-          </div>
-          <div className="pull-right">
-            <ul className="nav nav-tabs nav-tabs-mini">
-              <li className="active"><a href="#">Stream</a></li>
-              <li><a href="#">Releases</a></li>
-              <li><a href="#">Explore</a></li>
-              <li><a href="#">Settings</a></li>
-            </ul>
-          </div>
           <Breadcrumbs />
          </div>
       </header>
diff --git a/src/sentry/static/sentry/app/components/projectHeader.jsx b/src/sentry/static/sentry/app/components/projectHeader.jsx
new file mode 100644
index 0000000000..f523e35091
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/projectHeader.jsx
@@ -0,0 +1,52 @@
+/*** @jsx React.DOM */
+
+var React = require("react");
+var Router = require("react-router");
+
+var Breadcrumbs = require("./breadcrumbs");
+
+var DateRangePicker = React.createClass({
+  render() {
+    return (
+      <div className="dropdown anchor-right range-picker">
+        <a href="#" className="dropdown-toggle">
+          Last 7 days
+          <span className="icon-arrow-down"></span>
+        </a>
+      </div>
+    );
+  }
+});
+
+var OrganizationHeader = React.createClass({
+  mixins: [Router.State],
+
+  render() {
+    var routeParams = this.getParams();
+    var navSection = this.props.activeSection;
+
+    return (
+      <header>
+        <div className="container">
+          <div className="pull-right">
+            <ul className="nav nav-tabs nav-tabs-mini">
+              <li className={navSection == 'stream' ? 'active': ''}>
+                <Router.Link to="stream" params={routeParams}>
+                  Stream
+                </Router.Link>
+              </li>
+              <li className={navSection == 'settings' ? 'active': ''}>
+                <a href={'/' + routeParams.orgId + '/' + routeParams.projectId + '/settings/'}>
+                  Settings
+                </a>
+              </li>
+            </ul>
+          </div>
+          <Breadcrumbs />
+         </div>
+      </header>
+    );
+  }
+});
+
+module.exports = OrganizationHeader;
diff --git a/src/sentry/static/sentry/app/mixins/projectState.jsx b/src/sentry/static/sentry/app/mixins/projectState.jsx
index bbaa18feea..cb05edd891 100644
--- a/src/sentry/static/sentry/app/mixins/projectState.jsx
+++ b/src/sentry/static/sentry/app/mixins/projectState.jsx
@@ -7,7 +7,7 @@ var ProjectState = {
   mixins: [TeamState],
 
   contextTypes: {
-    project: PropTypes.Project.isRequired,
+    project: PropTypes.Project,
   },
 
   getProject() {
diff --git a/src/sentry/static/sentry/app/views/groupDetails.jsx b/src/sentry/static/sentry/app/views/groupDetails.jsx
index ef6c7bafe4..a6f03927d3 100644
--- a/src/sentry/static/sentry/app/views/groupDetails.jsx
+++ b/src/sentry/static/sentry/app/views/groupDetails.jsx
@@ -19,7 +19,8 @@ var GroupDetails = React.createClass({
   ],
 
   propTypes: {
-    memberList: React.PropTypes.instanceOf(Array).isRequired
+    memberList: React.PropTypes.instanceOf(Array).isRequired,
+    setProjectNavSection: React.PropTypes.func.isRequired
   },
 
   crumbReservations: 1,
@@ -42,6 +43,8 @@ var GroupDetails = React.createClass({
   },
 
   componentWillMount() {
+    this.props.setProjectNavSection('stream');
+
     api.request(this.getGroupDetailsEndpoint(), {
       success: (data) => {
         GroupListStore.loadInitialData([data]);
diff --git a/src/sentry/static/sentry/app/views/organizationDetails.jsx b/src/sentry/static/sentry/app/views/organizationDetails.jsx
index 98e062eb37..28957c2f88 100644
--- a/src/sentry/static/sentry/app/views/organizationDetails.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDetails.jsx
@@ -7,10 +7,9 @@ var api = require("../api");
 var BreadcrumbMixin = require("../mixins/breadcrumbMixin");
 var LoadingIndicator = require("../components/loadingIndicator");
 var PropTypes = require("../proptypes");
-var OrganizationHeader = require("../components/organizationHeader");
 var OrganizationState = require("../mixins/organizationState");
 var OrganizationSidebar = require("../components/organizationSidebar");
-var OrganizationFooter = require("../components/organizationFooter");
+var Footer = require("../components/footer");
 var RouteMixin = require("../mixins/routeMixin");
 
 var OrganizationDetails = React.createClass({
@@ -83,13 +82,8 @@ var OrganizationDetails = React.createClass({
       <div>
         <OrganizationSidebar />
         <div className="app">
-          <OrganizationHeader />
-          <div className="container">
-            <div className="content">
-              <Router.RouteHandler />
-            </div>
-          </div>
-          <OrganizationFooter />
+          <Router.RouteHandler />
+          <Footer />
         </div>
       </div>
     );
diff --git a/src/sentry/static/sentry/app/views/projectDetails.jsx b/src/sentry/static/sentry/app/views/projectDetails.jsx
index bd6a0861de..40dc9c7cab 100644
--- a/src/sentry/static/sentry/app/views/projectDetails.jsx
+++ b/src/sentry/static/sentry/app/views/projectDetails.jsx
@@ -8,6 +8,7 @@ var api = require("../api");
 var BreadcrumbMixin = require("../mixins/breadcrumbMixin");
 var MemberListStore = require("../stores/memberListStore");
 var LoadingIndicator = require("../components/loadingIndicator");
+var ProjectHeader = require("../components/projectHeader");
 var OrganizationState = require("../mixins/organizationState");
 var RouteMixin = require("../mixins/routeMixin");
 var PropTypes = require("../proptypes");
@@ -39,7 +40,8 @@ var ProjectDetails = React.createClass({
     return {
       memberList: [],
       project: null,
-      team: null
+      team: null,
+      projectNavSection: null
     };
   },
 
@@ -101,13 +103,27 @@ var ProjectDetails = React.createClass({
     return '/projects/' + params.orgId + '/' + params.projectId + '/members/';
   },
 
+  setProjectNavSection(section) {
+    this.setState({
+      projectNavSection: section
+    });
+  },
+
   render() {
     if (!this.state.project) {
       return <LoadingIndicator />;
     }
     return (
-      <Router.RouteHandler
-          memberList={this.state.memberList} />
+      <div>
+        <ProjectHeader activeSection={this.state.projectNavSection} />
+        <div className="container">
+          <div className="content">
+            <Router.RouteHandler
+                memberList={this.state.memberList}
+                setProjectNavSection={this.setProjectNavSection} />
+          </div>
+        </div>
+      </div>
     );
   }
 });
diff --git a/src/sentry/static/sentry/app/views/stream.jsx b/src/sentry/static/sentry/app/views/stream.jsx
index 084d430e69..8bef177499 100644
--- a/src/sentry/static/sentry/app/views/stream.jsx
+++ b/src/sentry/static/sentry/app/views/stream.jsx
@@ -73,7 +73,8 @@ var Stream = React.createClass({
   ],
 
   propTypes: {
-    memberList: React.PropTypes.instanceOf(Array).isRequired
+    memberList: React.PropTypes.instanceOf(Array).isRequired,
+    setProjectNavSection: React.PropTypes.func.isRequired
   },
 
   onAggListChange() {
@@ -99,6 +100,8 @@ var Stream = React.createClass({
   },
 
   componentWillMount() {
+    this.props.setProjectNavSection('stream');
+
     this._poller = new StreamPoller({
       success: this.handleRealtimePoll,
       endpoint: this.getGroupListEndpoint()
diff --git a/src/sentry/static/sentry/app/views/teamDetails.jsx b/src/sentry/static/sentry/app/views/teamDetails.jsx
index c0424c36b5..53349b28be 100644
--- a/src/sentry/static/sentry/app/views/teamDetails.jsx
+++ b/src/sentry/static/sentry/app/views/teamDetails.jsx
@@ -7,6 +7,7 @@ var Router = require("react-router");
 var api = require("../api");
 var BreadcrumbMixin = require("../mixins/breadcrumbMixin");
 var LoadingIndicator = require("../components/loadingIndicator");
+var OrganizationHeader = require("../components/organizationHeader");
 var OrganizationState = require("../mixins/organizationState");
 var PropTypes = require("../proptypes");
 var RouteMixin = require("../mixins/routeMixin");
@@ -74,7 +75,17 @@ var TeamDetails = React.createClass({
     if (!this.state.team) {
       return <LoadingIndicator />;
     }
-    return <Router.RouteHandler />;
+
+    return (
+      <div>
+        <OrganizationHeader />
+        <div className="container">
+          <div className="content">
+            <Router.RouteHandler />
+          </div>
+        </div>
+      </div>
+    );
   }
 });
 
