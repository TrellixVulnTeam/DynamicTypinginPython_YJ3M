commit 9a49a0a70e11d8a4dade850e850eeda5c4fb915f
Author: Alberto Leal <mail4alberto@gmail.com>
Date:   Tue Mar 3 15:44:48 2020 -0500

    fix(perf-view): Workaround to get apdex() graph working. (#17444)

diff --git a/src/sentry/static/sentry/app/views/performance/charts/index.tsx b/src/sentry/static/sentry/app/views/performance/charts/index.tsx
index 66fda657ad..0d299d89a3 100644
--- a/src/sentry/static/sentry/app/views/performance/charts/index.tsx
+++ b/src/sentry/static/sentry/app/views/performance/charts/index.tsx
@@ -22,7 +22,10 @@ import theme from 'app/utils/theme';
 import Chart from './chart';
 import Footer from './footer';
 
-const YAXIS_OPTIONS = ['apdex()', 'rpm()'];
+const YAXIS_OPTIONS = [
+  {label: 'apdex()', value: 'apdex(transaction.duration, 300)'},
+  {label: 'rpm()', value: 'rpm()'},
+];
 
 type Props = {
   api: Client;
@@ -113,7 +116,7 @@ class Container extends React.Component<Props, State> {
             showLoading={false}
             query={eventView.getEventsAPIPayload(location).query}
             includePrevious={false}
-            yAxis={YAXIS_OPTIONS}
+            yAxis={YAXIS_OPTIONS.map(option => option.value)}
           >
             {({loading, reloading, errored, results}) => {
               if (errored) {
@@ -129,13 +132,13 @@ class Container extends React.Component<Props, State> {
               }
 
               return YAXIS_OPTIONS.map(yAxis => (
-                <React.Fragment key={yAxis}>
+                <React.Fragment key={yAxis.label}>
                   {getDynamicText({
                     value: (
                       <Chart
                         loading={loading || reloading}
-                        yAxis={yAxis}
-                        data={results[yAxis]}
+                        yAxis={yAxis.label}
+                        data={results[yAxis.value]}
                         router={router}
                         statsPeriod={globalSelection.statsPeriod}
                         utc={utc === 'true'}
diff --git a/src/sentry/static/sentry/app/views/performance/data.tsx b/src/sentry/static/sentry/app/views/performance/data.tsx
index 4d187ae7a4..1c4c1fb4c9 100644
--- a/src/sentry/static/sentry/app/views/performance/data.tsx
+++ b/src/sentry/static/sentry/app/views/performance/data.tsx
@@ -14,7 +14,7 @@ export const PERFORMANCE_EVENT_VIEW: Readonly<NewQuery> = {
     'transaction',
     'project',
     'rpm()',
-    'error_rate',
+    'error_rate()',
     'p95()',
     'avg(transaction.duration)',
     'apdex()',
