commit 496d080ddcb21135fe4b5547c5e673c3b8fe6fb8
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Nov 4 23:00:54 2013 -0800

    Discard tag pairs that are not actually pairs

diff --git a/src/sentry/coreapi.py b/src/sentry/coreapi.py
index 99bd1bf8c5..17823eb932 100644
--- a/src/sentry/coreapi.py
+++ b/src/sentry/coreapi.py
@@ -292,7 +292,14 @@ def validate_data(project, data, client=None):
     if data.get('tags'):
         # remove any values which are over 32 characters
         tags = []
-        for k, v in data['tags']:
+        for pair in data['tags']:
+            try:
+                k, v = pair
+            except ValueError:
+                logger.info('Discarded invalid tag value: %r',
+                            pair, **client_metadata(client, project))
+                continue
+
             if not isinstance(k, basestring):
                 try:
                     k = unicode(k)
@@ -300,6 +307,7 @@ def validate_data(project, data, client=None):
                     logger.info('Discarded invalid tag key: %r',
                                 type(k), **client_metadata(client, project))
                     continue
+
             if not isinstance(v, basestring):
                 try:
                     v = unicode(v)
