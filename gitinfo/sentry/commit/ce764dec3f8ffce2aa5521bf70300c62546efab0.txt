commit ce764dec3f8ffce2aa5521bf70300c62546efab0
Author: Ben Vinegar <ben@benv.ca>
Date:   Tue Sep 27 21:07:26 2016 -0700

    New Link component that works outside of router contexts

diff --git a/src/sentry/static/sentry/app/components/compactIssue.jsx b/src/sentry/static/sentry/app/components/compactIssue.jsx
index 93a7a87723..7abde7ba72 100644
--- a/src/sentry/static/sentry/app/components/compactIssue.jsx
+++ b/src/sentry/static/sentry/app/components/compactIssue.jsx
@@ -1,6 +1,5 @@
 import React from 'react';
 import Reflux from 'reflux';
-import {Link} from 'react-router';
 
 import ApiMixin from '../mixins/apiMixin';
 import IndicatorStore from '../stores/indicatorStore';
@@ -8,6 +7,7 @@ import DropdownLink from './dropdownLink';
 import SnoozeAction from './issues/snoozeAction';
 import GroupChart from './stream/groupChart';
 import GroupStore from '../stores/groupStore';
+import Link from './link';
 import {t} from '../locale';
 
 const CompactIssueHeader = React.createClass({
diff --git a/src/sentry/static/sentry/app/components/link.jsx b/src/sentry/static/sentry/app/components/link.jsx
new file mode 100644
index 0000000000..231b832e9f
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/link.jsx
@@ -0,0 +1,29 @@
+import React from 'react';
+import {Link as RouterLink} from 'react-router';
+import _ from 'underscore';
+
+/**
+ * A context-aware version of Link (from react-router) that falls
+ * back to <a> if there is no router present.
+ */
+const Link = React.createClass({
+  propTypes: {
+    to: React.PropTypes.string.isRequired
+  },
+
+  contextTypes: {
+    location: React.PropTypes.object
+  },
+
+  render() {
+    if (this.context.location) {
+      return <RouterLink {...this.props}>{this.props.children}</RouterLink>;
+    } else {
+      let props = _.omit(this.props, 'to');
+      props.href = this.props.to;
+      return <a {...props}>{this.props.children}</a>;
+    }
+  }
+});
+
+export default Link;
diff --git a/src/sentry/static/sentry/app/components/sidebar/index.jsx b/src/sentry/static/sentry/app/components/sidebar/index.jsx
index c9e39e099e..69fc8b4634 100644
--- a/src/sentry/static/sentry/app/components/sidebar/index.jsx
+++ b/src/sentry/static/sentry/app/components/sidebar/index.jsx
@@ -1,7 +1,6 @@
 import React from 'react';
 import Reflux from 'reflux';
 import $ from 'jquery';
-import {Link} from 'react-router';
 
 import ApiMixin from '../../mixins/apiMixin';
 import IncidentStore from '../../stores/incidentStore';
@@ -15,6 +14,7 @@ import OrganizationSelector from './organizationSelector';
 import SidebarPanel from '../sidebarPanel';
 import TodoList from '../todos';
 import IssueList from '../issueList';
+import Link from '../link';
 
 import {t} from '../../locale';
 
@@ -169,15 +169,9 @@ const Sidebar = React.createClass({
       {/* Top nav links */}
       <ul className="navbar-nav divider-bottom">
         <li>
-          {this.context.location
-            ? <Link to={`/${org.slug}/`} onClick={()=>this.hidePanel()}>
-                <span className="icon icon-home" />
-              </Link>
-            :
-              <a href={`/${org.slug}/`} onClick={()=>this.hidePanel()}>
-                <span className="icon icon-home" />
-              </a>
-          }
+          <Link to={`/${org.slug}/`} onClick={()=>this.hidePanel()}>
+            <span className="icon icon-home" />
+          </Link>
         </li>
         <li className={this.state.currentPanel == 'assigned' ? 'active' : null }>
           <a>
