commit 1bb3bafd0345d6e1636134d2d14b32df8012b8f2
Author: David Cramer <dcramer@gmail.com>
Date:   Sat May 7 20:20:59 2011 -0700

    Ensure we're referencing the right settings

diff --git a/sentry/scripts/runner.py b/sentry/scripts/runner.py
index c63969fa4f..49fd1cd38a 100644
--- a/sentry/scripts/runner.py
+++ b/sentry/scripts/runner.py
@@ -6,6 +6,7 @@ import sys
 
 from daemon.daemon import DaemonContext
 from daemon.runner import DaemonRunner, make_pidlockfile
+from django.conf import settings as django_settings
 from django.core.management import call_command
 from eventlet import wsgi
 from optparse import OptionParser
@@ -73,12 +74,10 @@ def upgrade():
     
     call_command('syncdb', database=settings.DATABASE_USING or 'default', interactive=False)
 
-    if 'south' in settings.INSTALLED_APPS:
+    if 'south' in django_settings.INSTALLED_APPS:
         call_command('migrate', database=settings.DATABASE_USING or 'default', interactive=False)
 
 def main():
-    from django.conf import settings
-
     command_list = ('start', 'stop', 'restart', 'cleanup', 'upgrade')
     args = sys.argv
     if len(args) < 2 or args[1] not in command_list:
@@ -117,7 +116,7 @@ def main():
 
     # TODO: we should attempt to discover settings modules
 
-    if not settings.configured:
+    if not django_settings.configured:
         os.environ['DJANGO_SETTINGS_MODULE'] = 'sentry.conf.server'
 
     if args[0] == 'upgrade':
