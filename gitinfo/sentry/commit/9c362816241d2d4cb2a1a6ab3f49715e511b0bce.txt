commit 9c362816241d2d4cb2a1a6ab3f49715e511b0bce
Author: Radu Woinaroski <5281987+RaduW@users.noreply.github.com>
Date:   Tue Aug 6 10:43:58 2019 +0200

    fix(project-config): added CSP disallowed sources to project config (#14285)
    
    CSP message filtering requires information about the disallowed sources.
    This information was not present in the project configuration exposed
    to Semaphore.

diff --git a/src/sentry/relay/config.py b/src/sentry/relay/config.py
index 17a19c3a7c..aa6bb18aa9 100644
--- a/src/sentry/relay/config.py
+++ b/src/sentry/relay/config.py
@@ -10,6 +10,7 @@ from pytz import utc
 
 from sentry.coreapi import APIError
 from sentry.grouping.api import get_grouping_config_dict_for_project
+from sentry.interfaces.security import DEFAULT_DISALLOWED_SOURCES
 from sentry.message_filters import get_all_filters
 
 from sentry.models.organization import Organization
@@ -119,6 +120,13 @@ def get_project_config(project_id, full_config=True, for_store=False):
     if error_messages is not None:
         project_cfg[FilterTypes.ERROR_MESSAGES] = error_messages
 
+    csp_disallowed_sources = []
+    if bool(project.get_option('sentry:csp_ignored_sources_defaults', True)):
+        csp_disallowed_sources += DEFAULT_DISALLOWED_SOURCES
+    csp_disallowed_sources += project.get_option('sentry:csp_ignored_sources', [])
+
+    project_cfg['csp_disallowed_sources'] = csp_disallowed_sources
+
     # get the filter settings for this project
     filter_settings = {}
     project_cfg['filter_settings'] = filter_settings
