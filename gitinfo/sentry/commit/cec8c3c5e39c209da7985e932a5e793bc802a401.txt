commit cec8c3c5e39c209da7985e932a5e793bc802a401
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Tue Jan 29 15:53:52 2019 +0100

    fix: Skip too large events in workerrelay (#11763)
    
    * fix: Skip too large events in workerrelay
    
    * fix: Cap at 10mb

diff --git a/src/sentry/eventstream/kafka/protocol.py b/src/sentry/eventstream/kafka/protocol.py
index 494967276f..c041dd53da 100644
--- a/src/sentry/eventstream/kafka/protocol.py
+++ b/src/sentry/eventstream/kafka/protocol.py
@@ -92,6 +92,11 @@ def get_task_kwargs_for_message(value):
     can be applied to a post-processing task, or ``None`` if no task should be
     dispatched.
     """
+
+    if len(value) > 10000000:
+        logger.debug("Event payload too large: %d", len(value))
+        return None
+
     payload = json.loads(value)
 
     try:
