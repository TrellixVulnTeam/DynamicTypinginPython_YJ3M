commit fa26da1483a1ca6c2f4f999cadb488742e00583e
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Dec 26 23:04:32 2012 -0800

    Make event nav sticky

diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index 51717c1823..33329c729e 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -1248,36 +1248,44 @@ legend {
   }
 }
 
-ul.event-nav {
-  &.fixed {
+#event_nav.fixed {
+  overflow: hidden;
+  margin-bottom: 0;
+
+  > ul {
     position: fixed;
     left: 0;
     right: 0;
     top: 0;
-    z-index: 1000000;
     margin: 0 300px 0 0;
+    z-index: 1000000;
   }
-  padding: 0 20px;
-  margin-top: -20px;
-  margin-left: -20px;
-  margin-right: -20px;
-  background: #eee;
-  border-bottom: 1px solid #ddd;
-  > li {
-    > a {
-      color: @black;
-      .border-radius(0);
-      margin: 0 4px;
-      &:hover,
-      &:focus {
-        background-color: lighten(@linkColor, 5%);
+}
+
+#event_nav {
+  margin-bottom: 20px;
+
+  > ul {
+    padding: 0 20px;
+    margin: -20px -20px 0;
+    background: #eee;
+    border-bottom: 1px solid #ddd;
+    > li {
+      > a {
+        color: @black;
+        .border-radius(0);
+        margin: 0 4px;
+        &:hover,
+        &:focus {
+          background-color: lighten(@linkColor, 5%);
+          color: @white;
+        }
+      }
+      &.active > a {
         color: @white;
+        background-color: darken(@linkColor, 15%);
       }
     }
-    &.active > a {
-      color: @white;
-      background-color: darken(@linkColor, 15%);
-    }
   }
 }
 
diff --git a/src/sentry/static/sentry/scripts/app.js b/src/sentry/static/sentry/scripts/app.js
index b71a61bef6..29233e3ea5 100644
--- a/src/sentry/static/sentry/scripts/app.js
+++ b/src/sentry/static/sentry/scripts/app.js
@@ -172,8 +172,24 @@
                 });
             });
 
-            $('.event-nav').scrollspy();
-
+            var $event_nav = $('#event_nav');
+            var scroll_offset = $event_nav.offset().top;
+                
+            $event_nav.scrollspy();
+
+            $(window).resize(function(){
+                $event_nav.height($event_nav.outerHeight() + 'px');
+            }).resize();
+
+            $(window).scroll(function(){
+                if ($(window).scrollTop() > scroll_offset) {
+                    if (!$event_nav.hasClass('fixed')) {
+                        $event_nav.addClass('fixed');
+                    }
+                } else if ($event_nav.hasClass('fixed')) {
+                    $event_nav.removeClass('fixed');
+                }
+            });
         }
 
     });
diff --git a/src/sentry/templates/sentry/groups/details.html b/src/sentry/templates/sentry/groups/details.html
index 943cf379c3..693e9cf4c0 100644
--- a/src/sentry/templates/sentry/groups/details.html
+++ b/src/sentry/templates/sentry/groups/details.html
@@ -89,27 +89,29 @@
     </div>
 
     <section class="body">
-        <ul class="nav nav-pills event-nav">
-            <li{% if page == 'details' %} class="active"{% endif %}>
-                <a href="{% if page == 'details' %}#details{% else %}{% url sentry-group group.project.slug group.id %}{% endif %}">{% trans "Details" %}</a>
-            </li>
-            {% for interface, _ in interface_list %}
-                <li>
-                    <a href="{% if page != 'details' %}{% url sentry-group group.project.slug group.id %}{% endif %}#{{ interface.get_slug }}">
-                        {{ interface.get_title }}
-                    </a>
+        <div id="event_nav">
+            <ul class="nav nav-pills">
+                <li{% if page == 'details' %} class="active"{% endif %}>
+                    <a href="{% if page == 'details' %}#details{% else %}{% url sentry-group group.project.slug group.id %}{% endif %}">{% trans "Details" %}</a>
                 </li>
-            {% endfor %}
-            <li{% if page == 'tag_list' %} class="active"{% endif %}>
-                <a href="{% url sentry-group-tags group.project.slug group.id %}">{% trans "Tags" %}</a>
-            </li>
-            <li{% if page == 'event_list' %} class="active"{% endif %}>
-                <a href="{% url sentry-group-events group.project.slug group.id %}">{% trans "Similar Events" %}</a>
-            </li>
-            {% for label, link, is_active in group|get_panels:request %}
-                <li{% if is_active %} class="active"{% endif %}><a href="{{ link }}">{{ label }}</a></li>
-            {% endfor %}
-        </ul>
+                {% for interface, _ in interface_list %}
+                    <li>
+                        <a href="{% if page != 'details' %}{% url sentry-group group.project.slug group.id %}{% endif %}#{{ interface.get_slug }}">
+                            {{ interface.get_title }}
+                        </a>
+                    </li>
+                {% endfor %}
+                <li{% if page == 'tag_list' %} class="active"{% endif %}>
+                    <a href="{% url sentry-group-tags group.project.slug group.id %}">{% trans "Tags" %}</a>
+                </li>
+                <li{% if page == 'event_list' %} class="active"{% endif %}>
+                    <a href="{% url sentry-group-events group.project.slug group.id %}">{% trans "Similar Events" %}</a>
+                </li>
+                {% for label, link, is_active in group|get_panels:request %}
+                    <li{% if is_active %} class="active"{% endif %}><a href="{{ link }}">{{ label }}</a></li>
+                {% endfor %}
+            </ul>
+        </div>
 
         {% block inner %}
             {% if group.has_two_part_message %}
