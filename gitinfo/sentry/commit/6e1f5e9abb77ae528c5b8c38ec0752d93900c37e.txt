commit 6e1f5e9abb77ae528c5b8c38ec0752d93900c37e
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Thu Mar 12 11:52:21 2020 -0700

    feat(ts): Forward refs in avatar components (#17609)

diff --git a/src/sentry/static/sentry/app/components/avatar/baseAvatar.tsx b/src/sentry/static/sentry/app/components/avatar/baseAvatar.tsx
index cfbc62ce90..47f6fe5316 100644
--- a/src/sentry/static/sentry/app/components/avatar/baseAvatar.tsx
+++ b/src/sentry/static/sentry/app/components/avatar/baseAvatar.tsx
@@ -64,6 +64,8 @@ type Props = {
 
   className?: string;
 
+  forwardedRef?: React.Ref<HTMLSpanElement>;
+
   style?: React.CSSProperties;
 } & Partial<DefaultProps>;
 
@@ -204,6 +206,7 @@ class BaseAvatar extends React.Component<Props, State> {
       size,
       tooltip,
       tooltipOptions,
+      forwardedRef,
     } = this.props;
     let sizeStyle = {};
 
@@ -217,6 +220,7 @@ class BaseAvatar extends React.Component<Props, State> {
     return (
       <Tooltip title={tooltip} disabled={!hasTooltip} {...tooltipOptions}>
         <StyledBaseAvatar
+          ref={forwardedRef}
           loaded={this.state.hasLoaded}
           className={classNames('avatar', className)}
           round={!!round}
diff --git a/src/sentry/static/sentry/app/components/avatar/index.tsx b/src/sentry/static/sentry/app/components/avatar/index.tsx
index 8df7c207c5..4ce0b1d9a3 100644
--- a/src/sentry/static/sentry/app/components/avatar/index.tsx
+++ b/src/sentry/static/sentry/app/components/avatar/index.tsx
@@ -48,4 +48,6 @@ class Avatar extends React.Component<Props> {
   }
 }
 
-export default Avatar;
+export default React.forwardRef<HTMLSpanElement, Props>((props, ref) => (
+  <Avatar forwardedRef={ref} {...props} />
+));
diff --git a/src/sentry/static/sentry/app/components/letterAvatar.tsx b/src/sentry/static/sentry/app/components/letterAvatar.tsx
index e2fef836eb..5210ddc8bf 100644
--- a/src/sentry/static/sentry/app/components/letterAvatar.tsx
+++ b/src/sentry/static/sentry/app/components/letterAvatar.tsx
@@ -55,6 +55,7 @@ type Props = {
   identifier?: string;
   displayName?: string;
   round?: boolean;
+  forwardedRef?: React.Ref<SVGSVGElement>;
 };
 
 type LetterAvatarProps = React.ComponentProps<'svg'> & Props;
@@ -64,8 +65,8 @@ type LetterAvatarProps = React.ComponentProps<'svg'> & Props;
  * the svg, etc) will also need to be changed there.
  */
 const LetterAvatar = styled(
-  ({identifier, displayName, round, ...props}: LetterAvatarProps) => (
-    <svg viewBox="0 0 120 120" {...props}>
+  ({identifier, displayName, round, forwardedRef, ...props}: LetterAvatarProps) => (
+    <svg ref={forwardedRef} viewBox="0 0 120 120" {...props}>
       <rect
         x="0"
         y="0"
@@ -101,4 +102,6 @@ LetterAvatar.defaultProps = {
   round: false,
 };
 
-export default LetterAvatar;
+export default React.forwardRef<SVGSVGElement, Props>((props, ref) => (
+  <LetterAvatar forwardedRef={ref} {...props} />
+));
diff --git a/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap b/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
index 5359e4adc4..597118616d 100644
--- a/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
+++ b/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
@@ -272,47 +272,55 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                               }
                             }
                           >
-                            <LetterAvatar
+                            <ForwardRef
                               displayName="Foo Bar"
                               identifier="foo@example.com"
                               round={true}
                             >
-                              <Component
-                                className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                              <LetterAvatar
                                 displayName="Foo Bar"
+                                forwardedRef={null}
                                 identifier="foo@example.com"
                                 round={true}
                               >
-                                <svg
+                                <Component
                                   className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                  viewBox="0 0 120 120"
+                                  displayName="Foo Bar"
+                                  forwardedRef={null}
+                                  identifier="foo@example.com"
+                                  round={true}
                                 >
-                                  <rect
-                                    fill="#315cac"
-                                    height="120"
-                                    rx="15"
-                                    ry="15"
-                                    width="120"
-                                    x="0"
-                                    y="0"
-                                  />
-                                  <text
-                                    fill="#FFFFFF"
-                                    fontSize="65"
-                                    style={
-                                      Object {
-                                        "dominantBaseline": "central",
-                                      }
-                                    }
-                                    textAnchor="middle"
-                                    x="50%"
-                                    y="50%"
+                                  <svg
+                                    className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                    viewBox="0 0 120 120"
                                   >
-                                    FB
-                                  </text>
-                                </svg>
-                              </Component>
-                            </LetterAvatar>
+                                    <rect
+                                      fill="#315cac"
+                                      height="120"
+                                      rx="15"
+                                      ry="15"
+                                      width="120"
+                                      x="0"
+                                      y="0"
+                                    />
+                                    <text
+                                      fill="#FFFFFF"
+                                      fontSize="65"
+                                      style={
+                                        Object {
+                                          "dominantBaseline": "central",
+                                        }
+                                      }
+                                      textAnchor="middle"
+                                      x="50%"
+                                      y="50%"
+                                    >
+                                      FB
+                                    </text>
+                                  </svg>
+                                </Component>
+                              </LetterAvatar>
+                            </ForwardRef>
                           </span>
                         </StyledBaseAvatar>
                       </span>
@@ -444,47 +452,55 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                               }
                             }
                           >
-                            <LetterAvatar
+                            <ForwardRef
                               displayName="Foo Bar"
                               identifier="foo@example.com"
                               round={true}
                             >
-                              <Component
-                                className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                              <LetterAvatar
                                 displayName="Foo Bar"
+                                forwardedRef={null}
                                 identifier="foo@example.com"
                                 round={true}
                               >
-                                <svg
+                                <Component
                                   className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                  viewBox="0 0 120 120"
+                                  displayName="Foo Bar"
+                                  forwardedRef={null}
+                                  identifier="foo@example.com"
+                                  round={true}
                                 >
-                                  <rect
-                                    fill="#315cac"
-                                    height="120"
-                                    rx="15"
-                                    ry="15"
-                                    width="120"
-                                    x="0"
-                                    y="0"
-                                  />
-                                  <text
-                                    fill="#FFFFFF"
-                                    fontSize="65"
-                                    style={
-                                      Object {
-                                        "dominantBaseline": "central",
-                                      }
-                                    }
-                                    textAnchor="middle"
-                                    x="50%"
-                                    y="50%"
+                                  <svg
+                                    className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                    viewBox="0 0 120 120"
                                   >
-                                    FB
-                                  </text>
-                                </svg>
-                              </Component>
-                            </LetterAvatar>
+                                    <rect
+                                      fill="#315cac"
+                                      height="120"
+                                      rx="15"
+                                      ry="15"
+                                      width="120"
+                                      x="0"
+                                      y="0"
+                                    />
+                                    <text
+                                      fill="#FFFFFF"
+                                      fontSize="65"
+                                      style={
+                                        Object {
+                                          "dominantBaseline": "central",
+                                        }
+                                      }
+                                      textAnchor="middle"
+                                      x="50%"
+                                      y="50%"
+                                    >
+                                      FB
+                                    </text>
+                                  </svg>
+                                </Component>
+                              </LetterAvatar>
+                            </ForwardRef>
                           </span>
                         </StyledBaseAvatar>
                       </span>
@@ -616,47 +632,55 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                               }
                             }
                           >
-                            <LetterAvatar
+                            <ForwardRef
                               displayName="Foo Bar"
                               identifier="foo@example.com"
                               round={true}
                             >
-                              <Component
-                                className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                              <LetterAvatar
                                 displayName="Foo Bar"
+                                forwardedRef={null}
                                 identifier="foo@example.com"
                                 round={true}
                               >
-                                <svg
+                                <Component
                                   className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                  viewBox="0 0 120 120"
+                                  displayName="Foo Bar"
+                                  forwardedRef={null}
+                                  identifier="foo@example.com"
+                                  round={true}
                                 >
-                                  <rect
-                                    fill="#315cac"
-                                    height="120"
-                                    rx="15"
-                                    ry="15"
-                                    width="120"
-                                    x="0"
-                                    y="0"
-                                  />
-                                  <text
-                                    fill="#FFFFFF"
-                                    fontSize="65"
-                                    style={
-                                      Object {
-                                        "dominantBaseline": "central",
-                                      }
-                                    }
-                                    textAnchor="middle"
-                                    x="50%"
-                                    y="50%"
+                                  <svg
+                                    className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                    viewBox="0 0 120 120"
                                   >
-                                    FB
-                                  </text>
-                                </svg>
-                              </Component>
-                            </LetterAvatar>
+                                    <rect
+                                      fill="#315cac"
+                                      height="120"
+                                      rx="15"
+                                      ry="15"
+                                      width="120"
+                                      x="0"
+                                      y="0"
+                                    />
+                                    <text
+                                      fill="#FFFFFF"
+                                      fontSize="65"
+                                      style={
+                                        Object {
+                                          "dominantBaseline": "central",
+                                        }
+                                      }
+                                      textAnchor="middle"
+                                      x="50%"
+                                      y="50%"
+                                    >
+                                      FB
+                                    </text>
+                                  </svg>
+                                </Component>
+                              </LetterAvatar>
+                            </ForwardRef>
                           </span>
                         </StyledBaseAvatar>
                       </span>
@@ -788,47 +812,55 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                               }
                             }
                           >
-                            <LetterAvatar
+                            <ForwardRef
                               displayName="Foo Bar"
                               identifier="foo@example.com"
                               round={true}
                             >
-                              <Component
-                                className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                              <LetterAvatar
                                 displayName="Foo Bar"
+                                forwardedRef={null}
                                 identifier="foo@example.com"
                                 round={true}
                               >
-                                <svg
+                                <Component
                                   className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                  viewBox="0 0 120 120"
+                                  displayName="Foo Bar"
+                                  forwardedRef={null}
+                                  identifier="foo@example.com"
+                                  round={true}
                                 >
-                                  <rect
-                                    fill="#315cac"
-                                    height="120"
-                                    rx="15"
-                                    ry="15"
-                                    width="120"
-                                    x="0"
-                                    y="0"
-                                  />
-                                  <text
-                                    fill="#FFFFFF"
-                                    fontSize="65"
-                                    style={
-                                      Object {
-                                        "dominantBaseline": "central",
-                                      }
-                                    }
-                                    textAnchor="middle"
-                                    x="50%"
-                                    y="50%"
+                                  <svg
+                                    className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                    viewBox="0 0 120 120"
                                   >
-                                    FB
-                                  </text>
-                                </svg>
-                              </Component>
-                            </LetterAvatar>
+                                    <rect
+                                      fill="#315cac"
+                                      height="120"
+                                      rx="15"
+                                      ry="15"
+                                      width="120"
+                                      x="0"
+                                      y="0"
+                                    />
+                                    <text
+                                      fill="#FFFFFF"
+                                      fontSize="65"
+                                      style={
+                                        Object {
+                                          "dominantBaseline": "central",
+                                        }
+                                      }
+                                      textAnchor="middle"
+                                      x="50%"
+                                      y="50%"
+                                    >
+                                      FB
+                                    </text>
+                                  </svg>
+                                </Component>
+                              </LetterAvatar>
+                            </ForwardRef>
                           </span>
                         </StyledBaseAvatar>
                       </span>
@@ -960,47 +992,55 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                               }
                             }
                           >
-                            <LetterAvatar
+                            <ForwardRef
                               displayName="Foo Bar"
                               identifier="foo@example.com"
                               round={true}
                             >
-                              <Component
-                                className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                              <LetterAvatar
                                 displayName="Foo Bar"
+                                forwardedRef={null}
                                 identifier="foo@example.com"
                                 round={true}
                               >
-                                <svg
+                                <Component
                                   className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                  viewBox="0 0 120 120"
+                                  displayName="Foo Bar"
+                                  forwardedRef={null}
+                                  identifier="foo@example.com"
+                                  round={true}
                                 >
-                                  <rect
-                                    fill="#315cac"
-                                    height="120"
-                                    rx="15"
-                                    ry="15"
-                                    width="120"
-                                    x="0"
-                                    y="0"
-                                  />
-                                  <text
-                                    fill="#FFFFFF"
-                                    fontSize="65"
-                                    style={
-                                      Object {
-                                        "dominantBaseline": "central",
-                                      }
-                                    }
-                                    textAnchor="middle"
-                                    x="50%"
-                                    y="50%"
+                                  <svg
+                                    className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                    viewBox="0 0 120 120"
                                   >
-                                    FB
-                                  </text>
-                                </svg>
-                              </Component>
-                            </LetterAvatar>
+                                    <rect
+                                      fill="#315cac"
+                                      height="120"
+                                      rx="15"
+                                      ry="15"
+                                      width="120"
+                                      x="0"
+                                      y="0"
+                                    />
+                                    <text
+                                      fill="#FFFFFF"
+                                      fontSize="65"
+                                      style={
+                                        Object {
+                                          "dominantBaseline": "central",
+                                        }
+                                      }
+                                      textAnchor="middle"
+                                      x="50%"
+                                      y="50%"
+                                    >
+                                      FB
+                                    </text>
+                                  </svg>
+                                </Component>
+                              </LetterAvatar>
+                            </ForwardRef>
                           </span>
                         </StyledBaseAvatar>
                       </span>
@@ -1184,47 +1224,55 @@ exports[`AvatarList renders with user avatars 1`] = `
                               }
                             }
                           >
-                            <LetterAvatar
+                            <ForwardRef
                               displayName="Foo Bar"
                               identifier="foo@example.com"
                               round={true}
                             >
-                              <Component
-                                className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                              <LetterAvatar
                                 displayName="Foo Bar"
+                                forwardedRef={null}
                                 identifier="foo@example.com"
                                 round={true}
                               >
-                                <svg
+                                <Component
                                   className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                  viewBox="0 0 120 120"
+                                  displayName="Foo Bar"
+                                  forwardedRef={null}
+                                  identifier="foo@example.com"
+                                  round={true}
                                 >
-                                  <rect
-                                    fill="#315cac"
-                                    height="120"
-                                    rx="15"
-                                    ry="15"
-                                    width="120"
-                                    x="0"
-                                    y="0"
-                                  />
-                                  <text
-                                    fill="#FFFFFF"
-                                    fontSize="65"
-                                    style={
-                                      Object {
-                                        "dominantBaseline": "central",
-                                      }
-                                    }
-                                    textAnchor="middle"
-                                    x="50%"
-                                    y="50%"
+                                  <svg
+                                    className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                    viewBox="0 0 120 120"
                                   >
-                                    FB
-                                  </text>
-                                </svg>
-                              </Component>
-                            </LetterAvatar>
+                                    <rect
+                                      fill="#315cac"
+                                      height="120"
+                                      rx="15"
+                                      ry="15"
+                                      width="120"
+                                      x="0"
+                                      y="0"
+                                    />
+                                    <text
+                                      fill="#FFFFFF"
+                                      fontSize="65"
+                                      style={
+                                        Object {
+                                          "dominantBaseline": "central",
+                                        }
+                                      }
+                                      textAnchor="middle"
+                                      x="50%"
+                                      y="50%"
+                                    >
+                                      FB
+                                    </text>
+                                  </svg>
+                                </Component>
+                              </LetterAvatar>
+                            </ForwardRef>
                           </span>
                         </StyledBaseAvatar>
                       </span>
@@ -1356,47 +1404,55 @@ exports[`AvatarList renders with user avatars 1`] = `
                               }
                             }
                           >
-                            <LetterAvatar
+                            <ForwardRef
                               displayName="Foo Bar"
                               identifier="foo@example.com"
                               round={true}
                             >
-                              <Component
-                                className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                              <LetterAvatar
                                 displayName="Foo Bar"
+                                forwardedRef={null}
                                 identifier="foo@example.com"
                                 round={true}
                               >
-                                <svg
+                                <Component
                                   className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                  viewBox="0 0 120 120"
+                                  displayName="Foo Bar"
+                                  forwardedRef={null}
+                                  identifier="foo@example.com"
+                                  round={true}
                                 >
-                                  <rect
-                                    fill="#315cac"
-                                    height="120"
-                                    rx="15"
-                                    ry="15"
-                                    width="120"
-                                    x="0"
-                                    y="0"
-                                  />
-                                  <text
-                                    fill="#FFFFFF"
-                                    fontSize="65"
-                                    style={
-                                      Object {
-                                        "dominantBaseline": "central",
-                                      }
-                                    }
-                                    textAnchor="middle"
-                                    x="50%"
-                                    y="50%"
+                                  <svg
+                                    className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                    viewBox="0 0 120 120"
                                   >
-                                    FB
-                                  </text>
-                                </svg>
-                              </Component>
-                            </LetterAvatar>
+                                    <rect
+                                      fill="#315cac"
+                                      height="120"
+                                      rx="15"
+                                      ry="15"
+                                      width="120"
+                                      x="0"
+                                      y="0"
+                                    />
+                                    <text
+                                      fill="#FFFFFF"
+                                      fontSize="65"
+                                      style={
+                                        Object {
+                                          "dominantBaseline": "central",
+                                        }
+                                      }
+                                      textAnchor="middle"
+                                      x="50%"
+                                      y="50%"
+                                    >
+                                      FB
+                                    </text>
+                                  </svg>
+                                </Component>
+                              </LetterAvatar>
+                            </ForwardRef>
                           </span>
                         </StyledBaseAvatar>
                       </span>
diff --git a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
index abf6b8dc32..1d09824aef 100644
--- a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
@@ -244,47 +244,55 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                       }
                     }
                   >
-                    <LetterAvatar
+                    <ForwardRef
                       displayName="org slug"
                       identifier="org-slug"
                       round={false}
                     >
-                      <Component
-                        className="css-1ei2ksv-LetterAvatar e12lgfev0"
+                      <LetterAvatar
                         displayName="org slug"
+                        forwardedRef={null}
                         identifier="org-slug"
                         round={false}
                       >
-                        <svg
+                        <Component
                           className="css-1ei2ksv-LetterAvatar e12lgfev0"
-                          viewBox="0 0 120 120"
+                          displayName="org slug"
+                          forwardedRef={null}
+                          identifier="org-slug"
+                          round={false}
                         >
-                          <rect
-                            fill="#4674ca"
-                            height="120"
-                            rx="15"
-                            ry="15"
-                            width="120"
-                            x="0"
-                            y="0"
-                          />
-                          <text
-                            fill="#FFFFFF"
-                            fontSize="65"
-                            style={
-                              Object {
-                                "dominantBaseline": "central",
-                              }
-                            }
-                            textAnchor="middle"
-                            x="50%"
-                            y="50%"
+                          <svg
+                            className="css-1ei2ksv-LetterAvatar e12lgfev0"
+                            viewBox="0 0 120 120"
                           >
-                            OS
-                          </text>
-                        </svg>
-                      </Component>
-                    </LetterAvatar>
+                            <rect
+                              fill="#4674ca"
+                              height="120"
+                              rx="15"
+                              ry="15"
+                              width="120"
+                              x="0"
+                              y="0"
+                            />
+                            <text
+                              fill="#FFFFFF"
+                              fontSize="65"
+                              style={
+                                Object {
+                                  "dominantBaseline": "central",
+                                }
+                              }
+                              textAnchor="middle"
+                              x="50%"
+                              y="50%"
+                            >
+                              OS
+                            </text>
+                          </svg>
+                        </Component>
+                      </LetterAvatar>
+                    </ForwardRef>
                   </span>
                 </StyledBaseAvatar>
               </Tooltip>
@@ -680,47 +688,55 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                                         }
                                       }
                                     >
-                                      <LetterAvatar
+                                      <ForwardRef
                                         displayName="Foo Bar"
                                         identifier="foo@example.com"
                                         round={true}
                                       >
-                                        <Component
-                                          className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                        <LetterAvatar
                                           displayName="Foo Bar"
+                                          forwardedRef={null}
                                           identifier="foo@example.com"
                                           round={true}
                                         >
-                                          <svg
+                                          <Component
                                             className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                            viewBox="0 0 120 120"
+                                            displayName="Foo Bar"
+                                            forwardedRef={null}
+                                            identifier="foo@example.com"
+                                            round={true}
                                           >
-                                            <rect
-                                              fill="#315cac"
-                                              height="120"
-                                              rx="15"
-                                              ry="15"
-                                              width="120"
-                                              x="0"
-                                              y="0"
-                                            />
-                                            <text
-                                              fill="#FFFFFF"
-                                              fontSize="65"
-                                              style={
-                                                Object {
-                                                  "dominantBaseline": "central",
-                                                }
-                                              }
-                                              textAnchor="middle"
-                                              x="50%"
-                                              y="50%"
+                                            <svg
+                                              className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                              viewBox="0 0 120 120"
                                             >
-                                              FB
-                                            </text>
-                                          </svg>
-                                        </Component>
-                                      </LetterAvatar>
+                                              <rect
+                                                fill="#315cac"
+                                                height="120"
+                                                rx="15"
+                                                ry="15"
+                                                width="120"
+                                                x="0"
+                                                y="0"
+                                              />
+                                              <text
+                                                fill="#FFFFFF"
+                                                fontSize="65"
+                                                style={
+                                                  Object {
+                                                    "dominantBaseline": "central",
+                                                  }
+                                                }
+                                                textAnchor="middle"
+                                                x="50%"
+                                                y="50%"
+                                              >
+                                                FB
+                                              </text>
+                                            </svg>
+                                          </Component>
+                                        </LetterAvatar>
+                                      </ForwardRef>
                                     </span>
                                   </StyledBaseAvatar>
                                 </Tooltip>
@@ -6313,47 +6329,55 @@ exports[`Sidebar renders without org and router 1`] = `
                                         }
                                       }
                                     >
-                                      <LetterAvatar
+                                      <ForwardRef
                                         displayName="Foo Bar"
                                         identifier="foo@example.com"
                                         round={true}
                                       >
-                                        <Component
-                                          className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                        <LetterAvatar
                                           displayName="Foo Bar"
+                                          forwardedRef={null}
                                           identifier="foo@example.com"
                                           round={true}
                                         >
-                                          <svg
+                                          <Component
                                             className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                            viewBox="0 0 120 120"
+                                            displayName="Foo Bar"
+                                            forwardedRef={null}
+                                            identifier="foo@example.com"
+                                            round={true}
                                           >
-                                            <rect
-                                              fill="#315cac"
-                                              height="120"
-                                              rx="15"
-                                              ry="15"
-                                              width="120"
-                                              x="0"
-                                              y="0"
-                                            />
-                                            <text
-                                              fill="#FFFFFF"
-                                              fontSize="65"
-                                              style={
-                                                Object {
-                                                  "dominantBaseline": "central",
-                                                }
-                                              }
-                                              textAnchor="middle"
-                                              x="50%"
-                                              y="50%"
+                                            <svg
+                                              className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                              viewBox="0 0 120 120"
                                             >
-                                              FB
-                                            </text>
-                                          </svg>
-                                        </Component>
-                                      </LetterAvatar>
+                                              <rect
+                                                fill="#315cac"
+                                                height="120"
+                                                rx="15"
+                                                ry="15"
+                                                width="120"
+                                                x="0"
+                                                y="0"
+                                              />
+                                              <text
+                                                fill="#FFFFFF"
+                                                fontSize="65"
+                                                style={
+                                                  Object {
+                                                    "dominantBaseline": "central",
+                                                  }
+                                                }
+                                                textAnchor="middle"
+                                                x="50%"
+                                                y="50%"
+                                              >
+                                                FB
+                                              </text>
+                                            </svg>
+                                          </Component>
+                                        </LetterAvatar>
+                                      </ForwardRef>
                                     </span>
                                   </StyledBaseAvatar>
                                 </Tooltip>
diff --git a/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap b/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
index 8eed8d20f0..6b87a34905 100644
--- a/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
@@ -2880,47 +2880,55 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                                                                 }
                                                               }
                                                             >
-                                                              <LetterAvatar
+                                                              <ForwardRef
                                                                 displayName="Jane Bloggs"
                                                                 identifier="janebloggs@example.com"
                                                                 round={true}
                                                               >
-                                                                <Component
-                                                                  className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                                                <LetterAvatar
                                                                   displayName="Jane Bloggs"
+                                                                  forwardedRef={null}
                                                                   identifier="janebloggs@example.com"
                                                                   round={true}
                                                                 >
-                                                                  <svg
+                                                                  <Component
                                                                     className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                                                    viewBox="0 0 120 120"
+                                                                    displayName="Jane Bloggs"
+                                                                    forwardedRef={null}
+                                                                    identifier="janebloggs@example.com"
+                                                                    round={true}
                                                                   >
-                                                                    <rect
-                                                                      fill="#4e3fb4"
-                                                                      height="120"
-                                                                      rx="15"
-                                                                      ry="15"
-                                                                      width="120"
-                                                                      x="0"
-                                                                      y="0"
-                                                                    />
-                                                                    <text
-                                                                      fill="#FFFFFF"
-                                                                      fontSize="65"
-                                                                      style={
-                                                                        Object {
-                                                                          "dominantBaseline": "central",
-                                                                        }
-                                                                      }
-                                                                      textAnchor="middle"
-                                                                      x="50%"
-                                                                      y="50%"
+                                                                    <svg
+                                                                      className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                                                      viewBox="0 0 120 120"
                                                                     >
-                                                                      JB
-                                                                    </text>
-                                                                  </svg>
-                                                                </Component>
-                                                              </LetterAvatar>
+                                                                      <rect
+                                                                        fill="#4e3fb4"
+                                                                        height="120"
+                                                                        rx="15"
+                                                                        ry="15"
+                                                                        width="120"
+                                                                        x="0"
+                                                                        y="0"
+                                                                      />
+                                                                      <text
+                                                                        fill="#FFFFFF"
+                                                                        fontSize="65"
+                                                                        style={
+                                                                          Object {
+                                                                            "dominantBaseline": "central",
+                                                                          }
+                                                                        }
+                                                                        textAnchor="middle"
+                                                                        x="50%"
+                                                                        y="50%"
+                                                                      >
+                                                                        JB
+                                                                      </text>
+                                                                    </svg>
+                                                                  </Component>
+                                                                </LetterAvatar>
+                                                              </ForwardRef>
                                                             </span>
                                                           </StyledBaseAvatar>
                                                         </span>
diff --git a/tests/js/spec/views/organizationGroupDetails/__snapshots__/groupSimilar.spec.jsx.snap b/tests/js/spec/views/organizationGroupDetails/__snapshots__/groupSimilar.spec.jsx.snap
index 02fc0a06c9..5717e71f58 100644
--- a/tests/js/spec/views/organizationGroupDetails/__snapshots__/groupSimilar.spec.jsx.snap
+++ b/tests/js/spec/views/organizationGroupDetails/__snapshots__/groupSimilar.spec.jsx.snap
@@ -1369,7 +1369,10 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                     __EMOTION_TYPE_PLEASE_DO_NOT_USE__={
                                                       Object {
                                                         "$$typeof": Symbol(react.forward_ref),
-                                                        "__emotion_base": [Function],
+                                                        "__emotion_base": Object {
+                                                          "$$typeof": Symbol(react.forward_ref),
+                                                          "render": [Function],
+                                                        },
                                                         "__emotion_forwardProp": undefined,
                                                         "__emotion_real": [Circular],
                                                         "__emotion_styles": Array [
@@ -1378,9 +1381,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                           [Function],
                                                           ";flex-shrink:0;",
                                                         ],
-                                                        "defaultProps": Object {
-                                                          "hasTooltip": false,
-                                                        },
+                                                        "defaultProps": undefined,
                                                         "displayName": "StyledAvatar",
                                                         "render": [Function],
                                                         "withComponent": [Function],
@@ -1398,7 +1399,6 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                   >
                                                     <StyledAvatar
                                                       className="css-0"
-                                                      hasTooltip={false}
                                                       hideName={true}
                                                       project={
                                                         Object {
@@ -1409,9 +1409,8 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                       }
                                                       size={14}
                                                     >
-                                                      <Avatar
+                                                      <ForwardRef
                                                         className="css-7c3lwm-StyledAvatar e165dl3i1"
-                                                        hasTooltip={false}
                                                         hideName={true}
                                                         project={
                                                           Object {
@@ -1422,8 +1421,9 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                         }
                                                         size={14}
                                                       >
-                                                        <ProjectAvatar
+                                                        <Avatar
                                                           className="css-7c3lwm-StyledAvatar e165dl3i1"
+                                                          forwardedRef={null}
                                                           hasTooltip={false}
                                                           hideName={true}
                                                           project={
@@ -1435,69 +1435,85 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                           }
                                                           size={14}
                                                         >
-                                                          <Tooltip
-                                                            containerDisplayMode="inline-block"
-                                                            disabled={true}
-                                                            position="top"
+                                                          <ProjectAvatar
+                                                            className="css-7c3lwm-StyledAvatar e165dl3i1"
+                                                            forwardedRef={null}
+                                                            hasTooltip={false}
+                                                            hideName={true}
+                                                            project={
+                                                              Object {
+                                                                "id": "123",
+                                                                "name": "Internal",
+                                                                "slug": "project-slug",
+                                                              }
+                                                            }
+                                                            size={14}
                                                           >
-                                                            <PlatformList
-                                                              className="css-7c3lwm-StyledAvatar e165dl3i1"
-                                                              consistentWidth={false}
-                                                              direction="right"
-                                                              hideName={true}
-                                                              max={1}
-                                                              platforms={Array []}
-                                                              size={14}
+                                                            <Tooltip
+                                                              containerDisplayMode="inline-block"
+                                                              disabled={true}
+                                                              position="top"
                                                             >
-                                                              <PlatformIcons
+                                                              <PlatformList
                                                                 className="css-7c3lwm-StyledAvatar e165dl3i1"
                                                                 consistentWidth={false}
                                                                 direction="right"
+                                                                forwardedRef={null}
+                                                                hideName={true}
                                                                 max={1}
+                                                                platforms={Array []}
                                                                 size={14}
                                                               >
-                                                                <div
-                                                                  className="e165dl3i1 css-dyodzz-PlatformIcons-StyledAvatar ezvce7z0"
+                                                                <PlatformIcons
+                                                                  className="css-7c3lwm-StyledAvatar e165dl3i1"
+                                                                  consistentWidth={false}
                                                                   direction="right"
                                                                   max={1}
                                                                   size={14}
                                                                 >
-                                                                  <StyledPlatformIcon
-                                                                    platform="default"
+                                                                  <div
+                                                                    className="e165dl3i1 css-dyodzz-PlatformIcons-StyledAvatar ezvce7z0"
+                                                                    direction="right"
+                                                                    max={1}
                                                                     size={14}
                                                                   >
-                                                                    <Component
-                                                                      className="css-7okses-StyledPlatformIcon ezvce7z1"
+                                                                    <StyledPlatformIcon
                                                                       platform="default"
                                                                       size={14}
                                                                     >
-                                                                      <PlatformIcon
+                                                                      <Component
                                                                         className="css-7okses-StyledPlatformIcon ezvce7z1"
                                                                         platform="default"
-                                                                        size="14px"
+                                                                        size={14}
                                                                       >
-                                                                        <img
+                                                                        <PlatformIcon
                                                                           className="css-7okses-StyledPlatformIcon ezvce7z1"
-                                                                          height="14px"
-                                                                          src={
-                                                                            Object {
-                                                                              "default": Object {
-                                                                                "id": "test",
-                                                                                "viewBox": Object {},
-                                                                              },
+                                                                          platform="default"
+                                                                          size="14px"
+                                                                        >
+                                                                          <img
+                                                                            className="css-7okses-StyledPlatformIcon ezvce7z1"
+                                                                            height="14px"
+                                                                            src={
+                                                                              Object {
+                                                                                "default": Object {
+                                                                                  "id": "test",
+                                                                                  "viewBox": Object {},
+                                                                                },
+                                                                              }
                                                                             }
-                                                                          }
-                                                                          width="14px"
-                                                                        />
-                                                                      </PlatformIcon>
-                                                                    </Component>
-                                                                  </StyledPlatformIcon>
-                                                                </div>
-                                                              </PlatformIcons>
-                                                            </PlatformList>
-                                                          </Tooltip>
-                                                        </ProjectAvatar>
-                                                      </Avatar>
+                                                                            width="14px"
+                                                                          />
+                                                                        </PlatformIcon>
+                                                                      </Component>
+                                                                    </StyledPlatformIcon>
+                                                                  </div>
+                                                                </PlatformIcons>
+                                                              </PlatformList>
+                                                            </Tooltip>
+                                                          </ProjectAvatar>
+                                                        </Avatar>
+                                                      </ForwardRef>
                                                     </StyledAvatar>
                                                   </EmotionCssPropInternal>
                                                   <DisplayNameAndDescription>
diff --git a/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap b/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
index 70ba27231e..8f0716e96a 100644
--- a/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
+++ b/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
@@ -230,7 +230,10 @@ exports[`ProjectCard renders 1`] = `
                                 __EMOTION_TYPE_PLEASE_DO_NOT_USE__={
                                   Object {
                                     "$$typeof": Symbol(react.forward_ref),
-                                    "__emotion_base": [Function],
+                                    "__emotion_base": Object {
+                                      "$$typeof": Symbol(react.forward_ref),
+                                      "render": [Function],
+                                    },
                                     "__emotion_forwardProp": undefined,
                                     "__emotion_real": [Circular],
                                     "__emotion_styles": Array [
@@ -239,9 +242,7 @@ exports[`ProjectCard renders 1`] = `
                                       [Function],
                                       ";flex-shrink:0;",
                                     ],
-                                    "defaultProps": Object {
-                                      "hasTooltip": false,
-                                    },
+                                    "defaultProps": undefined,
                                     "displayName": "StyledAvatar",
                                     "render": [Function],
                                     "withComponent": [Function],
@@ -274,7 +275,6 @@ exports[`ProjectCard renders 1`] = `
                               >
                                 <StyledAvatar
                                   className="css-0"
-                                  hasTooltip={false}
                                   project={
                                     Object {
                                       "environments": Array [],
@@ -300,9 +300,8 @@ exports[`ProjectCard renders 1`] = `
                                   }
                                   size={18}
                                 >
-                                  <Avatar
+                                  <ForwardRef
                                     className="css-1neg7x4-StyledAvatar e165dl3i1"
-                                    hasTooltip={false}
                                     project={
                                       Object {
                                         "environments": Array [],
@@ -328,8 +327,9 @@ exports[`ProjectCard renders 1`] = `
                                     }
                                     size={18}
                                   >
-                                    <ProjectAvatar
+                                    <Avatar
                                       className="css-1neg7x4-StyledAvatar e165dl3i1"
+                                      forwardedRef={null}
                                       hasTooltip={false}
                                       project={
                                         Object {
@@ -356,73 +356,104 @@ exports[`ProjectCard renders 1`] = `
                                       }
                                       size={18}
                                     >
-                                      <Tooltip
-                                        containerDisplayMode="inline-block"
-                                        disabled={true}
-                                        position="top"
-                                      >
-                                        <PlatformList
-                                          className="css-1neg7x4-StyledAvatar e165dl3i1"
-                                          consistentWidth={false}
-                                          direction="right"
-                                          max={1}
-                                          platforms={
-                                            Array [
-                                              "javascript",
-                                            ]
+                                      <ProjectAvatar
+                                        className="css-1neg7x4-StyledAvatar e165dl3i1"
+                                        forwardedRef={null}
+                                        hasTooltip={false}
+                                        project={
+                                          Object {
+                                            "environments": Array [],
+                                            "hasAccess": true,
+                                            "id": "2",
+                                            "isBookmarked": false,
+                                            "isMember": true,
+                                            "name": "Project Name",
+                                            "platform": "javascript",
+                                            "slug": "project-slug",
+                                            "stats": Array [
+                                              Array [
+                                                1525042800,
+                                                1,
+                                              ],
+                                              Array [
+                                                1525046400,
+                                                2,
+                                              ],
+                                            ],
+                                            "teams": Array [],
                                           }
-                                          size={18}
+                                        }
+                                        size={18}
+                                      >
+                                        <Tooltip
+                                          containerDisplayMode="inline-block"
+                                          disabled={true}
+                                          position="top"
                                         >
-                                          <PlatformIcons
+                                          <PlatformList
                                             className="css-1neg7x4-StyledAvatar e165dl3i1"
                                             consistentWidth={false}
                                             direction="right"
+                                            forwardedRef={null}
                                             max={1}
+                                            platforms={
+                                              Array [
+                                                "javascript",
+                                              ]
+                                            }
                                             size={18}
                                           >
-                                            <div
-                                              className="e165dl3i1 css-corue1-PlatformIcons-StyledAvatar ezvce7z0"
+                                            <PlatformIcons
+                                              className="css-1neg7x4-StyledAvatar e165dl3i1"
+                                              consistentWidth={false}
                                               direction="right"
                                               max={1}
                                               size={18}
                                             >
-                                              <StyledPlatformIcon
-                                                key="javascript"
-                                                platform="javascript"
+                                              <div
+                                                className="e165dl3i1 css-corue1-PlatformIcons-StyledAvatar ezvce7z0"
+                                                direction="right"
+                                                max={1}
                                                 size={18}
                                               >
-                                                <Component
-                                                  className="css-d510pr-StyledPlatformIcon ezvce7z1"
+                                                <StyledPlatformIcon
+                                                  key="javascript"
                                                   platform="javascript"
                                                   size={18}
                                                 >
-                                                  <PlatformIcon
+                                                  <Component
                                                     className="css-d510pr-StyledPlatformIcon ezvce7z1"
                                                     platform="javascript"
-                                                    size="18px"
+                                                    size={18}
                                                   >
-                                                    <img
+                                                    <PlatformIcon
                                                       className="css-d510pr-StyledPlatformIcon ezvce7z1"
-                                                      height="18px"
-                                                      src={
-                                                        Object {
-                                                          "default": Object {
-                                                            "id": "test",
-                                                            "viewBox": Object {},
-                                                          },
+                                                      platform="javascript"
+                                                      size="18px"
+                                                    >
+                                                      <img
+                                                        className="css-d510pr-StyledPlatformIcon ezvce7z1"
+                                                        height="18px"
+                                                        src={
+                                                          Object {
+                                                            "default": Object {
+                                                              "id": "test",
+                                                              "viewBox": Object {},
+                                                            },
+                                                          }
                                                         }
-                                                      }
-                                                      width="18px"
-                                                    />
-                                                  </PlatformIcon>
-                                                </Component>
-                                              </StyledPlatformIcon>
-                                            </div>
-                                          </PlatformIcons>
-                                        </PlatformList>
-                                      </Tooltip>
-                                    </ProjectAvatar>
-                                  </Avatar>
+                                                        width="18px"
+                                                      />
+                                                    </PlatformIcon>
+                                                  </Component>
+                                                </StyledPlatformIcon>
+                                              </div>
+                                            </PlatformIcons>
+                                          </PlatformList>
+                                        </Tooltip>
+                                      </ProjectAvatar>
+                                    </Avatar>
+                                  </ForwardRef>
                                 </StyledAvatar>
                               </EmotionCssPropInternal>
                               <DisplayNameAndDescription>
diff --git a/tests/js/spec/views/releases/detail/__snapshots__/releaseCommits.spec.jsx.snap b/tests/js/spec/views/releases/detail/__snapshots__/releaseCommits.spec.jsx.snap
index 81a6710b5f..53a611347d 100644
--- a/tests/js/spec/views/releases/detail/__snapshots__/releaseCommits.spec.jsx.snap
+++ b/tests/js/spec/views/releases/detail/__snapshots__/releaseCommits.spec.jsx.snap
@@ -241,47 +241,55 @@ Users now have access to useful links from the blogs and docs on Spike-protectio
                                           }
                                         }
                                       >
-                                        <LetterAvatar
+                                        <ForwardRef
                                           displayName="Foo Bar"
                                           identifier="example@sentry.io"
                                           round={true}
                                         >
-                                          <Component
-                                            className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                          <LetterAvatar
                                             displayName="Foo Bar"
+                                            forwardedRef={null}
                                             identifier="example@sentry.io"
                                             round={true}
                                           >
-                                            <svg
+                                            <Component
                                               className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                              viewBox="0 0 120 120"
+                                              displayName="Foo Bar"
+                                              forwardedRef={null}
+                                              identifier="example@sentry.io"
+                                              round={true}
                                             >
-                                              <rect
-                                                fill="#847a8c"
-                                                height="120"
-                                                rx="15"
-                                                ry="15"
-                                                width="120"
-                                                x="0"
-                                                y="0"
-                                              />
-                                              <text
-                                                fill="#FFFFFF"
-                                                fontSize="65"
-                                                style={
-                                                  Object {
-                                                    "dominantBaseline": "central",
-                                                  }
-                                                }
-                                                textAnchor="middle"
-                                                x="50%"
-                                                y="50%"
+                                              <svg
+                                                className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                                viewBox="0 0 120 120"
                                               >
-                                                FB
-                                              </text>
-                                            </svg>
-                                          </Component>
-                                        </LetterAvatar>
+                                                <rect
+                                                  fill="#847a8c"
+                                                  height="120"
+                                                  rx="15"
+                                                  ry="15"
+                                                  width="120"
+                                                  x="0"
+                                                  y="0"
+                                                />
+                                                <text
+                                                  fill="#FFFFFF"
+                                                  fontSize="65"
+                                                  style={
+                                                    Object {
+                                                      "dominantBaseline": "central",
+                                                    }
+                                                  }
+                                                  textAnchor="middle"
+                                                  x="50%"
+                                                  y="50%"
+                                                >
+                                                  FB
+                                                </text>
+                                              </svg>
+                                            </Component>
+                                          </LetterAvatar>
+                                        </ForwardRef>
                                       </span>
                                     </StyledBaseAvatar>
                                   </Tooltip>
@@ -611,47 +619,55 @@ Users now have access to useful links from the blogs and docs on Spike-protectio
                                           }
                                         }
                                       >
-                                        <LetterAvatar
+                                        <ForwardRef
                                           displayName="Foo Bar"
                                           identifier="example@sentry.io"
                                           round={true}
                                         >
-                                          <Component
-                                            className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                          <LetterAvatar
                                             displayName="Foo Bar"
+                                            forwardedRef={null}
                                             identifier="example@sentry.io"
                                             round={true}
                                           >
-                                            <svg
+                                            <Component
                                               className="css-1oxr9oh-LetterAvatar e12lgfev0"
-                                              viewBox="0 0 120 120"
+                                              displayName="Foo Bar"
+                                              forwardedRef={null}
+                                              identifier="example@sentry.io"
+                                              round={true}
                                             >
-                                              <rect
-                                                fill="#847a8c"
-                                                height="120"
-                                                rx="15"
-                                                ry="15"
-                                                width="120"
-                                                x="0"
-                                                y="0"
-                                              />
-                                              <text
-                                                fill="#FFFFFF"
-                                                fontSize="65"
-                                                style={
-                                                  Object {
-                                                    "dominantBaseline": "central",
-                                                  }
-                                                }
-                                                textAnchor="middle"
-                                                x="50%"
-                                                y="50%"
+                                              <svg
+                                                className="css-1oxr9oh-LetterAvatar e12lgfev0"
+                                                viewBox="0 0 120 120"
                                               >
-                                                FB
-                                              </text>
-                                            </svg>
-                                          </Component>
-                                        </LetterAvatar>
+                                                <rect
+                                                  fill="#847a8c"
+                                                  height="120"
+                                                  rx="15"
+                                                  ry="15"
+                                                  width="120"
+                                                  x="0"
+                                                  y="0"
+                                                />
+                                                <text
+                                                  fill="#FFFFFF"
+                                                  fontSize="65"
+                                                  style={
+                                                    Object {
+                                                      "dominantBaseline": "central",
+                                                    }
+                                                  }
+                                                  textAnchor="middle"
+                                                  x="50%"
+                                                  y="50%"
+                                                >
+                                                  FB
+                                                </text>
+                                              </svg>
+                                            </Component>
+                                          </LetterAvatar>
+                                        </ForwardRef>
                                       </span>
                                     </StyledBaseAvatar>
                                   </Tooltip>
