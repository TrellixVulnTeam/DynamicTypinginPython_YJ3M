commit 38955792142dcd5e26bd7fce25902964dcafc193
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Feb 22 14:35:29 2013 -0800

    Correct identities behavior and test

diff --git a/src/sentry/templatetags/sentry_helpers.py b/src/sentry/templatetags/sentry_helpers.py
index 692a740619..43bc96eb00 100644
--- a/src/sentry/templatetags/sentry_helpers.py
+++ b/src/sentry/templatetags/sentry_helpers.py
@@ -21,7 +21,7 @@ from sentry.models import Group
 from sentry.web.helpers import group_is_public
 from sentry.utils import to_unicode
 from sentry.utils.avatar import get_gravatar_url
-from sentry.utils.http import absolute_uri, safe_urlencode
+from sentry.utils.http import absolute_uri
 from sentry.utils.javascript import to_json
 from sentry.utils.safe import safe_execute
 from sentry.utils.strings import truncatechars
@@ -39,8 +39,6 @@ register.filter(to_json)
 
 register.simple_tag(absolute_uri)
 
-register.filter('urlencode', safe_urlencode)
-
 
 @register.filter
 def pprint(value, break_after=10):
diff --git a/tests/sentry/web/frontend/accounts/tests.py b/tests/sentry/web/frontend/accounts/tests.py
index 2d94a16495..79d4dd700c 100644
--- a/tests/sentry/web/frontend/accounts/tests.py
+++ b/tests/sentry/web/frontend/accounts/tests.py
@@ -10,6 +10,7 @@ from django.http import HttpRequest
 from sentry.models import UserOption, LostPasswordHash
 from sentry.testutils import TestCase, fixture, before
 from sentry.web.frontend.accounts import login_redirect
+from social_auth.models import UserSocialAuth
 
 
 class LoginTest(TestCase):
@@ -273,6 +274,7 @@ class ListIdentitiesTest(TestCase):
 
     def test_renders_with_required_context(self):
         self.login_as(self.user)
+        UserSocialAuth.objects.create(user=self.user, provider='github')
 
         resp = self.client.get(self.path)
         assert resp.status_code == 200
