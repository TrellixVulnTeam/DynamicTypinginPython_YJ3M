commit 03dd603640fe3ae75b9ebce9572499cef2cda0ad
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Tue Mar 20 14:47:52 2018 -0700

    fix(settings): Use browserHistory.replace for org slug (#7724)

diff --git a/src/sentry/static/sentry/app/views/settings/organization/general/organizationGeneralSettingsView.jsx b/src/sentry/static/sentry/app/views/settings/organization/general/organizationGeneralSettingsView.jsx
index 2e13451116..2b88aff02e 100644
--- a/src/sentry/static/sentry/app/views/settings/organization/general/organizationGeneralSettingsView.jsx
+++ b/src/sentry/static/sentry/app/views/settings/organization/general/organizationGeneralSettingsView.jsx
@@ -102,7 +102,7 @@ const OrganizationGeneralSettingsView = createReactClass({
   handleSave(prevData, data) {
     if (data.slug && data.slug !== prevData.slug) {
       changeOrganizationSlug(prevData, data);
-      browserHistory.push(`/settings/organization/${data.slug}/settings/`);
+      browserHistory.replace(`/settings/organization/${data.slug}/settings/`);
     } else {
       // TODO(dcramer): this should propagate
       this.setState({data});
diff --git a/tests/js/spec/views/organizationGeneralSettingsView.spec.jsx b/tests/js/spec/views/organizationGeneralSettingsView.spec.jsx
index a4f47afd58..e8fcbb7569 100644
--- a/tests/js/spec/views/organizationGeneralSettingsView.spec.jsx
+++ b/tests/js/spec/views/organizationGeneralSettingsView.spec.jsx
@@ -9,7 +9,10 @@ jest.mock('jquery');
 
 jest.mock('react-router', () => {
   return {
-    browserHistory: {push: jest.fn()},
+    browserHistory: {
+      push: jest.fn(),
+      replace: jest.fn(),
+    },
   };
 });
 
@@ -23,6 +26,7 @@ describe('OrganizationGeneralSettingsView', function() {
       body: TestStubs.Organization(),
     });
     browserHistory.push.mockReset();
+    browserHistory.replace.mockReset();
   });
 
   it('has LoadingError on error', function(done) {
@@ -99,7 +103,7 @@ describe('OrganizationGeneralSettingsView', function() {
 
       setTimeout(() => {
         // Not sure why this needs to be async, but it does
-        expect(browserHistory.push).toHaveBeenCalledWith(
+        expect(browserHistory.replace).toHaveBeenCalledWith(
           '/settings/organization/new-slug/settings/'
         );
         done();
