commit 936c38c39b2c31c519213b5eeb6872143415eacf
Author: Billy Vong <billyvg@gmail.com>
Date:   Mon Aug 28 18:37:46 2017 -0700

    fix(test): change condition for "IS_PERCY" env var
    
    * remove condition NODE_ENV != "production"
    * add conditions: CI == true && TRAVIS == true
    * remove dynamic timestamp in DynamicWrapper prop (for storybook)

diff --git a/docs-ui/components/dynamicWrapper.stories.js b/docs-ui/components/dynamicWrapper.stories.js
index b4d0b112f0..cf904806cc 100644
--- a/docs-ui/components/dynamicWrapper.stories.js
+++ b/docs-ui/components/dynamicWrapper.stories.js
@@ -13,6 +13,8 @@ storiesOf('DynamicWrapper', module).add(
     (storybook webpack config has webpack.DefinePlugin for "process.env.IS_PERCY")
     `
   )(() => {
-    return <DynamicWrapper fixed="Fixed Content" value={new Date().toString()} />;
+    return (
+      <DynamicWrapper fixed="Fixed Content" value="Pretend this is a dynamic value" />
+    );
   })
 );
diff --git a/webpack.config.js b/webpack.config.js
index 91abcab6cb..b9d80b8337 100644
--- a/webpack.config.js
+++ b/webpack.config.js
@@ -162,7 +162,9 @@ var appConfig = {
     new webpack.DefinePlugin({
       'process.env': {
         NODE_ENV: JSON.stringify(process.env.NODE_ENV),
-        IS_PERCY: JSON.stringify(!IS_PRODUCTION && !!process.env.PERCY_TOKEN)
+        IS_PERCY: JSON.stringify(
+          process.env.CI && !!process.env.PERCY_TOKEN && !!process.env.TRAVIS
+        )
       }
     }),
     // restrict translation files pulled into dist/app.js to only those specified
@@ -264,7 +266,6 @@ var minificationPlugins = [
       require('zlib').gzip(buffer, callback);
     },
     regExp: /\.(js|map|css|svg|html|txt|ico|eot|ttf)$/
-
   }),
 
   // Disable annoying UglifyJS warnings that pollute Travis log output
