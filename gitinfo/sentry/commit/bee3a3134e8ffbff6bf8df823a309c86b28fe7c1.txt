commit bee3a3134e8ffbff6bf8df823a309c86b28fe7c1
Author: Mark Story <mark@sentry.io>
Date:   Tue Apr 7 09:45:13 2020 -0400

    fix(ui) Fix missing padding and old icons in issue tag values (#18112)
    
    Issue tag values was missing spacing between a user's avatar and name.
    However these items beside each other are better represented by
    a UserBadge. I've also replace the old font icons with new SVG based
    ones and fixed a missing external link.

diff --git a/src/sentry/static/sentry/app/views/organizationGroupDetails/groupTagValues.tsx b/src/sentry/static/sentry/app/views/organizationGroupDetails/groupTagValues.tsx
index 7f1bc350e2..71c455a88a 100644
--- a/src/sentry/static/sentry/app/views/organizationGroupDetails/groupTagValues.tsx
+++ b/src/sentry/static/sentry/app/views/organizationGroupDetails/groupTagValues.tsx
@@ -7,15 +7,17 @@ import styled from '@emotion/styled';
 import {isUrl, percent} from 'app/utils';
 import {t} from 'app/locale';
 import AsyncComponent from 'app/components/asyncComponent';
-import UserAvatar from 'app/components/avatar/userAvatar';
+import UserBadge from 'app/components/idBadge/userBadge';
 import Button from 'app/components/button';
 import DeviceName from 'app/components/deviceName';
 import ExternalLink from 'app/components/links/externalLink';
 import GlobalSelectionLink from 'app/components/globalSelectionLink';
+import {IconMail, IconOpen} from 'app/icons';
 import Pagination from 'app/components/pagination';
 import TimeSince from 'app/components/timeSince';
 import DataExport, {ExportQueryType} from 'app/components/dataExport';
 import space from 'app/styles/space';
+import theme from 'app/utils/theme';
 import {Group, Tag, TagValue} from 'app/types';
 
 type RouteParams = {
@@ -46,10 +48,6 @@ class GroupTagValues extends AsyncComponent<
     ];
   }
 
-  getUserDisplayName(item: TagValue): string {
-    return item.email || item.username || item.identifier || item.ipAddress || item.value;
-  }
-
   renderBody() {
     const {
       group,
@@ -74,31 +72,30 @@ class GroupTagValues extends AsyncComponent<
             <span className="label">{pct}</span>
           </td>
           <td>
-            <GlobalSelectionLink
-              to={{
-                pathname: issuesPath,
-                query: {query},
-              }}
-            >
-              {tag.key === 'user' ? (
-                <React.Fragment>
-                  <UserAvatar user={tagValue} size={20} className="avatar" />
-                  <span className="m-left">{this.getUserDisplayName(tagValue)}</span>
-                </React.Fragment>
-              ) : (
-                <DeviceName value={tagValue.name} />
+            <ValueWrapper>
+              <GlobalSelectionLink
+                to={{
+                  pathname: issuesPath,
+                  query: {query},
+                }}
+              >
+                {tag.key === 'user' ? (
+                  <UserBadge user={tagValue} avatarSize={20} hideEmail />
+                ) : (
+                  <DeviceName value={tagValue.name} />
+                )}
+              </GlobalSelectionLink>
+              {tagValue.email && (
+                <StyledExternalLink href={`mailto:${tagValue.email}`}>
+                  <IconMail size="xs" color={theme.gray2} />
+                </StyledExternalLink>
+              )}
+              {isUrl(tagValue.value) && (
+                <StyledExternalLink href={tagValue.value}>
+                  <IconOpen size="xs" color={theme.gray2} />
+                </StyledExternalLink>
               )}
-            </GlobalSelectionLink>
-            {tagValue.email && (
-              <ExternalLink href={`mailto:${tagValue.email}`} className="external-icon">
-                <em className="icon-envelope" />
-              </ExternalLink>
-            )}
-            {isUrl(tagValue.value) && (
-              <a href={tagValue.value} className="external-icon">
-                <em className="icon-open" />
-              </a>
-            )}
+            </ValueWrapper>
           </td>
           <td>
             <TimeSince date={tagValue.lastSeen} />
@@ -162,6 +159,13 @@ const BrowserExportButton = styled(Button)`
 const TableHeader = styled('th')<{width: number}>`
   width: ${p => p.width}px;
 `;
+const ValueWrapper = styled('div')`
+  display: flex;
+  align-items: center;
+`;
+const StyledExternalLink = styled(ExternalLink)`
+  margin-left: ${space(0.5)};
+`;
 
 export {GroupTagValues};
 export default GroupTagValues;
