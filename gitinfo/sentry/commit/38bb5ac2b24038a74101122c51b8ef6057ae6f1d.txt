commit 38bb5ac2b24038a74101122c51b8ef6057ae6f1d
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Wed Jan 30 10:31:47 2019 -0800

    fix(events): Project event redirect conditionally links to new pages (#11772)
    
    Adapts the project event redirect mechanism to work for Sentry 10.

diff --git a/src/sentry/static/sentry/app/routes.jsx b/src/sentry/static/sentry/app/routes.jsx
index d2b8e72d28..f3b38dcf34 100644
--- a/src/sentry/static/sentry/app/routes.jsx
+++ b/src/sentry/static/sentry/app/routes.jsx
@@ -795,6 +795,11 @@ function routes() {
               component={errorHandler(LazyLoad)}
             />
           </Route>
+          <Route
+            path="/organizations/:orgId/projects/:projectId/events/:eventId/"
+            component={errorHandler(ProjectEventRedirect)}
+          />
+
           <Route
             path="/organizations/:orgId/issues/"
             componentPromise={() =>
diff --git a/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx b/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx
index 79c9c28bf2..3660c9f51d 100644
--- a/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx
+++ b/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx
@@ -29,7 +29,7 @@ class EventsTableBody extends React.PureComponent {
       const trimmedMessage = event.message.split('\n')[0].substr(0, 100);
 
       const eventLink = new Set(organization.features).has('sentry10')
-        ? `/organizations/${organization.slug}/events/${event.eventID}/`
+        ? `/organizations/${organization.slug}/projects/${project.slug}/events/${event.eventID}/`
         : `/${organization.slug}/${project.slug}/events/${event.eventID}/`;
 
       return (
diff --git a/src/sentry/web/frontend/project_event.py b/src/sentry/web/frontend/project_event.py
index e0491d1c37..064e8737b3 100644
--- a/src/sentry/web/frontend/project_event.py
+++ b/src/sentry/web/frontend/project_event.py
@@ -2,6 +2,7 @@ from __future__ import absolute_import
 
 from django.http import HttpResponseRedirect, Http404
 from django.core.urlresolvers import reverse
+from sentry import features
 
 from sentry.models import Event
 from sentry.web.frontend.base import ProjectView
@@ -21,6 +22,16 @@ class ProjectEventRedirect(ProjectView):
         except Event.DoesNotExist:
             raise Http404()
 
+        if features.has('organizations:sentry10', organization, actor=request.user):
+            return HttpResponseRedirect(
+                reverse(
+                    'sentry-organization-event-detail',
+                    args=[
+                        organization.slug,
+                        event.group_id,
+                        event.id])
+            )
+
         return HttpResponseRedirect(
             reverse(
                 'sentry-group-event',
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 952893eb44..00c86efb9b 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -419,6 +419,11 @@ urlpatterns += patterns(
         react_page_view,
         name='sentry-organization-event-detail'
     ),
+    url(
+        r'^organizations/(?P<organization_slug>[\w_-]+)/projects/(?P<project_slug>[\w_-]+)/events/(?P<client_event_id>[\w_-]+)/$',
+        ProjectEventRedirect.as_view(),
+        name='sentry-project-event-redirect'
+    ),
     url(
         r'^organizations/(?P<organization_slug>[\w_-]+)/api-keys/$',
         react_page_view,
