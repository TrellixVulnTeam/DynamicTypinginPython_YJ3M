commit decbed1c383370e6886e85c2ee084196694654a2
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue Nov 24 22:34:58 2015 +0100

    Send django messages to React.
    
    Previously a message emitted by a legacy view was only shown if the
    next redirect went to a legacy view.  We now also load those messages
    into the react app on load.  This is good enough to get at least some
    of the legacy features working again with better user feedback.
    
    Refs GH-2358

diff --git a/src/sentry/static/sentry/app/views/app.jsx b/src/sentry/static/sentry/app/views/app.jsx
index e2b2b0de20..286bfa3ccd 100644
--- a/src/sentry/static/sentry/app/views/app.jsx
+++ b/src/sentry/static/sentry/app/views/app.jsx
@@ -5,6 +5,7 @@ import AlertActions from '../actions/alertActions.jsx';
 import Indicators from '../components/indicators';
 import LoadingIndicator from '../components/loadingIndicator';
 import OrganizationStore from '../stores/organizationStore';
+import ConfigStore from '../stores/configStore';
 
 const App = React.createClass({
   getInitialState() {
@@ -44,6 +45,10 @@ const App = React.createClass({
       error: () => {} // TODO: do something?
     });
 
+    ConfigStore.get('messages').forEach((msg) => {
+      AlertActions.addAlert(msg.message, msg.level);
+    });
+
   },
 
   componentWillUnmount() {
diff --git a/src/sentry/templatetags/sentry_react.py b/src/sentry/templatetags/sentry_react.py
index 0acd8653ba..f04a97cb76 100644
--- a/src/sentry/templatetags/sentry_react.py
+++ b/src/sentry/templatetags/sentry_react.py
@@ -5,6 +5,7 @@ import sentry
 from django import template
 from django.conf import settings
 from django.utils.html import mark_safe
+from django.contrib.messages import get_messages
 from pkg_resources import parse_version
 
 from sentry import features, options
@@ -35,8 +36,10 @@ def _get_version_info():
 def get_react_config(context):
     if 'request' in context:
         user = context['request'].user
+        messages = get_messages(context['request'])
     else:
         user = None
+        messages = []
 
     if user:
         user = extract_lazy_object(user)
@@ -53,6 +56,10 @@ def get_react_config(context):
         'version': _get_version_info(),
         'features': enabled_features,
         'mediaUrl': get_asset_url('sentry', ''),
+        'messages': [{
+            'message': msg.message,
+            'level': msg.tags,
+        } for msg in messages],
     }
     if user and user.is_authenticated():
         context.update({
