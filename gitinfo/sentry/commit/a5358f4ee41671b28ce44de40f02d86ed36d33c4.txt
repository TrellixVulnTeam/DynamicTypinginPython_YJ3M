commit a5358f4ee41671b28ce44de40f02d86ed36d33c4
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Jan 9 11:46:43 2018 -0800

    feat: Add organizations:environments feature flag (#6921)

diff --git a/src/sentry/api/serializers/models/organization.py b/src/sentry/api/serializers/models/organization.py
index b0840826f3..2b76ba94de 100644
--- a/src/sentry/api/serializers/models/organization.py
+++ b/src/sentry/api/serializers/models/organization.py
@@ -101,6 +101,8 @@ class DetailedOrganizationSerializer(OrganizationSerializer):
             feature_list.append('new-settings')
         if features.has('organizations:require-2fa', obj, actor=user):
             feature_list.append('require-2fa')
+        if features.has('organizations:environments', obj, actor=user):
+            feature_list.append('environments')
 
         if getattr(obj.flags, 'allow_joinleave'):
             feature_list.append('open-membership')
diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 1e7982e3bd..fcd21c826f 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -747,6 +747,7 @@ SENTRY_FEATURES = {
     'organizations:invite-members': True,
     'organizations:new-settings': False,
     'organizations:require-2fa': False,
+    'organizations:environments': False,
     'projects:global-events': False,
     'projects:plugins': True,
     'projects:dsym': False,
diff --git a/src/sentry/features/__init__.py b/src/sentry/features/__init__.py
index c9f9ba6cd5..629baa091a 100644
--- a/src/sentry/features/__init__.py
+++ b/src/sentry/features/__init__.py
@@ -31,6 +31,7 @@ default_manager.add('projects:similarity-indexing', ProjectFeature)  # NOQA
 default_manager.add('projects:discard-groups', ProjectFeature)  # NOQA
 default_manager.add('projects:custom-inbound-filters', ProjectFeature)  # NOQA
 default_manager.add('projects:minidump', ProjectFeature)  # NOQA
+default_manager.add('organizations:environments', OrganizationFeature)  # NOQA
 
 # expose public api
 add = default_manager.add
