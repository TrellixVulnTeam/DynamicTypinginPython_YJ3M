commit 0d527d94e51a86f5dacdc6e61d6131ac18e8ed1d
Author: Eric Feng <ehfeng@users.noreply.github.com>
Date:   Wed Apr 11 14:03:03 2018 -0700

    feat(auditlog): Add Trial and Plan Events to Audit Log (#6671)
    
    * feat(auditlog): Add Trial and Plan Events to Audit Log
    
    Adding trial and plan event types for audit log entries so hosted
    Sentry can include these in customer audit logs.
    
    See https://github.com/getsentry/sentry/pull/6617
    
    * incrementing for meredith's branch
    
    * removing merge artifact

diff --git a/src/sentry/models/auditlogentry.py b/src/sentry/models/auditlogentry.py
index 0d48a43967..d28c1fa6a5 100644
--- a/src/sentry/models/auditlogentry.py
+++ b/src/sentry/models/auditlogentry.py
@@ -64,6 +64,8 @@ class AuditLogEntryEvent(object):
     RULE_REMOVE = 82
 
     SET_ONDEMAND = 90
+    TRIAL_STARTED = 91
+    PLAN_CHANGED = 92
 
     SERVICEHOOK_ADD = 100
     SERVICEHOOK_EDIT = 101
@@ -130,7 +132,7 @@ class AuditLogEntry(Model):
             (AuditLogEntryEvent.RULE_ADD, 'rule.create'),
             (AuditLogEntryEvent.RULE_EDIT, 'rule.edit'),
             (AuditLogEntryEvent.RULE_REMOVE, 'rule.remove'),
-            (AuditLogEntryEvent.SET_ONDEMAND, 'ondemand.edit'),
+
             (AuditLogEntryEvent.SERVICEHOOK_ADD, 'serivcehook.create'),
             (AuditLogEntryEvent.SERVICEHOOK_EDIT, 'serivcehook.edit'),
             (AuditLogEntryEvent.SERVICEHOOK_REMOVE, 'serivcehook.remove'),
@@ -138,7 +140,11 @@ class AuditLogEntry(Model):
             (AuditLogEntryEvent.SERVICEHOOK_DISABLE, 'serivcehook.disable'),
             (AuditLogEntryEvent.INTEGRATION_ADD, 'integration.add'),
             (AuditLogEntryEvent.INTEGRATION_EDIT, 'integration.edit'),
-            (AuditLogEntryEvent.INTEGRATION_REMOVE, 'integration.remove')
+            (AuditLogEntryEvent.INTEGRATION_REMOVE, 'integration.remove'),
+
+            (AuditLogEntryEvent.SET_ONDEMAND, 'ondemand.edit'),
+            (AuditLogEntryEvent.TRIAL_STARTED, 'trial.started'),
+            (AuditLogEntryEvent.PLAN_CHANGED, 'plan.changed'),
         )
     )
     ip_address = models.GenericIPAddressField(null=True, unpack_ipv4=True)
@@ -268,6 +274,10 @@ class AuditLogEntry(Model):
 
         elif self.event == AuditLogEntryEvent.SET_ONDEMAND:
             return 'changed on-demand max spend to $%d' % (self.data['ondemand'] / 100, )
+        elif self.event == AuditLogEntryEvent.TRIAL_STARTED:
+            return 'started trial'
+        elif self.event == AuditLogEntryEvent.PLAN_CHANGED:
+            return 'changed plan to %s' % (self.data['plan_name'], )
 
         elif self.event == AuditLogEntryEvent.SERVICEHOOK_ADD:
             return 'added a service hook for "%s"' % (truncatechars(self.data['url'], 64), )
