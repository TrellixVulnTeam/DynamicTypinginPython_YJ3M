commit ba49d4c09b23a034ef90756948e096ccc932db36
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Apr 3 21:18:30 2012 -0700

    Ensure plugins can determine if they are allowed to be toggled for projects

diff --git a/sentry/plugins/base.py b/sentry/plugins/base.py
index 549991fc1c..fd4634b6d2 100644
--- a/sentry/plugins/base.py
+++ b/sentry/plugins/base.py
@@ -154,6 +154,8 @@ class IPlugin(local):
         """
         if not self.enabled:
             return False
+        if not self.can_enable_for_projects():
+            return True
         if project:
             project_enabled = self.get_option('enabled', project)
             if project_enabled is False:
@@ -222,6 +224,12 @@ class IPlugin(local):
     def has_project_conf(self):
         return self.project_conf_form is not None
 
+    def can_enable_for_projects(self):
+        """
+        Returns a boolean describing whether this plugin can be enabled on a per project basis
+        """
+        return True
+
     def get_form_initial(self, project=None):
         return {}
 
diff --git a/sentry/templates/sentry/projects/plugins/list.html b/sentry/templates/sentry/projects/plugins/list.html
index 529a20a18a..8da78eec8d 100644
--- a/sentry/templates/sentry/projects/plugins/list.html
+++ b/sentry/templates/sentry/projects/plugins/list.html
@@ -42,7 +42,11 @@
                             {% if plugin.version %}{{ plugin.version }}{% else %}<em>{% trans "n/a" %}</em>{% endif %}
                         </td>
                         <td style="text-align:center;">
-                            <input type="checkbox" name="plugin" value="{{ plugin.slug }}"{% if is_enabled %} checked="checked"{% endif %}/>
+                            {% if plugin.can_enable_for_projects %}
+                                <input type="checkbox" name="plugin" value="{{ plugin.slug }}"{% if is_enabled %} checked="checked"{% endif %}/>
+                            {% else %}
+                                <em>{% trans "n/a" %}</em>
+                            {% endif %}
                         </td>
                     </tr>
                 {% endfor %}
diff --git a/sentry/web/frontend/projects.py b/sentry/web/frontend/projects.py
index 9f7995d668..39c6f1eb24 100644
--- a/sentry/web/frontend/projects.py
+++ b/sentry/web/frontend/projects.py
@@ -403,7 +403,8 @@ def manage_plugins(request, project):
     if request.POST:
         enabled = set(request.POST.getlist('plugin'))
         for plugin in plugins.all():
-            plugin.set_option('enabled', plugin.slug in enabled, project)
+            if plugin.can_enable_for_projects():
+                plugin.set_option('enabled', plugin.slug in enabled, project)
         return HttpResponseRedirect(request.path + '?success=1')
 
     context = csrf(request)
diff --git a/setup.py b/setup.py
index 4fa217e26c..e8f8550068 100755
--- a/setup.py
+++ b/setup.py
@@ -50,7 +50,7 @@ install_requires = [
 
 setup(
     name='sentry',
-    version='3.8.0',
+    version='3.8.1',
     author='David Cramer',
     author_email='dcramer@gmail.com',
     url='http://github.com/dcramer/sentry',
