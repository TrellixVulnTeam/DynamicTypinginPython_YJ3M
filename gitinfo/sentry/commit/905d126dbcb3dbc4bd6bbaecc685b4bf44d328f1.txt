commit 905d126dbcb3dbc4bd6bbaecc685b4bf44d328f1
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Sep 15 13:08:43 2017 -0700

    fix(plugins): Various fixes for repository providers
    
    This fixes some behavior as noticed in VSTS:
    
    - Repository config is no longer hardcoded to 'name'
    - Internal errors are handled much better
    - Propgation of changes is more correct

diff --git a/src/sentry/static/sentry/app/views/organizationRepositories.jsx b/src/sentry/static/sentry/app/views/organizationRepositories.jsx
index fc73a314ba..5de895ee3b 100644
--- a/src/sentry/static/sentry/app/views/organizationRepositories.jsx
+++ b/src/sentry/static/sentry/app/views/organizationRepositories.jsx
@@ -2,11 +2,10 @@ import PropTypes from 'prop-types';
 import React from 'react';
 import Modal from 'react-bootstrap/lib/Modal';
 
-import ApiMixin from '../mixins/apiMixin';
+import AsyncView from './asyncView';
 import {FormState} from '../components/forms';
 import DropdownLink from '../components/dropdownLink';
 import IndicatorStore from '../stores/indicatorStore';
-import LoadingIndicator from '../components/loadingIndicator';
 import MenuItem from '../components/menuItem';
 import OrganizationHomeContainer from '../components/organizations/homeContainer';
 import PluginComponentBase from '../components/bases/pluginComponentBase';
@@ -18,16 +17,18 @@ const UNKNOWN_ERROR = {
 };
 
 class AddRepositoryLink extends PluginComponentBase {
+  static propTypes = {
+    provider: PropTypes.object.isRequired
+  };
+
   constructor(props, context) {
     super(props, context);
 
     Object.assign(this.state, {
-      isModalOpen: false,
+      ...this.getDefaultState(),
       fieldList: null,
       loading: true,
-      state: FormState.LOADING,
-      error: {},
-      formData: {}
+      state: FormState.LOADING
     });
 
     ['onOpen', 'onCancel', 'formSubmit', 'changeField'].map(
@@ -35,12 +36,20 @@ class AddRepositoryLink extends PluginComponentBase {
     );
   }
 
+  getDefaultState() {
+    return {
+      isModalOpen: false,
+      error: {},
+      formData: {}
+    };
+  }
+
   onOpen() {
     this.setState({isModalOpen: true});
   }
 
   onCancel() {
-    this.setState({isModalOpen: false});
+    this.setState(this.getDefaultState());
   }
 
   formSubmit(ev) {
@@ -52,7 +61,13 @@ class AddRepositoryLink extends PluginComponentBase {
 
   onSubmit() {
     // TODO(dcramer): set form saving state
-    let repoName = {name: parseRepo(this.state.formData.name)};
+    let formData = {
+      ...this.state.formData,
+      provider: this.props.provider.id
+    };
+    if (formData.name) {
+      formData.name = parseRepo(formData.name);
+    }
 
     this.setState(
       {
@@ -60,13 +75,10 @@ class AddRepositoryLink extends PluginComponentBase {
       },
       () => {
         this.api.request(`/organizations/${this.props.orgId}/repos/`, {
-          data: {
-            provider: this.props.provider.id,
-            ...repoName
-          },
+          data: formData,
           method: 'POST',
           success: this.onSaveSuccess.bind(this, data => {
-            this.setState({isModalOpen: false});
+            this.setState({isModalOpen: false, formData: {}, error: {}});
             this.props.onSuccess(data);
           }),
           error: this.onSaveError.bind(this, error => {
@@ -82,9 +94,12 @@ class AddRepositoryLink extends PluginComponentBase {
   }
 
   changeField(name, value) {
-    let formData = this.state.formData;
-    formData[name] = value;
-    this.setState({[name]: formData});
+    this.setState(state => {
+      state.formData = {
+        ...state.formData,
+        [name]: value
+      };
+    });
   }
 
   renderForm() {
@@ -155,7 +170,7 @@ class AddRepositoryLink extends PluginComponentBase {
   }
 
   renderModal() {
-    let state = this.state.state;
+    let {error, state} = this.state;
     return (
       <Modal show={this.state.isModalOpen} animation={false}>
         <div className="modal-header">
@@ -166,22 +181,24 @@ class AddRepositoryLink extends PluginComponentBase {
         <div className="modal-body">
           {this.renderBody()}
         </div>
-        <div className="modal-footer">
-          <button
-            type="button"
-            className="btn btn-default"
-            onClick={this.onCancel}
-            disabled={state === FormState.SAVING}>
-            {t('Cancel')}
-          </button>
-          <button
-            type="button"
-            className="btn btn-primary"
-            onClick={this.onSubmit}
-            disabled={state === FormState.SAVING}>
-            {t('Save Changes')}
-          </button>
-        </div>
+        {!error || error.error_type !== 'unknown' || error.message
+          ? <div className="modal-footer">
+              <button
+                type="button"
+                className="btn btn-default"
+                onClick={this.onCancel}
+                disabled={state === FormState.SAVING}>
+                {t('Cancel')}
+              </button>
+              <button
+                type="button"
+                className="btn btn-primary"
+                onClick={this.onSubmit}
+                disabled={state === FormState.SAVING}>
+                {t('Save Changes')}
+              </button>
+            </div>
+          : null}
       </Modal>
     );
   }
@@ -197,60 +214,16 @@ class AddRepositoryLink extends PluginComponentBase {
   }
 }
 
-AddRepositoryLink.propTypes = {
-  provider: PropTypes.object.isRequired
-};
-
-const OrganizationRepositories = React.createClass({
-  mixins: [ApiMixin],
-
-  getInitialState() {
-    return {
-      loading: true,
-      error: false,
-      itemList: null,
-      repoConfig: null
-    };
-  },
-
-  componentWillMount() {
-    this.fetchData();
-  },
-
-  fetchData() {
-    this.api.request(`/organizations/${this.props.params.orgId}/repos/?status=`, {
-      method: 'GET',
-      success: data => {
-        this.setState({
-          itemList: data,
-          loading: !this.state.repoConfig
-        });
-      },
-      error: () => {
-        this.setState({
-          loading: !this.state.repoConfig,
-          error: true
-        });
-      }
-    });
-    this.api.request(`/organizations/${this.props.params.orgId}/config/repos/`, {
-      method: 'GET',
-      success: data => {
-        this.setState({
-          repoConfig: data,
-          loading: !this.state.itemList
-        });
-      },
-      error: () => {
-        this.setState({
-          loading: !this.state.itemList,
-          error: true
-        });
-      }
-    });
-  },
+class OrganizationRepositories extends AsyncView {
+  getEndpoints() {
+    let {orgId} = this.props.params;
+    return [
+      ['itemList', `/organizations/${orgId}/repos/`, {query: {status: ''}}],
+      ['repoConfig', `/organizations/${orgId}/config/repos/`]
+    ];
+  }
 
-  deleteRepo(repo) {
+  deleteRepo = repo => {
     // eslint-disable-next-line no-alert
     if (!confirm(t('Are you sure you want to remove this repository?'))) return;
 
@@ -277,9 +250,9 @@ const OrganizationRepositories = React.createClass({
         IndicatorStore.remove(indicator);
       }
     });
-  },
+  };
 
-  cancelDelete(repo) {
+  cancelDelete = repo => {
     let indicator = IndicatorStore.add(t('Saving changes..'));
     this.api.request(`/organizations/${this.props.params.orgId}/repos/${repo.id}/`, {
       method: 'PUT',
@@ -304,15 +277,15 @@ const OrganizationRepositories = React.createClass({
         IndicatorStore.remove(indicator);
       }
     });
-  },
+  };
 
-  onAddRepo(repo) {
+  onAddRepo = repo => {
     let itemList = this.state.itemList;
     itemList.push(repo);
     this.setState({
       itemList: sortArray(itemList, item => item.name)
     });
-  },
+  };
 
   getStatusLabel(repo) {
     switch (repo.status) {
@@ -325,11 +298,13 @@ const OrganizationRepositories = React.createClass({
       default:
         return null;
     }
-  },
+  }
 
-  render() {
-    if (this.state.loading) return <LoadingIndicator />;
+  getTitle() {
+    return 'Repositories';
+  }
 
+  renderBody() {
     let orgId = this.props.params.orgId;
     let itemList = this.state.itemList;
 
@@ -443,6 +418,6 @@ const OrganizationRepositories = React.createClass({
       </OrganizationHomeContainer>
     );
   }
-});
+}
 
 export default OrganizationRepositories;
diff --git a/tests/js/setup.js b/tests/js/setup.js
index 0d87a3a84b..2f24e42797 100644
--- a/tests/js/setup.js
+++ b/tests/js/setup.js
@@ -20,8 +20,13 @@ window.TestStubs = {
     isActive: sinon.spy(),
     createHref: sinon.spy()
   }),
+  location: () => ({
+    query: {},
+    pathame: '/mock-pathname/'
+  }),
   Team: (...params) => {
     return {
+      id: '1',
       slug: 'team-slug',
       name: 'Team Name',
       ...params
@@ -29,6 +34,7 @@ window.TestStubs = {
   },
   Project: (...params) => {
     return {
+      id: '2',
       slug: 'project-slug',
       name: 'Project Name',
       subjectTemplate: '[$project] ${tag:level}: $title',
@@ -39,8 +45,50 @@ window.TestStubs = {
   },
   Organization: (...params) => {
     return {
+      id: '3',
       slug: 'org-slug',
       name: 'Organization Name',
+      access: [
+        'org:read',
+        'org:write',
+        'org:admin',
+        'project:read',
+        'project:write',
+        'project:admin',
+        'team:read',
+        'team:write',
+        'team:admin'
+      ],
+      features: [],
+      onboardingTasks: [],
+      teams: [],
+      ...params
+    };
+  },
+  Repository: (...params) => {
+    return {
+      id: '4',
+      name: 'repo-name',
+      provider: 'github',
+      url: 'https://github.com/example/repo-name',
+      status: 'visible',
+      ...params
+    };
+  },
+  GitHubRepositoryProvider: (...params) => {
+    return {
+      id: 'github',
+      name: 'GitHub',
+      config: [
+        {
+          name: 'name',
+          label: 'Repository Name',
+          type: 'text',
+          placeholder: 'e.g. getsentry/sentry',
+          help: 'Enter your repository name, including the owner.',
+          required: true
+        }
+      ],
       ...params
     };
   }
diff --git a/tests/js/spec/views/__snapshots__/organizationRepositories.spec.jsx.snap b/tests/js/spec/views/__snapshots__/organizationRepositories.spec.jsx.snap
new file mode 100644
index 0000000000..e3e750660a
--- /dev/null
+++ b/tests/js/spec/views/__snapshots__/organizationRepositories.spec.jsx.snap
@@ -0,0 +1,1930 @@
+// Jest Snapshot v1, https://goo.gl/fbAQLP
+
+exports[`OrganizationRepositories render() with a provider renders 1`] = `
+<OrganizationRepositories
+  params={
+    Object {
+      "orgId": "org-slug",
+    }
+  }
+>
+  <DocumentTitle
+    title="Repositories"
+  >
+    <HomeContainer>
+      <div
+        className="organization-home"
+      >
+        <div
+          className="sub-header flex flex-container flex-vertically-centered"
+        >
+          <div>
+            <ProjectSelector
+              organization={
+                Object {
+                  "access": Array [
+                    "org:read",
+                    "org:write",
+                    "org:admin",
+                    "project:read",
+                    "project:write",
+                    "project:admin",
+                    "team:read",
+                    "team:write",
+                    "team:admin",
+                  ],
+                  "features": Array [],
+                  "id": "3",
+                  "name": "Organization Name",
+                  "onboardingTasks": Array [],
+                  "slug": "org-slug",
+                  "teams": Array [],
+                }
+              }
+              projectId={null}
+            >
+              <div
+                className="project-select"
+              >
+                <h3>
+                  <Link
+                    className="home-crumb"
+                    to="/org-slug/"
+                  >
+                    <Link
+                      className="home-crumb"
+                      onlyActiveOnIndex={false}
+                      style={Object {}}
+                      to="/org-slug/"
+                    >
+                      <a
+                        className="home-crumb"
+                        onClick={[Function]}
+                        style={Object {}}
+                      >
+                        <span
+                          className="icon-home"
+                        />
+                      </a>
+                    </Link>
+                  </Link>
+                  Select a project
+                  <DropdownLink
+                    anchorRight={false}
+                    caret={true}
+                    disabled={false}
+                    onClose={[Function]}
+                    onOpen={[Function]}
+                    title=""
+                    topLevelClasses="project-dropdown is-empty"
+                  >
+                    <span
+                      className="project-dropdown is-empty dropdown"
+                    >
+                      <a
+                        className="dropdown-toggle"
+                        data-toggle="dropdown"
+                      >
+                        <i
+                          className="icon-arrow-down"
+                        />
+                      </a>
+                      <ul
+                        className="dropdown-menu"
+                      >
+                        <MenuItem
+                          className="empty-projects-item"
+                          noAnchor={true}
+                        >
+                          <li
+                            className="empty-projects-item"
+                            href={null}
+                            role="presentation"
+                            title={null}
+                          >
+                            <div
+                              className="empty-message"
+                            >
+                              You have no projects.
+                            </div>
+                          </li>
+                        </MenuItem>
+                        <MenuItem
+                          divider={true}
+                        >
+                          <li
+                            className="divider"
+                            href={null}
+                            role="presentation"
+                            title={null}
+                          />
+                        </MenuItem>
+                        <MenuItem
+                          className="empty-projects-item"
+                          noAnchor={true}
+                        >
+                          <li
+                            className="empty-projects-item"
+                            href={null}
+                            role="presentation"
+                            title={null}
+                          >
+                            <a
+                              className="btn btn-primary btn-block"
+                              href="/organizations/org-slug/projects/new/"
+                            >
+                              Create project
+                            </a>
+                          </li>
+                        </MenuItem>
+                      </ul>
+                    </span>
+                  </DropdownLink>
+                </h3>
+              </div>
+            </ProjectSelector>
+          </div>
+          <div
+            className="align-right hidden-xs"
+          >
+            <Button
+              disabled={false}
+              priority="primary"
+              style={
+                Object {
+                  "marginRight": 5,
+                }
+              }
+              to="/organizations/org-slug/projects/new/"
+            >
+              <Link
+                className="button button-primary"
+                disabled={false}
+                onClick={[Function]}
+                onlyActiveOnIndex={false}
+                role="button"
+                style={
+                  Object {
+                    "marginRight": 5,
+                  }
+                }
+                to="/organizations/org-slug/projects/new/"
+              >
+                <a
+                  className="button button-primary"
+                  disabled={false}
+                  onClick={[Function]}
+                  role="button"
+                  style={
+                    Object {
+                      "marginRight": 5,
+                    }
+                  }
+                >
+                  New Project
+                </a>
+              </Link>
+            </Button>
+            <Button
+              disabled={false}
+              priority="primary"
+              to="/organizations/org-slug/teams/new/"
+            >
+              <Link
+                className="button button-primary"
+                disabled={false}
+                onClick={[Function]}
+                onlyActiveOnIndex={false}
+                role="button"
+                style={Object {}}
+                to="/organizations/org-slug/teams/new/"
+              >
+                <a
+                  className="button button-primary"
+                  disabled={false}
+                  onClick={[Function]}
+                  role="button"
+                  style={Object {}}
+                >
+                  New Team
+                </a>
+              </Link>
+            </Button>
+          </div>
+        </div>
+        <div
+          className="container"
+        >
+          <div
+            className="content row"
+          >
+            <div
+              className="col-md-2 org-sidebar"
+            >
+              <HomeSidebar>
+                <div>
+                  <h6
+                    className="nav-header"
+                  >
+                    Organization
+                  </h6>
+                  <ul
+                    className="nav nav-stacked"
+                  >
+                    <ListLink
+                      activeClassName="active"
+                      index={false}
+                      isActive={[Function]}
+                      to="/org-slug/"
+                    >
+                      <li
+                        className=""
+                      >
+                        <Link
+                          onlyActiveOnIndex={false}
+                          style={Object {}}
+                          to="/org-slug/"
+                        >
+                          <a
+                            onClick={[Function]}
+                            style={Object {}}
+                          >
+                            Dashboard
+                          </a>
+                        </Link>
+                      </li>
+                    </ListLink>
+                    <ListLink
+                      activeClassName="active"
+                      index={false}
+                      isActive={[Function]}
+                      to="/organizations/org-slug/teams/"
+                    >
+                      <li
+                        className=""
+                      >
+                        <Link
+                          onlyActiveOnIndex={false}
+                          style={Object {}}
+                          to="/organizations/org-slug/teams/"
+                        >
+                          <a
+                            onClick={[Function]}
+                            style={Object {}}
+                          >
+                            Projects & Teams
+                          </a>
+                        </Link>
+                      </li>
+                    </ListLink>
+                    <ListLink
+                      activeClassName="active"
+                      index={false}
+                      to="/organizations/org-slug/stats/"
+                    >
+                      <li
+                        className=""
+                      >
+                        <Link
+                          onlyActiveOnIndex={false}
+                          style={Object {}}
+                          to="/organizations/org-slug/stats/"
+                        >
+                          <a
+                            onClick={[Function]}
+                            style={Object {}}
+                          >
+                            Stats
+                          </a>
+                        </Link>
+                      </li>
+                    </ListLink>
+                  </ul>
+                  <div>
+                    <h6
+                      className="nav-header with-divider"
+                    >
+                      Issues
+                    </h6>
+                    <ul
+                      className="nav nav-stacked"
+                    >
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/issues/assigned/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/issues/assigned/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Assigned to Me
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/issues/bookmarks/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/issues/bookmarks/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Bookmarks
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/issues/history/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/issues/history/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              History
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                    </ul>
+                  </div>
+                  <div>
+                    <h6
+                      className="nav-header with-divider"
+                    >
+                      Manage
+                    </h6>
+                    <ul
+                      className="nav nav-stacked"
+                    >
+                      <li>
+                        <a
+                          href="/organizations/org-slug/members/"
+                        >
+                          Members
+                           
+                        </a>
+                      </li>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/audit-log/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/audit-log/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Audit Log
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/rate-limits/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/rate-limits/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Rate Limits
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/repos/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/repos/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Repositories
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/settings/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/settings/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Settings
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                    </ul>
+                  </div>
+                </div>
+              </HomeSidebar>
+            </div>
+            <div
+              className="col-md-10"
+            >
+              <div
+                className="pull-right"
+              >
+                <DropdownLink
+                  anchorRight={true}
+                  caret={true}
+                  className="btn btn-primary btn-sm"
+                  disabled={false}
+                  title="Add Repository"
+                >
+                  <span
+                    className="pull-right anchor-right dropdown"
+                  >
+                    <a
+                      className="btn btn-primary btn-sm dropdown-menu-right dropdown-toggle"
+                      data-toggle="dropdown"
+                    >
+                      Add Repository
+                      <i
+                        className="icon-arrow-down"
+                      />
+                    </a>
+                    <ul
+                      className="dropdown-menu"
+                    >
+                      <MenuItem
+                        noAnchor={true}
+                      >
+                        <li
+                          className=""
+                          href={null}
+                          role="presentation"
+                          title={null}
+                        >
+                          <AddRepositoryLink
+                            onSuccess={[Function]}
+                            orgId="org-slug"
+                            provider={
+                              Object {
+                                "config": Array [
+                                  Object {
+                                    "help": "Enter your repository name, including the owner.",
+                                    "label": "Repository Name",
+                                    "name": "name",
+                                    "placeholder": "e.g. getsentry/sentry",
+                                    "required": true,
+                                    "type": "text",
+                                  },
+                                ],
+                                "id": "github",
+                                "name": "GitHub",
+                              }
+                            }
+                          >
+                            <a
+                              onClick={[Function]}
+                            >
+                              GitHub
+                              <Modal
+                                animation={false}
+                                autoFocus={true}
+                                backdrop={true}
+                                bsClass="modal"
+                                dialogComponentClass={[Function]}
+                                enforceFocus={true}
+                                keyboard={true}
+                                manager={
+                                  ModalManager {
+                                    "containers": Array [],
+                                    "data": Array [],
+                                    "handleContainerOverflow": true,
+                                    "hideSiblingNodes": true,
+                                    "modals": Array [],
+                                  }
+                                }
+                                onHide={[Function]}
+                                renderBackdrop={[Function]}
+                                restoreFocus={true}
+                                show={false}
+                              >
+                                <Modal
+                                  autoFocus={true}
+                                  backdrop={true}
+                                  backdropClassName="modal-backdrop"
+                                  backdropTransitionTimeout={150}
+                                  containerClassName="modal-open"
+                                  dialogTransitionTimeout={300}
+                                  enforceFocus={true}
+                                  keyboard={true}
+                                  manager={
+                                    ModalManager {
+                                      "containers": Array [],
+                                      "data": Array [],
+                                      "handleContainerOverflow": true,
+                                      "hideSiblingNodes": true,
+                                      "modals": Array [],
+                                    }
+                                  }
+                                  onEntering={[Function]}
+                                  onExited={[Function]}
+                                  onHide={[Function]}
+                                  renderBackdrop={[Function]}
+                                  restoreFocus={true}
+                                  show={false}
+                                />
+                              </Modal>
+                            </a>
+                          </AddRepositoryLink>
+                        </li>
+                      </MenuItem>
+                    </ul>
+                  </span>
+                </DropdownLink>
+              </div>
+              <h3
+                className="m-b-2"
+              >
+                Repositories
+              </h3>
+              <div
+                className="well blankslate align-center p-x-2 p-y-1"
+              >
+                <div
+                  className="icon icon-lg icon-git-commit"
+                />
+                <h3>
+                  Sentry is better with commit data
+                </h3>
+                <p>
+                  Adding one or more repositories will enable enhanced releases and the ability to resolve Sentry Issues via git message.
+                </p>
+                <p
+                  className="m-b-1"
+                >
+                  <a
+                    className="btn btn-default"
+                    href="https://docs.sentry.io/learn/releases/"
+                  >
+                    Learn more
+                  </a>
+                </p>
+              </div>
+            </div>
+          </div>
+        </div>
+      </div>
+    </HomeContainer>
+  </DocumentTitle>
+</OrganizationRepositories>
+`;
+
+exports[`OrganizationRepositories render() with a provider renders with a repository 1`] = `
+<OrganizationRepositories
+  params={
+    Object {
+      "orgId": "org-slug",
+    }
+  }
+>
+  <DocumentTitle
+    title="Repositories"
+  >
+    <HomeContainer>
+      <div
+        className="organization-home"
+      >
+        <div
+          className="sub-header flex flex-container flex-vertically-centered"
+        >
+          <div>
+            <ProjectSelector
+              organization={
+                Object {
+                  "access": Array [
+                    "org:read",
+                    "org:write",
+                    "org:admin",
+                    "project:read",
+                    "project:write",
+                    "project:admin",
+                    "team:read",
+                    "team:write",
+                    "team:admin",
+                  ],
+                  "features": Array [],
+                  "id": "3",
+                  "name": "Organization Name",
+                  "onboardingTasks": Array [],
+                  "slug": "org-slug",
+                  "teams": Array [],
+                }
+              }
+              projectId={null}
+            >
+              <div
+                className="project-select"
+              >
+                <h3>
+                  <Link
+                    className="home-crumb"
+                    to="/org-slug/"
+                  >
+                    <Link
+                      className="home-crumb"
+                      onlyActiveOnIndex={false}
+                      style={Object {}}
+                      to="/org-slug/"
+                    >
+                      <a
+                        className="home-crumb"
+                        onClick={[Function]}
+                        style={Object {}}
+                      >
+                        <span
+                          className="icon-home"
+                        />
+                      </a>
+                    </Link>
+                  </Link>
+                  Select a project
+                  <DropdownLink
+                    anchorRight={false}
+                    caret={true}
+                    disabled={false}
+                    onClose={[Function]}
+                    onOpen={[Function]}
+                    title=""
+                    topLevelClasses="project-dropdown is-empty"
+                  >
+                    <span
+                      className="project-dropdown is-empty dropdown"
+                    >
+                      <a
+                        className="dropdown-toggle"
+                        data-toggle="dropdown"
+                      >
+                        <i
+                          className="icon-arrow-down"
+                        />
+                      </a>
+                      <ul
+                        className="dropdown-menu"
+                      >
+                        <MenuItem
+                          className="empty-projects-item"
+                          noAnchor={true}
+                        >
+                          <li
+                            className="empty-projects-item"
+                            href={null}
+                            role="presentation"
+                            title={null}
+                          >
+                            <div
+                              className="empty-message"
+                            >
+                              You have no projects.
+                            </div>
+                          </li>
+                        </MenuItem>
+                        <MenuItem
+                          divider={true}
+                        >
+                          <li
+                            className="divider"
+                            href={null}
+                            role="presentation"
+                            title={null}
+                          />
+                        </MenuItem>
+                        <MenuItem
+                          className="empty-projects-item"
+                          noAnchor={true}
+                        >
+                          <li
+                            className="empty-projects-item"
+                            href={null}
+                            role="presentation"
+                            title={null}
+                          >
+                            <a
+                              className="btn btn-primary btn-block"
+                              href="/organizations/org-slug/projects/new/"
+                            >
+                              Create project
+                            </a>
+                          </li>
+                        </MenuItem>
+                      </ul>
+                    </span>
+                  </DropdownLink>
+                </h3>
+              </div>
+            </ProjectSelector>
+          </div>
+          <div
+            className="align-right hidden-xs"
+          >
+            <Button
+              disabled={false}
+              priority="primary"
+              style={
+                Object {
+                  "marginRight": 5,
+                }
+              }
+              to="/organizations/org-slug/projects/new/"
+            >
+              <Link
+                className="button button-primary"
+                disabled={false}
+                onClick={[Function]}
+                onlyActiveOnIndex={false}
+                role="button"
+                style={
+                  Object {
+                    "marginRight": 5,
+                  }
+                }
+                to="/organizations/org-slug/projects/new/"
+              >
+                <a
+                  className="button button-primary"
+                  disabled={false}
+                  onClick={[Function]}
+                  role="button"
+                  style={
+                    Object {
+                      "marginRight": 5,
+                    }
+                  }
+                >
+                  New Project
+                </a>
+              </Link>
+            </Button>
+            <Button
+              disabled={false}
+              priority="primary"
+              to="/organizations/org-slug/teams/new/"
+            >
+              <Link
+                className="button button-primary"
+                disabled={false}
+                onClick={[Function]}
+                onlyActiveOnIndex={false}
+                role="button"
+                style={Object {}}
+                to="/organizations/org-slug/teams/new/"
+              >
+                <a
+                  className="button button-primary"
+                  disabled={false}
+                  onClick={[Function]}
+                  role="button"
+                  style={Object {}}
+                >
+                  New Team
+                </a>
+              </Link>
+            </Button>
+          </div>
+        </div>
+        <div
+          className="container"
+        >
+          <div
+            className="content row"
+          >
+            <div
+              className="col-md-2 org-sidebar"
+            >
+              <HomeSidebar>
+                <div>
+                  <h6
+                    className="nav-header"
+                  >
+                    Organization
+                  </h6>
+                  <ul
+                    className="nav nav-stacked"
+                  >
+                    <ListLink
+                      activeClassName="active"
+                      index={false}
+                      isActive={[Function]}
+                      to="/org-slug/"
+                    >
+                      <li
+                        className=""
+                      >
+                        <Link
+                          onlyActiveOnIndex={false}
+                          style={Object {}}
+                          to="/org-slug/"
+                        >
+                          <a
+                            onClick={[Function]}
+                            style={Object {}}
+                          >
+                            Dashboard
+                          </a>
+                        </Link>
+                      </li>
+                    </ListLink>
+                    <ListLink
+                      activeClassName="active"
+                      index={false}
+                      isActive={[Function]}
+                      to="/organizations/org-slug/teams/"
+                    >
+                      <li
+                        className=""
+                      >
+                        <Link
+                          onlyActiveOnIndex={false}
+                          style={Object {}}
+                          to="/organizations/org-slug/teams/"
+                        >
+                          <a
+                            onClick={[Function]}
+                            style={Object {}}
+                          >
+                            Projects & Teams
+                          </a>
+                        </Link>
+                      </li>
+                    </ListLink>
+                    <ListLink
+                      activeClassName="active"
+                      index={false}
+                      to="/organizations/org-slug/stats/"
+                    >
+                      <li
+                        className=""
+                      >
+                        <Link
+                          onlyActiveOnIndex={false}
+                          style={Object {}}
+                          to="/organizations/org-slug/stats/"
+                        >
+                          <a
+                            onClick={[Function]}
+                            style={Object {}}
+                          >
+                            Stats
+                          </a>
+                        </Link>
+                      </li>
+                    </ListLink>
+                  </ul>
+                  <div>
+                    <h6
+                      className="nav-header with-divider"
+                    >
+                      Issues
+                    </h6>
+                    <ul
+                      className="nav nav-stacked"
+                    >
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/issues/assigned/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/issues/assigned/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Assigned to Me
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/issues/bookmarks/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/issues/bookmarks/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Bookmarks
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/issues/history/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/issues/history/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              History
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                    </ul>
+                  </div>
+                  <div>
+                    <h6
+                      className="nav-header with-divider"
+                    >
+                      Manage
+                    </h6>
+                    <ul
+                      className="nav nav-stacked"
+                    >
+                      <li>
+                        <a
+                          href="/organizations/org-slug/members/"
+                        >
+                          Members
+                           
+                        </a>
+                      </li>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/audit-log/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/audit-log/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Audit Log
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/rate-limits/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/rate-limits/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Rate Limits
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/repos/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/repos/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Repositories
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/settings/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/settings/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Settings
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                    </ul>
+                  </div>
+                </div>
+              </HomeSidebar>
+            </div>
+            <div
+              className="col-md-10"
+            >
+              <div
+                className="pull-right"
+              >
+                <DropdownLink
+                  anchorRight={true}
+                  caret={true}
+                  className="btn btn-primary btn-sm"
+                  disabled={false}
+                  title="Add Repository"
+                >
+                  <span
+                    className="pull-right anchor-right dropdown"
+                  >
+                    <a
+                      className="btn btn-primary btn-sm dropdown-menu-right dropdown-toggle"
+                      data-toggle="dropdown"
+                    >
+                      Add Repository
+                      <i
+                        className="icon-arrow-down"
+                      />
+                    </a>
+                    <ul
+                      className="dropdown-menu"
+                    >
+                      <MenuItem
+                        noAnchor={true}
+                      >
+                        <li
+                          className=""
+                          href={null}
+                          role="presentation"
+                          title={null}
+                        >
+                          <AddRepositoryLink
+                            onSuccess={[Function]}
+                            orgId="org-slug"
+                            provider={
+                              Object {
+                                "config": Array [
+                                  Object {
+                                    "help": "Enter your repository name, including the owner.",
+                                    "label": "Repository Name",
+                                    "name": "name",
+                                    "placeholder": "e.g. getsentry/sentry",
+                                    "required": true,
+                                    "type": "text",
+                                  },
+                                ],
+                                "id": "github",
+                                "name": "GitHub",
+                              }
+                            }
+                          >
+                            <a
+                              onClick={[Function]}
+                            >
+                              GitHub
+                              <Modal
+                                animation={false}
+                                autoFocus={true}
+                                backdrop={true}
+                                bsClass="modal"
+                                dialogComponentClass={[Function]}
+                                enforceFocus={true}
+                                keyboard={true}
+                                manager={
+                                  ModalManager {
+                                    "containers": Array [],
+                                    "data": Array [],
+                                    "handleContainerOverflow": true,
+                                    "hideSiblingNodes": true,
+                                    "modals": Array [],
+                                  }
+                                }
+                                onHide={[Function]}
+                                renderBackdrop={[Function]}
+                                restoreFocus={true}
+                                show={false}
+                              >
+                                <Modal
+                                  autoFocus={true}
+                                  backdrop={true}
+                                  backdropClassName="modal-backdrop"
+                                  backdropTransitionTimeout={150}
+                                  containerClassName="modal-open"
+                                  dialogTransitionTimeout={300}
+                                  enforceFocus={true}
+                                  keyboard={true}
+                                  manager={
+                                    ModalManager {
+                                      "containers": Array [],
+                                      "data": Array [],
+                                      "handleContainerOverflow": true,
+                                      "hideSiblingNodes": true,
+                                      "modals": Array [],
+                                    }
+                                  }
+                                  onEntering={[Function]}
+                                  onExited={[Function]}
+                                  onHide={[Function]}
+                                  renderBackdrop={[Function]}
+                                  restoreFocus={true}
+                                  show={false}
+                                />
+                              </Modal>
+                            </a>
+                          </AddRepositoryLink>
+                        </li>
+                      </MenuItem>
+                    </ul>
+                  </span>
+                </DropdownLink>
+              </div>
+              <h3
+                className="m-b-2"
+              >
+                Repositories
+              </h3>
+              <div
+                className="m-b-2"
+              >
+                <p>
+                  Connecting a repository allows Sentry to capture commit data via webhooks. This enables features like suggested assignees and resolving issues via commit message. Once you've connected a repository, you can associate commits with releases via the API.
+                   
+                  <span>
+                    <span>
+                      See our 
+                    </span>
+                    <a
+                      href="https://docs.sentry.io/learn/releases/"
+                    >
+                      <span>
+                        documentation
+                      </span>
+                    </a>
+                    <span>
+                       for more details.
+                    </span>
+                  </span>
+                </p>
+              </div>
+              <div
+                className="panel panel-default"
+              >
+                <table
+                  className="table"
+                >
+                  <tbody>
+                    <tr>
+                      <td>
+                        <strong>
+                          repo-name
+                        </strong>
+                        <br />
+                        <small />
+                        <small>
+                           
+                          — 
+                          <a
+                            href="https://github.com/example/repo-name"
+                          >
+                            https://github.com/example/repo-name
+                          </a>
+                        </small>
+                      </td>
+                      <td
+                        style={
+                          Object {
+                            "width": 60,
+                          }
+                        }
+                      >
+                        <button
+                          className="btn btn-default btn-xs"
+                          onClick={[Function]}
+                        >
+                          <span
+                            className="icon icon-trash"
+                          />
+                        </button>
+                      </td>
+                    </tr>
+                  </tbody>
+                </table>
+              </div>
+            </div>
+          </div>
+        </div>
+      </div>
+    </HomeContainer>
+  </DocumentTitle>
+</OrganizationRepositories>
+`;
+
+exports[`OrganizationRepositories render() without any providers is loading when initially rendering 1`] = `
+<DocumentTitle
+  title="Repositories"
+>
+  <HomeContainer>
+    <div
+      className="pull-right"
+    >
+      <DropdownLink
+        anchorRight={true}
+        caret={true}
+        className="btn btn-primary btn-sm"
+        disabled={false}
+        title="Add Repository"
+      />
+    </div>
+    <h3
+      className="m-b-2"
+    >
+      Repositories
+    </h3>
+    <div
+      className="well blankslate align-center p-x-2 p-y-1"
+    >
+      <div
+        className="icon icon-lg icon-git-commit"
+      />
+      <h3>
+        Sentry is better with commit data
+      </h3>
+      <p>
+        Adding one or more repositories will enable enhanced releases and the ability to resolve Sentry Issues via git message.
+      </p>
+      <p
+        className="m-b-1"
+      >
+        <a
+          className="btn btn-default"
+          href="https://docs.sentry.io/learn/releases/"
+        >
+          Learn more
+        </a>
+      </p>
+    </div>
+  </HomeContainer>
+</DocumentTitle>
+`;
+
+exports[`OrganizationRepositories render() without any providers renders 1`] = `
+<OrganizationRepositories
+  params={
+    Object {
+      "orgId": "org-slug",
+    }
+  }
+>
+  <DocumentTitle
+    title="Repositories"
+  >
+    <HomeContainer>
+      <div
+        className="organization-home"
+      >
+        <div
+          className="sub-header flex flex-container flex-vertically-centered"
+        >
+          <div>
+            <ProjectSelector
+              organization={
+                Object {
+                  "access": Array [
+                    "org:read",
+                    "org:write",
+                    "org:admin",
+                    "project:read",
+                    "project:write",
+                    "project:admin",
+                    "team:read",
+                    "team:write",
+                    "team:admin",
+                  ],
+                  "features": Array [],
+                  "id": "3",
+                  "name": "Organization Name",
+                  "onboardingTasks": Array [],
+                  "slug": "org-slug",
+                  "teams": Array [],
+                }
+              }
+              projectId={null}
+            >
+              <div
+                className="project-select"
+              >
+                <h3>
+                  <Link
+                    className="home-crumb"
+                    to="/org-slug/"
+                  >
+                    <Link
+                      className="home-crumb"
+                      onlyActiveOnIndex={false}
+                      style={Object {}}
+                      to="/org-slug/"
+                    >
+                      <a
+                        className="home-crumb"
+                        onClick={[Function]}
+                        style={Object {}}
+                      >
+                        <span
+                          className="icon-home"
+                        />
+                      </a>
+                    </Link>
+                  </Link>
+                  Select a project
+                  <DropdownLink
+                    anchorRight={false}
+                    caret={true}
+                    disabled={false}
+                    onClose={[Function]}
+                    onOpen={[Function]}
+                    title=""
+                    topLevelClasses="project-dropdown is-empty"
+                  >
+                    <span
+                      className="project-dropdown is-empty dropdown"
+                    >
+                      <a
+                        className="dropdown-toggle"
+                        data-toggle="dropdown"
+                      >
+                        <i
+                          className="icon-arrow-down"
+                        />
+                      </a>
+                      <ul
+                        className="dropdown-menu"
+                      >
+                        <MenuItem
+                          className="empty-projects-item"
+                          noAnchor={true}
+                        >
+                          <li
+                            className="empty-projects-item"
+                            href={null}
+                            role="presentation"
+                            title={null}
+                          >
+                            <div
+                              className="empty-message"
+                            >
+                              You have no projects.
+                            </div>
+                          </li>
+                        </MenuItem>
+                        <MenuItem
+                          divider={true}
+                        >
+                          <li
+                            className="divider"
+                            href={null}
+                            role="presentation"
+                            title={null}
+                          />
+                        </MenuItem>
+                        <MenuItem
+                          className="empty-projects-item"
+                          noAnchor={true}
+                        >
+                          <li
+                            className="empty-projects-item"
+                            href={null}
+                            role="presentation"
+                            title={null}
+                          >
+                            <a
+                              className="btn btn-primary btn-block"
+                              href="/organizations/org-slug/projects/new/"
+                            >
+                              Create project
+                            </a>
+                          </li>
+                        </MenuItem>
+                      </ul>
+                    </span>
+                  </DropdownLink>
+                </h3>
+              </div>
+            </ProjectSelector>
+          </div>
+          <div
+            className="align-right hidden-xs"
+          >
+            <Button
+              disabled={false}
+              priority="primary"
+              style={
+                Object {
+                  "marginRight": 5,
+                }
+              }
+              to="/organizations/org-slug/projects/new/"
+            >
+              <Link
+                className="button button-primary"
+                disabled={false}
+                onClick={[Function]}
+                onlyActiveOnIndex={false}
+                role="button"
+                style={
+                  Object {
+                    "marginRight": 5,
+                  }
+                }
+                to="/organizations/org-slug/projects/new/"
+              >
+                <a
+                  className="button button-primary"
+                  disabled={false}
+                  onClick={[Function]}
+                  role="button"
+                  style={
+                    Object {
+                      "marginRight": 5,
+                    }
+                  }
+                >
+                  New Project
+                </a>
+              </Link>
+            </Button>
+            <Button
+              disabled={false}
+              priority="primary"
+              to="/organizations/org-slug/teams/new/"
+            >
+              <Link
+                className="button button-primary"
+                disabled={false}
+                onClick={[Function]}
+                onlyActiveOnIndex={false}
+                role="button"
+                style={Object {}}
+                to="/organizations/org-slug/teams/new/"
+              >
+                <a
+                  className="button button-primary"
+                  disabled={false}
+                  onClick={[Function]}
+                  role="button"
+                  style={Object {}}
+                >
+                  New Team
+                </a>
+              </Link>
+            </Button>
+          </div>
+        </div>
+        <div
+          className="container"
+        >
+          <div
+            className="content row"
+          >
+            <div
+              className="col-md-2 org-sidebar"
+            >
+              <HomeSidebar>
+                <div>
+                  <h6
+                    className="nav-header"
+                  >
+                    Organization
+                  </h6>
+                  <ul
+                    className="nav nav-stacked"
+                  >
+                    <ListLink
+                      activeClassName="active"
+                      index={false}
+                      isActive={[Function]}
+                      to="/org-slug/"
+                    >
+                      <li
+                        className=""
+                      >
+                        <Link
+                          onlyActiveOnIndex={false}
+                          style={Object {}}
+                          to="/org-slug/"
+                        >
+                          <a
+                            onClick={[Function]}
+                            style={Object {}}
+                          >
+                            Dashboard
+                          </a>
+                        </Link>
+                      </li>
+                    </ListLink>
+                    <ListLink
+                      activeClassName="active"
+                      index={false}
+                      isActive={[Function]}
+                      to="/organizations/org-slug/teams/"
+                    >
+                      <li
+                        className=""
+                      >
+                        <Link
+                          onlyActiveOnIndex={false}
+                          style={Object {}}
+                          to="/organizations/org-slug/teams/"
+                        >
+                          <a
+                            onClick={[Function]}
+                            style={Object {}}
+                          >
+                            Projects & Teams
+                          </a>
+                        </Link>
+                      </li>
+                    </ListLink>
+                    <ListLink
+                      activeClassName="active"
+                      index={false}
+                      to="/organizations/org-slug/stats/"
+                    >
+                      <li
+                        className=""
+                      >
+                        <Link
+                          onlyActiveOnIndex={false}
+                          style={Object {}}
+                          to="/organizations/org-slug/stats/"
+                        >
+                          <a
+                            onClick={[Function]}
+                            style={Object {}}
+                          >
+                            Stats
+                          </a>
+                        </Link>
+                      </li>
+                    </ListLink>
+                  </ul>
+                  <div>
+                    <h6
+                      className="nav-header with-divider"
+                    >
+                      Issues
+                    </h6>
+                    <ul
+                      className="nav nav-stacked"
+                    >
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/issues/assigned/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/issues/assigned/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Assigned to Me
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/issues/bookmarks/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/issues/bookmarks/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Bookmarks
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/issues/history/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/issues/history/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              History
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                    </ul>
+                  </div>
+                  <div>
+                    <h6
+                      className="nav-header with-divider"
+                    >
+                      Manage
+                    </h6>
+                    <ul
+                      className="nav nav-stacked"
+                    >
+                      <li>
+                        <a
+                          href="/organizations/org-slug/members/"
+                        >
+                          Members
+                           
+                        </a>
+                      </li>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/audit-log/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/audit-log/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Audit Log
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/rate-limits/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/rate-limits/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Rate Limits
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/repos/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/repos/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Repositories
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                      <ListLink
+                        activeClassName="active"
+                        index={false}
+                        to="/organizations/org-slug/settings/"
+                      >
+                        <li
+                          className=""
+                        >
+                          <Link
+                            onlyActiveOnIndex={false}
+                            style={Object {}}
+                            to="/organizations/org-slug/settings/"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={Object {}}
+                            >
+                              Settings
+                            </a>
+                          </Link>
+                        </li>
+                      </ListLink>
+                    </ul>
+                  </div>
+                </div>
+              </HomeSidebar>
+            </div>
+            <div
+              className="col-md-10"
+            >
+              <div
+                className="pull-right"
+              >
+                <DropdownLink
+                  anchorRight={true}
+                  caret={true}
+                  className="btn btn-primary btn-sm"
+                  disabled={false}
+                  title="Add Repository"
+                >
+                  <span
+                    className="pull-right anchor-right dropdown"
+                  >
+                    <a
+                      className="btn btn-primary btn-sm dropdown-menu-right dropdown-toggle"
+                      data-toggle="dropdown"
+                    >
+                      Add Repository
+                      <i
+                        className="icon-arrow-down"
+                      />
+                    </a>
+                    <ul
+                      className="dropdown-menu"
+                    />
+                  </span>
+                </DropdownLink>
+              </div>
+              <h3
+                className="m-b-2"
+              >
+                Repositories
+              </h3>
+              <div
+                className="well blankslate align-center p-x-2 p-y-1"
+              >
+                <div
+                  className="icon icon-lg icon-git-commit"
+                />
+                <h3>
+                  Sentry is better with commit data
+                </h3>
+                <p>
+                  Adding one or more repositories will enable enhanced releases and the ability to resolve Sentry Issues via git message.
+                </p>
+                <p
+                  className="m-b-1"
+                >
+                  <a
+                    className="btn btn-default"
+                    href="https://docs.sentry.io/learn/releases/"
+                  >
+                    Learn more
+                  </a>
+                </p>
+              </div>
+            </div>
+          </div>
+        </div>
+      </div>
+    </HomeContainer>
+  </DocumentTitle>
+</OrganizationRepositories>
+`;
diff --git a/tests/js/spec/views/__snapshots__/projectAlertSettings.spec.jsx.snap b/tests/js/spec/views/__snapshots__/projectAlertSettings.spec.jsx.snap
index b3aac76849..580a588a6c 100644
--- a/tests/js/spec/views/__snapshots__/projectAlertSettings.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/projectAlertSettings.spec.jsx.snap
@@ -85,8 +85,23 @@ exports[`ProjectAlertSettings render() renders 1`] = `
       onEnablePlugin={[Function]}
       organization={
         Object {
+          "access": Array [
+            "org:read",
+            "org:write",
+            "org:admin",
+            "project:read",
+            "project:write",
+            "project:admin",
+            "team:read",
+            "team:write",
+            "team:admin",
+          ],
+          "features": Array [],
+          "id": "3",
           "name": "Organization Name",
+          "onboardingTasks": Array [],
           "slug": "org-slug",
+          "teams": Array [],
         }
       }
       pluginList={Array []}
@@ -94,6 +109,7 @@ exports[`ProjectAlertSettings render() renders 1`] = `
         Object {
           "digestsMaxDelay": 60,
           "digestsMinDelay": 5,
+          "id": "2",
           "name": "Project Name",
           "slug": "project-slug",
           "subjectTemplate": "[$project] \${tag:level}: $title",
diff --git a/tests/js/spec/views/organizationRepositories.spec.jsx b/tests/js/spec/views/organizationRepositories.spec.jsx
new file mode 100644
index 0000000000..d5a475a200
--- /dev/null
+++ b/tests/js/spec/views/organizationRepositories.spec.jsx
@@ -0,0 +1,97 @@
+import React from 'react';
+import {mount, shallow} from 'enzyme';
+
+import {Client} from 'app/api';
+import OrganizationRepositories from 'app/views/organizationRepositories';
+
+const childContextTypes = {
+  organization: React.PropTypes.object,
+  location: React.PropTypes.object
+};
+
+describe('OrganizationRepositories', function() {
+  beforeEach(function() {
+    Client.clearMockResponses();
+  });
+
+  describe('render()', function() {
+    describe('without any providers', function() {
+      beforeEach(function() {
+        Client.addMockResponse({
+          url: '/organizations/org-slug/repos/',
+          body: []
+        });
+        Client.addMockResponse({
+          url: '/organizations/org-slug/config/repos/',
+          body: {providers: []}
+        });
+      });
+
+      it('is loading when initially rendering', function() {
+        let wrapper = shallow(<OrganizationRepositories params={{orgId: 'org-slug'}} />, {
+          context: {
+            router: TestStubs.router(),
+            organization: TestStubs.Organization(),
+            location: TestStubs.location()
+          },
+          childContextTypes
+        });
+        expect(wrapper).toMatchSnapshot();
+      });
+
+      it('renders', function() {
+        let wrapper = mount(<OrganizationRepositories params={{orgId: 'org-slug'}} />, {
+          context: {
+            router: TestStubs.router(),
+            organization: TestStubs.Organization(),
+            location: TestStubs.location()
+          },
+          childContextTypes
+        });
+        expect(wrapper.state('loading')).toBe(false);
+        expect(wrapper).toMatchSnapshot();
+      });
+    });
+
+    describe('with a provider', function() {
+      beforeEach(function() {
+        Client.addMockResponse({
+          url: '/organizations/org-slug/config/repos/',
+          body: {providers: [TestStubs.GitHubRepositoryProvider()]}
+        });
+      });
+      it('renders', function() {
+        Client.addMockResponse({
+          url: '/organizations/org-slug/repos/',
+          body: []
+        });
+        let wrapper = mount(<OrganizationRepositories params={{orgId: 'org-slug'}} />, {
+          context: {
+            router: TestStubs.router(),
+            organization: TestStubs.Organization(),
+            location: TestStubs.location()
+          },
+          childContextTypes
+        });
+        expect(wrapper.state('loading')).toBe(false);
+        expect(wrapper).toMatchSnapshot();
+      });
+      it('renders with a repository', function() {
+        Client.addMockResponse({
+          url: '/organizations/org-slug/repos/',
+          body: [TestStubs.Repository()]
+        });
+        let wrapper = mount(<OrganizationRepositories params={{orgId: 'org-slug'}} />, {
+          context: {
+            router: TestStubs.router(),
+            organization: TestStubs.Organization(),
+            location: TestStubs.location()
+          },
+          childContextTypes
+        });
+        expect(wrapper.state('loading')).toBe(false);
+        expect(wrapper).toMatchSnapshot();
+      });
+    });
+  });
+});
