commit 3fce9513674de61346f02367536099dd905f81f8
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Jan 1 22:35:48 2012 -0800

    Use RequestContext so we can get access to context processors

diff --git a/sentry/web/helpers.py b/sentry/web/helpers.py
index edfd5e9547..dc3ede4f3f 100644
--- a/sentry/web/helpers.py
+++ b/sentry/web/helpers.py
@@ -11,7 +11,7 @@ import logging
 from django.conf import settings as dj_settings
 from django.core.urlresolvers import reverse, resolve
 from django.http import HttpResponse
-from django.template import loader
+from django.template import loader, RequestContext, Context
 
 from sentry.conf import settings
 from sentry.models import ProjectMember, Project, MEMBER_USER
@@ -89,7 +89,11 @@ def render_to_string(template, context=None, request=None):
         if 'project_list' not in context:
             context['project_list'] = get_project_list(request.user).values()
 
-    return loader.render_to_string(template, context)
+        context_cls = RequestContext
+    else:
+        context_cls = Context
+
+    return loader.render_to_string(template, context_cls(context))
 
 
 def render_to_response(template, context=None, request=None, status=200):
