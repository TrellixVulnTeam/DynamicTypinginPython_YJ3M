commit 9bedd6652139f6834beef7e97413748be57fbcaa
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Tue Mar 17 02:14:00 2020 -0700

    chore(ts): Convert data/platformCategories (#17696)

diff --git a/src/sentry/static/sentry/app/components/onboardingWizard/getOnboardingTasks.tsx b/src/sentry/static/sentry/app/components/onboardingWizard/getOnboardingTasks.tsx
index 4438bb1277..21002b4aa3 100644
--- a/src/sentry/static/sentry/app/components/onboardingWizard/getOnboardingTasks.tsx
+++ b/src/sentry/static/sentry/app/components/onboardingWizard/getOnboardingTasks.tsx
@@ -4,10 +4,12 @@ import {sourceMaps} from 'app/data/platformCategories';
 import {Organization, OnboardingTaskDescriptor, OnboardingTaskKey} from 'app/types';
 
 function hasPlatformWithSourceMaps(organization: Organization): boolean {
-  if (!organization || !organization.projects) {
+  const projects = organization?.projects;
+  if (!projects) {
     return false;
   }
-  return organization.projects.some(({platform}) => sourceMaps.includes(platform));
+
+  return projects.some(({platform}) => platform && sourceMaps.includes(platform));
 }
 
 export default function getOnboardingTasks(
diff --git a/src/sentry/static/sentry/app/data/platformCategories.jsx b/src/sentry/static/sentry/app/data/platformCategories.tsx
similarity index 76%
rename from src/sentry/static/sentry/app/data/platformCategories.jsx
rename to src/sentry/static/sentry/app/data/platformCategories.tsx
index 2976b718be..480a9c9899 100644
--- a/src/sentry/static/sentry/app/data/platformCategories.jsx
+++ b/src/sentry/static/sentry/app/data/platformCategories.tsx
@@ -18,7 +18,7 @@ const popular = [
   'node',
   'react-native',
   'javascript-angular',
-];
+] as const;
 
 const frontend = [
   'javascript',
@@ -28,9 +28,15 @@ const frontend = [
   'javascript-backbone',
   'javascript-ember',
   'javascript-vue',
-];
+] as const;
 
-const mobile = ['cocoa-objc', 'cocoa-swift', 'java-android', 'cordova', 'react-native'];
+const mobile = [
+  'cocoa-objc',
+  'cocoa-swift',
+  'java-android',
+  'cordova',
+  'react-native',
+] as const;
 
 const backend = [
   'csharp',
@@ -67,9 +73,9 @@ const backend = [
   'ruby-rails',
   'ruby-rack',
   'rust',
-];
+] as const;
 
-const desktop = ['cocoa', 'csharp', 'java', 'electron', 'minidump', 'native'];
+const desktop = ['cocoa', 'csharp', 'java', 'electron', 'minidump', 'native'] as const;
 
 const categoryList = [
   {id: 'popular', name: t('Popular'), platforms: popular},
@@ -77,8 +83,20 @@ const categoryList = [
   {id: 'server', name: t('Server'), platforms: backend},
   {id: 'mobile', name: t('Mobile'), platforms: mobile},
   {id: 'desktop', name: t('Desktop'), platforms: desktop},
+] as const;
+
+export const sourceMaps: PlatformKey[] = [
+  ...frontend,
+  'react-native',
+  'cordova',
+  'electron',
 ];
 
-export const sourceMaps = [...frontend, 'react-native', 'cordova', 'electron'];
+export type PlatformKey =
+  | typeof popular[number]
+  | typeof frontend[number]
+  | typeof mobile[number]
+  | typeof backend[number]
+  | typeof desktop[number];
 
 export default categoryList;
diff --git a/src/sentry/static/sentry/app/types/index.tsx b/src/sentry/static/sentry/app/types/index.tsx
index 64535c7467..7c5d7c96a4 100644
--- a/src/sentry/static/sentry/app/types/index.tsx
+++ b/src/sentry/static/sentry/app/types/index.tsx
@@ -6,6 +6,7 @@ import {
   NOT_INSTALLED,
   PENDING,
 } from 'app/views/organizationIntegrations/constants';
+import {PlatformKey} from 'app/data/platformCategories';
 
 export type IntegrationInstallationStatus =
   | typeof INSTALLED
@@ -97,7 +98,7 @@ export type Organization = LightWeightOrganization & {
 // Minimal project representation for use with avatars.
 export type AvatarProject = {
   slug: string;
-  platform?: string;
+  platform?: PlatformKey;
 };
 
 export type Project = {
@@ -225,7 +226,7 @@ type SentryEventBase = {
   packages?: {[key: string]: string};
   user: EventUser;
   message: string;
-  platform?: string;
+  platform?: PlatformKey;
   dateCreated?: string;
   endTimestamp?: number;
   entries: EntryType[];
@@ -369,7 +370,7 @@ export type PluginProjectItem = {
   projectId: string;
   projectSlug: string;
   projectName: string;
-  projectPlatform: string | null;
+  projectPlatform: PlatformKey;
   enabled: boolean;
   configured: boolean;
 };
@@ -515,7 +516,7 @@ export type Group = {
   numComments: number;
   participants: any[]; // TODO(ts)
   permalink: string;
-  platform: string;
+  platform: PlatformKey;
   pluginActions: any[]; // TODO(ts)
   pluginContexts: any[]; // TODO(ts)
   pluginIssues: any[]; // TODO(ts)
