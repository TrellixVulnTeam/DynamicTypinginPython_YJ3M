commit 60e5362d7a48b26e1b302615156ac5882f57e308
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Sep 1 15:35:45 2010 -0700

    Filters now support processing of messages

diff --git a/example_project/settings.py b/example_project/settings.py
index b3caaabf82..a52177f16b 100644
--- a/example_project/settings.py
+++ b/example_project/settings.py
@@ -2,7 +2,7 @@ import os.path
 import sys
 # Django settings for example_project project.
 
-DEBUG = True
+DEBUG = False
 TEMPLATE_DEBUG = True
 
 ADMINS = (
diff --git a/sentry/filters/__init__.py b/sentry/filters/__init__.py
index e8fc8087c9..2999cac49d 100644
--- a/sentry/filters/__init__.py
+++ b/sentry/filters/__init__.py
@@ -84,8 +84,9 @@ class SentryFilter(object):
     def get_query_set(self, queryset):
         return queryset.filter(**{self.get_column(): self.get_value()})
     
-    def process_message(self, **kwargs):
-        return kwargs
+    def process(self, data):
+        """``self.request`` is not available within this method"""
+        return data
     
     def render(self):
         widget = self.get_widget()
diff --git a/sentry/manager.py b/sentry/manager.py
index 255f8d8c84..9013c5c0bf 100644
--- a/sentry/manager.py
+++ b/sentry/manager.py
@@ -32,10 +32,14 @@ class DBLogManager(models.Manager):
         return qs
 
     def _create(self, **defaults):
-        from models import Message, GroupedMessage
+        from sentry.models import Message, GroupedMessage
+        from sentry.helpers import get_filters
         
         URL_MAX_LENGTH = Message._meta.get_field_by_name('url')[0].max_length
         
+        for filter_ in get_filters():
+            defaults = filter_(None).process(defaults) or defaults
+        
         view = defaults.pop('view', None)
         logger_name = defaults.pop('logger', 'root')
         url = defaults.pop('url', None)
