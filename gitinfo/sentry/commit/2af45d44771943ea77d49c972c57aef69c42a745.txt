commit 2af45d44771943ea77d49c972c57aef69c42a745
Author: ckj <chriskjennings@gmail.com>
Date:   Wed Jul 30 21:45:01 2014 -0400

    Add broadcasts directive.

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index b51660140c..80c8ceff19 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -434,6 +434,7 @@ SENTRY_STATIC_BUNDLES = {
                 "sentry/app/directives/clippy.js",
                 "sentry/app/directives/count.js",
                 "sentry/app/directives/timeSince.js",
+                "sentry/app/directives/broadcast.js",
             ],
         },
 
diff --git a/src/sentry/static/sentry/app.js b/src/sentry/static/sentry/app.js
index 3166613f5d..fa53ac1064 100644
--- a/src/sentry/static/sentry/app.js
+++ b/src/sentry/static/sentry/app.js
@@ -8,6 +8,7 @@ var SentryApp = angular.module('sentry', [
   'sentry.directives.clippy',
   'sentry.directives.count',
   'sentry.directives.timeSince',
+  'sentry.directives.broadcast',
 
   'ui.bootstrap'
 ]).config(function(
diff --git a/src/sentry/static/sentry/app/directives/broadcast.js b/src/sentry/static/sentry/app/directives/broadcast.js
new file mode 100644
index 0000000000..6a4bcacb62
--- /dev/null
+++ b/src/sentry/static/sentry/app/directives/broadcast.js
@@ -0,0 +1,33 @@
+(function(){
+  'use strict';
+
+  var broadcasts = [
+    {
+      showBadge: true,
+      badgeText: "new",
+      text: "See what's new in Sentry!",
+      url: "http://blog.getsentry.com/"
+    },
+    {
+      text: "Restrict access to projects using Access Groups"
+    },
+    {
+      text: "Precisely control notifications with Rules"
+    }
+  ]
+
+  angular.module('sentry.directives.broadcast', [])
+    .directive('broadcast', function() {
+      return {
+        restrict: 'E',
+        templateUrl: '../../templates/broadcast.html',
+        controller: function () {
+          this.overQuota = true; // TODO: Figure out if over quota
+
+          this.randomBroadcast = broadcasts[Math.floor(Math.random() * broadcasts.length)];
+
+        },
+        controllerAs: "broadcasts"
+      };
+    });
+}());
diff --git a/src/sentry/static/sentry/app/templates/broadcast.html b/src/sentry/static/sentry/app/templates/broadcast.html
new file mode 100644
index 0000000000..23b7e4df54
--- /dev/null
+++ b/src/sentry/static/sentry/app/templates/broadcast.html
@@ -0,0 +1,21 @@
+<div ng-if="broadcasts.overQuota">
+  <div class="usage-wrapper">
+    <div class="pull-right">
+      <a href="#">Upgrade now</a>
+    </div>
+    <strong>Usage:</strong>
+    <div class="usage"><div style="width: 80%"></div></div>
+  </div>
+</div>
+<div ng-if="!broadcasts.overQuota">
+  <div ng-repeat="broadcast in broadcasts">
+      <div ng-if="broadcast.url">
+          <span class="badge new" ng-show="broadcast.showNew">new</span>
+          <a href="{{ broadcast.url }}" class="link">{{ broadcast.text }}</a>
+      </div>
+      <div ng-if="!broadcast.url">
+          <span class="badge new" ng-show="broadcast.showBadge">{{ broadcast.badgeText }}</span>
+          {{ broadcast.text }}
+      </div>
+  </div>
+</div>
diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index 0b3d53afbe..543a602088 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -295,7 +295,7 @@ header {
     font-size: 14px;
     padding-top: 4px;
 
-    span {
+    .badge {
       line-height: .9;
       position: relative;
       top: -2px;
@@ -310,7 +310,7 @@ header {
         font-weight: 600;
       }
     }
-    a {
+    .link {
       color: @linkColor;
       border: 0;
       padding-right: 0;
@@ -2348,3 +2348,25 @@ table.vars {
     opacity: .4;
   }
 }
+
+.usage-wrapper {
+  width: 240px;
+  font-size: 13px;
+  margin-top: -6px;
+
+  a {
+    color: @linkColor !important;
+  }
+
+  .usage {
+    background: #f1f2f3;
+    border-radius: 1px;
+
+    div {
+      margin-top: 5px;
+      height: 5px;
+      background: red;
+      border-radius: 1px;
+    }
+  }
+}
diff --git a/src/sentry/templates/sentry/bases/stream.html b/src/sentry/templates/sentry/bases/stream.html
index ab5cc85dff..e29b11a0c6 100644
--- a/src/sentry/templates/sentry/bases/stream.html
+++ b/src/sentry/templates/sentry/bases/stream.html
@@ -10,10 +10,7 @@
     <a href="{% url 'sentry' team.slug %}" class="back-button icon-arrow-left"></a>
     <ul class="nav nav-tabs project-nav" style="margin-bottom: 20px;">
         <li class="pull-right hidden-xs broadcast">
-            <broadcast>
-                <span class="new">new</span>
-                <a href="#">See what's new in Sentry!</a>
-            </broadcast>
+            <broadcast></broadcast>
         </li>
         <li class="active">
             <a href="{% url 'sentry-stream' project.team.slug project.slug %}">{% trans "Stream" %}</a>
