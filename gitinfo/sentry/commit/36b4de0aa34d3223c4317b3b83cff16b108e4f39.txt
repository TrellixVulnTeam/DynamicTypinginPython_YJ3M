commit 36b4de0aa34d3223c4317b3b83cff16b108e4f39
Author: Matte Noble <me@mattenoble.com>
Date:   Tue Aug 28 14:09:45 2018 -0700

    fix(vsts): Hide VSTS Extension from integrations (#9538)
    
    The VSTS Extension is just meant to enable a VSTS -> Sentry flow, so we
    don't want to show it in the list of installable integrations.

diff --git a/src/sentry/integrations/base.py b/src/sentry/integrations/base.py
index 9aeb86af6b..78e236409b 100644
--- a/src/sentry/integrations/base.py
+++ b/src/sentry/integrations/base.py
@@ -62,6 +62,10 @@ class IntegrationProvider(PipelineProvider):
     # than ``key``. See: VstsExtensionIntegrationProvider.
     _integration_key = None
 
+    # Whether this integration should show up in the list on the Organization
+    # Integrations page.
+    visible = True
+
     # a human readable name (e.g. 'Slack')
     name = None
 
diff --git a/src/sentry/integrations/manager.py b/src/sentry/integrations/manager.py
index 481d3f0714..c2d166dd68 100644
--- a/src/sentry/integrations/manager.py
+++ b/src/sentry/integrations/manager.py
@@ -18,7 +18,9 @@ class IntegrationManager(object):
 
     def all(self):
         for key in six.iterkeys(self.__values):
-            yield self.get(key)
+            integration = self.get(key)
+            if integration.visible:
+                yield integration
 
     def get(self, key, **kwargs):
         try:
diff --git a/src/sentry/integrations/vsts_extension/integration.py b/src/sentry/integrations/vsts_extension/integration.py
index cf2a8b3c85..39073e9659 100644
--- a/src/sentry/integrations/vsts_extension/integration.py
+++ b/src/sentry/integrations/vsts_extension/integration.py
@@ -14,6 +14,10 @@ class VstsExtensionIntegrationProvider(VstsIntegrationProvider):
     key = 'vsts-extension'
     integration_key = 'vsts'
 
+    # This is only to enable the VSTS -> Sentry installation flow, so we don't
+    # want it to actually appear of the Integrations page.
+    visible = False
+
     def get_pipeline_views(self):
         views = super(VstsExtensionIntegrationProvider, self).get_pipeline_views()
         views = [view for view in views if not isinstance(view, AccountConfigView)]
diff --git a/tests/sentry/integrations/test_manager.py b/tests/sentry/integrations/test_manager.py
new file mode 100644
index 0000000000..69c262375c
--- /dev/null
+++ b/tests/sentry/integrations/test_manager.py
@@ -0,0 +1,14 @@
+from __future__ import absolute_import
+
+from sentry import integrations
+from sentry.integrations.vsts_extension import VstsExtensionIntegrationProvider
+from sentry.testutils import TestCase
+
+
+class TestIntegrations(TestCase):
+    def test_excludes_non_visible_integrations(self):
+        # The VSTSExtension is not visible
+        assert all(
+            not isinstance(i, VstsExtensionIntegrationProvider)
+            for i in integrations.all()
+        )
