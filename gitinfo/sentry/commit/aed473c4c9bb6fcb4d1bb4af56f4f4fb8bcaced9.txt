commit aed473c4c9bb6fcb4d1bb4af56f4f4fb8bcaced9
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Jan 22 14:39:37 2019 -0800

    feat: Update compact issue component links (#11649)
    
    Update compact issue component to conditionally render links to the new
    issue pages if the user is in global views, otherwise render existing
    links.

diff --git a/src/sentry/static/sentry/app/components/compactIssue.jsx b/src/sentry/static/sentry/app/components/compactIssue.jsx
index 1221db4e35..50157c066e 100644
--- a/src/sentry/static/sentry/app/components/compactIssue.jsx
+++ b/src/sentry/static/sentry/app/components/compactIssue.jsx
@@ -1,5 +1,6 @@
 import PropTypes from 'prop-types';
 import React from 'react';
+import {withRouter} from 'react-router';
 import createReactClass from 'create-react-class';
 import Reflux from 'reflux';
 import {Flex, Box} from 'grid-emotion';
@@ -18,8 +19,6 @@ import {PanelItem} from 'app/components/panels';
 class CompactIssueHeader extends React.Component {
   static propTypes = {
     data: PropTypes.object.isRequired,
-    orgId: PropTypes.string.isRequired,
-    projectId: PropTypes.string.isRequired,
   };
 
   getTitle = () => {
@@ -63,9 +62,14 @@ class CompactIssueHeader extends React.Component {
   };
 
   render() {
-    let {orgId, projectId, data} = this.props;
+    let {data, params: {orgId, projectId}} = this.props;
 
     let styles = {};
+
+    let basePath = projectId
+      ? `/${orgId}/${projectId}/issues/`
+      : `/organizations/${orgId}/issues/`;
+
     if (data.subscriptionDetails && data.subscriptionDetails.reason === 'mentioned') {
       styles = {color: '#57be8c'};
     }
@@ -76,7 +80,7 @@ class CompactIssueHeader extends React.Component {
             <span className="error-level truncate" title={data.level} />
           </Box>
           <h3 className="truncate">
-            <ProjectLink to={`/${orgId}/${projectId}/issues/${data.id}/`}>
+            <ProjectLink to={`${basePath}${data.id}/`}>
               <span className="icon icon-soundoff" />
               <span className="icon icon-star-solid" />
               {this.getTitle()}
@@ -85,14 +89,11 @@ class CompactIssueHeader extends React.Component {
         </Flex>
         <div className="event-extra">
           <span className="project-name">
-            <ProjectLink to={`/${orgId}/${projectId}/`}>{data.project.slug}</ProjectLink>
+            <ProjectLink to={basePath}>{data.project.slug}</ProjectLink>
           </span>
           {data.numComments !== 0 && (
             <span>
-              <Link
-                to={`/${orgId}/${projectId}/issues/${data.id}/activity/`}
-                className="comments"
-              >
+              <Link to={`${basePath}${data.id}/activity/`} className="comments">
                 <span className="icon icon-comments" style={styles} />
                 <span className="tag-count">{data.numComments}</span>
               </Link>
@@ -111,7 +112,6 @@ const CompactIssue = createReactClass({
   propTypes: {
     data: PropTypes.object,
     id: PropTypes.string,
-    orgId: PropTypes.string,
     statsPeriod: PropTypes.string,
     showActions: PropTypes.bool,
   },
@@ -159,7 +159,7 @@ const CompactIssue = createReactClass({
 
     this.api.bulkUpdate(
       {
-        orgId: this.props.orgId,
+        orgId: this.props.params.orgId,
         projectId: issue.project.slug,
         itemIds: [issue.id],
         data,
@@ -195,8 +195,7 @@ const CompactIssue = createReactClass({
       className += ' with-graph';
     }
 
-    let {id, orgId} = this.props;
-    let projectId = issue.project.slug;
+    let {id, params} = this.props;
     let title = <span className="icon-more" />;
 
     return (
@@ -206,7 +205,7 @@ const CompactIssue = createReactClass({
         direction="column"
         style={{paddingTop: '12px', paddingBottom: '6px'}}
       >
-        <CompactIssueHeader data={issue} orgId={orgId} projectId={projectId} />
+        <CompactIssueHeader data={issue} params={params} />
         {this.props.statsPeriod && (
           <div className="event-graph">
             <GroupChart
@@ -242,19 +241,11 @@ const CompactIssue = createReactClass({
               </li>
               <li>
                 <SnoozeAction
-                  orgId={orgId}
-                  projectId={projectId}
+                  orgId={params.orgId}
                   groupId={id}
                   onSnooze={this.onSnooze}
                 />
               </li>
-              {false && (
-                <li>
-                  <a href="#">
-                    <span className="icon-user" />
-                  </a>
-                </li>
-              )}
             </DropdownLink>
           </div>
         )}
@@ -264,4 +255,5 @@ const CompactIssue = createReactClass({
   },
 });
 
-export default CompactIssue;
+export {CompactIssue};
+export default withRouter(CompactIssue);
diff --git a/src/sentry/static/sentry/app/components/events/userFeedback.jsx b/src/sentry/static/sentry/app/components/events/userFeedback.jsx
index 00239b111b..69d8b931f2 100644
--- a/src/sentry/static/sentry/app/components/events/userFeedback.jsx
+++ b/src/sentry/static/sentry/app/components/events/userFeedback.jsx
@@ -11,12 +11,21 @@ class EventUserFeedback extends React.Component {
   static propTypes = {
     report: PropTypes.object.isRequired,
     orgId: PropTypes.string.isRequired,
-    projectId: PropTypes.string.isRequired,
     issueId: PropTypes.string.isRequired,
+    // Provided only in the single project scoped version of this component
+    projectId: PropTypes.string,
   };
 
+  getUrl() {
+    const {report, orgId, projectId, issueId} = this.props;
+
+    return projectId
+      ? `/${orgId}/${projectId}/issues/${issueId}/events/${report.event.id}/`
+      : `/organizations/${orgId}/issues/${issueId}/events/${report.event.id}/`;
+  }
+
   render() {
-    let {report, orgId, projectId, issueId} = this.props;
+    const {report} = this.props;
 
     return (
       <div className="user-report">
@@ -33,12 +42,7 @@ class EventUserFeedback extends React.Component {
                     {/* event_id might be undefined for legacy accounts */}
                     {report.event.id && (
                       <small>
-                        <Link
-                          to={`/${orgId}/${projectId}/issues/${issueId}/events/${report
-                            .event.id}`}
-                        >
-                          {t('View event')}
-                        </Link>
+                        <Link to={this.getUrl()}>{t('View event')}</Link>
                       </small>
                     )}
                   </div>
diff --git a/src/sentry/static/sentry/app/components/issueList.jsx b/src/sentry/static/sentry/app/components/issueList.jsx
index 0e2214887c..e478858b21 100644
--- a/src/sentry/static/sentry/app/components/issueList.jsx
+++ b/src/sentry/static/sentry/app/components/issueList.jsx
@@ -95,7 +95,7 @@ const IssueList = createReactClass({
 
   renderResults() {
     let body;
-    const {params, noBorder} = this.props;
+    const {noBorder} = this.props;
 
     if (this.state.loading) body = this.renderLoading();
     else if (this.state.error) body = <LoadingError onRetry={this.fetchData} />;
@@ -111,7 +111,6 @@ const IssueList = createReactClass({
                   key={issue.id}
                   id={issue.id}
                   data={issue}
-                  orgId={params.orgId}
                   statsPeriod={this.props.statsPeriod}
                   showActions={this.props.showActions}
                 />
diff --git a/src/sentry/static/sentry/app/views/userFeedback/organizationUserFeedback.jsx b/src/sentry/static/sentry/app/views/userFeedback/organizationUserFeedback.jsx
index 25d04f5795..b1e48dbdb8 100644
--- a/src/sentry/static/sentry/app/views/userFeedback/organizationUserFeedback.jsx
+++ b/src/sentry/static/sentry/app/views/userFeedback/organizationUserFeedback.jsx
@@ -44,21 +44,9 @@ class OrganizationUserFeedback extends AsyncView {
 
     const children = this.state.reportList.map(item => {
       const issue = item.issue;
-      const projectId = issue.project.slug;
       return (
-        <CompactIssue
-          key={item.id}
-          id={issue.id}
-          data={issue}
-          orgId={orgId}
-          projectId={projectId}
-        >
-          <EventUserFeedback
-            report={item}
-            orgId={orgId}
-            projectId={projectId}
-            issueId={issue.id}
-          />
+        <CompactIssue key={item.id} id={issue.id} data={issue}>
+          <EventUserFeedback report={item} orgId={orgId} issueId={issue.id} />
         </CompactIssue>
       );
     });
diff --git a/src/sentry/static/sentry/app/views/userFeedback/projectUserFeedback.jsx b/src/sentry/static/sentry/app/views/userFeedback/projectUserFeedback.jsx
index f11a9b927e..2ad03670e2 100644
--- a/src/sentry/static/sentry/app/views/userFeedback/projectUserFeedback.jsx
+++ b/src/sentry/static/sentry/app/views/userFeedback/projectUserFeedback.jsx
@@ -180,13 +180,7 @@ const ProjectUserFeedback = createReactClass({
       const issue = item.issue;
 
       return (
-        <CompactIssue
-          key={item.id}
-          id={issue.id}
-          data={issue}
-          orgId={orgId}
-          projectId={projectId}
-        >
+        <CompactIssue key={item.id} id={issue.id} data={issue}>
           <EventUserFeedback
             report={item}
             orgId={orgId}
diff --git a/tests/js/spec/views/userFeedback/__snapshots__/organizationUserFeedback.spec.jsx.snap b/tests/js/spec/views/userFeedback/__snapshots__/organizationUserFeedback.spec.jsx.snap
index 652ec7dcd6..d66dcd1430 100644
--- a/tests/js/spec/views/userFeedback/__snapshots__/organizationUserFeedback.spec.jsx.snap
+++ b/tests/js/spec/views/userFeedback/__snapshots__/organizationUserFeedback.spec.jsx.snap
@@ -202,6 +202,11 @@ exports[`OrganizationUserFeedback renders 1`] = `
                   "teams": Array [],
                 }
               }
+              params={
+                Object {
+                  "orgId": "org-slug",
+                }
+              }
               router={
                 Object {
                   "createHref": [MockFunction] {
@@ -221,16 +226,16 @@ exports[`OrganizationUserFeedback renders 1`] = `
                         },
                       ],
                       Array [
-                        "/org-slug/project-slug/issues/1/",
+                        "/organizations/org-slug/issues/1/",
                       ],
                       Array [
-                        "/org-slug/project-slug/",
+                        "/organizations/org-slug/issues/",
                       ],
                       Array [
-                        "/org-slug/project-slug/issues/1/activity/",
+                        "/organizations/org-slug/issues/1/activity/",
                       ],
                       Array [
-                        "/org-slug/project-slug/issues/1/events/1",
+                        "/organizations/org-slug/issues/1/events/1/",
                       ],
                     ],
                     "results": Array [
@@ -268,6 +273,9 @@ exports[`OrganizationUserFeedback renders 1`] = `
                   "location": Object {
                     "query": Object {},
                   },
+                  "params": Object {
+                    "orgId": "org-slug",
+                  },
                   "push": [MockFunction] {
                     "calls": Array [
                       Array [
@@ -330,6 +338,11 @@ exports[`OrganizationUserFeedback renders 1`] = `
                     "teams": Array [],
                   }
                 }
+                params={
+                  Object {
+                    "orgId": "org-slug",
+                  }
+                }
                 resetParamsOnChange={Array []}
                 router={
                   Object {
@@ -350,16 +363,16 @@ exports[`OrganizationUserFeedback renders 1`] = `
                           },
                         ],
                         Array [
-                          "/org-slug/project-slug/issues/1/",
+                          "/organizations/org-slug/issues/1/",
                         ],
                         Array [
-                          "/org-slug/project-slug/",
+                          "/organizations/org-slug/issues/",
                         ],
                         Array [
-                          "/org-slug/project-slug/issues/1/activity/",
+                          "/organizations/org-slug/issues/1/activity/",
                         ],
                         Array [
-                          "/org-slug/project-slug/issues/1/events/1",
+                          "/organizations/org-slug/issues/1/events/1/",
                         ],
                       ],
                       "results": Array [
@@ -397,6 +410,9 @@ exports[`OrganizationUserFeedback renders 1`] = `
                     "location": Object {
                       "query": Object {},
                     },
+                    "params": Object {
+                      "orgId": "org-slug",
+                    },
                     "push": [MockFunction] {
                       "calls": Array [
                         Array [
@@ -1710,7 +1726,7 @@ exports[`OrganizationUserFeedback renders 1`] = `
                           <div
                             className="css-9vq8an-textStyles issue-list"
                           >
-                            <CompactIssue
+                            <withRouter(CompactIssue)
                               data={
                                 Object {
                                   "assignedTo": null,
@@ -1746,22 +1762,149 @@ exports[`OrganizationUserFeedback renders 1`] = `
                               }
                               id="1"
                               key="123"
-                              orgId="org-slug"
-                              projectId="project-slug"
                             >
-                              <PanelItem
-                                className="issue level-undefined"
-                                direction="column"
-                                p={2}
-                                style={
+                              <CompactIssue
+                                data={
                                   Object {
-                                    "paddingBottom": "6px",
-                                    "paddingTop": "12px",
+                                    "assignedTo": null,
+                                    "id": "1",
+                                    "project": Object {
+                                      "id": "2",
+                                      "slug": "project-slug",
+                                    },
+                                    "stats": Object {
+                                      "24h": Array [
+                                        Array [
+                                          1517281200,
+                                          2,
+                                        ],
+                                        Array [
+                                          1517310000,
+                                          1,
+                                        ],
+                                      ],
+                                      "30d": Array [
+                                        Array [
+                                          1514764800,
+                                          1,
+                                        ],
+                                        Array [
+                                          1515024000,
+                                          122,
+                                        ],
+                                      ],
+                                    },
+                                    "tags": Array [],
+                                  }
+                                }
+                                id="1"
+                                location={
+                                  Object {
+                                    "query": Object {},
+                                  }
+                                }
+                                params={
+                                  Object {
+                                    "orgId": "org-slug",
+                                  }
+                                }
+                                router={
+                                  Object {
+                                    "createHref": [MockFunction] {
+                                      "calls": Array [
+                                        Array [
+                                          Object {
+                                            "pathname": undefined,
+                                            "query": Object {},
+                                          },
+                                        ],
+                                        Array [
+                                          Object {
+                                            "pathname": undefined,
+                                            "query": Object {
+                                              "status": "",
+                                            },
+                                          },
+                                        ],
+                                        Array [
+                                          "/organizations/org-slug/issues/1/",
+                                        ],
+                                        Array [
+                                          "/organizations/org-slug/issues/",
+                                        ],
+                                        Array [
+                                          "/organizations/org-slug/issues/1/activity/",
+                                        ],
+                                        Array [
+                                          "/organizations/org-slug/issues/1/events/1/",
+                                        ],
+                                      ],
+                                      "results": Array [
+                                        Object {
+                                          "isThrow": false,
+                                          "value": undefined,
+                                        },
+                                        Object {
+                                          "isThrow": false,
+                                          "value": undefined,
+                                        },
+                                        Object {
+                                          "isThrow": false,
+                                          "value": undefined,
+                                        },
+                                        Object {
+                                          "isThrow": false,
+                                          "value": undefined,
+                                        },
+                                        Object {
+                                          "isThrow": false,
+                                          "value": undefined,
+                                        },
+                                        Object {
+                                          "isThrow": false,
+                                          "value": undefined,
+                                        },
+                                      ],
+                                    },
+                                    "go": [MockFunction],
+                                    "goBack": [MockFunction],
+                                    "goForward": [MockFunction],
+                                    "isActive": [MockFunction],
+                                    "listen": [MockFunction],
+                                    "location": Object {
+                                      "query": Object {},
+                                    },
+                                    "params": Object {
+                                      "orgId": "org-slug",
+                                    },
+                                    "push": [MockFunction] {
+                                      "calls": Array [
+                                        Array [
+                                          Object {
+                                            "pathname": undefined,
+                                            "query": Object {
+                                              "environment": Array [],
+                                              "project": Array [],
+                                              "statsPeriod": "14d",
+                                              "utc": "true",
+                                            },
+                                          },
+                                        ],
+                                      ],
+                                      "results": Array [
+                                        Object {
+                                          "isThrow": false,
+                                          "value": undefined,
+                                        },
+                                      ],
+                                    },
+                                    "replace": [MockFunction],
+                                    "setRouteLeaveHook": [MockFunction],
                                   }
                                 }
                               >
-                                <Base
-                                  className="issue level-undefined css-1cf8lr1-PanelItem eo8n7lk0"
+                                <PanelItem
+                                  className="issue level-undefined"
                                   direction="column"
                                   p={2}
                                   style={
@@ -1771,9 +1914,10 @@ exports[`OrganizationUserFeedback renders 1`] = `
                                     }
                                   }
                                 >
-                                  <div
+                                  <Base
                                     className="issue level-undefined css-1cf8lr1-PanelItem eo8n7lk0"
-                                    is={null}
+                                    direction="column"
+                                    p={2}
                                     style={
                                       Object {
                                         "paddingBottom": "6px",
@@ -1781,272 +1925,232 @@ exports[`OrganizationUserFeedback renders 1`] = `
                                       }
                                     }
                                   >
-                                    <CompactIssueHeader
-                                      data={
+                                    <div
+                                      className="issue level-undefined css-1cf8lr1-PanelItem eo8n7lk0"
+                                      is={null}
+                                      style={
                                         Object {
-                                          "assignedTo": null,
-                                          "id": "1",
-                                          "project": Object {
-                                            "id": "2",
-                                            "slug": "project-slug",
-                                          },
-                                          "stats": Object {
-                                            "24h": Array [
-                                              Array [
-                                                1517281200,
-                                                2,
-                                              ],
-                                              Array [
-                                                1517310000,
-                                                1,
-                                              ],
-                                            ],
-                                            "30d": Array [
-                                              Array [
-                                                1514764800,
-                                                1,
-                                              ],
-                                              Array [
-                                                1515024000,
-                                                122,
-                                              ],
-                                            ],
-                                          },
-                                          "tags": Array [],
+                                          "paddingBottom": "6px",
+                                          "paddingTop": "12px",
                                         }
                                       }
-                                      orgId="org-slug"
-                                      projectId="project-slug"
                                     >
-                                      <Flex
-                                        align="center"
+                                      <CompactIssueHeader
+                                        data={
+                                          Object {
+                                            "assignedTo": null,
+                                            "id": "1",
+                                            "project": Object {
+                                              "id": "2",
+                                              "slug": "project-slug",
+                                            },
+                                            "stats": Object {
+                                              "24h": Array [
+                                                Array [
+                                                  1517281200,
+                                                  2,
+                                                ],
+                                                Array [
+                                                  1517310000,
+                                                  1,
+                                                ],
+                                              ],
+                                              "30d": Array [
+                                                Array [
+                                                  1514764800,
+                                                  1,
+                                                ],
+                                                Array [
+                                                  1515024000,
+                                                  122,
+                                                ],
+                                              ],
+                                            },
+                                            "tags": Array [],
+                                          }
+                                        }
+                                        params={
+                                          Object {
+                                            "orgId": "org-slug",
+                                          }
+                                        }
                                       >
-                                        <Base
+                                        <Flex
                                           align="center"
-                                          className="css-5ipae5"
                                         >
-                                          <div
+                                          <Base
+                                            align="center"
                                             className="css-5ipae5"
-                                            is={null}
                                           >
-                                            <Box
-                                              mr={1}
+                                            <div
+                                              className="css-5ipae5"
+                                              is={null}
                                             >
-                                              <Base
-                                                className="css-xgysgc"
+                                              <Box
                                                 mr={1}
                                               >
-                                                <div
+                                                <Base
                                                   className="css-xgysgc"
-                                                  is={null}
+                                                  mr={1}
                                                 >
-                                                  <span
-                                                    className="error-level truncate"
-                                                  />
-                                                </div>
-                                              </Base>
-                                            </Box>
-                                            <h3
-                                              className="truncate"
-                                            >
-                                              <ProjectLink
-                                                to="/org-slug/project-slug/issues/1/"
+                                                  <div
+                                                    className="css-xgysgc"
+                                                    is={null}
+                                                  >
+                                                    <span
+                                                      className="error-level truncate"
+                                                    />
+                                                  </div>
+                                                </Base>
+                                              </Box>
+                                              <h3
+                                                className="truncate"
                                               >
-                                                <Link
-                                                  onlyActiveOnIndex={false}
-                                                  style={Object {}}
-                                                  to="/org-slug/project-slug/issues/1/"
+                                                <ProjectLink
+                                                  to="/organizations/org-slug/issues/1/"
                                                 >
-                                                  <a
-                                                    onClick={[Function]}
+                                                  <Link
+                                                    onlyActiveOnIndex={false}
                                                     style={Object {}}
+                                                    to="/organizations/org-slug/issues/1/"
                                                   >
-                                                    <span
-                                                      className="icon icon-soundoff"
-                                                    />
-                                                    <span
-                                                      className="icon icon-star-solid"
-                                                    />
-                                                    <span />
-                                                  </a>
-                                                </Link>
-                                              </ProjectLink>
-                                            </h3>
-                                          </div>
-                                        </Base>
-                                      </Flex>
-                                      <div
-                                        className="event-extra"
-                                      >
-                                        <span
-                                          className="project-name"
+                                                    <a
+                                                      onClick={[Function]}
+                                                      style={Object {}}
+                                                    >
+                                                      <span
+                                                        className="icon icon-soundoff"
+                                                      />
+                                                      <span
+                                                        className="icon icon-star-solid"
+                                                      />
+                                                      <span />
+                                                    </a>
+                                                  </Link>
+                                                </ProjectLink>
+                                              </h3>
+                                            </div>
+                                          </Base>
+                                        </Flex>
+                                        <div
+                                          className="event-extra"
                                         >
-                                          <ProjectLink
-                                            to="/org-slug/project-slug/"
+                                          <span
+                                            className="project-name"
                                           >
-                                            <Link
-                                              onlyActiveOnIndex={false}
-                                              style={Object {}}
-                                              to="/org-slug/project-slug/"
+                                            <ProjectLink
+                                              to="/organizations/org-slug/issues/"
                                             >
-                                              <a
-                                                onClick={[Function]}
+                                              <Link
+                                                onlyActiveOnIndex={false}
                                                 style={Object {}}
+                                                to="/organizations/org-slug/issues/"
                                               >
-                                                project-slug
-                                              </a>
-                                            </Link>
-                                          </ProjectLink>
-                                        </span>
-                                        <span>
-                                          <Link
-                                            className="comments"
-                                            to="/org-slug/project-slug/issues/1/activity/"
-                                          >
+                                                <a
+                                                  onClick={[Function]}
+                                                  style={Object {}}
+                                                >
+                                                  project-slug
+                                                </a>
+                                              </Link>
+                                            </ProjectLink>
+                                          </span>
+                                          <span>
                                             <Link
                                               className="comments"
-                                              onlyActiveOnIndex={false}
-                                              style={Object {}}
-                                              to="/org-slug/project-slug/issues/1/activity/"
+                                              to="/organizations/org-slug/issues/1/activity/"
                                             >
-                                              <a
+                                              <Link
                                                 className="comments"
-                                                onClick={[Function]}
+                                                onlyActiveOnIndex={false}
                                                 style={Object {}}
+                                                to="/organizations/org-slug/issues/1/activity/"
                                               >
-                                                <span
-                                                  className="icon icon-comments"
+                                                <a
+                                                  className="comments"
+                                                  onClick={[Function]}
                                                   style={Object {}}
-                                                />
-                                                <span
-                                                  className="tag-count"
-                                                />
-                                              </a>
+                                                >
+                                                  <span
+                                                    className="icon icon-comments"
+                                                    style={Object {}}
+                                                  />
+                                                  <span
+                                                    className="tag-count"
+                                                  />
+                                                </a>
+                                              </Link>
                                             </Link>
-                                          </Link>
-                                        </span>
-                                        <span
-                                          className="culprit"
-                                        />
-                                      </div>
-                                    </CompactIssueHeader>
-                                    <EventUserFeedback
-                                      issueId="1"
-                                      orgId="org-slug"
-                                      projectId="project-slug"
-                                      report={
-                                        Object {
-                                          "comments": "Something bad happened",
-                                          "dateCreated": "2018-12-20T00:00:00.000Z",
-                                          "email": "lyn@sentry.io",
-                                          "event": Object {
-                                            "eventID": "12345678901234567890123456789012",
-                                            "groupID": "1",
-                                            "id": "1",
-                                            "message": "ApiException",
-                                          },
-                                          "id": "123",
-                                          "issue": Object {
-                                            "assignedTo": null,
-                                            "id": "1",
-                                            "project": Object {
-                                              "id": "2",
-                                              "slug": "project-slug",
+                                          </span>
+                                          <span
+                                            className="culprit"
+                                          />
+                                        </div>
+                                      </CompactIssueHeader>
+                                      <EventUserFeedback
+                                        issueId="1"
+                                        orgId="org-slug"
+                                        report={
+                                          Object {
+                                            "comments": "Something bad happened",
+                                            "dateCreated": "2018-12-20T00:00:00.000Z",
+                                            "email": "lyn@sentry.io",
+                                            "event": Object {
+                                              "eventID": "12345678901234567890123456789012",
+                                              "groupID": "1",
+                                              "id": "1",
+                                              "message": "ApiException",
                                             },
-                                            "stats": Object {
-                                              "24h": Array [
-                                                Array [
-                                                  1517281200,
-                                                  2,
-                                                ],
-                                                Array [
-                                                  1517310000,
-                                                  1,
-                                                ],
-                                              ],
-                                              "30d": Array [
-                                                Array [
-                                                  1514764800,
-                                                  1,
+                                            "id": "123",
+                                            "issue": Object {
+                                              "assignedTo": null,
+                                              "id": "1",
+                                              "project": Object {
+                                                "id": "2",
+                                                "slug": "project-slug",
+                                              },
+                                              "stats": Object {
+                                                "24h": Array [
+                                                  Array [
+                                                    1517281200,
+                                                    2,
+                                                  ],
+                                                  Array [
+                                                    1517310000,
+                                                    1,
+                                                  ],
                                                 ],
-                                                Array [
-                                                  1515024000,
-                                                  122,
+                                                "30d": Array [
+                                                  Array [
+                                                    1514764800,
+                                                    1,
+                                                  ],
+                                                  Array [
+                                                    1515024000,
+                                                    122,
+                                                  ],
                                                 ],
-                                              ],
+                                              },
+                                              "tags": Array [],
                                             },
-                                            "tags": Array [],
-                                          },
-                                          "name": "Lyn",
+                                            "name": "Lyn",
+                                          }
                                         }
-                                      }
-                                    >
-                                      <div
-                                        className="user-report"
                                       >
                                         <div
-                                          className="activity-container"
+                                          className="user-report"
                                         >
-                                          <ul
-                                            className="activity"
+                                          <div
+                                            className="activity-container"
                                           >
-                                            <li
-                                              className="activity-note"
+                                            <ul
+                                              className="activity"
                                             >
-                                              <Avatar
-                                                className="avatar"
-                                                hasTooltip={false}
-                                                size={38}
-                                                user={
-                                                  Object {
-                                                    "comments": "Something bad happened",
-                                                    "dateCreated": "2018-12-20T00:00:00.000Z",
-                                                    "email": "lyn@sentry.io",
-                                                    "event": Object {
-                                                      "eventID": "12345678901234567890123456789012",
-                                                      "groupID": "1",
-                                                      "id": "1",
-                                                      "message": "ApiException",
-                                                    },
-                                                    "id": "123",
-                                                    "issue": Object {
-                                                      "assignedTo": null,
-                                                      "id": "1",
-                                                      "project": Object {
-                                                        "id": "2",
-                                                        "slug": "project-slug",
-                                                      },
-                                                      "stats": Object {
-                                                        "24h": Array [
-                                                          Array [
-                                                            1517281200,
-                                                            2,
-                                                          ],
-                                                          Array [
-                                                            1517310000,
-                                                            1,
-                                                          ],
-                                                        ],
-                                                        "30d": Array [
-                                                          Array [
-                                                            1514764800,
-                                                            1,
-                                                          ],
-                                                          Array [
-                                                            1515024000,
-                                                            122,
-                                                          ],
-                                                        ],
-                                                      },
-                                                      "tags": Array [],
-                                                    },
-                                                    "name": "Lyn",
-                                                  }
-                                                }
+                                              <li
+                                                className="activity-note"
                                               >
-                                                <UserAvatar
+                                                <Avatar
                                                   className="avatar"
-                                                  gravatar={false}
                                                   hasTooltip={false}
                                                   size={38}
                                                   user={
@@ -2096,36 +2200,79 @@ exports[`OrganizationUserFeedback renders 1`] = `
                                                     }
                                                   }
                                                 >
-                                                  <BaseAvatar
+                                                  <UserAvatar
                                                     className="avatar"
-                                                    gravatarId="lyn@sentry.io"
+                                                    gravatar={false}
                                                     hasTooltip={false}
-                                                    letterId="lyn@sentry.io"
-                                                    round={true}
                                                     size={38}
-                                                    style={Object {}}
-                                                    title="Lyn"
-                                                    tooltip="Lyn (lyn@sentry.io)"
-                                                    type="letter_avatar"
-                                                    uploadPath="avatar"
+                                                    user={
+                                                      Object {
+                                                        "comments": "Something bad happened",
+                                                        "dateCreated": "2018-12-20T00:00:00.000Z",
+                                                        "email": "lyn@sentry.io",
+                                                        "event": Object {
+                                                          "eventID": "12345678901234567890123456789012",
+                                                          "groupID": "1",
+                                                          "id": "1",
+                                                          "message": "ApiException",
+                                                        },
+                                                        "id": "123",
+                                                        "issue": Object {
+                                                          "assignedTo": null,
+                                                          "id": "1",
+                                                          "project": Object {
+                                                            "id": "2",
+                                                            "slug": "project-slug",
+                                                          },
+                                                          "stats": Object {
+                                                            "24h": Array [
+                                                              Array [
+                                                                1517281200,
+                                                                2,
+                                                              ],
+                                                              Array [
+                                                                1517310000,
+                                                                1,
+                                                              ],
+                                                            ],
+                                                            "30d": Array [
+                                                              Array [
+                                                                1514764800,
+                                                                1,
+                                                              ],
+                                                              Array [
+                                                                1515024000,
+                                                                122,
+                                                              ],
+                                                            ],
+                                                          },
+                                                          "tags": Array [],
+                                                        },
+                                                        "name": "Lyn",
+                                                      }
+                                                    }
                                                   >
-                                                    <Tooltip
-                                                      disabled={true}
-                                                      title="Lyn (lyn@sentry.io)"
+                                                    <BaseAvatar
+                                                      className="avatar"
+                                                      gravatarId="lyn@sentry.io"
+                                                      hasTooltip={false}
+                                                      letterId="lyn@sentry.io"
+                                                      round={true}
+                                                      size={38}
+                                                      style={Object {}}
+                                                      title="Lyn"
+                                                      tooltip="Lyn (lyn@sentry.io)"
+                                                      type="letter_avatar"
+                                                      uploadPath="avatar"
                                                     >
-                                                      <StyledBaseAvatar
-                                                        className="avatar avatar"
-                                                        loaded={true}
-                                                        round={true}
-                                                        style={
-                                                          Object {
-                                                            "height": "38px",
-                                                            "width": "38px",
-                                                          }
-                                                        }
+                                                      <Tooltip
+                                                        disabled={true}
+                                                        title="Lyn (lyn@sentry.io)"
                                                       >
-                                                        <span
-                                                          className="avatar avatar css-3f9bmx-StyledBaseAvatar e1z0ohzl0"
+                                                        <StyledBaseAvatar
+                                                          className="avatar avatar"
+                                                          loaded={true}
+                                                          round={true}
                                                           style={
                                                             Object {
                                                               "height": "38px",
@@ -2133,110 +2280,120 @@ exports[`OrganizationUserFeedback renders 1`] = `
                                                             }
                                                           }
                                                         >
-                                                          <LetterAvatar
-                                                            displayName="Lyn"
-                                                            identifier="lyn@sentry.io"
-                                                            round={true}
+                                                          <span
+                                                            className="avatar avatar css-3f9bmx-StyledBaseAvatar e1z0ohzl0"
+                                                            style={
+                                                              Object {
+                                                                "height": "38px",
+                                                                "width": "38px",
+                                                              }
+                                                            }
                                                           >
-                                                            <Svg
+                                                            <LetterAvatar
+                                                              displayName="Lyn"
+                                                              identifier="lyn@sentry.io"
                                                               round={true}
-                                                              viewBox="0 0 120 120"
                                                             >
-                                                              <svg
-                                                                className="css-1r4mnb9-Svg e1knxa8x0"
+                                                              <Svg
+                                                                round={true}
                                                                 viewBox="0 0 120 120"
                                                               >
-                                                                <rect
-                                                                  fill="#57b1be"
-                                                                  height="120"
-                                                                  rx="15"
-                                                                  ry="15"
-                                                                  width="120"
-                                                                  x="0"
-                                                                  y="0"
-                                                                />
-                                                                <text
-                                                                  fill="#FFFFFF"
-                                                                  fontSize="65"
-                                                                  style={
-                                                                    Object {
-                                                                      "dominantBaseline": "central",
-                                                                    }
-                                                                  }
-                                                                  textAnchor="middle"
-                                                                  x="50%"
-                                                                  y="50%"
+                                                                <svg
+                                                                  className="css-1r4mnb9-Svg e1knxa8x0"
+                                                                  viewBox="0 0 120 120"
                                                                 >
-                                                                  L
-                                                                </text>
-                                                              </svg>
-                                                            </Svg>
-                                                          </LetterAvatar>
-                                                        </span>
-                                                      </StyledBaseAvatar>
-                                                    </Tooltip>
-                                                  </BaseAvatar>
-                                                </UserAvatar>
-                                              </Avatar>
-                                              <div
-                                                className="activity-bubble"
-                                              >
-                                                <div>
-                                                  <TimeSince
-                                                    date="2018-12-20T00:00:00.000Z"
-                                                    suffix="ago"
-                                                  >
-                                                    <time
-                                                      dateTime="2018-12-20T00:00:00.000Z"
-                                                      title="December 20, 2018 12:00 AM UTC"
+                                                                  <rect
+                                                                    fill="#57b1be"
+                                                                    height="120"
+                                                                    rx="15"
+                                                                    ry="15"
+                                                                    width="120"
+                                                                    x="0"
+                                                                    y="0"
+                                                                  />
+                                                                  <text
+                                                                    fill="#FFFFFF"
+                                                                    fontSize="65"
+                                                                    style={
+                                                                      Object {
+                                                                        "dominantBaseline": "central",
+                                                                      }
+                                                                    }
+                                                                    textAnchor="middle"
+                                                                    x="50%"
+                                                                    y="50%"
+                                                                  >
+                                                                    L
+                                                                  </text>
+                                                                </svg>
+                                                              </Svg>
+                                                            </LetterAvatar>
+                                                          </span>
+                                                        </StyledBaseAvatar>
+                                                      </Tooltip>
+                                                    </BaseAvatar>
+                                                  </UserAvatar>
+                                                </Avatar>
+                                                <div
+                                                  className="activity-bubble"
+                                                >
+                                                  <div>
+                                                    <TimeSince
+                                                      date="2018-12-20T00:00:00.000Z"
+                                                      suffix="ago"
                                                     >
-                                                      in a year
-                                                    </time>
-                                                  </TimeSince>
-                                                  <div
-                                                    className="activity-author"
-                                                  >
-                                                    Lyn
-                                                    <small>
-                                                      lyn@sentry.io
-                                                    </small>
-                                                    <small>
-                                                      <Link
-                                                        to="/org-slug/project-slug/issues/1/events/1"
+                                                      <time
+                                                        dateTime="2018-12-20T00:00:00.000Z"
+                                                        title="December 20, 2018 12:00 AM UTC"
                                                       >
+                                                        in a year
+                                                      </time>
+                                                    </TimeSince>
+                                                    <div
+                                                      className="activity-author"
+                                                    >
+                                                      Lyn
+                                                      <small>
+                                                        lyn@sentry.io
+                                                      </small>
+                                                      <small>
                                                         <Link
-                                                          onlyActiveOnIndex={false}
-                                                          style={Object {}}
-                                                          to="/org-slug/project-slug/issues/1/events/1"
+                                                          to="/organizations/org-slug/issues/1/events/1/"
                                                         >
-                                                          <a
-                                                            onClick={[Function]}
+                                                          <Link
+                                                            onlyActiveOnIndex={false}
                                                             style={Object {}}
+                                                            to="/organizations/org-slug/issues/1/events/1/"
                                                           >
-                                                            View event
-                                                          </a>
+                                                            <a
+                                                              onClick={[Function]}
+                                                              style={Object {}}
+                                                            >
+                                                              View event
+                                                            </a>
+                                                          </Link>
                                                         </Link>
-                                                      </Link>
-                                                    </small>
-                                                  </div>
-                                                  <p
-                                                    dangerouslySetInnerHTML={
-                                                      Object {
-                                                        "__html": "Something bad happened",
+                                                      </small>
+                                                    </div>
+                                                    <p
+                                                      dangerouslySetInnerHTML={
+                                                        Object {
+                                                          "__html": "Something bad happened",
+                                                        }
                                                       }
-                                                    }
-                                                  />
+                                                    />
+                                                  </div>
                                                 </div>
-                                              </div>
-                                            </li>
-                                          </ul>
+                                              </li>
+                                            </ul>
+                                          </div>
                                         </div>
-                                      </div>
-                                    </EventUserFeedback>
-                                  </div>
-                                </Base>
-                              </PanelItem>
-                            </CompactIssue>
+                                      </EventUserFeedback>
+                                    </div>
+                                  </Base>
+                                </PanelItem>
+                              </CompactIssue>
+                            </withRouter(CompactIssue)>
                           </div>
                         </PanelBody>
                       </div>
diff --git a/tests/js/spec/views/userFeedback/__snapshots__/projectUserFeedback.spec.jsx.snap b/tests/js/spec/views/userFeedback/__snapshots__/projectUserFeedback.spec.jsx.snap
index dcfa7e49bc..ebe576f578 100644
--- a/tests/js/spec/views/userFeedback/__snapshots__/projectUserFeedback.spec.jsx.snap
+++ b/tests/js/spec/views/userFeedback/__snapshots__/projectUserFeedback.spec.jsx.snap
@@ -16,7 +16,7 @@ exports[`projectUserFeedback renders 1`] = `
   }
   status="unresolved"
 >
-  <CompactIssue
+  <withRouter(CompactIssue)
     data={
       Object {
         "assignedTo": null,
@@ -52,8 +52,6 @@ exports[`projectUserFeedback renders 1`] = `
     }
     id="1"
     key="123"
-    orgId="org-slug"
-    projectId="project-slug"
   >
     <EventUserFeedback
       issueId="1"
@@ -106,6 +104,6 @@ exports[`projectUserFeedback renders 1`] = `
         }
       }
     />
-  </CompactIssue>
+  </withRouter(CompactIssue)>
 </UserFeedbackContainer>
 `;
diff --git a/tests/js/spec/views/userFeedback/organizationUserFeedback.spec.jsx b/tests/js/spec/views/userFeedback/organizationUserFeedback.spec.jsx
index 944b8585fe..65dfb14ddc 100644
--- a/tests/js/spec/views/userFeedback/organizationUserFeedback.spec.jsx
+++ b/tests/js/spec/views/userFeedback/organizationUserFeedback.spec.jsx
@@ -4,6 +4,7 @@ import {mount} from 'enzyme';
 import {OrganizationUserFeedback} from 'app/views/userFeedback/organizationUserFeedback';
 
 describe('OrganizationUserFeedback', function() {
+  let organization, routerContext;
   beforeEach(function() {
     const pageLinks =
       '<https://sentry.io/api/0/organizations/sentry/user-feedback/?statsPeriod=14d&cursor=0:0:1>; rel="previous"; results="false"; cursor="0:0:1", ' +
@@ -19,6 +20,19 @@ describe('OrganizationUserFeedback', function() {
       url: '/organizations/org-slug/environments/',
       body: TestStubs.Environments(),
     });
+
+    organization = TestStubs.Organization();
+    routerContext = TestStubs.routerContext([
+      {
+        organization,
+        router: {
+          ...TestStubs.router(),
+          params: {
+            orgId: organization.slug,
+          },
+        },
+      },
+    ]);
   });
 
   it('renders', function() {
@@ -26,13 +40,10 @@ describe('OrganizationUserFeedback', function() {
       organization: TestStubs.Organization({features: ['sentry10']}),
       location: {query: {}, search: ''},
       params: {
-        orgId: 'org-slug',
+        orgId: organization.slug,
       },
     };
-    const wrapper = mount(
-      <OrganizationUserFeedback {...params} />,
-      TestStubs.routerContext()
-    );
+    const wrapper = mount(<OrganizationUserFeedback {...params} />, routerContext);
 
     expect(wrapper).toMatchSnapshot();
   });
