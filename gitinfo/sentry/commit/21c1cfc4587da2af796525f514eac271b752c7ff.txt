commit 21c1cfc4587da2af796525f514eac271b752c7ff
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Fri May 12 08:42:30 2017 -0700

    api: missed one bad grouptagvalue query
    
    This was ultimately trying to perform a subquery, so when partitioned
    off, this failed.
    
    Fixes SENTRY-3C5

diff --git a/src/sentry/api/endpoints/organization_user_issues_search.py b/src/sentry/api/endpoints/organization_user_issues_search.py
index 2e5f5f361c..e1bf73e860 100644
--- a/src/sentry/api/endpoints/organization_user_issues_search.py
+++ b/src/sentry/api/endpoints/organization_user_issues_search.py
@@ -45,7 +45,7 @@ class OrganizationUserIssuesSearchEndpoint(OrganizationEndpoint):
                                             value__in=tag_values,
                                             project_id__in=projects)
 
-        group_ids = tags.values_list('group_id', flat=True)
+        group_ids = set(tags.values_list('group_id', flat=True))
 
         groups = Group.objects.filter(id__in=group_ids,
                                       project_id__in=projects).order_by('-last_seen')[:limit]
