commit 21b131ab8e097df4551e1755ee1239cf30e1cc74
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Tue Oct 15 10:42:47 2019 +0200

    fix: Cast CanonicalKeyDict to dict before JSON-serializing (#15090)

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index eb348360ee..3fb47477e6 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -288,7 +288,7 @@ def process_event(event_manager, project, key, remote_addr, helper, attachments,
 
     if random.random() < options.get("store.sample-rust-data-scrubber", 0.0):
         rust_scrubbed_data = safe_execute(
-            semaphore.scrub_event, datascrubbing_settings, data, _with_transaction=False
+            semaphore.scrub_event, datascrubbing_settings, dict(data), _with_transaction=False
         )
     else:
         rust_scrubbed_data = None
