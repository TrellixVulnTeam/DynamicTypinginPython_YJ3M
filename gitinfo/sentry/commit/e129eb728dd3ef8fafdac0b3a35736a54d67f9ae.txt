commit e129eb728dd3ef8fafdac0b3a35736a54d67f9ae
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Sep 4 17:51:26 2012 -0400

    Keep Group's message in sync with latest event (fixes GH-583)

diff --git a/src/sentry/manager.py b/src/sentry/manager.py
index 4c334856c8..0c44c26b45 100644
--- a/src/sentry/manager.py
+++ b/src/sentry/manager.py
@@ -543,6 +543,10 @@ class GroupManager(BaseManager, ChartMixin):
                 'last_seen': max(event.datetime, group.last_seen),
                 'score': ScoreClause(group),
             }
+            message = kwargs.get('message')
+            if message:
+                extra['message'] = message
+
             if group.status == STATUS_RESOLVED:
                 # Group has changed from resolved -> unresolved
                 is_new = True
diff --git a/tests/sentry/manager/tests.py b/tests/sentry/manager/tests.py
index d3ccdffa12..852678588d 100644
--- a/tests/sentry/manager/tests.py
+++ b/tests/sentry/manager/tests.py
@@ -203,12 +203,13 @@ class SentryManagerTest(TestCase):
 
     def test_updates_group(self):
         Group.objects.from_kwargs(1, message='foo', checksum='a' * 32)
-        event = Group.objects.from_kwargs(1, message='foo', checksum='a' * 32)
+        event = Group.objects.from_kwargs(1, message='foo bar', checksum='a' * 32)
 
         group = Group.objects.get(pk=event.group_id)
 
         self.assertEquals(group.times_seen, 2)
         self.assertEquals(group.last_seen.replace(microsecond=0), event.datetime.replace(microsecond=0))
+        self.assertEquals(group.message, 'foo bar')
 
     def test_get_accelerrated(self):
         if not has_trending():
