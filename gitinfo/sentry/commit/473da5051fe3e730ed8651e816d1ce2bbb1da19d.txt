commit 473da5051fe3e730ed8651e816d1ce2bbb1da19d
Author: Mark Story <mark@sentry.io>
Date:   Tue Feb 25 14:27:43 2020 -0500

    fix(gitlab) Improve instructions and fix back button (#17282)
    
    fix(gitlab) Improve instructions and fix back button
    
    Fixes #17200
    Fixes #17202

diff --git a/src/sentry/integrations/gitlab/integration.py b/src/sentry/integrations/gitlab/integration.py
index 1565491424..00061f641b 100644
--- a/src/sentry/integrations/gitlab/integration.py
+++ b/src/sentry/integrations/gitlab/integration.py
@@ -175,6 +175,10 @@ class InstallationForm(forms.Form):
 
 class InstallationConfigView(PipelineView):
     def dispatch(self, request, pipeline):
+        if "goback" in request.GET:
+            pipeline.state.step_index = 0
+            return pipeline.current_step()
+
         if request.method == "POST":
             form = InstallationForm(request.POST)
             if form.is_valid():
diff --git a/src/sentry/templates/sentry/integrations/gitlab-config.html b/src/sentry/templates/sentry/integrations/gitlab-config.html
index 796fef079b..c6835dfe55 100644
--- a/src/sentry/templates/sentry/integrations/gitlab-config.html
+++ b/src/sentry/templates/sentry/integrations/gitlab-config.html
@@ -41,7 +41,7 @@
 
     <fieldset class="form-actions clearfix">
       <div class="pull-right">
-        <a class="btn btn-default" href="{% url "sentry-extension-setup" "gitlab" %}">{% trans "Back to instructions" %}</a>
+        <a class="btn btn-default" href="{% url "sentry-extension-setup" "gitlab" %}?goback=1">{% trans "Back to instructions" %}</a>
         <button type="submit" class="btn btn-primary" name="save_mappings" value="url">{% trans "Submit" %}</button>
       </div>
     </fieldset>
@@ -52,7 +52,7 @@
   <p>{% trans "You'll also need to be a maintainer or owner in GitLab. Projects owned by users are not supported." %}</p>
   <ol>
     <li>{% trans "Navigate to the User Settings section of your GitLab instance." %} </li>
-    <li>{% trans "In the sidebar, select 'Applications'." %}</li>
+    <li>{% trans "In the sidebar, select 'Applications'.<br /> Or go to the <code>/profile/applications</code> path in your GitLab instance." %}</li>
     <li>{% trans "In the resulting form, enter the following information:" %}
       <ul class="list-unstyled code-list">
         {% for val in setup_values %}
diff --git a/tests/sentry/integrations/gitlab/test_integration.py b/tests/sentry/integrations/gitlab/test_integration.py
index 9d5d5f86c6..a0566219e4 100644
--- a/tests/sentry/integrations/gitlab/test_integration.py
+++ b/tests/sentry/integrations/gitlab/test_integration.py
@@ -137,6 +137,22 @@ class GitlabIntegrationTest(IntegrationTestCase):
         assert identity.status == IdentityStatus.VALID
         assert identity.data == {"access_token": "xxxxx-xxxxxxxxx-xxxxxxxxxx-xxxxxxxxxxxx"}
 
+    def test_goback_to_instructions(self):
+        # Go to instructions
+        resp = self.client.get(self.init_path)
+        assert resp.status_code == 200
+        self.assertContains(resp, "Step 1")
+
+        # Go to setup form
+        resp = self.client.get(self.init_path_without_guide)
+        assert resp.status_code == 200
+        self.assertContains(resp, "Step 2")
+
+        # Go to back to instructions
+        resp = self.client.get(self.init_path + '?goback=1')
+        assert resp.status_code == 200
+        self.assertContains(resp, "Step 1")
+
     @responses.activate
     def test_setup_missing_group(self):
         resp = self.client.get(self.init_path_without_guide)
