commit 34bf538e8ec3329233a8f051433c1741a4f79c9a
Author: Takayuki SHIMIZUKAWA <shimizukawa@gmail.com>
Date:   Thu Nov 14 14:11:45 2013 +0900

    fix: alert mail display invalid url (subpath in the SENTRY_URL_PREFIX was dropped)
    
    for example::
    
        >>> settings.SENTRY_URL_PREFIX='http://example.com/sentry'
        >>> url='/team/project/1/'  #generated by django.core.urlresolvers.reverse
        >>> urljoin(settings.SENTRY_URL_PREFIX, url)
        'http://example.com/team/project/1/'

diff --git a/src/sentry/utils/http.py b/src/sentry/utils/http.py
index 6dbe8f248a..065fa047fe 100644
--- a/src/sentry/utils/http.py
+++ b/src/sentry/utils/http.py
@@ -14,7 +14,7 @@ from django.conf import settings
 def absolute_uri(url=None):
     if not url:
         return settings.SENTRY_URL_PREFIX
-    return urljoin(settings.SENTRY_URL_PREFIX, url)
+    return urljoin(settings.SENTRY_URL_PREFIX, url.lstrip('/'))
 
 
 def safe_urlencode(params, doseq=0):
