commit 0700f37095599c47f9008ce588a44218295d3484
Author: Mark Story <mark@sentry.io>
Date:   Tue Mar 17 14:02:46 2020 -0400

    fix(discover) Update series labels to match function (#17708)
    
    Show the function name in the series legend and tooltips instead of
    'current' and 'previous'. Showing the function name makes it more
    obvious what value is being plotted.

diff --git a/src/sentry/static/sentry/app/views/events/eventsChart.jsx b/src/sentry/static/sentry/app/views/events/eventsChart.jsx
index 4474415d05..2dcd7cd20f 100644
--- a/src/sentry/static/sentry/app/views/events/eventsChart.jsx
+++ b/src/sentry/static/sentry/app/views/events/eventsChart.jsx
@@ -2,6 +2,7 @@ import PropTypes from 'prop-types';
 import React from 'react';
 import isEqual from 'lodash/isEqual';
 
+import {t} from 'app/locale';
 import {getInterval} from 'app/components/charts/utils';
 import ChartZoom from 'app/components/charts/chartZoom';
 import AreaChart from 'app/components/charts/areaChart';
@@ -26,6 +27,8 @@ class EventsAreaChart extends React.Component {
     timeseriesData: PropTypes.array,
     showLegend: PropTypes.bool,
     previousTimeseriesData: PropTypes.object,
+    currentSeriesName: PropTypes.string,
+    previousSeriesName: PropTypes.string,
   };
 
   shouldComponentUpdate(nextProps) {
@@ -53,12 +56,14 @@ class EventsAreaChart extends React.Component {
       timeseriesData,
       previousTimeseriesData,
       showLegend,
+      currentSeriesName,
+      previousSeriesName,
       ...props
     } = this.props;
 
     const legend = showLegend && {
       right: 16,
-      top: 16,
+      top: 12,
       selectedMode: false,
       icon: 'circle',
       itemHeight: 8,
@@ -70,7 +75,7 @@ class EventsAreaChart extends React.Component {
         fontSize: 11,
         fontFamily: 'Rubik',
       },
-      data: ['Current', 'Previous'],
+      data: [currentSeriesName ?? t('Current'), previousSeriesName ?? t('Previous'), ''],
     };
 
     return (
@@ -126,6 +131,7 @@ class EventsChart extends React.Component {
     } = this.props;
     // Include previous only on relative dates (defaults to relative if no start and end)
     const includePrevious = !start && !end;
+    const previousSeriesName = yAxis ? t('previous %s', yAxis) : undefined;
 
     return (
       <ChartZoom
@@ -149,6 +155,8 @@ class EventsChart extends React.Component {
             showLoading={false}
             query={query}
             includePrevious={includePrevious}
+            currentSeriesName={yAxis}
+            previousSeriesName={previousSeriesName}
             yAxis={yAxis}
           >
             {({loading, reloading, errored, timeseriesData, previousTimeseriesData}) => (
@@ -175,6 +183,8 @@ class EventsChart extends React.Component {
                           releaseSeries={releaseSeries}
                           timeseriesData={timeseriesData}
                           previousTimeseriesData={previousTimeseriesData}
+                          currentSeriesName={yAxis}
+                          previousSeriesName={previousSeriesName}
                         />
                       </React.Fragment>
                     </TransitionChart>
diff --git a/src/sentry/static/sentry/app/views/events/utils/eventsRequest.tsx b/src/sentry/static/sentry/app/views/events/utils/eventsRequest.tsx
index 311992e812..7738af7799 100644
--- a/src/sentry/static/sentry/app/views/events/utils/eventsRequest.tsx
+++ b/src/sentry/static/sentry/app/views/events/utils/eventsRequest.tsx
@@ -58,6 +58,7 @@ type EventsRequestPartialProps = {
   showLoading?: boolean;
   yAxis?: string | string[];
   currentSeriesName?: string;
+  previousSeriesName?: string;
   children: (renderProps: RenderProps) => React.ReactNode;
 };
 
@@ -299,7 +300,7 @@ class EventsRequest extends React.PureComponent<EventsRequestProps, EventsReques
     }
 
     return {
-      seriesName: 'Previous',
+      seriesName: this.props.previousSeriesName ?? 'Previous',
       data: this.calculateTotalsPerTimestamp(
         previous,
         (_timestamp, _countArray, i) => current[i][0] * 1000
