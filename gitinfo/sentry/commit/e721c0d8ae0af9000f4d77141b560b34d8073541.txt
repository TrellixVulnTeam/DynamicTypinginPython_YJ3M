commit e721c0d8ae0af9000f4d77141b560b34d8073541
Author: ted kaemming <t.kaemming+github@gmail.com>
Date:   Wed Aug 31 16:18:36 2016 -0700

    Add labels to report series graph X axis. (#4031)

diff --git a/src/sentry/tasks/reports.py b/src/sentry/tasks/reports.py
index e54d7bcadd..1f9d895650 100644
--- a/src/sentry/tasks/reports.py
+++ b/src/sentry/tasks/reports.py
@@ -503,14 +503,16 @@ def fetch_personal_statistics((start, stop), organization, user):
 
 Duration = namedtuple(
     'Duration', (
-        'adjective',  # e.g. "daily" or "weekly",
-        'noun',       # relative to today, e.g. "yesterday" or "this week"
+        'adjective',    # e.g. "daily" or "weekly",
+        'noun',         # relative to today, e.g. "yesterday" or "this week"
+        'date_format',  # date format used for series x axis labeling
     ))
 
 durations = {
     (60 * 60 * 24 * 7): Duration(
         'weekly',
         'this week',
+        'D',
     ),
 }
 
@@ -647,7 +649,7 @@ DistributionType = namedtuple('DistributionType', 'label color')
 
 def to_context(report, fetch_groups=None):
     series, aggregates, issue_list, release_list = report
-    series = [(timestamp, Point(*values)) for timestamp, values in series]
+    series = [(to_datetime(timestamp), Point(*values)) for timestamp, values in series]
 
     return {
         'series': {
diff --git a/src/sentry/templates/sentry/emails/email-styles.html b/src/sentry/templates/sentry/emails/email-styles.html
index 7eb991fb07..be2e80cc40 100644
--- a/src/sentry/templates/sentry/emails/email-styles.html
+++ b/src/sentry/templates/sentry/emails/email-styles.html
@@ -667,6 +667,18 @@
     color: #fff;
   }
 
+  .weekly-report .issue-graph .graph > td,
+  .weekly-report .issue-graph .labels > td {
+    padding-right: 5px;
+  }
+
+  .weekly-report .issue-graph .labels td {
+    padding-top: 3px;
+    font-size: 10px;
+    text-align: center;
+    color: #838c99;
+  }
+
   .weekly-report .legend .all,
   .weekly-report .issue-graph-bar .all {
     background-color: #e9e6ec;
@@ -700,7 +712,8 @@
   }
 
   .weekly-report .issues-resolved .issues-resolved-column .stat {
-    font-size: 30px;
+    font-size: 35px;
+    margin-top: 5px;
     margin-bottom: 5px;
   }
 
diff --git a/src/sentry/templates/sentry/emails/reports/body.html b/src/sentry/templates/sentry/emails/reports/body.html
index 600dfa416e..a1bb3aea05 100644
--- a/src/sentry/templates/sentry/emails/reports/body.html
+++ b/src/sentry/templates/sentry/emails/reports/body.html
@@ -44,17 +44,17 @@
     <tr>
       <td class="issues-resolved-column issues-resolved-column-left">
         <table class="issue-graph">
-          <tr>
+          <tr class="graph">
           {% with report.series.maximum as max %}
           {% for timestamp, metrics in report.series.points %}
-            <td valign="bottom" style="padding-right: 5px;">
+            <td valign="bottom" style="width: {% widthratio 1 report.series.points|length 100 %}%">
               <table class="issue-graph-bar">
                 {% if metrics.resolved or metrics.unresolved %}
                   <tr>
-                    <td class="all" height="{% widthratio metrics.unresolved max 56 %}px" title="{{ metrics.unresolved }}">&nbsp;</td>
+                    <td class="all" height="{% widthratio metrics.unresolved max 52 %}px" title="{{ metrics.unresolved }}">&nbsp;</td>
                   </tr>
                   <tr>
-                    <td class="resolved" height="{% widthratio metrics.resolved max 56 %}px" title="{{ metrics.resolved }}">&nbsp;</td>
+                    <td class="resolved" height="{% widthratio metrics.resolved max 52 %}px" title="{{ metrics.resolved }}">&nbsp;</td>
                   </tr>
                 {% else %}
                   <tr><td></td></tr>
@@ -65,6 +65,11 @@
           {% endfor %}
           {% endwith %}
           </tr>
+          <tr class="labels">
+            {% for timestamp, metrics in report.series.points %}
+              <td title="{{ timestamp }}" style="width: {% widthratio 1 report.series.points|length 100 %}%">{{ timestamp|date:duration.date_format }}</td>
+            {% endfor %}
+          </tr>
         </table>
       </td>
       {% for label, change in report.comparisons %}
