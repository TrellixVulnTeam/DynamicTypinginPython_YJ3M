commit d52fb451dbeb3eb1c8bd12cb6f3fd8cc6e0d695e
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Wed Apr 19 14:05:32 2017 +0200

    Require distribution to have a release set

diff --git a/tests/sentry/coreapi/tests.py b/tests/sentry/coreapi/tests.py
index b082776edb..f35bafdf50 100644
--- a/tests/sentry/coreapi/tests.py
+++ b/tests/sentry/coreapi/tests.py
@@ -363,6 +363,12 @@ class ValidateDataTest(BaseAPITest):
         assert data['errors'][0]['name'] == 'release'
         assert data['errors'][0]['value'] == 'a' * 65
 
+    def test_release_as_non_string(self):
+        data = self.helper.validate_data(self.project, {
+            'release': 42,
+        })
+        assert data.get('release') == '42'
+
     def test_distribution_too_long(self):
         data = self.helper.validate_data(self.project, {
             'release': 'a' * 62,
@@ -374,11 +380,19 @@ class ValidateDataTest(BaseAPITest):
         assert data['errors'][0]['name'] == 'distribution'
         assert data['errors'][0]['value'] == 'b' * 65
 
-    def test_release_as_non_string(self):
+    def test_distribution_as_non_string(self):
         data = self.helper.validate_data(self.project, {
-            'release': 42,
+            'release': '42',
+            'distribution': 23,
         })
         assert data.get('release') == '42'
+        assert data.get('distribution') == '23'
+
+    def test_distribution_no_release(self):
+        data = self.helper.validate_data(self.project, {
+            'distribution': 23,
+        })
+        assert data.get('distribution') is None
 
     def test_valid_platform(self):
         data = self.helper.validate_data(self.project, {
