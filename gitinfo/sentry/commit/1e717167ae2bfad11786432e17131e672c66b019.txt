commit 1e717167ae2bfad11786432e17131e672c66b019
Author: Ted Kaemming <ted@kaemming.com>
Date:   Wed Nov 18 15:04:07 2015 -0800

    Make minimum, increment, and maximum delay plugin options.

diff --git a/src/sentry/plugins/bases/notify.py b/src/sentry/plugins/bases/notify.py
index 6c5731da58..34c0eeb49e 100644
--- a/src/sentry/plugins/bases/notify.py
+++ b/src/sentry/plugins/bases/notify.py
@@ -80,7 +80,9 @@ class NotificationPlugin(Plugin):
 
             if features.has('projects:digests:store', project):
                 key = unsplit_key(self, event.group.project)
-                if digests.add(key, event_to_record(event, rules)):
+                increment_delay = self.get_option('digests:increment_delay', project=project)
+                maximum_delay = self.get_option('digests:maximum_delay', project=project)
+                if digests.add(key, event_to_record(event, rules), increment_delay=increment_delay, maximum_delay=maximum_delay):
                     deliver_digest.delay(key)
 
         else:
diff --git a/src/sentry/tasks/digests.py b/src/sentry/tasks/digests.py
index 23825f22d2..b76a56d74a 100644
--- a/src/sentry/tasks/digests.py
+++ b/src/sentry/tasks/digests.py
@@ -39,7 +39,8 @@ def deliver_digest(key, schedule_timestamp=None):
     from sentry.app import digests
 
     plugin, project = split_key(key)
-    with digests.digest(key) as records:
+    minimum_delay = plugin.get_option('digests:minimum_delay', project=project)
+    with digests.digest(key, minimum_delay=minimum_delay) as records:
         digest = build_digest(project, records)
 
     if digest:
