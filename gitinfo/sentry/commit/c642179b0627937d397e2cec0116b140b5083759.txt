commit c642179b0627937d397e2cec0116b140b5083759
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Oct 15 22:01:50 2013 +0100

    Correct empty message case

diff --git a/src/sentry/models.py b/src/sentry/models.py
index c98864159c..0ebe89e371 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -493,11 +493,11 @@ class EventBase(Model):
         super(EventBase, self).save(*args, **kwargs)
 
     def error(self):
-        message = strip(self.message.splitlines()[0])
-        if message:
-            message = truncatechars(message, 100)
-        else:
+        message = strip(self.message)
+        if not message:
             message = '<unlabeled message>'
+        else:
+            message = truncatechars(message.splitlines()[0], 100)
         return message
     error.short_description = _('error')
 
