commit 9cad38c3011de20910d2a0c3a64921cf13711d22
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Fri Mar 6 00:48:01 2020 -0800

    feat(ui): Convert progress ring text to HTML (#17488)
    
    This allows use to add more interesting content than just text into a
    progress ring.

diff --git a/docs-ui/components/progressRing.stories.js b/docs-ui/components/progressRing.stories.js
index 9ae2ca31ef..a5617beaaa 100644
--- a/docs-ui/components/progressRing.stories.js
+++ b/docs-ui/components/progressRing.stories.js
@@ -76,7 +76,7 @@ storiesOf('UI|ProgressRing', module).add(
           textCss={() => css`
             font-size: 14px;
             font-weight: bold;
-            fill: #ec5f5f;
+            color: #ec5f5f;
           `}
           progressColor="#ff4d44"
           backgroundColor="#fbe6e6"
diff --git a/src/sentry/static/sentry/app/components/progressRing.tsx b/src/sentry/static/sentry/app/components/progressRing.tsx
index c3143e76a6..b0c4f0a1d5 100644
--- a/src/sentry/static/sentry/app/components/progressRing.tsx
+++ b/src/sentry/static/sentry/app/components/progressRing.tsx
@@ -48,12 +48,17 @@ type Props = React.HTMLAttributes<SVGSVGElement> & {
   progressEndcaps?: React.SVGAttributes<SVGCircleElement>['strokeLinecap'];
 };
 
-const Text = styled('text')<Omit<TextProps, 'theme'>>`
-  fill: ${p => p.theme.gray1};
+const Text = styled('div')<Omit<TextProps, 'theme'>>`
+  position: absolute;
+  display: flex;
+  align-items: center;
+  justify-content: center;
+  height: 100%;
+  width: 100%;
+  color: ${p => p.theme.gray1};
   font-size: ${p => p.theme.fontSizeExtraSmall};
-  text-anchor: middle;
-  dominant-baseline: central;
-  transition: fill 100ms;
+  padding-top: 1px;
+  transition: color 100ms;
   ${p => p.textCss && p.textCss(p)}
 `;
 
@@ -106,7 +111,6 @@ const ProgressRing = ({
 
   return (
     <svg height={radius * 2 + barWidth} width={radius * 2 + barWidth} {...p}>
-      {text !== undefined && textNode}
       <RingBackground
         r={radius}
         barWidth={barWidth}
@@ -124,6 +128,9 @@ const ProgressRing = ({
         cy={radius + barWidth / 2}
         color={ringColor}
       />
+      <foreignObject height="100%" width="100%">
+        {text !== undefined && textNode}
+      </foreignObject>
     </svg>
   );
 };
