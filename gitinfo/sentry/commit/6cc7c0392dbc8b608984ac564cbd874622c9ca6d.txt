commit 6cc7c0392dbc8b608984ac564cbd874622c9ca6d
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jan 18 13:36:34 2016 -0800

    Hide team settings link without access

diff --git a/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx b/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx
index a98327f93c..62e81d3f31 100644
--- a/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx
+++ b/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx
@@ -33,63 +33,61 @@ const ExpandedTeamList = React.createClass({
     return ConfigStore.get('urlPrefix') + '/organizations/' + org.slug;
   },
 
+  renderProjectList(team) {
+    return (
+      <tbody>
+        {sortArray(team.projects, function(o) {
+          return o.name;
+        }).map(this.renderProject)}
+      </tbody>
+    );
+  },
+
+  renderNoProjects(team) {
+    return (
+      <tbody>
+        <tr>
+          <td>
+            <p className="project-list-empty">
+              {tct('There are no projects in this team. Get started by [link:creating your first project].', {
+                link: <a href={this.urlPrefix() + '/projects/new/?team=' + team.slug} />
+              })}
+            </p>
+          </td>
+        </tr>
+      </tbody>
+    );
+  },
+
   renderTeamNode(team, urlPrefix) {
     // TODO: make this cleaner
-    if (team.projects.length) {
-      return (
-        <div className="box" key={team.slug}>
-          <div className="box-header">
-            <div className="pull-right actions hidden-xs">
-              <a className="leave-team" onClick={this.leaveTeam.bind(this, team)}>
-                {t('Leave Team')}
-              </a>
-              <a className="team-settings" href={urlPrefix + '/teams/' + team.slug + '/settings/'}>
+    let access = this.props.access;
+    return (
+      <div className="box" key={team.slug}>
+        <div className="box-header">
+          <div className="pull-right actions hidden-xs">
+            <a className="leave-team" onClick={this.leaveTeam.bind(this, team)}>
+              {t('Leave Team')}
+            </a>
+            {access.has('team:write') &&
+              <a className="team-settings" href={`${urlPrefix}/teams/${team.slug}/settings/`}>
                 {t('Team Settings')}
               </a>
-            </div>
-            <h3>{team.name}</h3>
-          </div>
-          <div className="box-content">
-            <table className="table project-list">
-              <tbody>{sortArray(team.projects, function(o) {
-                return o.name;
-              }).map(this.renderProject)}</tbody>
-            </table>
+            }
           </div>
+          <h3>{team.name}</h3>
         </div>
-      );
-    } else {
-      return (
-        <div className="box" key={team.slug}>
-          <div className="box-header">
-            <div className="pull-right actions hidden-xs">
-              <a className="leave-team" onClick={this.leaveTeam.bind(this, team)}>
-                {t('Leave Team')}
-              </a>
-              <a className="team-settings" href={urlPrefix + '/teams/' + team.slug + '/settings/'}>
-                {t('Team Settings')}
-              </a>
-            </div>
-            <h3>{team.name}</h3>
-          </div>
-          <div className="box-content">
-            <table className="table project-list">
-              <tbody>
-                <tr>
-                  <td>
-                    <p className="project-list-empty">
-                      {tct('There are no projects in this team. Get started by [link:creating your first project].', {
-                        link: <a href={this.urlPrefix() + '/projects/new/?team=' + team.slug} />
-                      })}
-                    </p>
-                  </td>
-                </tr>
-              </tbody>
-            </table>
-          </div>
+        <div className="box-content">
+          <table className="table project-list">
+            {team.projects.length ?
+              this.renderProjectList(team)
+            :
+              this.renderNoProjects(team)
+            }
+          </table>
         </div>
-      );
-    }
+      </div>
+    );
   },
 
   renderProject(project) {
diff --git a/src/sentry/static/sentry/app/views/organizationTeams/index.jsx b/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
index 989f62721c..9570709a07 100644
--- a/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
+++ b/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
@@ -106,6 +106,7 @@ const OrganizationTeams = React.createClass({
                     organization={org} teamList={activeTeams}
                     projectStats={this.state.projectStats}
                     hasTeams={allTeams.length !== 0}
+                    access={access}
                     showAllTeams={this.toggleTeams.bind(this, 'all-teams')} />
               :
                 <AllTeamsList
