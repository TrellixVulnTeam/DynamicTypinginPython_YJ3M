commit cb71302881b21661e22beb452e1890a79e9ea652
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Apr 21 23:08:05 2014 -0700

    Correct test

diff --git a/src/sentry/static/sentry/scripts/views.js b/src/sentry/static/sentry/scripts/views.js
index f744791eac..9f64f6e452 100644
--- a/src/sentry/static/sentry/scripts/views.js
+++ b/src/sentry/static/sentry/scripts/views.js
@@ -326,7 +326,7 @@
                     while (this.collection.length >= this.options.maxItems)
                         this.collection.pop();
                 }
-            } else if (existing.get('version') >= member.version) {
+            } else if (member.version && existing.get('version') >= member.version) {
                 return;
             }
             this.collection.add(member, {merge: true});
diff --git a/tests/js/spec/OrderedElementsViewSpec.js b/tests/js/spec/OrderedElementsViewSpec.js
index d6b68d6e95..6d7f0d02b9 100644
--- a/tests/js/spec/OrderedElementsViewSpec.js
+++ b/tests/js/spec/OrderedElementsViewSpec.js
@@ -15,7 +15,7 @@ function make_group(data) {
     logger: 'root',
     versions: [],
     tags: [],
-    version: 0
+    version: data.version || 0
   };
 }
 
@@ -234,11 +234,11 @@ describe("OrderedElementsView", function() {
     });
 
     it("resorts members when they change", function(){
-      view.addMember(make_group({id: 1, score: 1}));
-      view.addMember(make_group({id: 2, score: 10}));
-      view.addMember(make_group({id: 3, score: 100}));
+      view.addMember(make_group({id: 1, score: 1, version: 1}));
+      view.addMember(make_group({id: 2, score: 10, version: 1}));
+      view.addMember(make_group({id: 3, score: 100, version: 1}));
       // change the score so it should be at the top
-      view.addMember(make_group({id: 1, score: 1000}));
+      view.addMember(make_group({id: 1, score: 1000, version: 2}));
 
       assert.strictEqual(view.collection.models[0].get('id'), 1);
       assert.strictEqual(view.collection.models[1].get('id'), 3);
