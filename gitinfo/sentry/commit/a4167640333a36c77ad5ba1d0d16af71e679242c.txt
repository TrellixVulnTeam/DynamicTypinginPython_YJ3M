commit a4167640333a36c77ad5ba1d0d16af71e679242c
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Tue Mar 13 15:45:40 2018 -0700

    ref(features): Move team/project changes into their own feature flag

diff --git a/src/sentry/api/endpoints/project_transfer.py b/src/sentry/api/endpoints/project_transfer.py
index 18625dcc1e..8a82b0e3ce 100644
--- a/src/sentry/api/endpoints/project_transfer.py
+++ b/src/sentry/api/endpoints/project_transfer.py
@@ -76,15 +76,15 @@ class ProjectTransferEndpoint(ProjectEndpoint):
             user_id=owner.user_id,
             transaction_id=transaction_id)
 
-        is_internal = features.has(
-            'organizations:internal-catchall',
+        has_new_teams = features.has(
+            'organizations:new-teams',
             project.organization,
             actor=request.user,
         )
         context = {
             'email': email,
             'from_org': project.organization.name,
-            'project_name': project.slug if is_internal else project.name,
+            'project_name': project.slug if has_new_teams else project.name,
             'request_time': timezone.now(),
             'url':
             absolute_uri('/accept-transfer/') + '?' + urlencode({'data': url_data}),
diff --git a/src/sentry/plugins/sentry_mail/activity/new_processing_issues.py b/src/sentry/plugins/sentry_mail/activity/new_processing_issues.py
index 14f487c915..b402668479 100644
--- a/src/sentry/plugins/sentry_mail/activity/new_processing_issues.py
+++ b/src/sentry/plugins/sentry_mail/activity/new_processing_issues.py
@@ -55,12 +55,12 @@ class NewProcessingIssuesActivityEmail(ActivityEmail):
         }
 
     def get_subject(self):
-        is_internal = features.has(
-            'organizations:internal-catchall',
+        has_new_teams = features.has(
+            'organizations:new-teams',
             self.organization,
         )
         return u'Processing Issues on {}'.format(
-            self.project.slug if is_internal else self.project.name,
+            self.project.slug if has_new_teams else self.project.name,
         )
 
     def get_template(self):
diff --git a/src/sentry/static/sentry/app/components/activity/noteInput.jsx b/src/sentry/static/sentry/app/components/activity/noteInput.jsx
index 2e4a3b79fe..be93297035 100644
--- a/src/sentry/static/sentry/app/components/activity/noteInput.jsx
+++ b/src/sentry/static/sentry/app/components/activity/noteInput.jsx
@@ -296,9 +296,7 @@ const NoteInput = createReactClass({
       mentionableTeams,
     } = this.state;
 
-    let hasTeamMentions = new Set(this.getOrganization().features).has(
-      'internal-catchall'
-    );
+    let hasTeamMentions = new Set(this.getOrganization().features).has('new-teams');
     let placeHolderText = hasTeamMentions
       ? t('Add details or updates to this event. \nTag users with @, or teams with #')
       : t('Add details or updates to this event. \nTag users with @');
diff --git a/src/sentry/static/sentry/app/components/assigneeSelector.jsx b/src/sentry/static/sentry/app/components/assigneeSelector.jsx
index f5064d5ce2..297c19d814 100644
--- a/src/sentry/static/sentry/app/components/assigneeSelector.jsx
+++ b/src/sentry/static/sentry/app/components/assigneeSelector.jsx
@@ -238,7 +238,7 @@ const AssigneeSelector = createReactClass({
     let org = this.context.organization;
     let features = new Set(org.features);
 
-    if (features.has('internal-catchall')) {
+    if (features.has('new-teams')) {
       teamNodes = AssigneeSelector.filterMembers(
         this.assignableTeams(),
         filter
@@ -311,7 +311,7 @@ const AssigneeSelector = createReactClass({
                     type="text"
                     className="form-control input-sm"
                     placeholder={
-                      features.has('internal-catchall')
+                      features.has('new-teams')
                         ? t('Filter teams and people')
                         : t('Filter members')
                     }
diff --git a/src/sentry/static/sentry/app/components/missingProjectMembership.jsx b/src/sentry/static/sentry/app/components/missingProjectMembership.jsx
index 5341d0732c..262562c4ca 100644
--- a/src/sentry/static/sentry/app/components/missingProjectMembership.jsx
+++ b/src/sentry/static/sentry/app/components/missingProjectMembership.jsx
@@ -82,7 +82,7 @@ const MissingProjectMembership = createReactClass({
   },
 
   renderExplanation(features) {
-    if (features.has('internal-catchall')) {
+    if (features.has('new-teams')) {
       if (features.has('open-membership')) {
         return t('To view this data you must one of the following teams.');
       } else {
@@ -136,7 +136,7 @@ const MissingProjectMembership = createReactClass({
           <span className="icon icon-exclamation" />
           <p>{t("You're not a member of this project.")}</p>
           <p>{this.renderExplanation(features)}</p>
-          {features.has('internal-catchall') ? (
+          {features.has('new-teams') ? (
             this.renderJoinTeams(features)
           ) : (
             <p>{this.renderJoinTeam(team, features)}</p>
diff --git a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
index f004d11854..78fb2a2657 100644
--- a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
+++ b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
@@ -94,7 +94,7 @@ const ProjectSelector = createReactClass({
       }
 
       let fullName;
-      if (features.has('internal-catchall')) {
+      if (features.has('new-teams')) {
         fullName = [project.name, project.slug];
       } else {
         fullName = [team.name, project.name, team.slug, project.slug];
@@ -224,7 +224,7 @@ const ProjectSelector = createReactClass({
     let label, text;
     let features = new Set(this.props.organization.features);
 
-    if (features.has('internal-catchall')) {
+    if (features.has('new-teams')) {
       label = <span>{project.slug}</span>;
       text = project.slug;
     } else if (!hasSingleTeam && project.name.indexOf(team.name) === -1) {
@@ -321,7 +321,7 @@ const ProjectSelector = createReactClass({
     let hasSingleTeam = org.teams.length === 1;
 
     let projectList;
-    if (features.has('internal-catchall')) {
+    if (features.has('new-teams')) {
       projectList = sortArray(this.state.projectList, ([team, project]) => {
         return [!project.isBookmarked, project.name];
       });
diff --git a/src/sentry/static/sentry/app/components/projectLabel.jsx b/src/sentry/static/sentry/app/components/projectLabel.jsx
index 279d1d0df9..5f7be4dd21 100644
--- a/src/sentry/static/sentry/app/components/projectLabel.jsx
+++ b/src/sentry/static/sentry/app/components/projectLabel.jsx
@@ -14,7 +14,7 @@ export default class ProjectLabel extends React.PureComponent {
     return (
       <span className="project-label" {...this.props}>
         <span className="project-name">
-          {features.has('internal-catchall') ? project.slug : project.name}
+          {features.has('new-teams') ? project.slug : project.name}
         </span>
       </span>
     );
diff --git a/src/sentry/static/sentry/app/data/forms/projectGeneralSettings.jsx b/src/sentry/static/sentry/app/data/forms/projectGeneralSettings.jsx
index 6b60a736f8..4c8f10161e 100644
--- a/src/sentry/static/sentry/app/data/forms/projectGeneralSettings.jsx
+++ b/src/sentry/static/sentry/app/data/forms/projectGeneralSettings.jsx
@@ -59,7 +59,7 @@ export const fields = {
     label: t('Team'),
     visible: ({organization}) => {
       let features = new Set(organization.features);
-      return !features.has('internal-catchall') && organization.teams.length > 1;
+      return !features.has('new-teams') && organization.teams.length > 1;
     },
     choices: ({organization}) =>
       organization.teams.filter(o => o.isMember).map(o => [o.slug, o.slug]),
diff --git a/src/sentry/static/sentry/app/views/organizationDashboard.jsx b/src/sentry/static/sentry/app/views/organizationDashboard.jsx
index a2e9edffb1..ae0fbf6737 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard.jsx
@@ -413,7 +413,7 @@ const OrganizationDashboard = createReactClass({
           <div className="col-md-4">
             {this.state.hooks}
             <EventsPerHour {...this.props} />
-            {features.has('internal-catchall') ? (
+            {features.has('new-teams') ? (
               <ProjectList {...this.props} projects={this.state.projects} />
             ) : (
               <ProjectListOld {...this.props} projects={this.state.projects} />
diff --git a/src/sentry/static/sentry/app/views/projectChooser.jsx b/src/sentry/static/sentry/app/views/projectChooser.jsx
index b8eec39f40..88ae842a42 100644
--- a/src/sentry/static/sentry/app/views/projectChooser.jsx
+++ b/src/sentry/static/sentry/app/views/projectChooser.jsx
@@ -60,9 +60,7 @@ const ProjectChooser = createReactClass({
                       <td>
                         <h4>
                           <a href={`/${org.slug}/${project.slug}/${task.location}`}>
-                            {features.has('internal-catchall')
-                              ? project.slug
-                              : project.name}
+                            {features.has('new-teams') ? project.slug : project.name}
                           </a>
                         </h4>
                       </td>
diff --git a/src/sentry/static/sentry/app/views/settings/organization/stats/projectTable.jsx b/src/sentry/static/sentry/app/views/settings/organization/stats/projectTable.jsx
index 596f7ae23d..e40f06662c 100644
--- a/src/sentry/static/sentry/app/views/settings/organization/stats/projectTable.jsx
+++ b/src/sentry/static/sentry/app/views/settings/organization/stats/projectTable.jsx
@@ -70,7 +70,7 @@ class ProjectTable extends React.PureComponent {
               <tr key={item.id}>
                 <td>
                   <Link to={`/${org.slug}/${project.slug}/`}>
-                    {features.has('internal-catchall')
+                    {features.has('new-teams')
                       ? project.slug
                       : `${project.team.name} / ${project.name}`}
                   </Link>
diff --git a/src/sentry/static/sentry/app/views/settings/team/allTeamsRow.jsx b/src/sentry/static/sentry/app/views/settings/team/allTeamsRow.jsx
index ea5d5f17f5..b6904400f0 100644
--- a/src/sentry/static/sentry/app/views/settings/team/allTeamsRow.jsx
+++ b/src/sentry/static/sentry/app/views/settings/team/allTeamsRow.jsx
@@ -115,7 +115,7 @@ const AllTeamsRow = createReactClass({
   render() {
     let {access, team, urlPrefix, openMembership, organization} = this.props;
     let features = new Set(organization.features);
-    let display = features.has('internal-catchall') ? `#${team.slug}` : team.name;
+    let display = features.has('new-teams') ? `#${team.slug}` : team.name;
     return (
       <PanelItem p={0} align="center">
         <Box flex="1" p={2}>
diff --git a/src/sentry/static/sentry/app/views/teamCreate.jsx b/src/sentry/static/sentry/app/views/teamCreate.jsx
index e9a1e89663..cd9bd2624c 100644
--- a/src/sentry/static/sentry/app/views/teamCreate.jsx
+++ b/src/sentry/static/sentry/app/views/teamCreate.jsx
@@ -18,7 +18,7 @@ export default class TeamCreate extends AsyncView {
 
     // Legacy behavior: redirect to project creation
     let redirectUrl = `/organizations/${orgId}/projects/new/?team=${data.slug}`;
-    if (features.has('internal-catchall')) {
+    if (features.has('new-teams')) {
       // New behavior: redirect to team settings page
       redirectUrl = `/settings/organization/${orgId}/teams/${data.slug}/`;
     }
@@ -31,7 +31,7 @@ export default class TeamCreate extends AsyncView {
 
   renderField() {
     let features = new Set(this.context.organization.features);
-    return features.has('internal-catchall') ? (
+    return features.has('new-teams') ? (
       <TextField
         name="slug"
         label={t('Team Slug')}
diff --git a/src/sentry/static/sentry/app/views/teamDetails.jsx b/src/sentry/static/sentry/app/views/teamDetails.jsx
index a739367ecd..41a2bb850d 100644
--- a/src/sentry/static/sentry/app/views/teamDetails.jsx
+++ b/src/sentry/static/sentry/app/views/teamDetails.jsx
@@ -97,7 +97,7 @@ const TeamDetails = createReactClass({
     const features = new Set(this.context.organization.features);
     return (
       <div>
-        <h3>{features.has('internal-catchall') ? `#${team.slug}` : team.name}</h3>
+        <h3>{features.has('new-teams') ? `#${team.slug}` : team.name}</h3>
 
         {!features.has('new-settings') &&
           access.has('team:admin') && (
diff --git a/src/sentry/web/frontend/remove_project.py b/src/sentry/web/frontend/remove_project.py
index eef234edd2..89d929a300 100644
--- a/src/sentry/web/frontend/remove_project.py
+++ b/src/sentry/web/frontend/remove_project.py
@@ -34,12 +34,12 @@ class RemoveProjectView(ProjectView):
                 is_sudo=True
             )
 
-            is_internal = features.has(
-                'organizations:internal-catchall',
+            has_new_teams = features.has(
+                'organizations:new-teams',
                 organization,
                 actor=request.user,
             )
-            project_name = (project.slug if is_internal else project.name).encode('utf-8')
+            project_name = (project.slug if has_new_teams else project.name).encode('utf-8')
             messages.add_message(
                 request, messages.SUCCESS,
                 _(u'The project %r was scheduled for deletion.') % (project_name, )
diff --git a/src/sentry/web/frontend/transfer_project.py b/src/sentry/web/frontend/transfer_project.py
index fdd7a0c822..1e7d5cad27 100644
--- a/src/sentry/web/frontend/transfer_project.py
+++ b/src/sentry/web/frontend/transfer_project.py
@@ -61,15 +61,15 @@ class TransferProjectView(ProjectView):
                 user_id=owner.user_id,
                 transaction_id=transaction_id)
 
-            is_internal = features.has(
-                'organizations:internal-catchall',
+            has_new_teams = features.has(
+                'organizations:new-teams',
                 organization,
                 actor=request.user,
             )
             context = {
                 'email': email,
                 'from_org': organization.name,
-                'project_name': project.slug if is_internal else project.name,
+                'project_name': project.slug if has_new_teams else project.name,
                 'request_time': timezone.now(),
                 'url':
                 absolute_uri('/accept-transfer/') + '?' + urlencode({'data': url_data}),
@@ -96,7 +96,7 @@ class TransferProjectView(ProjectView):
             messages.add_message(
                 request, messages.SUCCESS,
                 _(u'A request was sent to move project %r to a different organization') %
-                ((project.slug if is_internal else project.name).encode('utf-8'), )
+                ((project.slug if has_new_teams else project.name).encode('utf-8'), )
             )
 
             return HttpResponseRedirect(
diff --git a/tests/js/spec/components/assigneeSelector.spec.jsx b/tests/js/spec/components/assigneeSelector.spec.jsx
index a43730dffb..6c84fcbfe6 100644
--- a/tests/js/spec/components/assigneeSelector.spec.jsx
+++ b/tests/js/spec/components/assigneeSelector.spec.jsx
@@ -158,7 +158,7 @@ describe('AssigneeSelector', function() {
         TestStubs.routerContext()
       );
       assigneeSelector.setContext({
-        organization: {id: '1', features: new Set(['internal-catchall'])},
+        organization: {id: '1', features: new Set(['new-teams'])},
       });
 
       openMenu = () => assigneeSelector.find('a').simulate('click');
@@ -287,7 +287,7 @@ describe('AssigneeSelector', function() {
       // Remove org:write access permission and make sure invite member button is not shown.
       sel = mount(<AssigneeSelector id={GROUP_1.id} />, TestStubs.routerContext());
       sel.setContext({
-        organization: {id: '1', features: new Set(['internal-catchall'])},
+        organization: {id: '1', features: new Set(['new-teams'])},
       });
       sel.find('a').simulate('click');
       expect(sel.find('MenuItem.invite-member').exists()).toBe(false);
diff --git a/tests/js/spec/views/teamCreate.spec.jsx b/tests/js/spec/views/teamCreate.spec.jsx
index f129ce86e3..84396e33ae 100644
--- a/tests/js/spec/views/teamCreate.spec.jsx
+++ b/tests/js/spec/views/teamCreate.spec.jsx
@@ -58,7 +58,7 @@ describe('TeamCreate', function() {
       wrapper.setContext({
         organization: {
           id: '1337',
-          features: ['internal-catchall'],
+          features: ['new-teams'],
         },
       });
       wrapper.instance().onSubmitSuccess({
