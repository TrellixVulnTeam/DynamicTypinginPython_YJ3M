commit d36172fa76742a39c68518af00217a747bb3fafb
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Jan 15 14:54:20 2016 -0800

    Correctly handle invalid origin response

diff --git a/src/sentry/api/base.py b/src/sentry/api/base.py
index eaf92fe213..b389bac396 100644
--- a/src/sentry/api/base.py
+++ b/src/sentry/api/base.py
@@ -124,7 +124,9 @@ class Endpoint(APIView):
         if origin and request.auth:
             allowed_origins = request.auth.get_allowed_origins()
             if not is_valid_origin(origin, allowed=allowed_origins):
-                raise Response('Invalid origin: %s' % (origin,), status=400)
+                response = Response('Invalid origin: %s' % (origin,), status=400)
+                self.response = self.finalize_response(request, response, *args, **kwargs)
+                return self.response
 
         try:
             self.initial(request, *args, **kwargs)
