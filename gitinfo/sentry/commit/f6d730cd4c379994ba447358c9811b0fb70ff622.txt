commit f6d730cd4c379994ba447358c9811b0fb70ff622
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jul 28 16:25:53 2010 -0700

    Optional request object in signal handler

diff --git a/djangodblog/models.py b/djangodblog/models.py
index 482cf43a8c..53ca4dd38e 100644
--- a/djangodblog/models.py
+++ b/djangodblog/models.py
@@ -88,7 +88,7 @@ class ErrorBatch(Model):
 
     @staticmethod
     @transaction.commit_on_success
-    def handle_exception(sender, request, **kwargs):
+    def handle_exception(sender, request=None, **kwargs):
         exc_type, exc_value, traceback = sys.exc_info()
         
         if not settings.CATCH_404_ERRORS \
@@ -101,13 +101,19 @@ class ErrorBatch(Model):
         if transaction.is_dirty():
             transaction.rollback()
 
-        extra = dict(
-            url=request.build_absolute_uri(), data=dict(
+        if request:
+            data = dict(
                 META=request.META,
                 POST=request.POST,
                 GET=request.GET,
                 COOKIES=request.COOKIES,
             )
+        else:
+            data = dict()
+
+        extra = dict(
+            url=request.build_absolute_uri(),
+            data=data,
         )
 
         if settings.USE_LOGGING:
