commit fa225c0a16dc254000c0c31553cb61c46c6312fc
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Fri Aug 28 18:09:22 2015 +0200

    Started work on the organization endpoint documentation.

diff --git a/src/sentry/api/endpoints/organization_index.py b/src/sentry/api/endpoints/organization_index.py
index 22a487ce54..13f02b322e 100644
--- a/src/sentry/api/endpoints/organization_index.py
+++ b/src/sentry/api/endpoints/organization_index.py
@@ -36,13 +36,25 @@ class OrganizationIndexEndpoint(Endpoint):
             )
         return Response(serialize(organizations, request.user))
 
+    # XXX: endpoint useless for end-users as it needs user context.
     def post(self, request):
         """
         Create a New Organization
         `````````````````````````
 
-        Create a new organization.
+        Create a new organization owned by the request's user.  To create
+        an organization only the name is required.
+
+        :param string name: the human readable name for the new organization.
+        :param string slug: the unique URL slug for this organization.  If
+                            this is not provided a slug is automatically
+                            generated based on the name.
+        :auth: required, user-context-needed
         """
+        if not request.user.is_authenticated():
+            return Response({'detail': 'This endpoint requires user info'},
+                            status=401)
+
         serializer = OrganizationSerializer(data=request.DATA)
 
         if serializer.is_valid():
diff --git a/src/sentry/api/endpoints/organization_teams.py b/src/sentry/api/endpoints/organization_teams.py
index 6f59fe85b6..f3975dc3aa 100644
--- a/src/sentry/api/endpoints/organization_teams.py
+++ b/src/sentry/api/endpoints/organization_teams.py
@@ -8,6 +8,18 @@ from sentry.api.bases.organization import OrganizationEndpoint
 from sentry.api.serializers import serialize
 from sentry.api.serializers.models.team import TeamWithProjectsSerializer
 from sentry.models import AuditLogEntryEvent, Team, TeamStatus
+from sentry.utils.apidocs import scenario, attach_scenarios
+
+
+@scenario('CreateNewTeam')
+def create_new_team_scenario(runner):
+    runner.request(
+        method='POST',
+        path='/organizations/%s/teams/' % runner.org.slug,
+        data={
+            'name': 'Ancient Gabelers',
+        }
+    )
 
 
 class TeamSerializer(serializers.Serializer):
@@ -38,12 +50,22 @@ class OrganizationTeamsEndpoint(OrganizationEndpoint):
         return Response(serialize(
             team_list, request.user, TeamWithProjectsSerializer()))
 
+    @attach_scenarios([create_new_team_scenario])
     def post(self, request, organization):
         """
         Create a new Team
         ``````````````````
 
-        Create a new team bound to an organization.
+        Create a new team bound to an organization.  Only the name of the
+        team is needed to create it, the slug can be auto generated.
+
+        :pparam string organization_slug: the slug of the organization the
+                                          team should be created for.
+        :param string name: the name of the organization.
+        :param string slug: the optional slug for this organization.  If
+                            not provided it will be auto generated from the
+                            name.
+        :auth: required
         """
         serializer = TeamSerializer(data=request.DATA)
 
