commit a72a492024471a6ea6ee2b5cced9805cb3e11204
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Thu Dec 17 12:22:24 2015 -0800

    Handle invalid types now from PUT on system-options endpoint

diff --git a/src/sentry/api/endpoints/system_options.py b/src/sentry/api/endpoints/system_options.py
index e4789c0d5c..ac802840ca 100644
--- a/src/sentry/api/endpoints/system_options.py
+++ b/src/sentry/api/endpoints/system_options.py
@@ -44,7 +44,7 @@ class SystemOptionsEndpoint(Endpoint):
     def put(self, request):
         # TODO(dcramer): this should validate options before saving them
         for k, v in request.DATA.iteritems():
-            if v:
+            if v and isinstance(v, basestring):
                 v = v.strip()
             try:
                 if not v:
@@ -59,6 +59,14 @@ class SystemOptionsEndpoint(Endpoint):
                         'option': k,
                     },
                 }, status=400)
+            except TypeError as e:
+                return Response({
+                    'error': 'invalid_type',
+                    'errorDetail': {
+                        'option': k,
+                        'message': unicode(e),
+                    },
+                }, status=400)
         # TODO(dcramer): this has nothing to do with configuring options and
         # should not be set here
         options.set('sentry:version-configured', sentry.get_version())
diff --git a/src/sentry/static/sentry/app/views/installWizard.jsx b/src/sentry/static/sentry/app/views/installWizard.jsx
index ebc1f1776e..5bb81c2251 100644
--- a/src/sentry/static/sentry/app/views/installWizard.jsx
+++ b/src/sentry/static/sentry/app/views/installWizard.jsx
@@ -171,6 +171,10 @@ const InstallWizard = React.createClass({
               errorMessage = t('An invalid option (%s) was passed to the server. Please report this issue to the Sentry team.',
                                err.errorDetail.option);
               break;
+            case 'invalid_type':
+              errorMessage = t('An invalid value for (%s) was passed to the server.',
+                               err.errorDetail.option);
+              break;
             default:
               errorMessage = t('An unknown error occurred. Please take a look at the service logs.');
           }
