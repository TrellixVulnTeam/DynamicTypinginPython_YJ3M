commit 2818e57709045d83385f8345e584a3dfe90d22cf
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Jun 11 17:09:26 2018 -0700

    fix(docs): Various fixes for build

diff --git a/api-docs/generator.py b/api-docs/generator.py
index 4a96075938..7ab746e31d 100644
--- a/api-docs/generator.py
+++ b/api-docs/generator.py
@@ -116,15 +116,15 @@ class SentryBox(object):
         return self
 
     def __exit__(self, exc_type, exc_value, tb):
-        drop_db()
-        if self.redis is not None:
-            report('redis', 'Stopping redis server')
-            self.redis.kill()
-            self.redis.wait()
         if self.sentry is not None:
             report('sentry', 'Shutting down sentry server')
             self.sentry.kill()
             self.sentry.wait()
+        if self.redis is not None:
+            report('redis', 'Stopping redis server')
+            self.redis.kill()
+            self.redis.wait()
+        drop_db()
 
 
 def dump_json(path, data):
diff --git a/src/sentry/api/endpoints/organization_eventid.py b/src/sentry/api/endpoints/organization_eventid.py
index 60cd1bf5d3..5ed30f9103 100644
--- a/src/sentry/api/endpoints/organization_eventid.py
+++ b/src/sentry/api/endpoints/organization_eventid.py
@@ -14,7 +14,7 @@ from sentry.utils.apidocs import scenario, attach_scenarios
 
 @scenario('ResolveEventId')
 def resolve_event_id_scenario(runner):
-    event = Event.objects.filter(project=runner.default_project).first()
+    event = Event.objects.filter(project_id=runner.default_project.id).first()
     runner.request(
         method='GET',
         path='/organizations/%s/eventids/%s/' % (runner.org.slug, event.event_id, )
