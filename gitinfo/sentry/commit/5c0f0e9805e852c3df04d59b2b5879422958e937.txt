commit 5c0f0e9805e852c3df04d59b2b5879422958e937
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Fri Oct 11 11:59:13 2019 -0700

    test(js): Fix console.errors from `<NarrowLayout>` (#15058)
    
    jsdom does not like tests trying to redirect. Change to use `window.location.assign` so we can mock them in tests

diff --git a/src/sentry/static/sentry/app/components/narrowLayout.tsx b/src/sentry/static/sentry/app/components/narrowLayout.tsx
index c11c4072a0..16fee73aa1 100644
--- a/src/sentry/static/sentry/app/components/narrowLayout.tsx
+++ b/src/sentry/static/sentry/app/components/narrowLayout.tsx
@@ -29,7 +29,7 @@ class NarrowLayout extends React.Component<Props> {
   private api = new Client();
 
   handleLogout = () => {
-    logout(this.api).then(() => (window.location.pathname = '/auth/login'));
+    logout(this.api).then(() => window.location.assign('/auth/login'));
   };
 
   render() {
diff --git a/tests/js/spec/components/narrowLayout.spec.jsx b/tests/js/spec/components/narrowLayout.spec.jsx
index 3def7c17c6..33d165ca04 100644
--- a/tests/js/spec/components/narrowLayout.spec.jsx
+++ b/tests/js/spec/components/narrowLayout.spec.jsx
@@ -4,14 +4,23 @@ import {mount} from 'enzyme';
 import NarrowLayout from 'app/components/narrowLayout';
 
 describe('NarrowLayout', function() {
+  beforeAll(function() {
+    jest.spyOn(window.location, 'assign').mockImplementation(() => {});
+  });
+  afterAll(function() {
+    window.location.assign.mockRestore();
+  });
+
   it('renders without logout', function() {
     const wrapper = mount(<NarrowLayout />);
     expect(wrapper.find('a.logout')).toHaveLength(0);
   });
+
   it('renders with logout', function() {
     const wrapper = mount(<NarrowLayout showLogout />);
     expect(wrapper.find('a.logout')).toHaveLength(1);
   });
+
   it('can logout', function() {
     const mock = MockApiClient.addMockResponse({
       url: '/auth/',
