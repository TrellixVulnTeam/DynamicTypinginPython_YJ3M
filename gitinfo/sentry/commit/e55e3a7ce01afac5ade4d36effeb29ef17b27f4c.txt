commit e55e3a7ce01afac5ade4d36effeb29ef17b27f4c
Author: David Cramer <dcramer@David-Cramers-MacBook.local>
Date:   Tue Nov 10 10:06:39 2009 -0600

    fix for defaults

diff --git a/djangodblog/manager.py b/djangodblog/manager.py
index 5e2f81734c..3f23ea2307 100644
--- a/djangodblog/manager.py
+++ b/djangodblog/manager.py
@@ -127,8 +127,8 @@ class DBLogManager(models.Manager):
         try:
             instance = Error.objects.create(**defaults)
             batch, created = ErrorBatch.objects.get_or_create(
-                class_name = class_name,
-                server_name = server_name,
+                class_name = defaults['class_name'],
+                server_name = defaults['server_name'],
                 checksum = checksum,
                 defaults = defaults
             )
@@ -164,8 +164,8 @@ class DBLogManager(models.Manager):
         try:
             instance = Error.objects.create(**defaults)
             batch, created = ErrorBatch.objects.get_or_create(
-                class_name = class_name,
-                server_name = server_name,
+                class_name = defaults['class_name'],
+                server_name = defaults['server_name'],
                 checksum = checksum,
                 defaults = defaults
             )
