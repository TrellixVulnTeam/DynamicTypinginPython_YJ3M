commit f6da635ca6019be78dc9665a791be5dbeb7ead40
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Sep 1 12:18:07 2010 -0700

    Support font-size reduction when the error counting increases in number of digits

diff --git a/sentry/media/styles/global.css b/sentry/media/styles/global.css
index a3c8d376cd..d76dae9090 100644
--- a/sentry/media/styles/global.css
+++ b/sentry/media/styles/global.css
@@ -199,11 +199,13 @@ dl.flat dd {
 }
 /* messages generic */
 .count { background: #000; -moz-border-radius: 4px; -webkit-border-radius: 4px; border-radius: 4px; padding: 0 5px; margin-right: 3px; line-height: 19px; color: #fff; display: inline-block; }
+.count-digits-4 { font-size: 0.8em; }
+.count-digits-5 { font-size: 0.7em; }
 
 /* message list */
 .messages { list-style: none; margin-left: 0; }
 .messages .count {
-	width: 25px; text-align: center;
+	width: 28px; text-align: center;
 	-webkit-border-radius: 6px;
 	-moz-border-radius: 6px;
 	border-radius: 6px;
diff --git a/sentry/templates/sentry/partial/_group.html b/sentry/templates/sentry/partial/_group.html
index fa02ef79e7..2028b58e26 100644
--- a/sentry/templates/sentry/partial/_group.html
+++ b/sentry/templates/sentry/partial/_group.html
@@ -1,5 +1,7 @@
+{% load sentry_helpers %}
+
 <li class="{% cycle 'row1' 'row2' %} level-{{ group.level }}{% if priority %} priority-{{ priority }}{% endif %}" id="group_{{ group.pk }}" data-sentry-count="{{ group.times_seen }}">
-	<span class="count">{{ group.times_seen }}</span>
+	<span class="count count-digits-{{ group.times_seen|num_digits }}">{{ group.times_seen }}</span>
 	<h3><a href="{% url sentry-group group.pk %}">{% if group.view %}{{ group.view }}{% else %}{{ group.message }}{% endif %}</a></h3>
 	<span class="last_seen">{{ group.last_seen|timesince }} ago</span>
 	<p class="message"><span class="tag tag-level">{{ group.get_level_display }}</span> {{ group.error }}</p>
diff --git a/sentry/templatetags/sentry_helpers.py b/sentry/templatetags/sentry_helpers.py
index 0a1b3a5c2b..68ed4cc931 100644
--- a/sentry/templatetags/sentry_helpers.py
+++ b/sentry/templatetags/sentry_helpers.py
@@ -23,4 +23,8 @@ def with_priority(result_list, key='score'):
             else:
                 priority = 'verylow'
             yield result, priority
-with_priority = register.filter(with_priority)
\ No newline at end of file
+with_priority = register.filter(with_priority)
+
+def num_digits(value):
+    return len(str(value))
+num_digits = register.filter(num_digits)
\ No newline at end of file
