commit 8f106ac90a429173fa5f688f512524d24a99a48f
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Tue Nov 27 10:32:59 2018 -0800

    feat(settings): Expose disable issue owners to members (#10776)

diff --git a/src/sentry/static/sentry/app/views/settings/project/projectOwnership/index.jsx b/src/sentry/static/sentry/app/views/settings/project/projectOwnership/index.jsx
index 832102f82f..fd6b6b9d4e 100644
--- a/src/sentry/static/sentry/app/views/settings/project/projectOwnership/index.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/projectOwnership/index.jsx
@@ -36,6 +36,8 @@ class ProjectOwnership extends AsyncView {
     let {project, organization} = this.props;
     let {ownership} = this.state;
 
+    const disabled = !organization.access.includes('project:write');
+
     return (
       <div>
         <SettingsPageHeader title={t('Issue Owners')} />
@@ -77,7 +79,11 @@ class ProjectOwnership extends AsyncView {
                 url:http://example.com/settings/* #product
               </CodeBlock>
             </Block>
-            <OwnerInput {...this.props} initialText={ownership.raw || ''} />
+            <OwnerInput
+              {...this.props}
+              disabled={disabled}
+              initialText={ownership.raw || ''}
+            />
           </PanelBody>
         </Panel>
 
@@ -100,6 +106,7 @@ class ProjectOwnership extends AsyncView {
                     help: t(
                       'Issue owners will receive notifications for issues they are responsible for.'
                     ),
+                    disabled,
                   },
                 ],
               },
diff --git a/src/sentry/static/sentry/app/views/settings/project/projectOwnership/ownerInput.jsx b/src/sentry/static/sentry/app/views/settings/project/projectOwnership/ownerInput.jsx
index d38b9665d1..5fa49de942 100644
--- a/src/sentry/static/sentry/app/views/settings/project/projectOwnership/ownerInput.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/projectOwnership/ownerInput.jsx
@@ -21,6 +21,7 @@ class OwnerInput extends React.Component {
     initialText: PropTypes.string,
     urls: PropTypes.arrayOf(PropTypes.string),
     paths: PropTypes.arrayOf(PropTypes.string),
+    disabled: PropTypes.bool,
   };
 
   constructor(props) {
@@ -127,7 +128,7 @@ class OwnerInput extends React.Component {
   };
 
   render() {
-    let {project, organization, urls, paths} = this.props;
+    let {project, organization, disabled, urls, paths} = this.props;
     let {text, error, initialText} = this.state;
 
     return (
@@ -138,6 +139,7 @@ class OwnerInput extends React.Component {
           organization={organization}
           project={project}
           onAddRule={this.handleAddRule.bind(this)}
+          disabled={disabled}
         />
         <div
           style={{position: 'relative'}}
@@ -152,6 +154,7 @@ class OwnerInput extends React.Component {
               '#example usage\npath:src/example/pipeline/* person@sentry.io #infra\nurl:http://example.com/settings/* #product'
             }
             onChange={this.handleChange}
+            disabled={disabled}
             value={text}
             spellCheck="false"
             autoComplete="off"
@@ -165,7 +168,7 @@ class OwnerInput extends React.Component {
                 size="small"
                 priority="primary"
                 onClick={this.handleUpdateOwnership}
-                disabled={text === initialText}
+                disabled={disabled || text === initialText}
               >
                 {t('Save Changes')}
               </Button>
diff --git a/src/sentry/static/sentry/app/views/settings/project/projectOwnership/ruleBuilder.jsx b/src/sentry/static/sentry/app/views/settings/project/projectOwnership/ruleBuilder.jsx
index b49690092a..ea0fd67293 100644
--- a/src/sentry/static/sentry/app/views/settings/project/projectOwnership/ruleBuilder.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/projectOwnership/ruleBuilder.jsx
@@ -29,6 +29,7 @@ class RuleBuilder extends React.Component {
     onAddRule: PropTypes.func,
     urls: PropTypes.arrayOf(PropTypes.string),
     paths: PropTypes.arrayOf(PropTypes.string),
+    disabled: PropTypes.bool,
   };
 
   constructor(props) {
@@ -85,7 +86,7 @@ class RuleBuilder extends React.Component {
   };
 
   render() {
-    let {urls, paths, project, organization} = this.props;
+    let {urls, paths, disabled, project, organization} = this.props;
     let {type, text, owners, isValid} = this.state;
 
     return (
@@ -125,11 +126,13 @@ class RuleBuilder extends React.Component {
             options={[{value: 'path', label: t('Path')}, {value: 'url', label: t('URL')}]}
             style={{width: 140}}
             clearable={false}
+            disabled={disabled}
           />
           <BuilderInput
             controlled
             value={text}
             onChange={this.handleChangeValue}
+            disabled={disabled}
             placeholder={
               type === 'path' ? 'src/example/*' : 'https://example.com/settings/*'
             }
@@ -141,6 +144,7 @@ class RuleBuilder extends React.Component {
               project={project}
               value={owners}
               onChange={this.handleChangeOwners}
+              disabled={disabled}
             />
           </Flex>
 
diff --git a/src/sentry/static/sentry/app/views/settings/project/projectOwnership/selectOwners.jsx b/src/sentry/static/sentry/app/views/settings/project/projectOwnership/selectOwners.jsx
index a3eaf36b12..0b202e0dd0 100644
--- a/src/sentry/static/sentry/app/views/settings/project/projectOwnership/selectOwners.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/projectOwnership/selectOwners.jsx
@@ -50,6 +50,7 @@ export default class SelectOwners extends React.Component {
     value: PropTypes.array,
     onChange: PropTypes.func,
     onInputChange: PropTypes.func,
+    disabled: PropTypes.bool,
   };
 
   constructor(...args) {
@@ -309,6 +310,7 @@ export default class SelectOwners extends React.Component {
         defaultOptions
         async
         clearable
+        disabled={this.props.disabled}
         cache={false}
         valueComponent={ValueComponent}
         placeholder={t('Add Owners')}
diff --git a/tests/js/spec/views/__snapshots__/projectOwnership.spec.jsx.snap b/tests/js/spec/views/__snapshots__/projectOwnership.spec.jsx.snap
index ff1acdc6aa..a142135cee 100644
--- a/tests/js/spec/views/__snapshots__/projectOwnership.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/projectOwnership.spec.jsx.snap
@@ -64,6 +64,7 @@ exports[`ProjectTeamsSettings render() renders 1`] = `
           </CodeBlock>
         </Block>
         <OwnerInput
+          disabled={false}
           initialText="url:src @dummy@example.com"
           organization={
             Object {
@@ -165,6 +166,7 @@ exports[`ProjectTeamsSettings render() renders 1`] = `
             Object {
               "fields": Array [
                 Object {
+                  "disabled": false,
                   "help": "Issue owners will receive notifications for issues they are responsible for.",
                   "label": "All users with access to this project are issue owners",
                   "name": "fallthrough",
