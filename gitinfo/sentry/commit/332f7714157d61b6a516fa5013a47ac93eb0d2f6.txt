commit 332f7714157d61b6a516fa5013a47ac93eb0d2f6
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Sep 10 11:37:10 2010 -0700

    Sentry errors will now write to the sentry.errors logger. Fixed defaults for level and message in LoggingSentryClient

diff --git a/sentry/client/base.py b/sentry/client/base.py
index f0617e0288..706b2e0323 100644
--- a/sentry/client/base.py
+++ b/sentry/client/base.py
@@ -19,7 +19,7 @@ from django.views.debug import ExceptionReporter
 from sentry import settings
 from sentry.helpers import construct_checksum, varmap, transform
 
-logger = logging.getLogger('sentry')
+logger = logging.getLogger('sentry.errors')
 
 class SentryClient(object):
     def process(self, **kwargs):
@@ -52,9 +52,11 @@ class SentryClient(object):
             try:
                 response = urllib2.urlopen(req, None, settings.REMOTE_TIMEOUT).read()
             except urllib2.URLError, e:
-                logger.exception('Unable to reach Sentry log server')
+                logger.critical('Unable to reach Sentry log server')
+                logger.log(kwargs.pop('level', None) or logging.ERROR, kwargs.pop('message', None))
             except urllib2.HTTPError, e:
-                logger.exception('Unable to reach Sentry log server', extra={'body': e.read()})
+                logger.critical('Unable to reach Sentry log server', extra={'body': e.read()})
+                logger.log(kwargs.pop('level', None) or logging.ERROR, kwargs.pop('message', None))
         else:
             from sentry.models import GroupedMessage
             
diff --git a/sentry/client/log.py b/sentry/client/log.py
index d551674d8d..db28cee5cb 100644
--- a/sentry/client/log.py
+++ b/sentry/client/log.py
@@ -13,6 +13,6 @@ class LoggingSentryClient(SentryClient):
     
     def send(self, **kwargs):
         exc_info = sys.exc_info()
-        self.logger.log(kwargs.pop('level') or self.default_level,
-                        kwargs.pop('message') or exc_info[0],
+        self.logger.log(kwargs.pop('level', None) or self.default_level,
+                        kwargs.pop('message', None) or exc_info[0],
                         exc_info=exc_info, extra=kwargs)
