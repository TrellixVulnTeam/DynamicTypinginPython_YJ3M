commit b77766bd0f3579429d1bc01a292770df70e5e7a6
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jun 2 16:51:50 2010 -0700

    expand test coverage

diff --git a/djangodblog/tests.py b/djangodblog/tests.py
index 0b3d7822aa..c8121c3018 100644
--- a/djangodblog/tests.py
+++ b/djangodblog/tests.py
@@ -230,7 +230,7 @@ class DBLogTestCase(TestCase):
 
         settings.DBLOG_DATABASE = None
     
-    def testUnicode(self):
+    def testCorrectUnicode(self):
         self.setUpHandler()
         
         cnt = Error.objects.count()
@@ -254,4 +254,30 @@ class DBLogTestCase(TestCase):
             logging.info('test', exc_info=sys.exc_info())
         self.assertEquals(Error.objects.count(), cnt+5)
         
+        self.tearDownHandler()
+
+    def testIncorrectUnicode(self):
+        self.setUpHandler()
+        
+        cnt = Error.objects.count()
+        value = u'רונית מגן'
+
+        error = Error.objects.create_from_text(value)
+        self.assertEquals(Error.objects.count(), cnt+1)
+        self.assertEquals(error.message, value)
+
+        logging.info(value)
+        self.assertEquals(Error.objects.count(), cnt+2)
+
+        x = JSONDictModel.objects.create(data={'value': value})
+        logging.warn(x)
+        self.assertEquals(Error.objects.count(), cnt+3)
+
+        try:
+            raise SyntaxError(value)
+        except Exception, exc:
+            logging.exception(exc)
+            logging.info('test', exc_info=sys.exc_info())
+        self.assertEquals(Error.objects.count(), cnt+5)
+        
         self.tearDownHandler()
\ No newline at end of file
