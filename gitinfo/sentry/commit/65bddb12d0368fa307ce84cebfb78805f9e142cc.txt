commit 65bddb12d0368fa307ce84cebfb78805f9e142cc
Author: Ben Vinegar <ben@benv.ca>
Date:   Mon Sep 26 16:43:46 2016 -0700

    Fix sidebar profile tooltip on Django-powered views

diff --git a/src/sentry/static/sentry/app/components/sidebar/userNav.jsx b/src/sentry/static/sentry/app/components/sidebar/userNav.jsx
index e30ceb2832..4285b1598e 100644
--- a/src/sentry/static/sentry/app/components/sidebar/userNav.jsx
+++ b/src/sentry/static/sentry/app/components/sidebar/userNav.jsx
@@ -6,6 +6,10 @@ import MenuItem from '../menuItem';
 import {t} from '../../locale';
 
 const UserNav = React.createClass({
+  contextTypes: {
+    location: React.PropTypes.object
+  },
+
   shouldComponentUpdate(nextProps, nextState) {
     return false;
   },
@@ -22,6 +26,10 @@ const UserNav = React.createClass({
       <Avatar user={user} className="avatar" />
     );
 
+    // "to" attribute => in-app router
+    // "href" attribute => Django-powered views
+    let to = (url) => this.context.location ? {to: url} : {href: url};
+
     return (
       <DropdownLink
           topLevelClasses={this.props.className}
@@ -29,9 +37,9 @@ const UserNav = React.createClass({
           caret={false}
           >
         <MenuItem href="/account/settings/">{t('Account')}</MenuItem>
-        <MenuItem to="/api/">{t('API')}</MenuItem>
+        <MenuItem {...to('/api/')}>{t('API')}</MenuItem>
         {user.isSuperuser &&
-          <MenuItem to="/manage/">{t('Admin')}</MenuItem>
+          <MenuItem {...to('/manage/')}>{t('Admin')}</MenuItem>
         }
         <MenuItem href="/auth/logout/">{t('Sign out')}</MenuItem>
       </DropdownLink>
