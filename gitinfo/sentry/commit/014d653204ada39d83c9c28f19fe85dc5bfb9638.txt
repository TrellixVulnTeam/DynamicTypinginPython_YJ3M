commit 014d653204ada39d83c9c28f19fe85dc5bfb9638
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Jan 2 11:23:13 2015 -0800

    Add Plugin2.get_tags

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index 8c8e03e71e..826b78aec3 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -293,7 +293,7 @@ class EventManager(object):
             # TODO(dcramer): we should ensure we create Release objects
             tags.append(('sentry:release', release))
 
-        for plugin in plugins.for_project(project):
+        for plugin in plugins.for_project(project, version=None):
             added_tags = safe_execute(plugin.get_tags, event)
             if added_tags:
                 tags.extend(added_tags)
diff --git a/src/sentry/plugins/base/v2.py b/src/sentry/plugins/base/v2.py
index b646e370c4..8a40e51dba 100644
--- a/src/sentry/plugins/base/v2.py
+++ b/src/sentry/plugins/base/v2.py
@@ -265,6 +265,19 @@ class IPlugin2(local):
         """
         return []
 
+    def get_tags(self, event, **kwargs):
+        """
+        Return a list of additional tags to add to this instance.
+
+        A tag is a tuple containing two elements:
+
+            ('tag-key', 'tag-value')
+
+        >>> def get_tags(self, event, **kwargs):
+        >>>     return [('tag-key', 'tag-value')]
+        """
+        return []
+
 
 class Plugin2(IPlugin2):
     """
diff --git a/src/sentry/rules/actions/notify_event_service.py b/src/sentry/rules/actions/notify_event_service.py
index 0b7b236738..5682cdd3e3 100644
--- a/src/sentry/rules/actions/notify_event_service.py
+++ b/src/sentry/rules/actions/notify_event_service.py
@@ -12,7 +12,7 @@ from django import forms
 
 from sentry.plugins import Notification, plugins
 from sentry.rules.actions.base import EventAction
-from sentry.utils import safe_execute
+from sentry.utils.safe import safe_execute
 
 
 class NotifyEventServiceForm(forms.Form):
