commit d7880ffb47680eeb9cecc38bdd890a6f020a29f0
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Thu Jun 9 22:32:12 2016 +0200

    Added test for culprit string

diff --git a/tests/sentry/interfaces/test_stacktrace.py b/tests/sentry/interfaces/test_stacktrace.py
index 115a4ecb71..09cea123e6 100644
--- a/tests/sentry/interfaces/test_stacktrace.py
+++ b/tests/sentry/interfaces/test_stacktrace.py
@@ -330,6 +330,18 @@ class StacktraceTest(TestCase):
         result = interface.get_hash()
         assert result != []
 
+    def test_cocoa_culprit(self):
+        stacktrace = Stacktrace.to_python(dict(frames=[
+            {
+                'filename': 'foo/baz.c',
+                'package': '/foo/bar/baz.dylib',
+                'lineno': 1,
+                'in_app': True,
+                'function': 'fooBar',
+            }
+        ]))
+        assert stacktrace.get_culprit_string(platform='cocoa') == 'fooBar (baz)'
+
     def test_get_hash_does_not_group_different_js_errors(self):
         interface = Stacktrace.to_python({
             'frames': [{
