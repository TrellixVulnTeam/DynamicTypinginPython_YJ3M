commit aca6acc19bb3f58dc70b5f2963ac2d1542e4567a
Author: Matej Minar <matej.minar@sentry.io>
Date:   Wed Feb 26 14:18:56 2020 +0100

    ref(ts): Convert <Resolve> to typescript (#17242)
    
    * ref(ts): Convert <Resolve> to typescript
    
    * extracted types
    
    * fixed english

diff --git a/src/sentry/static/sentry/app/components/actions/resolve.jsx b/src/sentry/static/sentry/app/components/actions/resolve.tsx
similarity index 79%
rename from src/sentry/static/sentry/app/components/actions/resolve.jsx
rename to src/sentry/static/sentry/app/components/actions/resolve.tsx
index eb1e06ad93..748c4926cf 100644
--- a/src/sentry/static/sentry/app/components/actions/resolve.jsx
+++ b/src/sentry/static/sentry/app/components/actions/resolve.tsx
@@ -9,8 +9,37 @@ import ActionLink from 'app/components/actions/actionLink';
 import Tooltip from 'app/components/tooltip';
 import GuideAnchor from 'app/components/assistant/guideAnchor';
 import {formatVersion} from 'app/utils/formatters';
+import {
+  Release,
+  ResolutionStatus,
+  ResolutionStatusDetails,
+  UpdateResolutionStatus,
+} from 'app/types';
 
-export default class ResolveActions extends React.Component {
+const defaultProps = {
+  isResolved: false,
+  isAutoResolved: false,
+  confirmLabel: t('Resolve'),
+};
+
+type Props = {
+  hasRelease: boolean;
+  onUpdate: (data: UpdateResolutionStatus) => void;
+  orgId: string;
+  latestRelease?: Release;
+  projectId?: string;
+  shouldConfirm?: boolean;
+  confirmMessage?: React.ReactNode;
+  disabled?: boolean;
+  disableDropdown?: boolean;
+  projectFetchError?: boolean;
+} & typeof defaultProps;
+
+type State = {
+  modal: boolean;
+};
+
+class ResolveActions extends React.Component<Props, State> {
   static propTypes = {
     hasRelease: PropTypes.bool.isRequired,
     latestRelease: PropTypes.object,
@@ -27,28 +56,22 @@ export default class ResolveActions extends React.Component {
     projectFetchError: PropTypes.bool,
   };
 
-  static defaultProps = {
-    isResolved: false,
-    isAutoResolved: false,
-    confirmLabel: 'Resolve',
-  };
+  static defaultProps = defaultProps;
 
-  constructor(props) {
-    super(props);
-    this.state = {modal: false};
-  }
+  state = {modal: false};
 
-  onCustomResolution(statusDetails) {
+  onCustomResolution(statusDetails: ResolutionStatusDetails) {
     this.setState({
       modal: false,
     });
+
     this.props.onUpdate({
-      status: 'resolved',
+      status: ResolutionStatus.RESOLVED,
       statusDetails,
     });
   }
 
-  getButtonClass(otherClasses) {
+  getButtonClass(otherClasses?: string) {
     return classNames('btn btn-default btn-sm', otherClasses);
   }
 
@@ -76,7 +99,7 @@ export default class ResolveActions extends React.Component {
             <a
               data-test-id="button-unresolve"
               className={this.getButtonClass('active')}
-              onClick={() => onUpdate({status: 'unresolved'})}
+              onClick={() => onUpdate({status: ResolutionStatus.UNRESOLVED})}
             >
               <span className="icon-checkmark" />
             </a>
@@ -123,7 +146,9 @@ export default class ResolveActions extends React.Component {
       <div style={{display: 'inline-block'}}>
         <CustomResolutionModal
           show={this.state.modal}
-          onSelected={statusDetails => this.onCustomResolution(statusDetails)}
+          onSelected={(statusDetails: ResolutionStatusDetails) =>
+            this.onCustomResolution(statusDetails)
+          }
           onCanceled={() => this.setState({modal: false})}
           orgId={orgId}
           projectId={projectId}
@@ -133,9 +158,9 @@ export default class ResolveActions extends React.Component {
             <div className="btn-group">
               <ActionLink
                 {...actionLinkProps}
-                title="Resolve"
+                title={t('Resolve')}
                 className={buttonClass}
-                onAction={() => onUpdate({status: 'resolved'})}
+                onAction={() => onUpdate({status: ResolutionStatus.RESOLVED})}
               >
                 <span className="icon-checkmark hidden-xs" style={{marginRight: 5}} />
                 {t('Resolve')}
@@ -154,11 +179,12 @@ export default class ResolveActions extends React.Component {
                   <Tooltip title={actionTitle} containerDisplayMode="block">
                     <ActionLink
                       {...actionLinkProps}
+                      title={t('The next release')}
                       onAction={() => {
                         return (
                           hasRelease &&
                           onUpdate({
-                            status: 'resolved',
+                            status: ResolutionStatus.RESOLVED,
                             statusDetails: {
                               inNextRelease: true,
                             },
@@ -172,11 +198,12 @@ export default class ResolveActions extends React.Component {
                   <Tooltip title={actionTitle} containerDisplayMode="block">
                     <ActionLink
                       {...actionLinkProps}
+                      title={t('The current release')}
                       onAction={() => {
                         return (
                           hasRelease &&
                           onUpdate({
-                            status: 'resolved',
+                            status: ResolutionStatus.RESOLVED,
                             statusDetails: {
                               inRelease: latestRelease ? latestRelease.version : 'latest',
                             },
@@ -195,6 +222,7 @@ export default class ResolveActions extends React.Component {
                   <Tooltip title={actionTitle} containerDisplayMode="block">
                     <ActionLink
                       {...actionLinkProps}
+                      title={t('Another version')}
                       onAction={() => hasRelease && this.setState({modal: true})}
                       shouldConfirm={false}
                     >
@@ -210,3 +238,5 @@ export default class ResolveActions extends React.Component {
     );
   }
 }
+
+export default ResolveActions;
diff --git a/src/sentry/static/sentry/app/types/index.tsx b/src/sentry/static/sentry/app/types/index.tsx
index 90de7def71..fbfc41ee4b 100644
--- a/src/sentry/static/sentry/app/types/index.tsx
+++ b/src/sentry/static/sentry/app/types/index.tsx
@@ -927,3 +927,16 @@ export type Chunks = {
   remark?: string;
   rule_id?: string;
 };
+
+export enum ResolutionStatus {
+  RESOLVED = 'resolved',
+  UNRESOLVED = 'unresolved',
+}
+export type ResolutionStatusDetails = {
+  inRelease?: string;
+  inNextRelease?: boolean;
+};
+export type UpdateResolutionStatus = {
+  status: ResolutionStatus;
+  statusDetails?: ResolutionStatusDetails;
+};
diff --git a/src/sentry/static/sentry/app/utils/formatters.tsx b/src/sentry/static/sentry/app/utils/formatters.tsx
index 7ddd50a873..bfda8fcc72 100644
--- a/src/sentry/static/sentry/app/utils/formatters.tsx
+++ b/src/sentry/static/sentry/app/utils/formatters.tsx
@@ -19,7 +19,7 @@ export function userDisplayName(user: User | CommitAuthor): string {
   return displayName;
 }
 
-export const formatVersion = (rawVersion: string, withPackage: boolean | undefined) => {
+export const formatVersion = (rawVersion: string, withPackage = false) => {
   try {
     const parsedVersion = new Release(rawVersion);
 
diff --git a/tests/js/spec/components/actions/__snapshots__/resolve.spec.jsx.snap b/tests/js/spec/components/actions/__snapshots__/resolve.spec.jsx.snap
index 4953c526c3..b1a3c87b15 100644
--- a/tests/js/spec/components/actions/__snapshots__/resolve.spec.jsx.snap
+++ b/tests/js/spec/components/actions/__snapshots__/resolve.spec.jsx.snap
@@ -273,6 +273,7 @@ exports[`ResolveActions with confirmation step renders 1`] = `
                                     message="Are you sure???"
                                     onAction={[Function]}
                                     shouldConfirm={true}
+                                    title="The next release"
                                   >
                                     <Confirm
                                       cancelText="Cancel"
@@ -284,7 +285,9 @@ exports[`ResolveActions with confirmation step renders 1`] = `
                                       stopPropagation={false}
                                     >
                                       <a
+                                        aria-label="The next release"
                                         onClick={[Function]}
+                                        title="The next release"
                                       >
                                          
                                         The next release
@@ -381,6 +384,7 @@ exports[`ResolveActions with confirmation step renders 1`] = `
                                     message="Are you sure???"
                                     onAction={[Function]}
                                     shouldConfirm={true}
+                                    title="The current release"
                                   >
                                     <Confirm
                                       cancelText="Cancel"
@@ -392,7 +396,9 @@ exports[`ResolveActions with confirmation step renders 1`] = `
                                       stopPropagation={false}
                                     >
                                       <a
+                                        aria-label="The current release"
                                         onClick={[Function]}
+                                        title="The current release"
                                       >
                                          
                                         The current release
@@ -489,16 +495,19 @@ exports[`ResolveActions with confirmation step renders 1`] = `
                                     message="Are you sure???"
                                     onAction={[Function]}
                                     shouldConfirm={false}
+                                    title="Another version"
                                   >
                                     <ActionLinkAnchor
+                                      aria-label="Another version"
                                       className=""
-                                      data-test-id="action-link"
+                                      data-test-id="action-link-another-version"
                                       disabled={false}
                                       onClick={[Function]}
                                     >
                                       <a
+                                        aria-label="Another version"
                                         className=" css-1lugp7w-ActionLinkAnchor ehtyk0g0"
-                                        data-test-id="action-link"
+                                        data-test-id="action-link-another-version"
                                         disabled={false}
                                         onClick={[Function]}
                                       >
@@ -740,16 +749,19 @@ exports[`ResolveActions without confirmation renders 1`] = `
                                     disabled={false}
                                     onAction={[Function]}
                                     shouldConfirm={false}
+                                    title="The next release"
                                   >
                                     <ActionLinkAnchor
+                                      aria-label="The next release"
                                       className=""
-                                      data-test-id="action-link"
+                                      data-test-id="action-link-the-next-release"
                                       disabled={false}
                                       onClick={[Function]}
                                     >
                                       <a
+                                        aria-label="The next release"
                                         className=" css-1lugp7w-ActionLinkAnchor ehtyk0g0"
-                                        data-test-id="action-link"
+                                        data-test-id="action-link-the-next-release"
                                         disabled={false}
                                         onClick={[Function]}
                                       >
@@ -794,16 +806,19 @@ exports[`ResolveActions without confirmation renders 1`] = `
                                     disabled={false}
                                     onAction={[Function]}
                                     shouldConfirm={false}
+                                    title="The current release"
                                   >
                                     <ActionLinkAnchor
+                                      aria-label="The current release"
                                       className=""
-                                      data-test-id="action-link"
+                                      data-test-id="action-link-the-current-release"
                                       disabled={false}
                                       onClick={[Function]}
                                     >
                                       <a
+                                        aria-label="The current release"
                                         className=" css-1lugp7w-ActionLinkAnchor ehtyk0g0"
-                                        data-test-id="action-link"
+                                        data-test-id="action-link-the-current-release"
                                         disabled={false}
                                         onClick={[Function]}
                                       >
@@ -848,16 +863,19 @@ exports[`ResolveActions without confirmation renders 1`] = `
                                     disabled={false}
                                     onAction={[Function]}
                                     shouldConfirm={false}
+                                    title="Another version"
                                   >
                                     <ActionLinkAnchor
+                                      aria-label="Another version"
                                       className=""
-                                      data-test-id="action-link"
+                                      data-test-id="action-link-another-version"
                                       disabled={false}
                                       onClick={[Function]}
                                     >
                                       <a
+                                        aria-label="Another version"
                                         className=" css-1lugp7w-ActionLinkAnchor ehtyk0g0"
-                                        data-test-id="action-link"
+                                        data-test-id="action-link-another-version"
                                         disabled={false}
                                         onClick={[Function]}
                                       >
