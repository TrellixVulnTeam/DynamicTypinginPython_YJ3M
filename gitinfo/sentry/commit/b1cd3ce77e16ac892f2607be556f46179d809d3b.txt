commit b1cd3ce77e16ac892f2607be556f46179d809d3b
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Sep 9 10:12:42 2010 -0700

    Fix test failures for database engine swapping

diff --git a/sentry/tests/tests.py b/sentry/tests/tests.py
index 7cf14779b3..90ce4e2339 100644
--- a/sentry/tests/tests.py
+++ b/sentry/tests/tests.py
@@ -690,7 +690,7 @@ class SentryHelpersTest(TestCase):
     def test_get_db_engine(self):
         from django.conf import settings
         from sentry.helpers import get_db_engine
-        _databases = settings.DATABASES
+        _databases = getattr(settings, 'DATABASES', {}).copy()
         _engine = settings.DATABASE_ENGINE
         
         settings.DATABASE_ENGINE = ''
