commit cf313f4f8c1f35fa6cc9a09f861639ad9476af11
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Feb 14 10:20:37 2015 -0800

    Enforce multiple non-pending owners

diff --git a/src/sentry/api/endpoints/organization_member_details.py b/src/sentry/api/endpoints/organization_member_details.py
index 0650ed4c95..abad30bc98 100644
--- a/src/sentry/api/endpoints/organization_member_details.py
+++ b/src/sentry/api/endpoints/organization_member_details.py
@@ -18,6 +18,7 @@ class OrganizationMemberDetailsEndpoint(OrganizationEndpoint):
         queryset = OrganizationMember.objects.filter(
             organization=member.organization_id,
             type=OrganizationMemberType.OWNER,
+            user__isnull=False,
         ).exclude(id=member.id)
         if queryset.exists():
             return False
@@ -55,6 +56,7 @@ class OrganizationMemberDetailsEndpoint(OrganizationEndpoint):
             organization.owner = OrganizationMember.objects.filter(
                 organization=om.organization,
                 type=OrganizationMemberType.OWNER,
+                user__isnull=False,
             ).exclude(id=om.id)[0].user
             organization.save()
 
diff --git a/src/sentry/web/frontend/organization_members.py b/src/sentry/web/frontend/organization_members.py
index d808cd8940..36f960915d 100644
--- a/src/sentry/web/frontend/organization_members.py
+++ b/src/sentry/web/frontend/organization_members.py
@@ -39,7 +39,9 @@ class OrganizationMembersView(OrganizationView):
         # if the member is not the only owner we allow them to leave the org
         member_can_leave = any(
             1 for om, _ in member_list
-            if om.type == OrganizationMemberType.OWNER and om.user != request.user
+            if (om.type == OrganizationMemberType.OWNER
+                and om.user != request.user
+                and om.user is not None)
         )
 
         context = {
