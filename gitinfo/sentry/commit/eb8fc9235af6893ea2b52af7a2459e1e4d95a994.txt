commit eb8fc9235af6893ea2b52af7a2459e1e4d95a994
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jan 8 18:39:38 2018 -0800

    fix(api): Various fixes for enums

diff --git a/requirements-base.txt b/requirements-base.txt
index 41eee59a79..48e391ad4b 100644
--- a/requirements-base.txt
+++ b/requirements-base.txt
@@ -12,7 +12,7 @@ django-sudo>=2.1.0,<3.0.0
 django-templatetag-sugar>=0.1.0
 djangorestframework>=2.4.8,<2.5.0
 email-reply-parser>=0.2.0,<0.3.0
-enum34>=0.9.18,<1.2.0
+enum34>=1.1.6,<1.2.0
 exam>=0.5.1
 functools32>=3.2.3,<3.3
 # broken on python3
diff --git a/src/sentry/models/organization.py b/src/sentry/models/organization.py
index ed4245ead9..1ace863918 100644
--- a/src/sentry/models/organization.py
+++ b/src/sentry/models/organization.py
@@ -194,7 +194,7 @@ class Organization(Model):
             'id': self.id,
             'slug': self.slug,
             'name': self.name,
-            'status': self.status,
+            'status': int(self.status),
             'flags': self.flags,
             'default_role': self.default_role,
         }
diff --git a/src/sentry/utils/json.py b/src/sentry/utils/json.py
index ab54a3c747..2e1f294a85 100644
--- a/src/sentry/utils/json.py
+++ b/src/sentry/utils/json.py
@@ -9,6 +9,7 @@ sentry.utils.json
 # Avoid shadowing the standard library json module
 from __future__ import absolute_import
 
+from enum import Enum
 from simplejson import JSONEncoder, _default_decoder
 import datetime
 import uuid
@@ -37,6 +38,8 @@ def better_default_encoder(o):
         return list(o)
     elif isinstance(o, decimal.Decimal):
         return six.text_type(o)
+    elif isinstance(o, Enum):
+        return o.value
     elif callable(o):
         return '<function>'
     raise TypeError(repr(o) + ' is not JSON serializable')
diff --git a/tests/sentry/utils/json/tests.py b/tests/sentry/utils/json/tests.py
index df5a0cc738..5d7c177208 100644
--- a/tests/sentry/utils/json/tests.py
+++ b/tests/sentry/utils/json/tests.py
@@ -5,9 +5,10 @@ from __future__ import absolute_import
 import datetime
 import uuid
 
-from sentry.utils import json
+from enum import Enum
 
 from sentry.testutils import TestCase
+from sentry.utils import json
 
 
 class JSONTest(TestCase):
@@ -40,3 +41,8 @@ class JSONTest(TestCase):
     def test_inf(self):
         res = float('inf')
         self.assertEquals(json.dumps(res), 'null')
+
+    def test_enum(self):
+        enum = Enum('foo', 'a b c')
+        res = enum.a
+        self.assertEquals(json.dumps(res), '1')
