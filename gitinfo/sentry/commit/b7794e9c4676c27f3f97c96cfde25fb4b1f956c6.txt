commit b7794e9c4676c27f3f97c96cfde25fb4b1f956c6
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Feb 5 18:23:55 2015 -0800

    Switch team group endpoints to new url structure

diff --git a/src/sentry/api/endpoints/team_groups_new.py b/src/sentry/api/endpoints/team_groups_new.py
index c02147b2a9..30e006ee2a 100644
--- a/src/sentry/api/endpoints/team_groups_new.py
+++ b/src/sentry/api/endpoints/team_groups_new.py
@@ -11,7 +11,7 @@ from sentry.models import Group, GroupStatus, Project, Team
 
 
 class TeamGroupsNewEndpoint(Endpoint):
-    def get(self, request, team_id):
+    def get(self, request, organization_slug, team_slug):
         """
         Return a list of the newest groups for a given team.
 
@@ -19,8 +19,9 @@ class TeamGroupsNewEndpoint(Endpoint):
         cutoff date, and then sort those by score, returning the highest scoring
         groups first.
         """
-        team = Team.objects.get_from_cache(
-            id=team_id,
+        team = Team.objects.get(
+            organization__slug=organization_slug,
+            slug=team_slug,
         )
 
         assert_perm(team, request.user, request.auth)
diff --git a/src/sentry/api/endpoints/team_groups_trending.py b/src/sentry/api/endpoints/team_groups_trending.py
index f778c9943c..2e72f0edae 100644
--- a/src/sentry/api/endpoints/team_groups_trending.py
+++ b/src/sentry/api/endpoints/team_groups_trending.py
@@ -11,7 +11,7 @@ from sentry.models import Group, GroupStatus, Project, Team
 
 
 class TeamGroupsTrendingEndpoint(Endpoint):
-    def get(self, request, team_id):
+    def get(self, request, organization_slug, team_slug):
         """
         Return a list of the trending groups for a given team.
 
@@ -19,8 +19,9 @@ class TeamGroupsTrendingEndpoint(Endpoint):
         cutoff date, and then sort those by score, returning the highest scoring
         groups first.
         """
-        team = Team.objects.get_from_cache(
-            id=team_id,
+        team = Team.objects.get(
+            organization__slug=organization_slug,
+            slug=team_slug,
         )
 
         assert_perm(team, request.user, request.auth)
diff --git a/src/sentry/api/urls.py b/src/sentry/api/urls.py
index e295d4a281..f0d3851796 100644
--- a/src/sentry/api/urls.py
+++ b/src/sentry/api/urls.py
@@ -68,10 +68,10 @@ urlpatterns = patterns(
     url(r'^teams/(?P<team_id>\d+)/$',
         TeamDetailsEndpoint.as_view(),
         name='sentry-api-0-team-details'),
-    url(r'^teams/(?P<team_id>\d+)/groups/new/$',
+    url(r'^teams/(?P<organization_slug>[^\/]+)/(?P<team_slug>[^\/]+)/groups/new/$',
         TeamGroupsNewEndpoint.as_view(),
         name='sentry-api-0-team-groups-new'),
-    url(r'^teams/(?P<team_id>\d+)/groups/trending/$',
+    url(r'^teams/(?P<organization_slug>[^\/]+)/(?P<team_slug>[^\/]+)/groups/trending/$',
         TeamGroupsTrendingEndpoint.as_view(),
         name='sentry-api-0-team-groups-trending'),
     url(r'^teams/(?P<organization_slug>[^\/]+)/(?P<team_slug>[^\/]+)/projects/$',
diff --git a/tests/sentry/api/endpoints/test_team_groups_new.py b/tests/sentry/api/endpoints/test_team_groups_new.py
index fa6f3c6d45..38d14a056a 100644
--- a/tests/sentry/api/endpoints/test_team_groups_new.py
+++ b/tests/sentry/api/endpoints/test_team_groups_new.py
@@ -13,7 +13,8 @@ class TeamGroupsNewTest(APITestCase):
 
         self.login_as(user=self.user)
         url = reverse('sentry-api-0-team-groups-new', kwargs={
-            'team_id': self.team.id
+            'organization_slug': self.team.organization.slug,
+            'team_slug': self.team.slug
         })
         response = self.client.get(url, format='json')
         assert response.status_code == 200
diff --git a/tests/sentry/api/endpoints/test_team_groups_trending.py b/tests/sentry/api/endpoints/test_team_groups_trending.py
index 0f000866d3..3f0533e98e 100644
--- a/tests/sentry/api/endpoints/test_team_groups_trending.py
+++ b/tests/sentry/api/endpoints/test_team_groups_trending.py
@@ -13,7 +13,8 @@ class TeamGroupsTrendingTest(APITestCase):
 
         self.login_as(user=self.user)
         url = reverse('sentry-api-0-team-groups-trending', kwargs={
-            'team_id': self.team.id
+            'organization_slug': self.team.organization.slug,
+            'team_slug': self.team.slug
         })
         response = self.client.get(url, format='json')
         assert response.status_code == 200
