commit 5c5d2c978f68760bb655ca90c9ffd024e16b460c
Author: Lauryn Brown <lauryndbrown@gmail.com>
Date:   Fri Mar 1 12:13:32 2019 -0800

    added transaction atomic. (#12255)

diff --git a/bin/load-mocks b/bin/load-mocks
index 3f1c32eb07..e05d982fa2 100755
--- a/bin/load-mocks
+++ b/bin/load-mocks
@@ -450,15 +450,16 @@ def main(num_events=1, extra_events=False):
             raw_commits = generate_commits(user)
 
             try:
-                repo, _ = Repository.objects.get_or_create(
-                    organization_id=org.id,
-                    provider='integrations:github',
-                    external_id='example/example',
-                    defaults={
-                        'name': 'Example Repo',
-                        'url': 'https://github.com/example/example',
-                    }
-                )
+                with transaction.atomic():
+                    repo, _ = Repository.objects.get_or_create(
+                        organization_id=org.id,
+                        provider='integrations:github',
+                        external_id='example/example',
+                        defaults={
+                            'name': 'Example Repo',
+                            'url': 'https://github.com/example/example',
+                        }
+                    )
             except IntegrityError:
                 # for users with legacy github plugin
                 # upgrade to the new integration
