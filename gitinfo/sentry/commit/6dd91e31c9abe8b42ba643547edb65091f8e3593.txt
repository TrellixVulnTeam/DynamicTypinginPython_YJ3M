commit 6dd91e31c9abe8b42ba643547edb65091f8e3593
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Nov 29 18:00:12 2010 -0800

    Move around version logic to better match 'good practices' and bump to 1.4.0

diff --git a/docs/conf.py b/docs/conf.py
index 3cf6014658..2a1329e765 100644
--- a/docs/conf.py
+++ b/docs/conf.py
@@ -49,7 +49,7 @@ copyright = u'2010, David Cramer'
 #
 # The short X.Y version.
 
-version = '.'.join(map(str, __import__('sentry').__version__))
+version = __import__('sentry').VERSION
 # The full version, including alpha/beta/rc tags.
 release = version
 
diff --git a/sentry/__init__.py b/sentry/__init__.py
index 87fa1e3a3c..f8ea0fd119 100644
--- a/sentry/__init__.py
+++ b/sentry/__init__.py
@@ -3,38 +3,8 @@ Sentry
 ~~~~~~
 """
 
-__all__ = ('__version__', '__build__', '__docformat__', 'get_revision')
-__version__ = (1, 3, 14)
-__docformat__ = 'restructuredtext en'
-
-import os
-
-def _get_git_revision(path):
-    revision_file = os.path.join(path, 'refs', 'heads', 'master')
-    if not os.path.exists(revision_file):
-        return None
-    fh = open(revision_file, 'r')
-    try:
-        return fh.read().strip()
-    finally:
-        fh.close()
-
-def get_revision():
-    """
-    :returns: Revision number of this branch/checkout, if available. None if
-        no revision number can be determined.
-    """
-    package_dir = os.path.dirname(__file__)
-    checkout_dir = os.path.normpath(os.path.join(package_dir, '..'))
-    path = os.path.join(checkout_dir, '.git')
-    if os.path.exists(path):
-        return _get_git_revision(path)
-    return None
-
-__build__ = get_revision()
-
-def get_version():
-    base = '.'.join(map(str, __version__))
-    if __build__:
-        base = '%s (%s)' % (base, __build__)
-    return base
\ No newline at end of file
+try:
+    VERSION = __import__('pkg_resources') \
+        .get_distribution('django-sentry').version
+except Exception, e:
+    VERSION = 'unknown'
\ No newline at end of file
diff --git a/sentry/templatetags/sentry_helpers.py b/sentry/templatetags/sentry_helpers.py
index acdeaa40af..6474e1c18a 100644
--- a/sentry/templatetags/sentry_helpers.py
+++ b/sentry/templatetags/sentry_helpers.py
@@ -85,8 +85,9 @@ def to_json(data):
     return simplejson.dumps(data)
 
 def sentry_version():
-    from sentry import get_version
-    return get_version()
+    import sentry
+    
+    return sentry.VERSION
 register.simple_tag(sentry_version)
 
 @register.filter
diff --git a/setup.py b/setup.py
index 754bb11b9f..ea80b71518 100644
--- a/setup.py
+++ b/setup.py
@@ -4,7 +4,7 @@ from setuptools import setup, find_packages
 
 setup(
     name='django-sentry',
-    version='.'.join(map(str, __import__('sentry').__version__)),
+    version='1.4.0',
     author='David Cramer',
     author_email='dcramer@gmail.com',
     url='http://github.com/dcramer/django-sentry',
