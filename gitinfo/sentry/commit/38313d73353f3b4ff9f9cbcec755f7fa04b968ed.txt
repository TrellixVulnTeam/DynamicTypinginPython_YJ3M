commit 38313d73353f3b4ff9f9cbcec755f7fa04b968ed
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Jul 18 12:39:22 2015 -0700

    Write Release.new_groups

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index 25cc8c4e1c..942b0c6cef 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -336,12 +336,14 @@ class EventManager(object):
         })
 
         if release:
-            group_kwargs['first_release'] = Release.get_or_create(
+            release = Release.get_or_create(
                 project=project,
                 version=release,
                 date_added=date,
             )
 
+            group_kwargs['first_release'] = release
+
             Activity.objects.create(
                 type=Activity.RELEASE,
                 project=project,
@@ -382,6 +384,11 @@ class EventManager(object):
                 self.logger.info('Duplicate Event found for event_id=%s', event_id)
                 return event
 
+        if is_new and release:
+            buffer.incr(Release, {'new_groups': 1}, {
+                'id': release.id,
+            })
+
         safe_execute(Group.objects.add_tags, group, tags,
                      _with_transaction=False)
 
