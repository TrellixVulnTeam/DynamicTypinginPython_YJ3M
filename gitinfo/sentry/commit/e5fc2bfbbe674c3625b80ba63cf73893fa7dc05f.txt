commit e5fc2bfbbe674c3625b80ba63cf73893fa7dc05f
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Feb 4 00:25:04 2012 -0800

    Resolve feed should only resolve items based on current filters (fixes GH-333)

diff --git a/sentry/web/api.py b/sentry/web/api.py
index 45782cb3b0..e05c4442a6 100644
--- a/sentry/web/api.py
+++ b/sentry/web/api.py
@@ -192,9 +192,20 @@ def bookmark(request, project):
 @csrf_exempt
 @has_access
 def clear(request, project):
-    projects = get_project_list(request.user)
+    view_id = request.GET.get('view_id')
+    if view_id:
+        try:
+            view = View.objects.get(pk=view_id)
+        except View.DoesNotExist:
+            return HttpResponseBadRequest()
+    else:
+        view = None
 
-    event_list = Group.objects.filter(Q(project__in=projects.keys()) | Q(project__isnull=True))
+    _, event_list = _get_group_list(
+        request=request,
+        project=project,
+        view=view,
+    )
 
     event_list.update(status=1)
 
