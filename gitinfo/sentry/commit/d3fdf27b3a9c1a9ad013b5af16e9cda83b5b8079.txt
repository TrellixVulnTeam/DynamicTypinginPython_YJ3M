commit d3fdf27b3a9c1a9ad013b5af16e9cda83b5b8079
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Feb 23 16:50:13 2016 -0800

    Add --indent and --exclude options to export

diff --git a/src/sentry/runner/commands/backup.py b/src/sentry/runner/commands/backup.py
index 5628119763..97c972183a 100644
--- a/src/sentry/runner/commands/backup.py
+++ b/src/sentry/runner/commands/backup.py
@@ -104,10 +104,17 @@ def sort_dependencies(app_list):
 @click.command()
 @click.argument('dest', default='-', type=click.File('wb'))
 @click.option('--silent', '-q', default=False, is_flag=True)
+@click.option('--indent', default=2)
+@click.option('--exclude', default=None)
 @configuration
-def export(dest, silent):
+def export(dest, silent, indent, exclude):
     "Exports core metadata for the Sentry installation."
 
+    if exclude is None:
+        exclude = ()
+    else:
+        exclude = exclude.lower().split(',')
+
     from django.db.models import get_apps
     from django.core import serializers
 
@@ -116,21 +123,20 @@ def export(dest, silent):
 
         # Collate the objects to be serialized.
         for model in sort_dependencies(app_list):
-            if not getattr(model, '__core__', True):
+            if (
+                not getattr(model, '__core__', True) or
+                model.__name__.lower() in exclude or
+                model._meta.proxy
+            ):
                 if not silent:
                     click.echo(">> Skipping model <%s>" % (model.__name__,), err=True)
                 continue
 
-            if model._meta.proxy:
-                if not silent:
-                    click.echo(">> Skipping model <%s>\n" % (model.__name__,), err=True)
-                continue
-
             queryset = model._base_manager.order_by(model._meta.pk.name)
             for obj in queryset.iterator():
                 yield obj
 
     if not silent:
         click.echo('>> Beginning export', err=True)
-    serializers.serialize("json", yield_objects(), indent=2, stream=dest,
+    serializers.serialize("json", yield_objects(), indent=indent, stream=dest,
                           use_natural_keys=True)
