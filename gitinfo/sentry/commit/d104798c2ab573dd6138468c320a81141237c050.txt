commit d104798c2ab573dd6138468c320a81141237c050
Author: Billy Vong <billyvg@gmail.com>
Date:   Fri Jul 28 11:17:02 2017 -0700

    Fix feature perms for similarity-view

diff --git a/src/sentry/api/serializers/models/project.py b/src/sentry/api/serializers/models/project.py
index ce4d354716..61de0f2670 100644
--- a/src/sentry/api/serializers/models/project.py
+++ b/src/sentry/api/serializers/models/project.py
@@ -67,7 +67,9 @@ class ProjectSerializer(Serializer):
         from sentry import features
 
         feature_list = []
-        for feature in ('global-events', 'data-forwarding', 'rate-limits', 'custom-filters'):
+        for feature in (
+            'global-events', 'data-forwarding', 'rate-limits', 'custom-filters', 'similarity-view'
+        ):
             if features.has('projects:' + feature, obj, actor=user):
                 feature_list.append(feature)
 
diff --git a/src/sentry/static/sentry/app/views/groupDetails/header.jsx b/src/sentry/static/sentry/app/views/groupDetails/header.jsx
index bf14f78cc4..4f0fa1e942 100644
--- a/src/sentry/static/sentry/app/views/groupDetails/header.jsx
+++ b/src/sentry/static/sentry/app/views/groupDetails/header.jsx
@@ -120,9 +120,7 @@ const GroupHeader = React.createClass({
       orgId = this.getOrganization().slug;
     let message = this.getMessage();
 
-    let hasSimView = ConfigStore.getConfig().features.has(
-      `${orgId}:${projectId}:similarity-view`
-    );
+    let hasSimView = ConfigStore.getConfig().features.has('similarity-view');
 
     let hasGroupingView = hasSimView || orgFeatures.has('group-unmerge');
 
diff --git a/src/sentry/templatetags/sentry_react.py b/src/sentry/templatetags/sentry_react.py
index 6ea64f30c3..c344a5f7dc 100644
--- a/src/sentry/templatetags/sentry_react.py
+++ b/src/sentry/templatetags/sentry_react.py
@@ -11,7 +11,7 @@ from pkg_resources import parse_version
 
 from sentry import features, options
 from sentry.api.serializers.base import serialize
-from sentry.models import ProjectKey, User, Project
+from sentry.models import ProjectKey
 from sentry.utils import auth, json
 from sentry.utils.email import is_smtp_enabled
 from sentry.utils.assets import get_asset_url
@@ -96,10 +96,6 @@ def get_react_config(context):
 
     if user:
         user = extract_lazy_object(user)
-    if not user.is_anonymous():
-        enabled_features = [project.organization.slug + ':' + project.slug + ':similarity-view'
-            for project in Project.objects.filter(organization=User.objects.get(id=user.id).get_orgs()) if
-            features.has('projects:similarity-view', project=project)]
 
     if features.has('organizations:create', actor=user):
         enabled_features.append('organizations:create')
