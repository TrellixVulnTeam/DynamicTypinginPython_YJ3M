commit f28a7f4203e10bd5f08dcb0862d0b89bb8fbed4d
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Thu Apr 26 15:14:47 2018 -0700

    test(js): Always mock recreateRoute (#8210)

diff --git a/src/sentry/static/sentry/app/utils/__mocks__/recreateRoute.jsx b/src/sentry/static/sentry/app/utils/__mocks__/recreateRoute.jsx
index edde9f5672..6ddc55d260 100644
--- a/src/sentry/static/sentry/app/utils/__mocks__/recreateRoute.jsx
+++ b/src/sentry/static/sentry/app/utils/__mocks__/recreateRoute.jsx
@@ -1,3 +1,3 @@
-let mockFn = jest.fn();
+let mockFn = jest.fn(name => name);
 
 export default mockFn;
diff --git a/tests/js/setup.js b/tests/js/setup.js
index b00f09c45e..f7ed7466f2 100644
--- a/tests/js/setup.js
+++ b/tests/js/setup.js
@@ -7,6 +7,7 @@ import SentryTypes from 'app/proptypes';
 import Enzyme from 'enzyme';
 import Adapter from 'enzyme-adapter-react-16';
 
+jest.mock('app/utils/recreateRoute');
 jest.mock('app/translations');
 jest.mock('app/api');
 jest.mock('scroll-to-element', () => {});
diff --git a/tests/js/spec/utils/recreateRoute.spec.jsx b/tests/js/spec/utils/recreateRoute.spec.jsx
index 0c2c140b5a..fc91bfe086 100644
--- a/tests/js/spec/utils/recreateRoute.spec.jsx
+++ b/tests/js/spec/utils/recreateRoute.spec.jsx
@@ -1,5 +1,7 @@
 import recreateRoute from 'app/utils/recreateRoute';
 
+jest.unmock('app/utils/recreateRoute');
+
 const routes = [
   {path: '/', childRoutes: []},
   {newnew: true, path: '/settings/', name: 'Settings'},
diff --git a/tests/js/spec/views/organizationApiKeysList.spec.jsx b/tests/js/spec/views/organizationApiKeysList.spec.jsx
index f13f591e66..6421200d26 100644
--- a/tests/js/spec/views/organizationApiKeysList.spec.jsx
+++ b/tests/js/spec/views/organizationApiKeysList.spec.jsx
@@ -4,6 +4,8 @@ import {mount} from 'enzyme';
 
 import OrganizationApiKeysList from 'app/views/settings/organization/apiKeys/organizationApiKeysList';
 
+jest.unmock('app/utils/recreateRoute');
+
 const childContextTypes = {
   organization: PropTypes.object,
   router: PropTypes.object,
diff --git a/tests/js/spec/views/organizationGeneralSettingsView.spec.jsx b/tests/js/spec/views/organizationGeneralSettingsView.spec.jsx
index e8ad03ded0..d2ae62d8c1 100644
--- a/tests/js/spec/views/organizationGeneralSettingsView.spec.jsx
+++ b/tests/js/spec/views/organizationGeneralSettingsView.spec.jsx
@@ -8,7 +8,6 @@ import recreateRoute from 'app/utils/recreateRoute';
 import {mountWithTheme} from '../../../helpers';
 
 jest.mock('jquery');
-jest.mock('app/utils/recreateRoute');
 
 jest.mock('react-router', () => {
   return {
diff --git a/tests/js/spec/views/organizationTeams.spec.jsx b/tests/js/spec/views/organizationTeams.spec.jsx
index a8aaddb096..e825c59250 100644
--- a/tests/js/spec/views/organizationTeams.spec.jsx
+++ b/tests/js/spec/views/organizationTeams.spec.jsx
@@ -5,6 +5,9 @@ import {Client} from 'app/api';
 import OrganizationTeams from 'app/views/organizationTeams';
 import OrganizationTeamsView from 'app/views/settings/team/organizationTeamsView';
 import {openCreateTeamModal} from 'app/actionCreators/modal';
+import recreateRoute from 'app/utils/recreateRoute';
+
+recreateRoute.mockReturnValue('');
 
 jest.mock('app/actionCreators/modal', () => ({
   openCreateTeamModal: jest.fn(),
diff --git a/tests/js/spec/views/projectAlertRuleDetails.spec.jsx b/tests/js/spec/views/projectAlertRuleDetails.spec.jsx
index a6485e51ab..960eb081fe 100644
--- a/tests/js/spec/views/projectAlertRuleDetails.spec.jsx
+++ b/tests/js/spec/views/projectAlertRuleDetails.spec.jsx
@@ -6,6 +6,7 @@ import ProjectAlertRuleDetails from 'app/views/settings/projectAlerts/projectAle
 import EnvironmentStore from 'app/stores/environmentStore';
 
 jest.mock('jquery');
+jest.unmock('app/utils/recreateRoute');
 
 describe('ProjectAlertRuleDetails', function() {
   let projectAlertRuleDetailsRoutes = [
diff --git a/tests/js/spec/views/projectEnvironments.spec.jsx b/tests/js/spec/views/projectEnvironments.spec.jsx
index 3057c19b56..93f9447a76 100644
--- a/tests/js/spec/views/projectEnvironments.spec.jsx
+++ b/tests/js/spec/views/projectEnvironments.spec.jsx
@@ -9,7 +9,6 @@ import theme from 'app/utils/theme';
 import {ALL_ENVIRONMENTS_KEY} from 'app/constants';
 
 jest.mock('app/utils/recreateRoute');
-
 recreateRoute.mockReturnValue('/org-slug/project-slug/settings/');
 
 function mountComponent(isHidden) {
diff --git a/tests/js/spec/views/projectGeneralSettings.spec.jsx b/tests/js/spec/views/projectGeneralSettings.spec.jsx
index 81216fed0a..89dc0e7994 100644
--- a/tests/js/spec/views/projectGeneralSettings.spec.jsx
+++ b/tests/js/spec/views/projectGeneralSettings.spec.jsx
@@ -6,7 +6,6 @@ import ProjectContext from 'app/views/projects/projectContext';
 import ProjectsStore from 'app/stores/projectsStore';
 import {mountWithTheme} from '../../../helpers';
 
-jest.mock('app/utils/recreateRoute');
 jest.mock('jquery');
 
 describe('projectGeneralSettings', function() {
diff --git a/tests/js/spec/views/projectPlugins/__snapshots__/projectPluginsRow.spec.jsx.snap b/tests/js/spec/views/projectPlugins/__snapshots__/projectPluginsRow.spec.jsx.snap
index 2353932772..7738449643 100644
--- a/tests/js/spec/views/projectPlugins/__snapshots__/projectPluginsRow.spec.jsx.snap
+++ b/tests/js/spec/views/projectPlugins/__snapshots__/projectPluginsRow.spec.jsx.snap
@@ -48,6 +48,7 @@ exports[`ProjectPluginRow renders 1`] = `
             className="css-9nrxy7"
             onlyActiveOnIndex={false}
             style={Object {}}
+            to="amazon-sqs"
           >
             Configure plugin
           </Link>
diff --git a/tests/js/spec/views/projectPlugins/pluginNavigation.integration.spec.jsx b/tests/js/spec/views/projectPlugins/pluginNavigation.integration.spec.jsx
index db4a5a3a74..e6a2eecb81 100644
--- a/tests/js/spec/views/projectPlugins/pluginNavigation.integration.spec.jsx
+++ b/tests/js/spec/views/projectPlugins/pluginNavigation.integration.spec.jsx
@@ -5,7 +5,6 @@ import ProjectPlugins from 'app/views/projectPlugins';
 import PluginNavigation from 'app/views/projectSettings/pluginNavigation';
 
 jest.mock('app/api');
-jest.mock('app/utils/recreateRoute');
 
 describe('PluginNavigation Integration', function() {
   let org, project, plugins, wrapper;
diff --git a/tests/js/spec/views/projectPlugins/projectPluginsRow.spec.jsx b/tests/js/spec/views/projectPlugins/projectPluginsRow.spec.jsx
index af03039e69..29ef7856b7 100644
--- a/tests/js/spec/views/projectPlugins/projectPluginsRow.spec.jsx
+++ b/tests/js/spec/views/projectPlugins/projectPluginsRow.spec.jsx
@@ -2,8 +2,6 @@ import React from 'react';
 import {shallow, mount} from 'enzyme';
 import ProjectPluginRow from 'app/views/projectPlugins/projectPluginRow';
 
-jest.mock('app/utils/recreateRoute');
-
 describe('ProjectPluginRow', function() {
   let wrapper;
   let plugin = TestStubs.Plugin();
diff --git a/tests/js/spec/views/projectSecurityHeaders/__snapshots__/projectSecurityHeaders.spec.jsx.snap b/tests/js/spec/views/projectSecurityHeaders/__snapshots__/projectSecurityHeaders.spec.jsx.snap
index 45833806ba..126d76bacb 100644
--- a/tests/js/spec/views/projectSecurityHeaders/__snapshots__/projectSecurityHeaders.spec.jsx.snap
+++ b/tests/js/spec/views/projectSecurityHeaders/__snapshots__/projectSecurityHeaders.spec.jsx.snap
@@ -117,6 +117,7 @@ exports[`ProjectSecurityHeaders renders 1`] = `
       >
         <PanelItem
           direction="column"
+          key="csp/"
           p={0}
         >
           <Flex
@@ -134,6 +135,7 @@ exports[`ProjectSecurityHeaders renders 1`] = `
             <Button
               disabled={false}
               priority="primary"
+              to="csp/"
             >
               Instructions
             </Button>
@@ -141,6 +143,7 @@ exports[`ProjectSecurityHeaders renders 1`] = `
         </PanelItem>
         <PanelItem
           direction="column"
+          key="expect-ct/"
           p={0}
         >
           <Flex
@@ -158,6 +161,7 @@ exports[`ProjectSecurityHeaders renders 1`] = `
             <Button
               disabled={false}
               priority="primary"
+              to="expect-ct/"
             >
               Instructions
             </Button>
@@ -165,6 +169,7 @@ exports[`ProjectSecurityHeaders renders 1`] = `
         </PanelItem>
         <PanelItem
           direction="column"
+          key="hpkp/"
           p={0}
         >
           <Flex
@@ -182,6 +187,7 @@ exports[`ProjectSecurityHeaders renders 1`] = `
             <Button
               disabled={false}
               priority="primary"
+              to="hpkp/"
             >
               Instructions
             </Button>
diff --git a/tests/js/spec/views/projectSecurityHeaders/projectExpectCtReports.spec.jsx b/tests/js/spec/views/projectSecurityHeaders/projectExpectCtReports.spec.jsx
index 6453fed999..5bcd527c11 100644
--- a/tests/js/spec/views/projectSecurityHeaders/projectExpectCtReports.spec.jsx
+++ b/tests/js/spec/views/projectSecurityHeaders/projectExpectCtReports.spec.jsx
@@ -3,8 +3,6 @@ import React from 'react';
 import {shallow} from 'enzyme';
 import ProjectExpectCtReports from 'app/views/settings/projectSecurityHeaders/expectCt';
 
-jest.mock('app/utils/recreateRoute');
-
 describe('ProjectExpectCtReports', function() {
   let org = TestStubs.Organization();
   let project = TestStubs.Project();
diff --git a/tests/js/spec/views/projectSecurityHeaders/projectHpkpReports.spec.jsx b/tests/js/spec/views/projectSecurityHeaders/projectHpkpReports.spec.jsx
index 22106bb44e..2112beca35 100644
--- a/tests/js/spec/views/projectSecurityHeaders/projectHpkpReports.spec.jsx
+++ b/tests/js/spec/views/projectSecurityHeaders/projectHpkpReports.spec.jsx
@@ -3,8 +3,6 @@ import React from 'react';
 import {shallow} from 'enzyme';
 import ProjectHpkpReports from 'app/views/settings/projectSecurityHeaders/hpkp';
 
-jest.mock('app/utils/recreateRoute');
-
 describe('ProjectHpkpReports', function() {
   let org = TestStubs.Organization();
   let project = TestStubs.Project();
diff --git a/tests/js/spec/views/projectSecurityHeaders/projectSecurityHeaders.spec.jsx b/tests/js/spec/views/projectSecurityHeaders/projectSecurityHeaders.spec.jsx
index 5fcf8a6690..092883853e 100644
--- a/tests/js/spec/views/projectSecurityHeaders/projectSecurityHeaders.spec.jsx
+++ b/tests/js/spec/views/projectSecurityHeaders/projectSecurityHeaders.spec.jsx
@@ -3,8 +3,6 @@ import React from 'react';
 import {shallow} from 'enzyme';
 import ProjectSecurityHeaders from 'app/views/settings/projectSecurityHeaders';
 
-jest.mock('app/utils/recreateRoute');
-
 describe('ProjectSecurityHeaders', function() {
   let org = TestStubs.Organization();
   let project = TestStubs.Project();
diff --git a/tests/js/spec/views/projects/projectContext.spec.jsx b/tests/js/spec/views/projects/projectContext.spec.jsx
index b27a940afe..937c802e0a 100644
--- a/tests/js/spec/views/projects/projectContext.spec.jsx
+++ b/tests/js/spec/views/projects/projectContext.spec.jsx
@@ -5,6 +5,8 @@ import {Client} from 'app/api';
 import {ProjectContext} from 'app/views/projects/projectContext';
 import SentryTypes from 'app/proptypes';
 
+jest.unmock('app/utils/recreateRoute');
+
 describe('projectContext component', function() {
   const routes = [
     {path: '/', childRoutes: []},
