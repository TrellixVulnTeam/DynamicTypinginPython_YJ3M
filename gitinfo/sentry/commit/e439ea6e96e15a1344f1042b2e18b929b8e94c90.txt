commit e439ea6e96e15a1344f1042b2e18b929b8e94c90
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Nov 20 14:31:30 2018 -0800

    feat(discover): Tweak measureText function (#10698)

diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx
index 844e74d53d..35797478ad 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx
@@ -193,8 +193,9 @@ export default class ResultTable extends React.Component {
     context.font = isHeader ? 'bold 14px Rubik' : 'normal 14px Rubik';
 
     // The measureText function sometimes slightly miscalculates text width.
-    // Add 1px to compensate since we want to avoid rows breaking unnecessarily.
-    return Math.ceil(context.measureText(text).width) + 1;
+    // Add 5px to compensate since we want to avoid rows breaking unnecessarily.
+    // (better to over than under estimate)
+    return Math.ceil(context.measureText(text).width) + 5;
   };
 
   getMaxVisibleRows = elementHeight => {
diff --git a/tests/js/spec/views/organizationDiscover/result/table.spec.jsx b/tests/js/spec/views/organizationDiscover/result/table.spec.jsx
index ca041ec0dd..9ec3c99f88 100644
--- a/tests/js/spec/views/organizationDiscover/result/table.spec.jsx
+++ b/tests/js/spec/views/organizationDiscover/result/table.spec.jsx
@@ -30,7 +30,7 @@ describe('ResultTable', function() {
       query: {fields: ['col1'], aggregations: []},
     });
     const widths = wrapper.instance().getColumnWidths(500);
-    expect(widths).toEqual([341, 40, 117]);
+    expect(widths).toEqual([345, 40, 113]);
   });
 
   it('getRowHeight()', function() {
