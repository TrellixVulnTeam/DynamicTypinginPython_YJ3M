commit 013b165af8325fb2e916d2403a0dd2f0ab056f02
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Oct 17 12:26:10 2017 -0700

    fix(events): Dont expose client_ip in JSON

diff --git a/src/sentry/models/event.py b/src/sentry/models/event.py
index 3764f9c7c0..c3bc424f2d 100644
--- a/src/sentry/models/event.py
+++ b/src/sentry/models/event.py
@@ -200,6 +200,8 @@ class Event(Model):
         data['time_spent'] = self.time_spent
         data['tags'] = self.get_tags()
         for k, v in sorted(six.iteritems(self.data)):
+            if k == 'sdk':
+                v = {v_k: v_v for v_k, v_v in six.iteritems(v) if v_k != 'client_ip'}
             data[k] = v
         return data
 
diff --git a/tests/sentry/models/test_event.py b/tests/sentry/models/test_event.py
index 04b4dbcf97..fa64fe7d18 100644
--- a/tests/sentry/models/test_event.py
+++ b/tests/sentry/models/test_event.py
@@ -47,6 +47,20 @@ class EventTest(TestCase):
 
         assert event1.get_email_subject() == 'foo Bar production@0 $ baz ${tag:invalid} $invalid'
 
+    def test_as_dict_hides_client_ip(self):
+        event = self.create_event(
+            data={'sdk': {
+                'name': 'foo',
+                'version': '1.0',
+                'client_ip': '127.0.0.1',
+            }}
+        )
+        result = event.as_dict()
+        assert result['sdk'] == {
+            'name': 'foo',
+            'version': '1.0',
+        }
+
 
 class EventGetLegacyMessageTest(TestCase):
     def test_message(self):
