commit eed0a8ff359027ca981c988babe8b3d269fbed18
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Mar 1 02:44:13 2012 -0800

    Add search to projects page

diff --git a/bootstrap/sentry.less b/bootstrap/sentry.less
index 80027fbc58..847d5f6652 100644
--- a/bootstrap/sentry.less
+++ b/bootstrap/sentry.less
@@ -216,7 +216,7 @@ p {
     .clearfix();
     margin: 0;
     list-style: none;
-    padding: 15px 20px;
+    padding: 15px 0;
   }
   .sidebar {
     position: relative;
diff --git a/sentry/static/styles/global.css b/sentry/static/styles/global.css
index 246d5383ad..ad949ce3c3 100644
--- a/sentry/static/styles/global.css
+++ b/sentry/static/styles/global.css
@@ -2294,7 +2294,7 @@ p {
   *zoom: 1;
   margin: 0;
   list-style: none;
-  padding: 15px 20px;
+  padding: 15px 0;
 }
 #content .btn-toolbar:before, #content .btn-toolbar:after {
   display: table;
diff --git a/sentry/static/styles/global.min.css b/sentry/static/styles/global.min.css
index e8ee9381bb..4c53291486 100644
--- a/sentry/static/styles/global.min.css
+++ b/sentry/static/styles/global.min.css
@@ -367,7 +367,7 @@ p{font-family:"proxima-nova","helvetica neue",helvetica,sans-serif;font-size:14p
 #content .content:after{clear:both;}
 #content .main{width:100%;position:relative;float:left;}
 #content .body{padding:20px;}
-#content .btn-toolbar{line-height:16px;*zoom:1;margin:0;list-style:none;padding:15px 20px;}#content .btn-toolbar:before,#content .btn-toolbar:after{display:table;content:"";}
+#content .btn-toolbar{line-height:16px;*zoom:1;margin:0;list-style:none;padding:15px 0;}#content .btn-toolbar:before,#content .btn-toolbar:after{display:table;content:"";}
 #content .btn-toolbar:after{clear:both;}
 #content .sidebar{position:relative;width:260px;float:left;padding:18px 20px;margin-right:-300px;}#content .sidebar h6{font-size:12px;font-weight:600;line-height:1.2;color:#aaaaaa;text-shadow:0 1px 0 rgba(255, 255, 255, 0.5);margin:0 0 10px;font-family:"proxima nova","proxima-nova","helvetica neue",helvetica,sans-serif;}
 #content .sidebar .nav.nav-tabs.nav-stacked{-webkit-box-shadow:0 2px 0 rgba(255, 255, 255, 0.8);-moz-box-shadow:0 2px 0 rgba(255, 255, 255, 0.8);box-shadow:0 2px 0 rgba(255, 255, 255, 0.8);}#content .sidebar .nav.nav-tabs.nav-stacked a{background-color:#fff;color:#9ba0a3;border-color:#ccc !important;}
diff --git a/sentry/templates/sentry/admin/projects/list.html b/sentry/templates/sentry/admin/projects/list.html
index 43ac578722..d805cbcdad 100644
--- a/sentry/templates/sentry/admin/projects/list.html
+++ b/sentry/templates/sentry/admin/projects/list.html
@@ -18,7 +18,15 @@
 
     <section class="body">
         {% if project_list.objects %}
-            {{ project_list.paging }}
+            <form class="btn-toolbar" method="GET" action="">
+                <input type="text" name="pquery" value="{% if project_query %}{{ project_query }}{% endif %}" placeholder="search by project name">
+                <div class="btn-group pull-right">
+                    <a class="btn prev{% if not project_list.paginator.has_previous %} disabled{% endif %}" href="?{{ project_list.query_string|escape }}&amp;p={{ project_list.paginator.previous_page }}"><span>{% trans "Previous" %}</span></a>
+                    <a class="btn next{% if not project_list.paginator.has_next %} disabled{% endif %}" href="?{{ project_list.query_string|escape }}&amp;p={{ project_list.paginator.next_page }}"><span>{% trans "Next" %}</span></a>
+                </div>
+            </form>
+
+            {% querystring from request without sort as sort_querystring %}
 
             <table class="table table-bordered">
                 <colgroup>
@@ -29,9 +37,9 @@
                 </colgroup>
                 <thead>
                     <tr>
-                        <th><a href="?sort=name">{% trans "Project" %}</a></th>
-                        <th style="text-align:center;"><a href="?sort=events">{% trans "Daily Events" %}</th>
-                        <th style="text-align:center;"><a href="?sort=date">{% trans "Date Added" %}</th>
+                        <th><a href="?{{ sort_querystring }}&amp;sort=name">{% trans "Project" %}</a></th>
+                        <th style="text-align:center;"><a href="?{{ sort_querystring }}&amp;sort=events">{% trans "Daily Events" %}</th>
+                        <th style="text-align:center;"><a href="?{{ sort_querystring }}&amp;sort=date">{% trans "Date Added" %}</th>
                     </tr>
                 </thead>
                 <tbody>
diff --git a/sentry/templates/sentry/admin/users/edit.html b/sentry/templates/sentry/admin/users/edit.html
index f4676a4453..c66c1aef8d 100644
--- a/sentry/templates/sentry/admin/users/edit.html
+++ b/sentry/templates/sentry/admin/users/edit.html
@@ -39,7 +39,7 @@
             </fieldset>
         </form>
         {% if project_list %}
-            <h3>Projects</h3>
+            <h3>{% trans "Projects" %}</h3>
             <br/>
             <table class="table table-bordered">
                 <colgroup>
diff --git a/sentry/templates/sentry/partial/_pager.html b/sentry/templates/sentry/partial/_pager.html
index f81eca171a..f86fc5dc40 100644
--- a/sentry/templates/sentry/partial/_pager.html
+++ b/sentry/templates/sentry/partial/_pager.html
@@ -2,7 +2,7 @@
 
 <div class="btn-toolbar">
     <div class="btn-group pull-right">
-        <a class="btn prev{% if not paginator.has_previous %} disabled{% endif %}" href="?{{ query_string|escape }}&amp;p={{paginator.previous_page }}"><span>{% trans "Previous" %}</span></a>
+        <a class="btn prev{% if not paginator.has_previous %} disabled{% endif %}" href="?{{ query_string|escape }}&amp;p={{ paginator.previous_page }}"><span>{% trans "Previous" %}</span></a>
         <a class="btn next{% if not paginator.has_next %} disabled{% endif %}" href="?{{ query_string|escape }}&amp;p={{ paginator.next_page }}"><span>{% trans "Next" %}</span></a>
     </div>
 </div>
diff --git a/sentry/web/frontend/admin.py b/sentry/web/frontend/admin.py
index 0998bb25ce..d20ff1e2be 100644
--- a/sentry/web/frontend/admin.py
+++ b/sentry/web/frontend/admin.py
@@ -52,6 +52,7 @@ def manage_projects(request):
     sort = request.GET.get('sort')
     if sort not in ('name', 'date', 'events'):
         sort = 'date'
+
     project_list = Project.objects.filter(
         status=0,
     ).exclude(
@@ -61,6 +62,10 @@ def manage_projects(request):
         n_value=Count('projectcountbyminute__times_seen')
     ).select_related('owner')
 
+    project_query = request.GET.get('pquery')
+    if project_query:
+        project_list = project_list.filter(name__iexact=project_query)
+
     if sort == 'date':
         order_by = '-date_added'
     elif sort == 'name':
@@ -72,6 +77,7 @@ def manage_projects(request):
 
     context = {
         'project_list': project_list,
+        'project_query': project_query,
         'sort': sort,
     }
 
