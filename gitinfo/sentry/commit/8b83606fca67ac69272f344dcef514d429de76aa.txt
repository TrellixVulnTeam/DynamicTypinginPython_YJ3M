commit 8b83606fca67ac69272f344dcef514d429de76aa
Author: Lauryn Brown <lauryndbrown@gmail.com>
Date:   Mon Nov 19 11:20:33 2018 -0800

    Added jira server feature handler (#10642)

diff --git a/src/sentry/api/endpoints/organization_config_integrations.py b/src/sentry/api/endpoints/organization_config_integrations.py
index 347495c3b5..ffb78642c1 100644
--- a/src/sentry/api/endpoints/organization_config_integrations.py
+++ b/src/sentry/api/endpoints/organization_config_integrations.py
@@ -15,6 +15,9 @@ class OrganizationConfigIntegrationsEndpoint(OrganizationEndpoint):
         has_gitlab = features.has('organizations:gitlab-integration',
                                   organization,
                                   actor=request.user)
+        has_jira_server = features.has('organizations:jira-server-integration',
+                                       organization,
+                                       actor=request.user)
 
         has_catchall = features.has('organizations:internal-catchall',
                                     organization,
@@ -23,6 +26,8 @@ class OrganizationConfigIntegrationsEndpoint(OrganizationEndpoint):
         for provider in integrations.all():
             if not has_gitlab and provider.key == 'gitlab':
                 continue
+            if not has_jira_server and provider.key == 'jira_server':
+                continue
             if not has_catchall and provider.key in settings.SENTRY_INTERNAL_INTEGRATIONS:
                 continue
 
diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 02a302766c..a618b6eac9 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -798,6 +798,8 @@ SENTRY_FEATURES = {
     'organizations:invite-members': True,
     # Enable gitlab integration currently available to early adopters only.
     'organizations:gitlab-integration': False,
+    # Enable jira server integration currently available to internal users only.
+    'organizations:jira-server-integration': False,
 
     # DEPRECATED: pending removal.
     'organizations:js-loader': False,
@@ -1322,7 +1324,6 @@ SENTRY_DEFAULT_INTEGRATIONS = (
 
 SENTRY_INTERNAL_INTEGRATIONS = (
     'vsts-extension',
-    'jira_server',
 )
 
 
diff --git a/src/sentry/features/__init__.py b/src/sentry/features/__init__.py
index b4274e0cf4..a380f35ba9 100644
--- a/src/sentry/features/__init__.py
+++ b/src/sentry/features/__init__.py
@@ -74,6 +74,7 @@ default_manager.add('organizations:sso-saml2', OrganizationFeature)  # NOQA
 default_manager.add('organizations:suggested-commits', OrganizationFeature)  # NOQA
 default_manager.add('organizations:unreleased-changes', OrganizationFeature)  # NOQA
 default_manager.add('organizations:gitlab-integration', OrganizationFeature)  # NOQA
+default_manager.add('organizations:jira-server-integration', OrganizationFeature)  # NOQA
 
 # Project scoped features
 default_manager.add('projects:similarity-view', ProjectFeature)  # NOQA
