commit a08e629f9f0b3c8dd7fc895e9d51d054a09910f2
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Fri Apr 14 14:30:48 2017 -0700

    Implement hashing for single threads
    
    Fixes #5245

diff --git a/src/sentry/interfaces/threads.py b/src/sentry/interfaces/threads.py
index 1083d1d433..d2717889b2 100644
--- a/src/sentry/interfaces/threads.py
+++ b/src/sentry/interfaces/threads.py
@@ -78,3 +78,18 @@ class Threads(Interface):
 
     def get_path(self):
         return 'threads'
+
+    def get_hash(self):
+        if len(self.values) != 1:
+            return []
+        stacktrace = self.values[0].get('stacktrace')
+        if not stacktrace:
+            return []
+        system_hash = stacktrace.get_hash(system_frames=True)
+        if not system_hash:
+            return []
+        app_hash = stacktrace.get_hash(system_frames=False)
+        if system_hash == app_hash or not app_hash:
+            return [system_hash]
+
+        return [system_hash, app_hash]
