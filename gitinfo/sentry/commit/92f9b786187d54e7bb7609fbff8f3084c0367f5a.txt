commit 92f9b786187d54e7bb7609fbff8f3084c0367f5a
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jun 3 16:17:50 2010 -0700

    Improve admin flow

diff --git a/djangodblog/admin.py b/djangodblog/admin.py
index 3f2f72fb43..edcb7f84e8 100644
--- a/djangodblog/admin.py
+++ b/djangodblog/admin.py
@@ -161,7 +161,7 @@ class ErrorAdmin(EfficientModelAdmin):
     readonly_fields = ('logger', 'server_name', 'class_name', 'level', 'message', 'datetime')
     fieldsets       = (
         (None, {
-            'fields': ('url', 'logger', 'server_name', 'class_name', 'level', 'message', 'datetime', 'traceback')
+            'fields': ('logger', 'class_name', 'message', 'traceback')
         }),
     )
     
@@ -170,8 +170,10 @@ class ErrorAdmin(EfficientModelAdmin):
     
     def change_view(self, request, object_id, extra_context={}):
         obj = self.get_object(request, unquote(object_id))
-        has_traceback = getattr(settings, 'DBLOG_ENHANCED_TRACEBACKS', True) and bool('exc' in obj.data) and 'raw' not in request.GET
-        if has_traceback:
+        has_traceback = getattr(settings, 'DBLOG_ENHANCED_TRACEBACKS', True) \
+                and 'exc' in obj.data and 'META' in obj.data
+        show_traceback = has_traceback and 'raw' not in request.GET
+        if show_traceback:
             try:
                 extra_context.update(self.get_traceback_context(request, obj))
             except Exception:
@@ -180,6 +182,7 @@ class ErrorAdmin(EfficientModelAdmin):
                 has_traceback = False
         extra_context.update({
             'has_traceback': has_traceback,
+            'show_traceback': show_traceback,
             'instance': obj,
         })
         return super(ErrorAdmin, self).change_view(request, object_id, extra_context)
@@ -207,7 +210,7 @@ class ErrorAdmin(EfficientModelAdmin):
                 exc_type = type(obj.class_name, (Exception,), {})
         exc_value = exc_type(obj.message)
         exc_value.args = args
-    
+        
         fake_request = FakeRequest()
         fake_request.META = obj.data['META']
         fake_request.GET = obj.data['GET']
diff --git a/djangodblog/templates/admin/djangodblog/error/change_form.html b/djangodblog/templates/admin/djangodblog/error/change_form.html
index 56d6952272..b0a2e7d488 100644
--- a/djangodblog/templates/admin/djangodblog/error/change_form.html
+++ b/djangodblog/templates/admin/djangodblog/error/change_form.html
@@ -4,19 +4,17 @@
 
 {% block extrahead %}
 	{{ block.super }}
-	{% if has_traceback %}
-		{{ error_headers }}
-		<style type="text/css">
-		#reporter_body { 
-			padding: 8px;
-			background: none repeat scroll 0 0 #FFFFCC
-		}
-		#reporter_body #traceback li { list-style-type: inherit; }
-		#reporter_body #traceback { padding: 8px; margin-top: 10px; }
-		#reporter_body td, #reporter_body th { border-bottom: 0; font:small sans-serif; line-height: auto; }
-		#content { margin: 0; }
-		</style>
-	{% endif %}
+	{{ error_headers }}
+	<style type="text/css">
+	#reporter_body { 
+		padding: 8px;
+		background: none repeat scroll 0 0 #FFFFCC
+	}
+	#reporter_body #traceback li { list-style-type: inherit; }
+	#reporter_body #traceback { padding: 8px; margin-top: 10px; }
+	#reporter_body td, #reporter_body th { border-bottom: 0; font:small sans-serif; line-height: auto; }
+	#content { margin: 0; }
+	</style>
 	<style type="text/css">
 	#meta { border-top: 0; }
 	#meta th, #meta td { border: 0; padding: 8px; }
@@ -27,17 +25,29 @@
 {% block content_title %}{% endblock %}
 
 {% block content %}
-	{% if not has_traceback %}
-		{{ block.super }}
-	{% else %}
-		<table id="meta">
-			<colgroup>
-				<col style="width:15%"/>
-				<col style="width:35%"/>
-				<col style="width:15%"/>
-				<col style="width:35%"/>
-			</colgroup>
-
+	<table id="meta">
+		<colgroup>
+			<col style="width:15%"/>
+			<col style="width:35%"/>
+			<col style="width:15%"/>
+			<col style="width:35%"/>
+		</colgroup>
+		<tfoot>
+			<tr>
+				<td colspan="4">
+					{% if show_traceback %}
+						<a href="?raw">&rsaquo; View plain traceback information</a>
+					{% else %}
+						{% if has_traceback %}
+							<a href="./">&rsaquo; View interactive traceback information</a>
+						{% else %}
+							<em>Interactive traceback is not available for this message</em>
+						{% endif %}
+					{% endif %}
+				</td>
+			</tr>
+		</tfoot>
+		<tbody>
 			<tr>
 				<th>URL:</th>
 				<td><a href="{{ instance.url }}">{{ instance.url }}</a></td>
@@ -50,8 +60,11 @@
 				<th>Date:</th>
 				<td>{{ instance.datetime }}</td>
 			</tr>
-		</table>
-		<p><a href="?raw">View raw (standard) traceback information instead.</a></p>
+		</tbody>
+	</table>
+	{% if not show_traceback %}
+		{{ block.super }}
+	{% else %}
 		<div id="reporter_body">
 			{{ error_body }}
 		</div>
diff --git a/djangodblog/templates/admin/djangodblog/errorbatch/change_list.html b/djangodblog/templates/admin/djangodblog/errorbatch/change_list.html
index 2457bcfca5..cb36edeac9 100644
--- a/djangodblog/templates/admin/djangodblog/errorbatch/change_list.html
+++ b/djangodblog/templates/admin/djangodblog/errorbatch/change_list.html
@@ -26,8 +26,8 @@
 		#changelist .cell-status-1 {
 			background: inherit !important;
 			border-color: inherit !important;
-			color: #666;
-			text-decoration: line-through;;
+			opacity: .5;
+			filter: alpha(opacity=50);
 		}
 		#changelist .cell-status-0,
 		#changelist .cell-level-40,
