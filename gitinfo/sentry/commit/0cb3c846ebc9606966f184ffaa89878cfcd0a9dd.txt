commit 0cb3c846ebc9606966f184ffaa89878cfcd0a9dd
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jul 15 10:34:15 2010 -0700

    Added cleanup_dblog task which wipes out old entries (defaults at 30 days)

diff --git a/djangodblog/__init__.py b/djangodblog/__init__.py
index e0f6bff475..ca267e2385 100644
--- a/djangodblog/__init__.py
+++ b/djangodblog/__init__.py
@@ -1 +1 @@
-__version__ = (2, 0, 0)
\ No newline at end of file
+__version__ = (2, 0, 1)
\ No newline at end of file
diff --git a/djangodblog/management/__init__.py b/djangodblog/management/__init__.py
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/djangodblog/management/commands/__init__.py b/djangodblog/management/commands/__init__.py
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/djangodblog/management/commands/cleanup_dblog.py b/djangodblog/management/commands/cleanup_dblog.py
new file mode 100644
index 0000000000..caf3ab606f
--- /dev/null
+++ b/djangodblog/management/commands/cleanup_dblog.py
@@ -0,0 +1,20 @@
+from django.core.management.base import CommandError, BaseCommand
+
+from djangodblog.models import Error, ErrorBatch
+
+from optparse import make_option
+
+import datetime
+
+class Command(BaseCommand):
+    option_list = BaseCommand.option_list + (
+        make_option('--days', action='store',  dest='cutoff'),
+    )
+    
+    help = 'Cleans up old entries in the log.'
+
+    def handle(self, *args, **options):
+        ts = datetime.datetime.now() - datetime.timedelta(days=options.get('days', 30))
+        
+        ErrorBatch.objects.filter(last_seen__lte=ts).delete()
+        Error.objects.filter(datetime__lte=ts).delete()
\ No newline at end of file
diff --git a/setup.py b/setup.py
index 6dcc55b2ff..69cd45ac53 100644
--- a/setup.py
+++ b/setup.py
@@ -8,9 +8,6 @@ setup(
     author='David Cramer',
     author_email='dcramer@gmail.com',
     url='http://github.com/dcramer/django-db-log',
-    install_requires=[
-        # 'Django>=1.0'
-    ],
     description = 'Exception Logging to a Database in Django',
     packages=find_packages(),
     include_package_data=True,
