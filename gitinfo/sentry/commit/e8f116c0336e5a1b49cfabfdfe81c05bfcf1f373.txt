commit e8f116c0336e5a1b49cfabfdfe81c05bfcf1f373
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Dec 17 14:32:44 2015 -0800

    Correct version tag for release events

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index b994e7834a..fa0b27acc0 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -463,7 +463,7 @@ class EventManager(object):
                 type=Activity.RELEASE,
                 project=project,
                 ident=release,
-                data={'version': release},
+                data={'version': release.version},
                 datetime=date,
             )
 
diff --git a/src/sentry/models/activity.py b/src/sentry/models/activity.py
index d71964edd6..cb85f54a27 100644
--- a/src/sentry/models/activity.py
+++ b/src/sentry/models/activity.py
@@ -73,6 +73,14 @@ class Activity(Model):
     __repr__ = sane_repr('project_id', 'group_id', 'event_id', 'user_id',
                          'type', 'ident')
 
+    def __init__(self, *args, **kwargs):
+        super(Activity, self).__init__(*args, **kwargs)
+        from sentry.models import Release
+
+        # XXX(dcramer): fix for bad data
+        if self.type == self.RELEASE and isinstance(self.data['version'], Release):
+            self.data['version'] = self.data['version'].version
+
     def save(self, *args, **kwargs):
         created = bool(not self.id)
 
