commit ac64249f30ad9d5b7f9db9b30a3a83445afd8ff9
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Oct 20 10:07:01 2014 +0200

    Yell loudly when workers are not configured

diff --git a/src/sentry/utils/runner.py b/src/sentry/utils/runner.py
index 59c33f666e..fbec0fa7bd 100644
--- a/src/sentry/utils/runner.py
+++ b/src/sentry/utils/runner.py
@@ -284,15 +284,24 @@ def initialize_app(config):
     env.data['config'] = config.get('config_path')
     env.data['start_date'] = timezone.now()
 
-    install_plugins(config['settings'])
+    settings = config['settings']
+
+    install_plugins(settings)
 
     skip_migration_if_applied(
-        config['settings'], 'kombu.contrib.django', 'djkombu_queue')
+        settings, 'kombu.contrib.django', 'djkombu_queue')
     skip_migration_if_applied(
-        config['settings'], 'social_auth', 'social_auth_association')
+        settings, 'social_auth', 'social_auth_association')
 
     apply_legacy_settings(config)
 
+    # Commonly setups don't correctly configure themselves for production envs
+    # so lets try to provide a bit more guidance
+    if settings.CELERY_ALWAYS_EAGER and not settings.DEBUG:
+        warnings.warn('Sentry is configured to run asynchronous tasks in-process. '
+                      'This is not recommended within production environments. '
+                      'See http://sentry.readthedocs.org/en/latest/queue/index.html for more information.')
+
     initialize_receivers()
 
 
@@ -302,7 +311,7 @@ def apply_legacy_settings(config):
     # SENTRY_USE_QUEUE used to determine if Celery was eager or not
     if hasattr(settings, 'SENTRY_USE_QUEUE'):
         warnings.warn('SENTRY_USE_QUEUE is deprecated. Please use CELERY_ALWAYS_EAGER instead. '
-                      'See http://sentry.readthedocs.org/en/latest/queue/index.html for more information.')
+                      'See http://sentry.readthedocs.org/en/latest/queue/index.html for more information.', DeprecationWarning)
         settings.CELERY_ALWAYS_EAGER = (not settings.SENTRY_USE_QUEUE)
 
     if settings.SENTRY_URL_PREFIX in ('', 'http://sentry.example.com'):
@@ -325,7 +334,7 @@ def apply_legacy_settings(config):
             settings.ALLOWED_HOSTS = (urlbits.hostname,)
 
     if not settings.SERVER_EMAIL and hasattr(settings, 'SENTRY_SERVER_EMAIL'):
-        warnings.warn('SENTRY_SERVER_EMAIL is deprecated. Please use SERVER_EMAIL instead.')
+        warnings.warn('SENTRY_SERVER_EMAIL is deprecated. Please use SERVER_EMAIL instead.', DeprecationWarning)
         settings.SERVER_EMAIL = settings.SENTRY_SERVER_EMAIL
 
 
