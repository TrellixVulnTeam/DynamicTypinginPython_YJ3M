commit 1f816d5eb93eacc4928f80b2954a3b9204bca56d
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Nov 14 03:22:37 2012 -0800

    Initial semi-correct wall display on backbone

diff --git a/src/sentry/static/sentry/coffee/app.coffee b/src/sentry/static/sentry/coffee/app.coffee
index 0fdb88fcd5..5f1587e77d 100644
--- a/src/sentry/static/sentry/coffee/app.coffee
+++ b/src/sentry/static/sentry/coffee/app.coffee
@@ -139,6 +139,55 @@ jQuery ->
             # TODO:
             Sentry.charts.render('#chart')
 
+    app.WallPage = class WallPage extends BasePage
+
+        initialize: ->
+            BasePage.prototype.initialize.call(@)
+
+            @$sparkline = $('.chart')
+            @$sparkline.height(@$sparkline.parent().height())
+            @$stats = $('#stats')
+
+            @refresh()
+
+        refresh: ->
+            $.ajax
+                url: @$sparkline.attr('data-api-url'),
+                type: 'get'
+                dataType: 'json'
+                data:
+                    days: 1
+                    gid: @$sparkline.attr('data-group') || undefined
+
+                success: (data) =>
+                    $.plot(@$sparkline, [
+                            data: data
+                            color: '#52566c'
+                            shadowSize: 0
+                            lines:
+                                lineWidth: 2
+                                show: true
+                                fill: true
+                                fillColor: '#232428'
+                        ],
+                        yaxis:
+                           min: 0
+                        grid:
+                            show: false
+                        hoverable: false
+                        legend:
+                            noColumns: 5
+                        lines:
+                            show: false
+                    )
+
+            $.ajax
+                url: @$stats.attr('data-uri')
+                dataType: 'json'
+                success: (data) =>
+                    @$stats.find('[data-stat]').each ->
+                        $this = $(this)
+                        $this.find('big').text(data[$this.attr('data-stat')])
 
 # We're not talking to the server
 Backbone.sync = (method, model, success, error) ->
diff --git a/src/sentry/static/sentry/scripts/site.js b/src/sentry/static/sentry/scripts/site.js
index ddf73dd239..5759d35f63 100644
--- a/src/sentry/static/sentry/scripts/site.js
+++ b/src/sentry/static/sentry/scripts/site.js
@@ -9,7 +9,7 @@
   app.config = app.config || {};
 
   jQuery(function() {
-    var BasePage, DashboardPage, StreamPage;
+    var BasePage, DashboardPage, StreamPage, WallPage;
     BasePage = (function(_super) {
 
       __extends(BasePage, _super);
@@ -160,7 +160,7 @@
       return StreamPage;
 
     })(BasePage);
-    return app.DashboardPage = DashboardPage = (function(_super) {
+    app.DashboardPage = DashboardPage = (function(_super) {
 
       __extends(DashboardPage, _super);
 
@@ -176,6 +176,78 @@
       return DashboardPage;
 
     })(BasePage);
+    return app.WallPage = WallPage = (function(_super) {
+
+      __extends(WallPage, _super);
+
+      function WallPage() {
+        return WallPage.__super__.constructor.apply(this, arguments);
+      }
+
+      WallPage.prototype.initialize = function() {
+        BasePage.prototype.initialize.call(this);
+        this.$sparkline = $('.chart');
+        this.$sparkline.height(this.$sparkline.parent().height());
+        this.$stats = $('#stats');
+        return this.refresh();
+      };
+
+      WallPage.prototype.refresh = function() {
+        var _this = this;
+        $.ajax({
+          url: this.$sparkline.attr('data-api-url'),
+          type: 'get',
+          dataType: 'json',
+          data: {
+            days: 1,
+            gid: this.$sparkline.attr('data-group') || void 0
+          },
+          success: function(data) {
+            return $.plot(_this.$sparkline, [
+              {
+                data: data,
+                color: '#52566c',
+                shadowSize: 0,
+                lines: {
+                  lineWidth: 2,
+                  show: true,
+                  fill: true,
+                  fillColor: '#232428'
+                }
+              }
+            ], {
+              yaxis: {
+                min: 0
+              },
+              grid: {
+                show: false
+              },
+              hoverable: false,
+              legend: {
+                noColumns: 5
+              },
+              lines: {
+                show: false
+              }
+            });
+          }
+        });
+        return $.ajax({
+          url: this.$stats.attr('data-uri'),
+          dataType: 'json',
+          success: function(data) {
+            return _this.$stats.find('[data-stat]').each(function() {
+              var $this;
+              $this = $(this);
+              return $this.find('big').text(data[$this.attr('data-stat')]);
+            });
+          }
+        });
+      };
+
+      return WallPage;
+
+    })(BasePage);
   });
 
   Backbone.sync = function(method, model, success, error) {
diff --git a/src/sentry/static/sentry/styles/wall.css b/src/sentry/static/sentry/styles/wall.css
index e63de1b64f..bdf9dcbd13 100644
--- a/src/sentry/static/sentry/styles/wall.css
+++ b/src/sentry/static/sentry/styles/wall.css
@@ -5988,6 +5988,10 @@ footer a:hover {
   padding: 2px 6px;
   color: #aec9d7;
 }
+.group-list > li .tag-project,
+.events > li .tag-project {
+  display: none;
+}
 .group-list > li .sparkline,
 .events > li .sparkline {
   position: absolute;
@@ -6121,6 +6125,10 @@ footer a:hover {
 .events.small > li .meta {
   font-size: 11px;
 }
+.group-list.small > li .tag-project,
+.events.small > li .tag-project {
+  display: inline-block;
+}
 label {
   font-weight: bold;
 }
@@ -6608,6 +6616,7 @@ body {
   border-width: 2px;
   padding-top: 12px;
   padding-bottom: 12px;
+  padding-right: 10px;
 }
 #events .group:hover {
   background: #292b2f;
@@ -6637,6 +6646,9 @@ body {
 #events .group .count {
   margin-top: 1px;
 }
+#events .group .sparkline {
+  display: none;
+}
 #events .group .message {
   color: #a6a8b7;
 }
diff --git a/src/sentry/static/sentry/styles/wall.min.css b/src/sentry/static/sentry/styles/wall.min.css
index 9d8a89bf91..3d7fce9c9e 100644
--- a/src/sentry/static/sentry/styles/wall.min.css
+++ b/src/sentry/static/sentry/styles/wall.min.css
@@ -945,6 +945,7 @@ footer a{color:#f4f4f4;font-weight:bold;}footer a:hover{color:#fff;}
 .group-list>li .count,.events>li .count{color:#fff;position:absolute;left:20px;width:60px;height:60px;background:#cfd3da;-webkit-border-radius:60px;-moz-border-radius:60px;border-radius:60px;line-height:62px;text-align:center;font-size:20px;font-weight:400;letter-spacing:-1px;font-family:"proxima nova","proxima-nova","heletica-neue",sans-serif;}
 .group-list>li .message,.events>li .message{margin-bottom:0;font-size:14px;padding-right:24px;}.group-list>li .message .tag,.events>li .message .tag{float:right;}
 .group-list>li .tag,.events>li .tag{margin-left:5px;font-size:12px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;background:#fff;padding:2px 6px;color:#aec9d7;}
+.group-list>li .tag-project,.events>li .tag-project{display:none;}
 .group-list>li .sparkline,.events>li .sparkline{position:absolute;right:40px;top:25px;display:inline-block;width:100px;height:40px;}
 .group-list>li .meta,.events>li .meta{position:absolute;right:50px;top:20px;}
 .group-list>li .actions,.events>li .actions{position:absolute;right:15px;top:20px;list-style-type:none;margin:0;padding:0;}.group-list>li .actions li,.events>li .actions li{margin-bottom:12px;font-size:14px;line-height:18px;text-align:center;display:block;width:16px;height:18px;}.group-list>li .actions li>a,.events>li .actions li>a{color:#AEC9D7;}.group-list>li .actions li>a:hover,.events>li .actions li>a:hover{text-decoration:none;}
@@ -964,6 +965,7 @@ footer a{color:#f4f4f4;font-weight:bold;}footer a:hover{color:#fff;}
 .group-list.small>li .meta,.events.small>li .meta{right:120px;}
 .group-list.small>li .sparkline,.events.small>li .sparkline{right:10px;height:20px;top:18px;}
 .group-list.small>li .tag,.events.small>li .tag,.group-list.small>li .meta,.events.small>li .meta{font-size:11px;}
+.group-list.small>li .tag-project,.events.small>li .tag-project{display:inline-block;}
 label{font-weight:bold;}
 pre span,code span{display:inline-block;}
 pre{border:0;}
@@ -1048,11 +1050,12 @@ legend{margin-bottom:18px;}
 #events .nav-labels>li{float:left;}#events .nav-labels>li>a{text-transform:uppercase;font-size:15pt;color:#464752;padding-right:12px;padding-left:12px;margin-right:20px;line-height:16pt;letter-spacing:-1px;}
 #events .nav-labels>li>a:hover,#events .nav-labels>li.active a{background:inherit;color:#a6a8b7;}
 #events .group-list{border-top:none;}
-#events .group{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;border-color:#232428;border-width:2px;padding-top:12px;padding-bottom:12px;}#events .group:hover{background:#292b2f;border-color:#44454f;}
+#events .group{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;border-color:#232428;border-width:2px;padding-top:12px;padding-bottom:12px;padding-right:10px;}#events .group:hover{background:#292b2f;border-color:#44454f;}
 #events .group h3{font-size:17pt;margin:0;font-weight:bold;}
 #events .group .meta{position:relative;right:auto;top:auto;color:#464752;}
 #events .group .tag{background:inherit;border:none;color:inherit;}
 #events .group h3,#events .group .meta,#events .group .message{line-height:21px;}
 #events .group .count{margin-top:1px;}
+#events .group .sparkline{display:none;}
 #events .group .message{color:#a6a8b7;}
 #events .group .actions{display:none;}
diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index f955dba8f3..206ff048dc 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -493,7 +493,7 @@ def get_resolved_groups(request, project=None):
         resolved_at__gte=cutoff_dt,
     ).select_related('project').order_by('-score')[:limit]
 
-    data = transform_groups(request, group_list, template='sentry/partial/_group_small.html')
+    data = to_json(group_list, request)
 
     response = HttpResponse(json.dumps(data))
     response['Content-Type'] = 'application/json'
diff --git a/src/wall.less b/src/wall.less
index 3086c9f691..b3d7fb4834 100644
--- a/src/wall.less
+++ b/src/wall.less
@@ -11,116 +11,121 @@
 /* =============================  Global  ============================== */
 
 body {
-    color: @white;
-    background: #232428;
-    font-family: "proxima-nova", "helvetica neue", helvetica, sans-serif;
-    min-width: 768px;
-    zoom: 1.2;
+  color: @white;
+  background: #232428;
+  font-family: "proxima-nova", "helvetica neue", helvetica, sans-serif;
+  min-width: 768px;
+  zoom: 1.2;
 }
 
 #stats {
-    background: #1f2022;
-    padding: 30px 50px 30px;
-    color: @grayDark;
-    font-size: 12pt;
-
-    big {
-        text-shadow: 0px 0px 3px #fff;
-        color: @white;
-        font-size: 50pt;
-        line-height: 56pt;
-        font-weight: 200;
-    }
-    strong {
-        color: @gray;
-        font-weight: normal;
-    }
+  background: #1f2022;
+  padding: 30px 50px 30px;
+  color: @grayDark;
+  font-size: 12pt;
+
+  big {
+    text-shadow: 0px 0px 3px #fff;
+    color: @white;
+    font-size: 50pt;
+    line-height: 56pt;
+    font-weight: 200;
+  }
+  strong {
+    color: @gray;
+    font-weight: normal;
+  }
 }
 
 #chart {
-    .chart {
-        background: #1f2022;
-        margin-left: -20px;
-        margin-right: -20px;
-        height: 50px;
-    }
+  .chart {
+    background: #1f2022;
+    margin-left: -20px;
+    margin-right: -20px;
+    height: 50px;
+  }
 }
 
 #events {
-    padding: 20px 30px;
-
-    .nav-labels {
-        .clearfix();
-        margin-left: 10px;
-        > li {
-            float: left;
-            > a {
-                text-transform: uppercase;
-                font-size: 15pt;
-                color: @grayDark;
-                padding-right: 12px;
-                padding-left: 12px;
-                margin-right: 20px;
-                line-height: 16pt;
-                letter-spacing: -1px;
-            }
-            > a:hover,
-            &.active a {
-                background: inherit;
-                color: @gray;
-            }
-        }
+  padding: 20px 30px;
+
+  .nav-labels {
+    .clearfix();
+    margin-left: 10px;
+    > li {
+      float: left;
+      > a {
+        text-transform: uppercase;
+        font-size: 15pt;
+        color: @grayDark;
+        padding-right: 12px;
+        padding-left: 12px;
+        margin-right: 20px;
+        line-height: 16pt;
+        letter-spacing: -1px;
+      }
+      > a:hover,
+      &.active a {
+        background: inherit;
+        color: @gray;
+      }
+    }
+  }
+
+  .group-list {
+    border-top: none;
+  }
+  .group {
+    .border-radius(4px);
+    .box-shadow(none);
+    border-color: #232428;
+    border-width: 2px;
+    padding-top: 12px;
+    padding-bottom: 12px;
+    padding-right: 10px;
+
+    &:hover {
+      background: #292b2f;
+      border-color: #44454f;
+    }
+
+    h3 {
+      font-size: 17pt;
+      margin: 0;
+      font-weight: bold;
+    }
+
+    .meta {
+      position: relative;
+      right: auto;
+      top: auto;
+      color: @grayDark;
+    }
+
+    .tag {
+      background: inherit;
+      border: none;
+      color: inherit;
+    }
+
+    h3, .meta, .message {
+      line-height: 21px;
+    }
+
+    .count {
+      margin-top: 1px;
     }
 
-    .group-list {
-        border-top: none;
+    .sparkline {
+      display: none;
     }
-    .group {
-        .border-radius(4px);
-        .box-shadow(none);
-        border-color: #232428;
-        border-width: 2px;
-        padding-top: 12px;
-        padding-bottom: 12px;
-
-        &:hover {
-            background: #292b2f;
-            border-color: #44454f;
-        }
-
-        h3 {
-            font-size: 17pt;
-            margin: 0;
-            font-weight: bold;
-        }
-
-        .meta {
-            position: relative;
-            right: auto;
-            top: auto;
-            color: @grayDark;
-        }
-
-        .tag {
-            background: inherit;
-            border: none;
-            color: inherit;
-        }
-
-        h3, .meta, .message {
-            line-height: 21px;
-        }
-
-        .count {
-            margin-top: 1px;
-        }
-
-        .message {
-            color: @gray;
-        }
-
-        .actions {
-            display: none;
-        }
+
+    .message {
+      color: @gray;
+    }
+
+    .actions {
+      display: none;
     }
+  }
 }
\ No newline at end of file
