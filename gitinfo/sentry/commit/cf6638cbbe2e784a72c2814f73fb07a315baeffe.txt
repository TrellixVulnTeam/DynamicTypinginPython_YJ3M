commit cf6638cbbe2e784a72c2814f73fb07a315baeffe
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 24 16:21:31 2012 -0800

    Add tests for Query interface

diff --git a/tests/sentry/interfaces/tests.py b/tests/sentry/interfaces/tests.py
index 4d8b45bd38..e74ccba623 100644
--- a/tests/sentry/interfaces/tests.py
+++ b/tests/sentry/interfaces/tests.py
@@ -4,7 +4,7 @@ from __future__ import absolute_import
 
 import pickle
 
-from sentry.interfaces import Interface, Message, Stacktrace
+from sentry.interfaces import Interface, Message, Query, Stacktrace
 from sentry.models import Event
 from sentry.testutils import TestCase, fixture
 
@@ -70,3 +70,23 @@ class MessageTest(InterfaceBase):
         assert self.interface.get_search_context(self.event) == {
             'text': [interface.message] + interface.params.values()
         }
+
+
+class QueryTest(InterfaceBase):
+    @fixture
+    def interface(self):
+        return Query(query='SELECT 1', engine='psycopg2')
+
+    def test_serialize_behavior(self):
+        assert self.interface.serialize() == {
+            'query': self.interface.query,
+            'engine': self.interface.engine,
+        }
+
+    def test_get_hash_uses_query(self):
+        assert self.interface.get_hash() == [self.interface.query]
+
+    def test_get_search_context(self):
+        assert self.interface.get_search_context(self.event) == {
+            'text': [self.interface.query],
+        }
