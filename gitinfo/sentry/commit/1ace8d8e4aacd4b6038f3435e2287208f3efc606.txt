commit 1ace8d8e4aacd4b6038f3435e2287208f3efc606
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Apr 16 11:46:59 2012 -0700

    Ensure we create project keys for all members on new projects

diff --git a/sentry/models.py b/sentry/models.py
index 46f39acb7f..ec6a96a2d5 100644
--- a/sentry/models.py
+++ b/sentry/models.py
@@ -749,22 +749,26 @@ def create_team_for_project(instance, created, **kwargs):
     if not created:
         return
 
-    if instance.team:
-        return
-
     if not instance.owner:
         return
 
-    update(instance, team=Team.objects.create(
-        owner=instance.owner,
-        name=instance.name,
-        slug=instance.slug,
-    ))
+    if not instance.team:
+        update(instance, team=Team.objects.create(
+            owner=instance.owner,
+            name=instance.name,
+            slug=instance.slug,
+        ))
 
-    ProjectKey.objects.get_or_create(
-        project=instance,
-        user=instance.owner,
-    )
+        ProjectKey.objects.get_or_create(
+            project=instance,
+            user=instance.owner,
+        )
+    else:
+        for member in instance.team.member_set.all():
+            ProjectKey.objects.get_or_create(
+                project=instance,
+                user=member.user,
+            )
 
 
 def create_team_member_for_owner(instance, created, **kwargs):
