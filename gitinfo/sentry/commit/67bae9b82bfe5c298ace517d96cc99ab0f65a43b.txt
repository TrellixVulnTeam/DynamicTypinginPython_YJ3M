commit 67bae9b82bfe5c298ace517d96cc99ab0f65a43b
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Apr 19 19:38:49 2014 -0700

    Correctly handle old-style quotas

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 68b33b0e6f..d6a0dbbe49 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -308,7 +308,11 @@ class StoreView(APIView):
     def process(self, request, project, auth, data, **kwargs):
         event_received.send_robust(ip=request.META['REMOTE_ADDR'], sender=type(self))
 
-        rate_limits = [safe_execute(app.quotas.is_rate_limited, project=project)]
+        rate_limit = safe_execute(app.quotas.is_rate_limited, project=project)
+        if isinstance(rate_limit, bool):
+            rate_limit = RateLimit(is_limited=rate_limit, retry_after=None)
+
+        rate_limits = [rate_limit]
         for plugin in plugins.all():
             rate_limit = safe_execute(plugin.is_rate_limited, project=project)
             # We must handle the case of plugins not returning new RateLimit objects
