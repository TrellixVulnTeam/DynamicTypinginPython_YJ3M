commit 8bd3b01ab9205c82d9ee668da93322746e0ffe93
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Tue May 15 11:14:48 2018 -0700

    fix(ui): Fix `UserBadge` when member.user and user is null (#8447)
    
    * Also wraps `IdBadge` in an error boundary so that views can be mostly
    rendered
    
    Fixes JAVASCRIPT-3V3

diff --git a/src/sentry/static/sentry/app/components/idBadge/index.jsx b/src/sentry/static/sentry/app/components/idBadge/index.jsx
index de7d7e76ef..8b45db95b9 100644
--- a/src/sentry/static/sentry/app/components/idBadge/index.jsx
+++ b/src/sentry/static/sentry/app/components/idBadge/index.jsx
@@ -1,5 +1,7 @@
 import React from 'react';
+import styled from 'react-emotion';
 
+import ErrorBoundary from 'app/components/errorBoundary';
 import BaseBadge from 'app/components/idBadge/baseBadge';
 import UserBadge from 'app/components/idBadge/userBadge';
 import TeamBadge from 'app/components/idBadge/teamBadge';
@@ -7,6 +9,14 @@ import ProjectBadge from 'app/components/idBadge/projectBadge';
 import OrganizationBadge from 'app/components/idBadge/organizationBadge';
 import SentryTypes from 'app/proptypes';
 
+const COMPONENT_MAP = new Map([
+  ['organization', OrganizationBadge],
+  ['project', ProjectBadge],
+  ['member', UserBadge],
+  ['user', UserBadge],
+  ['team', TeamBadge],
+]);
+
 /**
  * Public interface for all "id badges":
  * Organization, project, team, user
@@ -22,20 +32,32 @@ export default class IdBadge extends React.Component {
   };
 
   render() {
-    let {organization, project, team, user, member} = this.props;
-
-    if (organization) {
-      return <OrganizationBadge {...this.props} />;
-    } else if (project) {
-      return <ProjectBadge {...this.props} />;
-    } else if (team) {
-      return <TeamBadge {...this.props} />;
-    } else if (member || user) {
-      return <UserBadge useLink={false} {...this.props} />;
+    // Given the set of sentry types, find the prop name that was passed to this component,
+    // of which we have a mapped component for
+    let propNameWithData = Object.keys(this.props).find(key => COMPONENT_MAP.has(key));
+
+    if (!propNameWithData) {
+      throw new Error(
+        'IdBadge: required property missing (organization, project, team, member, user) or misconfigured'
+      );
     }
 
-    throw new Error(
-      'IdBadge: required property missing (organization, project, team, member, user)'
+    let Component = COMPONENT_MAP.get(propNameWithData);
+
+    return (
+      <InlineErrorBoundary mini>
+        <Component {...this.props} />
+      </InlineErrorBoundary>
     );
   }
 }
+
+const InlineErrorBoundary = styled(ErrorBoundary)`
+  background-color: transparent;
+  border-color: transparent;
+  display: flex;
+  align-items: center;
+  margin-bottom: 0;
+  box-shadow: none;
+  padding: 0; /* Because badges dont have any padding, so this should make the boundary fit well */
+`;
diff --git a/src/sentry/static/sentry/app/components/idBadge/userBadge.jsx b/src/sentry/static/sentry/app/components/idBadge/userBadge.jsx
index 582b338e8d..d3ea179fed 100644
--- a/src/sentry/static/sentry/app/components/idBadge/userBadge.jsx
+++ b/src/sentry/static/sentry/app/components/idBadge/userBadge.jsx
@@ -18,7 +18,7 @@ const UserBadge = ({
   hideEmail,
   ...props
 }) => {
-  let userFromPropsOrMember = user || (member && member.user);
+  let userFromPropsOrMember = user || (member && member.user) || member;
   return (
     <StyledUserBadge {...props}>
       <StyledAvatar user={userFromPropsOrMember} size={avatarSize} />
diff --git a/tests/js/spec/components/idBadge/userBadge.spec.jsx b/tests/js/spec/components/idBadge/userBadge.spec.jsx
index ccbe4d17bc..02744a1bf6 100644
--- a/tests/js/spec/components/idBadge/userBadge.spec.jsx
+++ b/tests/js/spec/components/idBadge/userBadge.spec.jsx
@@ -49,4 +49,10 @@ describe('UserBadge', function() {
 
     expect(wrapper.find('StyledEmail')).toHaveLength(0);
   });
+
+  it('renders when a member without a user to passed to member', function() {
+    let wrapper = mount(<UserBadge member={{...member, user: null}} />);
+
+    expect(wrapper.find('StyledName').prop('children')).toBe('Sentry 1 Name');
+  });
 });
diff --git a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
index ca462f0d8f..43871df99a 100644
--- a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
@@ -590,79 +590,43 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                   }
                 }
               >
-                <UserBadge
-                  avatarSize={32}
-                  className="css-1tz319h-UserBadgeNoOverflow e1fowdfw2"
-                  hideEmail={false}
-                  useLink={false}
-                  user={
-                    Object {
-                      "email": "foo@example.com",
-                      "flags": Object {
-                        "newsletter_consent_prompt": false,
-                      },
-                      "hasPasswordAuth": true,
-                      "id": "1",
-                      "isAuthenticated": true,
-                      "name": "Foo Bar",
-                      "options": Object {
-                        "timezone": "UTC",
-                      },
-                      "permissions": Set {},
-                      "username": "foo@example.com",
-                    }
-                  }
+                <InlineErrorBoundary
+                  mini={true}
                 >
-                  <StyledUserBadge
-                    className="css-1tz319h-UserBadgeNoOverflow e1fowdfw2"
+                  <ErrorBoundary
+                    className="css-otlbo1-InlineErrorBoundary e83vi020"
+                    mini={true}
                   >
-                    <div
-                      className="e1fowdfw2 css-1dpgz1o-StyledUserBadge-UserBadgeNoOverflow ev46mzr0"
-                    >
-                      <StyledAvatar
-                        size={32}
-                        user={
-                          Object {
-                            "email": "foo@example.com",
-                            "flags": Object {
-                              "newsletter_consent_prompt": false,
-                            },
-                            "hasPasswordAuth": true,
-                            "id": "1",
-                            "isAuthenticated": true,
-                            "name": "Foo Bar",
-                            "options": Object {
-                              "timezone": "UTC",
-                            },
-                            "permissions": Set {},
-                            "username": "foo@example.com",
-                          }
+                    <UserBadge
+                      avatarSize={32}
+                      className="css-1tz319h-UserBadgeNoOverflow e1fowdfw2"
+                      hideEmail={false}
+                      useLink={true}
+                      user={
+                        Object {
+                          "email": "foo@example.com",
+                          "flags": Object {
+                            "newsletter_consent_prompt": false,
+                          },
+                          "hasPasswordAuth": true,
+                          "id": "1",
+                          "isAuthenticated": true,
+                          "name": "Foo Bar",
+                          "options": Object {
+                            "timezone": "UTC",
+                          },
+                          "permissions": Set {},
+                          "username": "foo@example.com",
                         }
+                      }
+                    >
+                      <StyledUserBadge
+                        className="css-1tz319h-UserBadgeNoOverflow e1fowdfw2"
                       >
-                        <Component
-                          className="css-1u6j7yz-StyledAvatar ev46mzr4"
-                          size={32}
-                          user={
-                            Object {
-                              "email": "foo@example.com",
-                              "flags": Object {
-                                "newsletter_consent_prompt": false,
-                              },
-                              "hasPasswordAuth": true,
-                              "id": "1",
-                              "isAuthenticated": true,
-                              "name": "Foo Bar",
-                              "options": Object {
-                                "timezone": "UTC",
-                              },
-                              "permissions": Set {},
-                              "username": "foo@example.com",
-                            }
-                          }
+                        <div
+                          className="e1fowdfw2 css-1dpgz1o-StyledUserBadge-UserBadgeNoOverflow ev46mzr0"
                         >
-                          <Avatar
-                            className="css-1u6j7yz-StyledAvatar ev46mzr4"
-                            hasTooltip={false}
+                          <StyledAvatar
                             size={32}
                             user={
                               Object {
@@ -682,10 +646,8 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                               }
                             }
                           >
-                            <UserAvatar
+                            <Component
                               className="css-1u6j7yz-StyledAvatar ev46mzr4"
-                              gravatar={true}
-                              hasTooltip={false}
                               size={32}
                               user={
                                 Object {
@@ -705,84 +667,129 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                                 }
                               }
                             >
-                              <BaseAvatar
+                              <Avatar
                                 className="css-1u6j7yz-StyledAvatar ev46mzr4"
-                                gravatarId="foo@example.com"
                                 hasTooltip={false}
-                                letterId="foo@example.com"
                                 size={32}
-                                style={Object {}}
-                                title="Foo Bar"
-                                tooltip="Foo Bar (foo@example.com)"
-                                type="gravatar"
+                                user={
+                                  Object {
+                                    "email": "foo@example.com",
+                                    "flags": Object {
+                                      "newsletter_consent_prompt": false,
+                                    },
+                                    "hasPasswordAuth": true,
+                                    "id": "1",
+                                    "isAuthenticated": true,
+                                    "name": "Foo Bar",
+                                    "options": Object {
+                                      "timezone": "UTC",
+                                    },
+                                    "permissions": Set {},
+                                    "username": "foo@example.com",
+                                  }
+                                }
                               >
-                                <Tooltip
-                                  disabled={true}
-                                  title="Foo Bar (foo@example.com)"
-                                >
-                                  <StyledBaseAvatar
-                                    className="avatar css-1u6j7yz-StyledAvatar ev46mzr4"
-                                    style={
-                                      Object {
-                                        "height": "32px",
-                                        "width": "32px",
-                                      }
+                                <UserAvatar
+                                  className="css-1u6j7yz-StyledAvatar ev46mzr4"
+                                  gravatar={true}
+                                  hasTooltip={false}
+                                  size={32}
+                                  user={
+                                    Object {
+                                      "email": "foo@example.com",
+                                      "flags": Object {
+                                        "newsletter_consent_prompt": false,
+                                      },
+                                      "hasPasswordAuth": true,
+                                      "id": "1",
+                                      "isAuthenticated": true,
+                                      "name": "Foo Bar",
+                                      "options": Object {
+                                        "timezone": "UTC",
+                                      },
+                                      "permissions": Set {},
+                                      "username": "foo@example.com",
                                     }
+                                  }
+                                >
+                                  <BaseAvatar
+                                    className="css-1u6j7yz-StyledAvatar ev46mzr4"
+                                    gravatarId="foo@example.com"
+                                    hasTooltip={false}
+                                    letterId="foo@example.com"
+                                    size={32}
+                                    style={Object {}}
+                                    title="Foo Bar"
+                                    tooltip="Foo Bar (foo@example.com)"
+                                    type="gravatar"
                                   >
-                                    <span
-                                      className="avatar ev46mzr4 css-1dbvbxh-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
-                                      style={
-                                        Object {
-                                          "height": "32px",
-                                          "width": "32px",
-                                        }
-                                      }
+                                    <Tooltip
+                                      disabled={true}
+                                      title="Foo Bar (foo@example.com)"
                                     >
-                                      <img
-                                        onError={[Function]}
-                                        onLoad={[Function]}
-                                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
-                                      />
-                                    </span>
-                                  </StyledBaseAvatar>
-                                </Tooltip>
-                              </BaseAvatar>
-                            </UserAvatar>
-                          </Avatar>
-                        </Component>
-                      </StyledAvatar>
-                      <StyledNameAndEmail>
-                        <div
-                          className="css-9l6b2w-StyledNameAndEmail ev46mzr1"
-                        >
-                          <StyledName
-                            hideEmail={false}
-                            useLink={false}
-                          >
-                            <Component
-                              className="css-12fcmnb-StyledName ev46mzr3"
-                              hideEmail={false}
-                              useLink={false}
-                            >
-                              <span
-                                className="css-12fcmnb-StyledName ev46mzr3"
-                              >
-                                Foo Bar
-                              </span>
+                                      <StyledBaseAvatar
+                                        className="avatar css-1u6j7yz-StyledAvatar ev46mzr4"
+                                        style={
+                                          Object {
+                                            "height": "32px",
+                                            "width": "32px",
+                                          }
+                                        }
+                                      >
+                                        <span
+                                          className="avatar ev46mzr4 css-1dbvbxh-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
+                                          style={
+                                            Object {
+                                              "height": "32px",
+                                              "width": "32px",
+                                            }
+                                          }
+                                        >
+                                          <img
+                                            onError={[Function]}
+                                            onLoad={[Function]}
+                                            src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                                          />
+                                        </span>
+                                      </StyledBaseAvatar>
+                                    </Tooltip>
+                                  </BaseAvatar>
+                                </UserAvatar>
+                              </Avatar>
                             </Component>
-                          </StyledName>
-                          <StyledEmail>
+                          </StyledAvatar>
+                          <StyledNameAndEmail>
                             <div
-                              className="css-3w2sfq-StyledEmail ev46mzr2"
+                              className="css-9l6b2w-StyledNameAndEmail ev46mzr1"
                             >
-                              foo@example.com
+                              <StyledName
+                                hideEmail={false}
+                              >
+                                <Component
+                                  className="css-12fcmnb-StyledName ev46mzr3"
+                                  hideEmail={false}
+                                >
+                                  <span
+                                    className="css-12fcmnb-StyledName ev46mzr3"
+                                  >
+                                    Foo Bar
+                                  </span>
+                                </Component>
+                              </StyledName>
+                              <StyledEmail>
+                                <div
+                                  className="css-3w2sfq-StyledEmail ev46mzr2"
+                                >
+                                  foo@example.com
+                                </div>
+                              </StyledEmail>
                             </div>
-                          </StyledEmail>
+                          </StyledNameAndEmail>
                         </div>
-                      </StyledNameAndEmail>
-                    </div>
-                  </StyledUserBadge>
-                </UserBadge>
+                      </StyledUserBadge>
+                    </UserBadge>
+                  </ErrorBoundary>
+                </InlineErrorBoundary>
               </IdBadge>
             </UserBadgeNoOverflow>
           </a>
@@ -1600,79 +1607,43 @@ exports[`Sidebar renders without org and router 1`] = `
                   }
                 }
               >
-                <UserBadge
-                  avatarSize={32}
-                  className="css-1tz319h-UserBadgeNoOverflow e1fowdfw2"
-                  hideEmail={false}
-                  useLink={false}
-                  user={
-                    Object {
-                      "email": "foo@example.com",
-                      "flags": Object {
-                        "newsletter_consent_prompt": false,
-                      },
-                      "hasPasswordAuth": true,
-                      "id": "1",
-                      "isAuthenticated": true,
-                      "name": "Foo Bar",
-                      "options": Object {
-                        "timezone": "UTC",
-                      },
-                      "permissions": Set {},
-                      "username": "foo@example.com",
-                    }
-                  }
+                <InlineErrorBoundary
+                  mini={true}
                 >
-                  <StyledUserBadge
-                    className="css-1tz319h-UserBadgeNoOverflow e1fowdfw2"
+                  <ErrorBoundary
+                    className="css-otlbo1-InlineErrorBoundary e83vi020"
+                    mini={true}
                   >
-                    <div
-                      className="e1fowdfw2 css-1dpgz1o-StyledUserBadge-UserBadgeNoOverflow ev46mzr0"
-                    >
-                      <StyledAvatar
-                        size={32}
-                        user={
-                          Object {
-                            "email": "foo@example.com",
-                            "flags": Object {
-                              "newsletter_consent_prompt": false,
-                            },
-                            "hasPasswordAuth": true,
-                            "id": "1",
-                            "isAuthenticated": true,
-                            "name": "Foo Bar",
-                            "options": Object {
-                              "timezone": "UTC",
-                            },
-                            "permissions": Set {},
-                            "username": "foo@example.com",
-                          }
+                    <UserBadge
+                      avatarSize={32}
+                      className="css-1tz319h-UserBadgeNoOverflow e1fowdfw2"
+                      hideEmail={false}
+                      useLink={true}
+                      user={
+                        Object {
+                          "email": "foo@example.com",
+                          "flags": Object {
+                            "newsletter_consent_prompt": false,
+                          },
+                          "hasPasswordAuth": true,
+                          "id": "1",
+                          "isAuthenticated": true,
+                          "name": "Foo Bar",
+                          "options": Object {
+                            "timezone": "UTC",
+                          },
+                          "permissions": Set {},
+                          "username": "foo@example.com",
                         }
+                      }
+                    >
+                      <StyledUserBadge
+                        className="css-1tz319h-UserBadgeNoOverflow e1fowdfw2"
                       >
-                        <Component
-                          className="css-1u6j7yz-StyledAvatar ev46mzr4"
-                          size={32}
-                          user={
-                            Object {
-                              "email": "foo@example.com",
-                              "flags": Object {
-                                "newsletter_consent_prompt": false,
-                              },
-                              "hasPasswordAuth": true,
-                              "id": "1",
-                              "isAuthenticated": true,
-                              "name": "Foo Bar",
-                              "options": Object {
-                                "timezone": "UTC",
-                              },
-                              "permissions": Set {},
-                              "username": "foo@example.com",
-                            }
-                          }
+                        <div
+                          className="e1fowdfw2 css-1dpgz1o-StyledUserBadge-UserBadgeNoOverflow ev46mzr0"
                         >
-                          <Avatar
-                            className="css-1u6j7yz-StyledAvatar ev46mzr4"
-                            hasTooltip={false}
+                          <StyledAvatar
                             size={32}
                             user={
                               Object {
@@ -1692,10 +1663,8 @@ exports[`Sidebar renders without org and router 1`] = `
                               }
                             }
                           >
-                            <UserAvatar
+                            <Component
                               className="css-1u6j7yz-StyledAvatar ev46mzr4"
-                              gravatar={true}
-                              hasTooltip={false}
                               size={32}
                               user={
                                 Object {
@@ -1715,84 +1684,129 @@ exports[`Sidebar renders without org and router 1`] = `
                                 }
                               }
                             >
-                              <BaseAvatar
+                              <Avatar
                                 className="css-1u6j7yz-StyledAvatar ev46mzr4"
-                                gravatarId="foo@example.com"
                                 hasTooltip={false}
-                                letterId="foo@example.com"
                                 size={32}
-                                style={Object {}}
-                                title="Foo Bar"
-                                tooltip="Foo Bar (foo@example.com)"
-                                type="gravatar"
+                                user={
+                                  Object {
+                                    "email": "foo@example.com",
+                                    "flags": Object {
+                                      "newsletter_consent_prompt": false,
+                                    },
+                                    "hasPasswordAuth": true,
+                                    "id": "1",
+                                    "isAuthenticated": true,
+                                    "name": "Foo Bar",
+                                    "options": Object {
+                                      "timezone": "UTC",
+                                    },
+                                    "permissions": Set {},
+                                    "username": "foo@example.com",
+                                  }
+                                }
                               >
-                                <Tooltip
-                                  disabled={true}
-                                  title="Foo Bar (foo@example.com)"
-                                >
-                                  <StyledBaseAvatar
-                                    className="avatar css-1u6j7yz-StyledAvatar ev46mzr4"
-                                    style={
-                                      Object {
-                                        "height": "32px",
-                                        "width": "32px",
-                                      }
+                                <UserAvatar
+                                  className="css-1u6j7yz-StyledAvatar ev46mzr4"
+                                  gravatar={true}
+                                  hasTooltip={false}
+                                  size={32}
+                                  user={
+                                    Object {
+                                      "email": "foo@example.com",
+                                      "flags": Object {
+                                        "newsletter_consent_prompt": false,
+                                      },
+                                      "hasPasswordAuth": true,
+                                      "id": "1",
+                                      "isAuthenticated": true,
+                                      "name": "Foo Bar",
+                                      "options": Object {
+                                        "timezone": "UTC",
+                                      },
+                                      "permissions": Set {},
+                                      "username": "foo@example.com",
                                     }
+                                  }
+                                >
+                                  <BaseAvatar
+                                    className="css-1u6j7yz-StyledAvatar ev46mzr4"
+                                    gravatarId="foo@example.com"
+                                    hasTooltip={false}
+                                    letterId="foo@example.com"
+                                    size={32}
+                                    style={Object {}}
+                                    title="Foo Bar"
+                                    tooltip="Foo Bar (foo@example.com)"
+                                    type="gravatar"
                                   >
-                                    <span
-                                      className="avatar ev46mzr4 css-1dbvbxh-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
-                                      style={
-                                        Object {
-                                          "height": "32px",
-                                          "width": "32px",
-                                        }
-                                      }
+                                    <Tooltip
+                                      disabled={true}
+                                      title="Foo Bar (foo@example.com)"
                                     >
-                                      <img
-                                        onError={[Function]}
-                                        onLoad={[Function]}
-                                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
-                                      />
-                                    </span>
-                                  </StyledBaseAvatar>
-                                </Tooltip>
-                              </BaseAvatar>
-                            </UserAvatar>
-                          </Avatar>
-                        </Component>
-                      </StyledAvatar>
-                      <StyledNameAndEmail>
-                        <div
-                          className="css-9l6b2w-StyledNameAndEmail ev46mzr1"
-                        >
-                          <StyledName
-                            hideEmail={false}
-                            useLink={false}
-                          >
-                            <Component
-                              className="css-12fcmnb-StyledName ev46mzr3"
-                              hideEmail={false}
-                              useLink={false}
-                            >
-                              <span
-                                className="css-12fcmnb-StyledName ev46mzr3"
-                              >
-                                Foo Bar
-                              </span>
+                                      <StyledBaseAvatar
+                                        className="avatar css-1u6j7yz-StyledAvatar ev46mzr4"
+                                        style={
+                                          Object {
+                                            "height": "32px",
+                                            "width": "32px",
+                                          }
+                                        }
+                                      >
+                                        <span
+                                          className="avatar ev46mzr4 css-1dbvbxh-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
+                                          style={
+                                            Object {
+                                              "height": "32px",
+                                              "width": "32px",
+                                            }
+                                          }
+                                        >
+                                          <img
+                                            onError={[Function]}
+                                            onLoad={[Function]}
+                                            src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                                          />
+                                        </span>
+                                      </StyledBaseAvatar>
+                                    </Tooltip>
+                                  </BaseAvatar>
+                                </UserAvatar>
+                              </Avatar>
                             </Component>
-                          </StyledName>
-                          <StyledEmail>
+                          </StyledAvatar>
+                          <StyledNameAndEmail>
                             <div
-                              className="css-3w2sfq-StyledEmail ev46mzr2"
+                              className="css-9l6b2w-StyledNameAndEmail ev46mzr1"
                             >
-                              foo@example.com
+                              <StyledName
+                                hideEmail={false}
+                              >
+                                <Component
+                                  className="css-12fcmnb-StyledName ev46mzr3"
+                                  hideEmail={false}
+                                >
+                                  <span
+                                    className="css-12fcmnb-StyledName ev46mzr3"
+                                  >
+                                    Foo Bar
+                                  </span>
+                                </Component>
+                              </StyledName>
+                              <StyledEmail>
+                                <div
+                                  className="css-3w2sfq-StyledEmail ev46mzr2"
+                                >
+                                  foo@example.com
+                                </div>
+                              </StyledEmail>
                             </div>
-                          </StyledEmail>
+                          </StyledNameAndEmail>
                         </div>
-                      </StyledNameAndEmail>
-                    </div>
-                  </StyledUserBadge>
-                </UserBadge>
+                      </StyledUserBadge>
+                    </UserBadge>
+                  </ErrorBoundary>
+                </InlineErrorBoundary>
               </IdBadge>
             </UserBadgeNoOverflow>
           </a>
diff --git a/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap b/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap
index bcea187bcd..ac79cc9d54 100644
--- a/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap
+++ b/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap
@@ -473,70 +473,79 @@ exports[`CreateProject should render roles when available and allowed, and handl
                                     }
                                   }
                                 >
-                                  <TeamBadge
-                                    avatarSize={24}
-                                    hideAvatar={true}
-                                    hideOverflow={true}
-                                    team={
-                                      Object {
-                                        "hasAccess": true,
-                                        "id": "1",
-                                        "name": "bar",
-                                        "slug": "bar",
-                                      }
-                                    }
+                                  <InlineErrorBoundary
+                                    mini={true}
                                   >
-                                    <BaseBadge
-                                      avatarSize={24}
-                                      displayName={
-                                        <BadgeDisplayName
-                                          hideOverflow={true}
-                                        >
-                                          #
-                                          bar
-                                        </BadgeDisplayName>
-                                      }
-                                      hideAvatar={true}
-                                      team={
-                                        Object {
-                                          "hasAccess": true,
-                                          "id": "1",
-                                          "name": "bar",
-                                          "slug": "bar",
-                                        }
-                                      }
+                                    <ErrorBoundary
+                                      className="css-otlbo1-InlineErrorBoundary e83vi020"
+                                      mini={true}
                                     >
-                                      <Flex
-                                        align="center"
+                                      <TeamBadge
+                                        avatarSize={24}
+                                        hideAvatar={true}
+                                        hideOverflow={true}
+                                        team={
+                                          Object {
+                                            "hasAccess": true,
+                                            "id": "1",
+                                            "name": "bar",
+                                            "slug": "bar",
+                                          }
+                                        }
                                       >
-                                        <Base
-                                          align="center"
-                                          className="css-5ipae5"
-                                        >
-                                          <div
-                                            className="css-5ipae5"
-                                            is={null}
-                                          >
+                                        <BaseBadge
+                                          avatarSize={24}
+                                          displayName={
                                             <BadgeDisplayName
                                               hideOverflow={true}
                                             >
-                                              <Component
-                                                className="css-1boiawc-BadgeDisplayName eeoia0v0"
-                                                hideOverflow={true}
+                                              #
+                                              bar
+                                            </BadgeDisplayName>
+                                          }
+                                          hideAvatar={true}
+                                          team={
+                                            Object {
+                                              "hasAccess": true,
+                                              "id": "1",
+                                              "name": "bar",
+                                              "slug": "bar",
+                                            }
+                                          }
+                                        >
+                                          <Flex
+                                            align="center"
+                                          >
+                                            <Base
+                                              align="center"
+                                              className="css-5ipae5"
+                                            >
+                                              <div
+                                                className="css-5ipae5"
+                                                is={null}
                                               >
-                                                <span
-                                                  className="css-1boiawc-BadgeDisplayName eeoia0v0"
+                                                <BadgeDisplayName
+                                                  hideOverflow={true}
                                                 >
-                                                  #
-                                                  bar
-                                                </span>
-                                              </Component>
-                                            </BadgeDisplayName>
-                                          </div>
-                                        </Base>
-                                      </Flex>
-                                    </BaseBadge>
-                                  </TeamBadge>
+                                                  <Component
+                                                    className="css-1boiawc-BadgeDisplayName eeoia0v0"
+                                                    hideOverflow={true}
+                                                  >
+                                                    <span
+                                                      className="css-1boiawc-BadgeDisplayName eeoia0v0"
+                                                    >
+                                                      #
+                                                      bar
+                                                    </span>
+                                                  </Component>
+                                                </BadgeDisplayName>
+                                              </div>
+                                            </Base>
+                                          </Flex>
+                                        </BaseBadge>
+                                      </TeamBadge>
+                                    </ErrorBoundary>
+                                  </InlineErrorBoundary>
                                 </IdBadge>
                               </label>
                             </div>
@@ -584,70 +593,79 @@ exports[`CreateProject should render roles when available and allowed, and handl
                                     }
                                   }
                                 >
-                                  <TeamBadge
-                                    avatarSize={24}
-                                    hideAvatar={true}
-                                    hideOverflow={true}
-                                    team={
-                                      Object {
-                                        "hasAccess": false,
-                                        "id": "2",
-                                        "name": "foo",
-                                        "slug": "foo",
-                                      }
-                                    }
+                                  <InlineErrorBoundary
+                                    mini={true}
                                   >
-                                    <BaseBadge
-                                      avatarSize={24}
-                                      displayName={
-                                        <BadgeDisplayName
-                                          hideOverflow={true}
-                                        >
-                                          #
-                                          foo
-                                        </BadgeDisplayName>
-                                      }
-                                      hideAvatar={true}
-                                      team={
-                                        Object {
-                                          "hasAccess": false,
-                                          "id": "2",
-                                          "name": "foo",
-                                          "slug": "foo",
-                                        }
-                                      }
+                                    <ErrorBoundary
+                                      className="css-otlbo1-InlineErrorBoundary e83vi020"
+                                      mini={true}
                                     >
-                                      <Flex
-                                        align="center"
+                                      <TeamBadge
+                                        avatarSize={24}
+                                        hideAvatar={true}
+                                        hideOverflow={true}
+                                        team={
+                                          Object {
+                                            "hasAccess": false,
+                                            "id": "2",
+                                            "name": "foo",
+                                            "slug": "foo",
+                                          }
+                                        }
                                       >
-                                        <Base
-                                          align="center"
-                                          className="css-5ipae5"
-                                        >
-                                          <div
-                                            className="css-5ipae5"
-                                            is={null}
-                                          >
+                                        <BaseBadge
+                                          avatarSize={24}
+                                          displayName={
                                             <BadgeDisplayName
                                               hideOverflow={true}
                                             >
-                                              <Component
-                                                className="css-1boiawc-BadgeDisplayName eeoia0v0"
-                                                hideOverflow={true}
+                                              #
+                                              foo
+                                            </BadgeDisplayName>
+                                          }
+                                          hideAvatar={true}
+                                          team={
+                                            Object {
+                                              "hasAccess": false,
+                                              "id": "2",
+                                              "name": "foo",
+                                              "slug": "foo",
+                                            }
+                                          }
+                                        >
+                                          <Flex
+                                            align="center"
+                                          >
+                                            <Base
+                                              align="center"
+                                              className="css-5ipae5"
+                                            >
+                                              <div
+                                                className="css-5ipae5"
+                                                is={null}
                                               >
-                                                <span
-                                                  className="css-1boiawc-BadgeDisplayName eeoia0v0"
+                                                <BadgeDisplayName
+                                                  hideOverflow={true}
                                                 >
-                                                  #
-                                                  foo
-                                                </span>
-                                              </Component>
-                                            </BadgeDisplayName>
-                                          </div>
-                                        </Base>
-                                      </Flex>
-                                    </BaseBadge>
-                                  </TeamBadge>
+                                                  <Component
+                                                    className="css-1boiawc-BadgeDisplayName eeoia0v0"
+                                                    hideOverflow={true}
+                                                  >
+                                                    <span
+                                                      className="css-1boiawc-BadgeDisplayName eeoia0v0"
+                                                    >
+                                                      #
+                                                      foo
+                                                    </span>
+                                                  </Component>
+                                                </BadgeDisplayName>
+                                              </div>
+                                            </Base>
+                                          </Flex>
+                                        </BaseBadge>
+                                      </TeamBadge>
+                                    </ErrorBoundary>
+                                  </InlineErrorBoundary>
                                 </IdBadge>
                               </label>
                             </div>
