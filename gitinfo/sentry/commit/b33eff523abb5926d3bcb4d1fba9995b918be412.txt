commit b33eff523abb5926d3bcb4d1fba9995b918be412
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Feb 11 22:26:00 2013 -0800

    javascript doesnt usually work like a real language, so add a couple safeties on the linenos

diff --git a/src/sentry/interfaces.py b/src/sentry/interfaces.py
index fd42bd2a10..04fd6d058d 100644
--- a/src/sentry/interfaces.py
+++ b/src/sentry/interfaces.py
@@ -49,6 +49,9 @@ def get_context(lineno, context_line, pre_context=None, post_context=None, filen
         start_lineno = lineno
         at_lineno = lineno
 
+    if start_lineno < 0:
+        start_lineno = 0
+
     context.append((at_lineno, context_line))
     at_lineno += 1
 
diff --git a/src/sentry/tasks/fetch_source.py b/src/sentry/tasks/fetch_source.py
index 0964cab95c..ca2b9bdcf2 100644
--- a/src/sentry/tasks/fetch_source.py
+++ b/src/sentry/tasks/fetch_source.py
@@ -34,7 +34,9 @@ def trim_line(line):
 
 def get_source_context(source, lineno, context=LINES_OF_CONTEXT):
     # lineno's in JS are 1-indexed
-    lineno -= 1
+    # just in case. sometimes math is hard
+    if lineno > 0:
+        lineno -= 1
 
     lower_bound = max(0, lineno - context)
     upper_bound = min(lineno + 1 + context, len(source))
