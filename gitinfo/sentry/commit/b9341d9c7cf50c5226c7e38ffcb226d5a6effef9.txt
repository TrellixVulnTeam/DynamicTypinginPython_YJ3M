commit b9341d9c7cf50c5226c7e38ffcb226d5a6effef9
Author: Ben Vinegar <ben@benv.ca>
Date:   Mon Aug 31 14:19:15 2015 -0700

    After successful merge, remove all merged stream items except parent

diff --git a/src/sentry/static/sentry/app/stores/groupStore.jsx b/src/sentry/static/sentry/app/stores/groupStore.jsx
index b6e861586a..390080cdc3 100644
--- a/src/sentry/static/sentry/app/stores/groupStore.jsx
+++ b/src/sentry/static/sentry/app/stores/groupStore.jsx
@@ -221,12 +221,19 @@ var GroupStore = Reflux.createStore({
     this.trigger(new Set(itemIds));
   },
 
-  onMergeSuccess(changeId, itemIds, response) {
-    itemIds.forEach(itemId => {
+  onMergeSuccess(changeId, mergedIds, response) {
+    mergedIds.forEach(itemId => {
       this.clearStatus(itemId, 'merge');
     });
+
+    // Remove all but parent id (items were merged into this one)
+    var mergedIdSet = new Set(mergedIds);
+    this.items = this.items.filter(
+      (item) => !mergedIdSet.has(item.id) || item.id === response.merge.parent
+    );
+
     AlertActions.addAlert(OK_SCHEDULE_MERGE, 'success');
-    this.trigger(new Set(itemIds));
+    this.trigger(new Set(mergedIds));
   },
 
   onUpdate(changeId, itemIds, data) {
diff --git a/tests/js/spec/stores/groupStore.spec.jsx b/tests/js/spec/stores/groupStore.spec.jsx
new file mode 100644
index 0000000000..34e4f4418d
--- /dev/null
+++ b/tests/js/spec/stores/groupStore.spec.jsx
@@ -0,0 +1,28 @@
+import GroupStore from 'app/stores/groupStore';
+
+describe('GroupStore', function () {
+  beforeEach(function () {
+    GroupStore.reset();
+  });
+
+  describe('onMergeSuccess()', function () {
+    it('should remove the non-parent merged ids', function () {
+      GroupStore.items = [
+        { id: 1 },
+        { id: 2 },
+        { id: 3 },
+        { id: 4 }
+      ];
+
+      GroupStore.onMergeSuccess(null,
+        [2, 3, 4], // items merged
+        { merge: { parent: 3 } } // merge API response
+      );
+
+      expect(GroupStore.items).to.eql([
+        { id: 1 },
+        { id: 3 } // parent
+      ]);
+    });
+  });
+});
