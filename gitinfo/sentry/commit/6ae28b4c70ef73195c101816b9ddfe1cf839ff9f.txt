commit 6ae28b4c70ef73195c101816b9ddfe1cf839ff9f
Author: Ted Kaemming <ted@kaemming.com>
Date:   Fri Oct 23 09:50:07 2015 -0700

    Limit digests to 10 issues per group.

diff --git a/src/sentry/templates/sentry/emails/digests/body.html b/src/sentry/templates/sentry/emails/digests/body.html
index a87f59565d..dc4fb9437f 100644
--- a/src/sentry/templates/sentry/emails/digests/body.html
+++ b/src/sentry/templates/sentry/emails/digests/body.html
@@ -25,7 +25,7 @@
               <th class="align-right">Events</th>
               <th class="align-right">Users</th>
           </tr>
-          {% for group, records in groups.iteritems %}
+          {% for group, records in groups.items|slice:":10" %}
               <tr>
                   <td class="event-detail">
                       {% url 'sentry-group' group.organization.slug group.project.slug group.id as group_link %}
@@ -42,9 +42,15 @@
                   </td>
               </tr>
           {% endfor %}
-          <tr>
-            <td colspan="3" class="more-events">And N more events</td>
-          </tr>
+          {% with groups.items|slice:"10:" as remainder %}
+            {% if remainder %}
+                <tr>
+                    <td colspan="3" class="more-events">
+                        and {{ remainder|length }} more event{{ remainder|pluralize }}
+                    </td>
+                </tr>
+            {% endif %}
+          {% endwith %}
       </table>
     </div>
 {% endfor %}
diff --git a/src/sentry/web/frontend/debug/mail.py b/src/sentry/web/frontend/debug/mail.py
index 0e2e5a0511..704e9ecec1 100644
--- a/src/sentry/web/frontend/debug/mail.py
+++ b/src/sentry/web/frontend/debug/mail.py
@@ -200,14 +200,16 @@ def digest(request):
         organization=org,
     )
 
+    rules = {i: Rule(
+        id=i,
+        project=project,
+        label="Rule #%s" % (i,),
+    ) for i in xrange(1, random.randint(2, 4))}
+
     state = {
         'project': project,
         'groups': {},
-        'rules': {
-            1: Rule(id=1, project=project, label="First Rule"),
-            2: Rule(id=2, project=project, label="Second Rule"),
-            3: Rule(id=3, project=project, label="Third Rule"),
-        },
+        'rules': rules,
         'event_counts': {},
         'user_counts': {},
     }
@@ -217,7 +219,7 @@ def digest(request):
     group_sequence = itertools.count(1)
     event_sequence = itertools.count(1)
 
-    for i in xrange(random.randint(1, 4)):
+    for i in xrange(random.randint(1, 30)):
         group_id = next(group_sequence)
 
         group = state['groups'][group_id] = Group(
