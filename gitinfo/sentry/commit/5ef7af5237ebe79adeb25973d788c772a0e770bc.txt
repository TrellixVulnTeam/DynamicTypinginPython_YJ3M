commit 5ef7af5237ebe79adeb25973d788c772a0e770bc
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Wed Dec 20 10:47:21 2017 -0800

    feat: Migrate personal settings avatar page (#6775)

diff --git a/src/sentry/static/sentry/app/components/avatarCropper.jsx b/src/sentry/static/sentry/app/components/avatarCropper.jsx
index 289620eab0..68509d3e91 100644
--- a/src/sentry/static/sentry/app/components/avatarCropper.jsx
+++ b/src/sentry/static/sentry/app/components/avatarCropper.jsx
@@ -366,6 +366,7 @@ class AvatarCropper extends React.Component {
     let src = this.getImgSrc();
     let style = {
       position: 'absolute',
+      opacity: 0,
     };
 
     return (
diff --git a/src/sentry/static/sentry/app/index.js b/src/sentry/static/sentry/app/index.js
index 4ea5bef37c..ef8b758da6 100644
--- a/src/sentry/static/sentry/app/index.js
+++ b/src/sentry/static/sentry/app/index.js
@@ -113,7 +113,8 @@ export default {
 
     Alerts: require('./components/alerts').default,
     AlertActions: require('./actions/alertActions').default,
-    AvatarSettings: require('./components/avatarSettings').default,
+    // TODO: remove when old personal settings are deprecated
+    AvatarSettings: require('./views/settings/account/avatar').default,
     mixins: {
       ApiMixin: require('./mixins/apiMixin').default,
       TooltipMixin: require('./mixins/tooltip').default,
diff --git a/src/sentry/static/sentry/app/routes.jsx b/src/sentry/static/sentry/app/routes.jsx
index 8de5c2037e..4df3b4b895 100644
--- a/src/sentry/static/sentry/app/routes.jsx
+++ b/src/sentry/static/sentry/app/routes.jsx
@@ -6,6 +6,8 @@ import AccountLayout from './views/accountLayout';
 import AccountSettingsLayout from './views/settings/account/accountSettingsLayout';
 import AccountNotifications from './views/settings/account/accountNotifications';
 import AccountEmails from './views/settings/account/accountEmails';
+import AccountAvatar from './views/settings/account/avatar';
+
 import AdminBuffer from './views/adminBuffer';
 import AdminLayout from './views/adminLayout';
 import AdminOrganizations from './views/adminOrganizations';
@@ -128,6 +130,12 @@ const accountSettingsRoutes = [
     name="Emails"
     component={errorHandler(AccountEmails)}
   />,
+  <Route
+    key="avatar/"
+    path="avatar/"
+    name="Avatar"
+    component={errorHandler(AccountAvatar)}
+  />,
 ];
 
 const projectSettingsRoutes = [
diff --git a/src/sentry/static/sentry/app/components/avatarSettings.jsx b/src/sentry/static/sentry/app/views/settings/account/avatar.jsx
similarity index 86%
rename from src/sentry/static/sentry/app/components/avatarSettings.jsx
rename to src/sentry/static/sentry/app/views/settings/account/avatar.jsx
index ab3baec803..3bbbc82203 100644
--- a/src/sentry/static/sentry/app/components/avatarSettings.jsx
+++ b/src/sentry/static/sentry/app/views/settings/account/avatar.jsx
@@ -1,13 +1,13 @@
 import PropTypes from 'prop-types';
 import React from 'react';
 
-import AlertActions from '../actions/alertActions';
-import ApiMixin from '../mixins/apiMixin';
-import AvatarCropper from '../components/avatarCropper';
-import AvatarRadio from '../components/avatarRadio';
-import LoadingError from '../components/loadingError';
-import LoadingIndicator from '../components/loadingIndicator';
-import {t} from '../locale';
+import AlertActions from '../../../actions/alertActions';
+import ApiMixin from '../../../mixins/apiMixin';
+import AvatarCropper from '../../../components/avatarCropper';
+import AvatarRadio from '../../../components/avatarRadio';
+import LoadingError from '../../../components/loadingError';
+import LoadingIndicator from '../../../components/loadingIndicator';
+import {t} from '../../../locale';
 
 const AvatarSettings = React.createClass({
   propTypes: {
@@ -101,7 +101,7 @@ const AvatarSettings = React.createClass({
     );
 
     return (
-      <div>
+      <div style={{lineHeight: '1.5em'}}>
         <form>
           <AvatarRadio user={this.state.user} updateUser={this.updateUserState} />
 
diff --git a/src/sentry/static/sentry/app/views/settings/account/navigationConfiguration.jsx b/src/sentry/static/sentry/app/views/settings/account/navigationConfiguration.jsx
index 514e8799e0..24a7cb7387 100644
--- a/src/sentry/static/sentry/app/views/settings/account/navigationConfiguration.jsx
+++ b/src/sentry/static/sentry/app/views/settings/account/navigationConfiguration.jsx
@@ -6,6 +6,10 @@ const accountNavigation = [
   {
     name: t('Account'),
     items: [
+      {
+        path: `${pathPrefix}/avatar`,
+        title: t('Avatar'),
+      },
       {
         path: `${pathPrefix}/notifications/`,
         title: t('Notifications'),
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index 28c05b57ab..9d922619d5 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -630,13 +630,6 @@ table.integrations {
 * ============================================================================
 */
 
-#avatar-settings {
-  input[type='file'] {
-    display: inline-block;
-    opacity: 0;
-  }
-}
-
 .image-cropper {
   text-align: center;
   background-image: url(../images/avatars/cropper-bg.gif);
