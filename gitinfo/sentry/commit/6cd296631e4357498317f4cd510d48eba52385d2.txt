commit 6cd296631e4357498317f4cd510d48eba52385d2
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jan 12 19:40:29 2012 -0800

    Add version data and clean up extra data

diff --git a/sentry/templates/sentry/groups/details.html b/sentry/templates/sentry/groups/details.html
index 34a5cd5887..e25bc828d2 100644
--- a/sentry/templates/sentry/groups/details.html
+++ b/sentry/templates/sentry/groups/details.html
@@ -113,20 +113,18 @@
         {% endif %}
 
         {% if version_data %}
-            <div id="versioninfo" class="module">
+            <div id="versioninfo">
                 <div class="page-header">
                     <h2>{% trans "Module Versions" %}</h2>
                 </div>
-                <div class="module-content">
-                    <table class="inline">
-                        {% for k, v in version_data %}
-                            <tr>
-                                <th class="key">{{ k }}</th>
-                                <td class="values"><code>{{ v }}</code></td>
-                            </tr>
-                        {% endfor %}
-                    </table>
-                </div>
+                <table class="inline">
+                    {% for k, v in version_data %}
+                        <tr>
+                            <th class="key">{{ k }}</th>
+                            <td class="values"><code>{{ v }}</code></td>
+                        </tr>
+                    {% endfor %}
+                </table>
             </div>
         {% endif %}
 
@@ -135,11 +133,10 @@
         {% endfor %}
 
         {% if json_data %}
-        <div id="requestinfo" class="module">
-            <div class="page-header">
-                <h2>{% trans "Additional Data" %}</h2>
-            </div>
-            <div class="module-content">
+            <div id="extra">
+                <div class="page-header">
+                    <h2>{% trans "Additional Data" %}</h2>
+                </div>
                 <table>
                     {% for k, v in json_data.iteritems %}
                         <tr>
@@ -147,19 +144,19 @@
                             <td class="values">
                             {% if v %}
                                 {% if v|is_dict %}
-                                    <table class="vars">
-                                        <thead>
-                                            <tr>
-                                                <th>{% trans "Variable" %}</th>
-                                                <th>{% trans "Value" %}</th>
-                                            </tr>
-                                        </thead>
+                                    {% if v|length > 5 %}
+                                        <a href="#" onclick="return varToggle(this, 'Extra{{ forloop.index }}')"><span>&#x25b6;</span> {% trans "Body" %}</a>
+                                    {% endif %}
+                                    <table class="vars" id="vExtra{{ forloop.index }}"{% if v|length > 5 %} style="display:none;"{% endif %}>
+                                        <colgroup>
+                                            <col style="width:100px;">
+                                        </colgroup>
                                         <tbody>
                                             {% for k_, v_ in v.iteritems|as_sorted %}
-                                            <tr>
-                                                <td>{{ k_ }}</td>
-                                                <td class="code"><pre>{{ v_|pprint }}</pre></td>
-                                            </tr>
+                                                <tr>
+                                                    <td>{{ k_ }}</td>
+                                                    <td class="code"><pre>{{ v_|pprint }}</pre></td>
+                                                </tr>
                                             {% endfor %}
                                         </tbody>
                                     </table>
diff --git a/sentry/web/frontend/groups.py b/sentry/web/frontend/groups.py
index a0da0975e9..6234c429d6 100644
--- a/sentry/web/frontend/groups.py
+++ b/sentry/web/frontend/groups.py
@@ -253,6 +253,7 @@ def group(request, project, group_id):
         'event': event,
         'interface_list': filter(None, [mark_safe(i.to_html(event) or '') for i in event.interfaces.itervalues()]),
         'json_data': event.data.get('extra', {}),
+        'version_data': event.data.get('modules', []),
     }, request)
 
 
@@ -291,6 +292,7 @@ def group_event_details(request, project, group_id, event_id):
         'event': event,
         'interface_list': filter(None, [mark_safe(i.to_html(event) or '') for i in event.interfaces.itervalues()]),
         'json_data': event.data.get('extra', {}),
+        'version_data': event.data.get('modules', []),
     }, request)
 
 
