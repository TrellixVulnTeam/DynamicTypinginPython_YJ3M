commit 4a21fb9ab79f1256630787d7b13add5e302155bd
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Mar 20 12:06:10 2017 -0700

    [db] missing metaclass on encrypted base fields (#5109)

diff --git a/src/sentry/db/models/fields/encrypted.py b/src/sentry/db/models/fields/encrypted.py
index e429b32ad8..798a070760 100644
--- a/src/sentry/db/models/fields/encrypted.py
+++ b/src/sentry/db/models/fields/encrypted.py
@@ -9,6 +9,7 @@ __all__ = (
 
 import six
 
+from django.db import models
 from django.db.models import CharField, TextField
 from jsonfield import JSONField
 from picklefield.fields import PickledObjectField
@@ -16,6 +17,7 @@ from sentry.utils.encryption import decrypt, encrypt
 from south.modelsinspector import add_introspection_rules
 
 
+@six.add_metaclass(models.SubfieldBase)
 class EncryptedCharField(CharField):
     def get_db_prep_value(self, value, *args, **kwargs):
         value = super(EncryptedCharField, self).get_db_prep_value(
@@ -72,6 +74,7 @@ class EncryptedPickledObjectField(PickledObjectField):
         ))
 
 
+@six.add_metaclass(models.SubfieldBase)
 class EncryptedTextField(TextField):
     def get_db_prep_value(self, value, *args, **kwargs):
         value = super(EncryptedTextField, self).get_db_prep_value(
