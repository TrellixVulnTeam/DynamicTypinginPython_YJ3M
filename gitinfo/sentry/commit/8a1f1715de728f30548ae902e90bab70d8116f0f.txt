commit 8a1f1715de728f30548ae902e90bab70d8116f0f
Author: Mike Fotinakis <mike@fotinakis.com>
Date:   Mon Jun 6 10:24:32 2016 -0700

    Initial acceptance testing setup. (#3392)
    
    * Initial acceptance testing setup.
    
    * Add test-acceptance to PHONY list.
    
    * Use the phantomjs-prebuilt dependency for webdriver.
    
    * Update coverage makefile to avoid acceptance tests.
    
    * Manually SIGTERM the phantomjs process to fix selenium bugs.

diff --git a/Makefile b/Makefile
index 6b1705258f..65465c0ce4 100644
--- a/Makefile
+++ b/Makefile
@@ -102,13 +102,18 @@ test-js:
 
 test-python:
 	@echo "--> Running Python tests"
-	py.test tests || exit 1
+	py.test tests/integration tests/sentry || exit 1
+	@echo ""
+
+test-acceptance:
+	@echo "--> Running acceptance tests"
+	py.test tests/acceptance || exit 1
 	@echo ""
 
 
 test-python-coverage:
 	@echo "--> Running Python tests"
-	coverage run --source=src/sentry,tests -m py.test tests
+	coverage run --source=src/sentry -m py.test tests/integration tests/sentry
 	@echo ""
 
 
@@ -136,7 +141,7 @@ extract-api-docs:
 	cd api-docs; python generator.py
 
 
-.PHONY: develop dev-postgres dev-docs setup-git build clean locale update-transifex update-submodules test testloop test-cli test-js test-python test-python-coverage lint lint-python lint-js coverage publish
+.PHONY: develop dev-postgres dev-docs setup-git build clean locale update-transifex update-submodules test testloop test-cli test-js test-python test-acceptance test-python-coverage lint lint-python lint-js coverage publish
 
 
 ############################
diff --git a/package.json b/package.json
index 2cab615837..b92df45103 100644
--- a/package.json
+++ b/package.json
@@ -73,6 +73,7 @@
     "karma-sourcemap-loader": "0.3.6",
     "karma-webpack": "1.7.0",
     "mocha": "2.3.4",
+    "phantomjs-prebuilt": "^2.1.7",
     "platformicons": "0.0.14",
     "po-catalog-loader": "^1.2.0",
     "sinon": "1.17.2",
diff --git a/setup.py b/setup.py
index 19346cd229..d9251a1716 100755
--- a/setup.py
+++ b/setup.py
@@ -82,6 +82,7 @@ tests_require = [
     'pytest-xdist>=1.11.0,<1.12.0',
     'python-coveralls',
     'responses',
+    'selenium',
 ]
 
 
diff --git a/src/sentry/testutils/cases.py b/src/sentry/testutils/cases.py
index 8bc23c6170..11b70be808 100644
--- a/src/sentry/testutils/cases.py
+++ b/src/sentry/testutils/cases.py
@@ -10,11 +10,12 @@ from __future__ import absolute_import
 
 __all__ = (
     'TestCase', 'TransactionTestCase', 'APITestCase', 'AuthProviderTestCase',
-    'RuleTestCase', 'PermissionTestCase', 'PluginTestCase', 'CliTestCase',
+    'RuleTestCase', 'PermissionTestCase', 'PluginTestCase', 'CliTestCase', 'LiveServerTestCase',
 )
 
 import base64
 import os.path
+import signal
 import urllib
 from contextlib import contextmanager
 
@@ -24,10 +25,11 @@ from django.contrib.auth import login
 from django.core.cache import cache
 from django.core.urlresolvers import reverse
 from django.http import HttpRequest
-from django.test import TestCase, TransactionTestCase
+from django.test import TestCase, TransactionTestCase, LiveServerTestCase
 from django.utils.importlib import import_module
-from exam import before, fixture, Exam
+from exam import before, after, fixture, Exam
 from rest_framework.test import APITestCase as BaseAPITestCase
+from selenium import webdriver
 
 from sentry import auth
 from sentry.auth.providers.dummy import DummyProvider
@@ -239,6 +241,26 @@ class TransactionTestCase(BaseTestCase, TransactionTestCase):
     pass
 
 
+class LiveServerTestCase(BaseTestCase, LiveServerTestCase):
+    @before
+    def setup_browser(self):
+        # NOTE: this relies on the phantomjs-prebuilt dependency in package.json.
+        phantomjs_path = os.path.join(
+            settings.NODE_MODULES_ROOT,
+            'phantomjs-prebuilt',
+            'bin',
+            'phantomjs',
+        )
+        self.browser = webdriver.PhantomJS(executable_path=phantomjs_path)
+
+    @after
+    def teardown_browser(self):
+        self.browser.close()
+        # TODO: remove this when fixed in: https://github.com/seleniumhq/selenium/issues/767
+        self.browser.service.process.send_signal(signal.SIGTERM)
+        self.browser.quit()
+
+
 class APITestCase(BaseTestCase, BaseAPITestCase):
     pass
 
diff --git a/tests/acceptance/test_static.py b/tests/acceptance/test_static.py
new file mode 100644
index 0000000000..263f39f480
--- /dev/null
+++ b/tests/acceptance/test_static.py
@@ -0,0 +1,6 @@
+from sentry.testutils import LiveServerTestCase
+
+
+class StaticAcceptanceTest(LiveServerTestCase):
+    def test_static(self):
+        self.browser.get(self.live_server_url)
