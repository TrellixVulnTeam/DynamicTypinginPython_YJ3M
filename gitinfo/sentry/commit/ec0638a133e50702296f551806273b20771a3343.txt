commit ec0638a133e50702296f551806273b20771a3343
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Aug 21 16:12:32 2017 -0700

    monkey: patch HttpRequest repr to not log request variables
    
    Fixes GH-5933

diff --git a/src/sentry/monkey.py b/src/sentry/monkey.py
index 91a686d4c7..d83db7e0aa 100644
--- a/src/sentry/monkey.py
+++ b/src/sentry/monkey.py
@@ -14,3 +14,21 @@ def register_scheme(name):
 
 register_scheme('app')
 register_scheme('chrome-extension')
+
+
+# Intentionally strip all GET/POST/COOKIE values out of repr() for HttpRequest
+# and subclass WSGIRequest. This prevents sensitive information from getting
+# logged. This was yanked out of Django master anyhow.
+# https://code.djangoproject.com/ticket/12098
+def safe_httprequest_repr(self):
+    return '<%s: %s %r>' % (self.__class__.__name__, self.method, self.get_full_path())
+
+
+try:
+    from django.http import HttpRequest
+except ImportError:
+    # This module is potentially imported before Django is installed
+    # during a setup.py run
+    pass
+else:
+    HttpRequest.__repr__ = safe_httprequest_repr
