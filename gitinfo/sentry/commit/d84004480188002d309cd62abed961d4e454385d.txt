commit d84004480188002d309cd62abed961d4e454385d
Author: Chris Jennings <chriskjennings@gmail.com>
Date:   Thu Jun 21 15:10:29 2018 -0700

    fix(ui): Project selector platformList alignment (#8804)
    
    * Add a 'direction' prop to platformList
    
    * align platformList with 'filter projects' label

diff --git a/src/sentry/static/sentry/app/components/platformList.jsx b/src/sentry/static/sentry/app/components/platformList.jsx
index b60ff188bc..86e0572cfa 100644
--- a/src/sentry/static/sentry/app/components/platformList.jsx
+++ b/src/sentry/static/sentry/app/components/platformList.jsx
@@ -11,10 +11,12 @@ const ICON_SIZE = 16;
 class PlatformList extends React.Component {
   static propTypes = {
     platforms: PropTypes.array,
+    direction: PropTypes.string,
   };
 
   static defaultProps = {
     platforms: [],
+    direction: 'right',
   };
 
   getIcon(platform) {
@@ -34,7 +36,7 @@ class PlatformList extends React.Component {
     const {platforms} = this.props;
     const platformsPreview = platforms.slice(0, MAX_PLATFORMS);
     return (
-      <PlatformIcons>
+      <PlatformIcons direction={this.props.direction} {...this.props}>
         {platforms.length > 0 ? (
           this.getIcons(platformsPreview)
         ) : (
@@ -49,7 +51,7 @@ const PlatformIcons = styled('div')`
   margin-right: ${space(0.5)};
   display: flex;
   flex-direction: row;
-  justify-content: flex-end;
+  justify-content: ${p => (p.direction == 'left' ? 'flex-end' : 'flex-start')};
   width: 24px;
 `;
 
diff --git a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
index 4a16ceb554..a8465ea7e6 100644
--- a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
+++ b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
@@ -226,7 +226,7 @@ const ProjectSelector = createReactClass({
         {/*ideally an icon here...*/}
         <ProjectBadge>
           <Flex>
-            <PlatformList platforms={platforms} />
+            <StyledPlatformList platforms={platforms} direction="left" />
             {label}
           </Flex>
           {project.isBookmarked && <BookmarkIcon />}
@@ -408,6 +408,11 @@ const ProjectSelector = createReactClass({
   },
 });
 
+const StyledPlatformList = styled(PlatformList)`
+  width: 28px;
+  margin-right: 6px;
+`;
+
 const ProjectBadge = styled.div`
   display: flex;
   align-items: center;
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index 95e89e9667..f70175bb2d 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -1213,6 +1213,7 @@ table.integrations {
     overflow: auto;
     max-height: 500px;
     white-space: nowrap;
+    overflow: show;
 
     &:before {
       left: 11px;
@@ -1253,7 +1254,6 @@ table.integrations {
 
     li {
       position: relative;
-      padding: 0 5px 0 15px;
 
       &:nth-child(2) {
         margin-top: 5px;
@@ -1271,7 +1271,7 @@ table.integrations {
 
       > a {
         .truncate();
-        padding: 6px 0;
+        padding: 6px 6px 6px 0;
         border-radius: 0;
         line-height: 1;
         border-left: 3px solid transparent;
@@ -1282,17 +1282,19 @@ table.integrations {
 
         &.active,
         &:active {
-          color: @gray-dark;
+          color: @gray-darkest;
+          background: @white-dark;
 
           &:after {
             display: block;
             content: '';
             position: absolute;
             width: 4px;
-            left: 0;
+            left: -1px;
             top: 0;
             bottom: 0;
             background: @purple-light;
+            border-radius: 0 2px 2px 0;
           }
         }
       }
diff --git a/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap b/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
index f4d4be3f08..4b7560e0ca 100644
--- a/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
+++ b/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
@@ -162,7 +162,7 @@ exports[`ProjectSelector render() can filter projects by project name 1`] = `
                   >
                     <ProjectBadge>
                       <div
-                        className="css-1dx2nj3-ProjectBadge et07ovj0"
+                        className="css-1dx2nj3-ProjectBadge et07ovj1"
                       >
                         <Flex>
                           <Base
@@ -172,40 +172,52 @@ exports[`ProjectSelector render() can filter projects by project name 1`] = `
                               className="css-sncxrr"
                               is={null}
                             >
-                              <PlatformList
+                              <StyledPlatformList
+                                direction="left"
                                 platforms={Array []}
                               >
-                                <PlatformIcons>
-                                  <div
-                                    className="css-10b0mx0-PlatformIcons ezvce7z0"
+                                <PlatformList
+                                  className="css-16pu8f4-StyledPlatformList et07ovj0"
+                                  direction="left"
+                                  platforms={Array []}
+                                >
+                                  <PlatformIcons
+                                    className="css-16pu8f4-StyledPlatformList et07ovj0"
+                                    direction="left"
+                                    platforms={Array []}
                                   >
-                                    <StyledPlatformIcon
-                                      platform="default"
-                                      size="16px"
+                                    <div
+                                      className="et07ovj0 css-1or6tzj-PlatformIcons-StyledPlatformList ezvce7z0"
+                                      direction="left"
                                     >
-                                      <Platformicon
-                                        className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
+                                      <StyledPlatformIcon
                                         platform="default"
                                         size="16px"
                                       >
-                                        <img
+                                        <Platformicon
                                           className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
-                                          height="16px"
-                                          src={
-                                            Object {
-                                              "default": Object {
-                                                "id": "test",
-                                                "viewBox": Object {},
-                                              },
+                                          platform="default"
+                                          size="16px"
+                                        >
+                                          <img
+                                            className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
+                                            height="16px"
+                                            src={
+                                              Object {
+                                                "default": Object {
+                                                  "id": "test",
+                                                  "viewBox": Object {},
+                                                },
+                                              }
                                             }
-                                          }
-                                          width="16px"
-                                        />
-                                      </Platformicon>
-                                    </StyledPlatformIcon>
-                                  </div>
-                                </PlatformIcons>
-                              </PlatformList>
+                                            width="16px"
+                                          />
+                                        </Platformicon>
+                                      </StyledPlatformIcon>
+                                    </div>
+                                  </PlatformIcons>
+                                </PlatformList>
+                              </StyledPlatformList>
                               <span>
                                 <strong
                                   className="highlight"
@@ -393,7 +405,7 @@ exports[`ProjectSelector render() can filter projects by team name/project name
                   >
                     <ProjectBadge>
                       <div
-                        className="css-1dx2nj3-ProjectBadge et07ovj0"
+                        className="css-1dx2nj3-ProjectBadge et07ovj1"
                       >
                         <Flex>
                           <Base
@@ -403,40 +415,52 @@ exports[`ProjectSelector render() can filter projects by team name/project name
                               className="css-sncxrr"
                               is={null}
                             >
-                              <PlatformList
+                              <StyledPlatformList
+                                direction="left"
                                 platforms={Array []}
                               >
-                                <PlatformIcons>
-                                  <div
-                                    className="css-10b0mx0-PlatformIcons ezvce7z0"
+                                <PlatformList
+                                  className="css-16pu8f4-StyledPlatformList et07ovj0"
+                                  direction="left"
+                                  platforms={Array []}
+                                >
+                                  <PlatformIcons
+                                    className="css-16pu8f4-StyledPlatformList et07ovj0"
+                                    direction="left"
+                                    platforms={Array []}
                                   >
-                                    <StyledPlatformIcon
-                                      platform="default"
-                                      size="16px"
+                                    <div
+                                      className="et07ovj0 css-1or6tzj-PlatformIcons-StyledPlatformList ezvce7z0"
+                                      direction="left"
                                     >
-                                      <Platformicon
-                                        className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
+                                      <StyledPlatformIcon
                                         platform="default"
                                         size="16px"
                                       >
-                                        <img
+                                        <Platformicon
                                           className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
-                                          height="16px"
-                                          src={
-                                            Object {
-                                              "default": Object {
-                                                "id": "test",
-                                                "viewBox": Object {},
-                                              },
+                                          platform="default"
+                                          size="16px"
+                                        >
+                                          <img
+                                            className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
+                                            height="16px"
+                                            src={
+                                              Object {
+                                                "default": Object {
+                                                  "id": "test",
+                                                  "viewBox": Object {},
+                                                },
+                                              }
                                             }
-                                          }
-                                          width="16px"
-                                        />
-                                      </Platformicon>
-                                    </StyledPlatformIcon>
-                                  </div>
-                                </PlatformIcons>
-                              </PlatformList>
+                                            width="16px"
+                                          />
+                                        </Platformicon>
+                                      </StyledPlatformIcon>
+                                    </div>
+                                  </PlatformIcons>
+                                </PlatformList>
+                              </StyledPlatformList>
                               Another Project
                             </div>
                           </Base>
@@ -466,7 +490,7 @@ exports[`ProjectSelector render() can filter projects by team name/project name
                   >
                     <ProjectBadge>
                       <div
-                        className="css-1dx2nj3-ProjectBadge et07ovj0"
+                        className="css-1dx2nj3-ProjectBadge et07ovj1"
                       >
                         <Flex>
                           <Base
@@ -476,40 +500,52 @@ exports[`ProjectSelector render() can filter projects by team name/project name
                               className="css-sncxrr"
                               is={null}
                             >
-                              <PlatformList
+                              <StyledPlatformList
+                                direction="left"
                                 platforms={Array []}
                               >
-                                <PlatformIcons>
-                                  <div
-                                    className="css-10b0mx0-PlatformIcons ezvce7z0"
+                                <PlatformList
+                                  className="css-16pu8f4-StyledPlatformList et07ovj0"
+                                  direction="left"
+                                  platforms={Array []}
+                                >
+                                  <PlatformIcons
+                                    className="css-16pu8f4-StyledPlatformList et07ovj0"
+                                    direction="left"
+                                    platforms={Array []}
                                   >
-                                    <StyledPlatformIcon
-                                      platform="default"
-                                      size="16px"
+                                    <div
+                                      className="et07ovj0 css-1or6tzj-PlatformIcons-StyledPlatformList ezvce7z0"
+                                      direction="left"
                                     >
-                                      <Platformicon
-                                        className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
+                                      <StyledPlatformIcon
                                         platform="default"
                                         size="16px"
                                       >
-                                        <img
+                                        <Platformicon
                                           className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
-                                          height="16px"
-                                          src={
-                                            Object {
-                                              "default": Object {
-                                                "id": "test",
-                                                "viewBox": Object {},
-                                              },
+                                          platform="default"
+                                          size="16px"
+                                        >
+                                          <img
+                                            className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
+                                            height="16px"
+                                            src={
+                                              Object {
+                                                "default": Object {
+                                                  "id": "test",
+                                                  "viewBox": Object {},
+                                                },
+                                              }
                                             }
-                                          }
-                                          width="16px"
-                                        />
-                                      </Platformicon>
-                                    </StyledPlatformIcon>
-                                  </div>
-                                </PlatformIcons>
-                              </PlatformList>
+                                            width="16px"
+                                          />
+                                        </Platformicon>
+                                      </StyledPlatformIcon>
+                                    </div>
+                                  </PlatformIcons>
+                                </PlatformList>
+                              </StyledPlatformList>
                               <span>
                                 <strong
                                   className="highlight"
@@ -585,7 +621,8 @@ exports[`ProjectSelector render() lists projects and has filter 1`] = `
       >
         <ProjectBadge>
           <Flex>
-            <PlatformList
+            <StyledPlatformList
+              direction="left"
               platforms={Array []}
             />
             <span>
@@ -602,7 +639,8 @@ exports[`ProjectSelector render() lists projects and has filter 1`] = `
       >
         <ProjectBadge>
           <Flex>
-            <PlatformList
+            <StyledPlatformList
+              direction="left"
               platforms={Array []}
             />
             <span>
