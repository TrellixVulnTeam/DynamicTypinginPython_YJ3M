commit 3c42749309238b640b82568e03b9fe894213a1ad
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Sep 30 11:57:28 2015 -0700

    Dont create an empty interface

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index ba13d219e9..e411fff954 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -303,11 +303,12 @@ class EventManager(object):
             del data['sentry.interfaces.Stacktrace']
 
         if 'sentry.interfaces.Http' in data:
-            data.setdefault('sentry.interfaces.User', {})
-            data['sentry.interfaces.User'].setdefault(
-                'ip_address',
-                data['sentry.interfaces.Http'].get('env', {}).get('REMOTE_ADDR')
-            )
+            ip_address = data['sentry.interfaces.Http'].get(
+                'env', {}).get('REMOTE_ADDR')
+            if ip_address:
+                data.setdefault('sentry.interfaces.User', {})
+                data['sentry.interfaces.User'].setdefault(
+                    'ip_address', ip_address)
 
         if data['time_spent']:
             data['time_spent'] = int(data['time_spent'])
