commit 8c1e0a052ce07e4f973ab5095ea703086556f8fb
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Jan 15 13:05:59 2019 -0800

    ref(issues): Refactor EventOrGroupExtraDetails component (#11538)
    
    The component links to the new issue id routes if used in a multi-project
    context.

diff --git a/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx b/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx
index ce8064f093..e0d46424aa 100644
--- a/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx
+++ b/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx
@@ -1,11 +1,9 @@
 import PropTypes from 'prop-types';
 import React from 'react';
-import createReactClass from 'create-react-class';
-import {Link} from 'react-router';
+import {Link, withRouter} from 'react-router';
 import styled from 'react-emotion';
 import {Flex, Box} from 'grid-emotion';
 
-import ProjectState from 'app/mixins/projectState';
 import TimeSince from 'app/components/timeSince';
 import ShortId from 'app/components/shortId';
 import overflowEllipsis from 'app/styles/overflowEllipsis';
@@ -13,13 +11,8 @@ import {t, tct} from 'app/locale';
 import InlineSvg from 'app/components/inlineSvg';
 import space from 'app/styles/space';
 
-const EventOrGroupExtraDetails = createReactClass({
-  displayName: 'EventOrGroupExtraDetails',
-
-  propTypes: {
-    orgId: PropTypes.string.isRequired,
-    projectId: PropTypes.string.isRequired,
-    groupId: PropTypes.string.isRequired,
+class EventOrGroupExtraDetails extends React.Component {
+  static propTypes = {
     lastSeen: PropTypes.string,
     firstSeen: PropTypes.string,
     subscriptionDetails: PropTypes.shape({
@@ -33,15 +26,17 @@ const EventOrGroupExtraDetails = createReactClass({
     }),
     showAssignee: PropTypes.bool,
     shortId: PropTypes.string,
-  },
+  };
+
+  getIssuesPath() {
+    const {orgId, projectId} = this.props.params;
 
-  mixins: [ProjectState],
+    return projectId ? `/${orgId}/${projectId}/issues` : `/organizations/${orgId}/issues`;
+  }
 
   render() {
-    let {
-      orgId,
-      projectId,
-      groupId,
+    const {
+      params: {groupId},
       lastSeen,
       firstSeen,
       subscriptionDetails,
@@ -53,6 +48,8 @@ const EventOrGroupExtraDetails = createReactClass({
       shortId,
     } = this.props;
 
+    const issuesPath = this.getIssuesPath();
+
     return (
       <GroupExtra align="center">
         {shortId && <GroupShortId shortId={shortId} />}
@@ -78,10 +75,7 @@ const EventOrGroupExtraDetails = createReactClass({
         <GroupExtraCommentsAndLogger>
           {numComments > 0 && (
             <Box mr={2}>
-              <CommentsLink
-                to={`/${orgId}/${projectId}/issues/${groupId}/activity/`}
-                className="comments"
-              >
+              <CommentsLink to={`${issuesPath}${groupId}/activity/`} className="comments">
                 <GroupExtraIcon
                   src="icon-comment-sm"
                   mentioned={
@@ -96,7 +90,7 @@ const EventOrGroupExtraDetails = createReactClass({
             <Box className="event-annotation" mr={2}>
               <Link
                 to={{
-                  pathname: `/${orgId}/${projectId}/`,
+                  pathname: issuesPath,
                   query: {
                     query: 'logger:' + logger,
                   },
@@ -124,8 +118,8 @@ const EventOrGroupExtraDetails = createReactClass({
           assignedTo && <div>{tct('Assigned to [name]', {name: assignedTo.name})}</div>}
       </GroupExtra>
     );
-  },
-});
+  }
+}
 
 const GroupExtra = styled(Flex)`
   color: ${p => p.theme.gray3};
@@ -172,4 +166,4 @@ const GroupTimeIcon = styled(GroupExtraIcon)`
   transform: translateY(-1px);
 `;
 
-export default EventOrGroupExtraDetails;
+export default withRouter(EventOrGroupExtraDetails);
diff --git a/src/sentry/static/sentry/app/components/stream/group.jsx b/src/sentry/static/sentry/app/components/stream/group.jsx
index e4a0e9f8bc..1b680df8fe 100644
--- a/src/sentry/static/sentry/app/components/stream/group.jsx
+++ b/src/sentry/static/sentry/app/components/stream/group.jsx
@@ -86,8 +86,7 @@ const StreamGroup = createReactClass({
 
   render() {
     const {data} = this.state;
-    const {id, orgId, query, hasGuideAnchor, canSelect} = this.props;
-    const projectId = data.project.slug;
+    const {query, hasGuideAnchor, canSelect} = this.props;
 
     return (
       <Group onClick={this.toggleSelect} py={1} px={0} align="center">
@@ -99,13 +98,7 @@ const StreamGroup = createReactClass({
         )}
         <GroupSummary w={[8 / 12, 8 / 12, 6 / 12]} ml={canSelect ? 1 : 2} mr={1} flex="1">
           <EventOrGroupHeader data={data} query={query} />
-          <EventOrGroupExtraDetails
-            group
-            {...data}
-            groupId={id}
-            orgId={orgId}
-            projectId={projectId}
-          />
+          <EventOrGroupExtraDetails group {...data} />
         </GroupSummary>
         <Box w={160} mx={2} className="hidden-xs hidden-sm">
           <GroupChart id={data.id} statsPeriod={this.props.statsPeriod} data={data} />
diff --git a/src/sentry/static/sentry/app/views/groupDetails/project/groupSimilar/similarItem.jsx b/src/sentry/static/sentry/app/views/groupDetails/project/groupSimilar/similarItem.jsx
index d040677108..ead164c781 100644
--- a/src/sentry/static/sentry/app/views/groupDetails/project/groupSimilar/similarItem.jsx
+++ b/src/sentry/static/sentry/app/views/groupDetails/project/groupSimilar/similarItem.jsx
@@ -4,6 +4,7 @@ import Reflux from 'reflux';
 import classNames from 'classnames';
 import createReactClass from 'create-react-class';
 
+import SentryTypes from 'app/sentryTypes';
 import {openDiffModal} from 'app/actionCreators/modal';
 import Checkbox from 'app/components/checkbox';
 import Count from 'app/components/count';
@@ -23,9 +24,7 @@ const SimilarIssueItem = createReactClass({
   displayName: 'SimilarIssueItem',
 
   propTypes: {
-    orgId: PropTypes.string.isRequired,
     groupId: PropTypes.string.isRequired,
-    projectId: PropTypes.string.isRequired,
     score: PropTypes.object,
     scoresByInterface: PropTypes.shape({
       exception: PropTypes.array,
@@ -35,22 +34,7 @@ const SimilarIssueItem = createReactClass({
       exception: PropTypes.number,
       message: PropTypes.number,
     }),
-    issue: PropTypes.shape({
-      id: PropTypes.string.isRequired,
-      level: PropTypes.string.isRequired,
-      type: PropTypes.oneOf(['error', 'csp', 'default']).isRequired,
-      title: PropTypes.string.isRequired,
-      metadata: PropTypes.shape({
-        value: PropTypes.string,
-        message: PropTypes.string,
-        directive: PropTypes.string,
-        type: PropTypes.string,
-        title: PropTypes.string,
-        uri: PropTypes.string,
-      }).isRequired,
-      culprit: PropTypes.string,
-      hideLevel: PropTypes.bool,
-    }),
+    issue: SentryTypes.Group.isRequired,
   },
 
   mixins: [Reflux.listenTo(GroupingStore, 'onGroupingUpdate')],
@@ -104,7 +88,7 @@ const SimilarIssueItem = createReactClass({
   },
 
   render() {
-    let {aggregate, scoresByInterface, issue, orgId, projectId} = this.props;
+    let {aggregate, scoresByInterface, issue} = this.props;
 
     if (!this.state.visible) {
       return null;
@@ -134,16 +118,7 @@ const SimilarIssueItem = createReactClass({
             </div>
             <div className="event-details level-error" style={{flex: 1}}>
               <EventOrGroupHeader data={issue} />
-              <EventOrGroupExtraDetails
-                {...issue}
-                groupId={issue.id}
-                orgId={orgId}
-                projectId={projectId}
-                lastSeen={null}
-                showAssignee
-                showStatus
-                group
-              />
+              <EventOrGroupExtraDetails {...issue} lastSeen={null} showAssignee group />
             </div>
           </FlowLayout>
           <button
diff --git a/src/sentry/static/sentry/app/views/groupDetails/project/groupSimilar/similarList.jsx b/src/sentry/static/sentry/app/views/groupDetails/project/groupSimilar/similarList.jsx
index 053c9fca9a..007db8d239 100644
--- a/src/sentry/static/sentry/app/views/groupDetails/project/groupSimilar/similarList.jsx
+++ b/src/sentry/static/sentry/app/views/groupDetails/project/groupSimilar/similarList.jsx
@@ -57,15 +57,7 @@ class SimilarList extends React.Component {
   };
 
   render() {
-    let {
-      orgId,
-      groupId,
-      projectId,
-      items,
-      filteredItems,
-      pageLinks,
-      onMerge,
-    } = this.props;
+    let {groupId, items, filteredItems, pageLinks, onMerge} = this.props;
     let hasHiddenItems = !!filteredItems.length;
     let hasResults = items.length > 0 || hasHiddenItems;
     let itemsWithFiltered = items.concat(
@@ -89,13 +81,7 @@ class SimilarList extends React.Component {
 
         <div className="similar-list">
           {itemsWithFiltered.map(item => (
-            <SimilarItem
-              key={item.issue.id}
-              orgId={orgId}
-              projectId={projectId}
-              groupId={groupId}
-              {...item}
-            />
+            <SimilarItem key={item.issue.id} groupId={groupId} {...item} />
           ))}
 
           {hasHiddenItems &&
diff --git a/src/sentry/static/sentry/app/views/projectDashboard/eventNode.jsx b/src/sentry/static/sentry/app/views/projectDashboard/eventNode.jsx
index c0f4bf3fe5..99722c5246 100644
--- a/src/sentry/static/sentry/app/views/projectDashboard/eventNode.jsx
+++ b/src/sentry/static/sentry/app/views/projectDashboard/eventNode.jsx
@@ -20,20 +20,12 @@ const EventNode = createReactClass({
   render() {
     let group = this.props.group;
     let userCount = group.userCount;
-    let org = this.getOrganization();
-
-    let orgId = org.slug;
-    let projectId = group.project.slug;
-    let groupId = group.id;
 
     return (
       <li className="group row">
         <div className="col-xs-8 event-details">
           <EventOrGroupHeader data={group} hideIcons hideLevel />
           <EventOrGroupExtraDetails
-            orgId={orgId}
-            projectId={projectId}
-            groupId={groupId}
             lastSeen={group.lastSeen}
             firstSeen={group.firstSeen}
           />
diff --git a/tests/js/spec/components/__snapshots__/eventOrGroupExtraDetails.spec.jsx.snap b/tests/js/spec/components/__snapshots__/eventOrGroupExtraDetails.spec.jsx.snap
index e1857a1d36..e223698230 100644
--- a/tests/js/spec/components/__snapshots__/eventOrGroupExtraDetails.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/eventOrGroupExtraDetails.spec.jsx.snap
@@ -1,350 +1,105 @@
 // Jest Snapshot v1, https://goo.gl/fbAQLP
 
 exports[`EventOrGroupExtraDetails details when mentioned 1`] = `
-<GroupExtra
-  align="center"
->
-  <GroupShortId
-    shortId="shortId"
-  />
-  <Times>
-    <div
-      className="css-77t6iv"
-    >
-      <GroupTimeIcon
-        src="icon-clock-sm"
-      />
-      <TimeSince
-        date="2017-07-25T22:56:12Z"
-        suffix="ago"
-      />
-      <span
-        className="hidden-xs hidden-sm"
-      >
-         — 
-      </span>
-      <TimeSince
-        className="hidden-xs hidden-sm"
-        date="2017-07-01T02:06:02Z"
-        suffix="old"
-      />
-    </div>
-  </Times>
-  <GroupExtraCommentsAndLogger>
-    <Box
-      mr={2}
-    >
-      <CommentsLink
-        className="comments"
-        to="/orgId/projectId/issues/groupId/activity/"
-      >
-        <GroupExtraIcon
-          mentioned={true}
-          src="icon-comment-sm"
-        />
-        <span>
-          14
-        </span>
-      </CommentsLink>
-    </Box>
-    <Box
-      className="event-annotation"
-      mr={2}
-    >
-      <Link
-        onlyActiveOnIndex={false}
-        style={Object {}}
-        to={
-          Object {
-            "pathname": "/orgId/projectId/",
-            "query": Object {
-              "query": "logger:javascript logger",
-            },
-          }
-        }
-      >
-        javascript logger
-      </Link>
-    </Box>
-  </GroupExtraCommentsAndLogger>
-  <div
-    className="event-annotation"
-    dangerouslySetInnerHTML={
-      Object {
-        "__html": "annotation1",
-      }
+<EventOrGroupExtraDetails
+  annotations={
+    Array [
+      "annotation1",
+      "annotation2",
+    ]
+  }
+  firstSeen="2017-07-01T02:06:02Z"
+  groupId="groupId"
+  lastSeen="2017-07-25T22:56:12Z"
+  logger="javascript logger"
+  numComments={14}
+  orgId="orgId"
+  projectId="projectId"
+  shortId="shortId"
+  subscriptionDetails={
+    Object {
+      "reason": "mentioned",
     }
-    key="0"
-  />
-  <div
-    className="event-annotation"
-    dangerouslySetInnerHTML={
-      Object {
-        "__html": "annotation2",
-      }
-    }
-    key="1"
-  />
-</GroupExtra>
+  }
+/>
 `;
 
 exports[`EventOrGroupExtraDetails renders all details 1`] = `
-<GroupExtra
-  align="center"
->
-  <GroupShortId
-    shortId="shortId"
-  />
-  <Times>
-    <div
-      className="css-77t6iv"
-    >
-      <GroupTimeIcon
-        src="icon-clock-sm"
-      />
-      <TimeSince
-        date="2017-07-25T22:56:12Z"
-        suffix="ago"
-      />
-      <span
-        className="hidden-xs hidden-sm"
-      >
-         — 
-      </span>
-      <TimeSince
-        className="hidden-xs hidden-sm"
-        date="2017-07-01T02:06:02Z"
-        suffix="old"
-      />
-    </div>
-  </Times>
-  <GroupExtraCommentsAndLogger>
-    <Box
-      mr={2}
-    >
-      <CommentsLink
-        className="comments"
-        to="/orgId/projectId/issues/groupId/activity/"
-      >
-        <GroupExtraIcon
-          src="icon-comment-sm"
-        />
-        <span>
-          14
-        </span>
-      </CommentsLink>
-    </Box>
-    <Box
-      className="event-annotation"
-      mr={2}
-    >
-      <Link
-        onlyActiveOnIndex={false}
-        style={Object {}}
-        to={
-          Object {
-            "pathname": "/orgId/projectId/",
-            "query": Object {
-              "query": "logger:javascript logger",
-            },
-          }
-        }
-      >
-        javascript logger
-      </Link>
-    </Box>
-  </GroupExtraCommentsAndLogger>
-  <div
-    className="event-annotation"
-    dangerouslySetInnerHTML={
-      Object {
-        "__html": "annotation1",
-      }
-    }
-    key="0"
-  />
-  <div
-    className="event-annotation"
-    dangerouslySetInnerHTML={
-      Object {
-        "__html": "annotation2",
-      }
+<EventOrGroupExtraDetails
+  annotations={
+    Array [
+      "annotation1",
+      "annotation2",
+    ]
+  }
+  assignedTo={
+    Object {
+      "name": "Assignee Name",
     }
-    key="1"
-  />
-</GroupExtra>
+  }
+  firstSeen="2017-07-01T02:06:02Z"
+  groupId="groupId"
+  lastSeen="2017-07-25T22:56:12Z"
+  logger="javascript logger"
+  numComments={14}
+  orgId="orgId"
+  projectId="projectId"
+  shortId="shortId"
+  status="resolved"
+/>
 `;
 
 exports[`EventOrGroupExtraDetails renders assignee and status 1`] = `
-<GroupExtra
-  align="center"
->
-  <GroupShortId
-    shortId="shortId"
-  />
-  <Times>
-    <div
-      className="css-77t6iv"
-    >
-      <GroupTimeIcon
-        src="icon-clock-sm"
-      />
-      <TimeSince
-        date="2017-07-25T22:56:12Z"
-        suffix="ago"
-      />
-      <span
-        className="hidden-xs hidden-sm"
-      >
-         — 
-      </span>
-      <TimeSince
-        className="hidden-xs hidden-sm"
-        date="2017-07-01T02:06:02Z"
-        suffix="old"
-      />
-    </div>
-  </Times>
-  <GroupExtraCommentsAndLogger>
-    <Box
-      mr={2}
-    >
-      <CommentsLink
-        className="comments"
-        to="/orgId/projectId/issues/groupId/activity/"
-      >
-        <GroupExtraIcon
-          src="icon-comment-sm"
-        />
-        <span>
-          14
-        </span>
-      </CommentsLink>
-    </Box>
-    <Box
-      className="event-annotation"
-      mr={2}
-    >
-      <Link
-        onlyActiveOnIndex={false}
-        style={Object {}}
-        to={
-          Object {
-            "pathname": "/orgId/projectId/",
-            "query": Object {
-              "query": "logger:javascript logger",
-            },
-          }
-        }
-      >
-        javascript logger
-      </Link>
-    </Box>
-  </GroupExtraCommentsAndLogger>
-  <div
-    className="event-annotation"
-    dangerouslySetInnerHTML={
-      Object {
-        "__html": "annotation1",
-      }
-    }
-    key="0"
-  />
-  <div
-    className="event-annotation"
-    dangerouslySetInnerHTML={
-      Object {
-        "__html": "annotation2",
-      }
+<EventOrGroupExtraDetails
+  annotations={
+    Array [
+      "annotation1",
+      "annotation2",
+    ]
+  }
+  assignedTo={
+    Object {
+      "name": "Assignee Name",
     }
-    key="1"
-  />
-  <div>
-    <span
-      key="4"
-    >
-      <span
-        key="0"
-      >
-        Assigned to 
-      </span>
-      <span
-        key="2"
-      >
-        Assignee Name
-      </span>
-    </span>
-  </div>
-</GroupExtra>
+  }
+  firstSeen="2017-07-01T02:06:02Z"
+  groupId="groupId"
+  lastSeen="2017-07-25T22:56:12Z"
+  logger="javascript logger"
+  numComments={14}
+  orgId="orgId"
+  projectId="projectId"
+  shortId="shortId"
+  showAssignee={true}
+  showStatus={true}
+  status="resolved"
+/>
 `;
 
 exports[`EventOrGroupExtraDetails renders last and first seen 1`] = `
-<GroupExtra
-  align="center"
->
-  <Times>
-    <div
-      className="css-77t6iv"
-    >
-      <GroupTimeIcon
-        src="icon-clock-sm"
-      />
-      <TimeSince
-        date="2017-07-25T22:56:12Z"
-        suffix="ago"
-      />
-      <span
-        className="hidden-xs hidden-sm"
-      >
-         — 
-      </span>
-      <TimeSince
-        className="hidden-xs hidden-sm"
-        date="2017-07-01T02:06:02Z"
-        suffix="old"
-      />
-    </div>
-  </Times>
-  <GroupExtraCommentsAndLogger />
-</GroupExtra>
+<EventOrGroupExtraDetails
+  firstSeen="2017-07-01T02:06:02Z"
+  groupId="groupId"
+  lastSeen="2017-07-25T22:56:12Z"
+  orgId="orgId"
+  projectId="projectId"
+/>
 `;
 
 exports[`EventOrGroupExtraDetails renders only first seen 1`] = `
-<GroupExtra
-  align="center"
->
-  <Times>
-    <div
-      className="css-77t6iv"
-    >
-      <TimeSince
-        className="hidden-xs hidden-sm"
-        date="2017-07-01T02:06:02Z"
-        suffix="old"
-      />
-    </div>
-  </Times>
-  <GroupExtraCommentsAndLogger />
-</GroupExtra>
+<EventOrGroupExtraDetails
+  firstSeen="2017-07-01T02:06:02Z"
+  groupId="groupId"
+  orgId="orgId"
+  projectId="projectId"
+/>
 `;
 
 exports[`EventOrGroupExtraDetails renders only last seen 1`] = `
-<GroupExtra
-  align="center"
->
-  <Times>
-    <div
-      className="css-77t6iv"
-    >
-      <GroupTimeIcon
-        src="icon-clock-sm"
-      />
-      <TimeSince
-        date="2017-07-25T22:56:12Z"
-        suffix="ago"
-      />
-    </div>
-  </Times>
-  <GroupExtraCommentsAndLogger />
-</GroupExtra>
+<EventOrGroupExtraDetails
+  groupId="groupId"
+  lastSeen="2017-07-25T22:56:12Z"
+  orgId="orgId"
+  projectId="projectId"
+/>
 `;
diff --git a/tests/js/spec/components/__snapshots__/streamGroup.spec.jsx.snap b/tests/js/spec/components/__snapshots__/streamGroup.spec.jsx.snap
index 8e08fdf20a..8c8a87615f 100644
--- a/tests/js/spec/components/__snapshots__/streamGroup.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/streamGroup.spec.jsx.snap
@@ -66,19 +66,16 @@ exports[`StreamGroup renders with anchors 1`] = `
         }
       }
     />
-    <EventOrGroupExtraDetails
+    <withRouter(EventOrGroupExtraDetails)
       assignedTo={null}
       group={true}
-      groupId="1L"
       id="1337"
-      orgId="orgId"
       project={
         Object {
           "id": "13",
           "slug": "test",
         }
       }
-      projectId="test"
       stats={
         Object {
           "24h": Array [
diff --git a/tests/js/spec/views/groupDetails/__snapshots__/groupSimilar.spec.jsx.snap b/tests/js/spec/views/groupDetails/__snapshots__/groupSimilar.spec.jsx.snap
index 172704ae43..74956a3aea 100644
--- a/tests/js/spec/views/groupDetails/__snapshots__/groupSimilar.spec.jsx.snap
+++ b/tests/js/spec/views/groupDetails/__snapshots__/groupSimilar.spec.jsx.snap
@@ -585,8 +585,6 @@ exports[`Issues Similar View renders with mocked data 1`] = `
               }
             }
             key="271"
-            orgId="org-slug"
-            projectId="project-slug"
             score={
               Object {
                 "exception:stacktrace:pairs": 0.875,
@@ -752,7 +750,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                       ],
                                       Array [
                                         Object {
-                                          "pathname": "/org-slug/project-slug/",
+                                          "pathname": "/org-slug/project-slug/issues",
                                           "query": Object {
                                             "query": "logger:javascript",
                                           },
@@ -766,7 +764,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                       ],
                                       Array [
                                         Object {
-                                          "pathname": "/org-slug/project-slug/",
+                                          "pathname": "/org-slug/project-slug/issues",
                                           "query": Object {
                                             "query": "logger:javascript",
                                           },
@@ -928,7 +926,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                     ],
                                                     Array [
                                                       Object {
-                                                        "pathname": "/org-slug/project-slug/",
+                                                        "pathname": "/org-slug/project-slug/issues",
                                                         "query": Object {
                                                           "query": "logger:javascript",
                                                         },
@@ -942,7 +940,7 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                                     ],
                                                     Array [
                                                       Object {
-                                                        "pathname": "/org-slug/project-slug/",
+                                                        "pathname": "/org-slug/project-slug/issues",
                                                         "query": Object {
                                                           "query": "logger:javascript",
                                                         },
@@ -1031,14 +1029,13 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                               </div>
                             </EventOrGroupHeader>
                           </withRouter(EventOrGroupHeader)>
-                          <EventOrGroupExtraDetails
+                          <withRouter(EventOrGroupExtraDetails)
                             annotations={Array []}
                             assignedTo={null}
                             count="90"
                             culprit="length(app/views/groupSimilar/groupSimilarView)"
                             firstSeen="2017-07-10T18:32:43Z"
                             group={true}
-                            groupId="271"
                             hasSeen={false}
                             id="271"
                             isBookmarked={false}
@@ -1054,7 +1051,6 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                               }
                             }
                             numComments={0}
-                            orgId="org-slug"
                             permalink="http://localhost:8000/sentry/internal/issues/271/"
                             project={
                               Object {
@@ -1062,11 +1058,9 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                 "slug": "internal",
                               }
                             }
-                            projectId="project-slug"
                             shareId="312e323731"
                             shortId="INTERNAL-4G"
                             showAssignee={true}
-                            showStatus={true}
                             status="resolved"
                             statusDetails={Object {}}
                             subscriptionDetails={null}
@@ -1074,119 +1068,241 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                             type="error"
                             userCount={3}
                           >
-                            <GroupExtra
-                              align="center"
+                            <EventOrGroupExtraDetails
+                              annotations={Array []}
+                              assignedTo={null}
+                              count="90"
+                              culprit="length(app/views/groupSimilar/groupSimilarView)"
+                              firstSeen="2017-07-10T18:32:43Z"
+                              group={true}
+                              hasSeen={false}
+                              id="271"
+                              isBookmarked={false}
+                              isPublic={false}
+                              isSubscribed={true}
+                              lastSeen={null}
+                              level="error"
+                              location={
+                                Object {
+                                  "query": Object {},
+                                }
+                              }
+                              logger="javascript"
+                              metadata={
+                                Object {
+                                  "type": "TypeError",
+                                  "value": "Cannot read property 'length' of undefined",
+                                }
+                              }
+                              numComments={0}
+                              params={
+                                Object {
+                                  "groupId": "group-id",
+                                  "orgId": "org-slug",
+                                  "projectId": "project-slug",
+                                }
+                              }
+                              permalink="http://localhost:8000/sentry/internal/issues/271/"
+                              project={
+                                Object {
+                                  "name": "Internal",
+                                  "slug": "internal",
+                                }
+                              }
+                              router={
+                                Object {
+                                  "createHref": [MockFunction] {
+                                    "calls": Array [
+                                      Array [
+                                        Object {
+                                          "pathname": "/org-slug/project-slug/issues/271/",
+                                          "search": "",
+                                        },
+                                      ],
+                                      Array [
+                                        Object {
+                                          "pathname": "/org-slug/project-slug/issues",
+                                          "query": Object {
+                                            "query": "logger:javascript",
+                                          },
+                                        },
+                                      ],
+                                      Array [
+                                        Object {
+                                          "pathname": "/org-slug/project-slug/issues/271/",
+                                          "search": "",
+                                        },
+                                      ],
+                                      Array [
+                                        Object {
+                                          "pathname": "/org-slug/project-slug/issues",
+                                          "query": Object {
+                                            "query": "logger:javascript",
+                                          },
+                                        },
+                                      ],
+                                    ],
+                                    "results": Array [
+                                      Object {
+                                        "isThrow": false,
+                                        "value": undefined,
+                                      },
+                                      Object {
+                                        "isThrow": false,
+                                        "value": undefined,
+                                      },
+                                      Object {
+                                        "isThrow": false,
+                                        "value": undefined,
+                                      },
+                                      Object {
+                                        "isThrow": false,
+                                        "value": undefined,
+                                      },
+                                    ],
+                                  },
+                                  "go": [MockFunction],
+                                  "goBack": [MockFunction],
+                                  "goForward": [MockFunction],
+                                  "isActive": [MockFunction],
+                                  "listen": [MockFunction],
+                                  "location": Object {
+                                    "query": Object {},
+                                  },
+                                  "params": Object {
+                                    "groupId": "group-id",
+                                    "orgId": "org-slug",
+                                    "projectId": "project-slug",
+                                  },
+                                  "push": [MockFunction],
+                                  "replace": [MockFunction],
+                                  "setRouteLeaveHook": [MockFunction],
+                                }
+                              }
+                              shareId="312e323731"
+                              shortId="INTERNAL-4G"
+                              showAssignee={true}
+                              status="resolved"
+                              statusDetails={Object {}}
+                              subscriptionDetails={null}
+                              title="TypeError: Cannot read property 'length' of undefined"
+                              type="error"
+                              userCount={3}
                             >
-                              <Base
+                              <GroupExtra
                                 align="center"
-                                className="css-1iq5qji-GroupExtra eec9orn0"
                               >
-                                <div
+                                <Base
+                                  align="center"
                                   className="css-1iq5qji-GroupExtra eec9orn0"
-                                  is={null}
                                 >
-                                  <GroupShortId
-                                    shortId="INTERNAL-4G"
+                                  <div
+                                    className="css-1iq5qji-GroupExtra eec9orn0"
+                                    is={null}
                                   >
-                                    <ShortId
-                                      className="css-yd3bt1-GroupShortId eec9orn4"
+                                    <GroupShortId
                                       shortId="INTERNAL-4G"
                                     >
-                                      <StyledShortId
+                                      <ShortId
                                         className="css-yd3bt1-GroupShortId eec9orn4"
-                                        onClick={[Function]}
                                         shortId="INTERNAL-4G"
                                       >
-                                        <div
-                                          className="eec9orn4 css-77itmv-StyledShortId-GroupShortId ebuncw00"
+                                        <StyledShortId
+                                          className="css-yd3bt1-GroupShortId eec9orn4"
                                           onClick={[Function]}
+                                          shortId="INTERNAL-4G"
                                         >
-                                          <AutoSelectText>
-                                            <div
-                                              className="auto-select-text"
-                                              onClick={[Function]}
-                                            >
-                                              <span>
-                                                INTERNAL-4G
-                                              </span>
-                                            </div>
-                                          </AutoSelectText>
-                                        </div>
-                                      </StyledShortId>
-                                    </ShortId>
-                                  </GroupShortId>
-                                  <Times>
-                                    <div
-                                      className="css-139skj2-Times eec9orn3"
-                                    >
+                                          <div
+                                            className="eec9orn4 css-77itmv-StyledShortId-GroupShortId ebuncw00"
+                                            onClick={[Function]}
+                                          >
+                                            <AutoSelectText>
+                                              <div
+                                                className="auto-select-text"
+                                                onClick={[Function]}
+                                              >
+                                                <span>
+                                                  INTERNAL-4G
+                                                </span>
+                                              </div>
+                                            </AutoSelectText>
+                                          </div>
+                                        </StyledShortId>
+                                      </ShortId>
+                                    </GroupShortId>
+                                    <Times>
                                       <div
-                                        className="css-77t6iv"
+                                        className="css-139skj2-Times eec9orn3"
                                       >
-                                        <TimeSince
-                                          className="hidden-xs hidden-sm"
-                                          date="2017-07-10T18:32:43Z"
-                                          suffix="old"
+                                        <div
+                                          className="css-77t6iv"
                                         >
-                                          <time
+                                          <TimeSince
                                             className="hidden-xs hidden-sm"
-                                            dateTime="2017-07-10T18:32:43.000Z"
-                                            title="July 10, 2017 6:32 PM UTC"
+                                            date="2017-07-10T18:32:43Z"
+                                            suffix="old"
                                           >
-                                            3 months old
-                                          </time>
-                                        </TimeSince>
+                                            <time
+                                              className="hidden-xs hidden-sm"
+                                              dateTime="2017-07-10T18:32:43.000Z"
+                                              title="July 10, 2017 6:32 PM UTC"
+                                            >
+                                              3 months old
+                                            </time>
+                                          </TimeSince>
+                                        </div>
                                       </div>
-                                    </div>
-                                  </Times>
-                                  <GroupExtraCommentsAndLogger>
-                                    <Base
-                                      className="css-1ycmuq8-GroupExtraCommentsAndLogger eec9orn1"
-                                    >
-                                      <div
+                                    </Times>
+                                    <GroupExtraCommentsAndLogger>
+                                      <Base
                                         className="css-1ycmuq8-GroupExtraCommentsAndLogger eec9orn1"
-                                        is={null}
                                       >
-                                        <Box
-                                          className="event-annotation"
-                                          mr={2}
+                                        <div
+                                          className="css-1ycmuq8-GroupExtraCommentsAndLogger eec9orn1"
+                                          is={null}
                                         >
-                                          <Base
-                                            className="event-annotation css-6htue9"
+                                          <Box
+                                            className="event-annotation"
                                             mr={2}
                                           >
-                                            <div
+                                            <Base
                                               className="event-annotation css-6htue9"
-                                              is={null}
+                                              mr={2}
                                             >
-                                              <Link
-                                                onlyActiveOnIndex={false}
-                                                style={Object {}}
-                                                to={
-                                                  Object {
-                                                    "pathname": "/org-slug/project-slug/",
-                                                    "query": Object {
-                                                      "query": "logger:javascript",
-                                                    },
-                                                  }
-                                                }
+                                              <div
+                                                className="event-annotation css-6htue9"
+                                                is={null}
                                               >
-                                                <a
-                                                  onClick={[Function]}
+                                                <Link
+                                                  onlyActiveOnIndex={false}
                                                   style={Object {}}
+                                                  to={
+                                                    Object {
+                                                      "pathname": "/org-slug/project-slug/issues",
+                                                      "query": Object {
+                                                        "query": "logger:javascript",
+                                                      },
+                                                    }
+                                                  }
                                                 >
-                                                  javascript
-                                                </a>
-                                              </Link>
-                                            </div>
-                                          </Base>
-                                        </Box>
-                                      </div>
-                                    </Base>
-                                  </GroupExtraCommentsAndLogger>
-                                </div>
-                              </Base>
-                            </GroupExtra>
-                          </EventOrGroupExtraDetails>
+                                                  <a
+                                                    onClick={[Function]}
+                                                    style={Object {}}
+                                                  >
+                                                    javascript
+                                                  </a>
+                                                </Link>
+                                              </div>
+                                            </Base>
+                                          </Box>
+                                        </div>
+                                      </Base>
+                                    </GroupExtraCommentsAndLogger>
+                                  </div>
+                                </Base>
+                              </GroupExtra>
+                            </EventOrGroupExtraDetails>
+                          </withRouter(EventOrGroupExtraDetails)>
                         </div>
                       </div>
                     </FlowLayout>
