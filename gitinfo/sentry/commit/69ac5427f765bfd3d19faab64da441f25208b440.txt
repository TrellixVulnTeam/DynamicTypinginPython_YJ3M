commit 69ac5427f765bfd3d19faab64da441f25208b440
Author: ted kaemming <ted@kaemming.com>
Date:   Wed Jan 25 18:17:10 2017 -0800

    Fix encoding issue with email subject rendering. (#4829)
    
    This was naively truncating the bytestring, which means it could be
    truncating on a multi-byte character. `truncatechars` will handle this
    correctly, as long as it's given a `unicode` object instead of a `str`.

diff --git a/src/sentry/models/event.py b/src/sentry/models/event.py
index 2125bf7980..0c16897bdc 100644
--- a/src/sentry/models/event.py
+++ b/src/sentry/models/event.py
@@ -274,9 +274,9 @@ class Event(Model):
         return truncatechars(
             template.safe_substitute(
                 EventSubjectTemplateData(self),
-            ).encode('utf-8'),
+            ),
             128,
-        )
+        ).encode('utf-8')
 
 
 class EventSubjectTemplate(string.Template):
