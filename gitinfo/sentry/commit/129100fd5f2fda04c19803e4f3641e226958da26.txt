commit 129100fd5f2fda04c19803e4f3641e226958da26
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jun 22 16:39:46 2015 -0700

    Add average EPM to org stats

diff --git a/src/sentry/templates/sentry/organization-stats.html b/src/sentry/templates/sentry/organization-stats.html
index c8433c1b88..fd9c7c7222 100644
--- a/src/sentry/templates/sentry/organization-stats.html
+++ b/src/sentry/templates/sentry/organization-stats.html
@@ -10,7 +10,10 @@
 
 {% block inner %}
   <div class="page-header">
-    <h2>Stats</h2>
+    <h2>
+      Stats
+      <small id="rate" class="pull-right"></small>
+    </h2>
   </div>
 
   <p>The chart below reflects events the system has received across your entire organization. Events are broken down into two categories: Accepted and Rejected. Rejected events are entries that the system threw away due to quotas being hit.</p>
@@ -146,6 +149,7 @@
       var oRejected = 0;
       var sReceived = {};
       var sRejected = {};
+      var aReceived = [0, 0]; // received, points
       $.each(rawOrgData.received, function(idx, point){
         var dReceived = point[1];
         var dRejected = rawOrgData.rejected[idx][1];
@@ -159,10 +163,15 @@
         }
         oReceived += dReceived;
         oRejected += dRejected;
+        if (dReceived > 0) {
+          aReceived[0] += dReceived;
+          aReceived[1] += 1;
+        }
       });
       orgTotal.received = oReceived;
       orgTotal.rejected = oRejected;
       orgTotal.accepted = oReceived - oRejected;
+      orgTotal.avgRate = parseInt((aReceived[0] / aReceived[1]) / 60, 10);
 
       stats.rejected = $.map(sRejected, function(value, ts) { return [[ts, value || null]]; });
       stats.accepted = $.map(sReceived, function(value, ts) {
@@ -299,6 +308,8 @@
       $(window).resize(function(){
         $.plot($sparkline, points, options);
       });
+
+      $('#rate').text(orgTotal.avgRate + ' avg EPM');
     }
   });
   </script>
