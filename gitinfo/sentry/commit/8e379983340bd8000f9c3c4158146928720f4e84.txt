commit 8e379983340bd8000f9c3c4158146928720f4e84
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Sep 30 14:10:07 2010 -0700

    Move url handling code into urlopen helper

diff --git a/sentry/client/base.py b/sentry/client/base.py
index f842890e40..4ada6b06de 100644
--- a/sentry/client/base.py
+++ b/sentry/client/base.py
@@ -6,7 +6,6 @@ except ImportError:
 import logging
 import sys
 import traceback
-import urllib
 import urllib2
 import warnings
 
@@ -16,7 +15,7 @@ from django.utils.encoding import smart_unicode
 from django.views.debug import ExceptionReporter
 
 from sentry import settings
-from sentry.helpers import construct_checksum, varmap, transform, get_installed_apps
+from sentry.helpers import construct_checksum, varmap, transform, get_installed_apps, urlread
 
 logger = logging.getLogger('sentry.errors')
 
@@ -51,10 +50,8 @@ class SentryClient(object):
                     'data': base64.b64encode(pickle.dumps(kwargs).encode('zlib')),
                     'key': settings.KEY,
                 }
-                req = urllib2.Request(url, urllib.urlencode(data))
-
                 try:
-                    response = urllib2.urlopen(req, None, settings.REMOTE_TIMEOUT).read()
+                    response = urlread(url, GET=data, timeout=settings.REMOTE_TIMEOUT)
                 except urllib2.URLError, e:
                     logger.error('Unable to reach Sentry log server: %s' % (e,), exc_info=sys.exc_info(), extra={'remote_url': url})
                     logger.log(kwargs.pop('level', None) or logging.ERROR, kwargs.pop('message', None))
diff --git a/sentry/helpers.py b/sentry/helpers.py
index c80c3ca9c5..b97d5c9262 100644
--- a/sentry/helpers.py
+++ b/sentry/helpers.py
@@ -1,4 +1,6 @@
 import logging
+import urllib
+import urllib2
 
 import django
 from django.conf import settings
@@ -135,4 +137,9 @@ class cached_property(object):
         if value is _missing:
             value = self.func(obj)
             obj.__dict__[self.__name__] = value
-        return value
\ No newline at end of file
+        return value
+
+def urlread(url, GET={}, POST={}, timeout=None):
+    req = urllib2.Request(url, urllib.urlencode(GET))
+    response = urllib2.urlopen(req, urllib.urlencode(POST), timeout).read()
+    return response
\ No newline at end of file
