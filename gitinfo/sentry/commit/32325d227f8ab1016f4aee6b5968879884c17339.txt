commit 32325d227f8ab1016f4aee6b5968879884c17339
Author: Eric Feng <eric@getsentry.com>
Date:   Mon Feb 29 18:20:32 2016 -0800

    improving syntax for required onboarding task check

diff --git a/src/sentry/migrations/0240_fill_onboarding_option.py b/src/sentry/migrations/0240_fill_onboarding_option.py
index 908a0bc0ff..3ef01d4f31 100644
--- a/src/sentry/migrations/0240_fill_onboarding_option.py
+++ b/src/sentry/migrations/0240_fill_onboarding_option.py
@@ -19,8 +19,8 @@ class Migration(DataMigration):
         queryset = Organization.objects.all()
 
         for organization in RangeQuerySetWrapperWithProgressBar(queryset):
-            completed = list(OrganizationOnboardingTask.objects.filter(Q(organization=organization) & (Q(status=OnboardingTaskStatus.COMPLETE) | Q(status=OnboardingTaskStatus.SKIPPED))).values_list('task', flat=True))
-            if set(completed).issuperset(set(OnboardingTask.REQUIRED_ONBOARDING_TASKS)):
+            completed = set(OrganizationOnboardingTask.objects.filter(Q(organization=organization) & (Q(status=OnboardingTaskStatus.COMPLETE) | Q(status=OnboardingTaskStatus.SKIPPED))).values_list('task', flat=True))
+            if completed >= OnboardingTask.REQUIRED_ONBOARDING_TASKS:
                 try:
                     with transaction.atomic():
                         OrganizationOption.objects.create(
diff --git a/src/sentry/models/organizationonboardingtask.py b/src/sentry/models/organizationonboardingtask.py
index 722ea65de2..3f9d054847 100644
--- a/src/sentry/models/organizationonboardingtask.py
+++ b/src/sentry/models/organizationonboardingtask.py
@@ -31,7 +31,7 @@ class OnboardingTask(object):
     ISSUE_TRACKER = 9
     NOTIFICATION_SERVICE = 10
 
-    REQUIRED_ONBOARDING_TASKS = [1, 2, 3, 4, 5, 6, 7, 9, 10]
+    REQUIRED_ONBOARDING_TASKS = frozenset([1, 2, 3, 4, 5, 6, 7, 9, 10])
 
 
 class OnboardingTaskStatus(object):
diff --git a/src/sentry/receivers/onboarding.py b/src/sentry/receivers/onboarding.py
index 5608c7f41b..9f51912aea 100644
--- a/src/sentry/receivers/onboarding.py
+++ b/src/sentry/receivers/onboarding.py
@@ -28,8 +28,8 @@ def check_for_onboarding_complete(organization):
     if OrganizationOption.objects.filter(organization=organization, key="onboarding:complete").exists():
         return
 
-    completed = list(OrganizationOnboardingTask.objects.filter(Q(organization=organization) & (Q(status=OnboardingTaskStatus.COMPLETE) | Q(status=OnboardingTaskStatus.SKIPPED))).values_list('task', flat=True))
-    if set(completed).issuperset(set(OnboardingTask.REQUIRED_ONBOARDING_TASKS)):
+    completed = set(OrganizationOnboardingTask.objects.filter(Q(organization=organization) & (Q(status=OnboardingTaskStatus.COMPLETE) | Q(status=OnboardingTaskStatus.SKIPPED))).values_list('task', flat=True))
+    if completed >= OnboardingTask.REQUIRED_ONBOARDING_TASKS:
         try:
             with transaction.atomic():
                 OrganizationOption.objects.create(
