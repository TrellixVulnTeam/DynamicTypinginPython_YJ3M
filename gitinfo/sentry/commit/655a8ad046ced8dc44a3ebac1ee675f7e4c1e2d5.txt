commit 655a8ad046ced8dc44a3ebac1ee675f7e4c1e2d5
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Feb 13 12:21:39 2013 -0800

    Add project filter if no queryset specified

diff --git a/src/sentry/manager.py b/src/sentry/manager.py
index 259706b805..024e61a1e3 100644
--- a/src/sentry/manager.py
+++ b/src/sentry/manager.py
@@ -691,7 +691,7 @@ class GroupManager(BaseManager, ChartMixin):
         from sentry.models import GroupCountByMinute
         mcbm_tbl = GroupCountByMinute._meta.db_table
         if queryset is None:
-            queryset = self
+            queryset = self.filter(project__in=project_ids)
         else:
             queryset = queryset._clone()
             queryset.query.select_related = False
@@ -723,7 +723,6 @@ class GroupManager(BaseManager, ChartMixin):
         # Ensure we remove any ordering clause
         after_group = after_group.split(' ORDER BY ')[0]
 
-        # TODO: adding project_id to sort clause on left join helps query in many cases
         query = """
         SELECT (SUM(%(mcbm_tbl)s.times_seen) * (%(norm)f / (%(epoch_clause)s / 60)) + 1.0) / (COALESCE(z.rate, 0) + 1.0) as sort_value,
                (COALESCE(z.rate, 0) + 1.0) as prev_rate,
