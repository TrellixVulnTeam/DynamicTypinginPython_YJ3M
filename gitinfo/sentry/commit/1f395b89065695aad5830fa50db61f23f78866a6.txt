commit 1f395b89065695aad5830fa50db61f23f78866a6
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Jul 15 08:43:29 2012 -0700

    Correct tests for new project creation flow

diff --git a/tests/sentry/web/frontend/tests.py b/tests/sentry/web/frontend/tests.py
index 154428dd3d..04ac41c27e 100644
--- a/tests/sentry/web/frontend/tests.py
+++ b/tests/sentry/web/frontend/tests.py
@@ -40,10 +40,11 @@ class SentryViewsTest(TestCase):
         self.assertTemplateNotUsed(resp, 'sentry/login.html')
 
     def test_dashboard(self):
+        # no projects redirects them to create new project
         self.client.login(username='admin', password='admin')
         resp = self.client.get(reverse('sentry'), follow=True)
         self.assertEquals(resp.status_code, 200)
-        self.assertTemplateUsed(resp, 'sentry/dashboard.html')
+        self.assertTemplateUsed(resp, 'sentry/projects/new.html')
 
         # requires at least one project to show dashboard
         Project.objects.create(name='foo', owner=self.user)
@@ -226,7 +227,7 @@ class ViewPermissionTest(TestCase):
         self._assertPerm(path, template, 'nobody', False)
         self._assertPerm(path, template, None, False)
 
-        with self.Settings(SENTRY_ALLOW_PROJECT_CREATION=True):
+        with self.Settings(SENTRY_ALLOW_PROJECT_CREATION=True, SENTRY_ALLOW_TEAM_CREATION=True):
             self._assertPerm(path, template, 'admin')
             self._assertPerm(path, template, 'nobody')
             self._assertPerm(path, template, None, False)
