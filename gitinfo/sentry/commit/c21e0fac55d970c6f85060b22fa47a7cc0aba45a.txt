commit c21e0fac55d970c6f85060b22fa47a7cc0aba45a
Author: David Cramer <dcramer@gmail.com>
Date:   Wed May 2 16:39:53 2012 -0700

    Project is **not** required in the store endpoint

diff --git a/sentry/web/api.py b/sentry/web/api.py
index 43c135fe56..35b91647a5 100644
--- a/sentry/web/api.py
+++ b/sentry/web/api.py
@@ -102,14 +102,18 @@ def store(request, project_id=None):
                 project_ = project_from_auth_vars(auth_vars, data,
                     require_signature=bool(not origin))
 
-                if project_ != project:
+                if not project:
+                    project = project_
+                elif project_ != project:
                     raise APIError('Project ID mismatch')
 
             elif request.user.is_authenticated() and is_same_domain(request.build_absolute_uri(), referrer):
                 # authenticated users are simply trusted to provide the right id
                 project_ = project_from_id(request)
 
-                if project_ != project:
+                if not project:
+                    project = project_
+                elif project_ != project:
                     raise APIError('Project ID mismatch')
 
             else:
