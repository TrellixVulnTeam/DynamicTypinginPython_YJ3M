commit a908c1fe23c3936d45f5c0c9f5e10f017286493f
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Apr 26 17:05:02 2011 -0700

    If there are no frames we shouldn't fail trying to pull the last frame (refs #115)

diff --git a/sentry/reporter.py b/sentry/reporter.py
index 3ab848b206..3606260333 100644
--- a/sentry/reporter.py
+++ b/sentry/reporter.py
@@ -70,7 +70,7 @@ class ImprovedExceptionReporter(ExceptionReporter):
             'exception_value': smart_unicode(self.exc_value, errors='replace'),
             'unicode_hint': unicode_hint,
             'frames': frames,
-            'lastframe': frames[-1],
+            'lastframe': frames and frames[-1] or None,
             'request': self.request,
             'template_info': self.template_info,
             'template_does_not_exist': self.template_does_not_exist,
@@ -128,10 +128,12 @@ TECHNICAL_500_TEMPLATE = """
       <th>Exception Value:</th>
       <td><pre>{{ exception_value|escape }}</pre></td>
     </tr>
+    {% if lastframe %}
     <tr>
       <th>Exception Location:</th>
       <td>{{ lastframe.filename|escape }} in {{ lastframe.function|escape }}, line {{ lastframe.lineno }}</td>
     </tr>
+    {% endif %}
   </table>
 </div>
 {% if unicode_hint %}
