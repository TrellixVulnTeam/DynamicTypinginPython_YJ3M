commit 6d5bb341308840977f3b821fc283a48e91f9d389
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Aug 18 14:01:18 2015 -0700

    Filter out results which are auto resolved

diff --git a/src/sentry/api/endpoints/project_group_index.py b/src/sentry/api/endpoints/project_group_index.py
index 70878e796f..b926108814 100644
--- a/src/sentry/api/endpoints/project_group_index.py
+++ b/src/sentry/api/endpoints/project_group_index.py
@@ -12,7 +12,7 @@ from sentry.api.bases.project import ProjectEndpoint, ProjectEventPermission
 from sentry.api.serializers import serialize
 from sentry.api.serializers.models.group import StreamGroupSerializer
 from sentry.constants import (
-    DEFAULT_SORT_OPTION, STATUS_CHOICES
+    DEFAULT_SORT_OPTION, STATUS_CHOICES, STATUS_UNRESOLVED
 )
 from sentry.db.models.query import create_or_update
 from sentry.models import (
@@ -145,10 +145,17 @@ class ProjectGroupIndexEndpoint(ProjectEndpoint):
 
         cursor_result = search.query(**query_kwargs)
 
-        context = list(cursor_result)
+        results = list(cursor_result)
+
+        # HACK: remove auto resolved entries
+        if query_kwargs.get('status') == STATUS_UNRESOLVED:
+            results = [
+                r for r in results
+                if not r.is_resolved()
+            ]
 
         response = Response(serialize(
-            context, request.user, StreamGroupSerializer(
+            results, request.user, StreamGroupSerializer(
                 stats_period=stats_period
             )
         ))
diff --git a/tests/sentry/api/endpoints/test_project_group_index.py b/tests/sentry/api/endpoints/test_project_group_index.py
index b6d55099b3..870fa77444 100644
--- a/tests/sentry/api/endpoints/test_project_group_index.py
+++ b/tests/sentry/api/endpoints/test_project_group_index.py
@@ -120,6 +120,29 @@ class GroupListTest(APITestCase):
         response = self.client.get(url + '?statsPeriod=48h', format='json')
         assert response.status_code == 400
 
+    def test_auto_resolved(self):
+        project = self.project
+        project.update_option('sentry:resolve_age', 1)
+        now = timezone.now()
+        group1 = self.create_group(
+            checksum='a' * 32,
+            last_seen=now - timedelta(days=1),
+        )
+        group2 = self.create_group(
+            checksum='b' * 32,
+            last_seen=now,
+        )
+
+        self.login_as(user=self.user)
+        url = reverse('sentry-api-0-project-group-index', kwargs={
+            'organization_slug': self.project.organization.slug,
+            'project_slug': self.project.slug,
+        })
+        response = self.client.get(url, format='json')
+        assert response.status_code == 200
+        assert len(response.data) == 1
+        assert response.data[0]['id'] == str(group2.id)
+
 
 class GroupUpdateTest(APITestCase):
     def test_global_resolve(self):
