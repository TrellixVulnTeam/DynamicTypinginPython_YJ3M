commit 1b763f72e1c10fb81e962557896bf90c597fc264
Author: Mark Story <mark@sentry.io>
Date:   Wed Jun 10 17:19:37 2020 -0400

    ref(ui) Convert a few small use icons to svg icons (#19281)
    
    Update the ellipsis, play, pause and more icons to the new svg based
    icons.

diff --git a/src/sentry/static/sentry/app/components/issues/compactIssue.jsx b/src/sentry/static/sentry/app/components/issues/compactIssue.jsx
index e2127ea70b..4de2926e9a 100644
--- a/src/sentry/static/sentry/app/components/issues/compactIssue.jsx
+++ b/src/sentry/static/sentry/app/components/issues/compactIssue.jsx
@@ -6,7 +6,7 @@ import styled from '@emotion/styled';
 
 import {PanelItem} from 'app/components/panels';
 import {addLoadingMessage, clearIndicators} from 'app/actionCreators/indicator';
-import {IconChat} from 'app/icons';
+import {IconChat, IconEllipsis} from 'app/icons';
 import {t} from 'app/locale';
 import DropdownLink from 'app/components/dropdownLink';
 import ErrorLevel from 'app/components/events/errorLevel';
@@ -205,8 +205,6 @@ const CompactIssue = createReactClass({
       className += ' with-graph';
     }
 
-    const title = <span className="icon-more" />;
-
     return (
       <PanelItem
         className={className}
@@ -235,7 +233,7 @@ const CompactIssue = createReactClass({
               topLevelClasses="more-menu"
               className="more-menu-toggle"
               caret={false}
-              title={title}
+              title={<IconEllipsis size="xs" />}
             >
               <li>
                 <a
diff --git a/src/sentry/static/sentry/app/components/smartSearchBar/index.tsx b/src/sentry/static/sentry/app/components/smartSearchBar/index.tsx
index e7208294a8..e19c207421 100644
--- a/src/sentry/static/sentry/app/components/smartSearchBar/index.tsx
+++ b/src/sentry/static/sentry/app/components/smartSearchBar/index.tsx
@@ -19,6 +19,7 @@ import ButtonBar from 'app/components/buttonBar';
 import CreateSavedSearchButton from 'app/views/issueList/createSavedSearchButton';
 import DropdownLink from 'app/components/dropdownLink';
 import InlineSvg from 'app/components/inlineSvg';
+import {IconEllipsis, IconSearch, IconClose} from 'app/icons';
 import MemberListStore from 'app/stores/memberListStore';
 import space from 'app/styles/space';
 import theme from 'app/utils/theme';
@@ -26,7 +27,6 @@ import withApi from 'app/utils/withApi';
 import withOrganization from 'app/utils/withOrganization';
 import {Client} from 'app/api';
 import {SavedSearch, LightWeightOrganization} from 'app/types';
-import {IconSearch, IconClose} from 'app/icons';
 import {
   fetchRecentSearches,
   pinSearch,
@@ -1162,9 +1162,8 @@ class SmartSearchBar extends React.Component<Props, State> {
                   }}
                   type="button"
                   aria-label={t('Show more')}
-                >
-                  <EllipsisIcon src="icon-ellipsis-filled" />
-                </EllipsisButton>
+                  icon={<VerticalEllipsisIcon size="xs" />}
+                />
               }
             >
               {hasPinnedSearch && (
@@ -1322,9 +1321,7 @@ const EllipsisButton = styled(InputButton)`
   margin: 6px 0 0 0;
 `;
 
-const EllipsisIcon = styled(InlineSvg)`
-  width: 12px;
-  height: 12px;
+const VerticalEllipsisIcon = styled(IconEllipsis)`
   transform: rotate(90deg);
 `;
 
diff --git a/src/sentry/static/sentry/app/icons/iconPlay.tsx b/src/sentry/static/sentry/app/icons/iconPlay.tsx
index 206405ac5f..7a425ba0e3 100644
--- a/src/sentry/static/sentry/app/icons/iconPlay.tsx
+++ b/src/sentry/static/sentry/app/icons/iconPlay.tsx
@@ -9,5 +9,6 @@ const IconPlay = React.forwardRef<SVGSVGElement, Props>((props: Props, ref) => (
     <path d="M2.17,15.48a.69.69,0,0,1-.37-.1.73.73,0,0,1-.38-.65V1.27A.73.73,0,0,1,1.8.62a.77.77,0,0,1,.75,0L14.2,7.35a.75.75,0,0,1,0,1.3L2.55,15.38A.75.75,0,0,1,2.17,15.48ZM2.92,2.57V13.43L12.33,8Z" />
   </SvgIcon>
 ));
+IconPlay.displayName = 'IconPlay';
 
 export {IconPlay};
diff --git a/src/sentry/static/sentry/app/views/issueList/actions.jsx b/src/sentry/static/sentry/app/views/issueList/actions.jsx
index 20d102a55c..58108cfa52 100644
--- a/src/sentry/static/sentry/app/views/issueList/actions.jsx
+++ b/src/sentry/static/sentry/app/views/issueList/actions.jsx
@@ -8,6 +8,7 @@ import styled from '@emotion/styled';
 
 import {addLoadingMessage, clearIndicators} from 'app/actionCreators/indicator';
 import {t, tct, tn} from 'app/locale';
+import {IconEllipsis, IconPause, IconPlay} from 'app/icons';
 import space from 'app/styles/space';
 import theme from 'app/utils/theme';
 import ActionLink from 'app/components/actions/actionLink';
@@ -453,7 +454,11 @@ const IssueListActions = createReactClass({
                 btnGroup
                 caret={false}
                 className="btn btn-sm btn-default action-more"
-                title={<span className="icon-ellipsis" />}
+                title={
+                  <IconPad>
+                    <IconEllipsis size="xs" />
+                  </IconPad>
+                }
               >
                 <MenuItem noAnchor>
                   <ActionLink
@@ -536,11 +541,9 @@ const IssueListActions = createReactClass({
                   className="btn btn-default btn-sm hidden-xs"
                   onClick={this.handleRealtimeChange}
                 >
-                  {realtimeActive ? (
-                    <span className="icon icon-pause" />
-                  ) : (
-                    <span className="icon icon-play" />
-                  )}
+                  <IconPad>
+                    {realtimeActive ? <IconPause size="xs" /> : <IconPlay size="xs" />}
+                  </IconPad>
                 </a>
               </Tooltip>
             </div>
@@ -730,6 +733,14 @@ const AssigneesLabel = styled('div')`
   margin-right: ${space(2)};
 `;
 
+// New icons are misaligned inside bootstrap buttons.
+// This is a shim that can be removed when buttons are upgraded
+// to styled components.
+const IconPad = styled('span')`
+  position: relative;
+  top: ${space(0.25)};
+`;
+
 export {IssueListActions};
 
 export default withApi(IssueListActions);
diff --git a/src/sentry/static/sentry/less/fonts.less b/src/sentry/static/sentry/less/fonts.less
index ef305f6648..9631da21c6 100644
--- a/src/sentry/static/sentry/less/fonts.less
+++ b/src/sentry/static/sentry/less/fonts.less
@@ -224,15 +224,9 @@
 .icon-calendar:before {
   content: '\e603';
 }
-.icon-play:before {
-  content: '\e61c';
-}
 .icon-bookmark-2:before {
   content: '\e620';
 }
-.icon-ellipsis:before {
-  content: '\e617';
-}
 .icon-tag:before {
   content: '\e618';
 }
@@ -269,9 +263,6 @@
 .icon-users:before {
   content: '\e612';
 }
-.icon-pause:before {
-  content: '\e614';
-}
 .icon-exclamation:before {
   content: '\e615';
 }
@@ -326,9 +317,6 @@
 .icon-open:before {
   content: '\e128';
 }
-.icon-more:before {
-  content: '\e901';
-}
 .icon-add:before {
   content: '\e624';
 }
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index b70590be9a..636ced0381 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -232,27 +232,12 @@ fieldset[disabled] .btn-danger.active,
     margin-left: -1px;
   }
 
-  .icon-ellipsis {
-    position: relative;
-    top: 2px;
-  }
-
   .icon-checkmark,
-  .icon-trash,
-  .icon-pause {
+  .icon-trash {
     position: relative;
     top: 1px;
     margin-right: -1px;
   }
-
-  .icon-play {
-    font-size: 14px;
-    position: relative;
-    top: 2px;
-    left: -2px;
-    width: 0;
-    margin-right: -6px;
-  }
 }
 
 /* Small button icons */
diff --git a/src/sentry/static/sentry/less/stream.less b/src/sentry/static/sentry/less/stream.less
index 4466306b35..58eee09351 100644
--- a/src/sentry/static/sentry/less/stream.less
+++ b/src/sentry/static/sentry/less/stream.less
@@ -604,13 +604,6 @@
       margin-right: 3px;
     }
 
-    .icon-more {
-      font-size: 24px;
-      width: 12px;
-      height: 24px;
-      text-align: center;
-    }
-
     .more-menu {
       .more-menu-toggle {
         color: @gray-light;
diff --git a/tests/js/spec/views/issueList/overview.polling.spec.jsx b/tests/js/spec/views/issueList/overview.polling.spec.jsx
index e14c62e08e..89c4bea738 100644
--- a/tests/js/spec/views/issueList/overview.polling.spec.jsx
+++ b/tests/js/spec/views/issueList/overview.polling.spec.jsx
@@ -158,10 +158,10 @@ describe('IssueList -> Polling', function() {
     );
 
     // Enable real time control
-    expect(wrapper.find('[data-test-id="realtime-control"] .icon-play')).toHaveLength(1);
+    expect(wrapper.find('[data-test-id="realtime-control"] IconPlay')).toHaveLength(1);
     wrapper.find('[data-test-id="realtime-control"]').simulate('click');
 
-    expect(wrapper.find('[data-test-id="realtime-control"] .icon-play')).toHaveLength(0);
+    expect(wrapper.find('[data-test-id="realtime-control"] IconPlay')).toHaveLength(0);
 
     // Each poll request gets delayed by additional 3s, up to max of 60s
     jest.advanceTimersByTime(3001);
@@ -171,7 +171,7 @@ describe('IssueList -> Polling', function() {
 
     // Pauses
     wrapper.find('[data-test-id="realtime-control"]').simulate('click');
-    expect(wrapper.find('[data-test-id="realtime-control"] .icon-play')).toHaveLength(1);
+    expect(wrapper.find('[data-test-id="realtime-control"] IconPlay')).toHaveLength(1);
 
     jest.advanceTimersByTime(12001);
     expect(pollRequest).toHaveBeenCalledTimes(2);
@@ -188,7 +188,7 @@ describe('IssueList -> Polling', function() {
 
     // Enable real time control
     wrapper.find('[data-test-id="realtime-control"]').simulate('click');
-    expect(wrapper.find('[data-test-id="realtime-control"] .icon-play')).toHaveLength(0);
+    expect(wrapper.find('[data-test-id="realtime-control"] IconPlay')).toHaveLength(0);
 
     // Each poll request gets delayed by additional 3s, up to max of 60s
     jest.advanceTimersByTime(3001);
@@ -207,9 +207,9 @@ describe('IssueList -> Polling', function() {
     await createWrapper();
 
     // Enable real time control
-    expect(wrapper.find('[data-test-id="realtime-control"] .icon-play')).toHaveLength(1);
+    expect(wrapper.find('[data-test-id="realtime-control"] IconPlay')).toHaveLength(1);
     wrapper.find('[data-test-id="realtime-control"]').simulate('click');
-    expect(wrapper.find('[data-test-id="realtime-control"] .icon-play')).toHaveLength(0);
+    expect(wrapper.find('[data-test-id="realtime-control"] IconPlay')).toHaveLength(0);
 
     // Each poll request gets delayed by additional 3s, up to max of 60s
     jest.advanceTimersByTime(3001);
@@ -229,7 +229,7 @@ describe('IssueList -> Polling', function() {
 
     // Enable real time control
     wrapper.find('[data-test-id="realtime-control"]').simulate('click');
-    expect(wrapper.find('[data-test-id="realtime-control"] .icon-play')).toHaveLength(0);
+    expect(wrapper.find('[data-test-id="realtime-control"] IconPlay')).toHaveLength(0);
 
     // Each poll request gets delayed by additional 3s, up to max of 60s
     jest.advanceTimersByTime(3001);
