commit 77c8fc5f0d2aebc6768b1c929718210906e5d42a
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Sep 10 23:36:16 2012 -0700

    Splitlines correctly in mail subject

diff --git a/src/sentry/models.py b/src/sentry/models.py
index e62967a3b1..39577f6423 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -363,7 +363,7 @@ class MessageBase(Model):
     def message_top(self):
         if self.culprit:
             return self.culprit
-        return truncatechars(self.message.split('\n')[0], 100)
+        return truncatechars(self.message.splitlines()[0], 100)
 
 
 class Group(MessageBase):
diff --git a/src/sentry/plugins/sentry_mail/models.py b/src/sentry/plugins/sentry_mail/models.py
index 58c3f4d4fa..775f73a8cb 100644
--- a/src/sentry/plugins/sentry_mail/models.py
+++ b/src/sentry/plugins/sentry_mail/models.py
@@ -125,7 +125,8 @@ class MailProcessor(NotificationPlugin):
                 continue
             interface_list.append((interface.get_title(), body))
 
-        subject = '[%s] %s: %s' % (project.name.encode('utf-8'), event.get_level_display().upper().encode('utf-8'), event.error().encode('utf-8').split('\n')[0])
+        subject = '[%s] %s: %s' % (project.name.encode('utf-8'), event.get_level_display().upper().encode('utf-8'),
+            event.error().encode('utf-8').splitlines()[0])
 
         link = '%s/%s/group/%d/' % (settings.URL_PREFIX, group.project.slug, group.id)
 
