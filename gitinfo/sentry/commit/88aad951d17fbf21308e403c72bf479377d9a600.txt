commit 88aad951d17fbf21308e403c72bf479377d9a600
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Fri Mar 9 14:31:25 2018 -0800

    feat(api): Don't 403 on health check for non-superusers
    
    This is confusing when users see this in their debug consoles and tend
    to think something is broken. So instead we just wall the actual data
    behind superuser, but let the request succeed.

diff --git a/src/sentry/api/endpoints/system_health.py b/src/sentry/api/endpoints/system_health.py
index d1ec406123..50c59a0d81 100644
--- a/src/sentry/api/endpoints/system_health.py
+++ b/src/sentry/api/endpoints/system_health.py
@@ -3,18 +3,22 @@ from __future__ import absolute_import
 import itertools
 
 from rest_framework.response import Response
+from rest_framework.permissions import IsAuthenticated
 
 from sentry import status_checks
 from sentry.status_checks import sort_by_severity
 from sentry.api.base import Endpoint
-from sentry.api.permissions import SuperuserPermission
+from sentry.auth.superuser import is_active_superuser
 from sentry.utils.hashlib import md5_text
 
 
 class SystemHealthEndpoint(Endpoint):
-    permission_classes = (SuperuserPermission, )
+    permission_classes = (IsAuthenticated, )
 
     def get(self, request):
+        if not is_active_superuser(request):
+            return Response()
+
         results = status_checks.check_all()
         return Response(
             {
