commit 8a9a3293e261a6b4f7c6ab7d480bffcecc26c366
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Fri Mar 16 12:51:28 2018 -0700

    fix(stream): Do not refetch stream if only environment in query string changes (#7673)
    
    We handle environment changes separately so we need to ignore this when
    no other part of the query string is changing

diff --git a/src/sentry/static/sentry/app/views/stream/stream.jsx b/src/sentry/static/sentry/app/views/stream/stream.jsx
index c5f83347d3..9ba45f8b17 100644
--- a/src/sentry/static/sentry/app/views/stream/stream.jsx
+++ b/src/sentry/static/sentry/app/views/stream/stream.jsx
@@ -6,6 +6,7 @@ import {Link, browserHistory} from 'react-router';
 import Cookies from 'js-cookie';
 import {StickyContainer, Sticky} from 'react-sticky';
 import classNames from 'classnames';
+import {isEqual, omit} from 'lodash';
 
 import SentryTypes from '../../proptypes';
 import ApiMixin from '../../mixins/apiMixin';
@@ -119,7 +120,14 @@ const Stream = createReactClass({
       ? nextSearchId
       : nextSearchId !== this.state.searchId;
 
-    if (searchIdChanged || nextProps.location.search !== this.props.location.search) {
+    // We omit environment when we check the the query has changed as we
+    // handle environment changes separately
+    let queryChanged = !isEqual(
+      omit(nextProps.location.query, 'environment'),
+      omit(this.props.location.query, 'environment')
+    );
+
+    if (searchIdChanged || queryChanged) {
       this.setState(this.getQueryState(nextProps), this.fetchData);
     }
   },
