commit 60d8c02cd6a31a4202c1822823ba9efb8b2fd826
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Dec 30 21:38:53 2014 -0800

    Move raven into common.js

diff --git a/bower.json b/bower.json
index f6cccfacee..26fe7774e4 100644
--- a/bower.json
+++ b/bower.json
@@ -13,7 +13,6 @@
     "simple-slider": "https://github.com/loopj/jquery-simple-slider.git",
     "platformicons": "1.0.2",
     "typeahead.js": "~0.10.5",
-    "raven-js": "~1.1.16"
   },
   "resolutions": {
     "bootstrap": "~2.3.2"
diff --git a/gulpfile.js b/gulpfile.js
index 45e097f036..83d829c3f7 100644
--- a/gulpfile.js
+++ b/gulpfile.js
@@ -19,74 +19,6 @@ var staticPrefix = "src/sentry/static/sentry",
       colors: true
     };
 
-var jsDistros = {
-  // "app": [
-  //   file("app/modules/charts.js"),
-  //   file("app/modules/collection.js"),
-  //   file("app/modules/flash.js"),
-  //   file("app/modules/forms.js"),
-
-  //   file("app/controllers/default.js"),
-  //   file("app/controllers/deleteTeam.js"),
-  //   file("app/controllers/editProjectRule.js"),
-  //   file("app/controllers/groupDetails.js"),
-  //   file("app/controllers/manageAccessGroupMembers.js"),
-  //   file("app/controllers/manageAccessGroupProjects.js"),
-  //   file("app/controllers/manageProject.js"),
-  //   file("app/controllers/manageProjectNotifications.js"),
-  //   file("app/controllers/manageTeamOwnership.js"),
-  //   file("app/controllers/manageTeamSettings.js"),
-  //   file("app/controllers/projectStream.js"),
-  //   file("app/controllers/teamDashboard.js"),
-  //   file("app/controllers/teamList.js"),
-
-  //   file("app/directives/assigneeSelector.js"),
-  //   file("app/directives/clippy.js"),
-  //   file("app/directives/count.js"),
-  //   file("app/directives/timeSince.js"),
-  //   file("app/directives/broadcast.js"),
-
-  //   file("app/models/group.js")
-  // ],
-
-  // "legacy-app": [
-  //   file("app/init.js"),
-  //   file("app/charts.js"),
-  //   file("app/utils.js")
-  // ],
-
-  // "vendor-jquery": [
-  //   vendorFile("jquery/dist/jquery.min.js"),
-  //   file("scripts/lib/jquery.migrate.js"),
-
-  //   vendorFile("jquery-flot/jquery.flot.js"),
-  //   vendorFile("jquery-flot/jquery.flot.resize.js"),
-  //   vendorFile("jquery-flot/jquery.flot.stack.js"),
-  //   vendorFile("jquery-flot/jquery.flot.time.js"),
-  //   file("scripts/lib/jquery.flot.dashes.js"),
-  //   file("scripts/lib/jquery.flot.tooltip.js"),
-
-  //   file("scripts/lib/jquery.cookie.js"),
-
-  //   vendorFile("typeahead.js/dist/typeahead.jquery.min.js")
-  // ],
-
-  // "vendor-bootstrap": [
-  //   vendorFile("bootstrap/dist/js/bootstrap.min.js"),
-  //   vendorFile("bootstrap-datepicker/js/bootstrap-datepicker.js")
-  // ],
-
-  // "vendor-misc": [
-  //   vendorFile("moment/min/moment.min.js"),
-  //   vendorFile("simple-slider/js/simple-slider.min.js"),
-  //   vendorFile("selectize/dist/js/standalone/selectize.min.js")
-  // ],
-
-  "raven": [
-    vendorFile("raven-js/dist/raven.min.js")
-  ]
-}
-
 // Workaround for https://github.com/gulpjs/gulp/issues/71
 var origSrc = gulp.src;
 gulp.src = function () {
@@ -120,27 +52,6 @@ function vendorFile(name) {
   return path.join(__dirname, staticPrefix, "vendor", name);
 }
 
-function buildJsCompileTask(name, fileList) {
-  // TODO(dcramer): sourcemaps
-  return function(){
-    var ext = name.split('.').slice(-1);
-    return gulp.src(fileList)
-      .pipe(gp_cached('js-' + name))
-      .pipe(gp_concat(name + "." + ext))
-      .pipe(gulp.dest(distPath))
-      .pipe(gp_uglify())
-      .pipe(gp_rename(name + ".min.js"))
-      .pipe(gulp.dest(distPath))
-      .on("error", gp_util.log);
-  };
-}
-
-function buildJsWatchTask(name, fileList) {
-  return function(){
-    return ;
-  };
-};
-
 function buildCssCompileTask(name, fileList) {
   return function(){
     gulp.src(fileList)
@@ -154,29 +65,6 @@ function buildCssCompileTask(name, fileList) {
   };
 }
 
-function buildJsDistroTasks() {
-  // create a gulp task for each JS distro
-  var jsDistroNames = [], compileTask, watchTask, fileList;
-  for (var distroName in jsDistros) {
-    fileList = jsDistros[distroName];
-
-    compileTask = buildJsCompileTask(distroName, fileList);
-    gulp.task("dist:js:" + distroName, compileTask);
-
-    gulp.task("watch:js:" + distroName, function(){
-      return gp_watch(fileList, function(){
-        gulp.start("dist:js:" + distroName);
-      });
-    });
-
-    jsDistroNames.push(distroName);
-  }
-
-  gulp.task("dist:js", jsDistroNames.map(function(n) { return "dist:js:" + n; }));
-
-  gulp.task("watch:js", jsDistroNames.map(function(n) { return "watch:js:" + n; }));
-}
-
 gulp.task("clean", function () {
   return gulp.src(distPath, {read: false})
     .pipe(gp_clean())
@@ -190,8 +78,6 @@ gulp.task("dist:css:wall", buildCssCompileTask("wall.css", [file("less/wall.less
 
 gulp.task("dist:css", ["dist:css:sentry", "dist:css:wall"]);
 
-buildJsDistroTasks();
-
 gulp.task("dist:webpack", function(callback){
   webpack(require('./webpack.config.js'), function(err, stats) {
       if(err) throw new gutil.PluginError("webpack", err);
@@ -200,7 +86,7 @@ gulp.task("dist:webpack", function(callback){
   });
 });
 
-gulp.task("dist", ["dist:js", "dist:css", "dist:webpack"]);
+gulp.task("dist", ["dist:css", "dist:webpack"]);
 
 gulp.task("watch:css:sentry", function(){
   return gp_watch(file("less/sentry.less"), function(){
@@ -227,6 +113,6 @@ gulp.task("watch:webpack", function(callback){
   callback();
 });
 
-gulp.task("watch", ["watch:js", "watch:css", "watch:webpack"]);
+gulp.task("watch", ["watch:css", "watch:webpack"]);
 
 gulp.task("default", ["dist"]);
diff --git a/package.json b/package.json
index 885defb992..8a9677d62d 100644
--- a/package.json
+++ b/package.json
@@ -32,6 +32,7 @@
     "less": "1.7.0",
     "mocha": "1.9.x",
     "moment": "^2.8.4",
+    "raven-js": "^1.1.11",
     "react": "^0.12.2",
     "react-router": "^0.11.6",
     "sinon": "^1.10.3",
diff --git a/src/sentry/static/sentry/app-react/main.jsx b/src/sentry/static/sentry/app-react/main.jsx
index 674e81598e..f842a4b25b 100644
--- a/src/sentry/static/sentry/app-react/main.jsx
+++ b/src/sentry/static/sentry/app-react/main.jsx
@@ -4,6 +4,7 @@
 // way we can call into scoped objects
 module.exports = {
   jQuery: require("jquery"),
+  Raven: require("raven-js"),
   React: require("react"),
 
   Stream: require("./components/stream")
diff --git a/src/sentry/templates/sentry/includes/ravenjs.html b/src/sentry/templates/sentry/includes/ravenjs.html
index 5dd6bdabca..293fa4684f 100644
--- a/src/sentry/templates/sentry/includes/ravenjs.html
+++ b/src/sentry/templates/sentry/includes/ravenjs.html
@@ -1,8 +1,6 @@
 {% load sentry_api %}
 {% load sentry_dsn %}
 
-<script src="{% url 'sentry-media' "sentry" "dist/raven.min.js" %}"></script>
-
 <script>
 Raven.config('{% public_dsn %}', {
     tags: {
