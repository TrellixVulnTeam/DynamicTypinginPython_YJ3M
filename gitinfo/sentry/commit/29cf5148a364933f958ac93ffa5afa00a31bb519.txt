commit 29cf5148a364933f958ac93ffa5afa00a31bb519
Author: David Cramer <dcramer@gmail.com>
Date:   Thu May 1 14:34:33 2014 -0300

    Add js linting to pre-commit

diff --git a/hooks/pre-commit b/hooks/pre-commit
index d58db4d62a..ba0a91e3b2 100755
--- a/hooks/pre-commit
+++ b/hooks/pre-commit
@@ -16,24 +16,39 @@ if 'VIRTUAL_ENV' in os.environ:
     sys.path.insert(0, site_packages)
 
 
-def main():
+def py_lint(files_modified):
     from flake8.main import DEFAULT_CONFIG
     from flake8.engine import get_style_guide
+
+    # remove non-py files and files which no longer exist
+    files_modified = filter(lambda x: x.endswith('.py'), files_modified)
+
+    flake8_style = get_style_guide(parse_argv=True, config_file=DEFAULT_CONFIG)
+    report = flake8_style.check_files(files_modified)
+
+    return report.total_errors != 0
+
+
+def js_lint(files_modified):
+    has_errors = False
+    if os.system('node_modules/.bin/jshint src/sentry'):
+        has_errors = True
+
+    return has_errors
+
+
+def main():
     from flake8.hooks import run
 
     gitcmd = "git diff-index --cached --name-only HEAD"
 
     _, files_modified, _ = run(gitcmd)
 
-    # remove non-py files and files which no longer exist
-    files_modified = filter(
-        lambda x: x.endswith('.py') and os.path.exists(x),
-        files_modified)
-
-    flake8_style = get_style_guide(parse_argv=True, config_file=DEFAULT_CONFIG)
-    report = flake8_style.check_files(files_modified)
+    files_modified = filter(lambda x: os.path.exists(x), files_modified)
 
-    return report.total_errors
+    if any((py_lint(files_modified), js_lint(files_modified))):
+        return 1
+    return 0
 
 if __name__ == '__main__':
     sys.exit(main())
