commit 52587fb219b41533de611ca2ab4dc0f7d11610d4
Author: ckj <chriskjennings@gmail.com>
Date:   Fri Jan 23 03:16:17 2015 -0500

    move user info into dropdown

diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index a4983580d4..926cb663c7 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -8,7 +8,7 @@
 @import url("typeahead.less");
 
 @baseFontSize: 13px;
-@grayDark: #4a535e;
+@grayDark: #343C45;
 @gray: #4f5760;
 @navbarInverseLinkBackgroundActive: #333;
 @orange: #fb4226;
@@ -528,81 +528,97 @@ header {
   }
 
   .user-nav {
-    margin-top: 3px;
-    margin-bottom: 0;
 
-    .clearfix();
+    .dropdown-toggle {
+      img {
+        .square(30px);
+        border-radius: 2px;
+      }
+
+      .icon-arrow-down {
+        top: 4px;
+      }
+    }
     .dropdown-menu {
+      color: #fff;
+      background: @grayDark;
       left: auto;
-      right: 0;
-      border-radius: 0 0 4px 4px;
-      top: 41px;
-      color: @gray;
+      right: -20px;
+      top: 44px;
+      border-radius: 2px;
+      width: 240px;
+      margin: 0;
+      // border: 1px solid darken(@grayDark, 10);
+      border: none;
+      box-shadow: none;
+      padding: 0;
 
-      &.orgs li {
+      &:after {
+        width: 0;
+        height: 0;
+        border-left: 12px solid transparent;
+        border-right: 12px solid transparent;
+        border-bottom: 12px solid @grayDark;
+        content: "";
+        display: block;
+        position: absolute;
+        top: -10px;
+        right: 15px;
+      }
 
-        a {
-          padding-left: 12px;
-          padding-right: 36px;
-          position: relative;
-        }
-        .icon-settings {
-          position: absolute;
-          top: 6px;
-          right: 6px;
-          margin-left: 10px;
+      ul {
+        .list-unstyled();
+        margin: 0;
+      }
+
+      .user-global {
+        text-align: center;
+        padding: 20px 0;
+
+        li {
+          display: inline-block;
+          margin-right: 10px;
+
+          &:last-child {
+            margin: 0;
+          }
         }
 
-        .icon-building, .icon-user {
+        .icon {
           opacity: .5;
-          padding-right: 5px;
+          margin-right: 5px;
         }
-
-        .icon-user {
+        .icon-book, .icon-comments {
+          top: 2px;
+        }
+        .icon-settings {
           top: 1px;
         }
       }
-    }
-
-    h6 {
-      margin: 6px 12px;
-      font-size: 14px;
-    }
 
-    > li {
-      list-style: none;
-      float: left;
-      margin-left: 30px;
-      line-height: 1;
-
-      a {
-        font-size: 15px;
+      .user-account {
+        li {
+          a {
+            padding: 15px 20px;
+            border-top: 1px solid rgba(0,0,0, .25);
+            display: block;
+            &:hover {
+              background: @blue;
+              color: #fff;
+              border-top-color: transparent;
+            }
+          }
+        }
       }
-    }
-
-    .icon-settings,
-    .icon-book,
-    .icon-envelope,
-    .icon-building {
-      line-height: 1;
-      padding-right: 5px;
-    }
-
-    .icon-settings, .icon-envelope {
-      top: 1px;
-    }
 
-    .icon-book {
-      top: 2px;
-    }
-
-    .icon-building {
-      top: 1px;
-    }
+      a {
+        color: #B5B9BD;
 
-    .icon-arrow-down {
-      top: 2px;
-      line-height: 0;
+        &:hover {
+          color: #fff;
+          background: none;
+        }
+      }
     }
   }
 
diff --git a/src/sentry/templates/sentry/layout.html b/src/sentry/templates/sentry/layout.html
index 87b2a24dee..0eedbd1a4e 100644
--- a/src/sentry/templates/sentry/layout.html
+++ b/src/sentry/templates/sentry/layout.html
@@ -94,26 +94,6 @@
             </div>
           {% endif %}
         </div>
-        <div class="user-info">
-          <img src="{% gravatar_url user.email size 72 %}">
-          <p><strong><a class="username" href="#">{{ user.username }}</a></strong></p>
-          <p><small>
-            <a href="{% url 'sentry-account-settings' %}">{% trans "Account" %}</a>
-            <a class="divider" href="{% url 'sentry-logout' %}">{% trans "Sign out" %}</a>
-            </small></p>
-        </div>
-        <div class="user-options">
-          {% block account_nav %}
-          <ul class="list-unstyled truncate">
-              <li><strong><a href="{% url 'sentry-help' %}"><span class="icon icon-book"></span>{% trans "Docs" %}</a></strong></li>
-              {% block support_link %}{% endblock %}
-              <li><strong><a href="https://kiwiirc.com/client/irc.freenode.net/#sentry" target="_blank"><span class="icon icon-comments"></span>Chat</a></strong></li>
-              {% if request.user.is_staff %}
-              <li><strong><a href="{% url 'sentry-admin-status' %}"> <span class="icon icon-settings"></span>{% trans "Admin" %}</a></strong></li>
-              {% endif %}
-          </ul>
-          {% endblock%}
-        </div>
         <div class="teams divider-top">
           {% if TEAM_LIST %}
               {% for t, p_list in TEAM_LIST %}
@@ -150,17 +130,28 @@
                   <div class="pull-right">
                       {% block header_action %}
                           {% if request.user.is_authenticated %}
-                          <div class="dropdown new-dropdown">
-                            <a class="dropdown-toggle new-menu">
-                              <span class="icon-new"></span>
-                            </a>
-                            <ul class="dropdown-menu">
-                              <li><a href="#">Organization</a></li>
-                              <li><a href="#">Team</a></li>
-                              <li><a href="#">Project</a></li>
-                              <li><a href="#">Member</a></li>
-                            </ul>
+                            {% block account_nav %}
+                            <div class="user-nav dropdown">
+                              <a href="#" class="dropdown-toggle" onclick="$(this).parent('.dropdown').toggleClass('open');">
+                                <img src="{% gravatar_url user.email size 72 %}">
+                                <span class="icon-arrow-down"></span>
+                              </a>
+                              <div class="dropdown-menu">
+                                <ul class="user-global">
+                                  <li><strong><a href="{% url 'sentry-help' %}"><span class="icon icon-book"></span>{% trans "Docs" %}</a></strong></li>
+                                  {% block support_link %}{% endblock %}
+                                  <li><strong><a href="https://kiwiirc.com/client/irc.freenode.net/#sentry" target="_blank"><span class="icon icon-comments"></span>Chat</a></strong></li>
+                                  {% if request.user.is_staff %}
+                                  <li><strong><a href="{% url 'sentry-admin-status' %}"> <span class="icon icon-settings"></span>{% trans "Admin" %}</a></strong></li>
+                                  {% endif %}
+                                </ul>
+                                <ul class="user-account">
+                                  <li><a href="{% url 'sentry-account-settings' %}">{% trans "Account" %}</a></li>
+                                  <li><a href="{% url 'sentry-logout' %}">{% trans "Sign out" %}</a></li>
+                                </ul>
+                              </div>
                           </div>
+                            {% endblock%}
                           {% else %}
                             <div class="user-nav">
                               <a href="{% url 'sentry-login' %}">{% trans "Login" %}</a>
