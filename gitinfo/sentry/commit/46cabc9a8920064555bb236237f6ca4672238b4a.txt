commit 46cabc9a8920064555bb236237f6ca4672238b4a
Author: David Cramer <dcramer@gmail.com>
Date:   Mon May 6 11:18:33 2013 -0700

    Handle duplicate slugs in automated team creation

diff --git a/src/sentry/models.py b/src/sentry/models.py
index e7535b59d9..241be9e0b8 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -1194,11 +1194,10 @@ def create_team_and_keys_for_project(instance, created, **kwargs):
         return
 
     if not instance.team:
-        update(instance, team=Team.objects.create(
-            owner=instance.owner,
-            name=instance.name,
-            slug=instance.slug,
-        ))
+        team = Team(owner=instance.owner, name=instance.name)
+        slugify_instance(team, instance.slug)
+        team.save()
+        update(instance, team=team)
 
         ProjectKey.objects.get_or_create(
             project=instance,
