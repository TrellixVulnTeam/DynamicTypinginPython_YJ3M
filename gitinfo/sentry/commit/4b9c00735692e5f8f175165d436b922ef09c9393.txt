commit 4b9c00735692e5f8f175165d436b922ef09c9393
Author: MeredithAnya <meredith.a.heller@gmail.com>
Date:   Fri Oct 5 16:12:56 2018 -0700

    ref(integrations): GH log missing integration events (#9958)

diff --git a/src/sentry/integrations/github/webhook.py b/src/sentry/integrations/github/webhook.py
index d98b97dd2b..0c56c5fa4a 100644
--- a/src/sentry/integrations/github/webhook.py
+++ b/src/sentry/integrations/github/webhook.py
@@ -40,10 +40,25 @@ class Webhook(object):
         if host:
             external_id = u'{}:{}'.format(host, event['installation']['id'])
 
-        integration = Integration.objects.get(
-            external_id=external_id,
-            provider=self.provider,
-        )
+        try:
+            integration = Integration.objects.get(
+                external_id=external_id,
+                provider=self.provider,
+            )
+        except Integration.DoesNotExist:
+            # It seems possible for the GH or GHE app to be installed on their
+            # end, but the integration to not exist. Possibly from deleting in
+            # Sentry first or from a failed install flow (where the integration
+            # didn't get created in the first place)
+            logger.info(
+                'github.missing-integration',
+                extra={
+                    'action': event['action'],
+                    'repository': event.get('repository'),
+                    'external_id': external_id,
+                }
+            )
+            return
 
         if 'repository' in event:
 
@@ -75,11 +90,25 @@ class InstallationEventWebhook(Webhook):
             external_id = event['installation']['id']
             if host:
                 external_id = u'{}:{}'.format(host, event['installation']['id'])
-            integration = Integration.objects.get(
-                external_id=external_id,
-                provider=self.provider,
-            )
-            self._handle_delete(event, integration)
+            try:
+                integration = Integration.objects.get(
+                    external_id=external_id,
+                    provider=self.provider,
+                )
+                self._handle_delete(event, integration)
+            except Integration.DoesNotExist:
+                # It seems possible for the GH or GHE app to be installed on their
+                # end, but the integration to not exist. Possibly from deleting in
+                # Sentry first or from a failed install flow (where the integration
+                # didn't get created in the first place)
+                logger.info(
+                    'github.deletion-missing-integration',
+                    extra={
+                        'action': event['action'],
+                        'installation_name': event['account']['login'],
+                        'external_id': external_id,
+                    }
+                )
 
     def _handle_delete(self, event, integration):
 
