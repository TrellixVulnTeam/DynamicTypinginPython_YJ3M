commit 0e31b43986b27bbc3890dac595899347c5f1f243
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Mon Jan 28 14:04:31 2019 +0100

    fix: Nullpointer when delivering digest (#11742)

diff --git a/src/sentry/ownership/grammar.py b/src/sentry/ownership/grammar.py
index 32e938d2c4..b4b9bc0dfb 100644
--- a/src/sentry/ownership/grammar.py
+++ b/src/sentry/ownership/grammar.py
@@ -4,6 +4,7 @@ from collections import namedtuple
 from fnmatch import fnmatch
 from parsimonious.grammar import Grammar, NodeVisitor
 from parsimonious.exceptions import ParseError  # noqa
+from sentry.utils.safe import get_path
 
 __all__ = ('parse_rules', 'dump_schema', 'load_schema')
 
@@ -198,19 +199,19 @@ class OwnershipVisitor(NodeVisitor):
 
 def _iter_frames(data):
     try:
-        for frame in data['stacktrace']['frames']:
+        for frame in get_path(data, 'stacktrace', 'frames', filter=True) or ():
             yield frame
     except KeyError:
         pass
 
     try:
-        values = data['exception']['values']
+        values = get_path(data, 'exception', 'values', filter=True) or ()
     except KeyError:
         return
 
     for value in values:
         try:
-            for frame in value['stacktrace']['frames']:
+            for frame in get_path(value, 'stacktrace', 'frames', filter=True) or ():
                 yield frame
         except KeyError:
             continue
