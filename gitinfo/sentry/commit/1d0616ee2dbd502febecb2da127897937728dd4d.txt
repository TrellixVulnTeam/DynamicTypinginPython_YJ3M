commit 1d0616ee2dbd502febecb2da127897937728dd4d
Author: Jess MacQueen <macqueen@users.noreply.github.com>
Date:   Thu Sep 14 14:18:21 2017 -0700

    make sure github apps won't be shown in repo dropdown, correct api param on frontend (#5813)
    
    * fix(integrations): correct provider param
    
    * fix(integrations): make sure github apps isn't included as a repository provider

diff --git a/src/sentry/api/endpoints/organization_config_repositories.py b/src/sentry/api/endpoints/organization_config_repositories.py
index 817b8702fc..5322d0f2a1 100644
--- a/src/sentry/api/endpoints/organization_config_repositories.py
+++ b/src/sentry/api/endpoints/organization_config_repositories.py
@@ -7,19 +7,22 @@ from sentry.plugins import bindings
 
 
 class OrganizationConfigRepositoriesEndpoint(OrganizationEndpoint):
+
     def get(self, request, organization):
         provider_bindings = bindings.get('repository.provider')
 
         providers = []
         for provider_id in provider_bindings:
             provider = provider_bindings.get(provider_id)(id=provider_id)
-            providers.append(
-                {
-                    'id': provider_id,
-                    'name': provider.name,
-                    'config': provider.get_config(),
-                }
-            )
+            # TODO(jess): figure out better way to exclude this
+            if provider_id != 'github_apps':
+                providers.append(
+                    {
+                        'id': provider_id,
+                        'name': provider.name,
+                        'config': provider.get_config(),
+                    }
+                )
 
         return Response({
             'providers': providers,
diff --git a/src/sentry/static/sentry/app/views/organizationIntegrations.jsx b/src/sentry/static/sentry/app/views/organizationIntegrations.jsx
index ddfaaf7e74..64791200bd 100644
--- a/src/sentry/static/sentry/app/views/organizationIntegrations.jsx
+++ b/src/sentry/static/sentry/app/views/organizationIntegrations.jsx
@@ -45,7 +45,7 @@ const OrganizationIntegrations = React.createClass({
     this.api.request(`/organizations/${this.props.params.orgId}/integrations/`, {
       method: 'POST',
       data: {
-        providerId,
+        provider: providerId,
         defaultAuthId: auth.defaultAuthId,
         integrationId: auth.integrationId
       },
