commit d85b0a850046fe6d81b83a31a0c6c263941dd5f2
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Mon May 2 22:54:02 2016 +0200

    Updated mocks and improved error crumb generation

diff --git a/bin/load-mocks b/bin/load-mocks
index 7a335f4acf..7b7122e55b 100755
--- a/bin/load-mocks
+++ b/bin/load-mocks
@@ -123,7 +123,7 @@ def get_sample_breadcrumbs(prior_event_id=None):
             {
                 "type": "navigation",
                 "timestamp": milliseconds_ago(now, 5200),
-                "category": "location",
+                "category": "react-router",
                 "data": {
                     "from": "/login/",
                     "to": "/dashboard/",
@@ -132,36 +132,59 @@ def get_sample_breadcrumbs(prior_event_id=None):
             {
                 "timestamp": milliseconds_ago(now, 4000),
                 "message": "This is an info log message",
+                "category": "django"
             },
             {
                 "timestamp": milliseconds_ago(now, 3300),
                 "message": "This is a warning log message",
                 "level": "warning",
-                "category": 'django.utils.log'
+                "category": 'django'
             },
             {
                 "timestamp": milliseconds_ago(now, 2700),
                 "message": "This is an error log message",
                 "level": "error",
-                "category": 'django.utils.log'
+                "category": 'django'
+            },
+            {
+                "timestamp": milliseconds_ago(now, 2700),
+                "message": "This is a critical log message",
+                "level": "critical",
+                "category": 'django'
+            },
+            {
+                "timestamp": milliseconds_ago(now, 2700),
+                "message": "This is a debug log message",
+                "level": "debug",
+                "category": 'django',
+                "data": {
+                    "foo": "bar",
+                    "baz": "blah"
+                }
             },
             {
                 "type": "http",
                 "category": "requests",
                 "timestamp": milliseconds_ago(now, 1300),
-                "message": "POST http://example.com [200]"
+                "data": {
+                    "reason": "OK",
+                    "status_code": 200,
+                    "url": "Http://example.com/",
+                    "method": "POST"
+                }
             },
             {
                 "type": "query",
-                "category": "django.db",
+                "category": "django",
                 "timestamp": milliseconds_ago(now, 1200),
                 "message": u'SELECT "auth_user"."password", "auth_user"."last_login", "auth_user"."id", "auth_user"."username", "auth_user"."first_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."is_superuser", "auth_user"."is_managed", "auth_user"."date_joined" FROM "auth_user" WHERE "auth_user"."id" = 1',
                 "duration": 0.002
             },
             {
-                "type": "click",
+                "type": "ui",
                 "timestamp": milliseconds_ago(now, 1000),
-                "message": "div > form[name=\"post\"] > button.btn.btn-small[name=\"submit\"]"
+                "message": "div > form[name=\"post\"] > button.btn.btn-small[name=\"submit\"]",
+                "category": 'ui.click'
             }
         ]
     }
@@ -172,9 +195,7 @@ def get_sample_breadcrumbs(prior_event_id=None):
             "timestamp": milliseconds_ago(now, 3000),
             "message": "TypeError: something broke earlier",
             "category": "error",
-            "data": {
-                "event_id": prior_event_id
-            }
+            "event_id": prior_event_id
         })
 
     return sample_breadcrumbs
diff --git a/src/sentry/static/sentry/app/components/events/interfaces/breadcrumbs.jsx b/src/sentry/static/sentry/app/components/events/interfaces/breadcrumbs.jsx
index f69c89fdce..fa39bfda85 100644
--- a/src/sentry/static/sentry/app/components/events/interfaces/breadcrumbs.jsx
+++ b/src/sentry/static/sentry/app/components/events/interfaces/breadcrumbs.jsx
@@ -16,6 +16,17 @@ function Collapsed(props) {
   );
 }
 
+function moduleToCategory(module) {
+  if (!module) {
+    return null;
+  }
+  let match = module.match(/^.*\/(.*?)(:\d+)/);
+  if (match) {
+    return match[1];
+  }
+  return module.split(/./)[0];
+}
+
 Collapsed.propTypes = {
   onClick: React.PropTypes.func.isRequired,
   count: React.PropTypes.number.isRequired
@@ -83,7 +94,7 @@ const BreadcrumbsInterface = React.createClass({
       all = all.slice(0).concat([{
         type: 'error',
         level: 'error',
-        category: module || null,
+        category: moduleToCategory(module || null),
         message: type + ': ' + value,
         timestamp: evt.dateCreated
       }]);
