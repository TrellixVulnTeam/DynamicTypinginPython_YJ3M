commit e9a0a6890685f9d31c9ff697ceef2cff74e4d147
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Feb 4 18:30:50 2016 -0800

    Handle non-urls with release backed events (fixes GH-2647)

diff --git a/src/sentry/lang/javascript/processor.py b/src/sentry/lang/javascript/processor.py
index 68acc568f6..fad6114447 100644
--- a/src/sentry/lang/javascript/processor.py
+++ b/src/sentry/lang/javascript/processor.py
@@ -241,12 +241,6 @@ def fetch_file(url, project=None, release=None, allow_scraping=True):
     """
     if release:
         result = fetch_release_file(url, release)
-    elif not allow_scraping or not url.startswith(('http:', 'https:')):
-        error = {
-            'type': EventError.JS_MISSING_SOURCE,
-            'url': url,
-        }
-        raise CannotFetchSource(error)
     else:
         result = None
 
@@ -255,6 +249,13 @@ def fetch_file(url, project=None, release=None, allow_scraping=True):
     )
 
     if result is None:
+        if not allow_scraping or not url.startswith(('http:', 'https:')):
+            error = {
+                'type': EventError.JS_MISSING_SOURCE,
+                'url': url,
+            }
+            raise CannotFetchSource(error)
+
         logger.debug('Checking cache for url %r', url)
         result = cache.get(cache_key)
         if result is not None:
