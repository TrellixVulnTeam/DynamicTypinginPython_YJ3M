commit 700d7433dda7f356439020cdcf137ea2798e904a
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Fri Jul 8 09:33:53 2016 +0500

    Properly handle empty args in minified react errors

diff --git a/src/sentry/lang/javascript/errormapping.py b/src/sentry/lang/javascript/errormapping.py
index ebf652db59..1243c9a3f2 100644
--- a/src/sentry/lang/javascript/errormapping.py
+++ b/src/sentry/lang/javascript/errormapping.py
@@ -87,7 +87,7 @@ def process_react_exception(exc, match, mapping):
     if msg_format is None:
         return False
     args = []
-    for k, v in cgi.parse_qsl(qs):
+    for k, v in cgi.parse_qsl(qs, keep_blank_values=True):
         if k == 'args[]':
             args.append(v)
     exc['value'] = msg_format % tuple(args)
diff --git a/tests/sentry/lang/javascript/test_processor.py b/tests/sentry/lang/javascript/test_processor.py
index f80aec4069..407c3dbf8f 100644
--- a/tests/sentry/lang/javascript/test_processor.py
+++ b/tests/sentry/lang/javascript/test_processor.py
@@ -375,3 +375,44 @@ class ErrorMappingTest(TestCase):
                 'returned. You may have returned undefined, an array or '
                 'some other invalid object.'
             )
+
+    @responses.activate
+    def test_react_error_mapping_empty_args(self):
+        responses.add(responses.GET, REACT_MAPPING_URL, body=r'''
+        {
+          "108": "%s.getChildContext(): key \"%s\" is not defined in childContextTypes."
+        }
+        ''', content_type='application/json')
+
+        data = {
+            'platform': 'javascript',
+            'sentry.interfaces.Exception': {
+                'values': [{
+                    'type': 'InvariantViolation',
+                    'value': (
+                        'Minified React error #108; visit http://facebook'
+                        '.github.io/react/docs/error-decoder.html?invariant='
+                        '108&args[]=Component&args[]= for the full message '
+                        'or use the non-minified dev environment for full '
+                        'errors and additional helpful warnings.'
+                    ),
+                    'stacktrace': {
+                        'frames': [
+                            {
+                                'abs_path': 'http://example.com/foo.js',
+                                'filename': 'foo.js',
+                                'lineno': 4,
+                                'colno': 0,
+                            },
+                        ],
+                    },
+                }],
+            }
+        }
+
+        assert rewrite_exception(data)
+
+        assert data['sentry.interfaces.Exception']['values'][0]['value'] == (
+            'Component.getChildContext(): key "" is not defined in '
+            'childContextTypes.'
+        )
