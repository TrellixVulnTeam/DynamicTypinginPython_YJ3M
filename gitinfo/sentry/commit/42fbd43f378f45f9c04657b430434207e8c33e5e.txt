commit 42fbd43f378f45f9c04657b430434207e8c33e5e
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Apr 22 20:19:05 2013 -0700

    Add tags to group details page (fixes GH-700)

diff --git a/src/sentry/models.py b/src/sentry/models.py
index bd82b44ac7..a066ab37cd 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -720,6 +720,9 @@ class Event(EventBase):
         module = self.data['__sentry__'].get('module', 'ver')
         return module, self.data['__sentry__']['version']
 
+    def get_tags(self):
+        return self.data.get('tags', ())
+
     def as_dict(self):
         # We use a SortedDict to keep elements ordered for a potential JSON serializer
         data = SortedDict()
diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index 68ebfa106a..40f67e2e9f 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -1447,6 +1447,28 @@ ol.context-line {
   margin-bottom: 0;
 }
 
+.tag-list {
+  margin-bottom: 20px;
+  > li {
+    display: inline-block;
+    min-width: 100px;
+    background: #f9f9f9;
+    .border-radius(8px);
+    padding-top: 2px;
+    padding-bottom: 2px;
+    strong {
+      padding-left: 8px;
+    }
+    em {
+      color: #aaa;
+      margin: 0 3px;
+    }
+    span {
+      padding-right: 8px;
+    }
+  }
+}
+
 // Sparkline grid
 
 .innerColumn(@columnSpan: 1) {
diff --git a/src/sentry/static/sentry/styles/global.min.css b/src/sentry/static/sentry/styles/global.min.css
index 8e3c2f1742..76655510aa 100644
--- a/src/sentry/static/sentry/styles/global.min.css
+++ b/src/sentry/static/sentry/styles/global.min.css
@@ -7632,6 +7632,29 @@ ol.context-line > li > span {
 .module-content table pre {
   margin-bottom: 0;
 }
+.tag-list {
+  margin-bottom: 20px;
+}
+.tag-list > li {
+  display: inline-block;
+  min-width: 100px;
+  background: #f9f9f9;
+  -webkit-border-radius: 8px;
+  -moz-border-radius: 8px;
+  border-radius: 8px;
+  padding-top: 2px;
+  padding-bottom: 2px;
+}
+.tag-list > li strong {
+  padding-left: 8px;
+}
+.tag-list > li em {
+  color: #aaa;
+  margin: 0 3px;
+}
+.tag-list > li span {
+  padding-right: 8px;
+}
 #chart {
   margin-bottom: 10px;
   overflow: hidden;
diff --git a/src/sentry/static/sentry/styles/sentry.css b/src/sentry/static/sentry/styles/sentry.css
index 8e3c2f1742..76655510aa 100644
--- a/src/sentry/static/sentry/styles/sentry.css
+++ b/src/sentry/static/sentry/styles/sentry.css
@@ -7632,6 +7632,29 @@ ol.context-line > li > span {
 .module-content table pre {
   margin-bottom: 0;
 }
+.tag-list {
+  margin-bottom: 20px;
+}
+.tag-list > li {
+  display: inline-block;
+  min-width: 100px;
+  background: #f9f9f9;
+  -webkit-border-radius: 8px;
+  -moz-border-radius: 8px;
+  border-radius: 8px;
+  padding-top: 2px;
+  padding-bottom: 2px;
+}
+.tag-list > li strong {
+  padding-left: 8px;
+}
+.tag-list > li em {
+  color: #aaa;
+  margin: 0 3px;
+}
+.tag-list > li span {
+  padding-right: 8px;
+}
 #chart {
   margin-bottom: 10px;
   overflow: hidden;
diff --git a/src/sentry/templates/sentry/groups/details.html b/src/sentry/templates/sentry/groups/details.html
index feb7f2863f..349197e994 100644
--- a/src/sentry/templates/sentry/groups/details.html
+++ b/src/sentry/templates/sentry/groups/details.html
@@ -36,7 +36,6 @@
                     </div>
                 {% endif %}
 
-
                 {% if activity %}
                     <ul class="activity">
                         {% for item in activity %}
diff --git a/src/sentry/templates/sentry/partial/_event_details.html b/src/sentry/templates/sentry/partial/_event_details.html
index 353fa80011..e5c67925d1 100644
--- a/src/sentry/templates/sentry/partial/_event_details.html
+++ b/src/sentry/templates/sentry/partial/_event_details.html
@@ -1,6 +1,20 @@
+{% load url from future %}
 {% load i18n %}
 {% load sentry_helpers %}
 
+{% if tags %}
+    <div id="tags">
+        <div class="page-header">
+            <h2>Tags</h2>
+        </div>
+        <ul class="tag-list">
+            {% for tag_key, tag_value in tags %}
+                <li><strong>{{ tag_key }}</strong> <em>=</em> <span><a href="{% url 'sentry-stream' group.team.slug group.project.slug %}?{{ tag_key }}={{ tag_value }}">{{ tag_value }}</a></span></li>
+            {% endfor %}
+        </ul>
+    </div>
+{% endif %}
+
 {% for interface, interface_html in interface_list %}
     <div id="{{ interface.get_slug }}">
         {{ interface_html }}
@@ -12,19 +26,21 @@
         <div class="page-header">
             <h2>{% trans "Additional Data" %}</h2>
         </div>
-        <table class="table table-striped vars">
-            <colgroup>
-                <col style="width:130px">
-            </colgroup>
-            {% for k, v in json_data.iteritems|as_sorted %}
-                <tr>
-                    <th class="key">{{ k }}</th>
-                    <td class="values">
-                        {% render_values v %}
-                    </td>
-                </tr>
-            {% endfor %}
-        </table>
+        {% if json_data %}
+            <table class="table table-striped vars">
+                <colgroup>
+                    <col style="width:130px">
+                </colgroup>
+                {% for k, v in json_data.iteritems|as_sorted %}
+                    <tr>
+                        <th class="key">{{ k }}</th>
+                        <td class="values">
+                            {% render_values v %}
+                        </td>
+                    </tr>
+                {% endfor %}
+            </table>
+        {% endif %}
     </div>
 {% endif %}
 
diff --git a/src/sentry/templates/sentry/partial/event_nav.html b/src/sentry/templates/sentry/partial/event_nav.html
index b164016a94..e1f8953466 100644
--- a/src/sentry/templates/sentry/partial/event_nav.html
+++ b/src/sentry/templates/sentry/partial/event_nav.html
@@ -22,6 +22,11 @@
             <li class="top{% if page == 'details' %} active{% endif %}">
                 <a href="#" onclick="javascript:window.location = '#details'; return false">{% trans "Top" %}</a>
             </li>
+            {% if tags %}
+                <li>
+                    <a href="#tags">{% trans "Tags" %}</a>
+                </li>
+            {% endif %}
             {% for interface, _ in interface_list %}
                 <li>
                     <a href="#{{ interface.get_slug }}">
diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index 1df87451ac..ce44bd8e62 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -189,6 +189,7 @@ def render_with_group_context(group, template, context, request=None, event=None
         context.update({
             'event': event,
             'json_data': extra_data,
+            'tags': event.get_tags(),
             'version_data': event.data.get('modules', None),
             'next_event': next_event,
             'prev_event': prev_event,
