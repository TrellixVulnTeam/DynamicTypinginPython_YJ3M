commit b1832c7455012361d7548afb9b37d159a8051fda
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Thu Aug 8 11:28:53 2019 -0700

    ref(eventstore): Refactor group_event_json (#14316)
    
    Use eventstore for GroupEventJsonView

diff --git a/src/sentry/web/frontend/group_event_json.py b/src/sentry/web/frontend/group_event_json.py
index 0f626d2c0b..87615cf123 100644
--- a/src/sentry/web/frontend/group_event_json.py
+++ b/src/sentry/web/frontend/group_event_json.py
@@ -2,7 +2,8 @@ from __future__ import absolute_import, division
 
 from django.http import Http404, HttpResponse
 
-from sentry.models import Event, SnubaEvent, Group, GroupMeta, get_group_with_redirect
+from sentry import eventstore
+from sentry.models import Event, Group, GroupMeta, get_group_with_redirect
 from sentry.utils import json
 from sentry.web.frontend.base import OrganizationView
 
@@ -21,13 +22,11 @@ class GroupEventJsonView(OrganizationView):
             raise Http404
 
         if event_id_or_latest == 'latest':
-            # It's possible that a message would not be created under certain
-            # circumstances (such as a post_save signal failing)
-            event = group.get_latest_event() or Event(group=group)
+            event = group.get_latest_event()
         else:
-            event = SnubaEvent.objects.from_event_id(event_id_or_latest, group.project.id)
+            event = eventstore.get_event_by_id(group.project.id, event_id_or_latest)
 
-        if event is None or (event.group_id != int(group_id)):
+        if event is None:
             raise Http404
 
         Event.objects.bind_nodes([event], 'data')
