commit 426432c7778cb0deea83fadae80494a4aed98613
Author: ckj <chriskjennings@gmail.com>
Date:   Thu Aug 25 23:54:11 2016 -0700

    Basic org switcher

diff --git a/src/sentry/static/sentry/app/components/header/index.jsx b/src/sentry/static/sentry/app/components/header/index.jsx
index f405838951..d569b456d7 100644
--- a/src/sentry/static/sentry/app/components/header/index.jsx
+++ b/src/sentry/static/sentry/app/components/header/index.jsx
@@ -107,8 +107,8 @@ const Header = React.createClass({
       showPanel: true,
       currentPanel: panel
     });
-    console.log(this.state.showPanel);
-    console.log(this.state.currentPanel);
+    // console.log(this.state.showPanel);
+    // console.log(this.state.currentPanel);
   },
 
   render() {
@@ -139,11 +139,14 @@ const Header = React.createClass({
       <nav className="navbar">
         <div className="container">
           <div className="anchor-top">
-            <div className="org-switcher divider-bottom">
-              <a className="active-org" href="/">
-                <img src="https://pbs.twimg.com/profile_images/497432038492733440/eW6tXeq3_400x400.png" />
-              </a>
-            </div>
+            {org &&
+              <OrganizationSelector
+                organization={org}
+                showPanel={this.state.showPanel}
+                currentPanel={this.state.currentPanel}
+                onShowPanel={()=>this.showPanel('org-selector')}
+                hidePanel={()=>this.hidePanel()}/>
+            }
             <ul className="navbar-nav divider-bottom">
               <li className={this.state.currentPanel == 'assigned' ? 'active' : null }>
                 <a><span className="icon-user" onClick={()=>this.showPanel('assigned')} /></a>
@@ -195,7 +198,12 @@ const Header = React.createClass({
             :
             <a href="/" className="logo">{logo}</a>
           */}
-          { /* <OrganizationSelector organization={org} /> */ }
+          { /* <OrganizationSelector
+            organization={org}
+            showPanel={this.state.showPanel}
+            currentPanel={this.state.currentPanel}
+            onShowPanel={()=>this.showPanel('broadcasts')}
+            hidePanel={()=>this.hidePanel()}/> */ }
 
           { /* <StatusPage className="pull-right" /> */}
           { /*  {actionMessage ?
diff --git a/src/sentry/static/sentry/app/components/header/organizationSelector.jsx b/src/sentry/static/sentry/app/components/header/organizationSelector.jsx
index d67d6c7682..0f6b92e4fa 100644
--- a/src/sentry/static/sentry/app/components/header/organizationSelector.jsx
+++ b/src/sentry/static/sentry/app/components/header/organizationSelector.jsx
@@ -2,54 +2,75 @@ import React from 'react';
 
 import MenuItem from '../menuItem';
 import DropdownLink from '../dropdownLink';
+import SidebarPanel from '../sidebarPanel';
 import AppState from '../../mixins/appState';
 import OrganizationStore from '../../stores/organizationStore';
 import ConfigStore from '../../stores/configStore';
+import {Link} from 'react-router';
 import {t} from '../../locale';
 
 const OrganizationSelector = React.createClass({
   propTypes: {
-    organization: React.PropTypes.object
+    organization: React.PropTypes.object,
+    showPanel: React.PropTypes.bool,
+    currentPanel: React.PropTypes.string
   },
 
   mixins: [
     AppState,
   ],
-
-  shouldComponentUpdate(nextProps, nextState) {
-    return (nextProps.organization || {}).id !== (this.props.organization || {}).id;
-  },
+  //
+  // shouldComponentUpdate(nextProps, nextState) {
+  //   console.log(nextProps, nextState);
+  //   return (nextProps.organization || {}).id !== (this.props.organization || {}).id;
+  // },
 
   render() {
     let singleOrganization = ConfigStore.get('singleOrganization');
     let activeOrg = this.props.organization;
 
-    if (singleOrganization || !activeOrg) {
-      return null;
-    }
+
+    // if (singleOrganization || !activeOrg) {
+    //   return null;
+    // }
 
     let features = ConfigStore.get('features');
 
+    let classNames = "org-selector divider-bottom";
+    if(this.props.currentPanel == 'org-selector') {
+      classNames += " active";
+    }
+
     return (
-      <DropdownLink
-          menuClasses="dropdown-menu-right"
-          topLevelClasses={(this.props.className || '') + ' org-selector'}
-          title={activeOrg.name}>
-        {OrganizationStore.getAll().map((org) => {
-          return (
-            <MenuItem key={org.slug} to={`/${org.slug}/`}
-                      isActive={activeOrg.id === org.id}>
-              {org.name}
-            </MenuItem>
-          );
-        })}
-        {features.has('organizations:create') && OrganizationStore.getAll().length &&
-          <MenuItem divider={true} />
-        }
-        {features.has('organizations:create') &&
-          <MenuItem href="/organizations/new/">{t('New Organization')}</MenuItem>
+      <div className={classNames}
+        onMouseEnter={this.props.onShowPanel}
+        onMouseLeave={this.props.hidePanel}>
+
+        <a className="active-org" href="/">
+          <img src="https://pbs.twimg.com/profile_images/497432038492733440/eW6tXeq3_400x400.png" />
+        </a>
+
+        {this.props.showPanel && this.props.currentPanel == 'org-selector' &&
+          <SidebarPanel
+            title={t('Organizations')}
+            hidePanel={this.props.hidePanel}>
+            <ul class="org-list">
+              <li>
+              {OrganizationStore.getAll().map((org) => {
+                return (
+                  <Link className={activeOrg.id === org.id && "active"} key={org.slug} to={`/${org.slug}/`}>
+                    {org.name}
+                  </Link>
+                );
+              })}
+              </li>
+              {features.has('organizations:create') &&
+                <li><a href="/organizations/new/">{t('New Organization')}</a></li>
+              }
+            </ul>
+          </SidebarPanel>
         }
-      </DropdownLink>
+      </div>
     );
   }
 });
diff --git a/src/sentry/static/sentry/less/layout.less b/src/sentry/static/sentry/less/layout.less
index b9613ba13b..5a084bd8f5 100644
--- a/src/sentry/static/sentry/less/layout.less
+++ b/src/sentry/static/sentry/less/layout.less
@@ -142,11 +142,21 @@ body.auth {
     line-height: 40px;
   }
 
-  .org-switcher {
+  .org-selector {
     padding: 15px 0;
+    position: relative;
     .active-org {
       display: block;
       .square(32px);
+      &:before {
+        display: block;
+        position: absolute;
+        content: "";
+        top: 0;
+        left: -15px;
+        right: -15px;
+        bottom: -5px;
+      }
 
       img {
         border-radius: 3px;
