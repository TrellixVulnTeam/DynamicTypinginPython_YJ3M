commit a730bb6d273dcc4355ae783af96a2368098c366f
Author: David Cramer <dcramer@gmail.com>
Date:   Thu May 1 15:43:39 2014 -0300

    Add tests to confirm store/not api is default

diff --git a/tests/sentry/receivers/test_core.py b/tests/sentry/receivers/test_core.py
index 391b00e72b..c070bf46d0 100644
--- a/tests/sentry/receivers/test_core.py
+++ b/tests/sentry/receivers/test_core.py
@@ -4,7 +4,7 @@ from __future__ import absolute_import
 
 from django.conf import settings
 
-from sentry.models import Project, Team, User
+from sentry.models import Project, ProjectKey, User
 from sentry.receivers.core import create_default_project
 from sentry.testutils import TestCase
 
@@ -14,14 +14,11 @@ class CreateDefaultProjectTest(TestCase):
         user, _ = User.objects.get_or_create(is_superuser=True, defaults={
             'username': 'test'
         })
-        Team.objects.filter(project__id=settings.SENTRY_PROJECT).delete()
         Project.objects.filter(id=settings.SENTRY_PROJECT).delete()
 
         create_default_project(created_models=[Project])
 
-        project = Project.objects.filter(id=settings.SENTRY_PROJECT)
-        assert project.exists() is True
-        project = project.get()
+        project = Project.objects.get(id=settings.SENTRY_PROJECT)
         assert project.owner == user
         assert project.public is False
         assert project.name == 'Sentry (Internal)'
@@ -29,3 +26,8 @@ class CreateDefaultProjectTest(TestCase):
         team = project.team
         assert team.owner == user
         assert team.slug == 'sentry'
+
+        pk = ProjectKey.objects.get(project=project)
+        assert not pk.roles.api
+        assert pk.roles.store
+        assert pk.user is None
