commit 57330b92801ad6521fad586cfc2ec48d242d6808
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Thu Jun 16 15:37:36 2016 -0700

    In devserver, bind http server to random port when using https (#3509)

diff --git a/src/sentry/runner/commands/devserver.py b/src/sentry/runner/commands/devserver.py
index 7f4e4e032e..524eb1995a 100644
--- a/src/sentry/runner/commands/devserver.py
+++ b/src/sentry/runner/commands/devserver.py
@@ -78,6 +78,16 @@ def devserver(reload, watchers, workers, bind):
         parsed_url = urlparse(url_prefix)
         https_port = str(parsed_url.port or 443)
         https_host = parsed_url.hostname
+
+        # Determine a random port for the backend http server
+        import socket
+        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
+        s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
+        s.bind((host, 0))
+        port = s.getsockname()[1]
+        s.close()
+        bind = '%s:%d' % (host, port)
+
         daemons += [
             ('https', ['https', '-host', https_host, '-listen', host + ':' + https_port, bind]),
         ]
