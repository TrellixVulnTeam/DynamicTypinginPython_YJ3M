commit c339505679b9823b7d9fcba476977d59d1c0be05
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Sun Apr 30 13:48:22 2017 +0200

    Improved reprocessing script

diff --git a/src/sentry/api/endpoints/project_processingissues.py b/src/sentry/api/endpoints/project_processingissues.py
index 6e89c45b95..281dd742a6 100644
--- a/src/sentry/api/endpoints/project_processingissues.py
+++ b/src/sentry/api/endpoints/project_processingissues.py
@@ -33,6 +33,7 @@ class ProjectProcessingIssuesFixEndpoint(ProjectEndpoint):
         resp = render_to_response('sentry/reprocessing-script.sh', {
             'issues': [{
                 'uuid': issue.data.get('image_uuid'),
+                'arch': issue.data.get('image_arch'),
                 'name': (issue.data.get('image_path') or '').split('/')[-1]
             } for issue in ProcessingIssue.objects.filter(
                 project=project
diff --git a/src/sentry/templates/sentry/reprocessing-script.sh b/src/sentry/templates/sentry/reprocessing-script.sh
index 1d92bab7a1..97eed192fa 100644
--- a/src/sentry/templates/sentry/reprocessing-script.sh
+++ b/src/sentry/templates/sentry/reprocessing-script.sh
@@ -1,14 +1,16 @@
-{% autoescape off %}#!/bin/sh
+{% load i18n %}{% autoescape off %}#!/bin/sh
 set -eu
+SIGN=$'\033[2m>\033[0m'
 
 {% if not token %}
-echo 'üòï  The link you followed expired.'
+echo 'error: the link you followed expired.'
 exit 1
 {% elif issues %}
-echo "There are currently {{ issues|length }} missing debug symbols:"
+echo "{% blocktrans count issues=issues|length %}Looking for {{ issues }} missing debug symbol{% plural %}Looking for {{ issues }} missing debug symbols:{% endblocktrans %}"
 {% for issue in issues %}
-  echo "   - {{ issue.uuid }}  [{{ issue.name }}]"
+  echo $'  \033[2m{{ issue.uuid }}\033[0m ({{ issue.name }}; {{ issue.arch }})'
 {% endfor %}
+echo
 
 DOWNLOAD_URL="https://github.com/getsentry/sentry-cli/releases/download/1.7.0/sentry-cli-Darwin-x86_64"
 TEMP_FILE=`mktemp "${TMPDIR:-/tmp}/.sentrycli.XXXXXXXX"`
@@ -16,23 +18,26 @@ cleanup() {
   rm -f "$TEMP_FILE"
 }
 trap cleanup EXIT
-echo "üîó  Fetching sentry-cli utility"
-curl -SL --progress-bar "$DOWNLOAD_URL" > "$TEMP_FILE"
+echo "$SIGN Fetching sentry-cli utility"
+download_start=`date +%s`
+curl -SL --progress-bar "$DOWNLOAD_URL" -o "$TEMP_FILE" 2>&1 | tr -u '#' '‚ñà'
 chmod +x "$TEMP_FILE"
+download_end=`date +%s`
 CLI="$TEMP_FILE"
 echo -n $'\033[2A\033[K'
-echo "‚öôÔ∏è  Fetched sentry-cli utility"
+echo "$SIGN Fetched sentry-cli utility in $((download_end-download_start))s"
 echo -n $'\033[K'
-echo "üëÄ  Looking for debug symbols"
+echo "$SIGN Looking for debug symbols"
 
 export SENTRY_AUTH_TOKEN="{{ token }}"
 export SENTRY_URL="{{ server_url }}"
 export SENTRY_ORG="{{ project.organization.slug }}"
 export SENTRY_PROJECT="{{ project.slug }}"
 
-"$CLI" upload-dsym --derived-data --no-zips{% for issue in issues %} --uuid {{ issue.uuid }}{% endfor %}
-echo 'üåü  Done!'
+"$CLI" upload-dsym --derived-data --no-zips{% for issue in issues %} --uuid {{ issue.uuid }}{% endfor %} --require-all
+echo
+echo $'\033[32mSuccessfully found all symbols!\033[0m'
 {% else %}
-echo 'üéâ  Good news. No missing debug symbols!  Nothing to do here.'
+echo 'There are currently no missing debug symbols for {{ project.team.name }}/{{ project.name }}'
 {% endif %}
 {% endautoescape %}
