commit 8351ac5ad761bece56221585e6891b5d29ef3040
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Aug 20 11:26:24 2018 -0700

    fix(ownership): All unverified emails to be used
    
    This restores the old behavior which didn't assert the email was
    verified. The previous patch caused a regression then in this regard
    while trying to add users without verified emails.

diff --git a/src/sentry/models/projectownership.py b/src/sentry/models/projectownership.py
index a40778160e..363d6d368a 100644
--- a/src/sentry/models/projectownership.py
+++ b/src/sentry/models/projectownership.py
@@ -97,7 +97,8 @@ def resolve_actors(owners, project_id):
                     operator.or_,
                     [Q(emails__email__iexact=o.identifier) for o in users]
                 ),
-                emails__is_verified=True,
+                # We don't require verified emails
+                # emails__is_verified=True,
                 is_active=True,
                 sentry_orgmember_set__organizationmemberteam__team__projectteam__project_id=project_id,
             ).distinct().values_list('id', 'emails__email')
diff --git a/tests/sentry/models/test_projectownership.py b/tests/sentry/models/test_projectownership.py
index da939c410d..f704fc4963 100644
--- a/tests/sentry/models/test_projectownership.py
+++ b/tests/sentry/models/test_projectownership.py
@@ -143,7 +143,9 @@ class ResolveActorsTestCase(TestCase):
         # Another secondary email, that isn't verified
         email2 = self.create_useremail(self.user, None, is_verified=False).email
         owner3 = Owner('user', email2)
-        actor3 = None
+        # Intentionally allow unverified emails
+        # actor3 = None
+        actor3 = actor1
 
         # An entirely unknown user
         owner4 = Owner('user', 'nope')
