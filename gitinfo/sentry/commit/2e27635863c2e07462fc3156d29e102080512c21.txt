commit 2e27635863c2e07462fc3156d29e102080512c21
Author: Jess MacQueen <macqueen@users.noreply.github.com>
Date:   Tue May 2 17:50:36 2017 -0700

    don't try to pull commit from db in fetch_commits (#5334)

diff --git a/src/sentry/tasks/commits.py b/src/sentry/tasks/commits.py
index f2e25cdfa0..89a1f75937 100644
--- a/src/sentry/tasks/commits.py
+++ b/src/sentry/tasks/commits.py
@@ -36,15 +36,6 @@ def fetch_commits(release_id, user_id, refs, prev_release_id=None, **kwargs):
         except Repository.DoesNotExist:
             continue
 
-        try:
-            commit = Commit.objects.get(
-                organization_id=release.organization_id,
-                repository_id=repo.id,
-                key=ref['commit'],
-            )
-        except Commit.DoesNotExist:
-            continue
-
         try:
             provider_cls = bindings.get('repository.provider').get(repo.provider)
         except KeyError:
@@ -66,7 +57,7 @@ def fetch_commits(release_id, user_id, refs, prev_release_id=None, **kwargs):
         else:
             continue
 
-        end_sha = commit.key
+        end_sha = ref['commit']
         provider = provider_cls(id=repo.provider)
         try:
             repo_commits = provider.compare_commits(
