commit 1f944c2284585dfa2dd78679ea7495a4c5a28798
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Wed Oct 26 21:28:07 2016 -0700

    api: ignore garbage origin input data

diff --git a/src/sentry/utils/http.py b/src/sentry/utils/http.py
index 3414591171..a0f85ba7f7 100644
--- a/src/sentry/utils/http.py
+++ b/src/sentry/utils/http.py
@@ -155,7 +155,12 @@ def is_valid_origin(origin, project=None, allowed=None):
     if parsed.hostname is None:
         return False
 
-    parsed_hostname = parsed.hostname.encode('idna')
+    try:
+        parsed_hostname = parsed.hostname.encode('idna')
+    except UnicodeError:
+        # We sometimes shove in some garbage input here, so just opting to ignore and carry on
+        parsed_hostname = parsed.hostname
+
     if parsed.port:
         parsed_netloc = '%s:%d' % (parsed_hostname, parsed.port)
     else:
