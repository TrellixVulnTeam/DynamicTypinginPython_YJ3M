commit a0fa10bb4d530544227e3bb9a4642fe91d52feb8
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Fri Oct 18 10:46:46 2019 -0700

    chore(ts): Convert components/alert (#14703)

diff --git a/package.json b/package.json
index 762478eb0d..4e52b0e470 100644
--- a/package.json
+++ b/package.json
@@ -24,6 +24,7 @@
     "@types/clipboard": "^2.0.1",
     "@types/create-react-class": "^15.6.2",
     "@types/echarts": "^4.1.11",
+    "@types/color": "^3.0.0",
     "@types/jest": "^24.0.17",
     "@types/jquery": "^2.0.53",
     "@types/js-cookie": "^2.2.2",
diff --git a/src/sentry/static/sentry/app/components/alert.jsx b/src/sentry/static/sentry/app/components/alert.tsx
similarity index 55%
rename from src/sentry/static/sentry/app/components/alert.jsx
rename to src/sentry/static/sentry/app/components/alert.tsx
index a8cdf4de18..3274ed6b23 100644
--- a/src/sentry/static/sentry/app/components/alert.jsx
+++ b/src/sentry/static/sentry/app/components/alert.tsx
@@ -6,14 +6,35 @@ import styled from 'react-emotion';
 
 import InlineSvg from 'app/components/inlineSvg';
 import TextBlock from 'app/views/settings/components/text/textBlock';
-import isPropValid from '@emotion/is-prop-valid';
 import space from 'app/styles/space';
 
-const StyledInlineSvg = styled(InlineSvg)`
+type Props = {
+  type?: 'muted' | 'info' | 'warning' | 'success' | 'error' | 'beta';
+  iconSize?: string;
+  icon?: string;
+  alignTop?: boolean;
+  system?: boolean;
+};
+
+type AlertProps = Omit<React.HTMLProps<HTMLDivElement>, keyof Props> & Props;
+
+type AlertThemeProps = {
+  backgroundLight: string;
+  border: string;
+  iconColor: string;
+};
+
+const DEFAULT_TYPE = 'info';
+
+const StyledInlineSvg = styled(InlineSvg)<{size: string}>`
   margin-right: calc(${p => p.size} / 2);
 `;
 
-const getAlertColorStyles = ({backgroundLight, border, iconColor}) => `
+const getAlertColorStyles = ({
+  backgroundLight,
+  border,
+  iconColor,
+}: AlertThemeProps) => css`
   background: ${backgroundLight};
   border: 1px solid ${border};
 
@@ -22,19 +43,25 @@ const getAlertColorStyles = ({backgroundLight, border, iconColor}) => `
   }
 `;
 
-const getSystemAlertColorStyles = ({backgroundLight, border, iconColor}) => `
+const getSystemAlertColorStyles = ({border, iconColor}: AlertThemeProps) => css`
   border: 0;
   border-radius: 0;
-  border-bottom: 1px solid ${color(border)
-    .alpha(0.5)
-    .string()};
+  border-bottom: 1px solid
+    ${color(border)
+      .alpha(0.5)
+      .string()};
 
   ${StyledInlineSvg} {
     color: ${iconColor};
   }
 `;
 
-const alertStyles = ({theme, type, system, alignTop}) => css`
+const alertStyles = ({
+  theme,
+  type = DEFAULT_TYPE,
+  system,
+  alignTop,
+}: Props & {theme: any}) => css`
   display: flex;
   margin: 0 0 ${space(3)};
   padding: ${space(2)};
@@ -54,10 +81,6 @@ const alertStyles = ({theme, type, system, alignTop}) => css`
   ${system && getSystemAlertColorStyles(theme.alert[type])};
 `;
 
-const AlertWrapper = styled('div', {shouldForwardProp: isPropValid})`
-  ${alertStyles}
-`;
-
 const StyledTextBlock = styled(TextBlock)`
   line-height: 1.4;
   margin-bottom: 0;
@@ -65,32 +88,28 @@ const StyledTextBlock = styled(TextBlock)`
   align-self: center;
 `;
 
-const Alert = ({type, icon, iconSize, children, className, ...props}) => {
-  let refClass;
-
-  if (type) {
-    refClass = 'ref-' + type;
-  }
-
-  return (
-    <AlertWrapper type={type} {...props} className={cx(refClass, className)}>
-      {icon && <StyledInlineSvg src={icon} size={iconSize} />}
+const Alert = styled(
+  ({type, icon, iconSize, children, system, className, ...props}: AlertProps) => (
+    <div className={cx(type ? `ref-${type}` : '', className)} {...props}>
+      {icon && <StyledInlineSvg src={icon} size={iconSize!} />}
       <StyledTextBlock>{children}</StyledTextBlock>
-    </AlertWrapper>
-  );
-};
+    </div>
+  )
+)<AlertProps>`
+  ${alertStyles}
+`;
 
 Alert.propTypes = {
-  type: PropTypes.string,
-  icon: PropTypes.string,
+  type: PropTypes.oneOf(['muted', 'info', 'warning', 'success', 'error', 'beta']),
   iconSize: PropTypes.string,
+  icon: PropTypes.string,
   alignTop: PropTypes.bool,
+  system: PropTypes.bool,
 };
 
 Alert.defaultProps = {
+  type: DEFAULT_TYPE,
   iconSize: '24px',
-  type: 'info',
-  alignTop: false,
 };
 
 export {alertStyles};
diff --git a/tests/js/spec/components/__snapshots__/confirmDelete.spec.jsx.snap b/tests/js/spec/components/__snapshots__/confirmDelete.spec.jsx.snap
index 088dd23616..54c7df2ddb 100644
--- a/tests/js/spec/components/__snapshots__/confirmDelete.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/confirmDelete.spec.jsx.snap
@@ -31,28 +31,26 @@ exports[`ConfirmDelete renders 1`] = `
           className="modal-body"
         >
           <Alert
-            alignTop={false}
             iconSize="24px"
             type="error"
           >
-            <AlertWrapper
-              alignTop={false}
-              className="ref-error"
+            <Component
+              className="css-1i4sr27-Alert-getAlertColorStyles-alertStyles ejthpj82"
+              iconSize="24px"
               type="error"
             >
               <div
-                className="ref-error css-1wei48e-AlertWrapper-alertStyles e1xb5l7j1"
-                type="error"
+                className="ref-error css-1i4sr27-Alert-getAlertColorStyles-alertStyles ejthpj82"
               >
                 <StyledTextBlock>
                   <div
-                    className="css-1h3n7tg-TextBlock-StyledTextBlock e1xb5l7j2"
+                    className="css-1h3n7tg-TextBlock-StyledTextBlock ejthpj81"
                   >
                     Are you sure?
                   </div>
                 </StyledTextBlock>
               </div>
-            </AlertWrapper>
+            </Component>
           </Alert>
           <Field
             alignRight={false}
diff --git a/tests/js/spec/components/events/__snapshots__/sdkUpdates.spec.jsx.snap b/tests/js/spec/components/events/__snapshots__/sdkUpdates.spec.jsx.snap
index b0616d3c51..18e0c58e7c 100644
--- a/tests/js/spec/components/events/__snapshots__/sdkUpdates.spec.jsx.snap
+++ b/tests/js/spec/components/events/__snapshots__/sdkUpdates.spec.jsx.snap
@@ -32,32 +32,31 @@ exports[`EventSdkUpdates renders a suggestion to update the sdk and then enable
     className="box"
   >
     <Alert
-      alignTop={false}
       icon="icon-upgrade"
       iconSize="24px"
       key="{\\"enables\\":[{\\"enables\\":[],\\"type\\":\\"enableIntegration\\"}],\\"newSdkVersion\\":\\"0.9.0\\",\\"sdkName\\":\\"sentry.python\\",\\"sdkUrl\\":null,\\"type\\":\\"updateSdk\\"}"
       type="info"
     >
-      <AlertWrapper
-        alignTop={false}
-        className="ref-info"
+      <Component
+        className="css-1qyfu5r-Alert-getAlertColorStyles-alertStyles ejthpj82"
+        icon="icon-upgrade"
+        iconSize="24px"
         type="info"
       >
         <div
-          className="ref-info css-tnorzn-AlertWrapper-alertStyles e1xb5l7j1"
-          type="info"
+          className="ref-info css-1qyfu5r-Alert-getAlertColorStyles-alertStyles ejthpj82"
         >
           <StyledInlineSvg
             size="24px"
             src="icon-upgrade"
           >
             <ForwardRef
-              className="css-1kox7bj-InlineSvg-StyledInlineSvg e1xb5l7j0"
+              className="css-1kox7bj-InlineSvg-StyledInlineSvg ejthpj80"
               size="24px"
               src="icon-upgrade"
             >
               <svg
-                className="css-1kox7bj-InlineSvg-StyledInlineSvg e1xb5l7j0"
+                className="css-1kox7bj-InlineSvg-StyledInlineSvg ejthpj80"
                 height="24px"
                 viewBox={Object {}}
                 width="24px"
@@ -71,7 +70,7 @@ exports[`EventSdkUpdates renders a suggestion to update the sdk and then enable
           </StyledInlineSvg>
           <StyledTextBlock>
             <div
-              className="css-1h3n7tg-TextBlock-StyledTextBlock e1xb5l7j2"
+              className="css-1h3n7tg-TextBlock-StyledTextBlock ejthpj81"
             >
               We recommend you 
               <EventSdkUpdateSuggestion
@@ -184,7 +183,7 @@ exports[`EventSdkUpdates renders a suggestion to update the sdk and then enable
             </div>
           </StyledTextBlock>
         </div>
-      </AlertWrapper>
+      </Component>
     </Alert>
   </div>
 </EventSdkUpdates>
diff --git a/tests/js/spec/components/modals/__snapshots__/integrationDetailsModal.spec.jsx.snap b/tests/js/spec/components/modals/__snapshots__/integrationDetailsModal.spec.jsx.snap
index 000e7b1762..774776faab 100644
--- a/tests/js/spec/components/modals/__snapshots__/integrationDetailsModal.spec.jsx.snap
+++ b/tests/js/spec/components/modals/__snapshots__/integrationDetailsModal.spec.jsx.snap
@@ -326,23 +326,21 @@ exports[`IntegrationDetailsModal renders simple integration 1`] = `
     </Base>
   </Metadata>
   <Alert
-    alignTop={false}
     iconSize="24px"
     key="0"
     type="warning"
   >
-    <AlertWrapper
-      alignTop={false}
-      className="ref-warning"
+    <Component
+      className="css-1g6nbgo-Alert-getAlertColorStyles-alertStyles ejthpj82"
+      iconSize="24px"
       type="warning"
     >
       <div
-        className="ref-warning css-osoqhl-AlertWrapper-alertStyles e1xb5l7j1"
-        type="warning"
+        className="ref-warning css-1g6nbgo-Alert-getAlertColorStyles-alertStyles ejthpj82"
       >
         <StyledTextBlock>
           <div
-            className="css-1h3n7tg-TextBlock-StyledTextBlock e1xb5l7j2"
+            className="css-1h3n7tg-TextBlock-StyledTextBlock ejthpj81"
           >
             <span
               dangerouslySetInnerHTML={
@@ -354,7 +352,7 @@ exports[`IntegrationDetailsModal renders simple integration 1`] = `
           </div>
         </StyledTextBlock>
       </div>
-    </AlertWrapper>
+    </Component>
   </Alert>
   <IntegrationFeatures
     features={
diff --git a/yarn.lock b/yarn.lock
index 12e64df25a..1004ebcbbd 100644
--- a/yarn.lock
+++ b/yarn.lock
@@ -2074,6 +2074,25 @@
   resolved "https://registry.yarnpkg.com/@types/clipboard/-/clipboard-2.0.1.tgz#75a74086c293d75b12bc93ff13bc7797fef05a40"
   integrity sha512-gJJX9Jjdt3bIAePQRRjYWG20dIhAgEqonguyHxXuqALxsoDsDLimihqrSg8fXgVTJ4KZCzkfglKtwsh/8dLfbA==
 
+"@types/color-convert@*":
+  version "1.9.0"
+  resolved "https://registry.yarnpkg.com/@types/color-convert/-/color-convert-1.9.0.tgz#bfa8203e41e7c65471e9841d7e306a7cd8b5172d"
+  integrity sha512-OKGEfULrvSL2VRbkl/gnjjgbbF7ycIlpSsX7Nkab4MOWi5XxmgBYvuiQ7lcCFY5cPDz7MUNaKgxte2VRmtr4Fg==
+  dependencies:
+    "@types/color-name" "*"
+
+"@types/color-name@*":
+  version "1.1.1"
+  resolved "https://registry.yarnpkg.com/@types/color-name/-/color-name-1.1.1.tgz#1c1261bbeaa10a8055bbc5d8ab84b7b2afc846a0"
+  integrity sha512-rr+OQyAjxze7GgWrSaJwydHStIhHq2lvY3BOC2Mj7KnzI7XK0Uw1TOOdI9lDoajEbSWLiYgoo4f1R51erQfhPQ==
+
+"@types/color@^3.0.0":
+  version "3.0.0"
+  resolved "https://registry.yarnpkg.com/@types/color/-/color-3.0.0.tgz#40f8a6bf2fd86e969876b339a837d8ff1b0a6e30"
+  integrity sha512-5qqtNia+m2I0/85+pd2YzAXaTyKO8j+svirO5aN+XaQJ5+eZ8nx0jPtEWZLxCi50xwYsX10xUHetFzfb1WEs4Q==
+  dependencies:
+    "@types/color-convert" "*"
+
 "@types/create-react-class@^15.6.2":
   version "15.6.2"
   resolved "https://registry.yarnpkg.com/@types/create-react-class/-/create-react-class-15.6.2.tgz#0e1b89153be31ded959359c2b827cceaa9d18cf6"
