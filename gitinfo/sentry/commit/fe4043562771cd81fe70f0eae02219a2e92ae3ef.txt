commit fe4043562771cd81fe70f0eae02219a2e92ae3ef
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Apr 13 18:45:21 2013 -0700

    Update wall display urls

diff --git a/src/sentry/templates/sentry/wall.html b/src/sentry/templates/sentry/wall.html
index f283b96350..f39cf8e0e3 100644
--- a/src/sentry/templates/sentry/wall.html
+++ b/src/sentry/templates/sentry/wall.html
@@ -10,7 +10,7 @@
 {% endblock %}
 
 {% block body %}
-    <div class="container-fluid" id="stats" data-uri="{% url 'sentry-api-stats' %}?minutes=1440">
+    <div class="container-fluid" id="stats" data-uri="{% url 'sentry-api-stats' team.slug %}?minutes=1440">
         <div class="row-fluid">
             <div class="span4" data-stat="events">
                 <big>???</big>
@@ -24,7 +24,7 @@
     </div>
     <div class="container-fluid" id="chart">
         <div class="row-fluid">
-            <div class="chart" data-api-url="{% url 'sentry-api-chart' %}">
+            <div class="chart" data-api-url="{% url 'sentry-api-chart' team.slug %}">
                 <span class="loading">{% trans "Loading historical data..." %}</span>
             </div>
         </div>
@@ -33,7 +33,7 @@
         <div class="row-fluid">
             <div class="span6">
                 <ul class="nav nav-labels">
-                    <li class="active"><a href="#trending" data-toggle="ajtab" data-uri="{% url 'sentry-api-groups-trends' %}?minutes=1440&amp;limit=5">{% trans "Trending" %}</a></li>
+                    <li class="active"><a href="#trending" data-toggle="ajtab" data-uri="{% url 'sentry-api-groups-trends' team.slug %}?minutes=1440&amp;limit=5">{% trans "Trending" %}</a></li>
                 </ul>
                 <div class="tab-content">
                     <div class="tab-pane active" id="trending"><p>Loading ...</p></div>
@@ -41,7 +41,7 @@
             </div>
             <div class="span6">
                 <ul class="nav nav-labels">
-                    <li class="active"><a href="#new" data-toggle="ajtab" data-uri="{% url 'sentry-api-groups-new' %}?minutes=1440&amp;limit=5">{% trans "New" %}</a></li>
+                    <li class="active"><a href="#new" data-toggle="ajtab" data-uri="{% url 'sentry-api-groups-new' team.slug %}?minutes=1440&amp;limit=5">{% trans "New" %}</a></li>
                 </ul>
                 <div class="tab-content">
                     <div class="tab-pane active" id="new"><p>Loading ...</p></div>
diff --git a/src/sentry/web/frontend/generic.py b/src/sentry/web/frontend/generic.py
index 1672b242db..4e4b648870 100644
--- a/src/sentry/web/frontend/generic.py
+++ b/src/sentry/web/frontend/generic.py
@@ -51,10 +51,6 @@ def dashboard(request, template='dashboard.html'):
     return HttpResponseRedirect(reverse('sentry', args=[team.slug]))
 
 
-def wall_display(request):
-    return dashboard(request, 'wall.html')
-
-
 def static_media(request, **kwargs):
     """
     Serve static files below a given point in the directory structure.
diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index aa0398a468..2b47b07569 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -225,6 +225,21 @@ def dashboard(request, team):
     }, request)
 
 
+@login_required
+@has_access
+def wall_display(request, team):
+    project_list = list(Project.objects.filter(team=team))
+
+    for project in project_list:
+        project.team = team
+
+    return render_to_response('sentry/wall.html', {
+        'team': team,
+        'project_list': project_list,
+        'SECTION': 'events',
+    }, request)
+
+
 @login_required
 @has_access
 def search(request, team, project):
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 877c827efa..bf5df4409c 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -146,8 +146,6 @@ urlpatterns = patterns('',
     # Generic
     url(r'^$', generic.dashboard,
         name='sentry'),
-    url(r'^wall/$', generic.wall_display,
-        name='sentry-wall'),
 
     # Admin
     url(r'^manage/status/$', admin.status_env,
@@ -234,6 +232,10 @@ urlpatterns = patterns('',
     url(r'^api/(?P<team_slug>[\w_-]+)/projects/search/$', api.search_projects,
         name='sentry-api-search-projects'),
 
+    # TV dashboard
+    url(r'^(?P<team_slug>[\w_-]+)/wall/$', groups.wall_display,
+        name='sentry-wall'),
+
     # Team-wide alerts
     url(r'^(?P<team_slug>[\w_-]+)/show/alerts/$', alerts.alert_list,
         name='sentry-alerts'),
