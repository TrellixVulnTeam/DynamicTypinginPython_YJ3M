commit aa5e186f4a20b270b27263a044401e1ce7824b10
Author: Wessie <wessie@r-a-d.io>
Date:   Wed Mar 6 20:33:48 2013 +0100

    Added the CREATE_ISSUE event to the activity feed
    
    This adds the CREATE_ISSUE type. Any issue plugins that inherit from the
    bases\issue\IssuePlugin right now will automatically use this new
    feature.

diff --git a/src/sentry/models.py b/src/sentry/models.py
index 1fd53ab5bf..a8fa021b42 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -1005,6 +1005,7 @@ class Activity(Model):
     SET_PUBLIC = 4
     SET_PRIVATE = 5
     SET_REGRESSION = 6
+    CREATE_ISSUE = 7
 
     TYPE = (
         # (TYPE, verb-slug)
@@ -1015,6 +1016,7 @@ class Activity(Model):
         (SET_PUBLIC, 'set_public'),
         (SET_PRIVATE, 'set_private'),
         (SET_REGRESSION, 'set_regression'),
+        (CREATE_ISSUE, 'create_issue'),
     )
 
     project = models.ForeignKey(Project)
diff --git a/src/sentry/plugins/bases/issue.py b/src/sentry/plugins/bases/issue.py
index d2766f165a..7bd00ac76b 100644
--- a/src/sentry/plugins/bases/issue.py
+++ b/src/sentry/plugins/bases/issue.py
@@ -168,6 +168,19 @@ class IssuePlugin(Plugin):
                 )
             except forms.ValidationError, e:
                 form.errors['__all__'] = [u'Error creating issue: %s' % e]
+            else:
+                issue_information = {
+                    'title': form.cleaned_data['title'],
+                    'provider': self.get_title(),
+                    'location': self.get_issue_url(group, issue_id),
+                }
+                Activity.objects.create(
+                    project=group.project,
+                    group=group,
+                    type=Activity.CREATE_ISSUE,
+                    user=request.user,
+                    data=issue_information,
+                    )
 
         if form.is_valid():
             GroupMeta.objects.set_value(group, '%s:tid' % prefix, issue_id)
diff --git a/src/sentry/templatetags/sentry_activity.py b/src/sentry/templatetags/sentry_activity.py
index 8b22eb301e..4391d5f81a 100644
--- a/src/sentry/templatetags/sentry_activity.py
+++ b/src/sentry/templatetags/sentry_activity.py
@@ -24,6 +24,7 @@ ACTIVITY_ACTION_STRINGS = {
     Activity.SET_PUBLIC: 'made this event public',
     Activity.SET_PRIVATE: 'made this event private',
     Activity.SET_REGRESSION: 'marked this event as a regression',
+    Activity.CREATE_ISSUE: 'created an issue on {provider:s} titled <a href="{location:s}">{title:s}</a>',
 }
 
 
@@ -35,6 +36,9 @@ def render_activity(item):
 
     action_str = ACTIVITY_ACTION_STRINGS[item.type]
 
+    if item.type == Activity.CREATE_ISSUE:
+        action_str = action_str.format(**item.data)
+
     output = ''
 
     if item.user:
