commit 9ee1ce6e2741b5b2099608b7ce948d8613185a6e
Author: ckj <chriskjennings@gmail.com>
Date:   Tue Jan 5 15:33:07 2016 -0800

    Clip long comment bubbles on dashboard

diff --git a/src/sentry/static/sentry/app/components/activity/item.jsx b/src/sentry/static/sentry/app/components/activity/item.jsx
index 8b460a06a8..d7f3d84c90 100644
--- a/src/sentry/static/sentry/app/components/activity/item.jsx
+++ b/src/sentry/static/sentry/app/components/activity/item.jsx
@@ -12,6 +12,35 @@ import {tct} from '../../locale';
 
 
 const ActivityItem = React.createClass({
+
+  getDefaultProps() {
+    return {
+      defaultClipped: false,
+      clipHeight: 68
+    };
+  },
+
+  getInitialState() {
+    return {
+      clipped: this.props.defaultClipped
+    };
+  },
+
+  componentDidMount() {
+    if (this.refs.activityBubble) {
+      let bubbleHeight = this.refs.activityBubble.offsetHeight;
+
+      if (bubbleHeight > this.props.clipHeight ) {
+        /*eslint react/no-did-mount-set-state:0*/
+        // okay if this causes re-render; cannot determine until
+        // rendered first anyways
+        this.setState({
+          clipped: true
+        });
+      }
+    }
+  },
+
   formatProjectActivity(author, item) {
     let data = item.data;
     let orgId = this.props.orgId;
@@ -144,6 +173,11 @@ const ActivityItem = React.createClass({
   render() {
     let item = this.props.item;
 
+    let bubbleClassName = 'activity-item-bubble';
+    if (this.state.clipped) {
+      bubbleClassName += ' clipped';
+    }
+
     let avatar = (item.user ?
       <Gravatar email={item.user.email} size={64} className="avatar" /> :
       <div className="avatar sentry"><span className="icon-sentry-logo"></span></div>);
@@ -166,7 +200,7 @@ const ActivityItem = React.createClass({
               item
             )}
             <TimeSince date={item.dateCreated} />
-            <div className="activity-item-bubble" dangerouslySetInnerHTML={{__html: noteBody}} />
+            <div className={bubbleClassName} ref="activityBubble" dangerouslySetInnerHTML={{__html: noteBody}} />
           </div>
         </li>
       );
diff --git a/src/sentry/static/sentry/less/group-detail.less b/src/sentry/static/sentry/less/group-detail.less
index c50528d7c5..462aca94d0 100644
--- a/src/sentry/static/sentry/less/group-detail.less
+++ b/src/sentry/static/sentry/less/group-detail.less
@@ -675,15 +675,42 @@
         .activity-item-bubble {
           margin-top: 4px;
           padding: 6px 8px 4px;
-          border: 1px solid @gray-lighter;
+          border: 1px solid @trim;
           border-radius: 3px;
-          box-shadow: 0 1px 1px rgba(0,0,0, .06);
+          box-shadow: 0 1px 1px rgba(0,0,0, .04);
+          position: relative;
+          overflow: hidden;
+
+          a {
+            max-width: 100%;
+            display: inline-block;
+            overflow-x: hidden;
+            text-overflow: ellipsis;
+          }
 
           p {
             &:last-child {
               margin-bottom: 0;
             }
           }
+
+          &.clipped {
+            max-height: 68px;
+
+            &:after {
+              position: absolute;
+              content: "";
+              display: block;
+              bottom: 0;
+              right: 0;
+              left: 0;
+              height: 36px;
+              #gradient > .vertical(rgba(255, 255, 255, .15), rgba(255,255,255, 1));
+              border-bottom: 6px solid #fff;
+              border-radius: 0 0 3px 3px;
+              pointer-events: none;
+            }
+          }
         }
 
         &:before {
