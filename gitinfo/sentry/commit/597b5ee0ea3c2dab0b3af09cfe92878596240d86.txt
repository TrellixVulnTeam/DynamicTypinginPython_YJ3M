commit 597b5ee0ea3c2dab0b3af09cfe92878596240d86
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Jun 24 15:04:55 2016 -0700

    Tweak context tags

diff --git a/src/sentry/interfaces/contexts.py b/src/sentry/interfaces/contexts.py
index 9c0c416abf..c6569fb7c7 100644
--- a/src/sentry/interfaces/contexts.py
+++ b/src/sentry/interfaces/contexts.py
@@ -40,8 +40,13 @@ class ContextType(object):
 
     def iter_tags(self):
         for field, f_string in self.indexed_fields.iteritems():
-            value = f_string.format(**self.data).strip()
+            try:
+                value = f_string.format(**self.data).strip()
+            except KeyError:
+                continue
             if value:
+                if not field:
+                    yield (self.alias, value)
                 yield ('%s.%s' % (self.alias, field), value)
 
 
@@ -54,8 +59,7 @@ class DefaultContextType(ContextType):
 @contexttype('device')
 class DeviceContextType(ContextType):
     indexed_fields = {
-        'name': '{name}',
-        'model': '{model}',
+        '': '{model}',
     }
     # model_id, arch
 
@@ -63,7 +67,7 @@ class DeviceContextType(ContextType):
 @contexttype('runtime')
 class RuntimeContextType(ContextType):
     indexed_fields = {
-        'name': '{name}',
+        '': '{name}',
         'version': '{name} {version}',
     }
 
@@ -71,7 +75,7 @@ class RuntimeContextType(ContextType):
 @contexttype('browser')
 class BrowserContextType(ContextType):
     indexed_fields = {
-        'name': '{name}',
+        '': '{name}',
         'version': '{name} {version}',
     }
     # viewport
@@ -80,7 +84,7 @@ class BrowserContextType(ContextType):
 @contexttype('os')
 class OsContextType(ContextType):
     indexed_fields = {
-        'name': '{name}',
+        '': '{name}',
         'version': '{name} {version}',
     }
     # build
