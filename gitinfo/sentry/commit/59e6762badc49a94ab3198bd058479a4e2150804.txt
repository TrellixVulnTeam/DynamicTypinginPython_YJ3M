commit 59e6762badc49a94ab3198bd058479a4e2150804
Author: David Cramer <dcramer@gmail.com>
Date:   Tue May 20 00:01:40 2014 -0700

    Dont serialize empty object values in interfaces

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index bc2e7b8b88..0b62438f4b 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -628,7 +628,7 @@ SENTRY_MAX_EXTRA_VARIABLE_SIZE = 4096
 SENTRY_MAX_DICTIONARY_ITEMS = 50
 
 SENTRY_MAX_MESSAGE_LENGTH = 1024 * 10
-SENTRY_MAX_STACKTRACE_FRAMES = 50
+SENTRY_MAX_STACKTRACE_FRAMES = 25
 
 # Gravatar service base url
 SENTRY_GRAVATAR_BASE_URL = 'https://secure.gravatar.com'
diff --git a/src/sentry/interfaces/base.py b/src/sentry/interfaces/base.py
index 400486699e..0df8a5bbb7 100644
--- a/src/sentry/interfaces/base.py
+++ b/src/sentry/interfaces/base.py
@@ -38,7 +38,10 @@ class Interface(object):
         return cls(data)
 
     def to_json(self):
-        return self._data.copy()
+        return dict(
+            (k, v) for k, v in self._data.iteritems()
+            if v is not None
+        )
 
     def get_alias(self):
         return self.get_slug()
diff --git a/tests/sentry/interfaces/test_user.py b/tests/sentry/interfaces/test_user.py
index a4647d376f..c6bd6ce750 100644
--- a/tests/sentry/interfaces/test_user.py
+++ b/tests/sentry/interfaces/test_user.py
@@ -26,9 +26,7 @@ class UserTest(TestCase):
     def test_serialize_behavior(self):
         assert self.interface.to_json() == {
             'id': 1,
-            'username': None,
             'email': 'lol@example.com',
-            'ip_address': None,
             'data': {'favorite_color': 'brown'}
         }
 
