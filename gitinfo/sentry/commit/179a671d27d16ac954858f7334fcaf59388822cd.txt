commit 179a671d27d16ac954858f7334fcaf59388822cd
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Mon Apr 23 13:43:21 2018 -0700

    build(pre-commit): Allow staging patches after autoformat to be optional (#8113)

diff --git a/src/sentry/lint/engine.py b/src/sentry/lint/engine.py
index ec66802374..7c74b1785a 100644
--- a/src/sentry/lint/engine.py
+++ b/src/sentry/lint/engine.py
@@ -300,9 +300,11 @@ def run_formatter(cmd, file_list, prompt_on_changes=True):
                 if fp.readline().strip().lower() != 'y':
                     echo(
                         '[sentry.lint] Aborted! Changes have been applied but not staged.', err=True)
-                    sys.exit(1)
-        status = subprocess.Popen(
-            ['git', 'update-index', '--add'] + file_list).wait()
+                    if not os.environ.get('SENTRY_SKIP_FORCE_PATCH'):
+                        sys.exit(1)
+                else:
+                    status = subprocess.Popen(
+                        ['git', 'update-index', '--add'] + file_list).wait()
         has_errors = status != 0
     return has_errors
 
