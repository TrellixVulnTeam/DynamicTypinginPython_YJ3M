commit 063d6a09374d825af204e3e908eb13d30b2dfd6a
Author: David Cramer <dcramer@gmail.com>
Date:   Wed May 7 00:14:31 2014 -0700

    Remove use of Event.server_name

diff --git a/src/sentry/manager.py b/src/sentry/manager.py
index aa85a3c400..fa209fd88a 100644
--- a/src/sentry/manager.py
+++ b/src/sentry/manager.py
@@ -280,7 +280,6 @@ class GroupManager(BaseManager):
             project=project,
             event_id=event_id,
             data=data,
-            server_name=server_name,
             time_spent=time_spent,
             datetime=date,
             **kwargs
diff --git a/src/sentry/plugins/sentry_mail/models.py b/src/sentry/plugins/sentry_mail/models.py
index e9a755ddc9..16b967b56e 100644
--- a/src/sentry/plugins/sentry_mail/models.py
+++ b/src/sentry/plugins/sentry_mail/models.py
@@ -156,7 +156,6 @@ class MailPlugin(NotificationPlugin):
             'X-Sentry-Logger': event.logger,
             'X-Sentry-Logger-Level': event.get_level_display(),
             'X-Sentry-Project': project.name,
-            'X-Sentry-Server': event.server_name,
             'X-Sentry-Reply-To': group_id_to_email(group.pk),
         }
 
diff --git a/src/sentry/templates/sentry/partial/_event.html b/src/sentry/templates/sentry/partial/_event.html
index f33eb908c1..3d6eee4b6f 100644
--- a/src/sentry/templates/sentry/partial/_event.html
+++ b/src/sentry/templates/sentry/partial/_event.html
@@ -20,9 +20,6 @@
         </div>
         <p class="message" title="{{ event.message }}">
             <span class="tag tag-logger">{{ event.logger }}</span>
-            {% if event.server_name %}
-                <span class="tag">{{ event.server_name }}</span>
-            {% endif %}
             {% with event.get_version as version %}
                 {% if version %}
                     <span class="tag tag-version">{{ version.0 }} {{ version.1 }}</span>
diff --git a/tests/fixtures/cleanup.json b/tests/fixtures/cleanup.json
index 8a8cf7658b..a4bb2685c9 100644
--- a/tests/fixtures/cleanup.json
+++ b/tests/fixtures/cleanup.json
@@ -67,7 +67,6 @@
     "fields": {
       "project": 1,
       "group": 2,
-      "server_name": "dcramer.local",
       "level": 30,
       "checksum": "ed77d1185670a58e7242fde014d980e9",
       "datetime": "2010-08-31 17:50:47Z",
@@ -83,7 +82,6 @@
     "fields": {
       "project": 1,
       "group": 3,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "ff554a446687e950d719b0c996f55953",
       "datetime": "2010-08-31 17:53:31Z",
@@ -99,7 +97,6 @@
     "fields": {
       "project": 1,
       "group": 3,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "ff554a446687e950d719b0c996f55953",
       "datetime": "2010-08-31 17:53:31Z",
@@ -115,7 +112,6 @@
     "fields": {
       "project": 1,
       "group": 3,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "ff554a446687e950d719b0c996f55953",
       "datetime": "2010-08-31 17:53:31Z",
@@ -131,7 +127,6 @@
     "fields": {
       "project": 1,
       "group": 4,
-      "server_name": "node.local",
       "level": 40,
       "checksum": "561fd84df24b5ff5c4b24cf3ab757b3b",
       "datetime": "2010-08-31 17:53:53Z",
@@ -147,7 +142,6 @@
     "fields": {
       "project": 1,
       "group": 4,
-      "server_name": "node.local",
       "level": 40,
       "checksum": "561fd84df24b5ff5c4b24cf3ab757b3b",
       "datetime": "2010-08-31 17:53:54Z",
@@ -163,7 +157,6 @@
     "fields": {
       "project": 1,
       "group": 4,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "561fd84df24b5ff5c4b24cf3ab757b3b",
       "datetime": "2010-08-31 17:53:54Z",
@@ -179,7 +172,6 @@
     "fields": {
       "project": 1,
       "group": 5,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "e27c40cb7b42d2752efc37f4f7ecfb12",
       "datetime": "2010-08-31 17:54:23Z",
@@ -195,7 +187,6 @@
     "fields": {
       "project": 1,
       "group": 5,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "e27c40cb7b42d2752efc37f4f7ecfb12",
       "datetime": "2010-08-31 17:54:23Z",
@@ -211,7 +202,6 @@
     "fields": {
       "project": 1,
       "group": 5,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "e27c40cb7b42d2752efc37f4f7ecfb12",
       "datetime": "2010-08-31 17:54:24Z",
diff --git a/tests/fixtures/feeds.json b/tests/fixtures/feeds.json
index 266f427a22..3185c3bd3b 100644
--- a/tests/fixtures/feeds.json
+++ b/tests/fixtures/feeds.json
@@ -18,7 +18,6 @@
   {
     "fields": {
       "project": 1,
-      "server_name": "dcramer.local",
       "level": 40,
       "group": 1,
       "checksum": "0edb43b51699ce88eed908b340feb17f",
diff --git a/tests/fixtures/mail.json b/tests/fixtures/mail.json
index 6a3c42e5a1..4c2b998fe6 100644
--- a/tests/fixtures/mail.json
+++ b/tests/fixtures/mail.json
@@ -17,7 +17,6 @@
   {
     "fields": {
       "group": 2,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "ed77d1185670a58e7242fde014d980e9",
       "datetime": "2010-08-31 17:50:47",
diff --git a/tests/fixtures/views.json b/tests/fixtures/views.json
index 88e3817c2d..6050c655fb 100644
--- a/tests/fixtures/views.json
+++ b/tests/fixtures/views.json
@@ -67,7 +67,6 @@
     "fields": {
       "project": 1,
       "group": 2,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "ed77d1185670a58e7242fde014d980e9",
       "logger": "root",
@@ -82,7 +81,6 @@
     "fields": {
       "project": 1,
       "group": 3,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "ff554a446687e950d719b0c996f55953",
       "logger": "root",
@@ -97,7 +95,6 @@
     "fields": {
       "project": 1,
       "group": 3,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "ff554a446687e950d719b0c996f55953",
       "logger": "root",
@@ -112,7 +109,6 @@
     "fields": {
       "project": 1,
       "group": 3,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "ff554a446687e950d719b0c996f55953",
       "logger": "root",
@@ -127,7 +123,6 @@
     "fields": {
       "project": 1,
       "group": 4,
-      "server_name": "node.local",
       "level": 40,
       "checksum": "561fd84df24b5ff5c4b24cf3ab757b3b",
       "logger": "root",
@@ -142,7 +137,6 @@
     "fields": {
       "project": 1,
       "group": 4,
-      "server_name": "node.local",
       "level": 40,
       "checksum": "561fd84df24b5ff5c4b24cf3ab757b3b",
       "logger": "awesome",
@@ -157,7 +151,6 @@
     "fields": {
       "project": 1,
       "group": 4,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "561fd84df24b5ff5c4b24cf3ab757b3b",
       "logger": "sentry",
@@ -172,7 +165,6 @@
     "fields": {
       "project": 1,
       "group": 5,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "e27c40cb7b42d2752efc37f4f7ecfb12",
       "logger": "pie",
@@ -187,7 +179,6 @@
     "fields": {
       "project": 1,
       "group": 5,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "e27c40cb7b42d2752efc37f4f7ecfb12",
       "logger": "root",
@@ -202,7 +193,6 @@
     "fields": {
       "project": 1,
       "group": 5,
-      "server_name": "dcramer.local",
       "level": 40,
       "checksum": "e27c40cb7b42d2752efc37f4f7ecfb12",
       "logger": "root",
diff --git a/tests/integration/tests.py b/tests/integration/tests.py
index 44e3cb5993..f563e06cc2 100644
--- a/tests/integration/tests.py
+++ b/tests/integration/tests.py
@@ -155,43 +155,34 @@ class SentryRemoteTest(TestCase):
         self.assertEquals(group.last_seen, timestamp)
 
     def test_ungzipped_data(self):
-        kwargs = {'message': 'hello', 'server_name': 'not_dcramer.local',
-                  'level': 40, 'site': 'not_a_real_site'}
+        kwargs = {'message': 'hello'}
         resp = self._postWithSignature(kwargs)
         self.assertEquals(resp.status_code, 200)
         instance = Event.objects.get()
         self.assertEquals(instance.message, 'hello')
-        self.assertEquals(instance.server_name, 'not_dcramer.local')
-        self.assertEquals(instance.level, 40)
 
     @override_settings(SENTRY_ALLOW_ORIGIN='getsentry.com')
     def test_correct_data_with_get(self):
-        kwargs = {'message': 'hello', 'server_name': 'not_dcramer.local',
-                  'level': 40, 'site': 'not_a_real_site'}
+        kwargs = {'message': 'hello'}
         resp = self._getWithReferer(kwargs)
         self.assertEquals(resp.status_code, 200, resp.content)
         instance = Event.objects.get()
         self.assertEquals(instance.message, 'hello')
-        self.assertEquals(instance.server_name, 'not_dcramer.local')
-        self.assertEquals(instance.level, 40)
 
     @override_settings(SENTRY_ALLOW_ORIGIN='getsentry.com')
     def test_get_without_referer(self):
-        kwargs = {'message': 'hello', 'server_name': 'not_dcramer.local',
-                  'level': 40, 'site': 'not_a_real_site'}
+        kwargs = {'message': 'hello'}
         resp = self._getWithReferer(kwargs, referer=None, protocol='4')
         self.assertEquals(resp.status_code, 400, resp.content)
 
     @override_settings(SENTRY_ALLOW_ORIGIN='*')
     def test_get_without_referer_allowed(self):
-        kwargs = {'message': 'hello', 'server_name': 'not_dcramer.local',
-                  'level': 40, 'site': 'not_a_real_site'}
+        kwargs = {'message': 'hello'}
         resp = self._getWithReferer(kwargs, referer=None, protocol='4')
         self.assertEquals(resp.status_code, 200, resp.content)
 
     def test_signature(self):
-        kwargs = {'message': 'hello', 'server_name': 'not_dcramer.local',
-                  'level': 40, 'site': 'not_a_real_site'}
+        kwargs = {'message': 'hello'}
 
         resp = self._postWithSignature(kwargs)
 
@@ -200,7 +191,6 @@ class SentryRemoteTest(TestCase):
         instance = Event.objects.get()
 
         self.assertEquals(instance.message, 'hello')
-        self.assertEquals(instance.server_name, 'not_dcramer.local')
         self.assertEquals(instance.level, 40)
 
     def test_content_encoding_deflate(self):
