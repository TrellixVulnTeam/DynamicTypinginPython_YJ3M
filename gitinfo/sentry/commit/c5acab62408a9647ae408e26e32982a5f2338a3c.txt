commit c5acab62408a9647ae408e26e32982a5f2338a3c
Author: Radu Woinaroski <5281987+RaduW@users.noreply.github.com>
Date:   Wed Feb 12 09:48:46 2020 +0100

    fix requires_snuba test decorator marker (#16936)
    
    fixed typo that was causing the decorator to never exclude tests.

diff --git a/src/sentry/testutils/skips.py b/src/sentry/testutils/skips.py
index 267590df28..a1e37bdf56 100644
--- a/src/sentry/testutils/skips.py
+++ b/src/sentry/testutils/skips.py
@@ -15,7 +15,7 @@ def snuba_is_available():
         return _service_status["snuba"]
     try:
         parsed = urlparse(settings.SENTRY_SNUBA)
-        socket.create_connection((parsed.host, parsed.port), 1.0)
+        socket.create_connection((parsed.hostname, parsed.port), 1.0)
     except socket.error:
         _service_status["snuba"] = False
     else:
@@ -23,7 +23,9 @@ def snuba_is_available():
     return _service_status["snuba"]
 
 
-requires_snuba = pytest.mark.skipif(not snuba_is_available, reason="requires snuba server running")
+requires_snuba = pytest.mark.skipif(
+    not snuba_is_available(), reason="requires snuba server running"
+)
 
 
 def xfail_if_not_postgres(reason):
