commit e790e47e6b87bc2e49e8b74d491eb023c4468254
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 29 19:11:19 2014 -0800

    Kill possible recursion on csrf decorator

diff --git a/src/sentry/web/frontend/csrf_failure.py b/src/sentry/web/frontend/csrf_failure.py
index 008b61f8d4..ff2998d6f4 100644
--- a/src/sentry/web/frontend/csrf_failure.py
+++ b/src/sentry/web/frontend/csrf_failure.py
@@ -1,20 +1,23 @@
 from __future__ import absolute_import
 
 from django.middleware.csrf import REASON_NO_REFERER
+from django.views.decorators.csrf import csrf_exempt
+from django.views.generic import View
+from django.utils.decorators import method_decorator
 
-from sentry.web.frontend.base import BaseView
+from sentry.web.helpers import render_to_response
 
 
-class CsrfFailureView(BaseView):
-    auth_required = False
-    sudo_required = False
-
-    def handle(self, request, reason=""):
+class CsrfFailureView(View):
+    @method_decorator(csrf_exempt)
+    def dispatch(self, request, reason=""):
         context = {
-            'no_referer': reason == REASON_NO_REFERER
+            'no_referer': reason == REASON_NO_REFERER,
+            'request': request,
         }
 
-        return self.respond('sentry/403-csrf-failure.html', status=403)
+        return render_to_response('sentry/403-csrf-failure.html', context, request,
+                                  status=403)
 
 
 view = CsrfFailureView.as_view()
