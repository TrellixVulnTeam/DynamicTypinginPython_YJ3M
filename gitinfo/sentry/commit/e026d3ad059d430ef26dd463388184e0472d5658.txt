commit e026d3ad059d430ef26dd463388184e0472d5658
Author: maxbittker <maxbittker@gmail.com>
Date:   Thu Mar 30 19:21:30 2017 -0700

    tweak algorithm and tool tip

diff --git a/src/sentry/api/endpoints/event_file_committers.py b/src/sentry/api/endpoints/event_file_committers.py
index f0e88f71ef..a1c0646b88 100644
--- a/src/sentry/api/endpoints/event_file_committers.py
+++ b/src/sentry/api/endpoints/event_file_committers.py
@@ -77,7 +77,7 @@ class EventFileCommittersEndpoint(ProjectEndpoint):
     def _match_commits_path(self, commit_file_changes, path):
         #  find commits that match the run time path the best.
         matching_commits = {}
-        best_score = 0
+        best_score = 1
         for file_change in commit_file_changes:
             score = score_path_match_length(file_change.filename, path)
             if score > best_score:
@@ -85,6 +85,9 @@ class EventFileCommittersEndpoint(ProjectEndpoint):
                 best_score = score
                 matching_commits = {}
             if score == best_score:
+                # skip 1-score matches when file change is longer than 1 token
+                if score == 1 and len(tokenize_path(file_change.filename)) > 1:
+                    continue
                 #  we want a list of unique commits that tie for longest match
                 matching_commits[file_change.commit.id] = file_change.commit
 
diff --git a/src/sentry/static/sentry/app/components/group/suggestedOwners.jsx b/src/sentry/static/sentry/app/components/group/suggestedOwners.jsx
index d0e9855604..e199fa7fa6 100644
--- a/src/sentry/static/sentry/app/components/group/suggestedOwners.jsx
+++ b/src/sentry/static/sentry/app/components/group/suggestedOwners.jsx
@@ -6,7 +6,7 @@ import Avatar from '../avatar';
 import TooltipMixin from '../../mixins/tooltip';
 import ApiMixin from '../../mixins/apiMixin';
 import GroupState from '../../mixins/groupState';
-
+import {CommitLink} from '../../views/releases/releaseCommits';
 import {t} from '../../locale';
 
 const SuggestedOwners = React.createClass({
@@ -20,7 +20,8 @@ const SuggestedOwners = React.createClass({
     TooltipMixin({
       selector: '.tip',
       html: true,
-      container: 'body'
+      container: 'body',
+      trigger: 'click'
     })
   ],
 
@@ -75,12 +76,17 @@ const SuggestedOwners = React.createClass({
       <span key={author.id} className="avatar-grid-item tip" title={
         ReactDOMServer.renderToStaticMarkup(
           <div>
-            <strong>
+            <strong className="time-label">
               {`${author.name}:`}
             </strong><br/>
-            <ul>
-              {commits.map(c=><li key={c.id}>{c.message} - {moment(c.dateCreated).fromNow()}</li>)}
-            </ul>
+            <div>
+              {commits.map(c=>
+               (<span key={c.id}>
+                  <span key={c.id}>{c.message}</span>
+                  <span>{moment(c.dateCreated).fromNow()}</span>
+                  <CommitLink commitId={c.id} repository={c.repository}/>
+              </span>))}
+            </div>
           </div>)
         }>
         <Avatar user={author}/>
@@ -88,7 +94,7 @@ const SuggestedOwners = React.createClass({
   },
 
   render() {
-    if (!this.state.owners) {
+    if (!(this.state.owners && this.state.owners.length)) {
       return null;
     }
     return(
diff --git a/src/sentry/static/sentry/app/views/releases/releaseCommits.jsx b/src/sentry/static/sentry/app/views/releases/releaseCommits.jsx
index 4c6d525b50..b373b5bce6 100644
--- a/src/sentry/static/sentry/app/views/releases/releaseCommits.jsx
+++ b/src/sentry/static/sentry/app/views/releases/releaseCommits.jsx
@@ -9,13 +9,9 @@ import ApiMixin from '../../mixins/apiMixin';
 
 import {t} from '../../locale';
 
-const ReleaseCommit = React.createClass({
+const CommitLink = React.createClass({
   propTypes: {
     commitId: React.PropTypes.string,
-    shortId: React.PropTypes.string,
-    commitMessage: React.PropTypes.string,
-    commitDateCreated: React.PropTypes.string,
-    author: React.PropTypes.object,
     repository: React.PropTypes.object,
   },
 
@@ -28,6 +24,27 @@ const ReleaseCommit = React.createClass({
 
   render() {
     let commitUrl = this.getCommitUrl();
+    let shortId = this.props.commitId.slice(0, 7);
+
+    return (commitUrl ?
+              <a className="btn btn-default btn-sm"
+                 href={commitUrl}
+                 target="_blank"><span
+                 className={'icon-mark-' + this.props.repository.provider.id}/>&nbsp; {shortId}</a> :
+              <span>{shortId}</span>);
+  }
+});
+
+const ReleaseCommit = React.createClass({
+  propTypes: {
+    commitId: React.PropTypes.string,
+    commitMessage: React.PropTypes.string,
+    commitDateCreated: React.PropTypes.string,
+    author: React.PropTypes.object,
+    repository: React.PropTypes.object,
+  },
+
+  render() {
     return (
       <li className="list-group-item" key={this.props.commitId}>
         <div className="row row-center-vertically">
@@ -38,12 +55,7 @@ const ReleaseCommit = React.createClass({
           </div>
           <div className="col-xs-2"><span className="repo-label">{this.props.repository.name}</span></div>
           <div className="col-xs-2 align-right">
-            {commitUrl ?
-              <a className="btn btn-default btn-sm"
-                 href={commitUrl}
-                 target="_blank"><span
-                 className={'icon-mark-' + this.props.repository.provider.id}/>&nbsp; {this.props.shortId}</a> :
-              <span>{this.props.shortId}</span>}
+            <CommitLink commitId={this.props.commitId} repository={this.props.repository}/>
           </div>
         </div>
       </li>
@@ -125,12 +137,10 @@ const ReleaseCommits = React.createClass({
         </div>
         <ul className="list-group list-group-lg commit-list">
           {commitList.map(commit => {
-            let shortId = commit.id.slice(0, 7);
             return (
               <ReleaseCommit
                 key={commit.id}
                 commitId={commit.id}
-                shortId={shortId}
                 author={commit.author}
                 commitMessage={commit.message}
                 commitDateCreated={commit.dateCreated}
@@ -145,3 +155,4 @@ const ReleaseCommits = React.createClass({
 });
 
 export default ReleaseCommits;
+export {ReleaseCommits, CommitLink};
