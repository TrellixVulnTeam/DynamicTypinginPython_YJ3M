commit 4202805b92936657d39e151ac6cbd95974843324
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Wed May 23 10:12:42 2018 -0700

    feat(ui): Tweak AvatarList design and add to Issue Details (#8477)

diff --git a/src/sentry/static/sentry/app/components/avatar/avatarList.jsx b/src/sentry/static/sentry/app/components/avatar/avatarList.jsx
index 9f1619f9f3..97c4435c97 100644
--- a/src/sentry/static/sentry/app/components/avatar/avatarList.jsx
+++ b/src/sentry/static/sentry/app/components/avatar/avatarList.jsx
@@ -1,16 +1,19 @@
 import React from 'react';
 import PropTypes from 'prop-types';
-import styled from 'react-emotion';
+import styled, {css} from 'react-emotion';
 import {Flex} from 'grid-emotion';
 
 import SentryTypes from 'app/proptypes';
 import Avatar from 'app/components/avatar';
+import Tooltip from 'app/components/tooltip';
 
 export default class AvatarList extends React.Component {
   static propTypes = {
     users: PropTypes.arrayOf(SentryTypes.User).isRequired,
     avatarSize: PropTypes.number,
     maxVisibleAvatars: PropTypes.number,
+    renderTooltip: PropTypes.func,
+    tooltipOptions: PropTypes.object,
   };
 
   static defaultProps = {
@@ -19,31 +22,63 @@ export default class AvatarList extends React.Component {
   };
 
   render() {
-    const {users, avatarSize, maxVisibleAvatars} = this.props;
+    const {
+      users,
+      avatarSize,
+      maxVisibleAvatars,
+      tooltipOptions,
+      renderTooltip,
+    } = this.props;
     const visibleUsers = users.slice(0, maxVisibleAvatars);
     const numCollapsedUsers = users.length - visibleUsers.length;
 
     return (
       <Flex direction="row-reverse">
-        {visibleUsers.map(user => {
-          return <StyledAvatar key={user.id} user={user} size={avatarSize} hasTooltip />;
-        })}
         {!!numCollapsedUsers && (
-          <CollapsedUsers size={avatarSize}>{numCollapsedUsers}</CollapsedUsers>
+          <Tooltip title={`${numCollapsedUsers} other users`}>
+            <CollapsedUsers size={avatarSize}>
+              {numCollapsedUsers < 99 && <Plus>+</Plus>}
+              {numCollapsedUsers}
+            </CollapsedUsers>
+          </Tooltip>
         )}
+        {visibleUsers.map(user => {
+          return (
+            <StyledAvatar
+              key={user.id}
+              user={user}
+              size={avatarSize}
+              renderTooltip={renderTooltip}
+              tooltipOptions={tooltipOptions}
+              hasTooltip
+            />
+          );
+        })}
       </Flex>
     );
   }
 }
 
-const StyledAvatar = styled(props => <Avatar {...props} />)`
+const Circle = css`
   border-radius: 50%;
-  overflow: hidden;
   border: 2px solid white;
-  margin-left: -${p => p.size / 2}px;
+  margin-left: -8px;
+  cursor: default;
+
+  &:hover {
+    z-index: 1;
+  }
 `;
 
-const CollapsedUsers = styled(props => <div {...props} />)`
+const StyledAvatar = styled(Avatar)`
+  overflow: hidden;
+  ${Circle};
+`;
+
+const CollapsedUsers = styled('div')`
+  display: flex;
+  align-items: center;
+  justify-content: center;
   position: relative;
   text-align: center;
   font-weight: 600;
@@ -52,6 +87,11 @@ const CollapsedUsers = styled(props => <div {...props} />)`
   font-size: ${p => p.theme.fontSizeSmall};
   width: ${p => p.size}px;
   height: ${p => p.size}px;
-  border-radius: 50%;
-  border: 2px solid white;
+  ${Circle};
+`;
+
+const Plus = styled('span')`
+  font-size: 10px;
+  margin-left: 1px;
+  margin-right: -1px;
 `;
diff --git a/src/sentry/static/sentry/app/components/avatar/baseAvatar.jsx b/src/sentry/static/sentry/app/components/avatar/baseAvatar.jsx
index d266fcedba..409837b8f3 100644
--- a/src/sentry/static/sentry/app/components/avatar/baseAvatar.jsx
+++ b/src/sentry/static/sentry/app/components/avatar/baseAvatar.jsx
@@ -36,6 +36,7 @@ class BaseAvatar extends React.Component {
     letterId: PropTypes.string,
     title: PropTypes.string,
     tooltip: PropTypes.string,
+    tooltipOptions: PropTypes.object,
   };
 
   static defaultProps = {
@@ -127,7 +128,7 @@ class BaseAvatar extends React.Component {
   }
 
   render() {
-    let {className, hasTooltip, size, tooltip, style} = this.props;
+    let {className, hasTooltip, size, tooltip, tooltipOptions, style} = this.props;
     let sizeStyle = {};
 
     if (size) {
@@ -138,7 +139,7 @@ class BaseAvatar extends React.Component {
     }
 
     return (
-      <Tooltip title={tooltip} disabled={!hasTooltip}>
+      <Tooltip title={tooltip} tooltipOptions={tooltipOptions} disabled={!hasTooltip}>
         <StyledBaseAvatar
           className={classNames('avatar', className)}
           style={{
diff --git a/src/sentry/static/sentry/app/components/avatar/userAvatar.jsx b/src/sentry/static/sentry/app/components/avatar/userAvatar.jsx
index 43f7727344..08be4ba99b 100644
--- a/src/sentry/static/sentry/app/components/avatar/userAvatar.jsx
+++ b/src/sentry/static/sentry/app/components/avatar/userAvatar.jsx
@@ -9,6 +9,7 @@ class UserAvatar extends React.Component {
   static propTypes = {
     user: SentryTypes.User,
     gravatar: PropTypes.bool,
+    renderTooltip: PropTypes.func,
     ...BaseAvatar.propTypes,
   };
 
@@ -28,7 +29,7 @@ class UserAvatar extends React.Component {
   };
 
   render() {
-    let {user, gravatar, ...props} = this.props;
+    let {user, gravatar, renderTooltip, ...props} = this.props;
 
     if (!user) return null;
 
@@ -42,7 +43,11 @@ class UserAvatar extends React.Component {
         uploadId={user.avatar && user.avatar.avatarUuid}
         gravatarId={user && user.email && user.email.toLowerCase()}
         letterId={user.email || user.username || user.id || user.ip_address}
-        tooltip={userDisplayName(user)}
+        tooltip={
+          typeof renderTooltip === 'function'
+            ? renderTooltip(user)
+            : userDisplayName(user)
+        }
         title={user.name || user.email || user.username || ''}
       />
     );
diff --git a/src/sentry/static/sentry/app/views/groupDetails/seenBy.jsx b/src/sentry/static/sentry/app/views/groupDetails/seenBy.jsx
index 7c17322872..b132191a45 100644
--- a/src/sentry/static/sentry/app/views/groupDetails/seenBy.jsx
+++ b/src/sentry/static/sentry/app/views/groupDetails/seenBy.jsx
@@ -2,9 +2,10 @@ import React from 'react';
 import createReactClass from 'create-react-class';
 import moment from 'moment';
 import _ from 'lodash';
+import styled from 'react-emotion';
 
 import ConfigStore from 'app/stores/configStore';
-import Avatar from 'app/components/avatar';
+import AvatarList from 'app/components/avatar/avatarList';
 import GroupState from 'app/mixins/groupState';
 import {userDisplayName} from 'app/utils/formatters';
 import Tooltip from 'app/components/tooltip';
@@ -31,37 +32,48 @@ const GroupSeenBy = createReactClass({
       return null;
     }
 
-    let seenByNodes = seenBy
-      .filter((user, userIdx) => {
-        return activeUser.id !== user.id;
-      })
-      .map((user, userIdx) => {
-        let title =
-          _.escape(userDisplayName(user)) +
-          '<br/>' +
-          _.escape(moment(user.lastSeen).format('LL'));
-        return (
-          <li key={userIdx}>
-            <Tooltip title={title} tooltipOptions={{html: true}}>
-              <Avatar size={28} user={user} />
-            </Tooltip>
-          </li>
-        );
-      });
-
+    // Note className="seen-by" is required for responsive design
     return (
-      <div className="seen-by">
-        <ul>
-          <li>
-            <Tooltip title={t("People who've viewed this issue")}>
-              <span className="icon-eye" />
-            </Tooltip>
-          </li>
-          {seenByNodes}
-        </ul>
-      </div>
+      <SeenByWrapper className="seen-by">
+        <AvatarList
+          users={seenBy.filter(user => activeUser.id !== user.id)}
+          avatarSize={28}
+          maxVisibleAvatars={10}
+          tooltipOptions={{html: true}}
+          renderTooltip={user => `${_.escape(userDisplayName(user))} <br/>
+            ${moment(user.lastSeen).format('LL')}`}
+        />
+        <IconWrapper>
+          <Tooltip title={t("People who've viewed this issue")}>
+            <EyeIcon className="icon-eye" />
+          </Tooltip>
+        </IconWrapper>
+      </SeenByWrapper>
     );
   },
 });
 
 export default GroupSeenBy;
+
+const SeenByWrapper = styled('div')`
+  display: flex;
+  flex-direction: row-reverse;
+  margin-top: 15px;
+  float: right;
+`;
+
+const IconWrapper = styled('div')`
+  background-color: transparent;
+  color: #493e54;
+  height: 28px;
+  width: 28px;
+  line-height: 26px;
+  text-align: center;
+  margin-right: 10px;
+`;
+
+const EyeIcon = styled('span')`
+  opacity: 0.4;
+  position: relative;
+  top: 2px;
+`;
diff --git a/src/sentry/static/sentry/less/group-detail.less b/src/sentry/static/sentry/less/group-detail.less
index 8793af9e10..ef31ff6982 100644
--- a/src/sentry/static/sentry/less/group-detail.less
+++ b/src/sentry/static/sentry/less/group-detail.less
@@ -172,41 +172,6 @@
   }
 }
 
-.seen-by {
-  margin-top: 15px;
-  float: right;
-
-  ul {
-    .list-unstyled;
-
-    li:first-child {
-      background: @white-darker;
-      color: darken(@gray, 10);
-      border-radius: 2px;
-      .square(28px);
-      line-height: 26px;
-      text-align: center;
-
-      .icon-eye {
-        opacity: 0.4;
-        position: relative;
-        top: 2px;
-      }
-    }
-
-    li {
-      float: left;
-      margin-left: 5px;
-
-      .avatar {
-        display: inline-block;
-        position: relative;
-        .square(28px);
-      }
-    }
-  }
-}
-
 .group-notifications,
 .group-privacy {
   float: left;
diff --git a/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap b/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
index 90cf201104..a2719974d6 100644
--- a/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
+++ b/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
@@ -104,6 +104,30 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
         className="css-1go71fn"
         is={null}
       >
+        <Tooltip
+          title="1 other users"
+        >
+          <CollapsedUsers
+            className="tip"
+            size={28}
+            title="1 other users"
+          >
+            <div
+              className="tip css-1831z2i-CollapsedUsers-Circle e1axh4r51"
+              size={28}
+              title="1 other users"
+            >
+              <Plus>
+                <span
+                  className="css-sduhlv-Plus e1axh4r52"
+                >
+                  +
+                </span>
+              </Plus>
+              1
+            </div>
+          </CollapsedUsers>
+        </Tooltip>
         <StyledAvatar
           hasTooltip={true}
           key="1"
@@ -125,8 +149,8 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
             }
           }
         >
-          <Component
-            className="css-5o5its-StyledAvatar e1axh4r50"
+          <Avatar
+            className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
             hasTooltip={true}
             size={28}
             user={
@@ -146,8 +170,9 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
               }
             }
           >
-            <Avatar
-              className="css-5o5its-StyledAvatar e1axh4r50"
+            <UserAvatar
+              className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+              gravatar={true}
               hasTooltip={true}
               size={28}
               user={
@@ -167,46 +192,34 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                 }
               }
             >
-              <UserAvatar
-                className="css-5o5its-StyledAvatar e1axh4r50"
-                gravatar={true}
+              <BaseAvatar
+                className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                gravatarId="foo@example.com"
                 hasTooltip={true}
+                letterId="foo@example.com"
                 size={28}
-                user={
-                  Object {
-                    "email": "foo@example.com",
-                    "flags": Object {
-                      "newsletter_consent_prompt": false,
-                    },
-                    "hasPasswordAuth": true,
-                    "id": "1",
-                    "isAuthenticated": true,
-                    "name": "Foo Bar",
-                    "options": Object {
-                      "timezone": "UTC",
-                    },
-                    "username": "foo@example.com",
-                  }
-                }
+                style={Object {}}
+                title="Foo Bar"
+                tooltip="Foo Bar (foo@example.com)"
+                type="gravatar"
+                uploadPath="avatar"
               >
-                <BaseAvatar
-                  className="css-5o5its-StyledAvatar e1axh4r50"
-                  gravatarId="foo@example.com"
-                  hasTooltip={true}
-                  letterId="foo@example.com"
-                  size={28}
-                  style={Object {}}
-                  title="Foo Bar"
-                  tooltip="Foo Bar (foo@example.com)"
-                  type="gravatar"
-                  uploadPath="avatar"
+                <Tooltip
+                  disabled={false}
+                  title="Foo Bar (foo@example.com)"
                 >
-                  <Tooltip
-                    disabled={false}
+                  <StyledBaseAvatar
+                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                    style={
+                      Object {
+                        "height": "28px",
+                        "width": "28px",
+                      }
+                    }
                     title="Foo Bar (foo@example.com)"
                   >
-                    <StyledBaseAvatar
-                      className="tip avatar css-5o5its-StyledAvatar e1axh4r50"
+                    <span
+                      className="tip avatar e1axh4r50 css-1a6phbt-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
                       style={
                         Object {
                           "height": "28px",
@@ -215,28 +228,17 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                       }
                       title="Foo Bar (foo@example.com)"
                     >
-                      <span
-                        className="tip avatar e1axh4r50 css-dnah9z-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
-                        style={
-                          Object {
-                            "height": "28px",
-                            "width": "28px",
-                          }
-                        }
-                        title="Foo Bar (foo@example.com)"
-                      >
-                        <img
-                          onError={[Function]}
-                          onLoad={[Function]}
-                          src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
-                        />
-                      </span>
-                    </StyledBaseAvatar>
-                  </Tooltip>
-                </BaseAvatar>
-              </UserAvatar>
-            </Avatar>
-          </Component>
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </StyledBaseAvatar>
+                </Tooltip>
+              </BaseAvatar>
+            </UserAvatar>
+          </Avatar>
         </StyledAvatar>
         <StyledAvatar
           hasTooltip={true}
@@ -259,8 +261,8 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
             }
           }
         >
-          <Component
-            className="css-5o5its-StyledAvatar e1axh4r50"
+          <Avatar
+            className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
             hasTooltip={true}
             size={28}
             user={
@@ -280,8 +282,9 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
               }
             }
           >
-            <Avatar
-              className="css-5o5its-StyledAvatar e1axh4r50"
+            <UserAvatar
+              className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+              gravatar={true}
               hasTooltip={true}
               size={28}
               user={
@@ -301,46 +304,34 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                 }
               }
             >
-              <UserAvatar
-                className="css-5o5its-StyledAvatar e1axh4r50"
-                gravatar={true}
+              <BaseAvatar
+                className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                gravatarId="foo@example.com"
                 hasTooltip={true}
+                letterId="foo@example.com"
                 size={28}
-                user={
-                  Object {
-                    "email": "foo@example.com",
-                    "flags": Object {
-                      "newsletter_consent_prompt": false,
-                    },
-                    "hasPasswordAuth": true,
-                    "id": "2",
-                    "isAuthenticated": true,
-                    "name": "Foo Bar",
-                    "options": Object {
-                      "timezone": "UTC",
-                    },
-                    "username": "foo@example.com",
-                  }
-                }
+                style={Object {}}
+                title="Foo Bar"
+                tooltip="Foo Bar (foo@example.com)"
+                type="gravatar"
+                uploadPath="avatar"
               >
-                <BaseAvatar
-                  className="css-5o5its-StyledAvatar e1axh4r50"
-                  gravatarId="foo@example.com"
-                  hasTooltip={true}
-                  letterId="foo@example.com"
-                  size={28}
-                  style={Object {}}
-                  title="Foo Bar"
-                  tooltip="Foo Bar (foo@example.com)"
-                  type="gravatar"
-                  uploadPath="avatar"
+                <Tooltip
+                  disabled={false}
+                  title="Foo Bar (foo@example.com)"
                 >
-                  <Tooltip
-                    disabled={false}
+                  <StyledBaseAvatar
+                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                    style={
+                      Object {
+                        "height": "28px",
+                        "width": "28px",
+                      }
+                    }
                     title="Foo Bar (foo@example.com)"
                   >
-                    <StyledBaseAvatar
-                      className="tip avatar css-5o5its-StyledAvatar e1axh4r50"
+                    <span
+                      className="tip avatar e1axh4r50 css-1a6phbt-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
                       style={
                         Object {
                           "height": "28px",
@@ -349,28 +340,17 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                       }
                       title="Foo Bar (foo@example.com)"
                     >
-                      <span
-                        className="tip avatar e1axh4r50 css-dnah9z-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
-                        style={
-                          Object {
-                            "height": "28px",
-                            "width": "28px",
-                          }
-                        }
-                        title="Foo Bar (foo@example.com)"
-                      >
-                        <img
-                          onError={[Function]}
-                          onLoad={[Function]}
-                          src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
-                        />
-                      </span>
-                    </StyledBaseAvatar>
-                  </Tooltip>
-                </BaseAvatar>
-              </UserAvatar>
-            </Avatar>
-          </Component>
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </StyledBaseAvatar>
+                </Tooltip>
+              </BaseAvatar>
+            </UserAvatar>
+          </Avatar>
         </StyledAvatar>
         <StyledAvatar
           hasTooltip={true}
@@ -393,8 +373,8 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
             }
           }
         >
-          <Component
-            className="css-5o5its-StyledAvatar e1axh4r50"
+          <Avatar
+            className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
             hasTooltip={true}
             size={28}
             user={
@@ -414,8 +394,9 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
               }
             }
           >
-            <Avatar
-              className="css-5o5its-StyledAvatar e1axh4r50"
+            <UserAvatar
+              className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+              gravatar={true}
               hasTooltip={true}
               size={28}
               user={
@@ -435,46 +416,34 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                 }
               }
             >
-              <UserAvatar
-                className="css-5o5its-StyledAvatar e1axh4r50"
-                gravatar={true}
+              <BaseAvatar
+                className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                gravatarId="foo@example.com"
                 hasTooltip={true}
+                letterId="foo@example.com"
                 size={28}
-                user={
-                  Object {
-                    "email": "foo@example.com",
-                    "flags": Object {
-                      "newsletter_consent_prompt": false,
-                    },
-                    "hasPasswordAuth": true,
-                    "id": "3",
-                    "isAuthenticated": true,
-                    "name": "Foo Bar",
-                    "options": Object {
-                      "timezone": "UTC",
-                    },
-                    "username": "foo@example.com",
-                  }
-                }
+                style={Object {}}
+                title="Foo Bar"
+                tooltip="Foo Bar (foo@example.com)"
+                type="gravatar"
+                uploadPath="avatar"
               >
-                <BaseAvatar
-                  className="css-5o5its-StyledAvatar e1axh4r50"
-                  gravatarId="foo@example.com"
-                  hasTooltip={true}
-                  letterId="foo@example.com"
-                  size={28}
-                  style={Object {}}
-                  title="Foo Bar"
-                  tooltip="Foo Bar (foo@example.com)"
-                  type="gravatar"
-                  uploadPath="avatar"
+                <Tooltip
+                  disabled={false}
+                  title="Foo Bar (foo@example.com)"
                 >
-                  <Tooltip
-                    disabled={false}
+                  <StyledBaseAvatar
+                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                    style={
+                      Object {
+                        "height": "28px",
+                        "width": "28px",
+                      }
+                    }
                     title="Foo Bar (foo@example.com)"
                   >
-                    <StyledBaseAvatar
-                      className="tip avatar css-5o5its-StyledAvatar e1axh4r50"
+                    <span
+                      className="tip avatar e1axh4r50 css-1a6phbt-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
                       style={
                         Object {
                           "height": "28px",
@@ -483,28 +452,17 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                       }
                       title="Foo Bar (foo@example.com)"
                     >
-                      <span
-                        className="tip avatar e1axh4r50 css-dnah9z-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
-                        style={
-                          Object {
-                            "height": "28px",
-                            "width": "28px",
-                          }
-                        }
-                        title="Foo Bar (foo@example.com)"
-                      >
-                        <img
-                          onError={[Function]}
-                          onLoad={[Function]}
-                          src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
-                        />
-                      </span>
-                    </StyledBaseAvatar>
-                  </Tooltip>
-                </BaseAvatar>
-              </UserAvatar>
-            </Avatar>
-          </Component>
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </StyledBaseAvatar>
+                </Tooltip>
+              </BaseAvatar>
+            </UserAvatar>
+          </Avatar>
         </StyledAvatar>
         <StyledAvatar
           hasTooltip={true}
@@ -527,8 +485,8 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
             }
           }
         >
-          <Component
-            className="css-5o5its-StyledAvatar e1axh4r50"
+          <Avatar
+            className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
             hasTooltip={true}
             size={28}
             user={
@@ -548,8 +506,9 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
               }
             }
           >
-            <Avatar
-              className="css-5o5its-StyledAvatar e1axh4r50"
+            <UserAvatar
+              className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+              gravatar={true}
               hasTooltip={true}
               size={28}
               user={
@@ -569,46 +528,34 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                 }
               }
             >
-              <UserAvatar
-                className="css-5o5its-StyledAvatar e1axh4r50"
-                gravatar={true}
+              <BaseAvatar
+                className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                gravatarId="foo@example.com"
                 hasTooltip={true}
+                letterId="foo@example.com"
                 size={28}
-                user={
-                  Object {
-                    "email": "foo@example.com",
-                    "flags": Object {
-                      "newsletter_consent_prompt": false,
-                    },
-                    "hasPasswordAuth": true,
-                    "id": "4",
-                    "isAuthenticated": true,
-                    "name": "Foo Bar",
-                    "options": Object {
-                      "timezone": "UTC",
-                    },
-                    "username": "foo@example.com",
-                  }
-                }
+                style={Object {}}
+                title="Foo Bar"
+                tooltip="Foo Bar (foo@example.com)"
+                type="gravatar"
+                uploadPath="avatar"
               >
-                <BaseAvatar
-                  className="css-5o5its-StyledAvatar e1axh4r50"
-                  gravatarId="foo@example.com"
-                  hasTooltip={true}
-                  letterId="foo@example.com"
-                  size={28}
-                  style={Object {}}
-                  title="Foo Bar"
-                  tooltip="Foo Bar (foo@example.com)"
-                  type="gravatar"
-                  uploadPath="avatar"
+                <Tooltip
+                  disabled={false}
+                  title="Foo Bar (foo@example.com)"
                 >
-                  <Tooltip
-                    disabled={false}
+                  <StyledBaseAvatar
+                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                    style={
+                      Object {
+                        "height": "28px",
+                        "width": "28px",
+                      }
+                    }
                     title="Foo Bar (foo@example.com)"
                   >
-                    <StyledBaseAvatar
-                      className="tip avatar css-5o5its-StyledAvatar e1axh4r50"
+                    <span
+                      className="tip avatar e1axh4r50 css-1a6phbt-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
                       style={
                         Object {
                           "height": "28px",
@@ -617,28 +564,17 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                       }
                       title="Foo Bar (foo@example.com)"
                     >
-                      <span
-                        className="tip avatar e1axh4r50 css-dnah9z-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
-                        style={
-                          Object {
-                            "height": "28px",
-                            "width": "28px",
-                          }
-                        }
-                        title="Foo Bar (foo@example.com)"
-                      >
-                        <img
-                          onError={[Function]}
-                          onLoad={[Function]}
-                          src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
-                        />
-                      </span>
-                    </StyledBaseAvatar>
-                  </Tooltip>
-                </BaseAvatar>
-              </UserAvatar>
-            </Avatar>
-          </Component>
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </StyledBaseAvatar>
+                </Tooltip>
+              </BaseAvatar>
+            </UserAvatar>
+          </Avatar>
         </StyledAvatar>
         <StyledAvatar
           hasTooltip={true}
@@ -661,8 +597,8 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
             }
           }
         >
-          <Component
-            className="css-5o5its-StyledAvatar e1axh4r50"
+          <Avatar
+            className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
             hasTooltip={true}
             size={28}
             user={
@@ -682,8 +618,9 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
               }
             }
           >
-            <Avatar
-              className="css-5o5its-StyledAvatar e1axh4r50"
+            <UserAvatar
+              className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+              gravatar={true}
               hasTooltip={true}
               size={28}
               user={
@@ -703,46 +640,34 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                 }
               }
             >
-              <UserAvatar
-                className="css-5o5its-StyledAvatar e1axh4r50"
-                gravatar={true}
+              <BaseAvatar
+                className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                gravatarId="foo@example.com"
                 hasTooltip={true}
+                letterId="foo@example.com"
                 size={28}
-                user={
-                  Object {
-                    "email": "foo@example.com",
-                    "flags": Object {
-                      "newsletter_consent_prompt": false,
-                    },
-                    "hasPasswordAuth": true,
-                    "id": "5",
-                    "isAuthenticated": true,
-                    "name": "Foo Bar",
-                    "options": Object {
-                      "timezone": "UTC",
-                    },
-                    "username": "foo@example.com",
-                  }
-                }
+                style={Object {}}
+                title="Foo Bar"
+                tooltip="Foo Bar (foo@example.com)"
+                type="gravatar"
+                uploadPath="avatar"
               >
-                <BaseAvatar
-                  className="css-5o5its-StyledAvatar e1axh4r50"
-                  gravatarId="foo@example.com"
-                  hasTooltip={true}
-                  letterId="foo@example.com"
-                  size={28}
-                  style={Object {}}
-                  title="Foo Bar"
-                  tooltip="Foo Bar (foo@example.com)"
-                  type="gravatar"
-                  uploadPath="avatar"
+                <Tooltip
+                  disabled={false}
+                  title="Foo Bar (foo@example.com)"
                 >
-                  <Tooltip
-                    disabled={false}
+                  <StyledBaseAvatar
+                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                    style={
+                      Object {
+                        "height": "28px",
+                        "width": "28px",
+                      }
+                    }
                     title="Foo Bar (foo@example.com)"
                   >
-                    <StyledBaseAvatar
-                      className="tip avatar css-5o5its-StyledAvatar e1axh4r50"
+                    <span
+                      className="tip avatar e1axh4r50 css-1a6phbt-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
                       style={
                         Object {
                           "height": "28px",
@@ -751,44 +676,18 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                       }
                       title="Foo Bar (foo@example.com)"
                     >
-                      <span
-                        className="tip avatar e1axh4r50 css-dnah9z-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
-                        style={
-                          Object {
-                            "height": "28px",
-                            "width": "28px",
-                          }
-                        }
-                        title="Foo Bar (foo@example.com)"
-                      >
-                        <img
-                          onError={[Function]}
-                          onLoad={[Function]}
-                          src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
-                        />
-                      </span>
-                    </StyledBaseAvatar>
-                  </Tooltip>
-                </BaseAvatar>
-              </UserAvatar>
-            </Avatar>
-          </Component>
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </StyledBaseAvatar>
+                </Tooltip>
+              </BaseAvatar>
+            </UserAvatar>
+          </Avatar>
         </StyledAvatar>
-        <CollapsedUsers
-          size={28}
-        >
-          <Component
-            className="css-n3i1n8-CollapsedUsers e1axh4r51"
-            size={28}
-          >
-            <div
-              className="css-n3i1n8-CollapsedUsers e1axh4r51"
-              size={28}
-            >
-              1
-            </div>
-          </Component>
-        </CollapsedUsers>
       </div>
     </Base>
   </Flex>
@@ -864,8 +763,8 @@ exports[`AvatarList renders with user avatars 1`] = `
             }
           }
         >
-          <Component
-            className="css-5o5its-StyledAvatar e1axh4r50"
+          <Avatar
+            className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
             hasTooltip={true}
             size={28}
             user={
@@ -885,8 +784,9 @@ exports[`AvatarList renders with user avatars 1`] = `
               }
             }
           >
-            <Avatar
-              className="css-5o5its-StyledAvatar e1axh4r50"
+            <UserAvatar
+              className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+              gravatar={true}
               hasTooltip={true}
               size={28}
               user={
@@ -906,46 +806,34 @@ exports[`AvatarList renders with user avatars 1`] = `
                 }
               }
             >
-              <UserAvatar
-                className="css-5o5its-StyledAvatar e1axh4r50"
-                gravatar={true}
+              <BaseAvatar
+                className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                gravatarId="foo@example.com"
                 hasTooltip={true}
+                letterId="foo@example.com"
                 size={28}
-                user={
-                  Object {
-                    "email": "foo@example.com",
-                    "flags": Object {
-                      "newsletter_consent_prompt": false,
-                    },
-                    "hasPasswordAuth": true,
-                    "id": "1",
-                    "isAuthenticated": true,
-                    "name": "Foo Bar",
-                    "options": Object {
-                      "timezone": "UTC",
-                    },
-                    "username": "foo@example.com",
-                  }
-                }
+                style={Object {}}
+                title="Foo Bar"
+                tooltip="Foo Bar (foo@example.com)"
+                type="gravatar"
+                uploadPath="avatar"
               >
-                <BaseAvatar
-                  className="css-5o5its-StyledAvatar e1axh4r50"
-                  gravatarId="foo@example.com"
-                  hasTooltip={true}
-                  letterId="foo@example.com"
-                  size={28}
-                  style={Object {}}
-                  title="Foo Bar"
-                  tooltip="Foo Bar (foo@example.com)"
-                  type="gravatar"
-                  uploadPath="avatar"
+                <Tooltip
+                  disabled={false}
+                  title="Foo Bar (foo@example.com)"
                 >
-                  <Tooltip
-                    disabled={false}
+                  <StyledBaseAvatar
+                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                    style={
+                      Object {
+                        "height": "28px",
+                        "width": "28px",
+                      }
+                    }
                     title="Foo Bar (foo@example.com)"
                   >
-                    <StyledBaseAvatar
-                      className="tip avatar css-5o5its-StyledAvatar e1axh4r50"
+                    <span
+                      className="tip avatar e1axh4r50 css-1a6phbt-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
                       style={
                         Object {
                           "height": "28px",
@@ -954,28 +842,17 @@ exports[`AvatarList renders with user avatars 1`] = `
                       }
                       title="Foo Bar (foo@example.com)"
                     >
-                      <span
-                        className="tip avatar e1axh4r50 css-dnah9z-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
-                        style={
-                          Object {
-                            "height": "28px",
-                            "width": "28px",
-                          }
-                        }
-                        title="Foo Bar (foo@example.com)"
-                      >
-                        <img
-                          onError={[Function]}
-                          onLoad={[Function]}
-                          src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
-                        />
-                      </span>
-                    </StyledBaseAvatar>
-                  </Tooltip>
-                </BaseAvatar>
-              </UserAvatar>
-            </Avatar>
-          </Component>
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </StyledBaseAvatar>
+                </Tooltip>
+              </BaseAvatar>
+            </UserAvatar>
+          </Avatar>
         </StyledAvatar>
         <StyledAvatar
           hasTooltip={true}
@@ -998,8 +875,8 @@ exports[`AvatarList renders with user avatars 1`] = `
             }
           }
         >
-          <Component
-            className="css-5o5its-StyledAvatar e1axh4r50"
+          <Avatar
+            className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
             hasTooltip={true}
             size={28}
             user={
@@ -1019,8 +896,9 @@ exports[`AvatarList renders with user avatars 1`] = `
               }
             }
           >
-            <Avatar
-              className="css-5o5its-StyledAvatar e1axh4r50"
+            <UserAvatar
+              className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+              gravatar={true}
               hasTooltip={true}
               size={28}
               user={
@@ -1040,46 +918,34 @@ exports[`AvatarList renders with user avatars 1`] = `
                 }
               }
             >
-              <UserAvatar
-                className="css-5o5its-StyledAvatar e1axh4r50"
-                gravatar={true}
+              <BaseAvatar
+                className="css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                gravatarId="foo@example.com"
                 hasTooltip={true}
+                letterId="foo@example.com"
                 size={28}
-                user={
-                  Object {
-                    "email": "foo@example.com",
-                    "flags": Object {
-                      "newsletter_consent_prompt": false,
-                    },
-                    "hasPasswordAuth": true,
-                    "id": "2",
-                    "isAuthenticated": true,
-                    "name": "Foo Bar",
-                    "options": Object {
-                      "timezone": "UTC",
-                    },
-                    "username": "foo@example.com",
-                  }
-                }
+                style={Object {}}
+                title="Foo Bar"
+                tooltip="Foo Bar (foo@example.com)"
+                type="gravatar"
+                uploadPath="avatar"
               >
-                <BaseAvatar
-                  className="css-5o5its-StyledAvatar e1axh4r50"
-                  gravatarId="foo@example.com"
-                  hasTooltip={true}
-                  letterId="foo@example.com"
-                  size={28}
-                  style={Object {}}
-                  title="Foo Bar"
-                  tooltip="Foo Bar (foo@example.com)"
-                  type="gravatar"
-                  uploadPath="avatar"
+                <Tooltip
+                  disabled={false}
+                  title="Foo Bar (foo@example.com)"
                 >
-                  <Tooltip
-                    disabled={false}
+                  <StyledBaseAvatar
+                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                    style={
+                      Object {
+                        "height": "28px",
+                        "width": "28px",
+                      }
+                    }
                     title="Foo Bar (foo@example.com)"
                   >
-                    <StyledBaseAvatar
-                      className="tip avatar css-5o5its-StyledAvatar e1axh4r50"
+                    <span
+                      className="tip avatar e1axh4r50 css-1a6phbt-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
                       style={
                         Object {
                           "height": "28px",
@@ -1088,28 +954,17 @@ exports[`AvatarList renders with user avatars 1`] = `
                       }
                       title="Foo Bar (foo@example.com)"
                     >
-                      <span
-                        className="tip avatar e1axh4r50 css-dnah9z-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
-                        style={
-                          Object {
-                            "height": "28px",
-                            "width": "28px",
-                          }
-                        }
-                        title="Foo Bar (foo@example.com)"
-                      >
-                        <img
-                          onError={[Function]}
-                          onLoad={[Function]}
-                          src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
-                        />
-                      </span>
-                    </StyledBaseAvatar>
-                  </Tooltip>
-                </BaseAvatar>
-              </UserAvatar>
-            </Avatar>
-          </Component>
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </StyledBaseAvatar>
+                </Tooltip>
+              </BaseAvatar>
+            </UserAvatar>
+          </Avatar>
         </StyledAvatar>
       </div>
     </Base>
diff --git a/tests/js/spec/views/groupDetails/seenBy.spec.jsx b/tests/js/spec/views/groupDetails/seenBy.spec.jsx
index f8f4e0b65a..4cecb21a21 100644
--- a/tests/js/spec/views/groupDetails/seenBy.spec.jsx
+++ b/tests/js/spec/views/groupDetails/seenBy.spec.jsx
@@ -43,7 +43,9 @@ describe('GroupSeenBy', function() {
         },
       });
 
-      expect(wrapper.find('li')).toHaveLength(3); // +1 for "icon-eye"
+      expect(wrapper.find('EyeIcon')).toHaveLength(1);
+      expect(wrapper.find('AvatarList')).toHaveLength(1);
+      expect(wrapper.find('AvatarList').prop('users')).toHaveLength(2);
     });
   });
 });
