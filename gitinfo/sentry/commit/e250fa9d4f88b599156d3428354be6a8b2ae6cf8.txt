commit e250fa9d4f88b599156d3428354be6a8b2ae6cf8
Author: ckj <chriskjennings@gmail.com>
Date:   Fri May 6 16:28:15 2016 -0700

    Add avatar to settings overview page

diff --git a/src/sentry/static/sentry/app/index.js b/src/sentry/static/sentry/app/index.js
index 2719e3be4f..226c0200ca 100644
--- a/src/sentry/static/sentry/app/index.js
+++ b/src/sentry/static/sentry/app/index.js
@@ -45,6 +45,7 @@ export default {
     createHistory: require('history/lib/createBrowserHistory'),
     Alerts: require('./components/alerts'),
     AlertActions: require('./actions/alertActions'),
+    Avatar: require('./components/avatar'),
     AvatarSettings: require('./components/avatarSettings'),
     mixins: {
       ApiMixin: require('./mixins/apiMixin'),
diff --git a/src/sentry/static/sentry/less/auth.less b/src/sentry/static/sentry/less/auth.less
index bb176d1c07..2d90c5c943 100644
--- a/src/sentry/static/sentry/less/auth.less
+++ b/src/sentry/static/sentry/less/auth.less
@@ -112,3 +112,19 @@ section.org-login {
     height: 36px;
   }
 }
+
+.account-settings-overview {
+  position: relative;
+  padding-left: 140px;
+
+  .avatar-preview {
+    position: absolute;
+    top: 0;
+    left: 0;
+
+    .avatar {
+      .square(120px);
+      border-radius: 3px;
+    }
+  }
+}
diff --git a/src/sentry/templates/sentry/account/settings.html b/src/sentry/templates/sentry/account/settings.html
index ed3e004eab..76b8dfdb6b 100644
--- a/src/sentry/templates/sentry/account/settings.html
+++ b/src/sentry/templates/sentry/account/settings.html
@@ -13,18 +13,26 @@
 
         <legend style="margin-top: 0;">Your details</legend>
 
-        {% with form.name as field %}
-            {{ field|as_crispy_field }}
-        {% endwith %}
-        {% if form.username %}
-            {% with form.username as field %}
+        <div class="account-settings-overview">
+          <div class="avatar-preview">
+            <label class="control-label">Avatar</label>
+            <div id="avatar"></div>
+          </div>
+          <div class="account-settings-body">
+            {% with form.name as field %}
                 {{ field|as_crispy_field }}
             {% endwith %}
-        {% endif %}
-        {% with form.email as field %}
-            {{ field|as_crispy_field }}
-        {% endwith %}
-        {% if form.new_password %}
+            {% if form.username %}
+                {% with form.username as field %}
+                    {{ field|as_crispy_field }}
+                {% endwith %}
+            {% endif %}
+            {% with form.email as field %}
+                {{ field|as_crispy_field }}
+            {% endwith %}
+            {% if form.new_password %}
+          </div>
+        </div>
         <hr>
         <p>{% trans "You may also optionally change your password." %}</p>
         {% with form.new_password as field %}
@@ -38,4 +46,13 @@
         </fieldset>
         {% endif %}
     </form>
+
+    <script>
+      $(function() {
+        ReactDOM.render(React.createFactory(Sentry.Avatar)({
+          user: "{{ avatar_user }}",
+          size: 128
+        }), document.getElementById('avatar'))
+      });
+    </script>
 {% endblock %}
diff --git a/src/sentry/web/frontend/accounts.py b/src/sentry/web/frontend/accounts.py
index f8f546dbc4..5a00ed1b42 100644
--- a/src/sentry/web/frontend/accounts.py
+++ b/src/sentry/web/frontend/accounts.py
@@ -19,6 +19,7 @@ from django.views.decorators.csrf import csrf_protect
 from django.utils import timezone
 from sudo.decorators import sudo_required
 
+from sentry.api.serializers import serialize
 from sentry.models import (
     LostPasswordHash, Project, ProjectStatus, UserOption
 )
@@ -133,6 +134,7 @@ def settings(request):
         'form': form,
         'page': 'settings',
         'AUTH_PROVIDERS': get_auth_providers(),
+        'avatar_user' : serialize(request.user, request.user),
     })
     return render_to_response('sentry/account/settings.html', context, request)
 
