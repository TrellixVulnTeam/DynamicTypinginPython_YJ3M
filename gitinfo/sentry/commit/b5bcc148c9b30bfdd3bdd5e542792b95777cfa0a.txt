commit b5bcc148c9b30bfdd3bdd5e542792b95777cfa0a
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue Oct 27 08:58:37 2015 +0100

    Split big sync task into sub-tasks for the doc synching

diff --git a/src/sentry/tasks/sync_docs.py b/src/sentry/tasks/sync_docs.py
index 3ae54f0e42..82a30ef92f 100644
--- a/src/sentry/tasks/sync_docs.py
+++ b/src/sentry/tasks/sync_docs.py
@@ -49,14 +49,19 @@ def sync_docs():
 
     for platform_id, platform_data in data['platforms'].iteritems():
         for integration_id, integration in platform_data.iteritems():
-            logger.info('Syncing documentation for %s.%s integration',
-                        platform_id, integration_id)
-            sync_integration(platform_id, integration_id, integration['details'])
+            sync_integration_docs.delay(platform_id, integration_id,
+                                        integration['details'])
 
 
-def sync_integration(platform_id, integration_id, path):
+@instrumented_task(name='sentry.tasks.sync_integration_docs', queue='update',
+                   time_limit=15,
+                   soft_time_limit=10)
+def sync_integration_docs(platform_id, integration_id, path):
     from sentry import http, options
 
+    logger.info('Syncing documentation for %s.%s integration',
+                platform_id, integration_id)
+
     session = http.build_session()
 
     data = session.get(BASE_URL.format(path)).json()
