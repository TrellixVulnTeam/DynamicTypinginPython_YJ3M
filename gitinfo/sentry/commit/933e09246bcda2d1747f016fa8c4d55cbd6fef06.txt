commit 933e09246bcda2d1747f016fa8c4d55cbd6fef06
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Feb 12 12:25:55 2015 -0800

    Some initial work on rendering activity

diff --git a/src/sentry/api/serializers/models/activity.py b/src/sentry/api/serializers/models/activity.py
index 44d204c7f8..31b0c9469b 100644
--- a/src/sentry/api/serializers/models/activity.py
+++ b/src/sentry/api/serializers/models/activity.py
@@ -10,10 +10,7 @@ class ActivitySerializer(Serializer):
         d = {
             'id': str(obj.id),
             'user': serialize(obj.user),
-            'type': {
-                'id': str(obj.type),
-                'name': obj.get_type_display(),
-            },
+            'type': obj.get_type_display(),
             'data': obj.data,
             'dateCreated': obj.datetime,
         }
diff --git a/src/sentry/static/sentry/app/utils.jsx b/src/sentry/static/sentry/app/utils.jsx
index 55babae642..2369fb826b 100644
--- a/src/sentry/static/sentry/app/utils.jsx
+++ b/src/sentry/static/sentry/app/utils.jsx
@@ -66,10 +66,19 @@ module.exports = {
     return arr;
   },
 
+  nl2br(str) {
+    return str.replace(/\r?\n/, '<br />');
+  },
+
   escape(str) {
     return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
   },
 
+  urlize(str) {
+    // TODO
+    return str;
+  },
+
   toTitleCase(str) {
     return str.replace(/\w\S*/g, (txt) => {
       return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
diff --git a/src/sentry/static/sentry/app/views/groupDetails/activity.jsx b/src/sentry/static/sentry/app/views/groupDetails/activity.jsx
index 03222b760e..66d626c5cb 100644
--- a/src/sentry/static/sentry/app/views/groupDetails/activity.jsx
+++ b/src/sentry/static/sentry/app/views/groupDetails/activity.jsx
@@ -1,13 +1,56 @@
 /*** @jsx React.DOM */
 var React = require("react");
 
+var Gravatar = require("../../components/gravatar");
 var GroupState = require("../../mixins/groupState");
 var PropTypes = require("../../proptypes");
+var TimeSince = require("../../components/timeSince");
+var utils = require("../../utils");
+
+
+var ACTIVITY_ACTION_STRINGS = {
+    note: "left a note",
+    set_resolved: "marked this event as resolved",
+    set_unresolved: "marked this event as unresolved",
+    set_muted: "marked this event as muted",
+    set_public: "made this event public",
+    set_private: "made this event private",
+    set_regression: "marked this event as a regression",
+    create_issue: "created an issue on {provider:s} titled <a href=\"{location:s}\">{title:s}</a>",
+    first_seen: "first saw this event",
+    assigned: "assigned this event to {user:s}",
+    unassigned: "unassigned this event"
+};
 
 var GroupActivity = React.createClass({
   mixins: [GroupState],
 
   render: function() {
+    var group = this.getGroup();
+
+    var children = group.activity.map((item, itemIdx) => {
+      var avatar = (item.user ?
+        <Gravatar email={item.user.email} size={16} className="avatar" /> :
+        <img src="" className="avatar" />);
+
+      var authorName = (item.user ?
+        item.user.name :
+        'Sentry');
+
+      var label = ACTIVITY_ACTION_STRINGS[item.type];
+
+      return (
+        <li className="activity-item">
+          {avatar}
+          <TimeSince date={item.dateCreated} />
+          <strong>{authorName}</strong> {label}
+          {item.type === 'note' &&
+            utils.nl2br(utils.urlize(utils.escape(item.data.text)))
+          }
+        </li>
+      );
+    });
+
     return (
       <div className="activity">
         <h6>Timeline</h6>
@@ -15,18 +58,7 @@ var GroupActivity = React.createClass({
           <textarea className="form-control" placeholder="Type a note and press enter" />
         </div>
         <ul className="activity">
-          <li className="activity-item">
-            <img className="avatar" src="" />
-            <time>just now</time>
-            <h6><a href="#">David Cramer</a></h6>
-            <p>This seems fixed in riak-2.2.0. That is, it will likely still error somehow, but I think they addressed the BadStatusLine stuff.</p>
-          </li>
-          <li className="activity-item">
-            <img className="avatar" src="" />
-            <time>2h ago</time>
-            <h6><a href="#">Sentry</a></h6>
-            <p>Heads up, we just saw this event for the first time.</p>
-          </li>
+          {children}
         </ul>
       </div>
     );
