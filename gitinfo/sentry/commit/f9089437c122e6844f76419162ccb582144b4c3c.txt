commit f9089437c122e6844f76419162ccb582144b4c3c
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Mar 7 13:03:01 2015 -0800

    Add various debug logging to source processor

diff --git a/src/sentry/lang/javascript/processor.py b/src/sentry/lang/javascript/processor.py
index 19cc498804..e824029d3e 100644
--- a/src/sentry/lang/javascript/processor.py
+++ b/src/sentry/lang/javascript/processor.py
@@ -178,8 +178,12 @@ def fetch_release_file(filename, release):
         release.version,
         hashlib.sha1(filename.encode('utf-8')).hexdigest(),
     )
+    logger.debug('Checking cache for release artfiact %r (release_id=%s)',
+                 filename, release.id)
     result = cache.get(cache_key)
     if result is None:
+        logger.debug('Checking database for release artifact %r (release_id=%s)',
+                     filename, release.id)
         ident = ReleaseFile.get_ident(filename)
         try:
             releasefile = ReleaseFile.objects.filter(
@@ -187,8 +191,12 @@ def fetch_release_file(filename, release):
                 ident=ident,
             ).select_related('file').get()
         except ReleaseFile.DoesNotExist:
+            logger.debug('Release artifact %r not found in database (release_id=%s)',
+                         filename, release.id)
             return None
 
+        logger.debug('Found release artifact %r (id=%s, release_id=%s)',
+                     filename, releasefile.id, release.id)
         with releasefile.file.getfile() as fp:
             body = fp.read()
         result = (releasefile.file.headers, body)
@@ -212,6 +220,7 @@ def fetch_url(url, project=None, release=None):
         result = None
 
     if result is None:
+        logger.debug('Checking cache for url %r', url)
         result = cache.get(cache_key)
 
     if result is None:
@@ -232,8 +241,9 @@ def fetch_url(url, project=None, release=None):
             if token:
                 headers['X-Sentry-Token'] = token
 
-        http_session = http.build_session()
+        logger.debug('Fetching %r from the internet', url)
 
+        http_session = http.build_session()
         try:
             response = http_session.get(
                 url,
diff --git a/src/sentry/models/event.py b/src/sentry/models/event.py
index e520217118..9df49852bb 100644
--- a/src/sentry/models/event.py
+++ b/src/sentry/models/event.py
@@ -174,10 +174,10 @@ class Event(Model):
         # We use a OrderedDict to keep elements ordered for a potential JSON serializer
         data = OrderedDict()
         data['id'] = self.event_id
+        data['project'] = self.project_id,
         data['culprit'] = self.group.culprit
         data['message'] = self.message
         data['checksum'] = self.checksum
-        data['project'] = self.project.slug
         data['datetime'] = self.datetime
         data['time_spent'] = self.time_spent
         for k, v in sorted(self.data.iteritems()):
