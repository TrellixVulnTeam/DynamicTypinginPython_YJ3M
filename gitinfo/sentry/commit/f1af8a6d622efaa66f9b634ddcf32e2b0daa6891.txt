commit f1af8a6d622efaa66f9b634ddcf32e2b0daa6891
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Jul 26 15:22:37 2014 +0200

    Move manage project code into controller

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index a921dcdbc3..5ff58c2c08 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -424,6 +424,7 @@ SENTRY_STATIC_BUNDLES = {
                 "sentry/app/controllers/groupDetails.js",
                 "sentry/app/controllers/manageAccessGroupMembers.js",
                 "sentry/app/controllers/manageAccessGroupProjects.js",
+                "sentry/app/controllers/manageProject.js",
                 "sentry/app/controllers/manageTeamOwnership.js",
                 "sentry/app/controllers/manageTeamSettings.js",
                 "sentry/app/controllers/projectStream.js",
diff --git a/src/sentry/static/sentry/app/base.js b/src/sentry/static/sentry/app/base.js
index 3b52517dbe..49a76e3009 100644
--- a/src/sentry/static/sentry/app/base.js
+++ b/src/sentry/static/sentry/app/base.js
@@ -491,62 +491,6 @@
 
         }),
 
-        ProjectDetailsPage: BasePage.extend({
-            initialize: function(){
-                BasePage.prototype.initialize.apply(this, arguments);
-
-                app.utils.makeSearchableUsersInput('form input[name=owner]');
-
-                $("input[type=range]").each(_.bind(function loop(n, el){
-                    var $el = $(el),
-                        min = parseInt($el.attr('min'), 10),
-                        max = parseInt($el.attr('max'), 10),
-                        step = parseInt($el.attr('step'), 10),
-                        values = [],
-                        $value = $('<span class="value"></span>');
-
-                    var i = min;
-                    while (i <= max) {
-                        values.push(i);
-                        if (i < 12) {
-                            i += 1;
-                        } else if (i < 24) {
-                            i += 3;
-                        } else if (i < 36) {
-                            i += 6;
-                        } else if (i < 48) {
-                            i += 12;
-                        } else {
-                            i += 24;
-                        }
-                    }
-
-                    $el.on("slider:ready", _.bind(function sliderready(event, data) {
-                        $value.appendTo(data.el);
-                        $value.html(this.formatHours(data.value));
-                    }, this)).on("slider:changed", _.bind(function sliderchanged(event, data) {
-                        $value.html(this.formatHours(data.value));
-                    }, this)).simpleSlider({
-                        range: [min, max],
-                        step: step,
-                        allowedValues: values,
-                        snap: true
-                    });
-                }, this));
-            },
-
-            formatHours: function formatHours(val) {
-                val = parseInt(val, 10);
-                if (val === 0) {
-                    return 'Disabled';
-                } else if (val > 23 && val % 24 === 0) {
-                    val = (val / 24);
-                    return val + ' day' + (val != 1 ? 's' : '');
-                }
-                return val + ' hour' + (val != 1 ? 's' : '');
-            }
-        }),
-
         ProjectNotificationsPage: BasePage.extend({
             initialize: function(){
                 BasePage.prototype.initialize.apply(this, arguments);
diff --git a/src/sentry/static/sentry/app/controllers/manageProject.js b/src/sentry/static/sentry/app/controllers/manageProject.js
new file mode 100644
index 0000000000..10ff9eefb8
--- /dev/null
+++ b/src/sentry/static/sentry/app/controllers/manageProject.js
@@ -0,0 +1,61 @@
+(function(){
+  'use strict';
+
+  function formatHours(val) {
+    val = parseInt(val, 10);
+    if (val === 0) {
+      return 'Disabled';
+    } else if (val > 23 && val % 24 === 0) {
+      val = (val / 24);
+      return val + ' day' + (val != 1 ? 's' : '');
+    }
+    return val + ' hour' + (val != 1 ? 's' : '');
+  }
+
+  SentryApp.classy.controller({
+    name: 'ManageProjectCtrl',
+
+    inject: ['$scope'],
+
+    init: function() {
+      app.utils.makeSearchableUsersInput('form input[name=owner]');
+
+      $("input[type=range]").each(function loop(n, el){
+        var $el = $(el),
+            min = parseInt($el.attr('min'), 10),
+            max = parseInt($el.attr('max'), 10),
+            step = parseInt($el.attr('step'), 10),
+            values = [],
+            $value = $('<span class="value"></span>');
+
+        var i = min;
+        while (i <= max) {
+          values.push(i);
+          if (i < 12) {
+            i += 1;
+          } else if (i < 24) {
+            i += 3;
+          } else if (i < 36) {
+            i += 6;
+          } else if (i < 48) {
+            i += 12;
+          } else {
+            i += 24;
+          }
+        }
+
+        $el.on("slider:ready", function sliderready(event, data) {
+          $value.appendTo(data.el);
+          $value.html(formatHours(data.value));
+        }).on("slider:changed", function sliderchanged(event, data) {
+          $value.html(formatHours(data.value));
+        }).simpleSlider({
+          range: [min, max],
+          step: step,
+          allowedValues: values,
+          snap: true
+        });
+      });
+    }
+  });
+}());
diff --git a/src/sentry/templates/sentry/projects/manage.html b/src/sentry/templates/sentry/projects/manage.html
index 20040470d0..f42e9cf879 100644
--- a/src/sentry/templates/sentry/projects/manage.html
+++ b/src/sentry/templates/sentry/projects/manage.html
@@ -7,6 +7,8 @@
 
 {% block bodyclass %} with-left-sidebar{% endblock %}
 
+{% block controller %}ManageProjectCtrl{% endblock %}
+
 {% block main %}
     <style>
     select { width: 300px; }
@@ -53,10 +55,6 @@
                 {% endif %}
             </div>
         </form>
-
-        <script>
-        new app.ProjectDetailsPage();
-        </script>
     {% endblock %}
 {% endblock %}
 
