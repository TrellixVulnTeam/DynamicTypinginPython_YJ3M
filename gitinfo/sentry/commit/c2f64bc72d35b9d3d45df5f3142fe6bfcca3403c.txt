commit c2f64bc72d35b9d3d45df5f3142fe6bfcca3403c
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Fri Oct 2 16:48:19 2015 -0700

    Handle the case when doign a bad user tag query
    
    Fixes GH-2084

diff --git a/src/sentry/search/utils.py b/src/sentry/search/utils.py
index 8748bbf2f3..3cb6496b80 100644
--- a/src/sentry/search/utils.py
+++ b/src/sentry/search/utils.py
@@ -6,15 +6,14 @@ from sentry.utils.auth import find_users
 
 
 def get_user_tag(project, key, value):
-    lookup = EventUser.attr_from_keyword(key)
-
     # TODO(dcramer): do something with case of multiple matches
     try:
+        lookup = EventUser.attr_from_keyword(key)
         euser = EventUser.objects.filter(
             project=project,
             **{lookup: value}
         )[0]
-    except IndexError:
+    except (KeyError, IndexError):
         return '{}:{}'.format(key, value)
 
     return euser.tag_value
