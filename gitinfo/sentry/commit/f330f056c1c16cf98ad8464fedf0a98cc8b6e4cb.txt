commit f330f056c1c16cf98ad8464fedf0a98cc8b6e4cb
Author: Megan Heskett <meg.heskett@gmail.com>
Date:   Wed Oct 30 13:40:22 2019 -0700

    ref(join-requests): Add settings message to email (#15354)

diff --git a/src/sentry/models/organizationmember.py b/src/sentry/models/organizationmember.py
index dddd40fca3..4370480df3 100644
--- a/src/sentry/models/organizationmember.py
+++ b/src/sentry/models/organizationmember.py
@@ -250,6 +250,9 @@ class OrganizationMember(Model):
             "pending_requests_link": absolute_uri(
                 reverse("sentry-organization-members-requests", kwargs=link_args)
             ),
+            "settings_link": absolute_uri(
+                reverse("sentry-organization-settings", args=[self.organization.slug])
+            ),
         }
 
         if self.requested_to_join:
diff --git a/src/sentry/templates/sentry/emails/organization-join-request.html b/src/sentry/templates/sentry/emails/organization-join-request.html
index ad3f60483e..4d53dcccea 100644
--- a/src/sentry/templates/sentry/emails/organization-join-request.html
+++ b/src/sentry/templates/sentry/emails/organization-join-request.html
@@ -11,5 +11,6 @@
 
   <p class="via">
     You are receiving this email because you're listed as an organization Owner or Manager.
+    Requests to join your organization can be disabled in <a href="{{ settings_link }}">Organization Settings</a>.
   </p>
 {% endblock %}
diff --git a/src/sentry/templates/sentry/emails/organization-join-request.txt b/src/sentry/templates/sentry/emails/organization-join-request.txt
index 3f26919f3d..f71fe77fc0 100644
--- a/src/sentry/templates/sentry/emails/organization-join-request.txt
+++ b/src/sentry/templates/sentry/emails/organization-join-request.txt
@@ -7,3 +7,4 @@ View access requests by clicking the link below:
     {{ pending_requests_link }}
 
 You are receiving this email because you're listed as an organization Owner or Manager.
+Requests to join your organization can be disabled in settings: {{ settings_link }}
diff --git a/src/sentry/web/frontend/debug/debug_organization_join_request.py b/src/sentry/web/frontend/debug/debug_organization_join_request.py
index ac19836a20..a43835fde8 100644
--- a/src/sentry/web/frontend/debug/debug_organization_join_request.py
+++ b/src/sentry/web/frontend/debug/debug_organization_join_request.py
@@ -21,6 +21,7 @@ class DebugOrganizationJoinRequestEmailView(View):
             "organization_link": absolute_uri(
                 reverse("sentry-organization-index", args=[org.slug])
             ),
+            "settings_link": absolute_uri(reverse("sentry-organization-settings", args=[org.slug])),
         }
         return MailPreview(
             html_template="sentry/emails/organization-join-request.html",
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 8264ac757e..0593a24d04 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -425,6 +425,11 @@ urlpatterns += patterns(
                     name="sentry-remove-account",
                 ),
                 url(r"^account/", generic_react_page_view),
+                url(
+                    r"^(?P<organization_slug>[\w_-]+)/$",
+                    react_page_view,
+                    name="sentry-organization-settings",
+                ),
                 url(
                     r"^(?P<organization_slug>[\w_-]+)/members/$",
                     react_page_view,
