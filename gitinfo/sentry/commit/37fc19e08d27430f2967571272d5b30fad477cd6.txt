commit 37fc19e08d27430f2967571272d5b30fad477cd6
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Fri Feb 22 11:15:41 2019 -0800

    fix(onboarding): Fix Issues Stream link after creating project (#12174)
    
    This fixes the issues stream link to include newly created project in URL query params.

diff --git a/src/sentry/static/sentry/app/components/sidebar/index.jsx b/src/sentry/static/sentry/app/components/sidebar/index.jsx
index 2450669d96..9ec07221f2 100644
--- a/src/sentry/static/sentry/app/components/sidebar/index.jsx
+++ b/src/sentry/static/sentry/app/components/sidebar/index.jsx
@@ -65,9 +65,11 @@ class Sidebar extends React.Component {
     this.routerListener =
       router &&
       router.listen(() => {
+        this.hashChangeHandler();
         $('.tooltip').tooltip('hide');
       });
 
+    this.hashChangeHandler();
     this.doCollapse(this.props.collapsed);
   }
 
@@ -135,7 +137,7 @@ class Sidebar extends React.Component {
 
   hashChangeHandler = () => {
     if (window.location.hash == '#welcome') {
-      this.setState({showTodos: true});
+      this.togglePanel('todos');
     }
   };
 
diff --git a/src/sentry/static/sentry/app/views/projectInstall/docsContext.jsx b/src/sentry/static/sentry/app/views/projectInstall/docsContext.jsx
index a5f9092dd3..6da7df988c 100644
--- a/src/sentry/static/sentry/app/views/projectInstall/docsContext.jsx
+++ b/src/sentry/static/sentry/app/views/projectInstall/docsContext.jsx
@@ -15,9 +15,7 @@ const ProjectDocsContext = createReactClass({
   getInitialState() {
     return {
       loading: true,
-      platformList: null,
-      project: null,
-      team: null,
+      data: null,
     };
   },
 
@@ -50,6 +48,7 @@ const ProjectDocsContext = createReactClass({
 
     const data = this.state.data;
     return React.cloneElement(this.props.children, {
+      project: this.context.project,
       platformData: data,
     });
   },
diff --git a/src/sentry/static/sentry/app/views/projectInstall/platform.jsx b/src/sentry/static/sentry/app/views/projectInstall/platform.jsx
index b7ce8d2099..63166c1a52 100644
--- a/src/sentry/static/sentry/app/views/projectInstall/platform.jsx
+++ b/src/sentry/static/sentry/app/views/projectInstall/platform.jsx
@@ -21,6 +21,7 @@ const ProjectInstallPlatform = createReactClass({
 
   propTypes: {
     organization: SentryTypes.Organization.isRequired,
+    project: SentryTypes.Project.isRequired,
     // eslint-disable-next-line react/no-unused-prop-types
     platformData: PropTypes.object.isRequired,
     linkPath: PropTypes.func,
@@ -110,7 +111,7 @@ const ProjectInstallPlatform = createReactClass({
 
   render() {
     const {integration, platform} = this.state;
-    const {organization, params: {orgId, projectId}} = this.props;
+    const {organization, project, params: {orgId, projectId}} = this.props;
 
     if (!integration || !platform) {
       return <NotFound />;
@@ -119,7 +120,7 @@ const ProjectInstallPlatform = createReactClass({
     const hasSentry10 = new Set(organization.features).has('sentry10');
 
     const issueStreamLink = hasSentry10
-      ? `/organizations/${orgId}/issues/#welcome`
+      ? `/organizations/${orgId}/issues/?project=${project.id}#welcome`
       : `/${orgId}/${projectId}/#welcome`;
 
     const gettingStartedLink = hasSentry10
diff --git a/tests/js/spec/views/onboarding/configure/__snapshots__/index.spec.jsx.snap b/tests/js/spec/views/onboarding/configure/__snapshots__/index.spec.jsx.snap
index 36d6a2e7a5..e66e54f189 100644
--- a/tests/js/spec/views/onboarding/configure/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/views/onboarding/configure/__snapshots__/index.spec.jsx.snap
@@ -273,6 +273,18 @@ exports[`Configure should render correctly render() should render platform docs
                         ],
                       }
                     }
+                    project={
+                      Object {
+                        "environments": Array [],
+                        "hasAccess": true,
+                        "id": "2",
+                        "isBookmarked": false,
+                        "isMember": true,
+                        "name": "Project Name",
+                        "slug": "project-slug",
+                        "teams": Array [],
+                      }
+                    }
                   >
                     <ProjectInstallPlatform
                       linkPath={[Function]}
@@ -340,6 +352,18 @@ exports[`Configure should render correctly render() should render platform docs
                           ],
                         }
                       }
+                      project={
+                        Object {
+                          "environments": Array [],
+                          "hasAccess": true,
+                          "id": "2",
+                          "isBookmarked": false,
+                          "isMember": true,
+                          "name": "Project Name",
+                          "slug": "project-slug",
+                          "teams": Array [],
+                        }
+                      }
                     >
                       <Panel>
                         <Component
diff --git a/tests/js/spec/views/projectInstall/platform.spec.jsx b/tests/js/spec/views/projectInstall/platform.spec.jsx
index a5c44f1cf7..6322881fba 100644
--- a/tests/js/spec/views/projectInstall/platform.spec.jsx
+++ b/tests/js/spec/views/projectInstall/platform.spec.jsx
@@ -1,25 +1,13 @@
 import React from 'react';
 import {shallow} from 'enzyme';
 
-import {Client} from 'app/api';
 import {ProjectInstallPlatform} from 'app/views/projectInstall/platform';
 
 describe('ProjectInstallPlatform', function() {
-  let sandbox;
-
-  beforeEach(function() {
-    sandbox = sinon.sandbox.create();
-
-    this.stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
-  });
-
-  afterEach(function() {
-    sandbox.restore();
-  });
-
   describe('render()', function() {
     const baseProps = {
       organization: TestStubs.Organization(),
+      project: TestStubs.Project(),
       location: {query: {}},
       platformData: {
         platforms: [
