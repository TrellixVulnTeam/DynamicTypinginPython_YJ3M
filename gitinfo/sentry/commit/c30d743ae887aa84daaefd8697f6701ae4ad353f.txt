commit c30d743ae887aa84daaefd8697f6701ae4ad353f
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Fri May 5 14:34:29 2017 +0200

    Added tests for thread hash changes

diff --git a/tests/sentry/interfaces/test_threads.py b/tests/sentry/interfaces/test_threads.py
index 4b41b9c733..92a7b716e1 100644
--- a/tests/sentry/interfaces/test_threads.py
+++ b/tests/sentry/interfaces/test_threads.py
@@ -41,3 +41,46 @@ class ThreadsTest(TestCase):
         assert context['values'][0]['name'] == 'Main Thread'
         assert context['values'][0]['crashed'] is False
         assert context['values'][0]['current'] is True
+
+    def test_get_hash(self):
+        result = self.interface.get_hash()
+        self.assertEquals(result, [['foo/baz.c', 'main']])
+
+    def test_no_hash(self):
+        interface = Threads.to_python(dict(values=[{
+            'id': 42,
+            'crashed': False,
+            'current': True,
+            'name': 'Main Thread',
+            'stacktrace': {'frames': [{
+                'filename': 'foo/baz.c',
+                'function': 'main',
+                'lineno': 1,
+                'in_app': True,
+            }]},
+            'raw_stacktrace': {'frames': [{
+                'filename': None,
+                'lineno': 1,
+                'function': '<redacted>',
+                'in_app': True,
+            }]},
+        }, {
+            'id': 43,
+            'crashed': False,
+            'current': True,
+            'name': 'Main Thread',
+            'stacktrace': {'frames': [{
+                'filename': 'foo/baz.c',
+                'function': 'main',
+                'lineno': 1,
+                'in_app': True,
+            }]},
+            'raw_stacktrace': {'frames': [{
+                'filename': None,
+                'lineno': 1,
+                'function': '<redacted>',
+                'in_app': True,
+            }]},
+        }]))
+        result = interface.get_hash()
+        assert not result
