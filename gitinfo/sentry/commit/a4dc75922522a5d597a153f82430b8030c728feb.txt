commit a4dc75922522a5d597a153f82430b8030c728feb
Author: MeredithAnya <meredith.a.heller@gmail.com>
Date:   Wed Nov 7 14:21:06 2018 -0800

    add request.user (#10465)

diff --git a/src/sentry/features/helpers.py b/src/sentry/features/helpers.py
index 2b8f4a9efb..d7a844a33c 100644
--- a/src/sentry/features/helpers.py
+++ b/src/sentry/features/helpers.py
@@ -28,7 +28,8 @@ def requires_feature(feature, any_org=None):
             # The endpoint is accessible if any of the User's Orgs have the feature
             # flag enabled.
             if any_org:
-                if not any(features.has(feature, org) for org in request.user.get_orgs()):
+                if not any(features.has(feature, org, actor=request.user)
+                           for org in request.user.get_orgs()):
                     return Response(status=404)
 
                 return func(self, request, *args, **kwargs)
@@ -37,7 +38,7 @@ def requires_feature(feature, any_org=None):
                 if 'organization' not in kwargs:
                     return Response(status=404)
 
-                if not features.has(feature, kwargs['organization']):
+                if not features.has(feature, kwargs['organization'], actor=request.user):
                     return Response(status=404)
 
                 return func(self, request, *args, **kwargs)
