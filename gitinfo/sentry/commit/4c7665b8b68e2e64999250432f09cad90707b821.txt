commit 4c7665b8b68e2e64999250432f09cad90707b821
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Aug 15 12:04:08 2016 -0700

    Sort releases by creation date when available
    
    @getsentry/infrastructure

diff --git a/src/sentry/api/endpoints/project_releases.py b/src/sentry/api/endpoints/project_releases.py
index 375a5d3cf6..5054c5830b 100644
--- a/src/sentry/api/endpoints/project_releases.py
+++ b/src/sentry/api/endpoints/project_releases.py
@@ -8,6 +8,7 @@ from rest_framework.response import Response
 
 from sentry.api.base import DocSection
 from sentry.api.bases.project import ProjectEndpoint, ProjectReleasePermission
+from sentry.api.paginator import OffsetPaginator
 from sentry.api.fields.user import UserField
 from sentry.api.serializers import serialize
 from sentry.models import Activity, Release
@@ -81,10 +82,15 @@ class ProjectReleasesEndpoint(ProjectEndpoint):
                 version__istartswith=query,
             )
 
+        queryset = queryset.extra(select={
+            'sort': 'COALESCE(date_released, date_added)',
+        })
+
         return self.paginate(
             request=request,
             queryset=queryset,
-            order_by='-id',
+            order_by='-sort',
+            paginator_cls=OffsetPaginator,
             on_results=lambda x: serialize(x, request.user),
         )
 
diff --git a/src/sentry/api/paginator.py b/src/sentry/api/paginator.py
index 03c1ff7b8f..3e0bd5e802 100644
--- a/src/sentry/api/paginator.py
+++ b/src/sentry/api/paginator.py
@@ -161,7 +161,7 @@ class OffsetPaginator(BasePaginator):
 
         results = list(queryset[offset:stop])
         if cursor.value != limit:
-            results = results[::-1][:limit + 1][::-1]
+            results = results[-(limit + 1):]
 
         next_cursor = Cursor(limit, page + 1, False, len(results) > limit)
         prev_cursor = Cursor(limit, page - 1, True, page > 0)
diff --git a/tests/sentry/api/endpoints/test_project_releases.py b/tests/sentry/api/endpoints/test_project_releases.py
index 47b889ccf3..a6381c1242 100644
--- a/tests/sentry/api/endpoints/test_project_releases.py
+++ b/tests/sentry/api/endpoints/test_project_releases.py
@@ -25,6 +25,12 @@ class ProjectReleaseListTest(APITestCase):
             version='2',
             date_added=datetime(2013, 8, 14, 3, 8, 24, 880386),
         )
+        release3 = Release.objects.create(
+            project=project1,
+            version='3',
+            date_added=datetime(2013, 8, 12, 3, 8, 24, 880386),
+            date_released=datetime(2013, 8, 15, 3, 8, 24, 880386),
+        )
         Release.objects.create(
             project=project2,
             version='1',
@@ -37,9 +43,10 @@ class ProjectReleaseListTest(APITestCase):
         response = self.client.get(url, format='json')
 
         assert response.status_code == 200, response.content
-        assert len(response.data) == 2
-        assert response.data[0]['version'] == release2.version
-        assert response.data[1]['version'] == release1.version
+        assert len(response.data) == 3
+        assert response.data[0]['version'] == release3.version
+        assert response.data[1]['version'] == release2.version
+        assert response.data[2]['version'] == release1.version
 
     def test_query_filter(self):
         self.login_as(user=self.user)
