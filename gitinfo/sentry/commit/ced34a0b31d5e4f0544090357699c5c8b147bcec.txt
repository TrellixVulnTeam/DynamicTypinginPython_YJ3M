commit ced34a0b31d5e4f0544090357699c5c8b147bcec
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Apr 20 16:10:06 2015 -0700

    Fix saving of origins

diff --git a/src/sentry/web/frontend/organization_api_key_settings.py b/src/sentry/web/frontend/organization_api_key_settings.py
index 52f428dd9c..c1f3e3f3a7 100644
--- a/src/sentry/web/frontend/organization_api_key_settings.py
+++ b/src/sentry/web/frontend/organization_api_key_settings.py
@@ -16,7 +16,7 @@ class ApiKeyForm(forms.ModelForm):
 
     class Meta:
         model = ApiKey
-        fields = ('label', 'scopes', 'allowed_origins')
+        fields = ('label', 'scopes')
 
 
 class OrganizationApiKeySettingsView(OrganizationView):
@@ -25,8 +25,14 @@ class OrganizationApiKeySettingsView(OrganizationView):
     def handle(self, request, organization, key_id):
         key = ApiKey.objects.get(organization=organization, id=key_id)
 
-        form = ApiKeyForm(request.POST or None, instance=key)
+        form = ApiKeyForm(
+            request.POST or None, instance=key, initial={
+                'allowed_origins': key.allowed_origins,
+            },
+        )
+
         if form.is_valid():
+            key.allowed_origins = '\n'.join(form.cleaned_data['allowed_origins'])
             key.save()
             messages.add_message(
                 request, messages.SUCCESS,
