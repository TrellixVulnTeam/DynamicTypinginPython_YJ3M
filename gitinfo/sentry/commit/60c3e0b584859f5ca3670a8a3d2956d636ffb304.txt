commit 60c3e0b584859f5ca3670a8a3d2956d636ffb304
Author: Mads Sülau Jørgensen <mads@sulau.dk>
Date:   Sat Jun 23 10:34:20 2012 +0300

    Removed error prone gravatar ssl-detection.
    
    Removed gravatar ssl detection as it's neer impossible to get right in every deployment scenario, and doesn't really add any overhead.

diff --git a/sentry/templatetags/sentry_helpers.py b/sentry/templatetags/sentry_helpers.py
index ec30af43fa..e34ddbe14a 100644
--- a/sentry/templatetags/sentry_helpers.py
+++ b/sentry/templatetags/sentry_helpers.py
@@ -301,11 +301,7 @@ def get_project_dsn(context, user, project, asvar):
                 Optional([Constant('size'), Variable('sizevar')]),
                 Optional([Constant('default'), Variable('defaultvar')])])
 def gravatar_url(context, email, sizevar=None, defaultvar='mm'):
-    # XXX - use request.is_secure() in django 1.4
-    if context['request'].META['wsgi.url_scheme'] == 'https':
-        base = 'https://secure.gravatar.com'
-    else:
-        base = 'http://www.gravatar.com'
+    base = 'https://secure.gravatar.com'
 
     gravatar_url = "%s/avatar/%s" % (base, hashlib.md5(email.lower()).hexdigest())
 
