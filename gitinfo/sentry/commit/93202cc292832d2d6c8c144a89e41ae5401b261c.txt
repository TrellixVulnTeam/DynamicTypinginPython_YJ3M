commit 93202cc292832d2d6c8c144a89e41ae5401b261c
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Thu Apr 25 10:11:37 2019 -0700

    tests(js): Throw on missing key for arrays React warning (#12929)
    
    This makes jest fail when it receives this React warning.

diff --git a/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx b/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx
index 275ddf347b..1066f2eab1 100644
--- a/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx
+++ b/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx
@@ -286,7 +286,7 @@ class DropdownAutoCompleteMenu extends React.Component {
     const {index} = item;
 
     return item.groupLabel ? (
-      <LabelWithBorder style={style} key={item.value}>
+      <LabelWithBorder style={style} key={item.id}>
         {item.label && <GroupLabel>{item.label}</GroupLabel>}
       </LabelWithBorder>
     ) : (
diff --git a/src/sentry/static/sentry/app/components/projectSelector.jsx b/src/sentry/static/sentry/app/components/projectSelector.jsx
index 1e7887539c..5d4ccd9c5b 100644
--- a/src/sentry/static/sentry/app/components/projectSelector.jsx
+++ b/src/sentry/static/sentry/app/components/projectSelector.jsx
@@ -204,7 +204,6 @@ class ProjectSelector extends React.Component {
       searchKey: project.slug,
       label: ({inputValue}) => (
         <ProjectSelectorItem
-          something="test"
           project={project}
           organization={org}
           multi={multi}
@@ -229,6 +228,7 @@ class ProjectSelector extends React.Component {
           {
             hideGroupLabel: nonMemberProjects.length === 0,
             itemSize: 'small',
+            id: 'no-membership-header', // needed for tests for non-virtualized lists
             label: <Label>{t("Projects I don't belong to")}</Label>,
             items: nonMemberProjects.map(getProjectItem),
           },
diff --git a/tests/js/spec/components/__snapshots__/dropdownAutoCompleteMenu.spec.jsx.snap b/tests/js/spec/components/__snapshots__/dropdownAutoCompleteMenu.spec.jsx.snap
index 327b10571b..f6c34c05bd 100644
--- a/tests/js/spec/components/__snapshots__/dropdownAutoCompleteMenu.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/dropdownAutoCompleteMenu.spec.jsx.snap
@@ -8,6 +8,7 @@ exports[`DropdownAutoCompleteMenu renders with a group 1`] = `
   items={
     Array [
       Object {
+        "id": "countries",
         "items": Array [
           Object {
             "label": <div>
diff --git a/tests/js/spec/components/dropdownAutoCompleteMenu.spec.jsx b/tests/js/spec/components/dropdownAutoCompleteMenu.spec.jsx
index 6b9370b129..8837b8c40c 100644
--- a/tests/js/spec/components/dropdownAutoCompleteMenu.spec.jsx
+++ b/tests/js/spec/components/dropdownAutoCompleteMenu.spec.jsx
@@ -35,6 +35,7 @@ describe('DropdownAutoCompleteMenu', function() {
         isOpen={true}
         items={[
           {
+            id: 'countries',
             value: 'countries',
             label: 'countries',
             items: [
@@ -65,6 +66,7 @@ describe('DropdownAutoCompleteMenu', function() {
         isOpen={true}
         items={[
           {
+            id: 'countries',
             value: 'countries',
             label: 'countries',
             items: [
diff --git a/tests/js/throw-on-react-error.js b/tests/js/throw-on-react-error.js
index 42e4ecd672..2c0836cfbb 100644
--- a/tests/js/throw-on-react-error.js
+++ b/tests/js/throw-on-react-error.js
@@ -5,6 +5,7 @@ const originalConsoleError = console.error;
 const BAD_ERRORS = [
   'Failed prop type',
   'Failed child context type',
+  'Warning: Each child in an array or iterator should have a unique "key" prop',
   'React does not recognize the `[^`]+` prop on a DOM element',
 ];
 
