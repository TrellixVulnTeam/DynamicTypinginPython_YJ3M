commit 56ef01905c4fa399f7eb0c308b3e0375bdd60c91
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Dec 13 21:21:06 2012 -0800

    Refresh pk.user on all auth checks

diff --git a/src/sentry/coreapi.py b/src/sentry/coreapi.py
index 6d1807a55c..8e207aa528 100644
--- a/src/sentry/coreapi.py
+++ b/src/sentry/coreapi.py
@@ -107,6 +107,8 @@ def project_from_auth_vars(auth_vars):
         except TeamMember.DoesNotExist:
             raise APIUnauthorized('Member does not have access to project')
 
+        # We have to refetch this as it may have been catched
+        pk.user = User.objects.get(id=pk.user_id)
         if not pk.user.is_active:
             raise APIUnauthorized('Account is not active')
 
@@ -141,7 +143,8 @@ def project_from_api_key_and_id(api_key, project_id):
             raise APIUnauthorized('Member does not have access to project')
 
         # We have to refetch this as it may have been catched
-        if not User.objects.get(id=pk.user_id).is_active:
+        pk.user = User.objects.get(id=pk.user_id)
+        if not pk.user.is_active:
             raise APIUnauthorized('Account is not active')
 
         tm.project = project
