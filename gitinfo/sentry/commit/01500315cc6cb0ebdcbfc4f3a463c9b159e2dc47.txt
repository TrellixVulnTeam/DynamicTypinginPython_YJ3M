commit 01500315cc6cb0ebdcbfc4f3a463c9b159e2dc47
Author: Burak Yigit Kaya <byk@sentry.io>
Date:   Wed Nov 6 00:27:14 2019 +0300

    ref(uwsgi): Make default settings less demanding (#15450)
    
    For local development and smaller setups 1 process x 2 threads seems to be working pretty well and with a faster start-up time and less CPU waste.

diff --git a/api-docs/sentry.conf.py b/api-docs/sentry.conf.py
index 7f0bb458bf..0ca0f26cd3 100644
--- a/api-docs/sentry.conf.py
+++ b/api-docs/sentry.conf.py
@@ -43,7 +43,7 @@ LOGIN_REDIRECT_URL = SENTRY_URL_PREFIX + "/"
 SENTRY_WEB_HOST = "127.0.0.1"
 SENTRY_WEB_PORT = SENTRY_APIDOCS_WEB_PORT
 SENTRY_WEB_OPTIONS = {
-    "workers": 2,
+    "workers": 1,
     "limit_request_line": 0,
     "secure_scheme_headers": {"X-FORWARDED-PROTO": "https"},
 }
diff --git a/docker/sentry.conf.py b/docker/sentry.conf.py
index f3f4964864..9f8bcf77d2 100644
--- a/docker/sentry.conf.py
+++ b/docker/sentry.conf.py
@@ -244,7 +244,7 @@ if Bool(env('SENTRY_USE_SSL', False)):
 SENTRY_WEB_HOST = '0.0.0.0'
 SENTRY_WEB_PORT = 9000
 SENTRY_WEB_OPTIONS = {
-    # 'workers': 3,  # the number of web workers
+    # 'workers': 1,  # the number of web workers
 }
 
 ###############
diff --git a/src/sentry/data/config/sentry.conf.py.default b/src/sentry/data/config/sentry.conf.py.default
index 701971f8ab..f6cbf375d8 100644
--- a/src/sentry/data/config/sentry.conf.py.default
+++ b/src/sentry/data/config/sentry.conf.py.default
@@ -126,6 +126,6 @@ SENTRY_DIGESTS = 'sentry.digests.backends.redis.RedisBackend'
 SENTRY_WEB_HOST = '0.0.0.0'
 SENTRY_WEB_PORT = 9000
 SENTRY_WEB_OPTIONS = {
-    # 'workers': 3,  # the number of web workers
+    # 'workers': 1,  # the number of web workers
     # 'protocol': 'uwsgi',  # Enable uwsgi protocol instead of http
 }
diff --git a/src/sentry/services/http.py b/src/sentry/services/http.py
index 2b95eef152..4526417339 100644
--- a/src/sentry/services/http.py
+++ b/src/sentry/services/http.py
@@ -49,8 +49,8 @@ class SentryHTTPServer(Service):
         options.setdefault("protocol", "http")
         options.setdefault("auto-procname", True)
         options.setdefault("procname-prefix-spaced", "[Sentry]")
-        options.setdefault("workers", 3)
-        options.setdefault("threads", 4)
+        options.setdefault("workers", 1)
+        options.setdefault("threads", 2)
         options.setdefault("http-timeout", 30)
         options.setdefault("vacuum", True)
         options.setdefault("thunder-lock", True)
