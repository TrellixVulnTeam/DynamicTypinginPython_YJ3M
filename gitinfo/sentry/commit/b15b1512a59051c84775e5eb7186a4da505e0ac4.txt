commit b15b1512a59051c84775e5eb7186a4da505e0ac4
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Thu Apr 2 11:54:17 2020 +0200

    fix: Add more metrics to internal transport (#18038)

diff --git a/src/sentry/utils/sdk.py b/src/sentry/utils/sdk.py
index 6f0081248e..d2d5d8aea3 100644
--- a/src/sentry/utils/sdk.py
+++ b/src/sentry/utils/sdk.py
@@ -150,6 +150,7 @@ def configure_sdk():
         # Upstream should get the event first because it is most isolated from
         # the this sentry installation.
         if upstream_transport:
+            metrics.incr("internal.captured.events.upstream")
             # TODO(mattrobenolt): Bring this back safely.
             # from sentry import options
             # install_id = options.get('sentry:install-id')
@@ -160,6 +161,9 @@ def configure_sdk():
         if relay_transport:
             rate = options.get("store.use-relay-dsn-sample-rate")
             if rate and random.random() < rate:
+                # Record this before calling `is_current_event_safe` to make
+                # numbers comparable to InternalTransport
+                metrics.incr("internal.captured.events.relay")
                 if is_current_event_safe():
                     relay_transport.capture_event(event)
                 else:
@@ -168,6 +172,7 @@ def configure_sdk():
                 return
 
         if internal_transport:
+            metrics.incr("internal.captured.events.internal")
             internal_transport.capture_event(event)
 
     sentry_sdk.init(
