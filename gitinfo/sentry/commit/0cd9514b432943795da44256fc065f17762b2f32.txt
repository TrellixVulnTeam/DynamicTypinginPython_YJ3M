commit 0cd9514b432943795da44256fc065f17762b2f32
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue Sep 1 01:01:55 2015 +0200

    Restyled context data to better deal with unquoted data.

diff --git a/src/sentry/static/sentry/app/components/contextData.jsx b/src/sentry/static/sentry/app/components/contextData.jsx
index eb0248332d..39c91b09fb 100644
--- a/src/sentry/static/sentry/app/components/contextData.jsx
+++ b/src/sentry/static/sentry/app/components/contextData.jsx
@@ -16,19 +16,6 @@ function looksLikeObjectRepr(value) {
   return false;
 }
 
-function looksLikeQuotedString(value) {
-  var a = value[0];
-  var z = value[value.length - 1];
-  if ((a === '"' || a === "'") && a === z) {
-    return true;
-  }
-  var match = value.match(/^[\w\d._-]+["']/);
-  if (match && match[0][match[0].length - 1] === z) {
-    return true;
-  }
-  return false;
-}
-
 function looksLikeMultiLineString(value) {
   return !!value.match(/[\r\n]/);
 }
@@ -61,25 +48,19 @@ function analyzeStringForRepr(value) {
     repr: value,
     isString: true,
     isMultiLine: false,
-    quotedInPostprocessing: false
+    isStripped: false
   };
 
+  // stripped for security reasons
+  if (value.match(/^['"]?\*{8,}['"]?$/)) {
+    rv.isStripped = true;
+    return rv;
+  }
+
   if (looksLikeObjectRepr(value)) {
     rv.isString = false;
   } else {
-    var isQuoted = looksLikeQuotedString(value);
     rv.isMultiLine = looksLikeMultiLineString(value);
-
-    if (!isQuoted) {
-      rv.quotedInPostprocessing = true;
-      // quote single line strings properly like JSON
-      if (!rv.isMultiLine) {
-        rv.repr = JSON.stringify(value);
-      // for multi-line strings add triple string markers instead.
-      } else {
-        rv.repr = '"""' + rv.repr + '"""';
-      }
-    }
   }
 
   return rv;
@@ -130,7 +111,7 @@ var ContextData = React.createClass({
         return (
           <span className={
             (valueInfo.isString ? 'val-string' : 'val-repr') +
-            (valueInfo.quotedInPostprocessing ? ' val-auto-quoted' : '') +
+            (valueInfo.isStripped ? ' val-stripped' : '') +
             (valueInfo.isMultiLine ? ' val-string-multiline' : '')}>{
               valueInfo.repr}</span>
         );
diff --git a/src/sentry/static/sentry/less/group-detail.less b/src/sentry/static/sentry/less/group-detail.less
index 6611e96b88..89ccbddbd7 100644
--- a/src/sentry/static/sentry/less/group-detail.less
+++ b/src/sentry/static/sentry/less/group-detail.less
@@ -1149,10 +1149,22 @@ pre.val, span.val {
 
 .val-string {
   color: darken(@purple, 5);
+  background: white;
+  border-radius: 3px;
+  padding: 2px 4px;
+  margin: -2px -4px;
+}
+
+.val-string-multiline {
+  background: white;
+  display: block!important;
+  margin: 0px 0px 0px 15px;
+  overflow: auto;
 }
 
-.val-string.val-auto-quoted {
-  color: darken(@teal, 5);
+.val-stripped {
+  color: darken(@red, 5);
+  background: transparent;
 }
 
 .val-repr {
@@ -1183,6 +1195,8 @@ pre.val, span.val {
 
   .val-dict-key, .val-dict-key .val-string {
     color: @red;
+    background: transparent;
+    border-radius: none;
   }
 }
 
