commit b8029aee5a56beb5e80f6d3d3812dabdf9fd7b56
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Thu Oct 1 11:44:09 2015 -0700

    Fix behavior of create_sample_event
    
    Fixes GH-2070

diff --git a/src/sentry/plugins/bases/notify.py b/src/sentry/plugins/bases/notify.py
index f0747c7332..b2ae0a51fe 100644
--- a/src/sentry/plugins/bases/notify.py
+++ b/src/sentry/plugins/bases/notify.py
@@ -109,7 +109,7 @@ class NotificationPlugin(Plugin):
 
     def test_configuration(self, project):
         from sentry.utils.samples import create_sample_event
-        event = create_sample_event(project, default='python')
+        event = create_sample_event(project, platform='python')
         notification = Notification(event=event)
         return self.notify(notification)
 
diff --git a/src/sentry/utils/samples.py b/src/sentry/utils/samples.py
index 500f35464a..c52ee2b89a 100644
--- a/src/sentry/utils/samples.py
+++ b/src/sentry/utils/samples.py
@@ -74,6 +74,9 @@ def create_sample_event(project, platform=None, default=None, raw=True,
     if not platform and not default:
         return
 
+    if platform is None:
+        platform = default
+
     platform = platform.split('-', 1)[0].split('_', 1)[0]
 
     data = load_data(platform, default)
