commit 29fab4ed1170b0b8cef6ae707cc3e0e3dfb5051c
Author: David Cramer <dcramer@gmail.com>
Date:   Sat May 7 18:24:26 2011 -0700

    Tweak settings globals

diff --git a/sentry/scripts/runner.py b/sentry/scripts/runner.py
index 00a75ec512..c63969fa4f 100644
--- a/sentry/scripts/runner.py
+++ b/sentry/scripts/runner.py
@@ -1,11 +1,11 @@
 #!/usr/bin/env python
 import eventlet
 import os
+import os.path
 import sys
 
 from daemon.daemon import DaemonContext
 from daemon.runner import DaemonRunner, make_pidlockfile
-from django.conf import settings
 from django.core.management import call_command
 from eventlet import wsgi
 from optparse import OptionParser
@@ -77,6 +77,8 @@ def upgrade():
         call_command('migrate', database=settings.DATABASE_USING or 'default', interactive=False)
 
 def main():
+    from django.conf import settings
+
     command_list = ('start', 'stop', 'restart', 'cleanup', 'upgrade')
     args = sys.argv
     if len(args) < 2 or args[1] not in command_list:
@@ -113,6 +115,8 @@ def main():
     if options.config:
         os.environ['DJANGO_SETTINGS_MODULE'] = options.config
 
+    # TODO: we should attempt to discover settings modules
+
     if not settings.configured:
         os.environ['DJANGO_SETTINGS_MODULE'] = 'sentry.conf.server'
 
