commit fb0b09ae58f176f4db3fb96a50923944691bd3af
Author: Katie Byers <lobsterkatie@gmail.com>
Date:   Thu Apr 4 14:37:55 2019 -0700

    fix(filters): Filter out google spiders explicitly (#12611)
    
    * filter out google spiders explicitly
    
    * escape dashes
    
    * add tests

diff --git a/src/sentry/filters/web_crawlers.py b/src/sentry/filters/web_crawlers.py
index a6ad3b5961..870027fad2 100644
--- a/src/sentry/filters/web_crawlers.py
+++ b/src/sentry/filters/web_crawlers.py
@@ -12,12 +12,12 @@ from sentry.utils.safe import get_path
 CRAWLERS = re.compile(
     r'|'.join(
         (
-            # various Google services
-            r'AdsBot',
-            # Google Adsense
-            r'Mediapartners',
-            # Google+ and Google web search, but not apis-google
-            r'(?<!APIs-)Google',
+            # Google spiders (Adsense and others)
+            # https://support.google.com/webmasters/answer/1061943?hl=en
+            r'Mediapartners\-Google',
+            r'AdsBot\-Google',
+            r'Googlebot',
+            r'FeedFetcher\-Google',
             # Bing search
             r'BingBot',
             r'BingPreview',
diff --git a/tests/sentry/filters/test_web_crawlers.py b/tests/sentry/filters/test_web_crawlers.py
index baca9958c9..d7e467956c 100644
--- a/tests/sentry/filters/test_web_crawlers.py
+++ b/tests/sentry/filters/test_web_crawlers.py
@@ -23,10 +23,28 @@ class WebCrawlersFilterTest(TestCase):
             }
         }
 
-    def test_filters_googlebot(self):
-        data = self.get_mock_data('Googlebot')
+    def test_filters_google_adsense(self):
+        data = self.get_mock_data('Mediapartners-Google')
         assert self.apply_filter(data)
 
+    def test_filters_google_adsbot(self):
+        data = self.get_mock_data('AdsBot-Google (+http://www.google.com/adsbot.html)')
+        assert self.apply_filter(data)
+
+    def test_filters_google_bot(self):
+        data = self.get_mock_data(
+            'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)')
+        assert self.apply_filter(data)
+
+    def test_filters_google_feedfetcher(self):
+        data = self.get_mock_data('FeedFetcher-Google; (+http://www.google.com/feedfetcher.html)')
+        assert self.apply_filter(data)
+
+    def test_does_not_filter_google_pubsub(self):
+        data = self.get_mock_data(
+            'APIs-Google (+https://developers.google.com/webmasters/APIs-Google.html)')
+        assert not self.apply_filter(data)
+
     def test_does_not_filter_chrome(self):
         data = self.get_mock_data(
             'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2228.0 Safari/537.36'
