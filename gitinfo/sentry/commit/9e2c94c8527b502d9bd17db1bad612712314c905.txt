commit 9e2c94c8527b502d9bd17db1bad612712314c905
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jan 28 18:40:15 2013 -0800

    Only copy keys in validate_data

diff --git a/src/sentry/coreapi.py b/src/sentry/coreapi.py
index 2c045b2993..6a7071473d 100644
--- a/src/sentry/coreapi.py
+++ b/src/sentry/coreapi.py
@@ -291,7 +291,7 @@ def validate_data(project, data, client=None):
     if data.get('modules') and type(data['modules']) != dict:
         raise InvalidData('Invalid type for \'modules\': must be a mapping')
 
-    for k, v in data.items():
+    for k, v in data.keys():
         if k in RESERVED_FIELDS:
             continue
 
@@ -301,7 +301,7 @@ def validate_data(project, data, client=None):
             del data[k]
             continue
 
-        if not v:
+        if not data[k]:
             logger.info('Ignoring empty interface %r passed by client %r',
                 k, client or '<unknown client>', extra={'request': env.request})
             del data[k]
@@ -313,7 +313,7 @@ def validate_data(project, data, client=None):
             raise InvalidInterface('%r is not a valid interface name: %s' % (k, e))
 
         try:
-            data[k] = interface(**v).serialize()
+            data[k] = interface(**data[k]).serialize()
         except Exception, e:
             logger.error('Client %r passed an invalid value for interface %r',
                 client or '<unknown client>',
