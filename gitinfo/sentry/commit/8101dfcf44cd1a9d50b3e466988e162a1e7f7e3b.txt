commit 8101dfcf44cd1a9d50b3e466988e162a1e7f7e3b
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Dec 2 12:15:36 2012 -0800

    Change default public value of projects to be (ALLOW_PUBLIC_PROJECTS and PUBLIC) (refs GH-634)

diff --git a/src/sentry/models.py b/src/sentry/models.py
index eab8d6d2f0..072e97b301 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -116,7 +116,7 @@ class Project(Model):
     name = models.CharField(max_length=200)
     owner = models.ForeignKey(User, related_name="sentry_owned_project_set", null=True)
     team = models.ForeignKey(Team, null=True)
-    public = models.BooleanField(default=settings.ALLOW_PUBLIC_PROJECTS)
+    public = models.BooleanField(default=settings.ALLOW_PUBLIC_PROJECTS and settings.PUBLIC)
     date_added = models.DateTimeField(default=timezone.now)
     status = models.PositiveIntegerField(default=0, choices=(
         (0, 'Visible'),
@@ -767,7 +767,7 @@ def create_default_project(created_models, verbosity=2, **kwargs):
             return
 
         project = Project.objects.create(
-            public=settings.ALLOW_PUBLIC_PROJECTS,
+            public=settings.ALLOW_PUBLIC_PROJECTS and settings.PUBLIC,
             name='Sentry (Internal)',
             slug='sentry',
         )
