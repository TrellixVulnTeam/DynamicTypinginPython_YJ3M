commit b92b45ca95bc8ed2ef52c72020858f6d943cce50
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Fri Feb 8 11:58:35 2019 -0800

    fix(charts): Fix Release dates in tooltips [APP-1104] (#11998)
    
    Love timezones.

diff --git a/src/sentry/static/sentry/app/components/charts/releaseSeries.jsx b/src/sentry/static/sentry/app/components/charts/releaseSeries.jsx
index 72c1ca07f4..8401b1c260 100644
--- a/src/sentry/static/sentry/app/components/charts/releaseSeries.jsx
+++ b/src/sentry/static/sentry/app/components/charts/releaseSeries.jsx
@@ -1,9 +1,10 @@
 import {withRouter} from 'react-router';
 import PropTypes from 'prop-types';
 import React from 'react';
+import moment from 'moment';
 
 import {addErrorMessage} from 'app/actionCreators/indicator';
-import {getFormattedDate} from 'app/utils/dates';
+import {getUserTimezone} from 'app/utils/dates';
 import {t} from 'app/locale';
 import MarkLine from 'app/components/charts/components/markLine';
 import SentryTypes from 'app/sentryTypes';
@@ -23,6 +24,7 @@ class ReleaseSeries extends React.Component {
     router: PropTypes.object,
     organization: SentryTypes.Organization,
 
+    utc: PropTypes.bool,
     // Array of releases, if empty, component will fetch releases itself
     releases: PropTypes.arrayOf(SentryTypes.Release),
   };
@@ -53,7 +55,7 @@ class ReleaseSeries extends React.Component {
   }
 
   getReleaseSeries = releases => {
-    const {organization, router} = this.props;
+    const {utc, organization, router} = this.props;
 
     return {
       seriesName: 'Releases',
@@ -68,7 +70,9 @@ class ReleaseSeries extends React.Component {
         },
         tooltip: {
           formatter: ({data}) => {
-            return `<div>${getFormattedDate(data.value, 'MMM D, YYYY LT')} <br />
+            return `<div>${moment
+              .tz(data.value, utc ? 'UTC' : getUserTimezone())
+              .format('MMM D, YYYY LT')} <br />
             Release: ${data.name}<br />
             </div>`;
           },
diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/widgetChart.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/widgetChart.jsx
index fcab964648..bb2024ceb1 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard/widgetChart.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/widgetChart.jsx
@@ -87,7 +87,7 @@ class WidgetChart extends React.Component {
     // Releases can only be added to time charts
     if (widget.includeReleases) {
       return (
-        <ReleaseSeries releases={releases}>
+        <ReleaseSeries utc={selection.utc} releases={releases}>
           {({releaseSeries}) =>
             this.renderZoomableChart(ChartComponent, {
               ...extra,
diff --git a/src/sentry/static/sentry/app/views/organizationEvents/eventsChart.jsx b/src/sentry/static/sentry/app/views/organizationEvents/eventsChart.jsx
index 4a94522b03..81102352da 100644
--- a/src/sentry/static/sentry/app/views/organizationEvents/eventsChart.jsx
+++ b/src/sentry/static/sentry/app/views/organizationEvents/eventsChart.jsx
@@ -98,7 +98,7 @@ class EventsChart extends React.Component {
           >
             {({loading, reloading, timeseriesData, previousTimeseriesData}) => {
               return (
-                <ReleaseSeries api={api}>
+                <ReleaseSeries utc={utc} api={api}>
                   {({releaseSeries}) => {
                     if (loading && !reloading) {
                       return <LoadingPanel data-test-id="events-request-loading" />;
