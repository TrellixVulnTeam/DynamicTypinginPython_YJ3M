commit 6f5153b5417f3f56ba97ab14fa9eaa8b5ffde57c
Author: josh <josh@jrl.ninja>
Date:   Wed Nov 20 10:08:29 2019 -0800

    ref(py3): bump BeautifulSoup (#15613)

diff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml
index 09e9032609..31b418dfb9 100644
--- a/.pre-commit-config.yaml
+++ b/.pre-commit-config.yaml
@@ -38,7 +38,6 @@ repos:
     - id: trailing-whitespace
       exclude_types: [svg]
     - id: debug-statements
-    - id: requirements-txt-fixer
 # -   repo: git://github.com/getsentry/pre-commit-hooks
 #     rev: f3237d2d65af81d435c49dee3593dc8f03d23c2d
 #     hooks:
diff --git a/requirements-base.txt b/requirements-base.txt
index 20acea4d1a..57b76e73ea 100644
--- a/requirements-base.txt
+++ b/requirements-base.txt
@@ -1,9 +1,6 @@
-BeautifulSoup>=3.2.1
+beautifulsoup4>=4.7.1,<4.8
 boto3>=1.4.1,<1.4.6
 botocore<1.5.71
-
-# sentry-plugins specific dependencies
-cached-property
 celery>=3.1.8,<3.1.19
 cffi>=1.11.5,<2.0
 click>=5.0,<7.0
@@ -37,7 +34,7 @@ ipaddress>=1.0.16,<1.1.0
 jsonschema==2.6.0
 kombu==3.0.35
 loremipsum>=1.0.5,<1.1.0
-lxml>=3.4.1
+lxml>=4.3.3,<4.4.0
 # optional
 maxminddb==1.4.1
 # for vsts repo
diff --git a/src/new_sentry_plugins/client.py b/src/new_sentry_plugins/client.py
index d276263134..c0e884b941 100644
--- a/src/new_sentry_plugins/client.py
+++ b/src/new_sentry_plugins/client.py
@@ -5,7 +5,7 @@ import logging
 import json
 import requests
 
-from BeautifulSoup import BeautifulStoneSoup
+from bs4 import BeautifulSoup
 from cached_property import cached_property
 from requests.exceptions import ConnectionError, HTTPError
 
@@ -85,7 +85,7 @@ class TextApiResponse(BaseApiResponse):
 
 class XmlApiResponse(BaseApiResponse):
     def __init__(self, text, *args, **kwargs):
-        self.xml = BeautifulStoneSoup(text)
+        self.xml = BeautifulSoup(text, "xml")
         super(XmlApiResponse, self).__init__(*args, **kwargs)
 
 
diff --git a/src/new_sentry_plugins/exceptions.py b/src/new_sentry_plugins/exceptions.py
index c5066dfed2..3b817248d2 100644
--- a/src/new_sentry_plugins/exceptions.py
+++ b/src/new_sentry_plugins/exceptions.py
@@ -1,6 +1,6 @@
 from __future__ import absolute_import
 
-from BeautifulSoup import BeautifulStoneSoup
+from bs4 import BeautifulSoup
 from collections import OrderedDict
 from simplejson.decoder import JSONDecodeError
 from six.moves.urllib.parse import urlparse
@@ -24,7 +24,7 @@ class ApiError(Exception):
             except (JSONDecodeError, ValueError):
                 if self.text[:5] == "<?xml":
                     # perhaps it's XML?
-                    self.xml = BeautifulStoneSoup(self.text)
+                    self.xml = BeautifulSoup(self.text, "xml")
                 # must be an awful code.
                 self.json = None
         else:
diff --git a/src/sentry/integrations/client.py b/src/sentry/integrations/client.py
index ca660b441e..29b5e0cf8e 100644
--- a/src/sentry/integrations/client.py
+++ b/src/sentry/integrations/client.py
@@ -7,7 +7,7 @@ import requests
 from collections import OrderedDict
 from time import time
 
-from BeautifulSoup import BeautifulStoneSoup
+from bs4 import BeautifulSoup
 from django.utils.functional import cached_property
 from requests.exceptions import ConnectionError, Timeout, HTTPError
 from sentry.exceptions import InvalidIdentity
@@ -93,7 +93,7 @@ class TextApiResponse(BaseApiResponse):
 
 class XmlApiResponse(BaseApiResponse):
     def __init__(self, text, *args, **kwargs):
-        self.xml = BeautifulStoneSoup(text)
+        self.xml = BeautifulSoup(text, "xml")
         super(XmlApiResponse, self).__init__(*args, **kwargs)
 
 
diff --git a/src/sentry/integrations/exceptions.py b/src/sentry/integrations/exceptions.py
index 87b1771863..7f07ff815c 100644
--- a/src/sentry/integrations/exceptions.py
+++ b/src/sentry/integrations/exceptions.py
@@ -1,6 +1,6 @@
 from __future__ import absolute_import
 
-from BeautifulSoup import BeautifulStoneSoup
+from bs4 import BeautifulSoup
 from collections import OrderedDict
 from simplejson.decoder import JSONDecodeError
 from six.moves.urllib.parse import urlparse
@@ -24,7 +24,7 @@ class ApiError(Exception):
             except (JSONDecodeError, ValueError):
                 if self.text[:5] == "<?xml":
                     # perhaps it's XML?
-                    self.xml = BeautifulStoneSoup(self.text)
+                    self.xml = BeautifulSoup(self.text, "xml")
                 # must be an awful code.
                 self.json = None
         else:
