commit c6a3d14af6016bcba937c55266c31b9d09f9b0d2
Author: David Cramer <dcramer@gmail.com>
Date:   Thu May 17 14:02:53 2012 -0700

    Add pyflakes to dependencies and update make test to use setup.py

diff --git a/Makefile b/Makefile
index 4fa2487e3a..2697a9129a 100644
--- a/Makefile
+++ b/Makefile
@@ -45,7 +45,7 @@ watch:
 test:
 	pep8 --exclude=migrations --ignore=E501,E225 sentry || exit 1
 	pyflakes -x W sentry || exit 1
-	coverage run runtests.py --include=sentry/* && \
+	coverage run --include=sentry/* setup.py test && \
 	coverage html --omit=*/migrations/* -d cover
 
 .PHONY: build watch
\ No newline at end of file
diff --git a/setup.py b/setup.py
index 71e7861f9c..fe05133879 100755
--- a/setup.py
+++ b/setup.py
@@ -39,6 +39,7 @@ tests_require = [
     'nose==1.1.2',
     'nydus==0.8.2',
     'mock==0.8.0',
+    'pyflakes',
     'pep8',
     'redis',
 ]
@@ -63,6 +64,10 @@ install_requires = [
     'South>=0.7',
 ]
 
+dependency_links = [
+    'https://github.com/dcramer/pyflakes/tarball/master#egg=pyflakes',
+]
+
 setup(
     name='sentry',
     version='4.3.3',
@@ -76,6 +81,7 @@ setup(
     install_requires=install_requires,
     tests_require=tests_require,
     extras_require={'test': tests_require},
+    dependency_links=dependency_links,
     test_suite='runtests.runtests',
     license='BSD',
     include_package_data=True,
