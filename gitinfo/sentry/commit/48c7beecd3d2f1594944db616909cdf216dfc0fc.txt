commit 48c7beecd3d2f1594944db616909cdf216dfc0fc
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Fri Nov 30 09:17:44 2018 -0800

    feat(settings): Expose disabled environments settings to members (#10852)

diff --git a/src/sentry/static/sentry/app/views/projectEnvironments.jsx b/src/sentry/static/sentry/app/views/projectEnvironments.jsx
index 0a62fcc114..0a3baa79ef 100644
--- a/src/sentry/static/sentry/app/views/projectEnvironments.jsx
+++ b/src/sentry/static/sentry/app/views/projectEnvironments.jsx
@@ -6,6 +6,7 @@ import createReactClass from 'create-react-class';
 import styled from 'react-emotion';
 
 import {ALL_ENVIRONMENTS_KEY} from 'app/constants';
+import {Panel, PanelHeader, PanelBody, PanelItem} from 'app/components/panels';
 import {
   addErrorMessage,
   addLoadingMessage,
@@ -17,7 +18,7 @@ import {
 } from 'app/actionCreators/environments';
 import {t, tct} from 'app/locale';
 import {update} from 'app/actionCreators/projects';
-import {Panel, PanelHeader, PanelBody, PanelItem} from 'app/components/panels';
+import Access from 'app/components/acl/access';
 import ApiMixin from 'app/mixins/apiMixin';
 import Button from 'app/components/button';
 import EmptyMessage from 'app/views/settings/components/emptyMessage';
@@ -26,6 +27,7 @@ import InlineSvg from 'app/components/inlineSvg';
 import ListLink from 'app/components/listLink';
 import LoadingIndicator from 'app/components/loadingIndicator';
 import NavTabs from 'app/components/navTabs';
+import PermissionAlert from 'app/views/settings/project/permissionAlert';
 import SentryTypes from 'app/sentryTypes';
 import SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';
 import Tag from 'app/views/settings/components/tag';
@@ -337,6 +339,7 @@ const ProjectEnvironments = createReactClass({
             </NavTabs>
           }
         />
+        <PermissionAlert />
 
         <Panel>
           <PanelHeader>
@@ -388,25 +391,31 @@ class EnvironmentRow extends React.Component {
             </Tag>
           )}
         </Flex>
-        <div>
-          {shouldShowSetDefault && (
-            <EnvironmentButton
-              size="xsmall"
-              onClick={() => this.props.onSetAsDefault(environment)}
-            >
-              {t('Set as default')}
-            </EnvironmentButton>
-          )}
-
-          {shouldShowAction && (
-            <EnvironmentButton
-              size="xsmall"
-              onClick={() => this.props.onHide(environment, !isHidden)}
-            >
-              {actionText}
-            </EnvironmentButton>
+        <Access access={['project:write']}>
+          {({hasAccess}) => (
+            <div>
+              {shouldShowSetDefault && (
+                <EnvironmentButton
+                  size="xsmall"
+                  disabled={!hasAccess}
+                  onClick={() => this.props.onSetAsDefault(environment)}
+                >
+                  {t('Set as default')}
+                </EnvironmentButton>
+              )}
+
+              {shouldShowAction && (
+                <EnvironmentButton
+                  size="xsmall"
+                  disabled={!hasAccess}
+                  onClick={() => this.props.onHide(environment, !isHidden)}
+                >
+                  {actionText}
+                </EnvironmentButton>
+              )}
+            </div>
           )}
-        </div>
+        </Access>
       </PanelItem>
     );
   }
diff --git a/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.jsx b/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.jsx
index c06afa8ab0..5dd7e84485 100644
--- a/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.jsx
@@ -34,7 +34,6 @@ export default function getConfiguration({project}) {
           path: `${pathPrefix}/environments/`,
           title: t('Environments'),
           description: t('Manage environments in a project'),
-          show: ({access}) => access.has('project:write'),
         },
         {
           path: `${pathPrefix}/ownership/`,
diff --git a/tests/js/spec/views/__snapshots__/projectEnvironments.spec.jsx.snap b/tests/js/spec/views/__snapshots__/projectEnvironments.spec.jsx.snap
index f9b3d0d653..138f06e411 100644
--- a/tests/js/spec/views/__snapshots__/projectEnvironments.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/projectEnvironments.spec.jsx.snap
@@ -153,6 +153,75 @@ exports[`ProjectEnvironments render active renders empty message 1`] = `
         </div>
       </Wrapper>
     </SettingsPageHeading>
+    <PermissionAlert
+      access={
+        Array [
+          "project:write",
+        ]
+      }
+    >
+      <AccessContainer
+        access={
+          Array [
+            "project:write",
+          ]
+        }
+      >
+        <Access
+          access={
+            Array [
+              "project:write",
+            ]
+          }
+          configUser={
+            Object {
+              "email": "foo@example.com",
+              "flags": Object {
+                "newsletter_consent_prompt": false,
+              },
+              "hasPasswordAuth": true,
+              "id": "1",
+              "isAuthenticated": true,
+              "name": "Foo Bar",
+              "options": Object {
+                "timezone": "UTC",
+              },
+              "permissions": Set {},
+              "username": "foo@example.com",
+            }
+          }
+          organization={
+            Object {
+              "access": Array [
+                "org:read",
+                "org:write",
+                "org:admin",
+                "project:read",
+                "project:write",
+                "project:admin",
+                "team:read",
+                "team:write",
+                "team:admin",
+              ],
+              "features": Array [],
+              "id": "3",
+              "name": "Organization Name",
+              "onboardingTasks": Array [],
+              "projects": Array [],
+              "scrapeJavaScript": true,
+              "slug": "org-slug",
+              "status": Object {
+                "id": "active",
+                "name": "active",
+              },
+              "teams": Array [],
+            }
+          }
+          renderNoAccessMessage={false}
+          requireAll={true}
+        />
+      </AccessContainer>
+    </PermissionAlert>
     <Panel>
       <Component
         className="css-yahxlu-Panel e1laxa7d0"
@@ -376,6 +445,75 @@ exports[`ProjectEnvironments render active renders environment list and sets sta
         </div>
       </Wrapper>
     </SettingsPageHeading>
+    <PermissionAlert
+      access={
+        Array [
+          "project:write",
+        ]
+      }
+    >
+      <AccessContainer
+        access={
+          Array [
+            "project:write",
+          ]
+        }
+      >
+        <Access
+          access={
+            Array [
+              "project:write",
+            ]
+          }
+          configUser={
+            Object {
+              "email": "foo@example.com",
+              "flags": Object {
+                "newsletter_consent_prompt": false,
+              },
+              "hasPasswordAuth": true,
+              "id": "1",
+              "isAuthenticated": true,
+              "name": "Foo Bar",
+              "options": Object {
+                "timezone": "UTC",
+              },
+              "permissions": Set {},
+              "username": "foo@example.com",
+            }
+          }
+          organization={
+            Object {
+              "access": Array [
+                "org:read",
+                "org:write",
+                "org:admin",
+                "project:read",
+                "project:write",
+                "project:admin",
+                "team:read",
+                "team:write",
+                "team:admin",
+              ],
+              "features": Array [],
+              "id": "3",
+              "name": "Organization Name",
+              "onboardingTasks": Array [],
+              "projects": Array [],
+              "scrapeJavaScript": true,
+              "slug": "org-slug",
+              "status": Object {
+                "id": "active",
+                "name": "active",
+              },
+              "teams": Array [],
+            }
+          }
+          renderNoAccessMessage={false}
+          requireAll={true}
+        />
+      </AccessContainer>
+    </PermissionAlert>
     <Panel>
       <Component
         className="css-yahxlu-Panel e1laxa7d0"
@@ -459,61 +597,124 @@ exports[`ProjectEnvironments render active renders environment list and sets sta
                           </div>
                         </Base>
                       </Flex>
-                      <div>
-                        <EnvironmentButton
-                          onClick={[Function]}
-                          size="xsmall"
+                      <AccessContainer
+                        access={
+                          Array [
+                            "project:write",
+                          ]
+                        }
+                      >
+                        <Access
+                          access={
+                            Array [
+                              "project:write",
+                            ]
+                          }
+                          configUser={
+                            Object {
+                              "email": "foo@example.com",
+                              "flags": Object {
+                                "newsletter_consent_prompt": false,
+                              },
+                              "hasPasswordAuth": true,
+                              "id": "1",
+                              "isAuthenticated": true,
+                              "name": "Foo Bar",
+                              "options": Object {
+                                "timezone": "UTC",
+                              },
+                              "permissions": Set {},
+                              "username": "foo@example.com",
+                            }
+                          }
+                          organization={
+                            Object {
+                              "access": Array [
+                                "org:read",
+                                "org:write",
+                                "org:admin",
+                                "project:read",
+                                "project:write",
+                                "project:admin",
+                                "team:read",
+                                "team:write",
+                                "team:admin",
+                              ],
+                              "features": Array [],
+                              "id": "3",
+                              "name": "Organization Name",
+                              "onboardingTasks": Array [],
+                              "projects": Array [],
+                              "scrapeJavaScript": true,
+                              "slug": "org-slug",
+                              "status": Object {
+                                "id": "active",
+                                "name": "active",
+                              },
+                              "teams": Array [],
+                            }
+                          }
+                          renderNoAccessMessage={false}
+                          requireAll={true}
                         >
-                          <Button
-                            className="css-10adnmx-EnvironmentButton ezuela50"
-                            disabled={false}
-                            onClick={[Function]}
-                            size="xsmall"
-                          >
-                            <StyledButton
-                              aria-label="Set as default"
-                              className="css-10adnmx-EnvironmentButton ezuela50"
+                          <div>
+                            <EnvironmentButton
                               disabled={false}
                               onClick={[Function]}
-                              role="button"
                               size="xsmall"
                             >
-                              <Component
-                                aria-label="Set as default"
-                                className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                              <Button
+                                className="css-10adnmx-EnvironmentButton ezuela50"
                                 disabled={false}
                                 onClick={[Function]}
-                                role="button"
                                 size="xsmall"
                               >
-                                <button
+                                <StyledButton
                                   aria-label="Set as default"
-                                  className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                  className="css-10adnmx-EnvironmentButton ezuela50"
                                   disabled={false}
                                   onClick={[Function]}
                                   role="button"
                                   size="xsmall"
                                 >
-                                  <ButtonLabel
+                                  <Component
+                                    aria-label="Set as default"
+                                    className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                    disabled={false}
+                                    onClick={[Function]}
+                                    role="button"
                                     size="xsmall"
                                   >
-                                    <Component
-                                      className="css-uthd1f-ButtonLabel eqrebog1"
+                                    <button
+                                      aria-label="Set as default"
+                                      className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                      disabled={false}
+                                      onClick={[Function]}
+                                      role="button"
                                       size="xsmall"
                                     >
-                                      <span
-                                        className="css-uthd1f-ButtonLabel eqrebog1"
+                                      <ButtonLabel
+                                        size="xsmall"
                                       >
-                                        Set as default
-                                      </span>
-                                    </Component>
-                                  </ButtonLabel>
-                                </button>
-                              </Component>
-                            </StyledButton>
-                          </Button>
-                        </EnvironmentButton>
-                      </div>
+                                        <Component
+                                          className="css-uthd1f-ButtonLabel eqrebog1"
+                                          size="xsmall"
+                                        >
+                                          <span
+                                            className="css-uthd1f-ButtonLabel eqrebog1"
+                                          >
+                                            Set as default
+                                          </span>
+                                        </Component>
+                                      </ButtonLabel>
+                                    </button>
+                                  </Component>
+                                </StyledButton>
+                              </Button>
+                            </EnvironmentButton>
+                          </div>
+                        </Access>
+                      </AccessContainer>
                     </div>
                   </Base>
                 </PanelItem>
@@ -567,114 +768,178 @@ exports[`ProjectEnvironments render active renders environment list and sets sta
                           </div>
                         </Base>
                       </Flex>
-                      <div>
-                        <EnvironmentButton
-                          onClick={[Function]}
-                          size="xsmall"
+                      <AccessContainer
+                        access={
+                          Array [
+                            "project:write",
+                          ]
+                        }
+                      >
+                        <Access
+                          access={
+                            Array [
+                              "project:write",
+                            ]
+                          }
+                          configUser={
+                            Object {
+                              "email": "foo@example.com",
+                              "flags": Object {
+                                "newsletter_consent_prompt": false,
+                              },
+                              "hasPasswordAuth": true,
+                              "id": "1",
+                              "isAuthenticated": true,
+                              "name": "Foo Bar",
+                              "options": Object {
+                                "timezone": "UTC",
+                              },
+                              "permissions": Set {},
+                              "username": "foo@example.com",
+                            }
+                          }
+                          organization={
+                            Object {
+                              "access": Array [
+                                "org:read",
+                                "org:write",
+                                "org:admin",
+                                "project:read",
+                                "project:write",
+                                "project:admin",
+                                "team:read",
+                                "team:write",
+                                "team:admin",
+                              ],
+                              "features": Array [],
+                              "id": "3",
+                              "name": "Organization Name",
+                              "onboardingTasks": Array [],
+                              "projects": Array [],
+                              "scrapeJavaScript": true,
+                              "slug": "org-slug",
+                              "status": Object {
+                                "id": "active",
+                                "name": "active",
+                              },
+                              "teams": Array [],
+                            }
+                          }
+                          renderNoAccessMessage={false}
+                          requireAll={true}
                         >
-                          <Button
-                            className="css-10adnmx-EnvironmentButton ezuela50"
-                            disabled={false}
-                            onClick={[Function]}
-                            size="xsmall"
-                          >
-                            <StyledButton
-                              aria-label="Set as default"
-                              className="css-10adnmx-EnvironmentButton ezuela50"
+                          <div>
+                            <EnvironmentButton
                               disabled={false}
                               onClick={[Function]}
-                              role="button"
                               size="xsmall"
                             >
-                              <Component
-                                aria-label="Set as default"
-                                className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                              <Button
+                                className="css-10adnmx-EnvironmentButton ezuela50"
                                 disabled={false}
                                 onClick={[Function]}
-                                role="button"
                                 size="xsmall"
                               >
-                                <button
+                                <StyledButton
                                   aria-label="Set as default"
-                                  className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                  className="css-10adnmx-EnvironmentButton ezuela50"
                                   disabled={false}
                                   onClick={[Function]}
                                   role="button"
                                   size="xsmall"
                                 >
-                                  <ButtonLabel
+                                  <Component
+                                    aria-label="Set as default"
+                                    className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                    disabled={false}
+                                    onClick={[Function]}
+                                    role="button"
                                     size="xsmall"
                                   >
-                                    <Component
-                                      className="css-uthd1f-ButtonLabel eqrebog1"
+                                    <button
+                                      aria-label="Set as default"
+                                      className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                      disabled={false}
+                                      onClick={[Function]}
+                                      role="button"
                                       size="xsmall"
                                     >
-                                      <span
-                                        className="css-uthd1f-ButtonLabel eqrebog1"
+                                      <ButtonLabel
+                                        size="xsmall"
                                       >
-                                        Set as default
-                                      </span>
-                                    </Component>
-                                  </ButtonLabel>
-                                </button>
-                              </Component>
-                            </StyledButton>
-                          </Button>
-                        </EnvironmentButton>
-                        <EnvironmentButton
-                          onClick={[Function]}
-                          size="xsmall"
-                        >
-                          <Button
-                            className="css-10adnmx-EnvironmentButton ezuela50"
-                            disabled={false}
-                            onClick={[Function]}
-                            size="xsmall"
-                          >
-                            <StyledButton
-                              aria-label="Hide"
-                              className="css-10adnmx-EnvironmentButton ezuela50"
+                                        <Component
+                                          className="css-uthd1f-ButtonLabel eqrebog1"
+                                          size="xsmall"
+                                        >
+                                          <span
+                                            className="css-uthd1f-ButtonLabel eqrebog1"
+                                          >
+                                            Set as default
+                                          </span>
+                                        </Component>
+                                      </ButtonLabel>
+                                    </button>
+                                  </Component>
+                                </StyledButton>
+                              </Button>
+                            </EnvironmentButton>
+                            <EnvironmentButton
                               disabled={false}
                               onClick={[Function]}
-                              role="button"
                               size="xsmall"
                             >
-                              <Component
-                                aria-label="Hide"
-                                className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                              <Button
+                                className="css-10adnmx-EnvironmentButton ezuela50"
                                 disabled={false}
                                 onClick={[Function]}
-                                role="button"
                                 size="xsmall"
                               >
-                                <button
+                                <StyledButton
                                   aria-label="Hide"
-                                  className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                  className="css-10adnmx-EnvironmentButton ezuela50"
                                   disabled={false}
                                   onClick={[Function]}
                                   role="button"
                                   size="xsmall"
                                 >
-                                  <ButtonLabel
+                                  <Component
+                                    aria-label="Hide"
+                                    className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                    disabled={false}
+                                    onClick={[Function]}
+                                    role="button"
                                     size="xsmall"
                                   >
-                                    <Component
-                                      className="css-uthd1f-ButtonLabel eqrebog1"
+                                    <button
+                                      aria-label="Hide"
+                                      className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                      disabled={false}
+                                      onClick={[Function]}
+                                      role="button"
                                       size="xsmall"
                                     >
-                                      <span
-                                        className="css-uthd1f-ButtonLabel eqrebog1"
+                                      <ButtonLabel
+                                        size="xsmall"
                                       >
-                                        Hide
-                                      </span>
-                                    </Component>
-                                  </ButtonLabel>
-                                </button>
-                              </Component>
-                            </StyledButton>
-                          </Button>
-                        </EnvironmentButton>
-                      </div>
+                                        <Component
+                                          className="css-uthd1f-ButtonLabel eqrebog1"
+                                          size="xsmall"
+                                        >
+                                          <span
+                                            className="css-uthd1f-ButtonLabel eqrebog1"
+                                          >
+                                            Hide
+                                          </span>
+                                        </Component>
+                                      </ButtonLabel>
+                                    </button>
+                                  </Component>
+                                </StyledButton>
+                              </Button>
+                            </EnvironmentButton>
+                          </div>
+                        </Access>
+                      </AccessContainer>
                     </div>
                   </Base>
                 </PanelItem>
@@ -760,61 +1025,124 @@ exports[`ProjectEnvironments render active renders environment list and sets sta
                           </div>
                         </Base>
                       </Flex>
-                      <div>
-                        <EnvironmentButton
-                          onClick={[Function]}
-                          size="xsmall"
+                      <AccessContainer
+                        access={
+                          Array [
+                            "project:write",
+                          ]
+                        }
+                      >
+                        <Access
+                          access={
+                            Array [
+                              "project:write",
+                            ]
+                          }
+                          configUser={
+                            Object {
+                              "email": "foo@example.com",
+                              "flags": Object {
+                                "newsletter_consent_prompt": false,
+                              },
+                              "hasPasswordAuth": true,
+                              "id": "1",
+                              "isAuthenticated": true,
+                              "name": "Foo Bar",
+                              "options": Object {
+                                "timezone": "UTC",
+                              },
+                              "permissions": Set {},
+                              "username": "foo@example.com",
+                            }
+                          }
+                          organization={
+                            Object {
+                              "access": Array [
+                                "org:read",
+                                "org:write",
+                                "org:admin",
+                                "project:read",
+                                "project:write",
+                                "project:admin",
+                                "team:read",
+                                "team:write",
+                                "team:admin",
+                              ],
+                              "features": Array [],
+                              "id": "3",
+                              "name": "Organization Name",
+                              "onboardingTasks": Array [],
+                              "projects": Array [],
+                              "scrapeJavaScript": true,
+                              "slug": "org-slug",
+                              "status": Object {
+                                "id": "active",
+                                "name": "active",
+                              },
+                              "teams": Array [],
+                            }
+                          }
+                          renderNoAccessMessage={false}
+                          requireAll={true}
                         >
-                          <Button
-                            className="css-10adnmx-EnvironmentButton ezuela50"
-                            disabled={false}
-                            onClick={[Function]}
-                            size="xsmall"
-                          >
-                            <StyledButton
-                              aria-label="Hide"
-                              className="css-10adnmx-EnvironmentButton ezuela50"
+                          <div>
+                            <EnvironmentButton
                               disabled={false}
                               onClick={[Function]}
-                              role="button"
                               size="xsmall"
                             >
-                              <Component
-                                aria-label="Hide"
-                                className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                              <Button
+                                className="css-10adnmx-EnvironmentButton ezuela50"
                                 disabled={false}
                                 onClick={[Function]}
-                                role="button"
                                 size="xsmall"
                               >
-                                <button
+                                <StyledButton
                                   aria-label="Hide"
-                                  className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                  className="css-10adnmx-EnvironmentButton ezuela50"
                                   disabled={false}
                                   onClick={[Function]}
                                   role="button"
                                   size="xsmall"
                                 >
-                                  <ButtonLabel
+                                  <Component
+                                    aria-label="Hide"
+                                    className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                    disabled={false}
+                                    onClick={[Function]}
+                                    role="button"
                                     size="xsmall"
                                   >
-                                    <Component
-                                      className="css-uthd1f-ButtonLabel eqrebog1"
+                                    <button
+                                      aria-label="Hide"
+                                      className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                      disabled={false}
+                                      onClick={[Function]}
+                                      role="button"
                                       size="xsmall"
                                     >
-                                      <span
-                                        className="css-uthd1f-ButtonLabel eqrebog1"
+                                      <ButtonLabel
+                                        size="xsmall"
                                       >
-                                        Hide
-                                      </span>
-                                    </Component>
-                                  </ButtonLabel>
-                                </button>
-                              </Component>
-                            </StyledButton>
-                          </Button>
-                        </EnvironmentButton>
-                      </div>
+                                        <Component
+                                          className="css-uthd1f-ButtonLabel eqrebog1"
+                                          size="xsmall"
+                                        >
+                                          <span
+                                            className="css-uthd1f-ButtonLabel eqrebog1"
+                                          >
+                                            Hide
+                                          </span>
+                                        </Component>
+                                      </ButtonLabel>
+                                    </button>
+                                  </Component>
+                                </StyledButton>
+                              </Button>
+                            </EnvironmentButton>
+                          </div>
+                        </Access>
+                      </AccessContainer>
                     </div>
                   </Base>
                 </PanelItem>
@@ -981,6 +1309,75 @@ exports[`ProjectEnvironments render hidden renders empty message 1`] = `
         </div>
       </Wrapper>
     </SettingsPageHeading>
+    <PermissionAlert
+      access={
+        Array [
+          "project:write",
+        ]
+      }
+    >
+      <AccessContainer
+        access={
+          Array [
+            "project:write",
+          ]
+        }
+      >
+        <Access
+          access={
+            Array [
+              "project:write",
+            ]
+          }
+          configUser={
+            Object {
+              "email": "foo@example.com",
+              "flags": Object {
+                "newsletter_consent_prompt": false,
+              },
+              "hasPasswordAuth": true,
+              "id": "1",
+              "isAuthenticated": true,
+              "name": "Foo Bar",
+              "options": Object {
+                "timezone": "UTC",
+              },
+              "permissions": Set {},
+              "username": "foo@example.com",
+            }
+          }
+          organization={
+            Object {
+              "access": Array [
+                "org:read",
+                "org:write",
+                "org:admin",
+                "project:read",
+                "project:write",
+                "project:admin",
+                "team:read",
+                "team:write",
+                "team:admin",
+              ],
+              "features": Array [],
+              "id": "3",
+              "name": "Organization Name",
+              "onboardingTasks": Array [],
+              "projects": Array [],
+              "scrapeJavaScript": true,
+              "slug": "org-slug",
+              "status": Object {
+                "id": "active",
+                "name": "active",
+              },
+              "teams": Array [],
+            }
+          }
+          renderNoAccessMessage={false}
+          requireAll={true}
+        />
+      </AccessContainer>
+    </PermissionAlert>
     <Panel>
       <Component
         className="css-yahxlu-Panel e1laxa7d0"
@@ -1204,6 +1601,75 @@ exports[`ProjectEnvironments render hidden renders environment list 1`] = `
         </div>
       </Wrapper>
     </SettingsPageHeading>
+    <PermissionAlert
+      access={
+        Array [
+          "project:write",
+        ]
+      }
+    >
+      <AccessContainer
+        access={
+          Array [
+            "project:write",
+          ]
+        }
+      >
+        <Access
+          access={
+            Array [
+              "project:write",
+            ]
+          }
+          configUser={
+            Object {
+              "email": "foo@example.com",
+              "flags": Object {
+                "newsletter_consent_prompt": false,
+              },
+              "hasPasswordAuth": true,
+              "id": "1",
+              "isAuthenticated": true,
+              "name": "Foo Bar",
+              "options": Object {
+                "timezone": "UTC",
+              },
+              "permissions": Set {},
+              "username": "foo@example.com",
+            }
+          }
+          organization={
+            Object {
+              "access": Array [
+                "org:read",
+                "org:write",
+                "org:admin",
+                "project:read",
+                "project:write",
+                "project:admin",
+                "team:read",
+                "team:write",
+                "team:admin",
+              ],
+              "features": Array [],
+              "id": "3",
+              "name": "Organization Name",
+              "onboardingTasks": Array [],
+              "projects": Array [],
+              "scrapeJavaScript": true,
+              "slug": "org-slug",
+              "status": Object {
+                "id": "active",
+                "name": "active",
+              },
+              "teams": Array [],
+            }
+          }
+          renderNoAccessMessage={false}
+          requireAll={true}
+        />
+      </AccessContainer>
+    </PermissionAlert>
     <Panel>
       <Component
         className="css-yahxlu-Panel e1laxa7d0"
@@ -1292,61 +1758,124 @@ exports[`ProjectEnvironments render hidden renders environment list 1`] = `
                           </div>
                         </Base>
                       </Flex>
-                      <div>
-                        <EnvironmentButton
-                          onClick={[Function]}
-                          size="xsmall"
+                      <AccessContainer
+                        access={
+                          Array [
+                            "project:write",
+                          ]
+                        }
+                      >
+                        <Access
+                          access={
+                            Array [
+                              "project:write",
+                            ]
+                          }
+                          configUser={
+                            Object {
+                              "email": "foo@example.com",
+                              "flags": Object {
+                                "newsletter_consent_prompt": false,
+                              },
+                              "hasPasswordAuth": true,
+                              "id": "1",
+                              "isAuthenticated": true,
+                              "name": "Foo Bar",
+                              "options": Object {
+                                "timezone": "UTC",
+                              },
+                              "permissions": Set {},
+                              "username": "foo@example.com",
+                            }
+                          }
+                          organization={
+                            Object {
+                              "access": Array [
+                                "org:read",
+                                "org:write",
+                                "org:admin",
+                                "project:read",
+                                "project:write",
+                                "project:admin",
+                                "team:read",
+                                "team:write",
+                                "team:admin",
+                              ],
+                              "features": Array [],
+                              "id": "3",
+                              "name": "Organization Name",
+                              "onboardingTasks": Array [],
+                              "projects": Array [],
+                              "scrapeJavaScript": true,
+                              "slug": "org-slug",
+                              "status": Object {
+                                "id": "active",
+                                "name": "active",
+                              },
+                              "teams": Array [],
+                            }
+                          }
+                          renderNoAccessMessage={false}
+                          requireAll={true}
                         >
-                          <Button
-                            className="css-10adnmx-EnvironmentButton ezuela50"
-                            disabled={false}
-                            onClick={[Function]}
-                            size="xsmall"
-                          >
-                            <StyledButton
-                              aria-label="Show"
-                              className="css-10adnmx-EnvironmentButton ezuela50"
+                          <div>
+                            <EnvironmentButton
                               disabled={false}
                               onClick={[Function]}
-                              role="button"
                               size="xsmall"
                             >
-                              <Component
-                                aria-label="Show"
-                                className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                              <Button
+                                className="css-10adnmx-EnvironmentButton ezuela50"
                                 disabled={false}
                                 onClick={[Function]}
-                                role="button"
                                 size="xsmall"
                               >
-                                <button
+                                <StyledButton
                                   aria-label="Show"
-                                  className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                  className="css-10adnmx-EnvironmentButton ezuela50"
                                   disabled={false}
                                   onClick={[Function]}
                                   role="button"
                                   size="xsmall"
                                 >
-                                  <ButtonLabel
+                                  <Component
+                                    aria-label="Show"
+                                    className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                    disabled={false}
+                                    onClick={[Function]}
+                                    role="button"
                                     size="xsmall"
                                   >
-                                    <Component
-                                      className="css-uthd1f-ButtonLabel eqrebog1"
+                                    <button
+                                      aria-label="Show"
+                                      className="ezuela50 css-fp1reu-StyledButton-getColors-EnvironmentButton eqrebog0"
+                                      disabled={false}
+                                      onClick={[Function]}
+                                      role="button"
                                       size="xsmall"
                                     >
-                                      <span
-                                        className="css-uthd1f-ButtonLabel eqrebog1"
+                                      <ButtonLabel
+                                        size="xsmall"
                                       >
-                                        Show
-                                      </span>
-                                    </Component>
-                                  </ButtonLabel>
-                                </button>
-                              </Component>
-                            </StyledButton>
-                          </Button>
-                        </EnvironmentButton>
-                      </div>
+                                        <Component
+                                          className="css-uthd1f-ButtonLabel eqrebog1"
+                                          size="xsmall"
+                                        >
+                                          <span
+                                            className="css-uthd1f-ButtonLabel eqrebog1"
+                                          >
+                                            Show
+                                          </span>
+                                        </Component>
+                                      </ButtonLabel>
+                                    </button>
+                                  </Component>
+                                </StyledButton>
+                              </Button>
+                            </EnvironmentButton>
+                          </div>
+                        </Access>
+                      </AccessContainer>
                     </div>
                   </Base>
                 </PanelItem>
