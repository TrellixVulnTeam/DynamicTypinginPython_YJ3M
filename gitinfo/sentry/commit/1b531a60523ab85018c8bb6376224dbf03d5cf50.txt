commit 1b531a60523ab85018c8bb6376224dbf03d5cf50
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Mar 20 13:46:00 2015 -0700

    Improve handling of origin/sensitive field options

diff --git a/src/sentry/api/endpoints/project_details.py b/src/sentry/api/endpoints/project_details.py
index 9457dcc28e..28b8108456 100644
--- a/src/sentry/api/endpoints/project_details.py
+++ b/src/sentry/api/endpoints/project_details.py
@@ -13,6 +13,15 @@ from sentry.models import (
 from sentry.tasks.deletion import delete_project
 
 
+def clean_newline_inputs(value):
+    result = []
+    for v in value.split('\n'):
+        v = v.lower().strip()
+        if v:
+            result.append(v)
+    return result
+
+
 class ProjectSerializer(serializers.ModelSerializer):
     class Meta:
         model = Project
@@ -64,13 +73,19 @@ class ProjectDetailsEndpoint(ProjectEndpoint):
 
             options = request.DATA.get('options', {})
             if 'sentry:origins' in options:
-                project.update_option('sentry:origins', options['sentry:origins'].split('\n'))
+                project.update_option(
+                    'sentry:origins',
+                    clean_newline_inputs(options['sentry:origins'])
+                )
             if 'sentry:resolve_age' in options:
                 project.update_option('sentry:resolve_age', int(options['sentry:resolve_age']))
             if 'sentry:scrub_data' in options:
                 project.update_option('sentry:scrub_data', bool(options['sentry:scrub_data']))
             if 'sentry:sensitive_fields' in options:
-                project.update_option('sentry:sensitive_fields', options['sentry:sensitive_fields'])
+                project.update_option(
+                    'sentry:sensitive_fields',
+                    [s.strip().lower() for s in options['sentry:sensitive_fields']]
+                )
 
             AuditLogEntry.objects.create(
                 organization=project.organization,
diff --git a/src/sentry/web/frontend/project_settings.py b/src/sentry/web/frontend/project_settings.py
index eca0645ecf..0e2bc33a52 100644
--- a/src/sentry/web/frontend/project_settings.py
+++ b/src/sentry/web/frontend/project_settings.py
@@ -130,7 +130,7 @@ class EditProjectForm(forms.ModelForm):
         if not value:
             return
 
-        return filter(bool, (v.strip() for v in value.split('\n')))
+        return filter(bool, (v.lower().strip() for v in value.split('\n')))
 
     def clean_team(self):
         value = self.cleaned_data.get('team')
