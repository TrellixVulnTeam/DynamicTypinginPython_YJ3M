commit 24e83a2d18d548c7c30aa40f58dc3318e33ce666
Author: Daniel Griesser <daniel.griesser.86@gmail.com>
Date:   Sat Apr 21 09:42:35 2018 +0200

    fix: Show discard all button for issues stuck in reprocessing (#8132)

diff --git a/src/sentry/api/urls.py b/src/sentry/api/urls.py
index 14f82bd0db..73d2569865 100644
--- a/src/sentry/api/urls.py
+++ b/src/sentry/api/urls.py
@@ -804,7 +804,7 @@ urlpatterns = patterns(
         name='sentry-api-0-project-reprocessing'
     ),
     url(
-        r'^projects/(?P<organization_slug>[^\/]+)/(?P<project_slug>[^\/]+)/processingissues/discard$',
+        r'^projects/(?P<organization_slug>[^\/]+)/(?P<project_slug>[^\/]+)/processingissues/discard/$',
         ProjectProcessingIssuesDiscardEndpoint.as_view(),
         name='sentry-api-0-project-discard-processing-issues'
     ),
diff --git a/src/sentry/static/sentry/app/views/settings/project/projectProcessingIssues.jsx b/src/sentry/static/sentry/app/views/settings/project/projectProcessingIssues.jsx
index 508831a0ad..ebe94f8150 100644
--- a/src/sentry/static/sentry/app/views/settings/project/projectProcessingIssues.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/projectProcessingIssues.jsx
@@ -134,8 +134,7 @@ const ProjectProcessingIssues = createReactClass({
     this.setState({
       expected: this.state.expected + 1,
     });
-    // Note: inconsistency with missing trailing slash, but matches route in backend
-    this.api.request(`/projects/${orgId}/${projectId}/processingissues/discard`, {
+    this.api.request(`/projects/${orgId}/${projectId}/processingissues/discard/`, {
       method: 'DELETE',
       success: (data, _, jqXHR) => {
         let expected = this.state.expected - 1;
@@ -190,12 +189,12 @@ const ProjectProcessingIssues = createReactClass({
 
   renderDebugTable() {
     let body;
-
     if (this.state.loading) body = this.renderLoading();
     else if (this.state.error) body = <LoadingError onRetry={this.fetchData} />;
     else if (
       this.state.processingIssues.hasIssues ||
-      this.state.processingIssues.resolveableIssues
+      this.state.processingIssues.resolveableIssues ||
+      this.state.processingIssues.issuesProcessing
     )
       body = this.renderResults();
     else body = this.renderEmpty();
@@ -322,6 +321,27 @@ const ProjectProcessingIssues = createReactClass({
         </div>
       );
     }
+    let processingRow = null;
+    if (this.state.processingIssues.issuesProcessing > 0) {
+      processingRow = (
+        <div className="list-group-item alert-info">
+          <div className="row row-flex row-center-vertically">
+            <div className="col-sm-12">
+              <span
+                className="icon icon-processing play"
+                style={{display: 'inline', marginRight: 12}}
+              />
+              {tn(
+                'Reprocessing %d event …',
+                'Reprocessing %d events …',
+                this.state.processingIssues.issuesProcessing
+              )}
+            </div>
+          </div>
+        </div>
+      );
+    }
+
     return (
       <div>
         {fixLinkBlock}
@@ -346,6 +366,7 @@ const ProjectProcessingIssues = createReactClass({
             </div>
           </div>
           <div className="list-group">
+            {processingRow}
             {this.state.processingIssues.issues.map((item, idx) => {
               return (
                 <div key={idx} className="list-group-item">
