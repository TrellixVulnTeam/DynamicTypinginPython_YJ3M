commit ceefdb17afc3d1b969f6d3f748a105ae0db287f9
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Wed May 18 23:00:43 2016 +0200

    Removed duplicated 2fa prompt for u2f

diff --git a/src/sentry/models/authenticator.py b/src/sentry/models/authenticator.py
index 104c0882f2..780d85c460 100644
--- a/src/sentry/models/authenticator.py
+++ b/src/sentry/models/authenticator.py
@@ -44,8 +44,7 @@ class ActivationMessageResult(ActivationResult):
 class ActivationChallengeResult(ActivationResult):
     type = 'challenge'
 
-    def __init__(self, challenge, message=None):
-        self.message = message
+    def __init__(self, challenge):
         self.challenge = challenge
 
 
@@ -446,8 +445,6 @@ class U2fInterface(AuthenticatorInterface):
     def activate(self, request):
         return ActivationChallengeResult(
             challenge=dict(u2f.start_authenticate([self.get_u2f_device()])),
-            message=_('Insert your U2F device or the button on your U2F '
-                      'device to confirm the sign-in.')
         )
 
     def validate_response(self, request, challenge, response):
diff --git a/src/sentry/templates/sentry/twofactor.html b/src/sentry/templates/sentry/twofactor.html
index 1d256e628e..9088dd8229 100644
--- a/src/sentry/templates/sentry/twofactor.html
+++ b/src/sentry/templates/sentry/twofactor.html
@@ -12,13 +12,14 @@
       <p>
         Your account is protected with two-factor authentication.
         {% if interface.can_validate_otp %}
-          To continue with the sign-in you
-          need to provide the access code from your authenticator or a recovery
-          code if you have one.
+          To continue with the sign-in you need to provide the access code
+          from your authenticator or a recovery code if you have one.
         {% endif %}
       </p>
-      {% if activation and activation.message %}
-        <p class="{% if activation.type != 'challenge' %}{{ activation.type }}{% else %}info{% endif %}">{{ activation.message }}</p>
+      {% if activation %}
+        {% if activation.type == 'error' or activation.type == 'warning' or activation.type == 'info' %}
+          <p class="{{ activation.type }}">{{ activation.message }}</p>
+        {% endif %}
       {% endif %}
       <form class="form-stacked" action="" method="post" autocomplete="off">
         {% csrf_token %}
