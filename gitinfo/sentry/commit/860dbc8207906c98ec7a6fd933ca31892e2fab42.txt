commit 860dbc8207906c98ec7a6fd933ca31892e2fab42
Author: Luke GB <git@lukegb.com>
Date:   Thu Feb 7 23:01:19 2013 +0000

    Stop Event.request from throwing a KeyError
    
    It's bad behaviour for accessing an attribute to throw an Exception
    in my opinion, so let's stop Event.request from doing it
    for one specific instance, at least.

diff --git a/src/sentry/models.py b/src/sentry/models.py
index 907fe7ff61..269d28b00b 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -612,7 +612,7 @@ class Event(EventBase):
             return MockDjangoRequest()
 
         fake_request = MockDjangoRequest(**kwargs)
-        if kwargs['url']:
+        if 'url' in kwargs and kwargs['url']:
             fake_request.path_info = '/' + kwargs['url'].split('/', 3)[-1]
         else:
             fake_request.path_info = ''
