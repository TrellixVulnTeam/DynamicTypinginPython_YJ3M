commit 462f7759c192b603e9d7446dea82d7570f94288e
Author: Jan Michael Auer <jan.auer@sentry.io>
Date:   Tue Feb 18 09:09:06 2020 +0100

    fix(javascript): Do not error when collecting stack traces (#17097)

diff --git a/src/sentry/lang/javascript/processor.py b/src/sentry/lang/javascript/processor.py
index 1ac785939b..5d26ed5a82 100644
--- a/src/sentry/lang/javascript/processor.py
+++ b/src/sentry/lang/javascript/processor.py
@@ -442,6 +442,10 @@ def generate_module(src):
     return CLEAN_MODULE_RE.sub("", filename) or UNKNOWN_MODULE
 
 
+def is_valid_frame(frame):
+    return frame is not None and frame.get("lineno") is not None
+
+
 class JavaScriptStacktraceProcessor(StacktraceProcessor):
     """
     Attempts to fetch source code for javascript frames.
@@ -490,13 +494,7 @@ class JavaScriptStacktraceProcessor(StacktraceProcessor):
         # build list of frames that we can actually grab source for
         frames = []
         for info in self.stacktrace_infos:
-            frames.extend(
-                [
-                    f
-                    for f in info.stacktrace["frames"] or ()
-                    if f is not None and f.get("lineno") is not None
-                ]
-            )
+            frames.extend(get_path(info.stacktrace, "frames", filter=is_valid_frame, default=()))
         return frames
 
     def preprocess_step(self, processing_task):
