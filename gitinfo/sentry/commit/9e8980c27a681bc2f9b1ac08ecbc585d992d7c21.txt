commit 9e8980c27a681bc2f9b1ac08ecbc585d992d7c21
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue Dec 15 17:12:59 2015 +0100

    Added simple profile utility module

diff --git a/src/sentry/utils/profile.py b/src/sentry/utils/profile.py
new file mode 100644
index 0000000000..60910e1823
--- /dev/null
+++ b/src/sentry/utils/profile.py
@@ -0,0 +1,23 @@
+import sys
+import time
+from cProfile import Profile
+from pstats import Stats
+from functools import update_wrapper
+
+
+def profile_call(_func, *args, **kwargs):
+    p = Profile()
+    rv = []
+    p.runcall(lambda: rv.append(_func(*args, **kwargs)))
+    p.dump_stats('/tmp/sentry-%s-%s.prof' % (time.time(), _func.__name__))
+
+    stats = Stats(p, stream=sys.stderr)
+    stats.sort_stats('time', 'calls')
+    stats.print_stats()
+    return rv[0]
+
+
+def profile(func):
+    def newfunc(*args, **kwargs):
+        return profile_call(func, *args, **kwargs)
+    return update_wrapper(newfunc, func)
