commit 2a68a1ea0fe955ebecd5b53604ff576fda5b670c
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Jul 26 15:43:14 2014 +0200

    Move clippy usage into directive

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 19d4401b42..f50aea5b5b 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -431,6 +431,7 @@ SENTRY_STATIC_BUNDLES = {
                 "sentry/app/controllers/projectStream.js",
                 "sentry/app/controllers/teamDashboard.js",
 
+                "sentry/app/directives/clippy.js",
                 "sentry/app/directives/count.js",
                 "sentry/app/directives/timeSince.js",
             ],
diff --git a/src/sentry/static/sentry/app.js b/src/sentry/static/sentry/app.js
index 84436d9af7..3166613f5d 100644
--- a/src/sentry/static/sentry/app.js
+++ b/src/sentry/static/sentry/app.js
@@ -5,6 +5,7 @@ var SentryApp = angular.module('sentry', [
   'sentry.collection',
   'sentry.forms',
 
+  'sentry.directives.clippy',
   'sentry.directives.count',
   'sentry.directives.timeSince',
 
diff --git a/src/sentry/static/sentry/app/directives/clippy.js b/src/sentry/static/sentry/app/directives/clippy.js
new file mode 100644
index 0000000000..22327358f1
--- /dev/null
+++ b/src/sentry/static/sentry/app/directives/clippy.js
@@ -0,0 +1,13 @@
+(function(){
+  'use strict';
+
+  angular.module('sentry.directives.clippy', [])
+    .directive('clippy', function(config) {
+      return function(scope, element, attrs){
+        $(element).clippy({
+          clippy_path: config.mediaUrl + 'clippy.swf',
+          keep_text: true
+        });
+      };
+    });
+}());
diff --git a/src/sentry/static/sentry/app/init.js b/src/sentry/static/sentry/app/init.js
index b92f853742..f7fee79979 100644
--- a/src/sentry/static/sentry/app/init.js
+++ b/src/sentry/static/sentry/app/init.js
@@ -1,11 +1,6 @@
 (function(){
   'use strict';
 
-  $('.clippy').clippy({
-      clippy_path: '../clippy.swf',
-      keep_text: true
-  });
-
   $('input[data-toggle="datepicker"]').datepicker();
 
   $('.tip').tooltip({
diff --git a/src/sentry/templates/sentry/projects/base.html b/src/sentry/templates/sentry/projects/base.html
index c0ec39e8c4..fabe18c6d9 100644
--- a/src/sentry/templates/sentry/projects/base.html
+++ b/src/sentry/templates/sentry/projects/base.html
@@ -11,48 +11,4 @@
 {% block bodyclass %}{% endblock %}
 
 {% block main %}
-    <section class="body">
-        {% if PROJECT_LIST %}
-            <p>{% trans "The following is a list of projects that you are a member of." %}</p>
-            <table class="table table-striped">
-                <colgroup>
-                    <col>
-                    <col style="width:100px;">
-                    <col style="width:150px;">
-                    <col style="width:100px;">
-                </colgroup>
-                <thead>
-                    <tr>
-                        <th>{% trans "Name" %}</th>
-                        <th style="text-align:center;">{% trans "Membership" %}</th>
-                        <th style="text-align:center;">{% trans "Owner" %}</th>
-                        <th style="text-align:center;">{% trans "Status" %}</th>
-                    </tr>
-                </thead>
-                <tbody>
-                    {% for project in PROJECT_LIST %}
-                        <tr>
-                            <td>
-                                <a href="{% url 'sentry-manage-project' project.team.slug project.slug %}">{{ project.name }}</a><br/>
-                                {% if project.member_dsn %}
-                                    <small><code class="clippy">{{ project.member_dsn }}</code></small>
-                                {% endif %}
-                            </td>
-                            <td style="text-align:center;vertical-align:middle;">{{ project.member_type }}</td>
-                            <td style="text-align:center;vertical-align:middle;">
-                                {% if project.owner %}
-                                    {{ project.owner.username }}
-                                {% else %}
-                                    <em>{% trans "no owner" %}</em>
-                                {% endif %}
-                            </td>
-                            <td style="text-align:center;vertical-align:middle;">{{ project.get_status_display }}</td>
-                        </tr>
-                    {% endfor %}
-                </tbody>
-            </table>
-        {% else %}
-            <div class="alert alert-info">You do not have access to any projects. Would you like to <a href="{% url 'sentry-new-project' team.slug %}">create a new project</a>?</div>
-        {% endif %}
-    </section>
 {% endblock %}
diff --git a/src/sentry/templates/sentry/projects/edit_key.html b/src/sentry/templates/sentry/projects/edit_key.html
index 37e076ab79..8500a621de 100644
--- a/src/sentry/templates/sentry/projects/edit_key.html
+++ b/src/sentry/templates/sentry/projects/edit_key.html
@@ -38,26 +38,26 @@
             <div class="control-group">
                 <label>{% trans "DSN" %}</label>
                 <div class="controls">
-                    <code class="clippy">{{ key.dsn_private }}</code>
+                    <code clippy>{{ key.dsn_private }}</code>
                 </div>
             </div>
             <div class="control-group">
                 <label>{% trans "DSN (Public)" %}</label>
                 <div class="help-text">{% blocktrans with 'https://github.com/getsentry/raven-js' as link %}Use your public DSN with insecure clients such as <a href="{{ link }}">raven-js</a>.{% endblocktrans %}</div>
                 <div class="controls">
-                    <code class="clippy">{{ key.dsn_public }}</code>
+                    <code clippy>{{ key.dsn_public }}</code>
                 </div>
             </div>
             <div class="control-group">
                 <label>{% trans "Public Key" %}</label>
                 <div class="controls">
-                    <code class="clippy">{{ key.public_key }}</code>
+                    <code clippy>{{ key.public_key }}</code>
                 </div>
             </div>
             <div class="control-group">
                 <label>{% trans "Secret Key" %}</label>
                 <div class="controls">
-                    <code class="clippy">{{ key.secret_key }}</code>
+                    <code clippy>{{ key.secret_key }}</code>
                 </div>
             </div>
         </fieldset>
diff --git a/src/sentry/templates/sentry/projects/list.html b/src/sentry/templates/sentry/projects/list.html
index 9c104c9c2d..07458e6599 100644
--- a/src/sentry/templates/sentry/projects/list.html
+++ b/src/sentry/templates/sentry/projects/list.html
@@ -33,7 +33,7 @@
                             <td>
                                 <a href="{% url 'sentry-manage-project' project.team.slug project.slug %}">{{ project.name }}</a> <small>(<a href="{% url 'sentry-stream' project.team.slug project.slug %}">{% trans "Stream" %}</a>)</small><br/>
                                 {% if project.member_dsn %}
-                                    <small><code class="clippy">{{ project.member_dsn }}</code></small>
+                                    <small><code clippy>{{ project.member_dsn }}</code></small>
                                 {% endif %}
                             </td>
                             <td style="text-align:center;vertical-align:middle;">{{ project.member_type }}</td>
