commit 86d242fe377ba4460c7eb2c2afcca2ca8767ce63
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Apr 12 12:30:59 2018 -0700

    fix(gdpr): Add get behavior to mock newsletter

diff --git a/src/sentry/newsletter/dummy.py b/src/sentry/newsletter/dummy.py
index 9167dfe3bf..aeff0b7be1 100644
--- a/src/sentry/newsletter/dummy.py
+++ b/src/sentry/newsletter/dummy.py
@@ -28,6 +28,9 @@ class NewsletterSubscription(object):
     def __getitem__(self, key):
         return getattr(self, key)
 
+    def get(self, key, default=None):
+        return getattr(self, key, default)
+
     def update(self, verified=None, subscribed=None, subscribed_date=None, unsubscribed_date=None, **kwargs):
         if verified is not None:
             self.verified = verified
diff --git a/src/sentry/utils/pytest/sentry.py b/src/sentry/utils/pytest/sentry.py
index 43faacede0..e47663d65d 100644
--- a/src/sentry/utils/pytest/sentry.py
+++ b/src/sentry/utils/pytest/sentry.py
@@ -208,7 +208,7 @@ def pytest_runtest_teardown(item):
 
     # XXX(dcramer): only works with DummyNewsletter
     from sentry import newsletter
-    if newsletter.backend.__class__.__name__ == 'DummyNewsletter':
+    if hasattr(newsletter.backend, 'clear'):
         newsletter.backend.clear()
 
     from sentry.utils.redis import clusters
