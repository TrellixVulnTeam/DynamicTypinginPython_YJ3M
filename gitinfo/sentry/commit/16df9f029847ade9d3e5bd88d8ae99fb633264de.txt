commit 16df9f029847ade9d3e5bd88d8ae99fb633264de
Author: Megan Heskett <meg.heskett@gmail.com>
Date:   Fri Feb 14 15:44:46 2020 -0800

    Fix button external link (#17061)

diff --git a/src/sentry/static/sentry/app/components/button.tsx b/src/sentry/static/sentry/app/components/button.tsx
index 9550f4f971..09d25da11f 100644
--- a/src/sentry/static/sentry/app/components/button.tsx
+++ b/src/sentry/static/sentry/app/components/button.tsx
@@ -272,7 +272,7 @@ const getColors = ({priority, disabled, borderless, theme}: StyledButtonProps) =
 };
 
 const StyledButton = styled(
-  ({forwardRef, ...props}) => {
+  ({forwardRef, external, ...props}) => {
     // Get component to use based on existence of `to` or `href` properties
     // Can be react-router `Link`, `a`, or `button`
     if (props.to) {
@@ -283,7 +283,7 @@ const StyledButton = styled(
       return <button ref={forwardRef} {...props} />;
     }
 
-    if (props.external && props.href) {
+    if (external && props.href) {
       return <ExternalLink ref={forwardRef} {...props} />;
     }
 
@@ -291,7 +291,9 @@ const StyledButton = styled(
   },
   {
     shouldForwardProp: prop =>
-      prop === 'forwardRef' || (isPropValid(prop) && prop !== 'disabled'),
+      prop === 'forwardRef' ||
+      prop === 'external' ||
+      (isPropValid(prop) && prop !== 'disabled'),
   }
 )<Props>`
   display: inline-block;
diff --git a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
index e29eb462ce..aa310f43ec 100644
--- a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
@@ -1150,13 +1150,14 @@ exports[`Sidebar SidebarPanel can show Incidents in Sidebar Panel 1`] = `
                   aria-disabled={false}
                   aria-label="Learn more"
                   className="css-12ogwys-StyledButton edwq9my0"
+                  external={true}
                   forwardRef={null}
                   href="https://status.sentry.io"
                   onClick={[Function]}
                   role="button"
                   size="small"
                 >
-                  <a
+                  <ForwardRef
                     aria-disabled={false}
                     aria-label="Learn more"
                     className="css-12ogwys-StyledButton edwq9my0"
@@ -1165,23 +1166,35 @@ exports[`Sidebar SidebarPanel can show Incidents in Sidebar Panel 1`] = `
                     role="button"
                     size="small"
                   >
-                    <ButtonLabel
-                      align="center"
+                    <a
+                      aria-disabled={false}
+                      aria-label="Learn more"
+                      className="css-12ogwys-StyledButton edwq9my0"
+                      href="https://status.sentry.io"
+                      onClick={[Function]}
+                      rel="noreferrer noopener"
+                      role="button"
                       size="small"
+                      target="_blank"
                     >
-                      <Component
+                      <ButtonLabel
                         align="center"
-                        className="css-19gcr2f-ButtonLabel edwq9my1"
                         size="small"
                       >
-                        <span
+                        <Component
+                          align="center"
                           className="css-19gcr2f-ButtonLabel edwq9my1"
+                          size="small"
                         >
-                          Learn more
-                        </span>
-                      </Component>
-                    </ButtonLabel>
-                  </a>
+                          <span
+                            className="css-19gcr2f-ButtonLabel edwq9my1"
+                          >
+                            Learn more
+                          </span>
+                        </Component>
+                      </ButtonLabel>
+                    </a>
+                  </ForwardRef>
                 </Component>
               </StyledButton>
             </Button>
diff --git a/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap b/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
index 3db544cdc2..f06884e22a 100644
--- a/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
+++ b/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
@@ -985,13 +985,14 @@ exports[`ProjectCard renders 1`] = `
                               aria-disabled={false}
                               aria-label="Track deploys"
                               className="css-12ogwys-StyledButton edwq9my0"
+                              external={true}
                               forwardRef={null}
                               href="https://docs.sentry.io/learn/releases/"
                               onClick={[Function]}
                               role="button"
                               size="xsmall"
                             >
-                              <a
+                              <ForwardRef
                                 aria-disabled={false}
                                 aria-label="Track deploys"
                                 className="css-12ogwys-StyledButton edwq9my0"
@@ -1000,23 +1001,35 @@ exports[`ProjectCard renders 1`] = `
                                 role="button"
                                 size="xsmall"
                               >
-                                <ButtonLabel
-                                  align="center"
+                                <a
+                                  aria-disabled={false}
+                                  aria-label="Track deploys"
+                                  className="css-12ogwys-StyledButton edwq9my0"
+                                  href="https://docs.sentry.io/learn/releases/"
+                                  onClick={[Function]}
+                                  rel="noreferrer noopener"
+                                  role="button"
                                   size="xsmall"
+                                  target="_blank"
                                 >
-                                  <Component
+                                  <ButtonLabel
                                     align="center"
-                                    className="css-cmi7y3-ButtonLabel edwq9my1"
                                     size="xsmall"
                                   >
-                                    <span
+                                    <Component
+                                      align="center"
                                       className="css-cmi7y3-ButtonLabel edwq9my1"
+                                      size="xsmall"
                                     >
-                                      Track deploys
-                                    </span>
-                                  </Component>
-                                </ButtonLabel>
-                              </a>
+                                      <span
+                                        className="css-cmi7y3-ButtonLabel edwq9my1"
+                                      >
+                                        Track deploys
+                                      </span>
+                                    </Component>
+                                  </ButtonLabel>
+                                </a>
+                              </ForwardRef>
                             </Component>
                           </StyledButton>
                         </Button>
