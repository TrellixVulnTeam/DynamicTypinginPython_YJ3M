commit 1b5fccdc1478c2dd6bdc3f8351583806d5cd3949
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue Oct 18 17:07:38 2016 +0200

    Use yarn instead of npm

diff --git a/Makefile b/Makefile
index 34b728a20f..cfbe0d9059 100644
--- a/Makefile
+++ b/Makefile
@@ -9,16 +9,15 @@ install-python:
 	pip install ujson
 	pip install "file://`pwd`#egg=sentry[dev]"
 
-install-npm:
+install-yarn:
 	@echo "--> Installing Node dependencies"
-	# we need these to happen explicitly due to NODE_ENV influencing it
-	npm install --only=prod
-	npm install --only=dev
+	@hash yarn 2> /dev/null || npm install yarn
+	yarn install
 
 install-python-tests:
 	pip install "file://`pwd`#egg=sentry[dev,tests,dsym]"
 
-develop-only: update-submodules install-python install-python-tests install-npm
+develop-only: update-submodules install-python install-python-tests install-yarn
 
 develop: develop-only setup-git
 	@echo ""
@@ -172,8 +171,8 @@ travis-install-postgres: travis-install-python dev-postgres
 travis-install-mysql: travis-install-python
 	pip install mysqlclient
 	echo 'create database sentry;' | mysql -uroot
-travis-install-acceptance: install-npm travis-install-postgres
-travis-install-js: travis-upgrade-pip install-python install-python-tests install-npm
+travis-install-acceptance: install-yarn travis-install-postgres
+travis-install-js: travis-upgrade-pip install-python install-python-tests install-yarn
 travis-install-cli: travis-install-postgres
 travis-install-dist: travis-upgrade-pip install-python install-python-tests
 
