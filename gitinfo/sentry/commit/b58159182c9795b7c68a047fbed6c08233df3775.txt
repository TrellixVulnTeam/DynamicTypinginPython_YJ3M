commit b58159182c9795b7c68a047fbed6c08233df3775
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Oct 20 19:50:50 2013 -0700

    Simple update test for SolrClient

diff --git a/setup.py b/setup.py
index f5def091e1..d14f3ece73 100755
--- a/setup.py
+++ b/setup.py
@@ -49,6 +49,7 @@ dev_requires = [
 tests_require = [
     'exam>=0.5.1',
     'eventlet',
+    'httpretty',
     'pytest',
     'pytest-cov>=1.4',
     'pytest-django',
diff --git a/src/sentry/testutils.py b/src/sentry/testutils.py
index 1208666608..c4a02c3949 100644
--- a/src/sentry/testutils.py
+++ b/src/sentry/testutils.py
@@ -9,11 +9,11 @@ sentry.testutils
 from __future__ import absolute_import
 
 import base64
+import os.path
+
 from exam import Exam, fixture, before  # NOQA
 from functools import wraps
 
-from sentry.utils import json
-
 from django.conf import settings
 from django.contrib.auth import login
 from django.core.cache import cache
@@ -25,8 +25,10 @@ from django.test import TestCase, TransactionTestCase
 from django.test.client import Client
 from django.utils.importlib import import_module
 
+from sentry.constants import MODULE_ROOT
 from sentry.models import (
     Project, ProjectOption, Option, Team, Group, Event, User)
+from sentry.utils import json
 from sentry.utils.compat import pickle
 from sentry.utils.strings import decompress
 
@@ -171,6 +173,16 @@ class BaseTestCase(Exam):
     def login(self):
         self.login_as(self.user)
 
+    def load_fixture(self, filepath):
+        filepath = os.path.join(
+            MODULE_ROOT,
+            'tests',
+            'fixtures',
+            filepath,
+        )
+        with open(filepath, 'rb') as fp:
+            return fp.read()
+
     def _pre_setup(self):
         cache.clear()
         ProjectOption.objects.clear_cache()
diff --git a/tests/sentry/search/solr/__init__.py b/tests/sentry/search/solr/__init__.py
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/tests/sentry/search/solr/client/__init__.py b/tests/sentry/search/solr/client/__init__.py
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/tests/sentry/search/solr/client/tests.py b/tests/sentry/search/solr/client/tests.py
new file mode 100644
index 0000000000..06ffa4fadb
--- /dev/null
+++ b/tests/sentry/search/solr/client/tests.py
@@ -0,0 +1,26 @@
+import httpretty
+
+from sentry.search.solr.client import SolrClient
+from sentry.testutils import TestCase
+
+
+class SolrClientTest(TestCase):
+    def setUp(self):
+        self.client = SolrClient('http://solr.example.com/solr/sentry/')
+
+    @httpretty.activate
+    def test_simple_update(self):
+        httpretty.register_uri(
+            httpretty.POST, 'http://solr.example.com/solr/sentry/update',
+            body='')
+
+        self.client.add([{
+            'id': 'foo',
+            'key': 'value',
+        }])
+
+        request = httpretty.last_request()
+        assert request.body == (
+            '<add><doc><field name="id">foo</field>'
+            '<field name="key">value</field></doc></add>'
+        )
