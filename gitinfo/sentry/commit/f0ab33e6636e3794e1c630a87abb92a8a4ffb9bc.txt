commit f0ab33e6636e3794e1c630a87abb92a8a4ffb9bc
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jan 9 17:29:22 2012 -0800

    Dont set things to display none as the OL messes up (fixes GH-294)

diff --git a/bootstrap/lib/sentry.less b/bootstrap/lib/sentry.less
index 7ca5f66455..450cdbd64e 100644
--- a/bootstrap/lib/sentry.less
+++ b/bootstrap/lib/sentry.less
@@ -168,7 +168,8 @@ ol.context-line {
 .expandable {
   cursor: pointer;
   .closed {
-    display: none;
+    height: 0;
+    overflow: hidden;
   }
 }
 
diff --git a/sentry/static/styles/bootstrap.css b/sentry/static/styles/bootstrap.css
index b27474afc2..b58553b792 100644
--- a/sentry/static/styles/bootstrap.css
+++ b/sentry/static/styles/bootstrap.css
@@ -6,7 +6,7 @@
  * http://www.apache.org/licenses/LICENSE-2.0
  *
  * Designed and built with all the love in the world @twitter by @mdo and @fat.
- * Date: Sun Jan  8 11:19:21 PST 2012
+ * Date: Mon Jan  9 17:28:28 PST 2012
  */
 /* Reset.less
  * Props to Eric Meyer (meyerweb.com) for his CSS reset file. We're using an adapted version here	that cuts out some of the reset HTML elements we will never need here (i.e., dfn, samp, etc).
@@ -2683,7 +2683,8 @@ ol.context-line > li > span {
   cursor: pointer;
 }
 .expandable .closed {
-  display: none;
+  height: 0;
+  overflow: hidden;
 }
 table.vars th, table.vars td {
   padding: 5px 5px 4px;
diff --git a/sentry/static/styles/bootstrap.min.css b/sentry/static/styles/bootstrap.min.css
index f143aee883..7bb41dfae9 100644
--- a/sentry/static/styles/bootstrap.min.css
+++ b/sentry/static/styles/bootstrap.min.css
@@ -382,7 +382,7 @@ code{background-color:inherit;color:#666666;}
 ol.context{margin:0;list-style-position:inside;border:1px solid #ccc;border:1px solid rgba(0, 0, 0, 0.15);-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;}ol.context>li{padding-left:20px;font-family:monospace;white-space:pre;color:rgba(0, 0, 0, 0.75);background-color:#f5f5f5;}ol.context>li>pre{background-color:inherit;color:rgba(0, 0, 0, 0.5);margin:0;padding:0;border:0;display:block;line-height:18px;font-size:12px;white-space:pre;white-space:pre-wrap;word-wrap:break-word;}
 ol.context>li.active{background-color:#ddd;}ol.context>li.active pre{color:#000000;}
 ol.context-line>li>span{float:right;}
-.expandable{cursor:pointer;}.expandable .closed{display:none;}
+.expandable{cursor:pointer;}.expandable .closed{height:0;overflow:hidden;}
 table.vars th,table.vars td{padding:5px 5px 4px;}
 table.vars td.code>pre{background-color:inherit;color:rgba(0, 0, 0, 0.75);padding:1px 3px;border:0;}
 td table.vars{margin-bottom:0;}
diff --git a/sentry/templates/sentry/partial/interfaces/stacktrace.html b/sentry/templates/sentry/partial/interfaces/stacktrace.html
index bda058b8a8..3677919991 100644
--- a/sentry/templates/sentry/partial/interfaces/stacktrace.html
+++ b/sentry/templates/sentry/partial/interfaces/stacktrace.html
@@ -18,7 +18,7 @@
                     {% if frame.context %}
                         <ol start="{{ frame.start_lineno }}" class="context expandable" id="c{{ forloop.counter0 }}">
                         {% for num, line in frame.context %}
-                            <li{% if num == frame.lineno %} class="active"{% else %} class="stack{{ forloop.parentloop.counter0 }} closed"{% endif %} onclick="$('.stack{{ forloop.parentloop.counter0 }}').toggle()"><pre>{{ line }}</pre></li>
+                            <li{% if num == frame.lineno %} class="active"{% else %} class="stack{{ forloop.parentloop.counter0 }} closed"{% endif %} onclick="$('.stack{{ forloop.parentloop.counter0 }}').toggleClass('closed')"><pre>{{ line }}</pre></li>
                         {% endfor %}
                         </ol>
                     {% endif %}
diff --git a/sentry/templates/sentry/partial/interfaces/template.html b/sentry/templates/sentry/partial/interfaces/template.html
index 4864a8257a..4b4df65fd5 100644
--- a/sentry/templates/sentry/partial/interfaces/template.html
+++ b/sentry/templates/sentry/partial/interfaces/template.html
@@ -10,7 +10,7 @@
         {% if context %}
             <ol start="{{ start_lineno }}" class="context expandable">
                 {% for num, line in context %}
-                    <li{% if num == lineno %} class="active"{% else %} class="template{{ forloop.parentloop.counter0 }}"{% endif %} onclick="$('.template{{ forloop.parentloop.counter0 }}').toggle()"><pre>{{ line }}</pre></li>
+                    <li{% if num == lineno %} class="active"{% else %} class="template{{ forloop.parentloop.counter0 }}"{% endif %} onclick="$('.template{{ forloop.parentloop.counter0 }}').toggleClass('closed')"><pre>{{ line }}</pre></li>
                 {% endfor %}
             </ol>
         {% endif %}
