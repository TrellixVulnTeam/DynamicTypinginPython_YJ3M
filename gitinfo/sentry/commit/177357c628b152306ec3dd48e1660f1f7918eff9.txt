commit 177357c628b152306ec3dd48e1660f1f7918eff9
Author: ted kaemming <ted@kaemming.com>
Date:   Mon Jun 11 12:32:14 2018 -0700

    ref(search): Sort candidates prior to limiting (#8710)

diff --git a/src/sentry/search/django/backend.py b/src/sentry/search/django/backend.py
index 304e20a711..69fc09fd52 100644
--- a/src/sentry/search/django/backend.py
+++ b/src/sentry/search/django/backend.py
@@ -326,6 +326,7 @@ class DjangoSearchBackend(SearchBackend):
                     id__in=list(event_queryset.distinct().values_list('group_id', flat=True)[:1000])
                 )
 
+            _, group_queryset_sort_clause = sort_strategies[sort_by]
             group_queryset = QuerySetBuilder({
                 'first_release': CallbackCondition(
                     lambda queryset, version: queryset.extra(
@@ -425,7 +426,7 @@ class DjangoSearchBackend(SearchBackend):
                     tables=[GroupEnvironment._meta.db_table],
                 ),
                 parameters,
-            )
+            ).order_by(group_queryset_sort_clause)
 
             get_sort_expression, sort_value_to_cursor_value = environment_sort_strategies[sort_by]
 
