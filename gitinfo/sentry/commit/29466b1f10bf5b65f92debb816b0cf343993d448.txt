commit 29466b1f10bf5b65f92debb816b0cf343993d448
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Jun 4 20:46:53 2019 -0700

    fix(store): Check project.status is VISIBLE before attempting to process

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 9f08103241..924295ac72 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -30,6 +30,7 @@ from symbolic import ProcessMinidumpError, Unreal4Error
 
 from sentry import features, quotas, options
 from sentry.attachments import CachedAttachment
+from sentry.constants import ObjectStatus
 from sentry.coreapi import (
     Auth, APIError, APIForbidden, APIRateLimited, ClientApiHelper, ClientAuthHelper,
     SecurityAuthHelper, MinidumpAuthHelper, safely_load_json_string, logger as api_logger,
@@ -287,10 +288,15 @@ class APIView(BaseView):
             track_outcome(0, 0, None, Outcome.INVALID, "project_id")
             raise APIError('Invalid project_id: %r' % project_id)
         try:
-            return Project.objects.get_from_cache(id=project_id)
+            project = Project.objects.get_from_cache(id=project_id)
         except Project.DoesNotExist:
             track_outcome(0, 0, None, Outcome.INVALID, "project_id")
             raise APIError('Invalid project_id: %r' % project_id)
+        else:
+            if project.status != ObjectStatus.VISIBLE:
+                track_outcome(0, 0, None, Outcome.INVALID, "project_id")
+                raise APIError('Invalid project_id: %r' % project_id)
+            return project
 
     def _parse_header(self, request, helper, project):
         auth = self.auth_helper_cls.auth_from_request(request)
