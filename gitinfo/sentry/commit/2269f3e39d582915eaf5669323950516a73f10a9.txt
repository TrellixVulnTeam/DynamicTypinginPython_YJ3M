commit 2269f3e39d582915eaf5669323950516a73f10a9
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Dec 27 13:38:51 2012 -0800

    More general refactoring for sticky nav

diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index e31727cfb1..be2caf88f5 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -250,12 +250,14 @@ h3 {
 
   &.with-sidebar {
     background: #fff url(../images/dashboard/sidebar-bg-right.png) top right repeat-y;
+    min-width: 1086px;
     .content {
       padding-right: 300px;
     }
   }
   &.with-left-sidebar {
     background: #fff url(../images/dashboard/sidebar-bg-left.png) top left repeat-y;  
+    min-width: 1086px;
     .content {
       padding-left: 300px;
     }
@@ -273,6 +275,7 @@ h3 {
     position: relative;
   }
   .main {
+    min-width: 786px;
     width: 100%;
     position: relative;
     float: left;
@@ -789,6 +792,13 @@ ul.tag-list {
   }
 }
 
+.inactive .group-list > li:hover {
+  .reset-filter();
+  background-image: none;
+  background-color: inherit;
+  border-color: #e5e6e7;
+}
+
 label { font-weight: bold; }
 
 pre, code {
@@ -1259,32 +1269,48 @@ legend {
     top: 0;
     margin: 0;
     z-index: 1000000;
+    margin-right: 300px;
+
+    li.dropdown {
+      position: relative;
+    }
   }
 }
 
 #event_nav {
   margin-bottom: 20px;
+  position: relative;
 
   > ul {
-    padding: 0 20px;
+    padding: 0 10px;
     margin: -20px -20px 0;
     background: #eee;
     border-bottom: 1px solid #ddd;
     > li {
       > a {
+        line-height: 16px;
         color: @black;
         .border-radius(0);
-        margin: 0 4px;
+        margin: 0;
         &:hover,
         &:focus {
-          background-color: lighten(@linkColor, 5%);
-          color: @white;
+          .transition(none);
+          background-color: #ddd;
         }
       }
       &.active > a {
         color: @white;
-        background-color: darken(@linkColor, 15%);
+        background-color: @linkColor;
+      }
+
+      > ul.dropdown-menu {
+        > li.active > a,
+        > li:hover > a,
+        > li:focus > a {
+          color: @white;
+        }
       }
+
     }
   }
 }
diff --git a/src/sentry/static/sentry/scripts/app.js b/src/sentry/static/sentry/scripts/app.js
index 8865183b73..b48128d475 100644
--- a/src/sentry/static/sentry/scripts/app.js
+++ b/src/sentry/static/sentry/scripts/app.js
@@ -173,73 +173,76 @@
             });
 
             var $event_nav = $('#event_nav');
-            var $window = $(window);
-            var $nav_links = $event_nav.find('a[href*=#]');
-            var $nav_targets = $nav_links.map(function(){
-                if (this.hash) {
-                    return $(this.hash);
-                }
-            });
-            var scroll_offset = $event_nav.offset().top;
-            var event_nav_height = $event_nav.outerHeight();
-            var last_target;
+            if ($event_nav) {
+                var $window = $(window);
+                var $nav_links = $event_nav.find('a[href*=#]');
+                var $nav_targets = [];
+                var scroll_offset = $event_nav.offset().top;
+                var event_nav_height;
+                var last_target;
+
+                $nav_links.click(function(e){
+                    var $el = $(this);
+                    var target = $(this.hash);
+
+                    $el.parent().addClass('active').siblings().removeClass('active');
+
+                    $('html,body').animate({
+                        scrollTop: $(target).position().top + event_nav_height + 20
+                    }, 'fast');
+
+                    e.preventDefault();
+                }).each(function(){
+                    if (this.hash.length > 1 && $(this.hash).length) {
+                        $nav_targets.push(this.hash);
+                    }
+                });
 
-            $nav_links.click(function(e){
-                var $el = $(this);
-                var target = $(this.hash);
+                $window.resize(function(){
+                    event_nav_height = $event_nav.find('.nav').outerHeight();
+                    $event_nav.height(event_nav_height + 'px');
+                }).resize();
 
-                $el.parent().addClass('active').siblings().removeClass('active');
+                $window.scroll(function(){
+                    // Change fixed nav if needed
+                    if ($window.scrollTop() > scroll_offset) {
+                        if (!$event_nav.hasClass('fixed')) {
+                            $event_nav.addClass('fixed');
+                        }
+                    } else if ($event_nav.hasClass('fixed')) {
+                        $event_nav.removeClass('fixed');
+                    }
 
-                $('html,body').animate({
-                    scrollTop: $(target).position().top + 55
-                }, 'fast');
+                    if ($nav_targets.length) {
+                        // Get container scroll position
+                        var from_top = $window.scrollTop() + event_nav_height + 20;
+                       
+                        // Get id of current scroll item
+                        var cur = $.map($nav_targets, function(hash){
+                            if ($(hash).offset().top < from_top) {
+                                return hash;
+                            }
+                        });
 
-                e.preventDefault();
-            });
+                        // Get the id of the current element
+                        var target = cur ? cur[cur.length - 1] : null;
 
-            $window.resize(function(){
-                $event_nav.height($event_nav.outerHeight() + 'px');
-            }).resize();
+                        if (!target) {
+                            target = $nav_targets[0];
+                        }
 
-            $window.scroll(function(){
-                // Change fixed nav if needed
-                if ($window.scrollTop() > scroll_offset) {
-                    if (!$event_nav.hasClass('fixed')) {
-                        $event_nav.addClass('fixed');
-                    }
-                } else if ($event_nav.hasClass('fixed')) {
-                    $event_nav.removeClass('fixed');
-                }
-
-                // Get container scroll position
-                var from_top = $(this).scrollTop() + event_nav_height + 20;
-               
-                // Get id of current scroll item
-                var cur = $nav_targets.map(function(){
-                    if ($(this).offset().top < from_top) {
-                        return this;
-                    }
-                });
+                        if (last_target !== target) {
+                           last_target = target;
 
-                // Get the id of the current element
-                cur = cur[cur.length - 1];
-                var target = cur && cur.length ? cur[0].id : "";
-               
-                if (!target) {
-                    target = $nav_targets[0].id;
-                }
-
-                if (last_target !== target) {
-                   last_target = target;
-
-                   // Set/remove active class
-                   $nav_links
-                     .parent().removeClass("active")
-                     .end().filter("[href=#" + target + "]").parent().addClass("active");
-                }      
-            });
+                           // Set/remove active class
+                           $nav_links
+                             .parent().removeClass("active")
+                             .end().filter("[href=" + target + "]").parent().addClass("active");
+                        }  
+                    }
+                }).scroll();
+            }
         }
-
     });
 
     app.NewProjectPage = BasePage.extend({
diff --git a/src/sentry/templates/sentry/groups/details.html b/src/sentry/templates/sentry/groups/details.html
index dec4001904..4d54deb503 100644
--- a/src/sentry/templates/sentry/groups/details.html
+++ b/src/sentry/templates/sentry/groups/details.html
@@ -6,8 +6,6 @@
 
 {% block title %}{{ group.error }} | {{ block.super }}{% endblock %}
 
-{% block bodyclass %}{% endblock %}
-
 {% block breadcrumb %}
     {{ block.super }}
     <li class="divider">/</li>
@@ -15,26 +13,15 @@
 {% endblock %}
 
 {% block sidebar %}
-    <!--- there is probably a less terrible way to do things like this -->
-    <p id="public-status"><small>
-        <span data-public="true"{% if not group.project.public and not group.is_public %} style="display: none;"{% endif %}>
-            {% trans "This event is <strong>publicly visible</strong>." %}
-        </span>
-        <span data-public="false"{% if group.project.public or group.is_public %} style="display: none;"{% endif %}>
-            {% trans "This event is <strong>not publicly visible</strong>." %}
-        </span>
-        <span data-public="true"{% if not group.project.public and not group.is_public %} style="display: none;"{% endif %}>
-            <a href="{% url sentry-group group.project.slug group.id %}">{% trans "Link" %}</a>{% if can_admin_event and not group.project.public %} | {% endif %}
-        </span>
-        {% if can_admin_event and not group.project.public %}
-            <span data-public="true"{% if not group.is_public %} style="display: none;"{% endif %}>
-                <a href="javascript:void(0)" data-api-url="{% url sentry-api-set-group-private group.project.slug group.id %}" class="action">{% trans "Change" %}</a>
-            </span>
-            <span data-public="false"{% if group.is_public %} style="display: none;"{% endif %}>
-                <a href="javascript:void(0)" data-api-url="{% url sentry-api-set-group-public group.project.slug group.id %}" class="action">{% trans "Change" %}</a>
-            </span>
-        {% endif %}
-    </small></p>
+    <ul class="nav nav-list">
+        <li{% if page == 'details' %} class="active"{% endif %}><a href="{% url sentry-group group.project.slug group.id %}">Aggregate</a></li>
+        <li{% if page == 'tag_list' %} class="active"{% endif %}>
+            <a href="{% url sentry-group-tags group.project.slug group.id %}">{% trans "Tags" %}</a>
+        </li>
+        <li{% if page == 'event_list' or page == 'event' %} class="active"{% endif %}>
+            <a href="{% url sentry-group-events group.project.slug group.id %}">{% trans "Similar Events" %}</a>
+        </li>
+    </ul>
 
     <h6>{% trans "Aggregate Details" %}</h6>
 
@@ -59,6 +46,27 @@
         {% endif %}
     </dl>
 
+    <!--- there is probably a less terrible way to do things like this -->
+    <p id="public-status"><small>
+        <span data-public="true"{% if not group.project.public and not group.is_public %} style="display: none;"{% endif %}>
+            {% trans "This event is <strong>publicly visible</strong>." %}
+        </span>
+        <span data-public="false"{% if group.project.public or group.is_public %} style="display: none;"{% endif %}>
+            {% trans "This event is <strong>not publicly visible</strong>." %}
+        </span>
+        <span data-public="true"{% if not group.project.public and not group.is_public %} style="display: none;"{% endif %}>
+            <a href="{% url sentry-group group.project.slug group.id %}">{% trans "Link" %}</a>{% if can_admin_event and not group.project.public %} | {% endif %}
+        </span>
+        {% if can_admin_event and not group.project.public %}
+            <span data-public="true"{% if not group.is_public %} style="display: none;"{% endif %}>
+                <a href="javascript:void(0)" data-api-url="{% url sentry-api-set-group-private group.project.slug group.id %}" class="action">{% trans "Change" %}</a>
+            </span>
+            <span data-public="false"{% if group.is_public %} style="display: none;"{% endif %}>
+                <a href="javascript:void(0)" data-api-url="{% url sentry-api-set-group-public group.project.slug group.id %}" class="action">{% trans "Change" %}</a>
+            </span>
+        {% endif %}
+    </small></p>
+
     {% if can_admin_event %}
         <ul class="nav nav-list">
             <li class="nav-header">{% trans "Actions" %}</li>
@@ -86,64 +94,35 @@
 
 {% block main %}
     {% handle_before_events request group %}
+
     <div id="details">
-        <div id="event_list"></div>
+        <div id="event_list" class="inactive"></div>
     </div>
 
-    <section class="body">
-        <div id="event_nav">
-            <ul class="nav nav-pills">
-                <li{% if page == 'details' %} class="active"{% endif %}>
-                    <a href="{% if page == 'details' %}#details{% else %}{% url sentry-group group.project.slug group.id %}{% endif %}">{% trans "Details" %}</a>
-                </li>
-                {% for interface, _ in interface_list %}
-                    <li>
-                        <a href="{% if page != 'details' %}{% url sentry-group group.project.slug group.id %}{% endif %}#{{ interface.get_slug }}">
-                            {{ interface.get_title }}
-                        </a>
-                    </li>
-                {% endfor %}
-                {% if json_data %}
-                    <li>
-                        <a href="{% if page != 'details' %}{% url sentry-group group.project.slug group.id %}{% endif %}#extra">{% trans "Additional Data" %}</a>
-                    </li>
-                {% endif %}
-                {% if version_data %}
-                    <li>
-                        <a href="{% if page != 'details' %}{% url sentry-group group.project.slug group.id %}{% endif %}#versions">{% trans "Versions" %}</a>
-                    </li>
+    {% with event|get_rendered_interfaces as interface_list %}
+        <section class="body">
+            {% block inner %}
+                {% include "sentry/partial/event_nav.html" %}
+
+                {% if group.has_two_part_message %}
+                    <pre id="full-message">{{ group.message }}</pre>
                 {% endif %}
-                <li{% if page == 'tag_list' %} class="active"{% endif %}>
-                    <a href="{% url sentry-group-tags group.project.slug group.id %}">{% trans "Tags" %}</a>
-                </li>
-                <li{% if page == 'event_list' %} class="active"{% endif %}>
-                    <a href="{% url sentry-group-events group.project.slug group.id %}">{% trans "Similar Events" %}</a>
-                </li>
-                {% for label, link, is_active in group|get_panels:request %}
-                    <li{% if is_active %} class="active"{% endif %}><a href="{{ link }}">{{ label }}</a></li>
-                {% endfor %}
-            </ul>
-        </div>
-
-        {% block inner %}
-            {% if group.has_two_part_message %}
-                <pre id="full-message">{{ group.message }}</pre>
-            {% endif %}
-
-            {% if group|has_charts %}
-                <div class="module">
-                    <div style="height:50px;" id="chart" class="chart" data-api-url="{% url sentry-api-chart project_id=project.slug %}" data-group="{{ group.id|safe }}">
-                        <div class="sparkline">
-                            <span class="loading">{% trans "Loading historical data..." %}</span>
-                            <noscript>{% trans "Get yourself some JavaScripts dood" %}</noscript>
+
+                {% if group|has_charts %}
+                    <div class="module">
+                        <div style="height:50px;" id="chart" class="chart" data-api-url="{% url sentry-api-chart project_id=project.slug %}" data-group="{{ group.id|safe }}">
+                            <div class="sparkline">
+                                <span class="loading">{% trans "Loading historical data..." %}</span>
+                                <noscript>{% trans "Get yourself some JavaScripts dood" %}</noscript>
+                            </div>
                         </div>
                     </div>
-                </div>
-            {% endif %}
+                {% endif %}
 
-            {% include "sentry/partial/_event_details.html" %}
-        {% endblock %}
-    </section>
+                {% include "sentry/partial/_event_details.html" %}
+            {% endblock %}
+        </section>
+    {% endwith %}
 {% endblock %}
 
 {% block content_after %}
diff --git a/src/sentry/templates/sentry/groups/event.html b/src/sentry/templates/sentry/groups/event.html
index 5c084f5f05..fc5dec44fb 100644
--- a/src/sentry/templates/sentry/groups/event.html
+++ b/src/sentry/templates/sentry/groups/event.html
@@ -9,27 +9,10 @@
     <li><a href="{% url sentry-group-event group.project.slug group.pk event.pk %}">Event at {{ event.datetime }} UTC</a></li>
 {% endblock %}
 
-{% block sidebar %}
-    <h6>{% trans "Event Details" %}</h6>
-
-    <dl class="flat">
-        <dt>{% trans "Seen:" %}</dt>
-        <dd class="pretty-date" title="{{ event.datetime|date:"c" }}Z">{{ event.datetime|timesince }}</dd>
-        <dt>{% trans "Duration:" %}</dt>
-        <dd>{% if event.time_spent %}{{ event.time_spent|duration }}{% else %}<em>n/a</em>{% endif %}</dd>
-        <dt>{% trans "Server:" %}</dt>
-        <dd>{% if event.server_name %}{{ event.server_name }}{% else %}<em>n/a</em>{% endif %}</dd>
-        <dt>{% trans "Site:" %}</dt>
-        <dd>{% if event.site %}{{ event.site }}{% else %}<em>n/a</em>{% endif %}</dd>
-    </dl>
-
-    <hr>
-
-    {{ block.super }}
-{% endblock %}
-
 {% block inner %}
-    <ul class="events no-counts" id="event_list">
+    {% include "sentry/partial/event_nav.html" %}
+
+    <ul class="events no-counts">
         {% include "sentry/partial/_event.html" %}
     </ul>
 
diff --git a/src/sentry/templates/sentry/header.html b/src/sentry/templates/sentry/header.html
index 19b6231245..692053f39e 100644
--- a/src/sentry/templates/sentry/header.html
+++ b/src/sentry/templates/sentry/header.html
@@ -19,7 +19,6 @@
                     {% if project %}
                         <li{% if SECTION == 'stream' %} class="active"{% endif %}><a href="{% url sentry-stream project.slug %}">{% trans "Stream" %}</a></li>
                         <li{% if SECTION == 'settings' %} class="active"{% endif %}><a href="{% url sentry-manage-project project.slug %}">{% trans "Settings" %}</a></li>
-                        <li{% if SECTION == 'docs' %} class="active"{% endif %}><a href="{% url sentry-project-client-help project.slug %}">{% trans "Client Configuration" %}</a></li>
                     {% endif %}
                 </ul>
                 <ul class="nav pull-right">
diff --git a/src/sentry/templates/sentry/partial/event_nav.html b/src/sentry/templates/sentry/partial/event_nav.html
new file mode 100644
index 0000000000..193162fc97
--- /dev/null
+++ b/src/sentry/templates/sentry/partial/event_nav.html
@@ -0,0 +1,42 @@
+{% load i18n %}
+{% load sentry_helpers %}
+{% load sentry_plugins %}
+
+<div id="event_nav">
+    <ul class="nav nav-pills">
+        {% with event.group|get_panels:request as panel_list %}
+            {% if panel_list %}
+                <li class="dropdown pull-right">
+                    <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">
+                        <i class="icon-list"></i>
+                    </a>
+                    <ul class="dropdown-menu">
+                        {% for label, link, is_active in panel_list %}
+                            <li{% if is_active %} class="active"{% endif %}><a href="{{ link }}">{{ label }}</a></li>
+                        {% endfor %}
+                    </ul>
+                </li>
+            {% endif %}
+        {% endwith %}
+        <li{% if page == 'details' %} class="active"{% endif %}>
+            <a href="#details">{% trans "Details" %}</a>
+        </li>
+        {% for interface, _ in interface_list %}
+            <li>
+                <a href="#{{ interface.get_slug }}">
+                    {{ interface.get_title }}
+                </a>
+            </li>
+        {% endfor %}
+        {% if json_data %}
+            <li>
+                <a href="#extra">{% trans "Additional Data" %}</a>
+            </li>
+        {% endif %}
+        {% if version_data %}
+            <li>
+                <a href="#versions">{% trans "Versions" %}</a>
+            </li>
+        {% endif %}
+    </ul>
+</div>
\ No newline at end of file
diff --git a/src/sentry/templatetags/sentry_helpers.py b/src/sentry/templatetags/sentry_helpers.py
index 1124dad04a..322575455b 100644
--- a/src/sentry/templatetags/sentry_helpers.py
+++ b/src/sentry/templatetags/sentry_helpers.py
@@ -25,6 +25,7 @@ from templatetag_sugar.parser import Name, Variable, Constant, Optional
 
 import datetime
 import hashlib
+import logging
 import urllib
 
 register = template.Library()
@@ -346,3 +347,21 @@ def is_muted(value):
 @register.filter
 def split(value, delim=''):
     return value.split(delim)
+
+
+@register.filter
+def get_rendered_interfaces(event):
+    interface_list = []
+    for interface in event.interfaces.itervalues():
+        try:
+            html = interface.to_html(event)
+        except Exception:
+            logger = logging.getLogger('sentry.interfaces')
+            logger.error('Error rendering interface %r', interface.__class__, extra={
+                'event_id': event.id,
+            }, exc_info=True)
+            continue
+        if not html:
+            continue
+        interface_list.append((interface, mark_safe(html)))
+    return interface_list
diff --git a/src/sentry/templatetags/sentry_plugins.py b/src/sentry/templatetags/sentry_plugins.py
index ba5d2d37e6..d49bb2e32d 100644
--- a/src/sentry/templatetags/sentry_plugins.py
+++ b/src/sentry/templatetags/sentry_plugins.py
@@ -49,8 +49,7 @@ def get_panels(group, request):
 
         panel_list = results
 
-    for panel in panel_list:
-        yield panel[0], panel[1], request.path == panel[1]
+    return [(p[0], p[1], request.path == p[1]) for p in panel_list]
 
 
 @register.filter
diff --git a/src/sentry/web/frontend/docs.py b/src/sentry/web/frontend/docs.py
index c84be219e4..f261ccd13b 100644
--- a/src/sentry/web/frontend/docs.py
+++ b/src/sentry/web/frontend/docs.py
@@ -73,7 +73,7 @@ def client_help(request, project):
     context = {
         'page': 'client_help',
         'project': project,
-        'SECTION': 'docs',
+        'SECTION': 'settings',
     }
     context.update(get_key_context(request.user, project))
 
@@ -92,7 +92,7 @@ def client_guide(request, project, platform):
         'platform_title': PLATFORM_TITLES.get(platform, platform.title()),
         'project': project,
         'page': 'client_help_%s' % (platform,),
-        'SECTION': 'docs',
+        'SECTION': 'settings',
     }
     context.update(get_key_context(request.user, project))
 
diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index 59a63a75e2..f243409ceb 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -15,7 +15,6 @@ from django.core.urlresolvers import reverse
 from django.http import HttpResponse, HttpResponseRedirect, Http404
 from django.shortcuts import get_object_or_404
 from django.utils import timezone
-from django.utils.safestring import mark_safe
 
 from sentry.conf import settings
 from sentry.constants import (SORT_OPTIONS, SEARCH_SORT_OPTIONS,
@@ -35,23 +34,6 @@ uuid_re = re.compile(r'^[a-z0-9]{32}$', re.I)
 event_re = re.compile(r'^(?P<event_id>[a-z0-9]{32})\$(?P<checksum>[a-z0-9]{32})$', re.I)
 
 
-def _get_rendered_interfaces(event):
-    interface_list = []
-    for interface in event.interfaces.itervalues():
-        try:
-            html = interface.to_html(event)
-        except Exception:
-            logger = logging.getLogger('sentry.interfaces')
-            logger.error('Error rendering interface %r', interface.__class__, extra={
-                'event_id': event.id,
-            }, exc_info=True)
-            continue
-        if not html:
-            continue
-        interface_list.append((interface, mark_safe(html)))
-    return interface_list
-
-
 def _get_group_list(request, project):
     filters = []
     for cls in get_filters(Group, project):
@@ -248,21 +230,29 @@ def group_list(request, project):
     }, request)
 
 
-@has_group_access
-def group(request, project, group):
+def render_with_group_context(group, template, context, request=None):
     # It's possible that a message would not be created under certain
     # circumstances (such as a post_save signal failing)
-    event = group.get_latest_event() or Event(group=group)
+    event = group.get_latest_event() or Event()
+    event.group = group
 
-    return render_to_response('sentry/groups/details.html', {
-        'project': project,
-        'page': 'details',
+    context.update({
+        'project': group.project,
         'group': group,
         'event': event,
-        'interface_list': _get_rendered_interfaces(event),
         'json_data': event.data.get('extra', {}),
         'version_data': event.data.get('modules', None),
         'can_admin_event': can_admin_group(request.user, group),
+    })
+
+    return render_to_response(template, context, request)
+
+
+@has_group_access
+def group(request, project, group):
+
+    return render_with_group_context(group, 'sentry/groups/details.html', {
+        'page': 'details',
     }, request)
 
 
@@ -280,26 +270,19 @@ def group_tag_list(request, project, group):
             in group.get_unique_tags(tag_name)[:5]
         ]))
 
-    return render_to_response('sentry/groups/tag_list.html', {
-        'project': project,
-        'group': group,
+    return render_with_group_context(group, 'sentry/groups/tag_list.html', {
         'page': 'tag_list',
         'tag_list': tag_list,
-        'can_admin_event': can_admin_group(request.user, group),
     }, request)
 
 
 @has_group_access
 def group_tag_details(request, project, group, tag_name):
-    return render_to_response('sentry/plugins/bases/tag/index.html', {
-        'project': project,
-        'group': group,
+    return render_with_group_context(group, 'sentry/plugins/bases/tag/index.html', {
         'title': tag_name.replace('_', ' ').title(),
         'tag_name': tag_name,
         'unique_tags': group.get_unique_tags(tag_name),
-        'group': group,
         'page': 'tag_details',
-        'can_admin_event': can_admin_group(request.user, group),
     }, request)
 
 
@@ -307,12 +290,9 @@ def group_tag_details(request, project, group, tag_name):
 def group_event_list(request, project, group):
     event_list = group.event_set.all().order_by('-datetime')
 
-    return render_to_response('sentry/groups/event_list.html', {
-        'project': project,
-        'group': group,
+    return render_with_group_context(group, 'sentry/groups/event_list.html', {
         'event_list': event_list,
         'page': 'event_list',
-        'can_admin_event': can_admin_group(request.user, group),
     }, request)
 
 
@@ -339,10 +319,9 @@ def group_event_details(request, project, group, event_id):
 
     return render_to_response('sentry/groups/event.html', {
         'project': project,
-        'page': 'event_list',
+        'page': 'event',
         'group': group,
         'event': event,
-        'interface_list': _get_rendered_interfaces(event),
         'json_data': event.data.get('extra', {}),
         'version_data': event.data.get('modules', None),
         'can_admin_event': can_admin_group(request.user, group),
