commit 0ed8984e6b125b0b0599854651bab70dc45456ea
Author: William Mak <william@wmak.io>
Date:   Thu Feb 20 19:47:20 2020 -0500

    fix(discover) - Removing count(*) for error rate (#17143)

diff --git a/src/sentry/api/event_search.py b/src/sentry/api/event_search.py
index 36bf3d6162..d2e9e75072 100644
--- a/src/sentry/api/event_search.py
+++ b/src/sentry/api/event_search.py
@@ -856,7 +856,7 @@ FIELD_ALIASES = {
     "error_rate": {
         "result_type": "number",
         "aggregations": [
-            ["divide(countIf(notEquals(transaction_status, 0)), count(*))", None, "error_rate"]
+            ["divide(countIf(notEquals(transaction_status, 0)), count())", None, "error_rate"]
         ],
     },
 }
diff --git a/tests/sentry/snuba/test_discover.py b/tests/sentry/snuba/test_discover.py
index 3f6a125dee..ff5af85bcf 100644
--- a/tests/sentry/snuba/test_discover.py
+++ b/tests/sentry/snuba/test_discover.py
@@ -397,7 +397,7 @@ class QueryTransformTest(TestCase):
         mock_query.assert_called_with(
             selected_columns=["transaction"],
             aggregations=[
-                ["divide(countIf(notEquals(transaction_status, 0)), count(*))", None, "error_rate"],
+                ["divide(countIf(notEquals(transaction_status, 0)), count())", None, "error_rate"],
                 ["argMax", ["event_id", "timestamp"], "latest_event"],
                 ["argMax", ["project_id", "timestamp"], "projectid"],
             ],
