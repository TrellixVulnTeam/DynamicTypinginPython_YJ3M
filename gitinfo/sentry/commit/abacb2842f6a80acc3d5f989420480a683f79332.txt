commit abacb2842f6a80acc3d5f989420480a683f79332
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Thu Nov 14 11:47:17 2019 -0800

    fix(member-invites): Use withTeams over organizations.teams (#15596)
    
    This should be more reliable, as depending on the context, the organization object may not have teams in it.
    
    Fixes: JAVASCRIPT-5RC

diff --git a/src/sentry/static/sentry/app/components/modals/inviteMembersModal/index.tsx b/src/sentry/static/sentry/app/components/modals/inviteMembersModal/index.tsx
index 7fc5a94384..e593f70a80 100644
--- a/src/sentry/static/sentry/app/components/modals/inviteMembersModal/index.tsx
+++ b/src/sentry/static/sentry/app/components/modals/inviteMembersModal/index.tsx
@@ -11,8 +11,9 @@ import Button from 'app/components/button';
 import HookOrDefault from 'app/components/hookOrDefault';
 import space from 'app/styles/space';
 import AsyncComponent from 'app/components/asyncComponent';
-import {Organization} from 'app/types';
+import {Organization, Team} from 'app/types';
 import withLatestContext from 'app/utils/withLatestContext';
+import withTeams from 'app/utils/withTeams';
 import LoadingIndicator from 'app/components/loadingIndicator';
 import Tooltip from 'app/components/tooltip';
 
@@ -22,6 +23,7 @@ import InviteRowControl from './inviteRowControl';
 type Props = AsyncComponent['props'] &
   ModalRenderProps & {
     organization: Organization;
+    teams: Team[];
     source?: string;
   };
 
@@ -281,7 +283,7 @@ class InviteMembersModal extends AsyncComponent<Props, State> {
   }
 
   render() {
-    const {Footer, closeModal, organization} = this.props;
+    const {Footer, closeModal, organization, teams: allTeams} = this.props;
     const {pendingInvites, sendingInvites, complete, inviteStatus, member} = this.state;
 
     const disableInputs = sendingInvites || complete;
@@ -331,7 +333,7 @@ class InviteMembersModal extends AsyncComponent<Props, State> {
             teams={[...teams]}
             roleOptions={member ? member.roles : MEMBER_ROLES}
             roleDisabledUnallowed={this.willInvite}
-            teamOptions={organization.teams}
+            teamOptions={allTeams}
             inviteStatus={inviteStatus}
             onRemove={() => this.removeInviteRow(i)}
             onChangeEmails={opts => this.setEmails(opts.map(v => v.value), i)}
@@ -404,7 +406,7 @@ class InviteMembersModal extends AsyncComponent<Props, State> {
 
     return (
       <InviteModalHook
-        organization={this.props.organization}
+        organization={organization}
         willInvite={this.willInvite}
         onSendInvites={this.sendInvites}
       >
@@ -485,4 +487,4 @@ const modalClassName = css`
   }
 `;
 export {modalClassName};
-export default withLatestContext(InviteMembersModal);
+export default withLatestContext(withTeams(InviteMembersModal));
