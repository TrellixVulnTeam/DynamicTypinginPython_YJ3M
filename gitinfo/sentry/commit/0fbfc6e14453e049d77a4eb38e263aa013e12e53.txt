commit 0fbfc6e14453e049d77a4eb38e263aa013e12e53
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Sep 8 14:47:44 2015 -0700

    Assure that a list of scopes is alwyas returned regardless of the verb
    
    Fixes GH-1920

diff --git a/src/sentry/api/bases/organization.py b/src/sentry/api/bases/organization.py
index a011866fb9..aa78c52dfb 100644
--- a/src/sentry/api/bases/organization.py
+++ b/src/sentry/api/bases/organization.py
@@ -22,7 +22,7 @@ class OrganizationPermission(ScopedPermission):
             return request.auth.organization_id == organization.id
 
         request.access = access.from_user(request.user, organization)
-        allowed_scopes = set(self.scope_map[request.method])
+        allowed_scopes = set(self.scope_map.get(request.method, []))
         return any(request.access.has_scope(s) for s in allowed_scopes)
 
 
diff --git a/src/sentry/api/bases/project.py b/src/sentry/api/bases/project.py
index e9d3c87382..c80257fb3f 100644
--- a/src/sentry/api/bases/project.py
+++ b/src/sentry/api/bases/project.py
@@ -26,7 +26,7 @@ class ProjectPermission(ScopedPermission):
         if not request.access.has_team(project.team):
             return False
 
-        allowed_scopes = set(self.scope_map[request.method])
+        allowed_scopes = set(self.scope_map.get(request.method, []))
         return any(request.access.has_scope(s) for s in allowed_scopes)
 
 
diff --git a/src/sentry/api/bases/team.py b/src/sentry/api/bases/team.py
index 74185f9281..d1afc4f052 100644
--- a/src/sentry/api/bases/team.py
+++ b/src/sentry/api/bases/team.py
@@ -26,7 +26,7 @@ class TeamPermission(ScopedPermission):
         if not request.access.has_team(team):
             return False
 
-        allowed_scopes = set(self.scope_map[request.method])
+        allowed_scopes = set(self.scope_map.get(request.method, []))
         return any(request.access.has_scope(s) for s in allowed_scopes)
 
 
diff --git a/src/sentry/api/permissions.py b/src/sentry/api/permissions.py
index 90be2b785a..f71b54d4bf 100644
--- a/src/sentry/api/permissions.py
+++ b/src/sentry/api/permissions.py
@@ -45,7 +45,7 @@ class ScopedPermission(permissions.BasePermission):
         if not request.auth:
             return request.user.is_authenticated()
 
-        allowed_scopes = set(self.scope_map[request.method])
+        allowed_scopes = set(self.scope_map.get(request.method, []))
         current_scopes = request.auth.get_scopes()
         return any(s in allowed_scopes for s in current_scopes)
 
