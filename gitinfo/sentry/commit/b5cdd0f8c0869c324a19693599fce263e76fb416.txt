commit b5cdd0f8c0869c324a19693599fce263e76fb416
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Aug 6 11:04:20 2015 -0700

    Add client api request and response metrics

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 81a8626bce..3cacca3b79 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -133,6 +133,17 @@ class APIView(BaseView):
                                     content_type='text/plain',
                                     status=500)
 
+        if helper.context.version:
+            metrics.incr('client-api.v%s.requests' % (
+                helper.context.version,
+            ))
+            metrics.incr('client-api.v%s.responses.%s' % (
+                helper.context.version, response.status_code
+            ))
+            metrics.incr('client-api.v%s.responses.%sxx' % (
+                helper.context.version, str(response.status_code)[0]
+            ))
+
         if response.status_code != 200 and origin:
             # We allow all origins on errors
             response['Access-Control-Allow-Origin'] = '*'
