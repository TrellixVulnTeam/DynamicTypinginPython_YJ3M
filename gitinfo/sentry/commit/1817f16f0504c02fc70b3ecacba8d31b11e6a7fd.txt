commit 1817f16f0504c02fc70b3ecacba8d31b11e6a7fd
Author: Keith Bourgoin <keith@parsely.com>
Date:   Thu Jun 9 07:57:12 2011 -0400

    Need to use __getattribute__ becausegetattr can be fooled by someone making all attributes present and callable.

diff --git a/sentry/utils/__init__.py b/sentry/utils/__init__.py
index f73ceb019b..5d09ccf6ab 100644
--- a/sentry/utils/__init__.py
+++ b/sentry/utils/__init__.py
@@ -75,7 +75,7 @@ def varmap(func, var, context=None):
 
 def has_sentry_metadata(value):
     try:
-        return callable(getattr(value, '__sentry__', None))
+        return callable(value.__getattribute__("__sentry__"))
     except:
         return False
 
@@ -305,4 +305,4 @@ class MockDjangoRequest(object):
         return '<Request\nGET:%s,\nPOST:%s,\nCOOKIES:%s,\nMETA:%s>' % \
             (get, post, cookies, meta)
 
-    def build_absolute_uri(self): return self.url
\ No newline at end of file
+    def build_absolute_uri(self): return self.url
