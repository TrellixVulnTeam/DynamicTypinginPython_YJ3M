commit aa172dddd605fbc21780b480c711fbdb442d01fa
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Oct 20 14:22:50 2014 +0200

    Various fixes

diff --git a/docs/faq/index.rst b/docs/faq/index.rst
index 4a1d8a38f1..f0791e137c 100644
--- a/docs/faq/index.rst
+++ b/docs/faq/index.rst
@@ -43,7 +43,6 @@ How do I
 
      project = Project()
      project.team = team
-     project.owner = user
      project.name = 'Default'
      project.save()
 
diff --git a/src/sentry/api/endpoints/team_project_index.py b/src/sentry/api/endpoints/team_project_index.py
index 3e219da1b3..7dacf21e9f 100644
--- a/src/sentry/api/endpoints/team_project_index.py
+++ b/src/sentry/api/endpoints/team_project_index.py
@@ -40,7 +40,6 @@ class TeamProjectIndexEndpoint(Endpoint):
         if serializer.is_valid():
             project = serializer.object
             project.team = team
-            project.owner = team.owner
             project.save()
             return Response(serialize(project, request.user), status=201)
         return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)
diff --git a/src/sentry/management/commands/repair.py b/src/sentry/management/commands/repair.py
index 82b09d0ac3..5594a9d5f7 100644
--- a/src/sentry/management/commands/repair.py
+++ b/src/sentry/management/commands/repair.py
@@ -34,7 +34,7 @@ class Command(BaseCommand):
         for project in Project.objects.filter(team__isnull=True, owner__isnull=False):
             team = Team(
                 name=project.name,
-                owner=project.owner,
+                owner=owner,
             )
             base_slug = slugify(team.name)
             slug = base_slug
diff --git a/src/sentry/templates/sentry/admin/projects/list.html b/src/sentry/templates/sentry/admin/projects/list.html
index 7dde721ec3..d41493729b 100644
--- a/src/sentry/templates/sentry/admin/projects/list.html
+++ b/src/sentry/templates/sentry/admin/projects/list.html
@@ -51,15 +51,6 @@
                                 {% else %}
                                     <strong>{{ project.slug }}</strong>
                                 {% endif %}
-                                {% if project.owner %}
-                                    <small>Owned by <a href="{% url 'sentry-admin-edit-user' project.owner.pk %}">
-                                        {% if project.owner.email %}
-                                            {{ project.owner.email }}
-                                        {% else %}
-                                            {{ project.owner.username }}
-                                        {% endif %}
-                                    </a></smalL>
-                                {% endif %}
                             </td>
                             <td style="text-align:center; vertical-align:middle;">
                                 {{ avg_events|small_count }}
diff --git a/src/sentry/web/frontend/create_project.py b/src/sentry/web/frontend/create_project.py
index b8696c179b..b54717db24 100644
--- a/src/sentry/web/frontend/create_project.py
+++ b/src/sentry/web/frontend/create_project.py
@@ -53,8 +53,6 @@ class CreateProjectView(TeamView):
         if form.is_valid():
             project = form.save(commit=False)
             project.team = team
-            if not project.owner:
-                project.owner = request.user
             project.save()
 
             create_sample_event(project)
diff --git a/src/sentry/web/frontend/projects/settings.py b/src/sentry/web/frontend/projects/settings.py
index e38237bdf2..c3b7095cec 100644
--- a/src/sentry/web/frontend/projects/settings.py
+++ b/src/sentry/web/frontend/projects/settings.py
@@ -30,11 +30,10 @@ def manage_project(request, team, project):
     if result is False and not request.user.is_superuser:
         return HttpResponseRedirect(reverse('sentry'))
 
-    team_list = Team.objects.get_for_user(project.owner or request.user, MEMBER_OWNER)
+    team_list = Team.objects.get_for_user(team.owner, MEMBER_OWNER)
 
     form = EditProjectForm(request, team_list, request.POST or None, instance=project, initial={
         'origins': '\n'.join(project.get_option('sentry:origins', None) or []),
-        'owner': project.owner,
         'resolve_age': int(project.get_option('sentry:resolve_age', 0)),
     })
 
diff --git a/tests/sentry/web/frontend/tests.py b/tests/sentry/web/frontend/tests.py
index 076e3e588d..d927261e5d 100644
--- a/tests/sentry/web/frontend/tests.py
+++ b/tests/sentry/web/frontend/tests.py
@@ -6,7 +6,7 @@ from django.core.urlresolvers import reverse
 from exam import fixture
 
 from sentry.constants import MEMBER_USER
-from sentry.models import Project, TeamMember, Team, User
+from sentry.models import TeamMember, User
 from sentry.testutils import TestCase
 
 
@@ -144,22 +144,23 @@ class PermissionBase(TestCase):
         user.set_password('owner')
         user.save()
 
-        Team.objects.create(owner=user, name='foo', slug='foo')
-
         return user
 
     @fixture
     def tm(self):
         return TeamMember.objects.get(user=self.member, team=self.team)
 
+    @fixture
+    def organization(self):
+        return self.create_organization(owner=self.owner)
+
     @fixture
     def team(self):
-        return Team.objects.get(owner=self.owner, slug='foo')
+        return self.create_team(slug='foo', organization=self.organization)
 
     @fixture
     def project(self):
-        project = Project.objects.get(id=1)
-        project.update(public=False, team=self.team)
+        project = self.create_project(slug='test')
         return project
 
     def _assertPerm(self, path, template, account=None, want=True):
