commit bd3306ac36f44569f334a8166b2d9c267a5bc614
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Wed Oct 12 01:49:12 2016 +0200

    Use response encoding if it exists

diff --git a/src/sentry/lang/javascript/processor.py b/src/sentry/lang/javascript/processor.py
index f71a323b75..b83d68967a 100644
--- a/src/sentry/lang/javascript/processor.py
+++ b/src/sentry/lang/javascript/processor.py
@@ -427,7 +427,7 @@ def fetch_file(url, project=None, release=None, allow_scraping=True):
                 body = b''.join(contents)
                 z_body = zlib.compress(body)
                 headers = {k.lower(): v for k, v in response.headers.items()}
-                text_body = body.decode('utf-8', 'replace')
+                text_body = body.decode(response.encoding or 'utf-8', 'replace')
 
                 cache.set(cache_key, (headers, z_body, response.status_code), 60)
                 result = (headers, text_body, response.status_code)
