commit 5b6f34f869ad74a3e576a75af085ea51a710703e
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Mon Jun 1 16:28:00 2020 -0700

    ref(charts): Extract out visualMap from map series (#19094)

diff --git a/src/sentry/static/sentry/app/components/charts/baseChart.jsx b/src/sentry/static/sentry/app/components/charts/baseChart.jsx
index 71f4ce5d51..af9069cb03 100644
--- a/src/sentry/static/sentry/app/components/charts/baseChart.jsx
+++ b/src/sentry/static/sentry/app/components/charts/baseChart.jsx
@@ -30,8 +30,12 @@ const getDimensionValue = dimension => {
 class BaseChart extends React.Component {
   static propTypes = {
     // TODO: Pull out props from generic `options` object
-    // so that we can better document them in prop types
-    // see: https://ecomfe.github.io/echarts-doc/public/en/option.html
+    //       so that we can better document them in prop types
+    //       see: https://ecomfe.github.io/echarts-doc/public/en/option.html
+    //
+    // NOTE: [!!] If you use an option that requires a specific echart module,
+    //       you WILL NEED to IMPORT that module to have it registered in
+    //       echarts. IT WILL FAIL SILENTLY IF YOU DONT.
     options: PropTypes.object,
 
     // Chart Series
diff --git a/src/sentry/static/sentry/app/components/charts/series/mapSeries.jsx b/src/sentry/static/sentry/app/components/charts/series/mapSeries.jsx
index c912368756..32e1831a45 100644
--- a/src/sentry/static/sentry/app/components/charts/series/mapSeries.jsx
+++ b/src/sentry/static/sentry/app/components/charts/series/mapSeries.jsx
@@ -1,5 +1,4 @@
 import 'echarts/lib/chart/map';
-import 'echarts/lib/component/visualMap';
 import 'echarts/map/js/world';
 
 export default function MapSeries(props = {}) {
diff --git a/src/sentry/static/sentry/app/components/charts/visualMap.tsx b/src/sentry/static/sentry/app/components/charts/visualMap.tsx
new file mode 100644
index 0000000000..5a5f79df66
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/charts/visualMap.tsx
@@ -0,0 +1,6 @@
+import {EChartOption} from 'echarts';
+import 'echarts/lib/component/visualMap';
+
+export default function VisualMap(visualMap: EChartOption.VisualMap) {
+  return visualMap;
+}
diff --git a/src/sentry/static/sentry/app/components/charts/worldMapChart.jsx b/src/sentry/static/sentry/app/components/charts/worldMapChart.jsx
index 9ce7634a40..b2748078bd 100644
--- a/src/sentry/static/sentry/app/components/charts/worldMapChart.jsx
+++ b/src/sentry/static/sentry/app/components/charts/worldMapChart.jsx
@@ -6,6 +6,7 @@ import theme from 'app/utils/theme';
 
 import BaseChart from './baseChart';
 import MapSeries from './series/mapSeries';
+import VisualMap from './visualMap';
 
 export default class WorldMapChart extends React.Component {
   static propTypes = {
@@ -81,7 +82,7 @@ export default class WorldMapChart extends React.Component {
       <BaseChart
         options={{
           backgroundColor: theme.borderLighter,
-          visualMap: {
+          visualMap: VisualMap({
             left: 'right',
             min: 0,
             max: maxValue,
@@ -93,7 +94,7 @@ export default class WorldMapChart extends React.Component {
             // Whether show handles, which can be dragged to adjust "selected range".
             // False because the handles are pretty ugly
             calculable: false,
-          },
+          }),
         }}
         {...props}
         yAxis={null}
