commit 0cf6ed1f4f5b9f7144a1213eaf63c518f5576c7a
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jan 22 16:43:19 2013 -0800

    Enable streaming updates on dashboard

diff --git a/src/sentry/templates/sentry/dashboard.html b/src/sentry/templates/sentry/dashboard.html
index 92eea42fc1..16a7299d3d 100644
--- a/src/sentry/templates/sentry/dashboard.html
+++ b/src/sentry/templates/sentry/dashboard.html
@@ -18,28 +18,24 @@
             <div class="page-header">
                 <h3 class="pull-left">{% trans "Trends" %}</h3>
                 <ul class="nav nav-pills nav-small">
-                    <li><a href="#top_15m" data-toggle="ajtab" data-uri="{% url sentry-api-groups-trends %}?minutes=15&amp;limit=5">{% trans "15 minutes" %}</a></li>
-                    <li><a href="#top_60m" data-toggle="ajtab" data-uri="{% url sentry-api-groups-trends %}?minutes=60&amp;limit=5">{% trans "60 minutes" %}</a></li>
-                    <li class="active"><a href="#top_24h" data-toggle="ajtab" data-uri="{% url sentry-api-groups-trends %}?minutes=1440&amp;limit=5">{% trans "24 hours" %}</a></li>
+                    <li><a href="#top_events" data-toggle="ajtab" data-uri="{% url sentry-api-groups-trends %}?minutes=15&amp;limit=5">{% trans "15 minutes" %}</a></li>
+                    <li><a href="#top_events" data-toggle="ajtab" data-uri="{% url sentry-api-groups-trends %}?minutes=60&amp;limit=5">{% trans "60 minutes" %}</a></li>
+                    <li class="active"><a href="#top_events" data-toggle="ajtab" data-uri="{% url sentry-api-groups-trends %}?minutes=1440&amp;limit=5">{% trans "24 hours" %}</a></li>
                 </ul>
             </div>
             <div class="tab-content">
-                <div class="tab-pane" id="top_15m"></div>
-                <div class="tab-pane" id="top_60m"></div>
-                <div class="tab-pane active" id="top_24h"><p>{% trans "Loading ..." %}</p></div>
+                <div class="tab-pane active" id="top_events"><p>{% trans "Loading ..." %}</p></div>
             </div>
             <div class="page-header">
                 <h3 class="pull-left">{% trans "New Events" %}</h3>
                 <ul class="nav nav-pills nav-small">
-                    <li><a href="#new_15m" data-toggle="ajtab" data-uri="{% url sentry-api-groups-new %}?minutes=15&amp;limit=5">{% trans "15 minutes" %}</a></li>
-                    <li><a href="#new_60m" data-toggle="ajtab" data-uri="{% url sentry-api-groups-new %}?minutes=60&amp;limit=5">{% trans "60 minutes" %}</a></li>
-                    <li class="active"><a href="#new_24h" data-toggle="ajtab" data-uri="{% url sentry-api-groups-new %}?minutes=1440&amp;limit=5">{% trans "24 hours" %}</a></li>
+                    <li><a href="#new_events" data-toggle="ajtab" data-uri="{% url sentry-api-groups-new %}?minutes=15&amp;limit=5">{% trans "15 minutes" %}</a></li>
+                    <li><a href="#new_events" data-toggle="ajtab" data-uri="{% url sentry-api-groups-new %}?minutes=60&amp;limit=5">{% trans "60 minutes" %}</a></li>
+                    <li class="active"><a href="#new_events" data-toggle="ajtab" data-uri="{% url sentry-api-groups-new %}?minutes=1440&amp;limit=5">{% trans "24 hours" %}</a></li>
                 </ul>
             </div>
             <div class="tab-content">
-                <div class="tab-pane" id="new_15m"></div>
-                <div class="tab-pane" id="new_60m"></div>
-                <div class="tab-pane active" id="new_24h"><p>{% trans "Loading ..." %}</p></div>
+                <div class="tab-pane active" id="new_events"><p>{% trans "Loading ..." %}</p></div>
             </div>
         {% else %}
             {% if can_create_projects %}
@@ -82,7 +78,10 @@
 {% block content_after %}
     <script type="text/javascript">
     $(function(){
-        new app.DashboardPage();
+        new app.DashboardPage({
+            realtime: true,
+            stream: true
+        });
     })
     </script>
 {% endblock %}
\ No newline at end of file
diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 51aa6be9bf..0491cedad2 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -530,6 +530,7 @@ def get_group_trends(request, project=None):
         cutoff_dt = timezone.now() - cutoff
 
         group_list = list(base_qs.filter(
+            status=STATUS_UNRESOLVED,
             last_seen__gte=cutoff_dt
         ).order_by('-score')[:limit])
 
@@ -561,7 +562,7 @@ def get_new_groups(request, project=None):
 
     group_list = list(Group.objects.filter(
         project__in=project_dict.keys(),
-        status=0,
+        status=STATUS_UNRESOLVED,
         active_at__gte=cutoff_dt,
     ).order_by('-score')[:limit])
 
@@ -593,7 +594,7 @@ def get_resolved_groups(request, project=None):
 
     group_list = Group.objects.filter(
         project__in=project_list,
-        status=1,
+        status=STATUS_RESOLVED,
         resolved_at__gte=cutoff_dt,
     ).select_related('project').order_by('-score')[:limit]
 
