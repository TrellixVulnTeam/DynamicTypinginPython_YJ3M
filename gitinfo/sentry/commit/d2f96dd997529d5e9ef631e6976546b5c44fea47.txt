commit d2f96dd997529d5e9ef631e6976546b5c44fea47
Author: Ted Kaemming <ted@kaemming.com>
Date:   Thu Sep 24 13:53:02 2015 -0700

    Mark digest extension points.

diff --git a/src/sentry/features/__init__.py b/src/sentry/features/__init__.py
index adb8524635..9a4a507200 100644
--- a/src/sentry/features/__init__.py
+++ b/src/sentry/features/__init__.py
@@ -9,6 +9,7 @@ default_manager = FeatureManager()
 default_manager.add('auth:register')
 default_manager.add('organizations:create')
 default_manager.add('organizations:sso', OrganizationFeature)
+default_manager.add('projects:digests', ProjectFeature)
 default_manager.add('projects:quotas', ProjectFeature)
 default_manager.add('projects:user-reports', ProjectFeature)
 default_manager.add('projects:plugins', ProjectPluginFeature)
diff --git a/src/sentry/plugins/bases/notify.py b/src/sentry/plugins/bases/notify.py
index b2ae0a51fe..f16b490f9f 100644
--- a/src/sentry/plugins/bases/notify.py
+++ b/src/sentry/plugins/bases/notify.py
@@ -11,6 +11,7 @@ import logging
 
 from django import forms
 
+from sentry import features
 from sentry.app import ratelimiter
 from sentry.plugins import Notification, Plugin
 from sentry.models import UserOption
@@ -55,7 +56,10 @@ class NotificationPlugin(Plugin):
             raise NotImplementedError('The default behavior for notification de-duplication does not support args')
 
         notification = Notification(event=event, rules=rules)
-        self.notify(notification)
+        if features.has('projects:digests', event.group.project):
+            raise NotImplementedError
+        else:
+            self.notify(notification)
 
     def notify_users(self, group, event, fail_silently=False):
         raise NotImplementedError
@@ -90,6 +94,11 @@ class NotificationPlugin(Plugin):
         return member_set
 
     def should_notify(self, group, event):
+        # If digests are enabled for this project, we always want to add the
+        # notification to the digest (even if it may be filtered out later.)
+        if features.has('projects:digests', group.project):
+            raise NotImplementedError
+
         if group.is_muted():
             return False
 
