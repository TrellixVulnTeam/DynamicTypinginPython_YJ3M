commit f8007ef80ea1b652bd153d13cfec4d8eaf378d51
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Wed Mar 7 15:41:08 2018 -0800

    fix(environments): Do not update global environment on every search (#7502)
    
    We should only update the global environment if one is actually specified by the search
    query, otherwise leave the environment unchanged and do not default to 'All Environments'

diff --git a/src/sentry/static/sentry/app/views/stream/stream.jsx b/src/sentry/static/sentry/app/views/stream/stream.jsx
index 3970110940..58a0753634 100644
--- a/src/sentry/static/sentry/app/views/stream/stream.jsx
+++ b/src/sentry/static/sentry/app/views/stream/stream.jsx
@@ -460,8 +460,10 @@ const Stream = createReactClass({
       // and remove it from the query if someone does provide it this way
       if (this.props.hasEnvironmentsFeature) {
         const queryEnvironment = queryString.getQueryEnvironment(query);
-        const env = EnvironmentStore.getByName(queryEnvironment);
-        setActiveEnvironment(env);
+        if (queryEnvironment !== null) {
+          const env = EnvironmentStore.getByName(queryEnvironment);
+          setActiveEnvironment(env);
+        }
 
         query = queryString.getQueryStringWithoutEnvironment(query);
       }
