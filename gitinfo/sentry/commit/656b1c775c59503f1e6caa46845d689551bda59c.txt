commit 656b1c775c59503f1e6caa46845d689551bda59c
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Oct 24 10:27:07 2015 +0100

    Validate duplicate slugs correctly in team details API

diff --git a/src/sentry/api/endpoints/team_details.py b/src/sentry/api/endpoints/team_details.py
index 4b2bb617a9..05e8d2a34f 100644
--- a/src/sentry/api/endpoints/team_details.py
+++ b/src/sentry/api/endpoints/team_details.py
@@ -43,7 +43,11 @@ class TeamSerializer(serializers.ModelSerializer):
 
     def validate_slug(self, attrs, source):
         value = attrs[source]
-        if Team.objects.filter(slug=value).exclude(id=self.object.id):
+        qs = Team.objects.filter(
+            slug=value,
+            organization=self.object.organization,
+        ).exclude(id=self.object.id)
+        if qs.exists():
             raise serializers.ValidationError('The slug "%s" is already in use.' % (value,))
         return attrs
 
