commit d3929e99c45a971829f0039ab7bc18e543cf0068
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Sep 20 01:41:40 2013 -0700

    Dont fail notifications when a project doesnt have a team set

diff --git a/src/sentry/plugins/bases/notify.py b/src/sentry/plugins/bases/notify.py
index 47133bd968..5896fc9030 100644
--- a/src/sentry/plugins/bases/notify.py
+++ b/src/sentry/plugins/bases/notify.py
@@ -59,17 +59,18 @@ class NotificationPlugin(Plugin):
 
         disabled = set(u for u, v in alert_settings.iteritems() if v == 0)
 
-        # fetch team members
-        member_set = set(project.team.member_set.filter(
-            user__is_active=True,
-        ).exclude(user__in=disabled).values_list('user', flat=True))
-
         # fetch access group members
-        member_set |= set(AccessGroup.objects.filter(
+        member_set = set(AccessGroup.objects.filter(
             projects=project,
             members__is_active=True,
         ).exclude(members__in=disabled).values_list('members', flat=True))
 
+        if project.team:
+            # fetch team members
+            member_set |= set(project.team.member_set.filter(
+                user__is_active=True,
+            ).exclude(user__in=disabled).values_list('user', flat=True))
+
         # determine members default settings
         members_to_check = set(u for u in member_set if u not in alert_settings)
         if members_to_check:
