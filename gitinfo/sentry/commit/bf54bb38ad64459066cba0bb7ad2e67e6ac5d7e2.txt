commit bf54bb38ad64459066cba0bb7ad2e67e6ac5d7e2
Author: Jan Michael Auer <jan.auer@sentry.io>
Date:   Thu Feb 27 19:18:14 2020 +0100

    feat(save_event): Mark the event_saved signal in the save task (#17347)
    
    Marks the event_saved signal as sent in preparation of moving it into the outcomes consumer.

diff --git a/src/sentry/tasks/store.py b/src/sentry/tasks/store.py
index fdf5d972d4..a5bcd3f006 100644
--- a/src/sentry/tasks/store.py
+++ b/src/sentry/tasks/store.py
@@ -543,6 +543,7 @@ def _do_save_event(
 
             with metrics.timer("tasks.store.do_save_event.track_outcome"):
                 # This is where we can finally say that we have accepted the event.
+                mark_signal_sent(event.project.id, event_id)
                 track_outcome(
                     event.project.organization_id,
                     event.project.id,
@@ -565,12 +566,12 @@ def _do_save_event(
                 pass
 
             quotas.refund(project, key=project_key, timestamp=start_time)
-            # There is no signal supposed to be sent for this particular
-            # outcome-reason combination. Prevent the outcome consumer from
-            # emitting it for now.
-            #
-            # XXX(markus): Revisit decision about signals once outcomes consumer is stable.
+
+            # This outcome corresponds to the event_discarded signal. The
+            # outcomes_consumer generically handles all FILTERED outcomes, but
+            # needs to skip this one.
             mark_signal_sent(project_id, event_id)
+
             track_outcome(
                 project.organization_id,
                 project_id,
