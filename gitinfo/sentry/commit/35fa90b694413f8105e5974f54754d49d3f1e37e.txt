commit 35fa90b694413f8105e5974f54754d49d3f1e37e
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Dec 5 14:53:56 2014 -0800

    Various cleanup for project creation and team settings

diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index bd88d9ae7e..1ed42eb2b9 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -2546,10 +2546,25 @@ table.vars {
       h3 {
         color: #000;
       }
+      .actions a {
+        color: #666;
+      }
+    }
+
+    .actions {
+      color: #ccc;
+
+      > a {
+        color: #999;
+
+        &:hover {
+          color: @linkColorHover;
+        }
+      }
     }
 
     h3 {
-      width: 100%;
+      max-width: 100%;
       position: relative;
       margin-bottom: 0;
       line-height: 24px;
diff --git a/src/sentry/static/sentry/styles/global.min.css b/src/sentry/static/sentry/styles/global.min.css
index d77a0645a4..a2525780fe 100644
--- a/src/sentry/static/sentry/styles/global.min.css
+++ b/src/sentry/static/sentry/styles/global.min.css
@@ -6646,12 +6646,7 @@ h3 {
   top: 56px;
   position: absolute;
   min-height: 50px;
-<<<<<<< HEAD
   padding: 10px 10px 0;
-=======
-  min-width: 300px;
-  padding: 10px;
->>>>>>> master
   margin: 0;
   background: #313944;
   -webkit-box-shadow: none;
@@ -9020,8 +9015,20 @@ table.vars table.vars th {
 .team-list > li:hover h3 {
   color: #000;
 }
+.team-list > li:hover .actions a {
+  color: #666;
+}
+.team-list > li .actions {
+  color: #ccc;
+}
+.team-list > li .actions > a {
+  color: #999;
+}
+.team-list > li .actions > a:hover {
+  color: #12659a;
+}
 .team-list > li h3 {
-  width: 100%;
+  max-width: 100%;
   position: relative;
   margin-bottom: 0;
   line-height: 24px;
diff --git a/src/sentry/static/sentry/styles/sentry.css b/src/sentry/static/sentry/styles/sentry.css
index 2102ce4808..a2525780fe 100644
--- a/src/sentry/static/sentry/styles/sentry.css
+++ b/src/sentry/static/sentry/styles/sentry.css
@@ -6593,6 +6593,7 @@ h3 {
 }
 .navbar h1,
 .navbar #team-banner > a {
+  display: block;
   position: relative;
   letter-spacing: -1px;
   font-weight: 600;
@@ -6602,7 +6603,6 @@ h3 {
   height: 56px;
   line-height: 56px;
   padding: 0 25px 0 10px;
-  display: inline-block;
   cursor: pointer;
   text-overflow: ellipsis;
   white-space: nowrap;
@@ -9015,8 +9015,20 @@ table.vars table.vars th {
 .team-list > li:hover h3 {
   color: #000;
 }
+.team-list > li:hover .actions a {
+  color: #666;
+}
+.team-list > li .actions {
+  color: #ccc;
+}
+.team-list > li .actions > a {
+  color: #999;
+}
+.team-list > li .actions > a:hover {
+  color: #12659a;
+}
 .team-list > li h3 {
-  width: 100%;
+  max-width: 100%;
   position: relative;
   margin-bottom: 0;
   line-height: 24px;
diff --git a/src/sentry/templates/sentry/bases/team.html b/src/sentry/templates/sentry/bases/team.html
index 448f5e4673..528f7693d4 100644
--- a/src/sentry/templates/sentry/bases/team.html
+++ b/src/sentry/templates/sentry/bases/team.html
@@ -1,31 +1,3 @@
 {% extends "sentry/bases/organization.html" %}
 
-{% load i18n %}
-{% load sentry_permissions %}
-
 {% block title %}{{ team.name }} | {{ block.super }}{% endblock %}
-
-{% block main %}
-    <section class="body">
-        <div class="pull-right btn-group">
-            <a class="btn btn-primary btn-small dropdown-toggle" data-toggle="dropdown">
-                <span class="caret"></span>
-            </a>
-            <ul class="dropdown-menu">
-                <li><a href="{% url 'sentry-new-project' team.slug %}">{% trans "New Project" %}</a></li>
-            </ul>
-        </div>
-
-        <ul class="nav nav-tabs">
-            <li{% block team_settings_nav %}{% endblock %}>
-                <a href="{% url 'sentry-manage-team' team.slug %}">{% trans "Settings" %}</a>
-            </li>
-            <li{% block team_projects_nav %}{% endblock %}>
-                <a href="{% url 'sentry-manage-team-projects' team.slug %}">{% trans "Projects" %}</a>
-            </li>
-        </ul>
-
-        {% block inner %}
-        {% endblock %}
-    </section>
-{% endblock %}
diff --git a/src/sentry/templates/sentry/organization-home.html b/src/sentry/templates/sentry/organization-home.html
index 117abc29ca..78d829861f 100644
--- a/src/sentry/templates/sentry/organization-home.html
+++ b/src/sentry/templates/sentry/organization-home.html
@@ -22,6 +22,10 @@
               <span class="loading">{% trans "Loading historical data..." %}</span>
             </div>
           </div>
+          <div class="pull-right actions">
+            <a href="{% url 'sentry-new-project' team.slug %}">New Project</a> &mdash;
+            <a href="{% url 'sentry-manage-team' team.slug %}">Team Settings</a>
+          </div>
           <h3><a href="{% url 'sentry' team.slug %}">{{ team.name }}</a></h3>
           {% if not project_list %}
             <p>There are no projects in this team. Would you like to <a href="{% url 'sentry-new-project' team.slug %}">create a project</a>?</p>
diff --git a/src/sentry/templates/sentry/teams/manage.html b/src/sentry/templates/sentry/teams/manage.html
index 5bb56bef37..46d6c76d88 100644
--- a/src/sentry/templates/sentry/teams/manage.html
+++ b/src/sentry/templates/sentry/teams/manage.html
@@ -5,47 +5,57 @@
 {% load sentry_helpers %}
 {% load sentry_plugins %}
 
-{% block title %}{% trans "Settings" %} | {{ block.super }}{% endblock %}
+{% block title %}{% trans "Team Settings" %} | {{ block.super }}{% endblock %}
 
 {% block team_settings_nav %} class="active"{% endblock %}
 
 {% block inner %}
-    <form class="form-stacked" action="" method="post">
-        {% csrf_token %}
-
-        {% if form.errors %}
-            <div class="alert alert-error">{% trans "Please correct the errors below." %}</div>
-        {% endif %}
-
-        {{ form|as_crispy_errors }}
-
-        <fieldset>
-            {% for field in form %}
-                {% if field.name != 'owner' %}
-                    {{ field|as_crispy_field }}
-                {% endif %}
-            {% endfor %}
-        </fieldset>
-
-        {% if form.owner %}
-            <fieldset>
-                <p>If you wish to transfer ownership of this project, enter the new owner's username:</p>
-                {{ form.owner|as_crispy_field }}
-            </fieldset>
+  <div class="page-header">
+    <div class="pull-right">
+      <a href="{% url 'sentry-organization-home' organization.id %}">Back to Organization Home</a>
+    </div>
+    <h2>
+      {% trans "Team Settings" %}
+      <small>{{ team.name }}</small>
+    </h2>
+  </div>
+
+  <form class="form-stacked" action="" method="post">
+    {% csrf_token %}
+
+    {% if form.errors %}
+      <div class="alert alert-error">{% trans "Please correct the errors below." %}</div>
+    {% endif %}
+
+    {{ form|as_crispy_errors }}
+
+    <fieldset>
+      {% for field in form %}
+        {% if field.name != 'owner' %}
+          {{ field|as_crispy_field }}
         {% endif %}
-
-        <fieldset class="form-actions">
-            <button type="submit" class="btn btn-primary">{% trans "Save Changes" %}</button>
-            {% if can_remove_team %}
-                <a href="{% url 'sentry-remove-team' team.slug %}" class="btn btn-danger">{% trans "Remove Team" %}</a>
-            {% else %}
-                <div class="pull-right note">{% trans "You cannot remove this team because it has projects assigned to it" %}</div>
-            {% endif %}
-        </fieldset>
-    </form>
-
-<script type="text/javascript">
-new app.TeamDetailsPage();
-</script>
+      {% endfor %}
+    </fieldset>
+
+    {% if form.owner %}
+      <fieldset>
+        <p>If you wish to transfer ownership of this project, enter the new owner's username:</p>
+          {{ form.owner|as_crispy_field }}
+      </fieldset>
+    {% endif %}
+
+    <fieldset class="form-actions">
+      <button type="submit" class="btn btn-primary">{% trans "Save Changes" %}</button>
+      {% if can_remove_team %}
+          <a href="{% url 'sentry-remove-team' team.slug %}" class="btn btn-danger">{% trans "Remove Team" %}</a>
+      {% else %}
+          <div class="pull-right note">{% trans "You cannot remove this team because it has projects assigned to it" %}</div>
+      {% endif %}
+    </fieldset>
+  </form>
+
+  <script type="text/javascript">
+  new app.TeamDetailsPage();
+  </script>
 
 {% endblock %}
diff --git a/src/sentry/templates/sentry/teams/projects/index.html b/src/sentry/templates/sentry/teams/projects/index.html
deleted file mode 100644
index f4ba933fe7..0000000000
--- a/src/sentry/templates/sentry/teams/projects/index.html
+++ /dev/null
@@ -1,44 +0,0 @@
-{% extends "sentry/bases/team.html" %}
-
-{% load i18n %}
-{% load sentry_helpers %}
-
-{% block title %}{% trans "Projects" %} | {{ block.super }}{% endblock %}
-
-{% block team_projects_nav %} class="active"{% endblock %}
-
-{% block inner %}
-    {% if project_list %}
-        <table class="table table-striped">
-            <colgroup>
-                <col/>
-                <col width="100px"/>
-                <col width="150px"/>
-            </colgroup>
-            <thead>
-                <tr>
-                    <th>{% trans "Project" %}</th>
-                    <th style="text-align:center;">{% trans "Status" %}</th>
-                    <th style="text-align:center;">{% trans "Date Added" %}</th>
-                </tr>
-            </thead>
-            <tbody>
-                {% for project in project_list %}
-                    <tr>
-                        <td>
-                            <a href="{% url 'sentry-manage-project' project.team.slug project.slug %}">{{ project.name }}</a>
-                        </td>
-                        <td style="text-align:center">
-                            {{ project.get_status_display }}
-                        </td>
-                        <td style="text-align:center">
-                            {{ project.date_added|timesince }}
-                        </td>
-                    </tr>
-                {% endfor %}
-            </tbody>
-        </table>
-    {% else %}
-        <p>{% trans "There are no projects managed by this team." %}</p>
-    {% endif %}
-{% endblock %}
diff --git a/src/sentry/templates/sentry/teams/projects/new.html b/src/sentry/templates/sentry/teams/projects/new.html
index 92e6e22ad8..4ccb3deae6 100644
--- a/src/sentry/templates/sentry/teams/projects/new.html
+++ b/src/sentry/templates/sentry/teams/projects/new.html
@@ -1,4 +1,4 @@
-{% extends "sentry/bases/modal.html" %}
+{% extends "sentry/bases/team.html" %}
 
 {% load i18n %}
 
@@ -7,7 +7,7 @@
 {% block inner %}
   <div class="page-header">
     <div class="pull-right">
-      <a href="{% url 'sentry' team.slug %}">Back to Team Dashboard</a>
+      <a href="{% url 'sentry-organization-home' organization.id %}">Back to Organization Home</a>
     </div>
     <h2>
       {% trans "Create a New Project" %}
diff --git a/src/sentry/templates/sentry/teams/remove.html b/src/sentry/templates/sentry/teams/remove.html
index 8a75fa45d1..35f0201d5e 100644
--- a/src/sentry/templates/sentry/teams/remove.html
+++ b/src/sentry/templates/sentry/teams/remove.html
@@ -1,22 +1,29 @@
-{% extends "sentry/teams/manage.html" %}
+{% extends "sentry/bases/team.html" %}
 
 {% load crispy_forms_tags %}
 {% load i18n %}
 
 {% block title %}{% trans "Remove Team" %} | {{ block.super }}{% endblock %}
 
-{% block main %}
-    <section class="body">
-        <form action="" method="post">
-            <p>{% trans "Are you sure you wish to remove this team? This change is permanent!" %}</p>
-            {% csrf_token %}
-            {{ form|as_crispy_errors }}
-            {% for field in form %}
-                {{ field|as_crispy_field }}
-            {% endfor %}
-            <fieldset class="form-actions">
-                <button type="submit" class="btn btn-danger">{% trans "Confirm" %}</button> <a href="{% url 'sentry-manage-team' team.slug %}" class="btn">{% trans "Cancel" %}</a>
-            </fieldset>
-        </form>
-    </section>
+{% block inner %}
+  <div class="page-header">
+    <div class="pull-right">
+      <a href="{% url 'sentry-organization-home' organization.id %}">Back to Organization Home</a>
+    </div>
+    <h2>
+      {% trans "Remove Team" %}
+      <small>{{ team.name }}</small>
+    </h2>
+  </div>
+  <form action="" method="post">
+    <p>{% trans "Are you sure you wish to remove this team? This change is permanent and cannot be undone!" %}</p>
+    {% csrf_token %}
+    {{ form|as_crispy_errors }}
+    {% for field in form %}
+      {{ field|as_crispy_field }}
+    {% endfor %}
+    <fieldset class="form-actions">
+      <button type="submit" class="btn btn-danger">{% trans "Confirm" %}</button> <a href="{% url 'sentry-manage-team' team.slug %}" class="btn">{% trans "Cancel" %}</a>
+    </fieldset>
+  </form>
 {% endblock %}
diff --git a/src/sentry/web/frontend/remove_project.py b/src/sentry/web/frontend/remove_project.py
index 49d4fe7987..33dff00c69 100644
--- a/src/sentry/web/frontend/remove_project.py
+++ b/src/sentry/web/frontend/remove_project.py
@@ -53,7 +53,7 @@ class RemoveProjectView(ProjectView):
                 request, messages.SUCCESS,
                 _('Deletion has been queued and will happen automatically.'))
 
-            return HttpResponseRedirect(reverse('sentry-manage-team-projects', args=[team.slug]))
+            return HttpResponseRedirect(reverse('sentry-organization-home', args=[team.organization.id]))
 
         context = {
             'form': form,
diff --git a/src/sentry/web/frontend/team_projects.py b/src/sentry/web/frontend/team_projects.py
deleted file mode 100644
index 3954686b13..0000000000
--- a/src/sentry/web/frontend/team_projects.py
+++ /dev/null
@@ -1,20 +0,0 @@
-from __future__ import absolute_import
-
-from sentry.models import OrganizationMemberType
-from sentry.web.frontend.base import TeamView
-
-
-class TeamProjectsView(TeamView):
-    required_access = OrganizationMemberType.MEMBER
-
-    def get(self, request, organization, team):
-        project_list = team.project_set.all()
-        project_list = sorted(project_list, key=lambda o: o.slug)
-        for project in project_list:
-            project.team = team
-
-        context = {
-            'project_list': project_list,
-        }
-
-        return self.respond('sentry/teams/projects/index.html', context)
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 86490d3914..66c5e23dd9 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -47,7 +47,6 @@ from sentry.web.frontend.project_settings import ProjectSettingsView
 from sentry.web.frontend.remove_organization import RemoveOrganizationView
 from sentry.web.frontend.remove_project import RemoveProjectView
 from sentry.web.frontend.remove_team import RemoveTeamView
-from sentry.web.frontend.team_projects import TeamProjectsView
 from sentry.web.frontend.team_settings import TeamSettingsView
 
 
@@ -143,8 +142,6 @@ urlpatterns += patterns('',
         name='sentry-manage-team'),
     url(r'^account/teams/(?P<team_slug>[\w_-]+)/remove/$', RemoveTeamView.as_view(),
         name='sentry-remove-team'),
-    url(r'^account/teams/(?P<team_slug>[\w_-]+)/projects/$', TeamProjectsView.as_view(),
-        name='sentry-manage-team-projects'),
     url(r'^account/teams/(?P<team_slug>[\w_-]+)/projects/new/$', CreateProjectView.as_view(),
         name='sentry-new-project'),
 
diff --git a/tests/sentry/web/frontend/teams/__init__.py b/tests/sentry/web/frontend/teams/__init__.py
deleted file mode 100644
index e69de29bb2..0000000000
diff --git a/tests/sentry/web/frontend/teams/tests.py b/tests/sentry/web/frontend/teams/tests.py
deleted file mode 100644
index 0798a74ab3..0000000000
--- a/tests/sentry/web/frontend/teams/tests.py
+++ /dev/null
@@ -1,45 +0,0 @@
-# -*- coding: utf-8 -*-
-
-from __future__ import absolute_import
-
-from django.core.urlresolvers import reverse
-from exam import fixture
-
-from sentry.constants import MEMBER_OWNER, MEMBER_USER
-from sentry.models import User
-from sentry.testutils import TestCase
-
-
-class BaseTeamTest(TestCase):
-    @fixture
-    def user2(self):
-        user = User.objects.create(username="other", email="other@localhost")
-        self.team.member_set.create(user=user, type=MEMBER_USER)
-        return user
-
-    @fixture
-    def tm(self):
-        return self.team.member_set.get(user=self.user, type=MEMBER_OWNER)
-
-    @fixture
-    def tm2(self):
-        return self.team.member_set.get(user=self.user2)
-
-    def setUp(self):
-        super(BaseTeamTest, self).setUp()
-        self.login_as(self.user)
-
-
-class ManageProjectsTest(BaseTeamTest):
-    @fixture
-    def path(self):
-        return reverse('sentry-manage-team-projects', args=[self.team.slug])
-
-    def test_does_render_with_context(self):
-        # HACK: force project create
-        project = self.project
-        resp = self.client.get(self.path)
-        assert resp.status_code == 200
-        self.assertTemplateUsed(resp, 'sentry/teams/projects/index.html')
-        assert list(resp.context['project_list']) == [project]
-        assert resp.context['team'] == self.team
