commit 4eb4a935797ce58be244135a22235b8482eb3d1f
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Sep 15 21:59:37 2015 -0700

    Handle empty tags

diff --git a/src/sentry/metrics/datadog.py b/src/sentry/metrics/datadog.py
index e4b2890c25..81c5347b5b 100644
--- a/src/sentry/metrics/datadog.py
+++ b/src/sentry/metrics/datadog.py
@@ -37,7 +37,8 @@ class DatadogMetricsBackend(MetricsBackend):
             tags.update(self.tags)
         if instance:
             tags['instance'] = instance
-        tags = ['{}:{}'.format(*i) for i in tags.items()]
+        if tags:
+            tags = ['{}:{}'.format(*i) for i in tags.items()]
         self.stats.increment(self._get_key(key), amount,
                              sample_rate=sample_rate,
                              tags=tags,
@@ -50,7 +51,8 @@ class DatadogMetricsBackend(MetricsBackend):
             tags.update(self.tags)
         if instance:
             tags['instance'] = instance
-        tags = ['{}:{}'.format(*i) for i in tags.items()]
+        if tags:
+            tags = ['{}:{}'.format(*i) for i in tags.items()]
         self.stats.timing(self._get_key(key), value, sample_rate=sample_rate,
                           tags=tags,
                           host=self.host)
diff --git a/tests/sentry/metrics/test_datadog.py b/tests/sentry/metrics/test_datadog.py
index 4f69cec315..510dfcaeea 100644
--- a/tests/sentry/metrics/test_datadog.py
+++ b/tests/sentry/metrics/test_datadog.py
@@ -18,7 +18,7 @@ class DatadogMetricsBackendTest(TestCase):
         mock_incr.assert_called_once_with(
             'sentrytest.foo', 1,
             sample_rate=1,
-            tags={'instance': 'bar'},
+            tags=['instance:bar'],
             host=socket.gethostname(),
         )
 
@@ -28,6 +28,6 @@ class DatadogMetricsBackendTest(TestCase):
         mock_timing.assert_called_once_with(
             'sentrytest.foo', 30,
             sample_rate=1,
-            tags={'instance': 'bar'},
+            tags=['instance:bar'],
             host=socket.gethostname(),
         )
