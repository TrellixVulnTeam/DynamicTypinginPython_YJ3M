commit 96135926093c31d7c195bcfbf6a2cf81840267c2
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Fri Sep 28 14:37:32 2018 -0700

    ref(ui): Emotional DiffModal (#9926)
    
    Converts DiffModal to emotion

diff --git a/src/sentry/static/sentry/app/actionCreators/modal.jsx b/src/sentry/static/sentry/app/actionCreators/modal.jsx
index a7e7aa703a..0ce05536fa 100644
--- a/src/sentry/static/sentry/app/actionCreators/modal.jsx
+++ b/src/sentry/static/sentry/app/actionCreators/modal.jsx
@@ -1,4 +1,5 @@
 import React from 'react';
+import {css} from 'react-emotion';
 
 import ModalActions from 'app/actions/modalActions';
 
@@ -30,11 +31,33 @@ export function openSudo({onClose, ...args} = {}) {
 export function openDiffModal(options) {
   import(/* webpackChunkName: "DiffModal" */ '../components/modals/diffModal')
     .then(mod => mod.default)
-    .then(Modal =>
+    .then(Modal => {
+      // This is the only way to style the different Modal children
+      const diffModalCss = css`
+        .modal-dialog {
+          display: flex;
+          margin: 0;
+          left: 10px;
+          right: 10px;
+          top: 10px;
+          bottom: 10px;
+          width: auto;
+        }
+        .modal-content {
+          display: flex;
+          flex: 1;
+        }
+        .modal-body {
+          display: flex;
+          overflow: hidden;
+          flex: 1;
+        }
+      `;
+
       openModal(deps => <Modal {...deps} {...options} />, {
-        modalClassName: 'diff-modal',
-      })
-    );
+        modalClassName: diffModalCss,
+      });
+    });
 }
 
 /**
diff --git a/src/sentry/static/sentry/app/components/issueDiff.jsx b/src/sentry/static/sentry/app/components/issueDiff.jsx
index d8e51a8672..1cbc4af065 100644
--- a/src/sentry/static/sentry/app/components/issueDiff.jsx
+++ b/src/sentry/static/sentry/app/components/issueDiff.jsx
@@ -7,25 +7,6 @@ import ApiMixin from 'app/mixins/apiMixin';
 import LoadingIndicator from 'app/components/loadingIndicator';
 import rawStacktraceContent from 'app/components/events/interfaces/rawStacktraceContent';
 
-const getLoadingStyle = p =>
-  (p.loading &&
-    css`
-      background-color: white;
-      justify-content: center;
-    `) ||
-  '';
-
-const IssueDiffWrapper = styled.div`
-  background-color: #f7f8f9;
-  overflow: auto;
-  padding: 10px;
-  flex: 1;
-  display: flex;
-  flex-direction: column;
-
-  ${getLoadingStyle};
-`;
-
 class IssueDiff extends React.Component {
   static propTypes = {
     api: PropTypes.object,
@@ -116,11 +97,12 @@ class IssueDiff extends React.Component {
   }
 
   render() {
+    let {className} = this.props;
     let DiffComponent = this.state.SplitDiffAsync;
     let diffReady = !this.state.loading && !!DiffComponent;
 
     return (
-      <IssueDiffWrapper loading={this.state.loading}>
+      <StyledIssueDiff className={className} loading={this.state.loading}>
         {this.state.loading && <LoadingIndicator />}
         {diffReady &&
           this.state.baseEvent.map((value, i) => (
@@ -131,7 +113,7 @@ class IssueDiff extends React.Component {
               type="words"
             />
           ))}
-      </IssueDiffWrapper>
+      </StyledIssueDiff>
     );
   }
 }
@@ -146,3 +128,22 @@ const IssueDiffContainer = createReactClass({
 
 export default IssueDiffContainer;
 export {IssueDiff};
+
+const getLoadingStyle = p =>
+  (p.loading &&
+    css`
+      background-color: white;
+      justify-content: center;
+    `) ||
+  '';
+
+const StyledIssueDiff = styled('div')`
+  background-color: #f7f8f9;
+  overflow: auto;
+  padding: 10px;
+  flex: 1;
+  display: flex;
+  flex-direction: column;
+
+  ${getLoadingStyle};
+`;
diff --git a/src/sentry/static/sentry/app/components/modals/diffModal.jsx b/src/sentry/static/sentry/app/components/modals/diffModal.jsx
index 803418cf96..3ac72f13b3 100644
--- a/src/sentry/static/sentry/app/components/modals/diffModal.jsx
+++ b/src/sentry/static/sentry/app/components/modals/diffModal.jsx
@@ -1,9 +1,7 @@
 import PropTypes from 'prop-types';
 import React from 'react';
-import classNames from 'classnames';
 
 import IssueDiff from 'app/components/issueDiff';
-import 'app/../less/components/modals/diffModal.less';
 
 class DiffModal extends React.Component {
   static propTypes = {
@@ -12,11 +10,10 @@ class DiffModal extends React.Component {
 
   render() {
     let {className, Body} = this.props;
-    let cx = classNames('diff-modal', className);
 
     return (
       <Body>
-        <IssueDiff className={cx} {...this.props} />
+        <IssueDiff className={className} {...this.props} />
       </Body>
     );
   }
diff --git a/src/sentry/static/sentry/less/components/modals/diffModal.less b/src/sentry/static/sentry/less/components/modals/diffModal.less
deleted file mode 100644
index c56e752c34..0000000000
--- a/src/sentry/static/sentry/less/components/modals/diffModal.less
+++ /dev/null
@@ -1,20 +0,0 @@
-.diff-modal {
-  .modal-dialog {
-    display: flex;
-    margin: 0;
-    left: 10px;
-    right: 10px;
-    top: 10px;
-    bottom: 10px;
-    width: auto;
-  }
-  .modal-content {
-    display: flex;
-    flex: 1;
-  }
-  .modal-body {
-    display: flex;
-    overflow: hidden;
-    flex: 1;
-  }
-}
diff --git a/tests/js/spec/components/__snapshots__/issueDiff.spec.jsx.snap b/tests/js/spec/components/__snapshots__/issueDiff.spec.jsx.snap
index 0e7ee8f04b..818a776198 100644
--- a/tests/js/spec/components/__snapshots__/issueDiff.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/issueDiff.spec.jsx.snap
@@ -8,11 +8,11 @@ exports[`IssueDiff can diff message 1`] = `
   targetEventId="latest"
   targetIssueId="target"
 >
-  <IssueDiffWrapper
+  <StyledIssueDiff
     loading={false}
   >
     <div
-      className="css-no1ym5-IssueDiffWrapper e1mqtsvu0"
+      className="css-1ap3513-StyledIssueDiff e1mqtsvu0"
     >
       <SplitDiff
         base="Foo World"
@@ -79,7 +79,7 @@ exports[`IssueDiff can diff message 1`] = `
         </table>
       </SplitDiff>
     </div>
-  </IssueDiffWrapper>
+  </StyledIssueDiff>
 </IssueDiff>
 `;
 
@@ -91,11 +91,11 @@ exports[`IssueDiff can dynamically import SplitDiff 1`] = `
   targetEventId="latest"
   targetIssueId="target"
 >
-  <IssueDiffWrapper
+  <StyledIssueDiff
     loading={false}
   >
     <div
-      className="css-no1ym5-IssueDiffWrapper e1mqtsvu0"
+      className="css-1ap3513-StyledIssueDiff e1mqtsvu0"
     >
       <SplitDiff
         base="SyntaxError: Unexpected token else
@@ -251,14 +251,14 @@ exports[`IssueDiff can dynamically import SplitDiff 1`] = `
         </table>
       </SplitDiff>
     </div>
-  </IssueDiffWrapper>
+  </StyledIssueDiff>
 </IssueDiff>
 `;
 
 exports[`IssueDiff is loading when initially rendering 1`] = `
-<IssueDiffWrapper
+<StyledIssueDiff
   loading={true}
 >
   <LoadingIndicator />
-</IssueDiffWrapper>
+</StyledIssueDiff>
 `;
diff --git a/tests/js/spec/components/modals/__snapshots__/diffModal.spec.jsx.snap b/tests/js/spec/components/modals/__snapshots__/diffModal.spec.jsx.snap
index 2e1b07bc10..710cd3c317 100644
--- a/tests/js/spec/components/modals/__snapshots__/diffModal.spec.jsx.snap
+++ b/tests/js/spec/components/modals/__snapshots__/diffModal.spec.jsx.snap
@@ -4,7 +4,6 @@ exports[`DiffModal renders 1`] = `
 <Body>
   <IssueDiffContainer
     Body={[Function]}
-    className="diff-modal"
   />
 </Body>
 `;
