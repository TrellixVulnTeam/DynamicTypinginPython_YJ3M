commit 041dbfc219223b869c260d258ec192c001686953
Author: Mark Story <mark@mark-story.com>
Date:   Fri Nov 9 11:11:34 2018 -0500

    fix(ui) Fix overflowing hovercards for integrations (#10501)
    
    Fix overflowing text on long unbreakable integration URLs.
    
    Fixes #10483

diff --git a/src/sentry/static/sentry/app/views/organizationIntegrations/integrationItem.jsx b/src/sentry/static/sentry/app/views/organizationIntegrations/integrationItem.jsx
index a147ff036c..ea6d906ec4 100644
--- a/src/sentry/static/sentry/app/views/organizationIntegrations/integrationItem.jsx
+++ b/src/sentry/static/sentry/app/views/organizationIntegrations/integrationItem.jsx
@@ -42,23 +42,27 @@ export default class IntegrationItem extends React.Component {
   }
 }
 
-const Labels = p => {
-  const {compact, ...props} = p;
-
-  return compact ? (
-    <Flex align="center" direction="row" pl={1} {...props} />
-  ) : (
-    <Flex direction="column" pl={1} {...props} />
-  );
-};
+const Labels = styled('div')`
+  box-sizing: border-box;
+  display: flex;
+  ${p => (p.compact ? 'align-items: center;' : '')};
+  flex-direction: ${p => (p.compact ? 'row' : 'column')};
+  padding-left: ${space(1)};
+  min-width: 0;
+`;
 
 const IntegrationName = styled('div')`
   font-size: 1.6rem;
 `;
 
+// Not using the overflowEllipsis style import here
+// as it sets width 100% which causes layout issues in the
+// integration list.
 const DomainName = styled('div')`
   color: ${p => (p.compact ? p.theme.gray1 : p.theme.gray3)};
   margin-left: ${p => (p.compact ? space(1) : 'inherit')};
   margin-top: ${p => (!p.compact ? space(0.25) : 'inherit')};
   font-size: 1.4rem;
+  overflow: hidden;
+  text-overflow: ellipsis;
 `;
diff --git a/tests/js/spec/views/organizationIntegrations/integrationRepos.spec.jsx b/tests/js/spec/views/organizationIntegrations/integrationRepos.spec.jsx
index f572c16f19..0d06d25c07 100644
--- a/tests/js/spec/views/organizationIntegrations/integrationRepos.spec.jsx
+++ b/tests/js/spec/views/organizationIntegrations/integrationRepos.spec.jsx
@@ -38,8 +38,10 @@ describe('IntegrationRepos', function() {
         routerContext
       );
       wrapper.find('DropdownButton').simulate('click');
+
       wrapper.find('StyledListElement').simulate('click');
       await wrapper.update();
+      await wrapper.update();
 
       expect(addRepo).toHaveBeenCalledWith(
         `/organizations/${org.slug}/repos/`,
@@ -51,8 +53,12 @@ describe('IntegrationRepos', function() {
           },
         })
       );
-      let repoRow = wrapper.find('RepositoryRow').first();
-      expect(repoRow.find('strong').text()).toEqual('repo-name');
+      let name = wrapper
+        .find('RepositoryRow')
+        .find('strong')
+        .first();
+      expect(name).toHaveLength(1);
+      expect(name.text()).toEqual('repo-name');
     });
 
     describe('save failure', async function() {
diff --git a/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/index.spec.jsx.snap b/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/index.spec.jsx.snap
index ccad08fedd..92e5d03cd1 100644
--- a/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/index.spec.jsx.snap
@@ -1346,40 +1346,26 @@ exports[`OrganizationIntegrations render() with installed integrations Displays
                                               <Labels
                                                 compact={true}
                                               >
-                                                <Flex
-                                                  align="center"
-                                                  direction="row"
-                                                  pl={1}
+                                                <div
+                                                  className="css-j2micm-Labels ettpo130"
                                                 >
-                                                  <Base
-                                                    align="center"
-                                                    className="css-x3jwi"
-                                                    direction="row"
-                                                    pl={1}
+                                                  <IntegrationName>
+                                                    <div
+                                                      className="css-ksmg3c-IntegrationName ettpo131"
+                                                    >
+                                                      Test Integration
+                                                    </div>
+                                                  </IntegrationName>
+                                                  <DomainName
+                                                    compact={true}
                                                   >
                                                     <div
-                                                      className="css-x3jwi"
-                                                      is={null}
+                                                      className="css-zo2wxu-DomainName ettpo132"
                                                     >
-                                                      <IntegrationName>
-                                                        <div
-                                                          className="css-ksmg3c-IntegrationName ettpo130"
-                                                        >
-                                                          Test Integration
-                                                        </div>
-                                                      </IntegrationName>
-                                                      <DomainName
-                                                        compact={true}
-                                                      >
-                                                        <div
-                                                          className="css-1wocc7i-DomainName ettpo131"
-                                                        >
-                                                          github.com/test-integration
-                                                        </div>
-                                                      </DomainName>
+                                                      github.com/test-integration
                                                     </div>
-                                                  </Base>
-                                                </Flex>
+                                                  </DomainName>
+                                                </div>
                                               </Labels>
                                             </div>
                                           </Base>
@@ -2672,40 +2658,26 @@ exports[`OrganizationIntegrations render() with installed integrations Displays
                                               <Labels
                                                 compact={true}
                                               >
-                                                <Flex
-                                                  align="center"
-                                                  direction="row"
-                                                  pl={1}
+                                                <div
+                                                  className="css-j2micm-Labels ettpo130"
                                                 >
-                                                  <Base
-                                                    align="center"
-                                                    className="css-x3jwi"
-                                                    direction="row"
-                                                    pl={1}
+                                                  <IntegrationName>
+                                                    <div
+                                                      className="css-ksmg3c-IntegrationName ettpo131"
+                                                    >
+                                                      Jira Test Integration
+                                                    </div>
+                                                  </IntegrationName>
+                                                  <DomainName
+                                                    compact={true}
                                                   >
                                                     <div
-                                                      className="css-x3jwi"
-                                                      is={null}
+                                                      className="css-zo2wxu-DomainName ettpo132"
                                                     >
-                                                      <IntegrationName>
-                                                        <div
-                                                          className="css-ksmg3c-IntegrationName ettpo130"
-                                                        >
-                                                          Jira Test Integration
-                                                        </div>
-                                                      </IntegrationName>
-                                                      <DomainName
-                                                        compact={true}
-                                                      >
-                                                        <div
-                                                          className="css-1wocc7i-DomainName ettpo131"
-                                                        >
-                                                          jira.com/test-integration
-                                                        </div>
-                                                      </DomainName>
+                                                      jira.com/test-integration
                                                     </div>
-                                                  </Base>
-                                                </Flex>
+                                                  </DomainName>
+                                                </div>
                                               </Labels>
                                             </div>
                                           </Base>
