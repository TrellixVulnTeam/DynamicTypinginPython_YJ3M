commit 46337d7f2765950002871713c847f233a3a16526
Author: Daniel Griesser <daniel.griesser.86@gmail.com>
Date:   Wed Apr 5 12:35:20 2017 +0200

    Add number confirm modal dialog with code input

diff --git a/package.json b/package.json
index 8443bb0e2f..7df7858841 100644
--- a/package.json
+++ b/package.json
@@ -45,6 +45,7 @@
     "react-addons-test-utils": "15.3.2",
     "react-addons-update": "15.3.2",
     "react-bootstrap": "^0.29.5",
+    "react-code-input": "1.0.8",
     "react-document-title": "1.0.4",
     "react-dom": "15.3.2",
     "react-icon-base": "^2.0.4",
diff --git a/src/sentry/static/sentry/app/components/confirms/numberConfirm.jsx b/src/sentry/static/sentry/app/components/confirms/numberConfirm.jsx
new file mode 100644
index 0000000000..ee3253f6d7
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/confirms/numberConfirm.jsx
@@ -0,0 +1,61 @@
+import React from 'react';
+import ReactCodeInput from 'react-code-input';
+import Modal from 'react-bootstrap/lib/Modal';
+import {t} from '../../locale';
+
+const NumberConfirm = React.createClass({
+  propTypes: {
+    digits: React.PropTypes.number.isRequired,
+    show: React.PropTypes.bool,
+    onFinished: React.PropTypes.func,
+  },
+
+  getInitialState() {
+    return {
+      showModal: this.props.show || false,
+    };
+  },
+
+  componentWillReceiveProps(nextProps) {
+    if (nextProps.show != this.props.show) {
+      this.setState({
+        showModal: nextProps.show,
+      });
+    }
+  },
+
+  closeModal() {
+    this.setState({
+      showModal: false,
+    });
+  },
+
+  onChange(number) {
+    if (number === undefined && !Number.isInteger(number)) {
+        return;
+    }
+    if (number.length === this.props.digits) {
+        if (this.props.onFinished) {
+            this.props.onFinished(number);
+        }
+        this.closeModal();
+    }
+  },
+
+  render() {
+    return (
+      <Modal show={this.state.showModal} onHide={this.closeModal}
+        animation={true} backdrop="static" enforceFocus={true}>
+          <Modal.Header closeButton>
+            <Modal.Title>{t('Please enter your code:')}</Modal.Title>
+          </Modal.Header>
+          <Modal.Body>
+            <ReactCodeInput type="number" digits={this.props.digits}
+              onChange={this.onChange} />
+          </Modal.Body>
+      </Modal>
+    );
+  }
+});
+
+export default NumberConfirm;
diff --git a/src/sentry/static/sentry/app/index.js b/src/sentry/static/sentry/app/index.js
index 023e69bba5..564c726c7f 100644
--- a/src/sentry/static/sentry/app/index.js
+++ b/src/sentry/static/sentry/app/index.js
@@ -110,6 +110,7 @@ export default {
     U2fSign: require('./components/u2fsign').default,
     Badge: require('./components/badge').default,
     Switch: require('./components/switch').default,
+    NumberConfirm: require('./components/confirms/numberConfirm').default,
     utils: {
       errorHandler: require('./utils/errorHandler').default,
       logging: require('./utils/logging'),
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index 48b6caebd3..f454016e79 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -3659,6 +3659,32 @@ div.qrcode {
   }
 }
 
+/**
+ * react-code-input
+ * ============================================================================
+ */
+.react-code-input {
+  text-align: center;
+  display: block !important;
+
+  input::-webkit-outer-spin-button,
+  input::-webkit-inner-spin-button {
+      -webkit-appearance: none;
+  }
+  input[type='number'] {
+    -moz-appearance:textfield;
+  }
+  input {
+      text-align: center !important;
+      padding: 0 !important;
+      color: transparent !important;
+      text-shadow: 0 0 0 black !important;
+      &::selection { background: transparent; }
+      &::-moz-selection { background: transparent; }
+  }
+
+}
+
 /**
 * Responsive small screens
 * ============================================================================
diff --git a/yarn.lock b/yarn.lock
index dd8a255cb0..e9fb4514f3 100644
--- a/yarn.lock
+++ b/yarn.lock
@@ -4316,6 +4316,12 @@ react-bootstrap@^0.29.5:
     uncontrollable "^3.2.3"
     warning "^2.1.0"
 
+react-code-input@1.0.8:
+  version "1.0.8"
+  resolved "https://registry.yarnpkg.com/react-code-input/-/react-code-input-1.0.8.tgz#2d83f00cac29f3d66a9391407b80438188cbe91b"
+  dependencies:
+    react "^15.3.2"
+
 react-document-title@1.0.4:
   version "1.0.4"
   resolved "https://registry.yarnpkg.com/react-document-title/-/react-document-title-1.0.4.tgz#57289d6856ffeff1fb7d055cb3558ea494cf8f87"
@@ -4385,7 +4391,7 @@ react-sticky@5.0.4:
   version "5.0.4"
   resolved "https://registry.yarnpkg.com/react-sticky/-/react-sticky-5.0.4.tgz#4f6ea7790c943d6085dcb7e659e0eb2013dd52c3"
 
-react@15.3.2:
+react@15.3.2, react@^15.3.2:
   version "15.3.2"
   resolved "https://registry.yarnpkg.com/react/-/react-15.3.2.tgz#a7bccd2fee8af126b0317e222c28d1d54528d09e"
   dependencies:
