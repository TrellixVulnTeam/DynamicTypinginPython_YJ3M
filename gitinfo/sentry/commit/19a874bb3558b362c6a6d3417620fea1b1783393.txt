commit 19a874bb3558b362c6a6d3417620fea1b1783393
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Sep 21 10:37:12 2015 -0700

    Missing timing information in error

diff --git a/src/sentry/utils/cache.py b/src/sentry/utils/cache.py
index b1c844cb70..c3f8a49996 100644
--- a/src/sentry/utils/cache.py
+++ b/src/sentry/utils/cache.py
@@ -10,9 +10,9 @@ from __future__ import absolute_import, print_function
 import functools
 import logging
 import random
-import time
 
 from django.core.cache import cache
+from time import sleep, time
 
 default_cache = cache
 
@@ -43,6 +43,7 @@ class Lock(object):
         lock_key = self.lock_key
         cache = self.cache
 
+        start = time()
         delay = 0.01 + random.random() / 10
         attempt = 0
         max_attempts = self.timeout / delay
@@ -54,11 +55,13 @@ class Lock(object):
                 if self.nowait:
                     break
                 self.was_locked = True
-                time.sleep(delay)
+                sleep(delay)
                 attempt += 1
+        stop = time()
 
         if not got_lock:
-            raise UnableToGetLock('Unable to fetch lock after on %s' % (lock_key,))
+            raise UnableToGetLock('Unable to fetch lock after %.3fs on %s' % (
+                stop - start, lock_key,))
 
         return self
 
