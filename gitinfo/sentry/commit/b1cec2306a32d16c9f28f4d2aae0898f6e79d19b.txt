commit b1cec2306a32d16c9f28f4d2aae0898f6e79d19b
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jun 10 22:19:04 2014 -0700

    Add missing behavior to transfer/delete team

diff --git a/src/sentry/static/sentry/app/controllers/deleteTeam.js b/src/sentry/static/sentry/app/controllers/deleteTeam.js
new file mode 100644
index 0000000000..4c27c41624
--- /dev/null
+++ b/src/sentry/static/sentry/app/controllers/deleteTeam.js
@@ -0,0 +1,30 @@
+define([
+  'app'
+], function(app) {
+  'use strict';
+
+  app.classy.controller({
+    name: 'DeleteTeamCtrl',
+
+    inject: ['$scope', '$http', '$location', 'selectedTeam'],
+
+    init: function() {
+      var $scope = this.$scope;
+
+      $scope.newOwner = null;
+
+      this.$http.get('/api/0/teams/' + this.selectedTeam.id + '/projects/').success(function(data){
+        $scope.projectList = data;
+      });
+    },
+
+    saveForm: function() {
+      this.$http({
+        method: 'DELETE',
+        url: '/api/0/teams/' + this.selectedTeam.id + '/'
+      }).success(function(data){
+        this.$location.path('/account/teams/');
+      });
+    }
+  });
+});
diff --git a/src/sentry/static/sentry/app/controllers/manageTeamOwnership.js b/src/sentry/static/sentry/app/controllers/manageTeamOwnership.js
index 29a3965d87..442a187d92 100644
--- a/src/sentry/static/sentry/app/controllers/manageTeamOwnership.js
+++ b/src/sentry/static/sentry/app/controllers/manageTeamOwnership.js
@@ -6,7 +6,7 @@ define([
   app.classy.controller({
     name: 'ManageTeamOwnershipCtrl',
 
-    inject: ['$scope', '$http', '$location', 'config'],
+    inject: ['$scope', '$http', '$location', 'selectedTeam'],
 
     init: function() {
       this.$scope.newOwner = null;
@@ -18,10 +18,10 @@ define([
     },
 
     saveForm: function() {
-      this.$http.put('/api/0/teams/' + this.config.teamId + '/', {
+      this.$http.put('/api/0/teams/' + this.selectedTeam.id + '/', {
         'owner': this.$scope.newOwner
       }).success(function(data){
-        this.$location.path('/account/teams');
+        this.$location.path('/account/teams/');
       });
     }
   });
diff --git a/src/sentry/static/sentry/app/templates_old/delete-team.html b/src/sentry/static/sentry/app/templates_old/delete-team.html
deleted file mode 100644
index bfa9e89fae..0000000000
--- a/src/sentry/static/sentry/app/templates_old/delete-team.html
+++ /dev/null
@@ -1,17 +0,0 @@
-<div class="section-header">
-  <h4>Delete Team</h4>
-</div>
-
-<form role="form" name="form">
-    <p><strong>Deleting this team is permanent</strong> and once the process begins it cannot be stopped.</p>
-    <section ng-if="projectList">
-      <p>The following projects will also be deleted as part of this process:</p>
-      <ul>
-        <li ng-repeat="project in projectList">{{project.name}}</li>
-      </ul>
-    </section>
-    <p><label><input ng-model="confirm" type="checkbox" value="1" required> I understand and want to delete this team.</label></p>
-    <button class="btn btn-danger"
-            ng-click="saveForm()"
-            ng-disabled="form.$invalid">Delete</button>
-</form>
diff --git a/src/sentry/static/sentry/app/templates_old/manage-team-ownership.html b/src/sentry/static/sentry/app/templates_old/manage-team-ownership.html
deleted file mode 100644
index d8d0424eff..0000000000
--- a/src/sentry/static/sentry/app/templates_old/manage-team-ownership.html
+++ /dev/null
@@ -1,25 +0,0 @@
-<div class="section-header">
-  <h4>Team Ownership</h4>
-</div>
-
-<form role="form" name="form">
-    <p>Transferring ownership will retain your membership as an admin and takes affect immediately.</p>
-  <div class="form-group" ng-class="form.newOwner.$invalid ? 'error' : ''">
-    <label for="newOwner">User:</label>
-    <input id="newOwner"
-           name="user"
-           ng-model="newOwner"
-           class="form-control"
-           type="email"
-           placeholder="email address"
-           style="width: 240px"
-           required>
-    <div ng-show="form.newOwner.$dirty && form.newOwner.$invalid">Invalid:
-      <span ng-show="form.newOwner.$error.required">Enter a valid user.</span>
-    </div>
-  </div>
-  <p><label><input ng-model="confirm" type="checkbox" value="1" required> I understand and want to transfer this team.</label></p>
-  <button class="btn btn-primary"
-          ng-click="saveForm()"
-          ng-disabled="form.$invalid || isUnchanged(newOwner)">Save</button>
-</form>
diff --git a/src/sentry/static/sentry/main.js b/src/sentry/static/sentry/main.js
index 533451ee2d..bad6dac8e4 100644
--- a/src/sentry/static/sentry/main.js
+++ b/src/sentry/static/sentry/main.js
@@ -4,6 +4,7 @@ define([
   'moment',
 
   'app/controllers/default',
+  'app/controllers/deleteTeam',
   'app/controllers/manageTeamOwnership',
   'app/controllers/projectStream',
   'app/controllers/teamDashboard',
diff --git a/src/sentry/templates/sentry/teams/manage-ownership.html b/src/sentry/templates/sentry/teams/manage-ownership.html
index 679184d77c..d67071abaf 100644
--- a/src/sentry/templates/sentry/teams/manage-ownership.html
+++ b/src/sentry/templates/sentry/teams/manage-ownership.html
@@ -1,31 +1,37 @@
 {% extends "sentry/teams/manage.html" %}
 
+{% load i18n %}
+
 {% block controller %}ManageTeamOwnershipCtrl{% endblock %}
 
 {% block inner %}
-  <div class="section-header">
-    <h4>Team Ownership</h4>
-  </div>
+  <div class="box">
+    <div class="box-header">
+      <h3>{% trans "Transfer Ownership" %}</h3>
+    </div>
 
-  <form role="form" name="form">
-      <p>Transferring ownership will retain your membership as an admin and takes affect immediately.</p>
-    <div class="form-group" ng-class="form.newOwner.$invalid ? 'error' : ''">
-      <label for="newOwner">User:</label>
-      <input id="newOwner"
-             name="user"
-             ng-model="newOwner"
-             class="form-control"
-             type="email"
-             placeholder="email address"
-             style="width: 240px"
-             required>
-      <div ng-show="form.newOwner.$dirty && form.newOwner.$invalid">Invalid:
-        <span ng-show="form.newOwner.$error.required">Enter a valid user.</span>
-      </div>
+    <div class="box-content with-padding">
+      <form role="form" name="form">
+          <p>Transferring ownership will retain your membership as an admin and takes affect immediately.</p>
+        <div class="form-group" ng-class="form.newOwner.$invalid ? 'error' : ''">
+          <label for="newOwner">User:</label>
+          <input id="newOwner"
+                 name="user"
+                 ng-model="newOwner"
+                 class="form-control"
+                 type="email"
+                 placeholder="email address"
+                 style="width: 240px"
+                 required>
+          <div ng-show="form.newOwner.$dirty && form.newOwner.$invalid">Invalid:
+            <span ng-show="form.newOwner.$error.required">Enter a valid user.</span>
+          </div>
+        </div>
+        <p><label><input ng-model="confirm" type="checkbox" value="1" required> I understand and want to transfer this team.</label></p>
+        <button class="btn btn-primary"
+                ng-click="saveForm()"
+                ng-disabled="form.$invalid || isUnchanged(newOwner)">Save</button>
+      </form>
     </div>
-    <p><label><input ng-model="confirm" type="checkbox" value="1" required> I understand and want to transfer this team.</label></p>
-    <button class="btn btn-primary"
-            ng-click="saveForm()"
-            ng-disabled="form.$invalid || isUnchanged(newOwner)">Save</button>
-  </form>
+  </div>
 {% endblock %}
diff --git a/src/sentry/templates/sentry/teams/remove.html b/src/sentry/templates/sentry/teams/remove.html
index 1b13caa500..2870bbdeae 100644
--- a/src/sentry/templates/sentry/teams/remove.html
+++ b/src/sentry/templates/sentry/teams/remove.html
@@ -1,22 +1,30 @@
 {% extends "sentry/teams/manage.html" %}
 
-{% load crispy_forms_tags %}
 {% load i18n %}
 
 {% block title %}{% trans "Remove Team" %} | {{ block.super }}{% endblock %}
 
+{% block controller %}DeleteTeamCtrl{% endblock %}
+
 {% block main %}
-    <section class="body">
-        <form action="." method="post">
-            <p>{% trans "Are you sure you wish to remove this team? This change is permanent!" %}</p>
-            {% csrf_token %}
-            {{ form|as_crispy_errors }}
-            {% for field in form %}
-                {{ field|as_crispy_field }}
-            {% endfor %}
-            <fieldset class="form-actions">
-                <button type="submit" class="btn btn-danger">{% trans "Confirm" %}</button> <a href="{% url 'sentry-manage-team' team.slug %}" class="btn">{% trans "Cancel" %}</a>
-            </fieldset>
+<div class="box">
+    <div class="box-header">
+        <h3>{% trans "Delete Team" %}</h3>
+    </div>
+    <div class="box-content with-padding">
+        <form role="form" name="form">
+            <p>Deleting this team is permanent and once the process begins it cannot be stopped.</p>
+            <section ng-if="projectList">
+              <p>The following projects will also be deleted as part of this process:</p>
+              <ul>
+                <li ng-repeat="project in projectList"><% project.name %></li>
+              </ul>
+            </section>
+            <p><label><input ng-model="confirm" type="checkbox" value="1" required> I understand and want to delete this team.</label></p>
+            <button class="btn btn-danger"
+                    ng-click="saveForm()"
+                    ng-disabled="form.$invalid">Delete</button>
         </form>
-    </section>
+    </div>
+</div>
 {% endblock %}
