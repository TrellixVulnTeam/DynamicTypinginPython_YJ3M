commit 931ef590a28be644af23db9a274eb0b6c683c6d0
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Mar 25 15:59:18 2011 -0700

    Refactor tests so python setup.py test works correctly

diff --git a/.gitignore b/.gitignore
index 6781066768..79988a91c8 100644
--- a/.gitignore
+++ b/.gitignore
@@ -8,4 +8,5 @@ pip-log.txt
 /example_project/local_settings.py
 /docs/html
 /docs/doctrees
-/sentry_index
\ No newline at end of file
+sentry/sentry_index/
+*.egg
\ No newline at end of file
diff --git a/runtests.py b/sentry/runtests.py
similarity index 100%
rename from runtests.py
rename to sentry/runtests.py
diff --git a/sentry/tests/__init__.py b/sentry/tests/__init__.py
index 1d2c605bab..37977bdb8b 100644
--- a/sentry/tests/__init__.py
+++ b/sentry/tests/__init__.py
@@ -1,2 +1,2 @@
-from tests import *
-from models import *
\ No newline at end of file
+from sentry.tests.tests import *
+from sentry.tests.models import *
\ No newline at end of file
diff --git a/setup.py b/setup.py
index 1cf8d0fb62..0f18146958 100644
--- a/setup.py
+++ b/setup.py
@@ -2,21 +2,17 @@
 
 try:
     from setuptools import setup, find_packages
-    from setuptools.command.test import test
 except ImportError:
     from ez_setup import use_setuptools
     use_setuptools()
     from setuptools import setup, find_packages
-    from setuptools.command.test import test
-
-
-class mytest(test):
-    def run(self, *args, **kwargs):
-        from runtests import runtests
-        runtests()
-        # Upgrade().run(dist=True)
-        # test.run(self, *args, **kwargs)
 
+tests_require = [
+    'django',
+    'django-celery',
+    'south',
+    # also requires the disqus fork of haystack
+]
 
 setup(
     name='django-sentry',
@@ -32,14 +28,10 @@ setup(
         'django-indexer==0.2.1',
         'uuid',
     ],
-    tests_require=[
-        'django',
-        'django-celery',
-        # also requires the disqus fork of haystack
-    ],
-    test_suite = 'sentry.tests',
+    tests_require=tests_require,
+    extras_require={'test': tests_require},
+    test_suite='sentry.runtests.runtests',
     include_package_data=True,
-    cmdclass={"test": mytest},
     classifiers=[
         'Framework :: Django',
         'Intended Audience :: Developers',
