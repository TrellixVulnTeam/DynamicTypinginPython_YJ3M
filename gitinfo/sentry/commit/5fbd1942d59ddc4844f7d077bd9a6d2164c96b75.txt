commit 5fbd1942d59ddc4844f7d077bd9a6d2164c96b75
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Aug 16 16:59:43 2011 -0700

    Safely handle unpickling objects that may not have been stored in a correct format

diff --git a/CHANGES b/CHANGES
index 07663c318f..470470f139 100644
--- a/CHANGES
+++ b/CHANGES
@@ -1,3 +1,8 @@
+1.8.9
+
+* Safely handle unpickling objects that may not have been stored in a
+  valid format.
+
 1.8.8
 
 * Changed ``sentry cleanup`` to use a range query.
diff --git a/sentry/models.py b/sentry/models.py
index 13bab9ad80..b3a38ca8f1 100644
--- a/sentry/models.py
+++ b/sentry/models.py
@@ -31,6 +31,8 @@ STATUS_LEVELS = (
     (1, _('resolved')),
 )
 
+logger = logging.getLogger('sentry.errors')
+
 class GzippedDictField(models.TextField):
     """
     Slightly different from a JSONField in the sense that the default
@@ -40,7 +42,11 @@ class GzippedDictField(models.TextField):
  
     def to_python(self, value):
         if isinstance(value, basestring) and value:
-            value = pickle.loads(base64.b64decode(value).decode('zlib'))
+            try:
+                value = pickle.loads(base64.b64decode(value).decode('zlib'))
+            except Exception, e:
+                logger.exception(e)
+                return {}
         elif not value:
             return {}
         return value
diff --git a/setup.py b/setup.py
index d0a7c9b78c..6ef30991d2 100755
--- a/setup.py
+++ b/setup.py
@@ -41,7 +41,7 @@ if sys.version_info[:2] < (2, 5):
 
 setup(
     name='django-sentry',
-    version='1.8.8',
+    version='1.8.9',
     author='David Cramer',
     author_email='dcramer@gmail.com',
     url='http://github.com/dcramer/django-sentry',
