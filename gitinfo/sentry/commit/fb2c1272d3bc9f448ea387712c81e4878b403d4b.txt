commit fb2c1272d3bc9f448ea387712c81e4878b403d4b
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Mar 18 01:29:38 2014 -0700

    Require sudo on all pages that change settings

diff --git a/src/sentry/web/frontend/accounts.py b/src/sentry/web/frontend/accounts.py
index 32c341f87f..5455323f8d 100644
--- a/src/sentry/web/frontend/accounts.py
+++ b/src/sentry/web/frontend/accounts.py
@@ -224,6 +224,7 @@ def settings(request):
 @csrf_protect
 @never_cache
 @login_required
+@sudo_required
 @transaction.commit_on_success
 def appearance_settings(request):
     from django.conf import settings
@@ -251,6 +252,7 @@ def appearance_settings(request):
 @csrf_protect
 @never_cache
 @login_required
+@sudo_required
 @transaction.commit_on_success
 def notification_settings(request):
     settings_form = NotificationSettingsForm(request.user, request.POST or None)
diff --git a/src/sentry/web/frontend/teams.py b/src/sentry/web/frontend/teams.py
index e7a09031b7..2d380f0526 100644
--- a/src/sentry/web/frontend/teams.py
+++ b/src/sentry/web/frontend/teams.py
@@ -20,6 +20,7 @@ from sentry.permissions import (
     Permissions)
 from sentry.plugins import plugins
 from sentry.utils.samples import create_sample_event
+from sentry.utils.sudo import sudo_required
 from sentry.web.decorators import login_required, has_access
 from sentry.web.forms.teams import (
     NewTeamForm, NewTeamAdminForm,
@@ -41,6 +42,7 @@ def render_with_team_context(team, template, context, request=None):
 
 
 @login_required
+@sudo_required
 @csrf_protect
 def create_new_team(request):
     if not can_create_teams(request.user):
