commit a7e05b79be5b6b33056c254e3772e2c980146f41
Author: ted kaemming <ted@kaemming.com>
Date:   Mon Feb 13 10:16:56 2017 -0800

    Don't require a module or filename to build a frame signature. (#4901)

diff --git a/src/sentry/similarity.py b/src/sentry/similarity.py
index 4412a7d36b..57767708bc 100644
--- a/src/sentry/similarity.py
+++ b/src/sentry/similarity.py
@@ -326,11 +326,16 @@ def serialize_frame(frame):
         FRAME_FUNCTION_KEY: frame['function']
     }
 
-    module = frame.get('module')
-    if module:
-        attributes[FRAME_MODULE_KEY] = module
-    else:
-        attributes[FRAME_FILENAME_KEY] = frame['filename']
+    scopes = (
+        (FRAME_MODULE_KEY, 'module'),
+        (FRAME_FILENAME_KEY, 'filename'),
+    )
+
+    for key, name in scopes:
+        value = frame.get(name)
+        if value:
+            attributes[key] = value
+            break
 
     return FRAME_ITEM_SEPARATOR.join(
         map(
