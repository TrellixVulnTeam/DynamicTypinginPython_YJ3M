commit dccfef2b2d72108764272f5a083889a829c4e149
Author: Burak Yigit Kaya <byk@sentry.io>
Date:   Thu Nov 28 14:49:38 2019 +0300

    fix(apm): Disable self-tracing by default again (#15854)
    
    Self-tracing was disable in #15555 but the logic accidentally got removed in #15775. This patch brings it back so we don't self-trace in on-premise.

diff --git a/src/sentry/static/sentry/app/bootstrap.jsx b/src/sentry/static/sentry/app/bootstrap.jsx
index 8632baf480..259bae7733 100644
--- a/src/sentry/static/sentry/app/bootstrap.jsx
+++ b/src/sentry/static/sentry/app/bootstrap.jsx
@@ -30,6 +30,9 @@ if (window.__initialData) {
 }
 
 // SDK INIT  --------------------------------------------------------
+const config = ConfigStore.getConfig();
+// Only enable self-tracing when isApmDataSamplingEnabled is true
+const tracesSampleRate = config && config.isApmDataSamplingEnabled ? 1 : 0;
 Sentry.init({
   ...window.__SENTRY__OPTIONS,
   integrations: [
@@ -39,6 +42,7 @@ Sentry.init({
     }),
     new Integrations.Tracing({
       tracingOrigins: ['localhost', 'sentry.io', /^\//],
+      tracesSampleRate,
     }),
   ],
 });
