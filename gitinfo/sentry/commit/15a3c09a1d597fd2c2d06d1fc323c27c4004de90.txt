commit 15a3c09a1d597fd2c2d06d1fc323c27c4004de90
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Wed Feb 6 14:35:28 2019 -0800

    fix(dashboard): Fix export to events w/ absolute dates (#11866)
    
    Needs formatting to UTC string

diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/utils/getEventsUrlPathFromDiscoverQuery.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/utils/getEventsUrlPathFromDiscoverQuery.jsx
index 189df25c96..4ba0f29861 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard/utils/getEventsUrlPathFromDiscoverQuery.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/utils/getEventsUrlPathFromDiscoverQuery.jsx
@@ -2,6 +2,7 @@ import {pickBy} from 'lodash';
 import qs from 'query-string';
 
 import {getDiscoverConditionsToSearchString} from 'app/views/organizationDashboard/utils/getDiscoverConditionsToSearchString';
+import {getUtcDateString} from 'app/utils/dates';
 
 export function getEventsUrlPathFromDiscoverQuery({organization, selection, query}) {
   const {
@@ -13,8 +14,8 @@ export function getEventsUrlPathFromDiscoverQuery({organization, selection, quer
   return `/organizations/${organization.slug}/events/?${qs.stringify(
     pickBy({
       ...restSelection,
-      start: datetime.start,
-      end: datetime.end,
+      start: datetime.start && getUtcDateString(datetime.start),
+      end: datetime.end && getUtcDateString(datetime.end),
       statsPeriod: datetime.period,
       query: getDiscoverConditionsToSearchString(query.conditions),
     })
diff --git a/tests/js/spec/views/organizationDashboard/utils/getEventsUrlPathFromDiscoverQuery.spec.jsx b/tests/js/spec/views/organizationDashboard/utils/getEventsUrlPathFromDiscoverQuery.spec.jsx
index 181300c61b..f42d22bcba 100644
--- a/tests/js/spec/views/organizationDashboard/utils/getEventsUrlPathFromDiscoverQuery.spec.jsx
+++ b/tests/js/spec/views/organizationDashboard/utils/getEventsUrlPathFromDiscoverQuery.spec.jsx
@@ -31,4 +31,22 @@ describe('getEventsUrlPathFromDiscoverQuery', function() {
       '/organizations/org-slug/events/?query=%21user.email%3A%22%22&statsPeriod=14d'
     );
   });
+
+  it('has right absolute dates', function() {
+    expect(
+      getEventsUrlPathFromDiscoverQuery({
+        organization,
+        selection: {
+          datetime: {
+            start: new Date(),
+            end: new Date(),
+          },
+        },
+        query,
+        values: [null, 'iPhone X'],
+      })
+    ).toBe(
+      '/organizations/org-slug/events/?end=2017-10-17T02%3A41%3A20&query=%21user.email%3A%22%22&start=2017-10-17T02%3A41%3A20'
+    );
+  });
 });
