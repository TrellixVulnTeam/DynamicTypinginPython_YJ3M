commit f9fb2be73c5eff1417d991b258a69bbed1ec7fde
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Jan 5 12:45:16 2013 -0800

    Always tag user email addresses

diff --git a/src/sentry/manager.py b/src/sentry/manager.py
index deeb13d841..82477ef836 100644
--- a/src/sentry/manager.py
+++ b/src/sentry/manager.py
@@ -641,6 +641,10 @@ class GroupManager(BaseManager, ChartMixin):
             ('level', event.get_level_display()),
         ]
 
+        user_data = event.user_data
+        if user_data.get('email'):
+            tags.append(('user_email', user_data['email']))
+
         self.add_tags(group, tags)
 
         return group, is_new, is_sample
diff --git a/src/sentry/models.py b/src/sentry/models.py
index c78aec5735..f321ceeafd 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -389,6 +389,10 @@ class MessageBase(Model):
             return self.culprit
         return truncatechars(self.message.splitlines()[0], 100)
 
+    @property
+    def user_data(self):
+        return self.data.get('sentry.interfaces.User', {})
+
 
 class Group(MessageBase):
     """
@@ -396,6 +400,7 @@ class Group(MessageBase):
     """
     status = models.PositiveIntegerField(default=0, choices=STATUS_LEVELS, db_index=True)
     times_seen = models.PositiveIntegerField(default=1, db_index=True)
+    users_seen = models.PositiveIntegerField(default=0, db_index=True)
     last_seen = models.DateTimeField(default=timezone.now, db_index=True)
     first_seen = models.DateTimeField(default=timezone.now, db_index=True)
     resolved_at = models.DateTimeField(null=True, db_index=True)
diff --git a/src/sentry/plugins/sentry_user_emails/__init__.py b/src/sentry/plugins/sentry_user_emails/__init__.py
deleted file mode 100644
index 6a59e2fc52..0000000000
--- a/src/sentry/plugins/sentry_user_emails/__init__.py
+++ /dev/null
@@ -1,7 +0,0 @@
-"""
-sentry.plugins.sentry_user_emails
-~~~~~~~~~~~~~~~~~~~~~~~~~~
-
-:copyright: (c) 2010-2012 by the Sentry Team, see AUTHORS for more details.
-:license: BSD, see LICENSE for more details.
-"""
diff --git a/src/sentry/plugins/sentry_user_emails/models.py b/src/sentry/plugins/sentry_user_emails/models.py
deleted file mode 100644
index 30079c8eb0..0000000000
--- a/src/sentry/plugins/sentry_user_emails/models.py
+++ /dev/null
@@ -1,39 +0,0 @@
-"""
-sentry.plugins.sentry_user_emails.models
-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-
-:copyright: (c) 2010-2012 by the Sentry Team, see AUTHORS for more details.
-:license: BSD, see LICENSE for more details.
-"""
-import sentry
-
-from django.utils.translation import ugettext_lazy as _
-
-from sentry.plugins import register
-from sentry.plugins.bases.tag import TagPlugin
-
-
-class UserEmailsPlugin(TagPlugin):
-    """
-    Adds additional support for showing information about users including:
-
-    * A panel which shows all users a message was created by.
-    * A sidebar module which shows the users most actively seeing event.
-    """
-    slug = 'user-emails'
-    title = _('Auto Tag: User Emails')
-    version = sentry.VERSION
-    author = "Sentry Team"
-    author_url = "https://github.com/getsentry/sentry"
-    tag = 'user_email'
-    tag_label = _('User Email')
-
-    def get_tag_values(self, event):
-        user = event.interfaces.get('sentry.interfaces.User')
-        if not user:
-            return []
-        if not getattr(user, 'email', None):
-            return []
-        return [user.email]
-
-register(UserEmailsPlugin)
