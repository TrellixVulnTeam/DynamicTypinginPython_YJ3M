commit 4a886c4248e75f511f0867dfa653861a0604b02b
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Feb 12 20:27:43 2013 -0800

    Remove the lowest 2 values in historical data for alerting

diff --git a/src/sentry/tasks/check_alerts.py b/src/sentry/tasks/check_alerts.py
index b9ee89bcd8..aa07a8845a 100644
--- a/src/sentry/tasks/check_alerts.py
+++ b/src/sentry/tasks/check_alerts.py
@@ -110,7 +110,11 @@ def check_project_alerts(project_id, when, count, **kwargs):
     if len(data) != intervals:
         return
 
-    previous = sum(data) / intervals / MINUTE_NORMALIZATION
+    # remove bottom 2 values
+    # Note: I dont know how math works, but the goal is to take:
+    # [3, 20, 17, 4, 23] and end up with a reasonable average
+    data = sorted(data)[2:]
+    previous = sum(data) / len(data) / MINUTE_NORMALIZATION
 
     if count / previous * 100 > threshold:
         Alert.maybe_alert(
