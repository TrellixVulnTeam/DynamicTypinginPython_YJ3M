commit 65264ee6bc35dd245d8e5a62a42b5fbf6a69114e
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Feb 26 09:52:13 2015 -0800

    Send link emails on SSO setup success

diff --git a/src/sentry/auth/helper.py b/src/sentry/auth/helper.py
index 68588c6714..7264ec0a3b 100644
--- a/src/sentry/auth/helper.py
+++ b/src/sentry/auth/helper.py
@@ -22,6 +22,8 @@ from . import manager
 
 OK_LINK_IDENTITY = _('You have successully linked your account your SSO provider.')
 
+OK_SETUP_SSO = _('SSO has been configured for your organization and any existing members have been sent an email to link their accounts.')
+
 ERR_UID_MISMATCH = _('There was an error encountered during authentication.')
 
 ERR_NOT_AUTHED = _('You must be authenticated to link accounts.')
@@ -257,6 +259,18 @@ class AuthHelper(object):
             data=self.auth_provider.get_audit_log_data(),
         )
 
+        member_list = OrganizationMember.objects.filter(
+            organization=self.organization,
+            flags=~getattr(OrganizationMember.flags, 'sso:linked'),
+        )
+        for member in member_list:
+            member.send_sso_link_email()
+
+        messages.add_message(
+            self.request, messages.SUCCESS,
+            OK_SETUP_SSO,
+        )
+
         next_uri = reverse('sentry-organization-auth-settings', args=[
             self.organization.slug,
         ])
