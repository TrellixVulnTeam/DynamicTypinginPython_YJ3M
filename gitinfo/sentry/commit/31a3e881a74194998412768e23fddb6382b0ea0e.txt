commit 31a3e881a74194998412768e23fddb6382b0ea0e
Author: Chris Jennings <chriskjennings@gmail.com>
Date:   Tue Feb 27 14:10:16 2018 -0800

    feat(ui): Remove Sentry Icon crumb in favor of global 'Back to x' link (#7333)
    
    * Remove Sentry icon crumb in favor of global 'Back to x' link
    
    * Themify common settings vars
    
    * Add Sentry logo to the left of breadcrumb
    
    * Add Footer. Widen container.
    
    * Fix snapshot

diff --git a/src/sentry/static/sentry/app/icons/icon-sentry.svg b/src/sentry/static/sentry/app/icons/icon-sentry.svg
new file mode 100644
index 0000000000..a1c830482a
--- /dev/null
+++ b/src/sentry/static/sentry/app/icons/icon-sentry.svg
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
+	<path d="M23.699284,21.8588501 C24.1000944,21.1444353 24.1000944,20.2916812 23.699284,19.5772664 L13.9198258,2.14083943 C13.5190154,1.42642463 12.8013401,1.0000476 11.9997194,1.0000476 C11.1984927,1.0000476 10.4808175,1.42642463 10.0804012,2.14083943 L6.92042311,7.77420903 L7.72283211,8.25007987 C10.0662132,9.63955783 12.0241542,11.6566336 13.3850178,14.0830475 C14.5902078,16.2315658 15.2909362,18.638101 15.4332101,21.0949415 L13.2202796,21.0953472 C13.0803704,19.0352686 12.4836871,17.0210327 11.4731877,15.2189711 C10.3066206,13.1398252 8.62770984,11.4107872 6.61695802,10.2184732 L5.81573135,9.7434137 L2.86108485,15.0128821 L3.66309974,15.4883472 C5.62577008,16.6518575 7.00042754,18.7934792 7.28458122,21.0949415 L2.22026116,21.0949415 C2.03621155,21.0953472 1.94241325,20.9768866 1.9030022,20.9067027 C1.86359114,20.8361132 1.81117445,20.693717 1.90260809,20.5298195 L3.31549427,18.0117203 C2.83625589,17.5938627 2.29120105,17.2766155 1.70988805,17.0644412 L0.300154749,19.5772664 C-0.10026153,20.2916812 -0.10026153,21.1444353 0.300548859,21.8588501 C0.701359249,22.5732649 1.41903449,23.0000476 2.22026116,23.0000476 L9.19207609,23.0000476 L9.19286431,22.0483059 C9.19444076,20.3898575 8.76722496,18.7504763 7.95851019,17.3078534 C7.30468086,16.143126 6.41872043,15.1362109 5.36565714,14.3556691 L6.47547234,12.377945 C7.85880023,13.3621417 9.02221446,14.659123 9.87034028,16.1715241 C10.8737456,17.9610095 11.4034302,19.9922842 11.4018537,22.0466832 L11.4010655,23.0000476 L17.3103585,23.0000476 L17.3111467,22.0483059 C17.3139055,18.9293843 16.5107083,15.8457575 14.9878653,13.1304944 C13.6199077,10.6919099 11.7120187,8.62168916 9.43681872,7.09792881 L11.6832486,3.09339249 C11.7746823,2.92949495 11.9208973,2.90474804 11.9997194,2.90474804 C12.0789356,2.90474804 12.2251506,2.92908926 12.3169783,3.09298681 L22.0968307,20.5302252 C22.1886584,20.693717 22.1362417,20.8361132 22.0968307,20.906297 C22.0574196,20.9768866 21.9636213,21.0949415 21.7795717,21.0949415 L19.4819074,21.0953472 C19.5106775,21.7314644 19.5142245,22.3671759 19.4842721,23.0000476 L21.7795717,23.0000476 C22.5807984,23.0000476 23.2980795,22.5732649 23.699284,21.8588501" fill="currentColor">
+	</path>
+</svg>
diff --git a/src/sentry/static/sentry/app/utils/theme.jsx b/src/sentry/static/sentry/app/utils/theme.jsx
index d4df939018..b35ac07248 100644
--- a/src/sentry/static/sentry/app/utils/theme.jsx
+++ b/src/sentry/static/sentry/app/utils/theme.jsx
@@ -86,6 +86,12 @@ const theme = {
 
   grid: 8,
 
+  settings: {
+    containerWidth: '1140px',
+    headerHeight: '115px',
+    sidebarWidth: '210px',
+  },
+
   text: {
     family: '"Rubik", "Avenir Next", sans-serif',
     familyMono: 'Monaco, Consolas, "Courier New", monospace',
diff --git a/src/sentry/static/sentry/app/views/settings/components/crumb.styled.jsx b/src/sentry/static/sentry/app/views/settings/components/crumb.styled.jsx
index b2c001689a..fba7a83f20 100644
--- a/src/sentry/static/sentry/app/views/settings/components/crumb.styled.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/crumb.styled.jsx
@@ -6,7 +6,7 @@ const Crumb = styled('div')`
   position: relative;
   font-size: 18px;
   color: ${p => p.theme.gray3};
-  margin-right: 10px;
+  margin-right: 8px;
   cursor: pointer;
   > span {
     transition: 0.1s all ease;
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsBackButton.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsBackButton.jsx
index dd83b9d0ba..79d307f493 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsBackButton.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsBackButton.jsx
@@ -1,22 +1,29 @@
 import {Link} from 'react-router';
 import React from 'react';
 import styled from 'react-emotion';
+import {t} from '../../../locale';
 
-import SentryIcon from '../../../icons/sentryIcon';
+import InlineSvg from '../../../components/inlineSvg';
 import SentryTypes from '../../../proptypes';
 import replaceRouterParams from '../../../utils/replaceRouterParams';
 import withLatestContext from '../../../utils/withLatestContext';
 
 const BackButtonWrapper = styled(Link)`
+  display: flex;
+  align-items: center;
   color: ${p => p.theme.gray3};
   &:hover {
     color: ${p => p.theme.gray5};
   }
 `;
 
-const SentryCrumb = styled(SentryIcon)`
-  font-size: 20px;
-  margin-right: 4px;
+const Icon = styled(InlineSvg)`
+  margin: 0 6px 0 -3px;
+
+  /* To ensure proper vertical centering */
+  svg {
+    display: block;
+  }
 `;
 
 class BackButton extends React.Component {
@@ -31,6 +38,7 @@ class BackButton extends React.Component {
     let projectId = params.projectId || (project && project.slug);
     let orgId = params.orgId || (organization && organization.slug);
     let url = projectId ? '/:orgId/:projectId/' : '/:orgId/';
+    let label = projectId ? t('Project') : t('Organization');
 
     return (
       <BackButtonWrapper
@@ -39,7 +47,7 @@ class BackButton extends React.Component {
           projectId,
         })}
       >
-        <SentryCrumb />
+        <Icon src="icon-chevron-left" size="10px" /> Back to {label}
       </BackButtonWrapper>
     );
   }
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb.jsx
index 2beedf755f..140d89e609 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb.jsx
@@ -6,7 +6,6 @@ import Crumb from './crumb.styled';
 import Link from '../../../components/link';
 import LoadingIndicator from '../../../components/loadingIndicator';
 import SentryTypes from '../../../proptypes';
-import SettingsBackButton from './settingsBackButton';
 import SettingsBreadcrumbDivider from './settingsBreadcrumbDivider';
 import SettingsBreadcrumbDropdown from './settingsBreadcrumbDropdown';
 import recreateRoute from '../../../utils/recreateRoute';
@@ -14,6 +13,8 @@ import replaceRouterParams from '../../../utils/replaceRouterParams';
 import withLatestContext from '../../../utils/withLatestContext';
 import withProjects from '../../../utils/withProjects';
 
+import InlineSvg from '../../../components/inlineSvg';
+
 const Breadcrumbs = styled.div`
   display: flex;
   align-items: center;
@@ -52,6 +53,33 @@ const ProjectName = styled.div`
   display: flex;
 `;
 
+const StyledInlineSvg = styled(InlineSvg)`
+  display: block;
+`;
+
+const LogoLink = styled.a`
+  padding-right: 12px;
+  margin-right: 12px;
+  color: ${p => p.theme.gray4};
+  z-index: 1;
+  position: relative;
+
+  &:after {
+    display: block;
+    content: '';
+    position: absolute;
+    right: 0;
+    top: 2px;
+    bottom: 2px;
+    width: 1px;
+    background: ${p => p.theme.borderDark};
+  }
+
+  &:hover {
+    color: ${p => p.theme.gray5};
+  }
+`;
+
 // `organizationDetails` to differeniate from the organization that comes from `OrganizationsStore` which only has
 // a fraction of an org's properties
 const ProjectCrumb = withProjects(
@@ -179,11 +207,9 @@ class SettingsBreadcrumb extends React.Component {
     let lastRouteIndex = routesWithNames.length - 1;
     return (
       <Breadcrumbs>
-        <Crumb>
-          <SettingsBackButton params={params} />
-          <SettingsBreadcrumbDivider />
-        </Crumb>
-
+        <LogoLink href="/">
+          <StyledInlineSvg src="icon-sentry" size="20px" />
+        </LogoLink>
         {routesWithNames.map((route, i) => {
           let isLast = i === lastRouteIndex;
           let createMenu = MENUS[route.name];
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumbDivider.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumbDivider.jsx
index 89e1e4d7d3..33388e34e4 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumbDivider.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumbDivider.jsx
@@ -20,6 +20,10 @@ const StyledDivider = styled.span`
       : ''};
 `;
 
+const StyledInlineSvg = styled(InlineSvg)`
+  display: block;
+`;
+
 class SettingsBreadcrumbDivider extends React.Component {
   static propTypes = {
     isHover: PropTypes.bool,
@@ -31,7 +35,7 @@ class SettingsBreadcrumbDivider extends React.Component {
 
     return (
       <StyledDivider isHover={isHover}>
-        <InlineSvg src="icon-chevron-right" size="15px" />
+        <StyledInlineSvg src="icon-chevron-right" size="14px" />
       </StyledDivider>
     );
   }
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsHeader.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsHeader.jsx
index a42f714886..45be5247a1 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsHeader.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsHeader.jsx
@@ -1,12 +1,9 @@
-import {Flex} from 'grid-emotion';
 import styled from 'react-emotion';
 
-const SettingsHeader = styled(Flex)`
-  align-items: center;
+const SettingsHeader = styled.div`
   position: sticky;
   top: 0;
-  height: 105px;
-  width: 1010px;
+  height: ${p => p.theme.settings.headerHeight};
   z-index: ${p => p.theme.zIndex.header};
   &:before {
     position: absolute;
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsNavItem.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsNavItem.jsx
index 136b009a8f..f02c7f3463 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsNavItem.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsNavItem.jsx
@@ -24,7 +24,7 @@ const StyledNavItem = withTheme(
       position: absolute;
       content: '';
       display: block;
-      top: 8px;
+      top: 7px;
       left: -22px;
       height: 14px;
       width: 2px;
diff --git a/src/sentry/static/sentry/app/views/settings/settingsLayout.jsx b/src/sentry/static/sentry/app/views/settings/settingsLayout.jsx
index e2b22c2744..d833b330c1 100644
--- a/src/sentry/static/sentry/app/views/settings/settingsLayout.jsx
+++ b/src/sentry/static/sentry/app/views/settings/settingsLayout.jsx
@@ -5,6 +5,7 @@ import React from 'react';
 import styled from 'react-emotion';
 
 import Alert from '../../components/alert';
+import SettingsBackButton from './components/settingsBackButton';
 import SettingsBreadcrumb from './components/settingsBreadcrumb';
 import SettingsHeader from './components/settingsHeader';
 import SettingsSearch from './components/settingsSearch';
@@ -55,10 +56,30 @@ let NewSettingsWarning = ({location = {}}) => {
   );
 };
 
+const Container = styled(Flex)`
+  max-width: ${p => p.theme.settings.containerWidth};
+  margin: 0 auto;
+  padding: 0 ${p => p.theme.grid * 2}px;
+`;
+
+const SidebarWrapper = styled(Box)`
+  flex: 0 0 ${p => p.theme.settings.sidebarWidth};
+`;
+
 const Content = styled(Box)`
   flex: 1;
 `;
 
+const SettingsSubheader = styled.div`
+  position: relative;
+  z-index: ${p => p.theme.zIndex.dropdown};
+  padding: ${p => p.theme.grid}px 0;
+  margin-bottom: ${p => p.theme.grid * 3}px;
+  border-bottom: 1px solid ${p => p.theme.borderLight};
+  background: ${p => p.theme.offWhite};
+  font-size: 14px;
+`;
+
 class SettingsLayout extends React.Component {
   static propTypes = {
     renderNavigation: PropTypes.func,
@@ -75,29 +96,42 @@ class SettingsLayout extends React.Component {
     return (
       <div>
         <SettingsHeader>
-          <Box flex="1">
-            <SettingsBreadcrumb params={params} routes={childRoutes} route={childRoute} />
-          </Box>
-          <SettingsSearch params={params} />
+          <SettingsSubheader>
+            <Container>
+              <SettingsBackButton params={params}>Back to Project</SettingsBackButton>
+            </Container>
+          </SettingsSubheader>
+          <Container>
+            <Flex align="center" width={1}>
+              <Box flex="1">
+                <SettingsBreadcrumb
+                  params={params}
+                  routes={childRoutes}
+                  route={childRoute}
+                />
+              </Box>
+              <SettingsSearch params={params} />
+            </Flex>
+          </Container>
         </SettingsHeader>
-        <Flex>
+        <Container>
           {typeof renderNavigation === 'function' && (
-            <Box flex="0 0 210px">
+            <SidebarWrapper>
               <StickySidebar>{renderNavigation()}</StickySidebar>
-            </Box>
+            </SidebarWrapper>
           )}
           <Content>
             {children}
             <NewSettingsWarning location={this.props.location} />
           </Content>
-        </Flex>
+        </Container>
       </div>
     );
   }
 }
 const StickySidebar = styled.div`
   position: sticky;
-  top: 105px;
+  top: ${p => p.theme.settings.headerHeight};
 `;
 
 export default SettingsLayout;
diff --git a/src/sentry/static/sentry/app/views/settings/settingsWrapper.jsx b/src/sentry/static/sentry/app/views/settings/settingsWrapper.jsx
index f3bfb9a20c..a73418cd77 100644
--- a/src/sentry/static/sentry/app/views/settings/settingsWrapper.jsx
+++ b/src/sentry/static/sentry/app/views/settings/settingsWrapper.jsx
@@ -2,20 +2,22 @@ import $ from 'jquery';
 import React from 'react';
 import styled from 'react-emotion';
 import {withTheme} from 'emotion-theming';
+import Footer from '../../components/footer';
 
 const StyledSettingsWrapper = withTheme(
   styled.div`
     font-family: 'Rubik', sans-serif;
     font-size: 16px;
     color: ${p => p.theme.gray5};
+    margin: 0 auto;
+    line-height: 1;
+
+    footer > .container {
+      max-width: ${p => p.theme.settings.containerWidth};
+      padding: ${p => p.theme.grid * 2}px;
+    }
   `
 );
-const StyledSettingsContainer = styled.div`
-  max-width: 1040px;
-  padding: 0 16px;
-  margin: 0 auto;
-  line-height: 1;
-`;
 
 class SettingsWrapper extends React.Component {
   componentWillMount() {
@@ -28,7 +30,8 @@ class SettingsWrapper extends React.Component {
   render() {
     return (
       <StyledSettingsWrapper>
-        <StyledSettingsContainer>{this.props.children}</StyledSettingsContainer>
+        {this.props.children}
+        <Footer />
       </StyledSettingsWrapper>
     );
   }
diff --git a/tests/js/spec/components/__snapshots__/settingsLayout.spec.jsx.snap b/tests/js/spec/components/__snapshots__/settingsLayout.spec.jsx.snap
index 02abb9ba9b..c56a37fa6f 100644
--- a/tests/js/spec/components/__snapshots__/settingsLayout.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/settingsLayout.spec.jsx.snap
@@ -3,20 +3,34 @@
 exports[`SettingsLayout renders 1`] = `
 <div>
   <SettingsHeader>
-    <Box
-      flex="1"
-    >
-      <SettingsBreadcrumb
-        route={Object {}}
-        routes={Array []}
-      />
-    </Box>
-    <withRouter(SettingsSearchContainer) />
+    <SettingsSubheader>
+      <Container>
+        <withOrganizations>
+          Back to Project
+        </withOrganizations>
+      </Container>
+    </SettingsSubheader>
+    <Container>
+      <Flex
+        align="center"
+        width={1}
+      >
+        <Box
+          flex="1"
+        >
+          <SettingsBreadcrumb
+            route={Object {}}
+            routes={Array []}
+          />
+        </Box>
+        <withRouter(SettingsSearchContainer) />
+      </Flex>
+    </Container>
   </SettingsHeader>
-  <Flex>
+  <Container>
     <Content>
       <NewSettingsWarning />
     </Content>
-  </Flex>
+  </Container>
 </div>
 `;
