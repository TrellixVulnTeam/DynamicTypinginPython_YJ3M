commit ca196da6d76036152d6496fd05e582f9a4a20f22
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Feb 3 17:51:15 2015 -0800

    Working assignee selector

diff --git a/src/sentry/static/sentry/app/api.jsx b/src/sentry/static/sentry/app/api.jsx
index 1e835083b4..6da410b392 100644
--- a/src/sentry/static/sentry/app/api.jsx
+++ b/src/sentry/static/sentry/app/api.jsx
@@ -1,6 +1,7 @@
 /*** @jsx React.DOM */
 
 var $ = require("jquery");
+var AggregateListActions = require("./actions/aggregateListActions");
 
 class Client {
   constructor(options) {
@@ -33,6 +34,7 @@ class Client {
       url: this.baseUrl + path + "?" + query,
       method: method,
       data: data,
+      contentType: 'application/json',
       success: options.success,
       error: options.error,
       complete: options.complete
@@ -63,11 +65,11 @@ class Client {
     var path = "/groups/" + params.id + "/";
     var id = this.uniqueId();
 
-    AggregateListActions.assignTo(id, params.id, params.data);
+    AggregateListActions.assignTo(id, params.id, {email: params.email});
 
     return this.request(path, {
       method: "PUT",
-      data: params.data,
+      data: {assignedTo: params.email},
       success: function(response){
        AggregateListActions.assignToSuccess(id, params.id, response);
       },
diff --git a/src/sentry/static/sentry/app/components/assigneeSelector.jsx b/src/sentry/static/sentry/app/components/assigneeSelector.jsx
index fd556178e9..ec3ba8296e 100644
--- a/src/sentry/static/sentry/app/components/assigneeSelector.jsx
+++ b/src/sentry/static/sentry/app/components/assigneeSelector.jsx
@@ -18,11 +18,11 @@ var AssigneeSelector = React.createClass({
   },
 
   assignTo: function(member) {
-    api.assignTo(this.props.aggregate.id, member.email);
+    api.assignTo({id: this.props.aggregate.id, email: member.email});
   },
 
   clearAssignTo: function() {
-    api.assignTo(this.props.aggregate.id, '');
+    api.assignTo({id: this.props.aggregate.id, email: ''});
   },
 
   render: function() {
diff --git a/src/sentry/static/sentry/app/stores/aggregateListStore.jsx b/src/sentry/static/sentry/app/stores/aggregateListStore.jsx
index 6c87687dad..7001170445 100644
--- a/src/sentry/static/sentry/app/stores/aggregateListStore.jsx
+++ b/src/sentry/static/sentry/app/stores/aggregateListStore.jsx
@@ -50,7 +50,7 @@ var AggregateListStore = Reflux.createStore({
     this.statuses[id][status] = false;
   },
 
-  hasStatus(item, status) {
+  hasStatus(id, status) {
     if (typeof this.statuses[id] === 'undefined') {
       return false;
     }
@@ -139,6 +139,7 @@ var AggregateListStore = Reflux.createStore({
 
   onAssignTo(changeId, itemId, data) {
     this.addStatus(itemId, 'assignTo');
+    this.trigger(this.getAllItems());
   },
 
   // TODO(dcramer): This is not really the best place for this
@@ -148,18 +149,11 @@ var AggregateListStore = Reflux.createStore({
   },
 
   onAssignToSuccess(changeId, itemId, response) {
-    var item = this.items.get(id);
+    var item = this.getItem(itemId);
     if (!item) {
       return;
     }
-    if (email === '') {
-      item.assignedTo = '';
-    } else {
-      var member = MemberListStore.getByEmail(email);
-      if (member) {
-        item.assignedTo = member;
-      }
-    }
+    item.assignedTo = response.assignedTo;
     this.clearStatus(itemId, 'assignTo');
     this.trigger(this.getAllItems());
   },
