commit 1731a457f997ad0c818c6b4340b6eb3bf9bf3c6b
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jun 5 11:27:29 2014 -0700

    Allow source fetch timeout to be configurable

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index caa74b6ead..87a32694cc 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -674,6 +674,9 @@ SENTRY_MAX_STACKTRACE_FRAMES = 25
 # Gravatar service base url
 SENTRY_GRAVATAR_BASE_URL = 'https://secure.gravatar.com'
 
+# Timeout (in seconds) for fetching remote source files (e.g. JS)
+SENTRY_SOURCE_FETCH_TIMEOUT = 5
+
 SENTRY_DISALLOWED_IPS = (
     '10.0.0.0/8',
     '172.16.0.0/12',
diff --git a/src/sentry/constants.py b/src/sentry/constants.py
index 23185f4e1e..b07210947d 100644
--- a/src/sentry/constants.py
+++ b/src/sentry/constants.py
@@ -168,9 +168,6 @@ DEFAULT_SORT_OPTION = 'date'
 LANGUAGE_MAP = dict(settings.LANGUAGES)
 LANGUAGES = [(k, LANGUAGE_MAP[k]) for k in get_all_languages() if k in LANGUAGE_MAP]
 
-# Timeout (in seconds) for fetching remote source files (e.g. JS)
-SOURCE_FETCH_TIMEOUT = 5
-
 # TODO(dcramer): We eventually want to make this user-editable
 TAG_LABELS = {
     'exc_type': _('Exception Type'),
diff --git a/src/sentry/tasks/fetch_source.py b/src/sentry/tasks/fetch_source.py
index 94fb6288da..f0e7cc5c5e 100644
--- a/src/sentry/tasks/fetch_source.py
+++ b/src/sentry/tasks/fetch_source.py
@@ -12,12 +12,14 @@ import hashlib
 import re
 import zlib
 import base64
-from os.path import splitext
+
+from django.conf import settings
 from collections import namedtuple
+from os.path import splitext
 from simplejson import JSONDecodeError
 from urlparse import urlparse, urljoin, urlsplit
 
-from sentry.constants import SOURCE_FETCH_TIMEOUT, MAX_CULPRIT_LENGTH
+from sentry.constants import MAX_CULPRIT_LENGTH
 from sentry.http import safe_urlopen
 from sentry.utils.cache import cache
 from sentry.utils.sourcemaps import sourcemap_to_index, find_source
@@ -122,7 +124,7 @@ def fetch_url_content(url):
     try:
         req = safe_urlopen(url, headers=[
             ('Accept-Encoding', 'gzip'),
-        ], allow_redirects=True, timeout=SOURCE_FETCH_TIMEOUT)
+        ], allow_redirects=True, timeout=settings.SENTRY_SOURCE_FETCH_TIMEOUT)
         headers = dict(req.headers)
         body = req.read()
         if headers.get('content-encoding') == 'gzip':
