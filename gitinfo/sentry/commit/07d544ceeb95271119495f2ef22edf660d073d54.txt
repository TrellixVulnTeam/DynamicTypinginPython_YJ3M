commit 07d544ceeb95271119495f2ef22edf660d073d54
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Mon Apr 20 18:03:29 2020 +0200

    fix: duplicate results in releases (#18358)

diff --git a/src/sentry/api/endpoints/organization_releases.py b/src/sentry/api/endpoints/organization_releases.py
index 271d01c1f9..612ccf20ad 100644
--- a/src/sentry/api/endpoints/organization_releases.py
+++ b/src/sentry/api/endpoints/organization_releases.py
@@ -208,10 +208,9 @@ class OrganizationReleasesEndpoint(OrganizationReleasesBaseEndpoint, Environment
         select_extra = {}
         sort_query = None
 
+        queryset = queryset.distinct()
         if flatten:
             select_extra["_for_project_id"] = "sentry_release_project.project_id"
-        else:
-            queryset = queryset.distinct()
 
         if sort == "date":
             sort_query = "COALESCE(sentry_release.date_released, sentry_release.date_added)"
