commit af7f20ae109d4d1959225bf58d2252b99708dcf2
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Aug 24 14:26:17 2011 -0700

    Ensure dictionary keys are coerced to strings

diff --git a/CHANGES b/CHANGES
index 470470f139..812d8af625 100644
--- a/CHANGES
+++ b/CHANGES
@@ -1,3 +1,8 @@
+
+1.8.10
+
+* Ensure dictionary keys are coerced to strings.
+
 1.8.9
 
 * Safely handle unpickling objects that may not have been stored in a
diff --git a/sentry/utils/__init__.py b/sentry/utils/__init__.py
index 6a4ef51ea7..7bc44a11ff 100644
--- a/sentry/utils/__init__.py
+++ b/sentry/utils/__init__.py
@@ -106,7 +106,7 @@ def transform(value, stack=[], context=None):
     elif isinstance(value, uuid.UUID):
         ret = repr(value)
     elif isinstance(value, dict):
-        ret = dict((k, transform_rec(v)) for k, v in value.iteritems())
+        ret = dict((str(k), transform_rec(v)) for k, v in value.iteritems())
     elif isinstance(value, unicode):
         ret = to_unicode(value)
     elif isinstance(value, str):
diff --git a/setup.py b/setup.py
index 6ef30991d2..f93925b400 100755
--- a/setup.py
+++ b/setup.py
@@ -41,7 +41,7 @@ if sys.version_info[:2] < (2, 5):
 
 setup(
     name='django-sentry',
-    version='1.8.9',
+    version='1.8.10',
     author='David Cramer',
     author_email='dcramer@gmail.com',
     url='http://github.com/dcramer/django-sentry',
diff --git a/tests/tests.py b/tests/tests.py
index dbb43f0034..f4ed413f06 100644
--- a/tests/tests.py
+++ b/tests/tests.py
@@ -1200,6 +1200,14 @@ class SentryTransformTest(BaseTestCase):
                     transform(fake_gettext_lazy("something")))),
             u'Igpay Atinlay')
 
+    def test_dict_keys(self):
+        x = {u'foo': 'bar'}
+
+        result = transform(x)
+        keys = result.keys()
+        self.assertEquals(len(keys), 1)
+        self.assertEquals(keys[0], 'foo')
+        self.assertTrue(isinstance(keys[0], str))
 
 class SentryClientTest(BaseTestCase):
     def setUp(self):
