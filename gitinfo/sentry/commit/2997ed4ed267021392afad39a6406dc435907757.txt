commit 2997ed4ed267021392afad39a6406dc435907757
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Dec 16 11:36:27 2014 -0800

    Implement ADMIN level permissions on project settings

diff --git a/src/sentry/constants.py b/src/sentry/constants.py
index 339ecd8e1c..f6ecb73a01 100644
--- a/src/sentry/constants.py
+++ b/src/sentry/constants.py
@@ -59,12 +59,13 @@ STATUS_LEVELS = (
     (STATUS_MUTED, _('Muted')),
 )
 
-MEMBER_ADMIN = 0
+MEMBER_OWNER = 0
+MEMBER_ADMIN = 25
 MEMBER_USER = 50
 MEMBER_SYSTEM = 100
-MEMBER_OWNER = MEMBER_ADMIN  # backwards compat
 
 MEMBER_TYPES = (
+    (MEMBER_OWNER, _('Owner')),
     (MEMBER_ADMIN, _('Admin')),
     (MEMBER_USER, _('User')),
     (MEMBER_SYSTEM, _('System Agent')),
diff --git a/src/sentry/web/frontend/projects/keys.py b/src/sentry/web/frontend/projects/keys.py
index 0afb8ceb93..aae67d77d2 100644
--- a/src/sentry/web/frontend/projects/keys.py
+++ b/src/sentry/web/frontend/projects/keys.py
@@ -15,7 +15,7 @@ from django.views.decorators.csrf import csrf_protect
 from django.views.decorators.http import require_http_methods
 from django.utils.translation import ugettext_lazy as _
 
-from sentry.constants import MEMBER_OWNER
+from sentry.constants import MEMBER_ADMIN
 from sentry.models import ProjectKey
 from sentry.permissions import (
     can_remove_project_key, can_add_project_key, can_edit_project_key
@@ -26,7 +26,7 @@ from sentry.web.forms.projectkeys import EditProjectKeyForm
 from sentry.web.helpers import render_to_response
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def manage_project_keys(request, organization, project):
     result = plugins.first('has_perm', request.user, 'edit_project', project)
@@ -54,7 +54,7 @@ def manage_project_keys(request, organization, project):
     return render_to_response('sentry/projects/keys.html', context, request)
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def new_project_key(request, organization, project):
     if not can_add_project_key(request.user, project):
@@ -68,7 +68,7 @@ def new_project_key(request, organization, project):
     return HttpResponseRedirect(reverse('sentry-manage-project-keys', args=[project.organization.slug, project.slug]))
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def edit_project_key(request, organization, project, key_id):
     if not can_edit_project_key(request.user, project):
@@ -103,7 +103,7 @@ def edit_project_key(request, organization, project, key_id):
 
 
 @require_http_methods(['POST'])
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def remove_project_key(request, organization, project, key_id):
     try:
diff --git a/src/sentry/web/frontend/projects/notifications.py b/src/sentry/web/frontend/projects/notifications.py
index e612cf611f..cf7faa091e 100644
--- a/src/sentry/web/frontend/projects/notifications.py
+++ b/src/sentry/web/frontend/projects/notifications.py
@@ -15,7 +15,7 @@ from django.http import HttpResponseRedirect
 from django.views.decorators.csrf import csrf_protect
 from django.utils.translation import ugettext_lazy as _
 
-from sentry.constants import MEMBER_OWNER, DEFAULT_ALERT_PROJECT_THRESHOLD
+from sentry.constants import MEMBER_ADMIN, DEFAULT_ALERT_PROJECT_THRESHOLD
 from sentry.web.decorators import has_access
 from sentry.web.forms.projects import (
     AlertSettingsForm, NotificationSettingsForm
@@ -23,7 +23,7 @@ from sentry.web.forms.projects import (
 from sentry.web.helpers import render_to_response
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def notification_settings(request, organization, project):
     general_form = NotificationSettingsForm(
diff --git a/src/sentry/web/frontend/projects/plugins.py b/src/sentry/web/frontend/projects/plugins.py
index a49ed9a115..5ab65c9130 100644
--- a/src/sentry/web/frontend/projects/plugins.py
+++ b/src/sentry/web/frontend/projects/plugins.py
@@ -14,13 +14,13 @@ from django.http import HttpResponseRedirect
 from django.views.decorators.csrf import csrf_protect
 from django.utils.translation import ugettext_lazy as _
 
-from sentry.constants import MEMBER_OWNER
+from sentry.constants import MEMBER_ADMIN
 from sentry.plugins import plugins
 from sentry.web.decorators import has_access
 from sentry.web.helpers import render_to_response, plugin_config
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def manage_plugins(request, organization, project):
     result = plugins.first('has_perm', request.user, 'configure_project_plugin', project)
@@ -50,7 +50,7 @@ def manage_plugins(request, organization, project):
     return render_to_response('sentry/projects/plugins/list.html', context, request)
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def configure_project_plugin(request, organization, project, slug):
     try:
@@ -92,7 +92,7 @@ def configure_project_plugin(request, organization, project, slug):
     return render_to_response('sentry/projects/plugins/configure.html', context, request)
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def reset_project_plugin(request, organization, project, slug):
     try:
@@ -112,7 +112,7 @@ def reset_project_plugin(request, organization, project, slug):
     return HttpResponseRedirect(reverse('sentry-configure-project-plugin', args=[project.organization.slug, project.slug, slug]))
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def enable_project_plugin(request, organization, project, slug):
     try:
@@ -134,7 +134,7 @@ def enable_project_plugin(request, organization, project, slug):
     return HttpResponseRedirect(redirect_to)
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def disable_project_plugin(request, organization, project, slug):
     try:
diff --git a/src/sentry/web/frontend/projects/quotas.py b/src/sentry/web/frontend/projects/quotas.py
index 9943d4faa6..02c382f424 100644
--- a/src/sentry/web/frontend/projects/quotas.py
+++ b/src/sentry/web/frontend/projects/quotas.py
@@ -13,13 +13,13 @@ from django.http import HttpResponseRedirect
 from django.utils.translation import ugettext_lazy as _
 
 from sentry import app
-from sentry.constants import MEMBER_OWNER
+from sentry.constants import MEMBER_ADMIN
 from sentry.web.decorators import has_access
 from sentry.web.forms.projects import ProjectQuotasForm
 from sentry.web.helpers import render_to_response
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 def manage_project_quotas(request, organization, project):
     from sentry.quotas.base import Quota
 
diff --git a/src/sentry/web/frontend/projects/rules.py b/src/sentry/web/frontend/projects/rules.py
index c32cefb888..7b71cc66b9 100644
--- a/src/sentry/web/frontend/projects/rules.py
+++ b/src/sentry/web/frontend/projects/rules.py
@@ -17,7 +17,7 @@ from django.http import HttpResponseRedirect
 from django.utils.translation import ugettext_lazy as _
 from django.views.decorators.csrf import csrf_protect
 
-from sentry.constants import MEMBER_OWNER
+from sentry.constants import MEMBER_ADMIN
 from sentry.models import Rule
 from sentry.utils import json
 from sentry.utils.cache import memoize
@@ -86,7 +86,7 @@ class RuleFormValidator(object):
         return not bool(self.errors)
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 def list_rules(request, organization, project):
     rule_list = Rule.objects.filter(project=project)
 
@@ -102,7 +102,7 @@ def list_rules(request, organization, project):
     return render_to_response('sentry/projects/rules/list.html', context, request)
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def create_or_edit_rule(request, organization, project, rule_id=None):
     if rule_id:
@@ -182,7 +182,7 @@ def create_or_edit_rule(request, organization, project, rule_id=None):
     return render_to_response('sentry/projects/rules/new.html', context, request)
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 @csrf_protect
 def remove_rule(request, organization, project, rule_id):
     path = reverse('sentry-project-rules', args=[organization.slug, project.slug])
diff --git a/src/sentry/web/frontend/projects/tags.py b/src/sentry/web/frontend/projects/tags.py
index 82a18e8b32..8e9000c2bf 100644
--- a/src/sentry/web/frontend/projects/tags.py
+++ b/src/sentry/web/frontend/projects/tags.py
@@ -12,14 +12,14 @@ from django.core.urlresolvers import reverse
 from django.http import HttpResponseRedirect
 from django.utils.translation import ugettext_lazy as _
 
-from sentry.constants import MEMBER_OWNER
+from sentry.constants import MEMBER_ADMIN
 from sentry.models import TagKey
 from sentry.web.decorators import has_access
 from sentry.web.forms.projects import ProjectTagsForm
 from sentry.web.helpers import render_to_response
 
 
-@has_access(MEMBER_OWNER)
+@has_access(MEMBER_ADMIN)
 def manage_project_tags(request, organization, project):
     tag_list = TagKey.objects.all_keys(project)
 
