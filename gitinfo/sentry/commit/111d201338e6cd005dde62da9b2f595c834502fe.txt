commit 111d201338e6cd005dde62da9b2f595c834502fe
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jan 25 21:19:50 2012 -0800

    Basic statistics

diff --git a/sentry/templates/sentry/status.html b/sentry/templates/sentry/status.html
index 9e35f85097..72301192d1 100644
--- a/sentry/templates/sentry/status.html
+++ b/sentry/templates/sentry/status.html
@@ -13,6 +13,7 @@
             <li class="active"><a href="#main" data-toggle="tab">{% trans "Environment" %}</a></li>
             <li><a href="#packages" data-toggle="tab">{% trans "Packages" %}</a></li>
             <li><a href="#workers" data-toggle="tab">{% trans "Workers" %}</a></li>
+            <li><a href="#statistics" data-toggle="tab">{% trans "Statistics" %}</a></li>
             {% for conf in site_configs %}
                 <li><a href="#config_{{ conf.slug }}" data-toggle="tab">{{ conf.site_conf_title }}</a></li>
             {% endfor %}
@@ -186,6 +187,24 @@
                     </table>
                 </div>
             {% endif %}
+            <div id="statistics" class="tab-pane">
+                <div class="page-header">
+                    <h2>{% trans "Statistics" %}</h2>
+                </div>
+                <table class="table vars table-bordered table-zebra">
+                    <colgroup>
+                        <col style="width:220px">
+                    </colgroup>
+                    <tbody>
+                        {% for key, value in statistics %}
+                            <tr>
+                                <td>{{ key }}</td>
+                                <td>{{ value }}</td>
+                            </tr>
+                        {% endfor %}
+                    </tbody>
+                </table>
+            </div>
             {% for conf in site_configs %}
                 <div id="config_{{ conf.slug }}" class="tab-pane">
                     <div class="page-header">
diff --git a/sentry/web/frontend/generic.py b/sentry/web/frontend/generic.py
index 026c9cbc8d..1966a23c0a 100644
--- a/sentry/web/frontend/generic.py
+++ b/sentry/web/frontend/generic.py
@@ -5,6 +5,7 @@ sentry.web.frontend.generic
 :copyright: (c) 2010 by the Sentry Team, see AUTHORS for more details.
 :license: BSD, see LICENSE for more details.
 """
+import datetime
 import pkg_resources
 import sys
 
@@ -16,6 +17,7 @@ from djkombu.models import Queue
 
 from sentry import environment
 from sentry.conf import settings
+from sentry.models import Project, MessageCountByMinute
 from sentry.plugins import plugins
 from sentry.web.decorators import login_required
 from sentry.web.helpers import get_project_list, render_to_response, \
@@ -76,6 +78,17 @@ def status(request):
     else:
         pending_tasks = None
 
+    statistics = (
+        ('Projects', Project.objects.count()),
+        ('Projects (24h)', Project.objects.filter(
+            date_added__gte=datetime.datetime.now() - datetime.timedelta(hours=24),
+        ).count()),
+        ('Events', MessageCountByMinute.objects.aggregate(x=Sum('times_seen'))['x'] or 0),
+        ('Events (24h)', MessageCountByMinute.objects.filter(
+            date__gte=datetime.datetime.now() - datetime.timedelta(hours=24),
+        ).aggregate(x=Sum('times_seen'))['x'] or 0)
+    )
+
     return render_to_response('sentry/status.html', {
         'config': config,
         'environment': environment,
@@ -86,6 +99,7 @@ def status(request):
         'pending_tasks': pending_tasks,
         'worker_status': worker_status,
         'site_configs': site_configs,
+        'statistics': statistics,
     }, request)
 
 
