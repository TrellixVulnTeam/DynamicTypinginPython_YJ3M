commit ef9819a07a79b8f20ee78b75cb77095189b65793
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jul 26 18:07:45 2016 -0600

    Fix remaining llvm skip (#3813)
    
    * Fix remaining llvm skip
    
    @getsentry/infrastructure

diff --git a/src/sentry/testutils/skips.py b/src/sentry/testutils/skips.py
index d05c7a8a88..3559d16d9e 100644
--- a/src/sentry/testutils/skips.py
+++ b/src/sentry/testutils/skips.py
@@ -37,3 +37,16 @@ def cassandra_is_available():
 requires_cassandra = pytest.mark.skipif(
     not cassandra_is_available(),
     reason="requires cassandra server running")
+
+
+def has_llvm_symbolizer():
+    from symsynd.driver import find_llvm_symbolizer
+
+    try:
+        return find_llvm_symbolizer() is not None
+    except EnvironmentError:
+        return False
+
+requires_llvm_symbolizer = pytest.mark.skipif(
+    not has_llvm_symbolizer(),
+    reason="requires llvm symbolizer")
diff --git a/tests/sentry/lang/native/test_plugin.py b/tests/sentry/lang/native/test_plugin.py
index 18eefb344a..3185a36503 100644
--- a/tests/sentry/lang/native/test_plugin.py
+++ b/tests/sentry/lang/native/test_plugin.py
@@ -1,22 +1,12 @@
-import pytest
+from __future__ import absolute_import
 
 from mock import patch
 
-from symsynd.driver import find_llvm_symbolizer
-
 from sentry.models import Event
-from sentry.testutils import TestCase
-
-
-def has_llvm_symbolizer():
-    try:
-        return find_llvm_symbolizer() is not None
-    except EnvironmentError:
-        return False
+from sentry.testutils import requires_llvm_symbolizer, TestCase
 
 
-@pytest.mark.skipif(has_llvm_symbolizer(),
-                    reason='llvm-symbolizer is not installed')
+@requires_llvm_symbolizer
 class BasicResolvingIntegrationTest(TestCase):
 
     @patch('sentry.lang.native.symbolizer.Symbolizer.symbolize_app_frame')
diff --git a/tests/sentry/lang/native/test_processor.py b/tests/sentry/lang/native/test_processor.py
index 693c103811..5518b88c99 100644
--- a/tests/sentry/lang/native/test_processor.py
+++ b/tests/sentry/lang/native/test_processor.py
@@ -1,10 +1,8 @@
-import pytest
+from __future__ import absolute_import
 
 from mock import patch
 
-from symsynd.driver import find_llvm_symbolizer
-
-from sentry.testutils import TestCase
+from sentry.testutils import requires_llvm_symbolizer, TestCase
 from sentry.lang.native.plugin import resolve_frame_symbols
 
 
@@ -46,8 +44,7 @@ def patched_symbolize_system_frame(self, frame, sdk_info):
         }
 
 
-@pytest.mark.skipif(find_llvm_symbolizer() is None,
-                    reason='llvm-symbolizer is not installed')
+@requires_llvm_symbolizer
 class BasicResolvingFileTest(TestCase):
 
     @patch('sentry.lang.native.symbolizer.Symbolizer.symbolize_app_frame',
