commit a8dfca1f84fa9d6fe38d9998b8901ac290fac572
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Jan 31 15:56:40 2015 -0800

    Various fixes to aggregate list store

diff --git a/src/sentry/static/sentry/app/stores/aggregateListStore.jsx b/src/sentry/static/sentry/app/stores/aggregateListStore.jsx
index ed74da3730..3c5408b15d 100644
--- a/src/sentry/static/sentry/app/stores/aggregateListStore.jsx
+++ b/src/sentry/static/sentry/app/stores/aggregateListStore.jsx
@@ -28,10 +28,10 @@ var AggregateListStore = Reflux.createStore({
   loadInitialData: function(items) {
     this.items = [];
     this.pendingChanges.clear();
-    items.forEach(function(item){
+    items.forEach(item => {
       this.items.push(item);
     });
-    this.trigger("initial");
+    this.trigger(this.getAllItems());
   },
 
   getItem: function(id) {
@@ -61,26 +61,24 @@ var AggregateListStore = Reflux.createStore({
   getAllItems: function() {
     // regroup pending changes by their itemID
     var pendingById = {};
-    this.pendingChanges.forEach(function(change){
+    this.pendingChanges.forEach(change => {
       if (typeof pendingById[change.id] === 'undefined') {
         pendingById[change.id] = [];
       }
       pendingById[change.id].push(change);
     });
 
-    var results = [];
-    this.items.forEach(function(item){
+    return this.items.map(item => {
       var rItem = item;
       if (typeof pendingById[item.id] !== 'undefined') {
         // copy the object so dirty state doesnt mutate original
         rItem = $.extend(true, {}, rItem);
-        pendingById[item.id].forEach(function(change){
+        pendingById[item.id].forEach(change => {
           rItem = $.extend(true, rItem, change.params);
         });
       }
-      results.push(cItem);
+      return rItem;
     });
-    return results;
   },
 
   // re-fire bulk events as individual actions
diff --git a/src/sentry/static/sentry/app/utils/pendingChangeQueue.jsx b/src/sentry/static/sentry/app/utils/pendingChangeQueue.jsx
index 570dae0ea8..d327b9031e 100644
--- a/src/sentry/static/sentry/app/utils/pendingChangeQueue.jsx
+++ b/src/sentry/static/sentry/app/utils/pendingChangeQueue.jsx
@@ -1,6 +1,6 @@
 /** @jsx React.DOM */
 
-class PendingChangeQueue {
+class PendingChangeQueue extends Array {
   constructor() {
     this.changes = [];
   }
