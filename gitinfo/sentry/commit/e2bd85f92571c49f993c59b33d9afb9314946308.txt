commit e2bd85f92571c49f993c59b33d9afb9314946308
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Jan 15 12:03:59 2016 -0800

    Fix various cascades in bulk deletes
    
    - Add UserReport to project/group
    - Add GroupMeta to project/group
    - Add GroupEmailThread to project

diff --git a/src/sentry/tasks/deletion.py b/src/sentry/tasks/deletion.py
index 78bc3d9c99..ae7b446204 100644
--- a/src/sentry/tasks/deletion.py
+++ b/src/sentry/tasks/deletion.py
@@ -92,8 +92,8 @@ def delete_team(object_id, continuous=True, **kwargs):
 def delete_project(object_id, continuous=True, **kwargs):
     from sentry.models import (
         Project, ProjectKey, ProjectStatus, TagKey, TagValue, GroupTagKey,
-        GroupTagValue, Activity, EventMapping, Group, GroupRuleStatus,
-        GroupHash, GroupSeen,
+        GroupTagValue, Activity, EventMapping, Group, GroupEmailThread,
+        GroupMeta, GroupRuleStatus, GroupHash, GroupSeen, UserReport
     )
 
     try:
@@ -111,7 +111,8 @@ def delete_project(object_id, continuous=True, **kwargs):
     # XXX: remove keys first to prevent additional data from flowing in
     model_list = (
         ProjectKey, TagKey, TagValue, GroupTagKey, GroupTagValue, EventMapping,
-        Activity, GroupRuleStatus, GroupHash, GroupSeen,
+        Activity, GroupRuleStatus, GroupHash, GroupSeen, GroupMeta, UserReport,
+        GroupEmailThread
     )
     for model in model_list:
         has_more = bulk_delete_objects(model, project_id=p.id, logger=logger)
@@ -141,8 +142,8 @@ def delete_project(object_id, continuous=True, **kwargs):
 @retry(exclude=(DeleteAborted,))
 def delete_group(object_id, continuous=True, **kwargs):
     from sentry.models import (
-        EventMapping, Group, GroupHash, GroupRuleStatus, GroupStatus,
-        GroupTagKey, GroupTagValue, GroupEmailThread,
+        EventMapping, Group, GroupHash, GroupMeta, GroupRuleStatus, GroupStatus,
+        GroupTagKey, GroupTagValue, GroupEmailThread, UserReport
     )
 
     try:
@@ -154,8 +155,8 @@ def delete_group(object_id, continuous=True, **kwargs):
         group.update(status=GroupStatus.DELETION_IN_PROGRESS)
 
     bulk_model_list = (
-        GroupHash, GroupRuleStatus, GroupTagValue, GroupTagKey,
-        EventMapping, GroupEmailThread,
+        GroupHash, GroupMeta, GroupRuleStatus, GroupTagValue, GroupTagKey,
+        EventMapping, GroupEmailThread, UserReport
     )
     for model in bulk_model_list:
         has_more = bulk_delete_objects(model, group_id=object_id, logger=logger)
