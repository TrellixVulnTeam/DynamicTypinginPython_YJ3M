commit b2b661a910652c8c2afa10c9c797b228b41aab5c
Author: Alex Hofsteede <alex@hofsteede.com>
Date:   Thu Mar 28 12:29:10 2019 -0700

    fix: add referrer to SnubaEvent queries (#12565)

diff --git a/src/sentry/models/event.py b/src/sentry/models/event.py
index 2790a376b4..25f4ddcb1d 100644
--- a/src/sentry/models/event.py
+++ b/src/sentry/models/event.py
@@ -461,6 +461,7 @@ class SnubaEvent(EventCommon):
                 'event_id': [event_id],
                 'project_id': [project_id],
             },
+            referrer='SnubaEvent.get_event',
         )
         if 'error' not in result and len(result['data']) == 1:
             return SnubaEvent(result['data'][0])
@@ -568,7 +569,8 @@ class SnubaEvent(EventCommon):
                 'issue': [self.group_id],
             },
             orderby=['timestamp', 'event_id'],
-            limit=1
+            limit=1,
+            referrer='SnubaEvent.next_event_id',
         )
 
         if 'error' in result or len(result['data']) == 0:
@@ -597,7 +599,8 @@ class SnubaEvent(EventCommon):
                 'issue': [self.group_id],
             },
             orderby=['-timestamp', '-event_id'],
-            limit=1
+            limit=1,
+            referrer='SnubaEvent.prev_event_id',
         )
 
         if 'error' in result or len(result['data']) == 0:
diff --git a/src/sentry/models/group.py b/src/sentry/models/group.py
index 3bd85fe317..700ee07404 100644
--- a/src/sentry/models/group.py
+++ b/src/sentry/models/group.py
@@ -103,6 +103,7 @@ def get_oldest_or_latest_event_for_environments(
         },
         orderby=ordering.value,
         limit=1,
+        referrer="Group.get_latest",
     )
 
     if 'error' not in result and len(result['data']) == 1:
