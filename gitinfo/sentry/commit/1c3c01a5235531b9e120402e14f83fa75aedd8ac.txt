commit 1c3c01a5235531b9e120402e14f83fa75aedd8ac
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Mon Feb 26 11:19:11 2018 -0800

    feat(environments): Filter stats overview chart by environment (#7354)

diff --git a/src/sentry/static/sentry/app/views/projectDashboard.jsx b/src/sentry/static/sentry/app/views/projectDashboard.jsx
index 4efcf0fb6b..59dba59764 100644
--- a/src/sentry/static/sentry/app/views/projectDashboard.jsx
+++ b/src/sentry/static/sentry/app/views/projectDashboard.jsx
@@ -137,7 +137,11 @@ const ProjectDashboard = createReactClass({
           </div>
           <h3>{t('Overview')}</h3>
         </div>
-        <ProjectChart dateSince={dateSince} resolution={resolution} />
+        <ProjectChart
+          dateSince={dateSince}
+          resolution={resolution}
+          environment={this.props.environment}
+        />
         <div className="row">
           <div className="col-md-6">
             <EventList
diff --git a/src/sentry/static/sentry/app/views/projectDashboard/chart.jsx b/src/sentry/static/sentry/app/views/projectDashboard/chart.jsx
index 24279285b0..1a87ac8e6c 100644
--- a/src/sentry/static/sentry/app/views/projectDashboard/chart.jsx
+++ b/src/sentry/static/sentry/app/views/projectDashboard/chart.jsx
@@ -15,6 +15,7 @@ const ProjectChart = createReactClass({
   propTypes: {
     dateSince: PropTypes.number.isRequired,
     resolution: PropTypes.string.isRequired,
+    environment: PropTypes.object,
   },
 
   mixins: [ApiMixin, ProjectState],
@@ -55,12 +56,21 @@ const ProjectChart = createReactClass({
   },
 
   fetchData() {
+    const statsQuery = {
+      since: this.props.dateSince,
+      resolution: this.props.resolution,
+      stat: 'generated',
+    };
+
+    const releasesQuery = {};
+
+    if (this.props.environment) {
+      statsQuery.environment = this.props.environment.name;
+      releasesQuery.environment = this.props.environment.name;
+    }
+
     this.api.request(this.getStatsEndpoint(), {
-      query: {
-        since: this.props.dateSince,
-        resolution: this.props.resolution,
-        stat: 'generated',
-      },
+      query: statsQuery,
       success: data => {
         this.setState({
           stats: data,
@@ -77,6 +87,7 @@ const ProjectChart = createReactClass({
     });
 
     this.api.request(this.getProjectReleasesEndpoint(), {
+      query: releasesQuery,
       success: (data, _, jqXHR) => {
         this.setState({
           releaseList: data,
