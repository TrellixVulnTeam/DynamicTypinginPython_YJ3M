commit af52a8fc79bc6405ff13e3e529cfab0da7377256
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Tue Mar 17 12:05:17 2020 -0700

    build(locale): Fix and refactor building locale catalogs (#17510)
    
    This fixes the build task for locale catalogs.
    
    * remove Babel from requirements-dev, cleanup Makefile a bit
    * catalogs.json is generated by find-catalog script and adds trailing spaces, see https://bugs.python.org/issue16333
    * fixes invalid translation strings

diff --git a/Makefile b/Makefile
index 85c2e8353f..3183591692 100644
--- a/Makefile
+++ b/Makefile
@@ -93,20 +93,23 @@ build-js-po: node-version-check
 
 build: locale
 
-locale: build-js-po
+merge-locale-catalogs: build-js-po
+	$(PIP) install Babel
 	cd src/sentry && sentry django makemessages -i static -l en
 	./bin/merge-catalogs en
+
+compile-locale:
 	./bin/find-good-catalogs src/sentry/locale/catalogs.json
 	cd src/sentry && sentry django compilemessages
 
-update-transifex: build-js-po
+locale: merge-locale-catalogs compile-locale
+
+sync-transifex: merge-locale-catalogs
 	$(PIP) install transifex-client
-	cd src/sentry && sentry django makemessages -i static -l en
-	./bin/merge-catalogs en
 	tx push -s
 	tx pull -a
-	./bin/find-good-catalogs src/sentry/locale/catalogs.json
-	cd src/sentry && sentry django compilemessages
+
+update-transifex: sync-transifex compile-locale
 
 build-platform-assets:
 	@echo "--> Building platform assets"
@@ -212,7 +215,7 @@ lint-js:
 	@echo ""
 
 
-.PHONY: develop build reset-db clean setup-git node-version-check install-yarn-pkgs install-sentry-dev build-js-po locale update-transifex build-platform-assets test-cli test-js test-styleguide test-python test-snuba test-symbolicator test-acceptance lint lint-python lint-js publish
+.PHONY: develop build reset-db clean setup-git node-version-check install-yarn-pkgs install-sentry-dev build-js-po locale compile-locale merge-locale-catalogs sync-transifex update-transifex build-platform-assets test-cli test-js test-styleguide test-python test-snuba test-symbolicator test-acceptance lint lint-python lint-js publish
 
 
 ############################
diff --git a/requirements-dev.txt b/requirements-dev.txt
index d1d2c5db3e..c51b90881a 100644
--- a/requirements-dev.txt
+++ b/requirements-dev.txt
@@ -1,4 +1,3 @@
-Babel
 docker>=3.7.0,<3.8.0
 exam>=0.5.1
 freezegun==0.3.11
diff --git a/src/sentry/integrations/pipeline.py b/src/sentry/integrations/pipeline.py
index d2b8ce896b..457f587add 100644
--- a/src/sentry/integrations/pipeline.py
+++ b/src/sentry/integrations/pipeline.py
@@ -126,10 +126,10 @@ class IntegrationPipeline(Pipeline):
                             return self._dialog_response(
                                 {
                                     "error": _(
-                                        "The provided %s account is linked to a different Sentry user. "
-                                        "To continue linking the current Sentry user, please use a different %s account."
+                                        "The provided %(proper_name)s account is linked to a different Sentry user. "
+                                        "To continue linking the current Sentry user, please use a different %(proper_name)s account."
                                     )
-                                    % (proper_name, proper_name)
+                                    % ({"proper_name": proper_name})
                                 },
                                 False,
                             )
diff --git a/src/sentry/locale/catalogs.json b/src/sentry/locale/catalogs.json
index a3855450a7..170a52f884 100644
--- a/src/sentry/locale/catalogs.json
+++ b/src/sentry/locale/catalogs.json
@@ -1,16 +1,16 @@
 {
   "supported_locales": [
-    "bg",
-    "cs",
-    "de",
-    "en",
-    "es",
-    "fi",
-    "fr",
-    "it",
-    "ja",
-    "ru",
-    "zh_CN",
+    "bg", 
+    "cs", 
+    "de", 
+    "en", 
+    "es", 
+    "fi", 
+    "fr", 
+    "it", 
+    "ja", 
+    "ru", 
+    "zh_CN", 
     "zh_TW"
   ]
 }
diff --git a/src/sentry/locale/de/LC_MESSAGES/django.po b/src/sentry/locale/de/LC_MESSAGES/django.po
index 8ba33e3142..8d748bc89c 100644
--- a/src/sentry/locale/de/LC_MESSAGES/django.po
+++ b/src/sentry/locale/de/LC_MESSAGES/django.po
@@ -451,8 +451,8 @@ msgstr[1] "Das Passwort ist zu kurz. Es muss mindestens %(min_length)d Zeichen l
 #, python-format
 msgid "Your password must contain at least %(min_length)d character."
 msgid_plural "Your password must contain at least %(min_length)d characters."
-msgstr[0] "Ihr Passwort muss mindestens %(min_length) Zeichen enthalten."
-msgstr[1] "Ihr Passwort muss mindestens %(min_length) Zeichen enthalten."
+msgstr[0] "Ihr Passwort muss mindestens %(min_length)d Zeichen enthalten."
+msgstr[1] "Ihr Passwort muss mindestens %(min_length)d Zeichen enthalten."
 
 #: auth/password_validation.py:123
 #, python-format
diff --git a/webpack.config.js b/webpack.config.js
index 3283593265..5e38db52b8 100644
--- a/webpack.config.js
+++ b/webpack.config.js
@@ -75,7 +75,7 @@ const distPath = env.SENTRY_STATIC_DIST_PATH || path.join(staticPrefix, 'dist');
  */
 if (env.SENTRY_EXTRACT_TRANSLATIONS === '1') {
   babelConfig.plugins.push([
-    'babel-gettext-extractor',
+    'module:babel-gettext-extractor',
     {
       fileName: 'build/javascript.po',
       baseDirectory: path.join(__dirname, 'src/sentry'),
