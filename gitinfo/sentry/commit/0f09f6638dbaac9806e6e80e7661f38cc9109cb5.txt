commit 0f09f6638dbaac9806e6e80e7661f38cc9109cb5
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Apr 22 16:28:44 2015 -0700

    Add pending access requests badge

diff --git a/src/sentry/templates/sentry/bases/organization.html b/src/sentry/templates/sentry/bases/organization.html
index 188466e595..f62846e26c 100644
--- a/src/sentry/templates/sentry/bases/organization.html
+++ b/src/sentry/templates/sentry/bases/organization.html
@@ -50,9 +50,14 @@
     {% endif %}
     {% if ACCESS.org_read %}
     <li class="{% block org_members_nav %}{% endblock %}">
-      <a href="{% url 'sentry-organization-members' organization.slug %}">
-        {% trans "Members" %}
-      </a>
+      {% with pending_requests=organization|count_pending_access_requests %}
+        <a href="{% url 'sentry-organization-members' organization.slug %}">
+          {% trans "Members" %}
+          {% if ACCESS.org_write and pending_requests %}
+            <span class="badge">{{ pending_requests }}</span>
+          {% endif %}
+        </a>
+      {% endwith %}
     </li>
     {% endif %}
     {% if ACCESS.org_delete %}
diff --git a/src/sentry/templatetags/sentry_helpers.py b/src/sentry/templatetags/sentry_helpers.py
index f9faee0cc6..e8b7eb5a3d 100644
--- a/src/sentry/templatetags/sentry_helpers.py
+++ b/src/sentry/templatetags/sentry_helpers.py
@@ -488,3 +488,12 @@ def needs_access_group_migration(user, organization):
     return AccessGroup.objects.filter(
         team__organization=organization
     ).exists()
+
+
+@register.filter
+def count_pending_access_requests(organization):
+    from sentry.models import OrganizationAccessRequest
+
+    return OrganizationAccessRequest.objects.filter(
+        team__organization=organization,
+    ).count()
