commit 58d3f192b1bf4bb4eb93fb86640568c6ec8ab85d
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Jan 25 10:21:48 2016 -0800

    Allow correctly specifying uwsgi-socket when uwsgi protocol

diff --git a/src/sentry/services/http.py b/src/sentry/services/http.py
index 8333e66d78..e81d663f15 100644
--- a/src/sentry/services/http.py
+++ b/src/sentry/services/http.py
@@ -44,7 +44,6 @@ class SentryHTTPServer(Service):
         options = (settings.SENTRY_WEB_OPTIONS or {}).copy()
         options.setdefault('module', 'sentry.wsgi:application')
         options.setdefault('protocol', 'http')
-        options.setdefault('http-socket', '%s:%s' % (self.host, self.port))
         options.setdefault('auto-procname', True)
         options.setdefault('procname-prefix-spaced', '[Sentry]')
         options.setdefault('workers', 3)
@@ -66,6 +65,8 @@ class SentryHTTPServer(Service):
         options.setdefault('virtualenv', sys.prefix)
         options.setdefault('log-format', '%(addr) - %(user) [%(ltime)] "%(method) %(uri) %(proto)" %(status) %(size) "%(referer)" "%(uagent)"')
 
+        options.setdefault('%s-socket' % options['protocol'], '%s:%s' % (self.host, self.port))
+
         # We only need to set uid/gid when stepping down from root, but if
         # we are trying to run as root, then ignore it entirely.
         uid = os.getuid()
