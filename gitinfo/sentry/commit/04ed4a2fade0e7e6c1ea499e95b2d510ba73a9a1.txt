commit 04ed4a2fade0e7e6c1ea499e95b2d510ba73a9a1
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Mar 1 11:01:29 2016 -0800

    Adding test file for 4704856b2e0d8c5aaedd8544ba685b07c2cd2793
    
    I apparently forgot to commit this long ago. It's been sitting on my
    computer.

diff --git a/tests/sentry/middleware/test_proxy.py b/tests/sentry/middleware/test_proxy.py
new file mode 100644
index 0000000000..ee96a4c49c
--- /dev/null
+++ b/tests/sentry/middleware/test_proxy.py
@@ -0,0 +1,21 @@
+from __future__ import absolute_import
+
+from exam import fixture
+from django.http import HttpResponse, StreamingHttpResponse
+
+from sentry.testutils import TestCase
+from sentry.middleware.proxy import ContentLengthHeaderMiddleware
+
+
+class ContentLengthHeaderMiddlewareTest(TestCase):
+    middleware = fixture(ContentLengthHeaderMiddleware)
+
+    def test_simple(self):
+        response = self.middleware.process_response(None, HttpResponse('lol'))
+        assert response['Content-Length'] == '3'
+        assert 'Transfer-Encoding' not in response
+
+    def test_streaming(self):
+        response = self.middleware.process_response(None, StreamingHttpResponse())
+        assert response['Transfer-Encoding'] == 'chunked'
+        assert 'Content-Length' not in response
