commit ae5fc7bd66a4d77bccb5bff07e6da1c61f89c5c4
Author: 0x6a6f7368 <joshua.r.li.98@gmail.com>
Date:   Thu May 31 15:33:17 2018 -0700

    build(travis): travis cache and nvm install hotfix (#8623)

diff --git a/.travis.yml b/.travis.yml
index ab99c9aa0d..914ca1fada 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -12,7 +12,7 @@ cache:
   yarn: true
   directories:
     - "${HOME}/virtualenv/python$(python -c 'import platform; print(platform.python_version())')"
-    - "${HOME}/.nvm/versions/node/v$(< .nvmrc)"
+    - "$NODE_DIR"
     - node_modules
     - "${HOME}/google-cloud-sdk"
 
@@ -32,6 +32,7 @@ env:
     - SOUTH_TESTS_MIGRATE=1
     - DJANGO_VERSION=">=1.6.11,<1.7"
     # node's version is pinned by .nvmrc and is autodetected by `nvm install`.
+    - NODE_DIR="${HOME}/.nvm/versions/node/v$(< .nvmrc)"
     - YARN_VERSION="1.3.2"
 
 script:
@@ -105,6 +106,7 @@ matrix:
         - redis-server
         - postgresql
       before_install:
+        - find "$NODE_DIR" -type d -empty -delete
         - nvm install
         - npm install -g "yarn@${YARN_VERSION}"
       install:
@@ -120,6 +122,7 @@ matrix:
     - python: 2.7
       env: TEST_SUITE=js
       before_install:
+        - find "$NODE_DIR" -type d -empty -delete
         - nvm install
         - npm install -g "yarn@${YARN_VERSION}"
       install:
