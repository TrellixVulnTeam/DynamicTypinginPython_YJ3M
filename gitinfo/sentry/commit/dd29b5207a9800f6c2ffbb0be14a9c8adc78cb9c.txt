commit dd29b5207a9800f6c2ffbb0be14a9c8adc78cb9c
Author: Max Bittker <maxbittker@gmail.com>
Date:   Thu Mar 8 16:29:33 2018 -0800

    fix(tests): update configure test (#7534)

diff --git a/tests/js/setup.js b/tests/js/setup.js
index 29f6be9709..d782178334 100644
--- a/tests/js/setup.js
+++ b/tests/js/setup.js
@@ -22,6 +22,8 @@ Enzyme.configure({disableLifecycleMethods: true});
 
 window.$ = window.jQuery = jQuery;
 window.sinon = sinon;
+window.scrollTo = sinon.spy();
+
 window.Raven = {
   captureMessage: sinon.spy(),
   captureException: sinon.spy(),
@@ -37,7 +39,7 @@ window.TestStubs = {
     setRouteLeaveHook: sinon.spy(),
     isActive: sinon.spy(),
     createHref: sinon.spy(),
-    location: sinon.spy(),
+    location: {},
   }),
 
   location: () => ({
diff --git a/tests/js/spec/views/onboarding/configure/__snapshots__/index.spec.jsx.snap b/tests/js/spec/views/onboarding/configure/__snapshots__/index.spec.jsx.snap
index db7bcbf378..37cd5915ec 100644
--- a/tests/js/spec/views/onboarding/configure/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/views/onboarding/configure/__snapshots__/index.spec.jsx.snap
@@ -16,7 +16,7 @@ exports[`Configure should render correctly render() should redirect to if no mat
     </h2>
     <ProjectContext
       orgId="testOrg"
-      projectId="testProject"
+      projectId="project-slug"
       style={
         Object {
           "marginBottom": 30,
@@ -30,7 +30,7 @@ exports[`Configure should render correctly render() should redirect to if no mat
             Object {
               "orgId": "testOrg",
               "platform": "other",
-              "projectId": "testProject",
+              "projectId": "project-slug",
             }
           }
           platformData={
@@ -56,7 +56,7 @@ exports[`Configure should render correctly render() should render platform docs
     Object {
       "orgId": "testOrg",
       "platform": "node",
-      "projectId": "testProject",
+      "projectId": "project-slug",
     }
   }
 >
@@ -75,7 +75,7 @@ exports[`Configure should render correctly render() should render platform docs
       </h2>
       <ProjectContext
         orgId="testOrg"
-        projectId="testProject"
+        projectId="project-slug"
         style={
           Object {
             "marginBottom": 30,
@@ -83,24 +83,184 @@ exports[`Configure should render correctly render() should render platform docs
         }
       >
         <SideEffect(DocumentTitle)
-          title="Test Project"
+          title="Project Name"
         >
           <DocumentTitle
-            title="Test Project"
+            title="Project Name"
           >
             <ProjectDocsContext>
-              <LoadingIndicator>
+              <ProjectInstallPlatform
+                linkPath={[Function]}
+                params={
+                  Object {
+                    "orgId": "testOrg",
+                    "platform": "node",
+                    "projectId": "project-slug",
+                  }
+                }
+                platformData={
+                  Object {
+                    "dsn": "https://9ed7cdc60:20e868d7b@sentry.io/300733",
+                    "dsnPublic": "https://9ed7cdc6581145bcb46044b77bd82aa0@sentry.io/300733",
+                    "platforms": Array [
+                      Object {
+                        "id": "javascript",
+                        "integrations": Array [
+                          Object {
+                            "id": "node",
+                            "link": "https://docs.getsentry.com/hosted/clients/csharp/",
+                            "name": "node",
+                            "type": "language",
+                          },
+                        ],
+                        "name": "js",
+                      },
+                    ],
+                  }
+                }
+              >
                 <div
-                  className="loading"
+                  className="install row"
                 >
                   <div
-                    className="loading-indicator"
-                  />
+                    className="install-content col-md-10"
+                  >
+                    <div
+                      className="box"
+                    >
+                      <div
+                        className="box-header"
+                      >
+                        <div
+                          className="pull-right"
+                        >
+                          <a
+                            className="btn btn-sm btn-default"
+                            href="https://docs.getsentry.com/hosted/clients/csharp/"
+                          >
+                            Full Documentation
+                          </a>
+                        </div>
+                        <h3>
+                          Configure node
+                        </h3>
+                      </div>
+                      <div
+                        className="box-content with-padding"
+                      >
+                        <p>
+                          <span
+                            key="8"
+                          >
+                            <span
+                              key="0"
+                            >
+                              
+             This is a quick getting started guide. For in-depth instructions
+             on integrating Sentry with 
+                            </span>
+                            <span
+                              key="2"
+                            >
+                              node
+                            </span>
+                            <span
+                              key="3"
+                            >
+                              , view
+             
+                            </span>
+                            <a
+                              href="https://docs.getsentry.com/hosted/clients/csharp/"
+                              key="5"
+                            >
+                              <span
+                                key="4"
+                              >
+                                our complete documentation
+                              </span>
+                            </a>
+                            <span
+                              key="6"
+                            >
+                              .
+            
+                            </span>
+                          </span>
+                        </p>
+                        <div
+                          dangerouslySetInnerHTML={
+                            Object {
+                              "__html": undefined,
+                            }
+                          }
+                        />
+                      </div>
+                    </div>
+                  </div>
                   <div
-                    className="loading-message"
-                  />
+                    className="install-sidebar col-md-2"
+                  >
+                    <LanguageNav
+                      active={true}
+                      key="javascript"
+                      name="js"
+                    >
+                      <div
+                        className="install-language-nav"
+                      >
+                        <ul
+                          className="list-group"
+                        >
+                          <li
+                            className="list-group-item list-group-header"
+                          >
+                            <a
+                              onClick={[Function]}
+                              style={
+                                Object {
+                                  "display": "block",
+                                }
+                              }
+                            >
+                              <span
+                                className="pull-right"
+                              >
+                                <span
+                                  className="icon-minus"
+                                />
+                              </span>
+                              <strong>
+                                js
+                              </strong>
+                            </a>
+                          </li>
+                          <span
+                            style={
+                              Object {
+                                "display": "block",
+                              }
+                            }
+                          >
+                            <Link
+                              className="list-group-item"
+                              key="node"
+                              to="/onboarding/testOrg/project-slug/configure/node/"
+                            >
+                              <a
+                                className="list-group-item"
+                                href="/onboarding/testOrg/project-slug/configure/node/"
+                              >
+                                node
+                              </a>
+                            </Link>
+                          </span>
+                        </ul>
+                      </div>
+                    </LanguageNav>
+                  </div>
                 </div>
-              </LoadingIndicator>
+              </ProjectInstallPlatform>
             </ProjectDocsContext>
           </DocumentTitle>
         </SideEffect(DocumentTitle)>
@@ -161,7 +321,7 @@ exports[`Configure should render correctly render() shouldn't redirect for a fou
     </h2>
     <ProjectContext
       orgId="testOrg"
-      projectId="testProject"
+      projectId="project-slug"
       style={
         Object {
           "marginBottom": 30,
@@ -175,7 +335,7 @@ exports[`Configure should render correctly render() shouldn't redirect for a fou
             Object {
               "orgId": "testOrg",
               "platform": "node",
-              "projectId": "testProject",
+              "projectId": "project-slug",
             }
           }
           platformData={
diff --git a/tests/js/spec/views/onboarding/configure/index.spec.jsx b/tests/js/spec/views/onboarding/configure/index.spec.jsx
index acd1b02586..aadf37b310 100644
--- a/tests/js/spec/views/onboarding/configure/index.spec.jsx
+++ b/tests/js/spec/views/onboarding/configure/index.spec.jsx
@@ -7,11 +7,50 @@ import SentryTypes from '../../../../../../src/sentry/static/sentry/app/proptype
 
 describe('Configure should render correctly', function() {
   let sandbox;
-  let stubbedApiRequest;
 
   beforeEach(function() {
     sandbox = sinon.sandbox.create();
-    stubbedApiRequest = sandbox.stub(Client.prototype, 'request');
+    Client.addMockResponse({
+      url: '/projects/testOrg/project-slug/',
+      body: TestStubs.Project(),
+    });
+    Client.addMockResponse({
+      url: '/projects/testOrg/project-slug/events/',
+      body: {},
+    });
+    Client.addMockResponse({
+      url: '/projects/testOrg/project-slug/members/',
+      body: [],
+    });
+    Client.addMockResponse({
+      url: '/projects/testOrg/project-slug/environments/',
+      body: {},
+    });
+    Client.addMockResponse({
+      url: '/projects/testOrg/project-slug/docs/',
+      body: {
+        dsn: 'https://9ed7cdc60:20e868d7b@sentry.io/300733',
+        platforms: [
+          {
+            integrations: [
+              {
+                type: 'language',
+                link: 'https://docs.getsentry.com/hosted/clients/csharp/',
+                id: 'node',
+                name: 'node',
+              },
+            ],
+            name: 'js',
+            id: 'javascript',
+          },
+        ],
+        dsnPublic: 'https://9ed7cdc6581145bcb46044b77bd82aa0@sentry.io/300733',
+      },
+    });
+    Client.addMockResponse({
+      url: '/projects/testOrg/project-slug/docs/node/',
+      body: {},
+    });
   });
 
   afterEach(function() {
@@ -22,7 +61,7 @@ describe('Configure should render correctly', function() {
     const baseProps = {
       next: () => {},
       params: {
-        projectId: 'testProject',
+        projectId: 'project-slug',
         orgId: 'testOrg',
       },
     };
@@ -34,7 +73,7 @@ describe('Configure should render correctly', function() {
       props.params.platform = 'node';
 
       let wrapper = shallow(<Configure {...props} />, {
-        context: {organization: {id: '1337', slug: 'testOrg', teams: [['testProject']]}},
+        context: {organization: {id: '1337', slug: 'testOrg', teams: [['project-slug']]}},
         childContextTypes: {organization: SentryTypes.Organization},
       });
 
@@ -65,7 +104,7 @@ describe('Configure should render correctly', function() {
           organization: {
             id: '1337',
             slug: 'testOrg',
-            teams: [['testProject']],
+            teams: [['project-slug']],
           },
         },
       });
@@ -82,13 +121,15 @@ describe('Configure should render correctly', function() {
 
       let wrapper = mount(<Configure {...props} />, {
         context: {
+          router: TestStubs.router(),
+          project: TestStubs.Project(),
           organization: {
             id: '1337',
             slug: 'testOrg',
             projects: [
               {
                 name: 'Test Project',
-                slug: 'testProject',
+                slug: 'project-slug',
                 id: 'testProject',
                 hasAccess: true,
                 teams: [
@@ -106,7 +147,7 @@ describe('Configure should render correctly', function() {
                 projects: [
                   {
                     name: 'Test Project',
-                    slug: 'testProject',
+                    slug: 'project-slug',
                     id: 'testProject',
                   },
                 ],
@@ -114,10 +155,14 @@ describe('Configure should render correctly', function() {
             ],
           },
         },
-        childContextTypes: {organization: SentryTypes.Organization},
+        childContextTypes: {
+          organization: SentryTypes.Organization,
+          project: SentryTypes.Project,
+          router: SentryTypes.object,
+        },
       });
+
       expect(wrapper).toMatchSnapshot();
-      expect(stubbedApiRequest.callCount).toEqual(5);
     });
   });
 });
