commit b1059ca675782f6e0419b4ddd661f151a37bd28c
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Wed May 2 15:37:52 2018 -0700

    feat(dashboard): Unified org-level header (#8290)

diff --git a/src/sentry/static/sentry/app/components/organizations/homeContainer.jsx b/src/sentry/static/sentry/app/components/organizations/homeContainer.jsx
index 27dad1444c..d8360cff47 100644
--- a/src/sentry/static/sentry/app/components/organizations/homeContainer.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/homeContainer.jsx
@@ -6,6 +6,7 @@ import Button from 'app/components/buttons/button';
 import OrganizationHomeSidebar from 'app/components/organizations/homeSidebar';
 import OrganizationState from 'app/mixins/organizationState';
 import ProjectSelector from 'app/components/projectHeader/projectSelector';
+import ProjectNav from 'app/views/organizationDashboard/projectNav';
 import Tooltip from 'app/components/tooltip';
 
 const HomeContainer = createReactClass({
@@ -20,63 +21,66 @@ const HomeContainer = createReactClass({
 
     return (
       <div className={`${this.props.className || ''} organization-home`}>
-        <div className="sub-header flex flex-container flex-vertically-centered">
-          <div>
-            <ProjectSelector organization={org} />
-          </div>
-          <div className="align-right hidden-xs">
-            {access.has('project:write') ? (
-              <Button
-                to={`/organizations/${org.slug}/projects/new/`}
-                priority="primary"
-                style={{marginRight: 5}}
-              >
-                {t('New Project')}
-              </Button>
-            ) : (
-              <Tooltip
-                title={t('You do not have enough permission to create new projects')}
-                tooltipOptions={{placement: 'bottom'}}
-              >
-                <Button
-                  priority="primary"
-                  disabled
-                  data-placement="bottom"
-                  style={{marginRight: 5}}
-                >
-                  {t('New Project')}
-                </Button>
-              </Tooltip>
-            )}
-            {!hasNewDashboardFeature ? (
-              access.has('team:write') ? (
-                <Button to={`/organizations/${org.slug}/teams/new/`} priority="primary">
-                  {t('New Team')}
-                </Button>
-              ) : (
-                <Tooltip
-                  title={t('You do not have enough permission to create new teams')}
-                  tooltipOptions={{placement: 'bottom'}}
-                >
-                  <Button priority="primary" disabled>
+        {!hasNewDashboardFeature ? (
+          <React.Fragment>
+            <div className="sub-header flex flex-container flex-vertically-centered">
+              <div>
+                <ProjectSelector organization={org} />
+              </div>
+              <div className="align-right hidden-xs">
+                {access.has('project:write') ? (
+                  <Button
+                    to={`/organizations/${org.slug}/projects/new/`}
+                    priority="primary"
+                    style={{marginRight: 5}}
+                  >
+                    {t('New Project')}
+                  </Button>
+                ) : (
+                  <Tooltip
+                    title={t('You do not have enough permission to create new projects')}
+                    tooltipOptions={{placement: 'bottom'}}
+                  >
+                    <Button
+                      priority="primary"
+                      disabled
+                      data-placement="bottom"
+                      style={{marginRight: 5}}
+                    >
+                      {t('New Project')}
+                    </Button>
+                  </Tooltip>
+                )}
+                {access.has('team:write') ? (
+                  <Button to={`/organizations/${org.slug}/teams/new/`} priority="primary">
                     {t('New Team')}
                   </Button>
-                </Tooltip>
-              )
-            ) : null}
-          </div>
-        </div>
-        {!hasNewDashboardFeature ? (
-          <div className="container">
-            <div className="content row">
-              <div className="col-md-2 org-sidebar">
-                <OrganizationHomeSidebar />
+                ) : (
+                  <Tooltip
+                    title={t('You do not have enough permission to create new teams')}
+                    tooltipOptions={{placement: 'bottom'}}
+                  >
+                    <Button priority="primary" disabled>
+                      {t('New Team')}
+                    </Button>
+                  </Tooltip>
+                )}
+              </div>
+            </div>
+            <div className="container">
+              <div className="content row">
+                <div className="col-md-2 org-sidebar">
+                  <OrganizationHomeSidebar />
+                </div>
+                <div className="col-md-10">{this.props.children}</div>
               </div>
-              <div className="col-md-10">{this.props.children}</div>
             </div>
-          </div>
+          </React.Fragment>
         ) : (
-          <div className="container">{this.props.children}</div>
+          <React.Fragment>
+            <ProjectNav />
+            <div className="container">{this.props.children}</div>
+          </React.Fragment>
         )}
       </div>
     );
diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/projectNav.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/projectNav.jsx
index 9420afc515..fd6f5bb03c 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard/projectNav.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/projectNav.jsx
@@ -11,6 +11,7 @@ import DropdownLink from 'app/components/dropdownLink';
 import MenuItem from 'app/components/menuItem';
 import {t} from 'app/locale';
 import Button from 'app/components/buttons/button';
+import ProjectSelector from 'app/components/projectHeader/projectSelector';
 import Tooltip from 'app/components/tooltip';
 
 const ProjectNav = createReactClass({
@@ -81,7 +82,7 @@ const ProjectNav = createReactClass({
     return (
       <StyledNav justify="space-between" p={2} align="center">
         <Box>
-          <strong>{t('Projects')}</strong>
+          <ProjectSelector organization={org} />
         </Box>
         <StyledDropdown>
           <DropdownLink title={title} anchorRight={true} caret={false}>
diff --git a/src/sentry/static/sentry/less/layout.less b/src/sentry/static/sentry/less/layout.less
index 1cd02251b1..3193a2e5f1 100644
--- a/src/sentry/static/sentry/less/layout.less
+++ b/src/sentry/static/sentry/less/layout.less
@@ -44,6 +44,20 @@ body {
     &.collapsed {
       padding-left: @sidebar-collapsed-width;
     }
+
+    /* This accounts for the old home icon, can be removed when old-#sidebar is */
+    .project-dropdown {
+      .dropdown-menu {
+        left: 0;
+      }
+    }
+
+    /* This is for organization level views e.g. "Assigned to me" */
+    .organization-home {
+      .container {
+        margin-top: 16px;
+      }
+    }
   }
 }
 
@@ -254,27 +268,6 @@ body.auth {
     }
   }
 
-  .project-select {
-    position: relative;
-
-    h3 {
-      font-size: 20px;
-      margin: 0;
-
-      a {
-        color: @gray-dark;
-
-        &:hover {
-          color: @gray-darkest;
-        }
-      }
-    }
-
-    .project-selected {
-      background-color: lighten(@blue-light, 30);
-    }
-  }
-
   .logo-logged-in {
     position: relative;
     padding-left: 38px;
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index 4910c546ef..03247f6ed0 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -1148,12 +1148,30 @@ table.integrations {
 * Project Dropdown
 * ============================================================================
 */
-
 .project-select {
+  position: relative;
+
   > a {
     color: @gray-darker;
   }
 
+  h3 {
+    font-size: 20px;
+    margin: 0;
+
+    a {
+      color: @gray-dark;
+
+      &:hover {
+        color: @gray-darkest;
+      }
+    }
+  }
+
+  .project-selected {
+    background-color: lighten(@blue-light, 30);
+  }
+
   .home-crumb {
     color: @gray-lighter !important;
     border-right: 1px solid @trim;
