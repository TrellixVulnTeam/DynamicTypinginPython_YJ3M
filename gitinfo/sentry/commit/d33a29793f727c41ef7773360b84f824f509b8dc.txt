commit d33a29793f727c41ef7773360b84f824f509b8dc
Author: Dan Fuller <dfuller@sentry.io>
Date:   Tue May 28 13:01:46 2019 -0700

    fix(api): Fix duplicates in incident list (SEN-699)
    
    Checking for multiple projects can cause duplication due to joins.

diff --git a/src/sentry/incidents/models.py b/src/sentry/incidents/models.py
index e47c284a2a..030b76f1a7 100644
--- a/src/sentry/incidents/models.py
+++ b/src/sentry/incidents/models.py
@@ -64,7 +64,7 @@ class IncidentManager(BaseManager):
         return self.filter(
             organization=organization,
             projects__in=projects,
-        )
+        ).distinct()
 
     @TimedRetryPolicy.wrap(timeout=5, exceptions=(IntegrityError, ))
     def create(self, organization, **kwargs):
diff --git a/tests/sentry/incidents/test_models.py b/tests/sentry/incidents/test_models.py
index a6e93e5cc3..6756a5e2d4 100644
--- a/tests/sentry/incidents/test_models.py
+++ b/tests/sentry/incidents/test_models.py
@@ -58,6 +58,10 @@ class FetchForOrganizationTest(TestCase):
             self.organization,
             [project],
         ))
+        assert [incident] == list(Incident.objects.fetch_for_organization(
+            self.organization,
+            [self.project, project],
+        ))
 
 
 class IncidentCreationTest(TestCase):
