commit a7e2503aebcc4be685cc0a69401875e9a7be38fe
Author: Chris Clark <christopherchristopherclark@gmail.com>
Date:   Thu Apr 4 12:10:23 2019 -0700

    fix(project-selector): Remove add project button for folks who cannot add a project (#12521)
    
    * remove add project button for folks who cannot add a project
    
    * disable instead of hiding
    
    * couple nits from review

diff --git a/src/sentry/static/sentry/app/components/projectSelector.jsx b/src/sentry/static/sentry/app/components/projectSelector.jsx
index 0b14ea6b42..75b5c5e8c3 100644
--- a/src/sentry/static/sentry/app/components/projectSelector.jsx
+++ b/src/sentry/static/sentry/app/components/projectSelector.jsx
@@ -18,7 +18,6 @@ import IdBadge from 'app/components/idBadge';
 import SentryTypes from 'app/sentryTypes';
 import space from 'app/styles/space';
 import theme from 'app/utils/theme';
-import Tooltip from 'app/components/tooltip';
 import withProjects from 'app/utils/withProjects';
 
 class ProjectSelector extends React.Component {
@@ -211,11 +210,16 @@ class ProjectSelector extends React.Component {
         virtualizedHeight={theme.headerSelectorRowHeight}
         emptyHidesInput
         inputActions={() => (
-          <Tooltip title="Add a project">
-            <AddButton to={`/organizations/${org.slug}/projects/new`} size="xsmall">
-              <StyledAddIcon src="icon-circle-add" /> project
-            </AddButton>
-          </Tooltip>
+          <AddButton
+            disabled={!hasProjectWrite}
+            to={`/organizations/${org.slug}/projects/new/`}
+            size="xsmall"
+            title={
+              hasProjectWrite ? null : t("You don't have permission to add a project")
+            }
+          >
+            <StyledAddIcon src="icon-circle-add" /> {t('Project')}
+          </AddButton>
         )}
         menuFooter={renderProps => {
           const renderedFooter =
@@ -291,14 +295,18 @@ class ProjectSelectorItem extends React.PureComponent {
     };
   }
 
-  componentWillReceiveProps(nextProps) {
+  componentDidUpdate(nextProps) {
     if (nextProps.project.isBookmarked !== this.props.project.isBookmarked) {
-      this.setState({
-        bookmarkHasChanged: true,
-      });
+      this.setBookmarkHasChanged();
     }
   }
 
+  setBookmarkHasChanged() {
+    this.setState({
+      bookmarkHasChanged: true,
+    });
+  }
+
   handleMultiSelect = e => {
     const {project, onMultiSelect} = this.props;
     onMultiSelect(project, e);
