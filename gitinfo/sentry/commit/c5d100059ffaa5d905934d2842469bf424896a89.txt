commit c5d100059ffaa5d905934d2842469bf424896a89
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Oct 22 15:48:12 2015 +0100

    Handle empty array value for frame

diff --git a/src/sentry/interfaces/exception.py b/src/sentry/interfaces/exception.py
index 36bcc31451..7636d7cfca 100644
--- a/src/sentry/interfaces/exception.py
+++ b/src/sentry/interfaces/exception.py
@@ -184,6 +184,9 @@ class Exception(Interface):
                 continue
 
             for frame in exc['stacktrace'].get('frames', []):
+                # XXX(dcramer): handle PHP sending an empty array for a frame
+                if not isinstance(frame, dict):
+                    continue
                 if frame.get('in_app') is True:
                     app_frames += 1
                 else:
diff --git a/src/sentry/interfaces/stacktrace.py b/src/sentry/interfaces/stacktrace.py
index 34386bcc87..7705f4feaa 100644
--- a/src/sentry/interfaces/stacktrace.py
+++ b/src/sentry/interfaces/stacktrace.py
@@ -499,7 +499,8 @@ class Stacktrace(Interface):
             has_system_frames = cls.data_has_system_frames(data)
 
         frame_list = [
-            Frame.to_python(f)
+            # XXX(dcramer): handle PHP sending an empty array for a frame
+            Frame.to_python(f or {})
             for f in data['frames']
         ]
 
@@ -528,6 +529,9 @@ class Stacktrace(Interface):
     def data_has_system_frames(cls, data):
         system_frames = 0
         for frame in data['frames']:
+            # XXX(dcramer): handle PHP sending an empty array for a frame
+            if not isinstance(frame, dict):
+                continue
             if not frame.get('in_app'):
                 system_frames += 1
 
