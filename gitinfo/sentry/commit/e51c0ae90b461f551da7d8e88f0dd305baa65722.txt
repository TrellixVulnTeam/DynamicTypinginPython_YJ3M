commit e51c0ae90b461f551da7d8e88f0dd305baa65722
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jan 31 16:30:04 2012 -0800

    TODO about why coreapi isnt good enough

diff --git a/sentry/coreapi.py b/sentry/coreapi.py
index 51fbd8e3d8..4a3a35cfec 100644
--- a/sentry/coreapi.py
+++ b/sentry/coreapi.py
@@ -5,6 +5,10 @@ sentry.coreapi
 :copyright: (c) 2010 by the Sentry Team, see AUTHORS for more details.
 :license: BSD, see LICENSE for more details.
 """
+# TODO: We should make the API a class, and UDP/HTTP just inherit from it
+#       This will make it so we can more easily control logging with various
+#       metadata (rather than generic log messages which arent useful).
+
 from datetime import datetime
 import base64
 import logging
diff --git a/sentry/services/udp.py b/sentry/services/udp.py
index 9907ecfcfb..eeb02a0858 100644
--- a/sentry/services/udp.py
+++ b/sentry/services/udp.py
@@ -40,7 +40,16 @@ class SentryUDPServer(Service):
                 data = decode_and_decompress_data(data)
             data = safely_load_json_string(data)
 
-            validate_data(project, data)
+            try:
+                validate_data(project, data)
+            except InvalidTimestamp:
+                # Log the error, remove the timestamp, and revalidate
+                logger.error('Client %r passed an invalid value for timestamp %r' % (
+                    data['timestamp'],
+                    client or '<unknown client>',
+                ))
+                del data['timestamp']
+                validate_data(project, data)
 
             return insert_data_to_database(data)
         except APIError, error:
