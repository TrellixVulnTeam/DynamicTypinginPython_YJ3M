commit 0b9573d74d952a0b2c2c575f16e1717f13cae639
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Apr 22 16:39:00 2015 -0700

    Improve audit log support on join/leave team

diff --git a/src/sentry/models/auditlogentry.py b/src/sentry/models/auditlogentry.py
index 89fb5f20da..9409336dc8 100644
--- a/src/sentry/models/auditlogentry.py
+++ b/src/sentry/models/auditlogentry.py
@@ -130,11 +130,17 @@ class AuditLogEntry(Model):
         elif self.event == AuditLogEntryEvent.MEMBER_JOIN_TEAM:
             if self.target_user == self.actor:
                 return 'joined team %s' % (self.data['team_slug'],)
-            return 'added %s to team %s' % (self.data.get('email'), self.data['team_slug'],)
+            return 'added %s to team %s' % (
+                self.data.get('email') or self.target_user.get_display_name(),
+                self.data['team_slug'],
+            )
         elif self.event == AuditLogEntryEvent.MEMBER_LEAVE_TEAM:
             if self.target_user == self.actor:
                 return 'left team %s' % (self.data['team_slug'],)
-            return 'removed %s from team %s' % (self.data.get('email'), self.data['team_slug'],)
+            return 'removed %s from team %s' % (
+                self.data.get('email') or self.target_user.get_display_name(),
+                self.data['team_slug'],
+            )
 
         elif self.event == AuditLogEntryEvent.ORG_ADD:
             return 'created the organization'
