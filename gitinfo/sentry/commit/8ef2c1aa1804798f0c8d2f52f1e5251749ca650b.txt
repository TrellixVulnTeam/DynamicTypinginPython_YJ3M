commit 8ef2c1aa1804798f0c8d2f52f1e5251749ca650b
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Fri Jan 12 15:44:36 2018 -0800

    fix(invites): Use correct project team relation in org member invite

diff --git a/src/sentry/templates/sentry/accept-organization-invite.html b/src/sentry/templates/sentry/accept-organization-invite.html
index 7f5f9b32b4..626974914e 100644
--- a/src/sentry/templates/sentry/accept-organization-invite.html
+++ b/src/sentry/templates/sentry/accept-organization-invite.html
@@ -30,9 +30,9 @@
         {% if project_count %}
           <p>{% blocktrans %}You have been invited to join this organization, which manages <strong>{{ project_count }}</strong> project(s), including:{% endblocktrans %}</p>
           <ul>
-            {% for project in project_list|slice:"5" %}
+            {% for project, team in project_team_list|slice:"5" %}
               <li>
-                {{ project.team.name }} &#47; {{ project.name }}
+                {{ team.name }} &#47; {{ project.name }}
               </li>
             {% endfor %}
           </ul>
diff --git a/src/sentry/web/frontend/accept_organization_invite.py b/src/sentry/web/frontend/accept_organization_invite.py
index e6dbbc05ed..1310edb8c3 100644
--- a/src/sentry/web/frontend/accept_organization_invite.py
+++ b/src/sentry/web/frontend/accept_organization_invite.py
@@ -6,7 +6,7 @@ from django.core.urlresolvers import reverse
 from django.utils.crypto import constant_time_compare
 from django.utils.translation import ugettext_lazy as _
 
-from sentry.models import (AuditLogEntryEvent, OrganizationMember, Project)
+from sentry.models import (AuditLogEntryEvent, OrganizationMember, Project, ProjectTeam)
 from sentry.signals import member_joined
 from sentry.utils import auth
 from sentry.web.frontend.base import BaseView
@@ -62,12 +62,20 @@ class AcceptOrganizationInviteView(BaseView):
         qs = Project.objects.filter(
             organization=organization,
         )
-        project_list = list(qs.select_related('team')[:25])
+        project_list = list(qs[:25])
+        project_teams = list(ProjectTeam.objects.filter(
+            project__in=project_list,
+        ).select_related('team'))
+        projects_by_id = {p.id: p for p in project_list}
+
+        project_team_context = [
+            (projects_by_id[pt.project_id], pt.team) for pt in project_teams
+        ]
         project_count = qs.count()
 
         context = {
             'organization': om.organization,
-            'project_list': project_list,
+            'project_team_list': project_team_context,
             'project_count': project_count,
             'needs_authentication': not request.user.is_authenticated(),
             'logout_url': '{}?next={}'.format(
