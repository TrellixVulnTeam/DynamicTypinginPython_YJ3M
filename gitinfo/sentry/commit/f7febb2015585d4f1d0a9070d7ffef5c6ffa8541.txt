commit f7febb2015585d4f1d0a9070d7ffef5c6ffa8541
Author: Danny Lee <dlee@sentry.io>
Date:   Fri Feb 21 16:04:08 2020 -0800

    feat(sso): Surface Active Directory as a SSO provider (#16960)

diff --git a/setup.py b/setup.py
index ac3efdb5a6..426af0a825 100755
--- a/setup.py
+++ b/setup.py
@@ -112,6 +112,7 @@ setup(
         "console_scripts": ["sentry = sentry.runner:main"],
         "sentry.apps": [
             # TODO: This can be removed once the getsentry tests no longer check for this app
+            "auth_activedirectory = sentry.auth.providers.saml2.activedirectory",
             "auth_auth0 = sentry.auth.providers.saml2.auth0",
             "auth_github = sentry.auth.providers.github",
             "auth_okta = sentry.auth.providers.saml2.okta",
diff --git a/src/sentry/auth/providers/saml2/activedirectory/__init__.py b/src/sentry/auth/providers/saml2/activedirectory/__init__.py
new file mode 100644
index 0000000000..39f4af8d3f
--- /dev/null
+++ b/src/sentry/auth/providers/saml2/activedirectory/__init__.py
@@ -0,0 +1,3 @@
+from __future__ import absolute_import
+
+default_app_config = "sentry.auth.providers.saml2.activedirectory.apps.Config"
diff --git a/src/sentry/auth/providers/saml2/activedirectory/apps.py b/src/sentry/auth/providers/saml2/activedirectory/apps.py
new file mode 100644
index 0000000000..ebbdb4d648
--- /dev/null
+++ b/src/sentry/auth/providers/saml2/activedirectory/apps.py
@@ -0,0 +1,14 @@
+from __future__ import absolute_import
+
+from django.apps import AppConfig
+
+
+class Config(AppConfig):
+    name = "sentry.auth.providers.saml2.activedirectory"
+
+    def ready(self):
+        from sentry.auth import register
+
+        from .provider import ActiveDirectorySAML2Provider
+
+        register("active-directory", ActiveDirectorySAML2Provider)
diff --git a/src/sentry/auth/providers/saml2/activedirectory/provider.py b/src/sentry/auth/providers/saml2/activedirectory/provider.py
new file mode 100644
index 0000000000..4b4b5e5945
--- /dev/null
+++ b/src/sentry/auth/providers/saml2/activedirectory/provider.py
@@ -0,0 +1,7 @@
+from __future__ import absolute_import, print_function
+
+from sentry.auth.providers.saml2.generic.provider import GenericSAML2Provider
+
+
+class ActiveDirectorySAML2Provider(GenericSAML2Provider):
+    name = "Active Directory"
diff --git a/src/sentry/auth/providers/saml2/activedirectory/views.py b/src/sentry/auth/providers/saml2/activedirectory/views.py
new file mode 100644
index 0000000000..58fcacfad1
--- /dev/null
+++ b/src/sentry/auth/providers/saml2/activedirectory/views.py
@@ -0,0 +1,11 @@
+from __future__ import absolute_import, print_function
+
+from sentry.auth.providers.saml2.generic.view import GenericSAML2View
+
+
+class ActiveDirectorySAML2View(GenericSAML2View):
+    """
+    Active Directory is a subset of our generic SAML2 implementation. However,
+    this may not be obvious to end users. This inheritence class allows us to
+    explicitly surface this option to them.
+    """
diff --git a/src/sentry/static/sentry/app/views/settings/organizationAuth/providerItem.jsx b/src/sentry/static/sentry/app/views/settings/organizationAuth/providerItem.jsx
index 5a5f5c94af..f88e237618 100644
--- a/src/sentry/static/sentry/app/views/settings/organizationAuth/providerItem.jsx
+++ b/src/sentry/static/sentry/app/views/settings/organizationAuth/providerItem.jsx
@@ -69,7 +69,11 @@ export default class ProviderItem extends React.PureComponent {
         {({hasFeature, features, renderDisabled, renderInstallButton}) => (
           <PanelItem alignItems="center">
             <ProviderInfo>
-              <ProviderLogo className={`provider-logo ${provider.name.toLowerCase()}`} />
+              <ProviderLogo
+                className={`provider-logo ${provider.name
+                  .replace(/\s/g, '')
+                  .toLowerCase()}`}
+              />
               <div>
                 <ProviderName>{provider.name}</ProviderName>
                 <ProviderDescription>
diff --git a/src/sentry/static/sentry/less/auth.less b/src/sentry/static/sentry/less/auth.less
index d6399861b1..4bdf031d4e 100644
--- a/src/sentry/static/sentry/less/auth.less
+++ b/src/sentry/static/sentry/less/auth.less
@@ -63,6 +63,10 @@ section.org-login {
     background-image: url(../images/logos/logo-rippling.svg);
   }
 
+  &.activedirectory {
+    background-image: url(../images/logos/logo-microsoft.svg);
+  }
+
   &.saml2 {
     background-image: url(../images/logos/logo-saml2.svg);
   }
