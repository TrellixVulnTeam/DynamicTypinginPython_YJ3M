commit c1766f0415978d8e41ce3371edb7b2100728223e
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Nov 29 19:58:30 2013 -0800

    Protocol version 5

diff --git a/CHANGES b/CHANGES
index ddcb369a3c..62ceda3640 100644
--- a/CHANGES
+++ b/CHANGES
@@ -1,7 +1,7 @@
 Version 6.4.0
 -------------
 
-Some major backend changes are introduced in Sentry 6.3.0.
+Some major backend changes are introduced in Sentry 6.4.0.
 
 Search
 ======
@@ -27,6 +27,13 @@ Additional Changes
 - Charts now show tooltips describing the datapoint.
 - JavaScript sourcemaps now support embedded sources.
 - Stream annotations can now be customized to show any tags (not just number of users).
+- Stacktrace frames now get truncated down to a maximum length of 50.
+
+Protocol Version 5
+==================
+
+- sentry_version should be sent as '5'.
+- The stacktrace interface now accepts a 'frames_omitted' tuple.
 
 Version 6.3.0
 -------------
diff --git a/docs/developer/client/index.rst b/docs/developer/client/index.rst
index abe4a0ce37..2ed81867cf 100644
--- a/docs/developer/client/index.rst
+++ b/docs/developer/client/index.rst
@@ -353,7 +353,7 @@ An authentication header is expected to be sent along with the message body, whi
 
 .. data:: sentry_version
 
-    The protocol version. This should be sent as the value '4'.
+    The protocol version. This should be sent as the value '5'.
 
 .. data:: sentry_client
 
diff --git a/src/sentry/testutils.py b/src/sentry/testutils.py
index 7d16b601c1..10c3b88e46 100644
--- a/src/sentry/testutils.py
+++ b/src/sentry/testutils.py
@@ -40,7 +40,7 @@ LEGACY_DATA = pickle.loads(decompress("""eJy9WW1v20YS/q5fwfqLpECluMvXFSzjgKK9Bri
 def get_auth_header(client, api_key=None, secret_key=None):
     header = [
         ('sentry_client', client),
-        ('sentry_version', '4'),
+        ('sentry_version', '5'),
     ]
 
     if api_key:
diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 3901b97a08..9ff7dcb119 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -103,7 +103,7 @@ class APIView(BaseView):
         server_version = auth_vars.get('sentry_version', '1.0')
         client = auth_vars.get('sentry_client', request.META.get('HTTP_USER_AGENT'))
 
-        if server_version not in ('2.0', '3', '4'):
+        if server_version not in ('2.0', '3', '4', '5'):
             raise APIError('Client/server version mismatch: Unsupported protocol version (%s)' % server_version)
 
         if not client:
