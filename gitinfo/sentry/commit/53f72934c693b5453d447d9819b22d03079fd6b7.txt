commit 53f72934c693b5453d447d9819b22d03079fd6b7
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Jan 13 14:54:39 2012 -0800

    Implement handle_before_events template tag, and get_value_bulk on ProjectOption

diff --git a/sentry/manager.py b/sentry/manager.py
index 804a8c7771..c65c53f57e 100644
--- a/sentry/manager.py
+++ b/sentry/manager.py
@@ -533,6 +533,11 @@ class InstanceMetaManager(models.Manager):
         super(InstanceMetaManager, self).__init__(*args, **kwargs)
         self.field_name = field_name
 
+    def get_value_bulk(self, instances, key):
+        return dict(self.filter(**{
+            '%s__in' % self.field_name: instances,
+        }).values_list(self.field_name, 'value'))
+
     def get_value(self, instance, key, default=NOTSET):
         result = self.get_all_values(instance)
         if default is self.NOTSET:
diff --git a/sentry/templates/sentry/groups/group_list.html b/sentry/templates/sentry/groups/group_list.html
index 93211605f9..2d359300b8 100644
--- a/sentry/templates/sentry/groups/group_list.html
+++ b/sentry/templates/sentry/groups/group_list.html
@@ -98,6 +98,7 @@
     </ul>
 
     {% if event_list.paginator.objects %}
+        {% handle_before_events request event_list.paginator.objects %}
         <ul class="messages" id="event_list">
             {% for group, is_bookmarked in event_list.paginator.objects|as_bookmarks:request.user %}
                 {% include "sentry/partial/_group.html" %}
diff --git a/sentry/templatetags/sentry_helpers.py b/sentry/templatetags/sentry_helpers.py
index b1d43533a3..2a886bc721 100644
--- a/sentry/templatetags/sentry_helpers.py
+++ b/sentry/templatetags/sentry_helpers.py
@@ -152,6 +152,13 @@ def get_tags(group, request):
         yield tag
 
 
+@register.simple_tag
+def handle_before_events(request, event_list):
+    for inst in request.plugins:
+        inst.before_events(event_list)
+    return ''
+
+
 @register.filter
 def timesince(value):
     from django.template.defaultfilters import timesince
