commit 6314e29ef0762f33cace30711812c63e53223342
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue Feb 28 23:32:17 2017 +0100

    Updated processing bar

diff --git a/src/sentry/static/sentry/app/views/stream.jsx b/src/sentry/static/sentry/app/views/stream.jsx
index 23ff771248..9dbfd48cb7 100644
--- a/src/sentry/static/sentry/app/views/stream.jsx
+++ b/src/sentry/static/sentry/app/views/stream.jsx
@@ -511,24 +511,33 @@ const Stream = React.createClass({
 
   renderProcessingIssuesHint() {
     let pi = this.state.processingIssues;
+    pi = {
+      hasIssues: true,
+      numIssues: 0,
+      lastSeen: new Date(),
+      resolveableIssues: 42,
+      hasMoreResolveableIssues: false,
+      issuesProcessing: 23,
+    };
     if (!pi || this.showingProcessingIssues()) {
       return null;
     }
 
     let {orgId, projectId} = this.props.params;
     let link = `/${orgId}/${projectId}/settings/processing-issues/`;
-    let showLink = false;
-    let label = null;
+    let showButton = false;
     let className = {
-      'processing-issues': true
+      'processing-issues': true,
+      'alert': true
     };
     let issues = null;
     let lastEvent = null;
+    let icon = null;
 
     if (pi.numIssues > 0) {
-      label = t('Unprocessed Events: ');
-      issues = tn('there is %d issue blocking event processing',
-                  'there are %d issues blocking event processing',
+      icon = <span className="icon icon-alert" />;
+      issues = tn('There is %d issue blocking event processing',
+                  'There are %d issues blocking event processing',
                   pi.numIssues);
       lastEvent = (
         <span className="last-seen">({tct('last event from [ago]', {
@@ -536,19 +545,21 @@ const Stream = React.createClass({
         })})
         </span>
       );
-      className.failing = true;
-      showLink = true;
+      className['alert-error'] = true;
+      showButton = true;
     } else if (pi.issuesProcessing > 0) {
-      className.processing = true;
-      label = tn('Reprocessing %d event …',
+      icon = <span className="icon icon-processing play" />;
+      className['alert-info'] = true;
+      issues = tn('Reprocessing %d event …',
         'Reprocessing %d events …',
         pi.issuesProcessing);
     } else if (pi.resolveableIssues > 0) {
-      className.pending = true;
-      label = tn('%d event pending reprocessing.',
-        '%d events pending reprocessing.',
+      icon = <span className="icon icon-processing" />;
+      className['alert-warning'] = true;
+      issues = tn('There is %d event pending reprocessing.',
+        'There are %d events pending reprocessing.',
         pi.resolveableIssues);
-      showLink = true;
+      showButton = true;
     } else {
       /* we should not go here but what do we know */
       return null;
@@ -556,14 +567,16 @@ const Stream = React.createClass({
 
     return (
       <div className={classNames(className)}>
-        <strong>{label}</strong>
-        {issues}
+        {showButton &&
+          <Link to={link} className="btn btn-default btn-sm pull-right">{
+            t('Show details')}</Link>
+        }
+        {icon}
+        {' '}
+        <strong>{issues}</strong>
         {' '}
         {lastEvent}
         {' '}
-        {showLink &&
-          <Link to={link}>{t('show details')}</Link>
-        }
       </div>
     );
   },
diff --git a/src/sentry/static/sentry/less/fonts.less b/src/sentry/static/sentry/less/fonts.less
index 85e509825a..c99b2a3921 100644
--- a/src/sentry/static/sentry/less/fonts.less
+++ b/src/sentry/static/sentry/less/fonts.less
@@ -50,6 +50,133 @@
   -moz-osx-font-smoothing: grayscale;
 }
 
+.icon-processing {
+  position: relative;
+  left: -3px;
+
+  &:before {
+    display: inline-block;
+    content: "\e60b";
+    position: relative;
+    top: 2px;
+    -ms-transform: rotate(45deg);
+    -moz-transform: rotate(45deg);
+    -webkit-transform: rotate(45deg);
+    -o-transform: rotate(45deg);
+    transform: rotate(45deg);
+  }
+  &:after {
+    display: block;
+    position: absolute;
+    font-size: 10px;
+    width: 10px;
+    height: 10px;
+    line-height: 10px;
+    content: "\e60b";
+    top: -4px;
+    right: -6px;
+    -ms-transform: rotate(-20deg);
+    -moz-transform: rotate(-20deg);
+    -webkit-transform: rotate(-20deg);
+    -o-transform: rotate(-20deg);
+    transform: rotate(-20deg);
+  }
+
+  &.play {
+    &:before {
+      .clockwise;
+    }
+    &:after {
+      .counter-clockwise;
+    }
+  }
+}
+
+@-webkit-keyframes clockwise {
+  from {
+    -ms-transform: rotate(0deg);
+    -moz-transform: rotate(0deg);
+    -webkit-transform: rotate(0deg);
+    -o-transform: rotate(0deg);
+    transform: rotate(0deg);
+  }
+  to {
+    -ms-transform: rotate(360deg);
+    -moz-transform: rotate(360deg);
+    -webkit-transform: rotate(360deg);
+    -o-transform: rotate(360deg);
+    transform: rotate(360deg);
+  }
+}
+@keyframes clockwise {
+  from {
+    -ms-transform: rotate(0deg);
+    -moz-transform: rotate(0deg);
+    -webkit-transform: rotate(0deg);
+    -o-transform: rotate(0deg);
+    transform: rotate(0deg);
+  }
+  to {
+    -ms-transform: rotate(360deg);
+    -moz-transform: rotate(360deg);
+    -webkit-transform: rotate(360deg);
+    -o-transform: rotate(360deg);
+    transform: rotate(360deg);
+  }
+}
+
+@-webkit-keyframes counter-clockwise {
+  from {
+    -ms-transform: rotate(-20deg);
+    -moz-transform: rotate(-20deg);
+    -webkit-transform: rotate(-20deg);
+    -o-transform: rotate(-20deg);
+    transform: rotate(-20deg);
+  }
+  to {
+    -ms-transform: rotate(-380deg);
+    -moz-transform: rotate(-380deg);
+    -webkit-transform: rotate(-380deg);
+    -o-transform: rotate(-380deg);
+    transform: rotate(-380deg);
+  }
+}
+@keyframes counter-clockwise {
+  from {
+    -ms-transform: rotate(-20deg);
+    -moz-transform: rotate(-20deg);
+    -webkit-transform: rotate(-20deg);
+    -o-transform: rotate(-20deg);
+    transform: rotate(-20deg);
+  }
+  to {
+    -ms-transform: rotate(-380deg);
+    -moz-transform: rotate(-380deg);
+    -webkit-transform: rotate(-380deg);
+    -o-transform: rotate(-380deg);
+    transform: rotate(-380deg);
+  }
+}
+
+.clockwise {
+  -webkit-animation: clockwise 2s linear infinite;
+  -moz-animation: clockwise 2s linear infinite;
+  -ms-animation: clockwise 2s linear infinite;
+  -o-animation: clockwise 2s linear infinite;
+  animation: clockwise 2s linear infinite;
+}
+
+.counter-clockwise {
+  -webkit-animation: counter-clockwise 1s linear infinite;
+  -moz-animation: counter-clockwise 1s linear infinite;
+  -ms-animation: counter-clockwise 1s linear infinite;
+  -o-animation: counter-clockwise 1s linear infinite;
+  animation: counter-clockwise 1s linear infinite;
+}
+
+// [[IMPORTANT]] Everything after this line is autogenerated
+
+
 .icon-wrench:before {
   content: "\e90d";
 }
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index f71a2261fe..340e7527a7 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -2289,6 +2289,10 @@ ul.faces {
     margin-bottom: 20px;
     border-radius: 3px;
   }
+
+  .btn-default {
+    border-color: desaturate(darken(@alert-warning-border-color, 10), 10);
+  }
 }
 
 .alert-block {
diff --git a/src/sentry/static/sentry/less/stream.less b/src/sentry/static/sentry/less/stream.less
index 000a4a9935..8a77ed3c0a 100644
--- a/src/sentry/static/sentry/less/stream.less
+++ b/src/sentry/static/sentry/less/stream.less
@@ -199,43 +199,29 @@
   padding-left: 0;
   font-size: 14px;
   font-weight: 400;
-  padding: 5px 10px;
-  text-align: center;
+  padding: 10px 20px 8px;
 
-  &.failing {
-    border: 1px solid @orange;
-    background: lighten(@orange-light, 23%);
-    color: @orange-dark;
-    a {
-      color: @orange-dark;
-    }
-  }
+  // TODO(ckj) make this a component-level option
+  &.alert-error {
+    .icon-alert{
+      opacity: 1;
+      color: #F2261E;
+      margin-top: 1px;
 
-  &.pending {
-    border: 1px solid @purple-light;
-    background: lighten(@purple-lightest, 15%);
-    color: @purple-dark;
-    a {
-      color: @purple-dark;
+      &:before {
+        content: "\E906";
+      }
     }
   }
 
-  &.processing {
-    border: 1px solid @green;
-    background: lighten(@green-light, 33%);
-    color: @green-dark;
-    a {
-      color: @green-dark;
+  &.alert-info {
+    .icon {
+      display: inline-block;
     }
   }
 
-  a {
-    font-weight: bold;
-    text-decoration: underline;
-  }
-
-  .last-seen {
-    font-style: italic;
+  .pull-right {
+    margin-top: -5px;
   }
 }
 
