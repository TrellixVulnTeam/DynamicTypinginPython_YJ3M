commit 2afdd52c48d71e643126882b6e165e3c42a6e1e4
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Mon Dec 3 14:20:11 2018 -0800

    perf(ui): Add `shouldComponentUpdate` to Sidebar (#10415)
    
    Ignore `location` from router when deciding to re-render, it only needs to re-render when
    route changes (instead of, for example, a query param changing).

diff --git a/src/sentry/static/sentry/app/components/sidebar/index.jsx b/src/sentry/static/sentry/app/components/sidebar/index.jsx
index 57b8710290..a99ad26f09 100644
--- a/src/sentry/static/sentry/app/components/sidebar/index.jsx
+++ b/src/sentry/static/sentry/app/components/sidebar/index.jsx
@@ -1,3 +1,4 @@
+import {isEqual} from 'lodash';
 import {withRouter} from 'react-router';
 import {ThemeProvider} from 'emotion-theming';
 import $ from 'jquery';
@@ -38,6 +39,8 @@ class Sidebar extends React.Component {
     super(props);
     this.state = {
       horizontal: false,
+      currentPanel: '',
+      showPanel: false,
     };
 
     if (!window.matchMedia) return;
@@ -82,6 +85,21 @@ class Sidebar extends React.Component {
     this.doCollapse(nextProps.collapsed);
   }
 
+  // Sidebar doesn't use children, so don't use it to compare
+  // Also ignore location, will re-render when routes change (instead of query params)
+  shouldComponentUpdate({children, location, ...nextPropsToCompare}, nextState) {
+    const {
+      children: _children, // eslint-disable-line no-unused-vars
+      location: _location, // eslint-disable-line no-unused-vars
+      ...currentPropsToCompare
+    } = this.props;
+
+    return (
+      !isEqual(currentPropsToCompare, nextPropsToCompare) ||
+      !isEqual(this.state, nextState)
+    );
+  }
+
   componentWillUnmount() {
     jQuery(document).off('click', this.documentClickHandler);
     jQuery(document.body).removeClass('body-sidebar');
