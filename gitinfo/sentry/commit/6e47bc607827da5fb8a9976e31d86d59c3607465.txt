commit 6e47bc607827da5fb8a9976e31d86d59c3607465
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Sep 19 14:01:45 2017 -0700

    fix(admin): Correctly handle duplicate entities on environment merge

diff --git a/src/sentry/models/organization.py b/src/sentry/models/organization.py
index c5fb166aa4..88c5f80127 100644
--- a/src/sentry/models/organization.py
+++ b/src/sentry/models/organization.py
@@ -274,9 +274,13 @@ class Organization(Model):
         for model in (
             Commit, ReleaseCommit, ReleaseEnvironment, ReleaseHeadCommit, Repository, Environment
         ):
-            model.objects.filter(
-                organization_id=from_org.id,
-            ).update(organization_id=to_org.id)
+            try:
+                with transaction.atomic():
+                    model.objects.filter(
+                        organization_id=from_org.id,
+                    ).update(organization_id=to_org.id)
+            except IntegrityError:
+                pass
 
     # TODO: Make these a mixin
     def update_option(self, *args, **kwargs):
