commit 262dac63503785649fcbc4753cb12f2c1a2ccff0
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Apr 9 11:31:52 2019 -0700

    feat(saved-search): Move components around per the new design (#12563)
    
    Also removes some css/bootstrap usage and replaces with styled
    components.

diff --git a/src/sentry/static/sentry/app/views/stream/filters.jsx b/src/sentry/static/sentry/app/views/stream/filters.jsx
index 1387f41212..6dee5e89fb 100644
--- a/src/sentry/static/sentry/app/views/stream/filters.jsx
+++ b/src/sentry/static/sentry/app/views/stream/filters.jsx
@@ -2,8 +2,12 @@ import PropTypes from 'prop-types';
 import React from 'react';
 
 import Feature from 'app/components/acl/feature';
-
 import SentryTypes from 'app/sentryTypes';
+import QueryCount from 'app/components/queryCount';
+import {PageHeader} from 'app/styles/organization';
+import PageHeading from 'app/components/pageHeading';
+import {t} from 'app/locale';
+
 import SearchBar from './searchBar';
 import SortOptions from './sortOptions';
 import SavedSearchSelector from './savedSearchSelector';
@@ -69,61 +73,57 @@ class StreamFilters extends React.Component {
     } = this.props;
 
     return (
-      <div className="stream-header">
-        <div className="row">
-          <div className="col-sm-5">
-            <Feature
-              features={['org-saved-searches']}
-              renderDisabled={() => (
-                <SavedSearchSelector
-                  organization={organization}
-                  projectId={projectId}
-                  searchId={searchId}
-                  queryCount={queryCount}
-                  queryMaxCount={queryMaxCount}
-                  query={query}
-                  onSavedSearchCreate={onSavedSearchCreate}
-                  onSavedSearchSelect={onSavedSearchSelect}
-                  savedSearchList={savedSearchList}
-                />
-              )}
-            >
-              <OrganizationSavedSearchSelector
-                organization={organization}
-                savedSearchList={savedSearchList}
-                onSavedSearchSelect={onSavedSearchSelect}
-                onSavedSearchDelete={onSavedSearchDelete}
-                query={query}
-                queryCount={queryCount}
-                queryMaxCount={queryMaxCount}
-              />
-            </Feature>
+      <PageHeader>
+        <Feature
+          features={['org-saved-searches']}
+          renderDisabled={() => (
+            <SavedSearchSelector
+              organization={organization}
+              projectId={projectId}
+              searchId={searchId}
+              queryCount={queryCount}
+              queryMaxCount={queryMaxCount}
+              query={query}
+              onSavedSearchCreate={onSavedSearchCreate}
+              onSavedSearchSelect={onSavedSearchSelect}
+              savedSearchList={savedSearchList}
+            />
+          )}
+        >
+          <PageHeading>
+            {t('Issues')}
+            <QueryCount count={queryCount} max={queryMaxCount} />
+          </PageHeading>
+        </Feature>
+        <div className="search-container">
+          <div className="stream-dropdown">
+            <SortOptions sort={sort} onSelect={onSortChange} />
           </div>
-          <div className="col-sm-7">
-            <div className="search-container">
-              <div className="stream-sort">
-                <SortOptions sort={sort} onSelect={onSortChange} />
-              </div>
 
-              <SearchBar
-                orgId={organization.slug}
-                query={query || ''}
-                onSearch={onSearch}
-                disabled={isSearchDisabled}
-                excludeEnvironment={true}
-                supportedTags={tags}
-                tagValueLoader={tagValueLoader}
-              />
-              <a
-                className="btn btn-default toggle-stream-sidebar"
-                onClick={onSidebarToggle}
-              >
-                <span className="icon-filter" />
-              </a>
-            </div>
-          </div>
+          <Feature features={['org-saved-searches']}>
+            <OrganizationSavedSearchSelector
+              organization={organization}
+              savedSearchList={savedSearchList}
+              onSavedSearchSelect={onSavedSearchSelect}
+              onSavedSearchDelete={onSavedSearchDelete}
+              query={query}
+            />
+          </Feature>
+
+          <SearchBar
+            orgId={organization.slug}
+            query={query || ''}
+            onSearch={onSearch}
+            disabled={isSearchDisabled}
+            excludeEnvironment={true}
+            supportedTags={tags}
+            tagValueLoader={tagValueLoader}
+          />
+          <a className="btn btn-default toggle-stream-sidebar" onClick={onSidebarToggle}>
+            <span className="icon-filter" />
+          </a>
         </div>
-      </div>
+      </PageHeader>
     );
   }
 }
diff --git a/src/sentry/static/sentry/app/views/stream/organizationSavedSearchSelector.jsx b/src/sentry/static/sentry/app/views/stream/organizationSavedSearchSelector.jsx
index 3cdd00b9d4..8335ec1816 100644
--- a/src/sentry/static/sentry/app/views/stream/organizationSavedSearchSelector.jsx
+++ b/src/sentry/static/sentry/app/views/stream/organizationSavedSearchSelector.jsx
@@ -9,7 +9,6 @@ import Button from 'app/components/button';
 import Confirm from 'app/components/confirm';
 import MenuItem from 'app/components/menuItem';
 import DropdownLink from 'app/components/dropdownLink';
-import QueryCount from 'app/components/queryCount';
 import InlineSvg from 'app/components/inlineSvg';
 import SentryTypes from 'app/sentryTypes';
 import {TextField} from 'app/components/forms';
@@ -23,8 +22,6 @@ export default class OrganizationSavedSearchSelector extends React.Component {
     onSavedSearchSelect: PropTypes.func.isRequired,
     onSavedSearchDelete: PropTypes.func.isRequired,
     query: PropTypes.string.isRequired,
-    queryCount: PropTypes.number,
-    queryMaxCount: PropTypes.number,
     searchId: PropTypes.string,
   };
 
@@ -82,30 +79,25 @@ export default class OrganizationSavedSearchSelector extends React.Component {
   }
 
   render() {
-    const {organization, query, queryCount, queryMaxCount} = this.props;
+    const {organization, query} = this.props;
 
     return (
       <Container>
-        <StyledDropdownLink
-          title={
-            <span>
-              <span>{this.getTitle()}</span>
-              <QueryCount count={queryCount} max={queryMaxCount} />
-            </span>
-          }
-        >
-          {this.renderList()}
-          <Access
-            organization={organization}
-            access={['org:write']}
-            renderNoAccessMessage={false}
-          >
-            <StyledMenuItem divider={true} />
-            <ButtonBar>
-              <SaveSearchButton query={query} organization={organization} />
-            </ButtonBar>
-          </Access>
-        </StyledDropdownLink>
+        <div className="stream-dropdown">
+          <DropdownLink btnGroup={true} title={this.getTitle()}>
+            {this.renderList()}
+            <Access
+              organization={organization}
+              access={['org:write']}
+              renderNoAccessMessage={false}
+            >
+              <StyledMenuItem divider={true} />
+              <ButtonBar>
+                <SaveSearchButton query={query} organization={organization} />
+              </ButtonBar>
+            </Access>
+          </DropdownLink>
+        </div>
       </Container>
     );
   }
@@ -254,30 +246,6 @@ const StyledMenuItem = styled(MenuItem)`
   }
 `;
 
-const StyledDropdownLink = styled(DropdownLink)`
-  display: inline-block;
-  font-size: 22px;
-  color: ${p => p.theme.gray5};
-  line-height: 36px;
-  margin-right: 10px;
-  max-width: 100%;
-  text-overflow: ellipsis;
-  white-space: nowrap;
-  overflow: hidden;
-
-  & :hover,
-  & :focus {
-    color: ${p => p.theme.gray5};
-  }
-
-  & .icon-arrow-down {
-    display: inline-block;
-    margin-left: 5px;
-    top: 0;
-    vertical-align: middle;
-  }
-`;
-
 const EmptyItem = styled.li`
   padding: 8px 10px 5px;
   font-style: italic;
diff --git a/src/sentry/static/sentry/less/stream.less b/src/sentry/static/sentry/less/stream.less
index 976b1e729f..9c3ebbc4de 100644
--- a/src/sentry/static/sentry/less/stream.less
+++ b/src/sentry/static/sentry/less/stream.less
@@ -60,6 +60,7 @@
   > .btn {
     color: inherit;
     background: rgba(255, 255, 255, 0.85);
+
     &.dropdown-toggle {
       background: none;
     }
@@ -156,6 +157,7 @@
     &.hoverable {
       cursor: pointer;
       .transition(all 0s ease-in-out);
+
       &:hover {
         background-color: @white-dark;
       }
@@ -269,12 +271,15 @@
     &:last-child {
       border-bottom-color: transparent;
       border-radius: 0 0 3px 3px;
+
       .event-cell {
         border-bottom: 1px solid #e9ebec;
       }
+
       .event-details {
         border-radius: 0 0 0 4px;
       }
+
       .event-users {
         border-radius: 0 0 4px 0;
       }
@@ -309,6 +314,7 @@
       color: @gray-dark;
       word-wrap: break-word;
     }
+
     .event-extra {
       color: @gray;
     }
@@ -431,6 +437,7 @@
 
     .event-details {
       padding-left: 20px;
+
       &:after {
         left: -1px;
       }
@@ -478,6 +485,7 @@
       font-size: 12px;
       text-transform: uppercase;
       margin-left: -5px;
+
       &.debug-symbols {
         text-transform: none;
         padding-left: 12px;
@@ -498,6 +506,7 @@
 
 .awaiting-events {
   padding: 10px 20px 30px;
+
   .wrap {
     position: relative;
     max-width: 740px;
@@ -542,52 +551,63 @@
     background: @red;
     box-shadow: 0 0 10px @red;
   }
+
   50% {
     background: #4a4d67;
     box-shadow: none;
   }
+
   100% {
     background: @red;
     box-shadow: 0 0 10px @red;
   }
 }
+
 @-moz-keyframes blink-eye {
   0% {
     background: @red;
     box-shadow: 0 0 10px @red;
   }
+
   50% {
     background: #4a4d67;
     box-shadow: none;
   }
+
   100% {
     background: @red;
     box-shadow: 0 0 10px @red;
   }
 }
+
 @-o-keyframes blink-eye {
   0% {
     background: @red;
     box-shadow: 0 0 10px @red;
   }
+
   50% {
     background: #4a4d67;
     box-shadow: none;
   }
+
   100% {
     background: @red;
     box-shadow: 0 0 10px @red;
   }
 }
+
 @keyframes blink-eye {
   0% {
     background: @red;
     box-shadow: 0 0 10px @red;
   }
+
   50% {
     background: #4a4d67;
     box-shadow: none;
   }
+
   100% {
     background: @red;
     box-shadow: 0 0 10px @red;
@@ -604,6 +624,7 @@
 
 .issue-list {
   padding: 0;
+
   .issue {
     h3 {
       .icon-star-solid,
@@ -763,6 +784,7 @@
             &:after {
               display: none;
             }
+
             a {
               border-radius: 0 2px 2px 0;
             }
@@ -836,7 +858,7 @@
   font-size: 20px;
 }
 
-.stream-sort {
+.stream-dropdown {
   margin-right: 5px;
   z-index: 1001;
 
@@ -852,6 +874,7 @@
     text-align: center;
 
     color: inherit;
+
     .icon-arrow-down {
       margin-left: 5px;
       margin-right: -2px;
@@ -875,6 +898,7 @@
     &:before {
       display: none;
     }
+
     &:after {
       display: none;
     }
@@ -890,15 +914,12 @@
 * ============================================================================
 */
 
-.stream-header {
-  margin-bottom: 15px;
-}
-
 .stream-row {
   .clearfix();
 
   .search-container {
     display: flex;
+    width: 58.3%;
   }
 
   .search {
@@ -961,6 +982,7 @@
       .btn-primary;
       box-shadow: inset 0 2px 0 rgba(0, 0, 0, 0.12);
     }
+
     .stream-content {
       width: 75%;
     }
@@ -1009,6 +1031,7 @@
   p {
     line-height: 1.2;
     margin: 0 auto 20px;
+
     &:last-child {
       margin-bottom: 0;
     }
@@ -1030,6 +1053,7 @@
 .stream-content .assignee-selector .dropdown-toggle {
   color: rgb(74, 62, 86); // gray4
 }
+
 /**
 * Responsive small screen
 * ============================================================================
@@ -1057,7 +1081,7 @@
     top: 10px !important;
   }
 
-  .stream-sort {
+  .stream-dropdown {
     line-height: 25px;
   }
 
@@ -1072,6 +1096,7 @@
   .stream-content {
     width: 100% !important;
   }
+
   .stream-sidebar {
     display: none;
   }
@@ -1083,6 +1108,7 @@
   .stream-actions .stream-actions-left,
   .group .event-details {
     padding-left: 36px;
+
     .checkbox {
       left: 33px;
     }
@@ -1165,7 +1191,7 @@
 }
 
 @media (max-width: 400px) {
-  .stream-sort {
+  .stream-dropdown {
     display: none;
   }
 
