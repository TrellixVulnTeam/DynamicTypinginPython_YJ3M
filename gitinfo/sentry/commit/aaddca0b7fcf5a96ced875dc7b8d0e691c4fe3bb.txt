commit aaddca0b7fcf5a96ced875dc7b8d0e691c4fe3bb
Author: Ted Kaemming <ted@kaemming.com>
Date:   Fri Oct 9 16:52:54 2015 -0700

    Sort digest contents.

diff --git a/src/sentry/digests/notifications.py b/src/sentry/digests/notifications.py
index ad43f021ab..468ddc4107 100644
--- a/src/sentry/digests/notifications.py
+++ b/src/sentry/digests/notifications.py
@@ -96,4 +96,21 @@ def build_digest(project, records):
                 )
             summary.records.append(record)
 
-    return Digest(start, end, groups_by_rule)
+    results = sorted(
+        [
+            (
+                rule,
+                sorted(
+                    summaries.items(),
+                    key=lambda (group, summary): summary.events,
+                    reverse=True,
+                )
+            )
+            for rule, summaries in
+            groups_by_rule.items()
+        ],
+        key=lambda (rule, groups): len(groups),
+        reverse=True,
+    )
+
+    return Digest(start, end, results)
diff --git a/src/sentry/templates/sentry/emails/digests/body.html b/src/sentry/templates/sentry/emails/digests/body.html
index 794ace5fb0..f6a9a6b049 100644
--- a/src/sentry/templates/sentry/emails/digests/body.html
+++ b/src/sentry/templates/sentry/emails/digests/body.html
@@ -6,7 +6,7 @@
 
 <h2>{{ project.name }}</h2>
 
-{% for rule, groups in digest.rules.iteritems %}
+{% for rule, groups in digest.rules %}
 
     <h3>{{ rule.label }}</h3>
 
@@ -16,7 +16,7 @@
             <th>Events</th>
             <th>Users</th>
         </tr>
-        {% for group, summary in groups.items %}
+        {% for group, summary in groups %}
             <tr>
                 <th>
                     {% url 'sentry-group' group.organization.slug group.project.slug group.id as group_link %}
