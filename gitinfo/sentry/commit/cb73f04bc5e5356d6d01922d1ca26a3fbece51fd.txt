commit cb73f04bc5e5356d6d01922d1ca26a3fbece51fd
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Sun Jan 12 23:28:40 2014 -0800

    Activity email should share same subject as Event

diff --git a/src/sentry/models/activity.py b/src/sentry/models/activity.py
index 50c2e4b514..27673f3e71 100644
--- a/src/sentry/models/activity.py
+++ b/src/sentry/models/activity.py
@@ -124,11 +124,7 @@ class Activity(Model):
         if subject_prefix:
             subject_prefix = subject_prefix.rstrip() + ' '
 
-        subject = '%s[%s] %s: %s' % (
-            subject_prefix,
-            self.project.name,
-            author,
-            self.data['text'].splitlines()[0][:64])
+        subject = '%s%s' % (subject_prefix, self.event.get_email_subject())
 
         context = {
             'text': self.data['text'],
diff --git a/src/sentry/models/event.py b/src/sentry/models/event.py
index e4bd0806ce..cfbb33c675 100644
--- a/src/sentry/models/event.py
+++ b/src/sentry/models/event.py
@@ -190,3 +190,9 @@ class Event(Model):
     @property
     def size(self):
         return len(unicode(vars(self)))
+
+    def get_email_subject(self):
+        return '[%s] %s: %s' % (
+            self.project.name.encode('utf-8'),
+            unicode(self.get_level_display()).upper().encode('utf-8'),
+            self.error().encode('utf-8').splitlines()[0])
diff --git a/src/sentry/plugins/sentry_mail/models.py b/src/sentry/plugins/sentry_mail/models.py
index 078891a55b..51f6333248 100644
--- a/src/sentry/plugins/sentry_mail/models.py
+++ b/src/sentry/plugins/sentry_mail/models.py
@@ -136,10 +136,7 @@ class MailPlugin(NotificationPlugin):
                 continue
             interface_list.append((interface.get_title(), mark_safe(body)))
 
-        subject = '[%s] %s: %s' % (
-            project.name.encode('utf-8'),
-            unicode(event.get_level_display()).upper().encode('utf-8'),
-            event.error().encode('utf-8').splitlines()[0])
+        subject = event.get_email_subject()
 
         link = group.get_absolute_url()
 
diff --git a/tests/sentry/models/activity/tests.py b/tests/sentry/models/activity/tests.py
index 3508d11caa..20ff3ac881 100644
--- a/tests/sentry/models/activity/tests.py
+++ b/tests/sentry/models/activity/tests.py
@@ -27,7 +27,7 @@ class SendNotificationTest(TestCase):
 
         msg = mail.outbox[0]
 
-        assert msg.subject == 'Re: [Sentry] [Bar] foo@example.com: sup guise'
+        assert msg.subject == 'Re: [Sentry] [Bar] ERROR: Foo bar'
         assert msg.to == [self.user.email]
         assert msg.extra_headers['Message-Id'] == '<activity/%s@localhost>' % activity.pk
         assert msg.extra_headers['In-Reply-To'] == '<group/%s@localhost>' % self.group.pk
