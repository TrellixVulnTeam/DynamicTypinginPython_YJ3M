commit 933d70592fb481658db22a6017a77d8e5a5ea352
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue Dec 8 22:24:09 2015 +0100

    Fail if there is no version info

diff --git a/setup.py b/setup.py
index 726e146727..933e9f71e8 100755
--- a/setup.py
+++ b/setup.py
@@ -283,6 +283,10 @@ class BuildJavascriptCommand(Command):
             version_info['version'] or 'UNKNOWN',
             version_info['build'] or 'UNKNOWN',
         ))
+        if not version_info['version'] or not version_info['build']:
+            log.fatal('Could not determine sentry version or build')
+            sys.exit(1)
+
         try:
             self._build_static()
         except Exception:
@@ -291,12 +295,11 @@ class BuildJavascriptCommand(Command):
                       "Hint: You might be running an invalid version of NPM.")
             sys.exit(1)
 
-        if version_info['version'] and version_info['build']:
-            log.info("writing version manifest")
-            manifest = self._write_version_file(version_info)
-            log.info("recorded manifest\n{}".format(
-                json.dumps(manifest, indent=2),
-            ))
+        log.info("writing version manifest")
+        manifest = self._write_version_file(version_info)
+        log.info("recorded manifest\n{}".format(
+            json.dumps(manifest, indent=2),
+        ))
         self.update_manifests()
 
     def update_manifests(self):
