commit 4e4998d83915208c8e48a54d327ed36d567d49a0
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Feb 8 14:39:31 2013 -0800

    Correct unicode coercion so it doesnt fail

diff --git a/src/sentry/templatetags/sentry_helpers.py b/src/sentry/templatetags/sentry_helpers.py
index 604f2e4dfc..f88a6e02a4 100644
--- a/src/sentry/templatetags/sentry_helpers.py
+++ b/src/sentry/templatetags/sentry_helpers.py
@@ -19,6 +19,7 @@ from sentry.conf import settings
 from sentry.constants import STATUS_MUTED
 from sentry.models import Group
 from sentry.web.helpers import group_is_public
+from sentry.utils import to_unicode
 from sentry.utils.avatar import get_gravatar_url
 from sentry.utils.javascript import to_json
 from sentry.utils.safe import safe_execute
@@ -43,7 +44,7 @@ def pprint(value, break_after=10):
     inserted (for soft wrapping).
     """
 
-    value = unicode(value).decode('utf-8', 'replace')
+    value = to_unicode(value)
     return mark_safe(u'<span></span>'.join(
         [escape(value[i:(i + break_after)]) for i in xrange(0, len(value), break_after)]
     ))
