commit d4863e491564d9db95c2dc30f57a744752228c99
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Apr 28 09:52:58 2014 -0700

    Move Riak key generation into Sentry

diff --git a/src/sentry/nodestore/riak/backend.py b/src/sentry/nodestore/riak/backend.py
index ac7d1a6658..8930440c3b 100644
--- a/src/sentry/nodestore/riak/backend.py
+++ b/src/sentry/nodestore/riak/backend.py
@@ -40,7 +40,8 @@ class RiakNodeStorage(NodeStorage):
         return self.conn.bucket(self._bucket_name)
 
     def create(self, data):
-        obj = self.bucket.new(data=data)
+        node_id = self.generate_id()
+        obj = self.bucket.new(data=data, key=node_id)
         obj.store()
         return obj.key
 
