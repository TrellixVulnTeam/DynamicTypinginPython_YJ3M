commit 27fd799b273544a318356b3bba9783fc855db207
Author: Ben Vinegar <ben@benv.ca>
Date:   Wed Sep 9 13:58:41 2015 -0700

    Sort header values in curl command output (refs #1889)

diff --git a/src/sentry/static/sentry/app/components/events/interfaces/utils.jsx b/src/sentry/static/sentry/app/components/events/interfaces/utils.jsx
index 995d910c47..0b108af650 100644
--- a/src/sentry/static/sentry/app/components/events/interfaces/utils.jsx
+++ b/src/sentry/static/sentry/app/components/events/interfaces/utils.jsx
@@ -18,7 +18,13 @@ export function getCurlCommand(data) {
     result += ' \\\n --compressed';
   }
 
-  for (let header of data.headers) {
+  // sort headers
+  let headers = data.headers.sort(function (a, b) {
+    return a[0] === b[0] ? 0 :
+      a[0] < b[0] ? -1 : 1;
+  });
+
+  for (let header of headers) {
     result += ' \\\n -H "' + header[0] + ': ' + escapeQuotes(header[1]) + '"';
   }
 
diff --git a/tests/js/spec/components/events/interfaces/utils.spec.jsx b/tests/js/spec/components/events/interfaces/utils.spec.jsx
index b29c1f4309..7160951ef1 100644
--- a/tests/js/spec/components/events/interfaces/utils.spec.jsx
+++ b/tests/js/spec/components/events/interfaces/utils.spec.jsx
@@ -17,10 +17,6 @@ describe("components/interfaces/utils", function() {
         ],
         "url": "http:\/\/example.com\/foo",
         "headers": [
-          [
-            "Content-Type",
-            "application\/json"
-          ],
           [
             "Referer",
             "http:\/\/example.com"
@@ -28,7 +24,11 @@ describe("components/interfaces/utils", function() {
           [
             "User-Agent",
             "Mozilla\/5.0 (Windows NT 6.2; WOW64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/28.0.1500.72 Safari\/537.36"
-          ]
+          ],
+          [
+            "Content-Type",
+            "application\/json"
+          ],
         ],
         "env": {
           "ENV": "prod"
@@ -71,9 +71,9 @@ describe("components/interfaces/utils", function() {
         "method": "GET"
       }).should.eql('curl \\\n' +
         ' --compressed \\\n' +
+        ' -H "Accept-Encoding: gzip" \\\n' +
         ' -H "Content-Type: application/json" \\\n' +
         ' -H "Referer: http://example.com" \\\n' +
-        ' -H "Accept-Encoding: gzip" \\\n' +
         ' --data "{\\"hello\\": \\"world\\"}" \\\n' +
         ' "http://example.com/foo?foo=bar"'
       );
