commit 789af47e06a559287562affe49d450c27c1d3ed1
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Aug 9 20:43:18 2015 -0700

    handle anonymous users

diff --git a/src/sentry/debug/middleware.py b/src/sentry/debug/middleware.py
index e7d01efe05..137f42ff47 100644
--- a/src/sentry/debug/middleware.py
+++ b/src/sentry/debug/middleware.py
@@ -18,6 +18,8 @@ class DebugMiddleware(threading.local, DebugToolbarMiddleware):
 
     def show_toolbar(self, request):
         # TODO(dcramer): support VPN via INTERNAL_IPS + ipaddr maps
+        if not request.user.is_authenticated():
+            return False
         if not request.user.is_active_superuser():
             return False
         if 'text/html' not in request.META.get('HTTP_ACCEPT', '*/*'):
