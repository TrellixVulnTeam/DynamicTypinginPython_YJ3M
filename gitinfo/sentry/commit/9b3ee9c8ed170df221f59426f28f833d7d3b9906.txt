commit 9b3ee9c8ed170df221f59426f28f833d7d3b9906
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Tue Oct 30 11:34:54 2018 -0700

    fix(ui): Fix sprintf parsing with localization (#10333)
    
    `tn()` calls `toLocaleString()` on the number thats passed in, so sprintf will throw if the number is > 1000.
    
    Fixes JAVASCRIPT-4HK

diff --git a/src/sentry/static/sentry/app/components/activity/item.jsx b/src/sentry/static/sentry/app/components/activity/item.jsx
index 513ad56a38..4b82e204cb 100644
--- a/src/sentry/static/sentry/app/components/activity/item.jsx
+++ b/src/sentry/static/sentry/app/components/activity/item.jsx
@@ -210,8 +210,8 @@ class ActivityItem extends React.Component {
         });
       case 'unmerge_destination':
         return tn(
-          '%2$s migrated %1$d fingerprint from %3$s to %4$s',
-          '%2$s migrated %1$d fingerprints from %3$s to %4$s',
+          '%2$s migrated %1$s fingerprint from %3$s to %4$s',
+          '%2$s migrated %1$s fingerprints from %3$s to %4$s',
           data.fingerprints.length,
           author,
           data.source ? (
diff --git a/src/sentry/static/sentry/app/components/releaseProjectStatSparkline.jsx b/src/sentry/static/sentry/app/components/releaseProjectStatSparkline.jsx
index 17d07f2bf4..8303afc4dc 100644
--- a/src/sentry/static/sentry/app/components/releaseProjectStatSparkline.jsx
+++ b/src/sentry/static/sentry/app/components/releaseProjectStatSparkline.jsx
@@ -116,7 +116,7 @@ const ReleaseProjectStatSparkline = createReactClass({
           <p className="m-b-0 text-muted">
             <small>
               {newIssueCount > 0
-                ? tn('%d new issue', '%d new issues', newIssueCount)
+                ? tn('%s new issue', '%s new issues', newIssueCount)
                 : t('No new issues')}
             </small>
           </p>
diff --git a/src/sentry/static/sentry/app/components/repositoryFileSummary.jsx b/src/sentry/static/sentry/app/components/repositoryFileSummary.jsx
index b418b870b4..44d5ef3c9f 100644
--- a/src/sentry/static/sentry/app/components/repositoryFileSummary.jsx
+++ b/src/sentry/static/sentry/app/components/repositoryFileSummary.jsx
@@ -8,7 +8,7 @@ function Collapsed(props) {
     <li className="list-group-item list-group-item-sm align-center">
       <span className="icon-container" />
       <a onClick={props.onClick}>
-        {tn('Show %d collapsed file', 'Show %d collapsed files', props.count)}
+        {tn('Show %s collapsed file', 'Show %s collapsed files', props.count)}
       </a>
     </li>
   );
@@ -56,8 +56,8 @@ class RepositoryFileSummary extends React.Component {
       <div>
         <h5>
           {tn(
-            '%d file changed in ' + repository,
-            '%d files changed in ' + repository,
+            '%s file changed in ' + repository,
+            '%s files changed in ' + repository,
             fileCount
           )}
         </h5>
diff --git a/src/sentry/static/sentry/app/data/forms/projectAlerts.jsx b/src/sentry/static/sentry/app/data/forms/projectAlerts.jsx
index c3745d7b2c..ac7bb82e60 100644
--- a/src/sentry/static/sentry/app/data/forms/projectAlerts.jsx
+++ b/src/sentry/static/sentry/app/data/forms/projectAlerts.jsx
@@ -5,7 +5,7 @@ export const route = '/settings/:orgId/:projectId/alerts/';
 
 const formatMinutes = value => {
   value = value / 60;
-  return tn('%d minute', '%d minutes', value);
+  return tn('%s minute', '%s minutes', value);
 };
 
 export const fields = {
diff --git a/src/sentry/static/sentry/app/data/forms/projectGeneralSettings.jsx b/src/sentry/static/sentry/app/data/forms/projectGeneralSettings.jsx
index cfa04a3cb8..876aa6bff1 100644
--- a/src/sentry/static/sentry/app/data/forms/projectGeneralSettings.jsx
+++ b/src/sentry/static/sentry/app/data/forms/projectGeneralSettings.jsx
@@ -90,9 +90,9 @@ export const fields = {
       } else if (val > 23 && val % 24 === 0) {
         // Based on allowed values, val % 24 should always be true
         val = val / 24;
-        return tn('%d day', '%d days', val);
+        return tn('%s day', '%s days', val);
       }
-      return tn('%d hour', '%d hours', val);
+      return tn('%s hour', '%s hours', val);
     },
     saveOnBlur: false,
     saveMessage: tct(
diff --git a/src/sentry/static/sentry/app/views/groupActivity/index.jsx b/src/sentry/static/sentry/app/views/groupActivity/index.jsx
index 709ee2eb9a..1a3fb416f0 100644
--- a/src/sentry/static/sentry/app/views/groupActivity/index.jsx
+++ b/src/sentry/static/sentry/app/views/groupActivity/index.jsx
@@ -134,8 +134,8 @@ class GroupActivityItem extends React.Component {
         });
       case 'unmerge_source':
         return tn(
-          '%2$s migrated %1$d fingerprint to %3$s',
-          '%2$s migrated %1$d fingerprints to %3$s',
+          '%2$s migrated %1$s fingerprint to %3$s',
+          '%2$s migrated %1$s fingerprints to %3$s',
           data.fingerprints.length,
           author,
           data.destination ? (
@@ -148,8 +148,8 @@ class GroupActivityItem extends React.Component {
         );
       case 'unmerge_destination':
         return tn(
-          '%2$s migrated %1$d fingerprint from %3$s',
-          '%2$s migrated %1$d fingerprints from %3$s',
+          '%2$s migrated %1$s fingerprint from %3$s',
+          '%2$s migrated %1$s fingerprints from %3$s',
           data.fingerprints.length,
           author,
           data.source ? (
@@ -193,8 +193,8 @@ class GroupActivityItem extends React.Component {
         return t('%s unassigned this issue', author);
       case 'merge':
         return tn(
-          '%2$s merged %1$d issue into this issue',
-          '%2$s merged %1$d issues into this issue',
+          '%2$s merged %1$s issue into this issue',
+          '%2$s merged %1$s issues into this issue',
           data.issues.length,
           author
         );
diff --git a/src/sentry/static/sentry/app/views/settings/organizationTeams/allTeamsRow.jsx b/src/sentry/static/sentry/app/views/settings/organizationTeams/allTeamsRow.jsx
index 74e5e8fe6d..7c6aee1b13 100644
--- a/src/sentry/static/sentry/app/views/settings/organizationTeams/allTeamsRow.jsx
+++ b/src/sentry/static/sentry/app/views/settings/organizationTeams/allTeamsRow.jsx
@@ -119,7 +119,7 @@ const AllTeamsRow = createReactClass({
       <IdBadge
         team={team}
         avatarSize={36}
-        description={tn('%d Member', '%d Members', team.memberCount)}
+        description={tn('%s Member', '%s Members', team.memberCount)}
       />
     );
 
diff --git a/src/sentry/static/sentry/app/views/settings/project/projectProcessingIssues.jsx b/src/sentry/static/sentry/app/views/settings/project/projectProcessingIssues.jsx
index ec4e10c5a5..cdd680b11a 100644
--- a/src/sentry/static/sentry/app/views/settings/project/projectProcessingIssues.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/projectProcessingIssues.jsx
@@ -25,7 +25,9 @@ const MESSAGES = {
   ),
   native_missing_dsym: t('A required debug information file was missing.'),
   native_missing_system_dsym: t('A system debug information file was missing.'),
-  native_missing_symbol: t('Could not resolve one or more frames in debug information file.'),
+  native_missing_symbol: t(
+    'Could not resolve one or more frames in debug information file.'
+  ),
   native_simulator_frame: t('Encountered an unprocessable simulator frame.'),
   native_unknown_image: t('A binary image is referenced that is unknown.'),
   proguard_missing_mapping: t('A proguard mapping file was missing.'),
@@ -280,8 +282,8 @@ const ProjectProcessingIssues = createReactClass({
       return null;
     }
     let fixButton = tn(
-      'Click here to trigger processing for %d pending event',
-      'Click here to trigger processing for %d pending events',
+      'Click here to trigger processing for %s pending event',
+      'Click here to trigger processing for %s pending events',
       issues.resolveableIssues
     );
     return (
@@ -332,8 +334,8 @@ const ProjectProcessingIssues = createReactClass({
                 style={{display: 'inline', marginRight: 12}}
               />
               {tn(
-                'Reprocessing %d event …',
-                'Reprocessing %d events …',
+                'Reprocessing %s event …',
+                'Reprocessing %s events …',
                 this.state.processingIssues.issuesProcessing
               )}
             </div>
diff --git a/src/sentry/static/sentry/app/views/stream/actions.jsx b/src/sentry/static/sentry/app/views/stream/actions.jsx
index 7f894833bc..e50c68bda1 100644
--- a/src/sentry/static/sentry/app/views/stream/actions.jsx
+++ b/src/sentry/static/sentry/app/views/stream/actions.jsx
@@ -49,8 +49,8 @@ const getConfirm = (numIssues, allInQuerySelected, query, queryCount) => {
     let question = allInQuerySelected
       ? getBulkConfirmMessage(`${action}${append}`, queryCount)
       : tn(
-          `Are you sure you want to ${action} this %d issue${append}?`,
-          `Are you sure you want to ${action} these %d issues${append}?`,
+          `Are you sure you want to ${action} this %s issue${append}?`,
+          `Are you sure you want to ${action} these %s issues${append}?`,
           numIssues
         );
 
@@ -88,8 +88,8 @@ const getLabel = (numIssues, allInQuerySelected) => {
     let text = allInQuerySelected
       ? t(`Bulk ${action} issues`)
       : tn(
-          `${capitalized} %d selected issue`,
-          `${capitalized} %d selected issues`,
+          `${capitalized} %s selected issue`,
+          `${capitalized} %s selected issues`,
           numIssues
         );
 
@@ -514,8 +514,8 @@ const StreamActions = createReactClass({
                 ) : (
                   <span>
                     {tn(
-                      '%d issue on this page selected.',
-                      '%d issues on this page selected.',
+                      '%s issue on this page selected.',
+                      '%s issues on this page selected.',
                       numIssues
                     )}
                     <a onClick={this.selectAll}>
diff --git a/src/sentry/static/sentry/app/views/stream/stream.jsx b/src/sentry/static/sentry/app/views/stream/stream.jsx
index 3b64568647..6cce727055 100644
--- a/src/sentry/static/sentry/app/views/stream/stream.jsx
+++ b/src/sentry/static/sentry/app/views/stream/stream.jsx
@@ -589,8 +589,8 @@ const Stream = createReactClass({
     if (pi.numIssues > 0) {
       icon = <span className="icon icon-alert" />;
       issues = tn(
-        'There is %d issue blocking event processing',
-        'There are %d issues blocking event processing',
+        'There is %s issue blocking event processing',
+        'There are %s issues blocking event processing',
         pi.numIssues
       );
       lastEvent = (
@@ -606,16 +606,16 @@ const Stream = createReactClass({
       icon = <span className="icon icon-processing play" />;
       className['alert-info'] = true;
       issues = tn(
-        'Reprocessing %d event …',
-        'Reprocessing %d events …',
+        'Reprocessing %s event …',
+        'Reprocessing %s events …',
         pi.issuesProcessing
       );
     } else if (pi.resolveableIssues > 0) {
       icon = <span className="icon icon-processing" />;
       className['alert-warning'] = true;
       issues = tn(
-        'There is %d event pending reprocessing.',
-        'There are %d events pending reprocessing.',
+        'There is %s event pending reprocessing.',
+        'There are %s events pending reprocessing.',
         pi.resolveableIssues
       );
       showButton = true;
