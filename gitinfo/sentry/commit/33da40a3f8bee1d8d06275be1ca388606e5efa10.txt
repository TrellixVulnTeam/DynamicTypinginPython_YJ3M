commit 33da40a3f8bee1d8d06275be1ca388606e5efa10
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Tue Nov 12 15:53:49 2019 -0800

    build(webpack): Only use `CopyPlugin` when `DEPLOY_PREVIEW_CONFIG` is set (#15520)
    
    We currently only need the `CopyPlugin` when we have a deploy preview config set.

diff --git a/webpack.config.js b/webpack.config.js
index 9613291ba7..2ac73f15b8 100644
--- a/webpack.config.js
+++ b/webpack.config.js
@@ -306,13 +306,6 @@ let appConfig = {
      */
     new ExtractTextPlugin(),
 
-    /**
-     * Generate a index.html file used for running the app in pure client mode.
-     * This is currently used for PR deploy previews, where only the frontend
-     * is deployed.
-     */
-    new CopyPlugin([{from: path.join(staticPrefix, 'app', 'index.html')}]),
-
     /**
      * Defines environment specific flags.
      */
@@ -372,6 +365,17 @@ let appConfig = {
   devtool: IS_PRODUCTION ? 'source-map' : 'cheap-module-eval-source-map',
 };
 
+if (DEPLOY_PREVIEW_CONFIG) {
+  /**
+   * Generate a index.html file used for running the app in pure client mode.
+   * This is currently used for PR deploy previews, where only the frontend
+   * is deployed.
+   */
+  appConfig.plugins.push(
+    new CopyPlugin([{from: path.join(staticPrefix, 'app', 'index.html')}])
+  );
+}
+
 if (IS_TEST || IS_STORYBOOK) {
   appConfig.resolve.alias['integration-docs-platforms'] = path.join(
     __dirname,
