commit abbf843cf19e63407768909ec8100b5a9f433bc0
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Apr 20 14:14:35 2015 -0700

    Add test for api key creation

diff --git a/tests/sentry/web/frontend/test_organization_api_keys.py b/tests/sentry/web/frontend/test_organization_api_keys.py
index 9de2029654..c716a24ac5 100644
--- a/tests/sentry/web/frontend/test_organization_api_keys.py
+++ b/tests/sentry/web/frontend/test_organization_api_keys.py
@@ -43,3 +43,16 @@ class OrganizationApiKeysTest(TestCase):
             key1,
             key2,
         ]
+
+    def test_creates_api_key(self):
+        organization = self.create_organization(name='foo', owner=self.user)
+
+        path = reverse('sentry-organization-api-keys', args=[organization.slug])
+
+        self.login_as(self.user)
+
+        resp = self.client.post(path, {'op': 'newkey'})
+
+        assert resp.status_code == 302
+
+        assert ApiKey.objects.filter(organization=organization).exists()
