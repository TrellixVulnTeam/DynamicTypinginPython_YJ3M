commit 8f5aa35bf069ed74502d7b3d867f5a73b6603131
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jan 19 22:04:25 2015 -0800

    Move AggregateChart into AggregateDetails

diff --git a/src/sentry/static/sentry/app/components/aggregateDetails.jsx b/src/sentry/static/sentry/app/components/aggregateDetails.jsx
index 26678f49f5..e5b94f187c 100644
--- a/src/sentry/static/sentry/app/components/aggregateDetails.jsx
+++ b/src/sentry/static/sentry/app/components/aggregateDetails.jsx
@@ -9,37 +9,20 @@ var Count = require("./count");
 var TimeSince = require("./timeSince");
 var utils = require("../utils");
 
-var AggregateDetails = React.createClass({
-  mixins: [Reflux.connect(AggregateListStore, "aggList")],
-
+var AggregateHeader = React.createClass({
   propTypes: {
-    aggList: React.PropTypes.instanceOf(Array).isRequired,
-    aggId: React.PropTypes.string.isRequired,
+    aggregate: React.PropTypes.shape({
+      id: React.PropTypes.string.isRequired
+    }).isRequired,
     memberList: React.PropTypes.instanceOf(Array).isRequired,
-  },
-
-  getInitialState: function() {
-    return {
-      aggList: new utils.Collection([], {
-        equals: function(self, other) {
-          return self.id === other.id;
-        },
-        limit: 50
-      }),
-      agg: this.props.aggList[0],
-      statsPeriod: '24h'
-    };
-  },
-
-  componentDidMount: function() {
-    AggregateListStore.loadInitialData(this.props.aggList);
+    statsPeriod: React.PropTypes.string.isRequired
   },
 
   render: function() {
-    var data = this.state.agg,
+    var data = this.props.aggregate,
         userCount = 0;
 
-    var chartData = data.stats[this.state.statsPeriod].map(function(point){
+    var chartData = data.stats[this.props.statsPeriod].map(function(point){
       return {x: point[0], y: point[1]};
     });
 
@@ -117,6 +100,55 @@ var AggregateDetails = React.createClass({
           </div>
         </div>
       </div>
+
+    );
+  }
+});
+
+var AggregateDetails = React.createClass({
+  mixins: [Reflux.connect(AggregateListStore, "aggList")],
+
+  propTypes: {
+    aggList: React.PropTypes.instanceOf(Array).isRequired,
+    aggId: React.PropTypes.string.isRequired,
+    memberList: React.PropTypes.instanceOf(Array).isRequired,
+  },
+
+  getInitialState: function() {
+    return {
+      aggList: new utils.Collection([], {
+        equals: function(self, other) {
+          return self.id === other.id;
+        },
+        limit: 50
+      }),
+      agg: this.props.aggList[0],
+      statsPeriod: '24h'
+    };
+  },
+
+  componentDidMount: function() {
+    AggregateListStore.loadInitialData(this.props.aggList);
+  },
+
+  render: function() {
+    var data = this.state.agg;
+
+    return (
+      <div className={this.props.className}>
+        <AggregateHeader
+            aggregate={this.state.agg}
+            project={this.props.project}
+            statsPeriod={this.state.statsPeriod}
+            memberList={this.props.memberList} />
+        <div className="box">
+          <div className="box-content with-padding">
+            <AggregateChart
+                aggregate={this.state.agg}
+                project={this.props.project} />
+          </div>
+        </div>
+      </div>
     );
   }
 });
diff --git a/src/sentry/templates/sentry/groups/details.html b/src/sentry/templates/sentry/groups/details.html
index 40bb576cc9..90aaedbf53 100644
--- a/src/sentry/templates/sentry/groups/details.html
+++ b/src/sentry/templates/sentry/groups/details.html
@@ -19,10 +19,9 @@
   <li class="truncate">{{ group.title }}</li>
 {% endblock %}
 
-{% block content_before %}
-    <!-- <div id="details">
-        <div id="event_list" class="inactive"></div>
-    </div> -->
+{% block main %}
+    {% handle_before_events request group %}
+
     <div id="blk_agg_details"></div>
     <script>
     $(function(){
@@ -30,35 +29,14 @@
         aggList: [{% serialize group %}],
         aggId: '{{ group.id }}',
         project: {% serialize project %},
-        memberList: []
+        memberList: [],
+        chart: true
       }), document.getElementById('blk_agg_details'));
     });
     </script>
-  </div>
-{% endblock %}
-
-{% block main %}
-    {% handle_before_events request group %}
 
     {% block inner %}
         {% with event|get_rendered_interfaces:request as interface_list %}
-
-            {% if group|has_charts %}
-                <div class="box">
-                  <div class="box-content with-padding">
-                    <div id="blk_agg_chart"></div>
-                    <script>
-                    $(function(){
-                      React.render(React.createFactory(AggregateChart)({
-                        aggregate: {% serialize group %},
-                        project: {% serialize project %}
-                      }), document.getElementById('blk_agg_chart'));
-                    });
-                    </script>
-                  </div>
-                </div>
-            {% endif %}
-
             <div class="box">
                 <div class="box-header">
                     <h3>Activity</h3>
