commit 92d49a6f0ae05cb561f328cdd1d5a38a12571a0e
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Sat Apr 9 20:15:27 2016 +0200

    Roll back on duplicate failure in import script

diff --git a/src/sentry/runner/commands/import_system_symbols.py b/src/sentry/runner/commands/import_system_symbols.py
index ed49aa81e1..da35d4547f 100644
--- a/src/sentry/runner/commands/import_system_symbols.py
+++ b/src/sentry/runner/commands/import_system_symbols.py
@@ -73,13 +73,15 @@ def process_archive(members, zip, sdk_info, threads):
             items = q.get()
             if items is SHUTDOWN:
                 break
-            try:
-                cur.executemany('''
-                    execute add_sym(%(object_id)s, %(address)s, %(symbol)s);
-                ''', items)
-            except IntegrityError:
-                print 'warning: already seen'
-                continue
+            while 1:
+                try:
+                    cur.executemany('''
+                        execute add_sym(%(object_id)s, %(address)s, %(symbol)s);
+                    ''', items)
+                except IntegrityError:
+                    connection.rollback()
+                    continue
+                break
         cur.execute('commit')
 
     pool = []
