commit bea7274baff468e2d6790ac3846a7b030970e8ac
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Dec 14 20:57:51 2014 -0800

    Handle missing team

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 9c33e9a110..f2f7b451ed 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -690,8 +690,10 @@ def get_group_trends(request, organization, team=None, project=None):
 
     if not team and project:
         project_list = [project]
-    else:
+    elif team:
         project_list = Project.objects.get_for_user(team=team, user=request.user)
+    else:
+        return HttpResponse(statuse=400)
 
     project_dict = dict((p.id, p) for p in project_list)
 
@@ -728,8 +730,10 @@ def get_new_groups(request, organization, team=None, project=None):
 
     if not team and project:
         project_list = [project]
-    else:
+    elif team:
         project_list = Project.objects.get_for_user(team=team, user=request.user)
+    else:
+        return HttpResponse(statuse=400)
 
     project_dict = dict((p.id, p) for p in project_list)
 
@@ -762,8 +766,10 @@ def get_resolved_groups(request, organization, team=None, project=None):
 
     if not team and project:
         project_list = [project]
-    else:
+    elif team:
         project_list = Project.objects.get_for_user(team=team, user=request.user)
+    else:
+        return HttpResponse(statuse=400)
 
     project_dict = dict((p.id, p) for p in project_list)
 
@@ -795,8 +801,10 @@ def get_stats(request, organization, team=None, project=None):
 
     if not team and project:
         project_list = [project]
-    else:
+    elif team:
         project_list = Project.objects.get_for_user(team=team, user=request.user)
+    else:
+        return HttpResponse(statuse=400)
 
     cutoff = timedelta(minutes=minutes)
 
