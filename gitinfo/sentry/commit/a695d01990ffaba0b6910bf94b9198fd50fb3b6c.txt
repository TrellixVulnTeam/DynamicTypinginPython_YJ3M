commit a695d01990ffaba0b6910bf94b9198fd50fb3b6c
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jun 8 14:03:49 2015 -0700

    Fix handling of empty context values

diff --git a/src/sentry/interfaces/stacktrace.py b/src/sentry/interfaces/stacktrace.py
index 208702e390..c0112a932c 100644
--- a/src/sentry/interfaces/stacktrace.py
+++ b/src/sentry/interfaces/stacktrace.py
@@ -171,6 +171,15 @@ class Frame(Interface):
         if isinstance(extra_data, (list, tuple)):
             extra_data = dict(enumerate(extra_data))
 
+        # XXX: handle lines which were sent as 'null'
+        pre_context = data.get('pre_context', None)
+        if pre_context:
+            pre_context = [c or '' for c in pre_context]
+
+        post_context = data.get('post_context', None)
+        if post_context:
+            post_context = [c or '' for c in post_context]
+
         kwargs = {
             'abs_path': trim(abs_path, 256),
             'filename': trim(filename, 256),
@@ -179,8 +188,8 @@ class Frame(Interface):
             'in_app': validate_bool(data.get('in_app'), False),
             'context_line': trim(data.get('context_line'), 256),
             # TODO(dcramer): trim pre/post_context
-            'pre_context': data.get('pre_context'),
-            'post_context': data.get('post_context'),
+            'pre_context': pre_context,
+            'post_context': post_context,
             'vars': context_locals,
             'data': extra_data,
             'errors': data.get('errors'),
