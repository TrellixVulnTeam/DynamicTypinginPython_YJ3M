commit a38fe4590b2bb424838d99e722eeb9628edba753
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Nov 4 16:58:11 2011 -0700

    Clean up rendering of exceptions

diff --git a/sentry/templates/sentry/group/message.html b/sentry/templates/sentry/group/message.html
index 385be111b6..fc4d2f4eb3 100644
--- a/sentry/templates/sentry/group/message.html
+++ b/sentry/templates/sentry/group/message.html
@@ -31,65 +31,65 @@
         </li>
     </ul>
 
-    <div id="details">
-        <div id="summary">
-            <h3>{% if exception_type %}{{ exception_type }}: {{ exception_value|escape }}{% else %}Summary{% endif %}</h3>
-            <table class="meta">
-                {% if exception_type %}
-                    <tr>
-                      <th>Exception Value:</th>
-                      <td><pre>{{ exception_value|escape }}</pre></td>
-                    </tr>
-                {% endif %}
-                {% if group.data.url %}
-                    <tr>
-                      <th>URL:</th>
-                      <td><a href="{{ group.data.url }}">{{ group.data.url|truncatechars:100 }}</a></td>
-                    </tr>
-                {% endif %}
-                {% if lastframe %}
-                    <tr>
-                      <th>Location:</th>
-                      <td>{{ lastframe.filename|escape }} in {{ lastframe.function|escape }}, line {{ lastframe.lineno }}</td>
-                    </tr>
-                {% endif %}
-                {% if group.has_two_part_message %}
-                    <tr>
-                      <th>Full Message</th>
-                      <td><pre id="full-message">{{ group.message }}</pre></td>
-                    </tr>
-                {% endif %}
-            </table>
-        </div>
-
-        {% if version_data %}
-            <div id="versioninfo" class="module">
-                <h2>{% trans "Module Versions" %}</h2>
-                <div class="module-content">
-                    <table class="inline">
-                        {% for k, v in version_data %}
-                            <tr>
-                                <th class="key">{{ k }}</th>
-                                <td class="values"><code>{{ v }}</code></td>
-                            </tr>
-                        {% endfor %}
-                    </table>
-                </div>
-            </div>
-        {% endif %}
+    {% if message.has_two_part_message %}
+        <h2>{% trans "Full Message" %}</h2>
+        <pre id="full-message">{{ message.message }}</pre>
+    {% endif %}
 
-        {% for interface in interface_list %}
-            {{ interface }}
-        {% endfor %}
 
-        <div id="requestinfo" class="module">
-            <h2>{% trans "Additional Data" %}</h2>
+    {% if version_data %}
+        <div id="versioninfo" class="module">
+            <h2>{% trans "Module Versions" %}</h2>
             <div class="module-content">
-                <table>
-                    {% if user_data %}
+                <table class="inline">
+                    {% for k, v in version_data %}
                         <tr>
-                            <th class="key">USER</th>
-                            <td class="values">
+                            <th class="key">{{ k }}</th>
+                            <td class="values"><code>{{ v }}</code></td>
+                        </tr>
+                    {% endfor %}
+                </table>
+            </div>
+        </div>
+    {% endif %}
+
+    {% for interface in interface_list %}
+        {{ interface }}
+    {% endfor %}
+
+    <div id="requestinfo" class="module">
+        <h2>{% trans "Additional Data" %}</h2>
+        <div class="module-content">
+            <table>
+                {% if user_data %}
+                    <tr>
+                        <th class="key">USER</th>
+                        <td class="values">
+                            <table class="vars">
+                                <thead>
+                                    <tr>
+                                        <th>{% trans "Variable" %}</th>
+                                        <th>{% trans "Value" %}</th>
+                                    </tr>
+                                </thead>
+                                <tbody>
+                                    {% for k_, v_ in user_data.iteritems|as_sorted %}
+                                    <tr>
+                                        <td>{{ k_ }}</td>
+                                        <td class="code"><pre>{{ v_|pprint }}</pre></td>
+                                    </tr>
+                                    {% endfor %}
+                                </tbody>
+                            </table>
+                        </td>
+                    </tr>
+                {% endif %}
+                {% for k, v in json_data %}
+                    <tr>
+                        <th class="key">{{ k }}</th>
+                        <td class="values">
+                        {% if v %}
+                            {% if v|is_dict %}
                                 <table class="vars">
                                     <thead>
                                         <tr>
@@ -98,7 +98,7 @@
                                         </tr>
                                     </thead>
                                     <tbody>
-                                        {% for k_, v_ in user_data.iteritems|as_sorted %}
+                                        {% for k_, v_ in v.iteritems|as_sorted %}
                                         <tr>
                                             <td>{{ k_ }}</td>
                                             <td class="code"><pre>{{ v_|pprint }}</pre></td>
@@ -106,42 +106,16 @@
                                         {% endfor %}
                                     </tbody>
                                 </table>
-                            </td>
-                        </tr>
-                    {% endif %}
-                    {% for k, v in json_data %}
-                        <tr>
-                            <th class="key">{{ k }}</th>
-                            <td class="values">
-                            {% if v %}
-                                {% if v|is_dict %}
-                                    <table class="vars">
-                                        <thead>
-                                            <tr>
-                                                <th>{% trans "Variable" %}</th>
-                                                <th>{% trans "Value" %}</th>
-                                            </tr>
-                                        </thead>
-                                        <tbody>
-                                            {% for k_, v_ in v.iteritems|as_sorted %}
-                                            <tr>
-                                                <td>{{ k_ }}</td>
-                                                <td class="code"><pre>{{ v_|pprint }}</pre></td>
-                                            </tr>
-                                            {% endfor %}
-                                        </tbody>
-                                    </table>
-                                {% else %}
-                                    <pre>{{ v|pprint }}</pre>
-                                {% endif %}
                             {% else %}
-                                <p>{% blocktrans with k as varname %}No data for {{ varname }}{% endblocktrans %}</p>
+                                <pre>{{ v|pprint }}</pre>
                             {% endif %}
-                            </td>
-                        </tr>
-                    {% endfor %}
-                </table>
-            </div>
+                        {% else %}
+                            <p>{% blocktrans with k as varname %}No data for {{ varname }}{% endblocktrans %}</p>
+                        {% endif %}
+                        </td>
+                    </tr>
+                {% endfor %}
+            </table>
         </div>
     </div>
     <div id="raw_traceback" style="display: none;">
diff --git a/sentry/templates/sentry/partial/interfaces/exception.html b/sentry/templates/sentry/partial/interfaces/exception.html
index e123d55653..57ab28ba5e 100644
--- a/sentry/templates/sentry/partial/interfaces/exception.html
+++ b/sentry/templates/sentry/partial/interfaces/exception.html
@@ -1,6 +1,12 @@
-<div id="summary">
-  <h3>{% if exception_type %}{{ exception_type }}: {{ exception_value|escape }}{% else %}Summary{% endif %}</h3>
+{% comment %}
+<div id="exception" class="module">
+  <h2>Exception</h2>
+  <div class="module-content">
   <table class="meta">
+    <tr>
+      <th>Exception Type:</th>
+      <td><pre>{{ exception_type|escape }}</pre></td>
+    </tr>
     <tr>
       <th>Exception Value:</th>
       <td><pre>{{ exception_value|escape }}</pre></td>
@@ -12,4 +18,6 @@
     </tr>
     {% endif %}
   </table>
-</div>
\ No newline at end of file
+  </div>
+</div>
+{% endcomment %}
\ No newline at end of file
