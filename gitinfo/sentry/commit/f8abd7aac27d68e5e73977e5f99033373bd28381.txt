commit f8abd7aac27d68e5e73977e5f99033373bd28381
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Fri Sep 28 16:04:23 2018 -0700

    fix(integrations): Migrate repos from new integrations if integration_id is null

diff --git a/src/sentry/integrations/bitbucket/integration.py b/src/sentry/integrations/bitbucket/integration.py
index 2fc5cdc804..552c4a8a1d 100644
--- a/src/sentry/integrations/bitbucket/integration.py
+++ b/src/sentry/integrations/bitbucket/integration.py
@@ -155,7 +155,8 @@ class BitbucketIntegrationProvider(IntegrationProvider):
     def post_install(self, integration, organization):
         repo_ids = Repository.objects.filter(
             organization_id=organization.id,
-            provider='bitbucket',
+            provider__in=['bitbucket', 'integrations:bitbucket'],
+            integration_id__isnull=True,
         ).values_list('id', flat=True)
 
         for repo_id in repo_ids:
diff --git a/src/sentry/integrations/github/integration.py b/src/sentry/integrations/github/integration.py
index 5db3b772db..73fa7a7c69 100644
--- a/src/sentry/integrations/github/integration.py
+++ b/src/sentry/integrations/github/integration.py
@@ -173,7 +173,8 @@ class GitHubIntegrationProvider(IntegrationProvider):
     def post_install(self, integration, organization):
         repo_ids = Repository.objects.filter(
             organization_id=organization.id,
-            provider='github',
+            provider__in=['github', 'integrations:github'],
+            integration_id__isnull=True,
         ).values_list('id', flat=True)
 
         for repo_id in repo_ids:
diff --git a/src/sentry/integrations/vsts/integration.py b/src/sentry/integrations/vsts/integration.py
index 577f4d2c98..22b2e2bf7f 100644
--- a/src/sentry/integrations/vsts/integration.py
+++ b/src/sentry/integrations/vsts/integration.py
@@ -321,7 +321,8 @@ class VstsIntegrationProvider(IntegrationProvider):
     def post_install(self, integration, organization):
         repo_ids = Repository.objects.filter(
             organization_id=organization.id,
-            provider='visualstudio',
+            provider__in=['visualstudio', 'integrations:vsts'],
+            integration_id__isnull=True,
         ).values_list('id', flat=True)
 
         for repo_id in repo_ids:
