commit 1aa8f665633e8093cfbe212e71be808391e62ded
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jan 28 01:41:05 2014 -0800

    Fix stat_suffix

diff --git a/src/sentry/tasks/base.py b/src/sentry/tasks/base.py
index bb66b23146..dd1111aa3e 100644
--- a/src/sentry/tasks/base.py
+++ b/src/sentry/tasks/base.py
@@ -12,13 +12,12 @@ from functools import wraps
 
 
 def instrumented_task(name, queue, stat_suffix=None, **kwargs):
-    statsd_key = 'jobs.duration.{name}'.format(name=name)
-    if stat_suffix:
-        statsd_key += '.{key}'.format(key=stat_suffix)
-
     def wrapped(func):
         @wraps(func)
         def _wrapped(*args, **kwargs):
+            statsd_key = 'jobs.duration.{name}'.format(name=name)
+            if stat_suffix:
+                statsd_key += '.{key}'.format(key=stat_suffix(*args, **kwargs))
             with statsd.timer(statsd_key):
                 result = func(*args, **kwargs)
             return result
