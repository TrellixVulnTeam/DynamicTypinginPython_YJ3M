commit f3bd9db7900c8597090b06d558ef983bea1c16d9
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jan 31 01:41:25 2012 -0800

    Adjust unique constraint on event_id to be (project, event_id)

diff --git a/sentry/models.py b/sentry/models.py
index d049f4958e..b0ee644c43 100644
--- a/sentry/models.py
+++ b/sentry/models.py
@@ -374,7 +374,7 @@ class Event(MessageBase):
     An individual event.
     """
     group = models.ForeignKey(Group, blank=True, null=True, related_name="event_set")
-    event_id = models.CharField(max_length=32, null=True, unique=True, db_column="message_id")
+    event_id = models.CharField(max_length=32, null=True, db_column="message_id")
     datetime = models.DateTimeField(default=datetime.now, db_index=True)
     time_spent = models.FloatField(null=True)
     server_name = models.CharField(max_length=128, db_index=True, null=True)
@@ -384,6 +384,7 @@ class Event(MessageBase):
         verbose_name = _('message')
         verbose_name_plural = _('messages')
         db_table = 'sentry_message'
+        unique_together = ('project', 'event_id')
 
     def __unicode__(self):
         return self.error()
