commit 19490d407073d6ddc5ce4aa6a3b2b402f091ca7a
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 26 14:35:30 2011 -0800

    Render headers separately from environment

diff --git a/sentry/templates/sentry/partial/interfaces/http.html b/sentry/templates/sentry/partial/interfaces/http.html
index df9d218a35..bc1bd2b5db 100644
--- a/sentry/templates/sentry/partial/interfaces/http.html
+++ b/sentry/templates/sentry/partial/interfaces/http.html
@@ -42,11 +42,44 @@
                     </td>
                 </tr>
                 <tr>
-                    <th>Env:</th>
+                    <th>Headers:</th>
+                    <td>
+                        {% if headers %}
+                            {% if headers|length > 5 %}
+                                <a href="#" onclick="return varToggle(this, 'HttpHeaders')"><span>&#x25b6;</span> Headers</a>
+                                <table class="vars" id="vHttpHeaders" style="display:none;">
+                                  <tbody>
+                                    {% for key, value in headers.iteritems|as_sorted %}
+                                      <tr>
+                                        <td>{{ key|escape }}</td>
+                                        <td class="code"><pre>{{ value|pprint|escape }}</pre></td>
+                                      </tr>
+                                    {% endfor %}
+                                  </tbody>
+                                </table>
+                            {% else %}
+                                <table class="vars">
+                                  <tbody>
+                                    {% for key, value in headers.iteritems|as_sorted %}
+                                      <tr>
+                                        <td>{{ key|escape }}</td>
+                                        <td class="code"><pre>{{ value|pprint|escape }}</pre></td>
+                                      </tr>
+                                    {% endfor %}
+                                  </tbody>
+                                </table>
+                            {% endif %}
+                        {% else %}
+                            <em>No headers recorded.</em>
+                        {% endif %}
+                    </td>
+                </tr>
+                <tr>
+                    <th>Environment:</th>
                     <td>
                         {% if env %}
                             {% if env|length > 5 %}
-                                <a href="#" onclick="return varToggle(this, 'HttpEnv')"><span>&#x25b6;</span> Environment and Headers</a>
+                                <a href="#" onclick="return varToggle(this, 'HttpEnv')"><span>&#x25b6;</span> Environment</a>
                                 <table class="vars" id="vHttpEnv" style="display:none;">
                                   <tbody>
                                     {% for key, value in env.iteritems|as_sorted %}
diff --git a/sentry/web/frontend/events.py b/sentry/web/frontend/events.py
index a0712a2adb..cf4a1bd039 100644
--- a/sentry/web/frontend/events.py
+++ b/sentry/web/frontend/events.py
@@ -60,10 +60,15 @@ def replay_event(request, project_id, event_id):
         # TODO: show a proper error
         raise ValueError
     http = interfaces['sentry.interfaces.Http']
+    if http.headers:
+        headers = '\n'.join('%s: %s' % (k, v) for k, v in http.headers.iteritems() if k[0].upper() == k[0])
+    else:
+        headers = ''
+
     initial = {
         'url': http.url,
         'method': http.method,
-        'headers': '\n'.join('%s: %s' % (k, v) for k, v in http.env.iteritems() if k[0].upper() == k[0]),
+        'headers': headers,
         'data': urllib.urlencode(http.data),
     }
 
