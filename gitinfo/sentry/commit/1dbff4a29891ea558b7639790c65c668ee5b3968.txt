commit 1dbff4a29891ea558b7639790c65c668ee5b3968
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Feb 4 15:23:50 2013 -0800

    improve logging in web api

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index b7578eaa37..1794614bf1 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -108,6 +108,12 @@ class APIView(BaseView):
             # Set X-Sentry-Error as in many cases it is easier to inspect the headers
             response['X-Sentry-Error'] = response.content[:200]  # safety net on content length
 
+            logger.info('status=%s project_id=%s %s', response.status_code, project_id,
+                response['X-Sentry-Error'], extra={
+                    'request': request,
+                },
+            )
+
             if origin:
                 # We allow all origins on errors
                 response['Access-Control-Allow-Origin'] = '*'
@@ -152,10 +158,6 @@ class APIView(BaseView):
             try:
                 project_, user = project_from_auth_vars(auth_vars)
             except APIError, error:
-                if project:
-                    logger.info('Project %r raised API error: %s', project.slug, error, extra={
-                        'request': request,
-                    }, exc_info=True)
                 return HttpResponse(unicode(error.msg), status=error.http_status)
             else:
                 if user:
@@ -180,9 +182,6 @@ class APIView(BaseView):
                 response = super(APIView, self).dispatch(request, project=project, auth=auth, **kwargs)
 
             except APIError, error:
-                logger.info('Project %r raised API error: %s', project.slug, error, extra={
-                    'request': request,
-                }, exc_info=True)
                 response = HttpResponse(unicode(error.msg), status=error.http_status)
 
         if origin:
@@ -259,7 +258,7 @@ class StoreView(APIView):
 
         insert_data_to_database(data)
 
-        logger.info('New event from project %r (id=%s)', project.slug, data['event_id'])
+        logger.debug('New event from project %s/%s (id=%s)', project.team.slug, project.slug, data['event_id'])
 
 
 @csrf_exempt
