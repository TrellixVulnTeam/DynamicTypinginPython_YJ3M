commit 65d9b57fde5b970c7a95939c059363ab5d376cb0
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Mon Apr 20 17:09:49 2020 -0700

    ref(ui): Stop sending `enable_snuba` to group details endpoint (#18364)
    
    This was made default in https://github.com/getsentry/sentry/pull/14845, so this is no longer needed.

diff --git a/src/sentry/static/sentry/app/views/organizationGroupDetails/groupDetails.jsx b/src/sentry/static/sentry/app/views/organizationGroupDetails/groupDetails.jsx
index ab12638b93..bfae244140 100644
--- a/src/sentry/static/sentry/app/views/organizationGroupDetails/groupDetails.jsx
+++ b/src/sentry/static/sentry/app/views/organizationGroupDetails/groupDetails.jsx
@@ -29,7 +29,6 @@ const GroupDetails = createReactClass({
 
     organization: SentryTypes.Organization,
     environments: PropTypes.arrayOf(PropTypes.string),
-    enableSnuba: PropTypes.bool,
     showGlobalHeader: PropTypes.bool,
 
     finishProfile: PropTypes.func,
@@ -42,12 +41,6 @@ const GroupDetails = createReactClass({
 
   mixins: [Reflux.listenTo(GroupStore, 'onGroupChange')],
 
-  getDefaultProps() {
-    return {
-      enableSnuba: false,
-    };
-  },
-
   getInitialState() {
     return {
       group: null,
@@ -102,10 +95,6 @@ const GroupDetails = createReactClass({
       query.environment = this.props.environments;
     }
 
-    if (this.props.enableSnuba) {
-      query.enable_snuba = '1';
-    }
-
     this.props.api.request(this.getGroupDetailsEndpoint(), {
       query,
       success: data => {
diff --git a/src/sentry/static/sentry/app/views/organizationGroupDetails/index.jsx b/src/sentry/static/sentry/app/views/organizationGroupDetails/index.jsx
index 50edfca032..3d5bd142c8 100644
--- a/src/sentry/static/sentry/app/views/organizationGroupDetails/index.jsx
+++ b/src/sentry/static/sentry/app/views/organizationGroupDetails/index.jsx
@@ -24,12 +24,7 @@ class OrganizationGroupDetails extends React.Component {
     const {selection, ...props} = this.props;
 
     return (
-      <GroupDetails
-        environments={selection.environments}
-        enableSnuba
-        showGlobalHeader
-        {...props}
-      />
+      <GroupDetails environments={selection.environments} showGlobalHeader {...props} />
     );
   }
 }
diff --git a/tests/sentry/api/endpoints/test_group_tags.py b/tests/sentry/api/endpoints/test_group_tags.py
index 7a0a1e6f32..ee38909c96 100644
--- a/tests/sentry/api/endpoints/test_group_tags.py
+++ b/tests/sentry/api/endpoints/test_group_tags.py
@@ -120,9 +120,9 @@ class GroupTagsTest(APITestCase, SnubaTestCase):
         )
 
         self.login_as(user=self.user)
-        url = u"/api/0/issues/{}/tags/?enable_snuba=1".format(event2.group.id)
+        url = u"/api/0/issues/{}/tags/".format(event2.group.id)
         response = self.client.get(
-            "%s&environment=%s&environment=%s" % (url, env.name, env2.name), format="json"
+            "%s?environment=%s&environment=%s" % (url, env.name, env2.name), format="json"
         )
         assert response.status_code == 200
         assert set([tag["key"] for tag in response.data]) >= set(["biz", "environment", "foo"])
diff --git a/tests/snuba/api/endpoints/test_group_details.py b/tests/snuba/api/endpoints/test_group_details.py
index a82fa4332b..1510b229e2 100644
--- a/tests/snuba/api/endpoints/test_group_details.py
+++ b/tests/snuba/api/endpoints/test_group_details.py
@@ -14,7 +14,7 @@ class GroupDetailsTest(APITestCase, SnubaTestCase):
         environment = Environment.get_or_create(group.project, "production")
         environment2 = Environment.get_or_create(group.project, "staging")
 
-        url = u"/api/0/issues/{}/?enable_snuba=1".format(group.id)
+        url = u"/api/0/issues/{}/".format(group.id)
 
         from sentry.api.endpoints.group_details import tsdb
 
@@ -22,12 +22,12 @@ class GroupDetailsTest(APITestCase, SnubaTestCase):
             "sentry.api.endpoints.group_details.tsdb.get_range", side_effect=tsdb.get_range
         ) as get_range:
             response = self.client.get(
-                "%s&environment=production&environment=staging" % (url,), format="json"
+                "%s?environment=production&environment=staging" % (url,), format="json"
             )
             assert response.status_code == 200
             assert get_range.call_count == 2
             for args, kwargs in get_range.call_args_list:
                 assert kwargs["environment_ids"] == [environment.id, environment2.id]
 
-        response = self.client.get("%s&environment=invalid" % (url,), format="json")
+        response = self.client.get("%s?environment=invalid" % (url,), format="json")
         assert response.status_code == 404
diff --git a/tests/snuba/api/endpoints/test_project_event_details.py b/tests/snuba/api/endpoints/test_project_event_details.py
index 56aceb9473..efa6a70402 100644
--- a/tests/snuba/api/endpoints/test_project_event_details.py
+++ b/tests/snuba/api/endpoints/test_project_event_details.py
@@ -92,9 +92,6 @@ class ProjectEventDetailsTest(APITestCase, SnubaTestCase):
                 "organization_slug": self.cur_event.project.organization.slug,
             },
         )
-        response = self.client.get(
-            url, format="json", data={"enable_snuba": "1", "environment": ["production", "staging"]}
-        )
         response = self.client.get(
             url, format="json", data={"environment": ["production", "staging"]}
         )
