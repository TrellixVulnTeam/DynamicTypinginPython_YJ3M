commit 6fc93051fcc17aaa521a124a1e008faa851e52ef
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Mar 4 16:49:46 2015 -0800

    Load various project/team bits from context

diff --git a/src/sentry/static/sentry/app/views/organizationDetails.jsx b/src/sentry/static/sentry/app/views/organizationDetails.jsx
index 1f53c38d70..fa3c13a4b4 100644
--- a/src/sentry/static/sentry/app/views/organizationDetails.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDetails.jsx
@@ -51,6 +51,11 @@ var OrganizationDetails = React.createClass({
   },
 
   fetchData() {
+    this.setState({
+      loading: true,
+      error: false
+    });
+
     api.request(this.getOrganizationDetailsEndpoint(), {
       success: (data) => {
         this.setState({
diff --git a/src/sentry/static/sentry/app/views/projectDetails.jsx b/src/sentry/static/sentry/app/views/projectDetails.jsx
index 232f9e038c..25a0ddce88 100644
--- a/src/sentry/static/sentry/app/views/projectDetails.jsx
+++ b/src/sentry/static/sentry/app/views/projectDetails.jsx
@@ -24,14 +24,12 @@ var ProjectDetails = React.createClass({
   crumbReservations: 2,
 
   childContextTypes: {
-    organization: PropTypes.Organization,
     project: PropTypes.Project,
     team: PropTypes.Team
   },
 
   getChildContext() {
     return {
-      organization: this.getOrganization(),
       project: this.state.project,
       team: this.state.team
     };
@@ -56,30 +54,40 @@ var ProjectDetails = React.createClass({
     }
   },
 
-
   fetchData() {
-    // TODO(dcramer): we could read some of this info from contexts
-    api.request(this.getProjectDetailsEndpoint(), {
-      success: (data) => {
-        this.setState({
-          project: data,
-          team: data.team
-        });
-
-        this.setBreadcrumbs([
-          {name: data.team.name, to: 'teamDetails', params: {
-            orgId: this.getParams().orgId,
-            teamId: data.team.slug
-          }},
-          {name: data.name, to: 'projectDetails'}
-        ]);
-      }
+    var org = this.getOrganization();
+    if (!org) {
+      return;
+    }
+
+    var projectSlug = this.getParams().projectId;
+    var activeProject;
+    var activeTeam;
+    org.teams.forEach((team) => {
+      team.projects.forEach((project) => {
+        if (project.slug == projectSlug) {
+          activeProject = project;
+          activeTeam = team;
+        }
+      });
     });
-  },
 
-  getProjectDetailsEndpoint() {
-    var params = this.getParams();
-    return '/projects/' + params.orgId + '/' + params.projectId + '/';
+    this.setState({
+      team: activeTeam,
+      project: activeProject,
+      loading: false,
+      error: typeof activeProject !== "undefined"
+    });
+
+    if (typeof activeProject !== "undefined") {
+      this.setBreadcrumbs([
+        {name: activeTeam.name, to: "teamDetails", params: {
+          orgId: org.slug,
+          teamId: activeTeam.slug
+        }},
+        {name: activeProject.name, to: "projectDetails"}
+      ]);
+    }
   },
 
   getMemberListEndpoint() {
diff --git a/src/sentry/static/sentry/app/views/teamDetails.jsx b/src/sentry/static/sentry/app/views/teamDetails.jsx
index 0dab5b369c..c0424c36b5 100644
--- a/src/sentry/static/sentry/app/views/teamDetails.jsx
+++ b/src/sentry/static/sentry/app/views/teamDetails.jsx
@@ -22,13 +22,11 @@ var TeamDetails = React.createClass({
   crumbReservations: 1,
 
   childContextTypes: {
-    organization: PropTypes.Organization,
     team: PropTypes.Team
   },
 
   getChildContext() {
     return {
-      organization: this.getOrganization(),
       team: this.state.team
     };
   },
@@ -50,22 +48,26 @@ var TeamDetails = React.createClass({
   },
 
   fetchData() {
-    api.request(this.getTeamDetailsEndpoint(), {
-      success: (data) => {
-        this.setState({
-          team: data
-        });
+    var org = this.getOrganization();
+    if (!org) {
+      return;
+    }
 
-        this.setBreadcrumbs([
-          {name: data.name, to: 'teamDetails'}
-        ]);
-      }
-    });
-  },
+    var teamSlug = this.getParams().teamId;
+    var team = org.teams.filter((team) => {
+      return team.slug === teamSlug;
+    })[0];
 
-  getTeamDetailsEndpoint() {
-    var params = this.getParams();
-    return '/teams/' + params.orgId + '/' + params.teamId + '/';
+    this.setState({
+      team: team,
+      loading: false,
+      error: typeof team !== "undefined"
+    });
+    if (typeof team !== "undefined") {
+      this.setBreadcrumbs([
+        {name: team.name, to: "teamDetails"}
+      ]);
+    }
   },
 
   render() {
