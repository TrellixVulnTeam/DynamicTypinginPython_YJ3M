commit 93ed91c9004989dfb0bb376be973350060928f64
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Apr 3 20:50:34 2012 -0700

    Plugins can now be toggle per project

diff --git a/sentry/templates/sentry/projects/plugins/list.html b/sentry/templates/sentry/projects/plugins/list.html
index ad10071903..529a20a18a 100644
--- a/sentry/templates/sentry/projects/plugins/list.html
+++ b/sentry/templates/sentry/projects/plugins/list.html
@@ -14,36 +14,42 @@
 
 {% block inner %}
     <p>{% trans "You are able to selectively enable plugins on a per-project basis." %}</p>
-    <table class="table table-bordered table-striped">
-        <thead>
-            <tr>
-                <th>{% trans "Plugin" %}</th>
-                <th style="width:100px;text-align:center;">{% trans "Version" %}</th>
-                <th style="width:100px;text-align:center;">{% trans "Enabled" %}</th>
-            </tr>
-        </thead>
-        <tbody>
-            {% for plugin, is_enabled in project|get_plugins_with_status %}
+    <form method="POST">
+        {% csrf_token %}
+        <table class="table table-bordered table-striped">
+            <thead>
                 <tr>
-                    <td>
-                        {% if plugin.has_project_conf %}
-                            <a href="{% url sentry-configure-project-plugin project.pk plugin.slug %}">{{ plugin.get_title }}</a>
-                        {% else %}
-                            {{ plugin.get_title }}
-                        {% endif %}
-                        <br />
-                        <small>{% if plugin.author %}
-                            By {% if plugin.author_url %}<a href="{{ plugin.author_url }}">{{ plugin.author }}</a>{% else %}{{ plugin.author }}{% endif %}
-                        {% endif %}</small>
-                    </td>
-                    <td style="text-align:center;">
-                        {% if plugin.version %}{{ plugin.version }}{% else %}<em>{% trans "n/a" %}</em>{% endif %}
-                    </td>
-                    <td style="text-align:center;">
-                        <input type="checkbox" name="plugin" value="{{ plugin.slug }}"{% if is_enabled %} checked="checked"{% endif %}/>
-                    </td>
+                    <th>{% trans "Plugin" %}</th>
+                    <th style="width:100px;text-align:center;">{% trans "Version" %}</th>
+                    <th style="width:100px;text-align:center;">{% trans "Enabled" %}</th>
                 </tr>
-            {% endfor %}
-        </tbody>
-    </table>
+            </thead>
+            <tbody>
+                {% for plugin, is_enabled in project|get_plugins_with_status %}
+                    <tr>
+                        <td>
+                            {% if plugin.has_project_conf %}
+                                <a href="{% url sentry-configure-project-plugin project.pk plugin.slug %}">{{ plugin.get_title }}</a>
+                            {% else %}
+                                {{ plugin.get_title }}
+                            {% endif %}
+                            <br />
+                            <small>{% if plugin.author %}
+                                By {% if plugin.author_url %}<a href="{{ plugin.author_url }}">{{ plugin.author }}</a>{% else %}{{ plugin.author }}{% endif %}
+                            {% endif %}</small>
+                        </td>
+                        <td style="text-align:center;">
+                            {% if plugin.version %}{{ plugin.version }}{% else %}<em>{% trans "n/a" %}</em>{% endif %}
+                        </td>
+                        <td style="text-align:center;">
+                            <input type="checkbox" name="plugin" value="{{ plugin.slug }}"{% if is_enabled %} checked="checked"{% endif %}/>
+                        </td>
+                    </tr>
+                {% endfor %}
+            </tbody>
+        </table>
+        <fieldset class="form-actions">
+            <input type="submit" class="btn btn-primary pull-right" value="Save Changes">
+        </fieldset>
+    </form>
 {% endblock %}
diff --git a/sentry/web/frontend/projects.py b/sentry/web/frontend/projects.py
index e593b09c85..d73dfc3539 100644
--- a/sentry/web/frontend/projects.py
+++ b/sentry/web/frontend/projects.py
@@ -397,6 +397,12 @@ def manage_plugins(request, project):
     if result is False and not request.user.has_perm('sentry.can_change_project'):
         return HttpResponseRedirect(reverse('sentry'))
 
+    if request.POST:
+        enabled = set(request.POST.getlist('plugin'))
+        for plugin in plugins.all():
+            plugin.set_option('enabled', plugin.slug in enabled, project)
+        return HttpResponseRedirect(request.build_absolute_uri() + '?success=1')
+
     context = csrf(request)
     context.update({
         'page': 'plugins',
