commit 4a55a5bded543df2d29721a0478750cb8757679b
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Feb 27 13:57:10 2018 -0800

    ci: Remove Danger

diff --git a/.travis.yml b/.travis.yml
index 802e78bfd9..e212e48c14 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -71,9 +71,6 @@ matrix:
     - python: 2.7
       env: TEST_SUITE=django-18
   include:
-    - language: ruby
-      rvm: 2.2
-      env: TEST_SUITE=danger
     # only the sqlite suite runs riak tests
     - python: 2.7
       env: TEST_SUITE=sqlite DB=sqlite
diff --git a/Dangerfile b/Dangerfile
deleted file mode 100644
index b74a206124..0000000000
--- a/Dangerfile
+++ /dev/null
@@ -1,111 +0,0 @@
-# TODO(drcamer): Danger supports a shared Dangerfile that we can reference
-# from our other repos (e.g. getsentry/danger)
-# see also: https://github.com/samdmarshall/danger/blob/master/Dangerfile
-#      and: https://github.com/samdmarshall/pyconfig/blob/develop/Dangerfile
-
-# require changelog entry if number of lines changed is beyond this
-@S_CHANGE_LINES ||= 50
-
-# pattern list for included file paths
-@S_CHANGES_REQUIRED_PATTERNS ||= /^src\//
-
-# set the files to watch and warn about if there are changes made
-@S_BUILD_FILES ||= [
-    "Makefile",
-
-    # JavaScript
-    ".eslintignore",
-    ".eslintrc",
-
-    # Python
-    "setup.cfg",
-    "setup.py",
-    "tox.ini",
-
-    # Danger
-    "Dangerfile",
-
-    # CI
-    ".travis.yml",
-]
-
-# set the files to watch and fail if there are changes
-@S_LICENSE_FILES ||= ["LICENSE"]
-
-# set the patterns to watch and warn about if they need security review
-@S_SECURITY_FILE_PATTERN ||= /Dangerfile|(auth|login|permission|email|twofactor|sudo).*\.py/
-# content changes within the diff
-@S_SECURITY_CONTENT_PATTERN ||= nil
-# dont ever match against changes in these files
-@S_SECURITY_EXCLUDE_FILES ||= /test_.*\.py|migrations|south_migrations|CHANGES|tests|yarn\.lock|\.html|\.jsx/
-
-@S_BACKPORTED_FILES ||= [
-    "src/sentry/auth/password_validation.py",
-]
-
-# warn if there are migrations
-@S_MIGRATIONS ||= /south_migrations/
-
-# determine if any of the files were modified
-def checkFiles(files_array)
-    files_array.select { |f| git.modified_files.include?(f) }
-end
-
-def checkFilesPattern(pattern, exclude = nil)
-    return [] unless pattern
-    git.modified_files.select do |f|
-        next(false) if exclude && exclude =~ f
-        next(pattern =~ f)
-    end
-end
-
-def checkContents(pattern, exclude = nil)
-    return [] unless pattern
-    git.modified_files.select do |f|
-        next(false) if exclude && exclude =~ f
-        next(git.diff_for_file(f).patch =~ pattern)
-    end
-end
-
-# Warn about changes to dependencies or the build process
-warn("Changes to build requirements") if checkFiles(@S_BUILD_FILES).any?
-
-# Warn about changes to dependencies or the build process
-securityMatches = checkFilesPattern(@S_SECURITY_FILE_PATTERN, @S_SECURITY_EXCLUDE_FILES) + checkContents(@S_SECURITY_CONTENT_PATTERN, @S_SECURITY_EXCLUDE_FILES)
-if securityMatches.any?
-    # TODO(dcramer): when GitHub API actually exposes reviewers, we should
-    # make this failing
-    # securityTeam = github.api.organization_teams('getsentry')[0]
-    # Make a note about contributors not in the organization
-    # unless github.api.team_member?(securityTeam.id, github.pr_author
-    warn("Changes require @getsentry/security sign-off")
-    message = "### Security concerns found\n\n"
-    securityMatches.to_set.each do |m|
-        message << "- #{m}\n"
-    end
-    markdown(message)
-end
-
-# Make it more obvious that a PR is a work in progress and shouldn"t be merged yet
-warn("PR is classed as Work in Progress") if github.pr_title.include? "[WIP]" || github.pr_body.include?("#wip")
-
-# License is immutable
-fail("Do not modify the License") if @S_LICENSE_FILES && checkFiles(@S_LICENSE_FILES).any?
-
-# Notify about modifications to files that we've backported explicitly
-warn("This change includes modification to a file that was backported from newer Django.") if @S_BACKPORTED_FILES && checkFiles(@S_BACKPORTED_FILES).any?
-
-# Reasonable commits must update CHANGES
-if !github.pr_body.include?("#nochanges") && @S_CHANGE_LINES && git.lines_of_code > @S_CHANGE_LINES && !git.modified_files.include?("CHANGES") && checkFilesPattern(@S_CHANGES_REQUIRED_PATTERNS).any?
-    warn("You should update CHANGES due to the size of this PR")
-end
-
-if git.added_files.grep(@S_MIGRATIONS).any?
-    warn("PR includes migrations")
-    markdown("## Migration Checklist\n\n" +
-             "- [ ] new columns need to be nullable (unless table is new)\n" +
-             "- [ ] migration with any new index needs to be done concurrently\n" +
-             "- [ ] data migrations should not be done inside a transaction\n" +
-             "- [ ] before merging, check to make sure there aren't conflicting migration ids\n"
-    )
-end
diff --git a/Gemfile b/Gemfile
deleted file mode 100644
index a3fdd8dbff..0000000000
--- a/Gemfile
+++ /dev/null
@@ -1,3 +0,0 @@
-source "https://rubygems.org"
-
-gem 'danger', '~>4.0.1'
diff --git a/Makefile b/Makefile
index a24afde8f2..6ec2a94381 100644
--- a/Makefile
+++ b/Makefile
@@ -207,8 +207,6 @@ travis-noop:
 
 .PHONY: travis-upgrade-pip travis-setup-cassandra travis-install-python travis-noop
 
-travis-install-danger:
-	bundle install
 travis-install-sqlite: travis-install-python
 travis-install-postgres: travis-install-python dev-postgres
 	psql -c 'create database sentry;' -U postgres
@@ -233,10 +231,9 @@ travis-install-dist:
 travis-install-django-18: travis-install-postgres
 	pip install "Django>=1.8,<1.9"
 
-.PHONY: travis-install-danger travis-install-sqlite travis-install-postgres travis-install-js travis-install-cli travis-install-dist
+.PHONY: travis-install-sqlite travis-install-postgres travis-install-js travis-install-cli travis-install-dist
 
 # Lint steps
-travis-lint-danger: travis-noop
 travis-lint-sqlite: lint-python
 travis-lint-postgres: lint-python
 travis-lint-mysql: lint-python
@@ -247,11 +244,9 @@ travis-lint-cli: travis-noop
 travis-lint-dist: travis-noop
 travis-lint-django-18: travis-lint-postgres
 
-.PHONY: travis-lint-danger travis-lint-sqlite travis-lint-postgres travis-lint-mysql travis-lint-js travis-lint-cli travis-lint-dist
+.PHONY: travis-lint-sqlite travis-lint-postgres travis-lint-mysql travis-lint-js travis-lint-cli travis-lint-dist
 
 # Test steps
-travis-test-danger:
-	bundle exec danger
 travis-test-sqlite: test-python
 travis-test-postgres: test-python
 travis-test-mysql: test-python
@@ -266,11 +261,10 @@ travis-test-dist:
 	@ls -lh dist/
 travis-test-django-18: travis-test-postgres
 
-.PHONY: travis-test-danger travis-test-sqlite travis-test-postgres travis-test-mysql travis-test-js travis-test-cli travis-test-dist
+.PHONY: travis-test-sqlite travis-test-postgres travis-test-mysql travis-test-js travis-test-cli travis-test-dist
 
 
 # Scan steps
-travis-scan-danger: travis-noop
 travis-scan-sqlite: scan-python
 travis-scan-postgres: scan-python
 travis-scan-mysql: scan-python
@@ -281,4 +275,4 @@ travis-scan-cli: travis-noop
 travis-scan-dist: travis-noop
 travis-scan-django-18: travis-noop
 
-.PHONY: travis-scan-danger travis-scan-sqlite travis-scan-postgres travis-scan-mysql travis-scan-acceptance travis-scan-network travis-scan-js travis-scan-cli travis-scan-dist travis-scan-django-18
+.PHONY: travis-scan-sqlite travis-scan-postgres travis-scan-mysql travis-scan-acceptance travis-scan-network travis-scan-js travis-scan-cli travis-scan-dist travis-scan-django-18
