commit 6b2bdce71818fd430fc9cf5f5336bcb548a41d8d
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Thu Nov 15 10:52:44 2018 -0800

    feat(discover): Load tags with turbo option (#10583)
    
    This exposes the turbo option on the Discover API

diff --git a/src/sentry/api/endpoints/organization_discover_query.py b/src/sentry/api/endpoints/organization_discover_query.py
index 3b3d38bfda..2826618f1b 100644
--- a/src/sentry/api/endpoints/organization_discover_query.py
+++ b/src/sentry/api/endpoints/organization_discover_query.py
@@ -63,6 +63,7 @@ class DiscoverQuerySerializer(serializers.Serializer):
         required=False,
         allow_null=True,
     )
+    turbo = serializers.BooleanField(required=False)
 
     def __init__(self, *args, **kwargs):
         super(DiscoverQuerySerializer, self).__init__(*args, **kwargs)
@@ -344,4 +345,5 @@ class OrganizationDiscoverQueryEndpoint(OrganizationEndpoint):
             filter_keys={'project_id': serialized.get('projects')},
             arrayjoin=serialized.get('arrayjoin'),
             request=request,
+            turbo=serialized.get('turbo'),
         )
diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/queryBuilder.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/queryBuilder.jsx
index a105125315..1087810661 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/queryBuilder.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/queryBuilder.jsx
@@ -66,6 +66,7 @@ export default function createQueryBuilder(initial = {}, organization) {
       aggregations: [['count()', null, 'count']],
       orderby: '-count',
       range: '90d',
+      turbo: true,
     })
       .then(res => {
         tags = res.data.map(tag => {
diff --git a/src/sentry/utils/snuba.py b/src/sentry/utils/snuba.py
index 74aec4d533..2a402909bd 100644
--- a/src/sentry/utils/snuba.py
+++ b/src/sentry/utils/snuba.py
@@ -212,7 +212,7 @@ def transform_aliases_and_query(**kwargs):
 def raw_query(start, end, groupby=None, conditions=None, filter_keys=None,
               aggregations=None, rollup=None, arrayjoin=None, limit=None, offset=None,
               orderby=None, having=None, referrer=None, is_grouprelease=False,
-              selected_columns=None, totals=None, limitby=None):
+              selected_columns=None, totals=None, limitby=None, turbo=False):
     """
     Sends a query to snuba.
 
@@ -302,6 +302,7 @@ def raw_query(start, end, groupby=None, conditions=None, filter_keys=None,
         'limitby': limitby,
         'orderby': orderby,
         'selected_columns': selected_columns,
+        'turbo': turbo
     }) if v is not None}
 
     headers = {}
