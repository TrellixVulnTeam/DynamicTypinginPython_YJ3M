commit 80e4a587b35217271acf648b9740aec8ff559c69
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Thu Jul 18 11:51:59 2019 +0200

    feat: Use option to force-disable transaction events (#14056)

diff --git a/src/sentry/utils/sdk.py b/src/sentry/utils/sdk.py
index e5bdd3d4ec..01c6b41173 100644
--- a/src/sentry/utils/sdk.py
+++ b/src/sentry/utils/sdk.py
@@ -17,6 +17,7 @@ from sentry_sdk.consts import VERSION as SDK_VERSION
 from sentry_sdk.utils import Auth, capture_internal_exceptions
 from sentry_sdk.utils import logger as sdk_logger
 
+from sentry import options
 from sentry.utils import metrics
 from sentry.utils.rust import RustInfoIntegration
 
@@ -82,14 +83,17 @@ def configure_sdk():
 
     assert sentry_sdk.Hub.main.client is None
 
-    options = settings.SENTRY_SDK_CONFIG
+    sdk_options = settings.SENTRY_SDK_CONFIG
 
     internal_transport = InternalTransport()
     upstream_transport = None
-    if options.get('dsn'):
-        upstream_transport = make_transport(get_options(options))
+    if sdk_options.get('dsn'):
+        upstream_transport = make_transport(get_options(sdk_options))
 
     def capture_event(event):
+        if event.get('type') == 'transaction' and options.get('transaction-events.force-disable'):
+            return
+
         # Make sure we log to upstream when available first
         if upstream_transport is not None:
             # TODO(mattrobenolt): Bring this back safely.
@@ -109,7 +113,7 @@ def configure_sdk():
             RustInfoIntegration(),
         ],
         transport=capture_event,
-        **options
+        **sdk_options
     )
 
 
