commit 18d35fe92336322b945418fa4adc9e038271415f
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Dec 13 14:25:54 2014 -0800

    Add newinstall=1 to post-project creation

diff --git a/src/sentry/web/frontend/create_project.py b/src/sentry/web/frontend/create_project.py
index 549fb04fb4..e2e93d7e2e 100644
--- a/src/sentry/web/frontend/create_project.py
+++ b/src/sentry/web/frontend/create_project.py
@@ -2,7 +2,6 @@ from __future__ import absolute_import
 
 from django import forms
 from django.core.urlresolvers import reverse
-from django.http import HttpResponseRedirect
 
 from sentry.models import OrganizationMemberType, Project, Team
 from sentry.web.forms.add_project import AddProjectForm
@@ -63,7 +62,7 @@ class CreateProjectView(OrganizationView):
 
             url = reverse('sentry-stream', args=[organization.slug, project.slug])
 
-            return HttpResponseRedirect(url)
+            return self.redirect(url + '?newinstall=1')
 
         context = {
             'form': form,
diff --git a/src/sentry/web/frontend/create_team.py b/src/sentry/web/frontend/create_team.py
index dd991b64b2..f8831189b0 100644
--- a/src/sentry/web/frontend/create_team.py
+++ b/src/sentry/web/frontend/create_team.py
@@ -163,4 +163,4 @@ class CreateTeamView(OrganizationView):
 
         url = reverse('sentry-stream', args=[organization.slug, project.slug])
 
-        return self.redirect(url)
+        return self.redirect(url + '?newinstall=1')
diff --git a/tests/sentry/web/frontend/test_create_project.py b/tests/sentry/web/frontend/test_create_project.py
index 49098bda67..252ac22ca0 100644
--- a/tests/sentry/web/frontend/test_create_project.py
+++ b/tests/sentry/web/frontend/test_create_project.py
@@ -36,4 +36,4 @@ class CreateProjectTest(TestCase):
         assert project.team == team
 
         redirect_uri = reverse('sentry-stream', args=[organization.slug, project.slug])
-        assert resp['Location'] == 'http://testserver' + redirect_uri
+        assert resp['Location'] == 'http://testserver%s?newinstall=1' % (redirect_uri,)
diff --git a/tests/sentry/web/frontend/test_create_team.py b/tests/sentry/web/frontend/test_create_team.py
index b1637a283e..5a81388ee3 100644
--- a/tests/sentry/web/frontend/test_create_team.py
+++ b/tests/sentry/web/frontend/test_create_team.py
@@ -122,4 +122,4 @@ class CreateTeamTest(TestCase):
 
         redirect_uri = reverse('sentry-stream', args=[organization.slug, project.slug])
 
-        assert resp['Location'] == 'http://testserver%s' % (redirect_uri,)
+        assert resp['Location'] == 'http://testserver%s?newinstall=1' % (redirect_uri,)
