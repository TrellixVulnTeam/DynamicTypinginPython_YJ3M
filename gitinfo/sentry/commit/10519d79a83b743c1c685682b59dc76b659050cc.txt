commit 10519d79a83b743c1c685682b59dc76b659050cc
Author: Xavier Ordoquy <xordoquy@linovia.com>
Date:   Tue Jan 10 08:33:05 2012 +0100

    Restricts the status page to the site staff.

diff --git a/sentry/templates/sentry/status.html b/sentry/templates/sentry/status.html
index c13692e6e2..069c6b1d13 100644
--- a/sentry/templates/sentry/status.html
+++ b/sentry/templates/sentry/status.html
@@ -8,6 +8,11 @@
 {% block heading %}{% trans "Status" %}{% endblock %}
 
 {% block content %}
+    {% if restricted %}
+    <div class="span16">
+        <div class="alert-message notice">Restricted to administrators.</div>
+    </div>
+    {% else %}
     <div class="span16">
         <ul class="tabs" data-tabs="tabs">
             <li class="active"><a href="#main">Environment</a></li>
@@ -198,4 +203,5 @@
             {% endfor %}
         </div>
     </div>
+    {% endif %}
 {% endblock %}
diff --git a/sentry/web/frontend/generic.py b/sentry/web/frontend/generic.py
index e84d8de1e6..83448c1c1e 100644
--- a/sentry/web/frontend/generic.py
+++ b/sentry/web/frontend/generic.py
@@ -38,6 +38,11 @@ def status(request):
     from sentry.views import View
     from sentry.processors import Processor
 
+    if not request.user.is_staff:
+        return render_to_response('sentry/status.html', {
+            'restricted': True,
+        }, request)
+
     # Deal with the plugins
     site_configs = []
     for name, cls in Plugin.plugins.iteritems():
