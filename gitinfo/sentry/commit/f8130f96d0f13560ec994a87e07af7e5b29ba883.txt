commit f8130f96d0f13560ec994a87e07af7e5b29ba883
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jul 6 13:52:22 2016 -0700

    Capture events per release by issue
    
    @getsentry/infrastructure

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index 78e874bc0f..1b0542c48c 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -754,7 +754,7 @@ class EventManager(object):
             (tsdb.models.project, project.id),
         ], timestamp=event.datetime)
 
-        tsdb.record_frequency_multi([
+        frequencies = [
             (tsdb.models.frequent_projects_by_organization, {
                 project.organization_id: {
                     project.id: 1,
@@ -764,8 +764,18 @@ class EventManager(object):
                 project.id: {
                     group.id: 1,
                 },
-            }),
-        ], timestamp=event.datetime)
+            })
+        ]
+        if release:
+            frequencies.append(
+                (tsdb.models.frequent_releases_by_groups, {
+                    group.id: {
+                        release.id: 1,
+                    },
+                })
+            )
+
+        tsdb.record_frequency_multi(frequencies, timestamp=event.datetime)
 
         return group, is_new, is_regression, is_sample
 
diff --git a/src/sentry/tsdb/base.py b/src/sentry/tsdb/base.py
index 6c36d8496b..faf95bad09 100644
--- a/src/sentry/tsdb/base.py
+++ b/src/sentry/tsdb/base.py
@@ -61,6 +61,8 @@ class TSDBModel(Enum):
     frequent_projects_by_organization = 403
     # number of issues seen for a project, by project
     frequent_issues_by_project = 404
+    # number of events seen for a release, by issue
+    frequent_releases_by_groups = 406
 
 
 class BaseTSDB(object):
