commit f0d22cb0cca89a1a608461ca476a948259274023
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Fri Nov 13 21:36:08 2015 +0100

    Handle extra ENHANCED classes too.

diff --git a/src/sentry/interfaces/stacktrace.py b/src/sentry/interfaces/stacktrace.py
index 8b370d3998..b9b12dc500 100644
--- a/src/sentry/interfaces/stacktrace.py
+++ b/src/sentry/interfaces/stacktrace.py
@@ -36,7 +36,7 @@ _filename_version_re = re.compile(r"""(?:
 # Java Spring specific anonymous classes.
 # see: http://mydailyjava.blogspot.co.at/2013/11/cglib-missing-manual.html
 _java_enhancer_re = re.compile(r'''
-\$\$EnhancerBySpringCGLIB\$\$[a-fA-F0-9]+
+\$\$[\w_]+?CGLIB\$\$[a-fA-F0-9]+
 ''', re.X)
 
 
diff --git a/tests/sentry/interfaces/test_stacktrace.py b/tests/sentry/interfaces/test_stacktrace.py
index dd68bf8c55..6ea3aa2814 100644
--- a/tests/sentry/interfaces/test_stacktrace.py
+++ b/tests/sentry/interfaces/test_stacktrace.py
@@ -201,6 +201,20 @@ class StacktraceTest(TestCase):
             'jipJipManagementApplication',
         ])
 
+    def test_get_hash_ignores_extra_ENHANCED_spring_classes(self):
+        interface = Frame.to_python({
+            'module': 'invalid.gruml.talkytalkyhub.common.config.'
+            'JipJipConfig$$EnhancerBySpringCGLIB$$1ebdddb0'
+            '$$EnhancerBySpringCGLIB$$8219cd38'
+            '$$FastClassBySpringCGLIB$$6c0b35d1',
+            'function': 'jipJipManagementApplication'
+        })
+        result = interface.get_hash()
+        self.assertEquals(result, [
+            'invalid.gruml.talkytalkyhub.common.config.JipJipConfig',
+            'jipJipManagementApplication',
+        ])
+
     def test_get_hash_sanitizes_erb_templates(self):
         # This is Ruby specific
         interface = Frame.to_python({
