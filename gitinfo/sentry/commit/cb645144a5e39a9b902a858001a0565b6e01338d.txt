commit cb645144a5e39a9b902a858001a0565b6e01338d
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Fri Mar 23 14:37:29 2018 -0700

    feat(ui): Various sentry9 changes (#7768)
    
    * fix(padding): Organization Teams
    
    * feat(ui): Overflow for settings breadcrumb
    
    * feat(padding): Dropdown menu, radius, borders
    
    * more padding changes to settings breadcrumb
    
    * feat(ui): Change remove member from org button
    
    * fix(ui): Fix settings index alignment

diff --git a/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx b/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx
index d5aebf01c0..3db619d1b6 100644
--- a/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx
+++ b/src/sentry/static/sentry/app/components/dropdownAutoCompleteMenu.jsx
@@ -1,7 +1,9 @@
+import {css} from 'emotion';
 import PropTypes from 'prop-types';
 import React from 'react';
-import styled from 'react-emotion';
 import _ from 'lodash';
+import styled from 'react-emotion';
+
 import AutoComplete from './autoComplete';
 import Input from '../views/settings/components/forms/controls/input';
 
@@ -32,7 +34,19 @@ class DropdownAutoCompleteMenu extends React.Component {
     ]),
     isOpen: PropTypes.bool,
     onSelect: PropTypes.func,
+
+    /**
+     * Presentational properties
+     */
+
+    /**
+     * Dropdown menu alignment.
+     */
     alignMenu: PropTypes.oneOf(['left', 'right']),
+    /**
+     * Should menu visually lock to a direction (so we don't display a rounded corner)
+     */
+    blendCorner: PropTypes.bool,
     menuFooter: PropTypes.element,
     menuHeader: PropTypes.element,
 
@@ -46,6 +60,7 @@ class DropdownAutoCompleteMenu extends React.Component {
 
   static defaultProps = {
     onSelect: () => {},
+    blendCorner: true,
   };
 
   filterItems = (items, inputValue) =>
@@ -90,8 +105,8 @@ class DropdownAutoCompleteMenu extends React.Component {
       items,
       menuProps,
       alignMenu,
+      blendCorner,
       style,
-      css,
       menuHeader,
       menuFooter,
       ...props
@@ -125,7 +140,8 @@ class DropdownAutoCompleteMenu extends React.Component {
                   {...getMenuProps({
                     ...menuProps,
                     style,
-                    css,
+                    css: this.props.css,
+                    blendCorner,
                     alignMenu,
                   })}
                 >
@@ -142,9 +158,9 @@ class DropdownAutoCompleteMenu extends React.Component {
                           <StyledLabel key={index}>{item.label}</StyledLabel>
                         ) : (
                           <AutoCompleteItem
-                            key={`${item.value}-${item.label}`}
+                            key={`${item.value}-${index}`}
+                            index={index}
                             highlightedIndex={highlightedIndex}
-                            index={item.index}
                             {...getItemProps({item, index: item.index})}
                           >
                             {item.label}
@@ -163,6 +179,28 @@ class DropdownAutoCompleteMenu extends React.Component {
   }
 }
 
+/**
+ * If `blendCorner` is false, then we apply border-radius to all corners
+ *
+ * Otherwise apply radius to opposite side of `alignMenu`
+ */
+const getMenuBorderRadius = ({blendCorner, alignMenu, theme}) => {
+  let radius = theme.borderRadius;
+  if (!blendCorner) {
+    return css`
+      border-radius: ${radius};
+    `;
+  }
+
+  let hasTopLeftRadius = alignMenu !== 'left';
+  let hasTopRightRadius = !hasTopLeftRadius;
+
+  return css`
+    border-radius: ${hasTopLeftRadius ? radius : 0} ${hasTopRightRadius ? radius : 0}
+      ${radius} ${radius};
+  `;
+};
+
 const AutoCompleteRoot = styled(({isOpen, ...props}) => <div {...props} />)`
   position: relative;
   display: inline-block;
@@ -172,6 +210,8 @@ const StyledInput = styled(Input)`
   &,
   &:focus {
     border: none;
+    border-bottom: 1px solid ${p => p.theme.borderLight};
+    border-radius: 0;
     box-shadow: none;
     font-size: 13px;
     padding: 12px 8px;
@@ -183,8 +223,14 @@ const StyledInput = styled(Input)`
 const AutoCompleteItem = styled('div')`
   background-color: ${p =>
     p.index == p.highlightedIndex ? p.theme.offWhite : 'transparent'};
-  padding: 4px 8px;
+  padding: 10px;
   cursor: pointer;
+  border-bottom: 1px solid ${p => p.theme.borderLighter};
+
+  &:last-child {
+    border-bottom: none;
+  }
+
   &:hover {
     background-color: ${p => p.theme.offWhite};
   }
@@ -195,30 +241,28 @@ const StyledLabel = styled('div')`
   background-color: ${p => p.theme.offWhite};
   border: 1px solid ${p => p.theme.borderLight};
   border-width: 1px 0;
+
+  &:first-child {
+    border-top: none;
+  }
 `;
 
-const StyledMenu = styled(({isOpen, alignMenu, ...props}) => <div {...props} />)`
+const StyledMenu = styled(({isOpen, blendCorner, alignMenu, ...props}) => (
+  <div {...props} />
+))`
   background: #fff;
   border: 1px solid ${p => p.theme.borderLight};
-  border-radius: 0 ${p => p.theme.borderRadius} ${p => p.theme.borderRadius}
-    ${p => p.theme.borderRadius};
   position: absolute;
   top: calc(100% - 1px);
   min-width: 250px;
   z-index: 1;
   max-height: 300px;
-  overflow-y: scroll;
+  overflow-y: auto;
   right: 0;
-  border-radius: ${({theme}) =>
-    `${theme.borderRadius} 0 ${theme.borderRadius} ${theme.borderRadius}`};
-
-  ${({alignMenu, theme}) =>
-    alignMenu === 'left'
-      ? `
-    left: 0;
-    border-radius: 0 ${theme.borderRadius} ${theme.borderRadius} ${theme.borderRadius};
-  `
-      : ''};
+  box-shadow: ${p => p.theme.dropShadowLight};
+
+  ${getMenuBorderRadius};
+  ${({alignMenu}) => (alignMenu === 'left' ? 'left: 0;' : '')};
 `;
 
 export default DropdownAutoCompleteMenu;
diff --git a/src/sentry/static/sentry/app/utils/theme.jsx b/src/sentry/static/sentry/app/utils/theme.jsx
index 68f7519547..63f8d8541a 100644
--- a/src/sentry/static/sentry/app/utils/theme.jsx
+++ b/src/sentry/static/sentry/app/utils/theme.jsx
@@ -46,6 +46,7 @@ const theme = {
   purpleDark: '#5346AE',
   purpleDarkest: '#392C94',
 
+  borderLighter: '#f9f6fd',
   borderLight: '#E2DBE8',
   borderDark: '#D1CAD8',
   borderRadius: '4px',
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/breadcrumbDropdown.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/breadcrumbDropdown.jsx
index 515d61cfac..d941ee26ec 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/breadcrumbDropdown.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/breadcrumbDropdown.jsx
@@ -84,6 +84,7 @@ class BreadcrumbDropdown extends React.Component {
     let {hasMenu, route, isLast, name, items, onSelect} = this.props;
     return (
       <DropdownAutoCompleteMenu
+        blendCorner={false}
         alignMenu="left"
         onOpen={this.handleMouseEnter}
         onClose={this.close}
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/menuItem.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/menuItem.jsx
new file mode 100644
index 0000000000..02ab678cb4
--- /dev/null
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/menuItem.jsx
@@ -0,0 +1,21 @@
+import React from 'react';
+import styled from 'react-emotion';
+
+import TextOverflow from '../../../../components/textOverflow';
+
+class MenuItem extends React.Component {
+  render() {
+    let {children, ...props} = this.props;
+    return (
+      <StyledMenuItem {...props}>
+        <TextOverflow>{children}</TextOverflow>
+      </StyledMenuItem>
+    );
+  }
+}
+
+const StyledMenuItem = styled('div')`
+  font-size: 14px;
+`;
+
+export default MenuItem;
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/organizationCrumb.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/organizationCrumb.jsx
index bb28cebdc2..18decfa80a 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/organizationCrumb.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/organizationCrumb.jsx
@@ -5,6 +5,7 @@ import React from 'react';
 
 import BreadcrumbDropdown from './breadcrumbDropdown';
 import LetterAvatar from '../../../../components/letterAvatar';
+import MenuItem from './menuItem';
 import SentryTypes from '../../../../proptypes';
 import TextLink from '../../../../components/textLink';
 import recreateRoute from '../../../../utils/recreateRoute';
@@ -58,7 +59,7 @@ class OrganizationCrumb extends React.Component {
         route={route}
         items={organizations.map(org => ({
           value: org.slug,
-          label: org.slug,
+          label: <MenuItem>{org.slug}</MenuItem>,
         }))}
         {...props}
       />
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/projectCrumb.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/projectCrumb.jsx
index 1c3e76362a..69db39854d 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/projectCrumb.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/projectCrumb.jsx
@@ -5,6 +5,7 @@ import styled from 'react-emotion';
 
 import BreadcrumbDropdown from './breadcrumbDropdown';
 import LoadingIndicator from '../../../../components/loadingIndicator';
+import MenuItem from './menuItem';
 import SentryTypes from '../../../../proptypes';
 import TextLink from '../../../../components/textLink';
 import recreateRoute from '../../../../utils/recreateRoute';
@@ -79,7 +80,7 @@ class ProjectCrumb extends React.Component {
         }}
         items={projects.map(project => ({
           value: project.slug,
-          label: project.slug,
+          label: <MenuItem>{project.slug}</MenuItem>,
         }))}
         {...props}
       />
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/teamCrumb.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/teamCrumb.jsx
index 278ceb54d8..b7f12a28f9 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/teamCrumb.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/teamCrumb.jsx
@@ -4,6 +4,7 @@ import PropTypes from 'prop-types';
 import React from 'react';
 
 import BreadcrumbDropdown from './breadcrumbDropdown';
+import MenuItem from './menuItem';
 import TextLink from '../../../../components/textLink';
 import recreateRoute from '../../../../utils/recreateRoute';
 import withTeams from '../../../../utils/withTeams';
@@ -47,7 +48,7 @@ class TeamCrumb extends React.Component {
         route={route}
         items={teams.map(({slug}) => ({
           value: slug,
-          label: `#${slug}`,
+          label: <MenuItem>#{slug}</MenuItem>,
         }))}
         {...props}
       />
diff --git a/src/sentry/static/sentry/app/views/settings/organization/members/organizationMemberRow.jsx b/src/sentry/static/sentry/app/views/settings/organization/members/organizationMemberRow.jsx
index 04c3fec6e2..6dbc39985c 100644
--- a/src/sentry/static/sentry/app/views/settings/organization/members/organizationMemberRow.jsx
+++ b/src/sentry/static/sentry/app/views/settings/organization/members/organizationMemberRow.jsx
@@ -183,8 +183,8 @@ export default class OrganizationMemberRow extends React.PureComponent {
                     orgName,
                   })}
                 >
-                  <Button priority="danger" size="small" busy={this.state.busy}>
-                    <span className="icon icon-trash" /> {t('Remove')}
+                  <Button icon="icon-circle-subtract" size="small" busy={this.state.busy}>
+                    {t('Remove')}
                   </Button>
                 </Confirm>
               )}
diff --git a/src/sentry/static/sentry/app/views/settings/project/projectTeams.jsx b/src/sentry/static/sentry/app/views/settings/project/projectTeams.jsx
index 6d93580c50..f4de5260fe 100644
--- a/src/sentry/static/sentry/app/views/settings/project/projectTeams.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/projectTeams.jsx
@@ -255,7 +255,6 @@ const RemoveIcon = styled(props => (
 `;
 
 const TeamDropdownElement = styled('div')`
-  padding: 0.5em 0.25em;
   text-transform: none;
 
   &:hover {
diff --git a/src/sentry/static/sentry/app/views/settings/settingsIndex.jsx b/src/sentry/static/sentry/app/views/settings/settingsIndex.jsx
index bca53520d7..5a499b67e0 100644
--- a/src/sentry/static/sentry/app/views/settings/settingsIndex.jsx
+++ b/src/sentry/static/sentry/app/views/settings/settingsIndex.jsx
@@ -33,7 +33,9 @@ const LINKS = {
 
 const HomePanelHeader = styled(PanelHeader)`
   background: #fff;
+  flex-direction: column;
   text-align: center;
+  justify-content: center;
   font-size: 18px;
   text-transform: unset;
   padding: 35px 30px;
diff --git a/src/sentry/static/sentry/app/views/settings/team/allTeamsList.jsx b/src/sentry/static/sentry/app/views/settings/team/allTeamsList.jsx
index f37f9dafeb..dfd6258671 100644
--- a/src/sentry/static/sentry/app/views/settings/team/allTeamsList.jsx
+++ b/src/sentry/static/sentry/app/views/settings/team/allTeamsList.jsx
@@ -1,12 +1,12 @@
+import {Link} from 'react-router';
 import PropTypes from 'prop-types';
 import React from 'react';
-import {Link} from 'react-router';
-
-import SentryTypes from '../../../proptypes';
 
+import {tct} from '../../../locale';
 import AllTeamsRow from './allTeamsRow';
 import EmptyMessage from '../components/emptyMessage';
-import {tct} from '../../../locale';
+import SentryTypes from '../../../proptypes';
+import TextBlock from '../components/text/textBlock';
 
 class AllTeamsList extends React.Component {
   static propTypes = {
@@ -41,7 +41,7 @@ class AllTeamsList extends React.Component {
     return (
       <EmptyMessage>
         {tct('No teams here. You can always [link:create one].', {
-          root: <p />,
+          root: <TextBlock noMargin />,
           link: <Link to={`/organizations/${organization.slug}/teams/new/`} />,
         })}
       </EmptyMessage>
diff --git a/src/sentry/static/sentry/app/views/settings/team/teamMembers.jsx b/src/sentry/static/sentry/app/views/settings/team/teamMembers.jsx
index 8a3228b0ca..8bd670d276 100644
--- a/src/sentry/static/sentry/app/views/settings/team/teamMembers.jsx
+++ b/src/sentry/static/sentry/app/views/settings/team/teamMembers.jsx
@@ -267,10 +267,6 @@ const StyledUserListElement = styled('div')`
   font-size: 0.875em;
   display: flex;
   align-items: center;
-  padding: 0.25em 0;
-  &:hover {
-    cursor: pointer;
-  }
 `;
 
 const StyledNameOrEmail = styled('div')`
diff --git a/src/sentry/static/sentry/app/views/settings/team/teamProjects.jsx b/src/sentry/static/sentry/app/views/settings/team/teamProjects.jsx
index 796be91324..ac60de4211 100644
--- a/src/sentry/static/sentry/app/views/settings/team/teamProjects.jsx
+++ b/src/sentry/static/sentry/app/views/settings/team/teamProjects.jsx
@@ -155,13 +155,7 @@ const TeamProjects = createReactClass({
   },
 });
 
-const ProjectListElement = styled('div')`
-  padding: 0.5em 0.25em;
-
-  &:hover {
-    cursor: pointer;
-  }
-`;
+const ProjectListElement = styled('div')``;
 
 const RemoveIcon = styled(props => (
   <InlineSvg {...props} src="icon-circle-subtract">
diff --git a/tests/js/spec/components/dropdownAutoCompleteMenu.spec.jsx b/tests/js/spec/components/dropdownAutoCompleteMenu.spec.jsx
index 34ea92c475..f847725535 100644
--- a/tests/js/spec/components/dropdownAutoCompleteMenu.spec.jsx
+++ b/tests/js/spec/components/dropdownAutoCompleteMenu.spec.jsx
@@ -87,7 +87,7 @@ describe('DropdownAutoCompleteMenu', function() {
       </DropdownAutoCompleteMenu>
     );
     wrapper
-      .find('[index]')
+      .find('AutoCompleteItem')
       .last()
       .simulate('click');
     expect(mock).toMatchSnapshot();
diff --git a/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap b/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap
index 79c2fb1d74..100a6a3799 100644
--- a/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap
@@ -190,6 +190,7 @@ exports[`OrganizationTeamProjects Should render 1`] = `
                         >
                           <DropdownAutoCompleteMenu
                             alignMenu="right"
+                            blendCorner={true}
                             items={
                               Array [
                                 Object {
diff --git a/tests/js/spec/views/__snapshots__/ownershipInput.spec.jsx.snap b/tests/js/spec/views/__snapshots__/ownershipInput.spec.jsx.snap
index 837f40c640..511246b4af 100644
--- a/tests/js/spec/views/__snapshots__/ownershipInput.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/ownershipInput.spec.jsx.snap
@@ -424,6 +424,7 @@ exports[`ProjectTeamsSettings render() renders 1`] = `
               >
                 <DropdownAutoCompleteMenu
                   alignMenu="right"
+                  blendCorner={true}
                   items={
                     Array [
                       Object {
diff --git a/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap b/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
index 5329205eb2..29f5eda552 100644
--- a/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
@@ -376,6 +376,7 @@ exports[`RuleBuilder render() renders 1`] = `
             >
               <DropdownAutoCompleteMenu
                 alignMenu="right"
+                blendCorner={true}
                 items={
                   Array [
                     Object {
