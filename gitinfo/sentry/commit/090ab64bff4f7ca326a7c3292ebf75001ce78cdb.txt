commit 090ab64bff4f7ca326a7c3292ebf75001ce78cdb
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Mon Sep 16 11:32:12 2019 -0700

    chore(ts): Convert components/avatar/baseAvatar (#14723)

diff --git a/src/sentry/static/sentry/app/components/avatar/baseAvatar.jsx b/src/sentry/static/sentry/app/components/avatar/baseAvatar.tsx
similarity index 78%
rename from src/sentry/static/sentry/app/components/avatar/baseAvatar.jsx
rename to src/sentry/static/sentry/app/components/avatar/baseAvatar.tsx
index 09bdffa369..d101d3f126 100644
--- a/src/sentry/static/sentry/app/components/avatar/baseAvatar.jsx
+++ b/src/sentry/static/sentry/app/components/avatar/baseAvatar.tsx
@@ -14,7 +14,56 @@ const DEFAULT_GRAVATAR_SIZE = 64;
 const ALLOWED_SIZES = [20, 32, 36, 48, 52, 64, 80, 96, 120];
 const DEFAULT_REMOTE_SIZE = 120;
 
-class BaseAvatar extends React.Component {
+type Props = {
+  size?: number;
+  /**
+   * This is the size of the remote image to request.
+   */
+  remoteImageSize?: typeof ALLOWED_SIZES[number];
+  /**
+   * Default gravatar to display
+   */
+  default?: string;
+  /**
+   * Enable to display tooltips.
+   */
+  hasTooltip?: boolean;
+  /**
+   * The type of avatar being rendered.
+   */
+  type?: string;
+  /**
+   * Path to uploaded avatar (differs based on model type)
+   */
+  uploadPath?: 'avatar' | 'team-avatar' | 'organization-avatar' | 'project-avatar';
+  uploadId?: string;
+  gravatarId?: string;
+  letterId?: string;
+  title?: string;
+  /**
+   * The content for the tooltip. Requires hasTooltip to display
+   */
+  tooltip?: Pick<Tooltip['props'], 'title'>;
+  /**
+   * Additional props for the tooltip
+   */
+  tooltipOptions?: Tooltip['props'];
+  /**
+   * Should avatar be round instead of a square
+   */
+  round: boolean;
+
+  className?: string;
+  style: React.CSSProperties;
+};
+
+type State = {
+  showBackupAvatar: boolean;
+  hasLoaded: boolean;
+  loadError: boolean;
+};
+
+class BaseAvatar extends React.Component<Props, State> {
   static propTypes = {
     size: PropTypes.number,
     /**
@@ -67,9 +116,10 @@ class BaseAvatar extends React.Component {
     hasTooltip: false,
     type: 'letter_avatar',
     uploadPath: 'avatar',
+    round: false,
   };
 
-  constructor(props) {
+  constructor(props: Props) {
     super(props);
 
     this.state = {
@@ -146,12 +196,12 @@ class BaseAvatar extends React.Component {
   render() {
     const {
       className,
+      style,
       round,
       hasTooltip,
       size,
       tooltip,
       tooltipOptions,
-      style,
     } = this.props;
     let sizeStyle = {};
 
@@ -185,12 +235,12 @@ export default BaseAvatar;
 
 // Note: Avatar will not always be a child of a flex layout, but this seems like a
 // sensible default.
-const StyledBaseAvatar = styled('span')`
+const StyledBaseAvatar = styled('span')<{round: boolean; loaded: boolean}>`
   flex-shrink: 0;
   ${p => !p.loaded && 'background-color: rgba(200, 200, 200, 0.1);'};
   ${p => p.round && 'border-radius: 100%;'};
 `;
 
-const Image = styled('img')`
+const Image = styled('img')<Pick<Props, 'round'>>`
   ${imageStyle};
 `;
diff --git a/src/sentry/static/sentry/app/components/avatar/styles.jsx b/src/sentry/static/sentry/app/components/avatar/styles.tsx
similarity index 63%
rename from src/sentry/static/sentry/app/components/avatar/styles.jsx
rename to src/sentry/static/sentry/app/components/avatar/styles.tsx
index 1c817706e9..2323a6081f 100644
--- a/src/sentry/static/sentry/app/components/avatar/styles.jsx
+++ b/src/sentry/static/sentry/app/components/avatar/styles.tsx
@@ -1,4 +1,4 @@
-export const imageStyle = props => `
+export const imageStyle = (props: {round?: boolean}) => `
   position: absolute;
   top: 0px;
   left: 0px;
diff --git a/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap b/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
index 3968fedff3..676171535a 100644
--- a/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
+++ b/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
@@ -290,7 +290,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                             }
                           >
                             <span
-                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e147uwb0"
                               style={
                                 Object {
                                   "height": "28px",
@@ -488,7 +488,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                             }
                           >
                             <span
-                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e147uwb0"
                               style={
                                 Object {
                                   "height": "28px",
@@ -686,7 +686,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                             }
                           >
                             <span
-                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e147uwb0"
                               style={
                                 Object {
                                   "height": "28px",
@@ -884,7 +884,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                             }
                           >
                             <span
-                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e147uwb0"
                               style={
                                 Object {
                                   "height": "28px",
@@ -1082,7 +1082,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                             }
                           >
                             <span
-                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e147uwb0"
                               style={
                                 Object {
                                   "height": "28px",
@@ -1332,7 +1332,7 @@ exports[`AvatarList renders with user avatars 1`] = `
                             }
                           >
                             <span
-                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e147uwb0"
                               style={
                                 Object {
                                   "height": "28px",
@@ -1530,7 +1530,7 @@ exports[`AvatarList renders with user avatars 1`] = `
                             }
                           >
                             <span
-                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                              className="avatar e1axh4r51 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e147uwb0"
                               style={
                                 Object {
                                   "height": "28px",
diff --git a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
index d95b510347..011dd29f8a 100644
--- a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
@@ -271,6 +271,7 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                 className="css-6su6fj"
                 hasTooltip={false}
                 letterId="org-slug"
+                round={false}
                 size={36}
                 style={Object {}}
                 title="org slug"
@@ -287,6 +288,7 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                   <StyledBaseAvatar
                     className="avatar css-6su6fj"
                     loaded={true}
+                    round={false}
                     style={
                       Object {
                         "height": "36px",
@@ -295,7 +297,7 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                     }
                   >
                     <span
-                      className="avatar css-1ezk8y8-StyledBaseAvatar e1z0ohzl0"
+                      className="avatar css-1ezk8y8-StyledBaseAvatar e147uwb0"
                       style={
                         Object {
                           "height": "36px",
@@ -769,7 +771,7 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                                         }
                                       >
                                         <span
-                                          className="avatar ev46mzr4 css-wxw9er-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
+                                          className="avatar ev46mzr4 css-wxw9er-StyledBaseAvatar-StyledAvatar e147uwb0"
                                           style={
                                             Object {
                                               "height": "32px",
@@ -3554,7 +3556,7 @@ exports[`Sidebar renders without org and router 1`] = `
                                         }
                                       >
                                         <span
-                                          className="avatar ev46mzr4 css-wxw9er-StyledBaseAvatar-StyledAvatar e1z0ohzl0"
+                                          className="avatar ev46mzr4 css-wxw9er-StyledBaseAvatar-StyledAvatar e147uwb0"
                                           style={
                                             Object {
                                               "height": "32px",
diff --git a/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap b/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
index 7ead368c64..a0a7c6cd44 100644
--- a/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
@@ -2606,7 +2606,7 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                                                             }
                                                           >
                                                             <span
-                                                              className="avatar css-3f9bmx-StyledBaseAvatar e1z0ohzl0"
+                                                              className="avatar css-3f9bmx-StyledBaseAvatar e147uwb0"
                                                               style={
                                                                 Object {
                                                                   "height": "28px",
diff --git a/tests/js/spec/views/organizationReleases/detail/__snapshots__/releaseCommits.spec.jsx.snap b/tests/js/spec/views/organizationReleases/detail/__snapshots__/releaseCommits.spec.jsx.snap
index 9218f7bc61..c7ec0352fa 100644
--- a/tests/js/spec/views/organizationReleases/detail/__snapshots__/releaseCommits.spec.jsx.snap
+++ b/tests/js/spec/views/organizationReleases/detail/__snapshots__/releaseCommits.spec.jsx.snap
@@ -237,7 +237,7 @@ Users now have access to useful links from the blogs and docs on Spike-protectio
                                       }
                                     >
                                       <span
-                                        className="avatar css-3f9bmx-StyledBaseAvatar e1z0ohzl0"
+                                        className="avatar css-3f9bmx-StyledBaseAvatar e147uwb0"
                                         style={
                                           Object {
                                             "height": "36px",
@@ -611,7 +611,7 @@ Users now have access to useful links from the blogs and docs on Spike-protectio
                                       }
                                     >
                                       <span
-                                        className="avatar css-3f9bmx-StyledBaseAvatar e1z0ohzl0"
+                                        className="avatar css-3f9bmx-StyledBaseAvatar e147uwb0"
                                         style={
                                           Object {
                                             "height": "36px",
