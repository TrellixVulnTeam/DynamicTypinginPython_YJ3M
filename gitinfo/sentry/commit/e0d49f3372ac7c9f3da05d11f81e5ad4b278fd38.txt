commit e0d49f3372ac7c9f3da05d11f81e5ad4b278fd38
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Sep 17 10:29:22 2015 -0700

    Ensure search queries dont contain padded spaces

diff --git a/src/sentry/search/utils.py b/src/sentry/search/utils.py
index 7e9b834cc9..c96510c16e 100644
--- a/src/sentry/search/utils.py
+++ b/src/sentry/search/utils.py
@@ -6,13 +6,17 @@ from sentry.utils.auth import find_users
 
 
 def parse_query(query, user):
-    # TODO(dcramer): make this better
+    # TODO(dcramer): handle query being wrapped in quotes
     tokens = query.split(' ')
 
     results = {'tags': {}, 'query': []}
 
     tokens_iter = iter(tokens)
     for token in tokens_iter:
+        # ignore empty tokens
+        if not token:
+            continue
+
         if ':' not in token:
             results['query'].append(token)
             continue
diff --git a/tests/sentry/search/test_utils.py b/tests/sentry/search/test_utils.py
index 82548ffacc..4d4b8400de 100644
--- a/tests/sentry/search/test_utils.py
+++ b/tests/sentry/search/test_utils.py
@@ -61,3 +61,7 @@ class ParseQueryTest(TestCase):
     def test_release(self):
         result = parse_query('release:bar', self.user)
         assert result == {'tags': {'sentry:release': 'bar'}, 'query': ''}
+
+    def test_padded_spacing(self):
+        result = parse_query('release:bar  foo   bar', self.user)
+        assert result == {'tags': {'sentry:release': 'bar'}, 'query': 'foo bar'}
