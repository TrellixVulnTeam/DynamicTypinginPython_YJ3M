commit 684a40f3b74b67d282d6cb871102dbc02196b9c9
Author: Ben Vinegar <ben@benv.ca>
Date:   Wed Aug 26 14:15:38 2015 -0700

    Add .eslintrc rules for catching errors + jshint cleanup

diff --git a/.eslintrc b/.eslintrc
index daa18faf8c..d1e0e6fb93 100644
--- a/.eslintrc
+++ b/.eslintrc
@@ -11,5 +11,41 @@
     "react"
   ],
   "rules": {
+    /**
+     * Strict mode
+     */
+    // babel inserts "use strict"; for us
+    "strict": [2, "never"],          // http://eslint.org/docs/rules/strict
+
+    /**
+     * ES6
+     */
+    "no-var": 0,                     // http://eslint.org/docs/rules/no-var
+    "prefer-const": 2,               // http://eslint.org/docs/rules/prefer-const
+
+    /**
+     * Possible errors
+     */
+    "comma-dangle": [0, "always-multiline"],    // http://eslint.org/docs/rules/comma-dangle
+    "no-cond-assign": [2, "always"], // http://eslint.org/docs/rules/no-cond-assign
+    "no-console": 1,                 // http://eslint.org/docs/rules/no-console
+    "no-debugger": 1,                // http://eslint.org/docs/rules/no-debugger
+    "no-alert": 1,                   // http://eslint.org/docs/rules/no-alert
+    "no-constant-condition": 1,      // http://eslint.org/docs/rules/no-constant-condition
+    "no-dupe-keys": 2,               // http://eslint.org/docs/rules/no-dupe-keys
+    "no-duplicate-case": 2,          // http://eslint.org/docs/rules/no-duplicate-case
+    "no-empty": 2,                   // http://eslint.org/docs/rules/no-empty
+    "no-ex-assign": 2,               // http://eslint.org/docs/rules/no-ex-assign
+    "no-extra-boolean-cast": 0,      // http://eslint.org/docs/rules/no-extra-boolean-cast
+    "no-extra-semi": 2,              // http://eslint.org/docs/rules/no-extra-semi
+    "no-func-assign": 2,             // http://eslint.org/docs/rules/no-func-assign
+    "no-inner-declarations": 2,      // http://eslint.org/docs/rules/no-inner-declarations
+    "no-invalid-regexp": 2,          // http://eslint.org/docs/rules/no-invalid-regexp
+    "no-irregular-whitespace": 2,    // http://eslint.org/docs/rules/no-irregular-whitespace
+    "no-obj-calls": 2,               // http://eslint.org/docs/rules/no-obj-calls
+    "no-sparse-arrays": 2,           // http://eslint.org/docs/rules/no-sparse-arrays
+    "no-unreachable": 2,             // http://eslint.org/docs/rules/no-unreachable
+    "use-isnan": 2,                  // http://eslint.org/docs/rules/use-isnan
+    "block-scoped-var": 2,           // http://eslint.org/docs/rules/block-scoped-var
   }
 }
diff --git a/src/sentry/static/sentry/app/components/count.jsx b/src/sentry/static/sentry/app/components/count.jsx
index cb1e7be91b..124eff3333 100644
--- a/src/sentry/static/sentry/app/components/count.jsx
+++ b/src/sentry/static/sentry/app/components/count.jsx
@@ -21,6 +21,7 @@ var Count = React.createClass({
 
       number = parseInt(number, 10);
 
+      /*eslint no-cond-assign:0*/
       for (var i=0; (b=this.numberFormats[i]); i++){
           x = b[0];
           y = b[1];
@@ -47,4 +48,3 @@ var Count = React.createClass({
 });
 
 export default Count;
-
diff --git a/src/sentry/static/sentry/app/components/eventEntries.jsx b/src/sentry/static/sentry/app/components/eventEntries.jsx
index 69d5810352..eaea45a07b 100644
--- a/src/sentry/static/sentry/app/components/eventEntries.jsx
+++ b/src/sentry/static/sentry/app/components/eventEntries.jsx
@@ -189,6 +189,7 @@ var EventEntries = React.createClass({
       try {
         var Component = this.interfaces[entry.type];
         if (!Component) {
+          /*eslint no-console:0*/
           console.error('Unregistered interface: ' + entry.type);
           return;
         }
@@ -243,4 +244,3 @@ var EventEntries = React.createClass({
 });
 
 export default EventEntries;
-
diff --git a/src/sentry/static/sentry/app/components/flotChart.jsx b/src/sentry/static/sentry/app/components/flotChart.jsx
index 2e3fa6f937..d03252d927 100644
--- a/src/sentry/static/sentry/app/components/flotChart.jsx
+++ b/src/sentry/static/sentry/app/components/flotChart.jsx
@@ -9,8 +9,9 @@ require('flot/jquery.flot.time');
 require('flot-tooltip/jquery.flot.tooltip');
 
 var average = (a) => {
+  var m, s;
   var r = {mean: 0, variance: 0, deviation: 0}, t = a.length;
-  for (var m, s = 0, l = t; l--; s += a[l]);
+  for (s = 0, l = t; l--; s += a[l]);
   for (m = r.mean = s / t, l = t, s = 0; l--; s += Math.pow(a[l] - m, 2));
   r.deviation = Math.sqrt(r.variance = s / t);
   return r;
@@ -157,4 +158,3 @@ var FlotChart = React.createClass({
 });
 
 export default FlotChart;
-
diff --git a/src/sentry/static/sentry/app/views/releaseArtifacts.jsx b/src/sentry/static/sentry/app/views/releaseArtifacts.jsx
index 4011f2e1e5..d2b2974350 100644
--- a/src/sentry/static/sentry/app/views/releaseArtifacts.jsx
+++ b/src/sentry/static/sentry/app/views/releaseArtifacts.jsx
@@ -77,7 +77,6 @@ var ReleaseArtifacts = React.createClass({
       <div>
         <table className="table">
           {this.state.fileList.map((file) => {
-            console.log(file);
             return (
               <tr>
                 <td><strong>{file.name}</strong></td>
diff --git a/src/sentry/static/sentry/app/views/stream.jsx b/src/sentry/static/sentry/app/views/stream.jsx
index cd8cfde38e..3487da2408 100644
--- a/src/sentry/static/sentry/app/views/stream.jsx
+++ b/src/sentry/static/sentry/app/views/stream.jsx
@@ -163,7 +163,7 @@ var Stream = React.createClass({
         // Was this the result of an event SHA search? If so, redirect
         // to corresponding group details
         if (data.length === 1 && /^[a-zA-Z0-9]{32}$/.test(requestParams.query.trim())) {
-          let params = $.extend({}, router.getCurrentParams(), {
+          const params = $.extend({}, router.getCurrentParams(), {
             groupId: data[0].id
           });
           return void this.context.router.transitionTo('groupDetails', params);
diff --git a/tests/js/spec/components/barChart.spec.jsx b/tests/js/spec/components/barChart.spec.jsx
index 3729eb4048..c07fe1ef47 100644
--- a/tests/js/spec/components/barChart.spec.jsx
+++ b/tests/js/spec/components/barChart.spec.jsx
@@ -1,4 +1,3 @@
-/*jshint expr: true*/
 var React = require("react/addons");
 
 var BarChart = require("app/components/barChart");
diff --git a/tests/js/spec/components/interfaces/rawStacktraceContent.spec.jsx b/tests/js/spec/components/interfaces/rawStacktraceContent.spec.jsx
index 71366bd524..61b715cbef 100644
--- a/tests/js/spec/components/interfaces/rawStacktraceContent.spec.jsx
+++ b/tests/js/spec/components/interfaces/rawStacktraceContent.spec.jsx
@@ -1,4 +1,3 @@
-/*jshint expr: true*/
 var React = require("react/addons");
 var Cookies = require("js-cookie");
 
diff --git a/tests/js/spec/stores/selectedGroupStore.spec.js b/tests/js/spec/stores/selectedGroupStore.spec.js
index 79be69e4f3..6299b700c0 100644
--- a/tests/js/spec/stores/selectedGroupStore.spec.js
+++ b/tests/js/spec/stores/selectedGroupStore.spec.js
@@ -1,4 +1,3 @@
-/*jshint expr: true*/
 var GroupStore = require('app/stores/groupStore');
 var SelectedGroupStore = require('app/stores/selectedGroupStore');
 
diff --git a/tests/js/spec/utils/streamManager.spec.js b/tests/js/spec/utils/streamManager.spec.js
index fb6df89da3..3d44260323 100644
--- a/tests/js/spec/utils/streamManager.spec.js
+++ b/tests/js/spec/utils/streamManager.spec.js
@@ -1,4 +1,3 @@
-/*jshint expr: true*/
 var Reflux = require('reflux');
 var StreamManager = require('app/utils/streamManager');
 
diff --git a/tests/js/spec/views/organizationTeams.spec.jsx b/tests/js/spec/views/organizationTeams.spec.jsx
index 0d6e001451..8ca2e8a416 100644
--- a/tests/js/spec/views/organizationTeams.spec.jsx
+++ b/tests/js/spec/views/organizationTeams.spec.jsx
@@ -1,4 +1,3 @@
-/*jshint expr: true*/
 var React = require("react/addons");
 var Cookies = require("js-cookie");
 
diff --git a/tests/js/spec/views/projectReleases.spec.jsx b/tests/js/spec/views/projectReleases.spec.jsx
index 73c6b1058d..0cac2a0d70 100644
--- a/tests/js/spec/views/projectReleases.spec.jsx
+++ b/tests/js/spec/views/projectReleases.spec.jsx
@@ -1,4 +1,3 @@
-/*jshint expr: true*/
 var React = require("react/addons");
 var TestUtils = React.addons.TestUtils;
 
@@ -99,4 +98,4 @@ describe("ProjectReleases", function () {
       expect(projectReleases.state.query).to.eql("newquery");
     });
   });
-});
\ No newline at end of file
+});
diff --git a/tests/js/spec/views/stream.spec.jsx b/tests/js/spec/views/stream.spec.jsx
index 5e0258fb4c..1c6a0ad7db 100644
--- a/tests/js/spec/views/stream.spec.jsx
+++ b/tests/js/spec/views/stream.spec.jsx
@@ -1,4 +1,5 @@
-/*jshint expr: true*/
+
+
 var React = require("react/addons");
 var Cookies = require("js-cookie");
 
diff --git a/tests/js/spec/views/stream/actionLink.spec.jsx b/tests/js/spec/views/stream/actionLink.spec.jsx
index 8ef8fdaffa..e631f6f49c 100644
--- a/tests/js/spec/views/stream/actionLink.spec.jsx
+++ b/tests/js/spec/views/stream/actionLink.spec.jsx
@@ -1,4 +1,3 @@
-/*jshint expr: true*/
 var React = require("react/addons");
 var TestUtils = React.addons.TestUtils;
 
diff --git a/tests/js/spec/views/stream/filterSelectLink.spec.jsx b/tests/js/spec/views/stream/filterSelectLink.spec.jsx
index 356d74f87c..4ff499b5de 100644
--- a/tests/js/spec/views/stream/filterSelectLink.spec.jsx
+++ b/tests/js/spec/views/stream/filterSelectLink.spec.jsx
@@ -1,4 +1,3 @@
-/*jshint expr: true*/
 var React = require("react/addons");
 
 var FilterSelectLink = require("app/views/stream/filterSelectLink");
diff --git a/tests/js/spec/views/stream/searchBar.spec.jsx b/tests/js/spec/views/stream/searchBar.spec.jsx
index 9616eb1ca0..a7095004f3 100644
--- a/tests/js/spec/views/stream/searchBar.spec.jsx
+++ b/tests/js/spec/views/stream/searchBar.spec.jsx
@@ -1,4 +1,3 @@
-/*jshint expr: true*/
 var React = require("react/addons");
 
 var SearchBar = require("app/views/stream/searchBar");
