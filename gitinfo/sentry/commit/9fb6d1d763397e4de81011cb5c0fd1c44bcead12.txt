commit 9fb6d1d763397e4de81011cb5c0fd1c44bcead12
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Feb 17 00:33:16 2012 -0800

    Generate an event_id early if it wasnt already present in coreapi

diff --git a/sentry/coreapi.py b/sentry/coreapi.py
index 38f31fc2d7..49553d0faf 100644
--- a/sentry/coreapi.py
+++ b/sentry/coreapi.py
@@ -13,6 +13,7 @@ from datetime import datetime
 import base64
 import logging
 import time
+import uuid
 import zlib
 
 from django.utils.encoding import smart_str
@@ -193,6 +194,9 @@ def process_data_timestamp(data):
 def validate_data(project, data):
     ensure_valid_project_id(project, data)
 
+    if 'event_id' not in data:
+        data['event_id'] = uuid.uuid4().hex
+
     if 'timestamp' in data:
         process_data_timestamp(data)
 
