commit 0b42058f80af6437fa14d66cca6baef5064586f8
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Oct 9 00:12:37 2015 -0700

    Additional tag key based query restrictions

diff --git a/src/sentry/api/serializers/models/group.py b/src/sentry/api/serializers/models/group.py
index 6486a17d17..2a03d9411f 100644
--- a/src/sentry/api/serializers/models/group.py
+++ b/src/sentry/api/serializers/models/group.py
@@ -42,7 +42,7 @@ class GroupSerializer(Serializer):
         tag_counts = defaultdict(dict)
         tag_results = GroupTagKey.objects.filter(
             group__in=item_list,
-        ).values_list('key', 'group', 'values_seen')
+        ).values_list('key', 'group', 'values_seen')[:1000]
         for key, group_id, values_seen in tag_results:
             tag_counts[key][group_id] = values_seen
 
@@ -58,7 +58,9 @@ class GroupSerializer(Serializer):
             for t in TagKey.objects.filter(
                 project=item_list[0].project,
                 key__in=tag_counts.keys(),
-            )
+            ).order_by(
+                '-values_seen',
+            )[:20]
         )
 
         result = {}
