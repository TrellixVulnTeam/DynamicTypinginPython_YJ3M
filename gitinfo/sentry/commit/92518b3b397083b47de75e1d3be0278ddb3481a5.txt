commit 92518b3b397083b47de75e1d3be0278ddb3481a5
Author: ted kaemming <ted@kaemming.com>
Date:   Mon Nov 6 17:18:19 2017 -0800

    fix(email): Fix bug with empty `Reply-To` sets (#6518)
    
    If `mail.enable-replies` is disabled or `X-Sentry-Reply-To` is empty or
    not present, sending email could fail if the `To` address is not present
    in the `Reply-To` list, since `set.remove` throws a `KeyError` if the
    key isn't present in the set. `set.discard` doesn't.

diff --git a/src/sentry/utils/email.py b/src/sentry/utils/email.py
index a3ec15cb7b..5f2556dbc7 100644
--- a/src/sentry/utils/email.py
+++ b/src/sentry/utils/email.py
@@ -315,7 +315,7 @@ class MessageBuilder(object):
             reply_to = headers['X-Sentry-Reply-To']
         else:
             reply_to = set(reply_to or ())
-            reply_to.remove(to)
+            reply_to.discard(to)
             reply_to = ', '.join(reply_to)
 
         if reply_to:
