commit 827b06ff00377e118b42244cc70ce3116e6a7b83
Author: Burak Yigit Kaya <byk@sentry.io>
Date:   Thu Mar 26 22:13:19 2020 +0300

    build(docker): Add pip check after installation (#17941)
    
    The new pip resolver is coming in 2020H2 and the best way to be ready for it is to ensure there are no broken dependencies by using `pip check`. This PR adds it to the Docker image so we get build failures if we introduce broken deps.
    
    See https://pyfound.blogspot.com/2020/03/new-pip-resolver-to-roll-out-this-year.html for more information.

diff --git a/docker/Dockerfile b/docker/Dockerfile
index cbef4bf99a..4fdd2381c7 100644
--- a/docker/Dockerfile
+++ b/docker/Dockerfile
@@ -186,7 +186,7 @@ RUN set -x \
     && mkdir -p $SENTRY_CONF
 
 COPY --from=sdist /dist/*.whl /tmp/dist/
-RUN pip install /tmp/dist/*.whl
+RUN pip install /tmp/dist/*.whl && pip check
 
 COPY ./docker/sentry.conf.py ./docker/config.yml $SENTRY_CONF/
 COPY ./docker/docker-entrypoint.sh /
