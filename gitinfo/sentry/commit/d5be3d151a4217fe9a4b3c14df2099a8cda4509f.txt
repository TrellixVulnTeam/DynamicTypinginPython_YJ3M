commit d5be3d151a4217fe9a4b3c14df2099a8cda4509f
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Thu Jul 17 08:57:09 2014 -0700

    SmartCookie requires dict keys to be strings, not unicode

diff --git a/src/sentry/interfaces/http.py b/src/sentry/interfaces/http.py
index b8ccf2d4c7..a7fb2e79d3 100644
--- a/src/sentry/interfaces/http.py
+++ b/src/sentry/interfaces/http.py
@@ -27,6 +27,13 @@ def format_headers(value):
     )
 
 
+def utf8_dict(value):
+    return dict(
+        (k.encode('utf8'), v)
+        for k, v in value.iteritems()
+    )
+
+
 class Http(Interface):
     """
     The Request information is stored in the Http interface. Two arguments
@@ -185,10 +192,14 @@ class Http(Interface):
     def to_curl(self):
         method = self.method.upper()
         if self.cookies:
-            cookies = SmartCookie(self.cookies)
-            # The Cookie header is already yanked out of the headers dict
-            # inside `to_python` so we can just safely re-set it.
-            self.headers['Cookie'] = ';'.join(c.output(attrs=[], header='') for c in cookies.values()).strip()
+            try:
+                cookies = SmartCookie(utf8_dict(self.cookies))
+            except Exception:
+                pass
+            else:
+                # The Cookie header is already yanked out of the headers dict
+                # inside `to_python` so we can just safely re-set it.
+                self.headers['Cookie'] = ';'.join(c.output(attrs=[], header='') for c in cookies.values()).strip()
         bits = []
         if method != 'GET':
             bits.append('-X' + method)
