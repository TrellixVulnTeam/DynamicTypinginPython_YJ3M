commit 4271f13d3f98a073b0900bf41c933f3789f52b94
Author: Alex Hofsteede <alex@hofsteede.com>
Date:   Wed Sep 5 17:27:02 2018 -0700

    fix: Snuba tests need to pass now (#9637)

diff --git a/.travis.yml b/.travis.yml
index 1df29a5111..453f42168e 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -214,8 +214,6 @@ matrix:
 # jobs are defined in matrix/include
 # to specify which jobs are allowed to fail, match the env exactly in matrix/allow_failures
   allow_failures:
-    - python: 2.7
-      env: TEST_SUITE=snuba SENTRY_TAGSTORE=sentry.tagstore.snuba.SnubaTagStorage
     - language: node_js
       env: STORYBOOK_BUILD=1
 
diff --git a/tests/snuba/test_util.py b/tests/snuba/test_util.py
index 9e580d705c..6e8bf21cc4 100644
--- a/tests/snuba/test_util.py
+++ b/tests/snuba/test_util.py
@@ -11,7 +11,7 @@ class SnubaUtilTest(TestCase):
             ['a', '=', '1'],
             ['b', '=', '1'],
         ]
-        assert snuba.all_referenced_columns(conditions) == set(['a', 'b'])
+        assert set(snuba.all_referenced_columns(conditions)) == set(['a', 'b'])
 
         # a = 1 AND (b = 1 OR c = 1)
         conditions = [
@@ -21,7 +21,7 @@ class SnubaUtilTest(TestCase):
                 ['c', '=', '1'],
             ],
         ]
-        assert snuba.all_referenced_columns(conditions) == set(['a', 'b', 'c'])
+        assert set(snuba.all_referenced_columns(conditions)) == set(['a', 'b', 'c'])
 
         # a = 1 AND (b = 1 OR foo(c) = 1)
         conditions = [
@@ -31,7 +31,7 @@ class SnubaUtilTest(TestCase):
                 [['foo', ['c']], '=', '1'],
             ],
         ]
-        assert snuba.all_referenced_columns(conditions) == set(['a', 'b', 'c'])
+        assert set(snuba.all_referenced_columns(conditions)) == set(['a', 'b', 'c'])
 
         # a = 1 AND (b = 1 OR foo(c, bar(d)) = 1)
         conditions = [
@@ -41,4 +41,4 @@ class SnubaUtilTest(TestCase):
                 [['foo', ['c', ['bar', ['d']]]], '=', '1'],
             ],
         ]
-        assert snuba.all_referenced_columns(conditions) == set(['a', 'b', 'c', 'd'])
+        assert set(snuba.all_referenced_columns(conditions)) == set(['a', 'b', 'c', 'd'])
