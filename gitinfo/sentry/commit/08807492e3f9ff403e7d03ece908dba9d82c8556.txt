commit 08807492e3f9ff403e7d03ece908dba9d82c8556
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Apr 8 02:43:09 2014 -0700

    Fix tests because django_sudo

diff --git a/setup.py b/setup.py
index a40795ef21..e9c93ea674 100755
--- a/setup.py
+++ b/setup.py
@@ -76,7 +76,7 @@ install_requires = [
     'django-social-auth>=0.7.28,<0.8.0',
     'django-static-compiler>=0.3.0,<0.4.0',
     'django-statsd-mozilla>=0.3.8.0,<0.3.9.0',
-    'django-sudo>=0.0.3,<1.0.0',
+    'django-sudo>=0.0.4,<1.0.0',
     'django-templatetag-sugar>=0.1.0',
     'djangorestframework>=2.3.8,<2.4.0',
     'email-reply-parser>=0.2.0,<0.3.0',
diff --git a/src/sentry/testutils/cases.py b/src/sentry/testutils/cases.py
index 590c46e531..750842821b 100644
--- a/src/sentry/testutils/cases.py
+++ b/src/sentry/testutils/cases.py
@@ -57,6 +57,7 @@ class BaseTestCase(Fixtures, Exam):
             request.session = engine.SessionStore()
 
         login(request, user)
+        request.user = user
         sudo_token = grant_sudo_privileges(request)
 
         # Save the session values.
