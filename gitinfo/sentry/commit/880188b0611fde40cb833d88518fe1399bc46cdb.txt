commit 880188b0611fde40cb833d88518fe1399bc46cdb
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Sat Oct 10 14:25:05 2015 +0200

    Added support for http request crumbs

diff --git a/src/sentry/interfaces/breadcrumbs.py b/src/sentry/interfaces/breadcrumbs.py
index 16c49c095c..38c28eb3d6 100644
--- a/src/sentry/interfaces/breadcrumbs.py
+++ b/src/sentry/interfaces/breadcrumbs.py
@@ -50,7 +50,8 @@ def validate_payload_for_type(payload, type):
     payload = payload or {}
     func = validators.get(type)
     if func is None:
-        raise InterfaceValidationError("Invalid breadcrumb type.")
+        raise InterfaceValidationError("Invalid breadcrumb type (%s)." %
+                                       (type,))
     return func(payload)
 
 
@@ -81,6 +82,20 @@ def validate_rpc(payload):
     return rv
 
 
+@typevalidator('http_request')
+def validate_http_request(payload):
+    rv = {}
+    for key in 'statusCode', 'reason', 'method', 'url', 'headers', \
+               'response', 'classifier':
+        value = payload.get(key)
+        if value is not None:
+            rv[key] = trim(value, 1024)
+    if not rv.get('url'):
+        raise InterfaceValidationError("No message provided for "
+                                       "'url' breadcrumb.")
+    return rv
+
+
 @typevalidator('query')
 def validate_query(payload):
     rv = {}
diff --git a/src/sentry/static/sentry/app/components/events/interfaces/breadcrumb-components/httpRequest.jsx b/src/sentry/static/sentry/app/components/events/interfaces/breadcrumb-components/httpRequest.jsx
new file mode 100644
index 0000000000..43ec1ea2e0
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/events/interfaces/breadcrumb-components/httpRequest.jsx
@@ -0,0 +1,28 @@
+import React from "react";
+
+import Classifier from "./classifier";
+
+var HttpRequestCrumbComponent = React.createClass({
+  propTypes: {
+    data: React.PropTypes.object.isRequired,
+  },
+
+  render() {
+    var data = this.props.data;
+
+    return (
+      <p>
+        <strong>HTTP Request</strong>{' '}
+        <code>{data.method}</code>
+        {' to '}
+        <code>{data.url}</code>{' '}
+        {data.response ?
+          <span>({'response: '}<code>{data.response.statusCode}</code>)</span> :
+          null}
+        <Classifier value={data.classifier} title="%s request" prefix="http_request" />
+      </p>
+    );
+  }
+});
+
+export default HttpRequestCrumbComponent;
diff --git a/src/sentry/static/sentry/app/components/events/interfaces/breadcrumb-components/rpc.jsx b/src/sentry/static/sentry/app/components/events/interfaces/breadcrumb-components/rpc.jsx
index 58b9513e80..3e0b668a9d 100644
--- a/src/sentry/static/sentry/app/components/events/interfaces/breadcrumb-components/rpc.jsx
+++ b/src/sentry/static/sentry/app/components/events/interfaces/breadcrumb-components/rpc.jsx
@@ -11,7 +11,7 @@ var RpcCrumbComponent = React.createClass({
     var data = this.props.data;
     return (
       <p>
-        <strong>Call to</strong> <code>{data.endpoint}</code>
+        <strong>Remote call to</strong> <code>{data.endpoint}</code>
         <Classifier value={data.classifier} prefix="rpc" title="%s call"/>
       </p>
     );
diff --git a/src/sentry/static/sentry/app/components/events/interfaces/breadcrumbs.jsx b/src/sentry/static/sentry/app/components/events/interfaces/breadcrumbs.jsx
index b22262ca68..da279c2d58 100644
--- a/src/sentry/static/sentry/app/components/events/interfaces/breadcrumbs.jsx
+++ b/src/sentry/static/sentry/app/components/events/interfaces/breadcrumbs.jsx
@@ -7,12 +7,14 @@ import TimeSince from "../../../components/timeSince";
 import MessageCrumbComponent from "./breadcrumb-components/message";
 import RpcCrumbComponent from "./breadcrumb-components/rpc";
 import QueryCrumbComponent from "./breadcrumb-components/query";
+import HttpRequestCrumbComponent from "./breadcrumb-components/httpRequest";
 
 
 const crumbComponents = {
   message: MessageCrumbComponent,
   rpc: RpcCrumbComponent,
   query: QueryCrumbComponent,
+  http_request: HttpRequestCrumbComponent,
 };
 
 
@@ -54,7 +56,7 @@ var BreadcrumbsInterface = React.createClass({
       }
       var ts = new Date(item.timestamp);
       return (
-        <li key={idx} className={'crumb crumb-' + item.type}>
+        <li key={idx} className={'crumb crumb-' + item.type.replace(/_/g, '-')}>
           <TimeSince date={ts} />
           {el}
         </li>
diff --git a/src/sentry/static/sentry/less/group-detail.less b/src/sentry/static/sentry/less/group-detail.less
index 621be87727..960d13a556 100644
--- a/src/sentry/static/sentry/less/group-detail.less
+++ b/src/sentry/static/sentry/less/group-detail.less
@@ -1543,6 +1543,10 @@ ul.crumbs {
       background: lighten(@blue, 42);
     }
 
+    &.crumb-http-request {
+      background: lighten(@green, 42);
+    }
+
     &.crumb-message {
       span.level {
         font-weight: bold;
