commit 3c37ade529a90ad543925ba375437290dd3148a2
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Thu Sep 3 11:05:48 2015 -0700

    Make sure we process pending buffers during load-mocks

diff --git a/bin/load-mocks b/bin/load-mocks
index cb90b1eac7..6a266f73f9 100755
--- a/bin/load-mocks
+++ b/bin/load-mocks
@@ -12,7 +12,7 @@ from hashlib import md5
 from pytz import utc
 from random import randint
 
-from sentry.app import tsdb
+from sentry.app import tsdb, buffer
 from sentry.models import (
     Activity, File, GroupMeta, Organization, OrganizationAccessRequest,
     OrganizationMember, Project, Release, ReleaseFile, Team, User, UserReport
@@ -254,6 +254,9 @@ def main(num_events=1):
             create_sample_time_series(event3)
             create_sample_time_series(event4)
 
+            if hasattr(buffer, 'process_pending'):
+                print('    > Processing pending buffers')
+                buffer.process_pending()
 
         OrganizationAccessRequest.objects.create_or_update(
             member=dummy_member,
@@ -272,7 +275,6 @@ def main(num_events=1):
 
 
 if __name__ == '__main__':
-    from django.conf import settings
     settings.CELERY_ALWAYS_EAGER = True
 
     from optparse import OptionParser
