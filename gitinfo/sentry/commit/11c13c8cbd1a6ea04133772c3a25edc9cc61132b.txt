commit 11c13c8cbd1a6ea04133772c3a25edc9cc61132b
Author: Matej Minar <matej.minar@sentry.io>
Date:   Tue May 12 22:10:07 2020 +0200

    feat(ui): Add sort by active users to releases (#18763)
    
    This PR adds the ability to sort releases by Active users.

diff --git a/src/sentry/static/sentry/app/views/releasesV2/list/index.tsx b/src/sentry/static/sentry/app/views/releasesV2/list/index.tsx
index 811a49b53a..de8d3b3c78 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/list/index.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/list/index.tsx
@@ -136,6 +136,7 @@ class ReleasesList extends AsyncView<Props, State> {
     const {location, organization} = this.props;
     const {statsPeriod} = location.query;
     const searchQuery = this.getQuery();
+    const activeSort = this.getSort();
 
     if (searchQuery && searchQuery.length) {
       return (
@@ -145,7 +146,15 @@ class ReleasesList extends AsyncView<Props, State> {
       );
     }
 
-    if (this.getSort() !== 'date') {
+    if (activeSort === 'users_24h') {
+      return (
+        <EmptyStateWarning small>
+          {t('There are no releases with active user data (users in the last 24 hours).')}
+        </EmptyStateWarning>
+      );
+    }
+
+    if (activeSort !== 'date') {
       const relativePeriod = getRelativeSummary(
         statsPeriod || DEFAULT_STATS_PERIOD
       ).toLowerCase();
diff --git a/src/sentry/static/sentry/app/views/releasesV2/list/releaseListSortOptions.tsx b/src/sentry/static/sentry/app/views/releasesV2/list/releaseListSortOptions.tsx
index 9c4ee084c0..90e9fa7c0b 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/list/releaseListSortOptions.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/list/releaseListSortOptions.tsx
@@ -19,6 +19,10 @@ const ReleaseListSortOptions = ({selected, onSelect}: Props) => {
       key: 'sessions',
       label: t('Total Sessions'),
     },
+    {
+      key: 'users_24h',
+      label: t('Active Users'),
+    },
     {
       key: 'crash_free_users',
       label: t('Crash Free Users'),
diff --git a/tests/js/spec/views/releasesV2/list/index.spec.jsx b/tests/js/spec/views/releasesV2/list/index.spec.jsx
index af1da8f13b..bb0c2c57b4 100644
--- a/tests/js/spec/views/releasesV2/list/index.spec.jsx
+++ b/tests/js/spec/views/releasesV2/list/index.spec.jsx
@@ -108,6 +108,15 @@ describe('ReleasesV2List', function() {
     expect(wrapper.find('EmptyMessage').text()).toEqual(
       'There are no releases with data in the last 7 days.'
     );
+
+    location = {query: {sort: 'users_24h', statsPeriod: '7d'}};
+    wrapper = mountWithTheme(
+      <ReleaseList {...props} location={location} />,
+      routerContext
+    );
+    expect(wrapper.find('EmptyMessage').text()).toEqual(
+      'There are no releases with active user data (users in the last 24 hours).'
+    );
   });
 
   it('searches for a release', function() {
@@ -141,7 +150,7 @@ describe('ReleasesV2List', function() {
     const sortOptions = sortDropdown.find('DropdownItem span');
     const sortByDateOption = sortOptions.at(0);
 
-    expect(sortOptions).toHaveLength(4);
+    expect(sortOptions).toHaveLength(5);
     expect(sortByDateOption.text()).toEqual('Date Created');
 
     sortByDateOption.simulate('click');
