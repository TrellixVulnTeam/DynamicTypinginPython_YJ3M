commit 08ab2287ae312b20a347aaca99b604e786f4489f
Author: ted kaemming <ted@kaemming.com>
Date:   Fri Oct 12 11:07:34 2018 -0700

    ref: Minor improvements to ProjectEventsEndpoint. (#10104)

diff --git a/src/sentry/api/endpoints/project_events.py b/src/sentry/api/endpoints/project_events.py
index 3322926f4b..d9c3c79d77 100644
--- a/src/sentry/api/endpoints/project_events.py
+++ b/src/sentry/api/endpoints/project_events.py
@@ -59,13 +59,14 @@ class ProjectEventsEndpoint(ProjectEndpoint):
         query = request.GET.get('query')
         conditions = []
         if query:
-            conditions.append(['message', 'LIKE', '%{}%'.format(query)])
+            conditions.append(['message', 'LIKE', u'%{}%'.format(query)])
 
+        now = timezone.now()
         data_fn = partial(
             # extract 'data' from raw_query result
             lambda *args, **kwargs: raw_query(*args, **kwargs)['data'],
-            start=timezone.now() - timedelta(days=90),
-            end=timezone.now(),
+            start=now - timedelta(days=90),
+            end=now,
             conditions=conditions,
             filter_keys={'project_id': [project.id]},
             selected_columns=SnubaEvent.selected_columns
