commit 1ff8dc83cb30aec16c77d7b6867b71fd7e7d2085
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Thu Apr 6 11:01:25 2017 +0200

    Do not fail on updating releases

diff --git a/src/sentry/models/release.py b/src/sentry/models/release.py
index de936c686c..f76b81d60b 100644
--- a/src/sentry/models/release.py
+++ b/src/sentry/models/release.py
@@ -223,10 +223,12 @@ class Release(Model):
         from sentry.models import Commit, ReleaseHeadCommit, Repository
         from sentry.plugins import bindings
 
+        # TODO: this does the wrong thing unless you are on the most
+        # recent release.  Add a timestamp compare?
         prev_release = type(self).objects.filter(
             organization_id=self.organization_id,
             projects__in=self.projects.all(),
-        ).order_by('-date_added').first()
+        ).exclude(version=self.version).order_by('-date_added').first()
 
         commit_list = []
 
