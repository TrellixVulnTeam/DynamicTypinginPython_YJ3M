commit 809f89feab2ad36883eb77892083e43afc8db654
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jun 3 14:15:58 2015 +0100

    Hide org selector in single organization mode

diff --git a/src/sentry/static/sentry/app/components/header.jsx b/src/sentry/static/sentry/app/components/header.jsx
index 42a1eba8ba..24fcd5c67c 100644
--- a/src/sentry/static/sentry/app/components/header.jsx
+++ b/src/sentry/static/sentry/app/components/header.jsx
@@ -55,14 +55,16 @@ var OrganizationSelector = React.createClass({
   },
 
   render() {
-    var urlPrefix = ConfigStore.get('urlPrefix');
-    var features = ConfigStore.get('features');
+    var singleOrganization = ConfigStore.get('singleOrganization');
     var activeOrg = this.props.organization;
 
-    if (!activeOrg) {
+    if (singleOrganization || !activeOrg) {
       return <div />;
     }
 
+    var urlPrefix = ConfigStore.get('urlPrefix');
+    var features = ConfigStore.get('features');
+
     return (
       <div className="org-selector">
         <DropdownLink
diff --git a/src/sentry/templates/sentry/bases/react.html b/src/sentry/templates/sentry/bases/react.html
index ddf86cc5cc..b952033abb 100644
--- a/src/sentry/templates/sentry/bases/react.html
+++ b/src/sentry/templates/sentry/bases/react.html
@@ -9,6 +9,7 @@
     Router.run(routes, Router.HistoryLocation, function(Handler) {
       React.render(React.createFactory(Handler)({
         config: {
+          singleOrganization: {% if SINGLE_ORGANIZATION %}true{% else %}false{% endif %},
           urlPrefix: '{{ URL_PREFIX }}',
           version: {
             current: '{{ sentry_version.current }}',
diff --git a/src/sentry/templates/sentry/layout.html b/src/sentry/templates/sentry/layout.html
index feed936824..c595c4404e 100644
--- a/src/sentry/templates/sentry/layout.html
+++ b/src/sentry/templates/sentry/layout.html
@@ -78,7 +78,7 @@
         <a href="/" class="logo"><span class="icon-sentry-logo"></span></a>
         {% endblock %}
 
-        {% if request.user.is_authenticated and organization %}
+        {% if not SINGLE_ORGANIZATION and request.user.is_authenticated and organization %}
         {% block org_selector %}
         <div class="org-selector">
           <div class="dropdown">
diff --git a/src/sentry/web/helpers.py b/src/sentry/web/helpers.py
index c41f8affec..bbd5e47e28 100644
--- a/src/sentry/web/helpers.py
+++ b/src/sentry/web/helpers.py
@@ -74,6 +74,7 @@ def get_default_context(request, existing_context=None, team=None):
     context = {
         'EVENTS_PER_PAGE': EVENTS_PER_PAGE,
         'URL_PREFIX': settings.SENTRY_URL_PREFIX,
+        'SINGLE_ORGANIZATION': settings.SENTRY_SINGLE_ORGANIZATION,
         'PLUGINS': plugins,
         'ALLOWED_HOSTS': settings.ALLOWED_HOSTS,
         'SENTRY_RAVEN_JS_URL': settings.SENTRY_RAVEN_JS_URL,
