commit 17deb089b0474e9423bc8ef4cf5263caf049437d
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jul 10 11:19:20 2013 +0200

    Simple efficiency hack for deleting groups

diff --git a/src/sentry/models.py b/src/sentry/models.py
index 7040dc1b31..e1057077d5 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -580,6 +580,18 @@ class Group(EventBase):
             self.message = self.message.splitlines()[0][:255]
         super(Group, self).save(*args, **kwargs)
 
+    def delete(self):
+        for model in (
+                GroupTagKey, GroupTag, GroupCountByMinute, EventMapping, Event):
+            logging.info('Removing %r objects where group=%s', model, self.id)
+            has_results = True
+            while has_results:
+                has_results = False
+                for obj in model.objects.filter(group=self)[:1000]:
+                    obj.delete()
+                    has_results = True
+        super(Group, self).delete()
+
     def get_absolute_url(self):
         return absolute_uri(reverse('sentry-group', args=[
             self.team.slug, self.project.slug, self.id]))
