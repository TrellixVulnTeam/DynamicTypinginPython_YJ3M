commit 136aaff0723bcacac40071050d9e12714a358057
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Thu Oct 19 15:48:17 2017 -0700

    feat(workflow): Share on click + auto select share URL (#6381)

diff --git a/src/sentry/static/sentry/app/components/shareIssue.jsx b/src/sentry/static/sentry/app/components/shareIssue.jsx
index 252e0ed392..7dfcefa2a7 100644
--- a/src/sentry/static/sentry/app/components/shareIssue.jsx
+++ b/src/sentry/static/sentry/app/components/shareIssue.jsx
@@ -29,11 +29,21 @@ class ShareUrlContainer extends React.Component {
     busy: PropTypes.bool
   };
 
+  // Select URL when its container is clicked
   handleCopyClick = () => {
     if (!this.urlRef) return;
     selectText(ReactDOM.findDOMNode(this.urlRef));
   };
 
+  handleUrlMount = ref => {
+    this.urlRef = ref;
+
+    if (this.urlRef) {
+      // Always select url if it's available
+      selectText(ReactDOM.findDOMNode(this.urlRef));
+    }
+  };
+
   render() {
     let {isSharing, busy, shareUrl, onConfirming, onCancel, onShare} = this.props;
     let url = !busy && isSharing ? shareUrl : 'Not shared';
@@ -57,7 +67,7 @@ class ShareUrlContainer extends React.Component {
             maxWidth: 288
           }}>
           <AutoSelectText
-            ref={ref => (this.urlRef = ref)}
+            ref={this.handleUrlMount}
             style={{
               flex: 1,
               border: 'none',
@@ -163,6 +173,13 @@ class ShareIssue extends React.Component {
     this.hasConfirmModal = false;
   };
 
+  // Should share URL if
+  handleOpen = () => {
+    if (!this.props.isSharing) {
+      this.handleShare();
+    }
+  };
+
   // State of confirm modal so we can keep dropdown menu opn
   handleConfirmCancel = e => (this.hasConfirmModal = false);
   handleConfirmReshare = () => (this.hasConfirmModal = true);
@@ -190,6 +207,7 @@ class ShareIssue extends React.Component {
         className={cx}
         shouldIgnoreClickOutside={() => this.hasConfirmModal}
         title={title}
+        onOpen={this.handleOpen}
         keepMenuOpen>
         <li
           style={{
diff --git a/tests/js/spec/components/__snapshots__/shareIssue.spec.jsx.snap b/tests/js/spec/components/__snapshots__/shareIssue.spec.jsx.snap
index 3c2fadac64..a1b690601f 100644
--- a/tests/js/spec/components/__snapshots__/shareIssue.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/shareIssue.spec.jsx.snap
@@ -7,6 +7,7 @@ exports[`ShareIssue renders when busy 1`] = `
   className="share-issue btn-sm btn btn-default"
   disabled={false}
   keepMenuOpen={true}
+  onOpen={[Function]}
   shouldIgnoreClickOutside={[Function]}
   title={
     <div
@@ -61,6 +62,7 @@ exports[`ShareIssue renders when not shared 1`] = `
   className="share-issue btn-sm btn btn-default"
   disabled={false}
   keepMenuOpen={true}
+  onOpen={[Function]}
   shouldIgnoreClickOutside={[Function]}
   title={
     <div
@@ -118,6 +120,7 @@ exports[`ShareIssue renders when not shared 2`] = `
   className="share-issue btn-sm btn btn-default"
   disabled={false}
   keepMenuOpen={true}
+  onOpen={[Function]}
   shouldIgnoreClickOutside={[Function]}
   title={
     <div
