commit 170dd1a2399b765b02b46cde35db7d0c23d46b6c
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Mon Jun 11 09:24:11 2018 +0200

    feat: Scrub IPs in sdk info. Fixes #8683 (#8704)

diff --git a/src/sentry/coreapi.py b/src/sentry/coreapi.py
index cd22abff14..c9366a89d5 100644
--- a/src/sentry/coreapi.py
+++ b/src/sentry/coreapi.py
@@ -344,6 +344,9 @@ class ClientApiHelper(object):
         if 'sentry.interfaces.User' in data:
             data['sentry.interfaces.User'].pop('ip_address', None)
 
+        if 'sdk' in data:
+            data['sdk'].pop('client_ip', None)
+
     def insert_data_to_database(self, data, start_time=None, from_reprocessing=False):
         if start_time is None:
             start_time = time()
diff --git a/tests/sentry/web/api/tests.py b/tests/sentry/web/api/tests.py
index 95c644783a..fb336fe546 100644
--- a/tests/sentry/web/api/tests.py
+++ b/tests/sentry/web/api/tests.py
@@ -397,6 +397,11 @@ class StoreViewTest(TestCase):
         self.project.update_option('sentry:scrub_ip_address', True)
         body = {
             "message": "foo bar",
+            "sdk": {
+                "name": "sentry-browser",
+                "version": "3.23.3",
+                "client_ip": "127.0.0.1"
+            },
             "sentry.interfaces.User": {
                 "ip_address": "127.0.0.1"
             },
@@ -414,6 +419,7 @@ class StoreViewTest(TestCase):
         call_data = mock_insert_data_to_database.call_args[0][0]
         assert not call_data['sentry.interfaces.User'].get('ip_address')
         assert not call_data['sentry.interfaces.Http']['env'].get('REMOTE_ADDR')
+        assert not call_data['sdk'].get('client_ip')
 
     @mock.patch('sentry.coreapi.ClientApiHelper.insert_data_to_database')
     def test_scrubs_org_ip_address_override(self, mock_insert_data_to_database):
