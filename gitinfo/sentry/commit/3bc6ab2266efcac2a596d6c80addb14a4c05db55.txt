commit 3bc6ab2266efcac2a596d6c80addb14a4c05db55
Author: ted kaemming <ted@kaemming.com>
Date:   Mon Nov 12 14:52:13 2018 -0800

    fix: Force ValuesListQuerySet evaluation in weekly report generation. (#10548)
    
    The Snuba TSDB backend requires [a sequence](https://github.com/getsentry/sentry/blob/a80d980b2b56884dbbe3a7d1ed6e57a1b25b0800/src/sentry/tsdb/snuba.py#L204-L216) here, so this forces evaluation of the queryset by casting it to a list.

diff --git a/src/sentry/tasks/reports.py b/src/sentry/tasks/reports.py
index 9f39f431bb..9ca85af9c9 100644
--- a/src/sentry/tasks/reports.py
+++ b/src/sentry/tasks/reports.py
@@ -166,11 +166,13 @@ def prepare_project_series(start__stop, project, rollup=60 * 60 * 24):
                 clean,
                 tsdb.get_range(
                     tsdb.models.group,
-                    project.group_set.filter(
-                        status=GroupStatus.RESOLVED,
-                        resolved_at__gte=start,
-                        resolved_at__lt=stop,
-                    ).values_list('id', flat=True),
+                    list(
+                        project.group_set.filter(
+                            status=GroupStatus.RESOLVED,
+                            resolved_at__gte=start,
+                            resolved_at__lt=stop,
+                        ).values_list('id', flat=True),
+                    ),
                     start,
                     stop,
                     rollup=rollup,
