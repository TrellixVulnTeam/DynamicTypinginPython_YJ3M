commit 4417edb52370170b7b034d508041dee4d9230d58
Author: Billy Vong <billyvg@gmail.com>
Date:   Wed Jun 28 13:46:57 2017 -0700

    Add divider, change "Create project" to be a button, fix wrong permissions for "Create project"

diff --git a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
index 502f4126f9..ea3c0e2913 100644
--- a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
+++ b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
@@ -268,7 +268,7 @@ const ProjectSelector = React.createClass({
     };
   },
 
-  renderProjectList({organization: org, projects, filter, hasTeamWrite}) {
+  renderProjectList({organization: org, projects, filter, hasProjectWrite}) {
     const hasFilter = !!filter;
     const hasProjects = projects && projects.length;
 
@@ -279,23 +279,24 @@ const ProjectSelector = React.createClass({
       // there can simply be no projects to list
       //
       // Give an actionable item when there are no projects
-      return (
-        <MenuItem empty noAnchor>
+      return [
+        <MenuItem key="empty-message" className="empty-projects-item" noAnchor>
           <div className="empty-message">
             {hasFilter && t('No projects found')}
             {!hasFilter && t('You have no projects.')}
           </div>
-
-          {!hasFilter &&
-            hasTeamWrite &&
-            <div className="empty-action">
-              <a href={`/organizations/${org.slug}/projects/new/`}>
-                {t('Create new project')}
+        </MenuItem>,
+        !hasFilter && hasProjectWrite ? <MenuItem key="divider" divider /> : null,
+        !hasFilter && hasProjectWrite
+          ? <MenuItem key="create-project" className="empty-projects-item" noAnchor>
+              <a
+                className="btn btn-primary btn-block"
+                href={`/organizations/${org.slug}/projects/new/`}>
+                {t('Create project')}
               </a>
-            </div>}
-
-        </MenuItem>
-      );
+            </MenuItem>
+          : null
+      ];
     }
   },
 
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index df7ccb9018..d94d487c1c 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -1317,18 +1317,7 @@ table.integrations {
       font-size: 1.2em;
       text-align: center;
       opacity: 0.7;
-      padding: 12px;
-    }
-
-    .empty-action {
-      text-align: center;
-      a {
-        color: @link-color;
-
-        &:hover {
-          color: @link-color-hover;
-        }
-      }
+      padding: 5px;
     }
 
     li {
@@ -1351,7 +1340,6 @@ table.integrations {
 
       > a {
         .truncate();
-        border-radius: 2px;
         padding: 6px 0 6px 6px;
         border-radius: 0;
         line-height: 1;
@@ -1382,8 +1370,19 @@ table.integrations {
 
   &.is-empty {
     .dropdown-menu {
-      li {
-        padding: 0;
+      li.empty-projects-item {
+        padding: 0 5px;
+
+        // need to override bootstrap for <a> in dropdown-menu
+        a {
+          margin-left: 0;
+          border-radius: 3px;
+          font-weight: 600;
+          color: #ffffff;
+          &:hover {
+            background-color: darken(@purple, 5);
+          }
+        }
       }
     }
   }
diff --git a/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap b/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
index a7f112127e..4be1ce2e04 100644
--- a/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
+++ b/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
@@ -255,7 +255,7 @@ exports[`ProjectSelector render() can filter projects by team name/project name
 </ProjectSelector>
 `;
 
-exports[`ProjectSelector render() has no filter and empty message with no projects 1`] = `
+exports[`ProjectSelector render() has no filter and empty message with no projects and has no project:write access 1`] = `
 <div
   className="project-select"
 >
@@ -278,7 +278,7 @@ exports[`ProjectSelector render() has no filter and empty message with no projec
       topLevelClasses="project-dropdown is-empty"
     >
       <MenuItem
-        empty={true}
+        className="empty-projects-item"
         noAnchor={true}
       >
         <div
@@ -292,6 +292,57 @@ exports[`ProjectSelector render() has no filter and empty message with no projec
 </div>
 `;
 
+exports[`ProjectSelector render() has no filter and empty message with no projects and has project:write access 1`] = `
+<div
+  className="project-select"
+>
+  <h3>
+    <Link
+      className="home-crumb"
+      to="/undefined/"
+    >
+      <span
+        className="icon-home"
+      />
+    </Link>
+    Select a project
+    <DropdownLink
+      caret={true}
+      disabled={false}
+      onClose={[Function]}
+      onOpen={[Function]}
+      title=""
+      topLevelClasses="project-dropdown is-empty"
+    >
+      <MenuItem
+        className="empty-projects-item"
+        noAnchor={true}
+      >
+        <div
+          className="empty-message"
+        >
+          You have no projects.
+        </div>
+      </MenuItem>
+      <MenuItem
+        divider={true}
+      />
+      <MenuItem
+        className="empty-projects-item"
+        noAnchor={true}
+      >
+        <a
+          className="btn btn-primary btn-block"
+          href="/organizations/undefined/projects/new/"
+        >
+          Create project
+        </a>
+      </MenuItem>
+    </DropdownLink>
+  </h3>
+</div>
+`;
+
 exports[`ProjectSelector render() lists projects and has filter 1`] = `
 <div
   className="project-select"
@@ -432,11 +483,11 @@ exports[`ProjectSelector render() shows empty filter message when filtering has
               />
             </li>
             <MenuItem
-              empty={true}
+              className="empty-projects-item"
               noAnchor={true}
             >
               <li
-                className=""
+                className="empty-projects-item"
                 href={null}
                 role="presentation"
                 title={null}
diff --git a/tests/js/spec/components/projectHeader/projectSelector.spec.jsx b/tests/js/spec/components/projectHeader/projectSelector.spec.jsx
index c0de489172..c8b51e469f 100644
--- a/tests/js/spec/components/projectHeader/projectSelector.spec.jsx
+++ b/tests/js/spec/components/projectHeader/projectSelector.spec.jsx
@@ -28,7 +28,7 @@ describe('ProjectSelector', function() {
     access: []
   };
   describe('render()', function() {
-    it('has no filter and empty message with no projects', function() {
+    it('has no filter and empty message with no projects and has no project:write access', function() {
       let wrapper = shallow(
         <ProjectSelector
           organization={{
@@ -45,6 +45,23 @@ describe('ProjectSelector', function() {
       expect(toJson(wrapper)).toMatchSnapshot();
     });
 
+    it('has no filter and empty message with no projects and has project:write access', function() {
+      let wrapper = shallow(
+        <ProjectSelector
+          organization={{
+            id: 'org',
+            teams: [],
+            access: ['project:write']
+          }}
+          projectId=""
+        />,
+        {
+          context: {router: TestStubs.router()}
+        }
+      );
+      expect(toJson(wrapper)).toMatchSnapshot();
+    });
+
     it('lists projects and has filter', function() {
       let wrapper = shallow(<ProjectSelector organization={mockOrg} projectId="" />, {
         context: {router: TestStubs.router()}
