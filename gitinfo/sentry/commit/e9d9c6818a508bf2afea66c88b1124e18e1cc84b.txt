commit e9d9c6818a508bf2afea66c88b1124e18e1cc84b
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Oct 17 11:42:38 2015 -0700

    Drop events when rate limiter fails

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index d20c928dc9..1e0586940a 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -299,7 +299,11 @@ class StoreView(APIView):
         if isinstance(rate_limit, bool):
             rate_limit = RateLimit(is_limited=rate_limit, retry_after=None)
 
-        if rate_limit is not None and rate_limit.is_limited:
+        # XXX(dcramer): when the rate limiter fails we drop events to ensure
+        # it cannot cascade
+        if rate_limit is None or rate_limit.is_limited:
+            if rate_limit is None:
+                helper.log.debug('Dropped event due to error with rate limiter')
             app.tsdb.incr_multi([
                 (app.tsdb.models.project_total_received, project.id),
                 (app.tsdb.models.project_total_rejected, project.id),
