commit 314f27ae4489780e1aadd08d9fd66fb1b4e4c39c
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Fri Mar 30 13:10:30 2018 -0700

    ref: Use new UI components for commits (#7860)

diff --git a/src/sentry/static/sentry/app/components/commitAuthorStats.jsx b/src/sentry/static/sentry/app/components/commitAuthorStats.jsx
index 06e0f80799..d63094679b 100644
--- a/src/sentry/static/sentry/app/components/commitAuthorStats.jsx
+++ b/src/sentry/static/sentry/app/components/commitAuthorStats.jsx
@@ -1,16 +1,19 @@
 import PropTypes from 'prop-types';
 import React from 'react';
-
+import {Flex} from 'grid-emotion';
 import createReactClass from 'create-react-class';
 
 import LoadingIndicator from '../components/loadingIndicator';
 import LoadingError from '../components/loadingError';
 import Avatar from '../components/avatar';
+import Tooltip from '../components/tooltip';
 
-import TooltipMixin from '../mixins/tooltip';
 import ApiMixin from '../mixins/apiMixin';
 
 import {t} from '../locale';
+import Panel from '../views/settings/components/panel';
+import PanelItem from '../views/settings/components/panelItem';
+import PanelBody from '../views/settings/components/panelBody';
 
 class CommitBar extends React.Component {
   static propTypes = {
@@ -35,12 +38,7 @@ const CommitAuthorStats = createReactClass({
     version: PropTypes.string.isRequired,
   },
 
-  mixins: [
-    ApiMixin,
-    TooltipMixin({
-      selector: '.tip',
-    }),
-  ],
+  mixins: [ApiMixin],
 
   getInitialState() {
     return {
@@ -73,13 +71,6 @@ const CommitAuthorStats = createReactClass({
     });
   },
 
-  componentDidUpdate(prevProps, prevState) {
-    if (prevState.loading && !this.state.loading) {
-      this.removeTooltips();
-      this.attachTooltips();
-    }
-  },
-
   renderEmpty() {
     return <div className="box empty">{t('No authors in this release')}</div>;
   },
@@ -113,35 +104,32 @@ const CommitAuthorStats = createReactClass({
 
     return (
       <div style={{marginTop: 5}}>
-        <h6 className="nav-header m-b-1">Commits by Author</h6>
+        <h6 className="nav-header m-b-1">{t('Commits by Author')}</h6>
         {!commitAuthorValues.length && this.renderEmpty()}
-        <ul className="list-group">
-          {commitAuthorValues.map((commitAuthor, i) => {
-            let {author, commitCount} = commitAuthor;
-            return (
-              <li
-                key={i}
-                className="list-group-item list-group-item-sm list-group-avatar"
-              >
-                <div className="row row-flex row-center-vertically">
-                  <div className="col-sm-8">
-                    <span
-                      className="avatar-grid-item m-b-0 tip"
-                      title={author.name + ' ' + author.email}
-                    >
+        <Panel>
+          <PanelBody>
+            {commitAuthorValues.map((commitAuthor, i) => {
+              let {author, commitCount} = commitAuthor;
+              return (
+                <PanelItem key={i} p={1} align="center">
+                  <Flex>
+                    <Tooltip title={`${author.name} ${author.email}`}>
                       <Avatar user={author} size={20} />
-                    </span>
+                    </Tooltip>
+                  </Flex>
+                  <Flex flex="1" px={1}>
                     <CommitBar
+                      style={{marginLeft: 5}}
                       totalCommits={commitList.length}
                       authorCommits={commitCount}
                     />
-                  </div>
-                  <div className="col-sm-4 align-right">{commitCount}</div>
-                </div>
-              </li>
-            );
-          })}
-        </ul>
+                  </Flex>
+                  <div>{commitCount}</div>
+                </PanelItem>
+              );
+            })}
+          </PanelBody>
+        </Panel>
       </div>
     );
   },
diff --git a/src/sentry/static/sentry/app/components/commitRow.jsx b/src/sentry/static/sentry/app/components/commitRow.jsx
index bd52e767d4..a8861630e2 100644
--- a/src/sentry/static/sentry/app/components/commitRow.jsx
+++ b/src/sentry/static/sentry/app/components/commitRow.jsx
@@ -1,12 +1,17 @@
 import idx from 'idx';
 import PropTypes from 'prop-types';
 import React from 'react';
+import styled from 'react-emotion';
+import {Flex} from 'grid-emotion';
 
 import Avatar from './avatar';
 import TimeSince from './timeSince';
 import CommitLink from './commitLink';
 import {t, tct} from '../locale';
 
+import PanelItem from '../views/settings/components/panelItem';
+import TextOverflow from './textOverflow';
+
 export default class CommitRow extends React.Component {
   static propTypes = {
     commit: PropTypes.object,
@@ -25,25 +30,28 @@ export default class CommitRow extends React.Component {
   render() {
     let {id, dateCreated, message, author, repository} = this.props.commit;
     return (
-      <li className="list-group-item" key={id}>
-        <div className="row row-center-vertically">
-          <div className="col-xs-10 list-group-avatar">
-            <Avatar size={36} user={author} />
-            <h5 className="truncate">{this.renderMessage(message)}</h5>
-            <p>
-              {tct('[author] committed [timeago]', {
-                author: (
-                  <strong>{idx(author, _ => _.name) || t('Unknown author')}</strong>
-                ),
-                timeago: <TimeSince date={dateCreated} />,
-              })}
-            </p>
-          </div>
-          <div className="col-xs-2 hidden-xs align-right">
-            <CommitLink commitId={id} repository={repository} />
+      <PanelItem key={id} align="center">
+        <Flex mr={2}>
+          <Avatar size={36} user={author} />
+        </Flex>
+        <Flex flex="1" direction="column">
+          <TruncatedText>{this.renderMessage(message)}</TruncatedText>
+          <div style={{fontSize: 13}}>
+            {tct('[author] committed [timeago]', {
+              author: <strong>{idx(author, _ => _.name) || t('Unknown author')}</strong>,
+              timeago: <TimeSince date={dateCreated} />,
+            })}
           </div>
-        </div>
-      </li>
+        </Flex>
+        <Flex className="hidden-xs">
+          <CommitLink commitId={id} repository={repository} />
+        </Flex>
+      </PanelItem>
     );
   }
 }
+
+const TruncatedText = styled(TextOverflow)`
+  font-size: 15px;
+  font-weight: bold;
+`;
diff --git a/src/sentry/static/sentry/app/components/events/eventCause.jsx b/src/sentry/static/sentry/app/components/events/eventCause.jsx
index 61e59eb845..6c2b91aa4d 100644
--- a/src/sentry/static/sentry/app/components/events/eventCause.jsx
+++ b/src/sentry/static/sentry/app/components/events/eventCause.jsx
@@ -7,6 +7,8 @@ import GroupState from '../../mixins/groupState';
 import CommitRow from '../commitRow';
 import {t} from '../../locale';
 
+import Panel from '../../views/settings/components/panel';
+
 export default createReactClass({
   displayName: 'EventCause',
 
@@ -82,11 +84,11 @@ export default createReactClass({
             {t('Suspect Commits')} ({commits.length})
           </h3>
         </div>
-        <ul className="list-group list-group-lg commit-list">
+        <Panel>
           {commits.map(commit => {
             return <CommitRow key={commit.id} commit={commit} />;
           })}
-        </ul>
+        </Panel>
       </div>
     );
   },
diff --git a/src/sentry/static/sentry/app/views/releases/releaseCommits.jsx b/src/sentry/static/sentry/app/views/releases/releaseCommits.jsx
index d50c767453..03f0a4501e 100644
--- a/src/sentry/static/sentry/app/views/releases/releaseCommits.jsx
+++ b/src/sentry/static/sentry/app/views/releases/releaseCommits.jsx
@@ -10,6 +10,10 @@ import ApiMixin from '../../mixins/apiMixin';
 
 import CommitRow from '../../components/commitRow';
 
+import Panel from '../settings/components/panel';
+import PanelHeader from '../settings/components/panelHeader';
+import PanelBody from '../settings/components/panelBody';
+
 const ReleaseCommits = createReactClass({
   displayName: 'ReleaseCommits',
   mixins: [ApiMixin],
@@ -82,15 +86,16 @@ const ReleaseCommits = createReactClass({
   renderCommitsForRepo(repo) {
     let commitsByRepository = this.getCommitsByRepository();
     let activeCommits = commitsByRepository[repo];
+
     return (
-      <div className="panel panel-default">
-        <div className="panel-heading panel-heading-bold">{repo}</div>
-        <ul className="list-group list-group-lg commit-list">
+      <Panel>
+        <PanelHeader>{repo}</PanelHeader>
+        <PanelBody>
           {activeCommits.map(commit => {
             return <CommitRow key={commit.id} commit={commit} />;
           })}
-        </ul>
-      </div>
+        </PanelBody>
+      </Panel>
     );
   },
 
diff --git a/src/sentry/static/sentry/less/sentry-list-group.less b/src/sentry/static/sentry/less/sentry-list-group.less
index 36f860dec9..c70c90ef4e 100644
--- a/src/sentry/static/sentry/less/sentry-list-group.less
+++ b/src/sentry/static/sentry/less/sentry-list-group.less
@@ -19,21 +19,6 @@
     &.list-group-item-sm {
       padding: 5px 10px;
       min-height: 36px;
-
-      &.list-group-avatar {
-        padding-left: 36px;
-        position: relative;
-
-        div[class^='col-'] {
-          position: static;
-        }
-
-        .avatar {
-          position: absolute;
-          left: 8px;
-          top: 7px;
-        }
-      }
     }
 
     // When pairing title / description / meta use <h*>, <p>, and <p>
@@ -67,16 +52,6 @@
       }
     }
 
-    .list-group-avatar {
-      padding-left: 60px;
-      position: relative;
-
-      .avatar {
-        position: absolute;
-        left: 15px;
-      }
-    }
-
     .list-group-actions {
       > .btn-group,
       > .btn {
