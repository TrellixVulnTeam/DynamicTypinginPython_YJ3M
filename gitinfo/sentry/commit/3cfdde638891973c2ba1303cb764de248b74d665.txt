commit 3cfdde638891973c2ba1303cb764de248b74d665
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Wed Nov 14 13:12:25 2018 -0800

    feat(ui): Close DropdownMenu on Esc (#10539)
    
    This allows DropdownMenu to be closed when "Escape" is pressed

diff --git a/src/sentry/static/sentry/app/components/dropdownMenu.jsx b/src/sentry/static/sentry/app/components/dropdownMenu.jsx
index d673df81a6..023a1bc4c5 100644
--- a/src/sentry/static/sentry/app/components/dropdownMenu.jsx
+++ b/src/sentry/static/sentry/app/components/dropdownMenu.jsx
@@ -1,8 +1,8 @@
 import PropTypes from 'prop-types';
 import React from 'react';
-import sdk from 'app/utils/sdk';
 
 import {MENU_CLOSE_DELAY} from 'app/constants';
+import sdk from 'app/utils/sdk';
 
 class DropdownMenu extends React.Component {
   static propTypes = {
@@ -34,6 +34,9 @@ class DropdownMenu extends React.Component {
     // This will change where we attach event handlers
     alwaysRenderMenu: PropTypes.bool,
 
+    // closes menu on "Esc" keypress
+    closeOnEscape: PropTypes.bool,
+
     /**
      * If this is set to true, the dropdown behaves as a "nested dropdown" and is
      * triggered on mouse enter and mouse leave
@@ -43,6 +46,7 @@ class DropdownMenu extends React.Component {
 
   static defaultProps = {
     keepMenuOpen: false,
+    closeOnEscape: true,
   };
 
   constructor(...args) {
@@ -215,8 +219,10 @@ class DropdownMenu extends React.Component {
   getRootProps = props => props;
 
   // Actor is the component that will open the dropdown menu
-  getActorProps = ({onClick, onMouseEnter, onMouseLeave, isStyled, ...props} = {}) => {
-    let {isNestedDropdown} = this.props;
+  getActorProps = (
+    {onClick, onMouseEnter, onMouseLeave, onKeyDown, isStyled, style, ...props} = {}
+  ) => {
+    let {isNestedDropdown, closeOnEscape} = this.props;
 
     // Props that the actor needs to have <DropdownMenu> work
     //
@@ -224,7 +230,22 @@ class DropdownMenu extends React.Component {
     return {
       ...props,
       ...((isStyled && {innerRef: this.handleActorMount}) || {}),
+      style: {
+        ...(style || {}),
+        outline: 'none',
+      },
       ref: !isStyled ? this.handleActorMount : undefined,
+      tabIndex: -1,
+      onKeyDown: e => {
+        if (typeof onKeyDown === 'function') {
+          onKeyDown(e);
+        }
+
+        if (e.key === 'Escape' && closeOnEscape) {
+          this.handleClose(e);
+        }
+      },
+
       onMouseEnter: (...args) => {
         if (typeof onMouseEnter === 'function') {
           onMouseEnter(...args);
diff --git a/tests/js/spec/components/__snapshots__/dropdownAutoCompleteMenu.spec.jsx.snap b/tests/js/spec/components/__snapshots__/dropdownAutoCompleteMenu.spec.jsx.snap
index 796010b617..4fd516ca91 100644
--- a/tests/js/spec/components/__snapshots__/dropdownAutoCompleteMenu.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/dropdownAutoCompleteMenu.spec.jsx.snap
@@ -41,6 +41,7 @@ exports[`DropdownAutoCompleteMenu renders with a group 1`] = `
     resetInputOnClose={true}
   >
     <DropdownMenu
+      closeOnEscape={true}
       isOpen={true}
       keepMenuOpen={false}
       onClickOutside={[Function]}
@@ -215,6 +216,7 @@ exports[`DropdownAutoCompleteMenu renders without a group 1`] = `
     resetInputOnClose={true}
   >
     <DropdownMenu
+      closeOnEscape={true}
       isOpen={true}
       keepMenuOpen={false}
       onClickOutside={[Function]}
diff --git a/tests/js/spec/components/__snapshots__/dropdownLink.spec.jsx.snap b/tests/js/spec/components/__snapshots__/dropdownLink.spec.jsx.snap
index 42930592d5..0525e7b6aa 100644
--- a/tests/js/spec/components/__snapshots__/dropdownLink.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/dropdownLink.spec.jsx.snap
@@ -14,6 +14,7 @@ exports[`DropdownLink renders and anchors to left by default 1`] = `
 >
   <DropdownMenu
     alwaysRenderMenu={true}
+    closeOnEscape={true}
     keepMenuOpen={false}
     onClose={[Function]}
     onOpen={[Function]}
@@ -24,8 +25,15 @@ exports[`DropdownLink renders and anchors to left by default 1`] = `
       <a
         className="dropdown-actor dropdown-toggle"
         onClick={[Function]}
+        onKeyDown={[Function]}
         onMouseEnter={[Function]}
         onMouseLeave={[Function]}
+        style={
+          Object {
+            "outline": "none",
+          }
+        }
+        tabIndex={-1}
       >
         <div
           className="dropdown-actor-title"
@@ -70,6 +78,7 @@ exports[`DropdownLink renders and anchors to right 1`] = `
 >
   <DropdownMenu
     alwaysRenderMenu={true}
+    closeOnEscape={true}
     keepMenuOpen={false}
     onClose={[Function]}
     onOpen={[Function]}
@@ -80,8 +89,15 @@ exports[`DropdownLink renders and anchors to right 1`] = `
       <a
         className="dropdown-actor dropdown-menu-right dropdown-toggle"
         onClick={[Function]}
+        onKeyDown={[Function]}
         onMouseEnter={[Function]}
         onMouseLeave={[Function]}
+        style={
+          Object {
+            "outline": "none",
+          }
+        }
+        tabIndex={-1}
       >
         <div
           className="dropdown-actor-title"
diff --git a/tests/js/spec/components/__snapshots__/dropdownMenu.spec.jsx.snap b/tests/js/spec/components/__snapshots__/dropdownMenu.spec.jsx.snap
index c2b9ba68b5..72366c38f1 100644
--- a/tests/js/spec/components/__snapshots__/dropdownMenu.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/dropdownMenu.spec.jsx.snap
@@ -2,13 +2,21 @@
 
 exports[`DropdownMenu renders 1`] = `
 <DropdownMenu
+  closeOnEscape={true}
   keepMenuOpen={false}
 >
   <span>
     <button
       onClick={[Function]}
+      onKeyDown={[Function]}
       onMouseEnter={[Function]}
       onMouseLeave={[Function]}
+      style={
+        Object {
+          "outline": "none",
+        }
+      }
+      tabIndex={-1}
     >
       Open Dropdown
     </button>
diff --git a/tests/js/spec/components/actions/__snapshots__/ignore.spec.jsx.snap b/tests/js/spec/components/actions/__snapshots__/ignore.spec.jsx.snap
index 9e65469428..9242ebbed5 100644
--- a/tests/js/spec/components/actions/__snapshots__/ignore.spec.jsx.snap
+++ b/tests/js/spec/components/actions/__snapshots__/ignore.spec.jsx.snap
@@ -359,6 +359,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
       >
         <DropdownMenu
           alwaysRenderMenu={true}
+          closeOnEscape={true}
           keepMenuOpen={false}
         >
           <span
@@ -367,8 +368,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
             <a
               className="dropdown-actor btn btn-default btn-sm dropdown-toggle"
               onClick={[Function]}
+              onKeyDown={[Function]}
               onMouseEnter={[Function]}
               onMouseLeave={[Function]}
+              style={
+                Object {
+                  "outline": "none",
+                }
+              }
+              tabIndex={-1}
             >
               <div
                 className="dropdown-actor-title"
@@ -410,6 +418,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                 >
                   <DropdownMenu
                     alwaysRenderMenu={true}
+                    closeOnEscape={true}
                     isNestedDropdown={true}
                     keepMenuOpen={false}
                   >
@@ -419,8 +428,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                       <a
                         className="dropdown-actor dropdown-toggle"
                         onClick={[Function]}
+                        onKeyDown={[Function]}
                         onMouseEnter={[Function]}
                         onMouseLeave={[Function]}
+                        style={
+                          Object {
+                            "outline": "none",
+                          }
+                        }
+                        tabIndex={-1}
                       >
                         <div
                           className="dropdown-actor-title"
@@ -955,6 +971,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                 >
                   <DropdownMenu
                     alwaysRenderMenu={true}
+                    closeOnEscape={true}
                     isNestedDropdown={true}
                     keepMenuOpen={false}
                   >
@@ -964,8 +981,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                       <a
                         className="dropdown-actor dropdown-toggle"
                         onClick={[Function]}
+                        onKeyDown={[Function]}
                         onMouseEnter={[Function]}
                         onMouseLeave={[Function]}
+                        style={
+                          Object {
+                            "outline": "none",
+                          }
+                        }
+                        tabIndex={-1}
                       >
                         <div
                           className="dropdown-actor-title"
@@ -995,6 +1019,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -1004,8 +1029,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -1395,6 +1427,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -1404,8 +1437,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -1795,6 +1835,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -1804,8 +1845,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -2195,6 +2243,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -2204,8 +2253,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -2595,6 +2651,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -2604,8 +2661,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -2995,6 +3059,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -3004,8 +3069,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -3425,6 +3497,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                 >
                   <DropdownMenu
                     alwaysRenderMenu={true}
+                    closeOnEscape={true}
                     isNestedDropdown={true}
                     keepMenuOpen={false}
                   >
@@ -3434,8 +3507,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                       <a
                         className="dropdown-actor dropdown-toggle"
                         onClick={[Function]}
+                        onKeyDown={[Function]}
                         onMouseEnter={[Function]}
                         onMouseLeave={[Function]}
+                        style={
+                          Object {
+                            "outline": "none",
+                          }
+                        }
+                        tabIndex={-1}
                       >
                         <div
                           className="dropdown-actor-title"
@@ -3465,6 +3545,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -3474,8 +3555,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -3865,6 +3953,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -3874,8 +3963,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -4265,6 +4361,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -4274,8 +4371,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -4665,6 +4769,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -4674,8 +4779,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -5065,6 +5177,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -5074,8 +5187,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -5465,6 +5585,7 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -5474,8 +5595,15 @@ exports[`IgnoreActions with confirmation step renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -6185,6 +6313,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
       >
         <DropdownMenu
           alwaysRenderMenu={true}
+          closeOnEscape={true}
           keepMenuOpen={false}
         >
           <span
@@ -6193,8 +6322,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
             <a
               className="dropdown-actor btn btn-default btn-sm dropdown-toggle"
               onClick={[Function]}
+              onKeyDown={[Function]}
               onMouseEnter={[Function]}
               onMouseLeave={[Function]}
+              style={
+                Object {
+                  "outline": "none",
+                }
+              }
+              tabIndex={-1}
             >
               <div
                 className="dropdown-actor-title"
@@ -6236,6 +6372,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                 >
                   <DropdownMenu
                     alwaysRenderMenu={true}
+                    closeOnEscape={true}
                     isNestedDropdown={true}
                     keepMenuOpen={false}
                   >
@@ -6245,8 +6382,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                       <a
                         className="dropdown-actor dropdown-toggle"
                         onClick={[Function]}
+                        onKeyDown={[Function]}
                         onMouseEnter={[Function]}
                         onMouseLeave={[Function]}
+                        style={
+                          Object {
+                            "outline": "none",
+                          }
+                        }
+                        tabIndex={-1}
                       >
                         <div
                           className="dropdown-actor-title"
@@ -6471,6 +6615,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                 >
                   <DropdownMenu
                     alwaysRenderMenu={true}
+                    closeOnEscape={true}
                     isNestedDropdown={true}
                     keepMenuOpen={false}
                   >
@@ -6480,8 +6625,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                       <a
                         className="dropdown-actor dropdown-toggle"
                         onClick={[Function]}
+                        onKeyDown={[Function]}
                         onMouseEnter={[Function]}
                         onMouseLeave={[Function]}
+                        style={
+                          Object {
+                            "outline": "none",
+                          }
+                        }
+                        tabIndex={-1}
                       >
                         <div
                           className="dropdown-actor-title"
@@ -6511,6 +6663,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -6520,8 +6673,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -6663,6 +6823,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -6672,8 +6833,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -6815,6 +6983,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -6824,8 +6993,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -6967,6 +7143,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -6976,8 +7153,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -7119,6 +7303,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -7128,8 +7313,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -7271,6 +7463,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -7280,8 +7473,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -7453,6 +7653,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                 >
                   <DropdownMenu
                     alwaysRenderMenu={true}
+                    closeOnEscape={true}
                     isNestedDropdown={true}
                     keepMenuOpen={false}
                   >
@@ -7462,8 +7663,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                       <a
                         className="dropdown-actor dropdown-toggle"
                         onClick={[Function]}
+                        onKeyDown={[Function]}
                         onMouseEnter={[Function]}
                         onMouseLeave={[Function]}
+                        style={
+                          Object {
+                            "outline": "none",
+                          }
+                        }
+                        tabIndex={-1}
                       >
                         <div
                           className="dropdown-actor-title"
@@ -7493,6 +7701,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -7502,8 +7711,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -7645,6 +7861,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -7654,8 +7871,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -7797,6 +8021,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -7806,8 +8031,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -7949,6 +8181,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -7958,8 +8191,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -8101,6 +8341,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -8110,8 +8351,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
@@ -8253,6 +8501,7 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                           >
                             <DropdownMenu
                               alwaysRenderMenu={true}
+                              closeOnEscape={true}
                               isNestedDropdown={true}
                               keepMenuOpen={false}
                             >
@@ -8262,8 +8511,15 @@ exports[`IgnoreActions without confirmation renders 1`] = `
                                 <a
                                   className="dropdown-actor dropdown-toggle"
                                   onClick={[Function]}
+                                  onKeyDown={[Function]}
                                   onMouseEnter={[Function]}
                                   onMouseLeave={[Function]}
+                                  style={
+                                    Object {
+                                      "outline": "none",
+                                    }
+                                  }
+                                  tabIndex={-1}
                                 >
                                   <div
                                     className="dropdown-actor-title"
diff --git a/tests/js/spec/components/actions/__snapshots__/resolve.spec.jsx.snap b/tests/js/spec/components/actions/__snapshots__/resolve.spec.jsx.snap
index 411c857895..bffba57bc9 100644
--- a/tests/js/spec/components/actions/__snapshots__/resolve.spec.jsx.snap
+++ b/tests/js/spec/components/actions/__snapshots__/resolve.spec.jsx.snap
@@ -209,6 +209,7 @@ exports[`ResolveActions with confirmation step renders 1`] = `
       >
         <DropdownMenu
           alwaysRenderMenu={true}
+          closeOnEscape={true}
           keepMenuOpen={false}
         >
           <span
@@ -217,8 +218,15 @@ exports[`ResolveActions with confirmation step renders 1`] = `
             <a
               className="dropdown-actor btn btn-default btn-sm dropdown-toggle"
               onClick={[Function]}
+              onKeyDown={[Function]}
               onMouseEnter={[Function]}
               onMouseLeave={[Function]}
+              style={
+                Object {
+                  "outline": "none",
+                }
+              }
+              tabIndex={-1}
             >
               <div
                 className="dropdown-actor-title"
@@ -598,6 +606,7 @@ exports[`ResolveActions without confirmation renders 1`] = `
       >
         <DropdownMenu
           alwaysRenderMenu={true}
+          closeOnEscape={true}
           keepMenuOpen={false}
         >
           <span
@@ -606,8 +615,15 @@ exports[`ResolveActions without confirmation renders 1`] = `
             <a
               className="dropdown-actor btn btn-default btn-sm dropdown-toggle"
               onClick={[Function]}
+              onKeyDown={[Function]}
               onMouseEnter={[Function]}
               onMouseLeave={[Function]}
+              style={
+                Object {
+                  "outline": "none",
+                }
+              }
+              tabIndex={-1}
             >
               <div
                 className="dropdown-actor-title"
diff --git a/tests/js/spec/components/dropdownMenu.spec.jsx b/tests/js/spec/components/dropdownMenu.spec.jsx
index 411b3b9757..de9a4b10b1 100644
--- a/tests/js/spec/components/dropdownMenu.spec.jsx
+++ b/tests/js/spec/components/dropdownMenu.spec.jsx
@@ -57,6 +57,40 @@ describe('DropdownMenu', function() {
     expect(wrapper.find('ul')).toHaveLength(0);
   });
 
+  it('closes dropdown when pressing escape', function() {
+    wrapper.find('button').simulate('click');
+    expect(wrapper.state('isOpen')).toBe(true);
+    wrapper.simulate('keyDown', {key: 'Escape'});
+    wrapper.find('button').simulate('keyDown', {key: 'Escape'});
+    expect(wrapper.state('isOpen')).toBe(false);
+    expect(wrapper.find('ul')).toHaveLength(0);
+  });
+
+  it('ignores "Escape" key if `closeOnEscape` is false', function() {
+    wrapper = mount(
+      <DropdownMenu closeOnEscape={false}>
+        {({getRootProps, getActorProps, getMenuProps, isOpen}) => {
+          return (
+            <span {...getRootProps({})}>
+              <button {...getActorProps({})}>Open Dropdown</button>
+              {isOpen && (
+                <ul {...getMenuProps({})}>
+                  <li>Dropdown Menu Item 1</li>
+                </ul>
+              )}
+            </span>
+          );
+        }}
+      </DropdownMenu>
+    );
+
+    wrapper.find('button').simulate('click');
+    expect(wrapper.state('isOpen')).toBe(true);
+    wrapper.find('button').simulate('keyDown', {key: 'Escape'});
+    expect(wrapper.find('ul')).toHaveLength(1);
+    expect(wrapper.state('isOpen')).toBe(true);
+  });
+
   it('keeps dropdown open when clicking on anything in menu with `keepMenuOpen` prop', function() {
     wrapper = mount(
       <DropdownMenu keepMenuOpen>
diff --git a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
index eb97b4eb50..56b6e74563 100644
--- a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
@@ -500,6 +500,7 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                     organizations={Array []}
                   >
                     <DropdownMenu
+                      closeOnEscape={true}
                       isNestedDropdown={true}
                       keepMenuOpen={false}
                     >
@@ -507,15 +508,29 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                         data-test-id="sidebar-switch-org"
                         innerRef={[Function]}
                         onClick={[Function]}
+                        onKeyDown={[Function]}
                         onMouseEnter={[Function]}
                         onMouseLeave={[Function]}
+                        style={
+                          Object {
+                            "outline": "none",
+                          }
+                        }
+                        tabIndex={-1}
                       >
                         <span
                           className="css-1lqnj07-SwitchOrganizationMenuActor ejspo4a3"
                           data-test-id="sidebar-switch-org"
                           onClick={[Function]}
+                          onKeyDown={[Function]}
                           onMouseEnter={[Function]}
                           onMouseLeave={[Function]}
+                          style={
+                            Object {
+                              "outline": "none",
+                            }
+                          }
+                          tabIndex={-1}
                         >
                           Switch organization
                           <SubMenuCaret>
diff --git a/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap b/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap
index d97f6741eb..f2f3bade15 100644
--- a/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap
@@ -91,6 +91,7 @@ exports[`OrganizationTeamProjects Should render 1`] = `
                           resetInputOnClose={true}
                         >
                           <DropdownMenu
+                            closeOnEscape={true}
                             isOpen={false}
                             keepMenuOpen={false}
                             onClickOutside={[Function]}
@@ -106,16 +107,30 @@ exports[`OrganizationTeamProjects Should render 1`] = `
                                     innerRef={[Function]}
                                     isOpen={false}
                                     onClick={[Function]}
+                                    onKeyDown={[Function]}
                                     onMouseEnter={[Function]}
                                     onMouseLeave={[Function]}
                                     role="button"
+                                    style={
+                                      Object {
+                                        "outline": "none",
+                                      }
+                                    }
+                                    tabIndex={-1}
                                   >
                                     <div
                                       className="css-dy1pax-Actor e53us8t0"
                                       onClick={[Function]}
+                                      onKeyDown={[Function]}
                                       onMouseEnter={[Function]}
                                       onMouseLeave={[Function]}
                                       role="button"
+                                      style={
+                                        Object {
+                                          "outline": "none",
+                                        }
+                                      }
+                                      tabIndex={-1}
                                     >
                                       <DropdownButton
                                         isOpen={false}
diff --git a/tests/js/spec/views/__snapshots__/organizationsDetails.spec.jsx.snap b/tests/js/spec/views/__snapshots__/organizationsDetails.spec.jsx.snap
index 3dfffe08b1..1d57bfbb3f 100644
--- a/tests/js/spec/views/__snapshots__/organizationsDetails.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/organizationsDetails.spec.jsx.snap
@@ -19,6 +19,8 @@ exports[`OrganizationDetails render() deletion in progress should render a delet
           <div
             class="css-1d9hpgj-SidebarDropdownActor e1fowdfw7"
             data-test-id="sidebar-dropdown"
+            style="outline:none"
+            tabindex="-1"
           >
             <div
               style="display:flex;align-items:flex-start"
@@ -283,6 +285,8 @@ exports[`OrganizationDetails render() deletion in progress should render a delet
         >
           <div
             class="css-d4wreg-HelpActor e1q2bb9t1"
+            style="outline:none"
+            tabindex="-1"
           >
             <a
               class="css-1l9toro-StyledSidebarItem e1qdnaq70"
@@ -456,6 +460,8 @@ exports[`OrganizationDetails render() pending deletion should render a restorati
           <div
             class="css-1d9hpgj-SidebarDropdownActor e1fowdfw7"
             data-test-id="sidebar-dropdown"
+            style="outline:none"
+            tabindex="-1"
           >
             <div
               style="display:flex;align-items:flex-start"
@@ -720,6 +726,8 @@ exports[`OrganizationDetails render() pending deletion should render a restorati
         >
           <div
             class="css-d4wreg-HelpActor e1q2bb9t1"
+            style="outline:none"
+            tabindex="-1"
           >
             <a
               class="css-1l9toro-StyledSidebarItem e1qdnaq70"
@@ -920,6 +928,8 @@ exports[`OrganizationDetails render() pending deletion should render a restorati
           <div
             class="css-1d9hpgj-SidebarDropdownActor e1fowdfw7"
             data-test-id="sidebar-dropdown"
+            style="outline:none"
+            tabindex="-1"
           >
             <div
               style="display:flex;align-items:flex-start"
@@ -1184,6 +1194,8 @@ exports[`OrganizationDetails render() pending deletion should render a restorati
         >
           <div
             class="css-d4wreg-HelpActor e1q2bb9t1"
+            style="outline:none"
+            tabindex="-1"
           >
             <a
               class="css-1l9toro-StyledSidebarItem e1qdnaq70"
