commit 053ec75422bb0f0f6c62d7fe4592c5498220dca3
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Aug 26 11:56:40 2015 -0700

    Update docs to match current Django recommendations

diff --git a/src/sentry/static/sentry/app/index.js b/src/sentry/static/sentry/app/index.js
index 2bf20088dc..1a9bfe6f25 100644
--- a/src/sentry/static/sentry/app/index.js
+++ b/src/sentry/static/sentry/app/index.js
@@ -30,13 +30,15 @@ function sameOrigin(url) {
       !(/^(\/\/|http:|https:).*/.test(url));
 }
 
-function safeMethod(method) {
+function csrfSafeMethod(method) {
+  // these HTTP methods do not require CSRF protection
   return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
 }
-
-jQuery(document).ajaxSend(function(event, xhr, settings) {
-  if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
-    xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
+jQuery.ajaxSetup({
+  beforeSend: function(xhr, settings) {
+    if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
+      xhr.setRequestHeader("X-CSRFToken", csrftoken);
+    }
   }
 });
 
