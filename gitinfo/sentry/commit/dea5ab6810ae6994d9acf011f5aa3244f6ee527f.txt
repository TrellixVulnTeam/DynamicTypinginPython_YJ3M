commit dea5ab6810ae6994d9acf011f5aa3244f6ee527f
Author: Jess MacQueen <macqueen@users.noreply.github.com>
Date:   Tue Dec 11 14:37:14 2018 -0800

    metrics: Add group resolved, assigned, ignored metrics (#10988)

diff --git a/src/sentry/api/endpoints/project_group_index.py b/src/sentry/api/endpoints/project_group_index.py
index 2b77f0474c..b3a848502f 100644
--- a/src/sentry/api/endpoints/project_group_index.py
+++ b/src/sentry/api/endpoints/project_group_index.py
@@ -34,6 +34,7 @@ from sentry.signals import advanced_search, issue_ignored, issue_resolved_in_rel
 from sentry.tasks.deletion import delete_groups
 from sentry.tasks.integrations import kick_off_status_syncs
 from sentry.tasks.merge import merge_groups
+from sentry.utils import metrics
 from sentry.utils.apidocs import attach_scenarios, scenario
 from sentry.utils.cursors import Cursor, CursorResult
 from sentry.utils.functional import extract_lazy_object
@@ -622,6 +623,7 @@ class ProjectGroupIndexEndpoint(ProjectEndpoint, EnvironmentMixin):
                 status_details = {}
 
             now = timezone.now()
+            metrics.incr('group.resolved', instance=res_type_str, skip_internal=True)
 
             # if we've specified a commit, let's see if its already been released
             # this will allow us to associate the resolution to a release as if we
@@ -741,6 +743,8 @@ class ProjectGroupIndexEndpoint(ProjectEndpoint, EnvironmentMixin):
                 ).delete()
 
                 if new_status == GroupStatus.IGNORED:
+                    metrics.incr('group.ignored', skip_internal=True)
+
                     ignore_duration = (
                         statusDetails.pop('ignoreDuration', None) or
                         statusDetails.pop('snoozeDuration', None)
diff --git a/src/sentry/models/groupassignee.py b/src/sentry/models/groupassignee.py
index bd85b38c86..0a6ab036b1 100644
--- a/src/sentry/models/groupassignee.py
+++ b/src/sentry/models/groupassignee.py
@@ -18,6 +18,7 @@ from sentry.db.models import FlexibleForeignKey, Model, sane_repr, \
     BaseManager
 from sentry.models.activity import Activity
 from sentry.signals import issue_assigned
+from sentry.utils import metrics
 
 
 def get_user_project_ids(users):
@@ -193,6 +194,7 @@ class GroupAssigneeManager(BaseManager):
                 },
             )
             activity.send_notification()
+            metrics.incr('group.assignee.change', instance='assigned', skip_internal=True)
             # sync Sentry assignee to external issues
             if assignee_type == 'user' and features.has(
                     'organizations:integrations-issue-sync', group.organization, actor=acting_user):
@@ -215,6 +217,7 @@ class GroupAssigneeManager(BaseManager):
                 user=acting_user,
             )
             activity.send_notification()
+            metrics.incr('group.assignee.change', instance='deassigned', skip_internal=True)
             # sync Sentry assignee to external issues
             if features.has('organizations:integrations-issue-sync',
                             group.organization, actor=acting_user):
diff --git a/src/sentry/models/release.py b/src/sentry/models/release.py
index 99c39d4bd9..a4da4930dd 100644
--- a/src/sentry/models/release.py
+++ b/src/sentry/models/release.py
@@ -24,6 +24,7 @@ from sentry.db.models import (
 
 from sentry.models import CommitFileChange
 
+from sentry.utils import metrics
 from sentry.utils.cache import cache
 from sentry.utils.hashlib import md5_text
 from sentry.utils.retries import TimedRetryPolicy
@@ -534,6 +535,7 @@ class Release(Model):
                 Group.objects.filter(
                     id=group_id,
                 ).update(status=GroupStatus.RESOLVED)
+                metrics.incr('group.resolved', instance='in_commit', skip_internal=True)
 
             kick_off_status_syncs.apply_async(kwargs={
                 'project_id': group_project_lookup[group_id],
