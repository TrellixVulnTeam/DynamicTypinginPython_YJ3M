commit bf6ff9b2e555ad0ab514f63e8e713cd54af410b3
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Mar 7 12:39:13 2014 -0800

    mock socket.getfqdn in tests

diff --git a/conftest.py b/conftest.py
index 4ab7df0c64..0a914c010d 100644
--- a/conftest.py
+++ b/conftest.py
@@ -1,4 +1,5 @@
 from django.conf import settings
+import mock
 import os
 import os.path
 
@@ -71,5 +72,10 @@ def pytest_configure(config):
 
     settings.SENTRY_ALLOW_ORIGIN = '*'
 
+    # django mail uses socket.getfqdn which doesnt play nice if our
+    # networking isnt stable
+    patcher = mock.patch('socket.getfqdn', return_value='localhost')
+    patcher.start()
+
     from sentry.utils.runner import initialize_receivers
     initialize_receivers()
