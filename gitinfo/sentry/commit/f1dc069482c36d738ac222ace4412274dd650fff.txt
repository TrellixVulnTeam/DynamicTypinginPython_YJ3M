commit f1dc069482c36d738ac222ace4412274dd650fff
Author: Chris Clark <christopherchristopherclark@gmail.com>
Date:   Thu Nov 15 13:02:30 2018 -0800

    fix(stream): prevent unfortunate line wrapping in stream (#10585)
    
    * prevent line wrapping on group ids and times in stream
    
    * use flex-shrink: 0; rather than white-space propert to achieve fixed width on first and third elements
    
    * fix typos in comments

diff --git a/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx b/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx
index 9c2f194eda..ce8064f093 100644
--- a/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx
+++ b/src/sentry/static/sentry/app/components/eventOrGroupExtraDetails.jsx
@@ -8,7 +8,10 @@ import {Flex, Box} from 'grid-emotion';
 import ProjectState from 'app/mixins/projectState';
 import TimeSince from 'app/components/timeSince';
 import ShortId from 'app/components/shortId';
+import overflowEllipsis from 'app/styles/overflowEllipsis';
 import {t, tct} from 'app/locale';
+import InlineSvg from 'app/components/inlineSvg';
+import space from 'app/styles/space';
 
 const EventOrGroupExtraDetails = createReactClass({
   displayName: 'EventOrGroupExtraDetails',
@@ -49,45 +52,44 @@ const EventOrGroupExtraDetails = createReactClass({
       showAssignee,
       shortId,
     } = this.props;
-    let styles = {};
-    if (subscriptionDetails && subscriptionDetails.reason === 'mentioned') {
-      styles = {color: '#57be8c'};
-    }
 
     return (
       <GroupExtra align="center">
-        {shortId && (
-          <Box mr={2}>
-            <GroupShortId shortId={shortId} />
-          </Box>
-        )}
-        <Flex align="center" mr={2}>
-          {lastSeen && (
-            <React.Fragment>
-              <GroupExtraIcon className="icon icon-clock" />
-              <TimeSince date={lastSeen} suffix={t('ago')} />
-            </React.Fragment>
-          )}
-          {firstSeen &&
-            lastSeen && <span className="hidden-xs hidden-sm">&nbsp;—&nbsp;</span>}
-          {firstSeen && (
-            <TimeSince
-              date={firstSeen}
-              suffix={t('old')}
-              className="hidden-xs hidden-sm"
-            />
-          )}
-        </Flex>
+        {shortId && <GroupShortId shortId={shortId} />}
+        <Times>
+          <div css={overflowEllipsis}>
+            {lastSeen && (
+              <React.Fragment>
+                <GroupTimeIcon src="icon-clock-sm" />
+                <TimeSince date={lastSeen} suffix={t('ago')} />
+              </React.Fragment>
+            )}
+            {firstSeen &&
+              lastSeen && <span className="hidden-xs hidden-sm">&nbsp;—&nbsp;</span>}
+            {firstSeen && (
+              <TimeSince
+                date={firstSeen}
+                suffix={t('old')}
+                className="hidden-xs hidden-sm"
+              />
+            )}
+          </div>
+        </Times>
         <GroupExtraCommentsAndLogger>
           {numComments > 0 && (
             <Box mr={2}>
-              <Link
+              <CommentsLink
                 to={`/${orgId}/${projectId}/issues/${groupId}/activity/`}
                 className="comments"
               >
-                <GroupExtraIcon className="icon icon-comments" style={styles} />
-                <GroupExtraIcon className="tag-count">{numComments}</GroupExtraIcon>
-              </Link>
+                <GroupExtraIcon
+                  src="icon-comment-sm"
+                  mentioned={
+                    subscriptionDetails && subscriptionDetails.reason === 'mentioned'
+                  }
+                />
+                <span>{numComments}</span>
+              </CommentsLink>
             </Box>
           )}
           {logger && (
@@ -108,7 +110,7 @@ const EventOrGroupExtraDetails = createReactClass({
         {annotations &&
           annotations.map((annotation, key) => {
             return (
-              <Box
+              <div
                 className="event-annotation"
                 dangerouslySetInnerHTML={{
                   __html: annotation,
@@ -119,7 +121,7 @@ const EventOrGroupExtraDetails = createReactClass({
           })}
 
         {showAssignee &&
-          assignedTo && <Box>{tct('Assigned to [name]', {name: assignedTo.name})}</Box>}
+          assignedTo && <div>{tct('Assigned to [name]', {name: assignedTo.name})}</div>}
       </GroupExtra>
     );
   },
@@ -128,6 +130,8 @@ const EventOrGroupExtraDetails = createReactClass({
 const GroupExtra = styled(Flex)`
   color: ${p => p.theme.gray3};
   font-size: 12px;
+  position: relative;
+
   a {
     color: inherit;
   }
@@ -137,14 +141,35 @@ const GroupExtraCommentsAndLogger = styled(Flex)`
   color: ${p => p.theme.gray4};
 `;
 
+const CommentsLink = styled(Link)`
+  display: flex;
+  align-items: center;
+  flex-shrink: 0;
+`;
+
+const Times = styled('div')`
+  margin-right: ${space(2)};
+  flex-shrink: 1;
+  min-width: 0; /* flex-hack for overflow-ellipsised children */
+`;
+
 const GroupShortId = styled(ShortId)`
+  margin-right: ${space(2)};
+  flex-shrink: 0;
   font-size: 12px;
   color: ${p => p.theme.gray3};
 `;
 
-const GroupExtraIcon = styled.span`
+const GroupExtraIcon = styled(InlineSvg)`
+  color: ${p => (p.isMentioned ? p.theme.green : null)};
   font-size: 11px;
   margin-right: 4px;
 `;
 
+const GroupTimeIcon = styled(GroupExtraIcon)`
+  /* this is solely for optics, since TimeSince always begins
+  with a number, and numbers do not have descenders */
+  transform: translateY(-1px);
+`;
+
 export default EventOrGroupExtraDetails;
diff --git a/src/sentry/static/sentry/app/icons/icon-clock-sm.svg b/src/sentry/static/sentry/app/icons/icon-clock-sm.svg
new file mode 100644
index 0000000000..d21c6c8f1e
--- /dev/null
+++ b/src/sentry/static/sentry/app/icons/icon-clock-sm.svg
@@ -0,0 +1 @@
+<svg width="12" height="12" shape-rendering="optimizeSpeed" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><title>icon clock</title><g fill="currentColor" fill-rule="nonzero"><path d="M6.75 5.25h1.5v1.5h-3V3h1.5z"/><path d="M6 0a5.88 5.88 0 0 1 2.338.469 6.02 6.02 0 0 1 1.91 1.283 6.02 6.02 0 0 1 1.283 1.91c.313.73.469 1.51.469 2.338a5.88 5.88 0 0 1-.469 2.338 6.02 6.02 0 0 1-1.283 1.91 6.02 6.02 0 0 1-1.91 1.283A5.88 5.88 0 0 1 6 12a5.88 5.88 0 0 1-2.338-.469 6.02 6.02 0 0 1-1.91-1.283 6.02 6.02 0 0 1-1.283-1.91A5.88 5.88 0 0 1 0 6c0-.828.156-1.607.469-2.338a6.02 6.02 0 0 1 1.283-1.91A6.02 6.02 0 0 1 3.662.469 5.88 5.88 0 0 1 6 0zm0 10.5c.625 0 1.209-.117 1.752-.352a4.554 4.554 0 0 0 2.396-2.396A4.373 4.373 0 0 0 10.5 6c0-.625-.117-1.209-.352-1.752a4.554 4.554 0 0 0-2.396-2.396A4.373 4.373 0 0 0 6 1.5c-.625 0-1.209.117-1.752.352a4.554 4.554 0 0 0-2.396 2.396A4.373 4.373 0 0 0 1.5 6c0 .625.117 1.209.352 1.752a4.554 4.554 0 0 0 2.396 2.396A4.373 4.373 0 0 0 6 10.5z"/></g></svg>
diff --git a/src/sentry/static/sentry/app/icons/icon-comment-sm.svg b/src/sentry/static/sentry/app/icons/icon-comment-sm.svg
new file mode 100644
index 0000000000..611a86359a
--- /dev/null
+++ b/src/sentry/static/sentry/app/icons/icon-comment-sm.svg
@@ -0,0 +1 @@
+<svg width="12" height="12" viewBox="0 0 12 12" shape-rendering="optimizeSpeed" xmlns="http://www.w3.org/2000/svg"><title>icon comment</title><g fill="currentColor" fill-rule="nonzero"><path d="M3 6.75v-1.5h6v1.5zM3 4.5V3h6v1.5z"/><path d="M11.25 0c.21 0 .389.072.533.217A.725.725 0 0 1 12 .75V9c0 .21-.072.389-.217.533a.725.725 0 0 1-.533.217H5.625L2.25 12V9.75H.75a.725.725 0 0 1-.533-.217A.725.725 0 0 1 0 9V.75C0 .54.072.361.217.217A.725.725 0 0 1 .75 0h10.5zm-.75 8.25V1.5h-9v6.75h2.25v1.125L5.625 8.25H10.5z"/></g></svg>
diff --git a/tests/js/spec/components/__snapshots__/eventOrGroupExtraDetails.spec.jsx.snap b/tests/js/spec/components/__snapshots__/eventOrGroupExtraDetails.spec.jsx.snap
index 6280718807..e1857a1d36 100644
--- a/tests/js/spec/components/__snapshots__/eventOrGroupExtraDetails.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/eventOrGroupExtraDetails.spec.jsx.snap
@@ -4,59 +4,48 @@ exports[`EventOrGroupExtraDetails details when mentioned 1`] = `
 <GroupExtra
   align="center"
 >
-  <Box
-    mr={2}
-  >
-    <GroupShortId
-      shortId="shortId"
-    />
-  </Box>
-  <Flex
-    align="center"
-    mr={2}
-  >
-    <GroupExtraIcon
-      className="icon icon-clock"
-    />
-    <TimeSince
-      date="2017-07-25T22:56:12Z"
-      suffix="ago"
-    />
-    <span
-      className="hidden-xs hidden-sm"
+  <GroupShortId
+    shortId="shortId"
+  />
+  <Times>
+    <div
+      className="css-77t6iv"
     >
-       — 
-    </span>
-    <TimeSince
-      className="hidden-xs hidden-sm"
-      date="2017-07-01T02:06:02Z"
-      suffix="old"
-    />
-  </Flex>
+      <GroupTimeIcon
+        src="icon-clock-sm"
+      />
+      <TimeSince
+        date="2017-07-25T22:56:12Z"
+        suffix="ago"
+      />
+      <span
+        className="hidden-xs hidden-sm"
+      >
+         — 
+      </span>
+      <TimeSince
+        className="hidden-xs hidden-sm"
+        date="2017-07-01T02:06:02Z"
+        suffix="old"
+      />
+    </div>
+  </Times>
   <GroupExtraCommentsAndLogger>
     <Box
       mr={2}
     >
-      <Link
+      <CommentsLink
         className="comments"
-        onlyActiveOnIndex={false}
-        style={Object {}}
         to="/orgId/projectId/issues/groupId/activity/"
       >
         <GroupExtraIcon
-          className="icon icon-comments"
-          style={
-            Object {
-              "color": "#57be8c",
-            }
-          }
+          mentioned={true}
+          src="icon-comment-sm"
         />
-        <GroupExtraIcon
-          className="tag-count"
-        >
+        <span>
           14
-        </GroupExtraIcon>
-      </Link>
+        </span>
+      </CommentsLink>
     </Box>
     <Box
       className="event-annotation"
@@ -78,7 +67,7 @@ exports[`EventOrGroupExtraDetails details when mentioned 1`] = `
       </Link>
     </Box>
   </GroupExtraCommentsAndLogger>
-  <Box
+  <div
     className="event-annotation"
     dangerouslySetInnerHTML={
       Object {
@@ -87,7 +76,7 @@ exports[`EventOrGroupExtraDetails details when mentioned 1`] = `
     }
     key="0"
   />
-  <Box
+  <div
     className="event-annotation"
     dangerouslySetInnerHTML={
       Object {
@@ -103,55 +92,47 @@ exports[`EventOrGroupExtraDetails renders all details 1`] = `
 <GroupExtra
   align="center"
 >
-  <Box
-    mr={2}
-  >
-    <GroupShortId
-      shortId="shortId"
-    />
-  </Box>
-  <Flex
-    align="center"
-    mr={2}
-  >
-    <GroupExtraIcon
-      className="icon icon-clock"
-    />
-    <TimeSince
-      date="2017-07-25T22:56:12Z"
-      suffix="ago"
-    />
-    <span
-      className="hidden-xs hidden-sm"
+  <GroupShortId
+    shortId="shortId"
+  />
+  <Times>
+    <div
+      className="css-77t6iv"
     >
-       — 
-    </span>
-    <TimeSince
-      className="hidden-xs hidden-sm"
-      date="2017-07-01T02:06:02Z"
-      suffix="old"
-    />
-  </Flex>
+      <GroupTimeIcon
+        src="icon-clock-sm"
+      />
+      <TimeSince
+        date="2017-07-25T22:56:12Z"
+        suffix="ago"
+      />
+      <span
+        className="hidden-xs hidden-sm"
+      >
+         — 
+      </span>
+      <TimeSince
+        className="hidden-xs hidden-sm"
+        date="2017-07-01T02:06:02Z"
+        suffix="old"
+      />
+    </div>
+  </Times>
   <GroupExtraCommentsAndLogger>
     <Box
       mr={2}
     >
-      <Link
+      <CommentsLink
         className="comments"
-        onlyActiveOnIndex={false}
-        style={Object {}}
         to="/orgId/projectId/issues/groupId/activity/"
       >
         <GroupExtraIcon
-          className="icon icon-comments"
-          style={Object {}}
+          src="icon-comment-sm"
         />
-        <GroupExtraIcon
-          className="tag-count"
-        >
+        <span>
           14
-        </GroupExtraIcon>
-      </Link>
+        </span>
+      </CommentsLink>
     </Box>
     <Box
       className="event-annotation"
@@ -173,7 +154,7 @@ exports[`EventOrGroupExtraDetails renders all details 1`] = `
       </Link>
     </Box>
   </GroupExtraCommentsAndLogger>
-  <Box
+  <div
     className="event-annotation"
     dangerouslySetInnerHTML={
       Object {
@@ -182,7 +163,7 @@ exports[`EventOrGroupExtraDetails renders all details 1`] = `
     }
     key="0"
   />
-  <Box
+  <div
     className="event-annotation"
     dangerouslySetInnerHTML={
       Object {
@@ -198,55 +179,47 @@ exports[`EventOrGroupExtraDetails renders assignee and status 1`] = `
 <GroupExtra
   align="center"
 >
-  <Box
-    mr={2}
-  >
-    <GroupShortId
-      shortId="shortId"
-    />
-  </Box>
-  <Flex
-    align="center"
-    mr={2}
-  >
-    <GroupExtraIcon
-      className="icon icon-clock"
-    />
-    <TimeSince
-      date="2017-07-25T22:56:12Z"
-      suffix="ago"
-    />
-    <span
-      className="hidden-xs hidden-sm"
+  <GroupShortId
+    shortId="shortId"
+  />
+  <Times>
+    <div
+      className="css-77t6iv"
     >
-       — 
-    </span>
-    <TimeSince
-      className="hidden-xs hidden-sm"
-      date="2017-07-01T02:06:02Z"
-      suffix="old"
-    />
-  </Flex>
+      <GroupTimeIcon
+        src="icon-clock-sm"
+      />
+      <TimeSince
+        date="2017-07-25T22:56:12Z"
+        suffix="ago"
+      />
+      <span
+        className="hidden-xs hidden-sm"
+      >
+         — 
+      </span>
+      <TimeSince
+        className="hidden-xs hidden-sm"
+        date="2017-07-01T02:06:02Z"
+        suffix="old"
+      />
+    </div>
+  </Times>
   <GroupExtraCommentsAndLogger>
     <Box
       mr={2}
     >
-      <Link
+      <CommentsLink
         className="comments"
-        onlyActiveOnIndex={false}
-        style={Object {}}
         to="/orgId/projectId/issues/groupId/activity/"
       >
         <GroupExtraIcon
-          className="icon icon-comments"
-          style={Object {}}
+          src="icon-comment-sm"
         />
-        <GroupExtraIcon
-          className="tag-count"
-        >
+        <span>
           14
-        </GroupExtraIcon>
-      </Link>
+        </span>
+      </CommentsLink>
     </Box>
     <Box
       className="event-annotation"
@@ -268,7 +241,7 @@ exports[`EventOrGroupExtraDetails renders assignee and status 1`] = `
       </Link>
     </Box>
   </GroupExtraCommentsAndLogger>
-  <Box
+  <div
     className="event-annotation"
     dangerouslySetInnerHTML={
       Object {
@@ -277,7 +250,7 @@ exports[`EventOrGroupExtraDetails renders assignee and status 1`] = `
     }
     key="0"
   />
-  <Box
+  <div
     className="event-annotation"
     dangerouslySetInnerHTML={
       Object {
@@ -286,7 +259,7 @@ exports[`EventOrGroupExtraDetails renders assignee and status 1`] = `
     }
     key="1"
   />
-  <Box>
+  <div>
     <span
       key="4"
     >
@@ -301,7 +274,7 @@ exports[`EventOrGroupExtraDetails renders assignee and status 1`] = `
         Assignee Name
       </span>
     </span>
-  </Box>
+  </div>
 </GroupExtra>
 `;
 
@@ -309,28 +282,29 @@ exports[`EventOrGroupExtraDetails renders last and first seen 1`] = `
 <GroupExtra
   align="center"
 >
-  <Flex
-    align="center"
-    mr={2}
-  >
-    <GroupExtraIcon
-      className="icon icon-clock"
-    />
-    <TimeSince
-      date="2017-07-25T22:56:12Z"
-      suffix="ago"
-    />
-    <span
-      className="hidden-xs hidden-sm"
+  <Times>
+    <div
+      className="css-77t6iv"
     >
-       — 
-    </span>
-    <TimeSince
-      className="hidden-xs hidden-sm"
-      date="2017-07-01T02:06:02Z"
-      suffix="old"
-    />
-  </Flex>
+      <GroupTimeIcon
+        src="icon-clock-sm"
+      />
+      <TimeSince
+        date="2017-07-25T22:56:12Z"
+        suffix="ago"
+      />
+      <span
+        className="hidden-xs hidden-sm"
+      >
+         — 
+      </span>
+      <TimeSince
+        className="hidden-xs hidden-sm"
+        date="2017-07-01T02:06:02Z"
+        suffix="old"
+      />
+    </div>
+  </Times>
   <GroupExtraCommentsAndLogger />
 </GroupExtra>
 `;
@@ -339,16 +313,17 @@ exports[`EventOrGroupExtraDetails renders only first seen 1`] = `
 <GroupExtra
   align="center"
 >
-  <Flex
-    align="center"
-    mr={2}
-  >
-    <TimeSince
-      className="hidden-xs hidden-sm"
-      date="2017-07-01T02:06:02Z"
-      suffix="old"
-    />
-  </Flex>
+  <Times>
+    <div
+      className="css-77t6iv"
+    >
+      <TimeSince
+        className="hidden-xs hidden-sm"
+        date="2017-07-01T02:06:02Z"
+        suffix="old"
+      />
+    </div>
+  </Times>
   <GroupExtraCommentsAndLogger />
 </GroupExtra>
 `;
@@ -357,18 +332,19 @@ exports[`EventOrGroupExtraDetails renders only last seen 1`] = `
 <GroupExtra
   align="center"
 >
-  <Flex
-    align="center"
-    mr={2}
-  >
-    <GroupExtraIcon
-      className="icon icon-clock"
-    />
-    <TimeSince
-      date="2017-07-25T22:56:12Z"
-      suffix="ago"
-    />
-  </Flex>
+  <Times>
+    <div
+      className="css-77t6iv"
+    >
+      <GroupTimeIcon
+        src="icon-clock-sm"
+      />
+      <TimeSince
+        date="2017-07-25T22:56:12Z"
+        suffix="ago"
+      />
+    </div>
+  </Times>
   <GroupExtraCommentsAndLogger />
 </GroupExtra>
 `;
diff --git a/tests/js/spec/views/__snapshots__/groupSimilarView.spec.jsx.snap b/tests/js/spec/views/__snapshots__/groupSimilarView.spec.jsx.snap
index 4dbcf3989e..ae4675cf67 100644
--- a/tests/js/spec/views/__snapshots__/groupSimilarView.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/groupSimilarView.spec.jsx.snap
@@ -881,68 +881,48 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                             >
                               <Base
                                 align="center"
-                                className="css-1pyi24d-GroupExtra eec9orn0"
+                                className="css-1iq5qji-GroupExtra eec9orn0"
                               >
                                 <div
-                                  className="css-1pyi24d-GroupExtra eec9orn0"
+                                  className="css-1iq5qji-GroupExtra eec9orn0"
                                   is={null}
                                 >
-                                  <Box
-                                    mr={2}
+                                  <GroupShortId
+                                    shortId="INTERNAL-4G"
                                   >
-                                    <Base
-                                      className="css-6htue9"
-                                      mr={2}
+                                    <ShortId
+                                      className="css-yd3bt1-GroupShortId eec9orn4"
+                                      shortId="INTERNAL-4G"
                                     >
-                                      <div
-                                        className="css-6htue9"
-                                        is={null}
+                                      <StyledShortId
+                                        className="css-yd3bt1-GroupShortId eec9orn4"
+                                        onClick={[Function]}
+                                        shortId="INTERNAL-4G"
                                       >
-                                        <GroupShortId
-                                          shortId="INTERNAL-4G"
+                                        <div
+                                          className="eec9orn4 css-77itmv-StyledShortId-GroupShortId ebuncw00"
+                                          onClick={[Function]}
                                         >
-                                          <ShortId
-                                            className="css-cp85bv-GroupShortId eec9orn2"
-                                            shortId="INTERNAL-4G"
-                                          >
-                                            <StyledShortId
-                                              className="css-cp85bv-GroupShortId eec9orn2"
+                                          <AutoSelectText>
+                                            <div
+                                              className="auto-select-text"
                                               onClick={[Function]}
-                                              shortId="INTERNAL-4G"
                                             >
-                                              <div
-                                                className="eec9orn2 css-gzzipm-StyledShortId-GroupShortId ebuncw00"
-                                                onClick={[Function]}
-                                              >
-                                                <AutoSelectText>
-                                                  <div
-                                                    className="auto-select-text"
-                                                    onClick={[Function]}
-                                                  >
-                                                    <span>
-                                                      INTERNAL-4G
-                                                    </span>
-                                                  </div>
-                                                </AutoSelectText>
-                                              </div>
-                                            </StyledShortId>
-                                          </ShortId>
-                                        </GroupShortId>
-                                      </div>
-                                    </Base>
-                                  </Box>
-                                  <Flex
-                                    align="center"
-                                    mr={2}
-                                  >
-                                    <Base
-                                      align="center"
-                                      className="css-1cjke39"
-                                      mr={2}
+                                              <span>
+                                                INTERNAL-4G
+                                              </span>
+                                            </div>
+                                          </AutoSelectText>
+                                        </div>
+                                      </StyledShortId>
+                                    </ShortId>
+                                  </GroupShortId>
+                                  <Times>
+                                    <div
+                                      className="css-139skj2-Times eec9orn3"
                                     >
                                       <div
-                                        className="css-1cjke39"
-                                        is={null}
+                                        className="css-77t6iv"
                                       >
                                         <TimeSince
                                           className="hidden-xs hidden-sm"
@@ -958,8 +938,8 @@ exports[`Issues Similar View renders with mocked data 1`] = `
                                           </time>
                                         </TimeSince>
                                       </div>
-                                    </Base>
-                                  </Flex>
+                                    </div>
+                                  </Times>
                                   <GroupExtraCommentsAndLogger>
                                     <Base
                                       className="css-1ycmuq8-GroupExtraCommentsAndLogger eec9orn1"
