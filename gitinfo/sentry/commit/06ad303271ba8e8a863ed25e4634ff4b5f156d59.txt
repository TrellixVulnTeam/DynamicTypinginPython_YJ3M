commit 06ad303271ba8e8a863ed25e4634ff4b5f156d59
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Dec 2 18:53:44 2012 -0800

    Add basic test for unregistered users

diff --git a/tests/sentry/web/frontend/teams/tests.py b/tests/sentry/web/frontend/teams/tests.py
index 6c790dfb6b..a55f6fffa4 100644
--- a/tests/sentry/web/frontend/teams/tests.py
+++ b/tests/sentry/web/frontend/teams/tests.py
@@ -227,3 +227,14 @@ class NewTeamMemberTest(BaseTeamTest):
         ptm = PendingTeamMember.objects.get(email=user.email, team=self.team)
         self.assertEquals(ptm.type, MEMBER_USER)
         send_invite_email.assert_called_once_with()
+
+    @mock.patch('sentry.models.PendingTeamMember.send_invite_email')
+    def test_does_invite_unregistered_user(self, send_invite_email):
+        resp = self.client.post(self.path, {
+            'invite-type': MEMBER_USER,
+            'invite-email': 'newuser@example.com',
+        })
+        self.assertEquals(resp.status_code, 302)
+        ptm = PendingTeamMember.objects.get(email='newuser@example.com', team=self.team)
+        self.assertEquals(ptm.type, MEMBER_USER)
+        send_invite_email.assert_called_once_with()
