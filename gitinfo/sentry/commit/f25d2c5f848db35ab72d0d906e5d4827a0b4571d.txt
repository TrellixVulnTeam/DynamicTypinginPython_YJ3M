commit f25d2c5f848db35ab72d0d906e5d4827a0b4571d
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Sep 15 21:40:18 2014 -0700

    Wire up broadcasts

diff --git a/src/sentry/static/sentry/app/directives/broadcast.js b/src/sentry/static/sentry/app/directives/broadcast.js
index 1a630a0487..9510759520 100644
--- a/src/sentry/static/sentry/app/directives/broadcast.js
+++ b/src/sentry/static/sentry/app/directives/broadcast.js
@@ -1,31 +1,21 @@
 (function(){
   'use strict';
 
-  var broadcasts = [
-    {
-      badge: true,
-      message: "See what's new in Sentry!",
-      url: "http://blog.getsentry.com/"
-    },
-    {
-      message: "Restrict access to projects using Access Groups"
-    },
-    {
-      message: "Precisely control notifications with Rules"
-    }
-  ];
-
   angular.module('sentry.directives.broadcast', [])
     .directive('broadcast', function() {
       return {
         restrict: 'E',
         templateUrl: '../../templates/broadcast.html',
-        controller: function () {
-          this.overQuota = false; // TODO: Figure out if over quota
-
-          this.randomBroadcast = broadcasts[Math.floor(Math.random() * broadcasts.length)];
-
-        },
+        controller: ['$http', '$scope', function($http, $scope) {
+          $http.get('/api/0/broadcasts/')
+            .success(function(data){
+              if (data.length) {
+                $scope.broadcast = data[Math.floor(Math.random() * data.length)];
+              } else {
+                $scope.broadcast = null;
+              }
+            });
+        }],
         controllerAs: "broadcasts"
       };
     });
diff --git a/src/sentry/static/sentry/app/templates/broadcast.html b/src/sentry/static/sentry/app/templates/broadcast.html
index 090648cede..7c55a7f662 100644
--- a/src/sentry/static/sentry/app/templates/broadcast.html
+++ b/src/sentry/static/sentry/app/templates/broadcast.html
@@ -1,21 +1,10 @@
-<div ng-if="broadcasts.overQuota">
-  <div class="usage-wrapper">
-    <div class="pull-right">
-      <a href="#">Upgrade now</a>
+<div ng-if="broadcast">
+    <div ng-if="broadcast.link">
+        <span class="badge new" ng-show="broadcast.badge">new</span>
+        <a href="{{ broadcast.link }}" class="link">{{ broadcast.message }}</a>
+    </div>
+    <div ng-if="!broadcast.link">
+        <span class="badge new" ng-show="broadcast.badge">new</span>
+        {{ broadcast.message }}
     </div>
-    <strong>Usage:</strong>
-    <div class="usage"><div style="width: 80%"></div></div>
-  </div>
-</div>
-<div ng-if="!broadcasts.overQuota">
-  <div ng-repeat="broadcast in broadcasts">
-      <div ng-if="broadcast.url">
-          <span class="badge new" ng-show="broadcast.badge">new</span>
-          <a href="{{ broadcast.url }}" class="link">{{ broadcast.message }}</a>
-      </div>
-      <div ng-if="!broadcast.url">
-          <span class="badge new" ng-show="broadcast.badge">new</span>
-          {{ broadcast.message }}
-      </div>
-  </div>
 </div>
