commit 30015c8a94218af1929a931932dbf4b4c662e901
Author: Burak Yigit Kaya <byk@sentry.io>
Date:   Wed Mar 18 15:36:32 2020 +0300

    fix(migrations): Fixes old EventAttachment migration failing (#17755)
    
    Reported here: https://forum.sentry.io/t/unable-to-update-version-10-to-latest/9193?u=byk
    
    I suspect this is due to the historical version of the model not having our augmented `update` method on the instance as this migration worked on prod when it was first introduced.

diff --git a/src/sentry/migrations/0020_auto_20191125_1420.py b/src/sentry/migrations/0020_auto_20191125_1420.py
index 78b0d6b965..7393a4e799 100644
--- a/src/sentry/migrations/0020_auto_20191125_1420.py
+++ b/src/sentry/migrations/0020_auto_20191125_1420.py
@@ -14,7 +14,7 @@ def backfill_group_ids(model):
     for attachment in RangeQuerySetWrapper(query, step=1000):
         event = eventstore.get_event_by_id(attachment.project_id, attachment.event_id)
         if event:
-            attachment.update(group_id=event.group_id)
+            model.objects.filter(id=attachment.id).update(group_id=event.group_id)
 
 
 def forwards(apps, schema_editor):
@@ -37,11 +37,8 @@ class Migration(migrations.Migration):
     # - Adding columns to highly active tables, even ones that are NULL.
     is_dangerous = True
 
-
     dependencies = [
-        ('sentry', '0019_auto_20191114_2040'),
+        ("sentry", "0019_auto_20191114_2040"),
     ]
 
-    operations = [
-        migrations.RunPython(forwards, migrations.RunPython.noop)
-    ]
+    operations = [migrations.RunPython(forwards, migrations.RunPython.noop)]
