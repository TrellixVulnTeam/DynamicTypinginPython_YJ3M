commit b4e30909db8d75a7160f3109cda84eea673bc922
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Mon Mar 14 15:08:47 2016 +0100

    Pass organization explicitly to project label

diff --git a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
index 06feeab7e8..16e8a4b4bd 100644
--- a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
+++ b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
@@ -6,7 +6,6 @@ import jQuery from 'jquery';
 import ConfigStore from '../../stores/configStore';
 import ProjectLabel from '../../components/projectLabel';
 import DropdownLink from '../dropdownLink';
-import PropTypes from '../../proptypes';
 import MenuItem from '../menuItem';
 import {t} from '../../locale';
 
@@ -20,13 +19,6 @@ const ProjectSelector = React.createClass({
     location: React.PropTypes.object
   },
 
-  // this is necessary so that the project selector stays functional
-  // in non react pages.  Without this the organization state mixin
-  // will not be functional on old layout based pages.
-  childContextTypes: {
-    organization: PropTypes.Organization
-  },
-
   getDefaultProps() {
     return {
       projectId: null,
@@ -39,12 +31,6 @@ const ProjectSelector = React.createClass({
     };
   },
 
-  getChildContext() {
-    return {
-      organization: this.props.organization
-    };
-  },
-
   componentDidUpdate(prevProps, prevState) {
     // XXX(dcramer): fix odd dedraw issue as of Chrome 45.0.2454.15 dev (64-bit)
     let node = jQuery(ReactDOM.findDOMNode(this.refs.container));
@@ -130,7 +116,10 @@ const ProjectSelector = React.createClass({
   getProjectLabel(team, project, hasSingleTeam) {
     let label;
     if (!hasSingleTeam && project.name.indexOf(team.name) === -1) {
-      label = <span>{team.name} / <ProjectLabel project={project}/></span>;
+      label = (
+        <span>{team.name} / <ProjectLabel
+            project={project} organization={this.props.organization}/></span>
+      );
     } else {
       label = <span>{project.name}</span>;
     }
diff --git a/src/sentry/static/sentry/app/components/projectLabel.jsx b/src/sentry/static/sentry/app/components/projectLabel.jsx
index a81d4b12d6..0cbc128168 100644
--- a/src/sentry/static/sentry/app/components/projectLabel.jsx
+++ b/src/sentry/static/sentry/app/components/projectLabel.jsx
@@ -1,20 +1,19 @@
 import React from 'react';
 import PureRenderMixin from 'react-addons-pure-render-mixin';
-import OrganizationState from '../mixins/organizationState';
 
 const ProjectLabel = React.createClass({
   propTypes: {
-    project: React.PropTypes.object
+    project: React.PropTypes.object,
+    organization: React.PropTypes.object,
   },
 
   mixins: [
-    PureRenderMixin,
-    OrganizationState
+    PureRenderMixin
   ],
 
   render() {
     let project = this.props.project;
-    let features = this.getFeatures();
+    let features = new Set(this.props.organization.features);
     return (
       <span className="project-label">
         <span className="project-name">{project.name}</span>
diff --git a/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx b/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx
index 52b5bdde7c..fbd52458a8 100644
--- a/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx
+++ b/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx
@@ -109,7 +109,7 @@ const ExpandedTeamList = React.createClass({
         <td>
           <h5>
             <Link to={`/${org.slug}/${project.slug}/`}>
-              <ProjectLabel project={project}/>
+              <ProjectLabel project={project} organization={this.props.organization}/>
             </Link>
           </h5>
         </td>
