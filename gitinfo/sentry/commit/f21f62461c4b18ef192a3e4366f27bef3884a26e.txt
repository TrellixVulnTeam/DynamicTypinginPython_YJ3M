commit f21f62461c4b18ef192a3e4366f27bef3884a26e
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Oct 20 22:26:57 2015 -0400

    Don't allow previous members to bypass access requests

diff --git a/src/sentry/api/endpoints/organization_member_team_details.py b/src/sentry/api/endpoints/organization_member_team_details.py
index eb287681e7..6f15d9dad5 100644
--- a/src/sentry/api/endpoints/organization_member_team_details.py
+++ b/src/sentry/api/endpoints/organization_member_team_details.py
@@ -118,6 +118,14 @@ class OrganizationMemberTeamDetailsEndpoint(OrganizationEndpoint):
         else:
             if omt.is_active:
                 return Response(status=204)
+            elif not (request.access.has_scope('org:write') or organization.flags.allow_joinleave):
+                omt, created = OrganizationAccessRequest.objects.get_or_create(
+                    team=team,
+                    member=om,
+                )
+                if created:
+                    omt.send_request_email()
+                return Response(status=202)
             omt.is_active = True
             omt.save()
 
