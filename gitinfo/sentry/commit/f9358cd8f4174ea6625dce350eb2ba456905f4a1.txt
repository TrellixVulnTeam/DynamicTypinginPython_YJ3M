commit f9358cd8f4174ea6625dce350eb2ba456905f4a1
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Aug 30 17:45:58 2010 -0700

    Add in logged urls to details page

diff --git a/dblog/templates/dblog/group.html b/dblog/templates/dblog/group.html
index ab04ac2381..db5266c187 100644
--- a/dblog/templates/dblog/group.html
+++ b/dblog/templates/dblog/group.html
@@ -15,6 +15,17 @@
 				<pre class="traceback">{{ message.shortened_traceback }}</pre>
 			</li>
 		</ul>
+		
+		<h2>Logged URLs</h2>
+		
+		<ul>
+			{% for link in unique_urls %}
+				<li>{{ link }}</li>
+			{% endfor %}
+		</ul>
+		
+		<h2>Sample Error</h2>
+		
 		{{ interactive_traceback }}
 	</div>
 
diff --git a/dblog/templates/dblog/index.html b/dblog/templates/dblog/index.html
index f82e72fd76..19701faa3d 100644
--- a/dblog/templates/dblog/index.html
+++ b/dblog/templates/dblog/index.html
@@ -60,12 +60,11 @@
 		</script>
 		<style type="text/css"> 
 			html * { padding:0; margin:0; }
-			#header, #footer { padding:10px 20px; }
-			#body { padding: 10px 0; }
+			body * { padding:10px 20px; }
 			body * * { padding:0; }
 			body { font:small sans-serif; background:#f6f6f6; }
 			h1 { font-weight:normal; }
-			h2 { margin-bottom:.8em; }
+			h2 { margin-bottom:.8em; font-weight: normal; }
 			h2 span { font-size:80%; color:#666; font-weight:normal; }
 			h3 { margin:1em 0 .5em 0; }
 			h4 { margin:0 0 .5em 0; font-weight: normal; }
@@ -80,7 +79,6 @@
 			#header h2 { font-weight: normal; color: #666; margin-bottom: 0; }
 			#footer { background:#eee; clear: both; border-top:1px solid #ddd; }
 			#header table { border:none; background:transparent; }
-			
 			/* tracebacks */
 			table { border:1px solid #ccc; border-collapse: collapse; width:100%; background:white; }
 			tbody td, tbody th { vertical-align:top; padding:2px 3px; }
@@ -124,7 +122,9 @@
 			h2 span.commands { font-size:.7em;}
 			span.commands a:link {color:#5E5694;}
 			pre.exception_value { font-family: sans-serif; color: #666; font-size: 1.5em; margin: 10px 0 10px 0; }
-			.messages { list-style: none; margin: 1em 20px; }
+			
+			/* message list */
+			.messages { list-style: none; margin-left: 0; }
 			.messages .count { width: 25px; text-align: center; background: #000; -moz-border-radius: 4px; border-radius: 4px; padding: 0 8px; line-height: 19px; color: #fff; display: inline-block; margin-right: 5px; }
 			.messages h3 { height: 20px; line-height: 20px; display: inline-block; margin: 0; }
 			.messages .message {
diff --git a/dblog/views.py b/dblog/views.py
index e58e257fba..fc161ade6f 100644
--- a/dblog/views.py
+++ b/dblog/views.py
@@ -59,7 +59,9 @@ def group(request, group_id):
     else:
         message.priority = 'veryhigh'
 
-    obj = Message.objects.filter(checksum=message.checksum, logger=message.logger, view=message.view)[0]
+    message_list = Message.objects.filter(checksum=message.checksum, logger=message.logger, view=message.view)
+    
+    obj = message_list[0]
 
     module, args, frames = pickle.loads(base64.b64decode(obj.data['exc']).decode('zlib'))
     obj.class_name = str(obj.class_name)
@@ -85,4 +87,6 @@ def group(request, group_id):
     reporter = ImprovedExceptionReporter(fake_request, exc_type, exc_value, frames)
     interactive_traceback = mark_safe(reporter.get_traceback_html())
     
+    unique_urls = [m[0] for m in message_list.values_list('url', 'logger', 'view', 'checksum').distinct()[0:10]]
+    
     return render_to_response('dblog/group.html', locals())
\ No newline at end of file
