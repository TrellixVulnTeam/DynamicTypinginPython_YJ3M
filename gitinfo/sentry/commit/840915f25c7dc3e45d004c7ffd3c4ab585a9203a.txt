commit 840915f25c7dc3e45d004c7ffd3c4ab585a9203a
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Tue Feb 7 14:59:43 2017 -0800

    fix release lookups in event saving where we haven't migrated releases (#4881)

diff --git a/src/sentry/models/release.py b/src/sentry/models/release.py
index b41587af64..f8ee8c943a 100644
--- a/src/sentry/models/release.py
+++ b/src/sentry/models/release.py
@@ -114,10 +114,12 @@ class Release(Model):
                 version__in=[version, project_version],
                 projects=project
             ))
-            if len(releases) == 1:
-                release = releases[0]
-            elif len(releases) > 1:
-                release = [r for r in releases if r.version == project_version][0]
+            if releases:
+                # TODO(jess): clean this up once all releases have been migrated
+                try:
+                    release = [r for r in releases if r.version == project_version][0]
+                except IndexError:
+                    release = releases[0]
             else:
                 release = cls.objects.filter(
                     organization_id=project.organization_id,
