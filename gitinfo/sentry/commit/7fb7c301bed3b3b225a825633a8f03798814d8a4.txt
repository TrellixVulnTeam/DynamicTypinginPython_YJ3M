commit 7fb7c301bed3b3b225a825633a8f03798814d8a4
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Wed Mar 11 21:08:26 2020 -0700

    ref(onboarding): Update prereq -> requisites with proper types (#17596)

diff --git a/src/sentry/static/sentry/app/components/onboardingWizard/getOnboardingTasks.tsx b/src/sentry/static/sentry/app/components/onboardingWizard/getOnboardingTasks.tsx
index 2a7a638f08..4438bb1277 100644
--- a/src/sentry/static/sentry/app/components/onboardingWizard/getOnboardingTasks.tsx
+++ b/src/sentry/static/sentry/app/components/onboardingWizard/getOnboardingTasks.tsx
@@ -22,7 +22,7 @@ export default function getOnboardingTasks(
         'Follow our quick and easy steps to set up a project and start sending errors.'
       ),
       skippable: false,
-      prereq: [],
+      requisites: [],
       actionType: 'app',
       location: `/organizations/${organization.slug}/projects/new/`,
       display: true,
@@ -33,7 +33,7 @@ export default function getOnboardingTasks(
       description: t("Install Sentry's client"),
       detailedDescription: t('Choose your platform and send an event.'),
       skippable: false,
-      prereq: [1],
+      requisites: [OnboardingTaskKey.FIRST_PROJECT],
       actionType: 'app',
       location: `/settings/${organization.slug}/projects/:projectId/install/`,
       display: true,
@@ -47,7 +47,7 @@ export default function getOnboardingTasks(
         by unlocking mentions, assignment, and suggested issue owners.`
       ),
       skippable: true,
-      prereq: [],
+      requisites: [],
       actionType: 'action',
       action: () => openInviteMembersModal({source: 'onboarding_widget'}),
       display: true,
@@ -58,7 +58,7 @@ export default function getOnboardingTasks(
       description: t('Add Sentry to a second platform'),
       detailedDescription: t('Capture errors from both your front and back ends.'),
       skippable: true,
-      prereq: [1, 2],
+      requisites: [OnboardingTaskKey.FIRST_PROJECT, OnboardingTaskKey.FIRST_EVENT],
       actionType: 'app',
       location: `/organizations/${organization.slug}/projects/new/`,
       display: true,
@@ -72,7 +72,7 @@ export default function getOnboardingTasks(
         and get a broader sense about the quality of your application.`
       ),
       skippable: true,
-      prereq: [1, 2],
+      requisites: [OnboardingTaskKey.FIRST_PROJECT, OnboardingTaskKey.FIRST_EVENT],
       actionType: 'external',
       location: 'https://docs.sentry.io/enriching-error-data/context/#capturing-the-user',
       display: true,
@@ -86,7 +86,7 @@ export default function getOnboardingTasks(
         cause of an issue and unlock the ability to resolve issues via commit message.`
       ),
       skippable: true,
-      prereq: [1, 2],
+      requisites: [OnboardingTaskKey.FIRST_PROJECT, OnboardingTaskKey.FIRST_EVENT],
       actionType: 'app',
       location: `/settings/${organization.slug}/projects/:projectId/release-tracking/`,
       display: true,
@@ -100,7 +100,7 @@ export default function getOnboardingTasks(
         original untransformed form, which is particularly useful for debugging minified code.`
       ),
       skippable: true,
-      prereq: [1, 2],
+      requisites: [OnboardingTaskKey.FIRST_PROJECT, OnboardingTaskKey.FIRST_EVENT],
       actionType: 'external',
       location: 'https://docs.sentry.io/platforms/javascript/sourcemaps/',
       display: hasPlatformWithSourceMaps(organization),
@@ -110,7 +110,11 @@ export default function getOnboardingTasks(
       title: 'User crash reports',
       description: t('Collect user feedback when your application crashes'),
       skippable: true,
-      prereq: [1, 2, 5],
+      requisites: [
+        OnboardingTaskKey.FIRST_PROJECT,
+        OnboardingTaskKey.FIRST_EVENT,
+        OnboardingTaskKey.USER_CONTEXT,
+      ],
       actionType: 'app',
       location: `/settings/${organization.slug}/projects/:projectId/user-reports/`,
       display: false,
@@ -120,7 +124,7 @@ export default function getOnboardingTasks(
       title: t('Set up issue tracking'),
       description: t('Link to Sentry issues within your issue tracker'),
       skippable: true,
-      prereq: [1, 2],
+      requisites: [OnboardingTaskKey.FIRST_PROJECT, OnboardingTaskKey.FIRST_EVENT],
       actionType: 'app',
       location: `/settings/${organization.slug}/projects/:projectId/plugins/`,
       display: false,
@@ -131,7 +135,7 @@ export default function getOnboardingTasks(
       description: t('Configure alerting rules to control error emails'),
       detailedDescription: t('Receive Sentry alerts in Slack, PagerDuty, and more.'),
       skippable: true,
-      prereq: [1],
+      requisites: [OnboardingTaskKey.FIRST_PROJECT],
       actionType: 'app',
       location: `/settings/${organization.slug}/projects/:projectId/alerts/`,
       display: false,
diff --git a/src/sentry/static/sentry/app/types/index.tsx b/src/sentry/static/sentry/app/types/index.tsx
index 73de637ed2..fd7d897826 100644
--- a/src/sentry/static/sentry/app/types/index.tsx
+++ b/src/sentry/static/sentry/app/types/index.tsx
@@ -914,8 +914,18 @@ export type OnboardingTaskDescriptor = {
   title: string;
   description: string;
   detailedDescription?: string;
+  /**
+   * Can this task be skipped?
+   */
   skippable: boolean;
-  prereq: number[];
+  /**
+   * A list of require task keys that must have been completed before these
+   * tasks may be completed.
+   */
+  requisites: OnboardingTaskKey[];
+  /**
+   * Should the onboarding task currently be displayed
+   */
   display: boolean;
 } & (
   | {
diff --git a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
index 7bbee91e73..abf6b8dc32 100644
--- a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
@@ -1854,7 +1854,7 @@ exports[`Sidebar can have onboarding feature 1`] = `
                             "detailedDescription": "Follow our quick and easy steps to set up a project and start sending errors.",
                             "display": true,
                             "location": "/organizations/org-slug/projects/new/",
-                            "prereq": Array [],
+                            "requisites": Array [],
                             "skippable": false,
                             "task": "create_project",
                             "title": "Create a project",
@@ -1898,7 +1898,7 @@ exports[`Sidebar can have onboarding feature 1`] = `
                               "detailedDescription": "Follow our quick and easy steps to set up a project and start sending errors.",
                               "display": true,
                               "location": "/organizations/org-slug/projects/new/",
-                              "prereq": Array [],
+                              "requisites": Array [],
                               "skippable": false,
                               "task": "create_project",
                               "title": "Create a project",
@@ -2276,7 +2276,7 @@ exports[`Sidebar can have onboarding feature 1`] = `
                                 "detailedDescription": "Follow our quick and easy steps to set up a project and start sending errors.",
                                 "display": true,
                                 "location": "/organizations/org-slug/projects/new/",
-                                "prereq": Array [],
+                                "requisites": Array [],
                                 "skippable": false,
                                 "task": "create_project",
                                 "title": "Create a project",
@@ -2512,8 +2512,8 @@ exports[`Sidebar can have onboarding feature 1`] = `
                             "detailedDescription": "Choose your platform and send an event.",
                             "display": true,
                             "location": "/settings/org-slug/projects/:projectId/install/",
-                            "prereq": Array [
-                              1,
+                            "requisites": Array [
+                              "create_project",
                             ],
                             "skippable": false,
                             "task": "send_first_event",
@@ -2558,8 +2558,8 @@ exports[`Sidebar can have onboarding feature 1`] = `
                               "detailedDescription": "Choose your platform and send an event.",
                               "display": true,
                               "location": "/settings/org-slug/projects/:projectId/install/",
-                              "prereq": Array [
-                                1,
+                              "requisites": Array [
+                                "create_project",
                               ],
                               "skippable": false,
                               "task": "send_first_event",
@@ -2938,8 +2938,8 @@ exports[`Sidebar can have onboarding feature 1`] = `
                                 "detailedDescription": "Choose your platform and send an event.",
                                 "display": true,
                                 "location": "/settings/org-slug/projects/:projectId/install/",
-                                "prereq": Array [
-                                  1,
+                                "requisites": Array [
+                                  "create_project",
                                 ],
                                 "skippable": false,
                                 "task": "send_first_event",
@@ -3177,7 +3177,7 @@ exports[`Sidebar can have onboarding feature 1`] = `
                             "detailedDescription": "Let Sentry help your team triage and assign issues. Improve your workflow
         by unlocking mentions, assignment, and suggested issue owners.",
                             "display": true,
-                            "prereq": Array [],
+                            "requisites": Array [],
                             "skippable": true,
                             "task": "invite_member",
                             "title": "Invite team members",
@@ -3222,7 +3222,7 @@ exports[`Sidebar can have onboarding feature 1`] = `
                               "detailedDescription": "Let Sentry help your team triage and assign issues. Improve your workflow
         by unlocking mentions, assignment, and suggested issue owners.",
                               "display": true,
-                              "prereq": Array [],
+                              "requisites": Array [],
                               "skippable": true,
                               "task": "invite_member",
                               "title": "Invite team members",
@@ -3601,7 +3601,7 @@ exports[`Sidebar can have onboarding feature 1`] = `
                                 "detailedDescription": "Let Sentry help your team triage and assign issues. Improve your workflow
         by unlocking mentions, assignment, and suggested issue owners.",
                                 "display": true,
-                                "prereq": Array [],
+                                "requisites": Array [],
                                 "skippable": true,
                                 "task": "invite_member",
                                 "title": "Invite team members",
@@ -3904,9 +3904,9 @@ exports[`Sidebar can have onboarding feature 1`] = `
                             "detailedDescription": "Capture errors from both your front and back ends.",
                             "display": true,
                             "location": "/organizations/org-slug/projects/new/",
-                            "prereq": Array [
-                              1,
-                              2,
+                            "requisites": Array [
+                              "create_project",
+                              "send_first_event",
                             ],
                             "skippable": true,
                             "task": "setup_second_platform",
@@ -3951,9 +3951,9 @@ exports[`Sidebar can have onboarding feature 1`] = `
                               "detailedDescription": "Capture errors from both your front and back ends.",
                               "display": true,
                               "location": "/organizations/org-slug/projects/new/",
-                              "prereq": Array [
-                                1,
-                                2,
+                              "requisites": Array [
+                                "create_project",
+                                "send_first_event",
                               ],
                               "skippable": true,
                               "task": "setup_second_platform",
@@ -4332,9 +4332,9 @@ exports[`Sidebar can have onboarding feature 1`] = `
                                 "detailedDescription": "Capture errors from both your front and back ends.",
                                 "display": true,
                                 "location": "/organizations/org-slug/projects/new/",
-                                "prereq": Array [
-                                  1,
-                                  2,
+                                "requisites": Array [
+                                  "create_project",
+                                  "send_first_event",
                                 ],
                                 "skippable": true,
                                 "task": "setup_second_platform",
@@ -4638,9 +4638,9 @@ exports[`Sidebar can have onboarding feature 1`] = `
         and get a broader sense about the quality of your application.",
                             "display": true,
                             "location": "https://docs.sentry.io/enriching-error-data/context/#capturing-the-user",
-                            "prereq": Array [
-                              1,
-                              2,
+                            "requisites": Array [
+                              "create_project",
+                              "send_first_event",
                             ],
                             "skippable": true,
                             "task": "setup_user_context",
@@ -4686,9 +4686,9 @@ exports[`Sidebar can have onboarding feature 1`] = `
         and get a broader sense about the quality of your application.",
                               "display": true,
                               "location": "https://docs.sentry.io/enriching-error-data/context/#capturing-the-user",
-                              "prereq": Array [
-                                1,
-                                2,
+                              "requisites": Array [
+                                "create_project",
+                                "send_first_event",
                               ],
                               "skippable": true,
                               "task": "setup_user_context",
@@ -5068,9 +5068,9 @@ exports[`Sidebar can have onboarding feature 1`] = `
         and get a broader sense about the quality of your application.",
                                 "display": true,
                                 "location": "https://docs.sentry.io/enriching-error-data/context/#capturing-the-user",
-                                "prereq": Array [
-                                  1,
-                                  2,
+                                "requisites": Array [
+                                  "create_project",
+                                  "send_first_event",
                                 ],
                                 "skippable": true,
                                 "task": "setup_user_context",
@@ -5386,9 +5386,9 @@ exports[`Sidebar can have onboarding feature 1`] = `
         cause of an issue and unlock the ability to resolve issues via commit message.",
                             "display": true,
                             "location": "/settings/org-slug/projects/:projectId/release-tracking/",
-                            "prereq": Array [
-                              1,
-                              2,
+                            "requisites": Array [
+                              "create_project",
+                              "send_first_event",
                             ],
                             "skippable": true,
                             "task": "setup_release_tracking",
@@ -5434,9 +5434,9 @@ exports[`Sidebar can have onboarding feature 1`] = `
         cause of an issue and unlock the ability to resolve issues via commit message.",
                               "display": true,
                               "location": "/settings/org-slug/projects/:projectId/release-tracking/",
-                              "prereq": Array [
-                                1,
-                                2,
+                              "requisites": Array [
+                                "create_project",
+                                "send_first_event",
                               ],
                               "skippable": true,
                               "task": "setup_release_tracking",
@@ -5816,9 +5816,9 @@ exports[`Sidebar can have onboarding feature 1`] = `
         cause of an issue and unlock the ability to resolve issues via commit message.",
                                 "display": true,
                                 "location": "/settings/org-slug/projects/:projectId/release-tracking/",
-                                "prereq": Array [
-                                  1,
-                                  2,
+                                "requisites": Array [
+                                  "create_project",
+                                  "send_first_event",
                                 ],
                                 "skippable": true,
                                 "task": "setup_release_tracking",
