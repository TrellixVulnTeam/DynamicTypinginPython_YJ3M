commit 8b943f75350b402a587152e63175f293991721cf
Author: Jess MacQueen <jess@getsentry.com>
Date:   Fri May 6 17:35:15 2016 -0700

    use html version of avatar in main settings page

diff --git a/src/sentry/models/useravatar.py b/src/sentry/models/useravatar.py
index df5ac719c5..564b1f4203 100644
--- a/src/sentry/models/useravatar.py
+++ b/src/sentry/models/useravatar.py
@@ -24,7 +24,7 @@ class UserAvatar(Model):
         ('gravatar', 'Gravatar'),
     )
 
-    ALLOWED_SIZES = (20, 48, 52, 64, 80, 96)
+    ALLOWED_SIZES = (20, 48, 52, 64, 80, 96, 120)
 
     user = FlexibleForeignKey('sentry.User', unique=True, related_name='avatar')
     file = FlexibleForeignKey('sentry.File', unique=True, null=True, on_delete=models.SET_NULL)
diff --git a/src/sentry/static/sentry/app/index.js b/src/sentry/static/sentry/app/index.js
index 226c0200ca..2719e3be4f 100644
--- a/src/sentry/static/sentry/app/index.js
+++ b/src/sentry/static/sentry/app/index.js
@@ -45,7 +45,6 @@ export default {
     createHistory: require('history/lib/createBrowserHistory'),
     Alerts: require('./components/alerts'),
     AlertActions: require('./actions/alertActions'),
-    Avatar: require('./components/avatar'),
     AvatarSettings: require('./components/avatarSettings'),
     mixins: {
       ApiMixin: require('./mixins/apiMixin'),
diff --git a/src/sentry/templates/sentry/account/settings.html b/src/sentry/templates/sentry/account/settings.html
index 76b8dfdb6b..5eea9039cd 100644
--- a/src/sentry/templates/sentry/account/settings.html
+++ b/src/sentry/templates/sentry/account/settings.html
@@ -16,7 +16,16 @@
         <div class="account-settings-overview">
           <div class="avatar-preview">
             <label class="control-label">Avatar</label>
-            <div id="avatar"></div>
+            <div>
+                <span class="avatar">
+                {% letter_avatar_svg request.user.get_display_name request.user.get_label size 120 %}
+                {% if request.user.get_avatar_type == 'upload' %}
+                    <img src="{% profile_photo_url request.user.id size 120 %}">
+                {% elif request.user.get_avatar_type == 'gravatar' %}
+                    <img src="{% gravatar_url user.email size 120 default 'blank' %}">
+                {% endif %}
+                </span>
+            </div>
           </div>
           <div class="account-settings-body">
             {% with form.name as field %}
@@ -46,13 +55,4 @@
         </fieldset>
         {% endif %}
     </form>
-
-    <script>
-      $(function() {
-        ReactDOM.render(React.createFactory(Sentry.Avatar)({
-          user: "{{ avatar_user }}",
-          size: 128
-        }), document.getElementById('avatar'))
-      });
-    </script>
 {% endblock %}
diff --git a/src/sentry/web/frontend/accounts.py b/src/sentry/web/frontend/accounts.py
index 5a00ed1b42..8409a1df3a 100644
--- a/src/sentry/web/frontend/accounts.py
+++ b/src/sentry/web/frontend/accounts.py
@@ -134,7 +134,6 @@ def settings(request):
         'form': form,
         'page': 'settings',
         'AUTH_PROVIDERS': get_auth_providers(),
-        'avatar_user' : serialize(request.user, request.user),
     })
     return render_to_response('sentry/account/settings.html', context, request)
 
diff --git a/src/sentry/web/frontend/user_avatar.py b/src/sentry/web/frontend/user_avatar.py
index 204c229ef2..0d3a76ad84 100644
--- a/src/sentry/web/frontend/user_avatar.py
+++ b/src/sentry/web/frontend/user_avatar.py
@@ -7,7 +7,6 @@ from sentry.models import UserAvatar
 
 
 class UserAvatarPhotoView(View):
-    ALLOWED_SIZES = (20, 48, 52, 64, 80, 96)
 
     def get_file_name(self, user):
         return '%s.png' % user.id
