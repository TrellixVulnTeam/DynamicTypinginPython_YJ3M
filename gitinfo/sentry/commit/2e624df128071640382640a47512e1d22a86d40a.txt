commit 2e624df128071640382640a47512e1d22a86d40a
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Fri Mar 23 13:29:29 2018 -0700

    fix(ui): Assignee selector (#7744)
    
    Includes the following:
    - Adds match not found text to assignee selector
    - Remove redundant css
    - Fix vertical center alignment of avatars / icons
    - Make Dropdown list items the same height
    - add <hr> between teams and invite member button
    - get rid of big space between dropdown and toggle on group details view

diff --git a/src/sentry/static/sentry/app/components/assigneeSelector.jsx b/src/sentry/static/sentry/app/components/assigneeSelector.jsx
index ebd41386b0..d02d56a3ed 100644
--- a/src/sentry/static/sentry/app/components/assigneeSelector.jsx
+++ b/src/sentry/static/sentry/app/components/assigneeSelector.jsx
@@ -217,23 +217,17 @@ const AssigneeSelector = createReactClass({
     let members = AssigneeSelector.filterAssignees(memberList, filter);
     members = AssigneeSelector.putSessionUserFirst(members);
 
-    return members && members.length ? (
-      members.map(item => {
-        return (
-          <MenuItem
-            key={buildUserId(item.id)}
-            onSelect={this.assignToUser.bind(this, item)}
-          >
-            <Avatar user={item} className="avatar" size={48} />
-            {this.highlight(item.name || item.email, filter)}
-          </MenuItem>
-        );
-      })
-    ) : (
-      <li className="not-found">
-        <span>{t('No matching users found.')}</span>
-      </li>
-    );
+    return members.map(item => {
+      return (
+        <MenuItem
+          key={buildUserId(item.id)}
+          onSelect={this.assignToUser.bind(this, item)}
+        >
+          <Avatar user={item} className="avatar" size={48} />
+          {this.highlight(item.name || item.email, filter)}
+        </MenuItem>
+      );
+    });
   },
 
   renderTeamNodes() {
@@ -251,9 +245,6 @@ const AssigneeSelector = createReactClass({
           </MenuItem>
         );
       });
-      if (teamNodes.length > 0) {
-        teamNodes = [...teamNodes, <hr key="divider" style={{margin: 0}} />];
-      }
     }
     return teamNodes;
   },
@@ -282,6 +273,11 @@ const AssigneeSelector = createReactClass({
       unassigned: !assignedTo,
     });
 
+    let teams = this.renderTeamNodes();
+    let members = this.renderMemberNodes();
+    let hasTeamsAndMembers = teams.length && members.length;
+    let hasTeamsOrMembers = teams.length || members.length;
+
     return (
       <div>
         <div className={className}>
@@ -334,21 +330,33 @@ const AssigneeSelector = createReactClass({
                 )}
 
                 <li>
-                  <ul>{[...this.renderTeamNodes(), ...this.renderMemberNodes()]}</ul>
+                  <ul>
+                    {teams}
+                    {hasTeamsAndMembers ? <hr key="divider" style={{margin: 0}} /> : null}
+                    {members}
+                    {!hasTeamsOrMembers && (
+                      <li className="not-found">
+                        <span>{t('No matches found.')}</span>
+                      </li>
+                    )}
+                  </ul>
                 </li>
               </React.Fragment>
             )}
 
             {ConfigStore.get('invitesEnabled') &&
               access.has('org:write') && (
-                <MenuItem
-                  className="invite-member"
-                  disabled={!loading}
-                  to={`/settings/${this.context.organization.slug}/members/new/`}
-                  query={{referrer: 'assignee_selector'}}
-                >
-                  <span className="icon-plus" /> {t('Invite Member')}
-                </MenuItem>
+                <React.Fragment>
+                  <hr key="divider" style={{margin: 0}} />
+                  <MenuItem
+                    className="invite-member"
+                    disabled={!loading}
+                    to={`/settings/${this.context.organization.slug}/members/new/`}
+                    query={{referrer: 'assignee_selector'}}
+                  >
+                    <span className="icon-plus" /> {t('Invite Member')}
+                  </MenuItem>
+                </React.Fragment>
               )}
           </DropdownLink>
         </div>
diff --git a/src/sentry/static/sentry/less/group-detail.less b/src/sentry/static/sentry/less/group-detail.less
index 622cf28293..da788affcc 100644
--- a/src/sentry/static/sentry/less/group-detail.less
+++ b/src/sentry/static/sentry/less/group-detail.less
@@ -165,20 +165,6 @@
     margin-bottom: 0;
   }
 
-  // loading indicator for the group needs extra fixing up.
-  .assignee-selector {
-    display: inline-block;
-
-    .loading {
-      margin: 0;
-
-      .loading-indicator {
-        left: auto !important;
-        right: 0 !important;
-      }
-    }
-  }
-
   &:before {
     position: absolute;
     display: block;
@@ -2750,18 +2736,6 @@ ul.crumbs {
       font-size: 13px;
     }
 
-    .assignee-selector {
-      .dropdown-menu {
-        left: 0 !important;
-        right: auto !important;
-
-        &:before,
-        &:after {
-          display: none;
-        }
-      }
-    }
-
     .short-id-box {
       text-align: left;
     }
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index ecba2e06ca..d9d9643eaa 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -1753,66 +1753,34 @@ ul.faces {
 */
 
 .assignee-selector {
-  height: 24px;
   display: flex;
   justify-content: flex-end;
 
-  .loading {
-    display: inline-block;
-  }
-
-  .btn-group {
-    height: 24px;
-
-    &.open {
-      .dropdown-toggle {
-        color: @gray-dark;
-      }
-    }
+  .avatar {
+    .square(24px);
   }
 
   .icon-arrow-down {
-    right: -2px;
+    position: static;
     top: 0;
   }
 
-  .avatar {
-    display: inline-block;
-    width: 24px;
-    height: 24px;
-    position: relative;
-    left: -2px;
-    top: -1px;
-  }
-
   .dropdown-toggle {
     color: inherit;
-
-    .avatar + span,
-    .icon-user + span {
-      display: none;
-    }
   }
 
   .dropdown-menu {
-    left: auto;
     right: -14px !important;
     min-width: 180px;
-    padding-top: 0;
-    padding-bottom: 3px;
     max-width: 250px;
-    top: 30px;
-    z-index: @zindex-dropdown;
+    padding: 0;
     font-size: 13px;
 
     .form-control {
-      border: 0;
       border: 0;
       border-bottom: 1px solid #e9ebec;
-      background: none;
-      box-shadow: none;
       padding-bottom: 8px;
-      margin-bottom: 6px;
+      box-shadow: none;
       border-radius: 0;
       font-size: 13px;
 
@@ -1830,7 +1798,6 @@ ul.faces {
     li {
       &.not-found span {
         padding: 5px 8px;
-        padding-left: 10px;
         display: block;
         font-style: italic;
         text-align: center;
@@ -1842,20 +1809,15 @@ ul.faces {
       }
 
       a {
-        padding: 5px 8px;
-        display: block;
-        padding-left: 33px;
-        position: relative;
-        max-width: 100%;
+        display: flex;
+        align-items: center;
+        height: 34px;
         overflow: hidden;
         text-overflow: ellipsis;
-        text-align: left;
+        white-space: nowrap;
 
         span.avatar {
           margin-right: 5px;
-          position: absolute;
-          left: 8px;
-          top: 4px;
           .square(20px);
         }
       }
@@ -1864,9 +1826,8 @@ ul.faces {
 
   &.unassigned {
     .icon-user {
+      display: block;
       margin-right: 3px;
-      position: relative;
-      top: 3px;
       font-size: 20px;
     }
   }
@@ -1874,25 +1835,18 @@ ul.faces {
   .invite-member a {
     .icon-plus {
       font-size: 16px;
-      position: absolute;
-      left: 10px;
-      top: 4px;
       opacity: 0.3;
+      margin-right: 5px;
     }
   }
 
   .clear-assignee a {
     background: rgba(52, 60, 69, 0.03);
     border-bottom: 1px solid rgba(52, 60, 69, 0.06);
-    margin-top: -6px;
-    margin-bottom: 2px;
-    padding: 4px 0 2px 33px !important;
 
     .icon-circle-cross {
       font-size: 16px;
-      position: absolute;
-      left: 10px;
-      top: 4px;
+      margin-right: 5px;
       opacity: 0.3;
     }
   }
