commit b01068851061f618f080e010f4aa82fa2b0eb558
Author: Matej Minar <matej.minar@sentry.io>
Date:   Wed Jan 8 09:59:00 2020 +0100

    ref(ts): Convert <AlertLink> to typescript (#16207)
    
    * ref(ts): Convert <AlertLink> to typescript
    
    * fix(ts): <AlertLink> optional onClick
    
    * fix(ts): <AlertLink> typed defaultProps
    
    * chore(AlertLink): Adds small prop to storybook
    
    * ref(AlertLink): typing

diff --git a/docs-ui/components/alertLink.stories.js b/docs-ui/components/alertLink.stories.js
index c556dd927b..3a973f2410 100644
--- a/docs-ui/components/alertLink.stories.js
+++ b/docs-ui/components/alertLink.stories.js
@@ -64,4 +64,44 @@ storiesOf('UI|Alerts/AlertLink', module)
         I am saying nothing, ok?
       </AlertLink>,
     ])
+  )
+  .add(
+    'small',
+    withInfo('You can optionally pass an icon src')(() => [
+      <AlertLink to="/settings/account/notifications" size="small" key="1">
+        Check out the notifications settings panel.
+      </AlertLink>,
+      <AlertLink
+        to="/settings/account/notifications"
+        priority="error"
+        size="small"
+        key="2"
+      >
+        Do not forget to read the docs ya dum dum!
+      </AlertLink>,
+      <AlertLink
+        to="/settings/account/notifications"
+        priority="info"
+        size="small"
+        key="3"
+      >
+        Install this thing or else!
+      </AlertLink>,
+      <AlertLink
+        to="/settings/account/notifications"
+        priority="success"
+        size="small"
+        key="4"
+      >
+        Gj you did it. Now go here.
+      </AlertLink>,
+      <AlertLink
+        to="/settings/account/notifications"
+        priority="muted"
+        size="small"
+        key="5"
+      >
+        I am saying nothing, ok?
+      </AlertLink>,
+    ])
   );
diff --git a/src/sentry/static/sentry/app/components/alertLink.jsx b/src/sentry/static/sentry/app/components/alertLink.tsx
similarity index 56%
rename from src/sentry/static/sentry/app/components/alertLink.jsx
rename to src/sentry/static/sentry/app/components/alertLink.tsx
index 01c235d8cb..cb2c7485c7 100644
--- a/src/sentry/static/sentry/app/components/alertLink.jsx
+++ b/src/sentry/static/sentry/app/components/alertLink.tsx
@@ -1,29 +1,41 @@
 import styled from 'react-emotion';
-import PropTypes from 'prop-types';
 import React from 'react';
+import {LocationDescriptor} from 'history';
 
 import Link from 'app/components/links/link';
 import InlineSvg from 'app/components/inlineSvg';
 import space from 'app/styles/space';
 
-export default class AlertLink extends React.Component {
-  static propTypes = {
-    to: PropTypes.string,
-    href: PropTypes.string,
-    icon: PropTypes.string,
-    priority: PropTypes.oneOf(['info', 'warning', 'success', 'error', 'muted']),
-    size: PropTypes.oneOf(['small', 'normal']),
-  };
+type Size = 'small' | 'normal';
+type Priority = 'info' | 'warning' | 'success' | 'error' | 'muted';
+
+type PropsWithHref = {href: string};
+type PropsWithTo = {to: LocationDescriptor};
+type OtherProps = {
+  icon?: string;
+  size: Size;
+  priority: Priority;
+  onClick?: (e: React.MouseEvent) => void;
+};
 
-  static defaultProps = {
+type Props = (PropsWithHref | PropsWithTo) & OtherProps;
+
+export default class AlertLink extends React.Component<Props> {
+  static defaultProps: Partial<Props> = {
     priority: 'warning',
+    size: 'normal',
   };
 
   render() {
-    const {icon, children, size} = this.props;
-
+    const {size, priority, icon, children, onClick} = this.props;
     return (
-      <StyledLink {...this.props}>
+      <StyledLink
+        to={(this.props as PropsWithTo).to}
+        href={(this.props as PropsWithHref).href}
+        onClick={onClick}
+        size={size}
+        priority={priority}
+      >
         {icon && <StyledInlineSvg src={icon} size="1.5em" spacingSize={size} />}
         <AlertLinkText>{children}</AlertLinkText>
         <InlineSvg src="icon-chevron-right" size="1em" />
@@ -32,7 +44,7 @@ export default class AlertLink extends React.Component {
   }
 }
 
-const StyledLink = styled(Link)`
+const StyledLink = styled(Link)<{priority: Priority; size: Size}>`
   display: flex;
   align-items: center;
   background-color: ${p => p.theme.alert[p.priority].backgroundLight};
@@ -57,6 +69,6 @@ const AlertLinkText = styled('div')`
   flex-grow: 1;
 `;
 
-const StyledInlineSvg = styled(InlineSvg)`
+const StyledInlineSvg = styled(InlineSvg)<{spacingSize: Size}>`
   margin-right: ${p => (p.spacingSize === 'small' ? space(1) : space(1.5))};
 `;
diff --git a/tests/js/spec/components/__snapshots__/alertLink.spec.jsx.snap b/tests/js/spec/components/__snapshots__/alertLink.spec.jsx.snap
index 72ccdc870d..6c5538dbf4 100644
--- a/tests/js/spec/components/__snapshots__/alertLink.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/alertLink.spec.jsx.snap
@@ -3,6 +3,7 @@
 exports[`AlertLink renders 1`] = `
 <StyledLink
   priority="warning"
+  size="normal"
   to="/settings/accounts/notifications"
 >
   <AlertLinkText>
@@ -17,12 +18,13 @@ exports[`AlertLink renders 1`] = `
 
 exports[`AlertLink renders with icon 1`] = `
 <StyledLink
-  icon="icon-mail"
   priority="warning"
+  size="normal"
   to="/settings/accounts/notifications"
 >
   <StyledInlineSvg
     size="1.5em"
+    spacingSize="normal"
     src="icon-mail"
   />
   <AlertLinkText>
diff --git a/tests/js/spec/views/__snapshots__/accountEmails.spec.jsx.snap b/tests/js/spec/views/__snapshots__/accountEmails.spec.jsx.snap
index bd4b561e54..ede52f41e9 100644
--- a/tests/js/spec/views/__snapshots__/accountEmails.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/accountEmails.spec.jsx.snap
@@ -82,6 +82,7 @@ exports[`AccountEmails renders with emails 1`] = `
     <AlertLink
       icon="icon-stack"
       priority="warning"
+      size="normal"
       to="/settings/account/notifications"
     >
       Want to change how many emails you get? Use the notifications panel.
diff --git a/tests/js/spec/views/settings/__snapshots__/organizationRepositories.spec.jsx.snap b/tests/js/spec/views/settings/__snapshots__/organizationRepositories.spec.jsx.snap
index 5d92cb2038..dfaec86d87 100644
--- a/tests/js/spec/views/settings/__snapshots__/organizationRepositories.spec.jsx.snap
+++ b/tests/js/spec/views/settings/__snapshots__/organizationRepositories.spec.jsx.snap
@@ -8,6 +8,7 @@ exports[`OrganizationRepositories renders with a repository 1`] = `
   />
   <AlertLink
     priority="warning"
+    size="normal"
     to="/settings/org-slug/integrations/"
   >
     Want to add a repository to start tracking commits? Install or configure your version control integration here.
@@ -68,6 +69,7 @@ exports[`OrganizationRepositories renders with github provider 1`] = `
   />
   <AlertLink
     priority="warning"
+    size="normal"
     to="/settings/org-slug/integrations/"
   >
     Want to add a repository to start tracking commits? Install or configure your version control integration here.
@@ -144,6 +146,7 @@ exports[`OrganizationRepositories renders without providers 1`] = `
   />
   <AlertLink
     priority="warning"
+    size="normal"
     to="/settings/org-slug/integrations/"
   >
     Want to add a repository to start tracking commits? Install or configure your version control integration here.
diff --git a/tests/js/spec/views/settings/organizationDeveloperSettings/__snapshots__/index.spec.jsx.snap b/tests/js/spec/views/settings/organizationDeveloperSettings/__snapshots__/index.spec.jsx.snap
index e7cd479351..ecfc8589c6 100644
--- a/tests/js/spec/views/settings/organizationDeveloperSettings/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/views/settings/organizationDeveloperSettings/__snapshots__/index.spec.jsx.snap
@@ -117,24 +117,28 @@ exports[`Organization Developer Settings when no Apps exist displays empty state
           <AlertLink
             href="https://docs.sentry.io/workflow/integrations/integration-platform/"
             priority="warning"
+            size="normal"
           >
             <StyledLink
               href="https://docs.sentry.io/workflow/integrations/integration-platform/"
               priority="warning"
+              size="normal"
             >
               <Link
-                className="css-1925ci1-StyledLink e1fthm6j0"
+                className="css-1925ci1-StyledLink e1ylhppg0"
                 href="https://docs.sentry.io/workflow/integrations/integration-platform/"
                 priority="warning"
+                size="normal"
               >
                 <a
-                  className="css-1925ci1-StyledLink e1fthm6j0"
+                  className="css-1925ci1-StyledLink e1ylhppg0"
                   href="https://docs.sentry.io/workflow/integrations/integration-platform/"
                   priority="warning"
+                  size="normal"
                 >
                   <AlertLinkText>
                     <div
-                      className="css-19z7wog-AlertLinkText e1fthm6j1"
+                      className="css-19z7wog-AlertLinkText e1ylhppg1"
                     >
                       Have questions about the Integration Platform? Learn more about it in our docs.
                     </div>
