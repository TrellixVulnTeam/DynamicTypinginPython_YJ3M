commit 062d3b72860e08be4536a7bb1dc54b7d79c82f23
Author: Mark Story <mark@sentry.io>
Date:   Wed Jun 12 18:28:20 2019 -0400

    feat(ui) Add a placeholder component (#13654)
    
    We have a couple places right now that use placeholders (incidents,
    events v2). Refactor the placeholders used in both these places into
    a shared component that covers our current use cases. I've opted to not
    include a spinner as we don't currently have a situation where we need
    one.
    
    Refs SEN-716

diff --git a/docs-ui/components/loadingError.stories.js b/docs-ui/components/loadingError.stories.js
index 61fdc02a51..d4c1eae607 100644
--- a/docs-ui/components/loadingError.stories.js
+++ b/docs-ui/components/loadingError.stories.js
@@ -5,7 +5,7 @@ import {withInfo} from '@storybook/addon-info';
 
 import LoadingError from 'app/components/loadingError';
 
-storiesOf('UI|LoadingError', module)
+storiesOf('UI|Loaders/LoadingError', module)
   .add(
     'default',
     withInfo('Loading error with default message')(() => (
diff --git a/docs-ui/components/loadingIndicator.stories.js b/docs-ui/components/loadingIndicator.stories.js
index 0ff78859df..0fcf9c7874 100644
--- a/docs-ui/components/loadingIndicator.stories.js
+++ b/docs-ui/components/loadingIndicator.stories.js
@@ -4,7 +4,7 @@ import {withInfo} from '@storybook/addon-info';
 
 import LoadingIndicator from 'app/components/loadingIndicator';
 
-storiesOf('UI|LoadingIndicator', module)
+storiesOf('UI|Loaders/LoadingIndicator', module)
   .add(
     'all',
     withInfo('Loading indicators. Triangle has negative margins.')(() => (
diff --git a/docs-ui/components/placeholder.stories.js b/docs-ui/components/placeholder.stories.js
new file mode 100644
index 0000000000..375267f99a
--- /dev/null
+++ b/docs-ui/components/placeholder.stories.js
@@ -0,0 +1,30 @@
+import React from 'react';
+import {storiesOf} from '@storybook/react';
+import {withInfo} from '@storybook/addon-info';
+import {text, number} from '@storybook/addon-knobs';
+
+import Placeholder from 'app/components/placeholder';
+
+storiesOf('UI|Loaders/Placeholder', module).add(
+  'default',
+  withInfo(
+    'When you want a rough sized placeholder for content that is loading asynchronously'
+  )(() => (
+    <div>
+      <h4>Resizable square</h4>
+      <Placeholder width={text('width', '200px')} height={text('height', '200px')} />
+      <p>Content below the placeholder</p>
+
+      <h4>Square with bottom gutter</h4>
+      <Placeholder
+        height={text('height', '200px')}
+        bottomGutter={number('bottomGutter', 2)}
+      />
+      <p>Content below the placeholder</p>
+
+      <h4>Round placeholder</h4>
+      <Placeholder width="48px" height="48px" shape="circle" />
+      <p>Content below the placeholder</p>
+    </div>
+  ))
+);
diff --git a/src/sentry/static/sentry/app/components/activity/item/avatar.jsx b/src/sentry/static/sentry/app/components/activity/item/avatar.jsx
index 9e5eed119a..ae98834f00 100644
--- a/src/sentry/static/sentry/app/components/activity/item/avatar.jsx
+++ b/src/sentry/static/sentry/app/components/activity/item/avatar.jsx
@@ -4,6 +4,7 @@ import styled from 'react-emotion';
 
 import Avatar from 'app/components/avatar';
 import InlineSvg from 'app/components/inlineSvg';
+import Placeholder from 'app/components/placeholder';
 import SentryTypes from 'app/sentryTypes';
 
 class ActivityAvatar extends React.Component {
@@ -19,7 +20,6 @@ class ActivityAvatar extends React.Component {
 
   render() {
     const {className, type, user, size} = this.props;
-
     if (user) {
       return <Avatar user={user} size={size} className={className} />;
     }
@@ -33,7 +33,14 @@ class ActivityAvatar extends React.Component {
       );
     }
 
-    return <Placeholder className={className} size={size} />;
+    return (
+      <Placeholder
+        className={className}
+        width={`${size}px`}
+        height={`${size}px`}
+        shape="circle"
+      />
+    );
   }
 }
 
@@ -50,11 +57,3 @@ const SystemAvatar = styled('span')`
 const Logo = styled(InlineSvg)`
   color: ${p => p.theme.gray5};
 `;
-
-const Placeholder = styled('div')`
-  height: ${p => p.size}px;
-  width: ${p => p.size}px;
-  border-radius: 100%;
-  background-color: ${p => p.theme.placeholderBackground};
-  flex-shrink: 0;
-`;
diff --git a/src/sentry/static/sentry/app/components/placeholder.jsx b/src/sentry/static/sentry/app/components/placeholder.jsx
new file mode 100644
index 0000000000..7f98bb28e7
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/placeholder.jsx
@@ -0,0 +1,36 @@
+import React from 'react';
+import styled from 'react-emotion';
+import PropTypes from 'prop-types';
+
+import space from 'app/styles/space';
+
+const Placeholder = styled(props => {
+  const {className} = props;
+  return <div className={className} />;
+})`
+  display: flex;
+  flex-direction: column;
+  flex-shrink: 0;
+  justify-content: center;
+
+  background-color: ${p => p.theme.placeholderBackground};
+  width: ${p => p.width};
+  height: ${p => p.height};
+  ${p => (p.shape == 'circle' ? 'border-radius: 100%;' : '')}
+  ${p => (p.bottomGutter > 0 ? `margin-bottom: ${space(p.bottomGutter)};` : '')}
+`;
+
+Placeholder.propTypes = {
+  shape: PropTypes.oneOf(['rect', 'circle']),
+  width: PropTypes.string,
+  height: PropTypes.string,
+  bottomGutter: PropTypes.number,
+};
+Placeholder.defaultProps = {
+  shape: 'rect',
+  bottomGutter: 0,
+  width: '100%',
+  height: '60px',
+};
+
+export default Placeholder;
diff --git a/src/sentry/static/sentry/app/views/organizationEventsV2/linkedIssuePreview.jsx b/src/sentry/static/sentry/app/views/organizationEventsV2/linkedIssuePreview.jsx
index 34fe766a73..89520dc259 100644
--- a/src/sentry/static/sentry/app/views/organizationEventsV2/linkedIssuePreview.jsx
+++ b/src/sentry/static/sentry/app/views/organizationEventsV2/linkedIssuePreview.jsx
@@ -7,6 +7,7 @@ import AsyncComponent from 'app/components/asyncComponent';
 import GroupChart from 'app/components/stream/groupChart';
 import InlineSvg from 'app/components/inlineSvg';
 import Link from 'app/components/links/link';
+import Placeholder from 'app/components/placeholder';
 import ProjectBadge from 'app/components/idBadge/projectBadge';
 import SeenByList from 'app/components/seenByList';
 import ShortId from 'app/components/shortId';
@@ -25,6 +26,10 @@ class LinkedIssuePreview extends AsyncComponent {
     return [['group', groupUrl]];
   }
 
+  renderLoading() {
+    return <Placeholder height="120px" bottomGutter={2} />;
+  }
+
   renderBody() {
     const {group} = this.state;
 
diff --git a/src/sentry/static/sentry/app/views/organizationIncidents/details/body.jsx b/src/sentry/static/sentry/app/views/organizationIncidents/details/body.jsx
index ab6d7919a9..e0f749665e 100644
--- a/src/sentry/static/sentry/app/views/organizationIncidents/details/body.jsx
+++ b/src/sentry/static/sentry/app/views/organizationIncidents/details/body.jsx
@@ -8,6 +8,7 @@ import IdBadge from 'app/components/idBadge';
 import Link from 'app/components/links/link';
 import NavTabs from 'app/components/navTabs';
 import Projects from 'app/utils/projects';
+import Placeholder from 'app/components/placeholder';
 import SeenByList from 'app/components/seenByList';
 import SentryTypes from 'app/sentryTypes';
 import SideHeader from 'app/views/organizationIncidents/details/sideHeader';
@@ -65,7 +66,7 @@ export default class DetailsBody extends React.Component {
                 closed={incident.dateClosed}
               />
             ) : (
-              <ChartPlaceholder />
+              <Placeholder height="190px" bottomGutter={2} />
             )}
 
             <div>
@@ -137,12 +138,6 @@ const StyledSeenByList = styled(SeenByList)`
   margin-top: 0;
 `;
 
-const ChartPlaceholder = styled('div')`
-  background-color: ${p => p.theme.offWhite};
-  height: 190px;
-  margin-bottom: 10px;
-`;
-
 const StyledIdBadge = styled(IdBadge)`
   margin-bottom: ${space(1)};
 `;
diff --git a/src/sentry/static/sentry/app/views/organizationIncidents/details/placeholder.jsx b/src/sentry/static/sentry/app/views/organizationIncidents/details/placeholder.jsx
deleted file mode 100644
index 284b08d576..0000000000
--- a/src/sentry/static/sentry/app/views/organizationIncidents/details/placeholder.jsx
+++ /dev/null
@@ -1,11 +0,0 @@
-import styled from 'react-emotion';
-
-import space from 'app/styles/space';
-
-const Placeholder = styled('div')`
-  background-color: ${p => p.theme.placeholderBackground};
-  padding: ${space(4)};
-  margin-bottom: ${space(1)};
-`;
-
-export default Placeholder;
diff --git a/src/sentry/static/sentry/app/views/organizationIncidents/details/relatedIssues/index.jsx b/src/sentry/static/sentry/app/views/organizationIncidents/details/relatedIssues/index.jsx
index 3bc32fc59d..ff8f69d0ed 100644
--- a/src/sentry/static/sentry/app/views/organizationIncidents/details/relatedIssues/index.jsx
+++ b/src/sentry/static/sentry/app/views/organizationIncidents/details/relatedIssues/index.jsx
@@ -6,13 +6,13 @@ import {Panel, PanelBody, PanelItem} from 'app/components/panels';
 import {t} from 'app/locale';
 import EventOrGroupExtraDetails from 'app/components/eventOrGroupExtraDetails';
 import EventOrGroupHeader from 'app/components/eventOrGroupHeader';
+import Placeholder from 'app/components/placeholder';
 import SentryTypes from 'app/sentryTypes';
 import space from 'app/styles/space';
 import withApi from 'app/utils/withApi';
 import withOrganization from 'app/utils/withOrganization';
 
 import IssuesFetcher from './issuesFetcher';
-import Placeholder from '../placeholder';
 import SideHeader from '../sideHeader';
 
 const RelatedIssues = styled(
@@ -42,7 +42,7 @@ const RelatedIssues = styled(
                     {t('Related Issues')} ({loading || !issues ? '-' : issues.length})
                   </SideHeader>
                   {loading ? (
-                    <Placeholder />
+                    <Placeholder height="60px" bottomGutter={1} />
                   ) : (
                     issues &&
                     issues.length > 0 && (
diff --git a/src/sentry/static/sentry/app/views/organizationIncidents/details/suspects.jsx b/src/sentry/static/sentry/app/views/organizationIncidents/details/suspects.jsx
index 86a0347d5b..d15be65d80 100644
--- a/src/sentry/static/sentry/app/views/organizationIncidents/details/suspects.jsx
+++ b/src/sentry/static/sentry/app/views/organizationIncidents/details/suspects.jsx
@@ -7,12 +7,12 @@ import {t} from 'app/locale';
 import AsyncComponent from 'app/components/asyncComponent';
 import CommitLink from 'app/components/commitLink';
 import IdBadge from 'app/components/idBadge';
+import Placeholder from 'app/components/placeholder';
 import SentryTypes from 'app/sentryTypes';
 import TimeSince from 'app/components/timeSince';
 import overflowEllipsis from 'app/styles/overflowEllipsis';
 import space from 'app/styles/space';
 
-import Placeholder from './placeholder';
 import SideHeader from './sideHeader';
 
 class Suspects extends React.Component {
@@ -34,7 +34,7 @@ class Suspects extends React.Component {
           {t('Suspects')} ({loading || !suspects ? '-' : suspects.length})
         </SideHeader>
         {loading ? (
-          <Placeholder />
+          <Placeholder height="60px" bottomGutter={1} />
         ) : (
           suspects &&
           suspects.length > 0 && (
