commit 99dca7a015b75da789969d45271d5e1d5ca50dca
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Sep 29 19:44:04 2014 -0700

    More perf improvements to tags

diff --git a/src/sentry/static/sentry/app/controllers/groupDetails.js b/src/sentry/static/sentry/app/controllers/groupDetails.js
index e4f2f62431..a554493543 100644
--- a/src/sentry/static/sentry/app/controllers/groupDetails.js
+++ b/src/sentry/static/sentry/app/controllers/groupDetails.js
@@ -4,7 +4,8 @@
   SentryApp.controller('GroupDetailsCtrl', [
     '$scope', '$http', 'selectedProject', 'selectedTeam',
     function($scope, $http, selectedProject, selectedTeam) {
-      var selectedGroup = window.SentryConfig.selectedGroup;
+      var selectedGroup = window.SentryConfig.selectedGroup,
+          urlPrefix = window.SentryConfig.urlPrefix;
 
       $scope.selectedGroup = selectedGroup;
 
@@ -67,6 +68,42 @@
         }
       });
 
+      $('.tag-widget-list').each(function(){
+          var $widget = $(this);
+          $.ajax({
+            url: $widget.data('url'),
+            error: function() {
+              $widget.find('.loading').remove();
+              $widget.append($('<li class="error">Unable to load tag information</li>'));
+            },
+            success: function(data) {
+              var total = data.total,
+                  eTagName = encodeURIComponent(data.name);
+
+              $widget.find('.loading').remove();
+              if (total === 0) {
+                $widget.append($('<li>No data available.</li>'));
+              } else {
+                $.each(data.values, function(_, item){
+                  var tagValue = item[0],
+                      timesSeen = item[1],
+                      percent = parseInt(timesSeen / total * 100, 10),
+                      url = urlPrefix + '/' + selectedTeam.slug + '/' + selectedProject.slug + '/';
+
+                  $('<li>' +
+                    '<div class="progressbar">' +
+                      '<div style="width:' + percent + '%">' + timesSeen + '</div>' +
+                      '<a href="' + url + '?' + eTagName + '=' + encodeURIComponent(tagValue) + '">' +
+                        tagValue +
+                        '<span>' + percent + '%</span>' +
+                      '</a>' +
+                    '</div>' +
+                  '</li>').appendTo($widget);
+                });
+              }
+            }
+          });
+      });
     }
   ]);
 }());
diff --git a/src/sentry/templatetags/sentry_helpers.py b/src/sentry/templatetags/sentry_helpers.py
index b66c580fc9..b7bf094e0a 100644
--- a/src/sentry/templatetags/sentry_helpers.py
+++ b/src/sentry/templatetags/sentry_helpers.py
@@ -33,7 +33,7 @@ from django.utils.translation import ugettext as _
 from sentry import options
 from sentry.api.serializers import serialize as serialize_func
 from sentry.constants import STATUS_MUTED, EVENTS_PER_PAGE, MEMBER_OWNER
-from sentry.models import Team, GroupTagValue
+from sentry.models import Team
 from sentry.web.helpers import group_is_public
 from sentry.utils import json, to_unicode
 from sentry.utils.avatar import get_gravatar_url
@@ -358,16 +358,9 @@ def with_metadata(group_list, request):
 def render_tag_widget(group, tag):
     cutoff = timezone.now() - timedelta(days=7)
 
-    has_tags = GroupTagValue.objects.filter(
-        group=group,
-        key=tag,
-        last_seen__gte=cutoff,
-    ).exists()
-
     return {
         'title': tag.replace('_', ' ').title(),
         'tag_name': tag,
-        'has_tags': has_tags,
         'group': group,
     }
 
