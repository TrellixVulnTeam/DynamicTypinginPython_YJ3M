commit 303d0d1546ad80dd159d2ba31c3e32d5dca2860f
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Fri Aug 28 19:30:48 2015 +0200

    Added a way to explicitly provide api keys for the api docs

diff --git a/src/sentry/utils/apidocs.py b/src/sentry/utils/apidocs.py
index 8a31810b1b..176f6d95ac 100644
--- a/src/sentry/utils/apidocs.py
+++ b/src/sentry/utils/apidocs.py
@@ -380,7 +380,9 @@ class Runner(object):
         finally:
             org.delete()
 
-    def request(self, method, path, headers=None, data=None):
+    def request(self, method, path, headers=None, data=None, api_key=None):
+        if api_key is None:
+            api_key = self.api_key
         path = '/api/0/' + path.lstrip('/')
         headers = dict(headers or {})
 
@@ -392,7 +394,7 @@ class Runner(object):
         req_headers = dict(headers)
         req_headers['Host'] = 'app.getsentry.com'
         req_headers['Authorization'] = 'Basic %s' % base64.b64encode('%s:' % (
-            self.api_key.key.encode('utf-8')))
+            api_key.key.encode('utf-8')))
 
         url = 'http://127.0.0.1:%s%s' % (
             settings.SENTRY_APIDOCS_WEB_PORT,
