commit 3f3093b528bf42dfb101c79b8a473a9cbd9f8523
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Fri May 18 13:35:06 2018 -0700

    feat(integrations): Add support for linking to existing JIRA issues via api

diff --git a/src/sentry/integrations/jira/integration.py b/src/sentry/integrations/jira/integration.py
index 9563e25f42..afd8364944 100644
--- a/src/sentry/integrations/jira/integration.py
+++ b/src/sentry/integrations/jira/integration.py
@@ -1,8 +1,12 @@
 from __future__ import absolute_import
 
+from django.core.urlresolvers import reverse
 from django.utils.translation import ugettext_lazy as _
 
-from sentry.integrations import Integration, IntegrationProvider, IntegrationMetadata
+from sentry.integrations import (
+    Integration, IntegrationFeatures, IntegrationProvider, IntegrationMetadata
+)
+from sentry.integrations.issues import IssueSyncMixin
 
 from .client import JiraApiClient
 
@@ -26,7 +30,18 @@ metadata = IntegrationMetadata(
 )
 
 
-class JiraIntegration(Integration):
+class JiraIntegration(Integration, IssueSyncMixin):
+
+    def get_link_issue_config(self, group, **kwargs):
+        fields = super(JiraIntegration, self).get_link_issue_config(group, **kwargs)
+        org = group.organization
+        autocomplete_url = reverse(
+            'sentry-extensions-jira-search', args=[org.slug, self.model.id],
+        )
+        for field in fields:
+            if field['name'] == 'externalIssue':
+                field['autocompleteUrl'] = autocomplete_url
+        return fields
 
     def get_client(self):
         return JiraApiClient(
@@ -55,6 +70,8 @@ class JiraIntegrationProvider(IntegrationProvider):
     metadata = metadata
     integration_cls = JiraIntegration
 
+    features = frozenset([IntegrationFeatures.ISSUE_SYNC])
+
     can_add = False
 
     def get_pipeline_views(self):
diff --git a/tests/sentry/integrations/jira/test_integration.py b/tests/sentry/integrations/jira/test_integration.py
new file mode 100644
index 0000000000..77556775d5
--- /dev/null
+++ b/tests/sentry/integrations/jira/test_integration.py
@@ -0,0 +1,33 @@
+from __future__ import absolute_import
+
+from django.core.urlresolvers import reverse
+
+from sentry.models import Integration
+from sentry.testutils import APITestCase
+
+
+class JiraSearchEndpointTest(APITestCase):
+    def test_simple(self):
+        org = self.organization
+        self.login_as(self.user)
+        group = self.create_group()
+
+        integration = Integration.objects.create(
+            provider='jira',
+            name='Example JIRA',
+        )
+        integration.add_organization(org.id)
+
+        installation = integration.get_installation()
+
+        assert installation.get_link_issue_config(group) == [
+            {
+                'name': 'externalIssue',
+                'label': 'Issue',
+                'default': '',
+                'type': 'string',
+                'autocompleteUrl': reverse(
+                    'sentry-extensions-jira-search', args=[org.slug, integration.id],
+                )
+            }
+        ]
