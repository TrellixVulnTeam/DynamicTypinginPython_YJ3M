commit 686a1bec5138b515e39f7b1c5d18e96caf3d9500
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Dec 3 18:08:51 2015 -0800

    Add X-Max-Hits

diff --git a/src/sentry/api/endpoints/project_group_index.py b/src/sentry/api/endpoints/project_group_index.py
index 433d90c483..83693f5807 100644
--- a/src/sentry/api/endpoints/project_group_index.py
+++ b/src/sentry/api/endpoints/project_group_index.py
@@ -244,6 +244,7 @@ class ProjectGroupIndexEndpoint(ProjectEndpoint):
 
         response = Response(context)
         response['X-Hits'] = cursor_result.hits
+        response['X-Max-Hits'] = cursor_result.max_hits
         response['Link'] = ', '.join([
             self.build_cursor_link(request, 'previous', cursor_result.prev),
             self.build_cursor_link(request, 'next', cursor_result.next),
diff --git a/src/sentry/api/paginator.py b/src/sentry/api/paginator.py
index d0ed300253..24041ad214 100644
--- a/src/sentry/api/paginator.py
+++ b/src/sentry/api/paginator.py
@@ -98,8 +98,10 @@ class BasePaginator(object):
             hits = queryset.model.objects.filter(
                 id__in=self.queryset[:1000],
             ).count()
+            max_hits = 1000
         else:
             hits = None
+            max_hits = None
 
         # this effectively gets us the before post, and the current (after) post
         # every time
@@ -117,6 +119,7 @@ class BasePaginator(object):
             results=results,
             limit=limit,
             hits=hits,
+            max_hits=max_hits,
             cursor=cursor,
             key=self.get_item_key,
         )
diff --git a/src/sentry/utils/cursors.py b/src/sentry/utils/cursors.py
index e256715393..69b9cec7d2 100644
--- a/src/sentry/utils/cursors.py
+++ b/src/sentry/utils/cursors.py
@@ -42,11 +42,12 @@ class Cursor(object):
 
 
 class CursorResult(Sequence):
-    def __init__(self, results, next, prev, hits=None):
+    def __init__(self, results, next, prev, hits=None, max_hits=None):
         self.results = results
         self.next = next
         self.prev = prev
         self.hits = hits
+        self.max_hits = max_hits
 
     def __len__(self):
         return len(self.results)
@@ -81,7 +82,7 @@ class CursorResult(Sequence):
         )
 
 
-def build_cursor(results, key, limit=100, cursor=None, hits=None):
+def build_cursor(results, key, limit=100, cursor=None, hits=None, max_hits=None):
     if cursor is None:
         cursor = Cursor(0, 0, 0)
 
@@ -163,8 +164,9 @@ def build_cursor(results, key, limit=100, cursor=None, hits=None):
     prev_cursor = Cursor(prev_value or 0, prev_offset, True, has_prev)
 
     return CursorResult(
-        hits=hits,
         results=results,
         next=next_cursor,
         prev=prev_cursor,
+        hits=hits,
+        max_hits=max_hits,
     )
