commit 59a325a16fd74d6822a8ae8fa9e49e5bf1d7c51b
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Nov 16 11:35:52 2015 -0800

    Move resolve all to isolated action
    
    Fixes GH-2312

diff --git a/src/sentry/static/sentry/app/views/stream/actionLink.jsx b/src/sentry/static/sentry/app/views/stream/actionLink.jsx
index b67a3da176..280a3aa2ea 100644
--- a/src/sentry/static/sentry/app/views/stream/actionLink.jsx
+++ b/src/sentry/static/sentry/app/views/stream/actionLink.jsx
@@ -116,7 +116,10 @@ const ActionLink = React.createClass({
 
         <Modal show={this.state.isModalOpen} title="Please confirm" animation={false} onHide={this.handleToggle}>
           <div className="modal-body">
-            <p><strong>Are you sure that you want to {this.props.actionLabel}?</strong></p>
+            <p><strong>Are you sure that you want to {actionLabel}?</strong></p>
+            {this.props.extraDescription &&
+              <p>{this.props.extraDescription}</p>
+            }
             <p>This action cannot be undone.</p>
           </div>
           <div className="modal-footer">
@@ -127,7 +130,13 @@ const ActionLink = React.createClass({
                       onClick={this.handleActionAll}>{confirmLabel} all recorded events</button>
             }
             <button type="button" className="btn btn-primary"
-                    onClick={this.handleActionSelected}>{confirmLabel} {numEvents} selected events</button>
+                    onClick={this.handleActionSelected}>
+              {numEvents !== 0 ?
+                `${confirmLabel} ${numEvents} selected events`
+              :
+                confirmLabel
+              }
+            </button>
           </div>
         </Modal>
       </a>
diff --git a/src/sentry/static/sentry/app/views/stream/actions.jsx b/src/sentry/static/sentry/app/views/stream/actions.jsx
index b2e6fb8d73..4a23dfe50d 100644
--- a/src/sentry/static/sentry/app/views/stream/actions.jsx
+++ b/src/sentry/static/sentry/app/views/stream/actions.jsx
@@ -114,6 +114,25 @@ const StreamActions = React.createClass({
     });
   },
 
+  onResolveProject(event) {
+    this.actionSelectedGroups(this.props.actionTypes.ALL, (itemIds) => {
+      let loadingIndicator = IndicatorStore.add('Saving changes..');
+
+      api.bulkUpdate({
+        orgId: this.props.orgId,
+        projectId: this.props.projectId,
+        itemIds: itemIds,
+        data: {
+          status: 'resolved',
+        }
+      }, {
+        complete: () => {
+          IndicatorStore.remove(loadingIndicator);
+        }
+      });
+    });
+  },
+
   onSelectedGroupChange() {
     this.setState({
       selectAllActive: SelectedGroupStore.allSelected(),
@@ -148,7 +167,6 @@ const StreamActions = React.createClass({
                buttonTitle="Resolve"
                confirmLabel="Resolve"
                tooltip="Set Status to Resolved"
-               canActionAll={true}
                onlyIfBulk={true}
                selectAllActive={this.state.selectAllActive}>
               <i aria-hidden="true" className="icon-checkmark"></i>
@@ -172,9 +190,22 @@ const StreamActions = React.createClass({
               key="actions"
               btnGroup={true}
               caret={false}
-              disabled={!this.state.anySelected}
               className="btn btn-sm btn-default hidden-xs action-more"
               title={<span className="icon-ellipsis"></span>}>
+              <MenuItem noAnchor={true}>
+                <ActionLink
+                   actionTypes={this.props.actionTypes}
+                   className="action-resolve-project"
+                   onAction={this.onResolveProject}
+                   actionLabel="resolve all issues within this project"
+                   extraDescription="This will resolve all unresolved issues throughout this project. This does not respect search filters."
+                   canActionAll={false}
+                   confirmLabel="Confirm"
+                   selectAllActive={this.state.selectAllActive}>
+                  Resolve all Issues in Project
+                </ActionLink>
+              </MenuItem>
+              <MenuItem divider={true} />
               <MenuItem noAnchor={true}>
                 <ActionLink
                    actionTypes={this.props.actionTypes}
