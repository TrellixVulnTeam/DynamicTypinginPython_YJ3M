commit b97944ca99f3c7fceb92b0893c38185bba8a9e35
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Apr 8 09:26:49 2015 -0500

    Add sample rate configuration to metrics

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 9d795401f1..54fa6b0464 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -524,6 +524,7 @@ RECAPTCHA_PRIVATE_KEY = None
 
 STATSD_CLIENT = 'django_statsd.clients.null'
 SENTRY_METRICS_PREFIX = ''
+SENTRY_METRICS_SAMPLE_RATE = 1.0
 
 # Sentry and Raven configuration
 
diff --git a/src/sentry/utils/metrics.py b/src/sentry/utils/metrics.py
index 0561deb5c5..d862a2eba3 100644
--- a/src/sentry/utils/metrics.py
+++ b/src/sentry/utils/metrics.py
@@ -14,12 +14,15 @@ def _get_key(key):
 
 
 def incr(key, amount=1):
-    return statsd.incr(_get_key(key), amount)
+    return statsd.incr(_get_key(key), amount,
+                       rate=settings.SENTRY_METRICS_SAMPLE_RATE)
 
 
 def timing(key, value):
-    return statsd.timing(_get_key(key), value)
+    return statsd.timing(_get_key(key), value,
+                         rate=settings.SENTRY_METRICS_SAMPLE_RATE)
 
 
 def timer(key):
-    return statsd.timer(_get_key(key))
+    return statsd.timer(_get_key(key),
+                        rate=settings.SENTRY_METRICS_SAMPLE_RATE)
