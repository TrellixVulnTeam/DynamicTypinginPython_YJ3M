commit 9a729061be7e9fd518000026e8d302b550fe7035
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Wed Jan 2 14:34:30 2019 -0800

    feat(releases): Commit author stats component works for org releases (#11132)
    
    Update the commit author stats component to accept projectId as an
    optional prop and use the organization release commits endpoint if a
    projectId value is not provided.

diff --git a/src/sentry/static/sentry/app/components/commitAuthorStats.jsx b/src/sentry/static/sentry/app/components/commitAuthorStats.jsx
index ab8d85172c..b7d2411656 100644
--- a/src/sentry/static/sentry/app/components/commitAuthorStats.jsx
+++ b/src/sentry/static/sentry/app/components/commitAuthorStats.jsx
@@ -32,7 +32,8 @@ const CommitAuthorStats = createReactClass({
 
   propTypes: {
     orgId: PropTypes.string.isRequired,
-    projectId: PropTypes.string.isRequired,
+    // Provided in project release views, not in org release views
+    projectId: PropTypes.string,
     version: PropTypes.string.isRequired,
   },
 
@@ -46,11 +47,7 @@ const CommitAuthorStats = createReactClass({
   },
 
   componentDidMount() {
-    let {orgId, projectId, version} = this.props;
-    let path = `/projects/${orgId}/${projectId}/releases/${encodeURIComponent(
-      version
-    )}/commits/`;
-    this.api.request(path, {
+    this.api.request(this.getPath(), {
       method: 'GET',
       success: (data, _, jqXHR) => {
         this.setState({
@@ -69,6 +66,15 @@ const CommitAuthorStats = createReactClass({
     });
   },
 
+  getPath() {
+    const {orgId, projectId, version} = this.props;
+    const encodedVersion = encodeURIComponent(version);
+
+    return this.props.projectId
+      ? `/projects/${orgId}/${projectId}/releases/${encodedVersion}/commits/`
+      : `/organizations/${orgId}/releases/${encodedVersion}/commits/`;
+  },
+
   renderEmpty() {
     return <div className="box empty">{t('No authors in this release')}</div>;
   },
