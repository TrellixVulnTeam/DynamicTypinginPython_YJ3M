commit d84153215866ee10f186b68a1152002c705338ed
Author: root <root@sentry>
Date:   Fri Oct 23 23:19:23 2015 +0000

    Added test case for team slug already existed

diff --git a/tests/sentry/web/frontend/test_team_settings.py b/tests/sentry/web/frontend/test_team_settings.py
index b0245f219c..482733908d 100644
--- a/tests/sentry/web/frontend/test_team_settings.py
+++ b/tests/sentry/web/frontend/test_team_settings.py
@@ -44,3 +44,15 @@ class TeamSettingsTest(TestCase):
         self.assertEquals(resp['Location'], 'http://testserver' + self.path)
         team = Team.objects.get(pk=self.team.pk)
         self.assertEquals(team.name, 'bar')
+
+    def test_slug_already_exists(self):
+        self.login_as(self.user)
+        team_2 = self.create_team(name='bar', organization=self.organization)
+        resp = self.client.post(self.path, {
+            'name': 'bar',
+            'slug': self.team.slug,
+        })
+        assert resp.status_code == 302
+        self.assertEquals(resp['Location'], 'http://testserver' + self.path)
+        team = Team.objects.get(pk=self.team.pk)
+        self.assertEquals(team.name, self.team.name)
