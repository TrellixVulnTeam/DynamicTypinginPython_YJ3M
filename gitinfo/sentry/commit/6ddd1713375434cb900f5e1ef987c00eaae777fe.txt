commit 6ddd1713375434cb900f5e1ef987c00eaae777fe
Author: Mark Story <mark@mark-story.com>
Date:   Wed Apr 24 14:05:43 2019 -0400

    fix(ui) Improve tooltips and hover states for search bar icons (#12909)
    
    Make the hover colour consistent across the search bar icons. Also
    update the tooltip to indicate the unpin action.
    
    Fixes SEN-533

diff --git a/src/sentry/static/sentry/app/components/smartSearchBar/index.jsx b/src/sentry/static/sentry/app/components/smartSearchBar/index.jsx
index 08e98ac2ce..e63ae69333 100644
--- a/src/sentry/static/sentry/app/components/smartSearchBar/index.jsx
+++ b/src/sentry/static/sentry/app/components/smartSearchBar/index.jsx
@@ -707,11 +707,14 @@ class SmartSearchBar extends React.Component {
       dropdownClassName,
       hasPinnedSearch,
       organization,
+      pinnedSearch,
       placeholder,
       disabled,
       onSidebarToggle,
     } = this.props;
 
+    const pinTooltip = !!pinnedSearch ? t('Unpin this search') : t('Pin this search');
+
     if (hasPinnedSearch) {
       return (
         <Container isDisabled={disabled} isOpen={this.state.dropdownVisible}>
@@ -748,15 +751,15 @@ class SmartSearchBar extends React.Component {
               query={this.state.query}
               organization={organization}
             />
-            <Tooltip title={t('Pin this search')}>
+            <Tooltip title={pinTooltip}>
               <Button
                 type="button"
                 borderless
-                aria-label={t('Pin this search')}
+                aria-label={pinTooltip}
                 size="zero"
                 onClick={this.onTogglePinnedSearch}
               >
-                <PinIcon isPinned={!!this.props.pinnedSearch} src="icon-pin" />
+                <PinIcon isPinned={!!pinnedSearch} src="icon-pin" />
               </Button>
             </Tooltip>
             <SidebarButton
@@ -847,7 +850,7 @@ const SmartSearchBarContainer = withApi(
 const PinIcon = styled(InlineSvg)`
   fill: ${p => (p.isPinned ? p.theme.blueLight : p.theme.gray2)};
   &:hover {
-    fill: ${p => p.theme.blueLight};
+    fill: ${p => p.theme.gray3};
   }
 `;
 
@@ -917,6 +920,9 @@ const SidebarButton = styled(Button)`
   & svg {
     color: ${p => p.theme.gray2};
   }
+  &:hover svg {
+    color: ${p => p.theme.gray3};
+  }
   .show-sidebar & svg {
     color: ${p => p.theme.blueLight};
   }
diff --git a/src/sentry/static/sentry/app/views/stream/createSavedSearchButton.jsx b/src/sentry/static/sentry/app/views/stream/createSavedSearchButton.jsx
index 3926c804d1..466012b2af 100644
--- a/src/sentry/static/sentry/app/views/stream/createSavedSearchButton.jsx
+++ b/src/sentry/static/sentry/app/views/stream/createSavedSearchButton.jsx
@@ -154,7 +154,7 @@ class CreateSavedSearchButton extends React.Component {
 
 const StyledButton = styled(Button)`
   & svg {
-    color: ${p => p.theme.gray6};
+    color: ${p => p.theme.gray2};
   }
   &:hover svg {
     color: ${p => p.theme.gray3};
diff --git a/tests/js/spec/components/smartSearchBar.spec.jsx b/tests/js/spec/components/smartSearchBar.spec.jsx
index 0fb3d3b0e7..9f905fdaad 100644
--- a/tests/js/spec/components/smartSearchBar.spec.jsx
+++ b/tests/js/spec/components/smartSearchBar.spec.jsx
@@ -483,7 +483,7 @@ describe('SmartSearchBar', function() {
         options
       );
 
-      wrapper.find('button[aria-label="Pin this search"]').simulate('click');
+      wrapper.find('button[aria-label="Unpin this search"]').simulate('click');
       await wrapper.update();
 
       expect(pinRequest).not.toHaveBeenCalled();
diff --git a/tests/js/spec/views/stream/searchBar.spec.jsx b/tests/js/spec/views/stream/searchBar.spec.jsx
index 324b12919d..3240c16871 100644
--- a/tests/js/spec/views/stream/searchBar.spec.jsx
+++ b/tests/js/spec/views/stream/searchBar.spec.jsx
@@ -309,7 +309,7 @@ describe('SearchBar', function() {
         pinnedSearch: {id: '1', query: 'url:"fu"'},
       };
       const searchBar = mount(<SearchBar {...props} />, routerContext);
-      searchBar.find('button[aria-label="Pin this search"]').simulate('click');
+      searchBar.find('button[aria-label="Unpin this search"]').simulate('click');
 
       expect(unpinSearch).toHaveBeenLastCalledWith(
         expect.anything(),
