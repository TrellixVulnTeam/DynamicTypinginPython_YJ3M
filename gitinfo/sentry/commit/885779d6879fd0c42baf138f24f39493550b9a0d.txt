commit 885779d6879fd0c42baf138f24f39493550b9a0d
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Oct 1 15:05:52 2014 -0700

    Restrict GroupSeen to membership

diff --git a/src/sentry/api/endpoints/group_markseen.py b/src/sentry/api/endpoints/group_markseen.py
index cfbd65dcc2..599064adb2 100644
--- a/src/sentry/api/endpoints/group_markseen.py
+++ b/src/sentry/api/endpoints/group_markseen.py
@@ -4,7 +4,7 @@ from rest_framework.response import Response
 from sentry.api.base import Endpoint
 from sentry.api.permissions import assert_perm
 from sentry.db.models import create_or_update
-from sentry.models import Group, GroupSeen
+from sentry.models import Project, Group, GroupSeen
 from sentry.utils.functional import extract_lazy_object
 
 
@@ -16,6 +16,10 @@ class GroupMarkSeenEndpoint(Endpoint):
 
         assert_perm(group, request.user, request.auth)
 
+        if group.project not in Project.objects.get_for_user(
+                request.user, team=group.project.team, superuser=False):
+            return Response(status=400)
+
         instance, created = create_or_update(
             GroupSeen,
             group=group,
