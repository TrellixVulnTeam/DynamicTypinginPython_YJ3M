commit 13f2af255331cc208a4a1da235f1c7693d6c1a2b
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Dec 26 18:57:48 2012 -0800

    Remove password confirmation field

diff --git a/src/sentry/templates/sentry/account/settings.html b/src/sentry/templates/sentry/account/settings.html
index 861ed80688..605e0c5b40 100644
--- a/src/sentry/templates/sentry/account/settings.html
+++ b/src/sentry/templates/sentry/account/settings.html
@@ -49,10 +49,7 @@
         </fieldset>
         <hr>
         <p>{% trans "You may also optionally change your password." %}</p>
-        {% with form.new_password1 as field %}
-            {% include "sentry/partial/_form_field.html" %}
-        {% endwith %}
-        {% with form.new_password2 as field %}
+        {% with form.new_password as field %}
             {% include "sentry/partial/_form_field.html" %}
         {% endwith %}
 
diff --git a/src/sentry/web/forms/accounts.py b/src/sentry/web/forms/accounts.py
index e681a59e59..c0e1f1ae7a 100644
--- a/src/sentry/web/forms/accounts.py
+++ b/src/sentry/web/forms/accounts.py
@@ -70,21 +70,12 @@ class AccountSettingsForm(forms.Form):
     old_password = forms.CharField(label=_('Current password'), widget=forms.PasswordInput)
     email = forms.EmailField(label=_('Email'))
     first_name = forms.CharField(required=True, label=_('Name'))
-    new_password1 = forms.CharField(label=_('New password'), widget=forms.PasswordInput, required=False)
-    new_password2 = forms.CharField(label=_('New password confirmation'), widget=forms.PasswordInput, required=False)
+    new_password = forms.CharField(label=_('New password'), widget=forms.PasswordInput, required=False)
 
     def __init__(self, user, *args, **kwargs):
         self.user = user
         super(AccountSettingsForm, self).__init__(*args, **kwargs)
 
-    def clean_new_password2(self):
-        password1 = self.cleaned_data.get('new_password1')
-        password2 = self.cleaned_data.get('new_password2')
-        if password1 and password2:
-            if password1 != password2:
-                raise forms.ValidationError(_("The two password fields didn't match."))
-        return password2
-
     def clean_old_password(self):
         """
         Validates that the old_password field is correct.
@@ -95,8 +86,8 @@ class AccountSettingsForm(forms.Form):
         return old_password
 
     def save(self, commit=True):
-        if self.cleaned_data['new_password2']:
-            self.user.set_password(self.cleaned_data['new_password1'])
+        if self.cleaned_data.get('new_password'):
+            self.user.set_password(self.cleaned_data['new_password'])
         self.user.first_name = self.cleaned_data['first_name']
         self.user.email = self.cleaned_data['email']
         if commit:
@@ -125,6 +116,7 @@ class AppearanceSettingsForm(forms.Form):
         # if commit:
         #     self.user.save()
 
+        print self.user, "setting options"
         # Save user language
         UserOption.objects.set_value(
             user=self.user,
