commit 23405ba87df03f9d47ede14b1e3177d3ddbeb9e3
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Tue Jan 22 12:21:20 2019 +0100

    fix: Do not display URL if there is none (#11637)

diff --git a/src/sentry/interfaces/http.py b/src/sentry/interfaces/http.py
index 2c49eb0e4f..8bf990ce0f 100644
--- a/src/sentry/interfaces/http.py
+++ b/src/sentry/interfaces/http.py
@@ -248,10 +248,11 @@ class Http(Interface):
     @property
     def full_url(self):
         url = self.url
-        if self.query_string:
-            url = url + '?' + urlencode(self.query_string)
-        if self.fragment:
-            url = url + '#' + self.fragment
+        if url:
+            if self.query_string:
+                url = url + '?' + urlencode(self.query_string)
+            if self.fragment:
+                url = url + '#' + self.fragment
         return url
 
     def to_email_html(self, event, **kwargs):
diff --git a/src/sentry/templates/sentry/partial/interfaces/http_email.html b/src/sentry/templates/sentry/partial/interfaces/http_email.html
index 4048493366..cc32a36ce0 100644
--- a/src/sentry/templates/sentry/partial/interfaces/http_email.html
+++ b/src/sentry/templates/sentry/partial/interfaces/http_email.html
@@ -4,10 +4,12 @@
       <col style="width:130px;">
     </colgroup>
     <tbody>
+        {% if short_url %}
         <tr>
             <th>{% trans "URL" %}</th>
             <td><a href="{{ url }}">{{ short_url|truncatechars:75 }}</a></td>
         </tr>
+        {% endif %}
         {% if method %}
         <tr>
             <th>{% trans "Method" %}</th>
