commit c5f33a9dbf560b49830d4627043da8f9420ae292
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Oct 14 22:49:01 2012 -0700

    Improve display of items without sparklines

diff --git a/src/sentry.less b/src/sentry.less
index e4b270a0e6..0ad5662b22 100644
--- a/src/sentry.less
+++ b/src/sentry.less
@@ -415,6 +415,16 @@ footer {
     border: 1px solid #e5e6e7;
     border-width: 0 0 1px 1px;
     min-height: 60px; /* count height */
+
+    &.with-metadata {
+      .message {
+        padding-right: 124px;
+      }
+      .meta {
+        right: 150px;
+      }
+    }
+
     &:hover {
       #gradient > .vertical(#f7fbfe, #eff8fd);
       border-color: #aec9d7;
@@ -459,7 +469,7 @@ footer {
       margin-bottom: 0;
       font-size: 14px;
       /*font-family: "proxima nova", "proxima-nova", "heletica-neue", sans-serif;*/
-      padding-right: 124px;
+      padding-right: 24px;
       .tag {
         .pull-right;
       }
@@ -482,7 +492,7 @@ footer {
     }
     .meta {
       position: absolute;
-      right: 150px;
+      right: 50px;
       top: 20px;
     }
     .actions {
diff --git a/src/sentry/static/sentry/styles/global.css b/src/sentry/static/sentry/styles/global.css
index 0283e09f72..12ad72e809 100644
--- a/src/sentry/static/sentry/styles/global.css
+++ b/src/sentry/static/sentry/styles/global.css
@@ -4221,6 +4221,12 @@ footer a:hover {
   /* count height */
 
 }
+.events .event.with-metadata .message {
+  padding-right: 124px;
+}
+.events .event.with-metadata .meta {
+  right: 150px;
+}
 .events .event:hover {
   background-color: #f4fafe;
   background-image: -moz-linear-gradient(top, #f7fbfe, #eff8fd);
@@ -4276,7 +4282,7 @@ footer a:hover {
   font-size: 14px;
   /*font-family: "proxima nova", "proxima-nova", "heletica-neue", sans-serif;*/
 
-  padding-right: 124px;
+  padding-right: 24px;
 }
 .events .event .message .tag {
   float: right;
@@ -4301,7 +4307,7 @@ footer a:hover {
 }
 .events .event .meta {
   position: absolute;
-  right: 150px;
+  right: 50px;
   top: 20px;
 }
 .events .event .actions {
diff --git a/src/sentry/static/sentry/styles/global.min.css b/src/sentry/static/sentry/styles/global.min.css
index 401cb92c56..9bc1da408e 100644
--- a/src/sentry/static/sentry/styles/global.min.css
+++ b/src/sentry/static/sentry/styles/global.min.css
@@ -687,13 +687,15 @@ footer a{color:#f4f4f4;font-weight:bold;}footer a:hover{color:#fff;}
 .btn.next span{display:block;width:13px;height:13px;background:url(../images/dashboard/pagination.png) -13px 0;}
 .events{margin:0;padding:0;list-style:none;border-top:1px solid #e5e6e7;}.events .empty-result{padding:15px 20px;min-height:60px;}
 .events.no-counts .event{padding-left:20px;}
-.events .event{position:relative;padding:15px 20px 15px 100px;position:relative;border:1px solid #e5e6e7;border-width:0 0 1px 1px;min-height:60px;}.events .event:hover{background-color:#f4fafe;background-image:-moz-linear-gradient(top, #f7fbfe, #eff8fd);background-image:-ms-linear-gradient(top, #f7fbfe, #eff8fd);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#f7fbfe), to(#eff8fd));background-image:-webkit-linear-gradient(top, #f7fbfe, #eff8fd);background-image:-o-linear-gradient(top, #f7fbfe, #eff8fd);background-image:linear-gradient(top, #f7fbfe, #eff8fd);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f7fbfe', endColorstr='#eff8fd', GradientType=0);border-color:#aec9d7;-webkit-box-shadow:0 -1px 0 #aec9d7,1px 0 0 #aec9d7;-moz-box-shadow:0 -1px 0 #aec9d7,1px 0 0 #aec9d7;box-shadow:0 -1px 0 #aec9d7,1px 0 0 #aec9d7;}.events .event:hover h3 a{color:#12659a;}
+.events .event{position:relative;padding:15px 20px 15px 100px;position:relative;border:1px solid #e5e6e7;border-width:0 0 1px 1px;min-height:60px;}.events .event.with-metadata .message{padding-right:124px;}
+.events .event.with-metadata .meta{right:150px;}
+.events .event:hover{background-color:#f4fafe;background-image:-moz-linear-gradient(top, #f7fbfe, #eff8fd);background-image:-ms-linear-gradient(top, #f7fbfe, #eff8fd);background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#f7fbfe), to(#eff8fd));background-image:-webkit-linear-gradient(top, #f7fbfe, #eff8fd);background-image:-o-linear-gradient(top, #f7fbfe, #eff8fd);background-image:linear-gradient(top, #f7fbfe, #eff8fd);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f7fbfe', endColorstr='#eff8fd', GradientType=0);border-color:#aec9d7;-webkit-box-shadow:0 -1px 0 #aec9d7,1px 0 0 #aec9d7;-moz-box-shadow:0 -1px 0 #aec9d7,1px 0 0 #aec9d7;box-shadow:0 -1px 0 #aec9d7,1px 0 0 #aec9d7;}.events .event:hover h3 a{color:#12659a;}
 .events .event h3{font-family:"proxima nova","proxima-nova","heletica-neue",sans-serif;margin:4px 0 0;font-size:20px;color:#6d757e;font-weight:normal;width:85%;overflow:hidden;}.events .event h3 span{margin-left:10px;font-weight:300;padding:0 5px;font-size:13px;}
 .events .event .count{color:#fff;position:absolute;left:20px;width:60px;height:60px;background:#cfd3da;-webkit-border-radius:60px;-moz-border-radius:60px;border-radius:60px;line-height:62px;text-align:center;font-size:20px;font-weight:400;letter-spacing:-1px;font-family:"proxima nova","proxima-nova","heletica-neue",sans-serif;}
-.events .event .message{margin-bottom:0;font-size:14px;padding-right:124px;}.events .event .message .tag{float:right;}
+.events .event .message{margin-bottom:0;font-size:14px;padding-right:24px;}.events .event .message .tag{float:right;}
 .events .event .tag{margin-left:5px;font-size:12px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;background:#fff;padding:2px 6px;color:#aec9d7;}
 .events .event .sparkline{position:absolute;right:40px;top:25px;display:inline-block;width:100px;height:40px;}
-.events .event .meta{position:absolute;right:150px;top:20px;}
+.events .event .meta{position:absolute;right:50px;top:20px;}
 .events .event .actions{position:absolute;right:15px;top:20px;list-style-type:none;margin:0;padding:0;}.events .event .actions li{margin-bottom:12px;font-size:14px;line-height:18px;text-align:center;display:block;width:16px;height:18px;}.events .event .actions li>a{color:#AEC9D7;}.events .event .actions li>a:hover{text-decoration:none;}
 .events .event .actions li .checked{color:orange;}
 .events .event .actions li .disabled{color:#6d757e;}
diff --git a/src/sentry/templates/sentry/groups/event.html b/src/sentry/templates/sentry/groups/event.html
index da437d6f75..5c084f5f05 100644
--- a/src/sentry/templates/sentry/groups/event.html
+++ b/src/sentry/templates/sentry/groups/event.html
@@ -33,6 +33,8 @@
         {% include "sentry/partial/_event.html" %}
     </ul>
 
+    <br>
+
     {% if event.has_two_part_message %}
         <pre id="full-message">{{ event.message }}</pre>
     {% endif %}
diff --git a/src/sentry/templates/sentry/partial/_group.html b/src/sentry/templates/sentry/partial/_group.html
index 9736bcd068..9dea51e204 100644
--- a/src/sentry/templates/sentry/partial/_group.html
+++ b/src/sentry/templates/sentry/partial/_group.html
@@ -2,7 +2,8 @@
 {% load sentry_helpers %}
 {% load sentry_plugins %}
 
-<li class="event level-{{ group.get_level_display }}{% if group.status == 1 %} resolved{% endif %}" data-count="{{ group.times_seen|safe }}" data-score="{{ group.sort_value|safe }}" data-group="{{ group.id|safe }}">
+<li class="event level-{{ group.get_level_display }}{% if group.status == 1 %} resolved{% endif %}{% if metadata %} has-sparkline{% endif %}"
+    data-count="{{ group.times_seen|safe }}" data-score="{{ group.sort_value|safe }}" data-group="{{ group.id|safe }}">
     <div class="count"><span>{{ group.times_seen|small_count }}</span></div>
     <div class="details">
         <h3>
@@ -30,7 +31,9 @@
                 <span class="time-spent">{{ group.avg_time_spent|duration }}</span>
             {% endif %}
         </div>
-        <span class="sparkline" sparkwidth="100" sparkheight="40" sparklineColor="#ccc" sparkfillColor="false" sparkspotRadius="0"><!-- {{ metadata.historical_data }} --></span>
+        {% if metadata %}
+            <span class="sparkline" sparkwidth="100" sparkheight="40" sparklineColor="#ccc" sparkfillColor="false" sparkspotRadius="0"><!-- {{ metadata.historical_data }} --></span>
+        </div>
         <ul class="actions">
             {% if request.user.is_authenticated %}
                 <li>
