commit 98b6fc57f327439aa12831921ea1edb74c5f902c
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Thu Oct 17 12:59:14 2019 +0200

    fix: Do not send signals for hash-discarded outcome (#15112)
    
    * fix: Do not send signals for hash-discarded outcome
    
    * fix: Fix import

diff --git a/src/sentry/tasks/store.py b/src/sentry/tasks/store.py
index 6d07bcbf54..cc51dad408 100644
--- a/src/sentry/tasks/store.py
+++ b/src/sentry/tasks/store.py
@@ -437,6 +437,7 @@ def _do_save_event(
     from sentry import quotas
     from sentry.models import ProjectKey
     from sentry.utils.outcomes import Outcome, track_outcome
+    from sentry.ingest.outcomes_consumer import mark_signal_sent
 
     if cache_key and data is None:
         data = default_cache.get(cache_key)
@@ -517,6 +518,12 @@ def _do_save_event(
             pass
 
         quotas.refund(project, key=project_key, timestamp=start_time)
+        # There is no signal supposed to be sent for this particular
+        # outcome-reason combination. Prevent the outcome consumer from
+        # emitting it for now.
+        #
+        # XXX(markus): Revisit decision about signals once outcomes consumer is stable.
+        mark_signal_sent(event_id, project_id)
         track_outcome(
             project.organization_id,
             project_id,
