commit 4d79f4da672c4d80f3f3579a524fd91f26a346fc
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Feb 22 20:52:25 2012 -0800

    Up Kombu to version 2.1.0

diff --git a/sentry/conf/defaults.py b/sentry/conf/defaults.py
index 2af6412e4c..f926b50748 100644
--- a/sentry/conf/defaults.py
+++ b/sentry/conf/defaults.py
@@ -106,7 +106,7 @@ UDP_PORT = 9001
 
 # Queue (Kombu)
 QUEUE = {
-    'transport': 'djkombu.transport.DatabaseTransport',
+    'transport': 'kombu.transport.django.Transport',
 }
 
 # List of event aggregation views
diff --git a/sentry/conf/server.py b/sentry/conf/server.py
index 4b59679173..72383b7204 100644
--- a/sentry/conf/server.py
+++ b/sentry/conf/server.py
@@ -102,7 +102,7 @@ INSTALLED_APPS = (
     'django.contrib.sites',
     # 'django.contrib.messages',
 
-    'djkombu',
+    'kombu.transport.django',
     'raven.contrib.django',
     'sentry',
     'sentry.plugins.sentry_servers',
diff --git a/sentry/web/frontend/admin.py b/sentry/web/frontend/admin.py
index 2e839783a4..ef0d932c95 100644
--- a/sentry/web/frontend/admin.py
+++ b/sentry/web/frontend/admin.py
@@ -18,7 +18,7 @@ from django.db import transaction
 from django.db.models import Sum, Count, Max
 from django.http import HttpResponseRedirect
 from django.views.decorators.csrf import csrf_protect
-from djkombu.models import Queue
+from kombu.transport.django.models import Queue
 
 from sentry import environment
 from sentry.conf import settings
@@ -253,7 +253,7 @@ def status_packages(request):
 
 @requires_admin
 def status_queue(request):
-    worker_status = (settings.QUEUE['transport'] == 'djkombu.transport.DatabaseTransport')
+    worker_status = (settings.QUEUE['transport'] == 'kombu.transport.django.Transport')
     if worker_status:
         pending_tasks = list(Queue.objects.filter(
             messages__visible=True,
diff --git a/setup.py b/setup.py
index 6c8fb48533..103927b057 100755
--- a/setup.py
+++ b/setup.py
@@ -32,11 +32,10 @@ tests_require = [
 install_requires = [
     'Django>=1.2,<1.4',
     'django-indexer>=0.3.0',
-    'django-kombu==0.9.4',
     'django-paging>=0.2.4',
     'django-templatetag-sugar>=0.1.0',
     'eventlet>=0.9.15',
-    'kombu>=1.5.1,<2.0',
+    'kombu>=2.1.0,<3.0',
     'gunicorn>=0.13.4',
     'logan>=0.2.1',
     'pytz>=2011n',
@@ -46,7 +45,7 @@ install_requires = [
 
 setup(
     name='sentry',
-    version='3.0.4',
+    version='3.1.0',
     author='David Cramer',
     author_email='dcramer@gmail.com',
     url='http://github.com/dcramer/sentry',
diff --git a/tests/sentry/api/tests.py b/tests/sentry/api/tests.py
index 323a040ac7..bd3afcac57 100644
--- a/tests/sentry/api/tests.py
+++ b/tests/sentry/api/tests.py
@@ -7,7 +7,6 @@ import mock
 import time
 
 from django.contrib.auth.models import User
-from djkombu.models import Message
 
 from sentry.models import Project
 from sentry.coreapi import project_from_id, project_from_api_key_and_id, \
