commit 2b8227e2b8ded736411c908cda3d1d3fbd3fa27b
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Mon Oct 30 13:54:57 2017 -0700

    feat(debug): Add SSO Link debug emails

diff --git a/src/sentry/auth/providers/dummy.py b/src/sentry/auth/providers/dummy.py
index ddd250fc5c..722b2373f0 100644
--- a/src/sentry/auth/providers/dummy.py
+++ b/src/sentry/auth/providers/dummy.py
@@ -16,6 +16,7 @@ class AskEmail(AuthView):
 
 class DummyProvider(Provider):
     TEMPLATE = '<form method="POST"><input type="email" name="email" /></form>'
+    name = 'Dummy'
 
     def get_auth_pipeline(self):
         return [AskEmail()]
diff --git a/src/sentry/templates/sentry/debug/mail/preview.html b/src/sentry/templates/sentry/debug/mail/preview.html
index 9959902483..e61993a73a 100644
--- a/src/sentry/templates/sentry/debug/mail/preview.html
+++ b/src/sentry/templates/sentry/debug/mail/preview.html
@@ -26,6 +26,9 @@
         <option value="mail/confirm-email/">Confirm Email</option>
         <option value="mail/recover-account/">Reset Password</option>
         <option value="mail/invalid-identity/">Invalid Identity</option>
+        <option value="mail/sso-linked/">SSO Linked</option>
+        <option value="mail/sso-unlinked/">SSO Unlinked</option>
+        <option value="mail/sso-unlinked/no-password">SSO Unlinked (No Password)</option>
       </optgroup>
       <optgroup label="Releases">
         <option value="mail/unable-to-fetch-commits/">Unable to Fetch Commits</option>
diff --git a/src/sentry/web/debug_urls.py b/src/sentry/web/debug_urls.py
index e868695fc6..734993dfa8 100644
--- a/src/sentry/web/debug_urls.py
+++ b/src/sentry/web/debug_urls.py
@@ -30,6 +30,11 @@ from sentry.web.frontend.debug.debug_new_processing_issues_email import (
     DebugNewProcessingIssuesEmailView,
     DebugNewProcessingIssuesNoReprocessingEmailView,
 )
+from sentry.web.frontend.debug.debug_sso_link_email import (
+    DebugSsoLinkedEmailView,
+    DebugSsoUnlinkedEmailView,
+    DebugSsoUnlinkedNoPasswordEmailView,
+)
 from sentry.web.frontend.debug import debug_auth_views
 from sentry.web.frontend.debug.debug_oauth_authorize import (
     DebugOAuthAuthorizeView,
@@ -71,6 +76,10 @@ urlpatterns = patterns(
         r'^debug/mail/new-processing-issues-no-reprocessing/$',
         DebugNewProcessingIssuesNoReprocessingEmailView.as_view()
     ),
+    url(r'^debug/mail/sso-linked/$', DebugSsoLinkedEmailView.as_view()),
+    url(r'^debug/mail/sso-unlinked/$', DebugSsoUnlinkedEmailView.as_view()),
+    url(r'^debug/mail/sso-unlinked/no-password$', DebugSsoUnlinkedNoPasswordEmailView.as_view()),
+
     url(r'^debug/embed/error-page/$', DebugErrorPageEmbedView.as_view()),
     url(r'^debug/trigger-error/$', DebugTriggerErrorView.as_view()),
     url(r'^debug/auth-confirm-identity/$', debug_auth_views.DebugAuthConfirmIdentity.as_view()),
diff --git a/src/sentry/web/frontend/debug/debug_sso_link_email.py b/src/sentry/web/frontend/debug/debug_sso_link_email.py
new file mode 100644
index 0000000000..324c1e86c8
--- /dev/null
+++ b/src/sentry/web/frontend/debug/debug_sso_link_email.py
@@ -0,0 +1,54 @@
+from __future__ import absolute_import, print_function
+
+from django.views.generic import View
+
+from sentry.auth.providers.dummy import DummyProvider
+from sentry.models import Organization
+
+from .mail import MailPreview
+
+
+def get_context(request):
+    org = Organization(name='My Company')
+    provider = DummyProvider('dummy')
+
+    return {
+        'organization': org,
+        'actor': request.user,
+        'provider': provider,
+    }
+
+
+class DebugSsoLinkedEmailView(View):
+    def get(self, request):
+        context = get_context(request)
+
+        return MailPreview(
+            text_template='sentry/emails/auth-link-identity.txt',
+            html_template='sentry/emails/auth-link-identity.html',
+            context=context,
+        ).render(request)
+
+
+class DebugSsoUnlinkedEmailView(View):
+    def get(self, request):
+        context = get_context(request)
+        context['has_password'] = True
+
+        return MailPreview(
+            text_template='sentry/emails/auth-sso-disabled.txt',
+            html_template='sentry/emails/auth-sso-disabled.html',
+            context=context,
+        ).render(request)
+
+
+class DebugSsoUnlinkedNoPasswordEmailView(View):
+    def get(self, request):
+        context = get_context(request)
+        context['has_password'] = False
+
+        return MailPreview(
+            text_template='sentry/emails/auth-sso-disabled.txt',
+            html_template='sentry/emails/auth-sso-disabled.html',
+            context=context,
+        ).render(request)
diff --git a/tests/acceptance/test_emails.py b/tests/acceptance/test_emails.py
index da3830b1b6..ce8d3afad8 100644
--- a/tests/acceptance/test_emails.py
+++ b/tests/acceptance/test_emails.py
@@ -25,6 +25,9 @@ EMAILS = (
     ('/debug/mail/mfa-added/', 'mfa added'),
     ('/debug/mail/mfa-removed/', 'mfa removed'),
     ('/debug/mail/password-changed/', 'password changed'),
+    ('/debug/mail/sso-linked', 'sso linked'),
+    ('/debug/mail/sso-unlinked', 'sso unlinked'),
+    ('/debug/mail/sso-unlinked/no-password', 'sso unlinked without password'),
 )
 
 
