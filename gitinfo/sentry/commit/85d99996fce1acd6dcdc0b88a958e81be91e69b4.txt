commit 85d99996fce1acd6dcdc0b88a958e81be91e69b4
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Feb 23 11:20:41 2015 -0800

    Add user context to event serializer

diff --git a/src/sentry/api/serializers/models/event.py b/src/sentry/api/serializers/models/event.py
index e9abec01c9..ab61f017ce 100644
--- a/src/sentry/api/serializers/models/event.py
+++ b/src/sentry/api/serializers/models/event.py
@@ -9,7 +9,9 @@ class EventSerializer(Serializer):
     def _get_entries(self, event, user):
         # XXX(dcramer): These are called entries for future-proofing
         interface_list = []
-        for interface in event.interfaces.itervalues():
+        for key, interface in event.interfaces.iteritems():
+            if key == 'user':
+                continue
             entry = {
                 'data': interface.to_json(),
                 'type': interface.get_alias(),
@@ -24,8 +26,15 @@ class EventSerializer(Serializer):
 
         results = {}
         for item in item_list:
+            user_interface = item.interfaces.get('sentry.interfaces.User')
+            if user_interface:
+                user_data = user_interface.to_json()
+            else:
+                user_data = None
+
             results[item] = {
-                'entries': self._get_entries(item, user)
+                'entries': self._get_entries(item, user),
+                'user': user_data,
             }
         return results
 
@@ -35,6 +44,7 @@ class EventSerializer(Serializer):
             'eventID': str(obj.event_id),
             'entries': attrs['entries'],
             'message': obj.message,
+            'user': attrs['user'],
             'platform': obj.platform,
             'dateCreated': obj.datetime,
             'timeSpent': obj.time_spent,
