commit 7c08353a1a8acd20a03163e43b2819c2db41e823
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Mon Sep 26 15:04:50 2016 +0200

    Only load images in the report symbolizer that are in the cache

diff --git a/src/sentry/lang/native/dsymcache.py b/src/sentry/lang/native/dsymcache.py
index f803a16534..04e3f20ff8 100644
--- a/src/sentry/lang/native/dsymcache.py
+++ b/src/sentry/lang/native/dsymcache.py
@@ -29,12 +29,12 @@ class DSymCache(object):
 
     def fetch_dsyms(self, project, uuids):
         bases = set()
-        loaded = []
+        loaded = set()
         for image_uuid in uuids:
             rv = self.fetch_dsym(project, image_uuid)
             if rv is not None:
                 base, dsym = rv
-                loaded.append(dsym)
+                loaded.add(dsym)
                 bases.add(base)
         return list(bases), loaded
 
diff --git a/src/sentry/lang/native/symbolizer.py b/src/sentry/lang/native/symbolizer.py
index 19e1226860..74067f7972 100644
--- a/src/sentry/lang/native/symbolizer.py
+++ b/src/sentry/lang/native/symbolizer.py
@@ -46,7 +46,16 @@ def make_symbolizer(project, binary_images, referenced_images=None):
         to_load = [x['uuid'] for x in binary_images]
 
     dsym_paths, loaded = dsymcache.fetch_dsyms(project, to_load)
-    return ReportSymbolizer(driver, dsym_paths, binary_images)
+
+    # We only want to pass the actually loaded symbols to the report
+    # symbolizer to avoid the expensive FS operations that will otherwise
+    # happen.
+    user_images = []
+    for img in binary_images:
+        if img['uuid'] in loaded:
+            user_images.append(img)
+
+    return ReportSymbolizer(driver, dsym_paths, user_images)
 
 
 class Symbolizer(object):
