commit 563f2178d2c08118dac0da6a5a12354c9450a88f
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Fri Aug 3 14:00:29 2018 -0700

    fix(discover): Fix converting to external condition format (#9315)
    
    Fixes a bug introduced in #9272 which incorrectly converted an internal condition with the format 'message LIKE' to the external format ['message', 'LIKE', 'message LIKE'] instead of ['message', 'LIKE', null].

diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/conditions/utils.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/conditions/utils.jsx
index 6a51b7b166..4ddd79b234 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/conditions/utils.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/conditions/utils.jsx
@@ -72,7 +72,11 @@ export function getExternal(internal, columns) {
 
   // Validate value and convert to correct type
   if (external[0] && external[1] && !specialConditions.has(external[1])) {
-    external[2] = internal.replace(`${external[0]} ${external[1]} `, '');
+    const strStart = `${external[0]} ${external[1]} `;
+
+    if (internal.startsWith(strStart)) {
+      external[2] = internal.replace(strStart, '');
+    }
 
     const type = columns.find(({name}) => name === colValue).type;
 
diff --git a/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx b/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx
index c6e9e48398..1bc89ab6c4 100644
--- a/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx
+++ b/tests/js/spec/views/organizationDiscover/conditions/utils.spec.jsx
@@ -31,6 +31,10 @@ const conditionList = [
     internal: 'message NOT LIKE something%',
     external: ['message', 'NOT LIKE', 'something%'],
   },
+  {
+    internal: 'message LIKE',
+    external: ['message', 'LIKE', null],
+  },
 ];
 
 describe('Conditions', function() {
