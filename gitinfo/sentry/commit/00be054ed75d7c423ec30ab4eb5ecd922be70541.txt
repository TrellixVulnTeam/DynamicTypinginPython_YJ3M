commit 00be054ed75d7c423ec30ab4eb5ecd922be70541
Author: Max Bittker <maxbittker@gmail.com>
Date:   Mon Mar 5 16:02:23 2018 -0800

    feat(actors): Team assignments in "assigned to me" (#7434)

diff --git a/src/sentry/api/endpoints/organization_member_issues_assigned.py b/src/sentry/api/endpoints/organization_member_issues_assigned.py
index 9aa72beecc..e537b4d491 100644
--- a/src/sentry/api/endpoints/organization_member_issues_assigned.py
+++ b/src/sentry/api/endpoints/organization_member_issues_assigned.py
@@ -2,13 +2,14 @@ from __future__ import absolute_import
 
 from sentry.api.bases import OrganizationIssuesEndpoint
 from sentry.models import Group
+from django.db.models import Q
 
 
 class OrganizationMemberIssuesAssignedEndpoint(OrganizationIssuesEndpoint):
     def get_queryset(self, request, organization, member, project_list):
         return Group.objects.filter(
-            assignee_set__user=member.user,
-            assignee_set__project__in=project_list,
+            Q(assignee_set__user=member.user, assignee_set__project__in=project_list) |
+            Q(assignee_set__team__in=member.get_teams())
         ).extra(
             select={'sort_by': 'sentry_groupasignee.date_added'},
         ).order_by('-sort_by')
diff --git a/src/sentry/models/groupassignee.py b/src/sentry/models/groupassignee.py
index da96cde0dc..1f7a8a2c42 100644
--- a/src/sentry/models/groupassignee.py
+++ b/src/sentry/models/groupassignee.py
@@ -108,7 +108,10 @@ class GroupAssignee(Model):
         settings.AUTH_USER_MODEL,
         related_name="sentry_assignee_set",
         null=True)
-    team = FlexibleForeignKey('sentry.Team', null=True)
+    team = FlexibleForeignKey(
+        'sentry.Team',
+        related_name="sentry_assignee_set",
+        null=True)
     date_added = models.DateTimeField(default=timezone.now)
 
     class Meta:
diff --git a/tests/sentry/api/endpoints/test_organization_member_issues_assigned.py b/tests/sentry/api/endpoints/test_organization_member_issues_assigned.py
index bc34ff8449..dc69b2ded6 100644
--- a/tests/sentry/api/endpoints/test_organization_member_issues_assigned.py
+++ b/tests/sentry/api/endpoints/test_organization_member_issues_assigned.py
@@ -59,3 +59,33 @@ class OrganizationMemberIssuesAssignedTest(APITestCase):
         assert len(resp.data) == 2
         assert resp.data[0]['id'] == six.text_type(group2.id)
         assert resp.data[1]['id'] == six.text_type(group1.id)
+
+    def test_via_team(self):
+        now = timezone.now()
+        user = self.create_user('foo@example.com')
+        org = self.create_organization(name='foo')
+        team = self.create_team(name='foo', organization=org)
+        self.create_member(
+            organization=org,
+            user=user,
+            role='admin',
+            teams=[team],
+        )
+        project1 = self.create_project(name='foo', organization=org, teams=[team])
+        group1 = self.create_group(project=project1)
+        GroupAssignee.objects.create(
+            group=group1,
+            project=project1,
+            team=team,
+            date_added=now,
+        )
+
+        path = reverse('sentry-api-0-organization-member-issues-assigned', args=[org.slug, 'me'])
+
+        self.login_as(user)
+
+        resp = self.client.get(path)
+
+        assert resp.status_code == 200
+        assert len(resp.data) == 1
+        assert resp.data[0]['id'] == six.text_type(group1.id)
