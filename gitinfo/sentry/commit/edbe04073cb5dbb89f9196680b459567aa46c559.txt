commit edbe04073cb5dbb89f9196680b459567aa46c559
Author: James Cunningham <jtcunning@getsentry.com>
Date:   Mon May 16 15:09:24 2016 -0700

    Add MessagePackFormatter class and the requires.

diff --git a/setup.py b/setup.py
index da3fd9e4b2..fe41ef607d 100755
--- a/setup.py
+++ b/setup.py
@@ -110,6 +110,7 @@ install_requires = [
     'ipaddr>=2.1.11,<2.2.0',
     'kombu==3.0.30',
     'lxml>=3.4.1',
+    'msgpack-python>=0.4,<0.5',
     'mock>=0.8.0,<1.1',
     'petname>=1.7,<1.8',
     'Pillow>=3.2.0,<3.3.0',
diff --git a/src/sentry/logging/__init__.py b/src/sentry/logging/__init__.py
new file mode 100644
index 0000000000..22b45da05b
--- /dev/null
+++ b/src/sentry/logging/__init__.py
@@ -0,0 +1,8 @@
+"""
+sentry.logging
+~~~~~~~~~~~~~~
+:copyright: (c) 2010-2016 by the Sentry Team, see AUTHORS for more details.
+:license: BSD, see LICENSE for more details.
+"""
+
+from __future__ import absolute_import
diff --git a/src/sentry/logging/formatters.py b/src/sentry/logging/formatters.py
new file mode 100644
index 0000000000..54c4ed6434
--- /dev/null
+++ b/src/sentry/logging/formatters.py
@@ -0,0 +1,31 @@
+"""
+sentry.logging.formatters
+~~~~~~~~~~~~~~~~~~~~~~~~~
+:copyright: (c) 2010-2016 by the Sentry Team, see AUTHORS for more details.
+:license: BSD, see LICENSE for more details.
+"""
+
+from __future__ import absolute_import
+
+from logging import Formatter
+from traceback import format_tb
+
+from django.utils.encoding import force_bytes
+from msgpack import packb
+
+
+class MessagePackFormatter(Formatter):
+    """
+    Return a packed dictionary.
+
+    Will pack the dictionary or the String representation of the message.
+    """
+    def format(self, record):
+        pack = record.msg if isinstance(record.msg, dict) else {
+            'msg': force_bytes(record.msg, errors='replace')
+        }
+        pack['levelname'] = record.levelname
+        if record.exc_info:
+            pack['traceback'] = format_tb(record.exc_info[-1])
+
+        return packb(pack)
