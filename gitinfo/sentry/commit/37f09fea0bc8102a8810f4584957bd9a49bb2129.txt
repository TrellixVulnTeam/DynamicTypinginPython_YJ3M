commit 37f09fea0bc8102a8810f4584957bd9a49bb2129
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jun 8 15:12:59 2017 -0700

    config: add SENTRY_ENVIRONMENT to adjust defaults
    
    - DEBUG, SENTRY_DEBUGGER, and api response delay are enabled for development
    - devserver defaults to development

diff --git a/docs/config.rst b/docs/config.rst
index 51b4c4b3e5..ed412df104 100644
--- a/docs/config.rst
+++ b/docs/config.rst
@@ -29,6 +29,17 @@ the ``sentry config`` CLI helper.
 General
 -------
 
+.. describe:: SENTRY_ENVIRONMENT
+
+    Declared in system environment.
+
+    The environment name for this installation. This will also control defaults
+    for things like ``DEBUG``.
+
+    ::
+
+        SENTRY_ENVIRONMENT=production sentry ...
+
 .. describe:: system.admin-email
 
     Declared in ``config.yml``.
diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index af02ad62b0..dfbf3bd755 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -58,8 +58,11 @@ def env(key, default='', type=None):
 
 env._cache = {}
 
+ENVIRONMENT = env('SENTRY_ENVIRONMENT', 'production')
 
-DEBUG = False
+IS_DEV = ENVIRONMENT == 'development'
+
+DEBUG = IS_DEV
 TEMPLATE_DEBUG = True
 MAINTENANCE = False
 
@@ -766,7 +769,7 @@ SENTRY_FEATURES = {
 SENTRY_DEFAULT_TIME_ZONE = 'UTC'
 
 # Enable the Sentry Debugger (Beta)
-SENTRY_DEBUGGER = False
+SENTRY_DEBUGGER = DEBUG
 
 SENTRY_IGNORE_EXCEPTIONS = (
     'OperationalError',
@@ -1132,7 +1135,7 @@ SENTRY_ENCRYPTION_SCHEMES = (
 )
 
 # Delay (in ms) to induce on API responses
-SENTRY_API_RESPONSE_DELAY = 0
+SENTRY_API_RESPONSE_DELAY = 150 if IS_DEV else None
 
 # Watchers for various application purposes (such as compiling static media)
 # XXX(dcramer): this doesn't work outside of a source distribution as the
@@ -1163,6 +1166,7 @@ def get_raven_config():
     return {
         'release': sentry.__build__,
         'register_signals': True,
+        'environment': ENVIRONMENT,
         'include_paths': [
             'sentry',
         ],
diff --git a/src/sentry/runner/commands/devserver.py b/src/sentry/runner/commands/devserver.py
index 5ef46b23d9..10fe999588 100644
--- a/src/sentry/runner/commands/devserver.py
+++ b/src/sentry/runner/commands/devserver.py
@@ -18,10 +18,11 @@ from sentry.runner.decorators import configuration, log_options
 @click.option('--watchers/--no-watchers', default=True, help='Watch static files and recompile on changes.')
 @click.option('--workers/--no-workers', default=False, help='Run asynchronous workers.')
 @click.option('--browser-reload/--no-browser-reload', default=False, help='Automatic browser refreshing on webpack builds')
+@click.option('--environment', default='development', help='The environment name.')
 @click.argument('bind', default='127.0.0.1:8000', metavar='ADDRESS')
 @log_options()
 @configuration
-def devserver(reload, watchers, workers, browser_reload, bind):
+def devserver(reload, watchers, workers, browser_reload, environment, bind):
     "Starts a lightweight web server for development."
     if ':' in bind:
         host, port = bind.split(':', 1)
@@ -31,6 +32,9 @@ def devserver(reload, watchers, workers, browser_reload, bind):
         port = None
 
     import os
+
+    os.environ['SENTRY_ENVIRONMENT'] = environment
+
     from django.conf import settings
     from sentry import options
     from sentry.services.http import SentryHTTPServer
