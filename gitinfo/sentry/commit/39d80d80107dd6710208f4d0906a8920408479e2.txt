commit 39d80d80107dd6710208f4d0906a8920408479e2
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Aug 15 17:40:31 2017 -0700

    dev: automatically set LDFLAGS when detected in env

diff --git a/Makefile b/Makefile
index 993079a392..cd7e33f601 100644
--- a/Makefile
+++ b/Makefile
@@ -3,6 +3,15 @@ MAKEFLAGS += --jobs=$(CPUS)
 NPM_ROOT = ./node_modules
 STATIC_DIR = src/sentry/static/sentry
 
+ifneq "$(wildcard /usr/local/opt/libxmlsec1/lib)" ""
+	LDFLAGS += -L/usr/local/opt/libxmlsec1/lib
+endif
+ifneq "$(wildcard /usr/local/opt/openssl/lib)" ""
+	LDFLAGS +=- L/usr/local/opt/openssl/lib
+endif
+
+PIP = LDFLAGS="$(LDFLAGS)" pip
+
 develop-only: update-submodules install-brew install-python install-yarn
 
 develop: setup-git develop-only
@@ -27,19 +36,19 @@ install-python:
 
 install-python-base:
 	@echo "--> Installing Python dependencies"
-	pip install "setuptools>=0.9.8" "pip>=8.0.0"
+	$(PIP) install "setuptools>=0.9.8" "pip>=8.0.0"
 	# order matters here, base package must install first
-	pip install -e .
-	pip install ujson
-	pip install "file://`pwd`#egg=sentry[dev,saml]"
+	$(PIP) install -e .
+	$(PIP) install ujson
+	$(PIP) install "file://`pwd`#egg=sentry[dev,saml]"
 
 install-python-tests:
-	pip install "file://`pwd`#egg=sentry[dev,tests,saml]"
+	$(PIP) install "file://`pwd`#egg=sentry[dev,tests,saml]"
 
 dev-postgres: install-python
 
 dev-docs:
-	pip install -r doc-requirements.txt
+	$(PIP) install -r doc-requirements.txt
 
 reset-db:
 	@echo "--> Dropping existing 'sentry' database"
