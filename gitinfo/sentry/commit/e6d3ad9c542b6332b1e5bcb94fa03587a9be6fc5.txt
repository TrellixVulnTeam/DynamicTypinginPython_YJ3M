commit e6d3ad9c542b6332b1e5bcb94fa03587a9be6fc5
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue May 5 15:12:26 2020 +0200

    feat(sessions): Added 24h sorting to API (#18616)

diff --git a/src/sentry/api/endpoints/organization_releases.py b/src/sentry/api/endpoints/organization_releases.py
index 5ee4bf3696..fcb665784f 100644
--- a/src/sentry/api/endpoints/organization_releases.py
+++ b/src/sentry/api/endpoints/organization_releases.py
@@ -212,7 +212,14 @@ class OrganizationReleasesEndpoint(OrganizationReleasesBaseEndpoint, Environment
 
         if sort == "date":
             sort_query = "COALESCE(sentry_release.date_released, sentry_release.date_added)"
-        elif sort in ("crash_free_sessions", "crash_free_users", "sessions", "users"):
+        elif sort in (
+            "crash_free_sessions",
+            "crash_free_users",
+            "sessions",
+            "users",
+            "sessions_24h",
+            "users_24h",
+        ):
             if not flatten:
                 return Response(
                     {"detail": "sorting by crash statistics requires flattening (flatten=1)"},
diff --git a/src/sentry/snuba/sessions.py b/src/sentry/snuba/sessions.py
index 7d3b15d9e5..23138fe762 100644
--- a/src/sentry/snuba/sessions.py
+++ b/src/sentry/snuba/sessions.py
@@ -88,6 +88,11 @@ def get_project_releases_by_stability(
     if stats_period is None:
         stats_period = "24h"
 
+    # Special rule that we support sorting by the last 24h only.
+    if scope.endswith("_24h"):
+        scope = scope[:-4]
+        stats_period = "24h"
+
     _, stats_start, _ = get_rollup_starts_and_buckets(stats_period)
 
     orderby = {
