commit 06112c92cd0e6167564bcdcd83901f47141dce2f
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Nov 15 00:34:14 2012 -0800

    Create what may be a useful test that fails miserably

diff --git a/tests/js/index.html b/tests/js/index.html
index b275b23bc4..f320f0eacf 100644
--- a/tests/js/index.html
+++ b/tests/js/index.html
@@ -58,5 +58,6 @@
 </head>
 
 <body>
+  <div id="dummy"></div>
 </body>
 </html>
diff --git a/tests/js/spec/OrderedElementsViewSpec.js b/tests/js/spec/OrderedElementsViewSpec.js
index c4bc31f933..6ad3fc275a 100644
--- a/tests/js/spec/OrderedElementsViewSpec.js
+++ b/tests/js/spec/OrderedElementsViewSpec.js
@@ -1,7 +1,7 @@
 function make_group(data) {
   data = data || {};
 
-  return {
+  return new app.Group({
     id: data.id || 1,
     score: data.score || 5,
     count: 1,
@@ -15,7 +15,7 @@ function make_group(data) {
     logger: 'root',
     versions: [],
     tags: []
-  };
+  });
 }
 
 describe("OrderedElementsView", function() {
@@ -23,7 +23,8 @@ describe("OrderedElementsView", function() {
 
   beforeEach(function() {
     view = new app.OrderedElementsView({
-        id: 'foo'
+        id: 'foo',
+        maxItems: 3
     });
   });
 
@@ -38,6 +39,14 @@ describe("OrderedElementsView", function() {
       expect(view.collection.models[0].get('id')).toBe(group.id);
     });
 
+    it("replaces in collection", function() {
+      group = make_group();
+      view.addMember(group);
+      view.addMember(group);
+      view.addMember(group);
+      expect(view.collection.length).toBe(1);
+    });
+
     it("sorts members by score after insert", function(){
       view.addMember(make_group({id: 1, score: 3}));
       view.addMember(make_group({id: 2, score: 5}));
@@ -46,4 +55,33 @@ describe("OrderedElementsView", function() {
       expect(view.collection.models[1].get('id')).toBe(1);
     });
   });
+
+  describe("renderMemberInContainer", function() {
+    var group1;
+    var group2;
+    var group3;
+    var group4;
+
+    beforeEach(function() {
+      group1 = make_group({id: 1, score: 3});
+      group2 = make_group({id: 2, score: 5});
+      group3 = make_group({id: 3, score: 2});
+      group4 = make_group({id: 4, score: 6});
+
+      view = new app.OrderedElementsView({
+          id: 'dummy',
+          maxItems: 3
+      });
+      view.$parent = $('<ul></ul>');
+
+      view.addMember(group1);
+      view.addMember(group2);
+      view.addMember(group3);
+      view.addMember(group4);
+    });
+
+    it("truncated to max items", function(){
+      expect(view.collection.length).toBe(3);
+    });
+  });
 });
\ No newline at end of file
