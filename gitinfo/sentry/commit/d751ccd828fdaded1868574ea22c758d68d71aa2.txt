commit d751ccd828fdaded1868574ea22c758d68d71aa2
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Dec 15 13:56:07 2012 -0800

    Correct project_from_api_key_and_id behavior when there is no key user (fixes GH-622)

diff --git a/src/sentry/coreapi.py b/src/sentry/coreapi.py
index 8e207aa528..6cf29c2b75 100644
--- a/src/sentry/coreapi.py
+++ b/src/sentry/coreapi.py
@@ -149,9 +149,9 @@ def project_from_api_key_and_id(api_key, project_id):
 
         tm.project = project
 
-    result = plugins.first('has_perm', tm.user, 'create_event', project)
-    if result is False:
-        raise APIForbidden('Creation of this event was blocked')
+        result = plugins.first('has_perm', tm.user, 'create_event', project)
+        if result is False:
+            raise APIForbidden('Creation of this event was blocked')
 
     return project
 
