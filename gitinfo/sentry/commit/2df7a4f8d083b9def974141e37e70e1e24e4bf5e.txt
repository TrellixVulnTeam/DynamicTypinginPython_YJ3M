commit 2df7a4f8d083b9def974141e37e70e1e24e4bf5e
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Apr 24 12:24:51 2018 -0700

    feat: Add avatar list component (#8149)
    
    For new org dashboard, and other views in future
    
    Displays avatars for up to 5 users, and a number count if there are > 5 users

diff --git a/src/sentry/static/sentry/app/components/avatar/avatarList.jsx b/src/sentry/static/sentry/app/components/avatar/avatarList.jsx
new file mode 100644
index 0000000000..55aedb9489
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/avatar/avatarList.jsx
@@ -0,0 +1,57 @@
+import React from 'react';
+import PropTypes from 'prop-types';
+import styled from 'react-emotion';
+import {Flex} from 'grid-emotion';
+
+import SentryTypes from '../../proptypes';
+import Avatar from '../../components/avatar';
+
+export default class AvatarList extends React.Component {
+  static propTypes = {
+    users: PropTypes.arrayOf(SentryTypes.User).isRequired,
+    avatarSize: PropTypes.number,
+    maxVisibleAvatars: PropTypes.number,
+  };
+
+  static defaultProps = {
+    avatarSize: 28,
+    maxVisibleAvatars: 5,
+  };
+
+  render() {
+    const {users, avatarSize, maxVisibleAvatars} = this.props;
+    const visibleUsers = users.slice(0, maxVisibleAvatars);
+    const numCollapsedUsers = users.length - visibleUsers.length;
+
+    return (
+      <Flex direction="row-reverse">
+        {visibleUsers.map(user => {
+          return <StyledAvatar key={user.id} user={user} size={avatarSize} />;
+        })}
+        {!!numCollapsedUsers && (
+          <CollapsedUsers size={avatarSize}>{numCollapsedUsers}</CollapsedUsers>
+        )}
+      </Flex>
+    );
+  }
+}
+
+const StyledAvatar = styled(props => <Avatar {...props} />)`
+  border-radius: 50%;
+  overflow: hidden;
+  border: 2px solid white;
+  margin-left: -${p => p.size / 2}px;
+`;
+
+const CollapsedUsers = styled(({size}) => <div />)`
+  position: relative;
+  text-align: center;
+  font-weight: 600;
+  background-color: ${p => p.theme.borderLight};
+  color: ${p => p.theme.gray2};
+  font-size: ${p => p.theme.fontSizeSmall}
+  width: ${p => p.size}px;
+  height: ${p => p.size}px;
+  border-radius: 50%;
+  border: 2px solid white;
+`;
diff --git a/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap b/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
new file mode 100644
index 0000000000..ebeeae5be7
--- /dev/null
+++ b/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
@@ -0,0 +1,727 @@
+// Jest Snapshot v1, https://goo.gl/fbAQLP
+
+exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
+<AvatarList
+  avatarSize={28}
+  maxVisibleAvatars={5}
+  users={
+    Array [
+      Object {
+        "email": "foo@example.com",
+        "id": "1",
+        "name": "Foo Bar",
+        "username": "foo@example.com",
+      },
+      Object {
+        "email": "foo@example.com",
+        "id": "2",
+        "name": "Foo Bar",
+        "username": "foo@example.com",
+      },
+      Object {
+        "email": "foo@example.com",
+        "id": "3",
+        "name": "Foo Bar",
+        "username": "foo@example.com",
+      },
+      Object {
+        "email": "foo@example.com",
+        "id": "4",
+        "name": "Foo Bar",
+        "username": "foo@example.com",
+      },
+      Object {
+        "email": "foo@example.com",
+        "id": "5",
+        "name": "Foo Bar",
+        "username": "foo@example.com",
+      },
+      Object {
+        "email": "foo@example.com",
+        "id": "6",
+        "name": "Foo Bar",
+        "username": "foo@example.com",
+      },
+    ]
+  }
+>
+  <Flex
+    direction="row-reverse"
+  >
+    <Base
+      className="css-1go71fn"
+      direction="row-reverse"
+    >
+      <div
+        className="css-1go71fn"
+        is={null}
+      >
+        <StyledAvatar
+          key="1"
+          size={28}
+          user={
+            Object {
+              "email": "foo@example.com",
+              "id": "1",
+              "name": "Foo Bar",
+              "username": "foo@example.com",
+            }
+          }
+        >
+          <Component
+            className="css-5o5its-StyledAvatar css-zk10lh0"
+            size={28}
+            user={
+              Object {
+                "email": "foo@example.com",
+                "id": "1",
+                "name": "Foo Bar",
+                "username": "foo@example.com",
+              }
+            }
+          >
+            <Avatar
+              className="css-5o5its-StyledAvatar css-zk10lh0"
+              hasTooltip={false}
+              size={28}
+              user={
+                Object {
+                  "email": "foo@example.com",
+                  "id": "1",
+                  "name": "Foo Bar",
+                  "username": "foo@example.com",
+                }
+              }
+            >
+              <UserAvatar
+                className="css-5o5its-StyledAvatar css-zk10lh0"
+                gravatar={true}
+                hasTooltip={false}
+                size={28}
+                user={
+                  Object {
+                    "email": "foo@example.com",
+                    "id": "1",
+                    "name": "Foo Bar",
+                    "username": "foo@example.com",
+                  }
+                }
+              >
+                <BaseAvatar
+                  className="css-5o5its-StyledAvatar css-zk10lh0"
+                  gravatar={true}
+                  gravatarId="foo@example.com"
+                  hasTooltip={false}
+                  letterId="foo@example.com"
+                  size={28}
+                  style={Object {}}
+                  title="Foo Bar"
+                  tooltip="Foo Bar (foo@example.com)"
+                  type="gravatar"
+                >
+                  <Tooltip
+                    disabled={true}
+                    title="Foo Bar (foo@example.com)"
+                  >
+                    <span
+                      className="avatar css-5o5its-StyledAvatar css-zk10lh0"
+                      style={
+                        Object {
+                          "height": "28px",
+                          "width": "28px",
+                        }
+                      }
+                    >
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </Tooltip>
+                </BaseAvatar>
+              </UserAvatar>
+            </Avatar>
+          </Component>
+        </StyledAvatar>
+        <StyledAvatar
+          key="2"
+          size={28}
+          user={
+            Object {
+              "email": "foo@example.com",
+              "id": "2",
+              "name": "Foo Bar",
+              "username": "foo@example.com",
+            }
+          }
+        >
+          <Component
+            className="css-5o5its-StyledAvatar css-zk10lh0"
+            size={28}
+            user={
+              Object {
+                "email": "foo@example.com",
+                "id": "2",
+                "name": "Foo Bar",
+                "username": "foo@example.com",
+              }
+            }
+          >
+            <Avatar
+              className="css-5o5its-StyledAvatar css-zk10lh0"
+              hasTooltip={false}
+              size={28}
+              user={
+                Object {
+                  "email": "foo@example.com",
+                  "id": "2",
+                  "name": "Foo Bar",
+                  "username": "foo@example.com",
+                }
+              }
+            >
+              <UserAvatar
+                className="css-5o5its-StyledAvatar css-zk10lh0"
+                gravatar={true}
+                hasTooltip={false}
+                size={28}
+                user={
+                  Object {
+                    "email": "foo@example.com",
+                    "id": "2",
+                    "name": "Foo Bar",
+                    "username": "foo@example.com",
+                  }
+                }
+              >
+                <BaseAvatar
+                  className="css-5o5its-StyledAvatar css-zk10lh0"
+                  gravatar={true}
+                  gravatarId="foo@example.com"
+                  hasTooltip={false}
+                  letterId="foo@example.com"
+                  size={28}
+                  style={Object {}}
+                  title="Foo Bar"
+                  tooltip="Foo Bar (foo@example.com)"
+                  type="gravatar"
+                >
+                  <Tooltip
+                    disabled={true}
+                    title="Foo Bar (foo@example.com)"
+                  >
+                    <span
+                      className="avatar css-5o5its-StyledAvatar css-zk10lh0"
+                      style={
+                        Object {
+                          "height": "28px",
+                          "width": "28px",
+                        }
+                      }
+                    >
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </Tooltip>
+                </BaseAvatar>
+              </UserAvatar>
+            </Avatar>
+          </Component>
+        </StyledAvatar>
+        <StyledAvatar
+          key="3"
+          size={28}
+          user={
+            Object {
+              "email": "foo@example.com",
+              "id": "3",
+              "name": "Foo Bar",
+              "username": "foo@example.com",
+            }
+          }
+        >
+          <Component
+            className="css-5o5its-StyledAvatar css-zk10lh0"
+            size={28}
+            user={
+              Object {
+                "email": "foo@example.com",
+                "id": "3",
+                "name": "Foo Bar",
+                "username": "foo@example.com",
+              }
+            }
+          >
+            <Avatar
+              className="css-5o5its-StyledAvatar css-zk10lh0"
+              hasTooltip={false}
+              size={28}
+              user={
+                Object {
+                  "email": "foo@example.com",
+                  "id": "3",
+                  "name": "Foo Bar",
+                  "username": "foo@example.com",
+                }
+              }
+            >
+              <UserAvatar
+                className="css-5o5its-StyledAvatar css-zk10lh0"
+                gravatar={true}
+                hasTooltip={false}
+                size={28}
+                user={
+                  Object {
+                    "email": "foo@example.com",
+                    "id": "3",
+                    "name": "Foo Bar",
+                    "username": "foo@example.com",
+                  }
+                }
+              >
+                <BaseAvatar
+                  className="css-5o5its-StyledAvatar css-zk10lh0"
+                  gravatar={true}
+                  gravatarId="foo@example.com"
+                  hasTooltip={false}
+                  letterId="foo@example.com"
+                  size={28}
+                  style={Object {}}
+                  title="Foo Bar"
+                  tooltip="Foo Bar (foo@example.com)"
+                  type="gravatar"
+                >
+                  <Tooltip
+                    disabled={true}
+                    title="Foo Bar (foo@example.com)"
+                  >
+                    <span
+                      className="avatar css-5o5its-StyledAvatar css-zk10lh0"
+                      style={
+                        Object {
+                          "height": "28px",
+                          "width": "28px",
+                        }
+                      }
+                    >
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </Tooltip>
+                </BaseAvatar>
+              </UserAvatar>
+            </Avatar>
+          </Component>
+        </StyledAvatar>
+        <StyledAvatar
+          key="4"
+          size={28}
+          user={
+            Object {
+              "email": "foo@example.com",
+              "id": "4",
+              "name": "Foo Bar",
+              "username": "foo@example.com",
+            }
+          }
+        >
+          <Component
+            className="css-5o5its-StyledAvatar css-zk10lh0"
+            size={28}
+            user={
+              Object {
+                "email": "foo@example.com",
+                "id": "4",
+                "name": "Foo Bar",
+                "username": "foo@example.com",
+              }
+            }
+          >
+            <Avatar
+              className="css-5o5its-StyledAvatar css-zk10lh0"
+              hasTooltip={false}
+              size={28}
+              user={
+                Object {
+                  "email": "foo@example.com",
+                  "id": "4",
+                  "name": "Foo Bar",
+                  "username": "foo@example.com",
+                }
+              }
+            >
+              <UserAvatar
+                className="css-5o5its-StyledAvatar css-zk10lh0"
+                gravatar={true}
+                hasTooltip={false}
+                size={28}
+                user={
+                  Object {
+                    "email": "foo@example.com",
+                    "id": "4",
+                    "name": "Foo Bar",
+                    "username": "foo@example.com",
+                  }
+                }
+              >
+                <BaseAvatar
+                  className="css-5o5its-StyledAvatar css-zk10lh0"
+                  gravatar={true}
+                  gravatarId="foo@example.com"
+                  hasTooltip={false}
+                  letterId="foo@example.com"
+                  size={28}
+                  style={Object {}}
+                  title="Foo Bar"
+                  tooltip="Foo Bar (foo@example.com)"
+                  type="gravatar"
+                >
+                  <Tooltip
+                    disabled={true}
+                    title="Foo Bar (foo@example.com)"
+                  >
+                    <span
+                      className="avatar css-5o5its-StyledAvatar css-zk10lh0"
+                      style={
+                        Object {
+                          "height": "28px",
+                          "width": "28px",
+                        }
+                      }
+                    >
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </Tooltip>
+                </BaseAvatar>
+              </UserAvatar>
+            </Avatar>
+          </Component>
+        </StyledAvatar>
+        <StyledAvatar
+          key="5"
+          size={28}
+          user={
+            Object {
+              "email": "foo@example.com",
+              "id": "5",
+              "name": "Foo Bar",
+              "username": "foo@example.com",
+            }
+          }
+        >
+          <Component
+            className="css-5o5its-StyledAvatar css-zk10lh0"
+            size={28}
+            user={
+              Object {
+                "email": "foo@example.com",
+                "id": "5",
+                "name": "Foo Bar",
+                "username": "foo@example.com",
+              }
+            }
+          >
+            <Avatar
+              className="css-5o5its-StyledAvatar css-zk10lh0"
+              hasTooltip={false}
+              size={28}
+              user={
+                Object {
+                  "email": "foo@example.com",
+                  "id": "5",
+                  "name": "Foo Bar",
+                  "username": "foo@example.com",
+                }
+              }
+            >
+              <UserAvatar
+                className="css-5o5its-StyledAvatar css-zk10lh0"
+                gravatar={true}
+                hasTooltip={false}
+                size={28}
+                user={
+                  Object {
+                    "email": "foo@example.com",
+                    "id": "5",
+                    "name": "Foo Bar",
+                    "username": "foo@example.com",
+                  }
+                }
+              >
+                <BaseAvatar
+                  className="css-5o5its-StyledAvatar css-zk10lh0"
+                  gravatar={true}
+                  gravatarId="foo@example.com"
+                  hasTooltip={false}
+                  letterId="foo@example.com"
+                  size={28}
+                  style={Object {}}
+                  title="Foo Bar"
+                  tooltip="Foo Bar (foo@example.com)"
+                  type="gravatar"
+                >
+                  <Tooltip
+                    disabled={true}
+                    title="Foo Bar (foo@example.com)"
+                  >
+                    <span
+                      className="avatar css-5o5its-StyledAvatar css-zk10lh0"
+                      style={
+                        Object {
+                          "height": "28px",
+                          "width": "28px",
+                        }
+                      }
+                    >
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </Tooltip>
+                </BaseAvatar>
+              </UserAvatar>
+            </Avatar>
+          </Component>
+        </StyledAvatar>
+        <CollapsedUsers
+          size={28}
+        >
+          <Component
+            className="css-x39mfn-CollapsedUsers css-zk10lh1"
+            size={28}
+          >
+            <div />
+          </Component>
+        </CollapsedUsers>
+      </div>
+    </Base>
+  </Flex>
+</AvatarList>
+`;
+
+exports[`AvatarList renders with user avatars 1`] = `
+<AvatarList
+  avatarSize={28}
+  maxVisibleAvatars={5}
+  users={
+    Array [
+      Object {
+        "email": "foo@example.com",
+        "id": "1",
+        "name": "Foo Bar",
+        "username": "foo@example.com",
+      },
+      Object {
+        "email": "foo@example.com",
+        "id": "2",
+        "name": "Foo Bar",
+        "username": "foo@example.com",
+      },
+    ]
+  }
+>
+  <Flex
+    direction="row-reverse"
+  >
+    <Base
+      className="css-1go71fn"
+      direction="row-reverse"
+    >
+      <div
+        className="css-1go71fn"
+        is={null}
+      >
+        <StyledAvatar
+          key="1"
+          size={28}
+          user={
+            Object {
+              "email": "foo@example.com",
+              "id": "1",
+              "name": "Foo Bar",
+              "username": "foo@example.com",
+            }
+          }
+        >
+          <Component
+            className="css-5o5its-StyledAvatar css-zk10lh0"
+            size={28}
+            user={
+              Object {
+                "email": "foo@example.com",
+                "id": "1",
+                "name": "Foo Bar",
+                "username": "foo@example.com",
+              }
+            }
+          >
+            <Avatar
+              className="css-5o5its-StyledAvatar css-zk10lh0"
+              hasTooltip={false}
+              size={28}
+              user={
+                Object {
+                  "email": "foo@example.com",
+                  "id": "1",
+                  "name": "Foo Bar",
+                  "username": "foo@example.com",
+                }
+              }
+            >
+              <UserAvatar
+                className="css-5o5its-StyledAvatar css-zk10lh0"
+                gravatar={true}
+                hasTooltip={false}
+                size={28}
+                user={
+                  Object {
+                    "email": "foo@example.com",
+                    "id": "1",
+                    "name": "Foo Bar",
+                    "username": "foo@example.com",
+                  }
+                }
+              >
+                <BaseAvatar
+                  className="css-5o5its-StyledAvatar css-zk10lh0"
+                  gravatar={true}
+                  gravatarId="foo@example.com"
+                  hasTooltip={false}
+                  letterId="foo@example.com"
+                  size={28}
+                  style={Object {}}
+                  title="Foo Bar"
+                  tooltip="Foo Bar (foo@example.com)"
+                  type="gravatar"
+                >
+                  <Tooltip
+                    disabled={true}
+                    title="Foo Bar (foo@example.com)"
+                  >
+                    <span
+                      className="avatar css-5o5its-StyledAvatar css-zk10lh0"
+                      style={
+                        Object {
+                          "height": "28px",
+                          "width": "28px",
+                        }
+                      }
+                    >
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </Tooltip>
+                </BaseAvatar>
+              </UserAvatar>
+            </Avatar>
+          </Component>
+        </StyledAvatar>
+        <StyledAvatar
+          key="2"
+          size={28}
+          user={
+            Object {
+              "email": "foo@example.com",
+              "id": "2",
+              "name": "Foo Bar",
+              "username": "foo@example.com",
+            }
+          }
+        >
+          <Component
+            className="css-5o5its-StyledAvatar css-zk10lh0"
+            size={28}
+            user={
+              Object {
+                "email": "foo@example.com",
+                "id": "2",
+                "name": "Foo Bar",
+                "username": "foo@example.com",
+              }
+            }
+          >
+            <Avatar
+              className="css-5o5its-StyledAvatar css-zk10lh0"
+              hasTooltip={false}
+              size={28}
+              user={
+                Object {
+                  "email": "foo@example.com",
+                  "id": "2",
+                  "name": "Foo Bar",
+                  "username": "foo@example.com",
+                }
+              }
+            >
+              <UserAvatar
+                className="css-5o5its-StyledAvatar css-zk10lh0"
+                gravatar={true}
+                hasTooltip={false}
+                size={28}
+                user={
+                  Object {
+                    "email": "foo@example.com",
+                    "id": "2",
+                    "name": "Foo Bar",
+                    "username": "foo@example.com",
+                  }
+                }
+              >
+                <BaseAvatar
+                  className="css-5o5its-StyledAvatar css-zk10lh0"
+                  gravatar={true}
+                  gravatarId="foo@example.com"
+                  hasTooltip={false}
+                  letterId="foo@example.com"
+                  size={28}
+                  style={Object {}}
+                  title="Foo Bar"
+                  tooltip="Foo Bar (foo@example.com)"
+                  type="gravatar"
+                >
+                  <Tooltip
+                    disabled={true}
+                    title="Foo Bar (foo@example.com)"
+                  >
+                    <span
+                      className="avatar css-5o5its-StyledAvatar css-zk10lh0"
+                      style={
+                        Object {
+                          "height": "28px",
+                          "width": "28px",
+                        }
+                      }
+                    >
+                      <img
+                        onError={[Function]}
+                        onLoad={[Function]}
+                        src="undefined/avatar/b48def645758b95537d4424c84d1a9ff?d=blank&s=32"
+                      />
+                    </span>
+                  </Tooltip>
+                </BaseAvatar>
+              </UserAvatar>
+            </Avatar>
+          </Component>
+        </StyledAvatar>
+      </div>
+    </Base>
+  </Flex>
+</AvatarList>
+`;
diff --git a/tests/js/spec/components/avatar/avatarList.spec.jsx b/tests/js/spec/components/avatar/avatarList.spec.jsx
new file mode 100644
index 0000000000..02dcfedde2
--- /dev/null
+++ b/tests/js/spec/components/avatar/avatarList.spec.jsx
@@ -0,0 +1,31 @@
+import React from 'react';
+import {mount} from 'enzyme';
+
+import AvatarList from 'app/components/avatar/avatarList';
+
+describe('AvatarList', function() {
+  it('renders with user avatars', function() {
+    const users = [TestStubs.User({id: '1'}), TestStubs.User({id: '2'})];
+
+    const wrapper = mount(<AvatarList users={users} />);
+    expect(wrapper.find('Avatar')).toHaveLength(2);
+    expect(wrapper.find('CollapsedUsers')).toHaveLength(0);
+    expect(wrapper).toMatchSnapshot();
+  });
+
+  it('renders with collapsed avatar count if > 5 users', function() {
+    const users = [
+      TestStubs.User({id: '1'}),
+      TestStubs.User({id: '2'}),
+      TestStubs.User({id: '3'}),
+      TestStubs.User({id: '4'}),
+      TestStubs.User({id: '5'}),
+      TestStubs.User({id: '6'}),
+    ];
+
+    const wrapper = mount(<AvatarList users={users} />);
+    expect(wrapper.find('Avatar')).toHaveLength(5);
+    expect(wrapper.find('CollapsedUsers')).toHaveLength(1);
+    expect(wrapper).toMatchSnapshot();
+  });
+});
