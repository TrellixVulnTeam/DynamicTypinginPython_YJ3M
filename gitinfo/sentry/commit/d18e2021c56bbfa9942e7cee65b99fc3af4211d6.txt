commit d18e2021c56bbfa9942e7cee65b99fc3af4211d6
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Fri May 11 08:33:20 2018 -0700

    fix(dashboard): Check for bookmarks before rendering empty state (#8407)
    
    This is because projects can be bookmarked without the user necessarily being in a team with that project

diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/index.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/index.jsx
index 5080f88f3c..149e68c27c 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard/index.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/index.jsx
@@ -78,9 +78,10 @@ class Dashboard extends React.Component {
             </LazyLoad>
           );
         })}
-        {!teamSlugs.length && (
-          <EmptyState projects={projects} teams={teams} organization={organization} />
-        )}
+        {teamSlugs.length === 0 &&
+          favorites.length === 0 && (
+            <EmptyState projects={projects} teams={teams} organization={organization} />
+          )}
       </React.Fragment>
     );
   }
diff --git a/tests/js/spec/views/organizationDashboard/index.spec.jsx b/tests/js/spec/views/organizationDashboard/index.spec.jsx
index 19ce823c58..6dd6c5cea1 100644
--- a/tests/js/spec/views/organizationDashboard/index.spec.jsx
+++ b/tests/js/spec/views/organizationDashboard/index.spec.jsx
@@ -182,6 +182,38 @@ describe('OrganizationDashboard', function() {
       expect(projectCards.at(4).prop('data-test-id')).toBe('m');
       expect(projectCards.at(5).prop('data-test-id')).toBe('z');
     });
+
+    it('renders favorited projects if there is any, even if team list is empty', function() {
+      const projects = [
+        TestStubs.Project({
+          id: '1',
+          slug: 'm',
+          teams: [],
+          isBookmarked: true,
+          stats: [],
+        }),
+      ];
+      MockApiClient.addMockResponse({
+        url: '/organizations/org-slug/projects/',
+        body: projects,
+      });
+
+      const wrapper = mount(
+        <Dashboard
+          teams={[]}
+          projects={projects}
+          organization={TestStubs.Organization()}
+          params={{orgId: 'org-slug'}}
+        />,
+        routerContext
+      );
+
+      expect(wrapper.find('TeamSection')).toHaveLength(1);
+      const projectCards = wrapper.find('ProjectCard');
+      expect(projectCards).toHaveLength(1);
+      const emptyState = wrapper.find('EmptyState');
+      expect(emptyState).toHaveLength(0);
+    });
   });
 
   describe('ProjectsStatsStore', function() {
