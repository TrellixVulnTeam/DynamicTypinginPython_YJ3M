commit 779be71ebfa286a0ce8f2d9bbcd65492867f1f3a
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Jan 4 21:01:15 2016 -0800

    Compile the version file needed as a part of sdist

diff --git a/setup.py b/setup.py
index 54bb450318..9d4b959ea3 100755
--- a/setup.py
+++ b/setup.py
@@ -355,6 +355,7 @@ class BuildJavascriptCommand(Command):
                     files.append(filename[len(base):].lstrip(os.path.sep))
 
         files.append('src/sentry/sentry-package.json')
+        files.append('src/sentry/static/version')
 
     def _build_static(self):
         work_path = self.work_path
@@ -386,6 +387,8 @@ class BuildJavascriptCommand(Command):
         }
         with open(self.sentry_package_json_path, 'w') as fp:
             json.dump(manifest, fp)
+        with open(self.sentry_static_version_path, 'w') as fp:
+            fp.write(version_info['build'])
         return manifest
 
     @property
@@ -398,6 +401,11 @@ class BuildJavascriptCommand(Command):
         return os.path.abspath(os.path.join(
             self.build_lib, 'sentry/sentry-package.json'))
 
+    @property
+    def sentry_static_version_path(self):
+        return os.path.abspath(os.path.join(
+            self.build_lib, 'sentry/static/version'))
+
 
 class SentrySDistCommand(SDistCommand):
     # If we are not a light build we want to also execute build_js as
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index f743f66d8d..28cea1b435 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -127,8 +127,8 @@ urlpatterns += patterns(
     url(r'^api/(?P<project_id>\d+)/csp-report/$', api.CspReportView.as_view(),
         name='sentry-api-csp-report'),
 
-    # The static version is either a 10 digit timestamp, or a 32 char md5 hash
-    url(r'^_static/(?:(?P<version>\d{10}|[a-f0-9]{32})/)?(?P<module>[^/]+)/(?P<path>.*)$', generic.static_media,
+    # The static version is either a 10 digit timestamp, a sha1, or md5 hash
+    url(r'^_static/(?:(?P<version>\d{10}|[a-f0-9]{32,40})/)?(?P<module>[^/]+)/(?P<path>.*)$', generic.static_media,
         name='sentry-media'),
 
     # API
