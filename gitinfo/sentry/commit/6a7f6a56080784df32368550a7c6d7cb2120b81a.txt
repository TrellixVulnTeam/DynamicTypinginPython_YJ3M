commit 6a7f6a56080784df32368550a7c6d7cb2120b81a
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Apr 14 00:32:35 2014 -0400

    Use `self.ttl` instead of assuming 60s buckets

diff --git a/src/sentry/quotas/redis.py b/src/sentry/quotas/redis.py
index 74e19becc9..c8a1412a8b 100644
--- a/src/sentry/quotas/redis.py
+++ b/src/sentry/quotas/redis.py
@@ -56,13 +56,13 @@ class RedisQuota(Quota):
         return False
 
     def _get_system_key(self):
-        return 'quota:s:%s' % (int(time.time() / 60),)
+        return 'quota:s:%s' % (int(time.time() / self.ttl),)
 
     def _get_team_key(self, team):
-        return 'quota:t:%s:%s' % (team.id, int(time.time() / 60))
+        return 'quota:t:%s:%s' % (team.id, int(time.time() / self.ttl))
 
     def _get_project_key(self, project):
-        return 'quota:p:%s:%s' % (project.id, int(time.time() / 60))
+        return 'quota:p:%s:%s' % (project.id, int(time.time() / self.ttl))
 
     def _incr_project(self, project):
         if project.team:
