commit 96b7fb28e3d6fe61a910ed472e2f8b0f1b7ab4e9
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Thu Oct 15 00:11:58 2015 +0200

    Added notifications for activities.

diff --git a/src/sentry/models/activity.py b/src/sentry/models/activity.py
index 01a313bed7..2fa1800544 100644
--- a/src/sentry/models/activity.py
+++ b/src/sentry/models/activity.py
@@ -18,6 +18,23 @@ from sentry.db.models import (
     sane_repr
 )
 from sentry.utils.http import absolute_uri
+from sentry.utils.safe import safe_execute
+
+
+def get_activity_notifiers(project):
+    from sentry.plugins.bases.notify import NotificationPlugin
+    from sentry.plugins import plugins
+
+    results = []
+    for plugin in plugins.for_project(project, version=1):
+        if isinstance(plugin, NotificationPlugin):
+            results.append(plugin)
+
+    for plugin in plugins.for_project(project, version=2):
+        for notifier in (safe_execute(plugin.get_notifiers) or ()):
+            results.append(notifier)
+
+    return results
 
 
 class Activity(Model):
@@ -207,3 +224,6 @@ class Activity(Model):
         )
         msg.add_users(send_to, project=self.project)
         msg.send_async()
+
+        for notifier in get_activity_notifiers(self.project):
+            notifier.notify_about_activity(self)
diff --git a/src/sentry/plugins/base/notifier.py b/src/sentry/plugins/base/notifier.py
index 2f1970f5be..96aeeec2e5 100644
--- a/src/sentry/plugins/base/notifier.py
+++ b/src/sentry/plugins/base/notifier.py
@@ -40,3 +40,6 @@ class Notifier(object):
             self.logger.info('Notification for project %s dropped due to rate limiting', project.id)
 
         return not rate_limited
+
+    def notify_about_activity(self, activity):
+        pass
diff --git a/src/sentry/plugins/bases/notify.py b/src/sentry/plugins/bases/notify.py
index b2ae0a51fe..d7f7b2929c 100644
--- a/src/sentry/plugins/bases/notify.py
+++ b/src/sentry/plugins/bases/notify.py
@@ -60,6 +60,9 @@ class NotificationPlugin(Plugin):
     def notify_users(self, group, event, fail_silently=False):
         raise NotImplementedError
 
+    def notify_about_activity(self, activity):
+        pass
+
     def get_sendable_users(self, project):
         conf_key = self.get_conf_key()
 
