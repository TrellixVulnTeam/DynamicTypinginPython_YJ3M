commit 35b4b91dc61d1d599b8ac5579db983de0b2dc978
Author: Eric Feng <ehfeng@users.noreply.github.com>
Date:   Thu Aug 10 12:18:25 2017 -0700

    fixes SENTRY-43N (#5858)
    
    Catching KeyError in sample event creation

diff --git a/src/sentry/utils/samples.py b/src/sentry/utils/samples.py
index 373d574d37..45b7adc1a6 100644
--- a/src/sentry/utils/samples.py
+++ b/src/sentry/utils/samples.py
@@ -108,10 +108,14 @@ def load_data(platform, default=None, timestamp=None, sample_name=None):
         language = platform_data['language']
 
     for platform in (platform, language, default):
-        if platform is None:
+        if not platform:
+            continue
+
+        try:
+            sample_name = sample_name or INTEGRATION_ID_TO_PLATFORM_DATA[platform]['name']
+        except KeyError:
             continue
 
-        sample_name = sample_name or INTEGRATION_ID_TO_PLATFORM_DATA[platform]['name']
         json_path = os.path.join(DATA_ROOT, 'samples', '%s.json' % (platform.encode('utf-8'), ))
 
         if not os.path.exists(json_path):
