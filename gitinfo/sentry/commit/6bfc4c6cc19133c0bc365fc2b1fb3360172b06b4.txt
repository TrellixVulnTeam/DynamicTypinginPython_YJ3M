commit 6bfc4c6cc19133c0bc365fc2b1fb3360172b06b4
Author: Ben Vinegar <ben@benv.ca>
Date:   Sun Mar 6 17:11:37 2016 -0800

    Give orgs -> projects -> all teams a permament url/route

diff --git a/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx b/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx
index 07848bd595..35a93f19fc 100644
--- a/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx
@@ -38,8 +38,8 @@ const HomeSidebar = React.createClass({
         <ul className="nav nav-stacked">
           <ListLink to={`/organizations/${orgId}/dashboard/`}>{t('Dashboard')}</ListLink>
           <ListLink to={`/${orgId}/`} isActive={() => {
-            // return true if path matches /slug-name/
-            return /^\/[^\/]+\/$/.test(this.context.location.pathname);
+            // return true if path matches /slug-name/ OR /organizations/slug-name/all-teams/
+            return /^\/([^\/]+|organizations\/[^\/]+\/all-teams)\/$/.test(this.context.location.pathname);
           }}>{t('Projects')}</ListLink>
           {access.has('org:read') &&
             <ListLink to={`/organizations/${orgId}/stats/`}>{t('Stats')}</ListLink>
diff --git a/src/sentry/static/sentry/app/routes.jsx b/src/sentry/static/sentry/app/routes.jsx
index 95497aed81..4542d484d8 100644
--- a/src/sentry/static/sentry/app/routes.jsx
+++ b/src/sentry/static/sentry/app/routes.jsx
@@ -23,6 +23,7 @@ import OrganizationDetails from './views/organizationDetails';
 import OrganizationRateLimits from './views/organizationRateLimits';
 import OrganizationStats from './views/organizationStats';
 import OrganizationTeams from './views/organizationTeams';
+import AllTeamsList from './views/organizationTeams/allTeamsList';
 import ProjectChooser from './views/projectChooser';
 import ProjectDashboard from './views/projectDashboard';
 import ProjectDetails from './views/projectDetails';
@@ -69,7 +70,10 @@ let routes = (
     <Route path="/share/issue/:shareId/" component={errorHandler(SharedGroupDetails)} />
 
     <Route path="/:orgId/" component={errorHandler(OrganizationDetails)}>
-      <IndexRoute component={errorHandler(OrganizationTeams)} />
+      <IndexRoute component={errorHandler(OrganizationTeams)}/>
+      <Route path="/organizations/:orgId/all-teams/" component={errorHandler(OrganizationTeams)}>
+        <IndexRoute component={errorHandler(AllTeamsList)}/>
+      </Route>
 
       <Route path="/organizations/:orgId/dashboard/" component={errorHandler(OrganizationDashboard)} />
       <Route path="/organizations/:orgId/issues/assigned/" component={errorHandler(MyIssuesAssignedToMe)} />
diff --git a/src/sentry/static/sentry/app/views/organizationTeams/allTeamsList.jsx b/src/sentry/static/sentry/app/views/organizationTeams/allTeamsList.jsx
index 42746d5054..ac19576465 100644
--- a/src/sentry/static/sentry/app/views/organizationTeams/allTeamsList.jsx
+++ b/src/sentry/static/sentry/app/views/organizationTeams/allTeamsList.jsx
@@ -8,9 +8,9 @@ import {tct} from '../../locale';
 
 const AllTeamsList = React.createClass({
   propTypes: {
-    access: React.PropTypes.object.isRequired,
-    organization: PropTypes.Organization.isRequired,
-    teamList: React.PropTypes.arrayOf(PropTypes.Team).isRequired,
+    access: React.PropTypes.object,
+    organization: PropTypes.Organization,
+    teamList: React.PropTypes.arrayOf(PropTypes.Team),
     openMembership: React.PropTypes.bool
   },
 
diff --git a/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx b/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx
index 8aefffbe53..ff2db1d421 100644
--- a/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx
+++ b/src/sentry/static/sentry/app/views/organizationTeams/expandedTeamList.jsx
@@ -15,7 +15,6 @@ const ExpandedTeamList = React.createClass({
     organization: PropTypes.Organization.isRequired,
     teamList: React.PropTypes.arrayOf(PropTypes.Team).isRequired,
     projectStats: React.PropTypes.object,
-    showAllTeams: React.PropTypes.func.isRequired,
     hasTeams: React.PropTypes.bool
   },
 
@@ -120,17 +119,12 @@ const ExpandedTeamList = React.createClass({
     );
   },
 
-  showAllTeams(e) {
-    e.preventDefault();
-    this.props.showAllTeams();
-  },
-
   renderEmpty() {
     if (this.props.hasTeams) {
       return (
         <p>
           {tct('You are not a member of any teams. [joinLink:Join an existing team] or [createLink:create a new one].', {
-            joinLink: <a onClick={this.showAllTeams} />,
+            joinLink: <Link to={`/organizations/${this.props.organization.slug}/all-teams/`}/>,
             createLink: <a href={this.urlPrefix() + '/teams/new/'} />
           })}
         </p>
diff --git a/src/sentry/static/sentry/app/views/organizationTeams/index.jsx b/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
index cefb9161e1..4c82d87b0d 100644
--- a/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
+++ b/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
@@ -1,5 +1,6 @@
 import React from 'react';
 import Reflux from 'reflux';
+import {Link} from 'react-router';
 
 import {t} from '../../locale';
 import ApiMixin from '../../mixins/apiMixin';
@@ -10,7 +11,6 @@ import TooltipMixin from '../../mixins/tooltip';
 import {sortArray} from '../../utils';
 
 import ExpandedTeamList from './expandedTeamList';
-import AllTeamsList from './allTeamsList';
 import OrganizationStatOverview from './organizationStatOverview';
 
 const OrganizationTeams = React.createClass({
@@ -25,7 +25,6 @@ const OrganizationTeams = React.createClass({
 
   getInitialState() {
     return {
-      activeNav: 'your-teams',
       teamList: sortArray(TeamStore.getAll(), function(o) {
         return o.name;
       }),
@@ -70,12 +69,6 @@ const OrganizationTeams = React.createClass({
     this.fetchStats();
   },
 
-  toggleTeams(nav) {
-    this.setState({
-      activeNav: nav
-    });
-  },
-
   render() {
     if (!this.context.organization)
       return null;
@@ -84,7 +77,8 @@ const OrganizationTeams = React.createClass({
     let features = this.getFeatures();
     let org = this.getOrganization();
 
-    let activeNav = this.state.activeNav;
+    let activeNav = /^\/[^\/]+\/$/.test(this.props.location.pathname) ?
+      'your-teams' : 'all-teams';
     let allTeams = this.state.teamList;
     let activeTeams = this.state.teamList.filter((team) => team.isMember);
 
@@ -95,24 +89,24 @@ const OrganizationTeams = React.createClass({
             <div className="team-list">
               <ul className="nav nav-tabs border-bottom">
                 <li className={activeNav === 'your-teams' && 'active'}>
-                  <a onClick={this.toggleTeams.bind(this, 'your-teams')}>{t('Your Teams')}</a>
+                  <Link to={`/${org.slug}/`}>{t('Your Teams')}</Link>
                 </li>
                 <li className={activeNav === 'all-teams' && 'active'}>
-                  <a onClick={this.toggleTeams.bind(this, 'all-teams')}>{t('All Teams')} <span className="badge badge-soft">{allTeams.length}</span></a>
+                  <Link to={`/organizations/${org.slug}/all-teams/`}>{t('All Teams')} <span className="badge badge-soft">{allTeams.length}</span></Link>
                 </li>
               </ul>
-              {activeNav == 'your-teams' ?
+              {this.props.children ? /* should be AllTeamsList */
+                React.cloneElement(this.props.children, {
+                  organization: org,
+                  teamList: allTeams,
+                  access: access,
+                  openMembership: features.has('open-membership') || access.has('org:write')
+                }) :
                 <ExpandedTeamList
-                    organization={org} teamList={activeTeams}
-                    projectStats={this.state.projectStats}
-                    hasTeams={allTeams.length !== 0}
-                    access={access}
-                    showAllTeams={this.toggleTeams.bind(this, 'all-teams')} />
-              :
-                <AllTeamsList
-                  organization={org} teamList={allTeams}
-                  access={access}
-                  openMembership={features.has('open-membership') || access.has('org:write')} />
+                  organization={org} teamList={activeTeams}
+                  projectStats={this.state.projectStats}
+                  hasTeams={allTeams.length !== 0}
+                  access={access}/>
               }
             </div>
           </div>
