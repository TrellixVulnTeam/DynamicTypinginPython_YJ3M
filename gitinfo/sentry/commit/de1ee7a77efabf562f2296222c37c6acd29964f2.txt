commit de1ee7a77efabf562f2296222c37c6acd29964f2
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Wed Dec 13 15:03:48 2017 -0800

    fix(ui): Handle org level settings that cannot be customized per-project

diff --git a/src/sentry/static/sentry/app/views/projectGeneralSettings.jsx b/src/sentry/static/sentry/app/views/projectGeneralSettings.jsx
index df271647f7..1afcb91f66 100644
--- a/src/sentry/static/sentry/app/views/projectGeneralSettings.jsx
+++ b/src/sentry/static/sentry/app/views/projectGeneralSettings.jsx
@@ -147,6 +147,18 @@ export default class ProjectGeneralSettings extends AsyncView {
   }
 
   renderBody() {
+    // These values cannot be changed on a project basis if any of them are 'true' at the org level
+    let orgOverrideFields = ['dataScrubber', 'dataScrubberDefaults', 'scrubIPAddresses'];
+
+    let orgOverrides = orgOverrideFields.reduce((res, key) => {
+      res[key] = this.context.organization[key];
+      return res;
+    }, {});
+
+    let orgOverrideDisabledReason = t(
+      "This option is enforced by your organization's settings and cannot be customized per-project."
+    );
+
     let project = this.state.data;
     let {orgId, projectId} = this.props.params;
     let initialData = {
@@ -267,11 +279,17 @@ export default class ProjectGeneralSettings extends AsyncView {
             </div>
             <div className="box-content with-padding">
               <BooleanField
+                disabled={orgOverrides.dataScrubber}
+                disabledReason={orgOverrideDisabledReason}
+                value={orgOverrides.dataScrubber || null}
                 name="dataScrubber"
                 label={t('Data scrubber')}
                 help={t('Enable server-side data scrubbing.')}
               />
               <BooleanField
+                disabled={orgOverrides.dataScrubberDefaults}
+                value={orgOverrides.dataScrubberDefaults || null}
+                disabledReason={orgOverrideDisabledReason}
                 name="dataScrubberDefaults"
                 label={t('Use default scrubbers')}
                 help={t(
@@ -295,6 +313,9 @@ export default class ProjectGeneralSettings extends AsyncView {
                 placeholder={t('e.g. email')}
               />
               <BooleanField
+                disabled={orgOverrides.scrubIPAddresses}
+                value={orgOverrides.scrubIPAddresses || null}
+                disabledReason={orgOverrideDisabledReason}
                 name="scrubIPAddresses"
                 label={t("Don't store IP Addresses")}
                 help={t('Prevent IP addresses from being stored for new events.')}
diff --git a/src/sentry/templates/sentry/projects/manage.html b/src/sentry/templates/sentry/projects/manage.html
index 7f946bd77c..566e587ce7 100644
--- a/src/sentry/templates/sentry/projects/manage.html
+++ b/src/sentry/templates/sentry/projects/manage.html
@@ -28,62 +28,6 @@
   </a>
 {% endblock %}
 
-{% block main %}
-    <div class="box">
-      <div class="box-header">
-        <h3>{% trans "Remove Project" %}</h3>
-      </div>
-      <div class="box-content with-padding">
-        {% if not ACCESS.project_admin %}
-        <p>{% trans "You do not have the required permission to remove this project." %}</p>
-        {% elif project.is_internal_project %}
-        <p>{% trans "This project cannot be removed. It is used internally by the Sentry server." %}</p>
-        {% else %}
-        <p class="clearfix">
-          <a href="{% url 'sentry-remove-project' project.organization.slug project.slug %}" class="btn btn-danger pull-right">{% trans "Remove Project" %}</a>
-          Remove the <strong>{{ project.slug }}</strong> project and all related data. </br>
-          Careful, this action cannot be undone.
-        </p>
-        {% endif %}
-      </div>
-    </div>
-
-    <div class="box">
-      <div class="box-header">
-        <h3>{% trans "Transfer Project" %}</h3>
-      </div>
-      <div class="box-content with-padding">
-        {% if not ACCESS.project_admin %}
-        <p>{% trans "You do not have the required permission to remove this project." %}</p>
-        {% elif project.is_internal_project %}
-        <p>{% trans "This project cannot be removed. It is used internally by the Sentry server." %}</p>
-        {% else %}
-        <p class="clearfix">
-          <a href="{% url 'sentry-transfer-project' project.organization.slug project.slug %}" class="btn btn-danger pull-right">{% trans "Transfer Project" %}</a>
-          Transfer the <strong>{{ project.slug }}</strong> project and all related data. </br>
-          Careful, this action cannot be undone.
-        </p>
-        {% endif %}
-      </div>
-    </div>
-
-  <script>
-  (function(){
-    $.each({{ form.org_overrides|to_json|safe }}, function(n, value) {
-      if ($('#id_' + value).attr('disabled')) {
-        $('<span/>').addClass('disabled-indicator tip')
-          .attr('title', {% filter to_json %}{% trans "This option is enforced by your organization's settings and cannot be customized per-project." %}{% endfilter %})
-          .append(
-            $('<span/>').addClass('icon-question')
-          ).insertBefore('#hint_id_' + value);
-      }
-    });
-
-    $('.tip').tooltip();
-  }());
-  </script>
-{% endblock %}
-
 {% block sidebar %}
   <h6 class="nav-header">{% trans "Configuration" %}</h6>
   <ul class="nav nav-stacked">
