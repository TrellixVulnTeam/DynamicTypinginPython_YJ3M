commit 12ae95a5733a349d9c07dc7e244b352157b3a4c6
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Thu Jan 24 17:06:26 2019 +0100

    fix: Pass legacy_python_json to Rust (#11689)

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index 8c419424fb..e4cf06baa5 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -508,7 +508,14 @@ class EventManager(object):
                 enable_trimming=ENABLE_TRIMMING,
             )
 
-            self._data = CanonicalKeyDict(rust_normalizer.normalize_event(dict(self._data)))
+            legacy_python_json = self._auth and \
+                self._auth.client and \
+                'raven-python' in self._auth.client
+
+            self._data = CanonicalKeyDict(
+                rust_normalizer.normalize_event(dict(self._data),
+                                                legacy_python_json=legacy_python_json)
+            )
 
             normalize_user_agent(self._data)
             return
