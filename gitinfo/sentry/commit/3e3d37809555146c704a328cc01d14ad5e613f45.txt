commit 3e3d37809555146c704a328cc01d14ad5e613f45
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Fri Dec 4 17:36:20 2015 -0800

    Handle PUT on /internal/options/

diff --git a/src/sentry/api/endpoints/system_options.py b/src/sentry/api/endpoints/system_options.py
index 748b5cc47a..226f4e71f5 100644
--- a/src/sentry/api/endpoints/system_options.py
+++ b/src/sentry/api/endpoints/system_options.py
@@ -2,6 +2,7 @@ from __future__ import absolute_import
 
 from rest_framework.response import Response
 
+import sentry
 from sentry import options
 from sentry.api.base import Endpoint
 from sentry.api.permissions import SuperuserPermission
@@ -24,3 +25,9 @@ class SystemOptionsEndpoint(Endpoint):
         }
 
         return Response(results)
+
+    def put(self, request):
+        for k, v in request.DATA.iteritems():
+            options.set(k, v)
+        options.set('sentry:version-configured', sentry.get_version())
+        return Response(status=200)
diff --git a/src/sentry/templatetags/sentry_react.py b/src/sentry/templatetags/sentry_react.py
index ff1ca5c269..2efd326a97 100644
--- a/src/sentry/templatetags/sentry_react.py
+++ b/src/sentry/templatetags/sentry_react.py
@@ -32,18 +32,15 @@ def _get_version_info():
     }
 
 
-def _needs_upgrade(version_info=None):
+def _needs_upgrade():
     version_configured = options.get('sentry:version-configured')
     if not version_configured:
         # If we were never previously upgraded (being a new install)
         # we want to force an upgrade, even if the values are set.
         return True
 
-    if version_info is None:
-        version_info = _get_version_info()
-
     # Already up to date, yay!
-    if version_configured == version_info['current']:
+    if version_configured == sentry.get_version():
         return False
 
     # Check all required options to see if they've been set
@@ -52,7 +49,7 @@ def _needs_upgrade(version_info=None):
             return True
 
     # Everything looks good, but version changed, so let's bump it
-    options.set('sentry:version-configured', version_info['current'])
+    options.set('sentry:version-configured', sentry.get_version())
     return False
 
 
@@ -84,7 +81,7 @@ def get_react_config(context):
     needs_upgrade = False
 
     if is_superuser:
-        needs_upgrade = _needs_upgrade(version_info)
+        needs_upgrade = _needs_upgrade()
 
     context = {
         'singleOrganization': settings.SENTRY_SINGLE_ORGANIZATION,
