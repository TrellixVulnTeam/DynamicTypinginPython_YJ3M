commit 6d4e2b622ed321cb7405f36fa514fd68f96f3792
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Nov 24 13:39:13 2012 -0800

    Correct view links (old permalinks will no longer work)

diff --git a/src/sentry/templates/sentry/groups/group_list.html b/src/sentry/templates/sentry/groups/group_list.html
index 633558e6fb..541260d6c0 100644
--- a/src/sentry/templates/sentry/groups/group_list.html
+++ b/src/sentry/templates/sentry/groups/group_list.html
@@ -13,9 +13,10 @@
 {% block page_header %}
     <div class="btn-group pull-right">
         {% if VIEWS %}
-            <a class="btn small{% if not view %} active{% endif %}" href="{% url sentry project.slug %}">{% trans "All" %}</a>
+            {% querystring from request without view as view_querystring %}
+            <a class="btn small{% if not view %} active{% endif %}" href="?{{ view_querystring }}">{% trans "All" %}</a>
             {% for v in VIEWS %}
-                <a class="btn small{% if view == v %} active{% endif %}" href="{% url sentry project.slug v.pk %}">{% trans v.verbose_name_plural %}</a>
+                <a class="btn small{% if view == v %} active{% endif %}" href="?{{ view_querystring }}&amp;view={{ v.pk }}">{% trans v.verbose_name_plural %}</a>
             {% endfor %}
         {% endif %}
     </div>
diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index 072adc1ef5..49b22200b4 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -216,15 +216,16 @@ def search(request, project):
 
 @login_required
 @has_access
-def group_list(request, project, view_id=None):
+def group_list(request, project):
     try:
         page = int(request.GET.get('p', 1))
     except (TypeError, ValueError):
         page = 1
 
+    view_id = request.GET.get('view')
     if view_id:
         try:
-            view = View.objects.get_from_cache(pk=view_id)
+            view = View.objects.get_from_cache(pk=int(view_id))
         except View.DoesNotExist:
             return HttpResponseRedirect(reverse('sentry', args=[project.slug]))
     else:
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 2c4c6ed973..a4da4e1466 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -152,7 +152,6 @@ urlpatterns = patterns('',
 
     url(r'^(?P<project_id>[\w_-]+)/search/$', groups.search, name='sentry-search'),
 
-    url(r'^(?P<project_id>[\w_-]+)/view/(?P<view_id>\d+)/$', groups.group_list, name='sentry'),
     url(r'^(?P<project_id>[\w_-]+)/$', groups.group_list, name='sentry'),
 
     url(r'', include('social_auth.urls')),
