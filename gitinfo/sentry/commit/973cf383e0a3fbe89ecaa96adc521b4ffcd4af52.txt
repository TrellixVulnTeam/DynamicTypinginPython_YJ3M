commit 973cf383e0a3fbe89ecaa96adc521b4ffcd4af52
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Jan 30 10:59:38 2018 -0800

    fix(environments): Fix project dashboard environment filtering (#7099)
    
    Ensure environment filter is applied

diff --git a/src/sentry/static/sentry/app/views/projectDashboard.jsx b/src/sentry/static/sentry/app/views/projectDashboard.jsx
index bdafa9c43f..ab1ae0476c 100644
--- a/src/sentry/static/sentry/app/views/projectDashboard.jsx
+++ b/src/sentry/static/sentry/app/views/projectDashboard.jsx
@@ -36,12 +36,18 @@ const ProjectDashboard = createReactClass({
     return {
       statsPeriod: this.props.defaultStatsPeriod,
       activeEnvironment: null,
+      hasEnvironmentsFeature: new Set(this.context.organization.features).has(
+        'environments'
+      ),
       ...this.getQueryStringState(),
     };
   },
 
   componentWillMount() {
     this.props.setProjectNavSection('dashboard');
+
+    // Manually fire onLatestContextChange
+    this.onLatestContextChange(LatestContextStore.getInitialState());
   },
 
   componentWillReceiveProps(nextProps) {
@@ -124,9 +130,11 @@ const ProjectDashboard = createReactClass({
   },
 
   onLatestContextChange(context) {
-    this.setState({
-      activeEnvironment: context.environment,
-    });
+    if (this.state.hasEnvironmentsFeature) {
+      this.setState({
+        activeEnvironment: context.environment,
+      });
+    }
   },
 
   render() {
