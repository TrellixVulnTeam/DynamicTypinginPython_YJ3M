commit 905f02799155c7ff5a8acbe05fe7d07111af0a9a
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Fri Mar 2 13:33:38 2018 -0800

    ref(stream): Use environment directly from props (#7433)
    
    We don't need to set it on state anymore

diff --git a/src/sentry/static/sentry/app/views/stream/index.jsx b/src/sentry/static/sentry/app/views/stream/index.jsx
index 0f031d23ea..e420c292a2 100644
--- a/src/sentry/static/sentry/app/views/stream/index.jsx
+++ b/src/sentry/static/sentry/app/views/stream/index.jsx
@@ -93,7 +93,6 @@ const Stream = createReactClass({
       tagsLoading: true,
       isSidebarVisible: false,
       processingIssues: null,
-      activeEnvironment: this.props.environment,
       hasEnvironmentsFeature,
     };
   },
@@ -120,7 +119,6 @@ const Stream = createReactClass({
       );
       this.setState(
         {
-          activeEnvironment: environment,
           query,
         },
         this.fetchData
@@ -360,8 +358,8 @@ const Stream = createReactClass({
     // Remove leading and trailing whitespace
     let query = queryString.formatQueryString(this.state.query);
 
-    let activeEnvironment = this.state.activeEnvironment;
-    let activeEnvName = activeEnvironment ? activeEnvironment.name : null;
+    let {environment} = this.props;
+    let activeEnvName = environment ? environment.name : null;
 
     let requestParams = {
       query,
@@ -384,11 +382,11 @@ const Stream = createReactClass({
         }
       }
       requestParams.environment = queryEnvironment;
-    } else if (activeEnvironment) {
+    } else if (environment) {
       // Set the environment of the query to match the global settings
-      query = queryString.getQueryStringWithEnvironment(query, activeEnvironment.name);
+      query = queryString.getQueryStringWithEnvironment(query, environment.name);
       requestParams.query = query;
-      requestParams.environment = activeEnvironment.name;
+      requestParams.environment = environment.name;
     }
 
     let currentQuery = this.props.location.query || {};
