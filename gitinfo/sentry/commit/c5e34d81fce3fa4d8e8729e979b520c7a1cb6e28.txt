commit c5e34d81fce3fa4d8e8729e979b520c7a1cb6e28
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Feb 9 10:49:38 2015 -0800

    Draft code for tests (non-functional)

diff --git a/package.json b/package.json
index 93f99f6e17..7b9c3e9aff 100644
--- a/package.json
+++ b/package.json
@@ -32,6 +32,7 @@
     "karma-mocha": "^0.1.6",
     "karma-phantomjs-launcher": "^0.1.4",
     "karma-sinon": "^1.0.3",
+    "karma-sourcemap-loader": "^0.3.3",
     "less": "1.7.0",
     "mocha": "1.9.x",
     "moment": "^2.8.4",
@@ -49,7 +50,7 @@
   "APIMethod": "stub",
   "proxyURL": "http://localhost:8000",
   "scripts": {
-    "pretest": "npm install && gulp dist",
+    "pretest": "npm install",
     "test": "node_modules/karma/bin/karma start tests/karma.conf.js --single-run"
   }
 }
diff --git a/tests/js/base.js b/tests/js/base.js
deleted file mode 100644
index a503475f72..0000000000
--- a/tests/js/base.js
+++ /dev/null
@@ -1,2 +0,0 @@
-window.app = {};
-window.SentryConfig = {};
diff --git a/tests/js/spec/assigneeSelectorSpec.js b/tests/js/spec/assigneeSelectorSpec.js
new file mode 100644
index 0000000000..c0aecaeac9
--- /dev/null
+++ b/tests/js/spec/assigneeSelectorSpec.js
@@ -0,0 +1,4 @@
+describe('<AssigneeSelector>', function(){
+  // TODO(dcramer): figure out how we make 'app' a module
+  var AssigneeSelector = require(__dirname + '/../../../src/sentry/static/sentry/app/components/assigneeSelector.jsx');
+});
diff --git a/tests/js/spec/collectionSpec.js b/tests/js/spec/collectionSpec.js
index a5b556ea20..fddd0a2f04 100644
--- a/tests/js/spec/collectionSpec.js
+++ b/tests/js/spec/collectionSpec.js
@@ -1,12 +1,6 @@
-describe('sentry.collection', function(){
-
-  beforeEach(module('sentry'));
-
-  var Collection;
-
-  beforeEach(inject(function($injector){
-    Collection = $injector.get('Collection');
-  }));
+describe('utils.Collection', function(){
+  // TODO(dcramer): figure out how we make 'app' a module
+  var Collection = require(__dirname + '/../../../src/sentry/static/sentry/app/utils/collection.jsx');
 
   describe('add', function() {
     it('should append elements', function(){
diff --git a/tests/karma.conf.js b/tests/karma.conf.js
index 061ef76736..7135a27bbd 100644
--- a/tests/karma.conf.js
+++ b/tests/karma.conf.js
@@ -1,5 +1,10 @@
 // Karma configuration
 // Generated on Sat Jul 26 2014 13:49:45 GMT+0200 (CEST)
+var path = require('path');
+
+var appPrefix = path.join(__dirname, "../src/sentry/static/sentry/app");
+
+console.log(appPrefix);
 
 module.exports = function(config) {
   config.set({
@@ -15,14 +20,6 @@ module.exports = function(config) {
 
     // list of files / patterns to load in the browser
     files: [
-      'tests/js/base.js',
-      'src/sentry/static/sentry/dist/vendor-angular.min.js',
-      'src/sentry/static/sentry/dist/vendor-jquery.min.js',
-      'src/sentry/static/sentry/dist/vendor-bootstrap.min.js',
-      'src/sentry/static/sentry/dist/vendor-misc.min.js',
-      'src/sentry/static/sentry/vendor/angular-mocks/angular-mocks.js',
-      'src/sentry/static/sentry/dist/app.min.js',
-      'src/sentry/static/sentry/dist/legacy-app.min.js',
       'tests/js/**/*Spec.js'
     ],
 
@@ -31,13 +28,52 @@ module.exports = function(config) {
     exclude: [
     ],
 
+    webpack: {
+      cache: true,
+        module: {
+        resolve: {
+          modulesDirectories: [appPrefix, "node_modules"],
+          extensions: ["", ".jsx", ".js", ".json"]
+        },
+        loaders: [
+          {
+            test: /\.jsx$/,
+            loader: "jsx-loader?insertPragma=React.DOM&harmony",
+            include: path.join(__dirname, appPrefix),
+            exclude: /vendor/
+          }
+        ]
+      },
+      devtool: 'inline-source-map',
+    },
+
+    webpackMiddleware: {
+        // webpack-dev-middleware configuration
+        // i. e.
+        noInfo: true
+    },
+
+    webpackServer: {
+      stats: {
+        colors: true
+      }
+    },
+
+    plugins: [
+      'karma-chai',
+      'karma-mocha',
+      'karma-phantomjs-launcher',
+      'karma-sinon',
+      'karma-sourcemap-loader',
+      'karma-webpack'
+    ],
 
     // preprocess matching files before serving them to the browser
     // available preprocessors: https://npmjs.org/browse/keyword/karma-preprocessor
     preprocessors: {
+      'tests/**/*.js': ['webpack', 'sourcemap']
     },
 
-
     // test results reporter to use
     // possible values: 'dots', 'progress'
     // available reporters: https://npmjs.org/browse/keyword/karma-reporter
