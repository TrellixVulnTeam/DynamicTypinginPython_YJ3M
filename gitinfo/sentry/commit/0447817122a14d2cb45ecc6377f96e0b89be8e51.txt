commit 0447817122a14d2cb45ecc6377f96e0b89be8e51
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Jan 2 10:09:22 2015 -0800

    Add versioning to plugins

diff --git a/src/sentry/plugins/base/manager.py b/src/sentry/plugins/base/manager.py
index 18d2cdb07f..3e8c1f030e 100644
--- a/src/sentry/plugins/base/manager.py
+++ b/src/sentry/plugins/base/manager.py
@@ -22,10 +22,12 @@ class PluginManager(InstanceManager):
     def __len__(self):
         return sum(1 for i in self.all())
 
-    def all(self):
+    def all(self, version=None):
         for plugin in sorted(super(PluginManager, self).all(), key=lambda x: x.get_title()):
             if not plugin.is_enabled():
                 continue
+            if version is not None and plugin.__version__ != version:
+                continue
             yield plugin
 
     def for_project(self, project):
diff --git a/src/sentry/plugins/base/v1.py b/src/sentry/plugins/base/v1.py
index bddae8295e..de9c965d0b 100644
--- a/src/sentry/plugins/base/v1.py
+++ b/src/sentry/plugins/base/v1.py
@@ -457,4 +457,5 @@ class Plugin(IPlugin):
     control when or how the plugin gets instantiated, nor is it guaranteed that
     it will happen, or happen more than once.
     """
+    __version__ = 1
     __metaclass__ = PluginMount
diff --git a/src/sentry/plugins/base/v2.py b/src/sentry/plugins/base/v2.py
index 04271ad44f..bfebfbcf19 100644
--- a/src/sentry/plugins/base/v2.py
+++ b/src/sentry/plugins/base/v2.py
@@ -36,11 +36,10 @@ class IPlugin2(local):
     it will happen, or happen more than once.
 
     >>> from sentry.plugins import Plugin2
-    >>> class MyPlugin(Plugin2):
-    >>>     title = 'My Plugin'
     >>>
-    >>>     def widget(self, request, group, **kwargs):
-    >>>         return self.render('myplugin/widget.html')
+    >>> class MyPlugin(Plugin2):
+    >>>     def get_title(self):
+    >>>         return 'My Plugin'
 
     All children should allow ``**kwargs`` on all inherited methods.
     """
@@ -216,4 +215,5 @@ class Plugin2(IPlugin2):
     control when or how the plugin gets instantiated, nor is it guaranteed that
     it will happen, or happen more than once.
     """
+    __version__ = 2
     __metaclass__ = PluginMount
