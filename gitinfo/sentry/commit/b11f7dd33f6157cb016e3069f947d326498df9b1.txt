commit b11f7dd33f6157cb016e3069f947d326498df9b1
Author: Alberto Leal <mail4alberto@gmail.com>
Date:   Fri Feb 14 15:01:46 2020 -0500

    fix(subscription): Maybe APM fix? (#17059)

diff --git a/src/sentry/snuba/query_subscription_consumer.py b/src/sentry/snuba/query_subscription_consumer.py
index 309fe0483b..ed96f1f3c8 100644
--- a/src/sentry/snuba/query_subscription_consumer.py
+++ b/src/sentry/snuba/query_subscription_consumer.py
@@ -5,6 +5,7 @@ from json import loads
 import jsonschema
 import pytz
 import sentry_sdk
+from sentry_sdk.tracing import Span
 from confluent_kafka import Consumer, KafkaException, TopicPartition
 from dateutil.parser import parse as parse_date
 from django.conf import settings
@@ -186,7 +187,11 @@ class QuerySubscriptionConsumer(object):
 
             callback = subscriber_registry[subscription.type]
             with sentry_sdk.start_span(
-                op="process_message", transaction="query_subscription_consumer_process_message"
+                Span(
+                    op="process_message",
+                    transaction="query_subscription_consumer_process_message",
+                    sampled=True,
+                )
             ) as span, metrics.timer(
                 "snuba_query_subscriber.callback.duration", instance=subscription.type
             ):
