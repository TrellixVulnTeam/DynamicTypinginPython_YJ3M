commit 960436b17211a225a729805a528653f2aff675d7
Author: Roger Hu <rhu@hearsaycorp.com>
Date:   Wed Oct 2 15:02:19 2013 +0000

    Call to create_user fails because django-social-auth module requires 5 parameters now for create_user now.
    
    The exception is quietly suppressed in social_auth/backends/__init__.py:143 in the pipeline
    stage for this module since TypeErrors in general are try/except in the authenticate()
    stage.
    
    It can be repro'd by putting a breakpoint on authenticate() in django.contrib.auth and
    the authenticate() function for the Google backend.
    
    Will there be a similar issue once this create_user() function gets even further ported to python-social-auth?

diff --git a/src/sentry/utils/social_auth.py b/src/sentry/utils/social_auth.py
index d241a8aae5..ce26acadcc 100644
--- a/src/sentry/utils/social_auth.py
+++ b/src/sentry/utils/social_auth.py
@@ -25,4 +25,11 @@ def create_user_if_enabled(*args, **kwargs):
     if not settings.SOCIAL_AUTH_CREATE_USERS and not kwargs.get('user'):
         raise AuthNotAllowed('You must create an account before associating an identity.')
 
-    return create_user(*args, **kwargs)
+    backend = kwargs.pop('backend')
+    details = kwargs.pop('details')
+    response = kwargs.pop('response')
+    uid = kwargs.pop('uid')
+    username = kwargs.pop('username', None)
+    user = kwargs.pop('user', None)
+
+    return create_user(backend=backend, details=details, response=response, uid=uid, username=username, user=user, *args, **kwargs)
