commit c93274ce756c97003ad644d04183961e447d5a10
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Nov 25 15:04:43 2012 -0800

    Support one-time registration via can_register session variable

diff --git a/src/sentry/web/frontend/accounts.py b/src/sentry/web/frontend/accounts.py
index b478631cbc..11a5795b68 100644
--- a/src/sentry/web/frontend/accounts.py
+++ b/src/sentry/web/frontend/accounts.py
@@ -60,13 +60,16 @@ def login(request):
 def register(request):
     from sentry.conf import settings
 
-    if not settings.ALLOW_REGISTRATION:
+    if not (settings.ALLOW_REGISTRATION or request.session.get('can_register')):
         return HttpResponseRedirect(reverse('sentry'))
 
     form = RegistrationForm(request.POST or None)
     if form.is_valid():
         user = form.save()
 
+        # can_register should only allow a single registration
+        request.session.pop('can_register', None)
+
         # HACK: grab whatever the first backend is and assume it works
         user.backend = dj_settings.AUTHENTICATION_BACKENDS[0]
 
