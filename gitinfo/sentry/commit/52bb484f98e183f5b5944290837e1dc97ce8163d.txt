commit 52bb484f98e183f5b5944290837e1dc97ce8163d
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Dec 1 16:48:31 2015 -0800

    Add CliTestCase

diff --git a/src/sentry/testutils/cases.py b/src/sentry/testutils/cases.py
index b430ba95aa..d10dae5b09 100644
--- a/src/sentry/testutils/cases.py
+++ b/src/sentry/testutils/cases.py
@@ -10,13 +10,14 @@ from __future__ import absolute_import
 
 __all__ = (
     'TestCase', 'TransactionTestCase', 'APITestCase', 'AuthProviderTestCase',
-    'RuleTestCase', 'PermissionTestCase', 'PluginTestCase'
+    'RuleTestCase', 'PermissionTestCase', 'PluginTestCase', 'CliTestCase',
 )
 
 import base64
 import os.path
 import urllib
 
+from click.testing import CliRunner
 from django.conf import settings
 from django.contrib.auth import login
 from django.core.cache import cache
@@ -24,7 +25,7 @@ from django.core.urlresolvers import reverse
 from django.http import HttpRequest
 from django.test import TestCase, TransactionTestCase
 from django.utils.importlib import import_module
-from exam import before, Exam
+from exam import before, fixture, Exam
 from rest_framework.test import APITestCase as BaseAPITestCase
 
 from sentry import auth
@@ -392,3 +393,7 @@ class PluginTestCase(TestCase):
         super(PluginTestCase, self).setUp()
         plugins.register(self.plugin)
         self.addCleanup(plugins.unregister, self.plugin)
+
+
+class CliTestCase(TestCase):
+    runner = fixture(CliRunner)
diff --git a/tests/sentry/runner/commands/test_cleanup.py b/tests/sentry/runner/commands/test_cleanup.py
index 400f1be3f3..36eb1713b7 100644
--- a/tests/sentry/runner/commands/test_cleanup.py
+++ b/tests/sentry/runner/commands/test_cleanup.py
@@ -2,21 +2,16 @@
 
 from __future__ import absolute_import
 
-from click.testing import CliRunner
-from exam import fixture
-
 from sentry.models import Event, Group, GroupTagValue, TagValue, TagKey
 from sentry.runner.commands.cleanup import cleanup
-from sentry.testutils import TestCase
+from sentry.testutils import CliTestCase
 
 ALL_MODELS = (Event, Group, GroupTagValue, TagValue, TagKey)
 
 
-class SentryCleanupTest(TestCase):
+class SentryCleanupTest(CliTestCase):
     fixtures = ['tests/fixtures/cleanup.json']
 
-    runner = fixture(CliRunner)
-
     def test_simple(self):
         rv = self.runner.invoke(cleanup, ['--days=1'])
         assert rv.exit_code == 0, rv.output
