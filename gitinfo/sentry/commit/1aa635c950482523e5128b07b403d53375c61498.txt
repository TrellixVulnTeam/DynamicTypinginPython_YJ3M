commit 1aa635c950482523e5128b07b403d53375c61498
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Nov 25 19:35:57 2013 -0800

    Various improvements/fixes for frames annotations

diff --git a/src/sentry/interfaces.py b/src/sentry/interfaces.py
index 74bad38334..61904f2b02 100644
--- a/src/sentry/interfaces.py
+++ b/src/sentry/interfaces.py
@@ -562,7 +562,7 @@ class Stacktrace(Interface):
             frames = frames[::-1]
 
         if self.frames_omitted:
-            first_frame_omitted, last_frame_omitted = self.frames_omitted[0]
+            first_frame_omitted, last_frame_omitted = self.frames_omitted
         else:
             first_frame_omitted, last_frame_omitted = None, None
 
diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index d73c18bfde..57be8f33fe 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -1318,6 +1318,14 @@ ul.traceback {
   }
 }
 
+.frames-omitted {
+  color: #999;
+  border: 1px dotted #ddd;
+  border-width: 1px 0;
+  padding: 5px;
+  margin-bottom: 11px;
+}
+
 .frame {
   overflow: hidden;
   position: relative;
diff --git a/src/sentry/static/sentry/styles/global.min.css b/src/sentry/static/sentry/styles/global.min.css
index 700fa6945e..ad045b7835 100644
--- a/src/sentry/static/sentry/styles/global.min.css
+++ b/src/sentry/static/sentry/styles/global.min.css
@@ -7851,6 +7851,13 @@ ul.traceback {
   left: 0;
   top: 12px;
 }
+.frames-omitted {
+  color: #999;
+  border: 1px dotted #ddd;
+  border-width: 1px 0;
+  padding: 5px;
+  margin-bottom: 11px;
+}
 .frame {
   overflow: hidden;
   position: relative;
diff --git a/src/sentry/static/sentry/styles/sentry.css b/src/sentry/static/sentry/styles/sentry.css
index 700fa6945e..ad045b7835 100644
--- a/src/sentry/static/sentry/styles/sentry.css
+++ b/src/sentry/static/sentry/styles/sentry.css
@@ -7851,6 +7851,13 @@ ul.traceback {
   left: 0;
   top: 12px;
 }
+.frames-omitted {
+  color: #999;
+  border: 1px dotted #ddd;
+  border-width: 1px 0;
+  padding: 5px;
+  margin-bottom: 11px;
+}
 .frame {
   overflow: hidden;
   position: relative;
diff --git a/src/sentry/templates/sentry/partial/interfaces/chained_exception.html b/src/sentry/templates/sentry/partial/interfaces/chained_exception.html
index 7ba7f7e831..8b20c3699f 100644
--- a/src/sentry/templates/sentry/partial/interfaces/chained_exception.html
+++ b/src/sentry/templates/sentry/partial/interfaces/chained_exception.html
@@ -32,7 +32,7 @@
                     <p>{{ exception.exception_value }}</p>
                 {% endif %}
                 {% with exception.stacktrace.frames as frames %}
-                    {% with exception.stack_id as stack_id %}
+                    {% with stack_id=exception.stack_id first_frame_omitted=exception.stacktrace.first_frame_omitted last_frame_omitted=exception.stacktrace.last_frame_omitted %}
                         {% include "sentry/partial/interfaces/stacktrace_inner.html" %}
                     {% endwith %}
                 {% endwith %}
diff --git a/src/sentry/templates/sentry/partial/interfaces/stacktrace.html b/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
index d3c920b015..c2e7f8fb3f 100644
--- a/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
+++ b/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
@@ -22,7 +22,6 @@
         {% include "sentry/partial/interfaces/stacktrace_inner.html" %}
     </div>
 </div>
-
 <div id="raw_stacktrace" style="display: none;">
     <pre>{{ stacktrace }}</pre>
 </div>
@@ -38,4 +37,4 @@
         }
     }).change();
     </script>
-{% endif %}
\ No newline at end of file
+{% endif %}
diff --git a/src/sentry/templates/sentry/partial/interfaces/stacktrace_inner.html b/src/sentry/templates/sentry/partial/interfaces/stacktrace_inner.html
index 52524fae85..e735d14bbd 100644
--- a/src/sentry/templates/sentry/partial/interfaces/stacktrace_inner.html
+++ b/src/sentry/templates/sentry/partial/interfaces/stacktrace_inner.html
@@ -99,7 +99,7 @@
         </li>
         {% if forloop.counter == first_frame_omitted %}
         <li class="frames-omitted">
-            <p><em>(Frames {{ first_frame_omitted }} to {{ last_frame_omitted }} were not stored)</em></p>
+            Frames {{ first_frame_omitted }} until {{ last_frame_omitted }} were not omitted and not available.
         </li>
         {% endif %}
     {% endfor %}
