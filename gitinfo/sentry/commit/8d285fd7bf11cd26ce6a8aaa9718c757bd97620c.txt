commit 8d285fd7bf11cd26ce6a8aaa9718c757bd97620c
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Oct 5 17:59:09 2015 -0700

    Add metrics for failed events

diff --git a/src/sentry/tasks/store.py b/src/sentry/tasks/store.py
index 4a0557f7a9..bc789a2a4c 100644
--- a/src/sentry/tasks/store.py
+++ b/src/sentry/tasks/store.py
@@ -29,6 +29,7 @@ def preprocess_event(cache_key=None, data=None, start_time=None, **kwargs):
         data = default_cache.get(cache_key)
 
     if data is None:
+        metrics.incr('events.failed', reason='cache', stage='pre')
         logger.error('Data not available in preprocess_event (cache_key=%s)', cache_key)
         return
 
@@ -66,6 +67,7 @@ def save_event(cache_key=None, data=None, start_time=None, **kwargs):
         data = default_cache.get(cache_key)
 
     if data is None:
+        metrics.incr('events.failed', reason='cache', stage='post')
         return
 
     project = data.pop('project')
