commit 34ee75f2ac5fa8d3032caea7f3198b1291018b44
Author: Ben Vinegar <ben@benv.ca>
Date:   Fri Mar 4 16:02:21 2016 -0800

    Proof of concept sparklines on dashboard from org stats data

diff --git a/src/sentry/static/sentry/app/views/organizationDashboard.jsx b/src/sentry/static/sentry/app/views/organizationDashboard.jsx
index c20763dd4b..a82e5b5d9c 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard.jsx
@@ -65,6 +65,43 @@ const NewIssues = React.createClass({
   },
 });
 
+function ProjectSparkline(props) {
+  let values = props.data.map(tuple => tuple[1]);
+
+  let max = Math.max.apply(Math.max, values);
+
+  const WIDTH = 120;
+
+  if (max > 0) {
+    return (
+      <Sparklines data={values}>
+        <SparklinesLine {...props} style={{stroke: '#24A6F7', fill: 'none', strokeWidth: 3}}/>
+      </Sparklines>
+    );
+  } else {
+    // react-sparklines does not like flat lines, so lets make them ourselves
+    // https://github.com/borisyankov/react-sparklines/issues/39
+    //
+    // NOTE: this little hack means that project stats w/ the same event count for each entry
+    //       will not render! I'm just kind of counting on that being very unlikely; when the PR
+    //       for react-sparklines is accepted, we'll remove this.
+    let coords = values.map((_, idx) => {
+      return (WIDTH / values.length) * idx + ' 28';
+    }).join(' ');
+
+    return (
+      <svg width="120" height="30">
+        <g>
+          <polyline points={coords} style={{stroke: '#24A6F7', strokeWidth: 3, strokeLinejoin:'round', strokeLinecap:'round', fill:'none'}}/>
+        </g>
+      </svg>
+    );
+  }
+}
+ProjectSparkline.propTypes = {
+  data: React.PropTypes.array.isRequired
+};
+
 const ProjectList = React.createClass({
   propTypes: {
     maxProjects: React.PropTypes.number
@@ -106,9 +143,9 @@ const ProjectList = React.createClass({
             return (
               <li key={project.id}>
                 <div className="pull-right">
-                  <Sparklines data={[5, 10, 5, 20]}>
-                    <SparklinesLine style={{stroke: '#24A6F7', fill: 'none', strokeWidth: 3}}/>
-                  </Sparklines>
+                  {project.stats &&
+                    <ProjectSparkline data={project.stats}/>
+                  }
                 </div>
                 <Link to={`/${org.slug}/${project.slug}/`}>
                   <h4>
diff --git a/src/sentry/static/sentry/app/views/organizationTeams/index.jsx b/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
index 0ba5dd4707..82431a2b38 100644
--- a/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
+++ b/src/sentry/static/sentry/app/views/organizationTeams/index.jsx
@@ -33,11 +33,8 @@ const OrganizationTeams = React.createClass({
     };
   },
 
-  componentWillMount() {
-    this.fetchStats();
-  },
-
   componentWillUpdate(nextProps, nextState) {
+    // TOOD: only id comparison}
     if (!arrayIsEqual(nextState.teamList, this.state.teamList))
       this.fetchStats();
   },
