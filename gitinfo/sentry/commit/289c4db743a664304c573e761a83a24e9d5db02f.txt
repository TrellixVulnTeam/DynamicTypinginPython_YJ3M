commit 289c4db743a664304c573e761a83a24e9d5db02f
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Wed Oct 31 11:55:02 2018 -0700

    fix(ui): Use flexbox for stacktrace titles (#10352)
    
    * fix(ui): Use flexbox for stacktrace titles
    
    Seeing if this helps with percy snapshots
    
    * refactor

diff --git a/src/sentry/static/sentry/app/components/events/interfaces/frame.jsx b/src/sentry/static/sentry/app/components/events/interfaces/frame.jsx
index 94f7225a16..fdb7ad4af2 100644
--- a/src/sentry/static/sentry/app/components/events/interfaces/frame.jsx
+++ b/src/sentry/static/sentry/app/components/events/interfaces/frame.jsx
@@ -1,19 +1,20 @@
 import PropTypes from 'prop-types';
 import React from 'react';
-import createReactClass from 'create-react-class';
 import _ from 'lodash';
 import classNames from 'classnames';
+import createReactClass from 'create-react-class';
+import styled from 'react-emotion';
 
-import ClippedBox from 'app/components/clippedBox';
-import Tooltip from 'app/components/tooltip';
-import StrictClick from 'app/components/strictClick';
-import Truncate from 'app/components/truncate';
-import {t} from 'app/locale';
 import {defined, objectIsEmpty, isUrl} from 'app/utils';
-
+import {t} from 'app/locale';
+import ClippedBox from 'app/components/clippedBox';
 import ContextLine from 'app/components/events/interfaces/contextLine';
-import FrameVariables from 'app/components/events/interfaces/frameVariables';
 import FrameRegisters from 'app/components/events/interfaces/frameRegisters';
+import FrameVariables from 'app/components/events/interfaces/frameVariables';
+import StrictClick from 'app/components/strictClick';
+import Tooltip from 'app/components/tooltip';
+import Truncate from 'app/components/truncate';
+import space from 'app/styles/space';
 
 export function trimPackage(pkg) {
   let pieces = pkg.split(/^[a-z]:\\/i.test(pkg) ? '\\' : '/');
@@ -225,8 +226,6 @@ const Frame = createReactClass({
       );
     }
 
-    title.push(this.renderExpander());
-
     return title;
   },
 
@@ -347,13 +346,14 @@ const Frame = createReactClass({
     let timesRepeated = this.props.timesRepeated;
     if (timesRepeated > 0) {
       return (
-        <span
-          className="repeated-frames"
+        <RepeatedFrames
           title={`Frame repeated ${timesRepeated} time${timesRepeated === 1 ? '' : 's'}`}
         >
-          <span className="icon-refresh" />
-          <span>{timesRepeated}</span>
-        </span>
+          <RepeatedContent>
+            <span className="icon-refresh" />
+            <span>{timesRepeated}</span>
+          </RepeatedContent>
+        </RepeatedFrames>
       );
     } else return null;
   },
@@ -361,11 +361,16 @@ const Frame = createReactClass({
   renderDefaultLine() {
     return (
       <StrictClick onClick={this.isExpandable() ? this.toggleContext : null}>
-        <div className="title">
-          {this.renderLeadHint()}
-          {this.renderDefaultTitle()}
-          {this.renderRepeats()}
-        </div>
+        <DefaultLine className="title">
+          <VertCenterWrapper>
+            <div>
+              {this.renderLeadHint()}
+              {this.renderDefaultTitle()}
+            </div>
+            {this.renderRepeats()}
+          </VertCenterWrapper>
+          {this.renderExpander()}
+        </DefaultLine>
       </StrictClick>
     );
   },
@@ -445,4 +450,30 @@ const Frame = createReactClass({
   },
 });
 
+const RepeatedFrames = styled('div')`
+  display: inline-block;
+  border-radius: 50px;
+  padding: 1px 3px;
+  margin-left: ${space(1)};
+  border-width: thin;
+  border-style: solid;
+  border-color: ${p => p.theme.yellowOrangeDark};
+  color: ${p => p.theme.yellowOrangeDark};
+  background-color: ${p => p.theme.whiteDark};
+  white-space: nowrap;
+`;
+
+const VertCenterWrapper = styled('div')`
+  display: flex;
+  align-items: center;
+`;
+
+const RepeatedContent = styled(VertCenterWrapper)`
+  justify-content: center;
+`;
+
+const DefaultLine = styled(VertCenterWrapper)`
+  justify-content: space-between;
+`;
+
 export default Frame;
diff --git a/src/sentry/static/sentry/less/group-detail.less b/src/sentry/static/sentry/less/group-detail.less
index cb607926d7..f6a0a64cae 100644
--- a/src/sentry/static/sentry/less/group-detail.less
+++ b/src/sentry/static/sentry/less/group-detail.less
@@ -62,7 +62,6 @@
     }
   }
 
-
   .event-meta {
     font-size: 80%;
     margin-top: 6px;
@@ -1348,7 +1347,6 @@ div.traceback > ul {
       padding: 8px 20px;
       font-size: 13px;
       margin: 0;
-      // line-height: 1.4;
       line-height: 16px;
       background: lighten(@blue-light, 35);
 
@@ -1579,6 +1577,7 @@ div.traceback > ul {
       line-height: 16px;
       font-size: 9px;
       text-align: center;
+      flex-shrink: 0;
     }
 
     .expand-button:hover {
@@ -1601,19 +1600,6 @@ div.traceback > ul {
       }
     }
   }
-  .repeated-frames {
-    border-radius: 50px;
-    padding: 1px 3px;
-    margin-left: 1em;
-    border-width: thin;
-    border-style: solid;
-    border-color: @yellow-orange-dark;
-    color: @yellow-orange-dark;
-    background-color: @white-dark;
-    span {
-      vertical-align: middle;
-    }
-  }
 
   &.in-app-traceback .frame.leads-to-app {
     .leads-to-app-hint {
