commit 2d0494f536ba945a09da6acdd81bd571504cdec4
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jul 29 00:15:05 2013 -0700

    Change events column to show last 24 hours (instead of odd average)

diff --git a/src/sentry/templates/sentry/admin/projects/list.html b/src/sentry/templates/sentry/admin/projects/list.html
index 2ee108141d..0df3223773 100644
--- a/src/sentry/templates/sentry/admin/projects/list.html
+++ b/src/sentry/templates/sentry/admin/projects/list.html
@@ -21,7 +21,7 @@
         </form>
 
         {% if sort == "events" %}
-            <p class="alert alert-info">{% trans "You are viewing projects sorted by the number of events created in the last 30 days. Projects that have not sent any data are not shown in this view." %}</p>
+            <p class="alert alert-info">{% trans "You are viewing projects sorted by the number of events created in the last 24 hours. Projects that have not sent any data are not shown in this view." %}</p>
         {% endif %}
 
         {% querystring from request without sort as sort_querystring %}
@@ -37,7 +37,7 @@
                 <thead>
                     <tr>
                         <th><a href="?{{ sort_querystring }}&amp;sort=name">{% trans "Project" %}</a></th>
-                        <th style="text-align:center;"><a href="?{{ sort_querystring }}&amp;sort=events">{% trans "Daily Events" %}</a></th>
+                        <th style="text-align:center;"><a href="?{{ sort_querystring }}&amp;sort=events">{% trans "Events (24h)" %}</a></th>
                         <th style="text-align:center;"><a href="?{{ sort_querystring }}&amp;sort=date">{% trans "Date Added" %}</a></th>
                     </tr>
                 </thead>
@@ -62,7 +62,7 @@
                                 {% endif %}
                             </td>
                             <td style="text-align:center; vertical-align:middle;">
-                                <em>~{{ avg_events }}</em>
+                                {{ avg_events|small_count }}
                             </td>
                             <td style="text-align:center; vertical-align:middle;">
                                 {{ project.date_added|date }}
diff --git a/src/sentry/templatetags/sentry_admin_helpers.py b/src/sentry/templatetags/sentry_admin_helpers.py
index baa6f64174..235684d127 100644
--- a/src/sentry/templatetags/sentry_admin_helpers.py
+++ b/src/sentry/templatetags/sentry_admin_helpers.py
@@ -19,17 +19,11 @@ def with_event_counts(project_list):
     from sentry.models import ProjectCountByMinute
     results = dict(ProjectCountByMinute.objects.filter(
         project__in=project_list,
-        date__gte=timezone.now() - datetime.timedelta(days=30),
+        date__gte=timezone.now() - datetime.timedelta(days=1),
     ).values_list('project').annotate(
         total_events=Sum('times_seen'),
     ).values_list('project', 'total_events'))
 
     for project in project_list:
-        avg = results.get(project.pk, 0) / 30.0
-        if avg < 5:
-            avg = '%.1f' % avg
-            if avg == '0.0':
-                avg = 0
-        else:
-            avg = int(avg)
-        yield project, avg
+        num = results.get(project.pk, 0)
+        yield project, num
diff --git a/src/sentry/web/frontend/admin.py b/src/sentry/web/frontend/admin.py
index f52f48d056..048fa2859c 100644
--- a/src/sentry/web/frontend/admin.py
+++ b/src/sentry/web/frontend/admin.py
@@ -71,7 +71,7 @@ def manage_projects(request):
     elif sort == 'events':
         project_list = project_list.annotate(
             events=Sum('projectcountbyminute__times_seen'),
-        ).filter(projectcountbyminute__date__gte=timezone.now() - datetime.timedelta(days=30))
+        ).filter(projectcountbyminute__date__gte=timezone.now() - datetime.timedelta(days=1))
         order_by = '-events'
 
     project_list = project_list.order_by(order_by)
