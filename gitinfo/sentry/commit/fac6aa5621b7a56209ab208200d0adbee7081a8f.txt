commit fac6aa5621b7a56209ab208200d0adbee7081a8f
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Nov 25 13:58:10 2015 -0800

    Improve test coverage for resolution cleanup task

diff --git a/tests/sentry/tasks/test_clear_expired_resolutions.py b/tests/sentry/tasks/test_clear_expired_resolutions.py
index 338908ddf2..31e6d712aa 100644
--- a/tests/sentry/tasks/test_clear_expired_resolutions.py
+++ b/tests/sentry/tasks/test_clear_expired_resolutions.py
@@ -3,7 +3,10 @@ from __future__ import absolute_import
 from datetime import timedelta
 from django.utils import timezone
 
-from sentry.models import Activity, Group, GroupResolution, GroupStatus, Release
+from sentry.models import (
+    Activity, Group, GroupResolution, GroupResolutionStatus, GroupStatus,
+    Release
+)
 from sentry.tasks.clear_expired_resolutions import clear_expired_resolutions
 from sentry.testutils import TestCase
 
@@ -69,6 +72,13 @@ class ClearExpiredResolutionsTest(TestCase):
             id=group2.id,
         ).status == GroupStatus.UNRESOLVED
 
+        # rows should not get removed as it breaks regression behavior
+        resolution1 = GroupResolution.objects.get(id=resolution1.id)
+        assert resolution1.status == GroupResolutionStatus.RESOLVED
+
+        resolution2 = GroupResolution.objects.get(id=resolution2.id)
+        assert resolution2.status == GroupResolutionStatus.PENDING
+
         activity1 = Activity.objects.get(id=activity1.id)
         assert activity1.data['version'] == new_release.version
 
