commit 9ef2acdf75245cf5fb86139960878e369802a651
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Aug 1 14:31:18 2011 -0700

    Added 404/500 handlers for default configuration. Cleaned up missing permissions page. (refs #168, fixes #158)

diff --git a/sentry/templates/sentry/404.html b/sentry/templates/sentry/404.html
new file mode 100644
index 0000000000..0ac1fd16ea
--- /dev/null
+++ b/sentry/templates/sentry/404.html
@@ -0,0 +1,15 @@
+{% extends "sentry/layout.html" %}
+
+{% load i18n %}
+
+{% block title %}{% trans "Page Not Found" %} | {{ block.super }}{% endblock %}
+
+{% block heading %}{% trans "Page Not Found" %}{% endblock %}
+
+{% block search %}{% endblock %}
+
+{% block main %}
+    <h2>Page Not Found</h2>
+    <p>{% trans "The page you are looking for was not found." %}</p>
+    <p><a href="{% url sentry %}">{% trans "Return to the dashboard" %}</a></p>
+{% endblock %}
diff --git a/sentry/templates/sentry/500.html b/sentry/templates/sentry/500.html
new file mode 100644
index 0000000000..441f58ce8e
--- /dev/null
+++ b/sentry/templates/sentry/500.html
@@ -0,0 +1,17 @@
+{% extends "sentry/layout.html" %}
+
+{% load i18n %}
+
+{% block title %}{% trans "Internal Server Error" %} | {{ block.super }}{% endblock %}
+
+{% block heading %}{% trans "Internal Server Error" %}{% endblock %}
+
+{% block search %}{% endblock %}
+
+{% block main %}
+    <h2>Error Processing Request</h2>
+    <p>{% trans "There was an internal server error while processing your request." %}</p>
+    {% if request.sentry.id %}
+        <p>{% blocktrans with request.sentry.id as id %}You may reference this error as <strong>{{ id }}</strong>.{% endblocktrans %}</p>
+    {% endif %}
+{% endblock %}
diff --git a/sentry/templates/sentry/missing_permissions.html b/sentry/templates/sentry/missing_permissions.html
index 8e03959008..6281e51b5f 100644
--- a/sentry/templates/sentry/missing_permissions.html
+++ b/sentry/templates/sentry/missing_permissions.html
@@ -8,10 +8,6 @@
 
 {% block search %}{% endblock %}
 
-{% block content %}
-    <div id="body">
-        <div class="login-area">
-            <p>{% trans "You do not have access to this page with your current permissions." %}</p>
-        </div>
-    </div>
+{% block main %}
+    <p>{% trans "You do not have access to this page with your current permissions." %}</p>
 {% endblock %}
diff --git a/sentry/web/urls.py b/sentry/web/urls.py
index b2fe23f0f1..1fd0af971e 100644
--- a/sentry/web/urls.py
+++ b/sentry/web/urls.py
@@ -1,11 +1,28 @@
-import os
 import re
 
 from django.conf.urls.defaults import *
+from django.views.defaults import page_not_found
 
 from sentry.conf.settings import KEY
 from sentry.web import views, feeds
 
+handler404 = lambda x: page_not_found(x, template_name='sentry/404.html')
+
+def handler500(request):
+    """
+    500 error handler.
+
+    Templates: `500.html`
+    Context: None
+    """
+    from django.template import Context, loader
+    from django.http import HttpResponseServerError
+    
+    context = {'request': request}
+    
+    t = loader.get_template('sentry/500.html')
+    return HttpResponseServerError(t.render(Context(context)))
+
 urlpatterns = patterns('',
     url(r'^_static/(?P<path>.*)$', views.static_media, name='sentry-media'),
 
