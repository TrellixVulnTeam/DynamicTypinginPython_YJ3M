commit 9478342b1a9d4429a127c7f687c5b2bef1630a84
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Sat Apr 12 11:12:25 2014 -0400

    Handle case where state.src is None

diff --git a/src/sentry/tasks/fetch_source.py b/src/sentry/tasks/fetch_source.py
index 090620e282..2d7ba1360e 100644
--- a/src/sentry/tasks/fetch_source.py
+++ b/src/sentry/tasks/fetch_source.py
@@ -31,6 +31,7 @@ CHARSET_RE = re.compile(r'charset=(\S+)')
 DEFAULT_ENCODING = 'utf-8'
 BASE64_SOURCEMAP_PREAMBLE = 'data:application/json;base64,'
 BASE64_PREAMBLE_LENGTH = len(BASE64_SOURCEMAP_PREAMBLE)
+UNKNOWN_MODULE = '<unknown module>'
 CLEAN_MODULE_RE = re.compile(r"""^
 (?:/|  # Leading slashes
 (?:
@@ -354,7 +355,10 @@ def expand_javascript_source(data, **kwargs):
                 frame.function = last_state.name if last_state else state.name
                 frame.abs_path = abs_path
                 frame.filename = state.src
-                frame.module = generate_module(state.src) or '<unknown module>'
+                if state.src is None:
+                    frame.module = UNKNOWN_MODULE
+                else:
+                    frame.module = generate_module(state.src) or UNKNOWN_MODULE
         elif sourcemap in sourmap_idxs:
             frame.data = {
                 'sourcemap': sourcemap,
