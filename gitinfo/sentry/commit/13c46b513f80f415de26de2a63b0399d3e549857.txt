commit 13c46b513f80f415de26de2a63b0399d3e549857
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Thu Sep 24 13:33:24 2015 +0200

    Added support for configurable plugin urls.

diff --git a/src/sentry/plugins/base/urls.py b/src/sentry/plugins/base/urls.py
new file mode 100644
index 0000000000..5a96bdc2e0
--- /dev/null
+++ b/src/sentry/plugins/base/urls.py
@@ -0,0 +1,11 @@
+from django.conf.urls import patterns
+
+from sentry.plugins import plugins
+
+
+urlpatterns = patterns('')
+
+for _plugin in plugins.all():
+    _plugin_patterns = _plugin.get_url_patterns()
+    if _plugin_patterns:
+        urlpatterns += _plugin_patterns
diff --git a/src/sentry/plugins/base/v1.py b/src/sentry/plugins/base/v1.py
index 2408393837..a8f7af0bac 100644
--- a/src/sentry/plugins/base/v1.py
+++ b/src/sentry/plugins/base/v1.py
@@ -471,6 +471,9 @@ class IPlugin(local, PluggableViewMixin):
         """Configures the plugin."""
         return default_plugin_config(self, project, request)
 
+    def get_url_patterns(self):
+        """Allows a plugin to return a URL module."""
+
 
 class Plugin(IPlugin):
     """
diff --git a/src/sentry/plugins/base/v2.py b/src/sentry/plugins/base/v2.py
index c2542c9096..39649b182f 100644
--- a/src/sentry/plugins/base/v2.py
+++ b/src/sentry/plugins/base/v2.py
@@ -393,6 +393,9 @@ class IPlugin2(local):
         """Configures the plugin."""
         return default_plugin_config(self, project, request)
 
+    def get_url_patterns(self):
+        """Allows a plugin to return a URL module."""
+
 
 class Plugin2(IPlugin2):
     """
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 31254f1c7c..2ca7aa6da9 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -322,6 +322,9 @@ urlpatterns += patterns(
     url(r'^api/(?P<project_id>[\w_-]+)/crossdomain\.xml$', api.crossdomain_xml,
         name='sentry-api-crossdomain-xml'),
 
+    # plugins
+    url(r'', include('sentry.plugins.base.urls')),
+
     # Generic API
     url(r'^api/(?P<organization_slug>[\w_-]+)/(?P<team_slug>[\w_-]+)/groups/trends/$', api.get_group_trends,
         name='sentry-api-groups-trends'),
