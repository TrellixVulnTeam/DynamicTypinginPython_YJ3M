commit 158c91538b6de71609947ef5429e02665a4d0b84
Author: Alberto Leal <mail4alberto@gmail.com>
Date:   Tue Nov 19 14:36:14 2019 -0500

    chore(discover2): Reduce # of pre-built queries on Discover Index page down to 6 queries (#15650)

diff --git a/src/sentry/static/sentry/app/views/eventsV2/data.tsx b/src/sentry/static/sentry/app/views/eventsV2/data.tsx
index b2d9fbbd55..97fdaa5a61 100644
--- a/src/sentry/static/sentry/app/views/eventsV2/data.tsx
+++ b/src/sentry/static/sentry/app/views/eventsV2/data.tsx
@@ -52,50 +52,9 @@ export const TRANSACTION_VIEWS: Readonly<Array<NewQuery>> = [
     projects: [],
     version: 2,
   },
-  {
-    id: undefined,
-    name: t('Transactions by User'),
-    fields: [
-      'user',
-      'count(id)',
-      'count_unique(transaction)',
-      'avg(transaction.duration)',
-      'p75',
-      'p95',
-    ],
-    fieldnames: ['user', '# of events', 'unique transactions', 'avg', '75th', '95th'],
-    orderby: '-count_id',
-    query: 'event.type:transaction',
-    tags: ['release', 'project.name', 'user.email', 'user.ip', 'environment'],
-    projects: [],
-    version: 2,
-  },
-  {
-    id: undefined,
-    name: t('Transactions by Region'),
-    fields: ['geo.region', 'count(id)', 'avg(transaction.duration)', 'p75', 'p95'],
-    fieldnames: ['Region', '# of events', 'avg', '75th', '95th'],
-    orderby: '-count_id',
-    query: 'event.type:transaction',
-    tags: ['release', 'project.name', 'user.email', 'user.ip', 'environment'],
-    projects: [],
-    version: 2,
-  },
 ];
 
 export const ALL_VIEWS: Readonly<Array<NewQuery>> = [
-  DEFAULT_EVENT_VIEW,
-  {
-    id: undefined,
-    name: t('Project Summary'),
-    fields: ['project', 'count(id)', 'count_unique(issue.id)'],
-    fieldnames: ['project', '# of events', 'unique errors'],
-    orderby: '-count_id',
-    query: 'event.type:error',
-    tags: ['error.type', 'project.name', 'release', 'environment'],
-    projects: [],
-    version: 2,
-  },
   {
     id: undefined,
     name: t('Errors'),
@@ -107,28 +66,6 @@ export const ALL_VIEWS: Readonly<Array<NewQuery>> = [
     projects: [],
     version: 2,
   },
-  {
-    id: undefined,
-    name: t('Errors by URL'),
-    fields: ['url', 'count(id)', 'count_unique(issue.id)'],
-    fieldnames: ['URL', '# of events', 'unique errors'],
-    orderby: '-count_id',
-    query: 'event.type:error',
-    tags: ['error.type', 'project.name', 'url', 'release', 'environment'],
-    projects: [],
-    version: 2,
-  },
-  {
-    id: undefined,
-    name: t('Errors by User'),
-    fields: ['user', 'count(id)', 'count_unique(issue.id)'],
-    fieldnames: ['User', '# of events', 'unique errors'],
-    orderby: '-count_id',
-    query: 'event.type:error',
-    tags: ['user.id', 'project.name', 'url', 'release', 'environment'],
-    projects: [],
-    version: 2,
-  },
   {
     id: undefined,
     name: t('Content Security Policy (CSP)'),
@@ -150,45 +87,31 @@ export const ALL_VIEWS: Readonly<Array<NewQuery>> = [
   },
   {
     id: undefined,
-    name: t('Content Security Policy (CSP) Report by Directive'),
-    fields: ['effective-directive', 'count(id)', 'count_unique(title)'],
-    fieldnames: ['directive', '# of events', 'reports'],
+    name: t('Project Summary'),
+    fields: ['project', 'count(id)', 'count_unique(issue.id)'],
+    fieldnames: ['project', '# of events', 'unique errors'],
     orderby: '-count_id',
-    query: 'event.type:csp',
-    tags: [
-      'project.name',
-      'blocked-uri',
-      'browser.name',
-      'os.name',
-      'release',
-      'environment',
-    ],
+    query: 'event.type:error',
+    tags: ['error.type', 'project.name', 'release', 'environment'],
     projects: [],
     version: 2,
   },
   {
     id: undefined,
-    name: t('Content Security Policy (CSP) Report by Blocked URI'),
-    fields: ['blocked-uri', 'count(id)'],
-    fieldnames: ['URI', '# of events'],
+    name: t('Errors by URL'),
+    fields: ['url', 'count(id)', 'count_unique(issue.id)'],
+    fieldnames: ['URL', '# of events', 'unique errors'],
     orderby: '-count_id',
-    query: 'event.type:csp',
-    tags: [
-      'project.name',
-      'blocked-uri',
-      'browser.name',
-      'os.name',
-      'release',
-      'environment',
-    ],
+    query: 'event.type:error',
+    tags: ['error.type', 'project.name', 'url', 'release', 'environment'],
     projects: [],
     version: 2,
   },
   {
     id: undefined,
-    name: t('Content Security Policy (CSP) Report by User'),
-    fields: ['user', 'count(id)', 'count_unique(title)'],
-    fieldnames: ['User', '# of events', 'reports'],
+    name: t('Content Security Policy (CSP) Report by Directive'),
+    fields: ['effective-directive', 'count(id)', 'count_unique(title)'],
+    fieldnames: ['directive', '# of events', 'reports'],
     orderby: '-count_id',
     query: 'event.type:csp',
     tags: [
diff --git a/src/sentry/static/sentry/app/views/eventsV2/queryList.tsx b/src/sentry/static/sentry/app/views/eventsV2/queryList.tsx
index 4329bbd957..f7abd9ff31 100644
--- a/src/sentry/static/sentry/app/views/eventsV2/queryList.tsx
+++ b/src/sentry/static/sentry/app/views/eventsV2/queryList.tsx
@@ -71,7 +71,10 @@ class QueryList extends React.Component<Props> {
     const {location, organization} = this.props;
     let views = ALL_VIEWS;
     if (organization.features.includes('transaction-events')) {
-      views = [...ALL_VIEWS, ...TRANSACTION_VIEWS];
+      // insert transactions queries at index 2
+      const cloned = [...ALL_VIEWS];
+      cloned.splice(2, 0, ...TRANSACTION_VIEWS);
+      views = cloned;
     }
 
     const list = views.map((view, index) => {
