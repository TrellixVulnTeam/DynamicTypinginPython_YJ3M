commit 8b9f0806cce0cff5d0d1797ac81273a8dfc84b92
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Nov 24 11:58:18 2012 -0800

    Basic test for OPTIONS call on store endpoint

diff --git a/tests/sentry/web/api/tests.py b/tests/sentry/web/api/tests.py
index 07d128a8f4..830f7fd9f8 100644
--- a/tests/sentry/web/api/tests.py
+++ b/tests/sentry/web/api/tests.py
@@ -8,6 +8,32 @@ from sentry.models import Project
 from sentry.testutils import TestCase, fixture
 
 
+class StoreViewTest(TestCase):
+    @fixture
+    def project(self):
+        return Project.objects.create(name='foo', slug='foo')
+
+    @fixture
+    def path(self):
+        return reverse('sentry-api-store', kwargs={'project_id': self.project.slug})
+
+    @mock.patch('sentry.web.api.StoreView._parse_header')
+    @mock.patch('sentry.web.api.project_from_auth_vars')
+    def test_options_response(self, project_from_auth_vars, parse_header):
+        parse_header.return_value = {
+            'sentry_project': self.project.id,
+            'sentry_key': 'a' * 40,
+            'sentry_version': '2.0',
+        }
+        project_from_auth_vars.return_value = self.project
+        resp = self.client.options(self.path)
+        self.assertEquals(resp.status_code, 200)
+        self.assertIn('Allow', resp)
+        self.assertEquals(resp['Allow'], 'POST, OPTIONS')
+        self.assertIn('Content-Length', resp)
+        self.assertEquals(resp['Content-Length'], '0')
+
+
 class CrossDomainXmlTest(TestCase):
     @fixture
     def project(self):
