commit e8b580b652865f3e6a26eda4c3ac3b50e0071917
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Feb 11 12:11:48 2015 -0800

    Switch remaining team endpoints to slugs

diff --git a/src/sentry/api/endpoints/team_access_group_index.py b/src/sentry/api/endpoints/team_access_group_index.py
index a976154c1a..be8e2bd9ab 100644
--- a/src/sentry/api/endpoints/team_access_group_index.py
+++ b/src/sentry/api/endpoints/team_access_group_index.py
@@ -49,8 +49,11 @@ class AccessGroupSerializer(serializers.ModelSerializer):
 
 
 class TeamAccessGroupIndexEndpoint(Endpoint):
-    def get(self, request, team_id):
-        team = Team.objects.get_from_cache(id=team_id)
+    def get(self, request, organization_slug, team_slug):
+        team = Team.objects.get(
+            organization__slug=organization_slug,
+            slug=team_slug,
+        )
 
         assert_perm(team, request.user, request.auth)
 
@@ -58,8 +61,11 @@ class TeamAccessGroupIndexEndpoint(Endpoint):
 
         return Response(serialize(data, request.user))
 
-    def post(self, request, team_id):
-        team = Team.objects.get_from_cache(id=team_id)
+    def post(self, request, organization_slug, team_slug):
+        team = Team.objects.get(
+            organization__slug=organization_slug,
+            slug=team_slug,
+        )
 
         assert_perm(team, request.user, request.auth, access=MEMBER_ADMIN)
 
diff --git a/src/sentry/api/endpoints/team_project_index.py b/src/sentry/api/endpoints/team_project_index.py
index fb287dfe38..7ed57d7cbf 100644
--- a/src/sentry/api/endpoints/team_project_index.py
+++ b/src/sentry/api/endpoints/team_project_index.py
@@ -18,8 +18,11 @@ class ProjectSerializer(serializers.ModelSerializer):
 
 
 class TeamProjectIndexEndpoint(Endpoint):
-    def get(self, request, team_id):
-        team = Team.objects.get_from_cache(id=team_id)
+    def get(self, request, organization_slug, team_slug):
+        team = Team.objects.get(
+            organization__slug=organization_slug,
+            slug=team_slug,
+        )
 
         assert_perm(team, request.user, request.auth)
 
@@ -27,9 +30,11 @@ class TeamProjectIndexEndpoint(Endpoint):
 
         return Response(serialize(results, request.user))
 
-    def post(self, request, team_id):
-        team = Team.objects.get_from_cache(id=team_id)
-
+    def post(self, request, organization_slug, team_slug):
+        team = Team.objects.get(
+            organization__slug=organization_slug,
+            slug=team_slug,
+        )
         assert_perm(team, request.user, request.auth, access=MEMBER_ADMIN)
 
         if not can_create_projects(user=request.user, team=team):
diff --git a/src/sentry/api/urls.py b/src/sentry/api/urls.py
index d6ffb7c8b3..566604b242 100644
--- a/src/sentry/api/urls.py
+++ b/src/sentry/api/urls.py
@@ -75,10 +75,10 @@ urlpatterns = patterns(
     url(r'^teams/(?P<organization_slug>[^\/]+)/(?P<team_slug>[^\/]+)/groups/trending/$',
         TeamGroupsTrendingEndpoint.as_view(),
         name='sentry-api-0-team-groups-trending'),
-    url(r'^teams/(?P<team_id>\d+)/projects/$',
+    url(r'^teams/(?P<organization_slug>[^\/]+)/(?P<team_slug>[^\/]+)/projects/$',
         TeamProjectIndexEndpoint.as_view(),
         name='sentry-api-0-team-project-index'),
-    url(r'^teams/(?P<team_id>\d+)/access-groups/$',
+    url(r'^teams/(?P<organization_slug>[^\/]+)/(?P<team_slug>[^\/]+)/access-groups/$',
         TeamAccessGroupIndexEndpoint.as_view(),
         name='sentry-api-0-team-access-group-index'),
     url(r'^teams/(?P<organization_slug>[^\/]+)/(?P<team_slug>[^\/]+)/stats/$',
diff --git a/tests/sentry/api/endpoints/test_team_access_group_index.py b/tests/sentry/api/endpoints/test_team_access_group_index.py
index 0527527ce5..3d9af83b75 100644
--- a/tests/sentry/api/endpoints/test_team_access_group_index.py
+++ b/tests/sentry/api/endpoints/test_team_access_group_index.py
@@ -15,7 +15,8 @@ class TeamAccessGroupIndexTest(APITestCase):
         self.login_as(user=team.owner)
 
         url = reverse('sentry-api-0-team-access-group-index', kwargs={
-            'team_id': team.id,
+            'organization_slug': team.organization.slug,
+            'team_slug': team.slug,
         })
         response = self.client.get(url)
         assert response.status_code == 200
@@ -29,7 +30,8 @@ class TeamAccessGroupCreateTest(APITestCase):
         self.login_as(user=self.user)
         team = self.create_team(slug='baz')
         url = reverse('sentry-api-0-team-access-group-index', kwargs={
-            'team_id': team.id,
+            'organization_slug': team.organization.slug,
+            'team_slug': team.slug,
         })
         resp = self.client.post(url, data={
             'name': 'hello world',
diff --git a/tests/sentry/api/endpoints/test_team_project_index.py b/tests/sentry/api/endpoints/test_team_project_index.py
index 55524d6f38..7a4dc3c44f 100644
--- a/tests/sentry/api/endpoints/test_team_project_index.py
+++ b/tests/sentry/api/endpoints/test_team_project_index.py
@@ -11,7 +11,8 @@ class TeamProjectIndexTest(APITestCase):
         project_2 = self.create_project(team=team, slug='buzz')
 
         url = reverse('sentry-api-0-team-project-index', kwargs={
-            'team_id': team.id,
+            'organization_slug': team.organization.slug,
+            'team_slug': team.slug,
         })
         response = self.client.get(url)
         assert response.status_code == 200
@@ -27,7 +28,8 @@ class TeamProjectCreateTest(APITestCase):
         self.login_as(user=self.user)
         team = self.create_team(slug='baz')
         url = reverse('sentry-api-0-team-project-index', kwargs={
-            'team_id': team.id,
+            'organization_slug': team.organization.slug,
+            'team_slug': team.slug,
         })
         resp = self.client.post(url, data={
             'name': 'hello world',
