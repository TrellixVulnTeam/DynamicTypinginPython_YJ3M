commit 553a67327302048c18abde4111f1f34e36b6e26f
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Dec 3 18:37:50 2015 -0800

    Stuff my issues behind feature switch

diff --git a/src/sentry/api/serializers/models/organization.py b/src/sentry/api/serializers/models/organization.py
index c1d9b53bb2..98d02af2d0 100644
--- a/src/sentry/api/serializers/models/organization.py
+++ b/src/sentry/api/serializers/models/organization.py
@@ -34,6 +34,8 @@ class DetailedOrganizationSerializer(OrganizationSerializer):
         feature_list = []
         if features.has('organizations:sso', obj, actor=user):
             feature_list.append('sso')
+        if features.has('organizations:my-issues', obj, actor=user):
+            feature_list.append('my-issues')
 
         if getattr(obj.flags, 'allow_joinleave'):
             feature_list.append('open-membership')
diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 3dd4c68f3a..3df69e5228 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -598,6 +598,7 @@ SENTRY_FEATURES = {
     'auth:register': True,
     'organizations:create': True,
     'organizations:sso': True,
+    'organizations:my-issues': False,
     'projects:quotas': True,
     'projects:user-reports': True,
     'projects:plugins': True,
diff --git a/src/sentry/features/__init__.py b/src/sentry/features/__init__.py
index adb8524635..51e58ee464 100644
--- a/src/sentry/features/__init__.py
+++ b/src/sentry/features/__init__.py
@@ -12,6 +12,7 @@ default_manager.add('organizations:sso', OrganizationFeature)
 default_manager.add('projects:quotas', ProjectFeature)
 default_manager.add('projects:user-reports', ProjectFeature)
 default_manager.add('projects:plugins', ProjectPluginFeature)
+default_manager.add('organizations:my-issues', OrganizationFeature)
 
 # expose public api
 add = default_manager.add
diff --git a/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx b/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx
index ecc03d98d0..4f5dcabaa2 100644
--- a/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx
+++ b/src/sentry/static/sentry/app/components/organizations/homeSidebar.jsx
@@ -30,12 +30,16 @@ const HomeSidebar = React.createClass({
             <ListLink to={`/organizations/${orgId}/stats/`}>{t('Stats')}</ListLink>
           }
         </ul>
-        <h6 className="nav-header">{t('My Issues')}</h6>
-        <ul className="nav nav-stacked">
-          <ListLink to={`/organizations/${orgId}/issues/assigned/`}>{t('Assigned to Me')}</ListLink>
-          <ListLink to={`/organizations/${orgId}/issues/bookmarks/`}>{t('Bookmarks')}</ListLink>
-          <ListLink to={`/organizations/${orgId}/issues/history/`}>{t('History')}</ListLink>
-        </ul>
+        {features.has('my-issues') &&
+          <div>
+            <h6 className="nav-header">{t('My Issues')}</h6>
+            <ul className="nav nav-stacked">
+              <ListLink to={`/organizations/${orgId}/issues/assigned/`}>{t('Assigned to Me')}</ListLink>
+              <ListLink to={`/organizations/${orgId}/issues/bookmarks/`}>{t('Bookmarks')}</ListLink>
+              <ListLink to={`/organizations/${orgId}/issues/history/`}>{t('History')}</ListLink>
+            </ul>
+          </div>
+        }
         {access.has('org:read') &&
           <div>
             <h6 className="nav-header">{t('Manage')}</h6>
diff --git a/src/sentry/templates/sentry/bases/organization.html b/src/sentry/templates/sentry/bases/organization.html
index c7c8c5b825..5808b5b1fa 100644
--- a/src/sentry/templates/sentry/bases/organization.html
+++ b/src/sentry/templates/sentry/bases/organization.html
@@ -29,6 +29,14 @@
     </li>
     {% endif %}
   </ul>
+  {% feature organizations:my-issues organization %}
+    <h6 class="nav-header">{% trans "My Issues" %}</h6>
+    <ul class="nav nav-stacked">
+      <li><a href="{% absolute_uri '/organizations/{}/issues/assigned/' organization.slug %}">{% trans "Assigned to Me" %}</li></a>
+      <li><a href="{% absolute_uri '/organizations/{}/issues/bookmarks/' organization.slug %}">{% trans "Bookmarks" %}</li></a>
+      <li><a href="{% absolute_uri '/organizations/{}/issues/history/' organization.slug %}">{% trans "History" %}</li></a>
+    </ul>
+  {% endfeature %}
   <h6 class="nav-header">Manage</h6>
   <ul class="nav nav-stacked">
     {% if ACCESS.org_read %}
@@ -53,25 +61,21 @@
       {% endfeature %}
     {% endif %}
     {% if ACCESS.org_write %}
-    <li class="{% block org_apikeys_nav %}{% endblock %}">
-      <a href="{% url 'sentry-organization-api-keys' organization.slug %}">
-        {% trans "API Keys" %}
-      </a>
-    </li>
-    {% endif %}
-    {% if ACCESS.org_write %}
-    <li class="{% block org_auditlog_nav %}{% endblock %}">
-      <a href="{% url 'sentry-organization-audit-log' organization.slug %}">
-        {% trans "Audit Log" %}
-      </a>
-    </li>
-    {% endif %}
-    {% if ACCESS.org_write %}
-    <li class="{% block org_settings_nav %}{% endblock %}">
-      <a href="{% url 'sentry-organization-settings' organization.slug %}">
-        {% trans "Settings" %}
-      </a>
-    </li>
+      <li class="{% block org_apikeys_nav %}{% endblock %}">
+        <a href="{% url 'sentry-organization-api-keys' organization.slug %}">
+          {% trans "API Keys" %}
+        </a>
+      </li>
+      <li class="{% block org_auditlog_nav %}{% endblock %}">
+        <a href="{% url 'sentry-organization-audit-log' organization.slug %}">
+          {% trans "Audit Log" %}
+        </a>
+      </li>
+      <li class="{% block org_settings_nav %}{% endblock %}">
+        <a href="{% url 'sentry-organization-settings' organization.slug %}">
+          {% trans "Settings" %}
+        </a>
+      </li>
     {% endif %}
   </ul>
   {% block org_sidebar_nav_extra %}
