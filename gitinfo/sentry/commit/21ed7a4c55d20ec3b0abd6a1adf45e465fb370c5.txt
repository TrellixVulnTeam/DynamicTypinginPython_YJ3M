commit 21ed7a4c55d20ec3b0abd6a1adf45e465fb370c5
Author: Stephen Cefali <scefali@sentry.io>
Date:   Mon Oct 14 09:44:17 2019 -0700

    fix(ui): make z-index of menu greater than the error message (#15063)

diff --git a/src/sentry/static/sentry/app/components/forms/selectControl.jsx b/src/sentry/static/sentry/app/components/forms/selectControl.jsx
index b33ffda062..4eab74f5fb 100644
--- a/src/sentry/static/sentry/app/components/forms/selectControl.jsx
+++ b/src/sentry/static/sentry/app/components/forms/selectControl.jsx
@@ -165,6 +165,10 @@ const StyledSelect = styled(React.forwardRef(forwardRef))`
     vertical-align: middle;
   }
 
+  .Select-menu-outer {
+    z-index: ${p => p.theme.zIndex.dropdown};
+  }
+
   ${({noMenu}) =>
     noMenu &&
     css`
diff --git a/src/sentry/static/sentry/app/utils/theme.tsx b/src/sentry/static/sentry/app/utils/theme.tsx
index 080f369cdb..b83230eb6a 100644
--- a/src/sentry/static/sentry/app/utils/theme.tsx
+++ b/src/sentry/static/sentry/app/utils/theme.tsx
@@ -228,6 +228,7 @@ const theme = {
   // Try to keep these ordered plz
   zIndex: {
     header: 1000,
+    errorMessage: 1000,
     dropdown: 1001,
 
     dropdownAutocomplete: {
diff --git a/src/sentry/static/sentry/app/views/settings/components/forms/formField/index.jsx b/src/sentry/static/sentry/app/views/settings/components/forms/formField/index.jsx
index 46b3d1bc57..210235b337 100644
--- a/src/sentry/static/sentry/app/views/settings/components/forms/formField/index.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/forms/formField/index.jsx
@@ -28,7 +28,7 @@ const FormFieldErrorReason = styled('div')`
   font-size: 12px;
   border-radius: 3px;
   box-shadow: 0 0 0 1px rgba(64, 11, 54, 0.15), 0 4px 20px 0 rgba(64, 11, 54, 0.36);
-  z-index: 10000;
+  z-index: ${p => p.theme.zIndex.errorMessage};
   animation: ${slideInUp} 200ms ease-in-out forwards;
 
   &:before,
diff --git a/tests/js/spec/components/__snapshots__/createProject.spec.jsx.snap b/tests/js/spec/components/__snapshots__/createProject.spec.jsx.snap
index 698f16b07d..b8970257bc 100644
--- a/tests/js/spec/components/__snapshots__/createProject.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/createProject.spec.jsx.snap
@@ -1307,7 +1307,7 @@ exports[`CreateProject should deal with incorrect platform name if its provided
                   <ForwardRef(SelectPicker)
                     arrowRenderer={[Function]}
                     backspaceRemoves={false}
-                    className="css-dj2cmi-StyledSelect eho28m20"
+                    className="css-5srpa7-StyledSelect eho28m20"
                     clearable={false}
                     deleteRemoves={false}
                     height={36}
@@ -1321,7 +1321,7 @@ exports[`CreateProject should deal with incorrect platform name if its provided
                     <SelectPicker
                       arrowRenderer={[Function]}
                       backspaceRemoves={false}
-                      className="css-dj2cmi-StyledSelect eho28m20"
+                      className="css-5srpa7-StyledSelect eho28m20"
                       clearable={false}
                       deleteRemoves={false}
                       forwardedRef={null}
@@ -1338,7 +1338,7 @@ exports[`CreateProject should deal with incorrect platform name if its provided
                         autosize={true}
                         backspaceRemoves={false}
                         backspaceToRemoveMessage="Press backspace to remove {label}"
-                        className="css-dj2cmi-StyledSelect eho28m20"
+                        className="css-5srpa7-StyledSelect eho28m20"
                         clearAllText="Clear all"
                         clearRenderer={[Function]}
                         clearValueText="Clear value"
@@ -1386,7 +1386,7 @@ exports[`CreateProject should deal with incorrect platform name if its provided
                         valueKey="value"
                       >
                         <div
-                          className="Select css-dj2cmi-StyledSelect eho28m20 is-searchable Select--single"
+                          className="Select css-5srpa7-StyledSelect eho28m20 is-searchable Select--single"
                         >
                           <div
                             className="Select-control"
@@ -2283,7 +2283,7 @@ exports[`CreateProject should fill in platform name if its provided by url 1`] =
                   <ForwardRef(SelectPicker)
                     arrowRenderer={[Function]}
                     backspaceRemoves={false}
-                    className="css-dj2cmi-StyledSelect eho28m20"
+                    className="css-5srpa7-StyledSelect eho28m20"
                     clearable={false}
                     deleteRemoves={false}
                     height={36}
@@ -2297,7 +2297,7 @@ exports[`CreateProject should fill in platform name if its provided by url 1`] =
                     <SelectPicker
                       arrowRenderer={[Function]}
                       backspaceRemoves={false}
-                      className="css-dj2cmi-StyledSelect eho28m20"
+                      className="css-5srpa7-StyledSelect eho28m20"
                       clearable={false}
                       deleteRemoves={false}
                       forwardedRef={null}
@@ -2314,7 +2314,7 @@ exports[`CreateProject should fill in platform name if its provided by url 1`] =
                         autosize={true}
                         backspaceRemoves={false}
                         backspaceToRemoveMessage="Press backspace to remove {label}"
-                        className="css-dj2cmi-StyledSelect eho28m20"
+                        className="css-5srpa7-StyledSelect eho28m20"
                         clearAllText="Clear all"
                         clearRenderer={[Function]}
                         clearValueText="Clear value"
@@ -2362,7 +2362,7 @@ exports[`CreateProject should fill in platform name if its provided by url 1`] =
                         valueKey="value"
                       >
                         <div
-                          className="Select css-dj2cmi-StyledSelect eho28m20 is-searchable Select--single"
+                          className="Select css-5srpa7-StyledSelect eho28m20 is-searchable Select--single"
                         >
                           <div
                             className="Select-control"
@@ -3959,7 +3959,7 @@ exports[`CreateProject should fill in project name if its empty when platform is
                   <ForwardRef(SelectPicker)
                     arrowRenderer={[Function]}
                     backspaceRemoves={false}
-                    className="css-dj2cmi-StyledSelect eho28m20"
+                    className="css-5srpa7-StyledSelect eho28m20"
                     clearable={false}
                     deleteRemoves={false}
                     height={36}
@@ -3973,7 +3973,7 @@ exports[`CreateProject should fill in project name if its empty when platform is
                     <SelectPicker
                       arrowRenderer={[Function]}
                       backspaceRemoves={false}
-                      className="css-dj2cmi-StyledSelect eho28m20"
+                      className="css-5srpa7-StyledSelect eho28m20"
                       clearable={false}
                       deleteRemoves={false}
                       forwardedRef={null}
@@ -3990,7 +3990,7 @@ exports[`CreateProject should fill in project name if its empty when platform is
                         autosize={true}
                         backspaceRemoves={false}
                         backspaceToRemoveMessage="Press backspace to remove {label}"
-                        className="css-dj2cmi-StyledSelect eho28m20"
+                        className="css-5srpa7-StyledSelect eho28m20"
                         clearAllText="Clear all"
                         clearRenderer={[Function]}
                         clearValueText="Clear value"
@@ -4038,7 +4038,7 @@ exports[`CreateProject should fill in project name if its empty when platform is
                         valueKey="value"
                       >
                         <div
-                          className="Select css-dj2cmi-StyledSelect eho28m20 is-searchable Select--single"
+                          className="Select css-5srpa7-StyledSelect eho28m20 is-searchable Select--single"
                         >
                           <div
                             className="Select-control"
diff --git a/tests/js/spec/components/contextPickerModal.spec.jsx b/tests/js/spec/components/contextPickerModal.spec.jsx
index de3b03d9bc..806f12acca 100644
--- a/tests/js/spec/components/contextPickerModal.spec.jsx
+++ b/tests/js/spec/components/contextPickerModal.spec.jsx
@@ -48,7 +48,10 @@ describe('ContextPickerModal', function() {
     const api = MockApiClient.addMockResponse({
       url: `/organizations/${org2.slug}/`,
     });
-    const wrapper = mount(getComponent({organizations: [org2]}));
+    const wrapper = mount(
+      getComponent({organizations: [org2]}),
+      TestStubs.routerContext()
+    );
 
     wrapper.update();
     expect(spy).toHaveBeenCalledWith('org2', {
@@ -63,7 +66,10 @@ describe('ContextPickerModal', function() {
     const api = MockApiClient.addMockResponse({
       url: `/organizations/${org2.slug}/`,
     });
-    const wrapper = mount(getComponent({organizations: [org2]}));
+    const wrapper = mount(
+      getComponent({organizations: [org2]}),
+      TestStubs.routerContext()
+    );
 
     expect(spy).toHaveBeenCalledWith('org2', {
       setActive: true,
@@ -87,7 +93,8 @@ describe('ContextPickerModal', function() {
         needProject: true,
         nextPath: '/test/:orgId/path/:projectId/',
         organizations: [org2],
-      })
+      }),
+      TestStubs.routerContext()
     );
 
     expect(spy).toHaveBeenCalledWith('org2', {
@@ -102,7 +109,7 @@ describe('ContextPickerModal', function() {
   });
 
   it('selects an org and calls `onFinish` with URL with organization slug', function() {
-    const wrapper = mount(getComponent({}));
+    const wrapper = mount(getComponent({}), TestStubs.routerContext());
     const mock = MockApiClient.addMockResponse({
       url: `/organizations/${org.slug}/`,
     });
@@ -164,7 +171,8 @@ describe('ContextPickerModal', function() {
             projects: [project2],
           },
         ],
-      })
+      }),
+      TestStubs.routerContext()
     );
 
     // Should not have anything selected
diff --git a/tests/js/spec/components/forms/__snapshots__/selectField.spec.jsx.snap b/tests/js/spec/components/forms/__snapshots__/selectField.spec.jsx.snap
index 01f354d4e3..16c34b0133 100644
--- a/tests/js/spec/components/forms/__snapshots__/selectField.spec.jsx.snap
+++ b/tests/js/spec/components/forms/__snapshots__/selectField.spec.jsx.snap
@@ -172,7 +172,7 @@ exports[`SelectField renders without form context 1`] = `
             <ForwardRef(SelectPicker)
               arrowRenderer={[Function]}
               backspaceRemoves={true}
-              className="e1qrhqd00 css-6q5c8d-StyledSelect-StyledSelectControl eho28m20"
+              className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
               clearable={true}
               deleteRemoves={true}
               disabled={false}
@@ -199,7 +199,7 @@ exports[`SelectField renders without form context 1`] = `
               <SelectPicker
                 arrowRenderer={[Function]}
                 backspaceRemoves={true}
-                className="e1qrhqd00 css-6q5c8d-StyledSelect-StyledSelectControl eho28m20"
+                className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
                 clearable={true}
                 deleteRemoves={true}
                 disabled={false}
@@ -229,7 +229,7 @@ exports[`SelectField renders without form context 1`] = `
                   autosize={true}
                   backspaceRemoves={true}
                   backspaceToRemoveMessage="Press backspace to remove {label}"
-                  className="e1qrhqd00 css-6q5c8d-StyledSelect-StyledSelectControl eho28m20"
+                  className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
                   clearAllText="Clear all"
                   clearRenderer={[Function]}
                   clearValueText="Clear value"
@@ -289,7 +289,7 @@ exports[`SelectField renders without form context 1`] = `
                   valueKey="value"
                 >
                   <div
-                    className="Select e1qrhqd00 css-6q5c8d-StyledSelect-StyledSelectControl eho28m20 has-value is-clearable is-searchable Select--single"
+                    className="Select e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20 has-value is-clearable is-searchable Select--single"
                   >
                     <input
                       disabled={false}
diff --git a/tests/js/spec/components/forms/selectAsyncField.spec.jsx b/tests/js/spec/components/forms/selectAsyncField.spec.jsx
index 5ecac4e192..a7dc07fc91 100644
--- a/tests/js/spec/components/forms/selectAsyncField.spec.jsx
+++ b/tests/js/spec/components/forms/selectAsyncField.spec.jsx
@@ -20,7 +20,10 @@ describe('SelectAsyncField', function() {
   });
 
   it('supports autocomplete arguments from an integration', async function() {
-    const wrapper = mount(<SelectAsyncField url="/foo/bar/" name="fieldName" />);
+    const wrapper = mount(
+      <SelectAsyncField url="/foo/bar/" name="fieldName" />,
+      TestStubs.routerContext()
+    );
 
     wrapper.find('input[id="id-fieldName"]').simulate('change', {target: {value: 'baz'}});
 
@@ -44,7 +47,7 @@ describe('SelectAsyncField', function() {
       <Form onSubmit={submitMock}>
         <SelectAsyncField url="/foo/bar/" name="fieldName" />
       </Form>,
-      {}
+      TestStubs.routerContext()
     );
 
     wrapper.find('input[id="id-fieldName"]').simulate('change', {target: {value: 'baz'}});
diff --git a/tests/js/spec/components/forms/selectControl.spec.jsx b/tests/js/spec/components/forms/selectControl.spec.jsx
index db8e38e578..dac128baa3 100644
--- a/tests/js/spec/components/forms/selectControl.spec.jsx
+++ b/tests/js/spec/components/forms/selectControl.spec.jsx
@@ -59,7 +59,8 @@ describe('SelectControl', function() {
         choices={[[{id: 'foo', name: 'Foo'}, Foo], [{id: 'bar', name: 'Bar'}, Bar]]}
         name="fieldName"
         onChange={mock}
-      />
+      />,
+      TestStubs.routerContext()
     );
     expect(wrapper.find('StyledSelect').prop('options')).toEqual([
       {value: {id: 'foo', name: 'Foo'}, label: Foo},
diff --git a/tests/js/spec/components/forms/selectCreatableField.spec.jsx b/tests/js/spec/components/forms/selectCreatableField.spec.jsx
index b5b1ebb38a..638bf62fb1 100644
--- a/tests/js/spec/components/forms/selectCreatableField.spec.jsx
+++ b/tests/js/spec/components/forms/selectCreatableField.spec.jsx
@@ -6,7 +6,8 @@ import {Form, SelectCreatableField} from 'app/components/forms';
 describe('SelectCreatableField', function() {
   it('can add user input into select field when using options', function() {
     const wrapper = mount(
-      <SelectCreatableField options={[{value: 'foo', label: 'Foo'}]} name="fieldName" />
+      <SelectCreatableField options={[{value: 'foo', label: 'Foo'}]} name="fieldName" />,
+      TestStubs.routerContext()
     );
 
     wrapper
@@ -32,7 +33,10 @@ describe('SelectCreatableField', function() {
   });
 
   it('can add user input into select field when using choices', function() {
-    const wrapper = mount(<SelectCreatableField choices={['foo']} name="fieldName" />);
+    const wrapper = mount(
+      <SelectCreatableField choices={['foo']} name="fieldName" />,
+      TestStubs.routerContext()
+    );
 
     wrapper
       .find('input[id="id-fieldName"]')
@@ -58,7 +62,8 @@ describe('SelectCreatableField', function() {
 
   it('can add user input into select field when using paired choices', function() {
     const wrapper = mount(
-      <SelectCreatableField choices={[['foo', 'foo']]} name="fieldName" />
+      <SelectCreatableField choices={[['foo', 'foo']]} name="fieldName" />,
+      TestStubs.routerContext()
     );
 
     wrapper
@@ -89,7 +94,7 @@ describe('SelectCreatableField', function() {
       <Form onSubmit={submitMock}>
         <SelectCreatableField choices={[['foo', 'foo']]} name="fieldName" />
       </Form>,
-      {}
+      TestStubs.routerContext()
     );
 
     wrapper
diff --git a/tests/js/spec/components/forms/selectField.spec.jsx b/tests/js/spec/components/forms/selectField.spec.jsx
index 42e2e21d70..9a59e8cf97 100644
--- a/tests/js/spec/components/forms/selectField.spec.jsx
+++ b/tests/js/spec/components/forms/selectField.spec.jsx
@@ -12,7 +12,8 @@ describe('SelectField', function() {
         options={[{label: 'a', value: 'a'}, {label: 'b', value: 'b'}]}
         name="fieldName"
         value="a"
-      />
+      />,
+      TestStubs.routerContext()
     );
     expect(wrapper).toMatchSnapshot();
   });
@@ -59,7 +60,8 @@ describe('SelectField', function() {
           options={[{label: 'a', value: 'a'}, {label: 'b', value: 'b'}]}
           name="fieldName"
         />
-      </Form>
+      </Form>,
+      TestStubs.routerContext()
     );
     selectByValue(wrapper, 'a', {name: 'fieldName'});
     wrapper.find('Form').simulate('submit');
@@ -80,7 +82,8 @@ describe('SelectField', function() {
             options={[{label: 'a', value: 'a'}, {label: 'b', value: 'b'}]}
             name="fieldName"
           />
-        </Form>
+        </Form>,
+        TestStubs.routerContext()
       );
       selectByValue(wrapper, 'a', {name: 'fieldName'});
       wrapper.find('Form').simulate('submit');
diff --git a/tests/js/spec/views/__snapshots__/ownershipInput.spec.jsx.snap b/tests/js/spec/views/__snapshots__/ownershipInput.spec.jsx.snap
index 5cf11d64ef..2fb45cfba4 100644
--- a/tests/js/spec/views/__snapshots__/ownershipInput.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/ownershipInput.spec.jsx.snap
@@ -242,7 +242,7 @@ exports[`Project Ownership Input renders 1`] = `
                       <ForwardRef(SelectPicker)
                         arrowRenderer={[Function]}
                         backspaceRemoves={false}
-                        className="e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20"
+                        className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
                         clearable={false}
                         deleteRemoves={false}
                         disabled={false}
@@ -269,7 +269,7 @@ exports[`Project Ownership Input renders 1`] = `
                         <SelectPicker
                           arrowRenderer={[Function]}
                           backspaceRemoves={false}
-                          className="e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20"
+                          className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
                           clearable={false}
                           deleteRemoves={false}
                           disabled={false}
@@ -299,7 +299,7 @@ exports[`Project Ownership Input renders 1`] = `
                             autosize={true}
                             backspaceRemoves={false}
                             backspaceToRemoveMessage="Press backspace to remove {label}"
-                            className="e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20"
+                            className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
                             clearAllText="Clear all"
                             clearRenderer={[Function]}
                             clearValueText="Clear value"
@@ -359,7 +359,7 @@ exports[`Project Ownership Input renders 1`] = `
                             valueKey="value"
                           >
                             <div
-                              className="Select e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20 has-value is-searchable Select--single"
+                              className="Select e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20 has-value is-searchable Select--single"
                             >
                               <input
                                 disabled={false}
@@ -632,7 +632,7 @@ exports[`Project Ownership Input renders 1`] = `
                         async={true}
                         backspaceRemoves={true}
                         cache={false}
-                        className="css-1qogr7d-StyledSelect eho28m20"
+                        className="css-ovf7gy-StyledSelect eho28m20"
                         clearable={true}
                         defaultOptions={true}
                         deleteRemoves={true}
@@ -652,7 +652,7 @@ exports[`Project Ownership Input renders 1`] = `
                           async={true}
                           backspaceRemoves={true}
                           cache={false}
-                          className="css-1qogr7d-StyledSelect eho28m20"
+                          className="css-ovf7gy-StyledSelect eho28m20"
                           clearable={true}
                           defaultOptions={true}
                           deleteRemoves={true}
@@ -673,7 +673,7 @@ exports[`Project Ownership Input renders 1`] = `
                             autoload={true}
                             backspaceRemoves={true}
                             cache={false}
-                            className="css-1qogr7d-StyledSelect eho28m20"
+                            className="css-ovf7gy-StyledSelect eho28m20"
                             clearable={true}
                             defaultOptions={true}
                             deleteRemoves={true}
@@ -700,7 +700,7 @@ exports[`Project Ownership Input renders 1`] = `
                               backspaceRemoves={true}
                               backspaceToRemoveMessage="Press backspace to remove {label}"
                               cache={false}
-                              className="css-1qogr7d-StyledSelect eho28m20"
+                              className="css-ovf7gy-StyledSelect eho28m20"
                               clearAllText="Clear all"
                               clearRenderer={[Function]}
                               clearValueText="Clear value"
@@ -752,7 +752,7 @@ exports[`Project Ownership Input renders 1`] = `
                               valueKey="value"
                             >
                               <div
-                                className="Select css-1qogr7d-StyledSelect eho28m20 is-clearable is-loading is-searchable Select--multi"
+                                className="Select css-ovf7gy-StyledSelect eho28m20 is-clearable is-loading is-searchable Select--multi"
                               >
                                 <div
                                   className="Select-control"
diff --git a/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap b/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
index 268753d9ad..4a0c355195 100644
--- a/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
@@ -215,7 +215,7 @@ exports[`RuleBuilder renders 1`] = `
                     <ForwardRef(SelectPicker)
                       arrowRenderer={[Function]}
                       backspaceRemoves={false}
-                      className="e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20"
+                      className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
                       clearable={false}
                       deleteRemoves={false}
                       disabled={false}
@@ -242,7 +242,7 @@ exports[`RuleBuilder renders 1`] = `
                       <SelectPicker
                         arrowRenderer={[Function]}
                         backspaceRemoves={false}
-                        className="e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20"
+                        className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
                         clearable={false}
                         deleteRemoves={false}
                         disabled={false}
@@ -272,7 +272,7 @@ exports[`RuleBuilder renders 1`] = `
                           autosize={true}
                           backspaceRemoves={false}
                           backspaceToRemoveMessage="Press backspace to remove {label}"
-                          className="e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20"
+                          className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
                           clearAllText="Clear all"
                           clearRenderer={[Function]}
                           clearValueText="Clear value"
@@ -332,7 +332,7 @@ exports[`RuleBuilder renders 1`] = `
                           valueKey="value"
                         >
                           <div
-                            className="Select e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20 has-value is-searchable Select--single"
+                            className="Select e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20 has-value is-searchable Select--single"
                           >
                             <input
                               disabled={false}
@@ -613,7 +613,7 @@ exports[`RuleBuilder renders 1`] = `
                       async={true}
                       backspaceRemoves={true}
                       cache={false}
-                      className="css-1qogr7d-StyledSelect eho28m20"
+                      className="css-ovf7gy-StyledSelect eho28m20"
                       clearable={true}
                       defaultOptions={true}
                       deleteRemoves={true}
@@ -633,7 +633,7 @@ exports[`RuleBuilder renders 1`] = `
                         async={true}
                         backspaceRemoves={true}
                         cache={false}
-                        className="css-1qogr7d-StyledSelect eho28m20"
+                        className="css-ovf7gy-StyledSelect eho28m20"
                         clearable={true}
                         defaultOptions={true}
                         deleteRemoves={true}
@@ -654,7 +654,7 @@ exports[`RuleBuilder renders 1`] = `
                           autoload={true}
                           backspaceRemoves={true}
                           cache={false}
-                          className="css-1qogr7d-StyledSelect eho28m20"
+                          className="css-ovf7gy-StyledSelect eho28m20"
                           clearable={true}
                           defaultOptions={true}
                           deleteRemoves={true}
@@ -681,7 +681,7 @@ exports[`RuleBuilder renders 1`] = `
                             backspaceRemoves={true}
                             backspaceToRemoveMessage="Press backspace to remove {label}"
                             cache={false}
-                            className="css-1qogr7d-StyledSelect eho28m20"
+                            className="css-ovf7gy-StyledSelect eho28m20"
                             clearAllText="Clear all"
                             clearRenderer={[Function]}
                             clearValueText="Clear value"
@@ -871,7 +871,7 @@ exports[`RuleBuilder renders 1`] = `
                             valueKey="value"
                           >
                             <div
-                              className="Select css-1qogr7d-StyledSelect eho28m20 is-clearable is-searchable Select--multi"
+                              className="Select css-ovf7gy-StyledSelect eho28m20 is-clearable is-searchable Select--multi"
                             >
                               <div
                                 className="Select-control"
@@ -1470,7 +1470,7 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                     <ForwardRef(SelectPicker)
                       arrowRenderer={[Function]}
                       backspaceRemoves={false}
-                      className="e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20"
+                      className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
                       clearable={false}
                       deleteRemoves={false}
                       disabled={false}
@@ -1497,7 +1497,7 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                       <SelectPicker
                         arrowRenderer={[Function]}
                         backspaceRemoves={false}
-                        className="e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20"
+                        className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
                         clearable={false}
                         deleteRemoves={false}
                         disabled={false}
@@ -1527,7 +1527,7 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                           autosize={true}
                           backspaceRemoves={false}
                           backspaceToRemoveMessage="Press backspace to remove {label}"
-                          className="e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20"
+                          className="e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20"
                           clearAllText="Clear all"
                           clearRenderer={[Function]}
                           clearValueText="Clear value"
@@ -1587,7 +1587,7 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                           valueKey="value"
                         >
                           <div
-                            className="Select e1qrhqd00 css-1j7c7e2-StyledSelect-StyledSelectControl eho28m20 has-value is-searchable Select--single"
+                            className="Select e1qrhqd00 css-tbbzhr-StyledSelect-StyledSelectControl eho28m20 has-value is-searchable Select--single"
                           >
                             <input
                               disabled={false}
@@ -2020,7 +2020,7 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                       async={true}
                       backspaceRemoves={true}
                       cache={false}
-                      className="css-1qogr7d-StyledSelect eho28m20"
+                      className="css-ovf7gy-StyledSelect eho28m20"
                       clearable={true}
                       defaultOptions={true}
                       deleteRemoves={true}
@@ -2078,7 +2078,7 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                         async={true}
                         backspaceRemoves={true}
                         cache={false}
-                        className="css-1qogr7d-StyledSelect eho28m20"
+                        className="css-ovf7gy-StyledSelect eho28m20"
                         clearable={true}
                         defaultOptions={true}
                         deleteRemoves={true}
@@ -2137,7 +2137,7 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                           autoload={true}
                           backspaceRemoves={true}
                           cache={false}
-                          className="css-1qogr7d-StyledSelect eho28m20"
+                          className="css-ovf7gy-StyledSelect eho28m20"
                           clearable={true}
                           defaultOptions={true}
                           deleteRemoves={true}
@@ -2202,7 +2202,7 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                             backspaceRemoves={true}
                             backspaceToRemoveMessage="Press backspace to remove {label}"
                             cache={false}
-                            className="css-1qogr7d-StyledSelect eho28m20"
+                            className="css-ovf7gy-StyledSelect eho28m20"
                             clearAllText="Clear all"
                             clearRenderer={[Function]}
                             clearValueText="Clear value"
@@ -2430,7 +2430,7 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                             valueKey="value"
                           >
                             <div
-                              className="Select css-1qogr7d-StyledSelect eho28m20 has-value is-clearable is-focused is-searchable Select--multi"
+                              className="Select css-ovf7gy-StyledSelect eho28m20 has-value is-clearable is-focused is-searchable Select--multi"
                             >
                               <div
                                 className="Select-control"
diff --git a/tests/js/spec/views/discover/aggregations/aggregation.spec.jsx b/tests/js/spec/views/discover/aggregations/aggregation.spec.jsx
index 287373ff31..3987270e62 100644
--- a/tests/js/spec/views/discover/aggregations/aggregation.spec.jsx
+++ b/tests/js/spec/views/discover/aggregations/aggregation.spec.jsx
@@ -25,7 +25,8 @@ describe('Aggregation', function() {
 
       data.forEach(async function(item) {
         const wrapper = mount(
-          <Aggregation value={item.value} onChange={jest.fn()} columns={[]} />
+          <Aggregation value={item.value} onChange={jest.fn()} columns={[]} />,
+          TestStubs.routerContext()
         );
         expect(wrapper.text()).toBe(item.expectedTextValue);
       });
@@ -41,7 +42,8 @@ describe('Aggregation', function() {
         {name: 'error.type', type: 'string'},
       ];
       wrapper = mount(
-        <Aggregation value={[null, null, null]} onChange={jest.fn()} columns={cols} />
+        <Aggregation value={[null, null, null]} onChange={jest.fn()} columns={cols} />,
+        TestStubs.routerContext()
       );
     });
 
@@ -76,7 +78,8 @@ describe('Aggregation', function() {
       focusSpy = jest.spyOn(Aggregation.prototype, 'focus');
 
       wrapper = mount(
-        <Aggregation value={[null, null, null]} onChange={jest.fn()} columns={cols} />
+        <Aggregation value={[null, null, null]} onChange={jest.fn()} columns={cols} />,
+        TestStubs.routerContext()
       );
     });
 
diff --git a/tests/js/spec/views/discover/aggregations/index.spec.jsx b/tests/js/spec/views/discover/aggregations/index.spec.jsx
index a06b2cb528..4f8541601a 100644
--- a/tests/js/spec/views/discover/aggregations/index.spec.jsx
+++ b/tests/js/spec/views/discover/aggregations/index.spec.jsx
@@ -11,7 +11,8 @@ describe('Aggregations', function() {
     const columns = [{name: 'col1', type: 'string'}, {name: 'col2', type: 'number'}];
     const value = [];
     wrapper = mount(
-      <Aggregations columns={columns} onChange={onChangeMock} value={value} />
+      <Aggregations columns={columns} onChange={onChangeMock} value={value} />,
+      TestStubs.routerContext()
     );
   });
   describe('render()', function() {
diff --git a/tests/js/spec/views/discover/conditions/condition.spec.jsx b/tests/js/spec/views/discover/conditions/condition.spec.jsx
index 69c18fd359..2d6123b8fe 100644
--- a/tests/js/spec/views/discover/conditions/condition.spec.jsx
+++ b/tests/js/spec/views/discover/conditions/condition.spec.jsx
@@ -20,7 +20,8 @@ describe('Condition', function() {
       ];
       data.forEach(function(condition) {
         const wrapper = mount(
-          <Condition value={condition.value} onChange={jest.fn()} columns={[]} />
+          <Condition value={condition.value} onChange={jest.fn()} columns={[]} />,
+          TestStubs.routerContext()
         );
         expect(wrapper.text()).toBe(condition.expectedText);
       });
@@ -37,7 +38,8 @@ describe('Condition', function() {
         {name: 'error.type', type: 'string'},
       ];
       wrapper = mount(
-        <Condition value={[null, null, null]} onChange={jest.fn()} columns={columns} />
+        <Condition value={[null, null, null]} onChange={jest.fn()} columns={columns} />,
+        TestStubs.routerContext()
       );
     });
 
@@ -93,7 +95,12 @@ describe('Condition', function() {
       focusSpy = jest.spyOn(Condition.prototype, 'focus');
       const columns = [{name: 'col1', type: 'string'}, {name: 'col2', type: 'number'}];
       wrapper = mount(
-        <Condition value={[null, null, null]} onChange={onChangeMock} columns={columns} />
+        <Condition
+          value={[null, null, null]}
+          onChange={onChangeMock}
+          columns={columns}
+        />,
+        TestStubs.routerContext()
       );
     });
 
@@ -127,7 +134,12 @@ describe('Condition', function() {
     beforeEach(function() {
       const columns = [{name: 'col1', type: 'string'}, {name: 'col2', type: 'number'}];
       wrapper = mount(
-        <Condition value={[null, null, null]} onChange={onChangeMock} columns={columns} />
+        <Condition
+          value={[null, null, null]}
+          onChange={onChangeMock}
+          columns={columns}
+        />,
+        TestStubs.routerContext()
       );
     });
     it('valid condition', function() {
diff --git a/tests/js/spec/views/discover/conditions/index.spec.jsx b/tests/js/spec/views/discover/conditions/index.spec.jsx
index 125a33fb42..0652447a7b 100644
--- a/tests/js/spec/views/discover/conditions/index.spec.jsx
+++ b/tests/js/spec/views/discover/conditions/index.spec.jsx
@@ -11,7 +11,8 @@ describe('Conditions', function() {
     const columns = [{name: 'col1', type: 'string'}, {name: 'col2', type: 'number'}];
     const value = [];
     wrapper = mount(
-      <Conditions columns={columns} onChange={onChangeMock} value={value} />
+      <Conditions columns={columns} onChange={onChangeMock} value={value} />,
+      TestStubs.routerContext()
     );
   });
   describe('render()', function() {
diff --git a/tests/js/spec/views/issueList/tagFilter.spec.jsx b/tests/js/spec/views/issueList/tagFilter.spec.jsx
index ae399b9d94..c63fd5ee59 100644
--- a/tests/js/spec/views/issueList/tagFilter.spec.jsx
+++ b/tests/js/spec/views/issueList/tagFilter.spec.jsx
@@ -11,8 +11,8 @@ describe('IssueListTagFilter', function() {
     MockApiClient.clearMockResponses();
     project = TestStubs.ProjectDetails();
 
-    tagValueLoader = (key, search) => {
-      return new Promise(function(resolve, reject) {
+    tagValueLoader = () => {
+      return new Promise(function(resolve) {
         const data = [
           {
             count: 0,
@@ -38,7 +38,8 @@ describe('IssueListTagFilter', function() {
         value=""
         onSelect={selectMock}
         tagValueLoader={tagValueLoader}
-      />
+      />,
+      TestStubs.routerContext()
     );
 
     wrapper.find('input').simulate('focus');
@@ -62,7 +63,8 @@ describe('IssueListTagFilter', function() {
         value=""
         onSelect={selectMock}
         tagValueLoader={tagValueLoader}
-      />
+      />,
+      TestStubs.routerContext()
     );
 
     wrapper.find('input').simulate('focus');
diff --git a/tests/js/spec/views/settings/organizationDeveloperSettings/permissionSelection.spec.jsx b/tests/js/spec/views/settings/organizationDeveloperSettings/permissionSelection.spec.jsx
index 66e9e37ffa..cbcec62698 100644
--- a/tests/js/spec/views/settings/organizationDeveloperSettings/permissionSelection.spec.jsx
+++ b/tests/js/spec/views/settings/organizationDeveloperSettings/permissionSelection.spec.jsx
@@ -22,12 +22,7 @@ describe('PermissionSelection', () => {
         }}
         onChange={onChange}
       />,
-      {
-        context: {
-          router: TestStubs.routerContext(),
-          form: new FormModel(),
-        },
-      }
+      TestStubs.routerContext([{form: new FormModel()}])
     );
   });
 
diff --git a/tests/js/spec/views/settings/organizationDeveloperSettings/permissionsObserver.spec.jsx b/tests/js/spec/views/settings/organizationDeveloperSettings/permissionsObserver.spec.jsx
index 35b6d3ada6..5922af782f 100644
--- a/tests/js/spec/views/settings/organizationDeveloperSettings/permissionsObserver.spec.jsx
+++ b/tests/js/spec/views/settings/organizationDeveloperSettings/permissionsObserver.spec.jsx
@@ -13,12 +13,7 @@ describe('PermissionsObserver', () => {
         scopes={['project:read', 'project:write', 'project:releases', 'org:admin']}
         events={['issue']}
       />,
-      {
-        context: {
-          router: TestStubs.routerContext(),
-          form: new FormModel(),
-        },
-      }
+      TestStubs.routerContext([{form: new FormModel()}])
     );
   });
 
diff --git a/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/sentryAppInstallationDetail.spec.jsx.snap b/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/sentryAppInstallationDetail.spec.jsx.snap
index 8ee96d9b6b..ca4d0ce0a0 100644
--- a/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/sentryAppInstallationDetail.spec.jsx.snap
+++ b/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/sentryAppInstallationDetail.spec.jsx.snap
@@ -422,6 +422,7 @@ exports[`Sentry App Installations displays all Apps owned by the Org 1`] = `
                                           "actor": 1008,
                                           "menu": 1007,
                                         },
+                                        "errorMessage": 1000,
                                         "globalSelectionHeader": 1009,
                                         "header": 1000,
                                         "modal": 10000,
@@ -696,6 +697,7 @@ exports[`Sentry App Installations displays all Apps owned by the Org 1`] = `
                                                   "actor": 1008,
                                                   "menu": 1007,
                                                 },
+                                                "errorMessage": 1000,
                                                 "globalSelectionHeader": 1009,
                                                 "header": 1000,
                                                 "modal": 10000,
