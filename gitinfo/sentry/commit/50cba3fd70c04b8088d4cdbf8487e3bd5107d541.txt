commit 50cba3fd70c04b8088d4cdbf8487e3bd5107d541
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jun 3 14:07:04 2015 +0100

    Various fixes for settings

diff --git a/src/sentry/templates/sentry/project-issue-tracking.html b/src/sentry/templates/sentry/project-issue-tracking.html
index e521cb0395..7ca776fa5a 100644
--- a/src/sentry/templates/sentry/project-issue-tracking.html
+++ b/src/sentry/templates/sentry/project-issue-tracking.html
@@ -6,7 +6,7 @@
 
 {% block title %}{% trans "Issue Tracking" %} | {{ block.super }}{% endblock %}
 
-{% block content %}
+{% block main %}
   <h2>{% trans "Issue Tracking" %}</h2>
 
   <p>Configure issue tracking for this project to enable quick issue creation links on events.</p>
diff --git a/src/sentry/templates/sentry/project-notifications.html b/src/sentry/templates/sentry/project-notifications.html
index f478d65d74..026a44cb9c 100644
--- a/src/sentry/templates/sentry/project-notifications.html
+++ b/src/sentry/templates/sentry/project-notifications.html
@@ -7,8 +7,8 @@
 
 {% block title %}{% trans "Notifications" %} | {{ block.super }}{% endblock %}
 
-{% block content %}
-  <h3>{% trans "Notifications" %}</h3>
+{% block main %}
+  <h2>{% trans "Notifications" %}</h2>
   <form action="" method="POST" class="form-stacked">
     {% csrf_token %}
     <input type="hidden" name="op" value="save-settings" />
diff --git a/src/sentry/templates/sentry/project-release-tracking.html b/src/sentry/templates/sentry/project-release-tracking.html
index a34d26ed53..0619e505b6 100644
--- a/src/sentry/templates/sentry/project-release-tracking.html
+++ b/src/sentry/templates/sentry/project-release-tracking.html
@@ -6,7 +6,7 @@
 
 {% block title %}{% trans "Release Tracking" %} | {{ block.super }}{% endblock %}
 
-{% block content %}
+{% block main %}
   <h2>{% trans "Release Tracking" %}</h2>
 
   <p>Configure release tracking for this project to automatically record new releases of your application.</p>
diff --git a/src/sentry/templates/sentry/projects/edit_key.html b/src/sentry/templates/sentry/projects/edit_key.html
index 0fb6e56108..37c4b3a0f2 100644
--- a/src/sentry/templates/sentry/projects/edit_key.html
+++ b/src/sentry/templates/sentry/projects/edit_key.html
@@ -6,7 +6,7 @@
 
 {% block title %}{% trans "Edit API Key" %} | {{ block.super }}{% endblock %}
 
-{% block content %}
+{% block main %}
     <div class="page-header">
         <h2>{% trans "Edit API Key" %}</h2>
     </div>
diff --git a/src/sentry/templates/sentry/projects/keys.html b/src/sentry/templates/sentry/projects/keys.html
index caa4fda959..8f9e0ffafc 100644
--- a/src/sentry/templates/sentry/projects/keys.html
+++ b/src/sentry/templates/sentry/projects/keys.html
@@ -4,17 +4,14 @@
 {% load sentry_helpers %}
 {% load sentry_plugins %}
 
-{% block title %}{% trans "Manage Client Keys" %} | {{ block.super }}{% endblock %}
+{% block title %}{% trans "Client Keys" %} | {{ block.super }}{% endblock %}
+
+{% block main %}
+    {% if can_add_key %}
+        <a href="{% url 'sentry-new-project-key' project.organization.slug project.slug %}" class="btn pull-right btn-primary btn-sm" style="position: relative; top: -6px;">{% trans "Generate New Key" %}</a>
+    {% endif %}
+    <h2>{% trans "Client Keys" %}</h2>
 
-{% block content %}
-    <div class="page-header">
-        {% if can_add_key %}
-            <a href="{% url 'sentry-new-project-key' project.organization.slug project.slug %}" class="btn pull-right btn-primary btn-sm" style="position: relative; top: -6px;">{% trans "Generate New Key" %}</a>
-        {% endif %}
-        <h3>
-            {% trans "Manage Client Keys" %}
-        </h3>
-    </div>
     <table class="table table-bordered">
         <colgroup>
             <col/>
diff --git a/src/sentry/templates/sentry/projects/manage.html b/src/sentry/templates/sentry/projects/manage.html
index 3b64019c3d..3d3916a4d1 100644
--- a/src/sentry/templates/sentry/projects/manage.html
+++ b/src/sentry/templates/sentry/projects/manage.html
@@ -27,8 +27,8 @@
   </ul>
 {% endblock %}
 
-{% block content %}
-  <h3>{% trans "Project Settings" %}</h3>
+{% block main %}
+  <h2>{% trans "Project Settings" %}</h2>
   <form class="form-stacked" action="" method="post" id="project_settings">
     {% csrf_token %}
 
@@ -153,8 +153,8 @@
   </script>
 {% endblock %}
 
-{% block rightbar %}
-  <h6>{% trans "Configuration" %}</h6>
+{% block sidebar %}
+  <h6 class="nav-header">{% trans "Configuration" %}</h6>
   <ul class="nav nav-stacked">
     <li{% if not page %} class="active"{% endif %}>
         <a href="{% url 'sentry-manage-project' project.organization.slug project.slug %}">{% trans "Project Settings" %}</a>
@@ -185,22 +185,23 @@
         <a href="{% url 'sentry-manage-project-keys' project.organization.slug project.slug %}">{% trans "Client Keys" %}</a>
     </li>
   </ul>
-  <h6>{% trans "Help" %}</h6>
+  <h6 class="nav-header">{% trans "Help" %}</h6>
   <ul class="nav nav-stacked">
     <li>
         <a href="{% url 'sentry-help-platform-list' %}?pid={{ project.id }}">{% trans "Setup &amp; Installation" %}</a>
     </li>
-    {% with project|get_plugins as plugins %}
-      <h6>{% trans "Integrations" %}</h6>
-      <ul class="nav nav-stacked">
-        <li class="{% if page == 'plugins' %} active{% endif %}">
-          <a href="{% url 'sentry-manage-project-plugins' project.organization.slug project.slug %}">{% trans "Manage Integrations" %} ({{ PLUGINS|length }})</a>
-        </li>
-      {% for p in plugins %}
-        <li{% if page == 'plugin' and plugin.slug == p.slug %} class="active"{% endif %}>
-            <a href="{% url 'sentry-configure-project-plugin' project.organization.slug project.slug p.slug %}">{{ p.get_title }}</a>
-        </li>
-      {% endfor %}
-    {% endwith %}
   </ul>
+  {% with project|get_plugins as plugins %}
+    <h6 class="nav-header">{% trans "Integrations" %}</h6>
+    <ul class="nav nav-stacked">
+      <li class="{% if page == 'plugins' %} active{% endif %}">
+        <a href="{% url 'sentry-manage-project-plugins' project.organization.slug project.slug %}">{% trans "All Integrations" %} ({{ PLUGINS|length }})</a>
+      </li>
+    {% for p in plugins %}
+      <li{% if page == 'plugin' and plugin.slug == p.slug %} class="active"{% endif %}>
+          <a href="{% url 'sentry-configure-project-plugin' project.organization.slug project.slug p.slug %}">{{ p.get_title }}</a>
+      </li>
+    {% endfor %}
+    </ul>
+  {% endwith %}
 {% endblock %}
diff --git a/src/sentry/templates/sentry/projects/manage_tags.html b/src/sentry/templates/sentry/projects/manage_tags.html
index 3174954370..40a9eb4ceb 100644
--- a/src/sentry/templates/sentry/projects/manage_tags.html
+++ b/src/sentry/templates/sentry/projects/manage_tags.html
@@ -4,12 +4,11 @@
 {% load i18n %}
 {% load sentry_helpers %}
 
-{% block title %}{% trans "Manage Tags" %} | {{ block.super }}{% endblock %}
+{% block title %}{% trans "Tags" %} | {{ block.super }}{% endblock %}
+
+{% block main %}
+  <h2>{% trans "Tags" %}</h2>
 
-{% block content %}
-  <div class="page-header">
-    <h2>{% trans "Manage Tags" %}</h2>
-  </div>
   {% if tag_list %}
     <p>{% blocktrans %}Each event in Sentry may be annotated with various tags (key and value pairs). For more information on how send additional tags, see your client's documentation.{% endblocktrans %}</p>
     <form action="" method="post">
diff --git a/src/sentry/templates/sentry/projects/plugins/configure.html b/src/sentry/templates/sentry/projects/plugins/configure.html
index 9658492da8..e2eafc2a04 100644
--- a/src/sentry/templates/sentry/projects/plugins/configure.html
+++ b/src/sentry/templates/sentry/projects/plugins/configure.html
@@ -3,21 +3,21 @@
 {% load i18n %}
 {% load sentry_helpers %}
 
-{% block content %}
-    <div class="page-header">
-        <div class="pull-right">
-            {% if plugin.can_disable %}
-                {% if not plugin_is_enabled %}
-                    <a href="{% url 'sentry-enable-project-plugin' project.organization.slug project.slug plugin.slug %}" class="btn btn-default">{% trans "Enable Plugin" %}</a>
-                {% else %}
-                    <a href="{% url 'sentry-disable-project-plugin' project.organization.slug project.slug plugin.slug %}" class="btn btn-danger">{% trans "Disable Plugin" %}</a>
-                {% endif %}
+{% block title %}{{ plugin.get_title }}{% endblock %}
+
+{% block main %}
+    <div class="pull-right">
+        {% if plugin.can_disable %}
+            {% if not plugin_is_enabled %}
+                <a href="{% url 'sentry-enable-project-plugin' project.organization.slug project.slug plugin.slug %}" class="btn btn-default">{% trans "Enable Plugin" %}</a>
+            {% else %}
+                <a href="{% url 'sentry-disable-project-plugin' project.organization.slug project.slug plugin.slug %}" class="btn btn-danger">{% trans "Disable Plugin" %}</a>
             {% endif %}
-            <a href="{% url 'sentry-reset-project-plugin' project.organization.slug project.slug plugin.slug %}" class="btn btn-default"
-                onclick="return confirm('{% trans "Are you sure you wish to reset all configuration for this plugin?" %}');">{% trans "Reset Configuration" %}</a>
-        </div>
-        <h2>{% blocktrans with plugin.get_title as name %}Configure {{ name }}{% endblocktrans %}</h2>
+        {% endif %}
+        <a href="{% url 'sentry-reset-project-plugin' project.organization.slug project.slug plugin.slug %}" class="btn btn-default"
+            onclick="return confirm('{% trans "Are you sure you wish to reset all configuration for this plugin?" %}');">{% trans "Reset Configuration" %}</a>
     </div>
+    <h2>{{ plugin.get_title }}</h2>
     <div class="row">
         <div class="col-md-8">
             {% if request.GET.success %}
diff --git a/src/sentry/templates/sentry/projects/plugins/list.html b/src/sentry/templates/sentry/projects/plugins/list.html
index 620c8765be..00d4d6917a 100644
--- a/src/sentry/templates/sentry/projects/plugins/list.html
+++ b/src/sentry/templates/sentry/projects/plugins/list.html
@@ -6,7 +6,7 @@
 
 {% block title %}{% trans "Manage Integrations" %} | {{ block.super }}{% endblock %}
 
-{% block content %}
+{% block main %}
     <ul class="nav nav-tabs nav-tabs-mini pull-right" style="position: relative; top: 3px">
         <li class="active"><a href="#">All Services</a></li>
         <li><a href="#">Configured Integrations (14)</a></li>
diff --git a/src/sentry/templates/sentry/projects/quotas.html b/src/sentry/templates/sentry/projects/quotas.html
index a6a5b76f03..6d0fcd8236 100644
--- a/src/sentry/templates/sentry/projects/quotas.html
+++ b/src/sentry/templates/sentry/projects/quotas.html
@@ -6,9 +6,8 @@
 
 {% block title %}{% trans "Rate Limits" %} | {{ block.super }}{% endblock %}
 
-{% block content %}
-
-    <h3>{% trans "Rate Limits" %}</h3>
+{% block main %}
+    <h2>{% trans "Rate Limits" %}</h2>
 
     <form action="" method="post" class="form-stacked">
         <p>{% blocktrans %}With the nature of Sentry, sometimes the amount of data collected can be overwhelming. You can set rate limits per-project to ensure that a single flood of errors won't affect any other projects utilizing Sentry.{% endblocktrans %}</p>
diff --git a/src/sentry/templates/sentry/projects/remove.html b/src/sentry/templates/sentry/projects/remove.html
index 8e263f688e..0588817e76 100644
--- a/src/sentry/templates/sentry/projects/remove.html
+++ b/src/sentry/templates/sentry/projects/remove.html
@@ -5,7 +5,7 @@
 
 {% block title %}{% trans "Remove Project" %} | {{ block.super }}{% endblock %}
 
-{% block content %}
+{% block main %}
     <section class="body">
         <form action="" method="post">
             <p>Are you sure you wish to remove this project?</p>
diff --git a/src/sentry/templates/sentry/projects/rules/list.html b/src/sentry/templates/sentry/projects/rules/list.html
index 2182ee3760..a769be2681 100644
--- a/src/sentry/templates/sentry/projects/rules/list.html
+++ b/src/sentry/templates/sentry/projects/rules/list.html
@@ -2,11 +2,10 @@
 
 {% load i18n %}
 
-{% block content %}
-    <div class="page-header">
-        <a href="{% url 'sentry-new-project-rule' project.organization.slug project.slug %}" class="btn pull-right btn-primary btn-sm" style="position: relative; top: -6px;">{% trans "New Rule" %}</a>
-        <h3>{% trans "Rules" %}</h3>
-    </div>
+{% block main %}
+    <a href="{% url 'sentry-new-project-rule' project.organization.slug project.slug %}" class="btn pull-right btn-primary btn-sm" style="position: relative; top: -6px;">{% trans "New Rule" %}</a>
+    <h2>{% trans "Rules" %}</h2>
+
     {% if rule_list %}
         <table class="table table-bordered">
             <colgroup>
diff --git a/src/sentry/templates/sentry/projects/rules/new.html b/src/sentry/templates/sentry/projects/rules/new.html
index f724862146..c76568fc24 100644
--- a/src/sentry/templates/sentry/projects/rules/new.html
+++ b/src/sentry/templates/sentry/projects/rules/new.html
@@ -4,7 +4,7 @@
 {% load i18n %}
 {% load sentry_helpers %}
 
-{% block content %}
+{% block main %}
   <div id="blk_rule_editor"></div>
   <script>
   $(function(){
diff --git a/src/sentry/templates/sentry/teams/manage-ownership.html b/src/sentry/templates/sentry/teams/manage-ownership.html
deleted file mode 100644
index b057710085..0000000000
--- a/src/sentry/templates/sentry/teams/manage-ownership.html
+++ /dev/null
@@ -1,41 +0,0 @@
-{% extends "sentry/teams/manage.html" %}
-
-{% load i18n %}
-
-{% block controller %}ManageTeamOwnershipCtrl{% endblock %}
-
-{% block main %}
-  <div class="box">
-    <div class="box-header">
-      <h3>{% trans "Transfer Ownership" %}</h3>
-    </div>
-
-    <div class="box-content with-padding">
-      <form role="form" name="form">
-        <p>Transferring ownership will retain your membership as an admin and takes affect immediately.</p>
-
-        <div class="form-group" ng-class="form.newOwner.$invalid ? 'error' : ''">
-          <label for="newOwner">User:</label>
-          <input id="newOwner"
-                 name="user"
-                 ng-model="newOwner"
-                 class="form-control"
-                 type="email"
-                 placeholder="email address"
-                 style="width: 240px"
-                 required>
-          <div ng-show="form.newOwner.$dirty && form.newOwner.$invalid">Invalid:
-            <span ng-show="form.newOwner.$error.required">Enter a valid user.</span>
-          </div>
-        </div>
-
-        <p><label><input ng-model="confirm" type="checkbox" value="1" required> I understand and want to transfer this team.</label></p>
-        <div class="form-actions">
-          <button class="btn btn-primary"
-                  ng-click="saveForm()"
-                  ng-disabled="form.$invalid || isUnchanged(newOwner)">Transfer ownership</button>
-        </div>
-      </form>
-    </div>
-  </div>
-{% endblock %}
