commit 31c7acd861b6cb070b41f4ea9c3144beb753df84
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Aug 15 20:25:04 2016 -0700

    Capture SDK client IP
    
    @getsentry/infrastructure @getsentry/security

diff --git a/src/sentry/interfaces/sdk.py b/src/sentry/interfaces/sdk.py
index 52e29e401a..c2e942be58 100644
--- a/src/sentry/interfaces/sdk.py
+++ b/src/sentry/interfaces/sdk.py
@@ -31,6 +31,7 @@ class Sdk(Interface):
         kwargs = {
             'name': trim(name, 128),
             'version': trim(version, 128),
+            'client_ip': data.get('client_ip'),
         }
         return cls(**kwargs)
 
@@ -54,6 +55,7 @@ class Sdk(Interface):
         return {
             'name': self.name,
             'version': self.version,
+            'clientIP': self.client_ip,
             'upstream': {
                 'name': newest_name,
                 # when this is correct we can make it available
diff --git a/src/sentry/static/sentry/app/components/events/sdk.jsx b/src/sentry/static/sentry/app/components/events/sdk.jsx
index 37a9dd097b..7d060e0f33 100644
--- a/src/sentry/static/sentry/app/components/events/sdk.jsx
+++ b/src/sentry/static/sentry/app/components/events/sdk.jsx
@@ -31,6 +31,10 @@ const EventSdk = React.createClass({
               <td className="key">Version</td>
               <td className="value"><pre>{data.version}</pre></td>
             </tr>
+            <tr key="version">
+              <td className="key">Client IP</td>
+              <td className="value"><pre>{data.clientIP || 'n/a'}</pre></td>
+            </tr>
           </tbody>
         </table>
       </GroupEventDataSection>
diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index c287761fc5..0f910f7551 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -345,6 +345,9 @@ class StoreView(APIView):
             sdk = helper.parse_client_as_sdk(auth.client)
             if sdk:
                 data['sdk'] = sdk
+            else:
+                data['sdk'] = {}
+        data['sdk']['client_ip'] = remote_addr
 
         # mutates data
         manager = EventManager(data, version=auth.version)
diff --git a/tests/sentry/web/api/tests.py b/tests/sentry/web/api/tests.py
index f42384ba4e..8b237d6b55 100644
--- a/tests/sentry/web/api/tests.py
+++ b/tests/sentry/web/api/tests.py
@@ -294,6 +294,7 @@ class StoreViewTest(TestCase):
         assert call_data['sdk'] == {
             'name': '_postWithHeader',
             'version': '0.0.0',
+            'client_ip': '127.0.0.1',
         }
 
 
