commit 8fed851b6fd76c3b1e1c612b363a45552ed47f54
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Thu Jul 28 01:14:06 2016 +0200

    Do not fail if there are no stacks in threads

diff --git a/src/sentry/interfaces/threads.py b/src/sentry/interfaces/threads.py
index c4ec4fa284..33aeed7340 100644
--- a/src/sentry/interfaces/threads.py
+++ b/src/sentry/interfaces/threads.py
@@ -17,8 +17,14 @@ class Threads(Interface):
         for thread in data.get('values') or ():
             stacktrace = thread.get('stacktrace')
             if stacktrace is not None:
-                stacktrace = Stacktrace.to_python(stacktrace,
-                                                  slim_frames=True)
+                # Special case: if the thread has no frames we set the
+                # stacktrace to none.  Otherwise this will fail really
+                # badly.
+                if not stacktrace.get('frames'):
+                    stacktrace = None
+                else:
+                    stacktrace = Stacktrace.to_python(stacktrace,
+                                                      slim_frames=True)
             threads.append({
                 'stacktrace': stacktrace,
                 'id': trim(thread.get('id'), 40),
