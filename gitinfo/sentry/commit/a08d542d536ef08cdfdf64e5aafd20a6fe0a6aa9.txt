commit a08d542d536ef08cdfdf64e5aafd20a6fe0a6aa9
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Feb 12 11:31:16 2016 -0800

    Dont parse URL if no disallowed IPs

diff --git a/src/sentry/http.py b/src/sentry/http.py
index 3c79fca0ec..0bd13a03f7 100644
--- a/src/sentry/http.py
+++ b/src/sentry/http.py
@@ -44,16 +44,16 @@ def is_valid_url(url):
     """
     Tests a URL to ensure it doesn't appear to be a blacklisted IP range.
     """
-    parsed = urlparse(url)
-    if not parsed.hostname:
-        return False
-
     # If we have no disallowed ips, we can skip any further validation
     # and there's no point in doing a DNS lookup to validate against
     # an empty list.
     if not DISALLOWED_IPS:
         return True
 
+    parsed = urlparse(url)
+    if not parsed.hostname:
+        return False
+
     server_hostname = get_server_hostname()
 
     if parsed.hostname == server_hostname:
