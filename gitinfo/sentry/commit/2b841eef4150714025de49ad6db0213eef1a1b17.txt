commit 2b841eef4150714025de49ad6db0213eef1a1b17
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Tue Jan 22 17:20:09 2019 -0800

    fix(api): Handle invalid date params in org releases endpoint
    
    fixes SENTRY-956

diff --git a/src/sentry/api/endpoints/organization_releases.py b/src/sentry/api/endpoints/organization_releases.py
index 229edfa71f..c1adc1bf0e 100644
--- a/src/sentry/api/endpoints/organization_releases.py
+++ b/src/sentry/api/endpoints/organization_releases.py
@@ -4,7 +4,7 @@ from django.db import IntegrityError, transaction
 
 from rest_framework.response import Response
 
-from sentry.api.bases import NoProjects
+from sentry.api.bases import NoProjects, OrganizationEventsError
 from .project_releases import ReleaseSerializer
 from sentry.api.base import DocSection, EnvironmentMixin
 from sentry.api.bases.organization import OrganizationReleasesBaseEndpoint
@@ -102,6 +102,8 @@ class OrganizationReleasesEndpoint(OrganizationReleasesBaseEndpoint, Environment
             )
         except NoProjects:
             return Response([])
+        except OrganizationEventsError as exc:
+            return Response({'detail': exc.message}, status=400)
 
         queryset = Release.objects.filter(
             organization=organization,
diff --git a/tests/sentry/api/endpoints/test_organization_releases.py b/tests/sentry/api/endpoints/test_organization_releases.py
index b47548be20..93e6e7e926 100644
--- a/tests/sentry/api/endpoints/test_organization_releases.py
+++ b/tests/sentry/api/endpoints/test_organization_releases.py
@@ -1237,6 +1237,19 @@ class OrganizationReleaseListEnvironmentsTest(APITestCase):
         )
         self.assert_releases(response, [self.release4, self.release5])
 
+    def test_invalid_date_range(self):
+        url = reverse('sentry-api-0-organization-releases',
+                      kwargs={'organization_slug': self.org.slug})
+        response = self.client.get(
+            url,
+            format='json',
+            data={
+                'start': 'null',
+                'end': 'null',
+            },
+        )
+        assert response.status_code == 400
+
 
 class OrganizationReleaseCreateCommitPatch(ReleaseCommitPatchTest):
     @fixture
