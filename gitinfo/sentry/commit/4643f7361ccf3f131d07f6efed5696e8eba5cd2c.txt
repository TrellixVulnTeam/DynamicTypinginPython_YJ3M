commit 4643f7361ccf3f131d07f6efed5696e8eba5cd2c
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Oct 19 19:18:43 2014 +0200

    Correct data passing within execute_rule

diff --git a/src/sentry/tasks/post_process.py b/src/sentry/tasks/post_process.py
index 087ce91b7f..1196402d7f 100644
--- a/src/sentry/tasks/post_process.py
+++ b/src/sentry/tasks/post_process.py
@@ -158,7 +158,7 @@ def execute_rule(rule_id, event, state):
             rules_logger.error('Unregistered action %r', action['id'])
             continue
 
-        action_inst = action_cls(project)
+        action_inst = action_cls(project, data=rule.data)
         safe_execute(action_inst.after, event=event, state=state)
 
 
diff --git a/tests/sentry/tasks/post_process/tests.py b/tests/sentry/tasks/post_process/tests.py
index fc9069f493..f7122ee5d4 100644
--- a/tests/sentry/tasks/post_process/tests.py
+++ b/tests/sentry/tasks/post_process/tests.py
@@ -168,7 +168,7 @@ class ExecuteRuleTest(TestCase):
 
         mock_rules.get.assert_called_once_with('a.rule.id')
         mock_rule_inst = mock_rules.get.return_value
-        mock_rule_inst.assert_called_once_with(self.project)
+        mock_rule_inst.assert_called_once_with(self.project, data=rule.data)
         mock_rule_inst.return_value.after.assert_called_once_with(
             event=event,
             state=state,
