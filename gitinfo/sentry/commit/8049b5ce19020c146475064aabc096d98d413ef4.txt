commit 8049b5ce19020c146475064aabc096d98d413ef4
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Jan 2 13:20:03 2018 -0800

    feat(settings): Update account notifications component to match API

diff --git a/src/sentry/static/sentry/app/data/forms/accountNotificationSettings.jsx b/src/sentry/static/sentry/app/data/forms/accountNotificationSettings.jsx
index 425d28b516..fc5ff2b75f 100644
--- a/src/sentry/static/sentry/app/data/forms/accountNotificationSettings.jsx
+++ b/src/sentry/static/sentry/app/data/forms/accountNotificationSettings.jsx
@@ -3,7 +3,7 @@ const forms = [
     title: 'Alerts',
     fields: [
       {
-        name: 'projectAlerts',
+        name: 'subscribeByDefault',
         type: 'boolean',
         label: 'Send Me Project Alerts',
         help: 'Alerts are defined in [Project] » Project Settings » Alerts » Rules.',
@@ -22,11 +22,7 @@ const forms = [
         name: 'workflowNotifications',
         type: 'radio',
         label: 'Send Me Workflow Notifications',
-        choices: [
-          ['always', 'Always'],
-          ['subscribe_to', 'Only On Issues I Subscribe To'],
-          ['never', 'Never'],
-        ],
+        choices: [[0, 'Always'], [1, 'Only On Issues I Subscribe To'], [2, 'Never']],
         help: 'E.g. changes in issue assignment, resolution status, and comments.',
       },
     ],
@@ -59,11 +55,7 @@ const forms = [
         name: 'deployNotifications',
         type: 'radio',
         label: 'Send Me Deploy Notifications',
-        choices: [
-          ['always', 'Always'],
-          ['my_commits', 'Only On Deploys With My Commits'],
-          ['never', 'Never'],
-        ],
+        choices: [[2, 'Always'], [3, 'Only On Deploys With My Commits'], [4, 'Never']],
         help: 'Deploy emails include release, environment and commit overviews.',
       },
     ],
@@ -77,13 +69,13 @@ const forms = [
     title: 'My Activity',
     fields: [
       {
-        name: 'personalActivity',
+        name: 'personalActivityNotifications',
         type: 'boolean',
         label: 'Notify Me About My Own Activity',
         help: 'Enable this to recieve notifications about your own actions on Sentry.',
       },
       {
-        name: 'claimUnassignedIssues',
+        name: 'selfAssignOnResolve',
         type: 'boolean',
         label: "Claim Unassigned Issues I've Resolved",
         help: "You'll recieve notifications about any changes that happen afterwards.",
diff --git a/src/sentry/static/sentry/app/views/settings/account/accountNotifications.jsx b/src/sentry/static/sentry/app/views/settings/account/accountNotifications.jsx
index d1ba45289e..93475afb39 100644
--- a/src/sentry/static/sentry/app/views/settings/account/accountNotifications.jsx
+++ b/src/sentry/static/sentry/app/views/settings/account/accountNotifications.jsx
@@ -2,12 +2,13 @@ import React from 'react';
 import PropTypes from 'prop-types';
 import {Box} from 'grid-emotion';
 
+import AsyncView from '../../asyncView';
 import Link from '../../../components/link';
 
 import SettingsPageHeader from '../components/settingsPageHeader';
 import accountNotificationFields from '../../../data/forms/accountNotificationSettings';
-import Form from '../components/forms/form';
 
+import ApiForm from '../components/forms/apiForm';
 import FieldFromConfig from '../components/forms/fieldFromConfig';
 import Panel from '../components/panel';
 import PanelBody from '../components/panelBody';
@@ -16,18 +17,26 @@ import PanelFooter from '../components/panelFooter';
 
 import InlineSvg from '../../../components/inlineSvg';
 
-export default class AccountNotifications extends React.Component {
-  render() {
+export default class AccountNotifications extends AsyncView {
+  getEndpoints() {
+    return [['data', '/users/me/notifications/']];
+  }
+
+  renderBody() {
     return (
       <div>
         <SettingsPageHeader label="Notifications" />
-        <Form>
+        <ApiForm
+          initialData={this.state.data}
+          apiMethod="PUT"
+          apiEndpoint={'/users/me/notifications/'}
+        >
           <Box>
             {accountNotificationFields.map(field => {
               return <FormField key={field.title} field={field} />;
             })}
           </Box>
-        </Form>
+        </ApiForm>
       </div>
     );
   }
