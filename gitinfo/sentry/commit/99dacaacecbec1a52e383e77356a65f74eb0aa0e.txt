commit 99dacaacecbec1a52e383e77356a65f74eb0aa0e
Author: James Cunningham <cunninghamjt09@gmail.com>
Date:   Fri Sep 7 14:58:19 2018 -0700

    Update GroupStatus.DELETION_IN_PROGRESS in bulk. (#9685)
    
    * Update GroupStatus.DELETION_IN_PROGRESS in bulk.
    
    * more style plz

diff --git a/src/sentry/deletions/defaults/group.py b/src/sentry/deletions/defaults/group.py
index d7da326fd4..71eec40464 100644
--- a/src/sentry/deletions/defaults/group.py
+++ b/src/sentry/deletions/defaults/group.py
@@ -47,8 +47,12 @@ class GroupDeletionTask(ModelDeletionTask):
         return super(GroupDeletionTask, self).delete_instance(instance)
 
     def mark_deletion_in_progress(self, instance_list):
-        from sentry.models import GroupStatus
-
-        for instance in instance_list:
-            if instance.status != GroupStatus.DELETION_IN_PROGRESS:
-                instance.update(status=GroupStatus.DELETION_IN_PROGRESS)
+        from sentry.models import Group, GroupStatus
+
+        Group.objects.filter(
+            id__in=[i.id for i in instance_list],
+        ).exclude(
+            status=GroupStatus.DELETION_IN_PROGRESS,
+        ).update(
+            status=GroupStatus.DELETION_IN_PROGRESS,
+        )
