commit 44d7fc45b24c098ab0ca6ec6c16df196fe29120e
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Jun 22 15:54:48 2012 -0700

    Add support for sentry.apps

diff --git a/docs/developer/plugins/index.rst b/docs/developer/plugins/index.rst
index 376f69ecf8..115c9ed09f 100644
--- a/docs/developer/plugins/index.rst
+++ b/docs/developer/plugins/index.rst
@@ -63,6 +63,18 @@ And you'll register it via ``entry_points`` in your ``setup.py``::
         },
     )
 
+If you're using models or templates, you'll also want to include the ``sentry.apps`` entry point to ensure full
+registration of your app::
+
+    setup(
+        # ...
+        entry_points={
+           'sentry.apps': [
+                'pluginname = sentry_pluginname'
+            ],
+        },
+    )
+
 That's it! Users will be able to install your plugin via ``pip install <package name>`` and configure it
 via the web interface based on the hooks you enable.
 
diff --git a/sentry/utils/runner.py b/sentry/utils/runner.py
index 88d9a204f8..f4c0cea77a 100644
--- a/sentry/utils/runner.py
+++ b/sentry/utils/runner.py
@@ -86,6 +86,19 @@ def install_plugins(settings):
     #         'phabricator = sentry_phabricator.plugins:PhabricatorPlugin'
     #     ],
     # },
+    installed_apps = list(settings.INSTALLED_APPS)
+    for ep in pkg_resources.iter_entry_points('sentry.apps'):
+        try:
+            plugin = ep.load()
+        except Exception:
+            import sys
+            import traceback
+
+            print >> sys.stderr, "Failed to load app %r:\n%s" % (ep.name, traceback.format_exc())
+        else:
+            installed_apps.append(ep.module_name)
+    settings.INSTALLED_APPS = tuple(installed_apps)
+
     for ep in pkg_resources.iter_entry_points('sentry.plugins'):
         try:
             plugin = ep.load()
diff --git a/setup.py b/setup.py
index 025d9fdf6f..b933a6fc59 100755
--- a/setup.py
+++ b/setup.py
@@ -73,7 +73,7 @@ dependency_links = [
 
 setup(
     name='sentry',
-    version='4.7.5',
+    version='4.7.6',
     author='David Cramer',
     author_email='dcramer@gmail.com',
     url='http://github.com/dcramer/sentry',
