commit d71ede465fd7db05b43849a3d71c3f9e7f24b04e
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Wed Feb 14 15:32:16 2018 -0800

    fix(asynccomponent): Get location from props if no router context (#7252)
    
    Router might not always be in context wherever the AsyncComponent is used.
    
    Get the location from props if that's the case

diff --git a/src/sentry/static/sentry/app/components/asyncComponent.jsx b/src/sentry/static/sentry/app/components/asyncComponent.jsx
index 806abdf5ac..95b62ca2fb 100644
--- a/src/sentry/static/sentry/app/components/asyncComponent.jsx
+++ b/src/sentry/static/sentry/app/components/asyncComponent.jsx
@@ -12,7 +12,7 @@ import RouteError from './../views/routeError';
 
 class AsyncComponent extends React.Component {
   static contextTypes = {
-    router: PropTypes.object.isRequired,
+    router: PropTypes.object,
   };
 
   constructor(props, context) {
@@ -30,10 +30,19 @@ class AsyncComponent extends React.Component {
   }
 
   componentWillReceiveProps(nextProps, nextContext) {
+    const isRouterInContext = !!this.context.router;
+
+    const currentLocation = isRouterInContext
+      ? this.context.router.location
+      : this.props.location;
+    const nextLocation = isRouterInContext
+      ? nextContext.router.location
+      : nextProps.location;
+
     // re-fetch data when router params change
     if (
       !isEqual(this.props.params, nextProps.params) ||
-      this.context.router.location.search !== nextContext.router.location.search
+      currentLocation.search !== nextLocation.search
     ) {
       this.remountComponent();
     }
