commit 99ef66d4188de918af0c405c334db030b469139c
Author: Alexandru Mihai <92.alexandru.mihai@gmail.com>
Date:   Thu Oct 29 21:15:09 2015 +0000

    Added settings > appearance checkbox for 24 hour clock

diff --git a/src/sentry/templates/sentry/account/appearance.html b/src/sentry/templates/sentry/account/appearance.html
index 457807a792..fc03eb5820 100644
--- a/src/sentry/templates/sentry/account/appearance.html
+++ b/src/sentry/templates/sentry/account/appearance.html
@@ -29,6 +29,10 @@
             {{ field|as_crispy_field }}
         {% endwith %}
 
+        {% with form.clock_24_hours as field %}
+            {{ field|as_crispy_field }}
+        {% endwith %}
+
         <div class="form-actions">
             <button type="submit" class="btn btn-primary">{% trans "Save Changes" %}</button>
         </div>
diff --git a/src/sentry/web/forms/accounts.py b/src/sentry/web/forms/accounts.py
index 8adbf36edf..66fe4ead8f 100644
--- a/src/sentry/web/forms/accounts.py
+++ b/src/sentry/web/forms/accounts.py
@@ -335,6 +335,10 @@ class AppearanceSettingsForm(forms.Form):
     timezone = forms.ChoiceField(
         label=_('Time zone'), choices=TIMEZONE_CHOICES, required=False,
         widget=forms.Select(attrs={'class': 'input-xxlarge'}))
+    clock_24_hours = forms.BooleanField(
+        label=_('Use a 24-hour clock'),
+        required=False,
+    )
 
     def __init__(self, user, *args, **kwargs):
         self.user = user
@@ -365,6 +369,14 @@ class AppearanceSettingsForm(forms.Form):
             value=self.cleaned_data['timezone'],
         )
 
+        # Save clock 24 hours option
+        UserOption.objects.set_value(
+            user=self.user,
+            project=None,
+            key='clock_24_hours',
+            value=self.cleaned_data['clock_24_hours'],
+        )
+
         return self.user
 
 
diff --git a/src/sentry/web/frontend/accounts.py b/src/sentry/web/frontend/accounts.py
index 01e5a12baf..57cdd9c499 100644
--- a/src/sentry/web/frontend/accounts.py
+++ b/src/sentry/web/frontend/accounts.py
@@ -151,6 +151,7 @@ def appearance_settings(request):
         'language': options.get('language') or request.LANGUAGE_CODE,
         'stacktrace_order': int(options.get('stacktrace_order', -1) or -1),
         'timezone': options.get('timezone') or settings.SENTRY_DEFAULT_TIME_ZONE,
+        'clock_24_hours': options.get('clock_24_hours') or False,
     })
     if form.is_valid():
         form.save()
