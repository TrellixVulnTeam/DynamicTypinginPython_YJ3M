commit 312eaea7bba4371a8d1853bac34760d622017c5f
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jun 3 13:26:59 2015 +0100

    Add pendingAccessRequests to organization details

diff --git a/src/sentry/api/endpoints/organization_details.py b/src/sentry/api/endpoints/organization_details.py
index 02e9df3dec..997f2af82f 100644
--- a/src/sentry/api/endpoints/organization_details.py
+++ b/src/sentry/api/endpoints/organization_details.py
@@ -11,7 +11,8 @@ from sentry.api.serializers import serialize
 from sentry.api.serializers.models.team import TeamWithProjectsSerializer
 from sentry.auth import access
 from sentry.models import (
-    AuditLogEntryEvent, Organization, OrganizationStatus, Team, TeamStatus
+    AuditLogEntryEvent, Organization, OrganizationAccessRequest,
+    OrganizationStatus, Team, TeamStatus
 )
 from sentry.tasks.deletion import delete_organization
 
@@ -58,6 +59,9 @@ class OrganizationDetailsEndpoint(OrganizationEndpoint):
         context['features'] = feature_list
         context['teams'] = serialize(
             team_list, request.user, TeamWithProjectsSerializer)
+        context['pendingAccessRequests'] = OrganizationAccessRequest.objects.filter(
+            team__organization=organization,
+        ).count()
         return Response(context)
 
     @sudo_required
