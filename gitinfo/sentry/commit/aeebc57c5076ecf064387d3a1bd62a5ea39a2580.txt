commit aeebc57c5076ecf064387d3a1bd62a5ea39a2580
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 26 14:43:36 2011 -0800

    Added raw traceback popup

diff --git a/sentry/interfaces.py b/sentry/interfaces.py
index a4acc34f2a..2f8750b1f4 100644
--- a/sentry/interfaces.py
+++ b/sentry/interfaces.py
@@ -137,6 +137,7 @@ class Stacktrace(Interface):
         return render_to_string('sentry/partial/interfaces/stacktrace.html', {
             'event': event,
             'frames': frames,
+            'stacktrace': self.get_traceback(event),
         })
 
     def to_string(self, event):
diff --git a/sentry/static/styles/popup.css b/sentry/static/styles/popup.css
new file mode 100644
index 0000000000..69790698a2
--- /dev/null
+++ b/sentry/static/styles/popup.css
@@ -0,0 +1,15 @@
+html, body {
+    background-color: #eee;
+    padding: 5px;
+    margin: 0;
+}
+pre {
+    margin: 0;
+    padding: 10px;
+    background-color: #f5f5f5;
+    display: block;
+    font-size: 12px;
+    white-space: pre;
+    white-space: pre-wrap;
+    word-wrap: break-word;
+}
\ No newline at end of file
diff --git a/sentry/templates/sentry/groups/details.html b/sentry/templates/sentry/groups/details.html
index b97bcc8836..6787fdd9e6 100644
--- a/sentry/templates/sentry/groups/details.html
+++ b/sentry/templates/sentry/groups/details.html
@@ -183,22 +183,17 @@
 {% endblock %}
 
 {% block content_after %}
-    {# TODO #}
-    <div id="raw_traceback" style="display: none;">
-        {% if frames or group.traceback %}
-            <pre>{{ group.get_traceback }}</pre>
-        {% endif %}
-    </div>
     <script type="text/javascript">
     $('.popup').click(function(){
         var $this = $(this);
         var $window = $(window);
         var $container = $($this.attr('data-container'));
+        var title = $this.attr('data-title') || 'Untitled';
         var content = $container.html();
         var height = Math.min($window.height() - 100, $container.height() + 40);
         var width = Math.min($window.width() - 100, $container.width() + 40);
         var w = window.open("about:blank", "dsqApiExpand", "toolbar=0,status=0,location=0,menubar=0,height=" + height + ",width=" + width);
-        w.document.write("<!DOCTYPE html><html><title>Traceback</title><head><link href=\"{% url sentry-media "styles/global.css" %}\" rel=\"stylesheet\" type=\"text/css\"/></head><body><div id=\"popup\">" + content + "</div></body></html>");
+        w.document.write("<!DOCTYPE html><html><title>" + title + "</title><head><link href=\"{% url sentry-media "styles/popup.css" %}\" rel=\"stylesheet\" type=\"text/css\"/></head><body><div id=\"popup\">" + content + "</div></body></html>");
     });
     $(document).ready(function() {
         if (!$('#chart').length) return;
diff --git a/sentry/templates/sentry/partial/interfaces/http.html b/sentry/templates/sentry/partial/interfaces/http.html
index bc1bd2b5db..37bb60ee62 100644
--- a/sentry/templates/sentry/partial/interfaces/http.html
+++ b/sentry/templates/sentry/partial/interfaces/http.html
@@ -3,7 +3,7 @@
 
 <div id="request" class="module">
     <div class="page-header">
-        <a href="{% url sentry-replay event.project_id event.id %}" class="btn small pull-right">Replay this request</a>
+        <a href="{% url sentry-replay event.project_id event.id %}" class="btn small pull-right">{% trans "Replay this request" %}</a>
         <h2>{% trans "Request" %}</h2>
     </div>
     <div class="module-content">
@@ -13,23 +13,29 @@
             </colgroup>
             <tbody>
                 <tr>
-                    <th>URL:</th>
+                    <th>{% trans "URL:" %}</th>
                     <td><a href="{{ url }}">{{ url|escape }}</a></td>
                 </tr>
                 <tr>
-                    <th>Method:</th>
+                    <th>{% trans "Method:" %}</th>
                     <td>{{ method }}</td>
                 </tr>
                 <tr>
-                    <th>Query:</th>
-                    <td>{{ query_string }}</td>
+                    <th>{% trans "Query:" %}</th>
+                    <td>
+                        {% if query_string %}
+                            {{ query_string }}
+                        {% else %}
+                            <em>{% trans "No query string." %}</em>
+                        {% endif %}
+                    </td>
                 </tr>
                 <tr>
-                    <th>Body:</th>
+                    <th>{% trans "Body:" %}</th>
                     <td>
                         {% if data %}
                             {% if data|length > 5 %}
-                                <a href="#" onclick="return varToggle(this, 'HttpBody')"><span>&#x25b6;</span> Body</a>
+                                <a href="#" onclick="return varToggle(this, 'HttpBody')"><span>&#x25b6;</span> {% trans "Body" %}</a>
                                 <div id="vHttpBody" style="display:none;">
                                     <pre>{{ printed_data|escape }}</pre>
                                 </div>
@@ -37,16 +43,16 @@
                                 <pre>{{ data|pprint|escape }}</pre>
                             {% endif %}
                         {% else %}
-                            <em>No post body.</em>
+                            <em>{% trans "No post body." %}</em>
                         {% endif %}
                     </td>
                 </tr>
                 <tr>
-                    <th>Headers:</th>
+                    <th>{% trans "Headers:" %}</th>
                     <td>
                         {% if headers %}
                             {% if headers|length > 5 %}
-                                <a href="#" onclick="return varToggle(this, 'HttpHeaders')"><span>&#x25b6;</span> Headers</a>
+                                <a href="#" onclick="return varToggle(this, 'HttpHeaders')"><span>&#x25b6;</span> {% trans "Headers" %}</a>
                                 <table class="vars" id="vHttpHeaders" style="display:none;">
                                   <tbody>
                                     {% for key, value in headers.iteritems|as_sorted %}
@@ -70,16 +76,16 @@
                                 </table>
                             {% endif %}
                         {% else %}
-                            <em>No headers recorded.</em>
+                            <em>{% trans "No headers recorded." %}</em>
                         {% endif %}
                     </td>
                 </tr>
                 <tr>
-                    <th>Environment:</th>
+                    <th>{% trans "Environment:" %}</th>
                     <td>
                         {% if env %}
                             {% if env|length > 5 %}
-                                <a href="#" onclick="return varToggle(this, 'HttpEnv')"><span>&#x25b6;</span> Environment</a>
+                                <a href="#" onclick="return varToggle(this, 'HttpEnv')"><span>&#x25b6;</span> {% trans "Environment" %}</a>
                                 <table class="vars" id="vHttpEnv" style="display:none;">
                                   <tbody>
                                     {% for key, value in env.iteritems|as_sorted %}
@@ -103,7 +109,7 @@
                                 </table>
                             {% endif %}
                         {% else %}
-                            <em>No environment recorded.</em>
+                            <em>{% trans "No environment recorded." %}</em>
                         {% endif %}
                     </td>
                 </tr>
diff --git a/sentry/templates/sentry/partial/interfaces/stacktrace.html b/sentry/templates/sentry/partial/interfaces/stacktrace.html
index f6394f3a32..e7bce9bc25 100644
--- a/sentry/templates/sentry/partial/interfaces/stacktrace.html
+++ b/sentry/templates/sentry/partial/interfaces/stacktrace.html
@@ -2,6 +2,7 @@
 
 <div id="traceback" class="module">
     <div class="page-header">
+      <a href="" data-container="#raw_stacktrace" data-title="Stacktrace" class="popup btn small pull-right">Raw Stacktrace</a>
       <h2>{% trans "Stacktrace" %}</h2>
     </div>
     <div class="module-content">
@@ -48,4 +49,8 @@
         </div>
         {% endautoescape %}
     </div>
-</div>
\ No newline at end of file
+</div>
+
+<div id="raw_stacktrace" style="display: none;">
+    <pre>{{ stacktrace }}</pre>
+</div>
