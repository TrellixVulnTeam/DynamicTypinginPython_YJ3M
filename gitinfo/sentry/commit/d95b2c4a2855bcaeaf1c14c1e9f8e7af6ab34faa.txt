commit d95b2c4a2855bcaeaf1c14c1e9f8e7af6ab34faa
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Fri Jan 5 14:58:51 2018 -0800

    build(percy): Fix percy rendering w/ emotion (#6882)
    
    In production, emotion does not insert styles into DOM (rather CSSOM).
    
    On travis we build with NODE_ENV=production, so turn off above behavior when we are 1) in travis env, 2) detect a percy token.

diff --git a/src/sentry/static/sentry/app/index.js b/src/sentry/static/sentry/app/index.js
index 912192b0a1..c9190196ee 100644
--- a/src/sentry/static/sentry/app/index.js
+++ b/src/sentry/static/sentry/app/index.js
@@ -13,6 +13,7 @@ import * as Router from 'react-router';
 import ReactBootstrapModal from 'react-bootstrap/lib/Modal';
 import JsCookie from 'js-cookie';
 
+import './utils/emotion-setup';
 import * as api from './api';
 import * as il8n from './locale';
 import plugins from './plugins';
diff --git a/src/sentry/static/sentry/app/utils/emotion-setup.js b/src/sentry/static/sentry/app/utils/emotion-setup.js
new file mode 100644
index 0000000000..790b8f3681
--- /dev/null
+++ b/src/sentry/static/sentry/app/utils/emotion-setup.js
@@ -0,0 +1,9 @@
+/* global process */
+
+// NEEDS to be true for production because of performance
+// But travis builds with NODE_ENV = production, so turn off speed when
+// IS_PERCY is true (i.e. we are in TRAVIS and PERCY_TOKEN is set)
+if (process.env.IS_PERCY) {
+  const sheet = require('emotion').sheet;
+  sheet.speedy(false);
+}
