commit 9eba87f4cc6ab95abe99638cff11f3cfb5e0a708
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Jan 20 11:54:02 2013 -0800

    Add AffectedUserByGroup, Activity, and LostPasswordHash to cleanup script

diff --git a/src/sentry/tasks/cleanup.py b/src/sentry/tasks/cleanup.py
index f0c685697c..bd49b75c3e 100644
--- a/src/sentry/tasks/cleanup.py
+++ b/src/sentry/tasks/cleanup.py
@@ -25,16 +25,20 @@ def cleanup(days=30, project=None, **kwargs):
 
     from sentry.models import (Group, Event, MessageCountByMinute,
         MessageFilterValue, FilterKey, FilterValue, ProjectCountByMinute,
-        SearchDocument)
+        SearchDocument, Activity, AffectedUserByGroup, LostPasswordHash)
     from sentry.utils.query import RangeQuerySetWrapper
 
     GENERIC_DELETES = (
         (SearchDocument, 'date_changed'),
         (MessageCountByMinute, 'date'),
         (ProjectCountByMinute, 'date'),
+        (MessageFilterValue, 'last_seen'),
         (Event, 'datetime'),
+        (Activity, 'last_seen'),
+        (AffectedUserByGroup, 'last_seen'),
+
+        # Group should probably be last
         (Group, 'last_seen'),
-        (MessageFilterValue, 'last_seen'),
     )
 
     log = cleanup.get_logger()
@@ -52,6 +56,11 @@ def cleanup(days=30, project=None, **kwargs):
             log.info("Removing %r", obj)
             obj.delete()
 
+    log.info("Removing expired values for %r", LostPasswordHash)
+    LostPasswordHash.objects.filter(
+        date_added__lte=timezone.now() - datetime.timedelta(days=1)
+    ).delete()
+
     # We'll need this to confirm deletion of FilterKey and Filtervalue objects.
     mqs = MessageFilterValue.objects.all()
     if project:
