commit eb2666df904bc8b45561932f96f692ef37f860a7
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Mar 5 00:39:35 2015 -0800

    Add release creation endpoint

diff --git a/src/sentry/api/endpoints/project_releases.py b/src/sentry/api/endpoints/project_releases.py
index a83b9812f9..ed9d7038e7 100644
--- a/src/sentry/api/endpoints/project_releases.py
+++ b/src/sentry/api/endpoints/project_releases.py
@@ -1,11 +1,18 @@
 from __future__ import absolute_import
 
+from rest_framework import serializers
+from rest_framework.response import Response
+
 from sentry.api.base import DocSection
 from sentry.api.bases.project import ProjectEndpoint
 from sentry.api.serializers import serialize
 from sentry.models import Release
 
 
+class ReleaseSerializer(serializers.Serializer):
+    version = serializers.CharField(max_length=200, required=True)
+
+
 class ProjectReleasesEndpoint(ProjectEndpoint):
     doc_section = DocSection.RELEASES
 
@@ -28,3 +35,28 @@ class ProjectReleasesEndpoint(ProjectEndpoint):
             order_by='-id',
             on_results=lambda x: serialize(x, request.user),
         )
+
+    def post(self, request, project):
+        """
+        Create a new release
+
+        Create a new release for the given project.
+
+            {method} {path}
+            {{
+                "version": "abcdef"
+            }}
+
+        """
+        serializer = ReleaseSerializer(data=request.DATA)
+
+        if serializer.is_valid():
+            result = serializer.object
+
+            release = Release.objects.create(
+                version=result['version'],
+                project=project,
+            )
+
+            return Response(serialize(release, request.user), status=201)
+        return Response(serializer.errors, status=400)
diff --git a/tests/sentry/api/endpoints/test_project_releases.py b/tests/sentry/api/endpoints/test_project_releases.py
index a96c924fcb..f327fc0e7f 100644
--- a/tests/sentry/api/endpoints/test_project_releases.py
+++ b/tests/sentry/api/endpoints/test_project_releases.py
@@ -7,7 +7,7 @@ from sentry.models import Release
 from sentry.testutils import APITestCase
 
 
-class ProjectReleasesTest(APITestCase):
+class ProjectReleaseListTest(APITestCase):
     def test_simple(self):
         self.login_as(user=self.user)
 
@@ -39,3 +39,25 @@ class ProjectReleasesTest(APITestCase):
         assert len(response.data) == 2
         assert response.data[0]['id'] == str(release2.id)
         assert response.data[1]['id'] == str(release1.id)
+
+
+class ProjectReleaseCreateTest(APITestCase):
+    def test_simple(self):
+        self.login_as(user=self.user)
+
+        team = self.create_team(owner=self.user)
+        project = self.create_project(team=team, name='foo')
+
+        url = reverse('sentry-api-0-project-releases', kwargs={
+            'project_id': project.id,
+        })
+        response = self.client.post(url, data={
+            'version': 'abcdef',
+        })
+
+        assert response.status_code == 201, response.content
+        assert response.data['id']
+
+        release = Release.objects.get(id=response.data['id'])
+        assert release.version == 'abcdef'
+        assert release.project == project
