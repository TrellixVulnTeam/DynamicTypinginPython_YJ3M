commit 8de8be4dfc5ced8ba7505d4e77c8ee844975e885
Author: David Cramer <dcramer@gmail.com>
Date:   Fri May 29 14:33:49 2015 +0200

    Various stream render optimizations

diff --git a/src/sentry/static/sentry/app/utils.jsx b/src/sentry/static/sentry/app/utils.jsx
index 1e9e55ceaa..b9c185fd36 100644
--- a/src/sentry/static/sentry/app/utils.jsx
+++ b/src/sentry/static/sentry/app/utils.jsx
@@ -1,5 +1,19 @@
 /*** @jsx React.DOM */
 
+var instanceListMatches = function(arr1, arr2) {
+  for (var i = 0; i < Math.max(arr1.length, arr2.length); i++) {
+    if (!arr1[i]) {
+      return true;
+    }
+    if (!arr2[i]) {
+      return true;
+    }
+    if (arr1[i].id != arr2[i].id) {
+      return true;
+    }
+  }
+};
+
 
 var objectMatchesSubset = function(obj, other, deep){
   var k;
@@ -131,6 +145,7 @@ module.exports = {
 
   arrayIsEqual: arrayIsEqual,
   objectMatchesSubset: objectMatchesSubset,
+  instanceListMatches: instanceListMatches,
   parseLinkHeader: require('./utils/parseLinkHeader'),
 
   Collection: require('./utils/collection'),
diff --git a/src/sentry/static/sentry/app/views/stream.jsx b/src/sentry/static/sentry/app/views/stream.jsx
index fa3d795ee2..7ce0888e79 100644
--- a/src/sentry/static/sentry/app/views/stream.jsx
+++ b/src/sentry/static/sentry/app/views/stream.jsx
@@ -44,6 +44,20 @@ var Stream = React.createClass({
     };
   },
 
+  shouldComponentUpdate(nextProps, nextState) {
+    var curState = this.state;
+    if (!utils.objectMatchesSubset(curState, nextState)) {
+      return true;
+    }
+    if (curState.groupList.length != nextState.groupList.length) {
+      return true;
+    }
+    if (!utils.instanceListMatches(curState.groupList, nextState.groupList)) {
+      return true;
+    }
+    return false;
+  },
+
   componentWillMount() {
     this.props.setProjectNavSection('stream');
 
@@ -124,9 +138,11 @@ var Stream = React.createClass({
   },
 
   handleSelectStatsPeriod(period) {
-    this.setState({
-      statsPeriod: period
-    });
+    if (period !== this.state.statsPeriod) {
+      this.setState({
+        statsPeriod: period
+      });
+    }
   },
 
   onRealtimePoll(data) {
diff --git a/src/sentry/static/sentry/app/views/stream/group.jsx b/src/sentry/static/sentry/app/views/stream/group.jsx
index 4b34ad9f49..6a92357366 100644
--- a/src/sentry/static/sentry/app/views/stream/group.jsx
+++ b/src/sentry/static/sentry/app/views/stream/group.jsx
@@ -51,9 +51,12 @@ var StreamGroup = React.createClass({
 
   onSelectedGroupChange() {
     var id = this.props.data.id;
-    this.setState({
-      isSelected: SelectedGroupStore.isSelected(id),
-    });
+    var isSelected = SelectedGroupStore.isSelected(id);
+    if (isSelected !== this.state.isSelected) {
+      this.setState({
+        isSelected: SelectedGroupStore.isSelected(id),
+      });
+    }
   },
 
   onSelect() {
