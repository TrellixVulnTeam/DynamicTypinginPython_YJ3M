commit 503fc932ce2aa5570de13580081af837852637b5
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Dec 2 12:15:11 2012 -0800

    Correct some logic around inviting team members

diff --git a/src/sentry/templates/sentry/teams/members/new.html b/src/sentry/templates/sentry/teams/members/new.html
index 1852eb223b..98dcb8718e 100644
--- a/src/sentry/templates/sentry/teams/members/new.html
+++ b/src/sentry/templates/sentry/teams/members/new.html
@@ -13,18 +13,17 @@
 {% block main %}
     <section class="body">
         <ul class="nav nav-tabs">
-{#             <li class="active"><a href="#invite" data-toggle="tab">{% trans "Invite a new user" %}</a></li> #}
-            <li class="active"><a href="#add" data-toggle="tab">{% trans "Add an existing user" %}</a></li>
+            <li class="active"><a href="#invite" data-toggle="tab">{% trans "Invite a new user" %}</a></li>
+            <li><a href="#add" data-toggle="tab">{% trans "Add an existing user" %}</a></li>
         </ul>
         <div class="tab-content">
-            <div class="tab-pane" id="invite">
-                <p>{% trans "Invite a member to join this team via their email address. If they do not already have an
-                    account they will first be asked to create one." %}</p>
+            <div class="tab-pane active" id="invite">
+                <p>{% trans "Invite a member to join this team via their email address. If they do not already have an account they will first be asked to create one." %}</p>
                 {% with invite_form as form %}
                     {% include "sentry/partial/_form.html" %}
                 {% endwith %}
             </div>
-            <div class="tab-paneactive" id="add">
+            <div class="tab-pane" id="add">
                 <p>{% trans "You may add a user by their username if they already have an account." %}</p>
                 {% with add_form as form %}
                     {% include "sentry/partial/_form.html" %}
diff --git a/src/sentry/web/forms/teams.py b/src/sentry/web/forms/teams.py
index 7677cefb41..e2649d6544 100644
--- a/src/sentry/web/forms/teams.py
+++ b/src/sentry/web/forms/teams.py
@@ -73,8 +73,8 @@ class BaseTeamMemberForm(forms.ModelForm):
         fields = ('type',)
         model = TeamMember
 
-    def __init__(self, project, *args, **kwargs):
-        self.project = project
+    def __init__(self, team, *args, **kwargs):
+        self.team = team
         super(BaseTeamMemberForm, self).__init__(*args, **kwargs)
 
 
@@ -91,10 +91,10 @@ class InviteTeamMemberForm(BaseTeamMemberForm):
         if not value:
             return None
 
-        if self.project.team.member_set.filter(user__email__iexact=value).exists():
+        if self.team.member_set.filter(user__email__iexact=value).exists():
             raise forms.ValidationError(_('There is already a member with this email address'))
 
-        if self.project.team.pending_member_set.filter(email__iexact=value).exists():
+        if self.team.pending_member_set.filter(email__iexact=value).exists():
             raise forms.ValidationError(_('There is already a pending invite for this user'))
 
         return value
@@ -112,7 +112,7 @@ class NewTeamMemberForm(BaseTeamMemberForm):
         if not value:
             return None
 
-        if self.project.member_set.filter(user=value).exists():
+        if self.team.member_set.filter(user=value).exists():
             raise forms.ValidationError(_('User is already a member of this team'))
 
         return value
