commit 40bb24234c5b07ea9b35372617f8f38e7f6d079f
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Aug 6 16:56:40 2018 -0700

    Switch BitField lookup style

diff --git a/src/sentry/api/endpoints/project_key_details.py b/src/sentry/api/endpoints/project_key_details.py
index 508f091624..0fce88bfc0 100644
--- a/src/sentry/api/endpoints/project_key_details.py
+++ b/src/sentry/api/endpoints/project_key_details.py
@@ -1,5 +1,6 @@
 from __future__ import absolute_import
 
+from django.db.models import F
 from rest_framework import serializers, status
 from rest_framework.response import Response
 
@@ -52,7 +53,7 @@ class ProjectKeyDetailsEndpoint(ProjectEndpoint):
             key = ProjectKey.objects.get(
                 project=project,
                 public_key=key_id,
-                roles=ProjectKey.roles.store,
+                roles=F('roles').bitor(ProjectKey.roles.store),
             )
         except ProjectKey.DoesNotExist:
             raise ResourceDoesNotExist
@@ -78,7 +79,7 @@ class ProjectKeyDetailsEndpoint(ProjectEndpoint):
             key = ProjectKey.objects.get(
                 project=project,
                 public_key=key_id,
-                roles=ProjectKey.roles.store,
+                roles=F('roles').bitor(ProjectKey.roles.store),
             )
         except ProjectKey.DoesNotExist:
             raise ResourceDoesNotExist
@@ -136,7 +137,7 @@ class ProjectKeyDetailsEndpoint(ProjectEndpoint):
             key = ProjectKey.objects.get(
                 project=project,
                 public_key=key_id,
-                roles=ProjectKey.roles.store,
+                roles=F('roles').bitor(ProjectKey.roles.store),
             )
         except ProjectKey.DoesNotExist:
             raise ResourceDoesNotExist
diff --git a/src/sentry/api/endpoints/project_key_stats.py b/src/sentry/api/endpoints/project_key_stats.py
index 4d935f320c..e33046a74f 100644
--- a/src/sentry/api/endpoints/project_key_stats.py
+++ b/src/sentry/api/endpoints/project_key_stats.py
@@ -3,6 +3,7 @@ from __future__ import absolute_import
 import six
 
 from collections import OrderedDict
+from django.db.models import F
 from rest_framework.response import Response
 
 from sentry import tsdb
@@ -18,7 +19,7 @@ class ProjectKeyStatsEndpoint(ProjectEndpoint, StatsMixin):
             key = ProjectKey.objects.get(
                 project=project,
                 public_key=key_id,
-                roles=ProjectKey.roles.store,
+                roles=F('roles').bitor(ProjectKey.roles.store),
             )
         except ProjectKey.DoesNotExist:
             raise ResourceDoesNotExist
diff --git a/src/sentry/api/endpoints/project_keys.py b/src/sentry/api/endpoints/project_keys.py
index e40eee354c..19db2f9b7e 100644
--- a/src/sentry/api/endpoints/project_keys.py
+++ b/src/sentry/api/endpoints/project_keys.py
@@ -1,5 +1,6 @@
 from __future__ import absolute_import
 
+from django.db.models import F
 from rest_framework import serializers, status
 from rest_framework.response import Response
 
@@ -50,7 +51,7 @@ class ProjectKeysEndpoint(ProjectEndpoint):
         """
         queryset = ProjectKey.objects.filter(
             project=project,
-            roles=ProjectKey.roles.store,
+            roles=F('roles').bitor(ProjectKey.roles.store),
         )
         status = request.GET.get('status')
         if status == 'active':
diff --git a/src/sentry/templatetags/sentry_dsn.py b/src/sentry/templatetags/sentry_dsn.py
index d5ef6bcd26..05ab13d198 100644
--- a/src/sentry/templatetags/sentry_dsn.py
+++ b/src/sentry/templatetags/sentry_dsn.py
@@ -2,6 +2,7 @@ from __future__ import absolute_import
 
 from django import template
 from django.conf import settings
+from django.db.models import F
 
 from sentry.cache import default_cache
 from sentry.models import ProjectKey
@@ -13,7 +14,7 @@ def _get_project_key(project_id):
     try:
         return ProjectKey.objects.filter(
             project=project_id,
-            roles=ProjectKey.roles.store,
+            roles=F('roles').bitor(ProjectKey.roles.store),
         )[0]
     except IndexError:
         return None
diff --git a/src/sentry/web/frontend/setup_wizard.py b/src/sentry/web/frontend/setup_wizard.py
index db268176a0..1e0a2d10fc 100644
--- a/src/sentry/web/frontend/setup_wizard.py
+++ b/src/sentry/web/frontend/setup_wizard.py
@@ -1,8 +1,9 @@
 from __future__ import absolute_import
 
-from sentry.cache import default_cache
+from django.db.models import F
 
 from sentry import roles
+from sentry.cache import default_cache
 from sentry.models import ApiToken
 from sentry.api.serializers import serialize
 from sentry.web.frontend.base import BaseView
@@ -46,7 +47,7 @@ class SetupWizardView(BaseView):
                 enriched_project['organization'] = serialize(org)
                 keys = list(ProjectKey.objects.filter(
                     project=project,
-                    roles=ProjectKey.roles.store,
+                    roles=F('roles').bitor(ProjectKey.roles.store),
                     status=ProjectKeyStatus.ACTIVE,
                 ))
                 enriched_project['keys'] = serialize(keys)
