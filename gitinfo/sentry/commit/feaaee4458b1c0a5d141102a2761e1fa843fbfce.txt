commit feaaee4458b1c0a5d141102a2761e1fa843fbfce
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 3 21:50:57 2012 -0800

    Use dsn configuration for Raven

diff --git a/src/sentry/templates/sentry/layout.html b/src/sentry/templates/sentry/layout.html
index 9174fa6a70..2f0f320713 100644
--- a/src/sentry/templates/sentry/layout.html
+++ b/src/sentry/templates/sentry/layout.html
@@ -75,12 +75,7 @@
                 <script type="text/javascript" src="{% url sentry-media "sentry" "scripts/lib/raven.js" %}"></script>
             {% endcompress %}
             <script type="text/javascript">
-            Raven.config({
-                servers: ['/'],
-                projectId: {{ INTERNAL_PROJECT.id|to_json|safe }},
-                publicKey: {{ INTERNAL_PROJECT.public_key|to_json|safe }},
-                logger: 'sentry.errors.javascript'
-            })
+            Raven.config({{ INTERNAL_PROJECT.dsn|to_json|safe }});
             window.onerror = Raven.process;
             </script>
         {% endif %}
diff --git a/src/sentry/web/helpers.py b/src/sentry/web/helpers.py
index 6a9eaf65a7..1329cb73f7 100644
--- a/src/sentry/web/helpers.py
+++ b/src/sentry/web/helpers.py
@@ -97,7 +97,7 @@ def get_internal_project():
 
     return {
         'id': project.id,
-        'public_key': projectkey.public_key,
+        'dsn': projectkey.get_dsn(public=True)
     }
 
 
