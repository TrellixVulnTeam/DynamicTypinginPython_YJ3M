commit c20eee337e9627b483d8d4214383e01717a60bc3
Author: David Cramer <dcramer@gmail.com>
Date:   Sat May 9 15:10:36 2015 -0700

    Move default label generation into ProjectKey.save

diff --git a/src/sentry/api/endpoints/project_keys.py b/src/sentry/api/endpoints/project_keys.py
index bf8e03fd9e..800a57879e 100644
--- a/src/sentry/api/endpoints/project_keys.py
+++ b/src/sentry/api/endpoints/project_keys.py
@@ -1,7 +1,5 @@
 from __future__ import absolute_import
 
-import petname
-
 from rest_framework import serializers, status
 from rest_framework.response import Response
 
@@ -51,7 +49,7 @@ class ProjectKeysEndpoint(ProjectEndpoint):
 
             key = ProjectKey.objects.create(
                 project=project,
-                label=result.get('name') or petname.Generate(2, ' ').title(),
+                label=result.get('name'),
             )
 
             AuditLogEntry.objects.create(
diff --git a/src/sentry/models/projectkey.py b/src/sentry/models/projectkey.py
index 9b80d5fd16..38065342d0 100644
--- a/src/sentry/models/projectkey.py
+++ b/src/sentry/models/projectkey.py
@@ -7,6 +7,7 @@ sentry.models.projectkey
 """
 from __future__ import absolute_import, print_function
 
+import petname
 import six
 
 from bitfield import BitField
@@ -85,6 +86,8 @@ class ProjectKey(Model):
             self.public_key = ProjectKey.generate_api_key()
         if not self.secret_key:
             self.secret_key = ProjectKey.generate_api_key()
+        if not self.label:
+            self.label = petname.Generate(2, ' ').title()
         super(ProjectKey, self).save(*args, **kwargs)
 
     def get_dsn(self, domain=None, secure=True, public=False):
