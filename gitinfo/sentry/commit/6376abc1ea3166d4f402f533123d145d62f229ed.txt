commit 6376abc1ea3166d4f402f533123d145d62f229ed
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Apr 26 12:15:11 2016 -0700

    Strip search filter queries from extraneous whitespace
    
    This mostly affected an exact event id search, which has extra
    whitespace, it wasn't getting matched.
    
    I'm doing this on both the frontend and backend. Frontend seemed like
    the more appropriate place to strip before sending over the wire, but
    it's also possible to make an API request directly, so just sanitizing
    in both place.

diff --git a/src/sentry/api/endpoints/project_group_index.py b/src/sentry/api/endpoints/project_group_index.py
index 7696becd81..13ac47aa60 100644
--- a/src/sentry/api/endpoints/project_group_index.py
+++ b/src/sentry/api/endpoints/project_group_index.py
@@ -184,7 +184,7 @@ class ProjectGroupIndexEndpoint(ProjectEndpoint):
             # disable stats
             stats_period = None
 
-        query = request.GET.get('query')
+        query = request.GET.get('query', '').strip()
         if query:
             matching_group = None
             if len(query) == 32:
diff --git a/src/sentry/static/sentry/app/views/stream.jsx b/src/sentry/static/sentry/app/views/stream.jsx
index 23cf617b45..20475a6104 100644
--- a/src/sentry/static/sentry/app/views/stream.jsx
+++ b/src/sentry/static/sentry/app/views/stream.jsx
@@ -304,7 +304,7 @@ const Stream = React.createClass({
     let url = this.getGroupListEndpoint();
 
     let requestParams = {
-      query: this.state.query,
+      query: this.state.query.replace(/^\s+|\s+$/g, ''),
       limit: this.props.maxItems,
       sort: this.state.sort,
       statsPeriod: this.state.statsPeriod,
diff --git a/tests/sentry/api/endpoints/test_project_group_index.py b/tests/sentry/api/endpoints/test_project_group_index.py
index a293666481..ae875f1308 100644
--- a/tests/sentry/api/endpoints/test_project_group_index.py
+++ b/tests/sentry/api/endpoints/test_project_group_index.py
@@ -187,6 +187,24 @@ class GroupListTest(APITestCase):
         assert len(response.data) == 1
         assert response.data[0]['id'] == str(group.id)
 
+    def test_lookup_by_event_id_with_whitespace(self):
+        project = self.project
+        project.update_option('sentry:resolve_age', 1)
+        group = self.create_group(checksum='a' * 32)
+        self.create_group(checksum='b' * 32)
+        EventMapping.objects.create(
+            event_id='c' * 32,
+            project=group.project,
+            group=group,
+        )
+
+        self.login_as(user=self.user)
+        response = self.client.get('{}?query=%20%20{}%20%20'.format(self.path, 'c' * 32),
+                                   format='json')
+        assert response.status_code == 200
+        assert len(response.data) == 1
+        assert response.data[0]['id'] == str(group.id)
+
     def test_lookup_by_unknown_event_id(self):
         project = self.project
         project.update_option('sentry:resolve_age', 1)
