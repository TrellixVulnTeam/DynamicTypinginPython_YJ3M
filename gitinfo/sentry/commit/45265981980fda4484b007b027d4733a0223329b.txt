commit 45265981980fda4484b007b027d4733a0223329b
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Fri Aug 17 14:54:37 2018 -0700

    fix(repos): Don't try to delete webhooks when there is no provider
    
    fixes SENTRY-72H

diff --git a/src/sentry/models/repository.py b/src/sentry/models/repository.py
index f61c163e46..22ffb4a57c 100644
--- a/src/sentry/models/repository.py
+++ b/src/sentry/models/repository.py
@@ -65,6 +65,10 @@ class Repository(Model):
 
 
 def on_delete(instance, actor=None, **kwargs):
+    # If there is no provider, we don't have any webhooks, etc to delete
+    if not instance.provider:
+        return
+
     # TODO(lb): I'm assuming that this is used by integrations... is it?
     def handle_exception(exc):
         from sentry.exceptions import InvalidIdentity, PluginError
