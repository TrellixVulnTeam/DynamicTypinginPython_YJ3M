commit 0afde96ffa6af1266f6f03a473f78b03da44bf97
Author: Jan Michael Auer <account@jauer.org>
Date:   Fri Sep 21 13:32:48 2018 +0200

    feat(event_manager): Ignore the event _meta attribute (#9843)

diff --git a/src/sentry/constants.py b/src/sentry/constants.py
index 7a7bf4c1c2..51ee4354a2 100644
--- a/src/sentry/constants.py
+++ b/src/sentry/constants.py
@@ -159,7 +159,7 @@ HTTP_METHODS = ('GET', 'POST', 'PUT', 'OPTIONS', 'HEAD',
 CLIENT_RESERVED_ATTRS = (
     'project', 'errors', 'event_id', 'message', 'checksum', 'culprit', 'fingerprint', 'level',
     'time_spent', 'logger', 'server_name', 'site', 'received', 'timestamp', 'extra', 'modules',
-    'tags', 'platform', 'release', 'dist', 'environment', 'transaction', 'key_id',
+    'tags', 'platform', 'release', 'dist', 'environment', 'transaction', 'key_id', '_meta',
 )
 
 # XXX: Must be all lowercase
diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index 5985b34679..12ff51700e 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -317,6 +317,9 @@ class EventManager(object):
         data = self.data
         errors = data['errors'] = []
 
+        # Ignore event meta data for now.
+        data.pop('_meta', None)
+
         # Before validating with a schema, attempt to cast values to their desired types
         # so that the schema doesn't have to take every type variation into account.
         text = six.text_type
diff --git a/src/sentry/interfaces/schemas.py b/src/sentry/interfaces/schemas.py
index d787e4190a..e437739b2e 100644
--- a/src/sentry/interfaces/schemas.py
+++ b/src/sentry/interfaces/schemas.py
@@ -458,6 +458,9 @@ EVENT_SCHEMA = {
         'checksum': {},
         'site': TAG_VALUE,
         'received': {},
+
+        # PII stripping meta data in the same schema as events.
+        '_meta': {'type': 'object'}
     },
     'required': ['platform', 'event_id'],
     'additionalProperties': True,
