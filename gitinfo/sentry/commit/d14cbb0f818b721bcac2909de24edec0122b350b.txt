commit d14cbb0f818b721bcac2909de24edec0122b350b
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Apr 7 13:26:12 2015 -0700

    Set "next" url when SSO is required (fixes GH-1481)

diff --git a/src/sentry/web/frontend/base.py b/src/sentry/web/frontend/base.py
index 8166ee28c3..4e4d4c969f 100644
--- a/src/sentry/web/frontend/base.py
+++ b/src/sentry/web/frontend/base.py
@@ -236,6 +236,8 @@ class OrganizationView(BaseView):
             and self.valid_sso_required and not request.access.sso_is_valid
         )
 
+        request.session['_next'] = request.get_full_path()
+
         if needs_link:
             messages.add_message(
                 request, messages.ERROR,
