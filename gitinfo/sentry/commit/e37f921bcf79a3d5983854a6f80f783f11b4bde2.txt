commit e37f921bcf79a3d5983854a6f80f783f11b4bde2
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Apr 25 19:10:26 2017 -0700

    Fix inviting team member when no teams available
    
    This edge case wasn't covered in the template, causing a team to be
    submit wtiht he form as an empty string, instead of nothing at all.
    Resulting in trying to do `Team.objects.get(id='')`. And of course, the
    error was swallowed since we weren't attempting to show anything here.

diff --git a/src/sentry/templates/sentry/partial/members/_teams.html b/src/sentry/templates/sentry/partial/members/_teams.html
index 40b6f300bf..682f7dc82a 100644
--- a/src/sentry/templates/sentry/partial/members/_teams.html
+++ b/src/sentry/templates/sentry/partial/members/_teams.html
@@ -22,6 +22,6 @@
     </fieldset>
   </div>
 </div>
-{% else %}
+{% elif all_teams|length == 1 %}
     <input type="hidden" name="teams" value="{{ all_teams.0.id }}" />
 {% endif %}
diff --git a/src/sentry/web/frontend/create_organization_member.py b/src/sentry/web/frontend/create_organization_member.py
index 0c53fdfd5a..d340a86616 100644
--- a/src/sentry/web/frontend/create_organization_member.py
+++ b/src/sentry/web/frontend/create_organization_member.py
@@ -78,7 +78,7 @@ class CreateOrganizationMemberView(OrganizationView):
                 (r, r in allowed_roles)
                 for r in roles.get_all()
             ],
-            'all_teams': all_teams
+            'all_teams': list(all_teams),
         }
 
         return self.respond('sentry/create-organization-member.html', context)
