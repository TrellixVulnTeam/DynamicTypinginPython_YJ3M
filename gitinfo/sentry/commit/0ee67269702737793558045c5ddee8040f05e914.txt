commit 0ee67269702737793558045c5ddee8040f05e914
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Mon Aug 5 14:14:35 2019 -0700

    ref(ts): Refactor getProjectsByTeam utility function (#14255)
    
    Also moves the file to correct folder (it's only used in one place).
    
    Adds the Team type.

diff --git a/src/sentry/static/sentry/app/types/index.tsx b/src/sentry/static/sentry/app/types/index.tsx
index f2bf7a6576..e4aa417c22 100644
--- a/src/sentry/static/sentry/app/types/index.tsx
+++ b/src/sentry/static/sentry/app/types/index.tsx
@@ -9,6 +9,13 @@ export type Project = {
   id: string;
   slug: string;
   isMember: boolean;
+  teams: Team[];
+};
+
+export type Team = {
+  id: string;
+  slug: string;
+  isMember: boolean;
 };
 
 // This type is incomplete
diff --git a/src/sentry/static/sentry/app/utils/getProjectsByTeams.jsx b/src/sentry/static/sentry/app/views/projectsDashboard/getProjectsByTeams.tsx
similarity index 71%
rename from src/sentry/static/sentry/app/utils/getProjectsByTeams.jsx
rename to src/sentry/static/sentry/app/views/projectsDashboard/getProjectsByTeams.tsx
index 7e1c297176..fd92eb10b6 100644
--- a/src/sentry/static/sentry/app/utils/getProjectsByTeams.jsx
+++ b/src/sentry/static/sentry/app/views/projectsDashboard/getProjectsByTeams.tsx
@@ -1,6 +1,12 @@
-export default function getProjectsByTeams(teams, projects, isSuperuser = false) {
+import {Project, Team} from 'app/types';
+
+export default function getProjectsByTeams(
+  teams: Team[],
+  projects: Project[],
+  isSuperuser: boolean = false
+): {projectsByTeam: {[teamSlug: string]: Project[]}; teamlessProjects: Project[]} {
   const projectsByTeam = {};
-  const teamlessProjects = [];
+  const teamlessProjects: Project[] = [];
   let usersTeams = new Set(teams.filter(team => team.isMember).map(team => team.slug));
 
   if (usersTeams.size === 0 && isSuperuser) {
diff --git a/src/sentry/static/sentry/app/views/projectsDashboard/index.jsx b/src/sentry/static/sentry/app/views/projectsDashboard/index.jsx
index 69d0db0adf..f4d16cfa1e 100644
--- a/src/sentry/static/sentry/app/views/projectsDashboard/index.jsx
+++ b/src/sentry/static/sentry/app/views/projectsDashboard/index.jsx
@@ -14,7 +14,6 @@ import NoProjectMessage from 'app/components/noProjectMessage';
 import PageHeading from 'app/components/pageHeading';
 import ProjectsStatsStore from 'app/stores/projectsStatsStore';
 import SentryTypes from 'app/sentryTypes';
-import getProjectsByTeams from 'app/utils/getProjectsByTeams';
 import getRouteStringFromRoutes from 'app/utils/getRouteStringFromRoutes';
 import space from 'app/styles/space';
 import withOrganization from 'app/utils/withOrganization';
@@ -23,6 +22,7 @@ import withTeams from 'app/utils/withTeams';
 
 import Resources from './resources';
 import TeamSection from './teamSection';
+import getProjectsByTeams from './getProjectsByTeams';
 
 class Dashboard extends React.Component {
   static propTypes = {
diff --git a/tests/js/spec/views/organizationProjectsDashboard/__snapshots__/projectCard.spec.jsx.snap b/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
similarity index 100%
rename from tests/js/spec/views/organizationProjectsDashboard/__snapshots__/projectCard.spec.jsx.snap
rename to tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
diff --git a/tests/js/spec/utils/getProjectsByTeams.spec.jsx b/tests/js/spec/views/projectsDashboard/getProjectsByTeams.spec.jsx
similarity index 89%
rename from tests/js/spec/utils/getProjectsByTeams.spec.jsx
rename to tests/js/spec/views/projectsDashboard/getProjectsByTeams.spec.jsx
index 7271f638d7..73df16f13a 100644
--- a/tests/js/spec/utils/getProjectsByTeams.spec.jsx
+++ b/tests/js/spec/views/projectsDashboard/getProjectsByTeams.spec.jsx
@@ -1,4 +1,4 @@
-import getProjectsByTeams from 'app/utils/getProjectsByTeams';
+import getProjectsByTeams from 'app/views/projectsDashboard/getProjectsByTeams';
 
 describe('getProjectsByTeams', function() {
   let projectsByTeams;
diff --git a/tests/js/spec/views/organizationProjectsDashboard/index.spec.jsx b/tests/js/spec/views/projectsDashboard/index.spec.jsx
similarity index 100%
rename from tests/js/spec/views/organizationProjectsDashboard/index.spec.jsx
rename to tests/js/spec/views/projectsDashboard/index.spec.jsx
diff --git a/tests/js/spec/views/organizationProjectsDashboard/noProjectMessage.spec.jsx b/tests/js/spec/views/projectsDashboard/noProjectMessage.spec.jsx
similarity index 100%
rename from tests/js/spec/views/organizationProjectsDashboard/noProjectMessage.spec.jsx
rename to tests/js/spec/views/projectsDashboard/noProjectMessage.spec.jsx
diff --git a/tests/js/spec/views/organizationProjectsDashboard/projectCard.spec.jsx b/tests/js/spec/views/projectsDashboard/projectCard.spec.jsx
similarity index 100%
rename from tests/js/spec/views/organizationProjectsDashboard/projectCard.spec.jsx
rename to tests/js/spec/views/projectsDashboard/projectCard.spec.jsx
