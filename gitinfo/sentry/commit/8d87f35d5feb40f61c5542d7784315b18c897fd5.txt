commit 8d87f35d5feb40f61c5542d7784315b18c897fd5
Author: Ben Vinegar <ben@benv.ca>
Date:   Tue Oct 4 15:37:30 2016 -0700

    Fix unseen broadcast icon

diff --git a/src/sentry/static/sentry/app/components/sidebar/broadcasts.jsx b/src/sentry/static/sentry/app/components/sidebar/broadcasts.jsx
index 63883a1aea..73739852d8 100644
--- a/src/sentry/static/sentry/app/components/sidebar/broadcasts.jsx
+++ b/src/sentry/static/sentry/app/components/sidebar/broadcasts.jsx
@@ -80,19 +80,22 @@ const Broadcasts = React.createClass({
     }
   },
 
-  markSeen() {
-    let broadcastIds = this.state.broadcasts.filter((item) => {
+  getUnseenIds() {
+    return this.state.broadcasts.filter((item) => {
       return !item.hasSeen;
     }).map((item) => {
       return item.id;
     });
+  },
 
-    if (broadcastIds.length === 0)
+  markSeen() {
+    let unseenBroadcastIds = this.getUnseenIds();
+    if (unseenBroadcastIds.length === 0)
       return;
 
     this.api.request('/broadcasts/', {
       method: 'PUT',
-      query: {id: broadcastIds},
+      query: {id: unseenBroadcastIds},
       data: {
         hasSeen: '1'
       },
@@ -118,7 +121,7 @@ const Broadcasts = React.createClass({
       <li className={this.props.currentPanel == 'broadcasts' ? 'active' : null }>
         <a className="broadcasts-toggle" onClick={this.onShowPanel}>
           <span className="icon icon-globe"/>
-          {broadcasts.length > 0 &&
+          {this.getUnseenIds() > 0 &&
             <span className="activity-indicator"/>
           }
         </a>
