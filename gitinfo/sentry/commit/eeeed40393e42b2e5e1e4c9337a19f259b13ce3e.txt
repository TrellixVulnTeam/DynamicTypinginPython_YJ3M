commit eeeed40393e42b2e5e1e4c9337a19f259b13ce3e
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Nov 20 01:53:54 2012 -0800

    Save pause/stream setting in cookie

diff --git a/src/sentry/static/sentry/coffee/app.coffee b/src/sentry/static/sentry/coffee/app.coffee
index b0529dd762..d9bb5c3838 100644
--- a/src/sentry/static/sentry/coffee/app.coffee
+++ b/src/sentry/static/sentry/coffee/app.coffee
@@ -74,24 +74,32 @@ jQuery ->
                 id: 'event_list'
                 members: data.groups
                 maxItems: 50
-                realtime: true
+                realtime: if $.cookie('pausestream') then false else true 
                 pollUrl: app.config.urlPrefix + '/api/' + app.config.projectId + '/poll/'
                 model: app.Group
 
-            $('a[data-action=pause]').click (e) =>
+            @$streamControl = $('a[data-action=pause]')
+            @updateStreamOptions()
+
+            @$streamControl.click (e) =>
                 e.preventDefault()
-                $target = $(e.target)
-                if $target.hasClass('realtime-pause')
+                if @$streamControl.hasClass('realtime-pause')
                     @group_list.config.realtime = true
-                    $target.removeClass('realtime-pause')
-                    $target.addClass('realtime-play')
-                    $target.html($target.attr('data-pause-label'))
                 else
                     @group_list.config.realtime = false
-                    $target.addClass('realtime-pause')
-                    $target.removeClass('realtime-play')
-                    $target.html($target.attr('data-play-label'))
-
+                @updateStreamOptions()
+
+        updateStreamOptions: () ->
+            if @group_list.config.realtime
+                $.removeCookie('pausestream')
+                @$streamControl.removeClass('realtime-pause')
+                @$streamControl.addClass('realtime-play')
+                @$streamControl.html(@$streamControl.attr('data-pause-label'))
+            else
+                $.cookie('pausestream', '1', {expires: 7})
+                @$streamControl.addClass('realtime-pause')
+                @$streamControl.removeClass('realtime-play')
+                @$streamControl.html(@$streamControl.attr('data-play-label'))
 
     app.DashboardPage = class DashboardPage extends BasePage
 
diff --git a/src/sentry/static/sentry/coffee/views.coffee b/src/sentry/static/sentry/coffee/views.coffee
index edb1db1b48..bf39a0cf0d 100644
--- a/src/sentry/static/sentry/coffee/views.coffee
+++ b/src/sentry/static/sentry/coffee/views.coffee
@@ -399,4 +399,5 @@ jQuery ->
                 else
                     return Math.floor(seconds / format[2]) + ' ' + format[1] + ' ' + token
 
-        return time
\ No newline at end of file
+        return time
+        
\ No newline at end of file
diff --git a/src/sentry/static/sentry/scripts/jquery.cookie.js b/src/sentry/static/sentry/scripts/jquery.cookie.js
new file mode 100644
index 0000000000..d151b7f311
--- /dev/null
+++ b/src/sentry/static/sentry/scripts/jquery.cookie.js
@@ -0,0 +1,72 @@
+/*!
+ * jQuery Cookie Plugin v1.3
+ * https://github.com/carhartl/jquery-cookie
+ *
+ * Copyright 2011, Klaus Hartl
+ * Dual licensed under the MIT or GPL Version 2 licenses.
+ * http://www.opensource.org/licenses/mit-license.php
+ * http://www.opensource.org/licenses/GPL-2.0
+ */
+(function ($, document, undefined) {
+
+    var pluses = /\+/g;
+
+    function raw(s) {
+        return s;
+    }
+
+    function decoded(s) {
+        return decodeURIComponent(s.replace(pluses, ' '));
+    }
+
+    var config = $.cookie = function (key, value, options) {
+
+        // write
+        if (value !== undefined) {
+            options = $.extend({}, config.defaults, options);
+
+            if (value === null) {
+                options.expires = -1;
+            }
+
+            if (typeof options.expires === 'number') {
+                var days = options.expires, t = options.expires = new Date();
+                t.setDate(t.getDate() + days);
+            }
+
+            value = config.json ? JSON.stringify(value) : String(value);
+
+            return (document.cookie = [
+                encodeURIComponent(key), '=', config.raw ? value : encodeURIComponent(value),
+                options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
+                options.path    ? '; path=' + options.path : '',
+                options.domain  ? '; domain=' + options.domain : '',
+                options.secure  ? '; secure' : ''
+            ].join(''));
+        }
+
+        // read
+        var decode = config.raw ? raw : decoded;
+        var cookies = document.cookie.split('; ');
+        for (var i = 0, l = cookies.length; i < l; i++) {
+            var parts = cookies[i].split('=');
+            if (decode(parts.shift()) === key) {
+                var cookie = decode(parts.join('='));
+                return config.json ? JSON.parse(cookie) : cookie;
+            }
+        }
+
+        return null;
+    };
+
+    config.defaults = {};
+
+    $.removeCookie = function (key, options) {
+        if ($.cookie(key) !== null) {
+            $.cookie(key, null, options);
+            return true;
+        }
+        return false;
+    };
+
+})(jQuery, document);
\ No newline at end of file
diff --git a/src/sentry/static/sentry/scripts/site.js b/src/sentry/static/sentry/scripts/site.js
index b6fef9a960..8a5eaba2b0 100644
--- a/src/sentry/static/sentry/scripts/site.js
+++ b/src/sentry/static/sentry/scripts/site.js
@@ -100,28 +100,39 @@
           id: 'event_list',
           members: data.groups,
           maxItems: 50,
-          realtime: true,
+          realtime: $.cookie('pausestream') ? false : true,
           pollUrl: app.config.urlPrefix + '/api/' + app.config.projectId + '/poll/',
           model: app.Group
         });
-        return $('a[data-action=pause]').click(function(e) {
-          var $target;
+        this.$streamControl = $('a[data-action=pause]');
+        this.updateStreamOptions();
+        return this.$streamControl.click(function(e) {
           e.preventDefault();
-          $target = $(e.target);
-          if ($target.hasClass('realtime-pause')) {
+          if (_this.$streamControl.hasClass('realtime-pause')) {
             _this.group_list.config.realtime = true;
-            $target.removeClass('realtime-pause');
-            $target.addClass('realtime-play');
-            return $target.html($target.attr('data-pause-label'));
           } else {
             _this.group_list.config.realtime = false;
-            $target.addClass('realtime-pause');
-            $target.removeClass('realtime-play');
-            return $target.html($target.attr('data-play-label'));
           }
+          return _this.updateStreamOptions();
         });
       };
 
+      StreamPage.prototype.updateStreamOptions = function() {
+        if (this.group_list.config.realtime) {
+          $.removeCookie('pausestream');
+          this.$streamControl.removeClass('realtime-pause');
+          this.$streamControl.addClass('realtime-play');
+          return this.$streamControl.html(this.$streamControl.attr('data-pause-label'));
+        } else {
+          $.cookie('pausestream', '1', {
+            expires: 7
+          });
+          this.$streamControl.addClass('realtime-pause');
+          this.$streamControl.removeClass('realtime-play');
+          return this.$streamControl.html(this.$streamControl.attr('data-play-label'));
+        }
+      };
+
       return StreamPage;
 
     })(BasePage);
diff --git a/src/sentry/templates/sentry/layout.html b/src/sentry/templates/sentry/layout.html
index a2f79cd350..970d13a92f 100644
--- a/src/sentry/templates/sentry/layout.html
+++ b/src/sentry/templates/sentry/layout.html
@@ -31,6 +31,7 @@
             <script type="text/javascript" src="{% url sentry-media "sentry" "scripts/jquery.js" %}"></script>
             <script type="text/javascript" src="{% url sentry-media "sentry" "scripts/jquery.animate-colors-min.js" %}"></script>
             <script type="text/javascript" src="{% url sentry-media "sentry" "scripts/jquery.clippy.min.js" %}"></script>
+            <script type="text/javascript" src="{% url sentry-media "sentry" "scripts/jquery.cookie.js" %}"></script>
             <script type="text/javascript" src="{% url sentry-media "sentry" "scripts/jquery.flot.min.js" %}"></script>
             <script type="text/javascript" src="{% url sentry-media "sentry" "scripts/json2.js" %}"></script>
             <script type="text/javascript" src="{% url sentry-media "sentry" "scripts/underscore.min.js" %}"></script>
