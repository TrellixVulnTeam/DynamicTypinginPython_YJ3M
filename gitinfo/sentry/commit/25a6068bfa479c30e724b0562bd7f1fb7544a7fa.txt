commit 25a6068bfa479c30e724b0562bd7f1fb7544a7fa
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Wed Dec 16 00:27:38 2015 +0100

    Moved code out of sentry.utils

diff --git a/src/sentry/coreapi.py b/src/sentry/coreapi.py
index 947cbfff18..fbb48db657 100644
--- a/src/sentry/coreapi.py
+++ b/src/sentry/coreapi.py
@@ -32,10 +32,11 @@ from sentry.interfaces.base import get_interface, InterfaceValidationError
 from sentry.interfaces.csp import Csp
 from sentry.models import EventError, Project, ProjectKey, TagKey
 from sentry.tasks.store import preprocess_event
-from sentry.utils import is_float, json
+from sentry.utils import json
 from sentry.utils.auth import parse_auth_header
 from sentry.utils.compat import StringIO
 from sentry.utils.strings import decompress
+from sentry.utils.validators import is_float
 
 LOG_LEVEL_REVERSE_MAP = dict((v, k) for k, v in LOG_LEVELS.iteritems())
 
diff --git a/src/sentry/templatetags/sentry_helpers.py b/src/sentry/templatetags/sentry_helpers.py
index 5370253b24..c1c764a9b0 100644
--- a/src/sentry/templatetags/sentry_helpers.py
+++ b/src/sentry/templatetags/sentry_helpers.py
@@ -36,7 +36,8 @@ from sentry import options
 from sentry.api.serializers import serialize as serialize_func
 from sentry.constants import EVENTS_PER_PAGE
 from sentry.models import Organization
-from sentry.utils import json, to_unicode
+from sentry.utils import json
+from sentry.utils.strings import to_unicode
 from sentry.utils.avatar import get_gravatar_url
 from sentry.utils.javascript import to_json
 from sentry.utils.strings import (
diff --git a/src/sentry/utils/__init__.py b/src/sentry/utils/__init__.py
index 2d5842d6e2..af76dd7005 100644
--- a/src/sentry/utils/__init__.py
+++ b/src/sentry/utils/__init__.py
@@ -7,27 +7,7 @@ sentry.utils
 """
 from __future__ import absolute_import
 
-from django.utils.encoding import force_unicode
 
-import six
-
-
-def to_unicode(value):
-    try:
-        value = six.text_type(force_unicode(value))
-    except (UnicodeEncodeError, UnicodeDecodeError):
-        value = '(Error decoding value)'
-    except Exception:  # in some cases we get a different exception
-        try:
-            value = str(repr(type(value)))
-        except Exception:
-            value = '(Error decoding value)'
-    return value
-
-
-def is_float(var):
-    try:
-        float(var)
-    except (TypeError, ValueError):
-        return False
-    return True
+# Make sure to not import anything here.  We want modules below
+# sentry.utils to be able to import without having to pull in django
+# or other sources that might not exist.
diff --git a/src/sentry/utils/strings.py b/src/sentry/utils/strings.py
index f7f861ec4c..27aefc7a3b 100644
--- a/src/sentry/utils/strings.py
+++ b/src/sentry/utils/strings.py
@@ -11,7 +11,9 @@ import base64
 import re
 import zlib
 
-from django.utils.encoding import smart_unicode
+from django.utils.encoding import smart_unicode, force_unicode
+
+import six
 
 
 def truncatechars(value, arg):
@@ -73,3 +75,16 @@ def soft_break(value, length, process=lambda chunk: chunk):
         return u''.join(results).rstrip(u'\u200b')
 
     return re.sub(r'\S{{{},}}'.format(length), soft_break_delimiter, value)
+
+
+def to_unicode(value):
+    try:
+        value = six.text_type(force_unicode(value))
+    except (UnicodeEncodeError, UnicodeDecodeError):
+        value = '(Error decoding value)'
+    except Exception:  # in some cases we get a different exception
+        try:
+            value = str(repr(type(value)))
+        except Exception:
+            value = '(Error decoding value)'
+    return value
diff --git a/src/sentry/utils/validators.py b/src/sentry/utils/validators.py
index ff9ce37db5..6565b28b87 100644
--- a/src/sentry/utils/validators.py
+++ b/src/sentry/utils/validators.py
@@ -10,3 +10,11 @@ def validate_ip(value, required=True):
     # will raise a ValueError
     IPAddress(value)
     return value
+
+
+def is_float(var):
+    try:
+        float(var)
+    except (TypeError, ValueError):
+        return False
+    return True
