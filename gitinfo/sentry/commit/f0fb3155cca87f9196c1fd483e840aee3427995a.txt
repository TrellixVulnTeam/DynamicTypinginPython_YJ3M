commit f0fb3155cca87f9196c1fd483e840aee3427995a
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Feb 14 15:37:27 2018 -0800

    ref(compliance): Allow failure on terms_accepted signal

diff --git a/src/sentry/api/endpoints/organization_index.py b/src/sentry/api/endpoints/organization_index.py
index 0893048f38..b3ebc2f4c8 100644
--- a/src/sentry/api/endpoints/organization_index.py
+++ b/src/sentry/api/endpoints/organization_index.py
@@ -250,13 +250,6 @@ class OrganizationIndexEndpoint(Endpoint):
                         actor_id=request.user.id if request.user.is_authenticated() else None
                     )
 
-                    if result.get('agreeTerms'):
-                        terms_accepted.send(
-                            user=request.user,
-                            organization=org,
-                            sender=type(self),
-                        )
-
             except IntegrityError:
                 return Response(
                     {
@@ -265,5 +258,13 @@ class OrganizationIndexEndpoint(Endpoint):
                     status=409,
                 )
 
+            # failure on sending this signal is acceptable
+            if result.get('agreeTerms'):
+                terms_accepted.send_robust(
+                    user=request.user,
+                    organization=org,
+                    sender=type(self),
+                )
+
             return Response(serialize(org, request.user), status=201)
         return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)
