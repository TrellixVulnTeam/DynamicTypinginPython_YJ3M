commit 702f952ae533a5ba85d1ee6fe5ab4b7ea24792a4
Author: ted kaemming <ted@kaemming.com>
Date:   Mon Dec 11 12:10:17 2017 -0800

    fix(api): Avoid summing distinct counter values (#6734)

diff --git a/src/sentry/api/endpoints/project_user_stats.py b/src/sentry/api/endpoints/project_user_stats.py
index aefcf99b77..4fab96f839 100644
--- a/src/sentry/api/endpoints/project_user_stats.py
+++ b/src/sentry/api/endpoints/project_user_stats.py
@@ -24,15 +24,13 @@ class ProjectUserStatsEndpoint(EnvironmentMixin, ProjectEndpoint):
         now = timezone.now()
         then = now - timedelta(days=30)
 
-        # TODO(tkaemming): Rollup doesn't actually work correctly here
-        results = tsdb.rollup(
-            tsdb.get_distinct_counts_series(
-                tsdb.models.users_affected_by_project,
-                (project.id, ),
-                then,
-                now,
-                environment_id=environment_id,
-            ), 3600 * 24
+        results = tsdb.get_distinct_counts_series(
+            tsdb.models.users_affected_by_project,
+            (project.id, ),
+            then,
+            now,
+            rollup=3600 * 24,
+            environment_id=environment_id,
         )[project.id]
 
         return Response(results)
