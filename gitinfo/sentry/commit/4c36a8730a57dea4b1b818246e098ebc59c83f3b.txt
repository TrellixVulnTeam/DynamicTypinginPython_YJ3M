commit 4c36a8730a57dea4b1b818246e098ebc59c83f3b
Author: Mark Story <mark@mark-story.com>
Date:   Mon Jan 14 22:48:58 2019 -0500

    fix(ui) Clean up empty state warnings (#11488)
    
    Re-use existing components to display empty state warnings. Also convert
    the EmptyStateWarning component to use an SVG icon instead of the
    icon-font.
    
    Refs APP-990

diff --git a/src/sentry/static/sentry/app/components/emptyStateWarning.jsx b/src/sentry/static/sentry/app/components/emptyStateWarning.jsx
index 453cc46001..e46218b56e 100644
--- a/src/sentry/static/sentry/app/components/emptyStateWarning.jsx
+++ b/src/sentry/static/sentry/app/components/emptyStateWarning.jsx
@@ -2,6 +2,7 @@ import PropTypes from 'prop-types';
 import React from 'react';
 import styled from 'react-emotion';
 
+import HeroIcon from 'app/components/heroIcon';
 import InlineSvg from 'app/components/inlineSvg';
 import EmptyMessage from 'app/views/settings/components/emptyMessage';
 
@@ -28,7 +29,7 @@ class EmptyStateWarning extends React.Component {
 
     return (
       <EmptyStreamWrapper data-test-id="empty-state">
-        <Icon className="icon icon-exclamation" />
+        <HeroIcon src="icon-circle-exclamation" size="54" />
         {this.props.children}
       </EmptyStreamWrapper>
     );
@@ -47,14 +48,11 @@ const EmptyStreamWrapper = styled.div`
       margin-bottom: 0;
     }
   }
-`;
 
-const Icon = styled.div`
-  display: block;
-  font-size: 54px;
-  color: ${p => p.theme.gray2};
-  margin-bottom: 20px;
-  opacity: 0.45;
+  /* stylelint-disable-next-line no-duplicate-selectors */
+  ${HeroIcon} {
+    margin-bottom: 20px;
+  }
 `;
 
 const SmallMessage = styled('div')`
diff --git a/src/sentry/static/sentry/app/components/groupList.jsx b/src/sentry/static/sentry/app/components/groupList.jsx
index 5aa0ca3dde..efa6ec70c2 100644
--- a/src/sentry/static/sentry/app/components/groupList.jsx
+++ b/src/sentry/static/sentry/app/components/groupList.jsx
@@ -145,7 +145,7 @@ const GroupList = createReactClass({
         <Panel>
           <PanelBody>
             <EmptyStateWarning>
-              {t("There doesn't seem to be any events fitting the query.")}
+              <p>{t("There doesn't seem to be any events fitting the query.")}</p>
             </EmptyStateWarning>
           </PanelBody>
         </Panel>
diff --git a/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx b/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx
index bbb6c0e978..508630813b 100644
--- a/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx
+++ b/src/sentry/static/sentry/app/views/organizationEvents/eventsTable.jsx
@@ -134,7 +134,12 @@ class EventsTable extends React.Component {
           </TableLayout>
         </PanelHeader>
         {loading && <LoadingIndicator />}
-        {!loading && !hasEvents && <EmptyStateWarning>No events</EmptyStateWarning>}
+        {!loading &&
+          !hasEvents && (
+            <EmptyStateWarning>
+              <p>No events</p>
+            </EmptyStateWarning>
+          )}
         {hasEvents && (
           <StyledPanelBody>
             {(reloading || zoomChanged) && <StyledLoadingIndicator overlay />}
diff --git a/src/sentry/static/sentry/app/views/organizationStream/overview.jsx b/src/sentry/static/sentry/app/views/organizationStream/overview.jsx
index 0d21198493..dd737cef0e 100644
--- a/src/sentry/static/sentry/app/views/organizationStream/overview.jsx
+++ b/src/sentry/static/sentry/app/views/organizationStream/overview.jsx
@@ -9,7 +9,7 @@ import qs from 'query-string';
 
 import {Panel, PanelBody} from 'app/components/panels';
 import {analytics} from 'app/utils/analytics';
-import {t, tct} from 'app/locale';
+import {t} from 'app/locale';
 import {fetchProject} from 'app/actionCreators/projects';
 import {fetchTags} from 'app/actionCreators/tags';
 import ApiMixin from 'app/mixins/apiMixin';
@@ -18,6 +18,7 @@ import GlobalSelectionStore from 'app/stores/globalSelectionStore';
 import GroupStore from 'app/stores/groupStore';
 import SelectedGroupStore from 'app/stores/selectedGroupStore';
 import TagStore from 'app/stores/tagStore';
+import EmptyStateWarning from 'app/components/emptyStateWarning';
 import LoadingError from 'app/components/loadingError';
 import LoadingIndicator from 'app/components/loadingIndicator';
 import Pagination from 'app/components/pagination';
@@ -399,19 +400,10 @@ const OrganizationStream = createReactClass({
   },
 
   renderEmpty() {
-    const {environment} = this.state;
-    const message = environment
-      ? tct('Sorry no events match your filters in the [env] environment.', {
-          env: environment.displayName,
-        })
-      : t('Sorry, no events match your filters.');
-
-    // TODO(lyn): Extract empty state to a separate component
     return (
-      <div className="empty-stream" style={{border: 0}}>
-        <span className="icon icon-exclamation" />
-        <p>{message}</p>
-      </div>
+      <EmptyStateWarning>
+        <p>{t('Sorry, no issues match your filters.')}</p>
+      </EmptyStateWarning>
     );
   },
 
diff --git a/src/sentry/static/sentry/app/views/stream/stream.jsx b/src/sentry/static/sentry/app/views/stream/stream.jsx
index 82adae5fe0..74fbaa7b98 100644
--- a/src/sentry/static/sentry/app/views/stream/stream.jsx
+++ b/src/sentry/static/sentry/app/views/stream/stream.jsx
@@ -27,6 +27,7 @@ import Pagination from 'app/components/pagination';
 import ProjectState from 'app/mixins/projectState';
 import SentryTypes from 'app/sentryTypes';
 import StreamActions from 'app/views/stream/actions';
+import EmptyStateWarning from 'app/components/emptyStateWarning';
 import StreamFilters from 'app/views/stream/filters';
 import StreamGroup from 'app/components/stream/group';
 import StreamSidebar from 'app/views/stream/sidebar';
@@ -688,12 +689,10 @@ const Stream = createReactClass({
         })
       : t('Sorry, no events match your filters.');
 
-    // TODO(lyn): Extract empty state to a separate component
     return (
-      <div className="empty-stream" style={{border: 0}}>
-        <span className="icon icon-exclamation" />
+      <EmptyStateWarning>
         <p>{message}</p>
-      </div>
+      </EmptyStateWarning>
     );
   },
 
diff --git a/src/sentry/static/sentry/less/stream.less b/src/sentry/static/sentry/less/stream.less
index 5b9c7d6381..e18cd4fd50 100644
--- a/src/sentry/static/sentry/less/stream.less
+++ b/src/sentry/static/sentry/less/stream.less
@@ -1090,12 +1090,11 @@
 }
 
 /**
-* Empty Stream
+* Empty Stream/Empty Alert box
 * ============================================================================
 */
 
-.alert-box,
-.empty-stream {
+.alert-box {
   border: 1px solid @trim;
   border-radius: 0 0 2px 2px;
   text-align: center;
diff --git a/tests/acceptance/test_project_issues.py b/tests/acceptance/test_project_issues.py
index 1d37c0b1f4..9200558541 100644
--- a/tests/acceptance/test_project_issues.py
+++ b/tests/acceptance/test_project_issues.py
@@ -43,5 +43,5 @@ class ProjectIssuesTest(AcceptanceTestCase):
     def test_with_no_issues(self):
         self.project.update(first_event=timezone.now())
         self.browser.get(self.path)
-        self.browser.wait_until('.empty-stream')
+        self.browser.wait_until('[data-test-id=empty-state]')
         self.browser.snapshot('project issues without issues')
diff --git a/tests/js/spec/views/__snapshots__/projectDebugFiles.spec.jsx.snap b/tests/js/spec/views/__snapshots__/projectDebugFiles.spec.jsx.snap
index 784a0140e8..08d8870d09 100644
--- a/tests/js/spec/views/__snapshots__/projectDebugFiles.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/projectDebugFiles.spec.jsx.snap
@@ -223,16 +223,44 @@ exports[`ProjectDebugFiles renders 1`] = `
                 data-test-id="empty-state"
               >
                 <div
-                  className="css-n38n5f-EmptyStreamWrapper ernlsnc0"
+                  className="css-1ff2mrl-EmptyStreamWrapper ernlsnc0"
                   data-test-id="empty-state"
                 >
-                  <Icon
-                    className="icon icon-exclamation"
+                  <HeroIcon
+                    size="54"
+                    src="icon-circle-exclamation"
                   >
-                    <div
-                      className="icon icon-exclamation css-tjp7mx-Icon ernlsnc1"
-                    />
-                  </Icon>
+                    <Component
+                      className="css-1j03cl-HeroIcon e1h7wyrq0"
+                      size="54"
+                      src="icon-circle-exclamation"
+                    >
+                      <InlineSvg
+                        className="css-1j03cl-HeroIcon e1h7wyrq0"
+                        size="54"
+                        src="icon-circle-exclamation"
+                      >
+                        <StyledSvg
+                          className="css-1j03cl-HeroIcon e1h7wyrq0"
+                          height="54"
+                          viewBox={Object {}}
+                          width="54"
+                        >
+                          <svg
+                            className="e1h7wyrq0 css-196iyqp-StyledSvg-HeroIcon e2idor0"
+                            height="54"
+                            viewBox={Object {}}
+                            width="54"
+                          >
+                            <use
+                              href="#test"
+                              xlinkHref="#test"
+                            />
+                          </svg>
+                        </StyledSvg>
+                      </InlineSvg>
+                    </Component>
+                  </HeroIcon>
                   <p>
                     There are no debug symbols for this project.
                   </p>
diff --git a/tests/js/spec/views/__snapshots__/projectSavedSearches.spec.jsx.snap b/tests/js/spec/views/__snapshots__/projectSavedSearches.spec.jsx.snap
index 2b2b75f418..a152d74aff 100644
--- a/tests/js/spec/views/__snapshots__/projectSavedSearches.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/projectSavedSearches.spec.jsx.snap
@@ -1048,16 +1048,44 @@ exports[`ProjectSavedSearches renders empty 1`] = `
                       data-test-id="empty-state"
                     >
                       <div
-                        className="css-n38n5f-EmptyStreamWrapper ernlsnc0"
+                        className="css-1ff2mrl-EmptyStreamWrapper ernlsnc0"
                         data-test-id="empty-state"
                       >
-                        <Icon
-                          className="icon icon-exclamation"
+                        <HeroIcon
+                          size="54"
+                          src="icon-circle-exclamation"
                         >
-                          <div
-                            className="icon icon-exclamation css-tjp7mx-Icon ernlsnc1"
-                          />
-                        </Icon>
+                          <Component
+                            className="css-1j03cl-HeroIcon e1h7wyrq0"
+                            size="54"
+                            src="icon-circle-exclamation"
+                          >
+                            <InlineSvg
+                              className="css-1j03cl-HeroIcon e1h7wyrq0"
+                              size="54"
+                              src="icon-circle-exclamation"
+                            >
+                              <StyledSvg
+                                className="css-1j03cl-HeroIcon e1h7wyrq0"
+                                height="54"
+                                viewBox={Object {}}
+                                width="54"
+                              >
+                                <svg
+                                  className="e1h7wyrq0 css-196iyqp-StyledSvg-HeroIcon e2idor0"
+                                  height="54"
+                                  viewBox={Object {}}
+                                  width="54"
+                                >
+                                  <use
+                                    href="#test"
+                                    xlinkHref="#test"
+                                  />
+                                </svg>
+                              </StyledSvg>
+                            </InlineSvg>
+                          </Component>
+                        </HeroIcon>
                         <p>
                           There are no saved searches for this project.
                         </p>
diff --git a/tests/js/spec/views/stream/stream.spec.jsx b/tests/js/spec/views/stream/stream.spec.jsx
index 3bf7e4e226..259fc785ef 100644
--- a/tests/js/spec/views/stream/stream.spec.jsx
+++ b/tests/js/spec/views/stream/stream.spec.jsx
@@ -316,7 +316,7 @@ describe('Stream', function() {
         loading: false,
         dataLoading: false,
       });
-      expect(wrapper.find('.empty-stream').length).toBeTruthy();
+      expect(wrapper.find('EmptyStateWarning').length).toBeTruthy();
     });
 
     describe('no first event sent', function() {
