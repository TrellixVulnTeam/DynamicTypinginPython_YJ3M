commit cb1594a7a3f7183fdb20a931a59254c96dd8b668
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Aug 26 00:27:37 2014 -0700

    Generate sidebar via template tag

diff --git a/src/sentry/api/base.py b/src/sentry/api/base.py
index dbef36540c..c4224f3637 100644
--- a/src/sentry/api/base.py
+++ b/src/sentry/api/base.py
@@ -1,6 +1,7 @@
 from __future__ import absolute_import
 
 from datetime import datetime, timedelta
+from enum import Enum
 from pytz import utc
 from rest_framework.authentication import SessionAuthentication
 from rest_framework.parsers import JSONParser
@@ -22,7 +23,7 @@ ONE_DAY = ONE_HOUR * 24
 LINK_HEADER = '<{uri}&cursor={cursor}>; rel="{name}"'
 
 
-class DocSection(object):
+class DocSection(Enum):
     ACCOUNTS = 'Accounts API'
     TEAMS = 'Teams API'
     PROJECTS = 'Projects API'
diff --git a/src/sentry/templates/sentry/help/api_index.html b/src/sentry/templates/sentry/help/api_index.html
index 75008b6851..0c0c90eb53 100644
--- a/src/sentry/templates/sentry/help/api_index.html
+++ b/src/sentry/templates/sentry/help/api_index.html
@@ -4,16 +4,14 @@
 {% load sentry_helpers %}
 
 {% block breadcrumbs %}
-{{ block.super }}
-<li class="divider">/</li>
-<li>API</li>
-<li class="divider">/</li>
-<li><a href="{% url 'sentry-help-platform-list' %}">Web API</a></li>
-
+    {{ block.super }}
+    <li class="divider">/</li>
+    <li>API</li>
+    <li class="divider">/</li>
+    <li><a href="{% url 'sentry-help-platform-list' %}">Web API</a></li>
 {% endblock%}
 
 {% block main %}
-
     <h2>Web API</h2>
 
     <p>API requests are made using project-level API keys. They're passed using HTTP Basic auth where the username is your public key, and the password is your secret key. The API key must also be configured with "Web API access" as a role.</p>
@@ -36,7 +34,6 @@
     id: "4"
 }]</pre>
 
-
     {% for section in section_list %}
         <br>
         <h3>{{ section.name }}</h3>
diff --git a/src/sentry/templates/sentry/help/index.html b/src/sentry/templates/sentry/help/index.html
index 8cb8348112..01c9b6f0ae 100644
--- a/src/sentry/templates/sentry/help/index.html
+++ b/src/sentry/templates/sentry/help/index.html
@@ -1,6 +1,7 @@
 {% extends "sentry/bases/modal.html" %}
 
 {% load i18n %}
+{% load sentry_docs %}
 {% load sentry_helpers %}
 
 {% block heading %}{% endblock %}
@@ -13,32 +14,7 @@
         <div class="row">
           <div class="col-sm-3 sidebar">
             {% block sidebar %}
-            <h4>Guides</h4>
-            <ul>
-              {% for page in page_list %}
-                  <li><a href="{% url 'sentry-help-page' page.id page.slug %}">{{ page.title }}</a></li>
-              {% endfor %}
-            </ul>
-
-            <h4>Clients</h4>
-            <ul>
-              <li class="{% block client_overview_class %}{% endblock %}"><a href="{% url 'sentry-help-platform-list' %}">Overview</a></li>
-              <li class="{% ifequal platform "python" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'python' %}">Python</a></li>
-              <li class="{% ifequal platform "php" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'php' %}">PHP</a></li>
-              <li class="{% ifequal platform "ruby" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'ruby' %}">Ruby</a></li>
-              <li class="{% ifequal platform "javascript" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'javascript' %}">JavaScript</a></li>
-              <li class="{% ifequal platform "java" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'java' %}">Java</a></li>
-              <li class="{% ifequal platform "node.js" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'node.js' %}">Node.js</a></li>
-              <li class="{% ifequal platform "ios" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'ios' %}">iOS</a></li>
-              <li class="{% ifequal platform "go" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'go' %}">Go</a></li>
-            </ul>
-
-            <h4>API Reference</h4>
-            <ul>
-                <li><a href="{% url 'sentry-api-0-help' %}">Web API</a></li>
-                <li><a href="http://sentry.readthedocs.org/en/latest/developer/client/index.html">Client API</a></li>
-            </ul>
-
+              {% render_doc_sidebar %}
             {% endblock %}
           </div>
           <div class="col-sm-9 main">
diff --git a/src/sentry/templates/sentry/help/sidebar.html b/src/sentry/templates/sentry/help/sidebar.html
new file mode 100644
index 0000000000..6e50b85897
--- /dev/null
+++ b/src/sentry/templates/sentry/help/sidebar.html
@@ -0,0 +1,28 @@
+<h4>Guides</h4>
+<ul>
+  {% for page in page_list %}
+      <li><a href="{% url 'sentry-help-page' page.id page.slug %}">{{ page.title }}</a></li>
+  {% endfor %}
+</ul>
+
+<h4>Clients</h4>
+<ul>
+  <li class="{% block client_overview_class %}{% endblock %}"><a href="{% url 'sentry-help-platform-list' %}">Overview</a></li>
+  <li class="{% ifequal platform "python" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'python' %}">Python</a></li>
+  <li class="{% ifequal platform "php" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'php' %}">PHP</a></li>
+  <li class="{% ifequal platform "ruby" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'ruby' %}">Ruby</a></li>
+  <li class="{% ifequal platform "javascript" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'javascript' %}">JavaScript</a></li>
+  <li class="{% ifequal platform "java" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'java' %}">Java</a></li>
+  <li class="{% ifequal platform "node.js" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'node.js' %}">Node.js</a></li>
+  <li class="{% ifequal platform "ios" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'ios' %}">iOS</a></li>
+  <li class="{% ifequal platform "go" %}active{% endifequal %}"><a href="{% url 'sentry-help-platform' 'go' %}">Go</a></li>
+</ul>
+
+<h4>API Reference</h4>
+<ul>
+    <li><a href="{% url 'sentry-api-0-help' %}">Overview</a></li>
+    {% for section_key, section_label in api_sections %}
+      <li><a href="{% url 'sentry-api-0-help' %}">{{ section_label }}</a></li>
+    {% endfor %}
+    <li><a href="http://sentry.readthedocs.org/en/latest/developer/client/index.html">Client Specification</a></li>
+</ul>
diff --git a/src/sentry/templatetags/sentry_docs.py b/src/sentry/templatetags/sentry_docs.py
new file mode 100644
index 0000000000..bf12caf6c7
--- /dev/null
+++ b/src/sentry/templatetags/sentry_docs.py
@@ -0,0 +1,15 @@
+from django import template
+
+from sentry.api.base import DocSection
+
+register = template.Library()
+
+
+@register.inclusion_tag('sentry/help/sidebar.html', takes_context=True)
+def render_doc_sidebar(context):
+    api_sections = sorted(((v.name, v.value) for v in DocSection),
+                          key=lambda x: x[1])
+
+    return {
+        'api_sections': api_sections,
+    }
