commit 76e6b950910c4be8f9e57d0c40cc4f0f9eb6b383
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Apr 20 10:38:51 2015 -0700

    Default encoding to utf-8

diff --git a/src/sentry/http.py b/src/sentry/http.py
index 1e2d3ed857..294dd688de 100644
--- a/src/sentry/http.py
+++ b/src/sentry/http.py
@@ -97,7 +97,7 @@ def safe_urlopen(url, method=None, params=None, data=None, json=None,
         method = 'POST' if (data or json) else 'GET'
 
     try:
-        return getattr(session, method.lower())(
+        response = getattr(session, method.lower())(
             url,
             allow_redirects=allow_redirects,
             timeout=timeout,
@@ -109,6 +109,13 @@ def safe_urlopen(url, method=None, params=None, data=None, json=None,
     except ZeroReturnError as exc:
         six.reraise(SSLError, exc)
 
+    # requests' attempts to use chardet internally when no encoding is found
+    # and we want to avoid that slow behavior
+    if not response.encoding:
+        response.encoding = 'utf-8'
+
+    return response
+
 
 def safe_urlread(response):
     return response.content
diff --git a/src/sentry/lang/javascript/processor.py b/src/sentry/lang/javascript/processor.py
index 96e9e708a2..8836cad9a5 100644
--- a/src/sentry/lang/javascript/processor.py
+++ b/src/sentry/lang/javascript/processor.py
@@ -273,9 +273,14 @@ def fetch_url(url, project=None, release=None):
                            exc_info=True)
             raise CannotFetchSource(error)
 
+        # requests' attempts to use chardet internally when no encoding is found
+        # and we want to avoid that slow behavior
+        if not response.encoding:
+            response.encoding = 'utf-8'
+
         result = (
             {k.lower(): v for k, v in response.headers.items()},
-            response.content,
+            response.text,
             response.status_code,
         )
         cache.set(cache_key, result, 60)
