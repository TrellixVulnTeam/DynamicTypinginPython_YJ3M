commit 5d5e93f1a02ccda3ac5c7ca05dbaa85e2f953f5e
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Apr 21 10:20:30 2015 -0700

    Handle empty context

diff --git a/src/sentry/interfaces/stacktrace.py b/src/sentry/interfaces/stacktrace.py
index 1e0f6eb19a..20291f16fa 100644
--- a/src/sentry/interfaces/stacktrace.py
+++ b/src/sentry/interfaces/stacktrace.py
@@ -36,6 +36,9 @@ def get_context(lineno, context_line, pre_context=None, post_context=None, filen
     if lineno is None:
         return []
 
+    if context_line is None and not (pre_context or post_context):
+        return []
+
     lineno = int(lineno)
     context = []
     start_lineno = lineno - len(pre_context or [])
diff --git a/src/sentry/static/sentry/app/views/groupDetails/interfaces/stacktraceContent.jsx b/src/sentry/static/sentry/app/views/groupDetails/interfaces/stacktraceContent.jsx
index 3100fe0ca9..8567ad26f5 100644
--- a/src/sentry/static/sentry/app/views/groupDetails/interfaces/stacktraceContent.jsx
+++ b/src/sentry/static/sentry/app/views/groupDetails/interfaces/stacktraceContent.jsx
@@ -98,7 +98,7 @@ var Frame = React.createClass({
     }
 
     var context = '';
-    if (this.isDefined(data.context)) {
+    if (this.isDefined(data.context) && data.context.length) {
       var startLineNo = data.context[0][0];
       context = (
         <ol start={startLineNo} className={outerClassName}
