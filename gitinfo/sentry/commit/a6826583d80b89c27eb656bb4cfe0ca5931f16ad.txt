commit a6826583d80b89c27eb656bb4cfe0ca5931f16ad
Author: David Cramer <dcramer@gmail.com>
Date:   Sun May 15 10:28:30 2016 -0700

    Add errors to default event fixtures

diff --git a/src/sentry/testutils/fixtures.py b/src/sentry/testutils/fixtures.py
index 6ae76331d2..2a9d35935d 100644
--- a/src/sentry/testutils/fixtures.py
+++ b/src/sentry/testutils/fixtures.py
@@ -16,7 +16,7 @@ from exam import fixture
 from uuid import uuid4
 
 from sentry.models import (
-    Activity, Event, Group, Organization, OrganizationMember,
+    Activity, Event, EventError, Group, Organization, OrganizationMember,
     OrganizationMemberTeam, Project, Team, User
 )
 from sentry.utils.compat import pickle
@@ -169,6 +169,11 @@ class Fixtures(object):
                 tags = tags.items()
             kwargs['data']['tags'] = tags
 
+        kwargs['data'].setdefault('errors', [{
+            'type': EventError.INVALID_DATA,
+            'name': 'foobar',
+        }])
+
         event = Event(
             event_id=event_id,
             **kwargs
diff --git a/tests/sentry/tasks/test_merge.py b/tests/sentry/tasks/test_merge.py
index df785a91a1..5196236262 100644
--- a/tests/sentry/tasks/test_merge.py
+++ b/tests/sentry/tasks/test_merge.py
@@ -24,12 +24,12 @@ class MergeGroupTest(TestCase):
         event1 = Event.objects.get(id=event1.id)
         assert event1.group_id == group2.id
         Event.objects.bind_nodes([event1], 'data')
-        assert event1.data == {'foo': 'bar'}
+        assert event1.data['foo'] == 'bar'
 
         event2 = Event.objects.get(id=event2.id)
         assert event2.group_id == group2.id
         Event.objects.bind_nodes([event2], 'data')
-        assert event2.data == {'foo': 'baz'}
+        assert event2.data['foo'] == 'baz'
 
     def test_merge_creates_redirect(self):
         groups = [self.create_group() for _ in xrange(0, 3)]
