commit 41b7f8fed9facfc48ee3a250b15ff31523106c9b
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Aug 5 11:09:59 2016 -0700

    Fix handling of invalid IP networks
    
    ```
    >>> ipaddress.ip_network(u'94.31.40.65/24', strict=False)
    IPv4Network(u'94.31.40.0/24')
    ```
    
    @getsentry/infrastructure

diff --git a/src/sentry/http.py b/src/sentry/http.py
index b62d42dab2..59c88fb07c 100644
--- a/src/sentry/http.py
+++ b/src/sentry/http.py
@@ -35,7 +35,7 @@ USER_AGENT = 'sentry/{version} (https://getsentry.com)'.format(
 )
 
 DISALLOWED_IPS = {
-    ipaddress.ip_network(six.text_type(i))
+    ipaddress.ip_network(six.text_type(i), strict=False)
     for i in settings.SENTRY_DISALLOWED_IPS
 }
 
diff --git a/src/sentry/utils/http.py b/src/sentry/utils/http.py
index 9f104dfa06..ca5e974393 100644
--- a/src/sentry/utils/http.py
+++ b/src/sentry/utils/http.py
@@ -179,7 +179,7 @@ def is_valid_ip(ip_address, project):
             return False
 
         # Check to make sure it's actually a range before
-        if '/' in addr and ipaddress.ip_address(six.text_type(ip_address)) in ipaddress.ip_network(six.text_type(addr)):
+        if '/' in addr and ipaddress.ip_address(six.text_type(ip_address)) in ipaddress.ip_network(six.text_type(addr), strict=False):
             return False
 
     return True
diff --git a/src/sentry/utils/validators.py b/src/sentry/utils/validators.py
index 22686b03ec..86a25812b2 100644
--- a/src/sentry/utils/validators.py
+++ b/src/sentry/utils/validators.py
@@ -12,7 +12,7 @@ def validate_ip(value, required=True):
         return
 
     # will raise a ValueError
-    ipaddress.ip_network(six.text_type(value))
+    ipaddress.ip_network(six.text_type(value), strict=False)
     return value
 
 
