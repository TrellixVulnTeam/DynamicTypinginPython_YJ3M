commit 063ad68a9eb12511e6b11d58dabc3f4cbd5ef4f7
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Mar 3 03:08:04 2012 -0800

    It turns out I am awful at math

diff --git a/sentry/templatetags/sentry_admin_helpers.py b/sentry/templatetags/sentry_admin_helpers.py
index c831b86e4c..455ed82421 100644
--- a/sentry/templatetags/sentry_admin_helpers.py
+++ b/sentry/templatetags/sentry_admin_helpers.py
@@ -22,6 +22,6 @@ def avg_events_per_day(project):
         per_day = 0
     else:
         n_per_hour = (60 / settings.MINUTE_NORMALIZATION)
-        per_day = int(project.avg_events_per_n / project.n_value) * (project.n_value % n_per_hour)
+        per_day = int(project.avg_events_per_n / (float(project.n_value) / n_per_hour) * 24)
 
     return per_day
diff --git a/sentry/utils/dates.py b/sentry/utils/dates.py
index e29bbd1ceb..14df1c60fb 100644
--- a/sentry/utils/dates.py
+++ b/sentry/utils/dates.py
@@ -16,10 +16,12 @@ def utc_to_local(dt):
     tz = pytz.timezone(settings.TIME_ZONE)
     return tz.fromutc(dt).replace(tzinfo=None)
 
+
 def local_to_utc(dt):
     tz = pytz.timezone(settings.TIME_ZONE)
     return tz.localize(dt).astimezone(pytz.utc).replace(tzinfo=None)
 
+
 def get_sql_date_trunc(col, db='default'):
     conn = connections[db]
 
diff --git a/sentry/web/frontend/admin.py b/sentry/web/frontend/admin.py
index 5311c082a9..ad35f6452e 100644
--- a/sentry/web/frontend/admin.py
+++ b/sentry/web/frontend/admin.py
@@ -52,7 +52,7 @@ def manage_projects(request):
     project_list = Project.objects.filter(
         status=0,
     ).exclude(
-        projectcountbyminute__date__lte=datetime.datetime.now() - datetime.timedelta(days=30),
+        projectcountbyminute__date__gte=datetime.datetime.now() - datetime.timedelta(days=30),
     ).annotate(
         avg_events_per_n=Sum('projectcountbyminute__times_seen'),
         n_value=Count('projectcountbyminute__times_seen')
