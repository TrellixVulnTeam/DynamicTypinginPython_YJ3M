commit bfb1773594874a8d3522cc35d776a706e278d5db
Author: Ted Kaemming <ted@kaemming.com>
Date:   Wed Dec 2 10:00:16 2015 -0800

    Don't try and send a notification if there is no message to send.
    
    ¯\_(ツ)_/¯

diff --git a/src/sentry/plugins/sentry_mail/models.py b/src/sentry/plugins/sentry_mail/models.py
index f188ead704..13b3c397a4 100644
--- a/src/sentry/plugins/sentry_mail/models.py
+++ b/src/sentry/plugins/sentry_mail/models.py
@@ -72,7 +72,9 @@ class MailPlugin(NotificationPlugin):
         return msg
 
     def _send_mail(self, *args, **kwargs):
-        return self._build_message(*args, **kwargs).send()
+        message = self._build_message(*args, **kwargs)
+        if message is not None:
+            return message.send()
 
     def send_test_mail(self, project=None):
         self._send_mail(
@@ -230,7 +232,7 @@ class MailPlugin(NotificationPlugin):
             context=context,
         )
 
-        if features.has('projects:digests:deliver', project):
+        if message is not None and features.has('projects:digests:deliver', project):
             message.send()
 
     def notify_about_activity(self, activity):
