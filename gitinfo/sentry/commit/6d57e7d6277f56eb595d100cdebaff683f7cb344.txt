commit 6d57e7d6277f56eb595d100cdebaff683f7cb344
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Feb 6 11:20:30 2015 -0800

    Update team stats endpoint url

diff --git a/src/sentry/api/endpoints/team_stats.py b/src/sentry/api/endpoints/team_stats.py
index 702e29d34f..96a417b02c 100644
--- a/src/sentry/api/endpoints/team_stats.py
+++ b/src/sentry/api/endpoints/team_stats.py
@@ -10,8 +10,11 @@ from sentry.models import Team, Project
 
 
 class TeamStatsEndpoint(BaseStatsEndpoint):
-    def get(self, request, team_id):
-        team = Team.objects.get(id=team_id)
+    def get(self, request, organization_slug, team_slug):
+        team = Team.objects.get(
+            organization__slug=organization_slug,
+            slug=team_slug,
+        )
 
         assert_perm(team, request.user, request.auth)
 
diff --git a/src/sentry/api/urls.py b/src/sentry/api/urls.py
index 78d8e2f070..d6ffb7c8b3 100644
--- a/src/sentry/api/urls.py
+++ b/src/sentry/api/urls.py
@@ -81,7 +81,7 @@ urlpatterns = patterns(
     url(r'^teams/(?P<team_id>\d+)/access-groups/$',
         TeamAccessGroupIndexEndpoint.as_view(),
         name='sentry-api-0-team-access-group-index'),
-    url(r'^teams/(?P<team_id>\d+)/stats/$',
+    url(r'^teams/(?P<organization_slug>[^\/]+)/(?P<team_slug>[^\/]+)/stats/$',
         TeamStatsEndpoint.as_view(),
         name='sentry-api-0-team-stats'),
 
diff --git a/tests/sentry/api/endpoints/test_team_stats.py b/tests/sentry/api/endpoints/test_team_stats.py
index 0d827d8710..bac4641e6b 100644
--- a/tests/sentry/api/endpoints/test_team_stats.py
+++ b/tests/sentry/api/endpoints/test_team_stats.py
@@ -19,7 +19,8 @@ class TeamStatsTest(APITestCase):
         tsdb.incr(tsdb.models.project, project_3.id, count=10)
 
         url = reverse('sentry-api-0-team-stats', kwargs={
-            'team_id': team.id,
+            'organization_slug': team.organization.slug,
+            'team_slug': team.slug,
         })
         response = self.client.get(url, format='json')
 
