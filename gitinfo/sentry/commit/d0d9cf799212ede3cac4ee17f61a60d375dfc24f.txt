commit d0d9cf799212ede3cac4ee17f61a60d375dfc24f
Author: James Cunningham <cunninghamjt09@gmail.com>
Date:   Fri Oct 11 10:40:26 2019 -0700

    perf(db): Cache positive/negative hits on Group being assigned during owner assignment. (#15049)

diff --git a/src/sentry/tasks/post_process.py b/src/sentry/tasks/post_process.py
index 1accd7480a..e8a318b103 100644
--- a/src/sentry/tasks/post_process.py
+++ b/src/sentry/tasks/post_process.py
@@ -104,7 +104,13 @@ def handle_owner_assignment(project, group, event):
     from sentry.models import GroupAssignee, ProjectOwnership
 
     # Is the issue already assigned to a team or user?
-    if group.assignee_set.exists():
+    key = "assignee_exists:1:%s" % (group.id)
+    assignee_exists = cache.get(key)
+    if assignee_exists is None:
+        assignee_exists = group.assignee_set.exists()
+        # Cache for an hour if it's assigned. We don't need to move that fast.
+        cache.set(key, assignee_exists, 3600 if assignee_exists else 60)
+    if assignee_exists:
         return
 
     owner = ProjectOwnership.get_autoassign_owner(group.project_id, event.data)
