commit 2318b08fe17aba18dc590a8b186e199547cba896
Author: Stephen Cefali <scefali@sentry.io>
Date:   Fri May 15 10:21:27 2020 -0700

    record sentry app view on detail view (#18849)

diff --git a/src/sentry/static/sentry/app/views/organizationIntegrations/sentryAppDetailedView.tsx b/src/sentry/static/sentry/app/views/organizationIntegrations/sentryAppDetailedView.tsx
index e49be4297e..9a0da16f8d 100644
--- a/src/sentry/static/sentry/app/views/organizationIntegrations/sentryAppDetailedView.tsx
+++ b/src/sentry/static/sentry/app/views/organizationIntegrations/sentryAppDetailedView.tsx
@@ -19,6 +19,7 @@ import {openModal} from 'app/actionCreators/modal';
 import {getSentryAppInstallStatus} from 'app/utils/integrationUtil';
 import Confirm from 'app/components/confirm';
 import {IconSubtract} from 'app/icons';
+import {recordInteraction} from 'app/utils/recordSentryAppInteraction';
 
 import AbstractIntegrationDetailedView from './abstractIntegrationDetailedView';
 
@@ -65,6 +66,7 @@ class SentryAppDetailedView extends AbstractIntegrationDetailedView<
     }
 
     super.onLoadAllEndpointsSuccess();
+    recordInteraction(integrationSlug, 'sentry_app_viewed');
   }
 
   get integrationType() {
diff --git a/tests/js/spec/views/organizationIntegrations/sentryAppDetailedView.spec.jsx b/tests/js/spec/views/organizationIntegrations/sentryAppDetailedView.spec.jsx
index 4b21b12410..5582a401fe 100644
--- a/tests/js/spec/views/organizationIntegrations/sentryAppDetailedView.spec.jsx
+++ b/tests/js/spec/views/organizationIntegrations/sentryAppDetailedView.spec.jsx
@@ -39,10 +39,18 @@ describe('SentryAppDetailedView', function() {
   describe('Published Sentry App', function() {
     let createRequest;
     let deleteRequest;
+    let sentryAppInteractionRequest;
 
     beforeEach(() => {
       Client.clearMockResponses();
 
+      sentryAppInteractionRequest = MockApiClient.addMockResponse({
+        url: `/sentry-apps/clickup/interaction/`,
+        method: 'POST',
+        statusCode: 200,
+        body: {},
+      });
+
       mockResponse([
         [
           '/sentry-apps/clickup/',
@@ -106,6 +114,18 @@ describe('SentryAppDetailedView', function() {
       );
     });
 
+    it('records interaction request', () => {
+      expect(sentryAppInteractionRequest).toHaveBeenCalledWith(
+        `/sentry-apps/clickup/interaction/`,
+        expect.objectContaining({
+          method: 'POST',
+          data: {
+            tsdbField: 'sentry_app_viewed',
+          },
+        })
+      );
+    });
+
     it('shows the Integration name and install status', async function() {
       expect(wrapper.find('Name').props().children).toEqual('ClickUp');
       expect(wrapper.find('IntegrationStatus').props().status).toEqual('Not Installed');
@@ -148,6 +168,13 @@ describe('SentryAppDetailedView', function() {
     beforeEach(() => {
       Client.clearMockResponses();
 
+      MockApiClient.addMockResponse({
+        url: `/sentry-apps/my-headband-washer-289499/interaction/`,
+        method: 'POST',
+        statusCode: 200,
+        body: {},
+      });
+
       mockResponse([
         [
           '/sentry-apps/my-headband-washer-289499/',
@@ -218,6 +245,13 @@ describe('SentryAppDetailedView', function() {
     beforeEach(() => {
       Client.clearMockResponses();
 
+      MockApiClient.addMockResponse({
+        url: `/sentry-apps/la-croix-monitor/interaction/`,
+        method: 'POST',
+        statusCode: 200,
+        body: {},
+      });
+
       mockResponse([
         [
           '/sentry-apps/la-croix-monitor/',
@@ -306,6 +340,13 @@ describe('SentryAppDetailedView', function() {
     beforeEach(() => {
       Client.clearMockResponses();
 
+      MockApiClient.addMockResponse({
+        url: `/sentry-apps/go-to-google/interaction/`,
+        method: 'POST',
+        statusCode: 200,
+        body: {},
+      });
+
       mockResponse([
         [
           '/sentry-apps/go-to-google/',
