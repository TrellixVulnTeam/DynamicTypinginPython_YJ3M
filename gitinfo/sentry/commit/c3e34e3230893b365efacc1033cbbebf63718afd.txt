commit c3e34e3230893b365efacc1033cbbebf63718afd
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Oct 10 10:12:26 2012 -0700

    memberships and keys are not available if you're not authenticated (fixes GH-621)

diff --git a/src/sentry/web/frontend/projects.py b/src/sentry/web/frontend/projects.py
index a180a92280..d687ff5074 100644
--- a/src/sentry/web/frontend/projects.py
+++ b/src/sentry/web/frontend/projects.py
@@ -28,8 +28,12 @@ from sentry.web.helpers import render_to_response, get_project_list, \
 def project_list(request):
     project_list = get_project_list(request.user, hidden=True).values()
     team_list = dict((t.id, t) for t in Team.objects.filter(pk__in=[p.team_id for p in project_list]))
-    memberships = dict((tm.team_id, tm) for tm in TeamMember.objects.filter(user=request.user, team__in=team_list))
-    keys = dict((p.project_id, p) for p in ProjectKey.objects.filter(user=request.user, project__in=project_list))
+    if request.user.is_authenticated():
+        memberships = dict((tm.team_id, tm) for tm in TeamMember.objects.filter(user=request.user, team__in=team_list))
+        keys = dict((p.project_id, p) for p in ProjectKey.objects.filter(user=request.user, project__in=project_list))
+    else:
+        memberships = {}
+        keys = {}
 
     for project in project_list:
         key = keys.get(project.id)
