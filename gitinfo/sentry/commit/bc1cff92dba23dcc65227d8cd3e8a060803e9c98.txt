commit bc1cff92dba23dcc65227d8cd3e8a060803e9c98
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jun 11 21:03:43 2014 -0700

    Various cleanup

diff --git a/src/sentry/static/sentry/app.js b/src/sentry/static/sentry/app.js
index a7ef9a24f5..ca96d2a1e9 100644
--- a/src/sentry/static/sentry/app.js
+++ b/src/sentry/static/sentry/app.js
@@ -5,6 +5,7 @@ define([
 
   'moment',
   'jquery',
+  'selectize',
 
   'app/modules/charts',
   'app/modules/collection',
diff --git a/src/sentry/static/sentry/app/base.js b/src/sentry/static/sentry/app/base.js
index 4057843ea3..1667a4036b 100644
--- a/src/sentry/static/sentry/app/base.js
+++ b/src/sentry/static/sentry/app/base.js
@@ -517,9 +517,6 @@ define([
 
         }),
 
-        AddTeamMemberPage: BasePage.extend({
-        }),
-
         AccessGroupMembersPage: BasePage.extend({
             initialize: function(){
                 BasePage.prototype.initialize.apply(this, arguments);
diff --git a/src/sentry/static/sentry/app/init.js b/src/sentry/static/sentry/app/init.js
index 73c2de4abb..b62f8548a5 100644
--- a/src/sentry/static/sentry/app/init.js
+++ b/src/sentry/static/sentry/app/init.js
@@ -49,12 +49,6 @@ define([
       return false;
   });
 
-  // Change all select boxes to selectize elements.
-  $('.body select').each(function(){
-      var $this = $(this);
-      $this.selectize();
-  });
-
   // Update date strings periodically
   setInterval(function() {
       $('.pretty-date').each(function(_, el){
diff --git a/src/sentry/static/sentry/main.js b/src/sentry/static/sentry/main.js
index e92ef3a200..28b1ddfbbc 100644
--- a/src/sentry/static/sentry/main.js
+++ b/src/sentry/static/sentry/main.js
@@ -2,6 +2,7 @@ define([
   'angular',
   'app',
   'moment',
+  'jquery',
 
   'app/controllers/default',
   'app/controllers/deleteTeam',
@@ -11,8 +12,8 @@ define([
   'app/controllers/teamDashboard',
 
   'app/directives/count',
-  'app/directives/timeSince'
-], function(angular, app, moment){
+  'app/directives/timeSince',
+], function(angular, app, moment, jQuery){
   'use strict';
 
   app.config(function(
@@ -31,6 +32,9 @@ define([
     $provide.value('selectedProject', window.SentryConfig.selectedProject);
   });
 
+  // Change all select boxes to selectize elements.
+  jQuery('select').selectize();
+
   moment.lang(window.SentryConfig.lang);
 
   angular.bootstrap(document, ['app']);
diff --git a/src/sentry/templates/sentry/projects/notifications.html b/src/sentry/templates/sentry/projects/notifications.html
index 98d808624f..d3be359d76 100644
--- a/src/sentry/templates/sentry/projects/notifications.html
+++ b/src/sentry/templates/sentry/projects/notifications.html
@@ -47,7 +47,9 @@
         </fieldset>
     </form>
     <script type="text/javascript">
-    new app.ProjectNotificationsPage();
+    require(['app/init'], function(app){
+        new app.ProjectNotificationsPage();
+    });
     </script>
 {% endblock %}
 
diff --git a/src/sentry/templates/sentry/projects/rules/new.html b/src/sentry/templates/sentry/projects/rules/new.html
index 22fd63722c..0798b60287 100644
--- a/src/sentry/templates/sentry/projects/rules/new.html
+++ b/src/sentry/templates/sentry/projects/rules/new.html
@@ -74,12 +74,14 @@
     </div>
 
     <script>
-    new app.NewProjectRulePage({
-        el: '#new-rule-form',
-        actions: {{ action_list|safe }},
-        conditions: {{ condition_list|safe }},
-        form_data: {{ form_data|to_json|safe }},
-        form_errors: {{ form_errors|to_json|safe }}
+    require(['app/init'], function(app){
+        new app.NewProjectRulePage({
+            el: '#new-rule-form',
+            actions: {{ action_list|safe }},
+            conditions: {{ condition_list|safe }},
+            form_data: {{ form_data|to_json|safe }},
+            form_errors: {{ form_errors|to_json|safe }}
+        });
     });
     </script>
 {% endblock %}
diff --git a/src/sentry/templates/sentry/teams/groups/members.html b/src/sentry/templates/sentry/teams/groups/members.html
index 40fef2a16f..43fb3c2b0e 100644
--- a/src/sentry/templates/sentry/teams/groups/members.html
+++ b/src/sentry/templates/sentry/teams/groups/members.html
@@ -52,7 +52,9 @@
     </form>
 
     <script type="text/javascript">
-    new app.AccessGroupMembersPage();
+    require(['app/init'], function(app){
+        new app.AccessGroupMembersPage();
+    });
     </script>
 
 {% endblock %}
diff --git a/src/sentry/templates/sentry/teams/groups/projects.html b/src/sentry/templates/sentry/teams/groups/projects.html
index 073ac95dff..a53665d103 100644
--- a/src/sentry/templates/sentry/teams/groups/projects.html
+++ b/src/sentry/templates/sentry/teams/groups/projects.html
@@ -52,7 +52,9 @@
     </form>
 
     <script type="text/javascript">
-    new app.AccessGroupProjectsPage();
+    require(['app/init'], function(app){
+        new app.AccessGroupProjectsPage();
+    });
     </script>
 
 {% endblock %}
diff --git a/src/sentry/templates/sentry/teams/members/new.html b/src/sentry/templates/sentry/teams/members/new.html
index 438499d2c6..ae4c6ae8c2 100644
--- a/src/sentry/templates/sentry/teams/members/new.html
+++ b/src/sentry/templates/sentry/teams/members/new.html
@@ -29,8 +29,4 @@
             {% endwith %}
         </div>
     </div>
-
-    <script type="text/javascript">
-    new app.AddTeamMemberPage();
-    </script>
 {% endblock %}
