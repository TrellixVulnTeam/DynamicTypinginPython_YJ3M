commit 572e252bab8965ba63ed1c252a29fced353710ae
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Feb 11 11:31:24 2015 -0800

    Add first release information to group details

diff --git a/src/sentry/api/endpoints/group_details.py b/src/sentry/api/endpoints/group_details.py
index 11e69289aa..88c3a0522f 100644
--- a/src/sentry/api/endpoints/group_details.py
+++ b/src/sentry/api/endpoints/group_details.py
@@ -11,7 +11,8 @@ from sentry.api.serializers import serialize
 from sentry.constants import STATUS_CHOICES
 from sentry.db.models.query import create_or_update
 from sentry.models import (
-    Activity, Group, GroupAssignee, GroupBookmark, GroupSeen, GroupStatus
+    Activity, Group, GroupAssignee, GroupBookmark, GroupSeen, GroupStatus,
+    GroupTagValue
 )
 
 
@@ -82,7 +83,23 @@ class GroupDetailsEndpoint(Endpoint):
         activity = self._get_activity(request, group, num=7)
         seen_by = self._get_seen_by(request, group)
 
+        # find first seen release
+        try:
+            first_release = GroupTagValue.objects.filter(
+                group=group,
+                key='sentry:release',
+            ).order_by('first_seen')[0]
+        except IndexError:
+            first_release = None
+        else:
+            first_release = {
+                'version': first_release.value,
+                # TODO(dcramer): this should look it up in Release
+                'dateCreated': first_release.first_seen,
+            }
+
         data.update({
+            'firstRelease': first_release,
             'activity': serialize(activity, request.user),
             'seenBy': serialize(seen_by, request.user),
         })
diff --git a/tests/sentry/api/endpoints/test_group_details.py b/tests/sentry/api/endpoints/test_group_details.py
index 3522ddc228..6d7fc5272f 100644
--- a/tests/sentry/api/endpoints/test_group_details.py
+++ b/tests/sentry/api/endpoints/test_group_details.py
@@ -3,7 +3,8 @@ from __future__ import absolute_import, print_function
 from django.core.urlresolvers import reverse
 
 from sentry.models import (
-    Activity, Group, GroupAssignee, GroupBookmark, GroupStatus
+    Activity, Group, GroupAssignee, GroupBookmark, GroupStatus, GroupTagValue,
+    Release
 )
 from sentry.testutils import APITestCase
 
@@ -21,6 +22,31 @@ class GroupDetailsTest(APITestCase):
 
         assert response.status_code == 200, response.content
         assert response.data['id'] == str(group.id)
+        assert response.data['firstRelease'] is None
+
+    def test_with_first_release(self):
+        self.login_as(user=self.user)
+
+        group = self.create_group()
+        release = Release.objects.create(
+            project=group.project,
+            version='1.0',
+        )
+        GroupTagValue.objects.create(
+            group=group,
+            project=group.project,
+            key='sentry:release',
+            value=release.version,
+        )
+
+        url = reverse('sentry-api-0-group-details', kwargs={
+            'group_id': group.id,
+        })
+        response = self.client.get(url, format='json')
+
+        assert response.status_code == 200, response.content
+        assert response.data['id'] == str(group.id)
+        assert response.data['firstRelease']['version'] == release.version
 
 
 class GroupUpdateTest(APITestCase):
