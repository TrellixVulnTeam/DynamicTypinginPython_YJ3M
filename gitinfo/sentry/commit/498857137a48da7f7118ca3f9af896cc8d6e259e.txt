commit 498857137a48da7f7118ca3f9af896cc8d6e259e
Author: Ted Kaemming <ted@kaemming.com>
Date:   Wed Mar 23 12:03:31 2016 -0700

    Add `GroupRedirect` to group deletion task.

diff --git a/src/sentry/tasks/deletion.py b/src/sentry/tasks/deletion.py
index 7733acc53a..4a0476b539 100644
--- a/src/sentry/tasks/deletion.py
+++ b/src/sentry/tasks/deletion.py
@@ -162,7 +162,7 @@ def delete_group(object_id, continuous=True, **kwargs):
     from sentry.models import (
         EventMapping, Group, GroupAssignee, GroupBookmark, GroupHash, GroupMeta,
         GroupResolution, GroupRuleStatus, GroupStatus, GroupTagKey,
-        GroupTagValue, GroupEmailThread, UserReport
+        GroupTagValue, GroupEmailThread, UserReport, GroupRedirect,
     )
 
     try:
@@ -177,7 +177,7 @@ def delete_group(object_id, continuous=True, **kwargs):
         # prioritize GroupHash
         GroupHash, GroupAssignee, GroupBookmark, GroupMeta, GroupResolution,
         GroupRuleStatus, GroupTagValue, GroupTagKey, EventMapping,
-        GroupEmailThread, UserReport
+        GroupEmailThread, UserReport, GroupRedirect,
     )
     for model in bulk_model_list:
         has_more = bulk_delete_objects(model, group_id=object_id, logger=logger)
diff --git a/tests/sentry/tasks/test_deletion.py b/tests/sentry/tasks/test_deletion.py
index 6971d95ef0..ebca49fb3d 100644
--- a/tests/sentry/tasks/test_deletion.py
+++ b/tests/sentry/tasks/test_deletion.py
@@ -5,7 +5,7 @@ from mock import patch
 from sentry.exceptions import DeleteAborted
 from sentry.models import (
     Event, EventMapping, EventTag,
-    Group, GroupAssignee, GroupMeta, GroupResolution, GroupStatus, GroupTagKey,
+    Group, GroupAssignee, GroupMeta, GroupResolution, GroupRedirect, GroupStatus, GroupTagKey,
     GroupTagValue, Organization, OrganizationStatus, Project, ProjectStatus,
     Release, TagKey, TagValue, Team, TeamStatus
 )
@@ -185,6 +185,10 @@ class DeleteGroupTest(TestCase):
             key='foo',
             value='bar',
         )
+        GroupRedirect.objects.create(
+            group_id=group.id,
+            previous_group_id=1,
+        )
 
         with self.tasks():
             delete_group(object_id=group.id)
@@ -196,3 +200,4 @@ class DeleteGroupTest(TestCase):
             group_id=group.id,
         ).exists()
         assert not EventTag.objects.filter(event_id=event.id).exists()
+        assert not GroupRedirect.objects.filter(group_id=group.id).exists()
