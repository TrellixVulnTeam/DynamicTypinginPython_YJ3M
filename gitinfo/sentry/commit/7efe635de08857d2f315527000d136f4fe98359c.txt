commit 7efe635de08857d2f315527000d136f4fe98359c
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Fri Nov 20 00:18:16 2015 +0100

    Do not extract POs unless done through makefile

diff --git a/Makefile b/Makefile
index 2eacb6bfd4..7ce221d697 100644
--- a/Makefile
+++ b/Makefile
@@ -49,16 +49,16 @@ clean:
 	find . -name "*.pyc" -delete
 	@echo ""
 
-build/javascript.po:
+build-js-po:
 	mkdir -p build
-	./node_modules/.bin/webpack
+	SENTRY_EXTRACT_TRANSLATIONS=1 ./node_modules/.bin/webpack
 
-locale: build/javascript.po
+locale: build-js-po
 	cd src/sentry && sentry makemessages -i static -l en
 	./bin/merge-catalogs en
 	cd src/sentry && sentry compilemessages
 
-update-transifex: build/javascript.po
+update-transifex: build-js-po
 	pip install transifex-client
 	cd src/sentry && sentry makemessages -i static -l en
 	./bin/merge-catalogs en
diff --git a/webpack.config.js b/webpack.config.js
index 5bf7f16ad4..86807f4211 100644
--- a/webpack.config.js
+++ b/webpack.config.js
@@ -11,6 +11,26 @@ if (process.env.SENTRY_STATIC_DIST_PATH) {
     distPath = process.env.SENTRY_STATIC_DIST_PATH;
 }
 
+var babelQuery = {
+  plugins: [],
+  extra: {}
+};
+
+// only extract po files if we need to
+if (process.env.SENTRY_EXTRACT_TRANSLATIONS === '1') {
+  babelQuery.plugins.push('babel-gettext-extractor');
+  babelQuery.extra.gettext = {
+    fileName: 'build/javascript.po',
+    baseDirectory: path.join(__dirname, 'src/sentry'),
+    functionNames: {
+      gettext: ["msgid"],
+      ngettext: ["msgid", "msgid_plural", "count"],
+      t: ["msgid"],
+      tn: ["msgid", "msgid_plural", "count"],
+    },
+  };
+}
+
 var config = {
   context: path.join(__dirname, staticPrefix),
   entry: {
@@ -57,21 +77,7 @@ var config = {
         loader: "babel-loader",
         include: path.join(__dirname, staticPrefix),
         exclude: /(vendor|node_modules)/,
-        query: {
-          plugins: ['babel-gettext-extractor'],
-          extra: {
-            gettext: {
-              fileName: 'build/javascript.po',
-              baseDirectory: path.join(__dirname, 'src/sentry'),
-              functionNames: {
-                gettext: ["msgid"],
-                ngettext: ["msgid", "msgid_plural", "count"],
-                t: ["msgid"],
-                tn: ["msgid", "msgid_plural", "count"],
-              },
-            }
-          }
-        }
+        query: babelQuery
       },
       {
         test: /\.po$/,
