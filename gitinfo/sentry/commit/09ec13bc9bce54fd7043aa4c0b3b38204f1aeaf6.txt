commit 09ec13bc9bce54fd7043aa4c0b3b38204f1aeaf6
Author: David Cramer <dcramer@gmail.com>
Date:   Tue May 20 21:14:40 2014 -0700

    Correct optional deps for tests

diff --git a/.travis.yml b/.travis.yml
index d4ac019958..1903fabd2d 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -1,5 +1,6 @@
 language: python
 services:
+  - elasticsearch
   - memcached
   - riak
   - mysql
diff --git a/src/sentry/testutils/skips.py b/src/sentry/testutils/skips.py
index 9d8513fd80..293c561424 100644
--- a/src/sentry/testutils/skips.py
+++ b/src/sentry/testutils/skips.py
@@ -20,7 +20,7 @@ def riak_is_available():
 
 
 requires_riak = pytest.mark.skipif(
-    lambda x: not riak_is_available(),
+    not riak_is_available(),
     reason="requires riak server running")
 
 
@@ -34,7 +34,7 @@ def cassandra_is_available():
 
 
 requires_cassandra = pytest.mark.skipif(
-    lambda x: not cassandra_is_available(),
+    not cassandra_is_available(),
     reason="requires cassandra server running")
 
 
@@ -48,5 +48,5 @@ def elastic_search_is_available():
 
 
 requires_elastic_search = pytest.mark.skipif(
-    lambda x: not elastic_search_is_available(),
+    not elastic_search_is_available(),
     reason="requires elastic search server running")
diff --git a/tests/sentry/search/elastic_search/test_backend.py b/tests/sentry/search/elastic_search/test_backend.py
index 92bec5ecb4..0ad8310d9b 100644
--- a/tests/sentry/search/elastic_search/test_backend.py
+++ b/tests/sentry/search/elastic_search/test_backend.py
@@ -5,8 +5,10 @@ from __future__ import absolute_import
 from sentry.constants import STATUS_RESOLVED, STATUS_UNRESOLVED
 from sentry.search.elastic_search.backend import ElasticSearchBackend
 from sentry.testutils import TestCase
+from sentry.testutils.skips import requires_elastic_search
 
 
+@requires_elastic_search
 class ElasticSearchTest(TestCase):
     def setUp(self):
         from elasticsearch import Elasticsearch
