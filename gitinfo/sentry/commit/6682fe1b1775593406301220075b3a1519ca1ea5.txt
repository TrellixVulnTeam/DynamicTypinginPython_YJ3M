commit 6682fe1b1775593406301220075b3a1519ca1ea5
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Nov 23 14:28:18 2012 -0800

    Handle CACHE directory via static serving correctly

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 790c961dd3..ddf3a4957a 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -163,7 +163,7 @@ STATIC_ROOT = os.path.join(PROJECT_ROOT, 'static')
 STATIC_URL = '/_static/'
 
 COMPRESS_URL = STATIC_URL
-
+COMPRESS_OUTPUT_DIR = 'CACHE'
 COMPRESS_PRECOMPILERS = (
     ('text/coffeescript', 'coffee --compile --stdio'),
     ('text/less', 'lessc --strict-imports {infile} {outfile}'),
diff --git a/src/sentry/web/frontend/generic.py b/src/sentry/web/frontend/generic.py
index 4c1799a413..e1e55431f0 100644
--- a/src/sentry/web/frontend/generic.py
+++ b/src/sentry/web/frontend/generic.py
@@ -52,8 +52,10 @@ def static_media(request, module, path, root=None):
 
     if root:
         document_root = root
-    elif module in ('sentry', 'CACHE'):
+    elif module == 'sentry':
         document_root = os.path.join(settings.MODULE_ROOT, 'static', module)
+    elif module == dj_settings.COMPRESS_OUTPUT_DIR:
+        document_root = os.path.join(dj_settings.STATIC_ROOT, module)
     elif module not in dj_settings.INSTALLED_APPS:
         raise Http404('Invalid module provided.')
     else:
