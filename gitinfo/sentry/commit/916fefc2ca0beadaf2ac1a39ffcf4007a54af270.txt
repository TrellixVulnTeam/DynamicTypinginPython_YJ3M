commit 916fefc2ca0beadaf2ac1a39ffcf4007a54af270
Author: David Cramer <dcramer@gmail.com>
Date:   Tue May 26 14:01:33 2015 +0200

    Fix sampling for internal metrics

diff --git a/src/sentry/utils/metrics.py b/src/sentry/utils/metrics.py
index d058588a9d..e47aa20fb2 100644
--- a/src/sentry/utils/metrics.py
+++ b/src/sentry/utils/metrics.py
@@ -22,7 +22,7 @@ def incr(key, amount=1):
     statsd.incr(_get_key(key), amount,
                 rate=sample_rate)
 
-    if sample_rate >= 1 or random() >= sample_rate:
+    if sample_rate >= 1 or random() >= 1 - sample_rate:
         if sample_rate < 1:
             amount = int(amount * (1.0 / sample_rate))
         tsdb.incr(tsdb.models.internal, key, count=amount)
