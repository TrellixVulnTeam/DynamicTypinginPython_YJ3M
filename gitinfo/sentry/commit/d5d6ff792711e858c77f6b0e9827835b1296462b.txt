commit d5d6ff792711e858c77f6b0e9827835b1296462b
Author: Ben Vinegar <ben@benv.ca>
Date:   Tue Sep 20 15:36:35 2016 -0700

    Fix project bookmark toggle

diff --git a/src/sentry/static/sentry/app/components/projectHeader/index.jsx b/src/sentry/static/sentry/app/components/projectHeader/index.jsx
index 3c75f51b69..20ef9330bb 100644
--- a/src/sentry/static/sentry/app/components/projectHeader/index.jsx
+++ b/src/sentry/static/sentry/app/components/projectHeader/index.jsx
@@ -1,7 +1,10 @@
 import React from 'react';
 import {Link} from 'react-router';
 
+
 import ProjectSelector from './projectSelector';
+import BookmarkToggle from '../projects/bookmarkToggle';
+
 import {t} from '../../locale';
 
 const ProjectHeader = React.createClass({
@@ -26,14 +29,18 @@ const ProjectHeader = React.createClass({
                 organization={org}
                 projectId={project.slug}/>
 
-              <div className="pull-right project-actions">
-              <a className=""><span className="icon icon-star-solid" /> Star</a>
-              <a className=""><span className="icon icon-signal" /> Subscribe</a>
+            <div className="pull-right project-actions">
+              <BookmarkToggle orgId={org.slug} project={project}>
+                <a className="">
+                  <span className={project.isBookmarked ? 'icon icon-star-solid active' : 'icon icon-star-solid'}/>
+                  {t('Star')}
+                </a>
                 {access.has('project:write') &&
                   <a className={navSection == 'settings' ? 'active' : ''} href={`/${org.slug}/${project.slug}/settings/`}>
                     <span className="icon icon-settings" /> {t('Settings')}
                   </a>
                 }
+              </BookmarkToggle>
             </div>
 
             <ul className="nav nav-tabs">
diff --git a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
index bfb807f489..05b3e4aa3b 100644
--- a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
+++ b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
@@ -4,13 +4,11 @@ import {History} from 'react-router';
 import {Link} from 'react-router';
 import jQuery from 'jquery';
 
-import {update as projectUpdate} from '../../actionCreators/projects';
 import ApiMixin from '../../mixins/apiMixin';
 
 import ProjectLabel from '../../components/projectLabel';
 import DropdownLink from '../dropdownLink';
 import MenuItem from '../menuItem';
-import TooltipMixin from '../../mixins/tooltip';
 import {sortArray} from '../../utils';
 import {t} from '../../locale';
 
@@ -29,15 +27,6 @@ const ProjectSelector = React.createClass({
   mixins: [
     ApiMixin,
     History,
-    TooltipMixin(function () {
-      return {
-        selector: '.tip',
-        title: function (instance) {
-          return (this.getAttribute('data-isbookmarked') === 'true' ?
-            'Remove from bookmarks' : 'Add to bookmarks');
-        }
-      };
-    })
   ],
 
   getDefaultProps() {
@@ -104,16 +93,6 @@ const ProjectSelector = React.createClass({
     this.refs.dropdownLink && this.refs.dropdownLink.close();
   },
 
-  handleBookmarkClick(project) {
-    projectUpdate(this.api, {
-      orgId: this.props.organization.slug,
-      projectId: project.slug,
-      data: {
-        isBookmarked: !project.isBookmarked
-      }
-    });
-  },
-
   getProjectNode(team, project, highlightText, hasSingleTeam, isSelected) {
     let projectId = project.slug;
     let label = this.getProjectLabel(team, project, hasSingleTeam,
@@ -202,7 +181,6 @@ const ProjectSelector = React.createClass({
     let orgId = org.slug;
     let projectId = project.slug;
 
-    let className = 'bookmark tip ' + (project.isBookmarked ? 'icon-star-solid' : 'icon-star-outline');
     return (
       <span>
         <Link to={`/${orgId}/${projectId}/`}>
diff --git a/src/sentry/static/sentry/app/components/projects/bookmarkToggle.jsx b/src/sentry/static/sentry/app/components/projects/bookmarkToggle.jsx
new file mode 100644
index 0000000000..e5e52f284d
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/projects/bookmarkToggle.jsx
@@ -0,0 +1,38 @@
+import React from 'react';
+
+import ApiMixin from '../../mixins/apimixin';
+
+import {update as projectUpdate} from '../../actionCreators/projects';
+
+const BookmarkToggle = React.createClass({
+  propTypes: {
+    orgId: React.PropTypes.string.isRequired,
+    project: React.PropTypes.object.isRequired,
+  },
+
+  mixins: [
+    ApiMixin
+  ],
+
+  handleBookmarkClick() {
+    let {project} = this.props;
+    projectUpdate(this.api, {
+      orgId: this.props.orgId,
+      projectId: project.slug,
+      data: {
+        isBookmarked: !project.isBookmarked
+      }
+    });
+  },
+
+  render() {
+    return (
+      <div onClick={this.handleBookmarkClick}>
+        {this.props.children}
+      </div>
+    );
+
+  }
+});
+
+export default BookmarkToggle;
diff --git a/src/sentry/static/sentry/less/layout.less b/src/sentry/static/sentry/less/layout.less
index bb979d3037..46b1116eed 100644
--- a/src/sentry/static/sentry/less/layout.less
+++ b/src/sentry/static/sentry/less/layout.less
@@ -238,6 +238,9 @@ footer {
       position: relative;
       top: 1px;
     }
+    &.active {
+      color: @yellow-orange;
+    }
   }
 }
 
