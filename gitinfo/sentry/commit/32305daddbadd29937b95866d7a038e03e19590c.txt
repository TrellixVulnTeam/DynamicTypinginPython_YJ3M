commit 32305daddbadd29937b95866d7a038e03e19590c
Author: David Cramer <dcramer@gmail.com>
Date:   Wed May 26 20:48:28 2010 -0700

    Gzip exception information thanks to Germ√°n M. Bravo

diff --git a/djangodblog/admin.py b/djangodblog/admin.py
index 763bdc8b70..dcdb83b90d 100644
--- a/djangodblog/admin.py
+++ b/djangodblog/admin.py
@@ -162,8 +162,10 @@ class ErrorAdmin(EfficientModelAdmin):
         Create a technical server error response. The last three arguments are
         the values returned from sys.exc_info() and friends.
         """
-        module, args, frames = pickle.loads(base64.b64decode(obj.data['exc']))
-    
+        try:
+            module, args, frames = pickle.loads(base64.b64decode(obj.data['exc']).decode('zlib'))
+        except:
+            module, args, frames = pickle.loads(base64.b64decode(obj.data['exc']))
         obj.class_name = str(obj.class_name)
     
         if module == '__builtin__':
diff --git a/djangodblog/manager.py b/djangodblog/manager.py
index abdb42c664..1e027962c9 100644
--- a/djangodblog/manager.py
+++ b/djangodblog/manager.py
@@ -132,7 +132,7 @@ class DBLogManager(models.Manager):
         frames = reporter.get_traceback_frames()
 
         data = kwargs.pop('data', {})
-        data['exc'] = base64.b64encode(pickle.dumps(map(to_unicode, [exc_type.__class__.__module__, exc_value.args, frames])))
+        data['exc'] = base64.b64encode(pickle.dumps(map(to_unicode, [exc_type.__class__.__module__, exc_value.args, frames])).encode('zlib'))
 
         tb_message = '\n'.join(traceback_mod.format_exception(exc_type, exc_value, traceback))
 
