commit 7b0756f632850a27b640587f93cddbb1a62fad70
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Feb 20 14:05:09 2015 -0800

    Add entrance page for org login

diff --git a/src/sentry/templates/sentry/organization-login.html b/src/sentry/templates/sentry/organization-login.html
new file mode 100644
index 0000000000..41c3dac721
--- /dev/null
+++ b/src/sentry/templates/sentry/organization-login.html
@@ -0,0 +1,24 @@
+{% extends "sentry/bases/modal.html" %}
+
+{% load crispy_forms_tags %}
+{% load i18n %}
+
+{% block title %}{% trans "Login" %} | {{ block.super }}{% endblock %}
+
+{% block main %}
+  <section class="body">
+    <div class="row">
+      <div class="span5">
+        <form class="form-stacked" action="" method="post">
+          {% csrf_token %}
+
+          <fieldset>
+              <legend>{{ organization.name }} Login</legend>
+          </fieldset>
+
+          <button type="submit" class="btn btn-default btn-primary btn-login-{{ provider_key }}">Login with {{ provider_name }}</button>
+        </form>
+      </div>
+    </div>
+  </section>
+{% endblock %}
diff --git a/src/sentry/web/frontend/auth_organization_login.py b/src/sentry/web/frontend/auth_organization_login.py
index 75bcf376df..61b353ddef 100644
--- a/src/sentry/web/frontend/auth_organization_login.py
+++ b/src/sentry/web/frontend/auth_organization_login.py
@@ -12,7 +12,7 @@ class AuthOrganizationLoginView(BaseView):
 
     def handle(self, request, organization_slug):
         try:
-            organization = Organization.objects.get_from_cache(
+            organization = Organization.objects.get(
                 slug=organization_slug
             )
         except Organization.DoesNotExist:
@@ -22,11 +22,22 @@ class AuthOrganizationLoginView(BaseView):
         if auth_provider is None:
             return self.redirect(reverse('sentry-login'))
 
-        helper = AuthHelper(
-            request=request,
-            organization=organization,
-            auth_provider=auth_provider,
-            flow=AuthHelper.FLOW_LOGIN,
-        )
-        helper.init_pipeline()
-        return helper.next_step()
+        if request.method == 'POST':
+            helper = AuthHelper(
+                request=request,
+                organization=organization,
+                auth_provider=auth_provider,
+                flow=AuthHelper.FLOW_LOGIN,
+            )
+            helper.init_pipeline()
+            return helper.next_step()
+
+        provider = auth_provider.get_provider()
+
+        context = {
+            'organization': organization,
+            'provider_key': provider.key,
+            'provider_name': provider.name,
+        }
+
+        return self.respond('sentry/organization-login.html', context)
