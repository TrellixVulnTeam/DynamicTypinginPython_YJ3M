commit 3bf04fdb13f7b713058b1e655ba75d5cd02353f2
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Thu Apr 19 08:29:48 2018 -0700

    fix(ui): Fix sudo modal text + UI bugs (APP-110) (#8097)

diff --git a/src/sentry/static/sentry/app/actionCreators/modal.jsx b/src/sentry/static/sentry/app/actionCreators/modal.jsx
index e3b05789a9..8a1e952f12 100644
--- a/src/sentry/static/sentry/app/actionCreators/modal.jsx
+++ b/src/sentry/static/sentry/app/actionCreators/modal.jsx
@@ -19,7 +19,12 @@ export function closeModal() {
 export function openSudo({onClose, ...args} = {}) {
   import(/* webpackChunkName: "SudoModal" */ '../components/modals/sudoModal')
     .then(mod => mod.default)
-    .then(SudoModal => openModal(deps => <SudoModal {...deps} {...args} />, {onClose}));
+    .then(SudoModal =>
+      openModal(deps => <SudoModal {...deps} {...args} />, {
+        modalClassName: 'sudo-modal',
+        onClose,
+      })
+    );
 }
 
 export function openDiffModal(options) {
diff --git a/src/sentry/static/sentry/app/components/modals/sudoModal.jsx b/src/sentry/static/sentry/app/components/modals/sudoModal.jsx
index 931a72fdcd..2084d345cf 100644
--- a/src/sentry/static/sentry/app/components/modals/sudoModal.jsx
+++ b/src/sentry/static/sentry/app/components/modals/sudoModal.jsx
@@ -22,6 +22,7 @@ class SudoModal extends React.Component {
      * expects a function that returns a Promise
      */
     retryRequest: PropTypes.func.isRequired,
+    // User is a superuser without an active su session
     superuser: PropTypes.bool,
     router: PropTypes.object,
     user: PropTypes.object,
@@ -91,12 +92,12 @@ class SudoModal extends React.Component {
   };
 
   render() {
-    let {closeModal, user, Header, Body} = this.props;
+    let {closeModal, superuser, user, Header, Body} = this.props;
 
     return (
       <React.Fragment>
         <Header closeButton onHide={closeModal}>
-          {t('Confirm Your Identity')}
+          {t('Confirm Password to Continue')}
         </Header>
 
         <Body>
@@ -113,7 +114,11 @@ class SudoModal extends React.Component {
           ) : (
             <React.Fragment>
               <TextBlock css={{marginBottom: space(1)}}>
-                {t('Help us keep your account safe by confirming your identity.')}
+                {superuser
+                  ? t(
+                      'You are attempting to access a resource that requires superuser access, please re-authenticate as a superuser.'
+                    )
+                  : t('Help us keep your account safe by confirming your identity.')}
               </TextBlock>
 
               {this.state.error && (
@@ -129,7 +134,7 @@ class SudoModal extends React.Component {
               <Form
                 apiMethod="PUT"
                 apiEndpoint="/auth/"
-                submitLabel={t('Continue')}
+                submitLabel={t('Confirm Password')}
                 onSubmit={this.handleSubmit}
                 onSubmitSuccess={this.handleSuccess}
                 onSubmitError={this.handleError}
diff --git a/src/sentry/static/sentry/app/views/settings/components/forms/formField/index.jsx b/src/sentry/static/sentry/app/views/settings/components/forms/formField/index.jsx
index c503c727ad..4595f81699 100644
--- a/src/sentry/static/sentry/app/views/settings/components/forms/formField/index.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/forms/formField/index.jsx
@@ -331,7 +331,7 @@ class FormField extends React.Component {
                       <this.props.children
                         innerRef={this.handleInputMount}
                         {...{
-                          ...this.props,
+                          ...props,
                           name,
                           id,
                           onKeyDown: this.handleKeyDown,
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index 673f175c93..6ff7e88952 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -2730,6 +2730,27 @@ ul.radio-inputs {
   }
 }
 
+// Sudo Modal
+.sudo-modal.modal {
+  .modal-header {
+    padding: 12px 30px;
+
+    .close {
+      margin-top: 0;
+      top: 12px;
+    }
+  }
+
+  .form-actions {
+    margin-left: -30px;
+    margin-right: -30px;
+    margin-bottom: -30px;
+    padding-right: 30px;
+    padding-bottom: 20px;
+    padding-top: 20px;
+  }
+}
+
 // Command Palette
 .command-palette.modal {
   .modal-content {
