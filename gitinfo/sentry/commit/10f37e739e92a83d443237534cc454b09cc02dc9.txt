commit 10f37e739e92a83d443237534cc454b09cc02dc9
Author: adhiraj <adhiraj@sentry.io>
Date:   Thu Mar 15 20:24:19 2018 -0700

    Add member-invited analytics event (#7633)
    
    * Add member invited analytics event

diff --git a/src/sentry/analytics/events/member_invited.py b/src/sentry/analytics/events/member_invited.py
new file mode 100644
index 0000000000..decd69cf80
--- /dev/null
+++ b/src/sentry/analytics/events/member_invited.py
@@ -0,0 +1,17 @@
+from __future__ import absolute_import, print_function
+
+from sentry import analytics
+
+
+class MemberInvitedEvent(analytics.Event):
+    type = 'member.invited'
+
+    attributes = (
+        analytics.Attribute('inviter_user_id'),
+        analytics.Attribute('invited_member_id'),
+        analytics.Attribute('organization_id'),
+        analytics.Attribute('referrer', required=False),
+    )
+
+
+analytics.register(MemberInvitedEvent)
diff --git a/src/sentry/api/endpoints/organization_member_index.py b/src/sentry/api/endpoints/organization_member_index.py
index cc7513c412..e7c91b4147 100644
--- a/src/sentry/api/endpoints/organization_member_index.py
+++ b/src/sentry/api/endpoints/organization_member_index.py
@@ -150,7 +150,8 @@ class OrganizationMemberIndexEndpoint(OrganizationEndpoint):
 
         if settings.SENTRY_ENABLE_INVITES:
             om.send_invite_email()
-            member_invited.send(member=om, user=request.user, sender=self)
+            member_invited.send(member=om, user=request.user, sender=self,
+                                referrer=request.DATA.get('referrer'))
 
         self.create_audit_entry(
             request=request,
diff --git a/src/sentry/receivers/onboarding.py b/src/sentry/receivers/onboarding.py
index a73e4473d3..343cf2be4c 100644
--- a/src/sentry/receivers/onboarding.py
+++ b/src/sentry/receivers/onboarding.py
@@ -4,6 +4,7 @@ from django.db import IntegrityError, transaction
 from django.db.models import Q
 from django.utils import timezone
 
+from sentry import analytics
 from sentry.models import (
     OnboardingTask, OnboardingTaskStatus, OrganizationOnboardingTask, OrganizationOption
 )
@@ -140,6 +141,12 @@ def record_member_invited(member, user, **kwargs):
         status=OnboardingTaskStatus.PENDING,
         data={'invited_member_id': member.id}
     )
+    analytics.record(
+        'member.invited',
+        invited_member_id=member.id,
+        inviter_user_id=user.id,
+        organization_id=member.organization_id,
+        referrer=kwargs.get('referrer'))
 
 
 @member_joined.connect(weak=False)
diff --git a/src/sentry/static/sentry/app/components/assigneeSelector.jsx b/src/sentry/static/sentry/app/components/assigneeSelector.jsx
index 297c19d814..212d2569ff 100644
--- a/src/sentry/static/sentry/app/components/assigneeSelector.jsx
+++ b/src/sentry/static/sentry/app/components/assigneeSelector.jsx
@@ -345,6 +345,7 @@ const AssigneeSelector = createReactClass({
                   disabled={!loading}
                   to={`/settings/organization/${this.context.organization
                     .slug}/members/new/`}
+                  query={{referrer: 'assignee_selector'}}
                 >
                   <span className="icon-plus" /> {t('Invite Member')}
                 </MenuItem>
diff --git a/src/sentry/static/sentry/app/views/inviteMember/inviteMember.jsx b/src/sentry/static/sentry/app/views/inviteMember/inviteMember.jsx
index a8e793b336..472a503ebb 100644
--- a/src/sentry/static/sentry/app/views/inviteMember/inviteMember.jsx
+++ b/src/sentry/static/sentry/app/views/inviteMember/inviteMember.jsx
@@ -17,6 +17,7 @@ import TeamSelect from './teamSelect';
 import TextBlock from '../settings/components/text/textBlock';
 import TextField from '../../components/forms/textField';
 import recreateRoute from '../../utils/recreateRoute';
+import {getQueryParams} from '../../utils';
 
 // These don't have allowed and are only used for superusers. superceded by server result of allowed roles
 const STATIC_ROLE_LIST = [
@@ -141,6 +142,7 @@ const InviteMember = createReactClass({
           user: email,
           teams: Array.from(selectedTeams.keys()),
           role: selectedRole,
+          referrer: getQueryParams().referrer,
         },
         success: () => {
           // TODO(billy): Use indicator when these views only exist in Settings area
