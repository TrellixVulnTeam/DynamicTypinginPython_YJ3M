commit 4783e0e7029fc85ed89f29f2693b85088d57a58b
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Mar 17 20:42:51 2014 -0700

    Use thread locals for nodestore instances

diff --git a/src/sentry/nodestore/base.py b/src/sentry/nodestore/base.py
index 223dc14bf6..91b6c79626 100644
--- a/src/sentry/nodestore/base.py
+++ b/src/sentry/nodestore/base.py
@@ -8,10 +8,11 @@ sentry.nodestore.base
 
 from __future__ import absolute_import
 
-import uuid
+from threading import local
+from uuid import uuid4
 
 
-class NodeStorage(object):
+class NodeStorage(local):
     def create(self, data):
         """
         >>> key = nodestore.create({'foo': 'bar'})
@@ -61,7 +62,7 @@ class NodeStorage(object):
             self.set(id=id, data=data)
 
     def generate_id(self):
-        return uuid.uuid4().hex
+        return uuid4().hex
 
     def cleanup(self, cutoff_timestamp):
         raise NotImplementedError
