commit 45685629fcf76c6149a2d74a7ce4220e68d9b076
Author: Jen Song <jennifer.song@sentry.io>
Date:   Tue Mar 10 14:52:26 2020 -0700

    including getsentry apis so that we can get some metric around those endpoints (#17554)

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 19f694e738..b8568adf59 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -1780,3 +1780,5 @@ SYMBOLICATOR_PROCESS_EVENT_WARN_TIMEOUT = 120
 # symbolicator. If too low, too many events up in the sleep queue. If too high,
 # process_event might backlog and affect events from other platforms.
 SYMBOLICATOR_POLL_TIMEOUT = 4
+
+SENTRY_REQUEST_METRIC_ALLOWED_PATHS = ("sentry.web.api", "sentry.api.endpoints")
diff --git a/src/sentry/middleware/stats.py b/src/sentry/middleware/stats.py
index 8360b3fdc2..722be495b5 100644
--- a/src/sentry/middleware/stats.py
+++ b/src/sentry/middleware/stats.py
@@ -5,6 +5,7 @@ import six
 import time
 
 from django.http import Http404
+from django.conf import settings
 
 from sentry.utils import metrics
 
@@ -28,7 +29,7 @@ class ResponseCodeMiddleware(object):
 
 class RequestTimingMiddleware(object):
     allowed_methods = ("POST", "GET")
-    allowed_paths = ("sentry.web.api", "sentry.api.endpoints")  # Store endpoints
+    allowed_paths = getattr(settings, "SENTRY_REQUEST_METRIC_ALLOWED_PATHS", ("sentry.web.api", "sentry.api.endpoints"))  # Store endpoints
 
     def process_view(self, request, view_func, view_args, view_kwargs):
         if not hasattr(request, "_metric_tags"):
