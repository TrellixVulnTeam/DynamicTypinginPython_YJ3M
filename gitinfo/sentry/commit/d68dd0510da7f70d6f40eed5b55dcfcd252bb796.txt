commit d68dd0510da7f70d6f40eed5b55dcfcd252bb796
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Oct 19 15:35:02 2013 -0700

    Move pytest riak helper into testutils

diff --git a/src/sentry/testutils.py b/src/sentry/testutils.py
index 1208666608..607f0f99e6 100644
--- a/src/sentry/testutils.py
+++ b/src/sentry/testutils.py
@@ -9,6 +9,8 @@ sentry.testutils
 from __future__ import absolute_import
 
 import base64
+import pytest
+
 from exam import Exam, fixture, before  # NOQA
 from functools import wraps
 
@@ -272,3 +274,18 @@ def with_eager_tasks(func):
         finally:
             app.conf.CELERY_ALWAYS_EAGER = prev
     return wrapped
+
+
+def riak_is_available():
+    import socket
+    try:
+        socket.create_connection(('127.0.0.1', 8098), 1.0)
+    except socket.error:
+        return False
+    else:
+        return True
+
+
+requires_riak = pytest.mark.skipif(
+    'not riak_is_available()',
+    reason="requires riak server running")
diff --git a/tests/sentry/nodestore/riak/backend/tests.py b/tests/sentry/nodestore/riak/backend/tests.py
index 02896e9f86..92a7630218 100644
--- a/tests/sentry/nodestore/riak/backend/tests.py
+++ b/tests/sentry/nodestore/riak/backend/tests.py
@@ -2,27 +2,11 @@
 
 from __future__ import absolute_import
 
-import pytest
-
 from sentry.nodestore.riak.backend import RiakNodeStorage
-from sentry.testutils import TestCase
-
-
-def riak_is_available():
-    import socket
-    try:
-        socket.create_connection(('127.0.0.1', 8098), 1.0)
-    except socket.error:
-        return False
-    else:
-        return True
-
-require_riak = pytest.mark.skipif(
-    'not riak_is_available()',
-    reason="requires riak server running")
+from sentry.testutils import TestCase, requires_riak
 
 
-@require_riak
+@requires_riak
 class RiakNodeStorageTest(TestCase):
     def setUp(self):
         self.ns = RiakNodeStorage(nodes=[{
