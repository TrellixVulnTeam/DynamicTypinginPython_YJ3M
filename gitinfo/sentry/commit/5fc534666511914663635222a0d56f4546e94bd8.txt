commit 5fc534666511914663635222a0d56f4546e94bd8
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Aug 10 16:21:34 2015 -0700

    Use full git sha for Sentry version (when possible)

diff --git a/src/sentry/__init__.py b/src/sentry/__init__.py
index b6f8f8d776..d33bed38e5 100644
--- a/src/sentry/__init__.py
+++ b/src/sentry/__init__.py
@@ -23,7 +23,7 @@ def _get_git_revision(path):
         return None
     fh = open(revision_file, 'r')
     try:
-        return fh.read().strip()[:7]
+        return fh.read().strip()
     finally:
         fh.close()
 
diff --git a/src/sentry/templates/sentry/includes/ravenjs.html b/src/sentry/templates/sentry/includes/ravenjs.html
index 79032ab238..197d58938f 100644
--- a/src/sentry/templates/sentry/includes/ravenjs.html
+++ b/src/sentry/templates/sentry/includes/ravenjs.html
@@ -3,7 +3,7 @@
 
 <script>
 Raven.config('{% public_dsn %}', {
-  release: '{{ sentry_version.current }}',
+  release: '{{ sentry_version.build }}',
   whitelistUrls: {% convert_to_json ALLOWED_HOSTS %},
   ignoreErrors: [
     // Random plugins/extensions
diff --git a/src/sentry/templatetags/sentry_helpers.py b/src/sentry/templatetags/sentry_helpers.py
index 990c333b52..d9effda3ad 100644
--- a/src/sentry/templatetags/sentry_helpers.py
+++ b/src/sentry/templatetags/sentry_helpers.py
@@ -43,8 +43,9 @@ from sentry.utils.strings import truncatechars
 from templatetag_sugar.register import tag
 from templatetag_sugar.parser import Name, Variable, Constant, Optional
 
-SentryVersion = namedtuple('SentryVersion', ['current', 'latest',
-                                             'update_available'])
+SentryVersion = namedtuple('SentryVersion', [
+    'current', 'latest', 'update_available', 'build',
+])
 
 
 register = template.Library()
@@ -151,9 +152,10 @@ def get_sentry_version(context):
 
     latest = options.get('sentry:latest_version') or current
     update_available = Version(latest) > Version(current)
+    build = sentry.__build__ or current
 
     context['sentry_version'] = SentryVersion(
-        current, latest, update_available
+        current, latest, update_available, build
     )
     return ''
 
