commit 4dc5a3732138f171fc51481ea4697d199caa3a13
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Nov 26 11:35:17 2019 -0800

    fix(merge): Do not attempt to update Event with group_id on merge (#15655)
    
    Event is deprecated, we don't need to update it anymore.

diff --git a/src/sentry/tasks/merge.py b/src/sentry/tasks/merge.py
index 46b5f8c5c4..45023878a4 100644
--- a/src/sentry/tasks/merge.py
+++ b/src/sentry/tasks/merge.py
@@ -41,7 +41,6 @@ def merge_groups(
         GroupRuleStatus,
         GroupSubscription,
         Environment,
-        Event,
         EventAttachment,
         UserReport,
         GroupRedirect,
@@ -98,7 +97,6 @@ def merge_groups(
             GroupHash,
             GroupRuleStatus,
             GroupSubscription,
-            Event,
             EventAttachment,
             UserReport,
             GroupRedirect,
@@ -234,8 +232,7 @@ def merge_objects(models, group, new_group, limit=1000, logger=None, transaction
         # but we still want to check for "project_id" because some models define a project_id bigint.
         has_project = "project_id" in all_fields or "project" in all_fields
 
-        # HACK(mattrobenolt): Our Event table can't handle the extra project_id bit on the query
-        if has_project and model.__name__ != "Event":
+        if has_project:
             project_qs = model.objects.filter(project_id=group.project_id)
         else:
             project_qs = model.objects.all()
@@ -247,10 +244,6 @@ def merge_objects(models, group, new_group, limit=1000, logger=None, transaction
             queryset = project_qs.filter(group_id=group.id)
 
         for obj in queryset[:limit]:
-            # HACK(mattrobenolt): The Event table can't actually be filtered
-            # on the database for unknown reasons, so filtering out in Python
-            if has_project and model.__name__ == "Event" and obj.project_id != group.project_id:
-                continue
             try:
                 with transaction.atomic(using=router.db_for_write(model)):
                     if has_group:
