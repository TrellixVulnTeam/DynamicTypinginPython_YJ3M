commit bd408a46f38ac38e2120ff61bedee82d585acf03
Author: David Cramer <dcramer@gmail.com>
Date:   Thu May 22 01:23:49 2014 -0700

    Update elastic search API

diff --git a/src/sentry/search/elastic_search/backend.py b/src/sentry/search/elastic_search/backend.py
index 92ccf90313..2478782023 100644
--- a/src/sentry/search/elastic_search/backend.py
+++ b/src/sentry/search/elastic_search/backend.py
@@ -48,7 +48,9 @@ class ElasticSearchBackend(SearchBackend):
     def _get_index(self, group):
         return self.index_prefix + 'sentry-1'
 
-    def index(self, group, event):
+    def index(self, event):
+        group = event.group
+
         data = {
             'message': group.message,
             'project_id': group.project_id,
diff --git a/tests/sentry/search/elastic_search/test_backend.py b/tests/sentry/search/elastic_search/test_backend.py
index 0ad8310d9b..78b13a2c17 100644
--- a/tests/sentry/search/elastic_search/test_backend.py
+++ b/tests/sentry/search/elastic_search/test_backend.py
@@ -55,8 +55,8 @@ class ElasticSearchTest(TestCase):
             }
         )
 
-        self.backend.index(group1, event1)
-        self.backend.index(group2, event2)
+        self.backend.index(event1)
+        self.backend.index(event2)
 
         self.conn.indices.refresh(index='test-sentry-1')
 
