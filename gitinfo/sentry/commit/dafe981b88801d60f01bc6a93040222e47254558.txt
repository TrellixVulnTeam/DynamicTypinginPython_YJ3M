commit dafe981b88801d60f01bc6a93040222e47254558
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 26 22:41:57 2011 -0800

    Added raw link to template and cleaned up template

diff --git a/sentry/interfaces.py b/sentry/interfaces.py
index 497ca67b30..87a5c6bc9f 100644
--- a/sentry/interfaces.py
+++ b/sentry/interfaces.py
@@ -273,6 +273,7 @@ class Template(Interface):
             'lineno': self.lineno,
             'start_lineno': context[0][0],
             'context': context,
+            'template': '\n'.join([event.message, ''] + [n[1].strip('\n') for n in context]),
         })
 
 
diff --git a/sentry/templates/sentry/partial/interfaces/stacktrace.html b/sentry/templates/sentry/partial/interfaces/stacktrace.html
index 7efd0821e7..43843898ae 100644
--- a/sentry/templates/sentry/partial/interfaces/stacktrace.html
+++ b/sentry/templates/sentry/partial/interfaces/stacktrace.html
@@ -2,7 +2,7 @@
 
 <div id="traceback" class="module">
     <div class="page-header">
-      <a href="javascript:void(0)" data-container="#raw_stacktrace" data-title="Stacktrace" class="popup btn small pull-right">Raw Stacktrace</a>
+      <a href="javascript:void(0)" data-container="#raw_stacktrace" data-title="Stacktrace" class="popup btn small pull-right">Raw</a>
       <h2>{% trans "Stacktrace" %}</h2>
     </div>
     <div class="module-content">
diff --git a/sentry/templates/sentry/partial/interfaces/template.html b/sentry/templates/sentry/partial/interfaces/template.html
index d9d3004a2b..8ecda5a340 100644
--- a/sentry/templates/sentry/partial/interfaces/template.html
+++ b/sentry/templates/sentry/partial/interfaces/template.html
@@ -1,7 +1,12 @@
+{% load i18n %}
+
 <div id="template" class="module">
-    <h2>Template error</h2>
+    <div class="page-header">
+        <a href="javascript:void(0)" data-container="#raw_template" data-title="Template" class="popup btn small pull-right">Raw</a>
+        <h2>{% trans "Template Error" %}</h2>
+    </div>
     <div class="module-content">
-        <p>In template <code>{{ filename }}</code>, error at line <strong>{{ lineno }}</strong></p>
+        <p>In <code>{{ filename }}</code>, error at line <strong>{{ lineno }}</strong></p>
         {% if context %}
             <ol start="{{ start_lineno }}" class="context expandable">
                 {% for num, line in context %}
@@ -10,4 +15,8 @@
             </ol>
         {% endif %}
     </div>
-</div>
\ No newline at end of file
+</div>
+
+<div id="raw_template" style="display: none;">
+    <pre>{{ template }}</pre>
+</div>
