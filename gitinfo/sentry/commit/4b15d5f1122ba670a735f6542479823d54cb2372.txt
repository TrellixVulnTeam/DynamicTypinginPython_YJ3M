commit 4b15d5f1122ba670a735f6542479823d54cb2372
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Aug 7 13:20:51 2015 -0700

    Safer test for API requests (works with django-hosts)

diff --git a/src/sentry/middleware/locale.py b/src/sentry/middleware/locale.py
index 44679ee9fa..50acc5d824 100644
--- a/src/sentry/middleware/locale.py
+++ b/src/sentry/middleware/locale.py
@@ -11,7 +11,6 @@ from __future__ import absolute_import
 import pytz
 
 from django.conf import settings
-from django.core.urlresolvers import reverse
 from django.middleware.locale import LocaleMiddleware
 
 from sentry.models import UserOption
@@ -23,7 +22,7 @@ class SentryLocaleMiddleware(LocaleMiddleware):
         if settings.MAINTENANCE:
             return
 
-        if request.path.startswith(reverse('sentry-api-catchall')):
+        if '/api/0/' in request.path:
             return
 
         safe_execute(self.load_user_conf, request)
