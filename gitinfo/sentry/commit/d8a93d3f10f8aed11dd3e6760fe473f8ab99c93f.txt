commit d8a93d3f10f8aed11dd3e6760fe473f8ab99c93f
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Apr 28 09:52:51 2014 -0700

    Generate base64 encoded UUIDs rather than hex values

diff --git a/src/sentry/nodestore/base.py b/src/sentry/nodestore/base.py
index 91b6c79626..ee69a58fd0 100644
--- a/src/sentry/nodestore/base.py
+++ b/src/sentry/nodestore/base.py
@@ -8,6 +8,7 @@ sentry.nodestore.base
 
 from __future__ import absolute_import
 
+from base64 import b64encode
 from threading import local
 from uuid import uuid4
 
@@ -62,7 +63,7 @@ class NodeStorage(local):
             self.set(id=id, data=data)
 
     def generate_id(self):
-        return uuid4().hex
+        return b64encode(uuid4().bytes)
 
     def cleanup(self, cutoff_timestamp):
         raise NotImplementedError
diff --git a/tests/sentry/nodestore/test_base.py b/tests/sentry/nodestore/test_base.py
new file mode 100644
index 0000000000..8e87b57c7b
--- /dev/null
+++ b/tests/sentry/nodestore/test_base.py
@@ -0,0 +1,15 @@
+# -*- coding: utf-8 -*-
+
+from __future__ import absolute_import
+
+from sentry.nodestore.base import NodeStorage
+from sentry.testutils import TestCase
+
+
+class NodeStorageTest(TestCase):
+    def setUp(self):
+        self.ns = NodeStorage()
+
+    def test_generate_id(self):
+        result = self.ns.generate_id()
+        assert result
