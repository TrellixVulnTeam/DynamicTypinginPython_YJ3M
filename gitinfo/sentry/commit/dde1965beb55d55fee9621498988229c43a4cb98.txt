commit dde1965beb55d55fee9621498988229c43a4cb98
Author: Alberto Leal <mail4alberto@gmail.com>
Date:   Fri Oct 11 14:50:42 2019 -0400

    feat(apm): Display the op name for the top-level root span of the transaction. (#15057)

diff --git a/src/sentry/static/sentry/app/components/events/interfaces/spans/spanTree.tsx b/src/sentry/static/sentry/app/components/events/interfaces/spans/spanTree.tsx
index 2b679b17d0..cf1d569313 100644
--- a/src/sentry/static/sentry/app/components/events/interfaces/spans/spanTree.tsx
+++ b/src/sentry/static/sentry/app/components/events/interfaces/spans/spanTree.tsx
@@ -151,7 +151,7 @@ class SpanTree extends React.Component<PropType> {
       span_id: trace.rootSpanID,
       start_timestamp: trace.traceStartTimestamp,
       timestamp: trace.traceEndTimestamp,
-      op: 'transaction',
+      op: trace.op,
       data: {},
     };
 
diff --git a/src/sentry/static/sentry/app/components/events/interfaces/spans/traceView.tsx b/src/sentry/static/sentry/app/components/events/interfaces/spans/traceView.tsx
index 22cce5acae..0cfbb0a423 100644
--- a/src/sentry/static/sentry/app/components/events/interfaces/spans/traceView.tsx
+++ b/src/sentry/static/sentry/app/components/events/interfaces/spans/traceView.tsx
@@ -12,9 +12,11 @@ import TraceViewHeader from './header';
 import * as CursorGuideHandler from './cursorGuideHandler';
 
 type TraceContextType = {
-  type: 'trace';
-  span_id: string;
-  trace_id: string;
+  op?: string;
+  type?: 'trace';
+  span_id?: string;
+  trace_id?: string;
+  parent_span_id?: string;
 };
 
 type PropType = {
@@ -54,9 +56,11 @@ class TraceView extends React.Component<PropType> {
     const traceContext = this.getTraceContext();
     const traceID = (traceContext && traceContext.trace_id) || '';
     const rootSpanID = (traceContext && traceContext.span_id) || '';
+    const rootSpanOpName = (traceContext && traceContext.op) || 'transaction';
 
     if (!spanEntry || spans.length <= 0) {
       return {
+        op: rootSpanOpName,
         childSpans: {},
         traceStartTimestamp: event.startTimestamp,
         traceEndTimestamp: event.endTimestamp,
@@ -69,6 +73,7 @@ class TraceView extends React.Component<PropType> {
     // we reduce spans to become an object mapping span ids to their children
 
     const init: ParsedTraceType = {
+      op: rootSpanOpName,
       childSpans: {},
       traceStartTimestamp: event.startTimestamp,
       traceEndTimestamp: event.endTimestamp,
diff --git a/src/sentry/static/sentry/app/components/events/interfaces/spans/types.tsx b/src/sentry/static/sentry/app/components/events/interfaces/spans/types.tsx
index baa4045b7c..2dc38f06f1 100644
--- a/src/sentry/static/sentry/app/components/events/interfaces/spans/types.tsx
+++ b/src/sentry/static/sentry/app/components/events/interfaces/spans/types.tsx
@@ -24,6 +24,7 @@ export type SentryTransactionEvent = {
 export type SpanChildrenLookupType = {[span_id: string]: Array<SpanType>};
 
 export type ParsedTraceType = {
+  op: string;
   childSpans: SpanChildrenLookupType;
   traceID: string;
   rootSpanID: string;
