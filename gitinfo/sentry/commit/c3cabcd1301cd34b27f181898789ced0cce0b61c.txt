commit c3cabcd1301cd34b27f181898789ced0cce0b61c
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Dec 9 15:28:56 2014 -0800

    Correct usage of slugify_instance

diff --git a/src/sentry/management/commands/repair.py b/src/sentry/management/commands/repair.py
index dd2bcb7322..b13b68f52f 100644
--- a/src/sentry/management/commands/repair.py
+++ b/src/sentry/management/commands/repair.py
@@ -21,7 +21,7 @@ class Command(BaseCommand):
 
         print("Creating missing slugs for organizations")
         for org in Organization.objects.filter(slug__isnull=True):
-            org.slug = slugify_instance(org, org.name, RESERVED_ORGANIZATION_SLUGS)
+            slugify_instance(org, org.name, RESERVED_ORGANIZATION_SLUGS)
             print('Assigning slug %r for %s' % (org.slug, org.id))
             org.save()
 
@@ -33,7 +33,7 @@ class Command(BaseCommand):
                 name=project.name,
                 owner=project.owner,
             )
-            team.slug = slugify_instance(team, team.name, RESERVED_ORGANIZATION_SLUGS)
+            slugify_instance(team, team.name, RESERVED_ORGANIZATION_SLUGS)
             team.save()
 
             update(project, team=team)
diff --git a/src/sentry/migrations/0132_add_default_orgs.py b/src/sentry/migrations/0132_add_default_orgs.py
index 9c51301188..d0f5657bb1 100644
--- a/src/sentry/migrations/0132_add_default_orgs.py
+++ b/src/sentry/migrations/0132_add_default_orgs.py
@@ -15,7 +15,7 @@ class Migration(DataMigration):
         for team in team_list.iterator():
             if team.owner not in user_orgs:
                 user_orgs[team.owner] = Organization.objects.create(
-                    name=team.name,
+                    name=team.name.strip() or 'Default',
                     owner=team.owner,
                 )
 
diff --git a/src/sentry/migrations/0141_fill_org_slugs.py b/src/sentry/migrations/0141_fill_org_slugs.py
index ab15d66ff7..c4fb30708a 100644
--- a/src/sentry/migrations/0141_fill_org_slugs.py
+++ b/src/sentry/migrations/0141_fill_org_slugs.py
@@ -13,7 +13,7 @@ class Migration(DataMigration):
         Organization = orm['sentry.Organization']
 
         for org in Organization.objects.filter(slug__isnull=True).iterator():
-            org.slug = slugify_instance(org, org.name, RESERVED_ORGANIZATION_SLUGS)
+            slugify_instance(org, org.name, RESERVED_ORGANIZATION_SLUGS)
             org.save()
 
     def backwards(self, orm):
diff --git a/src/sentry/migrations/0143_fill_project_orgs.py b/src/sentry/migrations/0143_fill_project_orgs.py
index c5f5195ca1..d932d114a9 100644
--- a/src/sentry/migrations/0143_fill_project_orgs.py
+++ b/src/sentry/migrations/0143_fill_project_orgs.py
@@ -19,7 +19,7 @@ class Migration(DataMigration):
         for project in queryset:
             project.organization = project.team.organization
             # we also need to update the slug here based on the new constraints
-            project.slug = slugify_instance(project, project.name, organization=project.organization)
+            slugify_instance(project, project.name, organization=project.organization)
             project.save()
 
     def backwards(self, orm):
