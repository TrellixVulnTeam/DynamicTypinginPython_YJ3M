commit 6745ff74ea8c1770cb447b58df10978870316ba1
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Thu Dec 3 17:29:11 2015 -0800

    Better override_options

diff --git a/src/sentry/testutils/helpers/options.py b/src/sentry/testutils/helpers/options.py
new file mode 100644
index 0000000000..579077429e
--- /dev/null
+++ b/src/sentry/testutils/helpers/options.py
@@ -0,0 +1,25 @@
+from __future__ import absolute_import
+
+__all__ = ['override_options']
+
+from contextlib import contextmanager
+from mock import patch
+
+
+@contextmanager
+def override_options(options):
+    """
+    A context manager for overriding specific configuration
+    Options.
+    """
+    from sentry.options import default_manager
+    wrapped = default_manager.store.get
+
+    def new_get(key):
+        try:
+            return options[key.name]
+        except KeyError:
+            return wrapped(key)
+
+    with patch.object(default_manager.store, 'get', side_effect=new_get):
+        yield
