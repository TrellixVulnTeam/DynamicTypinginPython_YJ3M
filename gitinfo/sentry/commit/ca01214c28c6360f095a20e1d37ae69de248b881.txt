commit ca01214c28c6360f095a20e1d37ae69de248b881
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Wed Feb 6 22:50:43 2019 +0100

    fix: Fix delete call in clear_expired_raw_events (#11917)

diff --git a/src/sentry/tasks/reprocessing.py b/src/sentry/tasks/reprocessing.py
index bf38a1ad9d..0406222280 100644
--- a/src/sentry/tasks/reprocessing.py
+++ b/src/sentry/tasks/reprocessing.py
@@ -68,7 +68,10 @@ def clear_expired_raw_events():
             if not result.exists():
                 break
 
-            result.delete()
+            # Django ORM can't do delete with limit
+            model_cls.objects.filter(
+                pk__in=result.values_list('pk')
+            ).delete()
 
     cutoff = timezone.now() - \
         timedelta(days=settings.SENTRY_RAW_EVENT_MAX_AGE_DAYS)
