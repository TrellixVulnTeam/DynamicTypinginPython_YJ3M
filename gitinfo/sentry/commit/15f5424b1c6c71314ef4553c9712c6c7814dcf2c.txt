commit 15f5424b1c6c71314ef4553c9712c6c7814dcf2c
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Oct 4 18:40:07 2012 -0700

    Allow team owners to be edited by admins

diff --git a/src/sentry/web/forms/teams.py b/src/sentry/web/forms/teams.py
index d66466bbd5..835ae7c7a8 100644
--- a/src/sentry/web/forms/teams.py
+++ b/src/sentry/web/forms/teams.py
@@ -43,6 +43,14 @@ class EditTeamForm(forms.ModelForm):
         model = Team
 
 
+class EditTeamAdminForm(EditTeamForm):
+    owner = UserField(required=False)
+
+    class Meta:
+        fields = ('name', 'owner',)
+        model = Team
+
+
 class SelectTeamForm(forms.Form):
     team = forms.ChoiceField(choices=())
 
diff --git a/src/sentry/web/frontend/teams.py b/src/sentry/web/frontend/teams.py
index ff0a6fbc13..256accbf1d 100644
--- a/src/sentry/web/frontend/teams.py
+++ b/src/sentry/web/frontend/teams.py
@@ -17,8 +17,8 @@ from sentry.permissions import can_add_team_member, can_remove_team, can_create_
 from sentry.plugins import plugins
 from sentry.web.decorators import login_required, has_team_access
 from sentry.web.forms.teams import NewTeamForm, NewTeamAdminForm, \
-  EditTeamForm, EditTeamMemberForm, NewTeamMemberForm, InviteTeamMemberForm, \
-  RemoveTeamForm
+  EditTeamForm, EditTeamAdminForm, EditTeamMemberForm, NewTeamMemberForm, \
+  InviteTeamMemberForm, RemoveTeamForm
 from sentry.web.helpers import render_to_response
 
 
@@ -65,7 +65,14 @@ def manage_team(request, team):
     if result is False and not request.user.has_perm('sentry.can_change_team'):
         return HttpResponseRedirect(reverse('sentry'))
 
-    form = EditTeamForm(request.POST or None, instance=team)
+    if request.user.has_perm('sentry.can_add_team'):
+        form_cls = EditTeamAdminForm
+    else:
+        form_cls = EditTeamForm
+
+    form = form_cls(request.POST or None, initial={
+        'owner': team.owner,
+    }, instance=team)
 
     if form.is_valid():
         team = form.save()
