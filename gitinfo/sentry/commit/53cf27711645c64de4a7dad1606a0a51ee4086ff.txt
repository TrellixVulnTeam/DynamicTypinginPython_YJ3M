commit 53cf27711645c64de4a7dad1606a0a51ee4086ff
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jan 26 18:18:25 2015 -0800

    Update in-memory instance of GroupRuleStatus

diff --git a/src/sentry/rules/processor.py b/src/sentry/rules/processor.py
index 78c874817e..b32d344757 100644
--- a/src/sentry/rules/processor.py
+++ b/src/sentry/rules/processor.py
@@ -96,6 +96,7 @@ class RuleProcessor(object):
                               match, rule.id)
             return
 
+        now = timezone.now()
         if passed and rule_status.status == GroupRuleStatus.INACTIVE:
             # we only fire if we're able to say that the state has changed
             GroupRuleStatus.objects.filter(
@@ -103,19 +104,23 @@ class RuleProcessor(object):
                 status=GroupRuleStatus.INACTIVE,
             ).update(
                 status=GroupRuleStatus.ACTIVE,
-                last_active=timezone.now(),
+                last_active=now,
             )
+            rule_status.last_active = now
+            rule_status.status = GroupRuleStatus.ACTIVE
         elif not passed and rule_status.status == GroupRuleStatus.ACTIVE:
             # update the state to suggest this rule can fire again
             GroupRuleStatus.objects.filter(
                 id=rule_status.id,
                 status=GroupRuleStatus.ACTIVE,
             ).update(status=GroupRuleStatus.INACTIVE)
+            rule_status.status = GroupRuleStatus.INACTIVE
         elif passed:
             GroupRuleStatus.objects.filter(
                 id=rule_status.id,
                 status=GroupRuleStatus.ACTIVE,
-            ).update(last_active=timezone.now())
+            ).update(last_active=now)
+            rule_status.last_active = now
 
         if not passed:
             return
