commit 649129f3009fd19483c9f9b2bef4864b518de9dd
Author: evanh <evanh@users.noreply.github.com>
Date:   Fri Feb 7 16:16:21 2020 -0500

    fix(discover2) Ensure percentages make sense in tag map (#16880)
    
    Since we calculate totals for tag top values and totals differently, make sure
    that the percentages never go over 100 in the case where things are slightly off

diff --git a/src/sentry/static/sentry/app/views/eventsV2/tags.tsx b/src/sentry/static/sentry/app/views/eventsV2/tags.tsx
index 430082c061..5cceba7397 100644
--- a/src/sentry/static/sentry/app/views/eventsV2/tags.tsx
+++ b/src/sentry/static/sentry/app/views/eventsV2/tags.tsx
@@ -108,13 +108,18 @@ class Tags extends React.Component<Props, State> {
 
       return segment;
     });
-
+    // Ensure we don't show >100% if there's a slight mismatch between the facets
+    // endpoint and the totals endpoint
+    const maxTotalValues =
+      segments.length > 0
+        ? Math.max(Number(totalValues), segments[0].count)
+        : totalValues;
     return (
       <TagDistributionMeter
         key={tag.key}
         title={tag.key}
         segments={segments}
-        totalValues={Number(totalValues)}
+        totalValues={Number(maxTotalValues)}
         renderLoading={() => <StyledPlaceholder height="16px" />}
         onTagClick={this.onTagClick}
       />
