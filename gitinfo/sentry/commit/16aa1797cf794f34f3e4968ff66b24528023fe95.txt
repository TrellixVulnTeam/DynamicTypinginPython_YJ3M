commit 16aa1797cf794f34f3e4968ff66b24528023fe95
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jul 21 15:30:48 2016 -0700

    Utilize environment tag for attribute
    
    When the environment tag is present and the environment attribute is missing, use it as the value.
    
    /cc @getsentry/infrastructure

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index 04795eb3e2..e32e1ad212 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -301,6 +301,11 @@ class EventManager(object):
 
             data['tags'].append((key, value))
 
+            # XXX(dcramer): many legacy apps are using the environment tag
+            # rather than the key itself
+            if key == 'environment' and not data.get('environment'):
+                data['environment'] = value
+
         if not isinstance(data['extra'], dict):
             # throw it away
             data['extra'] = {}
