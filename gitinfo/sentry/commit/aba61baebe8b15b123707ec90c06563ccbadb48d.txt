commit aba61baebe8b15b123707ec90c06563ccbadb48d
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jan 31 01:37:38 2012 -0800

    More cleanup on various error pages and search

diff --git a/CHANGES b/CHANGES
index 166ba69727..8fff8761b6 100644
--- a/CHANGES
+++ b/CHANGES
@@ -1,3 +1,8 @@
+Version 2.2.1
+-------------
+
+* Cleaned up several pages.
+
 Version 2.2.0
 -------------
 
diff --git a/bootstrap/sentry.less b/bootstrap/sentry.less
index 2752662207..046c14db5a 100644
--- a/bootstrap/sentry.less
+++ b/bootstrap/sentry.less
@@ -593,7 +593,6 @@ dl.flat dd {
     background:-moz-linear-gradient(center top, #FF9797, #FF0000) repeat scroll 0 0 transparent;
     background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#FF9797), to(#FF0000));
 }
-.no-messages { font-size: 1.1em; padding: 10px 0; }
 
 #full-message {
     line-height: 1.5em;
diff --git a/sentry/static/styles/global.css b/sentry/static/styles/global.css
index a871573629..33badf299e 100644
--- a/sentry/static/styles/global.css
+++ b/sentry/static/styles/global.css
@@ -2756,10 +2756,6 @@ dl.flat dd {
   background: -moz-linear-gradient(center top, #ff9797, #ff0000) repeat scroll 0 0 transparent;
   background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#ff9797), to(#ff0000));
 }
-.no-messages {
-  font-size: 1.1em;
-  padding: 10px 0;
-}
 #full-message {
   line-height: 1.5em;
 }
diff --git a/sentry/static/styles/global.min.css b/sentry/static/styles/global.min.css
index 5fc3cfa9f2..c91d523d76 100644
--- a/sentry/static/styles/global.min.css
+++ b/sentry/static/styles/global.min.css
@@ -443,7 +443,6 @@ dl.flat dd{padding-bottom:5px;}
 .level-30 .count{background:#F4B63E;background:-moz-linear-gradient(center top, #f4b63e, #d18a00) repeat scroll 0 0 transparent;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#f4b63e), to(#d18a00));}
 .level-40 .count{background:#CC0000;background:-moz-linear-gradient(center top, #cc0000, #4e0303) repeat scroll 0 0 transparent;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#cc0000), to(#4e0303));}
 .level-50 .count{background:#FF9797;background:-moz-linear-gradient(center top, #ff9797, #ff0000) repeat scroll 0 0 transparent;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#ff9797), to(#ff0000));}
-.no-messages{font-size:1.1em;padding:10px 0;}
 #full-message{line-height:1.5em;}
 table.inline tr{display:inline-block;}
 #popup{background:#fff;padding:10px;margin:10px;}
diff --git a/sentry/templates/sentry/invalid_message_id.html b/sentry/templates/sentry/invalid_message_id.html
index ea0f2894a5..c840b4b95d 100644
--- a/sentry/templates/sentry/invalid_message_id.html
+++ b/sentry/templates/sentry/invalid_message_id.html
@@ -1,11 +1,9 @@
-{% extends "sentry/layout.html" %}
+{% extends "sentry/search.html" %}
 
 {% load i18n %}
 
 {% block title %}{% trans "Search" %} | {{ block.super }}{% endblock %}
 
-{% block heading %}{% trans "Search" %}{% endblock %}
-
 {% block main %}
     <p>{% trans "We were unable to find a message matching the ID you entered." %}</p>
 {% endblock %}
diff --git a/sentry/templates/sentry/login.html b/sentry/templates/sentry/login.html
index f9218ea992..c3fcbd1524 100644
--- a/sentry/templates/sentry/login.html
+++ b/sentry/templates/sentry/login.html
@@ -4,13 +4,14 @@
 
 {% block title %}{% trans "Login" %} | {{ block.super }}{% endblock %}
 
-{% block heading %}{% trans "Login" %}{% endblock %}
-
 {% block search %}{% endblock %}
 
+{% block page_header %}{% endblock %}
+{% block bodyclass %}{% endblock %}
+
 {% block content %}
-    <div class="span12">
-        {% if next %}
+    <section class="body">
+       {% if next %}
             <p class="alert alert-info">{% trans "Please login to continue." %}</p>
         {% endif %}
 
@@ -30,5 +31,5 @@
                 <button type="submit" class="btn primary">{% trans "Login" %}</button>
             </fieldset>
         </form>
-    </div>
+    </section>
 {% endblock %}
diff --git a/sentry/templates/sentry/missing_permissions.html b/sentry/templates/sentry/missing_permissions.html
index 6281e51b5f..4af2c4f4c9 100644
--- a/sentry/templates/sentry/missing_permissions.html
+++ b/sentry/templates/sentry/missing_permissions.html
@@ -4,10 +4,12 @@
 
 {% block title %}{% trans "Forbidden" %} | {{ block.super }}{% endblock %}
 
-{% block heading %}{% trans "Forbidden" %}{% endblock %}
-
-{% block search %}{% endblock %}
+{% block page_header %}
+    <h2>{% trans "Forbidden" %}</h2>
+{% endblock %}
 
-{% block main %}
-    <p>{% trans "You do not have access to this page with your current permissions." %}</p>
+{% block content %}
+    <section class="body">
+        <p>{% trans "You do not have access to this page with your current permissions." %}</p>
+    </section>
 {% endblock %}
diff --git a/sentry/templates/sentry/search.html b/sentry/templates/sentry/search.html
index 352871a149..23d75fdf73 100644
--- a/sentry/templates/sentry/search.html
+++ b/sentry/templates/sentry/search.html
@@ -6,16 +6,18 @@
 {% block heading %}{% trans "Search" %}{% endblock %}
 
 {% block main %}
-    <ul class="btn-toolbar">
-        <li class="dropdown pull-right" data-dropdown="dropdown">
-            <a href="#" class="dropdown-toggle">{% blocktrans with sort_label as label %}Sort by: {{ label }}{% endblocktrans %} <span class="caret"></span></a>
+    {% querystring from request without sort as sort_querystring %}
+
+    <div class="btn-toolbar">
+        <div class="btn-group">
+            <a href="#" class="btn dropdown-toggle" data-toggle="dropdown">{% blocktrans with sort_label as label %}Sort by: {{ label }}{% endblocktrans %} <span class="caret"></span></a>
             <ul class="dropdown-menu">
-                <li{% ifequal sort 'date' %} class="active"{% endifequal %}><a href="?{{ sort_querystring }}">{% trans "Last Seen" %}</a></li>
+                <li{% ifequal sort 'date' %} class="active"{% endifequal %}><a href="?{{ sort_querystring }}&amp;sort=date">{% trans "Last Seen" %}</a></li>
                 <li{% ifequal sort 'score' %} class="active"{% endifequal %}><a href="?{{ sort_querystring }}&amp;sort=score">{% trans "Score" %}</a></li>
                 <li{% ifequal sort 'new' %} class="active"{% endifequal %}><a href="?{{ sort_querystring }}&amp;sort=new">{% trans "First Seen" %}</a></li>
             </ul>
-        </li>
-    </ul>
+        </div>
+    </div>
 
     {% if event_list %}
         {% handle_before_events request event_list %}
@@ -26,7 +28,7 @@
         </ul>
     {% else %}
         <ul class="events" id="event_list">
-            <li class="no-messages" id="no_messages">{% trans "No events match your search query." %}</li>
+            <li class="empty-result" id="no_messages">{% trans "No events match your search query." %}</li>
         </ul>
     {% endif %}
 {% endblock %}
diff --git a/setup.py b/setup.py
index 689dd6eb4c..10a3058b9e 100755
--- a/setup.py
+++ b/setup.py
@@ -45,7 +45,7 @@ install_requires = [
 
 setup(
     name='sentry',
-    version='2.2.0',
+    version='2.2.1',
     author='David Cramer',
     author_email='dcramer@gmail.com',
     url='http://github.com/dcramer/sentry',
