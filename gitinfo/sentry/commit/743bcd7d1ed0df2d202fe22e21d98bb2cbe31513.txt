commit 743bcd7d1ed0df2d202fe22e21d98bb2cbe31513
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Dec 14 12:18:32 2011 -0800

    Mark pk's as safe to ensure they dont add notations when using USE_THOUSAND_SEPARATOR (fixes #280)

diff --git a/sentry/templates/sentry/group/details.html b/sentry/templates/sentry/group/details.html
index a6cf6868e8..90ee604c0f 100644
--- a/sentry/templates/sentry/group/details.html
+++ b/sentry/templates/sentry/group/details.html
@@ -39,7 +39,7 @@
 
 {% block main %}
     <ul class="messages" id="message_list">
-        <li class="{% cycle 'row1' 'row2' %} level-{{ group.level }} active" id="group_{{ group.pk }}" data-sentry-count="{{ group.times_seen }}">
+        <li class="{% cycle 'row1' 'row2' %} level-{{ group.level }} active" id="group_{{ group.pk|safe }}" data-sentry-count="{{ group.times_seen }}">
             <span class="count">{{ group.times_seen|small_count }}</span>
             <h3>{% if group.view %}{{ group.view }}{% else %}{{ group.message_top }}{% endif %}</h3>
             <span class="last_seen" title="{{ group.last_seen }}">{{ group.last_seen|timesince }}</span>
@@ -56,7 +56,7 @@
                 {{ group.error }}
             </p>
             {% if group.status == 0 %}
-                <a href="{% url sentry-ajax %}?op=resolve&amp;gid={{ group.pk }}" class="hidden button button_resolve">&#10003;</a>
+                <a href="{% url sentry-ajax %}?op=resolve&amp;gid={{ group.pk|safe }}" class="hidden button button_resolve">&#10003;</a>
             {% endif %}
         </li>
     </ul>
diff --git a/sentry/templates/sentry/partial/_group.html b/sentry/templates/sentry/partial/_group.html
index 83aee12785..500391ea78 100644
--- a/sentry/templates/sentry/partial/_group.html
+++ b/sentry/templates/sentry/partial/_group.html
@@ -1,6 +1,6 @@
 {% load sentry_helpers %}
 
-<li class="{% cycle 'row1' 'row2' %} level-{{ group.level }}{% if priority %} priority-{{ priority }}{% endif %}" id="group_{{ group.pk }}" data-sentry-count="{{ group.times_seen }}">
+<li class="{% cycle 'row1' 'row2' %} level-{{ group.level }}{% if priority %} priority-{{ priority }}{% endif %}" id="group_{{ group.pk|safe }}" data-sentry-count="{{ group.times_seen }}">
     <span class="count">{{ group.times_seen|small_count }}</span>
     <h3><a href="{% url sentry-group group.pk %}">{% if group.view %}{{ group.view }}{% else %}{{ group.message_top|truncatechars:100 }}{% endif %}</a></h3>
     <span class="last_seen">{{ group.last_seen|timesince }}</span>
@@ -18,6 +18,6 @@
     </p>
     <a href="{% url sentry-group group.pk %}" class="row_link"></a>
     {% if group.status == 0 %}
-        <a href="{% url sentry-ajax %}?op=resolve&amp;gid={{ group.pk }}" onclick="Sentry.stream.resolve({{ group.pk }});return false;" class="button resolve_button hidden">&#10003;</a>
+        <a href="{% url sentry-ajax %}?op=resolve&amp;gid={{ group.pk|safe }}" onclick="Sentry.stream.resolve({{ group.pk|safe }});return false;" class="button resolve_button hidden">&#10003;</a>
     {% endif %}
 </li>
diff --git a/sentry/templates/sentry/partial/_message.html b/sentry/templates/sentry/partial/_message.html
index 5d33d56c66..b76ac916dc 100644
--- a/sentry/templates/sentry/partial/_message.html
+++ b/sentry/templates/sentry/partial/_message.html
@@ -1,6 +1,6 @@
 {% load sentry_helpers %}
 
-<li class="{% cycle 'row1' 'row2' %} level-{{ message.level }}{% if priority %} priority-{{ priority }}{% endif %}" id="message_{{ message.pk }}" data-sentry-count="{{ message.times_seen }}">
+<li class="{% cycle 'row1' 'row2' %} level-{{ message.level }}{% if priority %} priority-{{ priority }}{% endif %}" id="message_{{ message.pk|safe }}" data-sentry-count="{{ message.times_seen }}">
     <h3><a href="{% url sentry-group-message group.pk message.pk %}">
         {{ message.message_top }}
         {% if message.url %}
