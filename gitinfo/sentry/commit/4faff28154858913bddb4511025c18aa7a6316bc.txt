commit 4faff28154858913bddb4511025c18aa7a6316bc
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Wed May 2 11:52:39 2018 -0700

    feat(dashboard): Add empty state if project has no events (#8268)
    
    Adds an empty message over the chart

diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/noEvents.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/noEvents.jsx
new file mode 100644
index 0000000000..7efcbedf0c
--- /dev/null
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/noEvents.jsx
@@ -0,0 +1,46 @@
+import React from 'react';
+import PropTypes from 'prop-types';
+import styled from 'react-emotion';
+import {Flex} from 'grid-emotion';
+
+import Button from 'app/components/buttons/button';
+
+import {t} from 'app/locale';
+
+export default class NoEvents extends React.Component {
+  static propTypes = {
+    projectId: PropTypes.string,
+    orgId: PropTypes.string,
+    platformId: PropTypes.string,
+  };
+  render() {
+    const {orgId, projectId, platformId} = this.props;
+    const link = `/${orgId}/${projectId}/getting-started/${platformId
+      ? platformId + '/'
+      : ''}`;
+
+    return (
+      <Container>
+        <Background align="center" justify="center">
+          <Button size="small" to={link}>
+            {t('Configure project')}
+          </Button>
+        </Background>
+      </Container>
+    );
+  }
+}
+
+const Container = styled.div`
+  position: absolute;
+  top: 0;
+  left: 0;
+  right: 0;
+`;
+
+const Background = styled(Flex)`
+  background-color: rgba(175, 163, 187, 0.2);
+  margin-left: 4px;
+  margin-right: 4px;
+  height: 80px;
+`;
diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
index 0cdcb5ae5a..ffe6731bfa 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
@@ -9,12 +9,13 @@ import {Client} from 'app/api';
 import Link from 'app/components/link';
 import Tooltip from 'app/components/tooltip';
 import {t} from 'app/locale';
-
-import PlatformList from 'app/views/organizationDashboard/platformList';
-import Chart from 'app/views/organizationDashboard/chart';
 import {update} from 'app/actionCreators/projects';
 import overflowEllipsis from 'app/styles/overflowEllipsis';
 
+import PlatformList from './platformList';
+import Chart from './chart';
+import NoEvents from './noEvents';
+
 class ProjectCard extends React.Component {
   static propTypes = {
     project: SentryTypes.Project.isRequired,
@@ -55,13 +56,26 @@ class ProjectCard extends React.Component {
             />
           </Tooltip>
         </Flex>
-        <Chart stats={stats} />
+        <ChartContainer>
+          <Chart stats={stats} noEvents={!project.firstEvent} />
+          {!project.firstEvent && (
+            <NoEvents
+              orgId={params.orgId}
+              projectId={project.slug}
+              platformId={project.platform}
+            />
+          )}
+        </ChartContainer>
         <PlatformList platforms={project.platforms} />
       </StyledProjectCard>
     );
   }
 }
 
+const ChartContainer = styled.div`
+  position: relative;
+`;
+
 const StyledLink = styled(Link)`
   ${overflowEllipsis};
 `;
diff --git a/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap b/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
index bdc9523c55..03083458c1 100644
--- a/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
+++ b/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
@@ -36,7 +36,7 @@ exports[`ProjectCard renders 1`] = `
 >
   <StyledProjectCard>
     <div
-      className="css-18be1td-StyledProjectCard efesc7i1"
+      className="css-18be1td-StyledProjectCard efesc7i2"
     >
       <Flex
         align="center"
@@ -57,17 +57,17 @@ exports[`ProjectCard renders 1`] = `
               to="/org-slug/project-slug/"
             >
               <Link
-                className="css-kor5al-StyledLink efesc7i0"
+                className="css-kor5al-StyledLink efesc7i1"
                 to="/org-slug/project-slug/"
               >
                 <Link
-                  className="css-kor5al-StyledLink efesc7i0"
+                  className="css-kor5al-StyledLink efesc7i1"
                   onlyActiveOnIndex={false}
                   style={Object {}}
                   to="/org-slug/project-slug/"
                 >
                   <a
-                    className="css-kor5al-StyledLink efesc7i0"
+                    className="css-kor5al-StyledLink efesc7i1"
                     onClick={[Function]}
                     style={Object {}}
                   >
@@ -88,7 +88,7 @@ exports[`ProjectCard renders 1`] = `
                 title="Add to bookmarks"
               >
                 <a
-                  className="tip project-select-bookmark icon icon-star-solid css-syj8e8-Star efesc7i2"
+                  className="tip project-select-bookmark icon icon-star-solid css-syj8e8-Star efesc7i3"
                   onClick={[Function]}
                   title="Add to bookmarks"
                 />
@@ -97,186 +97,295 @@ exports[`ProjectCard renders 1`] = `
           </div>
         </Base>
       </Flex>
-      <Chart
-        stats={
-          Array [
-            Array [
-              1525042800,
-              1,
-            ],
-            Array [
-              1525046400,
-              2,
-            ],
-          ]
-        }
-      >
-        <div>
-          <StyledBarChart
-            height={80}
-            label="events"
-            points={
+      <ChartContainer>
+        <div
+          className="css-l3ron9-ChartContainer efesc7i0"
+        >
+          <Chart
+            noEvents={true}
+            stats={
               Array [
-                Object {
-                  "x": 1525042800,
-                  "y": 1,
-                },
-                Object {
-                  "x": 1525046400,
-                  "y": 2,
-                },
+                Array [
+                  1525042800,
+                  1,
+                ],
+                Array [
+                  1525046400,
+                  2,
+                ],
               ]
             }
           >
-            <BarChart
-              className="css-fcxdqz-StyledBarChart e1wib7610"
-              height={80}
-              label="events"
-              points={
-                Array [
-                  Object {
-                    "x": 1525042800,
-                    "y": 1,
-                  },
-                  Object {
-                    "x": 1525046400,
-                    "y": 2,
-                  },
-                ]
-              }
-            >
-              <StackedBarChart
-                barClasses={
-                  Array [
-                    "chart-bar",
-                  ]
-                }
-                className="css-fcxdqz-StyledBarChart e1wib7610"
+            <div>
+              <StyledBarChart
                 height={80}
                 label="events"
-                markers={Array []}
                 points={
                   Array [
                     Object {
                       "x": 1525042800,
-                      "y": Array [
-                        1,
-                      ],
+                      "y": 1,
                     },
                     Object {
                       "x": 1525046400,
-                      "y": Array [
-                        2,
-                      ],
+                      "y": 2,
                     },
                   ]
                 }
-                series={Array []}
-                width={null}
               >
-                <figure
-                  className="css-fcxdqz-StyledBarChart e1wib7610 barchart"
-                  style={
-                    Object {
-                      "height": 80,
-                      "width": null,
-                    }
+                <BarChart
+                  className="css-fcxdqz-StyledBarChart e1wib7610"
+                  height={80}
+                  label="events"
+                  points={
+                    Array [
+                      Object {
+                        "x": 1525042800,
+                        "y": 1,
+                      },
+                      Object {
+                        "x": 1525046400,
+                        "y": 2,
+                      },
+                    ]
                   }
                 >
-                  <span
-                    className="max-y"
-                  >
-                    <count
-                      value={10}
-                    >
-                      <span>
-                        10
-                      </span>
-                    </count>
-                  </span>
-                  <span
-                    className="min-y"
+                  <StackedBarChart
+                    barClasses={
+                      Array [
+                        "chart-bar",
+                      ]
+                    }
+                    className="css-fcxdqz-StyledBarChart e1wib7610"
+                    height={80}
+                    label="events"
+                    markers={Array []}
+                    points={
+                      Array [
+                        Object {
+                          "x": 1525042800,
+                          "y": Array [
+                            1,
+                          ],
+                        },
+                        Object {
+                          "x": 1525046400,
+                          "y": Array [
+                            2,
+                          ],
+                        },
+                      ]
+                    }
+                    series={Array []}
+                    width={null}
                   >
-                    0
-                  </span>
-                  <span>
-                    <Tooltip
-                      key="1525042800"
-                      title="<div style=\\"width:130px\\"><div class=\\"time-label\\"><span>April 29, 2018<br />11:00 PM  &#8594; 11:59 PM</span></div></div><div class=\\"value-label\\">1 events</div>"
-                      tooltipOptions={
+                    <figure
+                      className="css-fcxdqz-StyledBarChart e1wib7610 barchart"
+                      style={
                         Object {
-                          "html": true,
-                          "placement": "bottom",
+                          "height": 80,
+                          "width": null,
                         }
                       }
                     >
-                      <a
-                        className="tip chart-column"
-                        style={
-                          Object {
-                            "height": "100%",
-                            "width": "50%",
-                          }
-                        }
-                        title="<div style=\\"width:130px\\"><div class=\\"time-label\\"><span>April 29, 2018<br />11:00 PM  &#8594; 11:59 PM</span></div></div><div class=\\"value-label\\">1 events</div>"
+                      <span
+                        className="max-y"
                       >
-                        <span
-                          className="chart-bar"
-                          key="0"
-                          style={
+                        <count
+                          value={10}
+                        >
+                          <span>
+                            10
+                          </span>
+                        </count>
+                      </span>
+                      <span
+                        className="min-y"
+                      >
+                        0
+                      </span>
+                      <span>
+                        <Tooltip
+                          key="1525042800"
+                          title="<div style=\\"width:130px\\"><div class=\\"time-label\\"><span>April 29, 2018<br />11:00 PM  &#8594; 11:59 PM</span></div></div><div class=\\"value-label\\">1 events</div>"
+                          tooltipOptions={
                             Object {
-                              "backgroundColor": null,
-                              "bottom": "0%",
-                              "height": "9.9%",
+                              "html": true,
+                              "placement": "bottom",
                             }
                           }
                         >
-                          1
-                        </span>
-                      </a>
-                    </Tooltip>
-                    <Tooltip
-                      key="1525046400"
-                      title="<div style=\\"width:130px\\"><div class=\\"time-label\\"><span>April 30, 2018<br />12:00 AM  &#8594; 12:59 AM</span></div></div><div class=\\"value-label\\">2 events</div>"
-                      tooltipOptions={
-                        Object {
-                          "html": true,
-                          "placement": "bottom",
-                        }
-                      }
-                    >
-                      <a
-                        className="tip chart-column"
-                        style={
-                          Object {
-                            "height": "100%",
-                            "width": "50%",
-                          }
-                        }
-                        title="<div style=\\"width:130px\\"><div class=\\"time-label\\"><span>April 30, 2018<br />12:00 AM  &#8594; 12:59 AM</span></div></div><div class=\\"value-label\\">2 events</div>"
-                      >
-                        <span
-                          className="chart-bar"
-                          key="0"
-                          style={
+                          <a
+                            className="tip chart-column"
+                            style={
+                              Object {
+                                "height": "100%",
+                                "width": "50%",
+                              }
+                            }
+                            title="<div style=\\"width:130px\\"><div class=\\"time-label\\"><span>April 29, 2018<br />11:00 PM  &#8594; 11:59 PM</span></div></div><div class=\\"value-label\\">1 events</div>"
+                          >
+                            <span
+                              className="chart-bar"
+                              key="0"
+                              style={
+                                Object {
+                                  "backgroundColor": null,
+                                  "bottom": "0%",
+                                  "height": "9.9%",
+                                }
+                              }
+                            >
+                              1
+                            </span>
+                          </a>
+                        </Tooltip>
+                        <Tooltip
+                          key="1525046400"
+                          title="<div style=\\"width:130px\\"><div class=\\"time-label\\"><span>April 30, 2018<br />12:00 AM  &#8594; 12:59 AM</span></div></div><div class=\\"value-label\\">2 events</div>"
+                          tooltipOptions={
                             Object {
-                              "backgroundColor": null,
-                              "bottom": "0%",
-                              "height": "19.8%",
+                              "html": true,
+                              "placement": "bottom",
                             }
                           }
                         >
-                          2
-                        </span>
-                      </a>
-                    </Tooltip>
-                  </span>
-                </figure>
-              </StackedBarChart>
-            </BarChart>
-          </StyledBarChart>
+                          <a
+                            className="tip chart-column"
+                            style={
+                              Object {
+                                "height": "100%",
+                                "width": "50%",
+                              }
+                            }
+                            title="<div style=\\"width:130px\\"><div class=\\"time-label\\"><span>April 30, 2018<br />12:00 AM  &#8594; 12:59 AM</span></div></div><div class=\\"value-label\\">2 events</div>"
+                          >
+                            <span
+                              className="chart-bar"
+                              key="0"
+                              style={
+                                Object {
+                                  "backgroundColor": null,
+                                  "bottom": "0%",
+                                  "height": "19.8%",
+                                }
+                              }
+                            >
+                              2
+                            </span>
+                          </a>
+                        </Tooltip>
+                      </span>
+                    </figure>
+                  </StackedBarChart>
+                </BarChart>
+              </StyledBarChart>
+            </div>
+          </Chart>
+          <NoEvents
+            orgId="org-slug"
+            projectId="project-slug"
+          >
+            <Container>
+              <div
+                className="css-1m9okvh-Container eks1zeg0"
+              >
+                <Background
+                  align="center"
+                  justify="center"
+                >
+                  <Base
+                    align="center"
+                    className="css-yrqnia-Background eks1zeg1"
+                    justify="center"
+                  >
+                    <div
+                      className="css-yrqnia-Background eks1zeg1"
+                      is={null}
+                    >
+                      <Button
+                        disabled={false}
+                        size="small"
+                        to="/org-slug/project-slug/getting-started/"
+                      >
+                        <StyledButton
+                          aria-label="Configure project"
+                          disabled={false}
+                          onClick={[Function]}
+                          role="button"
+                          size="small"
+                          to="/org-slug/project-slug/getting-started/"
+                        >
+                          <Component
+                            aria-label="Configure project"
+                            className="css-dvpz5-StyledButton-getColors e17811v30"
+                            disabled={false}
+                            onClick={[Function]}
+                            role="button"
+                            size="small"
+                            to="/org-slug/project-slug/getting-started/"
+                          >
+                            <Link
+                              aria-label="Configure project"
+                              className="css-dvpz5-StyledButton-getColors e17811v30"
+                              disabled={false}
+                              onClick={[Function]}
+                              onlyActiveOnIndex={false}
+                              role="button"
+                              size="small"
+                              style={Object {}}
+                              to="/org-slug/project-slug/getting-started/"
+                            >
+                              <a
+                                aria-label="Configure project"
+                                className="css-dvpz5-StyledButton-getColors e17811v30"
+                                disabled={false}
+                                onClick={[Function]}
+                                role="button"
+                                size="small"
+                                style={Object {}}
+                              >
+                                <ButtonLabel
+                                  size="small"
+                                >
+                                  <Component
+                                    className="css-179w01k-ButtonLabel e17811v31"
+                                    size="small"
+                                  >
+                                    <Flex
+                                      align="center"
+                                      className="css-179w01k-ButtonLabel e17811v31"
+                                      size="small"
+                                    >
+                                      <Base
+                                        align="center"
+                                        className="e17811v31 css-8mahft-ButtonLabel"
+                                        size="small"
+                                      >
+                                        <div
+                                          className="e17811v31 css-8mahft-ButtonLabel"
+                                          is={null}
+                                          size="small"
+                                        >
+                                          Configure project
+                                        </div>
+                                      </Base>
+                                    </Flex>
+                                  </Component>
+                                </ButtonLabel>
+                              </a>
+                            </Link>
+                          </Component>
+                        </StyledButton>
+                      </Button>
+                    </div>
+                  </Base>
+                </Background>
+              </div>
+            </Container>
+          </NoEvents>
         </div>
-      </Chart>
+      </ChartContainer>
       <PlatformList
         platforms={
           Array [
diff --git a/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx b/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
index 5ee68a4abd..12ceb74ad3 100644
--- a/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
+++ b/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
@@ -5,6 +5,7 @@ import {ProjectCard} from 'app/views/organizationDashboard/projectCard';
 
 describe('ProjectCard', function() {
   let wrapper, projectMock;
+
   beforeEach(function() {
     wrapper = mount(
       <ProjectCard
@@ -51,4 +52,23 @@ describe('ProjectCard', function() {
       platformList.find('StyledPlatformIcon.platformicon.platformicon-javascript')
     ).toHaveLength(1);
   });
+
+  it('renders empty state if no event has ever been sent', function() {
+    wrapper = mount(
+      <ProjectCard
+        project={TestStubs.Project({
+          platforms: ['javascript'],
+          firstEvent: null,
+          platform: 'csharp',
+        })}
+        params={{orgId: 'org-slug'}}
+        stats={[]}
+      />,
+      TestStubs.routerContext()
+    );
+
+    expect(wrapper.find('NoEvents')).toHaveLength(1);
+    const button = wrapper.find('Button');
+    expect(button.prop('to')).toBe('/org-slug/project-slug/getting-started/csharp/');
+  });
 });
