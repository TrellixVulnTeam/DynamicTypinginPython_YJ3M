commit bf6ebaef35b9dba6644b42f4fcbc80119dacceb0
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Thu Sep 6 11:51:37 2018 -0700

    fix(charts): Add missing pieCharts method to calc percentages for series (#9614)
    
    This is used to calculate the percentage text for series for use in the Legend.
    ECharts has this info available in tooltips but not the Legend.

diff --git a/src/sentry/static/sentry/app/components/charts/pieChart.jsx b/src/sentry/static/sentry/app/components/charts/pieChart.jsx
index 5953dc58a8..2198379f68 100644
--- a/src/sentry/static/sentry/app/components/charts/pieChart.jsx
+++ b/src/sentry/static/sentry/app/components/charts/pieChart.jsx
@@ -34,15 +34,13 @@ class PieChart extends React.Component {
   // echarts Legend does not have access to percentages (but tooltip does :/)
   getSeriesPercentages = series => {
     const total = series.data.reduce((acc, {value}) => acc + value, 0);
-    return series.data
-      .map(({name, value}) => [name, Math.round(value / total * 10000) / 100])
-      .reduce(
-        (acc, [name, value]) => ({
-          ...acc,
-          [name]: value,
-        }),
-        {}
-      );
+    return series.data.reduce(
+      (acc, {name, value}) => ({
+        ...acc,
+        [name]: Math.round(value / total * 10000) / 100,
+      }),
+      {}
+    );
   };
 
   // Select a series to highlight (e.g. shows details of series)
@@ -68,6 +66,20 @@ class PieChart extends React.Component {
     });
   };
 
+  // echarts Legend does not have access to percentages (but tooltip does :/)
+  getSeriesPercentages = series => {
+    const total = series.data.reduce((acc, {value}) => acc + value, 0);
+    return series.data
+      .map(({name, value}) => [name, Math.round(value / total * 10000) / 100])
+      .reduce(
+        (acc, [name, value]) => ({
+          ...acc,
+          [name]: value,
+        }),
+        {}
+      );
+  };
+
   render() {
     const {series, ...props} = this.props;
     if (!series || !series.length) return null;
