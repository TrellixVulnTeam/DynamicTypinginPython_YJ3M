commit 44f4b85ad71bffc68763375cb49de92aec245066
Author: Matej Minar <matej.minar@sentry.io>
Date:   Thu May 14 11:06:09 2020 +0200

    feat(ui): Add link to new issues from release card (#18817)

diff --git a/src/sentry/static/sentry/app/views/releasesV2/list/releaseCard.tsx b/src/sentry/static/sentry/app/views/releasesV2/list/releaseCard.tsx
index f0ea016787..8083ed2647 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/list/releaseCard.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/list/releaseCard.tsx
@@ -14,9 +14,13 @@ import {AvatarListWrapper} from 'app/components/avatar/avatarList';
 import TextOverflow from 'app/components/textOverflow';
 import overflowEllipsis from 'app/styles/overflowEllipsis';
 import Tag from 'app/views/settings/components/tag';
+import Link from 'app/components/links/link';
+import Feature from 'app/components/acl/feature';
+import Tooltip from 'app/components/tooltip';
 
 import ReleaseHealth from './releaseHealth';
 import NotAvailable from './notAvailable';
+import {getReleaseNewIssuesUrl} from '../utils';
 
 type Props = {
   release: Release;
@@ -27,6 +31,7 @@ type Props = {
 
 const ReleaseCard = ({release, orgSlug, location, reloading}: Props) => {
   const {version, commitCount, lastDeploy, authors, dateCreated} = release;
+
   return (
     <StyledPanel reloading={reloading ? 1 : 0}>
       <PanelBody>
@@ -86,7 +91,19 @@ const ReleaseCard = ({release, orgSlug, location, reloading}: Props) => {
             </CommitsColumn>
 
             <NewIssuesColumn>
-              <Count value={release.newGroups || 0} />
+              <Feature features={['global-views']}>
+                {({hasFeature}) =>
+                  hasFeature && release.newGroups > 0 ? (
+                    <Tooltip title={t('Open in Issues')}>
+                      <Link to={getReleaseNewIssuesUrl(orgSlug, null, version)}>
+                        <Count value={release.newGroups || 0} />
+                      </Link>
+                    </Tooltip>
+                  ) : (
+                    <Count value={release.newGroups || 0} />
+                  )
+                }
+              </Feature>
             </NewIssuesColumn>
           </Layout>
         </StyledPanelItem>
diff --git a/src/sentry/static/sentry/app/views/releasesV2/list/releaseHealth.tsx b/src/sentry/static/sentry/app/views/releasesV2/list/releaseHealth.tsx
index 5b10bbf98d..723e088d3a 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/list/releaseHealth.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/list/releaseHealth.tsx
@@ -16,12 +16,14 @@ import Tooltip from 'app/components/tooltip';
 import ProjectBadge from 'app/components/idBadge/projectBadge';
 import TextOverflow from 'app/components/textOverflow';
 import ClippedBox from 'app/components/clippedBox';
+import Link from 'app/components/links/link';
 
 import HealthStatsChart from './healthStatsChart';
 import {
   displayCrashFreePercent,
   convertAdoptionToProgress,
   getCrashFreePercentColor,
+  getReleaseNewIssuesUrl,
 } from '../utils';
 import HealthStatsSubject, {StatsSubject} from './healthStatsSubject';
 import HealthStatsPeriod, {StatsPeriod} from './healthStatsPeriod';
@@ -186,7 +188,21 @@ const ReleaseHealth = ({release, orgSlug, location}: Props) => {
                     </CrashesColumn>
 
                     <NewIssuesColumn>
-                      <Count value={newGroups || 0} />
+                      {newGroups > 0 ? (
+                        <Tooltip title={t('Open in Issues')}>
+                          <Link
+                            to={getReleaseNewIssuesUrl(
+                              orgSlug,
+                              project.id,
+                              release.version
+                            )}
+                          >
+                            <Count value={newGroups || 0} />
+                          </Link>
+                        </Tooltip>
+                      ) : (
+                        <Count value={newGroups || 0} />
+                      )}
                     </NewIssuesColumn>
                   </Layout>
                 </StyledPanelItem>
diff --git a/src/sentry/static/sentry/app/views/releasesV2/utils/index.tsx b/src/sentry/static/sentry/app/views/releasesV2/utils/index.tsx
index 3bb41f1d44..3bcdfc7c04 100644
--- a/src/sentry/static/sentry/app/views/releasesV2/utils/index.tsx
+++ b/src/sentry/static/sentry/app/views/releasesV2/utils/index.tsx
@@ -6,6 +6,7 @@ import OrganizationStore from 'app/stores/organizationStore';
 import {trackAnalyticsEvent} from 'app/utils/analytics';
 import {Client} from 'app/api';
 import ProgressRing from 'app/components/progressRing';
+import {stringifyQueryObject} from 'app/utils/tokenizeSearch';
 
 const CRASH_FREE_DANGER_THRESHOLD = 98;
 const CRASH_FREE_WARNING_THRESHOLD = 99.5;
@@ -100,3 +101,20 @@ export const getCrashFreePercentColor: ProgressRingColorFn = ({percent, theme})
 
   return theme.green;
 };
+
+export const getReleaseNewIssuesUrl = (
+  orgSlug: string,
+  projectId: string | number | null,
+  version: string
+) => {
+  return {
+    pathname: `/organizations/${orgSlug}/issues/`,
+    query: {
+      project: projectId,
+      query: stringifyQueryObject({
+        query: [],
+        'first-release': [version],
+      }),
+    },
+  };
+};
