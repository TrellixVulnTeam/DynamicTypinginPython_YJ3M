commit 5e69fd7bb377bb703a2ad5d040d89d99ff88618b
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jan 28 14:35:02 2013 -0800

    Allow team slugs to be changed by owners

diff --git a/src/sentry/web/forms/teams.py b/src/sentry/web/forms/teams.py
index 63ba000caf..28fed8a883 100644
--- a/src/sentry/web/forms/teams.py
+++ b/src/sentry/web/forms/teams.py
@@ -43,7 +43,7 @@ class EditTeamAdminForm(EditTeamForm):
     owner = UserField(required=True)
 
     class Meta:
-        fields = ('name', 'owner',)
+        fields = ('name', 'slug', 'owner',)
         model = Team
 
 
diff --git a/src/sentry/web/frontend/teams.py b/src/sentry/web/frontend/teams.py
index 1876118b8c..44ec7ed11b 100644
--- a/src/sentry/web/frontend/teams.py
+++ b/src/sentry/web/frontend/teams.py
@@ -91,7 +91,7 @@ def manage_team(request, team):
         messages.add_message(request, messages.SUCCESS,
             _('Changes to your team were saved.'))
 
-        return HttpResponseRedirect(request.path)
+        return HttpResponseRedirect(reverse('sentry-manage-team', args=[team.slug]))
 
     context = csrf(request)
     context.update({
diff --git a/tests/sentry/web/frontend/teams/tests.py b/tests/sentry/web/frontend/teams/tests.py
index c9bbe04a30..0643718e4c 100644
--- a/tests/sentry/web/frontend/teams/tests.py
+++ b/tests/sentry/web/frontend/teams/tests.py
@@ -112,6 +112,7 @@ class ManageTeamTest(BaseTeamTest):
         path = reverse('sentry-manage-team', args=[self.team.slug])
         resp = self.client.post(path, {
             'name': 'bar',
+            'slug': self.team.slug,
             'owner': self.team.owner.username,
         })
         self.assertNotEquals(resp.status_code, 200)
@@ -124,6 +125,7 @@ class ManageTeamTest(BaseTeamTest):
         path = reverse('sentry-manage-team', args=[self.team.slug])
         resp = self.client.post(path, {
             'name': self.team.name,
+            'slug': self.team.slug,
             'owner': self.user2.username,
         })
         self.assertNotEquals(resp.status_code, 200)
