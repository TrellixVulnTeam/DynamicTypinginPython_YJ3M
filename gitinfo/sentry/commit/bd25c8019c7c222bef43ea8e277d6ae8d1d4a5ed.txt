commit bd25c8019c7c222bef43ea8e277d6ae8d1d4a5ed
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Mon Apr 3 16:08:39 2017 -0700

    use repo.config['name'] instead of maybe arbitrary repo.name (#5191)
    
    * use repo.config['name'] instead of maybe arbitrary repo.name
    
    * pass repo model

diff --git a/src/sentry/models/release.py b/src/sentry/models/release.py
index 93dd355343..de936c686c 100644
--- a/src/sentry/models/release.py
+++ b/src/sentry/models/release.py
@@ -279,7 +279,7 @@ class Release(Model):
                 provider = provider_cls(id=repo.provider)
                 try:
                     repo_commits = provider.compare_commits(
-                        repo.name, start_sha, end_sha, actor=user
+                        repo, start_sha, end_sha, actor=user
                     )
                 except NotImplementedError:
                     pass
diff --git a/src/sentry/plugins/providers/dummy/repository.py b/src/sentry/plugins/providers/dummy/repository.py
index 604a735e9c..0b2af3d10b 100644
--- a/src/sentry/plugins/providers/dummy/repository.py
+++ b/src/sentry/plugins/providers/dummy/repository.py
@@ -24,11 +24,11 @@ class DummyRepositoryProvider(RepositoryProvider):
     def compare_commits(self, repo, start_sha, end_sha, actor=None):
         return [{
             'id': '62de626b7c7cfb8e77efb4273b1a3df4123e6216',
-            'repository': repo,
+            'repository': repo.name,
         }, {
             'id': '58de626b7c7cfb8e77efb4273b1a3df4123e6345',
-            'repository': repo,
+            'repository': repo.name,
         }, {
             'id': end_sha,
-            'repository': repo,
+            'repository': repo.name,
         }]
