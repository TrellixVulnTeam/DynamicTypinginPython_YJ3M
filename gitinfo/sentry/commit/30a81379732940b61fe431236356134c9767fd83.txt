commit 30a81379732940b61fe431236356134c9767fd83
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Mon Apr 30 18:01:59 2018 -0700

    feat(dashboard): Add platform list (#8251)

diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/platformList.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/platformList.jsx
new file mode 100644
index 0000000000..ae4e12a10f
--- /dev/null
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/platformList.jsx
@@ -0,0 +1,76 @@
+import React from 'react';
+import PropTypes from 'prop-types';
+import styled from 'react-emotion';
+import {Flex} from 'grid-emotion';
+import {t} from 'app/locale';
+
+export default class PlatformList extends React.Component {
+  static propTypes = {
+    platforms: PropTypes.arrayOf(PropTypes.string),
+  };
+
+  getIcon(platform) {
+    return (
+      <StyledPlatformIconWrapper key={platform} className={platform}>
+        <StyledPlatformIcon className={`platformicon platformicon-${platform}`} />
+      </StyledPlatformIconWrapper>
+    );
+  }
+
+  getIcons(platforms) {
+    return (
+      <Flex direction="row-reverse" p={2}>
+        {platforms.map(this.getIcon)}
+      </Flex>
+    );
+  }
+  render() {
+    const {platforms} = this.props;
+
+    if (!platforms.length)
+      return (
+        <NoPlatforms align="center" p={2}>
+          {t('No platforms yet')}
+        </NoPlatforms>
+      );
+
+    return (
+      <Flex align="center">
+        <div className="org-dashboard-platform-list">{this.getIcons(platforms)}</div>
+        <PlatformText>
+          {platforms
+            .slice()
+            .reverse()
+            .join(', ')}
+        </PlatformText>
+      </Flex>
+    );
+  }
+}
+
+const StyledPlatformIconWrapper = styled.span`
+  display: block;
+  margin-right: -14px;
+  margin-left: -2px;
+`;
+
+const StyledPlatformIcon = styled.span`
+  display: block;
+  color: white;
+  height: 34px;
+  width: 34px;
+  font-size: 22px;
+  border-radius: 4px;
+  border: 2px solid white;
+  padding: 4px;
+`;
+
+const PlatformText = styled.div`
+  color: ${p => p.theme.gray2};
+  font-size: 13px;
+`;
+
+const NoPlatforms = styled(Flex)`
+  color: ${p => p.theme.gray2};
+  height: 70px;
+`;
diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
index 7f8e0ebef4..7867d4a1cf 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
@@ -6,11 +6,10 @@ import {Flex} from 'grid-emotion';
 
 import SentryTypes from 'app/proptypes';
 import Link from 'app/components/link';
-
 import {Client} from 'app/api';
-
 import {update} from 'app/actionCreators/projects';
 import overflowEllipsis from 'app/styles/overflowEllipsis';
+import PlatformList from 'app/views/organizationDashboard/platformList';
 
 class ProjectCard extends React.Component {
   static propTypes = {
@@ -45,6 +44,7 @@ class ProjectCard extends React.Component {
             onClick={this.toggleProjectBookmark}
           />
         </Flex>
+        <PlatformList platforms={project.platforms} />
       </StyledProjectCard>
     );
   }
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index e65900ed03..4910c546ef 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -2950,7 +2950,8 @@ ul.tag-list {
 }
 
 .client-platform-list,
-.client-platform {
+.client-platform,
+.org-dashboard-platform-list {
   li,
   span {
     &.python .platformicon {
diff --git a/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap b/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
index ea8d7a463a..416e7bb8b9 100644
--- a/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
+++ b/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
@@ -14,6 +14,9 @@ exports[`ProjectCard renders 1`] = `
       "isBookmarked": false,
       "isMember": true,
       "name": "Project Name",
+      "platforms": Array [
+        "javascript",
+      ],
       "slug": "project-slug",
       "teams": Array [],
     }
@@ -76,6 +79,71 @@ exports[`ProjectCard renders 1`] = `
           </div>
         </Base>
       </Flex>
+      <PlatformList
+        platforms={
+          Array [
+            "javascript",
+          ]
+        }
+      >
+        <Flex
+          align="center"
+        >
+          <Base
+            align="center"
+            className="css-5ipae5"
+          >
+            <div
+              className="css-5ipae5"
+              is={null}
+            >
+              <div
+                className="org-dashboard-platform-list"
+              >
+                <Flex
+                  direction="row-reverse"
+                  p={2}
+                >
+                  <Base
+                    className="css-1tznizk"
+                    direction="row-reverse"
+                    p={2}
+                  >
+                    <div
+                      className="css-1tznizk"
+                      is={null}
+                    >
+                      <StyledPlatformIconWrapper
+                        className="javascript"
+                        key="javascript"
+                      >
+                        <span
+                          className="javascript css-128o7xp-StyledPlatformIconWrapper e1mca4c60"
+                        >
+                          <StyledPlatformIcon
+                            className="platformicon platformicon-javascript"
+                          >
+                            <span
+                              className="platformicon platformicon-javascript css-hf0kxf-StyledPlatformIcon e1mca4c61"
+                            />
+                          </StyledPlatformIcon>
+                        </span>
+                      </StyledPlatformIconWrapper>
+                    </div>
+                  </Base>
+                </Flex>
+              </div>
+              <PlatformText>
+                <div
+                  className="css-12aj0sd-PlatformText e1mca4c62"
+                >
+                  javascript
+                </div>
+              </PlatformText>
+            </div>
+          </Base>
+        </Flex>
+      </PlatformList>
     </div>
   </StyledProjectCard>
 </ProjectCard>
diff --git a/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx b/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
index 7efecdbc90..4b3f08a0c3 100644
--- a/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
+++ b/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
@@ -7,14 +7,17 @@ describe('ProjectCard', function() {
   let wrapper, projectMock;
   beforeEach(function() {
     wrapper = mount(
-      <ProjectCard project={TestStubs.Project()} params={{orgId: 'org-slug'}} />,
+      <ProjectCard
+        project={TestStubs.Project({platforms: ['javascript']})}
+        params={{orgId: 'org-slug'}}
+      />,
       TestStubs.routerContext()
     );
 
     projectMock = MockApiClient.addMockResponse({
       url: '/projects/org-slug/project-slug/',
       method: 'PUT',
-      data: TestStubs.Project({isBookmarked: false}),
+      data: TestStubs.Project({isBookmarked: false, platforms: ['javascript']}),
     });
   });
 
@@ -40,4 +43,11 @@ describe('ProjectCard', function() {
       })
     );
   });
+
+  it('renders with one platform', function() {
+    const platformList = wrapper.find('PlatformList');
+    expect(
+      platformList.find('StyledPlatformIcon.platformicon.platformicon-javascript')
+    ).toHaveLength(1);
+  });
 });
