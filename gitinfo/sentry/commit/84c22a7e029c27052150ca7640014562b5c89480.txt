commit 84c22a7e029c27052150ca7640014562b5c89480
Author: James Cunningham <cunninghamjt09@gmail.com>
Date:   Tue May 31 12:23:13 2016 -0700

    Add encoding to human log lines. (#3365)
    
    * Add encoding to human log lines.
    
    * just go with unicode formatting for now

diff --git a/src/sentry/logging/audit.py b/src/sentry/logging/audit.py
index fbb5a440a9..df68542984 100644
--- a/src/sentry/logging/audit.py
+++ b/src/sentry/logging/audit.py
@@ -50,7 +50,7 @@ def log_entry(entry, logger=logger):
     fmt = options.get('system.logging-format')
     if fmt == 'human':
         log(
-            "[Audit Log] [{org}] {user} {note}".format(
+            u'[Audit Log] [{org}] {user} {note}'.format(
                 org=entry.organization_id,
                 user=entry.actor_label,
                 note=entry.get_note(),
diff --git a/tests/sentry/logging/test_audit.py b/tests/sentry/logging/test_audit.py
index 3b15bac3ef..ff216403c8 100644
--- a/tests/sentry/logging/test_audit.py
+++ b/tests/sentry/logging/test_audit.py
@@ -31,6 +31,8 @@ class AuditLogTestEntryCase(TestCase):
     def test_log_entry_human(self, mock_logger):
         self.login_as(user=self.user)
         org = self.create_organization(owner=self.user, name='sentry')
+        self.user.username = u'\u0420'
+        self.user.save()
         entry = AuditLogEntry.objects.create(
             organization=org,
             event=AuditLogEntryEvent.ORG_EDIT,
@@ -43,7 +45,7 @@ class AuditLogTestEntryCase(TestCase):
             mock_logger.info.assert_called_with(
                 '[Audit Log] [{org_id}] {actor_label} {note}'.format(
                     org_id=entry.organization_id,
-                    actor_label=entry.actor_label,
+                    actor_label='\xd0\xa0',  # Make sure we encode correctly.
                     note=entry.get_note()
                 )
             )
