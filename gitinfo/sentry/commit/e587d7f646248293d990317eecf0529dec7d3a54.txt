commit e587d7f646248293d990317eecf0529dec7d3a54
Author: Stephen Cefali <scefali@sentry.io>
Date:   Wed Apr 1 11:11:13 2020 -0700

    add message about enabling 3rd party cookies for Jira install (#18010)

diff --git a/src/sentry/integrations/jira/configure.py b/src/sentry/integrations/jira/configure.py
index b67fbf6d43..a48d5fb809 100644
--- a/src/sentry/integrations/jira/configure.py
+++ b/src/sentry/integrations/jira/configure.py
@@ -1,5 +1,7 @@
 from __future__ import absolute_import
 
+
+from ua_parser import user_agent_parser
 from jwt import ExpiredSignatureError
 
 from django import forms
@@ -56,8 +58,18 @@ class JiraConfigureView(View):
             return self.get_response({"refresh_required": True})
 
         if not request.user.is_authenticated():
+            parsed_user_agent = user_agent_parser.ParseUserAgent(
+                request.META.get("HTTP_USER_AGENT", "")
+            )
+            # not enabling cross site cookies seems to be a common problem with Safari
+            # as a result, there is a Safari specific link to instructions when is_safari=true
+            is_safari = parsed_user_agent.get("family") == "Safari"
             return self.get_response(
-                {"login_required": True, "login_url": absolute_uri(reverse("sentry-login"))}
+                {
+                    "login_required": True,
+                    "is_safari": is_safari,
+                    "login_url": absolute_uri(reverse("sentry-login")),
+                }
             )
 
         organizations = list(
diff --git a/src/sentry/templates/sentry/integrations/jira-config.html b/src/sentry/templates/sentry/integrations/jira-config.html
index 14468e4b78..8d40e14ff9 100644
--- a/src/sentry/templates/sentry/integrations/jira-config.html
+++ b/src/sentry/templates/sentry/integrations/jira-config.html
@@ -37,7 +37,12 @@
     <h2>Sentry Integration Configuration</h2>
     {% if login_required %}
       <div class="aui-message aui-message-info">
-        <p>Please login to your Sentry account to access the Sentry Add-on configuration</p>
+        <p>Please login to your Sentry account to access the Sentry Add-on configuration.</p>
+        {% if is_safari %}
+          <p>You may also need to <a href="https://www.whatismybrowser.com/guides/how-to-enable-cookies/safari"  target="_blank">enable 3rd-party cookies in your browser.</a></p>
+        {% else %}
+          <p>You may also need to enable 3rd-party cookies in your browser.</p>
+        {% endif %}
         <p>You must disable your ad-blocker to install this integration, as it relies on 3rd-party cookies.</p>
       </div>
       <div class="signin">
