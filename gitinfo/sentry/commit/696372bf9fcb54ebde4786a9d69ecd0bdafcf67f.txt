commit 696372bf9fcb54ebde4786a9d69ecd0bdafcf67f
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Feb 6 14:41:35 2013 -0800

    Improve how we collapse/expand hidden context in various places

diff --git a/.gitignore b/.gitignore
index 7e169ae627..2dd9273731 100644
--- a/.gitignore
+++ b/.gitignore
@@ -16,4 +16,4 @@ pip-log.txt
 /docs/html
 /docs/doctrees
 example/db.sqlite
-/src/sentry/static/
\ No newline at end of file
+/src/sentry/static/CACHE/
\ No newline at end of file
diff --git a/src/sentry/interfaces.py b/src/sentry/interfaces.py
index 065be08ed4..15282ab047 100644
--- a/src/sentry/interfaces.py
+++ b/src/sentry/interfaces.py
@@ -689,11 +689,10 @@ class Http(Interface):
 
     def to_html(self, event, is_public=False, **kwargs):
         data = self.data
-        data_is_dict = False
         headers_is_dict, headers = self._to_dict(self.headers)
 
         if headers_is_dict and headers.get('Content-Type') == 'application/x-www-form-urlencoded':
-            data_is_dict, data = self._to_dict(data)
+            _, data = self._to_dict(data)
 
         context = {
             'is_public': is_public,
@@ -702,18 +701,15 @@ class Http(Interface):
             'url': self.url,
             'method': self.method,
             'data': data,
-            'data_is_dict': data_is_dict,
             'query_string': self.query_string,
             'headers': self.headers,
-            'headers_is_dict': headers_is_dict,
         }
         if not is_public:
             # It's kind of silly we store this twice
-            cookies_is_dict, cookies = self._to_dict(self.cookies)
+            _, cookies = self._to_dict(self.cookies)
 
             context.update({
                 'cookies': cookies,
-                'cookies_is_dict': cookies_is_dict,
                 'env': self.env,
             })
 
diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index e705b80c19..ab06513f33 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -1318,35 +1318,6 @@ ol.context-line {
   }
 }
 
-// Vars display
-table.vars {
-
-  &.closed {
-    display: none;
-  }
-
-  td, th {
-    border: 0;
-  }
-}
-  
-td table.vars {
-  margin-bottom: 0;
-}
-
-
-td.code {
-  overflow: hidden;
-
-  > pre {
-    background-color: inherit;
-    color: rgba(0,0,0,.75);
-    padding: 1px 3px;
-    border: 0;
-    margin-bottom: 0;
-  }
-}
-
 // Generic module stuff
 
 .module {
@@ -1843,21 +1814,48 @@ section.body {
 }
 
 
-
-.table {
+table.table {
   th {
     vertical-align: top;
   }
   td {
     vertical-align: middle;
   }
+}
+
+table.table, table.vars {
+  &.closed {
+    display: none;
+  }
 
   th, td {
     border: none;
+    padding: 5px 8px;
   }
 
-  td.values {
-    padding: 0;
+  td.values, td.code {
+    overflow: hidden;
+
+    > pre {
+      background-color: inherit;
+      color: rgba(0,0,0,.75);
+      padding: 1px 3px;
+      border: 0;
+      margin-bottom: 0;
+    }
+  }
+
+}
+
+table.vars {
+  td, th {
+    border: 0;
+    vertical-align: top;
+  }
+  td table {
+    border-top: 0;
+    margin-top: -5px;
+    margin-bottom: 5px;
   }
 }
 
@@ -1865,9 +1863,13 @@ section.body {
   border-top: 2px solid #F4F6F9;
 
   tbody tr:nth-child(odd) td,
-  .table-striped tbody tr:nth-child(odd) th {
+  tbody tr:nth-child(odd) th {
     background-color: #F4F6F9;
   }
+  tbody tr:nth-child(even) td,
+  tbody tr:nth-child(even) th {
+    background-color: #fff;
+  }
 }
 
 .nav-tabs {
@@ -1936,8 +1938,13 @@ section.body {
   }
 }
 
-
 .toggle-expand {
-  display: block;
-  padding: 8px;
+  padding: 0 !important;
+  a {
+    display: block;
+    text-align: center;
+    padding: 3px 5px;
+    font-size: 0.9em;
+    background: #dee3e9;
+  }
 }
\ No newline at end of file
diff --git a/src/sentry/static/sentry/scripts/global.min.js b/src/sentry/static/sentry/scripts/global.min.js
index 9e29dc23ba..55d1b272bd 100644
--- a/src/sentry/static/sentry/scripts/global.min.js
+++ b/src/sentry/static/sentry/scripts/global.min.js
@@ -1,2 +1,2 @@
-app=window.app={config:{},templates:{},utils:{}};(function(app,Backbone){"use strict";app.models={};app.models.Group=Backbone.Model.extend({defaults:{tags:[],versions:[],isBookmarked:false,historicalData:[]}});app.models.User=Backbone.Model.extend({defaults:{}})})(app,Backbone);(function(app){"use strict";app.templates={group:""+'<div class="count" data-count="<%= app.utils.formatNumber(count) %>"><span title="<%= count %>"><%= app.utils.formatNumber(count) %></span></div>'+'<div class="details">'+'<h3><a href="<%= permalink %>"><%= title %></a></h3>'+'<p class="message">'+"<%= message %>"+"</p>"+'<div class="meta">'+'<span class="last-seen pretty-date" title="<%= lastSeen %>"><%= app.utils.prettyDate(lastSeen) %></span>'+"<% if (timeSpent) { %>"+'<span class="time-spent"><%= Math.round(timeSpent) %>ms</span>'+"<% } %>"+'<span class="tag tag-project"><%= project.name %></span>'+'<span class="tag tag-logger"><%= logger %></span>'+"<% _.each(versions, function(version){ %> "+'<span class="tag tag-version"><%= version %></span>'+"<% }) %>"+"<% _.each(tags, function(tag){ %> "+'<span class="tag"><%= tag %></span>'+"<% }) %>"+"</div>"+'<span class="sparkline"></span>'+'<ul class="actions">'+"<% if (canResolve) { %>"+"<li>"+'<a href="#"<% if (!isResolved) { %> data-action="resolve" title="Mark as Resolved"<% } %> >'+'<i aria-hidden="true" class="icon-checkmark"></i>'+"</a>"+"</li>"+"<li>"+'<a href="#" data-action="bookmark" class="bookmark<% if (isBookmarked) { %> checked<% } %>" title="Bookmark">'+'<i aria-hidden="true" class="icon-star"></i>'+"</a>"+"</li>"+"<% } %>"+"</ul>"+"</div>"+"</script>"}})(app);(function(app,jQuery){"use strict";var $=jQuery;var time_formats=[[60,"just now","just now"],[120,"1 minute ago","1 minute from now"],[3600,"minutes",60],[7200,"1 hour ago","1 hour from now"],[86400,"hours",3600],[172800,"yesterday","tomorrow"],[604800,"days",86400],[1209600,"last week","next week"],[2419200,"weeks",604800],[4838400,"last month","next month"],[29030400,"months",2419200],[58060800,"last year","next year"],[290304e4,"years",29030400],[580608e4,"last century","next century"],[580608e5,"centuries",290304e4]];var number_formats=[[1e9,"b"],[1e6,"m"],[1e3,"k"]];app.utils={getQueryParams:function(){var vars={},href=window.location.href,hashes,hash;if(href.indexOf("?")==-1)return vars;hashes=href.slice(href.indexOf("?")+1,href.indexOf("#")!=-1?href.indexOf("#"):href.length).split("&");$.each(hashes,function(_,chunk){hash=chunk.split("=");if(!hash[0]&&!hash[1])return;vars[hash[0]]=hash[1]?decodeURIComponent(hash[1]).replace(/\+/," "):""});return vars},floatFormat:function(number,places){var multi=Math.pow(10,places);return parseInt(number*multi,10)/multi},formatNumber:function(number){var b,x,y,o,p;number=parseInt(number,10);for(var i=0;b=number_formats[i];i++){x=b[0];y=b[1];o=Math.floor(number/x);p=number%x;if(o>0){if(o/10>1||!p)return""+o+y;return""+this.floatFormat(number/x,1)+y}}return""+number},prettyDate:function(date_str){var time=Date.parse(date_str);var now=new Date;var now_utc=Date.UTC(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate(),now.getUTCHours(),now.getUTCMinutes(),now.getUTCSeconds());var token="ago";var seconds=(now_utc-time)/1e3;var list_choice=1;if(seconds<0){seconds=Math.abs(seconds);token="from now";list_choice=2}for(var i=0,format;format=time_formats[i];i++){if(seconds<format[0]){if(typeof format[2]=="string")return format[list_choice];else return Math.floor(seconds/format[2])+" "+format[1]+" "+token}}return time},slugify:function(str){str=str.replace(/^\s+|\s+$/g,"");str=str.toLowerCase();var from="àáäâèéëêìíïîòóöôùúüûñç·/_,:;";var to="aaaaeeeeiiiioooouuuunc------";for(var i=0,l=from.length;i<l;i++){str=str.replace(new RegExp(from.charAt(i),"g"),to.charAt(i))}str=str.replace(/[^a-z0-9\s\-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");return str}};$(function(){$(".body select, .toolbar select, .project-controls select").each(function(){var $this=$(this),options={width:"element",allowClear:false};if($this.attr("data-allowClear")){options.allowClear=$this.attr("data-allowClear")}$this.select2(options)});setInterval(function(){$(".pretty-date").each(function(_,el){var $el=$(el);var title=$el.attr("title");if(title){var date=app.utils.prettyDate(title);if(date){$el.text(date)}}})},5e3)})})(app,jQuery);(function(Date,undefined){"use strict";var origParse=Date.parse,numericKeys=[1,4,5,6,7,10,11];Date.parse=function(date){var timestamp,struct,minutesOffset=0;if(struct=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(date)){for(var i=0,k;k=numericKeys[i];++i){struct[k]=+struct[k]||0}struct[2]=(+struct[2]||1)-1;struct[3]=+struct[3]||1;if(struct[8]!=="Z"&&struct[9]!==undefined){minutesOffset=struct[10]*60+struct[11];if(struct[9]==="+"){minutesOffset=0-minutesOffset}}timestamp=Date.UTC(struct[1],struct[2],struct[3],struct[4],struct[5]+minutesOffset,struct[6],struct[7])}else{timestamp=origParse?origParse(date):NaN}return timestamp}})(Date);(function(app,Backbone){"use strict";app.ScoredList=Backbone.Collection.extend({comparator:function(member){return-member.get("score")}})})(app,Backbone);(function(app,Backbone,jQuery,_){"use strict";var $=jQuery;app.charts={render:function(el,options){var $el=$("#chart");var url=$el.attr("data-api-url");var title=$(el).attr("data-title");var $spark=$el.find(".sparkline");$spark.height($el.height());$.ajax({url:$el.attr("data-api-url"),type:"get",dataType:"json",data:{days:$el.attr("data-days")||7,gid:$el.attr("data-group")||undefined},success:function(resp){var data=[],maxval=10;$spark.empty();$.each(resp,function(_,val){var date=new Date(val[0]);data.push({y:val[1],label:app.utils.prettyDate(date)});if(val[1]>maxval){maxval=val[1]}});app.charts.createSparkline($spark,data,options)}})},createSparkline:function(el,points,options){var $el=$(el),existing=$el.children(),maxval=10,title,point,pct,child,point_width;if(options===undefined){options={}}for(var i=0;i<points.length;i++){point=points[i];if(typeof point==="number"){point=points[i]={y:point}}if(point.y>maxval){maxval=point.y}}point_width=app.utils.floatFormat(100/points.length,2)+"%";for(i=0;i<points.length;i++){point=points[i];pct=app.utils.floatFormat(point.y/maxval*99,2)+"%";title=point.y+" events";if(point.label){title=title+"<br>("+point.label+")"}if(existing.get(i)===undefined){$('<a style="width:'+point_width+';" rel="tooltip" title="'+title+'"><span style="height:'+pct+'">'+point.y+"</span></a>").tooltip({placement:options.placement||"bottom"}).appendTo($el)}else{$(existing[i]).find("span").css("height",pct).text(point.y).attr("title",point.label||point.y)}}}}})(app,Backbone,jQuery);(function(app,Backbone,jQuery,_){"use strict";var $=jQuery;app.GroupView=Backbone.View.extend({tagName:"li",className:"group",template:_.template(app.templates.group),initialize:function(){_.bindAll(this);this.model.on("change:count",this.updateCount);this.model.on("change:lastSeen",this.updateLastSeen);this.model.on("change:isBookmarked",this.render);this.model.on("change:isResolved",this.render);this.model.on("change:historicalData",this.renderSparkline)},render:function(){var data=this.model.toJSON();this.$el.html(this.template(data));this.$el.attr("data-id",this.model.id);this.$el.addClass(this.getLevelClassName());if(this.model.get("isResolved")){this.$el.addClass("resolved")}this.$el.find("a[data-action=resolve]").click(_.bind(function(e){e.preventDefault();this.resolve()},this));this.$el.find("a[data-action=bookmark]").click(_.bind(function(e){e.preventDefault();this.bookmark()},this));this.renderSparkline()},renderSparkline:function(obj){var data=this.model.get("historicalData");if(!data||!data.length)return;this.$el.addClass("with-sparkline");app.charts.createSparkline(this.$el.find(".sparkline"),data)},getResolveUrl:function(){return app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/resolve/"},resolve:function(){$.ajax({url:this.getResolveUrl(),type:"post",dataType:"json",data:{gid:this.model.get("id")},success:_.bind(function(response){this.model.set("isResolved",true)},this)})},getBookmarkUrl:function(){return app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/bookmark/"},bookmark:function(){$.ajax({url:this.getBookmarkUrl(),type:"post",dataType:"json",data:{gid:this.model.get("id")},success:_.bind(function(response){this.model.set("isBookmarked",response.isBookmarked)},this)})},getLevelClassName:function(){return"level-"+this.model.get("levelName")},updateLastSeen:function(){this.$el.find(".last-seen").text(app.utils.prettyDate(this.model.get("lastSeen"))).attr("title",this.model.get("lastSeen"))},updateCount:function(){var new_count=app.utils.formatNumber(this.model.get("count"));var counter=this.$el.find(".count");var digit=counter.find("span");if(digit.is(":animated"))return false;if(counter.data("count")==new_count){return false}counter.data("count",new_count);var replacement=$("<span></span>",{css:{top:"-2.1em",opacity:0},text:new_count});digit.before(replacement).animate({top:"2.5em",opacity:0},"fast",function(){digit.remove()});replacement.delay(100).animate({top:0,opacity:1},"fast")}});app.OrderedElementsView=Backbone.View.extend({emptyMessage:"<p>There is nothing to show here.</p>",loadingMessage:"<p>Loading...</p>",model:app.models.Group,defaults:{maxItems:50},initialize:function(data){var members=data.members;_.bindAll(this);this.options=$.extend({},this.defaults,this.options,data);this.$wrapper=$("#"+this.id);this.$parent=$("<ul></ul>");this.$empty=$('<li class="empty"></li>');this.$wrapper.html(this.$parent);if(this.options.className)this.$parent.addClass(this.options.className);this.collection=new app.ScoredList;this.collection.on("add",this.renderMemberInContainer);this.collection.on("remove",this.unrenderMember);this.collection.on("reset",this.reSortMembers);delete data.members;this.reset(members)},reset:function(members){this.$parent.empty();this.setEmpty();if(members===undefined){this.$empty.html(this.loadingMessage);this.collection.reset();this.setEmpty();this.loaded=false}else{this.$empty.html(this.emptyMessage);this.collection.reset(members);this.loaded=true}},setEmpty:function(){this.$parent.html(this.$empty)},extend:function(data){for(var i=0;i<data.length;i++){this.addMember(data[i])}},addMember:function(member){if(member.get===undefined){member=new this.model(member)}if(!this.hasMember(member)){if(this.collection.models.length>=this.options.maxItems-1)if(member.get("score")<this.collection.last().get("score"))return;while(this.collection.models.length>=this.options.maxItems)this.collection.pop();this.collection.add(member)}else{this.updateMember(member)}},reSortMembers:function(){this.collection.each(_.bind(function(member){this.renderMemberInContainer(member)},this))},updateMember:function(member,options){if(_.isUndefined(options))options={};var existing=this.collection.get(member.id);for(var key in member.attributes){if(existing.get(key)!=member.get(key)){existing.set(key,member.get(key))}}if(options.sort!==false){this.collection.sort()}},hasMember:function(member){return this.collection.get(member.id)?true:false},removeMember:function(member){this.collection.remove(member)},renderMemberInContainer:function(member){var new_pos=this.collection.indexOf(member),$el,$rel;this.$parent.find("li.empty").remove();$el=$("#"+this.id+member.id);if(!$el.length){$el=this.renderMember(member)}else if($el.index()===new_pos){return}if(new_pos===0){this.$parent.prepend($el)}else{$rel=$("#"+this.id+this.collection.at(new_pos).id);if(!$rel.length){this.$parent.append($el)}else if($el.id!==$rel.id){$el.insertBefore($rel)}else{return}}if(this.loaded)$el.css("background-color","#eee").animate({backgroundColor:"#fff"},1200)},renderMember:function(member){var view=new app.GroupView({model:member,id:this.id+member.id});view.render();return view.$el},unrenderMember:function(member){$("#"+this.id+member.id).remove();if(!this.$parent.find("li").length)this.setEmpty()}});app.GroupListView=app.OrderedElementsView.extend({defaults:{realtime:false,stream:false,pollUrl:null,pollTime:1e3,tickTime:100},initialize:function(data){if(_.isUndefined(data))data={};data.model=app.models.Group;app.OrderedElementsView.prototype.initialize.call(this,data);this.options=$.extend({},this.defaults,this.options,data);this.queue=new app.ScoredList;this.cursor=null;this.poll();window.setInterval(this.tick,this.options.tickTime)},tick:function(){if(!this.queue.length)return;var item=this.queue.pop();if(this.options.canStream){this.addMember(item)}else if(this.hasMember(item)){this.updateMember(item,{sort:false})}},poll:function(){var data;if(!this.options.realtime||!this.options.pollUrl)return window.setTimeout(this.poll,this.options.pollTime);data=app.utils.getQueryParams();data.cursor=this.cursor||undefined;$.ajax({url:this.options.pollUrl,type:"get",dataType:"json",data:data,success:_.bind(function(groups){var i,data,obj;if(!groups.length)return setTimeout(this.poll,this.options.pollTime*5);this.cursor=groups[groups.length-1].score||undefined;for(i=0;data=groups[i];i+=1){obj=this.queue.get(data.id);if(!_.isUndefined(obj)){obj.set("count",data.count);obj.set("score",data.score);this.queue.sort()}else{this.queue.add(data)}}window.setTimeout(this.poll,this.options.pollTime)},this),error:_.bind(function(){window.setTimeout(this.poll,this.options.pollTime*10)},this)})}});app.UserListView=app.OrderedElementsView.extend({defaults:{},initialize:function(data){if(_.isUndefined(data))data={};data.model=app.User;app.OrderedElementsView.prototype.initialize.call(this,data);this.options=$.extend({},this.defaults,this.options,data)}})})(app,Backbone,jQuery,_);(function(window,app,Backbone,jQuery,_){"use strict";var $=jQuery;var BasePage=Backbone.View.extend({defaults:{canStream:false,realtime:false},initialize:function(data){_.bindAll(this);if(_.isUndefined(data))data={};this.options=$.extend({},this.defaults,this.options,data);this.views={};this.initializeAjaxTabs()},initializeAjaxTabs:function(){$("a[data-toggle=ajtab]").click(_.bind(function(e){var $tab=$(e.target),uri=$tab.attr("data-uri"),view_id=$tab.attr("href").substr(1),view=this.getView(view_id,uri),$cont,$parent;e.preventDefault();if(!uri)return view.reset();$cont=$("#"+view_id);$parent=$cont.parent();$parent.css("opacity",.6);$.ajax({url:uri,dataType:"json",success:function(data){view.reset(data);$parent.css("opacity",1);$tab.tab("show")},error:function(){$cont.html("<p>There was an error fetching data from the server.</p>")}})},this));$("li.active a[data-toggle=ajtab]").click()},makeDefaultView:function(id){return new app.GroupListView({className:"group-list small",id:id,maxItems:5,stream:this.options.stream,realtime:this.options.realtime,model:app.models.Group})},getView:function(id,uri){if(!this.views[id])this.views[id]=this.makeDefaultView(id);var view=this.views[id];view.options.pollUrl=uri;return view}});app.StreamPage=BasePage.extend({initialize:function(data){BasePage.prototype.initialize.call(this,data);this.group_list=new app.GroupListView({className:"group-list",id:"event_list",members:data.groups,maxItems:50,realtime:$.cookie("pausestream")?false:true,canStream:this.options.canStream,pollUrl:app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/poll/",model:app.models.Group});this.control=$("a[data-action=pause]");this.updateStreamOptions();this.control.click(_.bind(function(e){e.preventDefault();this.options.realtime=this.group_list.options.realtime=this.control.hasClass("realtime-pause");this.updateStreamOptions()},this));$("#chart").height("50px");app.charts.render("#chart",{placement:"left"})},updateStreamOptions:function(){if(this.options.realtime){$.removeCookie("pausestream");this.control.removeClass("realtime-pause");this.control.addClass("realtime-play");this.control.html(this.control.attr("data-pause-label"))}else{$.cookie("pausestream","1",{expires:7});this.control.addClass("realtime-pause");this.control.removeClass("realtime-play");this.control.html(this.control.attr("data-play-label"))}}});app.DashboardPage=BasePage.extend({initialize:function(data){BasePage.prototype.initialize.call(this,data);$("#chart").height("150px");Sentry.charts.render("#chart")}});app.GroupDetailsPage=BasePage.extend({initialize:function(data){BasePage.prototype.initialize.call(this,data);this.group_list=new app.GroupListView({className:"group-list",id:"event_list",members:[data.group],model:app.models.Group});$("#chart").height("150px");Sentry.charts.render("#chart");$("#public-status .action").click(function(){var $this=$(this);$.ajax({url:$this.attr("data-api-url"),type:"post",success:function(group){var selector=group.isPublic?"true":"false";var nselector=group.isPublic?"false":"true";$('#public-status span[data-public="'+selector+'"]').show();$('#public-status span[data-public="'+nselector+'"]').hide()},error:function(){window.alert("There was an error changing the public status")}})});var $event_nav=$("#event_nav");if($event_nav.length>0){var $window=$(window);var $nav_links=$event_nav.find("a[href*=#]");var $nav_targets=[];var scroll_offset=$event_nav.offset().top;var event_nav_height;var last_target;$nav_links.click(function(e){var $el=$(this);var target=$(this.hash);$el.parent().addClass("active").siblings().removeClass("active");$("html,body").animate({scrollTop:$(target).position().top+event_nav_height},"fast");e.preventDefault()}).each(function(){if(this.hash.length>1&&$(this.hash).length){$nav_targets.push(this.hash)}});$window.resize(function(){event_nav_height=$event_nav.find(".nav").outerHeight();$event_nav.height(event_nav_height+"px")}).resize();$window.scroll(function(){if($window.scrollTop()>scroll_offset){if(!$event_nav.hasClass("fixed")){$event_nav.addClass("fixed")}}else if($event_nav.hasClass("fixed")){$event_nav.removeClass("fixed")}if($nav_targets.length){var from_top=$window.scrollTop()+event_nav_height+20;var cur=$.map($nav_targets,function(hash){if($(hash).offset().top<from_top){return hash}});var target=cur?cur[cur.length-1]:null;if(!target){target=$nav_targets[0]}if(last_target!==target){last_target=target;$nav_links.parent().removeClass("active").end().filter("[href="+target+"]").parent().addClass("active")}}}).scroll()}}});app.NewProjectPage=BasePage.extend({initialize:function(data){this.el=$(data.el);BasePage.prototype.initialize.call(this,data);if(this.options.canSelectTeam&&this.options.canCreateTeam){$("#new_team").hide();$('a[rel="create-new-team"]').click(function(){$("#new_team").show();$("#select_team").hide()});$('a[rel="select-team"]').click(function(){$("#new_team").hide();$("#select_team").show()})}}});app.WallPage=BasePage.extend({initialize:function(){BasePage.prototype.initialize.call(this,{realtime:true,pollTime:3e3});this.sparkline=$(".chart");this.sparkline.height(this.sparkline.parent().height());this.stats=$("#stats");this.refreshSparkline();this.refreshStats()},refreshSparkline:function(){$.ajax({url:this.sparkline.attr("data-api-url"),type:"get",dataType:"json",data:{days:1,gid:this.sparkline.attr("data-group")||undefined},success:_.bind(function(data){$.plot(this.sparkline,[{data:data,color:"#52566c",shadowSize:0,lines:{lineWidth:2,show:true,fill:true,fillColor:"#232428"}}],{yaxis:{min:0},grid:{show:false},hoverable:false,legend:{noColumns:5},lines:{show:false}})},this)})},refreshStats:function(){$.ajax({url:this.stats.attr("data-uri"),dataType:"json",success:_.bind(function(data){this.stats.find("[data-stat]").each(function(){var $this=$(this);$this.find("big").text(data[$this.attr("data-stat")])});window.setTimeout(this.refreshStats,1e3)},this)})}});app.UserListPage=BasePage.extend({initialize:function(data){BasePage.prototype.initialize.call(this,data);this.list=new app.UserListView({className:"user-list",id:"user_list",members:data.users})}});Backbone.sync=function(method,model,success,error){success()}})(window,app,Backbone,jQuery,_);
+app=window.app={config:{},templates:{},utils:{}};(function(app,Backbone){"use strict";app.models={};app.models.Group=Backbone.Model.extend({defaults:{tags:[],versions:[],isBookmarked:false,historicalData:[]}});app.models.User=Backbone.Model.extend({defaults:{}})})(app,Backbone);(function(app){"use strict";app.templates={group:""+'<div class="count" data-count="<%= app.utils.formatNumber(count) %>"><span title="<%= count %>"><%= app.utils.formatNumber(count) %></span></div>'+'<div class="details">'+'<h3><a href="<%= permalink %>"><%= title %></a></h3>'+'<p class="message">'+"<%= message %>"+"</p>"+'<div class="meta">'+'<span class="last-seen pretty-date" title="<%= lastSeen %>"><%= app.utils.prettyDate(lastSeen) %></span>'+"<% if (timeSpent) { %>"+'<span class="time-spent"><%= Math.round(timeSpent) %>ms</span>'+"<% } %>"+'<span class="tag tag-project"><%= project.name %></span>'+'<span class="tag tag-logger"><%= logger %></span>'+"<% _.each(versions, function(version){ %> "+'<span class="tag tag-version"><%= version %></span>'+"<% }) %>"+"<% _.each(tags, function(tag){ %> "+'<span class="tag"><%= tag %></span>'+"<% }) %>"+"</div>"+'<span class="sparkline"></span>'+'<ul class="actions">'+"<% if (canResolve) { %>"+"<li>"+'<a href="#"<% if (!isResolved) { %> data-action="resolve" title="Mark as Resolved"<% } %> >'+'<i aria-hidden="true" class="icon-checkmark"></i>'+"</a>"+"</li>"+"<li>"+'<a href="#" data-action="bookmark" class="bookmark<% if (isBookmarked) { %> checked<% } %>" title="Bookmark">'+'<i aria-hidden="true" class="icon-star"></i>'+"</a>"+"</li>"+"<% } %>"+"</ul>"+"</div>"+"</script>"}})(app);(function(app,jQuery){"use strict";var $=jQuery;var time_formats=[[60,"just now","just now"],[120,"1 minute ago","1 minute from now"],[3600,"minutes",60],[7200,"1 hour ago","1 hour from now"],[86400,"hours",3600],[172800,"yesterday","tomorrow"],[604800,"days",86400],[1209600,"last week","next week"],[2419200,"weeks",604800],[4838400,"last month","next month"],[29030400,"months",2419200],[58060800,"last year","next year"],[290304e4,"years",29030400],[580608e4,"last century","next century"],[580608e5,"centuries",290304e4]];var number_formats=[[1e9,"b"],[1e6,"m"],[1e3,"k"]];app.utils={getQueryParams:function(){var vars={},href=window.location.href,hashes,hash;if(href.indexOf("?")==-1)return vars;hashes=href.slice(href.indexOf("?")+1,href.indexOf("#")!=-1?href.indexOf("#"):href.length).split("&");$.each(hashes,function(_,chunk){hash=chunk.split("=");if(!hash[0]&&!hash[1])return;vars[hash[0]]=hash[1]?decodeURIComponent(hash[1]).replace(/\+/," "):""});return vars},floatFormat:function(number,places){var multi=Math.pow(10,places);return parseInt(number*multi,10)/multi},formatNumber:function(number){var b,x,y,o,p;number=parseInt(number,10);for(var i=0;b=number_formats[i];i++){x=b[0];y=b[1];o=Math.floor(number/x);p=number%x;if(o>0){if(o/10>1||!p)return""+o+y;return""+this.floatFormat(number/x,1)+y}}return""+number},prettyDate:function(date_str){var time=Date.parse(date_str);var now=new Date;var now_utc=Date.UTC(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate(),now.getUTCHours(),now.getUTCMinutes(),now.getUTCSeconds());var token="ago";var seconds=(now_utc-time)/1e3;var list_choice=1;if(seconds<0){seconds=Math.abs(seconds);token="from now";list_choice=2}for(var i=0,format;format=time_formats[i];i++){if(seconds<format[0]){if(typeof format[2]=="string")return format[list_choice];else return Math.floor(seconds/format[2])+" "+format[1]+" "+token}}return time},slugify:function(str){str=str.replace(/^\s+|\s+$/g,"");str=str.toLowerCase();var from="àáäâèéëêìíïîòóöôùúüûñç·/_,:;";var to="aaaaeeeeiiiioooouuuunc------";for(var i=0,l=from.length;i<l;i++){str=str.replace(new RegExp(from.charAt(i),"g"),to.charAt(i))}str=str.replace(/[^a-z0-9\s\-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");return str},varToggle:function(link,$elm){var $link=$(link);if(!$link.attr("data-expand-label"))$link.attr("data-expand-label",$link.html());$elm.toggle();if($elm.is(":visible"))$link.html($link.attr("data-collapse-label"));else $link.html($link.attr("data-expand-label"))}};$(function(){$(".body select, .toolbar select, .project-controls select").each(function(){var $this=$(this),options={width:"element",allowClear:false};if($this.attr("data-allowClear")){options.allowClear=$this.attr("data-allowClear")}$this.select2(options)});setInterval(function(){$(".pretty-date").each(function(_,el){var $el=$(el);var title=$el.attr("title");if(title){var date=app.utils.prettyDate(title);if(date){$el.text(date)}}})},5e3)})})(app,jQuery);(function(Date,undefined){"use strict";var origParse=Date.parse,numericKeys=[1,4,5,6,7,10,11];Date.parse=function(date){var timestamp,struct,minutesOffset=0;if(struct=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(date)){for(var i=0,k;k=numericKeys[i];++i){struct[k]=+struct[k]||0}struct[2]=(+struct[2]||1)-1;struct[3]=+struct[3]||1;if(struct[8]!=="Z"&&struct[9]!==undefined){minutesOffset=struct[10]*60+struct[11];if(struct[9]==="+"){minutesOffset=0-minutesOffset}}timestamp=Date.UTC(struct[1],struct[2],struct[3],struct[4],struct[5]+minutesOffset,struct[6],struct[7])}else{timestamp=origParse?origParse(date):NaN}return timestamp}})(Date);(function(app,Backbone){"use strict";app.ScoredList=Backbone.Collection.extend({comparator:function(member){return-member.get("score")}})})(app,Backbone);(function(app,Backbone,jQuery,_){"use strict";var $=jQuery;app.charts={render:function(el,options){var $el=$("#chart");var url=$el.attr("data-api-url");var title=$(el).attr("data-title");var $spark=$el.find(".sparkline");$spark.height($el.height());$.ajax({url:$el.attr("data-api-url"),type:"get",dataType:"json",data:{days:$el.attr("data-days")||7,gid:$el.attr("data-group")||undefined},success:function(resp){var data=[],maxval=10;$spark.empty();$.each(resp,function(_,val){var date=new Date(val[0]);data.push({y:val[1],label:app.utils.prettyDate(date)});if(val[1]>maxval){maxval=val[1]}});app.charts.createSparkline($spark,data,options)}})},createSparkline:function(el,points,options){var $el=$(el),existing=$el.children(),maxval=10,title,point,pct,child,point_width;if(options===undefined){options={}}for(var i=0;i<points.length;i++){point=points[i];if(typeof point==="number"){point=points[i]={y:point}}if(point.y>maxval){maxval=point.y}}point_width=app.utils.floatFormat(100/points.length,2)+"%";for(i=0;i<points.length;i++){point=points[i];pct=app.utils.floatFormat(point.y/maxval*99,2)+"%";title=point.y+" events";if(point.label){title=title+"<br>("+point.label+")"}if(existing.get(i)===undefined){$('<a style="width:'+point_width+';" rel="tooltip" title="'+title+'"><span style="height:'+pct+'">'+point.y+"</span></a>").tooltip({placement:options.placement||"bottom"}).appendTo($el)}else{$(existing[i]).find("span").css("height",pct).text(point.y).attr("title",point.label||point.y)}}}}})(app,Backbone,jQuery);(function(app,Backbone,jQuery,_){"use strict";var $=jQuery;app.GroupView=Backbone.View.extend({tagName:"li",className:"group",template:_.template(app.templates.group),initialize:function(){_.bindAll(this);this.model.on("change:count",this.updateCount);this.model.on("change:lastSeen",this.updateLastSeen);this.model.on("change:isBookmarked",this.render);this.model.on("change:isResolved",this.render);this.model.on("change:historicalData",this.renderSparkline)},render:function(){var data=this.model.toJSON();this.$el.html(this.template(data));this.$el.attr("data-id",this.model.id);this.$el.addClass(this.getLevelClassName());if(this.model.get("isResolved")){this.$el.addClass("resolved")}this.$el.find("a[data-action=resolve]").click(_.bind(function(e){e.preventDefault();this.resolve()},this));this.$el.find("a[data-action=bookmark]").click(_.bind(function(e){e.preventDefault();this.bookmark()},this));this.renderSparkline()},renderSparkline:function(obj){var data=this.model.get("historicalData");if(!data||!data.length)return;this.$el.addClass("with-sparkline");app.charts.createSparkline(this.$el.find(".sparkline"),data)},getResolveUrl:function(){return app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/resolve/"},resolve:function(){$.ajax({url:this.getResolveUrl(),type:"post",dataType:"json",data:{gid:this.model.get("id")},success:_.bind(function(response){this.model.set("isResolved",true)},this)})},getBookmarkUrl:function(){return app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/bookmark/"},bookmark:function(){$.ajax({url:this.getBookmarkUrl(),type:"post",dataType:"json",data:{gid:this.model.get("id")},success:_.bind(function(response){this.model.set("isBookmarked",response.isBookmarked)},this)})},getLevelClassName:function(){return"level-"+this.model.get("levelName")},updateLastSeen:function(){this.$el.find(".last-seen").text(app.utils.prettyDate(this.model.get("lastSeen"))).attr("title",this.model.get("lastSeen"))},updateCount:function(){var new_count=app.utils.formatNumber(this.model.get("count"));var counter=this.$el.find(".count");var digit=counter.find("span");if(digit.is(":animated"))return false;if(counter.data("count")==new_count){return false}counter.data("count",new_count);var replacement=$("<span></span>",{css:{top:"-2.1em",opacity:0},text:new_count});digit.before(replacement).animate({top:"2.5em",opacity:0},"fast",function(){digit.remove()});replacement.delay(100).animate({top:0,opacity:1},"fast")}});app.OrderedElementsView=Backbone.View.extend({emptyMessage:"<p>There is nothing to show here.</p>",loadingMessage:"<p>Loading...</p>",model:app.models.Group,defaults:{maxItems:50},initialize:function(data){var members=data.members;_.bindAll(this);this.options=$.extend({},this.defaults,this.options,data);this.$wrapper=$("#"+this.id);this.$parent=$("<ul></ul>");this.$empty=$('<li class="empty"></li>');this.$wrapper.html(this.$parent);if(this.options.className)this.$parent.addClass(this.options.className);this.collection=new app.ScoredList;this.collection.on("add",this.renderMemberInContainer);this.collection.on("remove",this.unrenderMember);this.collection.on("reset",this.reSortMembers);delete data.members;this.reset(members)},reset:function(members){this.$parent.empty();this.setEmpty();if(members===undefined){this.$empty.html(this.loadingMessage);this.collection.reset();this.setEmpty();this.loaded=false}else{this.$empty.html(this.emptyMessage);this.collection.reset(members);this.loaded=true}},setEmpty:function(){this.$parent.html(this.$empty)},extend:function(data){for(var i=0;i<data.length;i++){this.addMember(data[i])}},addMember:function(member){if(member.get===undefined){member=new this.model(member)}if(!this.hasMember(member)){if(this.collection.models.length>=this.options.maxItems-1)if(member.get("score")<this.collection.last().get("score"))return;while(this.collection.models.length>=this.options.maxItems)this.collection.pop();this.collection.add(member)}else{this.updateMember(member)}},reSortMembers:function(){this.collection.each(_.bind(function(member){this.renderMemberInContainer(member)},this))},updateMember:function(member,options){if(_.isUndefined(options))options={};var existing=this.collection.get(member.id);for(var key in member.attributes){if(existing.get(key)!=member.get(key)){existing.set(key,member.get(key))}}if(options.sort!==false){this.collection.sort()}},hasMember:function(member){return this.collection.get(member.id)?true:false},removeMember:function(member){this.collection.remove(member)},renderMemberInContainer:function(member){var new_pos=this.collection.indexOf(member),$el,$rel;this.$parent.find("li.empty").remove();$el=$("#"+this.id+member.id);if(!$el.length){$el=this.renderMember(member)}else if($el.index()===new_pos){return}if(new_pos===0){this.$parent.prepend($el)}else{$rel=$("#"+this.id+this.collection.at(new_pos).id);if(!$rel.length){this.$parent.append($el)}else if($el.id!==$rel.id){$el.insertBefore($rel)}else{return}}if(this.loaded)$el.css("background-color","#eee").animate({backgroundColor:"#fff"},1200)},renderMember:function(member){var view=new app.GroupView({model:member,id:this.id+member.id});view.render();return view.$el},unrenderMember:function(member){$("#"+this.id+member.id).remove();if(!this.$parent.find("li").length)this.setEmpty()}});app.GroupListView=app.OrderedElementsView.extend({defaults:{realtime:false,stream:false,pollUrl:null,pollTime:1e3,tickTime:100},initialize:function(data){if(_.isUndefined(data))data={};data.model=app.models.Group;app.OrderedElementsView.prototype.initialize.call(this,data);this.options=$.extend({},this.defaults,this.options,data);this.queue=new app.ScoredList;this.cursor=null;this.poll();window.setInterval(this.tick,this.options.tickTime)},tick:function(){if(!this.queue.length)return;var item=this.queue.pop();if(this.options.canStream){this.addMember(item)}else if(this.hasMember(item)){this.updateMember(item,{sort:false})}},poll:function(){var data;if(!this.options.realtime||!this.options.pollUrl)return window.setTimeout(this.poll,this.options.pollTime);data=app.utils.getQueryParams();data.cursor=this.cursor||undefined;$.ajax({url:this.options.pollUrl,type:"get",dataType:"json",data:data,success:_.bind(function(groups){var i,data,obj;if(!groups.length)return setTimeout(this.poll,this.options.pollTime*5);this.cursor=groups[groups.length-1].score||undefined;for(i=0;data=groups[i];i+=1){obj=this.queue.get(data.id);if(!_.isUndefined(obj)){obj.set("count",data.count);obj.set("score",data.score);this.queue.sort()}else{this.queue.add(data)}}window.setTimeout(this.poll,this.options.pollTime)},this),error:_.bind(function(){window.setTimeout(this.poll,this.options.pollTime*10)},this)})}});app.UserListView=app.OrderedElementsView.extend({defaults:{},initialize:function(data){if(_.isUndefined(data))data={};data.model=app.User;app.OrderedElementsView.prototype.initialize.call(this,data);this.options=$.extend({},this.defaults,this.options,data)}})})(app,Backbone,jQuery,_);(function(window,app,Backbone,jQuery,_){"use strict";var $=jQuery;var BasePage=Backbone.View.extend({defaults:{canStream:false,realtime:false},initialize:function(data){_.bindAll(this);if(_.isUndefined(data))data={};this.options=$.extend({},this.defaults,this.options,data);this.views={};this.initializeAjaxTabs()},initializeAjaxTabs:function(){$("a[data-toggle=ajtab]").click(_.bind(function(e){var $tab=$(e.target),uri=$tab.attr("data-uri"),view_id=$tab.attr("href").substr(1),view=this.getView(view_id,uri),$cont,$parent;e.preventDefault();if(!uri)return view.reset();$cont=$("#"+view_id);$parent=$cont.parent();$parent.css("opacity",.6);$.ajax({url:uri,dataType:"json",success:function(data){view.reset(data);$parent.css("opacity",1);$tab.tab("show")},error:function(){$cont.html("<p>There was an error fetching data from the server.</p>")}})},this));$("li.active a[data-toggle=ajtab]").click()},makeDefaultView:function(id){return new app.GroupListView({className:"group-list small",id:id,maxItems:5,stream:this.options.stream,realtime:this.options.realtime,model:app.models.Group})},getView:function(id,uri){if(!this.views[id])this.views[id]=this.makeDefaultView(id);var view=this.views[id];view.options.pollUrl=uri;return view}});app.StreamPage=BasePage.extend({initialize:function(data){BasePage.prototype.initialize.call(this,data);this.group_list=new app.GroupListView({className:"group-list",id:"event_list",members:data.groups,maxItems:50,realtime:$.cookie("pausestream")?false:true,canStream:this.options.canStream,pollUrl:app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/poll/",model:app.models.Group});this.control=$("a[data-action=pause]");this.updateStreamOptions();this.control.click(_.bind(function(e){e.preventDefault();this.options.realtime=this.group_list.options.realtime=this.control.hasClass("realtime-pause");this.updateStreamOptions()},this));$("#chart").height("50px");app.charts.render("#chart",{placement:"left"})},updateStreamOptions:function(){if(this.options.realtime){$.removeCookie("pausestream");this.control.removeClass("realtime-pause");this.control.addClass("realtime-play");this.control.html(this.control.attr("data-pause-label"))}else{$.cookie("pausestream","1",{expires:7});this.control.addClass("realtime-pause");this.control.removeClass("realtime-play");this.control.html(this.control.attr("data-play-label"))}}});app.DashboardPage=BasePage.extend({initialize:function(data){BasePage.prototype.initialize.call(this,data);$("#chart").height("150px");Sentry.charts.render("#chart")}});app.GroupDetailsPage=BasePage.extend({initialize:function(data){BasePage.prototype.initialize.call(this,data);this.group_list=new app.GroupListView({className:"group-list",id:"event_list",members:[data.group],model:app.models.Group});$("#chart").height("150px");Sentry.charts.render("#chart");$("#public-status .action").click(function(){var $this=$(this);$.ajax({url:$this.attr("data-api-url"),type:"post",success:function(group){var selector=group.isPublic?"true":"false";var nselector=group.isPublic?"false":"true";$('#public-status span[data-public="'+selector+'"]').show();$('#public-status span[data-public="'+nselector+'"]').hide()},error:function(){window.alert("There was an error changing the public status")}})});var $event_nav=$("#event_nav");if($event_nav.length>0){var $window=$(window);var $nav_links=$event_nav.find("a[href*=#]");var $nav_targets=[];var scroll_offset=$event_nav.offset().top;var event_nav_height;var last_target;$nav_links.click(function(e){var $el=$(this);var target=$(this.hash);$el.parent().addClass("active").siblings().removeClass("active");$("html,body").animate({scrollTop:$(target).position().top+event_nav_height},"fast");e.preventDefault()}).each(function(){if(this.hash.length>1&&$(this.hash).length){$nav_targets.push(this.hash)}});$window.resize(function(){event_nav_height=$event_nav.find(".nav").outerHeight();$event_nav.height(event_nav_height+"px")}).resize();$window.scroll(function(){if($window.scrollTop()>scroll_offset){if(!$event_nav.hasClass("fixed")){$event_nav.addClass("fixed")}}else if($event_nav.hasClass("fixed")){$event_nav.removeClass("fixed")}if($nav_targets.length){var from_top=$window.scrollTop()+event_nav_height+20;var cur=$.map($nav_targets,function(hash){if($(hash).offset().top<from_top){return hash}});var target=cur?cur[cur.length-1]:null;if(!target){target=$nav_targets[0]}if(last_target!==target){last_target=target;$nav_links.parent().removeClass("active").end().filter("[href="+target+"]").parent().addClass("active")}}}).scroll()}}});app.NewProjectPage=BasePage.extend({initialize:function(data){this.el=$(data.el);BasePage.prototype.initialize.call(this,data);if(this.options.canSelectTeam&&this.options.canCreateTeam){$("#new_team").hide();$('a[rel="create-new-team"]').click(function(){$("#new_team").show();$("#select_team").hide()});$('a[rel="select-team"]').click(function(){$("#new_team").hide();$("#select_team").show()})}}});app.WallPage=BasePage.extend({initialize:function(){BasePage.prototype.initialize.call(this,{realtime:true,pollTime:3e3});this.sparkline=$(".chart");this.sparkline.height(this.sparkline.parent().height());this.stats=$("#stats");this.refreshSparkline();this.refreshStats()},refreshSparkline:function(){$.ajax({url:this.sparkline.attr("data-api-url"),type:"get",dataType:"json",data:{days:1,gid:this.sparkline.attr("data-group")||undefined},success:_.bind(function(data){$.plot(this.sparkline,[{data:data,color:"#52566c",shadowSize:0,lines:{lineWidth:2,show:true,fill:true,fillColor:"#232428"}}],{yaxis:{min:0},grid:{show:false},hoverable:false,legend:{noColumns:5},lines:{show:false}})},this)})},refreshStats:function(){$.ajax({url:this.stats.attr("data-uri"),dataType:"json",success:_.bind(function(data){this.stats.find("[data-stat]").each(function(){var $this=$(this);$this.find("big").text(data[$this.attr("data-stat")])});window.setTimeout(this.refreshStats,1e3)},this)})}});app.UserListPage=BasePage.extend({initialize:function(data){BasePage.prototype.initialize.call(this,data);this.list=new app.UserListView({className:"user-list",id:"user_list",members:data.users})}});Backbone.sync=function(method,model,success,error){success()}})(window,app,Backbone,jQuery,_);
 //@ sourceMappingURL=global.min.map.js
\ No newline at end of file
diff --git a/src/sentry/static/sentry/scripts/legacy.min.js b/src/sentry/static/sentry/scripts/legacy.min.js
index af55d83787..f6398cf263 100644
--- a/src/sentry/static/sentry/scripts/legacy.min.js
+++ b/src/sentry/static/sentry/scripts/legacy.min.js
@@ -1,2 +1,2 @@
-function varToggle(link,$elm){"use strict";$elm.toggle();var s=link.getElementsByTagName("span")[0];var uarr=String.fromCharCode(9654);var darr=String.fromCharCode(9660);s.innerHTML=s.innerHTML==uarr?darr:uarr;return false}if(Sentry===undefined){var Sentry={}}(function(app,jQuery){"use strict";var $=jQuery;$(document).ready(function(){$(".filter").each(function(_,el){var $filter=$(el);var $input=$filter.find("input[type=text]");if($input.length>0){$input.select2({initSelection:function(el,callback){var $el=$(el);callback({id:$el.val(),text:$el.val()})},allowClear:true,minimumInputLength:3,ajax:{url:app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/tags/search/",dataType:"json",data:function(term,page){return{query:term,quietMillis:300,name:$input.attr("name"),limit:10}},results:function(data,page){var results=[];$(data.results).each(function(_,val){results.push({id:val,text:val})});return{results:results}}}})}else{$input=$filter.find("select").select2({allowClear:true})}if($input.length>0){$input.on("change",function(e){var query=app.utils.getQueryParams();query[e.target.name]=e.val;window.location.href="?"+$.param(query)})}})});$(document).ajaxSend(function(event,xhr,settings){function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!==""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}function sameOrigin(url){var host=document.location.host;var protocol=document.location.protocol;var sr_origin="//"+host;var origin=protocol+sr_origin;return url==origin||url.slice(0,origin.length+1)==origin+"/"||url==sr_origin||url.slice(0,sr_origin.length+1)==sr_origin+"/"||!/^(\/\/|http:|https:).*/.test(url)}function safeMethod(method){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(method)}if(!safeMethod(settings.type)&&sameOrigin(settings.url)){xhr.setRequestHeader("X-CSRFToken",getCookie("csrftoken"))}});$(".popup").live("click",function(){var $this=$(this);var $window=$(window);var $container=$($this.attr("data-container"));var title=$this.attr("data-title")||"Untitled";var content=$container.html();var height=Math.min($window.height()-100,$container.height()+40);var width=Math.min($window.width()-100,$container.width()+40);var w=window.open("about:blank","dsqApiExpand","toolbar=0,status=0,location=0,menubar=0,height="+height+",width="+width);w.document.write("<!DOCTYPE html><html>"+"<head>"+"<title>"+title+"</title>"+'<link href="'+app.config.popupCss+'" rel="stylesheet" type="text/css"/>'+"</head><body>"+'<div id="popup">'+content+"</div></body>"+"</html>")})})(app,jQuery);if(Sentry===undefined){var Sentry={}}(function(jQuery){"use strict";var $=jQuery;Sentry.charts={};Sentry.charts.render=function(el){var $sparkline=$(el);if($sparkline.length<1){return}$.ajax({url:$sparkline.attr("data-api-url"),type:"get",dataType:"json",data:{days:7,gid:$sparkline.attr("data-group")||undefined},success:function(data){var points=[{data:data,color:"#56AFE8",shadowSize:0,lines:{lineWidth:2,show:true,fill:true}}];var options={xaxis:{mode:"time"},yaxis:{min:0,tickFormatter:function(value){if(value>999999){return value/1e6+"mm"}if(value>999){return value/1e3+"k"}return value}},grid:{show:true,backgroundColor:"#ffffff",borderColor:"#DEE3E9",borderWidth:2,tickColor:"#DEE3E9"},hoverable:false,legend:{noColumns:5},lines:{show:false}};$.plot($sparkline,points,options);$(window).resize(function(){$.plot($sparkline,points,options)})}})}})(jQuery);if(Sentry===undefined){var Sentry={}}(function(app,jQuery){"use strict";var $=jQuery;Sentry.stream={};Sentry.stream.clear=function(){if(window.confirm("Are you sure you want to mark all your stream as resolved?")){$.ajax({url:app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/clear/",type:"post",dataType:"json",success:function(groups){window.location.reload()}})}};Sentry.stream.resolve=function(gid,remove){if(typeof remove=="undefined"){remove=true}$.ajax({url:app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/resolve/",type:"post",dataType:"json",data:{gid:gid},success:function(groups){for(var i=groups.length-1,data,row;data=groups[i];i--){$('.event[data-group="'+data.id+'"]').remove();if(!remove){$("#event_list").prepend(data.html);$('.event[data-group="'+data.id+'"]').addClass("fresh")}}}})};Sentry.stream.bookmark=function(project_id,gid,el){$.ajax({url:app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/bookmark/",type:"post",dataType:"json",data:{gid:gid},success:function(data){if(!el){return}var $el=$(el);if(data.bookmarked){$el.addClass("checked")}else{$el.removeClass("checked")}}})}})(app,jQuery);
+if(Sentry===undefined){var Sentry={}}(function(app,jQuery){"use strict";var $=jQuery;$(document).ready(function(){$(".filter").each(function(_,el){var $filter=$(el);var $input=$filter.find("input[type=text]");if($input.length>0){$input.select2({initSelection:function(el,callback){var $el=$(el);callback({id:$el.val(),text:$el.val()})},allowClear:true,minimumInputLength:3,ajax:{url:app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/tags/search/",dataType:"json",data:function(term,page){return{query:term,quietMillis:300,name:$input.attr("name"),limit:10}},results:function(data,page){var results=[];$(data.results).each(function(_,val){results.push({id:val,text:val})});return{results:results}}}})}else{$input=$filter.find("select").select2({allowClear:true})}if($input.length>0){$input.on("change",function(e){var query=app.utils.getQueryParams();query[e.target.name]=e.val;window.location.href="?"+$.param(query)})}})});$(document).ajaxSend(function(event,xhr,settings){function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!==""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}function sameOrigin(url){var host=document.location.host;var protocol=document.location.protocol;var sr_origin="//"+host;var origin=protocol+sr_origin;return url==origin||url.slice(0,origin.length+1)==origin+"/"||url==sr_origin||url.slice(0,sr_origin.length+1)==sr_origin+"/"||!/^(\/\/|http:|https:).*/.test(url)}function safeMethod(method){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(method)}if(!safeMethod(settings.type)&&sameOrigin(settings.url)){xhr.setRequestHeader("X-CSRFToken",getCookie("csrftoken"))}});$(".popup").live("click",function(){var $this=$(this);var $window=$(window);var $container=$($this.attr("data-container"));var title=$this.attr("data-title")||"Untitled";var content=$container.html();var height=Math.min($window.height()-100,$container.height()+40);var width=Math.min($window.width()-100,$container.width()+40);var w=window.open("about:blank","dsqApiExpand","toolbar=0,status=0,location=0,menubar=0,height="+height+",width="+width);w.document.write("<!DOCTYPE html><html>"+"<head>"+"<title>"+title+"</title>"+'<link href="'+app.config.popupCss+'" rel="stylesheet" type="text/css"/>'+"</head><body>"+'<div id="popup">'+content+"</div></body>"+"</html>")})})(app,jQuery);if(Sentry===undefined){var Sentry={}}(function(jQuery){"use strict";var $=jQuery;Sentry.charts={};Sentry.charts.render=function(el){var $sparkline=$(el);if($sparkline.length<1){return}$.ajax({url:$sparkline.attr("data-api-url"),type:"get",dataType:"json",data:{days:7,gid:$sparkline.attr("data-group")||undefined},success:function(data){var points=[{data:data,color:"#56AFE8",shadowSize:0,lines:{lineWidth:2,show:true,fill:true}}];var options={xaxis:{mode:"time"},yaxis:{min:0,tickFormatter:function(value){if(value>999999){return value/1e6+"mm"}if(value>999){return value/1e3+"k"}return value}},grid:{show:true,backgroundColor:"#ffffff",borderColor:"#DEE3E9",borderWidth:2,tickColor:"#DEE3E9"},hoverable:false,legend:{noColumns:5},lines:{show:false}};$.plot($sparkline,points,options);$(window).resize(function(){$.plot($sparkline,points,options)})}})}})(jQuery);if(Sentry===undefined){var Sentry={}}(function(app,jQuery){"use strict";var $=jQuery;Sentry.stream={};Sentry.stream.clear=function(){if(window.confirm("Are you sure you want to mark all your stream as resolved?")){$.ajax({url:app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/clear/",type:"post",dataType:"json",success:function(groups){window.location.reload()}})}};Sentry.stream.resolve=function(gid,remove){if(typeof remove=="undefined"){remove=true}$.ajax({url:app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/resolve/",type:"post",dataType:"json",data:{gid:gid},success:function(groups){for(var i=groups.length-1,data,row;data=groups[i];i--){$('.event[data-group="'+data.id+'"]').remove();if(!remove){$("#event_list").prepend(data.html);$('.event[data-group="'+data.id+'"]').addClass("fresh")}}}})};Sentry.stream.bookmark=function(project_id,gid,el){$.ajax({url:app.config.urlPrefix+"/api/"+app.config.teamId+"/"+app.config.projectId+"/bookmark/",type:"post",dataType:"json",data:{gid:gid},success:function(data){if(!el){return}var $el=$(el);if(data.bookmarked){$el.addClass("checked")}else{$el.removeClass("checked")}}})}})(app,jQuery);
 //@ sourceMappingURL=legacy.min.map.js
\ No newline at end of file
diff --git a/src/sentry/static/sentry/scripts/sentry.core.js b/src/sentry/static/sentry/scripts/sentry.core.js
index ae8aee19b7..3137dc9d3a 100644
--- a/src/sentry/static/sentry/scripts/sentry.core.js
+++ b/src/sentry/static/sentry/scripts/sentry.core.js
@@ -1,14 +1,4 @@
 /*global jQuery:true*/
-function varToggle(link, $elm) {
-    "use strict";
-
-    $elm.toggle();
-    var s = link.getElementsByTagName('span')[0];
-    var uarr = String.fromCharCode(0x25b6);
-    var darr = String.fromCharCode(0x25bc);
-    s.innerHTML = s.innerHTML == uarr ? darr : uarr;
-    return false;
-}
 
 if (Sentry === undefined) {
     var Sentry = {};
diff --git a/src/sentry/static/sentry/scripts/utils.js b/src/sentry/static/sentry/scripts/utils.js
index cbec1db344..4ddac0dcdd 100644
--- a/src/sentry/static/sentry/scripts/utils.js
+++ b/src/sentry/static/sentry/scripts/utils.js
@@ -120,6 +120,20 @@
                 .replace(/-+/g, '-'); // collapse dashes
 
             return str;
+        },
+
+        varToggle: function(link, $elm) {
+            var $link = $(link);
+
+            // assume its collapsed by default
+            if (!$link.attr('data-expand-label'))
+                $link.attr('data-expand-label', $link.html());
+
+            $elm.toggle();
+            if ($elm.is(':visible'))
+                $link.html($link.attr('data-collapse-label'));
+            else
+                $link.html($link.attr('data-expand-label'));
         }
 
     };
diff --git a/src/sentry/static/sentry/styles/global.min.css b/src/sentry/static/sentry/styles/global.min.css
index eb07da445e..deaf832173 100644
--- a/src/sentry/static/sentry/styles/global.min.css
+++ b/src/sentry/static/sentry/styles/global.min.css
@@ -859,10 +859,10 @@ input[type="color"],
   -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
   -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
   box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
-  -webkit-transition: border linear 0.2s, box-shadow linear 0.2s;
-  -moz-transition: border linear 0.2s, box-shadow linear 0.2s;
-  -o-transition: border linear 0.2s, box-shadow linear 0.2s;
-  transition: border linear 0.2s, box-shadow linear 0.2s;
+  -webkit-transition: border linear .2s, box-shadow linear .2s;
+  -moz-transition: border linear .2s, box-shadow linear .2s;
+  -o-transition: border linear .2s, box-shadow linear .2s;
+  transition: border linear .2s, box-shadow linear .2s;
 }
 textarea:focus,
 input[type="text"]:focus,
@@ -885,9 +885,9 @@ input[type="color"]:focus,
   outline: thin dotted \9;
   /* IE6-9 */
 
-  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
-  -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
-  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
+  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
+  -moz-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
+  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
 }
 input[type="radio"],
 input[type="checkbox"] {
@@ -1041,64 +1041,40 @@ textarea,
 .controls-row [class*="span"] + [class*="span"] {
   margin-left: 20px;
 }
-input.span12,
-textarea.span12,
-.uneditable-input.span12 {
+input.span12, textarea.span12, .uneditable-input.span12 {
   width: 926px;
 }
-input.span11,
-textarea.span11,
-.uneditable-input.span11 {
+input.span11, textarea.span11, .uneditable-input.span11 {
   width: 846px;
 }
-input.span10,
-textarea.span10,
-.uneditable-input.span10 {
+input.span10, textarea.span10, .uneditable-input.span10 {
   width: 766px;
 }
-input.span9,
-textarea.span9,
-.uneditable-input.span9 {
+input.span9, textarea.span9, .uneditable-input.span9 {
   width: 686px;
 }
-input.span8,
-textarea.span8,
-.uneditable-input.span8 {
+input.span8, textarea.span8, .uneditable-input.span8 {
   width: 606px;
 }
-input.span7,
-textarea.span7,
-.uneditable-input.span7 {
+input.span7, textarea.span7, .uneditable-input.span7 {
   width: 526px;
 }
-input.span6,
-textarea.span6,
-.uneditable-input.span6 {
+input.span6, textarea.span6, .uneditable-input.span6 {
   width: 446px;
 }
-input.span5,
-textarea.span5,
-.uneditable-input.span5 {
+input.span5, textarea.span5, .uneditable-input.span5 {
   width: 366px;
 }
-input.span4,
-textarea.span4,
-.uneditable-input.span4 {
+input.span4, textarea.span4, .uneditable-input.span4 {
   width: 286px;
 }
-input.span3,
-textarea.span3,
-.uneditable-input.span3 {
+input.span3, textarea.span3, .uneditable-input.span3 {
   width: 206px;
 }
-input.span2,
-textarea.span2,
-.uneditable-input.span2 {
+input.span2, textarea.span2, .uneditable-input.span2 {
   width: 126px;
 }
-input.span1,
-textarea.span1,
-.uneditable-input.span1 {
+input.span1, textarea.span1, .uneditable-input.span1 {
   width: 46px;
 }
 .controls-row {
@@ -2568,7 +2544,7 @@ button.close {
   *background-color: #e6e6e6;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
   border: 1px solid #bbbbbb;
   *border: 0;
   border-bottom-color: #a2a2a2;
@@ -2576,9 +2552,9 @@ button.close {
   -moz-border-radius: 4px;
   border-radius: 4px;
   *margin-left: .3em;
-  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
-  -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
-  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
+  -webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
+  -moz-box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
+  box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
 }
 .btn:hover,
 .btn:active,
@@ -2620,9 +2596,9 @@ button.close {
   background-color: #d9d9d9 \9;
   background-image: none;
   outline: 0;
-  -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
-  -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
-  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
+  -webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
+  -moz-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
+  box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
 }
 .btn.disabled,
 .btn[disabled] {
@@ -2709,7 +2685,7 @@ input[type="button"].btn-block {
   *background-color: #4560de;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-primary:hover,
 .btn-primary:active,
@@ -2740,7 +2716,7 @@ input[type="button"].btn-block {
   *background-color: #f89406;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-warning:hover,
 .btn-warning:active,
@@ -2771,7 +2747,7 @@ input[type="button"].btn-block {
   *background-color: #bd362f;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-danger:hover,
 .btn-danger:active,
@@ -2802,7 +2778,7 @@ input[type="button"].btn-block {
   *background-color: #51a351;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-success:hover,
 .btn-success:active,
@@ -2833,7 +2809,7 @@ input[type="button"].btn-block {
   *background-color: #2f96b4;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-info:hover,
 .btn-info:active,
@@ -2864,7 +2840,7 @@ input[type="button"].btn-block {
   *background-color: #222222;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-inverse:hover,
 .btn-inverse:active,
@@ -3029,9 +3005,9 @@ input[type="submit"].btn.btn-mini {
 .btn-group > .btn + .dropdown-toggle {
   padding-left: 8px;
   padding-right: 8px;
-  -webkit-box-shadow: inset 1px 0 0 rgba(255, 255, 255, 0.125), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
-  -moz-box-shadow: inset 1px 0 0 rgba(255, 255, 255, 0.125), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
-  box-shadow: inset 1px 0 0 rgba(255, 255, 255, 0.125), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
+  -webkit-box-shadow: inset 1px 0 0 rgba(255,255,255,.125), inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
+  -moz-box-shadow: inset 1px 0 0 rgba(255,255,255,.125), inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
+  box-shadow: inset 1px 0 0 rgba(255,255,255,.125), inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
   *padding-top: 5px;
   *padding-bottom: 5px;
 }
@@ -3053,9 +3029,9 @@ input[type="submit"].btn.btn-mini {
 }
 .btn-group.open .dropdown-toggle {
   background-image: none;
-  -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
-  -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
-  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
+  -webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
+  -moz-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
+  box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
 }
 .btn-group.open .btn.dropdown-toggle {
   background-color: #e6e6e6;
@@ -3695,17 +3671,17 @@ input[type="submit"].btn.btn-mini {
 }
 .navbar-fixed-top .navbar-inner,
 .navbar-static-top .navbar-inner {
-  -webkit-box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
-  -moz-box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
-  box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
+  -webkit-box-shadow: 0 1px 10px rgba(0,0,0,.1);
+  -moz-box-shadow: 0 1px 10px rgba(0,0,0,.1);
+  box-shadow: 0 1px 10px rgba(0,0,0,.1);
 }
 .navbar-fixed-bottom {
   bottom: 0;
 }
 .navbar-fixed-bottom .navbar-inner {
-  -webkit-box-shadow: 0 -1px 10px rgba(0, 0, 0, 0.1);
-  -moz-box-shadow: 0 -1px 10px rgba(0, 0, 0, 0.1);
-  box-shadow: 0 -1px 10px rgba(0, 0, 0, 0.1);
+  -webkit-box-shadow: 0 -1px 10px rgba(0,0,0,.1);
+  -moz-box-shadow: 0 -1px 10px rgba(0,0,0,.1);
+  box-shadow: 0 -1px 10px rgba(0,0,0,.1);
 }
 .navbar .nav {
   position: relative;
@@ -3768,10 +3744,10 @@ input[type="submit"].btn.btn-mini {
   *background-color: #e5e5e5;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
-  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.075);
-  -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.075);
-  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.075);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
+  -webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.1), 0 1px 0 rgba(255,255,255,.075);
+  -moz-box-shadow: inset 0 1px 0 rgba(255,255,255,.1), 0 1px 0 rgba(255,255,255,.075);
+  box-shadow: inset 0 1px 0 rgba(255,255,255,.1), 0 1px 0 rgba(255,255,255,.075);
 }
 .navbar .btn-navbar:hover,
 .navbar .btn-navbar:active,
@@ -3940,9 +3916,9 @@ input[type="submit"].btn.btn-mini {
   color: #ffffff;
   background-color: #515151;
   border-color: #111111;
-  -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 0 rgba(255, 255, 255, 0.15);
-  -moz-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 0 rgba(255, 255, 255, 0.15);
-  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 0 rgba(255, 255, 255, 0.15);
+  -webkit-box-shadow: inset 0 1px 2px rgba(0,0,0,.1), 0 1px 0 rgba(255,255,255,.15);
+  -moz-box-shadow: inset 0 1px 2px rgba(0,0,0,.1), 0 1px 0 rgba(255,255,255,.15);
+  box-shadow: inset 0 1px 2px rgba(0,0,0,.1), 0 1px 0 rgba(255,255,255,.15);
   -webkit-transition: none;
   -moz-transition: none;
   -o-transition: none;
@@ -3985,7 +3961,7 @@ input[type="submit"].btn.btn-mini {
   *background-color: #040404;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .navbar-inverse .btn-navbar:hover,
 .navbar-inverse .btn-navbar:active,
@@ -4241,10 +4217,10 @@ input[type="submit"].btn.btn-mini {
   outline: none;
 }
 .modal.fade {
-  -webkit-transition: opacity 0.3s linear, top 0.3s ease-out;
-  -moz-transition: opacity 0.3s linear, top 0.3s ease-out;
-  -o-transition: opacity 0.3s linear, top 0.3s ease-out;
-  transition: opacity 0.3s linear, top 0.3s ease-out;
+  -webkit-transition: opacity .3s linear, top .3s ease-out;
+  -moz-transition: opacity .3s linear, top .3s ease-out;
+  -o-transition: opacity .3s linear, top .3s ease-out;
+  transition: opacity .3s linear, top .3s ease-out;
   top: -25%;
 }
 .modal.fade.in {
@@ -4742,9 +4718,9 @@ a.badge:hover {
   transition: width 0.6s ease;
 }
 .progress .bar + .bar {
-  -webkit-box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
-  -moz-box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
-  box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
+  -webkit-box-shadow: inset 1px 0 0 rgba(0,0,0,.15), inset 0 -1px 0 rgba(0,0,0,.15);
+  -moz-box-shadow: inset 1px 0 0 rgba(0,0,0,.15), inset 0 -1px 0 rgba(0,0,0,.15);
+  box-shadow: inset 1px 0 0 rgba(0,0,0,.15), inset 0 -1px 0 rgba(0,0,0,.15);
 }
 .progress-striped .bar {
   background-color: #149bdf;
@@ -6312,9 +6288,9 @@ h3 {
   box-shadow: none;
 }
 .navbar #team-nav ul li:first-child {
-  -webkit-box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15);
-  -moz-box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15);
-  box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15);
+  -webkit-box-shadow: inset 1px 0 0 rgba(0,0,0, .15);
+  -moz-box-shadow: inset 1px 0 0 rgba(0,0,0, .15);
+  box-shadow: inset 1px 0 0 rgba(0,0,0, .15);
 }
 .navbar .nav {
   margin: 12px 0 0 10px;
@@ -7036,7 +7012,7 @@ ul.tag-list li {
 }
 .group-list > li.empty:hover,
 .events > li.empty:hover {
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
   background-image: none;
   background-color: inherit;
 }
@@ -7285,7 +7261,7 @@ ul.tag-list li {
   display: inline-block;
 }
 .inactive .group-list > li:hover {
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
   background-image: none;
   background-color: inherit;
   border-color: #f2f4f7;
@@ -7483,26 +7459,6 @@ ol.context:hover li.active {
 ol.context-line > li > span {
   float: right;
 }
-table.vars.closed {
-  display: none;
-}
-table.vars td,
-table.vars th {
-  border: 0;
-}
-td table.vars {
-  margin-bottom: 0;
-}
-td.code {
-  overflow: hidden;
-}
-td.code > pre {
-  background-color: inherit;
-  color: rgba(0, 0, 0, 0.75);
-  padding: 1px 3px;
-  border: 0;
-  margin-bottom: 0;
-}
 .module {
   margin-bottom: 20px;
 }
@@ -7623,7 +7579,7 @@ legend {
   *background-color: #4593de;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
   font-weight: bold;
 }
 .btn-primary:hover,
@@ -8035,26 +7991,60 @@ section.body .uneditable-input {
   -webkit-font-smoothing: antialiased;
   content: "\e003";
 }
-.table th {
+table.table th {
   vertical-align: top;
 }
-.table td {
+table.table td {
   vertical-align: middle;
 }
-.table th,
-.table td {
+table.table.closed,
+table.vars.closed {
+  display: none;
+}
+table.table th,
+table.vars th,
+table.table td,
+table.vars td {
   border: none;
+  padding: 5px 8px;
 }
-.table td.values {
-  padding: 0;
+table.table td.values,
+table.vars td.values,
+table.table td.code,
+table.vars td.code {
+  overflow: hidden;
+}
+table.table td.values > pre,
+table.vars td.values > pre,
+table.table td.code > pre,
+table.vars td.code > pre {
+  background-color: inherit;
+  color: rgba(0, 0, 0, 0.75);
+  padding: 1px 3px;
+  border: 0;
+  margin-bottom: 0;
+}
+table.vars td,
+table.vars th {
+  border: 0;
+  vertical-align: top;
+}
+table.vars td table {
+  border-top: 0;
+  margin-top: -5px;
+  margin-bottom: 5px;
 }
 .table-striped {
   border-top: 2px solid #F4F6F9;
 }
 .table-striped tbody tr:nth-child(odd) td,
-.table-striped .table-striped tbody tr:nth-child(odd) th {
+.table-striped tbody tr:nth-child(odd) th {
   background-color: #F4F6F9;
 }
+.table-striped tbody tr:nth-child(even) td,
+.table-striped tbody tr:nth-child(even) th {
+  background-color: #fff;
+}
 .nav-tabs {
   border-bottom: 2px solid #dee3e9;
 }
@@ -8117,6 +8107,12 @@ section.body .uneditable-input {
   color: #aaa;
 }
 .toggle-expand {
+  padding: 0 !important;
+}
+.toggle-expand a {
   display: block;
-  padding: 8px;
+  text-align: center;
+  padding: 3px 5px;
+  font-size: 0.9em;
+  background: #dee3e9;
 }
diff --git a/src/sentry/static/sentry/styles/sentry.css b/src/sentry/static/sentry/styles/sentry.css
index eb07da445e..deaf832173 100644
--- a/src/sentry/static/sentry/styles/sentry.css
+++ b/src/sentry/static/sentry/styles/sentry.css
@@ -859,10 +859,10 @@ input[type="color"],
   -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
   -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
   box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
-  -webkit-transition: border linear 0.2s, box-shadow linear 0.2s;
-  -moz-transition: border linear 0.2s, box-shadow linear 0.2s;
-  -o-transition: border linear 0.2s, box-shadow linear 0.2s;
-  transition: border linear 0.2s, box-shadow linear 0.2s;
+  -webkit-transition: border linear .2s, box-shadow linear .2s;
+  -moz-transition: border linear .2s, box-shadow linear .2s;
+  -o-transition: border linear .2s, box-shadow linear .2s;
+  transition: border linear .2s, box-shadow linear .2s;
 }
 textarea:focus,
 input[type="text"]:focus,
@@ -885,9 +885,9 @@ input[type="color"]:focus,
   outline: thin dotted \9;
   /* IE6-9 */
 
-  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
-  -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
-  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
+  -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
+  -moz-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
+  box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(82,168,236,.6);
 }
 input[type="radio"],
 input[type="checkbox"] {
@@ -1041,64 +1041,40 @@ textarea,
 .controls-row [class*="span"] + [class*="span"] {
   margin-left: 20px;
 }
-input.span12,
-textarea.span12,
-.uneditable-input.span12 {
+input.span12, textarea.span12, .uneditable-input.span12 {
   width: 926px;
 }
-input.span11,
-textarea.span11,
-.uneditable-input.span11 {
+input.span11, textarea.span11, .uneditable-input.span11 {
   width: 846px;
 }
-input.span10,
-textarea.span10,
-.uneditable-input.span10 {
+input.span10, textarea.span10, .uneditable-input.span10 {
   width: 766px;
 }
-input.span9,
-textarea.span9,
-.uneditable-input.span9 {
+input.span9, textarea.span9, .uneditable-input.span9 {
   width: 686px;
 }
-input.span8,
-textarea.span8,
-.uneditable-input.span8 {
+input.span8, textarea.span8, .uneditable-input.span8 {
   width: 606px;
 }
-input.span7,
-textarea.span7,
-.uneditable-input.span7 {
+input.span7, textarea.span7, .uneditable-input.span7 {
   width: 526px;
 }
-input.span6,
-textarea.span6,
-.uneditable-input.span6 {
+input.span6, textarea.span6, .uneditable-input.span6 {
   width: 446px;
 }
-input.span5,
-textarea.span5,
-.uneditable-input.span5 {
+input.span5, textarea.span5, .uneditable-input.span5 {
   width: 366px;
 }
-input.span4,
-textarea.span4,
-.uneditable-input.span4 {
+input.span4, textarea.span4, .uneditable-input.span4 {
   width: 286px;
 }
-input.span3,
-textarea.span3,
-.uneditable-input.span3 {
+input.span3, textarea.span3, .uneditable-input.span3 {
   width: 206px;
 }
-input.span2,
-textarea.span2,
-.uneditable-input.span2 {
+input.span2, textarea.span2, .uneditable-input.span2 {
   width: 126px;
 }
-input.span1,
-textarea.span1,
-.uneditable-input.span1 {
+input.span1, textarea.span1, .uneditable-input.span1 {
   width: 46px;
 }
 .controls-row {
@@ -2568,7 +2544,7 @@ button.close {
   *background-color: #e6e6e6;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
   border: 1px solid #bbbbbb;
   *border: 0;
   border-bottom-color: #a2a2a2;
@@ -2576,9 +2552,9 @@ button.close {
   -moz-border-radius: 4px;
   border-radius: 4px;
   *margin-left: .3em;
-  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
-  -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
-  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
+  -webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
+  -moz-box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
+  box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
 }
 .btn:hover,
 .btn:active,
@@ -2620,9 +2596,9 @@ button.close {
   background-color: #d9d9d9 \9;
   background-image: none;
   outline: 0;
-  -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
-  -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
-  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
+  -webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
+  -moz-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
+  box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
 }
 .btn.disabled,
 .btn[disabled] {
@@ -2709,7 +2685,7 @@ input[type="button"].btn-block {
   *background-color: #4560de;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-primary:hover,
 .btn-primary:active,
@@ -2740,7 +2716,7 @@ input[type="button"].btn-block {
   *background-color: #f89406;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-warning:hover,
 .btn-warning:active,
@@ -2771,7 +2747,7 @@ input[type="button"].btn-block {
   *background-color: #bd362f;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-danger:hover,
 .btn-danger:active,
@@ -2802,7 +2778,7 @@ input[type="button"].btn-block {
   *background-color: #51a351;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-success:hover,
 .btn-success:active,
@@ -2833,7 +2809,7 @@ input[type="button"].btn-block {
   *background-color: #2f96b4;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-info:hover,
 .btn-info:active,
@@ -2864,7 +2840,7 @@ input[type="button"].btn-block {
   *background-color: #222222;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .btn-inverse:hover,
 .btn-inverse:active,
@@ -3029,9 +3005,9 @@ input[type="submit"].btn.btn-mini {
 .btn-group > .btn + .dropdown-toggle {
   padding-left: 8px;
   padding-right: 8px;
-  -webkit-box-shadow: inset 1px 0 0 rgba(255, 255, 255, 0.125), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
-  -moz-box-shadow: inset 1px 0 0 rgba(255, 255, 255, 0.125), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
-  box-shadow: inset 1px 0 0 rgba(255, 255, 255, 0.125), inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
+  -webkit-box-shadow: inset 1px 0 0 rgba(255,255,255,.125), inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
+  -moz-box-shadow: inset 1px 0 0 rgba(255,255,255,.125), inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
+  box-shadow: inset 1px 0 0 rgba(255,255,255,.125), inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
   *padding-top: 5px;
   *padding-bottom: 5px;
 }
@@ -3053,9 +3029,9 @@ input[type="submit"].btn.btn-mini {
 }
 .btn-group.open .dropdown-toggle {
   background-image: none;
-  -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
-  -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
-  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
+  -webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
+  -moz-box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
+  box-shadow: inset 0 2px 4px rgba(0,0,0,.15), 0 1px 2px rgba(0,0,0,.05);
 }
 .btn-group.open .btn.dropdown-toggle {
   background-color: #e6e6e6;
@@ -3695,17 +3671,17 @@ input[type="submit"].btn.btn-mini {
 }
 .navbar-fixed-top .navbar-inner,
 .navbar-static-top .navbar-inner {
-  -webkit-box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
-  -moz-box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
-  box-shadow: 0 1px 10px rgba(0, 0, 0, 0.1);
+  -webkit-box-shadow: 0 1px 10px rgba(0,0,0,.1);
+  -moz-box-shadow: 0 1px 10px rgba(0,0,0,.1);
+  box-shadow: 0 1px 10px rgba(0,0,0,.1);
 }
 .navbar-fixed-bottom {
   bottom: 0;
 }
 .navbar-fixed-bottom .navbar-inner {
-  -webkit-box-shadow: 0 -1px 10px rgba(0, 0, 0, 0.1);
-  -moz-box-shadow: 0 -1px 10px rgba(0, 0, 0, 0.1);
-  box-shadow: 0 -1px 10px rgba(0, 0, 0, 0.1);
+  -webkit-box-shadow: 0 -1px 10px rgba(0,0,0,.1);
+  -moz-box-shadow: 0 -1px 10px rgba(0,0,0,.1);
+  box-shadow: 0 -1px 10px rgba(0,0,0,.1);
 }
 .navbar .nav {
   position: relative;
@@ -3768,10 +3744,10 @@ input[type="submit"].btn.btn-mini {
   *background-color: #e5e5e5;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
-  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.075);
-  -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.075);
-  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.075);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
+  -webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,.1), 0 1px 0 rgba(255,255,255,.075);
+  -moz-box-shadow: inset 0 1px 0 rgba(255,255,255,.1), 0 1px 0 rgba(255,255,255,.075);
+  box-shadow: inset 0 1px 0 rgba(255,255,255,.1), 0 1px 0 rgba(255,255,255,.075);
 }
 .navbar .btn-navbar:hover,
 .navbar .btn-navbar:active,
@@ -3940,9 +3916,9 @@ input[type="submit"].btn.btn-mini {
   color: #ffffff;
   background-color: #515151;
   border-color: #111111;
-  -webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 0 rgba(255, 255, 255, 0.15);
-  -moz-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 0 rgba(255, 255, 255, 0.15);
-  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1), 0 1px 0 rgba(255, 255, 255, 0.15);
+  -webkit-box-shadow: inset 0 1px 2px rgba(0,0,0,.1), 0 1px 0 rgba(255,255,255,.15);
+  -moz-box-shadow: inset 0 1px 2px rgba(0,0,0,.1), 0 1px 0 rgba(255,255,255,.15);
+  box-shadow: inset 0 1px 2px rgba(0,0,0,.1), 0 1px 0 rgba(255,255,255,.15);
   -webkit-transition: none;
   -moz-transition: none;
   -o-transition: none;
@@ -3985,7 +3961,7 @@ input[type="submit"].btn.btn-mini {
   *background-color: #040404;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
 }
 .navbar-inverse .btn-navbar:hover,
 .navbar-inverse .btn-navbar:active,
@@ -4241,10 +4217,10 @@ input[type="submit"].btn.btn-mini {
   outline: none;
 }
 .modal.fade {
-  -webkit-transition: opacity 0.3s linear, top 0.3s ease-out;
-  -moz-transition: opacity 0.3s linear, top 0.3s ease-out;
-  -o-transition: opacity 0.3s linear, top 0.3s ease-out;
-  transition: opacity 0.3s linear, top 0.3s ease-out;
+  -webkit-transition: opacity .3s linear, top .3s ease-out;
+  -moz-transition: opacity .3s linear, top .3s ease-out;
+  -o-transition: opacity .3s linear, top .3s ease-out;
+  transition: opacity .3s linear, top .3s ease-out;
   top: -25%;
 }
 .modal.fade.in {
@@ -4742,9 +4718,9 @@ a.badge:hover {
   transition: width 0.6s ease;
 }
 .progress .bar + .bar {
-  -webkit-box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
-  -moz-box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
-  box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
+  -webkit-box-shadow: inset 1px 0 0 rgba(0,0,0,.15), inset 0 -1px 0 rgba(0,0,0,.15);
+  -moz-box-shadow: inset 1px 0 0 rgba(0,0,0,.15), inset 0 -1px 0 rgba(0,0,0,.15);
+  box-shadow: inset 1px 0 0 rgba(0,0,0,.15), inset 0 -1px 0 rgba(0,0,0,.15);
 }
 .progress-striped .bar {
   background-color: #149bdf;
@@ -6312,9 +6288,9 @@ h3 {
   box-shadow: none;
 }
 .navbar #team-nav ul li:first-child {
-  -webkit-box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15);
-  -moz-box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15);
-  box-shadow: inset 1px 0 0 rgba(0, 0, 0, 0.15);
+  -webkit-box-shadow: inset 1px 0 0 rgba(0,0,0, .15);
+  -moz-box-shadow: inset 1px 0 0 rgba(0,0,0, .15);
+  box-shadow: inset 1px 0 0 rgba(0,0,0, .15);
 }
 .navbar .nav {
   margin: 12px 0 0 10px;
@@ -7036,7 +7012,7 @@ ul.tag-list li {
 }
 .group-list > li.empty:hover,
 .events > li.empty:hover {
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
   background-image: none;
   background-color: inherit;
 }
@@ -7285,7 +7261,7 @@ ul.tag-list li {
   display: inline-block;
 }
 .inactive .group-list > li:hover {
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
   background-image: none;
   background-color: inherit;
   border-color: #f2f4f7;
@@ -7483,26 +7459,6 @@ ol.context:hover li.active {
 ol.context-line > li > span {
   float: right;
 }
-table.vars.closed {
-  display: none;
-}
-table.vars td,
-table.vars th {
-  border: 0;
-}
-td table.vars {
-  margin-bottom: 0;
-}
-td.code {
-  overflow: hidden;
-}
-td.code > pre {
-  background-color: inherit;
-  color: rgba(0, 0, 0, 0.75);
-  padding: 1px 3px;
-  border: 0;
-  margin-bottom: 0;
-}
 .module {
   margin-bottom: 20px;
 }
@@ -7623,7 +7579,7 @@ legend {
   *background-color: #4593de;
   /* Darken IE7 buttons by default so they stand out more given they won't have borders */
 
-  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
+  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
   font-weight: bold;
 }
 .btn-primary:hover,
@@ -8035,26 +7991,60 @@ section.body .uneditable-input {
   -webkit-font-smoothing: antialiased;
   content: "\e003";
 }
-.table th {
+table.table th {
   vertical-align: top;
 }
-.table td {
+table.table td {
   vertical-align: middle;
 }
-.table th,
-.table td {
+table.table.closed,
+table.vars.closed {
+  display: none;
+}
+table.table th,
+table.vars th,
+table.table td,
+table.vars td {
   border: none;
+  padding: 5px 8px;
 }
-.table td.values {
-  padding: 0;
+table.table td.values,
+table.vars td.values,
+table.table td.code,
+table.vars td.code {
+  overflow: hidden;
+}
+table.table td.values > pre,
+table.vars td.values > pre,
+table.table td.code > pre,
+table.vars td.code > pre {
+  background-color: inherit;
+  color: rgba(0, 0, 0, 0.75);
+  padding: 1px 3px;
+  border: 0;
+  margin-bottom: 0;
+}
+table.vars td,
+table.vars th {
+  border: 0;
+  vertical-align: top;
+}
+table.vars td table {
+  border-top: 0;
+  margin-top: -5px;
+  margin-bottom: 5px;
 }
 .table-striped {
   border-top: 2px solid #F4F6F9;
 }
 .table-striped tbody tr:nth-child(odd) td,
-.table-striped .table-striped tbody tr:nth-child(odd) th {
+.table-striped tbody tr:nth-child(odd) th {
   background-color: #F4F6F9;
 }
+.table-striped tbody tr:nth-child(even) td,
+.table-striped tbody tr:nth-child(even) th {
+  background-color: #fff;
+}
 .nav-tabs {
   border-bottom: 2px solid #dee3e9;
 }
@@ -8117,6 +8107,12 @@ section.body .uneditable-input {
   color: #aaa;
 }
 .toggle-expand {
+  padding: 0 !important;
+}
+.toggle-expand a {
   display: block;
-  padding: 8px;
+  text-align: center;
+  padding: 3px 5px;
+  font-size: 0.9em;
+  background: #dee3e9;
 }
diff --git a/src/sentry/templates/sentry/partial/_event_details.html b/src/sentry/templates/sentry/partial/_event_details.html
index ea2d681a52..bc906aecec 100644
--- a/src/sentry/templates/sentry/partial/_event_details.html
+++ b/src/sentry/templates/sentry/partial/_event_details.html
@@ -16,10 +16,8 @@
             {% for k, v in json_data.iteritems|as_sorted %}
                 <tr>
                     <th class="key">{{ k }}</th>
-                    <td class="values{% if not v|is_dict %} code{% endif %}">
-                        {% with value=v threshold=5 template="sentry/partial/_event_details_code_values.html" %}
-                            {% include template %}
-                        {% endwith %}
+                    <td class="values">
+                        {% render_values v %}
                     </td>
                 </tr>
             {% endfor %}
diff --git a/src/sentry/templates/sentry/partial/_event_details_code_values.html b/src/sentry/templates/sentry/partial/_event_details_code_values.html
deleted file mode 100644
index 0346b20453..0000000000
--- a/src/sentry/templates/sentry/partial/_event_details_code_values.html
+++ /dev/null
@@ -1,30 +0,0 @@
-{% load i18n %}
-{% load sentry_helpers %}
-
-{% if value|is_dict %}
-    {% if value|length > threshold %}
-        <a href="#" class="toggle-expand" onclick="return varToggle(this, $(this).next('.js-expand'));"><span>&#x25b6;</span> {% trans "Expand" %}</a>
-    {% endif %}
-    <table class="js-expand table vars"{% if value|length > threshold %} style="display:none;"{% endif %}>
-        <colgroup>
-            <col style="width:100px;">
-        </colgroup>
-        <tbody>
-            {% for k, v in value.iteritems|as_sorted %}
-                <tr>
-                    <th>{{ k }}</th>
-                    {% if v|is_dict %}
-                        <td class="values code">
-                            {% with value=v %}
-                                {% include template %}
-                            {% endwith %}
-                        </td>
-                    {% else %}
-                        <td class="code"><pre>{{ v|pprint }}</pre></td>
-                    {% endif %}
-            {% endfor %}
-        </tbody>
-    </table>
-{% else %}
-    {{ value|pprint }}
-{% endif %}
diff --git a/src/sentry/templates/sentry/partial/data_values.html b/src/sentry/templates/sentry/partial/data_values.html
new file mode 100644
index 0000000000..75ac655ce8
--- /dev/null
+++ b/src/sentry/templates/sentry/partial/data_values.html
@@ -0,0 +1,41 @@
+{% load i18n %}
+{% load sentry_helpers %}
+
+{% if is_dict %}
+    <table class="table table-striped vars">
+        <colgroup>
+            <col style="width:100px;">
+        </colgroup>
+        <tbody>
+            {% for k, v in value_before_expand %}
+                <tr>
+                    <th>{{ k }}</th>
+                    <td class="values">
+                        {% render_values v %}
+                    </td>
+                </tr>
+            {% endfor %}
+            {% for k, v in value_after_expand %}
+                <tr class="js-expand" style="display:none">
+                    <th>{{ k }}</th>
+                    <td class="values">
+                        {% render_values v %}
+                    </td>
+                </tr>
+            {% endfor %}
+            {% if over_threshold %}
+                <tr>
+                    <td colspan="2" class="toggle-expand">
+                        <a href="javascript:void(0)" onclick="app.utils.varToggle(this, $(this).parent().parent().siblings('.js-expand'));"
+                            data-collapse-label="{% trans "Collapse Context" %}">
+                            {% blocktrans with num=hidden_values %}Expand Context ({{ num }} hidden){% endblocktrans %}
+                        </a>
+                    </td>
+                </tr>
+            {% endif %}
+        </tbody>
+    </table>
+
+{% else %}
+    <pre>{{ value|pprint }}</pre>
+{% endif %}
diff --git a/src/sentry/templates/sentry/partial/interfaces/http.html b/src/sentry/templates/sentry/partial/interfaces/http.html
index efd57f9cfe..e5fe84179d 100644
--- a/src/sentry/templates/sentry/partial/interfaces/http.html
+++ b/src/sentry/templates/sentry/partial/interfaces/http.html
@@ -9,7 +9,7 @@
         <h2>{% trans "Request" %}</h2>
     </div>
     <div class="module-content">
-        <table class="table table-bordered table-striped">
+        <table class="table table-striped">
             <colgroup>
                 <col style="width:60px;">
             </colgroup>
@@ -26,126 +26,39 @@
                 {% endif %}
                 <tr>
                     <th>{% trans "Query:" %}</th>
-                    <td>
-                        <code>{{ query_string|pprint }}</code>
+                    <td class="values">
+                        {% render_values query_string %}
                     </td>
                 </tr>
                 {% if data %}
                     <tr>
                         <th>{% trans "Body:" %}</th>
-                        <td>
-                            {% if data_is_dict %}
-                                {% if data|length > 5 %}
-                                    <a href="#" onclick="return varToggle(this, $('#vHttpBody'))"><span>&#x25b6;</span> {% trans "Body" %}</a>
-                                {% endif %}
-                                <table class="table vars" id="vHttpBody"{% if data|length > 5 %} style="display:none;"{% endif %}>
-                                    <colgroup>
-                                        <col style="width:150px;">
-                                    </colgroup>
-                                    <tbody>
-                                        {% for key, value in data.iteritems|as_sorted %}
-                                            <tr>
-                                                <th>{{ key }}</th>
-                                                <td class="code"><pre>{{ value|pprint }}</pre></td>
-                                            </tr>
-                                        {% endfor %}
-                                    </tbody>
-                                </table>
-                            {% else %}
-                                {% if data|length > 5 %}
-                                    <a href="#" onclick="return varToggle(this, $('#vHttpBody'))"><span>&#x25b6;</span> {% trans "Body" %}</a>
-                                {% endif %}
-                                <div id="vHttpBody"{% if data|length > 5 %} style="display:none;"{% endif %}>
-                                    <pre>{{ data|pprint }}</pre>
-                                </div>
-                            {% endif %}
+                        <td class="values">
+                            {% render_values data %}
                         </td>
                     </tr>
                 {% endif %}
                 {% if cookies %}
                     <tr>
                         <th>{% trans "Cookies:" %}</th>
-                        <td>
-                            {% if cookies_is_dict %}
-                                {% if cookies|length > 5 %}
-                                    <a href="#" onclick="return varToggle(this, $('#vHttpCookies'))"><span>&#x25b6;</span> {% trans "Cookies" %}</a>
-                                {% endif %}
-                                <table class="table vars" id="vHttpCookies"{% if cookies|length > 5 %} style="display:none;"{% endif %}>
-                                    <colgroup>
-                                        <col style="width:150px;">
-                                    </colgroup>
-                                    <tbody>
-                                        {% for key, value in cookies.iteritems|as_sorted %}
-                                            <tr>
-                                                <th>{{ key|to_str }}</th>
-                                                <td class="code"><pre>{{ value|pprint }}</pre></td>
-                                            </tr>
-                                        {% endfor %}
-                                    </tbody>
-                                </table>
-                            {% else %}
-                                {% if cookies|length > 5 %}
-                                    <a href="#" onclick="return varToggle(this, $('#vHttpCookies'))"><span>&#x25b6;</span> {% trans "Cookies" %}</a>
-                                {% endif %}
-                                <div id="vHttpCookies"{% if cookies|length > 5 %} style="display:none;"{% endif %}>
-                                    <pre>{{ cookies|pprint }}</pre>
-                                </div>
-                            {% endif %}
+                        <td class="values">
+                            {% render_values cookies %}
                         </td>
                     </tr>
                 {% endif %}
                 {% if headers %}
                     <tr>
                         <th>{% trans "Headers:" %}</th>
-                        <td>
-                            {% if headers_is_dict %}
-                                {% if headers|length > 5 %}
-                                    <a href="#" onclick="return varToggle(this, $('#vHttpHeaders'))"><span>&#x25b6;</span> {% trans "Headers" %}</a>
-                                {% endif %}
-                                <table class="table vars" id="vHttpHeaders"{% if headers|length > 5 %} style="display:none;"{% endif %}>
-                                    <colgroup>
-                                        <col style="width:150px;">
-                                    </colgroup>
-                                    <tbody>
-                                        {% for key, value in headers.iteritems|as_sorted %}
-                                            <tr>
-                                                <th>{{ key|to_str }}</th>
-                                                <td class="code"><pre>{{ value|pprint }}</pre></td>
-                                            </tr>
-                                        {% endfor %}
-                                    </tbody>
-                                </table>
-                            {% else %}
-                                {% if headers|length > 5 %}
-                                    <a href="#" onclick="return varToggle(this, $('#vHttpHeaders'))"><span>&#x25b6;</span> {% trans "Headers" %}</a>
-                                {% endif %}
-                                <div id="vHttpHeaders"{% if headers|length > 5 %} style="display:none;"{% endif %}>
-                                    <pre>{{ headers|pprint }}</pre>
-                                </div>
-                            {% endif %}
+                        <td class="values">
+                            {% render_values headers %}
                         </td>
                     </tr>
                 {% endif %}
                 {% if env %}
                     <tr>
                         <th>{% trans "Environment:" %}</th>
-                        <td>
-                            {% if env|length > 5 %}
-                                <a href="#" onclick="return varToggle(this, $('#vHttpEnv'))"><span>&#x25b6;</span> {% trans "Environment" %}</a>
-                            {% endif %}
-                            <table class="table vars" id="vHttpEnv"{% if env|length > 5 %} style="display:none;"{% endif %}>
-                                <colgroup>
-                                    <col style="width:150px;">
-                                </colgroup>
-                                <tbody>
-                                    {% for key, value in env.iteritems|as_sorted %}
-                                        <tr>
-                                            <th>{{ key }}</th>
-                                            <td class="code"><pre>{{ value|pprint }}</pre></td>
-                                        </tr>
-                                    {% endfor %}
-                                </tbody>
-                            </table>
+                        <td class="values">
+                            {% render_values env %}
                         </td>
                     </tr>
                 {% endif %}
diff --git a/src/sentry/templates/sentry/partial/interfaces/stacktrace.html b/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
index 66c28e0cb3..2a3d1fe1c4 100644
--- a/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
+++ b/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
@@ -55,25 +55,9 @@
                     {% endif %}
 
                     {% if frame.vars %}
-                        {% if frame.vars|is_dict %}
-                            <table class="table vars stack{{ forloop.counter0 }} expandable">
-                                <colgroup>
-                                    <col style="width:100px;">
-                                </colgroup>
-                                <tbody>
-                                    {% for key, value in frame.vars.iteritems|as_sorted %}
-                                        <tr>
-                                            <th>{{ key }}</th>
-                                            <td class="code"><pre>{{ value|pprint }}</pre></td>
-                                        </tr>
-                                    {% endfor %}
-                                </tbody>
-                            </table>
-                        {% else %}
-                            <div id="v{{ forloop.counter0 }}" style="display:none;">
-                                <pre>{{ frame.vars|pprint }}</pre>
-                            </div>
-                        {% endif %}
+                        <div class="stack{{ forloop.counter0 }} expandable">
+                            {% render_values frame.vars %}
+                        </div>
                     {% endif %}
                 </li>
             {% endfor %}
diff --git a/src/sentry/templatetags/sentry_helpers.py b/src/sentry/templatetags/sentry_helpers.py
index a3b814dc94..04977142bf 100644
--- a/src/sentry/templatetags/sentry_helpers.py
+++ b/src/sentry/templatetags/sentry_helpers.py
@@ -355,3 +355,37 @@ def github_button(user, repo):
         'user': user,
         'repo': repo,
     }
+
+
+@register.inclusion_tag('sentry/partial/data_values.html')
+def render_values(value, threshold=5, collapse_to=3):
+    is_dict = isinstance(value, dict)
+    context = {
+        'is_dict': is_dict,
+        'threshold': threshold,
+        'collapse_to': collapse_to,
+    }
+
+    if is_dict:
+        value = sorted(value.iteritems())
+        value_len = len(value)
+        over_threshold = value_len > threshold
+        if over_threshold:
+            context.update({
+                'over_threshold': over_threshold,
+                'hidden_values': value_len - collapse_to,
+                'value_before_expand': value[:collapse_to],
+                'value_after_expand': value[collapse_to:],
+            })
+        else:
+            context.update({
+                'over_threshold': over_threshold,
+                'hidden_values': 0,
+                'value_before_expand': value,
+                'value_after_expand': [],
+            })
+
+    else:
+        context['value'] = value
+
+    return context
