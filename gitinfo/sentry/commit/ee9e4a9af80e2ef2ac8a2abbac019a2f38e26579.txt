commit ee9e4a9af80e2ef2ac8a2abbac019a2f38e26579
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Dec 26 22:43:51 2012 -0800

    initial work on new group details nav

diff --git a/src/sentry/interfaces.py b/src/sentry/interfaces.py
index 3bae143d13..464370837c 100644
--- a/src/sentry/interfaces.py
+++ b/src/sentry/interfaces.py
@@ -92,8 +92,11 @@ class Interface(object):
     def to_string(self, event):
         return ''
 
+    def get_slug(self):
+        return type(self).__name__.lower()
+
     def get_title(self):
-        return _(self.__class__.__name__)
+        return _(type(self).__name__)
 
     def get_search_context(self, event):
         """
@@ -587,6 +590,9 @@ class Http(Interface):
             'env': self.env,
         })
 
+    def get_title(self):
+        return _('Request')
+
     def get_search_context(self, event):
         return {
             'filters': {
diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index f09f569a7d..51717c1823 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -1248,11 +1248,37 @@ legend {
   }
 }
 
-[class*="icon-"] {
-  background-image: url(@iconSpritePath);
-}
-.icon-white {
-  background-image: url(@iconWhiteSpritePath);
+ul.event-nav {
+  &.fixed {
+    position: fixed;
+    left: 0;
+    right: 0;
+    top: 0;
+    z-index: 1000000;
+    margin: 0 300px 0 0;
+  }
+  padding: 0 20px;
+  margin-top: -20px;
+  margin-left: -20px;
+  margin-right: -20px;
+  background: #eee;
+  border-bottom: 1px solid #ddd;
+  > li {
+    > a {
+      color: @black;
+      .border-radius(0);
+      margin: 0 4px;
+      &:hover,
+      &:focus {
+        background-color: lighten(@linkColor, 5%);
+        color: @white;
+      }
+    }
+    &.active > a {
+      color: @white;
+      background-color: darken(@linkColor, 15%);
+    }
+  }
 }
 
 
@@ -1262,7 +1288,6 @@ legend {
   }
 }
 
-
 @media print {
     body {
         color: @black;
diff --git a/src/sentry/static/sentry/scripts/app.js b/src/sentry/static/sentry/scripts/app.js
index a458961530..b71a61bef6 100644
--- a/src/sentry/static/sentry/scripts/app.js
+++ b/src/sentry/static/sentry/scripts/app.js
@@ -172,6 +172,8 @@
                 });
             });
 
+            $('.event-nav').scrollspy();
+
         }
 
     });
diff --git a/src/sentry/templates/sentry/groups/details.html b/src/sentry/templates/sentry/groups/details.html
index cb677c5bf8..943cf379c3 100644
--- a/src/sentry/templates/sentry/groups/details.html
+++ b/src/sentry/templates/sentry/groups/details.html
@@ -84,13 +84,22 @@
 
 {% block main %}
     {% handle_before_events request group %}
-    <div id="event_list"></div>
+    <div id="details">
+        <div id="event_list"></div>
+    </div>
 
     <section class="body">
-        <ul class="nav nav-pills">
+        <ul class="nav nav-pills event-nav">
             <li{% if page == 'details' %} class="active"{% endif %}>
-                <a href="{% url sentry-group group.project.slug group.id %}">{% trans "Details" %}</a>
+                <a href="{% if page == 'details' %}#details{% else %}{% url sentry-group group.project.slug group.id %}{% endif %}">{% trans "Details" %}</a>
             </li>
+            {% for interface, _ in interface_list %}
+                <li>
+                    <a href="{% if page != 'details' %}{% url sentry-group group.project.slug group.id %}{% endif %}#{{ interface.get_slug }}">
+                        {{ interface.get_title }}
+                    </a>
+                </li>
+            {% endfor %}
             <li{% if page == 'tag_list' %} class="active"{% endif %}>
                 <a href="{% url sentry-group-tags group.project.slug group.id %}">{% trans "Tags" %}</a>
             </li>
diff --git a/src/sentry/templates/sentry/partial/_event_details.html b/src/sentry/templates/sentry/partial/_event_details.html
index 3bbdd51c6c..206d78128b 100644
--- a/src/sentry/templates/sentry/partial/_event_details.html
+++ b/src/sentry/templates/sentry/partial/_event_details.html
@@ -1,8 +1,10 @@
 {% load i18n %}
 {% load sentry_helpers %}
 
-{% for interface in interface_list %}
-    {{ interface }}
+{% for interface, interface_html in interface_list %}
+    <div id="{{ interface.get_slug }}">
+        {{ interface_html }}
+    </div>
 {% endfor %}
 
 {% if json_data %}
diff --git a/src/sentry/templates/sentry/partial/interfaces/exception.html b/src/sentry/templates/sentry/partial/interfaces/exception.html
index 322ff64361..ddd768a992 100644
--- a/src/sentry/templates/sentry/partial/interfaces/exception.html
+++ b/src/sentry/templates/sentry/partial/interfaces/exception.html
@@ -1,5 +1,5 @@
 {% load i18n %}
-<div id="exception" class="module">
+<div class="module">
     <div class="page-header">
         <h2>{% trans "Exception" %}</h2>
     </div>
diff --git a/src/sentry/templates/sentry/partial/interfaces/http.html b/src/sentry/templates/sentry/partial/interfaces/http.html
index 6050b65e3a..b777367937 100644
--- a/src/sentry/templates/sentry/partial/interfaces/http.html
+++ b/src/sentry/templates/sentry/partial/interfaces/http.html
@@ -1,7 +1,7 @@
 {% load i18n %}
 {% load sentry_helpers %}
 
-<div id="request" class="module">
+<div class="module">
     <div class="page-header">
         <a href="{% url sentry-replay event.project.slug event.id %}" class="btn small pull-right">{% trans "Replay this request" %}</a>
         <h2>{% trans "Request" %}</h2>
diff --git a/src/sentry/templates/sentry/partial/interfaces/stacktrace.html b/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
index c6cde76f73..453581ab6b 100644
--- a/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
+++ b/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
@@ -1,7 +1,7 @@
 {% load i18n %}
 {% load sentry_helpers %}
 
-<div id="traceback" class="module">
+<div class="module">
     <div class="page-header">
         <a href="javascript:void(0)" data-container="#raw_stacktrace" data-title="Stacktrace" class="popup btn small pull-right">{% trans "Raw" %}</a>
         {% if system_frames %}
diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index 9c4cecc95a..59a63a75e2 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -48,7 +48,7 @@ def _get_rendered_interfaces(event):
             continue
         if not html:
             continue
-        interface_list.append(mark_safe(html))
+        interface_list.append((interface, mark_safe(html)))
     return interface_list
 
 
