commit ce1c9f0c8766335db651bb4c2b1b0dc66af00d8b
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Aug 1 13:28:36 2011 -0700

    only encode message once in send (fixes #196)

diff --git a/CHANGES b/CHANGES
index 837cbae7ae..127c2770b6 100644
--- a/CHANGES
+++ b/CHANGES
@@ -1,8 +1,9 @@
 1.8.7
 
-* Added "Clear Feed" option (thanks to Lior Sion).
+* Added "Clear Feed" option.
 * Version information will be read from pkg_resources if possible.
-* Cleared up documentation on configuration settings.
+* Cleared up documentation on configuration settings..
+* Performance improvements to ``Client.send()``.
 
 1.8.6.2
 
diff --git a/sentry/client/base.py b/sentry/client/base.py
index ca865a8978..90e1271b7d 100644
--- a/sentry/client/base.py
+++ b/sentry/client/base.py
@@ -197,8 +197,8 @@ class SentryClient(object):
     def send(self, **kwargs):
         "Sends the message to the server."
         if settings.REMOTE_URL:
+            message = base64.b64encode(json.dumps(kwargs).encode('zlib'))
             for url in settings.REMOTE_URL:
-                message = base64.b64encode(json.dumps(kwargs).encode('zlib'))
                 timestamp = time.time()
                 signature = get_signature(message, timestamp)
                 headers={
