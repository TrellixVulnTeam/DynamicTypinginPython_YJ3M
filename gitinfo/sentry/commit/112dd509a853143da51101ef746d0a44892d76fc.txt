commit 112dd509a853143da51101ef746d0a44892d76fc
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Thu Feb 11 11:47:41 2016 -0800

    Don't do DNS lookup for is_valid_url if there are no IPs to validate against
    
    Refs: GH-2665

diff --git a/src/sentry/http.py b/src/sentry/http.py
index 6e58a47f4a..3c79fca0ec 100644
--- a/src/sentry/http.py
+++ b/src/sentry/http.py
@@ -48,6 +48,12 @@ def is_valid_url(url):
     if not parsed.hostname:
         return False
 
+    # If we have no disallowed ips, we can skip any further validation
+    # and there's no point in doing a DNS lookup to validate against
+    # an empty list.
+    if not DISALLOWED_IPS:
+        return True
+
     server_hostname = get_server_hostname()
 
     if parsed.hostname == server_hostname:
