commit ed91eca3cfa5dfa1c46f5bfd072f5d7f5dac3cfb
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Dec 19 17:48:43 2014 -0800

    Handle missing query parts

diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index 13f2e3f305..97ed7fcb68 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -76,6 +76,8 @@ def _get_group_list(request, project):
 
     if tags:
         query_kwargs['tags'] = tags
+    else:
+        query_kwargs['tags'] = {}
 
     date_from = request.GET.get('df')
     time_from = request.GET.get('tf')
@@ -110,10 +112,9 @@ def _get_group_list(request, project):
     if query is not None:
         query_result = parse_query(query, request.user)
         # Disclaimer: the following code is disgusting
-        if query_result['query']:
+        if query_result.get('query'):
             query_kwargs['query'] = query_result['query']
-        if query_result['tags']:
-            query_kwargs.setdefault('tags', {})
+        if query_result.get('tags'):
             query_kwargs['tags'].update(query_result['tags'])
 
     results = app.search.query(**query_kwargs)
