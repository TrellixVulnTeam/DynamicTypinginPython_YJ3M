commit 436da598f443d3f0db649bdf73706b1614eff1fb
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Fri Mar 31 16:53:41 2017 -0700

    use camel case in release head commit serializers (#5179)

diff --git a/src/sentry/api/endpoints/organization_release_details.py b/src/sentry/api/endpoints/organization_release_details.py
index 55f67f417b..c041bb0699 100644
--- a/src/sentry/api/endpoints/organization_release_details.py
+++ b/src/sentry/api/endpoints/organization_release_details.py
@@ -47,7 +47,7 @@ class ReleaseSerializer(serializers.Serializer):
     dateStarted = serializers.DateTimeField(required=False)
     dateReleased = serializers.DateTimeField(required=False)
     commits = ListField(child=CommitSerializer(), required=False)
-    head_commits = ListField(child=ReleaseHeadCommitSerializer(), required=False)
+    headCommits = ListField(child=ReleaseHeadCommitSerializer(), required=False)
 
 
 class OrganizationReleaseDetailsEndpoint(OrganizationReleasesBaseEndpoint):
@@ -141,7 +141,7 @@ class OrganizationReleaseDetailsEndpoint(OrganizationReleasesBaseEndpoint):
             # TODO(dcramer): handle errors with release payloads
             release.set_commits(commit_list)
 
-        head_commits = result.get('head_commits')
+        head_commits = result.get('headCommits')
         if head_commits:
             fetch_commits = request.user.is_authenticated() and not commit_list
             release.set_head_commits(head_commits, request.user, fetch_commits=fetch_commits)
diff --git a/src/sentry/api/endpoints/organization_releases.py b/src/sentry/api/endpoints/organization_releases.py
index 231025be07..ae46daa33e 100644
--- a/src/sentry/api/endpoints/organization_releases.py
+++ b/src/sentry/api/endpoints/organization_releases.py
@@ -37,7 +37,7 @@ def list_org_releases_scenario(runner):
 
 class ReleaseSerializerWithProjects(ReleaseSerializer):
     projects = ListField()
-    head_commits = ListField(child=ReleaseHeadCommitSerializer(), required=False)
+    headCommits = ListField(child=ReleaseHeadCommitSerializer(), required=False)
 
 
 class OrganizationReleasesEndpoint(OrganizationReleasesBaseEndpoint):
@@ -162,7 +162,7 @@ class OrganizationReleasesEndpoint(OrganizationReleasesBaseEndpoint):
             if commit_list:
                 release.set_commits(commit_list)
 
-            head_commits = result.get('head_commits')
+            head_commits = result.get('headCommits')
             if head_commits:
                 fetch_commits = request.user.is_authenticated() and not commit_list
                 release.set_head_commits(head_commits, request.user, fetch_commits=fetch_commits)
diff --git a/src/sentry/api/serializers/rest_framework/release_head_commit.py b/src/sentry/api/serializers/rest_framework/release_head_commit.py
index b92e9d0722..32bc4e860a 100644
--- a/src/sentry/api/serializers/rest_framework/release_head_commit.py
+++ b/src/sentry/api/serializers/rest_framework/release_head_commit.py
@@ -4,6 +4,6 @@ from rest_framework import serializers
 
 
 class ReleaseHeadCommitSerializer(serializers.Serializer):
-    current_id = serializers.CharField(max_length=64)
+    currentId = serializers.CharField(max_length=64)
     repository = serializers.CharField(max_length=64)
-    previous_id = serializers.CharField(max_length=64, required=False)
+    previousId = serializers.CharField(max_length=64, required=False)
diff --git a/src/sentry/models/release.py b/src/sentry/models/release.py
index f4be05c271..93dd355343 100644
--- a/src/sentry/models/release.py
+++ b/src/sentry/models/release.py
@@ -242,7 +242,7 @@ class Release(Model):
             commit = Commit.objects.get_or_create(
                 organization_id=self.organization_id,
                 repository_id=repo.id,
-                key=head_commit['current_id'],
+                key=head_commit['currentId'],
             )[0]
             # update head commit for repo/release if exists
             ReleaseHeadCommit.objects.create_or_update(
@@ -261,8 +261,8 @@ class Release(Model):
 
                 # if previous commit isn't provided, try to get from
                 # previous release otherwise, give up
-                if head_commit.get('previous_id'):
-                    start_sha = head_commit['previous_id']
+                if head_commit.get('previousId'):
+                    start_sha = head_commit['previousId']
                 elif prev_release:
                     try:
                         start_sha = Commit.objects.filter(
diff --git a/tests/sentry/api/endpoints/test_organization_release_details.py b/tests/sentry/api/endpoints/test_organization_release_details.py
index 8e8d9ceeff..6f8f628a8f 100644
--- a/tests/sentry/api/endpoints/test_organization_release_details.py
+++ b/tests/sentry/api/endpoints/test_organization_release_details.py
@@ -138,9 +138,9 @@ class UpdateReleaseDetailsTest(APITestCase):
         })
         response = self.client.put(url, {
             'ref': 'master',
-            'head_commits': [
-                {'current_id': 'a' * 40, 'repository': repo.name},
-                {'current_id': 'b' * 40, 'repository': repo2.name},
+            'headCommits': [
+                {'currentId': 'a' * 40, 'repository': repo.name},
+                {'currentId': 'b' * 40, 'repository': repo2.name},
             ],
         })
 
diff --git a/tests/sentry/api/endpoints/test_organization_releases.py b/tests/sentry/api/endpoints/test_organization_releases.py
index 09bbd920a9..4e5d8bb3a3 100644
--- a/tests/sentry/api/endpoints/test_organization_releases.py
+++ b/tests/sentry/api/endpoints/test_organization_releases.py
@@ -469,9 +469,9 @@ class OrganizationReleaseCreateTest(APITestCase):
         })
         response = self.client.post(url, data={
             'version': '1.2.1',
-            'head_commits': [
-                {'current_id': 'a' * 40, 'repository': repo.name},
-                {'current_id': 'b' * 40, 'repository': repo2.name},
+            'headCommits': [
+                {'currentId': 'a' * 40, 'repository': repo.name},
+                {'currentId': 'b' * 40, 'repository': repo2.name},
             ],
             'projects': [project.slug]
         })
@@ -673,9 +673,9 @@ class OrganizationReleaseCreateTest(APITestCase):
 
         response = self.client.post(url, data={
             'version': '1.2.1',
-            'head_commits': [
-                {'current_id': 'a' * 40, 'repository': repo.name},
-                {'current_id': 'b' * 40, 'repository': repo2.name},
+            'headCommits': [
+                {'currentId': 'a' * 40, 'repository': repo.name},
+                {'currentId': 'b' * 40, 'repository': repo2.name},
             ],
             'projects': [project1.slug]
         }, HTTP_AUTHORIZATION='Bearer {}'.format(api_token.token))
