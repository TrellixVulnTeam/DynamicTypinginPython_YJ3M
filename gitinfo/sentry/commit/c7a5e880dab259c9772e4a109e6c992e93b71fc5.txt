commit c7a5e880dab259c9772e4a109e6c992e93b71fc5
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Sep 28 11:09:37 2015 -0700

    Correctly handle empty query value (fixes GH-2027)

diff --git a/src/sentry/static/sentry/app/views/stream/filters.jsx b/src/sentry/static/sentry/app/views/stream/filters.jsx
index d08cc734f2..e7e5f4934c 100644
--- a/src/sentry/static/sentry/app/views/stream/filters.jsx
+++ b/src/sentry/static/sentry/app/views/stream/filters.jsx
@@ -13,7 +13,7 @@ var StreamFilters = React.createClass({
       defaultQuery: "",
       sort: "",
       filter: "",
-      query: "",
+      query: null,
       onFilterChange: function() {},
       onSortChange: function() {},
       onSearch: function() {}
diff --git a/src/sentry/static/sentry/app/views/stream/searchBar.jsx b/src/sentry/static/sentry/app/views/stream/searchBar.jsx
index 8c085b3d40..8ef10d5cb2 100644
--- a/src/sentry/static/sentry/app/views/stream/searchBar.jsx
+++ b/src/sentry/static/sentry/app/views/stream/searchBar.jsx
@@ -26,7 +26,7 @@ var SearchBar = React.createClass({
   getDefaultProps() {
     return {
       defaultQuery: "",
-      query: "",
+      query: null,
       onSearch: function() {},
       onQueryChange: function() {},
 
@@ -63,7 +63,7 @@ var SearchBar = React.createClass({
 
   getInitialState() {
     return {
-      query: this.props.query || this.props.defaultQuery,
+      query: this.props.query !== null ? this.props.query : this.props.defaultQuery,
 
       searchTerm: '',
       searchItems: [],
diff --git a/tests/js/spec/views/stream/searchBar.spec.jsx b/tests/js/spec/views/stream/searchBar.spec.jsx
index 8244a3bcc0..c9b04cf156 100644
--- a/tests/js/spec/views/stream/searchBar.spec.jsx
+++ b/tests/js/spec/views/stream/searchBar.spec.jsx
@@ -171,6 +171,15 @@ describe("SearchBar", function() {
       });
     });
 
+    it("handles an empty query", function () {
+      let props = {
+        query: "",
+        defaultQuery: "is:unresolved"
+      };
+      let wrapper = React.render(<this.ContextStubbedSearchBar {...props} />, document.body).refs.wrapped;
+      expect(wrapper.state.query).to.eql("");
+    });
+
   });
 
   describe("updateAutoCompleteItems()", function() {
