commit 67bcabad246fd02af044f6d947bade09446dada6
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Jul 26 15:25:53 2014 +0200

    Move manage project notifications code into controller

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 5ff58c2c08..19d4401b42 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -425,6 +425,7 @@ SENTRY_STATIC_BUNDLES = {
                 "sentry/app/controllers/manageAccessGroupMembers.js",
                 "sentry/app/controllers/manageAccessGroupProjects.js",
                 "sentry/app/controllers/manageProject.js",
+                "sentry/app/controllers/manageProjectNotifications.js",
                 "sentry/app/controllers/manageTeamOwnership.js",
                 "sentry/app/controllers/manageTeamSettings.js",
                 "sentry/app/controllers/projectStream.js",
diff --git a/src/sentry/static/sentry/app/base.js b/src/sentry/static/sentry/app/base.js
index 49a76e3009..b712497489 100644
--- a/src/sentry/static/sentry/app/base.js
+++ b/src/sentry/static/sentry/app/base.js
@@ -491,44 +491,6 @@
 
         }),
 
-        ProjectNotificationsPage: BasePage.extend({
-            initialize: function(){
-                BasePage.prototype.initialize.apply(this, arguments);
-
-                $("input[type=range]").each(_.bind(function loop(n, el){
-                    var $el = $(el),
-                        min = parseInt($el.attr('min'), 10),
-                        max = parseInt($el.attr('max'), 10),
-                        step = parseInt($el.attr('step'), 10),
-                        $value = $('<span class="value"></span>');
-
-                    $el.on("slider:ready", _.bind(function sliderready(event, data) {
-                        $value.appendTo(data.el);
-                        $value.html(this.formatThreshold(data.value));
-                    }, this)).on("slider:changed", _.bind(function sliderchanged(event, data) {
-                        $value.html(this.formatThreshold(data.value));
-                    }, this)).simpleSlider({
-                        range: [min, max],
-                        step: step,
-                        snap: true
-                    });
-                }, this));
-
-                $("#tag_list input").each(function(_, el){
-                    $(el).addClass('span6');
-                    app.utils.makeSearchableTagsInput(el);
-                });
-            },
-
-            formatThreshold: function formatThreshold(value) {
-                if (!value) {
-                    return 'Disabled';
-                }
-                return value + '%';
-            }
-
-        }),
-
         NewProjectPage: BasePage.extend({
 
             initialize: function(data){
diff --git a/src/sentry/static/sentry/app/controllers/manageProjectNotifications.js b/src/sentry/static/sentry/app/controllers/manageProjectNotifications.js
new file mode 100644
index 0000000000..cffa4609f1
--- /dev/null
+++ b/src/sentry/static/sentry/app/controllers/manageProjectNotifications.js
@@ -0,0 +1,37 @@
+(function(){
+  'use strict';
+
+  function formatThreshold(value) {
+    if (!value) {
+      return 'Disabled';
+    }
+    return value + '%';
+  }
+
+  SentryApp.classy.controller({
+    name: 'ManageProjectNotificationsCtrl',
+
+    inject: ['$scope'],
+
+    init: function() {
+      $("input[type=range]").each(function loop(n, el){
+          var $el = $(el),
+              min = parseInt($el.attr('min'), 10),
+              max = parseInt($el.attr('max'), 10),
+              step = parseInt($el.attr('step'), 10),
+              $value = $('<span class="value"></span>');
+
+          $el.on("slider:ready", function sliderready(event, data) {
+              $value.appendTo(data.el);
+              $value.html(formatThreshold(data.value));
+          }).on("slider:changed", function sliderchanged(event, data) {
+              $value.html(formatThreshold(data.value));
+          }).simpleSlider({
+              range: [min, max],
+              step: step,
+              snap: true
+          });
+      });
+    }
+  });
+}());
diff --git a/src/sentry/templates/sentry/projects/notifications.html b/src/sentry/templates/sentry/projects/notifications.html
index 98d808624f..4f393866e6 100644
--- a/src/sentry/templates/sentry/projects/notifications.html
+++ b/src/sentry/templates/sentry/projects/notifications.html
@@ -6,6 +6,8 @@
 
 {% block title %}{% trans "Notifications" %} | {{ block.super }}{% endblock %}
 
+{% block controller %}ManageProjectNotificationsCtrl{% endblock %}
+
 {% block inner %}
     <div class="page-header">
         <h2>{% trans "Notifications" %}</h2>
@@ -46,8 +48,5 @@
             <button type="submit" class="btn btn-primary">{% trans "Save Changes" %}</button>
         </fieldset>
     </form>
-    <script type="text/javascript">
-    new app.ProjectNotificationsPage();
-    </script>
 {% endblock %}
 
