commit ae2540369ac81a4104af7a078c7b050f5382e324
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 10 21:12:40 2012 -0800

    Fancy javascripts on new project page

diff --git a/src/sentry/static/sentry/scripts/app.js b/src/sentry/static/sentry/scripts/app.js
index 7084c069c6..28fc7a2139 100644
--- a/src/sentry/static/sentry/scripts/app.js
+++ b/src/sentry/static/sentry/scripts/app.js
@@ -146,6 +146,30 @@
 
     });
 
+    app.NewProjectPage = BasePage.extend({
+
+        initialize: function(data){
+            this.el = $(data.el);
+
+            BasePage.prototype.initialize.call(this, data);
+
+            this.el.find('select').select2({width: 'element'});
+
+            if (this.options.canSelectTeam && this.options.canCreateTeam) {
+                $('#new_team').hide();
+                $('a[rel="create-new-team"]').click(function(){
+                    $('#new_team').show();
+                    $('#select_team').hide();
+                });
+                $('a[rel="select-team"]').click(function(){
+                    $('#new_team').hide();
+                    $('#select_team').show();
+                });
+            }
+        }
+
+    });
+
     app.WallPage = BasePage.extend({
 
         initialize: function(){
diff --git a/src/sentry/templates/sentry/projects/new.html b/src/sentry/templates/sentry/projects/new.html
index 65f5462de0..cb03b5cb16 100644
--- a/src/sentry/templates/sentry/projects/new.html
+++ b/src/sentry/templates/sentry/projects/new.html
@@ -1,5 +1,6 @@
 {% extends "sentry/projects/base.html" %}
 
+{% load crispy_forms_tags %}
 {% load i18n %}
 
 {% block title %}{% trans "New Project" %} | {{ block.super }}{% endblock %}
@@ -14,31 +15,50 @@
     <section class="body">
         <p>{% trans "Use this page to create a new project within Sentry. Once done, you'll be able to configure your client to send messages to this project." %}</p>
         <hr>
-        <form class="form-stacked" action="" method="post">
+        <form class="form-stacked" action="" method="post" id="new_project">
             {% csrf_token %}
+
+            {{ project_form|as_crispy_errors }}
             {% for field in project_form %}
                 {% include "sentry/partial/_form_field.html" %}
             {% endfor %}
-            {% if not new_team_form %}
-                {% for field in select_team_form %}
-                    {% include "sentry/partial/_form_field.html" %}
-                {% endfor %}
+
+            {% if select_team_form %}
+                <div id="select_team">
+                    {{ select_team_form|as_crispy_errors }}
+
+                    {% for field in select_team_form %}
+                        {% include "sentry/partial/_form_field.html" %}
+                    {% endfor %}
+        
+                    {% if new_team_form %}
+                        <p><small>You can also <a href="#" rel="create-new-team">create a new team</a>.</small></p>
+                    {% endif %}
+                </div>
             {% endif %}
+    
             {% if new_team_form %}
-                {% if select_team_form %}
-                    <p>{% trans "Select an existing team to manage this project" %}</p>
-                    {% for field in select_team_form %}
+                <div id="new_team">
+                    {% for field in new_team_form %}
                         {% include "sentry/partial/_form_field.html" %}
                     {% endfor %}
-                    <p>{% trans "Or, create a new team" %}</p>
-                {% endif %}
-                {% for field in new_team_form %}
-                    {% include "sentry/partial/_form_field.html" %}
-                {% endfor %}
+
+                    {% if select_team_form %}
+                        <p><small>You can also <a href="#" rel="select-team">select an existing team</a>.</small></p>
+                    {% endif %}
+                </div>
             {% endif %}
+
             <div class="actions">
                 <button type="submit" class="btn btn-primary">{% trans "Save Changes" %}</button>
             </div>
         </form>
     </section>
+    <script>
+    new app.NewProjectPage({
+        el: '#new_project',
+        canSelectTeam: {% if select_team_form %}true{% else %}false{% endif %},
+        canCreateTeam: {% if new_team_form %}true{% else %}false{% endif %},
+    })
+    </script>
 {% endblock %}
