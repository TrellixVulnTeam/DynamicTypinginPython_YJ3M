commit 77df32d412dd278da8f278702cd853982997f56f
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Sat Jun 25 00:06:55 2016 -0700

    Handle 404 on ApiKey edit page (#3594)
    
    Fixes SENTRY-1E5

diff --git a/src/sentry/web/frontend/organization_api_key_settings.py b/src/sentry/web/frontend/organization_api_key_settings.py
index 2da895ab95..8209b1b56d 100644
--- a/src/sentry/web/frontend/organization_api_key_settings.py
+++ b/src/sentry/web/frontend/organization_api_key_settings.py
@@ -3,6 +3,7 @@ from __future__ import absolute_import
 from django import forms
 from django.contrib import messages
 from django.http import HttpResponseRedirect
+from django.shortcuts import get_object_or_404
 from django.utils.translation import ugettext_lazy as _
 
 from sentry.models import ApiKey, AuditLogEntryEvent
@@ -23,7 +24,7 @@ class OrganizationApiKeySettingsView(OrganizationView):
     required_scope = 'org:write'
 
     def handle(self, request, organization, key_id):
-        key = ApiKey.objects.get(organization=organization, id=key_id)
+        key = get_object_or_404(ApiKey, organization=organization, id=key_id)
 
         form = ApiKeyForm(
             request.POST or None, instance=key, initial={
diff --git a/tests/sentry/web/frontend/test_organization_api_key_settings.py b/tests/sentry/web/frontend/test_organization_api_key_settings.py
index 6eb3bb6008..e02faa6220 100644
--- a/tests/sentry/web/frontend/test_organization_api_key_settings.py
+++ b/tests/sentry/web/frontend/test_organization_api_key_settings.py
@@ -44,3 +44,16 @@ class OrganizationApiKeySettingsTest(TestCase):
 
         assert resp.context['organization'] == organization
         assert resp.context['key'] == key
+
+    def test_not_found(self):
+        organization = self.create_organization(name='foo', owner=self.user)
+
+        path = reverse('sentry-organization-api-key-settings', args=[
+            organization.slug, 99999,
+        ])
+
+        self.login_as(self.user)
+
+        resp = self.client.get(path)
+
+        assert resp.status_code == 404
