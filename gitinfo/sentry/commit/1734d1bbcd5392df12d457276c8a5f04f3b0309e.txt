commit 1734d1bbcd5392df12d457276c8a5f04f3b0309e
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Dec 27 15:56:40 2012 -0800

    Improve visualization of expanding context

diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index 6591b30d8d..2133678097 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -856,7 +856,37 @@ td .clippy {
 
 // Code styles
 
+&.expanded div.commands,
+div.commands:hover {
+  .opacity(100);
+  a {
+    color: @infoText;
+  }
+}
+
+div.commands {
+  position: absolute;
+  right: 10px;
+  top: 6px;
+  font-size: 0.9em;
+  .opacity(30);
+
+  a {
+    color: #666;
+    text-decoration: none;
+    span {
+      font-size: 9px;
+      margin-right: 5px;
+    }
+  }
+}
+
+
+ul.traceback { list-style-type: none; margin-left: 0; }
+
 .frame {
+  overflow: hidden;
+  position: relative;
   padding: 5px;
   border: 1px solid #fff;
   margin: -6px -6px 0 -6px;
@@ -869,21 +899,6 @@ td .clippy {
     color: inherit;
   }
 
-  div.commands {
-    position: absolute;
-    right: 10px;
-    top: 6px;
-    font-size: 0.9em;
-    a {
-      color: #666;
-      text-decoration: none;
-      span {
-        font-size: 9px;
-        margin-right: 5px;
-      }
-    }
-  }
-
   .context {
     margin-bottom: 5px;
   }
@@ -898,13 +913,9 @@ td .clippy {
 
   &.expanded {
     color: #000;
-    border-color: darken(@infoBorder, 5%);
 
     > p {
       color: #000;
-      margin: -5px -5px 5px -5px;
-      padding: 5px;
-      background: @infoBackground;
     }
 
     // .context li {
@@ -919,10 +930,6 @@ td .clippy {
     //   }
     // }
   
-    .commands a {
-      color: @infoText;
-    }
-
     .expandable {
       height: auto;
     }
@@ -1056,21 +1063,8 @@ td.code {
 /* tracebacks */
 div.pastebin textarea { padding: 10px; background: #f9f9f9; border-color: #ddd; }
 
-ul.traceback { list-style-type: none; margin-left: 0; }
-ul.traceback li.frame { margin-bottom: 10px; overflow: hidden; position: relative; }
-
-#versioninfo {
-  th { text-align: left; font-family: monospace; padding-right: 20px; }
-  tr:nth-child(odd) {
-    background: #eee;
-  }
-}
-
 .error { background: #ffc; padding: 5px; }
 .specific { color:#cc3300; font-weight:bold; }
-h2 span.commands { font-size:.7em;}
-span.commands a:link {color:#5E5694;}
-pre.exception_value { font-family: sans-serif; font-weight: normal; color: #333; font-size: 1.5em; }
 
 /* message details */
 .server-list, .url-list, .logger-list, .level-list { list-style: none; margin-left: 0; margin-bottom: 0; }
diff --git a/src/sentry/templates/sentry/partial/interfaces/stacktrace.html b/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
index 453581ab6b..d9261c9a89 100644
--- a/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
+++ b/src/sentry/templates/sentry/partial/interfaces/stacktrace.html
@@ -33,7 +33,7 @@
 
                     {% if frame.context or frame.vars %}
                         <div class="commands">
-                            <a href="javascript:void(0)" onclick="$('.frame-{{ forloop.counter0 }}').toggleClass('expanded')">{% trans "Details" %}</a>
+                            <a href="javascript:void(0)" onclick="$('.frame-{{ forloop.counter0 }}').toggleClass('expanded')" title="{% trans "Toggle Context" %}" rel="tooltip" class="tip"><i class="icon-th-list"></i></a>
                         </div>
                     {% endif %}
 
diff --git a/src/sentry/templates/sentry/partial/interfaces/template.html b/src/sentry/templates/sentry/partial/interfaces/template.html
index ed297590da..6a1402d27e 100644
--- a/src/sentry/templates/sentry/partial/interfaces/template.html
+++ b/src/sentry/templates/sentry/partial/interfaces/template.html
@@ -5,12 +5,16 @@
         <a href="javascript:void(0)" data-container="#raw_template" data-title="Template" class="popup btn small pull-right">{% trans "Raw" %}</a>
         <h2>{% trans "Template Error" %}</h2>
     </div>
-    <div class="module-content expanded">
+    <div class="module-content expanded frame">
         <p><code>{{ filename }}</code> at line <code>{{ lineno }}</code></p>
         {% if context %}
+            <div class="commands">
+                <a href="javascript:void(0)" onclick="$('#template .module-content').toggleClass('expanded')" title="{% trans "Toggle Context" %}" rel="tooltip" class="tip"><i class="icon-th-list"></i></a>
+            </div>
+
             <ol start="{{ start_lineno }}" class="context">
                 {% for num, line in context %}
-                    <li{% if num == lineno %} class="active"{% else %} class="expandable"{% endif %} onclick="$('#template .module-content').toggleClass('expanded')"><pre>{{ line }}</pre></li>
+                    <li class="{% if num == lineno %} active{% else %} expandable{% endif %}" onclick="$('#template .module-content').toggleClass('expanded')"><pre>{{ line }}</pre></li>
                 {% endfor %}
             </ol>
         {% endif %}
