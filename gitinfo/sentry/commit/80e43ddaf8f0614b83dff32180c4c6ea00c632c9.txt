commit 80e43ddaf8f0614b83dff32180c4c6ea00c632c9
Author: k-fish <kevan.fisher@sentry.io>
Date:   Mon Jun 29 15:13:26 2020 -0700

    fix(discover): Opening tags in results view should show data (#19608)
    
    If you open the `TagsTable` with 'show tags' in the results view after the page has loaded, it will only show a loading state as `confirmedQuery` is in its resting state (`false`). This affects the tags component since it is not necessarily persistent on the page due to show/hide tags functionality.
    
    This fixes the component so when it is created it will always fetch data independently of `confirmedQuery`.

diff --git a/src/sentry/static/sentry/app/views/eventsV2/tags.tsx b/src/sentry/static/sentry/app/views/eventsV2/tags.tsx
index 7ddf0fd3cd..dd409740cb 100644
--- a/src/sentry/static/sentry/app/views/eventsV2/tags.tsx
+++ b/src/sentry/static/sentry/app/views/eventsV2/tags.tsx
@@ -53,7 +53,7 @@ class Tags extends React.Component<Props, State> {
   };
 
   componentDidMount() {
-    this.fetchData();
+    this.fetchData(true);
   }
 
   componentDidUpdate(prevProps: Props) {
@@ -72,11 +72,14 @@ class Tags extends React.Component<Props, State> {
     return !isAPIPayloadSimilar(thisAPIPayload, otherAPIPayload);
   };
 
-  fetchData = async () => {
+  fetchData = async (forceFetchData = false) => {
     const {api, organization, eventView, location, confirmedQuery} = this.props;
     this.setState({loading: true, error: '', tags: []});
 
-    if (confirmedQuery === false) {
+    // Fetch should be forced after mounting as confirmedQuery isn't guaranteed
+    // since this component can mount/unmount via show/hide tags separate from
+    // data being loaded for the rest of the page.
+    if (!forceFetchData && confirmedQuery === false) {
       return;
     }
 
diff --git a/tests/js/spec/views/eventsV2/tags.spec.jsx b/tests/js/spec/views/eventsV2/tags.spec.jsx
index b21f77ab5b..5ca6f5bb52 100644
--- a/tests/js/spec/views/eventsV2/tags.spec.jsx
+++ b/tests/js/spec/views/eventsV2/tags.spec.jsx
@@ -55,6 +55,7 @@ describe('Tags', function() {
         selection={{projects: [], environments: [], datetime: {}}}
         location={{query: {}}}
         generateUrl={generateUrl}
+        confirmedQuery={false}
       />
     );
 
@@ -93,6 +94,7 @@ describe('Tags', function() {
         selection={{projects: [], environments: [], datetime: {}}}
         location={initialData.router.location}
         generateUrl={generateUrl}
+        confirmedQuery={false}
       />,
       initialData.routerContext
     );
