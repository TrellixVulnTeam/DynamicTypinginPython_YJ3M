commit 92df72122894c2bd9368fa59301452e9e21e1afb
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Dec 2 16:31:51 2015 -0800

    Coerce expires to int

diff --git a/src/sentry/quotas/redis.py b/src/sentry/quotas/redis.py
index 5ca513947e..b38e1327ca 100644
--- a/src/sentry/quotas/redis.py
+++ b/src/sentry/quotas/redis.py
@@ -73,7 +73,7 @@ class RedisQuota(Quota):
         for key, limit, interval in quotas:
             keys.append(self.get_redis_key(key, timestamp, interval))
             expiry = get_next_period_start(interval) + self.grace
-            args.extend((limit, expiry))
+            args.extend((limit, int(expiry)))
 
         client = self.cluster.get_local_client_for_key(str(project.organization.pk))
         rejections = is_rate_limited(client, keys, args)
diff --git a/tests/sentry/quotas/redis/tests.py b/tests/sentry/quotas/redis/tests.py
index 9f73157584..11e12c273c 100644
--- a/tests/sentry/quotas/redis/tests.py
+++ b/tests/sentry/quotas/redis/tests.py
@@ -16,7 +16,7 @@ from sentry.testutils import TestCase
 
 
 def test_is_rate_limited_script():
-    now = int(time.time())
+    now = time.time()
 
     client = StrictRedis(db=9)
 
