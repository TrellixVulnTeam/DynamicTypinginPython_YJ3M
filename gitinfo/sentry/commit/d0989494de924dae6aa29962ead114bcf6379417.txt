commit d0989494de924dae6aa29962ead114bcf6379417
Author: Michael Farrell <micolous+git@gmail.com>
Date:   Tue Apr 30 12:01:48 2013 +0930

    Fix issue with Django 1.5 no longer using simplejson for serialisation, causing it to fail

diff --git a/setup.py b/setup.py
index 36bfa49faa..36d99bd743 100755
--- a/setup.py
+++ b/setup.py
@@ -58,7 +58,7 @@ install_requires = [
     'django-celery>=3.0.11,<3.1.0',
     'celery>=3.0.15,<3.1.0',
     'django-crispy-forms>=1.2.3,<1.3.0',
-    'Django>=1.4.5,<1.5',
+    'Django>=1.4.5,<1.6',
     'django-indexer>=0.3.0,<0.4.0',
     'django-paging>=0.2.4,<0.3.0',
     'django-picklefield>=0.3.0,<0.4.0',
diff --git a/src/sentry/utils/json.py b/src/sentry/utils/json.py
index 31da9b1c56..4a8dab376c 100644
--- a/src/sentry/utils/json.py
+++ b/src/sentry/utils/json.py
@@ -6,8 +6,11 @@ sentry.utils.json
 :license: BSD, see LICENSE for more details.
 """
 
+# Avoid shadowing the standard library json module
+from __future__ import absolute_import
+
 from django.core.serializers.json import DjangoJSONEncoder
-from django.utils import simplejson
+import json
 
 import datetime
 import uuid
@@ -29,8 +32,8 @@ def better_decoder(data):
 
 
 def dumps(value, **kwargs):
-    return simplejson.dumps(value, cls=BetterJSONEncoder, **kwargs)
+    return json.dumps(value, cls=BetterJSONEncoder, **kwargs)
 
 
 def loads(value, **kwargs):
-    return simplejson.loads(value, object_hook=better_decoder)
+    return json.loads(value, object_hook=better_decoder)
