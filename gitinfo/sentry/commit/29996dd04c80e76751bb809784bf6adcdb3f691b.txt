commit 29996dd04c80e76751bb809784bf6adcdb3f691b
Author: Jess MacQueen <macqueen@users.noreply.github.com>
Date:   Fri Apr 28 11:08:30 2017 -0700

    deprecate release date_started (#5306)
    
    * deprecate release date_started
    
    * update changes

diff --git a/CHANGES b/CHANGES
index a7e36ad7c7..feffd10bca 100644
--- a/CHANGES
+++ b/CHANGES
@@ -14,6 +14,10 @@ Schema Changes
 - Added ``UserOption.organization`` column
 - Added ``CommitAuthor.external_id`` column
 
+API Changes
+~~~~~~~~~~~
+- Deprecate `dateStarted` in releases endpoints
+
 Version 8.15
 ------------
 
diff --git a/src/sentry/api/endpoints/organization_release_details.py b/src/sentry/api/endpoints/organization_release_details.py
index 3ffe43ba3e..747c9909c3 100644
--- a/src/sentry/api/endpoints/organization_release_details.py
+++ b/src/sentry/api/endpoints/organization_release_details.py
@@ -45,7 +45,6 @@ def update_organization_release_scenario(runner):
 class ReleaseSerializer(serializers.Serializer):
     ref = serializers.CharField(max_length=64, required=False)
     url = serializers.URLField(required=False)
-    dateStarted = serializers.DateTimeField(required=False)
     dateReleased = serializers.DateTimeField(required=False)
     commits = ListField(child=CommitSerializer(), required=False)
     headCommits = ListField(child=ReleaseHeadCommitSerializerDeprecated(), required=False)
@@ -98,8 +97,6 @@ class OrganizationReleaseDetailsEndpoint(OrganizationReleasesBaseEndpoint):
         :param url url: a URL that points to the release.  This can be the
                         path to an online interface to the sourcecode
                         for instance.
-        :param datetime dateStarted: an optional date that indicates when the
-                                     release process started.
         :param datetime dateReleased: an optional date that indicates when
                                       the release went live.  If not provided
                                       the current time is assumed.
@@ -137,8 +134,6 @@ class OrganizationReleaseDetailsEndpoint(OrganizationReleasesBaseEndpoint):
         was_released = bool(release.date_released)
 
         kwargs = {}
-        if result.get('dateStarted'):
-            kwargs['date_started'] = result['dateStarted']
         if result.get('dateReleased'):
             kwargs['date_released'] = result['dateReleased']
         if result.get('ref'):
diff --git a/src/sentry/api/endpoints/organization_releases.py b/src/sentry/api/endpoints/organization_releases.py
index e0c0c614ae..bc2e50de48 100644
--- a/src/sentry/api/endpoints/organization_releases.py
+++ b/src/sentry/api/endpoints/organization_releases.py
@@ -104,8 +104,6 @@ class OrganizationReleasesEndpoint(OrganizationReleasesBaseEndpoint):
                         for instance.
         :param array projects: a list of project slugs that are involved in
                                this release
-        :param datetime dateStarted: an optional date that indicates when the
-                                     release process started.
         :param datetime dateReleased: an optional date that indicates when
                                       the release went live.  If not provided
                                       the current time is assumed.
@@ -147,7 +145,6 @@ class OrganizationReleasesEndpoint(OrganizationReleasesBaseEndpoint):
                         ref=result.get('ref'),
                         url=result.get('url'),
                         owner=result.get('owner'),
-                        date_started=result.get('dateStarted'),
                         date_released=result.get('dateReleased'),
                     ), True
             except IntegrityError:
diff --git a/src/sentry/api/endpoints/project_release_details.py b/src/sentry/api/endpoints/project_release_details.py
index 528a3c77e7..76f32b4e06 100644
--- a/src/sentry/api/endpoints/project_release_details.py
+++ b/src/sentry/api/endpoints/project_release_details.py
@@ -57,7 +57,6 @@ def update_release_scenario(runner):
 class ReleaseSerializer(serializers.Serializer):
     ref = serializers.CharField(max_length=64, required=False)
     url = serializers.URLField(required=False)
-    dateStarted = serializers.DateTimeField(required=False)
     dateReleased = serializers.DateTimeField(required=False)
     commits = ListField(child=CommitSerializer(), required=False)
 
@@ -111,8 +110,6 @@ class ProjectReleaseDetailsEndpoint(ProjectEndpoint):
         :param url url: a URL that points to the release.  This can be the
                         path to an online interface to the sourcecode
                         for instance.
-        :param datetime dateStarted: an optional date that indicates when the
-                                     release process started.
         :param datetime dateReleased: an optional date that indicates when
                                       the release went live.  If not provided
                                       the current time is assumed.
@@ -137,8 +134,6 @@ class ProjectReleaseDetailsEndpoint(ProjectEndpoint):
         was_released = bool(release.date_released)
 
         kwargs = {}
-        if result.get('dateStarted'):
-            kwargs['date_started'] = result['dateStarted']
         if result.get('dateReleased'):
             kwargs['date_released'] = result['dateReleased']
         if result.get('ref'):
diff --git a/src/sentry/api/endpoints/project_releases.py b/src/sentry/api/endpoints/project_releases.py
index 704c9116c8..bd466dc5e9 100644
--- a/src/sentry/api/endpoints/project_releases.py
+++ b/src/sentry/api/endpoints/project_releases.py
@@ -49,7 +49,6 @@ class ReleaseSerializer(serializers.Serializer):
     ref = serializers.CharField(max_length=64, required=False)
     url = serializers.URLField(required=False)
     owner = UserField(required=False)
-    dateStarted = serializers.DateTimeField(required=False)
     dateReleased = serializers.DateTimeField(required=False)
     commits = ListField(child=CommitSerializer(), required=False)
 
@@ -131,8 +130,6 @@ class ProjectReleasesEndpoint(ProjectEndpoint):
         :param url url: a URL that points to the release.  This can be the
                         path to an online interface to the sourcecode
                         for instance.
-        :param datetime dateStarted: an optional date that indicates when the
-                                     release process started.
         :param datetime dateReleased: an optional date that indicates when
                                       the release went live.  If not provided
                                       the current time is assumed.
@@ -153,7 +150,6 @@ class ProjectReleasesEndpoint(ProjectEndpoint):
                         ref=result.get('ref'),
                         url=result.get('url'),
                         owner=result.get('owner'),
-                        date_started=result.get('dateStarted'),
                         date_released=result.get('dateReleased'),
                     ), True
                 was_released = False
diff --git a/src/sentry/api/serializers/models/release.py b/src/sentry/api/serializers/models/release.py
index 4c971cab79..d814047d98 100644
--- a/src/sentry/api/serializers/models/release.py
+++ b/src/sentry/api/serializers/models/release.py
@@ -210,7 +210,6 @@ class ReleaseSerializer(Serializer):
             'shortVersion': obj.short_version,
             'ref': obj.ref,
             'url': obj.url,
-            'dateStarted': obj.date_started,
             'dateReleased': obj.date_released,
             'dateCreated': obj.date_added,
             'data': obj.data,
diff --git a/src/sentry/models/release.py b/src/sentry/models/release.py
index 7005938e15..0f0e129934 100644
--- a/src/sentry/models/release.py
+++ b/src/sentry/models/release.py
@@ -57,6 +57,7 @@ class Release(Model):
     ref = models.CharField(max_length=64, null=True, blank=True)
     url = models.URLField(null=True, blank=True)
     date_added = models.DateTimeField(default=timezone.now)
+    # DEPRECATED - not available in UI or editable from API
     date_started = models.DateTimeField(null=True, blank=True)
     date_released = models.DateTimeField(null=True, blank=True)
     # arbitrary data recorded with the release
diff --git a/src/sentry/plugins/interfaces/releasehook.py b/src/sentry/plugins/interfaces/releasehook.py
index 9ed30b5883..08ed03f303 100644
--- a/src/sentry/plugins/interfaces/releasehook.py
+++ b/src/sentry/plugins/interfaces/releasehook.py
@@ -21,7 +21,6 @@ class ReleaseHook(object):
         self.project = project
 
     def start_release(self, version, **values):
-        values.setdefault('date_started', timezone.now())
         try:
             with transaction.atomic():
                 release = Release.objects.create(
diff --git a/src/sentry/web/frontend/debug/mail.py b/src/sentry/web/frontend/debug/mail.py
index 84a1dbb66a..7e0fb6dec9 100644
--- a/src/sentry/web/frontend/debug/mail.py
+++ b/src/sentry/web/frontend/debug/mail.py
@@ -444,7 +444,6 @@ def report(request):
                     random.choice('0123456789abcdef') for _ in range(40)
                 ]),
                 date_added=dt,
-                date_started=dt,
             )
 
     def build_issue_summaries():
diff --git a/tests/sentry/plugins/interfaces/test_releasehook.py b/tests/sentry/plugins/interfaces/test_releasehook.py
index 33d48fe4fd..126e95c026 100644
--- a/tests/sentry/plugins/interfaces/test_releasehook.py
+++ b/tests/sentry/plugins/interfaces/test_releasehook.py
@@ -27,7 +27,6 @@ class StartReleaseTest(TestCase):
             organization_id=project.organization_id,
             version=version,
         )
-        assert release.date_started
         assert release.organization
         assert ReleaseProject.objects.get(release=release, project=project)
 
@@ -45,7 +44,6 @@ class StartReleaseTest(TestCase):
             projects=project,
             version=version,
         )
-        assert release.date_started
         assert release.organization == project.organization
 
 
@@ -78,7 +76,6 @@ class FinishReleaseTest(TestCase):
             projects=project,
             version=version,
         )
-        assert release.date_started
         assert release.organization == project.organization
 
 
