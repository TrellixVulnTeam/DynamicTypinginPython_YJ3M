commit 7bed9ef75fc6382b13cc1d12cc306cf1e8945dc6
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Aug 11 13:04:47 2010 -0700

    Show traceback errors inline on page

diff --git a/djangodblog/__init__.py b/djangodblog/__init__.py
index ea4b28d8fc..53a600737d 100644
--- a/djangodblog/__init__.py
+++ b/djangodblog/__init__.py
@@ -1 +1 @@
-__version__ = (2, 1, 6)
\ No newline at end of file
+__version__ = (2, 1, 7)
\ No newline at end of file
diff --git a/djangodblog/admin.py b/djangodblog/admin.py
index dee0a66129..f9bc1c3cf6 100644
--- a/djangodblog/admin.py
+++ b/djangodblog/admin.py
@@ -185,10 +185,11 @@ class ErrorAdmin(EfficientModelAdmin):
         if show_traceback:
             try:
                 extra_context.update(self.get_traceback_context(request, obj))
-            except Exception:
+            except:
                 exc_info = sys.exc_info()
                 logger.exception(exc_info[1])
                 has_traceback = False
+                extra_context['tb_error'] = '%s: %s' % (exc_info[0].__name__, exc_info[1])
         extra_context.update({
             'has_traceback': has_traceback,
             'show_traceback': show_traceback,
diff --git a/djangodblog/templates/admin/djangodblog/error/change_form.html b/djangodblog/templates/admin/djangodblog/error/change_form.html
index a799be728e..8d52ae0408 100644
--- a/djangodblog/templates/admin/djangodblog/error/change_form.html
+++ b/djangodblog/templates/admin/djangodblog/error/change_form.html
@@ -138,7 +138,11 @@
 			<tr>
 				<td colspan="4">
 					{% if show_traceback %}
-						<a href="?raw">&rsaquo; View plain traceback information</a>
+						{% if has_traceback %}
+							<a href="?raw">&rsaquo; View plain traceback information</a>
+						{% else %}
+							<em><strong>Error rendering interactive traceback:</strong> {{ tb_error }}</em>
+						{% endif %}
 					{% else %}
 						{% if has_traceback %}
 							<a href="./">&rsaquo; View interactive traceback information</a>
@@ -164,11 +168,11 @@
 			</tr>
 		</tbody>
 	</table>
-	{% if not show_traceback %}
-		{{ block.super }}
-	{% else %}
+	{% if show_traceback and has_traceback %}
 		<div id="reporter_body">
 			{{ error_body }}
 		</div>
+	{% else %}
+		{{ block.super }}
 	{% endif %}
 {% endblock %}
\ No newline at end of file
