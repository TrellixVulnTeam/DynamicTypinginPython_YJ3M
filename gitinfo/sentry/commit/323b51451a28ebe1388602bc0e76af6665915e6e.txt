commit 323b51451a28ebe1388602bc0e76af6665915e6e
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Oct 26 20:01:59 2013 -0700

    Move web.restapi into api

diff --git a/src/sentry/web/restapi/__init__.py b/src/sentry/api/__init__.py
similarity index 100%
rename from src/sentry/web/restapi/__init__.py
rename to src/sentry/api/__init__.py
diff --git a/src/sentry/web/restapi/authentication.py b/src/sentry/api/authentication.py
similarity index 100%
rename from src/sentry/web/restapi/authentication.py
rename to src/sentry/api/authentication.py
diff --git a/src/sentry/web/restapi/base.py b/src/sentry/api/base.py
similarity index 100%
rename from src/sentry/web/restapi/base.py
rename to src/sentry/api/base.py
diff --git a/src/sentry/web/restapi/endpoints/__init__.py b/src/sentry/api/endpoints/__init__.py
similarity index 100%
rename from src/sentry/web/restapi/endpoints/__init__.py
rename to src/sentry/api/endpoints/__init__.py
diff --git a/src/sentry/web/restapi/endpoints/group_details.py b/src/sentry/api/endpoints/group_details.py
similarity index 98%
rename from src/sentry/web/restapi/endpoints/group_details.py
rename to src/sentry/api/endpoints/group_details.py
index e0013a73ba..3cbbaced15 100644
--- a/src/sentry/web/restapi/endpoints/group_details.py
+++ b/src/sentry/api/endpoints/group_details.py
@@ -2,10 +2,10 @@ from django.utils import timezone
 from django.utils.decorators import method_decorator
 from django.utils.translation import ugettext_lazy as _
 
+from sentry.api.base import BaseView
 from sentry.constants import STATUS_RESOLVED, STATUS_MUTED, STATUS_UNRESOLVED
 from sentry.models import Group, Activity
 from sentry.web.decorators import has_access
-from sentry.web.restapi.base import BaseView
 from sentry.utils.javascript import transform
 
 from rest_framework import serializers, status
diff --git a/src/sentry/web/restapi/endpoints/group_index.py b/src/sentry/api/endpoints/group_index.py
similarity index 83%
rename from src/sentry/web/restapi/endpoints/group_index.py
rename to src/sentry/api/endpoints/group_index.py
index 6a1727ee88..ce5d8fa2b0 100644
--- a/src/sentry/web/restapi/endpoints/group_index.py
+++ b/src/sentry/api/endpoints/group_index.py
@@ -1,9 +1,9 @@
 from django.core.urlresolvers import reverse
 from django.utils.decorators import method_decorator
 
+from sentry.api.base import BaseView
 from sentry.web.decorators import has_access
 from sentry.web.frontend.groups import _get_group_list
-from sentry.web.restapi.base import BaseView
 from sentry.utils.http import absolute_uri
 from sentry.utils.javascript import transform
 
@@ -27,6 +27,6 @@ class GroupListView(BaseView):
         # TODO: need to make a custom serializer
         results = transform(group_list, request)
         for group in results:
-            group['uri'] = absolute_uri(reverse('sentry-api-1-event-details', args=(team.slug, project.slug, group['id'])))
+            group['uri'] = absolute_uri(reverse('sentry-api-0-group-details', args=(team.slug, project.slug, group['id'])))
 
         return Response(results)
diff --git a/src/sentry/web/restapi/permissions.py b/src/sentry/api/permissions.py
similarity index 100%
rename from src/sentry/web/restapi/permissions.py
rename to src/sentry/api/permissions.py
diff --git a/src/sentry/web/restapi/urls.py b/src/sentry/api/urls.py
similarity index 85%
rename from src/sentry/web/restapi/urls.py
rename to src/sentry/api/urls.py
index 700db7d989..45e891b215 100644
--- a/src/sentry/web/restapi/urls.py
+++ b/src/sentry/api/urls.py
@@ -7,9 +7,9 @@ urlpatterns = patterns(
     '',
     url(r'^(?P<team_slug>[^\/]+)/(?P<project_id>[^\/]+)/groups/$',
         GroupListView.as_view(),
-        name='sentry-api-1-event-list'),
+        name='sentry-api-0-group-list'),
     url(r'^(?P<team_slug>[^\/]+)/(?P<project_id>[^\/]+)/groups/(?P<group_id>\d+)/$',
         GroupDetailsView.as_view(),
-        name='sentry-api-1-event-details'),
+        name='sentry-api-0-group-details'),
     # url(r'^api-auth/', include('rest_framework.urls', namespace='rest_framework'))
 )
diff --git a/src/sentry/web/restapi/endpoints/event_resolve.py b/src/sentry/web/restapi/endpoints/event_resolve.py
deleted file mode 100644
index 4aa71f61b5..0000000000
--- a/src/sentry/web/restapi/endpoints/event_resolve.py
+++ /dev/null
@@ -1,40 +0,0 @@
-from django.utils import timezone
-from django.utils.decorators import method_decorator
-
-from sentry.constants import STATUS_RESOLVED
-from sentry.models import Activity, Group
-from sentry.web.decorators import has_access
-from sentry.web.restapi.base import BaseView
-from sentry.utils.javascript import transform
-
-from rest_framework.response import Response
-
-
-class ResolveEventView(BaseView):
-    @method_decorator(has_access)
-    def post(self, request, team, project, group_id):
-        group = Group.objects.get(
-            id=group_id,
-            project=project,
-        )
-
-        now = timezone.now()
-
-        happened = Group.objects.filter(
-            id=group.id,
-        ).exclude(status=STATUS_RESOLVED).update(
-            status=STATUS_RESOLVED,
-            resolved_at=now,
-        )
-        group.status = STATUS_RESOLVED
-        group.resolved_at = now
-
-        if happened:
-            Activity.objects.create(
-                project=project,
-                group=group,
-                type=Activity.SET_RESOLVED,
-                user=request.user,
-            )
-
-        return Response(transform(group, request))
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 2acb9f7810..8d871ddb52 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -260,7 +260,7 @@ urlpatterns = patterns('',
     url(r'^api/(?P<team_slug>[\w_-]+)/projects/search/$', api.search_projects,
         name='sentry-api-search-projects'),
 
-    url(r'^api/1/', include('sentry.web.restapi.urls')),
+    url(r'^api/0/', include('sentry.api.urls')),
 
     # TV dashboard
     url(r'^(?P<team_slug>[\w_-]+)/wall/$', groups.wall_display,
diff --git a/tests/sentry/web/restapi/__init__.py b/tests/sentry/api/__init__.py
similarity index 100%
rename from tests/sentry/web/restapi/__init__.py
rename to tests/sentry/api/__init__.py
diff --git a/tests/sentry/web/restapi/endpoints/__init__.py b/tests/sentry/api/endpoints/__init__.py
similarity index 100%
rename from tests/sentry/web/restapi/endpoints/__init__.py
rename to tests/sentry/api/endpoints/__init__.py
diff --git a/tests/sentry/web/restapi/endpoints/test_event_details.py b/tests/sentry/api/endpoints/test_group_details.py
similarity index 100%
rename from tests/sentry/web/restapi/endpoints/test_event_details.py
rename to tests/sentry/api/endpoints/test_group_details.py
diff --git a/tests/sentry/web/restapi/endpoints/test_event_index.py b/tests/sentry/api/endpoints/test_group_index.py
similarity index 76%
rename from tests/sentry/web/restapi/endpoints/test_event_index.py
rename to tests/sentry/api/endpoints/test_group_index.py
index f71bc3b0f7..c8b75adf6f 100644
--- a/tests/sentry/web/restapi/endpoints/test_event_index.py
+++ b/tests/sentry/api/endpoints/test_group_index.py
@@ -3,14 +3,13 @@ from rest_framework.test import APITestCase
 from sentry.testutils import BaseTestCase
 
 
-class EventIndexTest(BaseTestCase, APITestCase):
+class GroupIndexTest(BaseTestCase, APITestCase):
     def test_simple(self):
         self.create_group(checksum='a' * 32)
         self.create_group(checksum='b' * 32)
 
         self.client.force_authenticate(user=self.user)
-        url = reverse('sentry-api-1-event-list', kwargs={
+        url = reverse('sentry-api-0-group-list', kwargs={
             'project_id': self.project.id, 'team_slug': self.team.slug})
         response = self.client.get(url, format='json')
         assert response.status_code == 200
-        assert response.data == 'ok'
diff --git a/tests/sentry/web/restapi/endpoints/test_event_resolve.py b/tests/sentry/web/restapi/endpoints/test_event_resolve.py
deleted file mode 100644
index e69de29bb2..0000000000
