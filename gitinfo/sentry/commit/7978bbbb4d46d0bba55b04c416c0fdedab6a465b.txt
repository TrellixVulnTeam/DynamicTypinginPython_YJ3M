commit 7978bbbb4d46d0bba55b04c416c0fdedab6a465b
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Oct 14 22:55:50 2015 -0700

    Ensure superusers can still leave teams

diff --git a/src/sentry/api/serializers/models/team.py b/src/sentry/api/serializers/models/team.py
index 6ff11a039c..d626b94ba6 100644
--- a/src/sentry/api/serializers/models/team.py
+++ b/src/sentry/api/serializers/models/team.py
@@ -15,7 +15,17 @@ from sentry.models import (
 class TeamSerializer(Serializer):
     def get_attrs(self, item_list, user):
         if user.is_active_superuser():
-            memberships = frozenset([i.id for i in item_list])
+            inactive_memberships = frozenset(
+                OrganizationMemberTeam.objects.filter(
+                    team__in=item_list,
+                    organizationmember__user=user,
+                    is_active=False,
+                ).values_list('team', flat=True)
+            )
+            memberships = frozenset([
+                t for t in item_list
+                if t not in inactive_memberships
+            ])
         elif user.is_authenticated():
             memberships = frozenset(
                 OrganizationMemberTeam.objects.filter(
