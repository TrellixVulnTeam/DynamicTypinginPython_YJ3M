commit d71f413fcfffbbc0fe4c572e7a43cc08b2b21e34
Author: David Cramer <dcramer@gmail.com>
Date:   Sat May 30 11:43:50 2015 +0200

    Move BarChart rendering into JS

diff --git a/src/sentry/static/sentry/app/components/barChart.jsx b/src/sentry/static/sentry/app/components/barChart.jsx
index 221c94d3d0..3e28ff3c66 100644
--- a/src/sentry/static/sentry/app/components/barChart.jsx
+++ b/src/sentry/static/sentry/app/components/barChart.jsx
@@ -1,4 +1,6 @@
 /*** @jsx React.DOM */
+
+var jQuery = require("jquery");
 var moment = require("moment");
 var React = require("react");
 
@@ -17,7 +19,7 @@ var BarChart = React.createClass({
     label: React.PropTypes.string
   },
 
-  getDefaultProps(){
+  getDefaultProps() {
     return {
       placement: "bottom",
       points: [],
@@ -25,6 +27,14 @@ var BarChart = React.createClass({
     };
   },
 
+  componentDidUpdate() {
+    this.renderChart();
+  },
+
+  componentDidMount() {
+    this.renderChart();
+  },
+
   floatFormat(number, places) {
       var multi = Math.pow(10, places);
       return parseInt(number * multi, 10) / multi;
@@ -79,10 +89,10 @@ var BarChart = React.createClass({
     return !equal;
   },
 
-  render(){
+  renderChart() {
     var points = this.props.points;
     var maxval = 10;
-    points.forEach(function(point){
+    points.forEach((point) => {
       if (point.y > maxval) {
         maxval = point.y;
       }
@@ -120,16 +130,29 @@ var BarChart = React.createClass({
         title += <div>({point.label})</div>;
       }
 
-      return (
-        <TooltipTrigger
-            placement={this.props.placement}
-            key={point.x}
-            title={title}>
-          <a style={{width: pointWidth}}>
-            <span style={{height: pct}}>{point.y}</span>
-          </a>
-        </TooltipTrigger>
+      var dom = (
+        <a style={{width: pointWidth}}>
+          <span style={{height: pct}}>{point.y}</span>
+        </a>
       );
+
+      return jQuery(React.renderToString(dom)).tooltip({
+        html: true,
+        placement: this.props.placement,
+        title: React.renderToString(title),
+        viewport: this.props.viewport
+      });
+    });
+
+    jQuery(this.refs.chartPoints.getDOMNode()).html(children);
+  },
+
+  render() {
+    var maxval = 10;
+    this.props.points.forEach((point) => {
+      if (point.y > maxval) {
+        maxval = point.y;
+      }
     });
 
     return (
@@ -138,7 +161,7 @@ var BarChart = React.createClass({
               width={this.props.width}>
         <span className="max-y" key="max-y">{maxval}</span>
         <span className="min-y" key="min-y">{0}</span>
-        {children}
+        <span ref="chartPoints" />
       </figure>
     );
   }
diff --git a/src/sentry/static/sentry/less/shared-components.less b/src/sentry/static/sentry/less/shared-components.less
index c68461b862..19a02370cd 100644
--- a/src/sentry/static/sentry/less/shared-components.less
+++ b/src/sentry/static/sentry/less/shared-components.less
@@ -993,12 +993,12 @@ table.integrations {
 .sparkline {
   position: relative;
 
-  > .max-y,
-  > .min-y {
+  .max-y,
+  .min-y {
     display: none;
   }
 
-  > a {
+  a {
     position: relative;
     float: left;
     height: 20px;
diff --git a/src/sentry/static/sentry/less/stream.less b/src/sentry/static/sentry/less/stream.less
index 9ea02ac2eb..90f121b9f7 100644
--- a/src/sentry/static/sentry/less/stream.less
+++ b/src/sentry/static/sentry/less/stream.less
@@ -307,11 +307,6 @@
 
   .event-graph {
     padding-top: 32px;
-    .sparkline > a {
-      &:before {
-        // background: none;
-      }
-    }
   }
 
   .event-users, .event-occurrences {
