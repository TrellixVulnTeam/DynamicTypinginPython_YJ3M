commit 67a67e8d0adf23bf7132620d47976ff990f50e3c
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Wed Oct 17 16:09:06 2018 -0700

    ref(integrations): Format descriptions pre-hookstore (#10171)

diff --git a/src/sentry/static/sentry/app/components/modals/integrationDetailsModal.jsx b/src/sentry/static/sentry/app/components/modals/integrationDetailsModal.jsx
index c6979a0827..3450e281c0 100644
--- a/src/sentry/static/sentry/app/components/modals/integrationDetailsModal.jsx
+++ b/src/sentry/static/sentry/app/components/modals/integrationDetailsModal.jsx
@@ -32,13 +32,7 @@ const defaultFeatureGateComponents = {
       ungatedFeatures: p.features,
       gatedFeatureGroups: [],
     }),
-  FeatureList: p => (
-    <ul>
-      {p.features.map((f, i) => (
-        <li key={i} dangerouslySetInnerHTML={{__html: p.formatter(f.description)}} />
-      ))}
-    </ul>
-  ),
+  FeatureList: p => <ul>{p.features.map((f, i) => <li key={i}>{f.description}</li>)}</ul>,
 };
 
 class IntegrationDetailsModal extends React.Component {
@@ -117,11 +111,19 @@ class IntegrationDetailsModal extends React.Component {
           </Button>
         ));
 
+    // Prepare the features list
+    const features = metadata.features.map(f => ({
+      featureGate: f.featureGate,
+      description: (
+        <span dangerouslySetInnerHTML={{__html: singleLineRenderer(f.description)}} />
+      ),
+    }));
+
     const featureListHooks = HookStore.get('integrations:feature-gates');
     featureListHooks.push(() => defaultFeatureGateComponents);
 
     const {FeatureList, IntegrationFeatures} = featureListHooks[0]();
-    const featureProps = {organization, features: metadata.features};
+    const featureProps = {organization, features};
 
     return (
       <React.Fragment>
@@ -136,11 +138,7 @@ class IntegrationDetailsModal extends React.Component {
           </Flex>
         </Flex>
         <Description dangerouslySetInnerHTML={{__html: description}} />
-        <FeatureList
-          {...featureProps}
-          provider={provider}
-          formatter={singleLineRenderer}
-        />
+        <FeatureList {...featureProps} provider={provider} />
 
         <Metadata>
           <AuthorName flex={1}>{t('By %s', provider.metadata.author)}</AuthorName>
diff --git a/tests/js/spec/components/modals/__snapshots__/integrationDetailsModal.spec.jsx.snap b/tests/js/spec/components/modals/__snapshots__/integrationDetailsModal.spec.jsx.snap
index 32f078896c..eff477cd45 100644
--- a/tests/js/spec/components/modals/__snapshots__/integrationDetailsModal.spec.jsx.snap
+++ b/tests/js/spec/components/modals/__snapshots__/integrationDetailsModal.spec.jsx.snap
@@ -171,11 +171,17 @@ exports[`IntegrationDetailsModal renders simple integration 1`] = `
     features={
       Array [
         Object {
-          "description": "*markdown* feature description",
+          "description": <span
+            dangerouslySetInnerHTML={
+              Object {
+                "__html": "<em>markdown</em> feature description",
+              }
+            }
+          />,
+          "featureGate": undefined,
         },
       ]
     }
-    formatter={[Function]}
     organization={
       Object {
         "access": Array [
@@ -241,13 +247,16 @@ exports[`IntegrationDetailsModal renders simple integration 1`] = `
   >
     <ul>
       <li
-        dangerouslySetInnerHTML={
-          Object {
-            "__html": "<em>markdown</em> feature description",
-          }
-        }
         key="0"
-      />
+      >
+        <span
+          dangerouslySetInnerHTML={
+            Object {
+              "__html": "<em>markdown</em> feature description",
+            }
+          }
+        />
+      </li>
     </ul>
   </FeatureList>
   <Metadata>
@@ -355,7 +364,14 @@ exports[`IntegrationDetailsModal renders simple integration 1`] = `
     features={
       Array [
         Object {
-          "description": "*markdown* feature description",
+          "description": <span
+            dangerouslySetInnerHTML={
+              Object {
+                "__html": "<em>markdown</em> feature description",
+              }
+            }
+          />,
+          "featureGate": undefined,
         },
       ]
     }
