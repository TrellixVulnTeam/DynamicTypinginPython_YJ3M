commit c84f9166b9cc45f11e040e3aba23ee78c8951459
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Thu Aug 2 10:36:38 2018 -0700

    fix(discover): Improve result table display (#9278)
    
    Allow longer cell display; fix calculation of widths

diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx
index ad4afd9e87..87137f08dc 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/result/table.jsx
@@ -6,7 +6,7 @@ import {Box} from 'grid-emotion';
 
 import theme from 'app/utils/theme';
 import AutoSelectText from 'app/components/autoSelectText';
-import {getDisplayValue} from './utils';
+import {getDisplayValue, getDisplayText} from './utils';
 
 /**
  * Renders results in a table as well as a query summary (timing, rows returned)
@@ -48,7 +48,7 @@ export default class ResultTable extends React.Component {
   // less than 20 columns of data to check
   getColumnWidth = ({index}, tableWidth) => {
     const MIN_COL_WIDTH = 100;
-    const MAX_COL_WIDTH = 200;
+    const MAX_COL_WIDTH = 400;
 
     const {meta, data} = this.props.result;
 
@@ -61,11 +61,11 @@ export default class ResultTable extends React.Component {
       const sizes = [this.measureText(colName, true)];
 
       if (data.length > 0) {
-        sizes.push(this.measureText(data[0][colName], false));
+        sizes.push(this.measureText(getDisplayText(data[0][colName]), false));
       }
 
       if (data.length > 1) {
-        sizes.push(this.measureText(data[1][colName], false));
+        sizes.push(this.measureText(getDisplayText(data[1][colName]), false));
       }
 
       // Ensure size is within max and min bounds, add 8px for cell padding
diff --git a/src/sentry/static/sentry/app/views/organizationDiscover/result/utils.jsx b/src/sentry/static/sentry/app/views/organizationDiscover/result/utils.jsx
index fe5efbd891..0034dc52f9 100644
--- a/src/sentry/static/sentry/app/views/organizationDiscover/result/utils.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDiscover/result/utils.jsx
@@ -33,6 +33,29 @@ function getDisplayValue(val, idx) {
   return val;
 }
 
+function getDisplayText(val) {
+  if (typeof val === 'string') {
+    return `"${val}"`;
+  }
+
+  if (val === null) {
+    return 'null';
+  }
+
+  if (Array.isArray(val)) {
+    return `[
+        ${val.map(getDisplayValue).reduce((acc, curr, arrayIdx) => {
+          if (arrayIdx !== 0) {
+            return [...acc, ',', curr];
+          }
+          return [...acc, curr];
+        }, [])}
+        ]`;
+  }
+
+  return val;
+}
+
 const LightGray = styled.span`
   color: ${p => p.theme.gray1};
 `;
@@ -41,4 +64,4 @@ const DarkGray = styled.span`
   color: ${p => p.theme.gray5};
 `;
 
-export {getDisplayValue};
+export {getDisplayValue, getDisplayText};
