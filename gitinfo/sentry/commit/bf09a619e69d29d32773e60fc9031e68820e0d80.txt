commit bf09a619e69d29d32773e60fc9031e68820e0d80
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Sep 21 12:25:50 2010 -0700

    New sexy sort pattern

diff --git a/sentry/models.py b/sentry/models.py
index ca50736597..82161f3823 100644
--- a/sentry/models.py
+++ b/sentry/models.py
@@ -153,9 +153,9 @@ class GroupedMessage(MessageBase):
     def get_score_clause(cls):
         engine = get_db_engine()
         if engine.startswith('postgresql'):
-            return 'times_seen * 3600 + last_seen::abstime::int'
+            return 'log(last_seen::abstime::int, times_seen) * times_seen + last_seen::abstime::int'
         if engine.startswith('mysql'):
-            return 'times_seen * 3600 + unix_timestamp(last_seen)'
+            return 'log(unix_timestamp(last_seen), times_seen) * times_seen + unix_timestamp(last_seen)'
         return 'times_seen'
 
     def mail_admins(self, request=None, fail_silently=True):
