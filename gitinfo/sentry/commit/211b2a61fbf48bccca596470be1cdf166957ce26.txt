commit 211b2a61fbf48bccca596470be1cdf166957ce26
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Jan 19 18:31:17 2013 -0800

    Basic user details page

diff --git a/src/sentry/models.py b/src/sentry/models.py
index 54e75d51b2..8d4a98a91e 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -859,6 +859,7 @@ class TrackedUser(Model):
     last_seen = models.DateTimeField(default=timezone.now, db_index=True)
     first_seen = models.DateTimeField(default=timezone.now, db_index=True)
     num_events = models.PositiveIntegerField(default=0)
+    groups = models.ManyToManyField(Group, through='sentry.AffectedUserByGroup')
 
     objects = BaseManager()
 
diff --git a/src/sentry/templates/sentry/users/details.html b/src/sentry/templates/sentry/users/details.html
new file mode 100644
index 0000000000..535b3e94e4
--- /dev/null
+++ b/src/sentry/templates/sentry/users/details.html
@@ -0,0 +1,68 @@
+{% extends "sentry/users/list.html" %}
+
+{% load i18n %}
+{% load sentry_helpers %}
+{% load sentry_plugins %}
+
+{% block title %}{{ tuser.email }} | {{ block.super }}{% endblock %}
+
+{% block breadcrumb %}
+    {{ block.super }}
+    <li class="divider">/</li>
+    <li><a href="{% url sentry-user-details project.slug tuser.id %}">{{ tuser.email }}</a></li>
+{% endblock %}
+
+{% block bodyclass %} with-sidebar{% endblock %}
+
+{% block sidebar %}
+    <h6>User Details</h6>
+    <dl>
+        <dt>Email:</dt>
+        <dd>{{ tuser.email }}</dd>
+        <dt>First Seen:</dt>
+        <dd>{{ tuser.first_seen|timesince }}</dd>
+        <dt>Last Seen:</dt>
+        <dd>{{ tuser.last_seen|timesince }}</dd>
+        <dt>Number of Events:</dt>
+        <dd>{{ tuser.num_events|small_count }}</dd>
+    </dl>
+    {% if tuser.data %}
+        <h6>Metadata</h6>
+        <dl>
+            {% for key, value in tuser.data.iteritems %}
+                <dt>{{ key|titlize }}</dt>
+                <dd>{{ value }}</dd>
+            {% endfor %}
+        </dl>
+    {% endif %}
+{% endblock %}
+
+{% block main %}
+    {% paginator event_list from request as event_list per_page MESSAGES_PER_PAGE %}
+
+    <div class="btn-toolbar">
+        <div class="btn-group pull-right">
+            <a class="btn prev{% if not event_list.paginator.has_previous %} disabled{% endif %}" href="?p={{ event_list.paginator.previous_page }}"><span>{% trans "Previous" %}</span></a>
+            <a class="btn next{% if not event_list.paginator.has_next %} disabled{% endif %}" href="?p={{ event_list.paginator.next_page }}"><span>{% trans "Next" %}</span></a>
+        </div>
+    </div>
+
+    <div id="event_list"></div>
+
+    <script>
+    $(function(){
+        new app.GroupListView({
+            className: 'group-list',
+            members: {{ event_list.paginator.objects|to_json:request|safe }},
+            id: "event_list"
+        });
+    });
+    </script>
+
+    <div class="btn-toolbar">
+        <div class="btn-group pull-right">
+            <a class="btn prev{% if not event_list.paginator.has_previous %} disabled{% endif %}" href="?p={{ event_list.paginator.previous_page }}"><span>{% trans "Previous" %}</span></a>
+            <a class="btn next{% if not event_list.paginator.has_next %} disabled{% endif %}" href="?p={{ event_list.paginator.next_page }}"><span>{% trans "Next" %}</span></a>
+        </div>
+    </div>
+{% endblock %}
diff --git a/src/sentry/templates/sentry/users/list.html b/src/sentry/templates/sentry/users/list.html
index f288554c02..bcb955eb9a 100644
--- a/src/sentry/templates/sentry/users/list.html
+++ b/src/sentry/templates/sentry/users/list.html
@@ -16,7 +16,7 @@
 
 {% block main %}
     <section class="body">
-        {% paginator user_list from request as user_list %}
+        {% paginator tuser_list from request as tuser_list %}
         {% querystring from request without sort as sort_querystring %}
 
         <div class="btn-toolbar">
@@ -29,12 +29,12 @@
                 </ul>
             </div>
             <div class="btn-group pull-right">
-                <a class="btn prev{% if not user_list.paginator.has_previous %} disabled{% endif %}" href="?{{ user_list.query_string|escape }}&amp;p={{ user_list.paginator.previous_page }}"><span>{% trans "Previous" %}</span></a>
-                <a class="btn next{% if not user_list.paginator.has_next %} disabled{% endif %}" href="?{{ user_list.query_string|escape }}&amp;p={{ user_list.paginator.next_page }}"><span>{% trans "Next" %}</span></a>
+                <a class="btn prev{% if not tuser_list.paginator.has_previous %} disabled{% endif %}" href="?{{ tuser_list.query_string|escape }}&amp;p={{ tuser_list.paginator.previous_page }}"><span>{% trans "Previous" %}</span></a>
+                <a class="btn next{% if not tuser_list.paginator.has_next %} disabled{% endif %}" href="?{{ tuser_list.query_string|escape }}&amp;p={{ tuser_list.paginator.next_page }}"><span>{% trans "Next" %}</span></a>
             </div>
         </div>
 
-        {% if not user_list.paginator.objects %}
+        {% if not tuser_list.paginator.objects %}
             <p>{% blocktrans %}You dont seem to have any user data recorded. For more information on how to send this information consult your client's documentation.{% endblocktrans %}</p>
         {% else %}
             <table class="table table-bordered table-striped">
@@ -46,11 +46,11 @@
                     </tr>
                 </thead>
                 <tbody>
-                    {% for user in user_list.paginator.objects %}
+                    {% for tuser in tuser_list.paginator.objects %}
                         <tr>
-                            <td>{% if user.email %}{{ user.email }}{% else %}{{ user.ident }}{% endif %}</td>
-                            <td style="text-align:center">{{ user.last_seen|timesince }}</td>
-                            <td style="text-align:center">{{ user.num_events|small_count }}</td>
+                            <td><a href="{% url sentry-user-details project.slug tuser.id %}">{% if tuser.email %}{{ tuser.email }}{% else %}{{ tuser.ident }}{% endif %}</a></td>
+                            <td style="text-align:center">{{ tuser.last_seen|timesince }}</td>
+                            <td style="text-align:center">{{ tuser.num_events|small_count }}</td>
                         </tr>
                     {% endfor %}
                 </tbody>
@@ -58,8 +58,8 @@
 
             <div class="btn-toolbar">
                 <div class="btn-group pull-right">
-                    <a class="btn prev{% if not user_list.paginator.has_previous %} disabled{% endif %}" href="?{{ user_list.query_string|escape }}&amp;p={{ user_list.paginator.previous_page }}"><span>{% trans "Previous" %}</span></a>
-                    <a class="btn next{% if not user_list.paginator.has_next %} disabled{% endif %}" href="?{{ user_list.query_string|escape }}&amp;p={{ user_list.paginator.next_page }}"><span>{% trans "Next" %}</span></a>
+                    <a class="btn prev{% if not tuser_list.paginator.has_previous %} disabled{% endif %}" href="?{{ tuser_list.query_string|escape }}&amp;p={{ tuser_list.paginator.previous_page }}"><span>{% trans "Previous" %}</span></a>
+                    <a class="btn next{% if not tuser_list.paginator.has_next %} disabled{% endif %}" href="?{{ tuser_list.query_string|escape }}&amp;p={{ tuser_list.paginator.next_page }}"><span>{% trans "Next" %}</span></a>
                 </div>
             </div>
         {% endif %}
diff --git a/src/sentry/web/frontend/users.py b/src/sentry/web/frontend/users.py
index 478159d864..6c209c86e5 100644
--- a/src/sentry/web/frontend/users.py
+++ b/src/sentry/web/frontend/users.py
@@ -37,9 +37,24 @@ def user_list(request, project):
     user_list = user_list.filter(email__isnull=False)
 
     return render_to_response('sentry/users/list.html', {
-        'user_list': user_list,
+        'tuser_list': user_list,
         'project': project,
         'sort_label': SORT_OPTIONS[sort],
         'SECTION': 'users',
         'SORT_OPTIONS': SORT_OPTIONS,
     }, request)
+
+
+@has_access
+@login_required
+def user_details(request, project, user_id):
+    user = TrackedUser.objects.get(project=project, id=user_id)
+
+    event_list = user.groups.all()
+
+    return render_to_response('sentry/users/details.html', {
+        'tuser': user,
+        'event_list': event_list,
+        'project': project,
+        'SECTION': 'users',
+    }, request)
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 0db197b40a..3d81c09460 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -155,6 +155,7 @@ urlpatterns = patterns('',
 
     # Users
     url(r'^(?P<project_id>[\w_-]+)/users/$', users.user_list, name='sentry-users'),
+    url(r'^(?P<project_id>[\w_-]+)/users/(?P<user_id>\d+)/$', users.user_details, name='sentry-user-details'),
 
     # Project specific
     url(r'^(?P<project_id>[\w_-]+)/get-started/$', projects.get_started, name='sentry-get-started'),
