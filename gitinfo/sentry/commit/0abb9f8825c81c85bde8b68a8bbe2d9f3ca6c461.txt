commit 0abb9f8825c81c85bde8b68a8bbe2d9f3ca6c461
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Oct 5 18:29:03 2015 -0700

    Correct tags usage

diff --git a/src/sentry/buffer/redis.py b/src/sentry/buffer/redis.py
index f8283200ba..8f360871cb 100644
--- a/src/sentry/buffer/redis.py
+++ b/src/sentry/buffer/redis.py
@@ -122,7 +122,7 @@ class RedisBuffer(Buffer):
         # prevent a stampede due to the way we use celery etas + duplicate
         # tasks
         if not client.set(lock_key, '1', nx=True, ex=10):
-            metrics.incr('buffer.revoked', reason='locked')
+            metrics.incr('buffer.revoked', tags={'reason': 'locked'})
             self.logger.info('Skipped process on %s; unable to get lock', key)
             return
 
@@ -131,7 +131,7 @@ class RedisBuffer(Buffer):
             conn.delete(key)
 
         if not values.value:
-            metrics.incr('buffer.revoked', reason='empty')
+            metrics.incr('buffer.revoked', tags={'reason': 'empty'})
             self.logger.info('Skipped process on %s; no values found', key)
             return
 
diff --git a/src/sentry/tasks/store.py b/src/sentry/tasks/store.py
index bc789a2a4c..08de6c3263 100644
--- a/src/sentry/tasks/store.py
+++ b/src/sentry/tasks/store.py
@@ -29,7 +29,7 @@ def preprocess_event(cache_key=None, data=None, start_time=None, **kwargs):
         data = default_cache.get(cache_key)
 
     if data is None:
-        metrics.incr('events.failed', reason='cache', stage='pre')
+        metrics.incr('events.failed', tags={'reason': 'cache', 'stage': 'pre'})
         logger.error('Data not available in preprocess_event (cache_key=%s)', cache_key)
         return
 
@@ -67,7 +67,7 @@ def save_event(cache_key=None, data=None, start_time=None, **kwargs):
         data = default_cache.get(cache_key)
 
     if data is None:
-        metrics.incr('events.failed', reason='cache', stage='post')
+        metrics.incr('events.failed', tags={'reason': 'cache', 'stage': 'post'})
         return
 
     project = data.pop('project')
