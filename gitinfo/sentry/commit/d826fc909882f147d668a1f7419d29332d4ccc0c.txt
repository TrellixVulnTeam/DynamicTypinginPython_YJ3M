commit d826fc909882f147d668a1f7419d29332d4ccc0c
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Wed May 16 12:07:34 2018 -0700

    ref(js): Move and code split admin views (#8459)

diff --git a/src/sentry/static/sentry/app/routes.jsx b/src/sentry/static/sentry/app/routes.jsx
index 028098275b..0d96f92498 100644
--- a/src/sentry/static/sentry/app/routes.jsx
+++ b/src/sentry/static/sentry/app/routes.jsx
@@ -3,16 +3,6 @@ import React from 'react';
 
 import AccountAuthorizations from 'app/views/accountAuthorizations';
 import AccountLayout from 'app/views/accountLayout';
-import AdminBuffer from 'app/views/adminBuffer';
-import AdminLayout from 'app/views/adminLayout';
-import AdminOrganizations from 'app/views/adminOrganizations';
-import AdminOverview from 'app/views/adminOverview';
-import AdminProjects from 'app/views/adminProjects';
-import AdminQueue from 'app/views/adminQueue';
-import AdminQuotas from 'app/views/adminQuotas';
-import AdminRelays from 'app/views/adminRelays';
-import AdminSettings from 'app/views/adminSettings';
-import AdminUsers from 'app/views/adminUsers';
 import ApiApplicationDetails from 'app/views/apiApplicationDetails';
 import ApiApplications from 'app/views/apiApplications';
 import ApiLayout from 'app/views/apiLayout';
@@ -640,16 +630,65 @@ function routes() {
 
       <Route path="/api/new-token/" component={errorHandler(ApiNewToken)} />
 
-      <Route path="/manage/" component={errorHandler(AdminLayout)}>
-        <IndexRoute component={errorHandler(AdminOverview)} />
-        <Route path="buffer/" component={errorHandler(AdminBuffer)} />
-        <Route path="relays/" component={errorHandler(AdminRelays)} />
-        <Route path="organizations/" component={errorHandler(AdminOrganizations)} />
-        <Route path="projects/" component={errorHandler(AdminProjects)} />
-        <Route path="queue/" component={errorHandler(AdminQueue)} />
-        <Route path="quotas/" component={errorHandler(AdminQuotas)} />
-        <Route path="settings/" component={errorHandler(AdminSettings)} />
-        <Route path="users/" component={errorHandler(AdminUsers)} />
+      <Route
+        path="/manage/"
+        componentPromise={() =>
+          import(/*webpackChunkName:"AdminLayout"*/ 'app/views/admin/adminLayout')}
+        component={errorHandler(LazyLoad)}
+      >
+        <IndexRoute
+          componentPromise={() =>
+            import(/*webpackChunkName:"AdminOverview"*/ 'app/views/admin/adminOverview')}
+          component={errorHandler(LazyLoad)}
+        />
+        <Route
+          path="buffer/"
+          componentPromise={() =>
+            import(/*webpackChunkName:"AdminBuffer"*/ 'app/views/admin/adminBuffer')}
+          component={errorHandler(LazyLoad)}
+        />
+        <Route
+          path="relays/"
+          componentPromise={() =>
+            import(/*webpackChunkName:"AdminRelays"*/ 'app/views/admin/adminRelays')}
+          component={errorHandler(LazyLoad)}
+        />
+        <Route
+          path="organizations/"
+          componentPromise={() =>
+            import(/*webpackChunkName:"AdminOrganizations"*/ 'app/views/admin/adminOrganizations')}
+          component={errorHandler(LazyLoad)}
+        />
+        <Route
+          path="projects/"
+          componentPromise={() =>
+            import(/*webpackChunkName:"AdminProjects"*/ 'app/views/admin/adminProjects')}
+          component={errorHandler(LazyLoad)}
+        />
+        <Route
+          path="queue/"
+          componentPromise={() =>
+            import(/*webpackChunkName:"AdminQueue"*/ 'app/views/admin/adminQueue')}
+          component={errorHandler(LazyLoad)}
+        />
+        <Route
+          path="quotas/"
+          componentPromise={() =>
+            import(/*webpackChunkName:"AdminQuotas"*/ 'app/views/admin/adminQuotas')}
+          component={errorHandler(LazyLoad)}
+        />
+        <Route
+          path="settings/"
+          componentPromise={() =>
+            import(/*webpackChunkName:"AdminSettings"*/ 'app/views/admin/adminSettings')}
+          component={errorHandler(LazyLoad)}
+        />
+        <Route
+          path="users/"
+          componentPromise={() =>
+            import(/*webpackChunkName:"AdminUsers"*/ 'app/views/admin/adminUsers')}
+          component={errorHandler(LazyLoad)}
+        />
         {hooksAdminRoutes}
       </Route>
 
diff --git a/src/sentry/static/sentry/app/views/adminBuffer.jsx b/src/sentry/static/sentry/app/views/admin/adminBuffer.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/adminBuffer.jsx
rename to src/sentry/static/sentry/app/views/admin/adminBuffer.jsx
diff --git a/src/sentry/static/sentry/app/views/adminLayout.jsx b/src/sentry/static/sentry/app/views/admin/adminLayout.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/adminLayout.jsx
rename to src/sentry/static/sentry/app/views/admin/adminLayout.jsx
diff --git a/src/sentry/static/sentry/app/views/adminOrganizations.jsx b/src/sentry/static/sentry/app/views/admin/adminOrganizations.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/adminOrganizations.jsx
rename to src/sentry/static/sentry/app/views/admin/adminOrganizations.jsx
diff --git a/src/sentry/static/sentry/app/views/adminOverview/apiChart.jsx b/src/sentry/static/sentry/app/views/admin/adminOverview/apiChart.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/adminOverview/apiChart.jsx
rename to src/sentry/static/sentry/app/views/admin/adminOverview/apiChart.jsx
diff --git a/src/sentry/static/sentry/app/views/adminOverview/eventChart.jsx b/src/sentry/static/sentry/app/views/admin/adminOverview/eventChart.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/adminOverview/eventChart.jsx
rename to src/sentry/static/sentry/app/views/admin/adminOverview/eventChart.jsx
diff --git a/src/sentry/static/sentry/app/views/adminOverview/index.jsx b/src/sentry/static/sentry/app/views/admin/adminOverview/index.jsx
similarity index 89%
rename from src/sentry/static/sentry/app/views/adminOverview/index.jsx
rename to src/sentry/static/sentry/app/views/admin/adminOverview/index.jsx
index 01d56bb732..f692ab9247 100644
--- a/src/sentry/static/sentry/app/views/adminOverview/index.jsx
+++ b/src/sentry/static/sentry/app/views/admin/adminOverview/index.jsx
@@ -1,10 +1,11 @@
 /*eslint getsentry/jsx-needs-il8n:0*/
 import React from 'react';
 
-import ApiChart from 'app/views/adminOverview/apiChart';
-import AsyncView from 'app/views/asyncView';
-import EventChart from 'app/views/adminOverview/eventChart';
 import {t} from 'app/locale';
+import AsyncView from 'app/views/asyncView';
+
+import ApiChart from './apiChart';
+import EventChart from './eventChart';
 
 export default class AdminOverview extends AsyncView {
   getTitle() {
diff --git a/src/sentry/static/sentry/app/views/adminProjects.jsx b/src/sentry/static/sentry/app/views/admin/adminProjects.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/adminProjects.jsx
rename to src/sentry/static/sentry/app/views/admin/adminProjects.jsx
diff --git a/src/sentry/static/sentry/app/views/adminQueue.jsx b/src/sentry/static/sentry/app/views/admin/adminQueue.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/adminQueue.jsx
rename to src/sentry/static/sentry/app/views/admin/adminQueue.jsx
diff --git a/src/sentry/static/sentry/app/views/adminQuotas.jsx b/src/sentry/static/sentry/app/views/admin/adminQuotas.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/adminQuotas.jsx
rename to src/sentry/static/sentry/app/views/admin/adminQuotas.jsx
diff --git a/src/sentry/static/sentry/app/views/adminRelays.jsx b/src/sentry/static/sentry/app/views/admin/adminRelays.jsx
similarity index 93%
rename from src/sentry/static/sentry/app/views/adminRelays.jsx
rename to src/sentry/static/sentry/app/views/admin/adminRelays.jsx
index e725a1286b..4b863bed84 100644
--- a/src/sentry/static/sentry/app/views/adminRelays.jsx
+++ b/src/sentry/static/sentry/app/views/admin/adminRelays.jsx
@@ -4,12 +4,12 @@ import React from 'react';
 import moment from 'moment';
 import createReactClass from 'create-react-class';
 
+import {t} from 'app/locale';
 import ApiMixin from 'app/mixins/apiMixin';
 import withEnvironment from 'app/utils/withEnvironment';
 
-import ResultGrid from '../components/resultGrid';
-import LinkWithConfirmation from '../components/linkWithConfirmation';
-import {t} from '../locale';
+import ResultGrid from 'app/components/resultGrid';
+import LinkWithConfirmation from 'app/components/linkWithConfirmation';
 
 const prettyDate = function(x) {
   return moment(x).format('ll LTS');
diff --git a/src/sentry/static/sentry/app/views/adminSettings.jsx b/src/sentry/static/sentry/app/views/admin/adminSettings.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/adminSettings.jsx
rename to src/sentry/static/sentry/app/views/admin/adminSettings.jsx
diff --git a/src/sentry/static/sentry/app/views/adminUsers.jsx b/src/sentry/static/sentry/app/views/admin/adminUsers.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/adminUsers.jsx
rename to src/sentry/static/sentry/app/views/admin/adminUsers.jsx
diff --git a/tests/js/spec/views/__snapshots__/adminBuffer.spec.jsx.snap b/tests/js/spec/views/admin/__snapshots__/adminBuffer.spec.jsx.snap
similarity index 100%
rename from tests/js/spec/views/__snapshots__/adminBuffer.spec.jsx.snap
rename to tests/js/spec/views/admin/__snapshots__/adminBuffer.spec.jsx.snap
diff --git a/tests/js/spec/views/__snapshots__/adminQueue.spec.jsx.snap b/tests/js/spec/views/admin/__snapshots__/adminQueue.spec.jsx.snap
similarity index 100%
rename from tests/js/spec/views/__snapshots__/adminQueue.spec.jsx.snap
rename to tests/js/spec/views/admin/__snapshots__/adminQueue.spec.jsx.snap
diff --git a/tests/js/spec/views/__snapshots__/adminQuotas.spec.jsx.snap b/tests/js/spec/views/admin/__snapshots__/adminQuotas.spec.jsx.snap
similarity index 100%
rename from tests/js/spec/views/__snapshots__/adminQuotas.spec.jsx.snap
rename to tests/js/spec/views/admin/__snapshots__/adminQuotas.spec.jsx.snap
diff --git a/tests/js/spec/views/__snapshots__/adminSettings.spec.jsx.snap b/tests/js/spec/views/admin/__snapshots__/adminSettings.spec.jsx.snap
similarity index 100%
rename from tests/js/spec/views/__snapshots__/adminSettings.spec.jsx.snap
rename to tests/js/spec/views/admin/__snapshots__/adminSettings.spec.jsx.snap
diff --git a/tests/js/spec/views/adminBuffer.spec.jsx b/tests/js/spec/views/admin/adminBuffer.spec.jsx
similarity index 89%
rename from tests/js/spec/views/adminBuffer.spec.jsx
rename to tests/js/spec/views/admin/adminBuffer.spec.jsx
index 95bd61c688..3a38744251 100644
--- a/tests/js/spec/views/adminBuffer.spec.jsx
+++ b/tests/js/spec/views/admin/adminBuffer.spec.jsx
@@ -1,7 +1,7 @@
 import React from 'react';
 import {shallow} from 'enzyme';
 
-import AdminBuffer from 'app/views/adminBuffer';
+import AdminBuffer from 'app/views/admin/adminBuffer';
 
 // TODO(dcramer): this doesnt really test anything as we need to
 // mock the API Response/wait on it
diff --git a/tests/js/spec/views/adminQueue.spec.jsx b/tests/js/spec/views/admin/adminQueue.spec.jsx
similarity index 97%
rename from tests/js/spec/views/adminQueue.spec.jsx
rename to tests/js/spec/views/admin/adminQueue.spec.jsx
index 486ecabe0e..76012d4166 100644
--- a/tests/js/spec/views/adminQueue.spec.jsx
+++ b/tests/js/spec/views/admin/adminQueue.spec.jsx
@@ -2,7 +2,7 @@ import React from 'react';
 import {shallow} from 'enzyme';
 
 import {Client} from 'app/api';
-import AdminQueue from 'app/views/adminQueue';
+import AdminQueue from 'app/views/admin/adminQueue';
 
 // TODO(dcramer): this doesnt really test anything as we need to
 // mock the API Response/wait on it
diff --git a/tests/js/spec/views/adminQuotas.spec.jsx b/tests/js/spec/views/admin/adminQuotas.spec.jsx
similarity index 93%
rename from tests/js/spec/views/adminQuotas.spec.jsx
rename to tests/js/spec/views/admin/adminQuotas.spec.jsx
index c70b55e13f..cf361107a8 100644
--- a/tests/js/spec/views/adminQuotas.spec.jsx
+++ b/tests/js/spec/views/admin/adminQuotas.spec.jsx
@@ -2,7 +2,7 @@ import React from 'react';
 import {shallow} from 'enzyme';
 
 import {Client} from 'app/api';
-import AdminQuotas from 'app/views/adminQuotas';
+import AdminQuotas from 'app/views/admin/adminQuotas';
 
 // TODO(dcramer): this doesnt really test anything as we need to
 // mock the API Response/wait on it
diff --git a/tests/js/spec/views/adminSettings.spec.jsx b/tests/js/spec/views/admin/adminSettings.spec.jsx
similarity index 98%
rename from tests/js/spec/views/adminSettings.spec.jsx
rename to tests/js/spec/views/admin/adminSettings.spec.jsx
index 22c570d6af..7ffec72d7f 100644
--- a/tests/js/spec/views/adminSettings.spec.jsx
+++ b/tests/js/spec/views/admin/adminSettings.spec.jsx
@@ -2,7 +2,7 @@ import React from 'react';
 import {shallow} from 'enzyme';
 
 import {Client} from 'app/api';
-import AdminSettings from 'app/views/adminSettings';
+import AdminSettings from 'app/views/admin/adminSettings';
 
 // TODO(dcramer): this doesnt really test anything as we need to
 // mock the API Response/wait on it
