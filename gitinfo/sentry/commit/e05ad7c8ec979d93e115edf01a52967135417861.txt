commit e05ad7c8ec979d93e115edf01a52967135417861
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Aug 11 15:41:34 2016 -0700

    Add user merge events to audit log (#3913)
    
    * Add user merge events to audit log

diff --git a/src/sentry/models/user.py b/src/sentry/models/user.py
index c97a0a251d..264369e327 100644
--- a/src/sentry/models/user.py
+++ b/src/sentry/models/user.py
@@ -7,6 +7,7 @@ sentry.models.user
 """
 from __future__ import absolute_import
 
+import logging
 import warnings
 
 from django.contrib.auth.models import AbstractBaseUser, UserManager
@@ -18,6 +19,8 @@ from django.utils.translation import ugettext_lazy as _
 from sentry.db.models import BaseManager, BaseModel, BoundedAutoField
 from sentry.utils.http import absolute_uri
 
+audit_logger = logging.getLogger('sentry.audit')
+
 
 class UserManager(BaseManager, UserManager):
     pass
@@ -149,6 +152,11 @@ class User(BaseModel, AbstractBaseUser):
             UserOption
         )
 
+        audit_logger.info('user.merge', extra={
+            'from_user_id': from_user.id,
+            'to_user_id': to_user.id,
+        })
+
         for obj in OrganizationMember.objects.filter(user=from_user):
             try:
                 with transaction.atomic():
