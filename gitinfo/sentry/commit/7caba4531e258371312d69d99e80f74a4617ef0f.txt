commit 7caba4531e258371312d69d99e80f74a4617ef0f
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Jun 9 18:34:31 2014 -0700

    Apply sourceRoot to sourcesContent before shoving into index

diff --git a/src/sentry/utils/sourcemaps.py b/src/sentry/utils/sourcemaps.py
index efc164d2a0..0be285b911 100644
--- a/src/sentry/utils/sourcemaps.py
+++ b/src/sentry/utils/sourcemaps.py
@@ -112,10 +112,14 @@ def sourcemap_to_index(sourcemap):
     key_list = []
     src_list = set()
     content = None
+    root = smap.get('sourceRoot')
 
     if 'sourcesContent' in smap:
         content = {}
         for idx, source in enumerate(smap['sources']):
+            # Apply the root to the source before shoving into the index
+            # so we can look it up correctly later
+            source = urljoin(root, source)
             if smap['sourcesContent'][idx]:
                 content[source] = smap['sourcesContent'][idx].splitlines()
             else:
