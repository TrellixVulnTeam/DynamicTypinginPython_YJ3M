commit 2855bf6b98169a87544ccc4263232a82f52f68d7
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Aug 18 14:24:34 2015 -0700

    Remove arbitrary (legacy) Redis flush code

diff --git a/src/sentry/testutils/cases.py b/src/sentry/testutils/cases.py
index 02438487ae..f8db75c7ab 100644
--- a/src/sentry/testutils/cases.py
+++ b/src/sentry/testutils/cases.py
@@ -25,7 +25,6 @@ from django.http import HttpRequest
 from django.test import TestCase, TransactionTestCase
 from django.utils.importlib import import_module
 from exam import before, Exam
-from nydus.db import create_cluster
 from rest_framework.test import APITestCase as BaseAPITestCase
 
 from sentry import auth
@@ -40,21 +39,6 @@ from .fixtures import Fixtures
 from .helpers import AuthProvider, Feature, get_auth_header, TaskRunner
 
 
-def create_redis_conn():
-    options = {
-        'engine': 'nydus.db.backends.redis.Redis',
-    }
-    options.update(settings.SENTRY_REDIS_OPTIONS)
-
-    return create_cluster(options)
-
-_redis_conn = create_redis_conn()
-
-
-def flush_redis():
-    _redis_conn.flushdb()
-
-
 class BaseTestCase(Fixtures, Exam):
     urls = 'tests.sentry.web.urls'
 
@@ -136,8 +120,6 @@ class BaseTestCase(Fixtures, Exam):
     def _post_teardown(self):
         super(BaseTestCase, self)._post_teardown()
 
-        flush_redis()
-
     def _makeMessage(self, data):
         return json.dumps(data)
 
diff --git a/src/sentry/utils/pytest.py b/src/sentry/utils/pytest.py
index b3f3adb192..5ad9dd04b8 100644
--- a/src/sentry/utils/pytest.py
+++ b/src/sentry/utils/pytest.py
@@ -4,6 +4,7 @@ import mock
 import os
 
 from django.conf import settings
+from redis import StrictRedis
 
 
 def pytest_configure(config):
@@ -97,8 +98,8 @@ def pytest_configure(config):
     patcher = mock.patch('socket.getfqdn', return_value='localhost')
     patcher.start()
 
-    from sentry.testutils.cases import flush_redis
-    flush_redis()
+    client = StrictRedis(db=9)
+    client.flushdb()
 
     from sentry.utils.runner import initialize_receivers, fix_south
     initialize_receivers()
@@ -113,7 +114,6 @@ def pytest_runtest_teardown(item):
     from sentry.app import tsdb
     tsdb.flush()
 
-    from redis import StrictRedis
     client = StrictRedis(db=9)
     client.flushdb()
 
