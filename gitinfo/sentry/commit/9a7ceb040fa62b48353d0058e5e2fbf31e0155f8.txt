commit 9a7ceb040fa62b48353d0058e5e2fbf31e0155f8
Author: Stephen Cefali <scefali@sentry.io>
Date:   Wed Aug 28 21:24:01 2019 +0000

    fix(app-platform): Fixes bug when owner missing for external install page (#14527)

diff --git a/src/sentry/static/sentry/app/views/sentryAppExternalInstallation.jsx b/src/sentry/static/sentry/app/views/sentryAppExternalInstallation.jsx
index 24fcbe7904..e25675cbfb 100644
--- a/src/sentry/static/sentry/app/views/sentryAppExternalInstallation.jsx
+++ b/src/sentry/static/sentry/app/views/sentryAppExternalInstallation.jsx
@@ -1,5 +1,6 @@
 import React from 'react';
 import styled from 'react-emotion';
+import _ from 'lodash';
 
 import {t, tct} from 'app/locale';
 import Alert from 'app/components/alert';
@@ -49,7 +50,7 @@ export default class SentryAppExternalInstallation extends AsyncView {
     //if the app is unpublished for a different org
     return (
       selectedOrgSlug &&
-      sentryApp.owner.slug !== selectedOrgSlug &&
+      _.get(sentryApp, 'owner.slug') !== selectedOrgSlug &&
       sentryApp.status === 'unpublished'
     );
   }
@@ -163,13 +164,15 @@ export default class SentryAppExternalInstallation extends AsyncView {
     }
 
     if (this.isSentryAppUnavailableForOrg) {
+      // use the slug of the owner if we have it, otherwise use 'another organization'
+      const ownerSlug = _.get(sentryApp, 'owner.slug', 'another organization');
       return (
         <Alert type="error" icon="icon-circle-exclamation">
           {tct(
             'Integration [sentryAppName] is an unpublished integration for [otherOrg]. An unpublished integration can only be installed on the organization which created it.',
             {
               sentryAppName: <strong>{sentryApp.name}</strong>,
-              otherOrg: <strong>{sentryApp.owner.slug}</strong>,
+              otherOrg: <strong>{ownerSlug}</strong>,
             }
           )}
         </Alert>
diff --git a/tests/js/spec/views/sentryAppExternalInstallation.spec.jsx b/tests/js/spec/views/sentryAppExternalInstallation.spec.jsx
index 9479840aea..38e5884868 100644
--- a/tests/js/spec/views/sentryAppExternalInstallation.spec.jsx
+++ b/tests/js/spec/views/sentryAppExternalInstallation.spec.jsx
@@ -34,7 +34,6 @@ describe('SentryAppExternalInstallation', () => {
     org2Lite = _.pick(org2, ['slug', 'name', 'id']);
 
     sentryApp = TestStubs.SentryApp({
-      owner: org2,
       status: 'published',
       redirectUrl: 'https://google.com',
     });
