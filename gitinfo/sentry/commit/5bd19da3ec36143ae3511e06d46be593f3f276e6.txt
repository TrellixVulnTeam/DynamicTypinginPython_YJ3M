commit 5bd19da3ec36143ae3511e06d46be593f3f276e6
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Dec 3 18:56:14 2014 -0800

    Dont actually set future dates, just check the past

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index 0f58a85fc0..d43829454a 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -478,14 +478,13 @@ class EventManager(object):
 
         is_regression = False
         if group.is_resolved() and plugin_is_regression(group, event):
-            # add 30 seconds to the regression window to account for
-            # races here
-            active_date = date + timedelta(seconds=30)
             is_regression = bool(Group.objects.filter(
                 id=group.id,
             ).exclude(
-                active_at__gte=active_date,
-            ).update(active_at=active_date, status=STATUS_UNRESOLVED))
+                # add 30 seconds to the regression window to account for
+                # races here
+                active_at__gte=date - timedelta(seconds=30),
+            ).update(active_at=date, status=STATUS_UNRESOLVED))
 
             transaction.commit_unless_managed(using=group._state.db)
 
diff --git a/tests/sentry/test_event_manager.py b/tests/sentry/test_event_manager.py
index e5673de39e..7b7b3c750b 100644
--- a/tests/sentry/test_event_manager.py
+++ b/tests/sentry/test_event_manager.py
@@ -172,7 +172,7 @@ class EventManagerTest(TestCase):
         assert event.group_id == event2.group_id
 
         group = Group.objects.get(id=event.group.id)
-        assert group.active_at > event2.datetime > event.datetime
+        assert group.active_at == event2.datetime != event.datetime
 
     def test_long_culprit(self):
         manager = EventManager(self.make_event(
