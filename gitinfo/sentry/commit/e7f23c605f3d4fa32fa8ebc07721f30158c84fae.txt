commit e7f23c605f3d4fa32fa8ebc07721f30158c84fae
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Wed Nov 28 09:26:13 2018 -0800

    fix(settings): Make project settings available to members (#10773)
    
     * Exposes the project settings link on the project dashboard
     * Gates navigation items
     * Correctly passes the access prop to the project navigation config in
       the route search source.

diff --git a/src/sentry/static/sentry/app/components/projectHeader/index.jsx b/src/sentry/static/sentry/app/components/projectHeader/index.jsx
index 8f7212a1ce..22b8d0a32a 100644
--- a/src/sentry/static/sentry/app/components/projectHeader/index.jsx
+++ b/src/sentry/static/sentry/app/components/projectHeader/index.jsx
@@ -37,7 +37,6 @@ class ProjectHeader extends React.Component {
     let navSection = this.props.activeSection;
     let org = this.props.organization;
     let features = new Set(project.features);
-    let access = new Set(org.access);
     let allEnvironmentsLabel = t('All environments');
 
     let pagesWithEnvironments = new Set([
@@ -90,13 +89,9 @@ class ProjectHeader extends React.Component {
                   {t('Releases')}
                 </ProjectLink>
               </li>
-              {access.has('project:write') && (
-                <li className={navSection == 'settings' ? 'active' : ''}>
-                  <Link to={`/settings/${org.slug}/${project.slug}/`}>
-                    {t('Settings')}
-                  </Link>
-                </li>
-              )}
+              <li className={navSection == 'settings' ? 'active' : ''}>
+                <Link to={`/settings/${org.slug}/${project.slug}/`}>{t('Settings')}</Link>
+              </li>
             </NavTabs>
           </div>
           {showEnvironmentsToggle && (
diff --git a/src/sentry/static/sentry/app/components/search/sources/routeSource.jsx b/src/sentry/static/sentry/app/components/search/sources/routeSource.jsx
index 72271c7f80..37a40c84f3 100644
--- a/src/sentry/static/sentry/app/components/search/sources/routeSource.jsx
+++ b/src/sentry/static/sentry/app/components/search/sources/routeSource.jsx
@@ -76,6 +76,7 @@ class RouteSource extends React.Component {
         mapFunc(accountSettingsNavigation),
         mapFunc(projectSettingsNavigation, {
           project: project || {},
+          access: new Set((organization && organization.access) || []),
           features: new Set((project && project.features) || []),
         }),
         mapFunc(organizationSettingsNavigation, {
diff --git a/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.jsx b/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.jsx
index c52e308afc..e84a419ac9 100644
--- a/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/navigationConfiguration.jsx
@@ -19,11 +19,13 @@ export default function getConfiguration({project}) {
           path: `${pathPrefix}/teams/`,
           title: t('Project Teams'),
           description: t('Manage team access for a project'),
+          show: ({access}) => access.has('project:write'),
         },
         {
           path: `${pathPrefix}/alerts/`,
           title: t('Alerts'),
           description: t('Manage alerts and alert rules for a project'),
+          show: ({access}) => access.has('project:write'),
         },
         {
           path: `${pathPrefix}/tags/`,
@@ -34,6 +36,7 @@ export default function getConfiguration({project}) {
           path: `${pathPrefix}/environments/`,
           title: t('Environments'),
           description: t('Manage environments in a project'),
+          show: ({access}) => access.has('project:write'),
         },
         {
           path: `${pathPrefix}/ownership/`,
@@ -44,6 +47,7 @@ export default function getConfiguration({project}) {
         {
           path: `${pathPrefix}/data-forwarding/`,
           title: t('Data Forwarding'),
+          show: ({access}) => access.has('project:write'),
         },
         {
           path: `${pathPrefix}/saved-searches/`,
@@ -53,6 +57,7 @@ export default function getConfiguration({project}) {
         {
           path: `${pathPrefix}/debug-symbols/`,
           title: t('Debug Files'),
+          show: ({access}) => access.has('project:write'),
         },
         {
           path: `${pathPrefix}/processing-issues/`,
@@ -62,6 +67,7 @@ export default function getConfiguration({project}) {
             if (project.processingIssues <= 0) return null;
             return project.processingIssues > 99 ? '99+' : project.processingIssues;
           },
+          show: ({access}) => access.has('project:write'),
         },
         {
           path: `${pathPrefix}/filters/`,
@@ -110,6 +116,7 @@ export default function getConfiguration({project}) {
         ...plugins.map(plugin => ({
           path: `${pathPrefix}/plugins/${plugin.id}/`,
           title: plugin.name,
+          show: ({access}) => access.has('project:write'),
         })),
       ],
     },
