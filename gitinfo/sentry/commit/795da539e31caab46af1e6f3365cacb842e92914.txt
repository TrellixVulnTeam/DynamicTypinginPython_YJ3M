commit 795da539e31caab46af1e6f3365cacb842e92914
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Tue Jun 5 15:07:24 2018 -0700

    fix(integrations): Update identity if not created (#8658)

diff --git a/src/sentry/integrations/pipeline.py b/src/sentry/integrations/pipeline.py
index f752e222a1..dc88239735 100644
--- a/src/sentry/integrations/pipeline.py
+++ b/src/sentry/integrations/pipeline.py
@@ -88,12 +88,15 @@ class IntegrationPipeline(Pipeline):
             }
 
             try:
-                Identity.objects.get_or_create(
+                ident, created = Identity.objects.get_or_create(
                     idp=idp,
                     user=self.request.user,
                     external_id=identity['external_id'],
                     defaults=identity_data,
                 )
+
+                if not created:
+                    ident.update(data=identity['data'], scopes=identity['scopes'])
             except IntegrityError:
                 # If the external_id is already used for a different user or
                 # the user already has a different external_id remove those
