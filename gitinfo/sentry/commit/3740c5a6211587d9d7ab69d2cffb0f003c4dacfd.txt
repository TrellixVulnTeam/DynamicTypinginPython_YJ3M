commit 3740c5a6211587d9d7ab69d2cffb0f003c4dacfd
Author: David Cramer <dcramer@gmail.com>
Date:   Tue May 7 17:17:13 2013 -0700

    Simple check on foreignkey instead of instance

diff --git a/src/sentry/coreapi.py b/src/sentry/coreapi.py
index 478371f896..e1083e12cc 100644
--- a/src/sentry/coreapi.py
+++ b/src/sentry/coreapi.py
@@ -129,14 +129,14 @@ def project_from_auth_vars(auth_vars):
 
     project = Project.objects.get_from_cache(pk=pk.project_id)
 
-    if pk.user:
+    if pk.user_id:
         try:
             team = Team.objects.get_from_cache(pk=project.team_id)
         except Team.DoesNotExist:
             raise APIUnauthorized('Member does not have access to project')
 
         try:
-            TeamMember.objects.get(team=team, user=pk.user, is_active=True)
+            TeamMember.objects.get(team=team, user=pk.user_id, is_active=True)
         except TeamMember.DoesNotExist:
             raise APIUnauthorized('Member does not have access to project')
 
