commit 31f3ba07d0622852b32fe1ea685013b57e67d801
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Apr 21 15:11:59 2013 -0700

    Initial work on explore templates

diff --git a/src/sentry/templates/sentry/bases/explore.html b/src/sentry/templates/sentry/bases/explore.html
index 2c6fbd11c1..69e2387cd8 100644
--- a/src/sentry/templates/sentry/bases/explore.html
+++ b/src/sentry/templates/sentry/bases/explore.html
@@ -20,3 +20,9 @@
         {% endif %}
     </ul>
 {% endblock %}
+
+{% block main %}
+    <section class="body">
+    	{% block inner %}{% endblock %}
+    </section>
+{% endblock %}
diff --git a/src/sentry/templates/sentry/explore/tag_list.html b/src/sentry/templates/sentry/explore/tag_list.html
new file mode 100644
index 0000000000..0a4ab6f42a
--- /dev/null
+++ b/src/sentry/templates/sentry/explore/tag_list.html
@@ -0,0 +1,46 @@
+{% extends "sentry/bases/explore.html" %}
+
+{% load url from future %}
+{% load i18n %}
+{% load sentry_helpers %}
+
+{% block inner %}
+    {% if tag_list %}
+
+        {% for tag_name, tag_values in tag_list %}
+            {% if not forloop.counter|divisibleby:2 %}
+                {% if not forloop.first %}
+                    </div>
+                {% endif %}
+                <div class="row-fluid">
+            {% endif %}
+            <div class="span6">
+                <div class="page-header">
+                    <span class="pull-right"><a href="{% url 'sentry-explore-tag' project.team.slug project.slug tag_name|urlquote %}">More Details</a></span>
+
+                    <h4>{{ tag_name|titlize }}</h4>
+                </div>
+
+                <ul class="tag-list">
+                    {% for tag_value, times_seen in tag_values %}
+                        <li>
+                            <a href="{% url 'sentry-explore-tag-value' project.team.slug project.slug tag_name|urlquote tag_value|urlquote %}">
+                                {{ tag_value }}
+                                <span>{{ times_seen|small_count }}</span>
+                            </a>
+                        </li>
+                    {% endfor %}
+                </ul>
+            </div>
+            {% if forloop.last %}
+                </div>
+            {% endif %}
+        {% endfor %}
+
+    {% else %}
+
+        <p>{% trans "There don't seem to be any tags in the system yet. For more information on how you can tag data, check your client's documentation." %}</p>
+
+    {% endif %}
+
+{% endblock %}
diff --git a/src/sentry/templates/sentry/explore/tag_value_details.html b/src/sentry/templates/sentry/explore/tag_value_details.html
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/src/sentry/templates/sentry/explore/tag_value_list.html b/src/sentry/templates/sentry/explore/tag_value_list.html
new file mode 100644
index 0000000000..e69de29bb2
diff --git a/src/sentry/templatetags/sentry_helpers.py b/src/sentry/templatetags/sentry_helpers.py
index ceb56d1523..2cb48b823a 100644
--- a/src/sentry/templatetags/sentry_helpers.py
+++ b/src/sentry/templatetags/sentry_helpers.py
@@ -7,6 +7,14 @@ sentry.templatetags.sentry_helpers
 """
 # XXX: Import django-paging's template tags so we don't have to worry about
 #      INSTALLED_APPS
+
+import datetime
+
+from collections import namedtuple
+from paging.helpers import paginate as paginate_func
+from pkg_resources import parse_version as Version
+from urllib import quote
+
 from django import template
 from django.template import RequestContext
 from django.template.defaultfilters import stringfilter
@@ -14,7 +22,7 @@ from django.template.loader import render_to_string
 from django.utils.html import escape
 from django.utils.safestring import mark_safe
 from django.utils.translation import ugettext as _
-from paging.helpers import paginate as paginate_func
+
 from sentry.conf import settings
 from sentry.constants import STATUS_MUTED
 from sentry.models import Group, Option
@@ -27,9 +35,6 @@ from sentry.utils.safe import safe_execute
 from sentry.utils.strings import truncatechars
 from templatetag_sugar.register import tag
 from templatetag_sugar.parser import Name, Variable, Constant, Optional
-from collections import namedtuple
-import datetime
-from pkg_resources import parse_version as Version
 
 SentryVersion = namedtuple('SentryVersion', ['current', 'latest',
                                              'update_available'])
@@ -444,3 +449,8 @@ def reorder_teams(team_list, team):
         else:
             pending.append((t, p_list))
     return pending
+
+
+@register.filter
+def urlquote(value, safe=''):
+    return quote(value, safe)
diff --git a/src/sentry/web/frontend/explore.py b/src/sentry/web/frontend/explore.py
index 25be097b9b..441a4f1719 100644
--- a/src/sentry/web/frontend/explore.py
+++ b/src/sentry/web/frontend/explore.py
@@ -9,7 +9,7 @@ Contains views for the "Explore" section of Sentry.
 """
 from __future__ import division
 
-from sentyr.models import FilterKey, FilterValue, Group
+from sentry.models import FilterKey, FilterValue, Group
 from sentry.web.decorators import has_access
 from sentry.web.helpers import render_to_response
 
@@ -28,11 +28,14 @@ def tag_list(request, team, project):
         tag_list.append((tag_name, [
             (value, times_seen)
             for (value, times_seen)
-            in tag_value_qs.filter(key=tag_name)[:5]
+            in tag_value_qs.filter(
+                key=tag_name).values_list('value', 'times_seen')[:5]
         ]))
 
     return render_to_response('sentry/explore/tag_list.html', {
         'SECTION': 'explore',
+        'project': project,
+        'team': team,
         'tag_list': tag_list,
     }, request)
 
@@ -43,15 +46,17 @@ def tag_value_list(request, team, project, key):
         project=project).order_by('-times_seen')
 
     return render_to_response('sentry/explore/tag_value_list.html', {
+        'SECTION': 'explore',
+        'project': project,
+        'team': team,
         'title': key.replace('_', ' ').title(),
         'tag_name': key,
         'tag_values': tag_values_qs,
-        'SECTION': 'explore',
     }, request)
 
 
 @has_access
-def tag_details(request, team, project, key, value):
+def tag_value_details(request, team, project, key, value):
     tag = FilterValue.objects.get(
         project=project, key=key, value=value)
 
@@ -61,8 +66,9 @@ def tag_details(request, team, project, key, value):
     ).order_by('-score')
 
     return render_to_response('sentry/explore/tag_value_details.html', {
+        'SECTION': 'explore',
+        'project': project,
         'team': team,
         'tag': tag,
         'event_list': event_list,
-        'SECTION': 'users',
     }, request)
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 49a257a13c..b322a73569 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -232,8 +232,16 @@ urlpatterns = patterns('',
     url(r'^(?P<team_slug>[\w_-]+)/show/alerts/$', alerts.alert_list,
         name='sentry-alerts'),
 
+    # Explore
+    url(r'^(?P<team_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/explore/$', explore.tag_list,
+        name='sentry-explore'),
+    url(r'^(?P<team_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/explore/(?P<key>[^\/]+)/$', explore.tag_value_list,
+        name='sentry-explore-tag'),
+    url(r'^(?P<team_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/explore/(?P<key>[^\/]+)/(?P<value>[^\/]+)/$', explore.tag_value_details,
+        name='sentry-explore-tag-value'),
+
     # Explore - Users
-    url(r'^(?P<team_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/explore/users/$', users.user_list,
+    url(r'^(?P<team_slug>[\w_-]+)/explore/users/$', users.user_list,
         name='sentry-users'),
     url(r'^(?P<team_slug>[\w_-]+)/(?P<project_id>[\w_-]+)/explore/users/(?P<user_id>\d+)/$', users.user_details,
         name='sentry-user-details'),
