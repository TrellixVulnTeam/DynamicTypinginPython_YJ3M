commit 77b07483003a5d12fb7be8df3c3ad2ee097af11a
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Tue Mar 14 23:52:36 2017 +0100

    Switch to options

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index f9c8a2d63a..8b7b535398 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -1112,9 +1112,6 @@ def get_raven_config():
         ],
     }
 
-SYMBOL_SERVER_ENABLED = False
-SYMBOL_SERVER_URL = 'http://127.0.0.1:3000/'
-
 RAVEN_CONFIG = get_raven_config()
 
 # Config options that are explicitly disabled from Django
diff --git a/src/sentry/lang/native/plugin.py b/src/sentry/lang/native/plugin.py
index c1052f8b79..8418de465e 100644
--- a/src/sentry/lang/native/plugin.py
+++ b/src/sentry/lang/native/plugin.py
@@ -7,12 +7,11 @@ import time
 import logging
 import posixpath
 
-from django.conf import settings
-
 from symsynd.demangle import demangle_symbol
 from symsynd.heuristics import find_best_instruction
 from symsynd.utils import parse_addr
 
+from sentry import options
 from sentry.models import Project, EventError
 from sentry.plugins import Plugin2
 from sentry.lang.native.symbolizer import Symbolizer, SymbolicationFailed, \
@@ -452,7 +451,7 @@ class NativeStacktraceProcessor(StacktraceProcessor):
         # dict.
         data = self.sym.resolve_missing_vmaddrs()
 
-        if settings.SYMBOL_SERVER_ENABLED:
+        if options.get('symbolserver.enabled'):
             self.fetch_system_symbols(processing_task)
 
         return data
diff --git a/src/sentry/lang/native/systemsymbols.py b/src/sentry/lang/native/systemsymbols.py
index 737578c1b0..4e943b5f9a 100644
--- a/src/sentry/lang/native/systemsymbols.py
+++ b/src/sentry/lang/native/systemsymbols.py
@@ -2,10 +2,9 @@ from __future__ import absolute_import
 
 import logging
 
-from django.conf import settings
-
 from requests.exceptions import RequestException
 
+from sentry import options
 from sentry.http import Session
 from sentry.lang.native.utils import sdk_info_to_sdk_id
 
@@ -21,10 +20,10 @@ def lookup_system_symbols(symbols, sdk_info=None, cpu_name=None):
     enabled.  If this failes or the server is disabled, `None` is
     returned.
     """
-    if not settings.SYMBOL_SERVER_ENABLED:
+    if not options.get('symbolserver.enabled'):
         return
 
-    url = '%s/lookup' % settings.SYMBOL_SERVER_URL.rstrip('/')
+    url = '%s/lookup' % options.get('symbolserver.url').rstrip('/')
     sess = Session()
     symbol_query = {
         'sdk_id': sdk_info_to_sdk_id(sdk_info),
diff --git a/src/sentry/options/defaults.py b/src/sentry/options/defaults.py
index b9fd9ad743..599e2db99a 100644
--- a/src/sentry/options/defaults.py
+++ b/src/sentry/options/defaults.py
@@ -84,3 +84,7 @@ register('api.rate-limit.org-create', default=5, flags=FLAG_ALLOW_EMPTY | FLAG_P
 # Filestore
 register('filestore.backend', default='filesystem', flags=FLAG_NOSTORE)
 register('filestore.options', default={'location': '/tmp/sentry-files'}, flags=FLAG_NOSTORE)
+
+# Symbol server
+register('symbolserver.enabled', default=False, flags=FLAG_ALLOW_EMPTY | FLAG_PRIORITIZE_DISK)
+register('symbolserver.url', default='http://127.0.0.1:3000', flags=FLAG_ALLOW_EMPTY | FLAG_PRIORITIZE_DISK)
