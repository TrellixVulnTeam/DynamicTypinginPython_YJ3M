commit 5a0bf39dfe5687460c01539ec00d92caef4bb118
Author: ckj <chriskjennings@gmail.com>
Date:   Tue Oct 4 18:26:34 2016 -0700

    Sidebar-less modals

diff --git a/src/sentry/static/sentry/less/layout.less b/src/sentry/static/sentry/less/layout.less
index 42b8bf9a95..e6844e04db 100644
--- a/src/sentry/static/sentry/less/layout.less
+++ b/src/sentry/static/sentry/less/layout.less
@@ -22,60 +22,51 @@ body {
 }
 
 /**
-* body.narrow
+* body.auth
 * ============================================================================
 */
 
 body.narrow {
+  zoom: 1;
+  padding: 30px 0 0;
+
   background: #fff;
 
-  .app {
-    > .container {
-      max-width: 760px;
-    }
+  h3, h4 {
+    line-height: 1.2;
   }
-}
 
-/**
-* body.auth
-* ============================================================================
-*/
+  .app > .container {
+    padding-top: 10px;
+    max-width: 860px;
 
-body.auth {
-  zoom: 1;
-  padding: 30px 0 0;
+    .box-header {
+      padding: 15px 30px 10px;
 
-  // Hide fake sidebar on auth pages
-  background: none;
-
-  .brand-flag {
-    position: fixed;
-    top: 30px;
-    left: -10px;
-    background: @red;
-    padding: 15px 20px 15px 40px;
-    font-size: 20px;
-    line-height: 22px;
-    color: #fff;
-    .transition(left .3s ease);
-
-    &:hover, &:active, &:focus {
-      color: #fff;
-      left: 0;
-    }
+      a {
+        font-size: 20px;
 
-    span {
-      display: block;
-      line-height: inherit;
-    }
-  }
+        &:hover {
+          color: @gray-dark;
+        }
+      }
 
-  .app > .container {
-    padding-top: 80px;
-    max-width: 540px !important;
+      .back-to, .pull-right a {
+        font-size: 16px;
+      }
+
+      .back-to {
+        border-left: 1px solid @trim;
+        padding: 2px 10px;
+        display: inline-block;
+        margin-left: 7px;
+        position: relative;
+        top: -3px;
+      }
+    }
 
     .with-padding {
-      padding: 30px 30px 0;
+      padding: 20px 30px 0;
       .form-actions {
         margin: 20px 0 0;
         padding: 20px 0;
@@ -97,6 +88,13 @@ body.auth {
   }
 }
 
+body.auth {
+  .app > .container {
+    padding-top: 30px;
+    max-width: 540px;
+  }
+}
+
 /**
 * Container / Content
 * ============================================================================
@@ -320,7 +318,7 @@ footer {
 
 .windowed-small {
   .app > .container {
-    padding-top: 120px !important;
+    padding-top: 60px !important;
     max-width: 600px !important;
     margin: 0 auto;
 
diff --git a/src/sentry/static/sentry/less/spacing.less b/src/sentry/static/sentry/less/spacing.less
index acb330912b..4007bdc3c1 100644
--- a/src/sentry/static/sentry/less/spacing.less
+++ b/src/sentry/static/sentry/less/spacing.less
@@ -83,3 +83,12 @@
 .p-l-3 { padding-left: (@spacer-x * 3) !important; }
 .p-x-3 { padding-right: (@spacer-x * 3) !important; padding-left: (@spacer-x * 3) !important; }
 .p-y-3 { padding-top: (@spacer-y * 3) !important; padding-bottom: (@spacer-y * 3) !important; }
+
+// Borders
+
+.b-a-0 { border: none !important; }
+.b-a-1 { border: 1px solid @trim !important; }
+.b-t-1 { border-top: 1px solid @trim !important; }
+.b-r-1 { border-right: 1px solid @trim !important; }
+.b-b-1 { border-bottom: 1px solid @trim !important; }
+.b-l-1 { border-left: 1px solid @trim !important; }
diff --git a/src/sentry/templates/sentry/account/settings.html b/src/sentry/templates/sentry/account/settings.html
index 41cd7a199c..f62be45b64 100644
--- a/src/sentry/templates/sentry/account/settings.html
+++ b/src/sentry/templates/sentry/account/settings.html
@@ -4,6 +4,7 @@
 {% load i18n %}
 {% load sentry_helpers %}
 {% load sentry_features %}
+{% block wrapperclass %}narrow account-settings{% endblock %}
 
 {% block title %}{% trans "Account Settings" %} | {{ block.super }}{% endblock %}
 
diff --git a/src/sentry/templates/sentry/account/sudo.html b/src/sentry/templates/sentry/account/sudo.html
index 67b41430ae..d309d436a5 100644
--- a/src/sentry/templates/sentry/account/sudo.html
+++ b/src/sentry/templates/sentry/account/sudo.html
@@ -8,9 +8,8 @@
 
 {% block wrapperclass %}{{block.super }} windowed-small{% endblock %}
 
-{% block header %}
-
-{% endblock %}
+{% block global_sidebar %}{% endblock %}
+{% block header %}{% endblock %}
 
 {% block scripts %}
 
@@ -29,11 +28,15 @@
     <div class="pattern-bg"></div>
     <div class="box box-modal">
         <div class="box-header">
-            <h3>
-            {% blocktrans %}Help us keep your account safe by confirming your password.{% endblocktrans %}
-            </h3>
+          <a href="/">
+            <span class="icon-sentry-logo-full"></span>
+            <span class="back-to">{% trans "Back to organization" %}</span>
+          </a>
         </div>
         <div class="box-content with-padding">
+            <h4 class="m-b-1 p-b-1 b-b-1">
+              {% blocktrans %}Help us keep your account safe by confirming your password.{% endblocktrans %}
+            </h4>
             <form action="" method="post" autocomplete="off">
                 {% csrf_token %}
 
@@ -61,9 +64,9 @@
                     </script>
                 {% endif %}
 
-                <p>
+                <div class="form-actions">
                     <button type="submit" class="btn btn-primary">{% trans "Continue" %}</button>
-                </p>
+                </div>
             </form>
         </div>
     </div>
diff --git a/src/sentry/templates/sentry/bases/account.html b/src/sentry/templates/sentry/bases/account.html
index e34074367f..15376946e2 100644
--- a/src/sentry/templates/sentry/bases/account.html
+++ b/src/sentry/templates/sentry/bases/account.html
@@ -5,31 +5,47 @@
 {% load sentry_helpers %}
 
 {% block title %}{% trans "Settings" %} | {{ block.super }}{% endblock %}
+{% block global_sidebar %}{% endblock %}
+{% block footer %}{% endblock %}
 
 {% block content %}
-      <h3 class="m-b-2">My Settings</h3>
-      {% block nav %}
-        <div class="dropdown pull-right anchor-right">
-          <a class="dropdown-toggle" data-toggle="dropdown">
-            More <i class="icon-arrow-down"></i>
-          </a>
-          <ul class="dropdown-menu dropdown-menu-right">
-            <li><a href="{% url 'sentry-remove-account' %}">{% trans "Close Account" %}</a></li>
-          </ul>
-        </div>
-        <ul class="nav nav-tabs border-bottom">
-          <li{% if page == 'settings' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings' %}">{% trans "Account" %}</a></li>
-          <li{% if page == 'avatar' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings-avatar' %}">{% trans "Avatar" %}</a></li>
-          <li{% if page == 'appearance' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings-appearance' %}">{% trans "Appearance" %}</a></li>
-          <li{% if page == 'notifications' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings-notifications' %}">{% trans "Notifications" %}</a></li>
-          <li{% if page == 'emails' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings-emails' %}">{% trans "Emails" %}</a></li>
-          {% if AUTH_PROVIDERS %}
-            <li{% if page == 'identities' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings-identities' %}">{% trans "Identities" %}</a></li>
-          {% endif %}
-          <li{% if page == 'security' %} class="active"{% endif %}><a href="{% url 'sentry-account-security' %}">{% trans "Security" %}</a></li>
+<div class="pattern-bg"></div>
+<div class="box box-modal">
+  <div class="box-header">
+    <div class="pull-right">
+      <a href="{% url 'sentry-logout' %}">{% trans "Sign out" %}</a>
+    </div>
+    <a href="/">
+      <span class="icon-sentry-logo"></span>
+      <span class="back-to">{% trans "Back to organization" %}</span>
+    </a>
+  </div>
+  <div class="box-content with-padding">
+    <h4 class="m-b-1">My Settings</h4>
+    {% block nav %}
+      <div class="dropdown pull-right anchor-right">
+        <a class="dropdown-toggle" data-toggle="dropdown">
+          More <i class="icon-arrow-down"></i>
+        </a>
+        <ul class="dropdown-menu dropdown-menu-right">
+          <li><a href="{% url 'sentry-remove-account' %}">{% trans "Close Account" %}</a></li>
         </ul>
-      {% endblock %}
+      </div>
+      <ul class="nav nav-tabs border-bottom">
+        <li{% if page == 'settings' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings' %}">{% trans "Account" %}</a></li>
+        <li{% if page == 'avatar' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings-avatar' %}">{% trans "Avatar" %}</a></li>
+        <li{% if page == 'appearance' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings-appearance' %}">{% trans "Appearance" %}</a></li>
+        <li{% if page == 'notifications' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings-notifications' %}">{% trans "Notifications" %}</a></li>
+        <li{% if page == 'emails' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings-emails' %}">{% trans "Emails" %}</a></li>
+        {% if AUTH_PROVIDERS %}
+          <li{% if page == 'identities' %} class="active"{% endif %}><a href="{% url 'sentry-account-settings-identities' %}">{% trans "Identities" %}</a></li>
+        {% endif %}
+        <li{% if page == 'security' %} class="active"{% endif %}><a href="{% url 'sentry-account-security' %}">{% trans "Security" %}</a></li>
+      </ul>
+    {% endblock %}
 
-      {% block main %}
-      {% endblock %}
+    {% block main %}
+    {% endblock %}
+  </div>
+</div>
 {% endblock %}
diff --git a/src/sentry/templates/sentry/bases/auth.html b/src/sentry/templates/sentry/bases/auth.html
index fd93b04a72..2a84277403 100644
--- a/src/sentry/templates/sentry/bases/auth.html
+++ b/src/sentry/templates/sentry/bases/auth.html
@@ -10,13 +10,8 @@
 
 {% block main %}
   <div class="pattern-bg"></div>
-  <a href="/" class="brand-flag"><span class="icon-sentry-logo-full"></span></a>
   <section class="org-login">
-    <div class="box box-modal">
-      <div class="box-content with-padding">
-        {% block auth_main %}{% endblock %}
-      </div>
-    </div>
+    {% block auth_main %}{% endblock %}
   </section>
 {% endblock %}
 
diff --git a/src/sentry/templates/sentry/bases/modal.html b/src/sentry/templates/sentry/bases/modal.html
index c5b0b257e4..14fe949d8c 100644
--- a/src/sentry/templates/sentry/bases/modal.html
+++ b/src/sentry/templates/sentry/bases/modal.html
@@ -5,5 +5,17 @@
 {% block wrapperclass %}{{ block.super }} narrow{% endblock %}
 
 {% block content %}
-  {% block main %}{% endblock %}
+<div class="pattern-bg"></div>
+<section class="org-login">
+  <div class="box box-modal">
+    <div class="box-header">
+      <a href="/">
+        <span class="icon-sentry-logo-full"></span>
+      </a>
+    </div>
+    <div class="box-content with-padding">
+      {% block main %}{% endblock %}
+    </div>
+  </div>
+</section>
 {% endblock %}
