commit baaa113759214b7035948396a541a6d4d2261e32
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Apr 16 15:45:07 2012 -0700

    Correctly jsonify variables everywhere

diff --git a/sentry/templates/sentry/groups/details.html b/sentry/templates/sentry/groups/details.html
index 5ce5258432..25f79519e5 100644
--- a/sentry/templates/sentry/groups/details.html
+++ b/sentry/templates/sentry/groups/details.html
@@ -70,13 +70,13 @@
                 <ul class="actions">
                     <li>
                         {% if group.status == 0 %}
-                            <a href="javascript:void(0)" class="tip" onclick="Sentry.stream.resolve({{ group.project.slug|safe }}, {{ group.pk|safe }}, false);" rel="tooltip" title="{% trans "Mark as Resolved" %}">&#10003;</a>
+                            <a href="javascript:void(0)" class="tip" onclick="Sentry.stream.resolve('{{ group.project.slug|to_json }}', {{ group.pk|to_json }}, false);" rel="tooltip" title="{% trans "Mark as Resolved" %}">&#10003;</a>
                         {% else %}
                             <a href="javascript:void(0)" class="tip disabled" rel="tooltip" title="{% trans "Already Resolved" %}">&#10003;</a>
                         {% endif %}
                     </li>
                     {% if request.user.is_authenticated %}
-                        <li><a href="javascript:void(0)" onclick="Sentry.stream.bookmark({{ group.project.slug|safe }}, {{ group.pk|safe }}, this);" class="tip bookmark{% if is_bookmarked %} checked{% endif %}" rel="tooltip" title="{% trans "Bookmark" %}">&#9829;</a></li>
+                        <li><a href="javascript:void(0)" onclick="Sentry.stream.bookmark('{{ group.project.slug|to_json }}', {{ group.pk|to_json }}, this);" class="tip bookmark{% if is_bookmarked %} checked{% endif %}" rel="tooltip" title="{% trans "Bookmark" %}">&#9829;</a></li>
                     {% endif %}
                 </ul>
             </div>
diff --git a/sentry/templates/sentry/groups/group_list.html b/sentry/templates/sentry/groups/group_list.html
index 28a9681bab..58e32b216c 100644
--- a/sentry/templates/sentry/groups/group_list.html
+++ b/sentry/templates/sentry/groups/group_list.html
@@ -9,8 +9,8 @@
     <script>
     {% if has_realtime %}
         Sentry.realtime.config({
-            projectId: '{{ project.slug|safe }}',
-            viewId: {% if view %}{{ view.pk|safe }}{% else %}null{% endif %}
+            projectId: {{ project.slug|to_json }},
+            viewId: {% if view %}{{ view.pk|to_json }}{% else %}null{% endif %}
         })
         Sentry.realtime.enable();
     {% endif %}
@@ -57,7 +57,7 @@
 
     <div class="btn-toolbar">
         <div class="btn-group">
-            <a class="btn" href="javascript:void(0)" id="sentry-resolve-feed" onclick="Sentry.stream.clear({{ project.id|safe }});">{% trans "Resolve Feed" %}</a>
+            <a class="btn" href="javascript:void(0)" id="sentry-resolve-feed" onclick="Sentry.stream.clear({{ project.slug|to_json }});">{% trans "Resolve Feed" %}</a>
         </div>
         <div class="btn-group">
             <a class="btn realtime-play" href="javascript:void(0)" id="sentry-realtime" onclick="Sentry.realtime.toggle();">{% trans "Pause Feed" %}</a>
diff --git a/sentry/templates/sentry/partial/_group.html b/sentry/templates/sentry/partial/_group.html
index ed162f10c0..9d6ac8d267 100644
--- a/sentry/templates/sentry/partial/_group.html
+++ b/sentry/templates/sentry/partial/_group.html
@@ -33,13 +33,13 @@
         <ul class="actions">
             <li>
                 {% if group.status == 0 %}
-                    <a href="javascript:void(0)" class="tip" onclick="Sentry.stream.resolve({{ group.project.slug|safe }}, {{ group.pk|safe }}, this);" rel="tooltip" title="{% trans "Mark as Resolved" %}">&#10003;</a>
+                    <a href="javascript:void(0)" class="tip" onclick="Sentry.stream.resolve({{ group.project.slug|to_json }}, {{ group.pk|to_json }}, this);" rel="tooltip" title="{% trans "Mark as Resolved" %}">&#10003;</a>
                 {% else %}
                     <a href="javascript:void(0)" class="tip disabled" rel="tooltip" title="{% trans "Already Resolved" %}">&#10003;</a>
                 {% endif %}
             </li>
             {% if request.user.is_authenticated %}
-                <li><a href="javascript:void(0)" onclick="Sentry.stream.bookmark({{ group.project.slug|safe }}, {{ group.pk|safe }}, this);" class="tip bookmark{% if is_bookmarked %} checked{% endif %}" rel="tooltip" title="{% trans "Bookmark" %}">&#9829;</a></li>
+                <li><a href="javascript:void(0)" onclick="Sentry.stream.bookmark({{ group.project.slug|to_json }}, {{ group.pk|to_json }}, this);" class="tip bookmark{% if is_bookmarked %} checked{% endif %}" rel="tooltip" title="{% trans "Bookmark" %}">&#9829;</a></li>
             {% endif %}
         </ul>
     </div>
diff --git a/setup.py b/setup.py
index cd9d04ffd7..5fb27a6e1c 100755
--- a/setup.py
+++ b/setup.py
@@ -50,7 +50,7 @@ install_requires = [
 
 setup(
     name='sentry',
-    version='4.0.8',
+    version='4.0.9',
     author='David Cramer',
     author_email='dcramer@gmail.com',
     url='http://github.com/dcramer/sentry',
