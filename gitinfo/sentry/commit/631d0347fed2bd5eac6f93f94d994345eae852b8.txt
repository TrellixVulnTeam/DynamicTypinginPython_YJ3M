commit 631d0347fed2bd5eac6f93f94d994345eae852b8
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Mar 3 01:47:48 2012 -0800

    Put the javascript client behind a switch

diff --git a/docs/config/index.rst b/docs/config/index.rst
index a7775528bf..ebad1bca03 100644
--- a/docs/config/index.rst
+++ b/docs/config/index.rst
@@ -136,6 +136,19 @@ Authentication
 
 .. _Mozilla developer docs: https://developer.mozilla.org/En/HTTP_access_control#Simple_requests
 
+.. data:: sentry.conf.USE_JS_CLIENT
+    :noindex:
+
+    Instructs Sentry to install it's JavaScript error handler to catch internal errors in the
+    Sentry client-side code.
+
+    Defaults to ``False``.
+
+    ::
+
+        SENTRY_USE_JS_CLIENT = True
+
+
 Notifications
 -------------
 
diff --git a/sentry/conf/defaults.py b/sentry/conf/defaults.py
index 175ac3d36b..7149a2928f 100644
--- a/sentry/conf/defaults.py
+++ b/sentry/conf/defaults.py
@@ -142,3 +142,6 @@ DEFAULT_PROJECT_ACCESS = 'MEMBER_OWNER'
 
 # Default to not sending the Access-Control-Allow-Origin header on api/store
 ALLOW_ORIGIN = None
+
+# Enable capturing of JavaScript errors (Sentry internal errors)
+USE_JS_CLIENT = False
diff --git a/sentry/templates/sentry/layout.html b/sentry/templates/sentry/layout.html
index a0c42d0573..aaa7c73bb0 100644
--- a/sentry/templates/sentry/layout.html
+++ b/sentry/templates/sentry/layout.html
@@ -12,6 +12,7 @@
 
         <title>{% block title %}Sentry{% endblock %}</title>
 
+        {% if USE_JS_CLIENT %}
         <script type="text/javascript" src="{% url sentry-media "scripts/client.js" %}"></script>
         <script type="text/javascript">
         Sentry.client.config({
@@ -21,6 +22,7 @@
         })
         Sentry.client.registerGlobalHandler();
         </script>
+        {% endif %}
 
         <!--[if lt IE 9]>
         <script type="text/javascript" src="{% url sentry-media "scripts/html5shiv.js" %}"></script>
diff --git a/sentry/web/helpers.py b/sentry/web/helpers.py
index fce22214a2..791e5f8247 100644
--- a/sentry/web/helpers.py
+++ b/sentry/web/helpers.py
@@ -89,6 +89,7 @@ def get_default_context(request, existing_context=None):
         'VIEWS': list(View.objects.all()),
         'URL_PREFIX': settings.URL_PREFIX,
         'PLUGINS': plugins,
+        'USE_JS_CLIENT': settings.USE_JS_CLIENT,
     }
 
     if request:
