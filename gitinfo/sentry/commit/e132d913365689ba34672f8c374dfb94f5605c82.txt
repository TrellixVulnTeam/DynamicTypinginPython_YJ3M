commit e132d913365689ba34672f8c374dfb94f5605c82
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Nov 9 21:12:07 2015 -0800

    Basic test for calculate_expiry

diff --git a/tests/sentry/tsdb/test_base.py b/tests/sentry/tsdb/test_base.py
index 40d19a32e1..c626acdbd0 100644
--- a/tests/sentry/tsdb/test_base.py
+++ b/tests/sentry/tsdb/test_base.py
@@ -40,3 +40,8 @@ class BaseTSDBTest(TestCase):
         assert post_results[1] == [
             [1368889200, 15], [1368892800, 7]
         ]
+
+    def test_calculate_expiry(self):
+        timestamp = datetime(2013, 5, 18, 15, 13, 58, 132928, tzinfo=pytz.UTC)
+        result = self.tsdb.calculate_expiry(10, 30, timestamp)
+        assert result == 1368890330
