commit 63fe731f50c4b4cd032d07b30507f41aadd07a2a
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Tue Sep 26 11:08:19 2017 -0700

    ref(auth): Allow helper.fetch_state to take no key

diff --git a/src/sentry/auth/helper.py b/src/sentry/auth/helper.py
index 8e71b5a179..c93c8ad15c 100644
--- a/src/sentry/auth/helper.py
+++ b/src/sentry/auth/helper.py
@@ -719,5 +719,8 @@ class AuthHelper(object):
         self.request.session['auth']['state'][key] = value
         self.request.session.modified = True
 
-    def fetch_state(self, key):
+    def fetch_state(self, key=None):
+        if key is None:
+            return self.request.session['auth']['state']
+
         return self.request.session['auth']['state'].get(key)
