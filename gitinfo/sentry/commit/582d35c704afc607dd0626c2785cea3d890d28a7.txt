commit 582d35c704afc607dd0626c2785cea3d890d28a7
Author: David Cramer <dcramer@gmail.com>
Date:   Mon May 9 15:13:54 2016 -0700

    Dont return HTTP data in public views

diff --git a/src/sentry/api/serializers/models/event.py b/src/sentry/api/serializers/models/event.py
index 4f0f3cbd70..0dd2fc5b7d 100644
--- a/src/sentry/api/serializers/models/event.py
+++ b/src/sentry/api/serializers/models/event.py
@@ -19,8 +19,13 @@ class EventSerializer(Serializer):
             if key in self._reserved_keys:
                 continue
 
+            data = interface.get_api_context(is_public=is_public)
+            # data might not be returned for e.g. a public HTTP repr
+            if not data:
+                continue
+
             entry = {
-                'data': interface.get_api_context(is_public=is_public),
+                'data': data,
                 'type': interface.get_alias(),
             }
             interface_list.append((interface, entry))
diff --git a/src/sentry/interfaces/http.py b/src/sentry/interfaces/http.py
index 83a66bad12..d357162603 100644
--- a/src/sentry/interfaces/http.py
+++ b/src/sentry/interfaces/http.py
@@ -213,6 +213,9 @@ class Http(Interface):
         return _('Request')
 
     def get_api_context(self, is_public=False):
+        if is_public:
+            return {}
+
         data = self.data
         if isinstance(data, dict):
             data = json.dumps(data)
@@ -232,10 +235,7 @@ class Http(Interface):
             'fragment': self.fragment,
             'data': data,
             'headers': headers,
+            'cookies': cookies,
+            'env': self.env or None,
         }
-        if not is_public:
-            data.update({
-                'cookies': cookies,
-                'env': self.env or None,
-            })
         return data
