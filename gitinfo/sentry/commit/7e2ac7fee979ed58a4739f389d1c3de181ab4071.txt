commit 7e2ac7fee979ed58a4739f389d1c3de181ab4071
Author: Max Bittker <maxbittker@gmail.com>
Date:   Tue Feb 6 11:07:57 2018 -0800

    feat(settings): project followup (#7161)
    
    * feat(settings): project followup

diff --git a/src/sentry/static/sentry/app/views/settings/organization/projects/organizationProjectsView.jsx b/src/sentry/static/sentry/app/views/settings/organization/projects/organizationProjectsView.jsx
index a1244f0b94..6aa6c3049b 100644
--- a/src/sentry/static/sentry/app/views/settings/organization/projects/organizationProjectsView.jsx
+++ b/src/sentry/static/sentry/app/views/settings/organization/projects/organizationProjectsView.jsx
@@ -6,6 +6,7 @@ import {Box} from 'grid-emotion';
 import {loadStats} from '../../../../actionCreators/projects';
 import {t} from '../../../../locale';
 import ApiMixin from '../../../../mixins/apiMixin';
+import {getOrganizationState} from '../../../../mixins/organizationState';
 import OrganizationSettingsView from '../../../organizationSettingsView';
 import ProjectStatsGraph from './projectStatsGraph';
 import ProjectsStore from '../../../../stores/projectsStore';
@@ -16,6 +17,9 @@ import PanelItem from '../../components/panelItem';
 import PanelHeader from '../../components/panelHeader';
 import PanelBody from '../../components/panelBody';
 import ProjectListItem from '../../../settings/components/settingsProjectItem';
+import SettingsPageHeader from '../../components/settingsPageHeader';
+import Button from '../../../../components/buttons/button';
+import EmptyMessage from '../../components/emptyMessage';
 
 class OrganizationProjectsView extends OrganizationSettingsView {
   static contextTypes = {
@@ -29,9 +33,30 @@ class OrganizationProjectsView extends OrganizationSettingsView {
 
   renderBody() {
     let {projects} = this.props;
+    let {organization} = this.context;
+    let canCreateProjects = getOrganizationState(this.context.organization)
+      .getAccess()
+      .has('project:admin');
+
+    let action = (
+      <Button
+        priority="primary"
+        size="small"
+        disabled={!canCreateProjects}
+        title={
+          !canCreateProjects
+            ? t('You do not have permission to create projects')
+            : undefined
+        }
+        to={`/organizations/${organization.slug}/projects/new/`}
+      >
+        <span className="icon-plus" /> {t('Create Project')}
+      </Button>
+    );
 
     return (
       <div>
+        <SettingsPageHeader title="Projects" action={action} />
         <Panel className="table table-no-top-border m-b-0">
           <PanelHeader>{t('Projects')}</PanelHeader>
           <PanelBody css={{width: '100%'}}>
@@ -48,6 +73,9 @@ class OrganizationProjectsView extends OrganizationSettingsView {
                 </Box>
               </PanelItem>
             ))}
+            {projects.length === 0 && (
+              <EmptyMessage>{t('No projects found.')}</EmptyMessage>
+            )}
           </PanelBody>
         </Panel>
       </div>
diff --git a/tests/js/spec/views/__snapshots__/organizationProjects.spec.jsx.snap b/tests/js/spec/views/__snapshots__/organizationProjects.spec.jsx.snap
index fd6a9cacea..8ff905b5ad 100644
--- a/tests/js/spec/views/__snapshots__/organizationProjects.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/organizationProjects.spec.jsx.snap
@@ -1,18 +1,45 @@
 // Jest Snapshot v1, https://goo.gl/fbAQLP
 
 exports[`OrganizationProjectsView render() Should render the projects in the store 1`] = `
-.glamor-22 {
+.glamor-28 {
   width: 100%;
 }
 
-.glamor-24 {
+.glamor-4 {
+  font-size: 14px;
+  box-shadow: inset 0 -1px 0;
+  margin: -20px 0 30px;
+}
+
+.glamor-2 {
+  box-sizing: border-box;
+  display: -webkit-box;
+  display: -webkit-flex;
+  display: -ms-flexbox;
+  display: flex;
+  -webkit-align-items: center;
+  -webkit-box-align: center;
+  -ms-flex-align: center;
+  align-items: center;
+}
+
+.glamor-0 {
+  font-size: 20px;
+  font-weight: bold;
+  margin: 20px 0;
+  -webkit-flex: 1;
+  -ms-flex: 1;
+  flex: 1;
+}
+
+.glamor-30 {
   background: #fff;
   border: 1px solid;
   margin-bottom: 30px;
   position: relative;
 }
 
-.glamor-7 {
+.glamor-13 {
   border-bottom: 1px solid;
   border-radius: 0 0;
   text-transform: uppercase;
@@ -21,13 +48,13 @@ exports[`OrganizationProjectsView render() Should render the projects in the sto
   padding: 15px 20px;
 }
 
-.glamor-3 {
+.glamor-9 {
   font-size: inherit;
   text-transform: inherit;
   margin: 0;
 }
 
-.glamor-1 {
+.glamor-7 {
   font-size: 12px;
   font-weight: 600;
   text-transform: uppercase;
@@ -37,7 +64,7 @@ exports[`OrganizationProjectsView render() Should render the projects in the sto
   margin: 0;
 }
 
-.glamor-18 {
+.glamor-24 {
   box-sizing: border-box;
   display: -webkit-box;
   display: -webkit-flex;
@@ -50,11 +77,11 @@ exports[`OrganizationProjectsView render() Should render the projects in the sto
   border-bottom: 1px solid;
 }
 
-.glamor-18:last-child {
+.glamor-24:last-child {
   border: 0;
 }
 
-.glamor-14 {
+.glamor-20 {
   box-sizing: border-box;
   width: 50%;
   padding: 16px;
@@ -63,17 +90,17 @@ exports[`OrganizationProjectsView render() Should render the projects in the sto
   flex: 1;
 }
 
-.glamor-11 {
+.glamor-17 {
   color: #645574;
 }
 
-.glamor-9 {
+.glamor-15 {
   border: none;
   background-color: inherit;
   padding: 0;
 }
 
-.glamor-16 {
+.glamor-22 {
   box-sizing: border-box;
   width: 50%;
   padding: 16px;
@@ -112,26 +139,116 @@ exports[`OrganizationProjectsView render() Should render the projects in the sto
         title="Organization Name Projects"
       >
         <div>
+          <SettingsPageHeading
+            action={
+              <Button
+                disabled={false}
+                priority="primary"
+                size="small"
+                title={undefined}
+                to="/organizations/org-slug/projects/new/"
+              >
+                <span
+                  className="icon-plus"
+                />
+                 
+                Create Project
+              </Button>
+            }
+            title="Projects"
+          >
+            <Wrapper>
+              <div
+                className="glamor-4 glamor-5"
+              >
+                <Flex
+                  align="center"
+                >
+                  <Base
+                    align="center"
+                    className="glamor-2"
+                  >
+                    <div
+                      className="glamor-2"
+                      is={null}
+                    >
+                      <Title>
+                        <div
+                          className="glamor-0 glamor-1"
+                        >
+                          Projects
+                        </div>
+                      </Title>
+                      <div>
+                        <Button
+                          disabled={false}
+                          priority="primary"
+                          size="small"
+                          to="/organizations/org-slug/projects/new/"
+                        >
+                          <Link
+                            className="button button-primary button-sm"
+                            disabled={false}
+                            onClick={[Function]}
+                            onlyActiveOnIndex={false}
+                            role="button"
+                            style={Object {}}
+                            to="/organizations/org-slug/projects/new/"
+                          >
+                            <a
+                              className="button button-primary button-sm"
+                              disabled={false}
+                              onClick={[Function]}
+                              role="button"
+                              style={Object {}}
+                            >
+                              <FlowLayout
+                                truncate={false}
+                              >
+                                <div
+                                  className="flow-layout"
+                                >
+                                  <span
+                                    className="button-label"
+                                  >
+                                    <span
+                                      className="icon-plus"
+                                    />
+                                     
+                                    Create Project
+                                  </span>
+                                </div>
+                              </FlowLayout>
+                            </a>
+                          </Link>
+                        </Button>
+                      </div>
+                    </div>
+                  </Base>
+                </Flex>
+              </div>
+            </Wrapper>
+          </SettingsPageHeading>
           <Panel
             className="table table-no-top-border m-b-0"
           >
             <div
-              className="table table-no-top-border m-b-0 glamor-24 glamor-25"
+              className="table table-no-top-border m-b-0 glamor-30 glamor-31"
             >
               <PanelHeader>
                 <StyledPanelHeader>
                   <div
-                    className="glamor-7 glamor-8"
+                    className="glamor-13 glamor-14"
                   >
                     <StyledPanelHeading>
                       <Component
-                        className="glamor-3 glamor-0"
+                        className="glamor-9 glamor-6"
                       >
                         <_default
-                          className="glamor-3 glamor-0"
+                          className="glamor-9 glamor-6"
                         >
                           <div
-                            className="glamor-0 glamor-1 glamor-2"
+                            className="glamor-6 glamor-7 glamor-8"
                           >
                             Projects
                           </div>
@@ -142,13 +259,13 @@ exports[`OrganizationProjectsView render() Should render the projects in the sto
                 </StyledPanelHeader>
               </PanelHeader>
               <PanelBody
-                className="glamor-22"
+                className="glamor-28"
                 direction="column"
                 disablePadding={true}
                 flex={false}
               >
                 <div
-                  className="glamor-22"
+                  className="glamor-28"
                 >
                   <_default
                     align="center"
@@ -156,10 +273,10 @@ exports[`OrganizationProjectsView render() Should render the projects in the sto
                   >
                     <Base
                       align="center"
-                      className="glamor-18 glamor-19"
+                      className="glamor-24 glamor-25"
                     >
                       <div
-                        className="glamor-18 glamor-19"
+                        className="glamor-24 glamor-25"
                         is={null}
                       >
                         <Box
@@ -168,13 +285,13 @@ exports[`OrganizationProjectsView render() Should render the projects in the sto
                           w={0.5}
                         >
                           <Base
-                            className="glamor-14"
+                            className="glamor-20"
                             flex="1"
                             p={2}
                             w={0.5}
                           >
                             <div
-                              className="glamor-14"
+                              className="glamor-20"
                               is={null}
                             >
                               <ProjectItem
@@ -227,7 +344,7 @@ exports[`OrganizationProjectsView render() Should render the projects in the sto
                                       title="Add to bookmarks"
                                     >
                                       <button
-                                        className="tip glamor-9 glamor-10"
+                                        className="tip glamor-15 glamor-16"
                                         onClick={[Function]}
                                         title="Add to bookmarks"
                                       >
@@ -238,17 +355,17 @@ exports[`OrganizationProjectsView render() Should render the projects in the sto
                                     </InlineButton>
                                   </Tooltip>
                                   <Link
-                                    className="glamor-11"
+                                    className="glamor-17"
                                     to="/settings/organization/org-slug/project/project-slug/"
                                   >
                                     <Link
-                                      className="glamor-11"
+                                      className="glamor-17"
                                       onlyActiveOnIndex={false}
                                       style={Object {}}
                                       to="/settings/organization/org-slug/project/project-slug/"
                                     >
                                       <a
-                                        className="glamor-11"
+                                        className="glamor-17"
                                         onClick={[Function]}
                                         style={Object {}}
                                       >
@@ -312,12 +429,12 @@ exports[`OrganizationProjectsView render() Should render the projects in the sto
                           w={0.5}
                         >
                           <Base
-                            className="glamor-16"
+                            className="glamor-22"
                             p={2}
                             w={0.5}
                           >
                             <div
-                              className="glamor-16"
+                              className="glamor-22"
                               is={null}
                             >
                               <ProjectListItem
