commit 54e6ac495c67d71226e285e5add883e9570900f7
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Wed Jul 1 09:18:20 2020 -0700

    build(github): Add a GitHub action to diff PR snapshots against main branch (#19585)
    
    * Adds CSS to limit animations in CI
    * Adds an action to diff snapshots against main branch and saves diffs to the action artifacts
    
    Note this action does not block merging PRs.
    
    Action lives here: https://github.com/getsentry/action-visual-snapshot

diff --git a/.github/workflows/acceptance.yml b/.github/workflows/acceptance.yml
index c7b176ce92..1863738e7e 100644
--- a/.github/workflows/acceptance.yml
+++ b/.github/workflows/acceptance.yml
@@ -125,6 +125,7 @@ jobs:
             echo "::set-output name=python-version::2.7"
             echo "::set-output name=matrix-instance-number::$(($MATRIX_INSTANCE+1))"
 
+
         # yarn cache
         - uses: actions/cache@v1
           id: yarn-cache # use this to check for `cache-hit` (`steps.yarn-cache.outputs.cache-hit != 'true'`)
@@ -204,3 +205,33 @@ jobs:
           with:
             name: visual-snapshots
             path: .artifacts/visual-snapshots
+
+
+    visual-diff:
+      needs: acceptance
+      runs-on: ubuntu-16.04
+
+      steps:
+        - name: Download base snapshots
+          uses: actions/download-artifact@v2
+          with:
+            name: visual-snapshots
+            path: .artifacts/visual-snapshots
+
+        - name: Diff snapshots
+          if: ${{ github.ref != 'refs/heads/master' }}
+          id: visual-snapshots-diff
+          uses: getsentry/action-visual-snapshot@v1
+          with:
+            githubToken: ${{ secrets.GITHUB_TOKEN }}
+            snapshot-path: .artifacts/visual-snapshots
+            diff-path: .artifacts/visual-snapshots-diff
+            gcs-bucket: 'sentry-visual-snapshots'
+            gcp-service-account-key: ${{ secrets.SNAPSHOT_GOOGLE_SERVICE_ACCOUNT_KEY }}
+
+        - name: Save diffed snapshots
+          if: always()
+          uses: actions/upload-artifact@v2
+          with:
+            name: visual-snapshots-diff
+            path: ${{ steps.visual-snapshots-diff.outputs.diff-path }}
diff --git a/src/sentry/static/sentry/app/styles/global.tsx b/src/sentry/static/sentry/app/styles/global.tsx
index 0eca7d06e0..865aefb389 100644
--- a/src/sentry/static/sentry/app/styles/global.tsx
+++ b/src/sentry/static/sentry/app/styles/global.tsx
@@ -1,3 +1,4 @@
+/* global process */
 import React from 'react';
 import {Global, css} from '@emotion/core';
 
@@ -13,6 +14,26 @@ const styles = (theme: Theme) => css`
   abbr {
     border-bottom: 1px dotted ${theme.gray500};
   }
+
+  /**
+   * TODO: This should apply to the prefer-reduced-motion media query
+   *
+   * See https://web.dev/prefers-reduced-motion/
+   */
+  ${process.env.IS_CI &&
+    css`
+      *,
+      ::before,
+      ::after {
+        animation-delay: -1ms !important;
+        animation-duration: 0ms !important;
+        animation-iteration-count: 1 !important;
+        background-attachment: initial !important;
+        scroll-behavior: auto !important;
+        transition-duration: 0s !important;
+        transition-delay: 0s !important;
+      }
+    `}
 `;
 
 /**
