commit 51a6513a0200010734d1658b6ac9537898065a71
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Apr 16 00:40:28 2012 -0700

    Use slugs in all project urls

diff --git a/sentry/coreapi.py b/sentry/coreapi.py
index daf12bf79c..fd01d69399 100644
--- a/sentry/coreapi.py
+++ b/sentry/coreapi.py
@@ -149,8 +149,12 @@ def project_from_api_key_and_id(api_key, project_id):
     except ProjectKey.DoesNotExist:
         raise APIUnauthorized('Invalid api key')
 
-    if str(pk.project_id) != str(project_id):
-        raise APIUnauthorized()
+    if str(project_id).isdigit():
+        if str(pk.project_id) != str(project_id):
+            raise APIUnauthorized()
+    else:
+        if str(pk.project.slug) != str(project_id):
+            raise APIUnauthorized()
 
     project = Project.objects.get_from_cache(pk=pk.project_id)
 
diff --git a/sentry/models.py b/sentry/models.py
index 829ffe918f..46f39acb7f 100644
--- a/sentry/models.py
+++ b/sentry/models.py
@@ -245,7 +245,7 @@ class ProjectKey(Model):
             self.public_key,
             self.secret_key,
             urlparts.netloc + urlparts.path,
-            self.project_id,
+            self.project.slug,
         )
 
 
@@ -440,7 +440,7 @@ class Group(MessageBase):
 
     def get_absolute_url(self):
         if self.project_id:
-            return reverse('sentry-group', kwargs={'group_id': self.pk, 'project_id': self.project_id})
+            return reverse('sentry-group', kwargs={'group_id': self.pk, 'project_id': self.project.slug})
         return '#'
 
     def natural_key(self):
@@ -513,7 +513,7 @@ class Event(MessageBase):
 
     def get_absolute_url(self):
         if self.project_id:
-            return reverse('sentry-group-event', kwargs={'group_id': self.group_id, 'event_id': self.pk, 'project_id': self.project_id})
+            return reverse('sentry-group-event', kwargs={'group_id': self.group_id, 'event_id': self.pk, 'project_id': self.project.slug})
         return '#'
 
     @cached_property
diff --git a/sentry/plugins/base.py b/sentry/plugins/base.py
index c0b9452dde..fbd5c236f3 100644
--- a/sentry/plugins/base.py
+++ b/sentry/plugins/base.py
@@ -202,7 +202,7 @@ class IPlugin(local):
 
         >>> plugin.get_url(group)
         """
-        return reverse('sentry-group-plugin-action', args=(group.project_id, group.pk, self.slug))
+        return reverse('sentry-group-plugin-action', args=(group.project.slug, group.pk, self.slug))
 
     def get_conf_key(self):
         """
diff --git a/sentry/plugins/sentry_mail/models.py b/sentry/plugins/sentry_mail/models.py
index db3c380044..ab18ccb4a9 100644
--- a/sentry/plugins/sentry_mail/models.py
+++ b/sentry/plugins/sentry_mail/models.py
@@ -122,7 +122,7 @@ class MailProcessor(NotifyPlugin):
 
         subject = '[%s] %s: %s' % (project.name.encode('utf-8'), event.get_level_display().upper(), event.error().encode('utf-8').split('\n')[0])
 
-        link = '%s/%d/group/%d/' % (settings.URL_PREFIX, group.project_id, group.id)
+        link = '%s/%s/group/%d/' % (settings.URL_PREFIX, group.project.slug, group.id)
 
         body = render_to_string('sentry/emails/error.txt', {
             'group': group,
diff --git a/sentry/plugins/sentry_servers/templates/sentry/plugins/sentry_servers/index.html b/sentry/plugins/sentry_servers/templates/sentry/plugins/sentry_servers/index.html
index 2b2fd26772..26aded254a 100644
--- a/sentry/plugins/sentry_servers/templates/sentry/plugins/sentry_servers/index.html
+++ b/sentry/plugins/sentry_servers/templates/sentry/plugins/sentry_servers/index.html
@@ -27,7 +27,7 @@
             <tbody>
                 {% for server_name, times_seen, first_seen, last_seen in server_list.objects %}
                     <tr>
-                        <td><a href="{% url sentry group.project_id %}?server_name={{ server_name }}">{{ server_name }}</a></td>
+                        <td><a href="{% url sentry group.project.slug %}?server_name={{ server_name }}">{{ server_name }}</a></td>
                         <td style="text-align:center">{{ times_seen|small_count }}</td>
                         <td style="text-align:center">{% if first_seen %}{{ first_seen|timesince }}{% else %}<em>n/a</em>{% endif %}</td>
                         <td style="text-align:center">{% if last_seen %}{{ last_seen|timesince }}{% else %}<em>n/a</em>{% endif %}</td>
diff --git a/sentry/plugins/sentry_servers/templates/sentry/plugins/sentry_servers/widget.html b/sentry/plugins/sentry_servers/templates/sentry/plugins/sentry_servers/widget.html
index 1b85725274..d3d419599f 100644
--- a/sentry/plugins/sentry_servers/templates/sentry/plugins/sentry_servers/widget.html
+++ b/sentry/plugins/sentry_servers/templates/sentry/plugins/sentry_servers/widget.html
@@ -6,7 +6,7 @@
 
     <ul class="server-list">
         {% for server, times_seen, _, _ in unique_servers %}
-            <li><span class="count">{{ times_seen|small_count }}</span> <a href="{% url sentry group.project_id %}?server_name={{ server }}">{{ server }}</a></li>
+            <li><span class="count">{{ times_seen|small_count }}</span> <a href="{% url sentry group.project.slug %}?server_name={{ server }}">{{ server }}</a></li>
         {% endfor %}
     </ul>
 {% endif %}
diff --git a/sentry/plugins/sentry_sites/templates/sentry/plugins/sentry_sites/index.html b/sentry/plugins/sentry_sites/templates/sentry/plugins/sentry_sites/index.html
index 83d9e860a0..93d0252515 100644
--- a/sentry/plugins/sentry_sites/templates/sentry/plugins/sentry_sites/index.html
+++ b/sentry/plugins/sentry_sites/templates/sentry/plugins/sentry_sites/index.html
@@ -27,7 +27,7 @@
             <tbody>
                 {% for site, times_seen, first_seen, last_seen in site_list.objects %}
                     <tr>
-                        <td><a href="{% url sentry group.project_id %}?site={{ site }}">{{ site }}</a></td>
+                        <td><a href="{% url sentry group.project.slug %}?site={{ site }}">{{ site }}</a></td>
                         <td style="text-align:center">{{ times_seen|small_count }}</td>
                         <td style="text-align:center">{% if first_seen %}{{ first_seen|timesince }}{% else %}<em>n/a</em>{% endif %}</td>
                         <td style="text-align:center">{% if last_seen %}{{ last_seen|timesince }}{% else %}<em>n/a</em>{% endif %}</td>
diff --git a/sentry/plugins/sentry_sites/templates/sentry/plugins/sentry_sites/widget.html b/sentry/plugins/sentry_sites/templates/sentry/plugins/sentry_sites/widget.html
index 774d818e23..4e3ac2c2b3 100644
--- a/sentry/plugins/sentry_sites/templates/sentry/plugins/sentry_sites/widget.html
+++ b/sentry/plugins/sentry_sites/templates/sentry/plugins/sentry_sites/widget.html
@@ -6,7 +6,7 @@
 
     <ul class="server-list">
         {% for site, times_seen, _, _ in unique_sites %}
-            <li><span class="count">{{ times_seen|small_count }}</span> <a href="{% url sentry group.project_id %}?site={{ site }}">{{ site }}</a></li>
+            <li><span class="count">{{ times_seen|small_count }}</span> <a href="{% url sentry group.project.slug %}?site={{ site }}">{{ site }}</a></li>
         {% endfor %}
     </ul>
 {% endif %}
diff --git a/sentry/templates/sentry/admin/projects/list.html b/sentry/templates/sentry/admin/projects/list.html
index cc507e8e5e..2380940154 100644
--- a/sentry/templates/sentry/admin/projects/list.html
+++ b/sentry/templates/sentry/admin/projects/list.html
@@ -46,9 +46,9 @@
                     {% for project, avg_events in project_list.paginator.objects|with_event_counts %}
                         <tr>
                             <td>
-                                <strong>{{ project.name }}</strong> <a href="{% url sentry project.pk %}">[view]</a><br/>
+                                <strong>{{ project.name }}</strong> <a href="{% url sentry project.slug %}">[view]</a><br/>
                                 {% if project.owner %}
-                                    <small>Owned by <a href="{% url sentry-admin-edit-user project.owner.pk %}">
+                                    <small>Owned by <a href="{% url sentry-admin-edit-user project.owner.slug %}">
                                         {% if project.owner.email %}
                                             {{ project.owner.email }}
                                         {% else %}
diff --git a/sentry/templates/sentry/admin/users/edit.html b/sentry/templates/sentry/admin/users/edit.html
index 5e314a6bab..8914decae0 100644
--- a/sentry/templates/sentry/admin/users/edit.html
+++ b/sentry/templates/sentry/admin/users/edit.html
@@ -57,7 +57,7 @@
                     {% for project, avg_events in project_list|with_event_counts %}
                         <tr>
                             <td>
-                                {{ project.name }} <a href="{% url sentry project.pk %}">[view]</a>
+                                {{ project.name }} <a href="{% url sentry project.slug %}">[view]</a>
                                 </a>
                             </td>
                             <td style="text-align:center; vertical-align:middle;">
diff --git a/sentry/templates/sentry/admin/users/list_projects.html b/sentry/templates/sentry/admin/users/list_projects.html
index c1db6c66cf..1352c4ce7d 100644
--- a/sentry/templates/sentry/admin/users/list_projects.html
+++ b/sentry/templates/sentry/admin/users/list_projects.html
@@ -35,7 +35,7 @@
                     {% for project, avg_events in project_list.objects|with_event_counts %}
                         <tr>
                             <td>
-                                {{ project.name }} <a href="{% url sentry project.pk %}">[view]</a>
+                                {{ project.name }} <a href="{% url sentry project.slug %}">[view]</a>
                                 </a>
                             </td>
                             <td style="text-align:center; vertical-align:middle;">
diff --git a/sentry/templates/sentry/dashboard.html b/sentry/templates/sentry/dashboard.html
index 87cd7881e3..3d392f0324 100644
--- a/sentry/templates/sentry/dashboard.html
+++ b/sentry/templates/sentry/dashboard.html
@@ -13,9 +13,9 @@
             <ul class="thumbnails sparkline-grid">
                 {% for project in PROJECT_LIST %}
                     <li class="thumbnail">
-                        <a href="{% url sentry project.pk %}">
+                        <a href="{% url sentry project.slug %}">
                             <h3>{{ project.name }}</h3>
-                            <div class="sparkline" data-project="{{ project.pk|safe }}" data-api-url="{% url sentry-api-chart project.pk %}"></div>
+                            <div class="sparkline" data-project="{{ project.slug|safe }}" data-api-url="{% url sentry-api-chart project.slug %}"></div>
                         </a>
                     </li>
                 {% endfor %}
diff --git a/sentry/templates/sentry/groups/details.html b/sentry/templates/sentry/groups/details.html
index fe2fa1dc71..d1ce1a3876 100644
--- a/sentry/templates/sentry/groups/details.html
+++ b/sentry/templates/sentry/groups/details.html
@@ -9,7 +9,7 @@
 {% block breadcrumb %}
     {{ block.super }}
     <li class="divider">/</li>
-    <li><a href="{% url sentry-group group.project_id group.id %}">{{ group.message|truncatechars:30 }}</a></li>
+    <li><a href="{% url sentry-group group.project.slug group.id %}">{{ group.message|truncatechars:30 }}</a></li>
 {% endblock %}
 
 {% block sidebar %}
@@ -17,9 +17,9 @@
 
     <dl class="flat">
         <dt>{% trans "Logger:" %}</dt>
-        <dd><a href="{% url sentry project.pk %}?logger={{ group.logger }}">{{ group.logger }}</a></dd>
+        <dd><a href="{% url sentry project.slug %}?logger={{ group.logger }}">{{ group.logger }}</a></dd>
         <dt>{% trans "Level:" %}</dt>
-        <dd><a href="{% url sentry project.pk %}?level={{ group.level|safe }}">{{ group.get_level_display }}</a></dd>
+        <dd><a href="{% url sentry project.slug %}?level={{ group.level|safe }}">{{ group.get_level_display }}</a></dd>
         <dt>{% trans "Status:" %}</dt>
         <dd>{{ group.get_status_display|title }}</dd>
         <dt>{% trans "First Seen:" %}</dt>
@@ -70,13 +70,13 @@
                 <ul class="actions">
                     <li>
                         {% if group.status == 0 %}
-                            <a href="javascript:void(0)" class="tip" onclick="Sentry.stream.resolve({{ group.project_id|safe }}, {{ group.pk|safe }}, false);" rel="tooltip" title="{% trans "Mark as Resolved" %}">&#10003;</a>
+                            <a href="javascript:void(0)" class="tip" onclick="Sentry.stream.resolve({{ group.project.slug|safe }}, {{ group.pk|safe }}, false);" rel="tooltip" title="{% trans "Mark as Resolved" %}">&#10003;</a>
                         {% else %}
                             <a href="javascript:void(0)" class="tip disabled" rel="tooltip" title="{% trans "Already Resolved" %}">&#10003;</a>
                         {% endif %}
                     </li>
                     {% if request.user.is_authenticated %}
-                        <li><a href="javascript:void(0)" onclick="Sentry.stream.bookmark({{ group.project_id|safe }}, {{ group.pk|safe }}, this);" class="tip bookmark{% if is_bookmarked %} checked{% endif %}" rel="tooltip" title="{% trans "Bookmark" %}">&#9829;</a></li>
+                        <li><a href="javascript:void(0)" onclick="Sentry.stream.bookmark({{ group.project.slug|safe }}, {{ group.pk|safe }}, this);" class="tip bookmark{% if is_bookmarked %} checked{% endif %}" rel="tooltip" title="{% trans "Bookmark" %}">&#9829;</a></li>
                     {% endif %}
                 </ul>
             </div>
@@ -86,10 +86,10 @@
     <section class="body">
         <ul class="nav nav-tabs">
             <li{% ifequal page 'details' %} class="active"{% endifequal %}>
-                <a href="{% url sentry-group group.project_id group.pk %}">{% trans "Details" %}</a>
+                <a href="{% url sentry-group group.project.slug group.pk %}">{% trans "Details" %}</a>
             </li>
             <li{% ifequal page 'event_list' %} class="active"{% endifequal %}>
-                <a href="{% url sentry-group-events group.project_id group.pk %}">{% trans "Events" %}</a>
+                <a href="{% url sentry-group-events group.project.slug group.pk %}">{% trans "Events" %}</a>
             </li>
             {% for label, link, is_active in group|get_panels:request %}
                 <li{% if is_active %} class="active"{% endif %}><a href="{{ link }}">{{ label }}</a></li>
@@ -98,7 +98,7 @@
                 <a class="dropdown-toggle" href="#" data-toggle="dropdown">{% trans "Actions" %} <span class="caret"></span></a>
                 <ul class="dropdown-menu">
                     {# We're going to move these to the resolve action location #}
-                    <li><a href="{% url sentry-group-json project_id=project.pk group_id=group.pk %}">{% trans "Raw JSON Data" %}</a></li>
+                    <li><a href="{% url sentry-group-json project_id=project.slug group_id=group.pk %}">{% trans "Raw JSON Data" %}</a></li>
                     {% for label, link, is_active in group|get_actions:request %}
                         {% if forloop.first %}
                             <li class="divider"></li>
diff --git a/sentry/templates/sentry/groups/event.html b/sentry/templates/sentry/groups/event.html
index b962626077..990b8306f9 100644
--- a/sentry/templates/sentry/groups/event.html
+++ b/sentry/templates/sentry/groups/event.html
@@ -6,7 +6,7 @@
 {% block breadcrumb %}
     {{ block.super }}
     <li class="divider">/</li>
-    <li><a href="{% url sentry-group-event group.project_id group.pk event.pk %}">Event at {{ event.datetime }} UTC</a></li>
+    <li><a href="{% url sentry-group-event group.project.slug group.pk event.pk %}">Event at {{ event.datetime }} UTC</a></li>
 {% endblock %}
 
 {% block sidebar %}
diff --git a/sentry/templates/sentry/groups/group_list.html b/sentry/templates/sentry/groups/group_list.html
index 6daa6794ac..28a9681bab 100644
--- a/sentry/templates/sentry/groups/group_list.html
+++ b/sentry/templates/sentry/groups/group_list.html
@@ -9,7 +9,7 @@
     <script>
     {% if has_realtime %}
         Sentry.realtime.config({
-            projectId: {{ project.pk|safe }},
+            projectId: '{{ project.slug|safe }}',
             viewId: {% if view %}{{ view.pk|safe }}{% else %}null{% endif %}
         })
         Sentry.realtime.enable();
@@ -20,9 +20,9 @@
 {% block page_header %}
     <div class="btn-group pull-right">
         {% if VIEWS %}
-            <a class="btn small{% if not view %} active{% endif %}" href="{% url sentry project.pk %}">{% trans "All" %}</a>
+            <a class="btn small{% if not view %} active{% endif %}" href="{% url sentry project.slug %}">{% trans "All" %}</a>
             {% for v in VIEWS %}
-                <a class="btn small{% if view == v %} active{% endif %}" href="{% url sentry project.pk v.pk %}">{% trans v.verbose_name_plural %}</a>
+                <a class="btn small{% if view == v %} active{% endif %}" href="{% url sentry project.slug v.pk %}">{% trans v.verbose_name_plural %}</a>
             {% endfor %}
         {% endif %}
     </div>
diff --git a/sentry/templates/sentry/header.html b/sentry/templates/sentry/header.html
index 4df873ca68..6323d43e84 100644
--- a/sentry/templates/sentry/header.html
+++ b/sentry/templates/sentry/header.html
@@ -7,7 +7,7 @@
                 <a id="logo" href="{% url sentry %}">Sentry</a>
                 {% block search %}
                     {% if project %}
-                        <form action="{% url sentry-search project.pk %}" class="navbar-search pull-right" id="search">
+                        <form action="{% url sentry-search project.slug %}" class="navbar-search pull-right" id="search">
                             <input type="hidden" name="sort" value="{% if sort %}{{ sort }}{% endif %}"/>
                             <input type="text" name="q" value="{% if query %}{{ query }}{% endif %}" placeholder="{% if HAS_SEARCH %}{% trans "search query or message id" %}{% else %}{% trans "message id" %}{% endif %}" class="search-query pull-left" />
                         </form>
@@ -21,8 +21,8 @@
 
                 <ul class="nav">
                     {% if project %}
-                        <li{% if PAGE == 'dashboard' %} class="active"{% endif %}><a href="{% url sentry project.pk %}">{% trans "Dashboard" %}</a></li>
-                        <li{% if PAGE == 'stream' %} class="active"{% endif %}><a href="{% url sentry-events project.pk %}">{% trans "Stream" %}</a></li>
+                        <li{% if PAGE == 'dashboard' %} class="active"{% endif %}><a href="{% url sentry project.slug %}">{% trans "Dashboard" %}</a></li>
+                        <li{% if PAGE == 'stream' %} class="active"{% endif %}><a href="{% url sentry-events project.slug %}">{% trans "Stream" %}</a></li>
                     {% endif %}
                 </ul>
                 <ul class="nav pull-right">
@@ -33,7 +33,7 @@
                                     <a href="#" class="dropdown-toggle" data-toggle="dropdown">{% trans "Dashboard" %} <span class="caret"></span></a>
                                     <ul class="dropdown-menu">
                                         {% for p in PROJECT_LIST %}
-                                            <li{% if project == p %} class="active"{% endif %}><a href="{% url sentry p.pk %}">{{ p.name }}</a></li>
+                                            <li{% if project == p %} class="active"{% endif %}><a href="{% url sentry p.slug %}">{{ p.name }}</a></li>
                                         {% endfor %}
                                     </ul>
                                 </li>
diff --git a/sentry/templates/sentry/layout.html b/sentry/templates/sentry/layout.html
index ca2ca09ebd..bbb9e0ece3 100644
--- a/sentry/templates/sentry/layout.html
+++ b/sentry/templates/sentry/layout.html
@@ -56,7 +56,7 @@
                     <li><a href="{% url sentry %}">{% trans "Projects" %}</a></li>
                     {% if project %}
                         <li class="divider">/</li>
-                        <li><a href="{% url sentry project.pk %}">{{ project.name }}</a></li>
+                        <li><a href="{% url sentry project.slug %}">{{ project.name }}</a></li>
                     {% endif %}
                     {% block breadcrumb %}
                     {% endblock %}
diff --git a/sentry/templates/sentry/partial/_client_config.html b/sentry/templates/sentry/partial/_client_config.html
index 8a0ed1cd2a..a547f0a1a2 100644
--- a/sentry/templates/sentry/partial/_client_config.html
+++ b/sentry/templates/sentry/partial/_client_config.html
@@ -1,18 +1,18 @@
 <ul class="client-platform-list">
     <li>
-        <a href="{% url sentry-docs-client project.pk 'python' %}">Python</a>
+        <a href="{% url sentry-docs-client project.slug 'python' %}">Python</a>
         <ul>
-            <li><a href="{% url sentry-docs-client project.pk 'django' %}" data-toggle="modal">Django</a></li>
-            <li><a href="{% url sentry-docs-client project.pk 'flask' %}" data-toggle="modal">Flask</a></li>
+            <li><a href="{% url sentry-docs-client project.slug 'django' %}" data-toggle="modal">Django</a></li>
+            <li><a href="{% url sentry-docs-client project.slug 'flask' %}" data-toggle="modal">Flask</a></li>
         </ul>
     </li>
-    <li><a href="{% url sentry-docs-client project.pk 'php' %}" data-toggle="modal">PHP</a></li>
-    <li><a href="{% url sentry-docs-client project.pk 'java' %}" data-toggle="modal">Java</a></li>
+    <li><a href="{% url sentry-docs-client project.slug 'php' %}" data-toggle="modal">PHP</a></li>
+    <li><a href="{% url sentry-docs-client project.slug 'java' %}" data-toggle="modal">Java</a></li>
     <li>
-        <a href="{% url sentry-docs-client project.pk 'node.js' %}" data-toggle="modal">Node.js</a>
+        <a href="{% url sentry-docs-client project.slug 'node.js' %}" data-toggle="modal">Node.js</a>
         <ul>
-            <li><a href="{% url sentry-docs-client project.pk 'express' %}" data-toggle="modal">Express</a></li>
-            <li><a href="{% url sentry-docs-client project.pk 'connect' %}" data-toggle="modal">Connect</a></li>
+            <li><a href="{% url sentry-docs-client project.slug 'express' %}" data-toggle="modal">Express</a></li>
+            <li><a href="{% url sentry-docs-client project.slug 'connect' %}" data-toggle="modal">Connect</a></li>
         </ul>
     </li>
 </ul>
diff --git a/sentry/templates/sentry/partial/_event.html b/sentry/templates/sentry/partial/_event.html
index 6263d11007..07031c06b1 100644
--- a/sentry/templates/sentry/partial/_event.html
+++ b/sentry/templates/sentry/partial/_event.html
@@ -4,7 +4,7 @@
 <li class="event level-{{ event.get_level_display }}" id="message_{{ event.pk|safe }}">
     <div class="details">
         <h3>
-            <a href="{% url sentry-group-event event.project_id event.group_id event.pk %}">
+            <a href="{% url sentry-group-event event.project.slug event.group_id event.pk %}">
                 {% if event.view %}
                     {{ event.view }}
                 {% else %}
@@ -28,7 +28,7 @@
             {% for tag in event|get_tags:request %}<span class="tag">{{ tag }}</span> {% endfor %}
             {{ event.error }}
         </p>
-        <a href="{% url sentry-group-event event.project_id event.group_id event.pk %}" class="row_link"></a>
+        <a href="{% url sentry-group-event event.project.slug event.group_id event.pk %}" class="row_link"></a>
     </div>
 </li>
 
diff --git a/sentry/templates/sentry/partial/_group.html b/sentry/templates/sentry/partial/_group.html
index d7b6f30d50..ed162f10c0 100644
--- a/sentry/templates/sentry/partial/_group.html
+++ b/sentry/templates/sentry/partial/_group.html
@@ -6,7 +6,7 @@
     <div class="count"><span>{{ group.times_seen|small_count }}</span></div>
     <div class="details">
         <h3>
-            <a href="{% url sentry-group group.project_id group.pk %}">
+            <a href="{% url sentry-group group.project.slug group.pk %}">
                 {% if group.view %}
                     {{ group.view }}
                 {% else %}
@@ -33,16 +33,14 @@
         <ul class="actions">
             <li>
                 {% if group.status == 0 %}
-                    <a href="javascript:void(0)" class="tip" onclick="Sentry.stream.resolve({{ group.project_id|safe }}, {{ group.pk|safe }}, this);" rel="tooltip" title="{% trans "Mark as Resolved" %}">&#10003;</a>
+                    <a href="javascript:void(0)" class="tip" onclick="Sentry.stream.resolve({{ group.project.slug|safe }}, {{ group.pk|safe }}, this);" rel="tooltip" title="{% trans "Mark as Resolved" %}">&#10003;</a>
                 {% else %}
                     <a href="javascript:void(0)" class="tip disabled" rel="tooltip" title="{% trans "Already Resolved" %}">&#10003;</a>
                 {% endif %}
             </li>
             {% if request.user.is_authenticated %}
-                <li><a href="javascript:void(0)" onclick="Sentry.stream.bookmark({{ group.project_id|safe }}, {{ group.pk|safe }}, this);" class="tip bookmark{% if is_bookmarked %} checked{% endif %}" rel="tooltip" title="{% trans "Bookmark" %}">&#9829;</a></li>
+                <li><a href="javascript:void(0)" onclick="Sentry.stream.bookmark({{ group.project.slug|safe }}, {{ group.pk|safe }}, this);" class="tip bookmark{% if is_bookmarked %} checked{% endif %}" rel="tooltip" title="{% trans "Bookmark" %}">&#9829;</a></li>
             {% endif %}
         </ul>
-<!--         <a href="{% url sentry-group group.project_id group.pk %}" class="row_link"></a>
- -->
     </div>
 </li>
diff --git a/sentry/templates/sentry/partial/interfaces/http.html b/sentry/templates/sentry/partial/interfaces/http.html
index 24800f28e0..f79d07cc8f 100644
--- a/sentry/templates/sentry/partial/interfaces/http.html
+++ b/sentry/templates/sentry/partial/interfaces/http.html
@@ -3,7 +3,7 @@
 
 <div id="request" class="module">
     <div class="page-header">
-        <a href="{% url sentry-replay event.project_id event.id %}" class="btn small pull-right">{% trans "Replay this request" %}</a>
+        <a href="{% url sentry-replay event.project.slug event.id %}" class="btn small pull-right">{% trans "Replay this request" %}</a>
         <h2>{% trans "Request" %}</h2>
     </div>
     <div class="module-content">
diff --git a/sentry/templates/sentry/projects/base.html b/sentry/templates/sentry/projects/base.html
index 4ae0ac67ba..1844bf3b1a 100644
--- a/sentry/templates/sentry/projects/base.html
+++ b/sentry/templates/sentry/projects/base.html
@@ -38,7 +38,7 @@
                     {% for project in PROJECT_LIST %}
                         <tr>
                             <td>
-                                <a href="{% url sentry-manage-project project.pk %}">{{ project.name }}</a><br/>
+                                <a href="{% url sentry-manage-project project.slug %}">{{ project.name }}</a><br/>
                                 {% if project.member_dsn %}
                                     <small><code class="clippy">{{ project.member_dsn }}</code></small>
                                 {% endif %}
diff --git a/sentry/templates/sentry/projects/docs/client_config.html b/sentry/templates/sentry/projects/docs/client_config.html
index 03f990ca1a..9978f8bf00 100644
--- a/sentry/templates/sentry/projects/docs/client_config.html
+++ b/sentry/templates/sentry/projects/docs/client_config.html
@@ -7,7 +7,7 @@
 {% block breadcrumb %}
     {{ block.super }}
     <li class="divider">/</li>
-    <li><a href="{% url sentry-docs-client project.pk platform %}">{% blocktrans %}{{ platform_title }} Client Configuration{% endblocktrans %}</a></li>
+    <li><a href="{% url sentry-docs-client project.slug platform %}">{% blocktrans %}{{ platform_title }} Client Configuration{% endblocktrans %}</a></li>
 {% endblock %}
 
 {% block main %}
diff --git a/sentry/templates/sentry/projects/list.html b/sentry/templates/sentry/projects/list.html
index c4011f2e6a..6a6b9b29bb 100644
--- a/sentry/templates/sentry/projects/list.html
+++ b/sentry/templates/sentry/projects/list.html
@@ -31,7 +31,7 @@
                     {% for project in PROJECT_LIST %}
                         <tr>
                             <td>
-                                <a href="{% url sentry-manage-project project.pk %}">{{ project.name }}</a><br/>
+                                <a href="{% url sentry-manage-project project.slug %}">{{ project.name }}</a><br/>
                                 {% if project.member_dsn %}
                                     <small><code class="clippy">{{ project.member_dsn }}</code></small>
                                 {% endif %}
diff --git a/sentry/templates/sentry/projects/manage.html b/sentry/templates/sentry/projects/manage.html
index b7396ed984..04881958a0 100644
--- a/sentry/templates/sentry/projects/manage.html
+++ b/sentry/templates/sentry/projects/manage.html
@@ -9,22 +9,22 @@
 {% block breadcrumb %}
     {{ block.super }}
     <li class="divider">/</li>
-    <li><a href="{% url sentry-manage-project project.pk %}">{% trans "Manage" %}</a></li>
+    <li><a href="{% url sentry-manage-project project.slug %}">{% trans "Manage" %}</a></li>
 {% endblock %}
 
 {% block main %}
     <section class="body">
         <ul class="nav nav-tabs">
             <li{% if page == 'details' %} class="active"{% endif %}>
-                <a href="{% url sentry-manage-project project.pk %}">{% trans "Details" %}</a>
+                <a href="{% url sentry-manage-project project.slug %}">{% trans "Details" %}</a>
             </li>
             {% for p in project|get_plugins %}
                 <li{% if page == 'plugin' and plugin.slug == p.slug %} class="active"{% endif %}>
-                    <a href="{% url sentry-configure-project-plugin project.pk p.slug %}">{{ p.get_title }}</a>
+                    <a href="{% url sentry-configure-project-plugin project.slug p.slug %}">{{ p.get_title }}</a>
                 </li>
             {% endfor %}
             <li class="pull-right{% if page == 'plugins' %} active{% endif %}">
-                <a href="{% url sentry-manage-project-plugins project.pk %}">{% trans "Manage Plugins" %}</a>
+                <a href="{% url sentry-manage-project-plugins project.slug %}">{% trans "Manage Plugins" %}</a>
             </li>
         </ul>
         {% block inner %}
@@ -50,7 +50,7 @@
                 <fieldset class="form-actions">
                     <button type="submit" class="btn btn-primary">{% trans "Save Changes" %}</button>
                     {% if PROJECT_ID != project.pk %}
-                        <a href="{% url sentry-remove-project project.pk %}" class="btn btn-danger">{% trans "Remove Project" %}</a>
+                        <a href="{% url sentry-remove-project project.slug %}" class="btn btn-danger">{% trans "Remove Project" %}</a>
                     {% else %}
                         <a href="#" class="btn disabled btn-danger">{% trans "Cannot remove default project" %}</a>
                     {% endif %}
@@ -58,7 +58,7 @@
             </form>
             <div class="page-header">
                 {% if can_add_member %}
-                    <a href="{% url sentry-new-team-member project.pk %}" class="btn pull-right btn-primary">{% trans "New Member" %}</a>
+                    <a href="{% url sentry-new-team-member project.slug %}" class="btn pull-right btn-primary">{% trans "New Member" %}</a>
                 {% endif %}
                 <h2>{% trans "Members" %}</h2>
             </div>
@@ -77,7 +77,7 @@
                     {% for member, user in member_list %}
                         <tr>
                             <td>
-                                <a href="{# {% url sentry-view-project-member project.pk member.pk %} #}">{{ user.username }}</a><br>
+                                <a href="{# {% url sentry-view-project-member project.slug member.pk %} #}">{{ user.username }}</a><br>
                                 {{ user.email }}
                             </td>
                             <td style="text-align:center;">
diff --git a/sentry/templates/sentry/projects/plugins/list.html b/sentry/templates/sentry/projects/plugins/list.html
index 8da78eec8d..d3930608ec 100644
--- a/sentry/templates/sentry/projects/plugins/list.html
+++ b/sentry/templates/sentry/projects/plugins/list.html
@@ -9,7 +9,7 @@
 {% block breadcrumb %}
     {{ block.super }}
     <li class="divider">/</li>
-    <li><a href="{% url sentry-manage-project-plugins project.pk %}">{% trans "Plugins" %}</a></li>
+    <li><a href="{% url sentry-manage-project-plugins project.slug %}">{% trans "Plugins" %}</a></li>
 {% endblock %}
 
 {% block inner %}
@@ -29,7 +29,7 @@
                     <tr>
                         <td>
                             {% if plugin.has_project_conf %}
-                                <a href="{% url sentry-configure-project-plugin project.pk plugin.slug %}">{{ plugin.get_title }}</a>
+                                <a href="{% url sentry-configure-project-plugin project.slug plugin.slug %}">{{ plugin.get_title }}</a>
                             {% else %}
                                 {{ plugin.get_title }}
                             {% endif %}
diff --git a/sentry/templates/sentry/projects/remove.html b/sentry/templates/sentry/projects/remove.html
index 5c51b2ca85..175318aa78 100644
--- a/sentry/templates/sentry/projects/remove.html
+++ b/sentry/templates/sentry/projects/remove.html
@@ -7,7 +7,7 @@
 {% block breadcrumb %}
     {{ block.super }}
     <li class="divider">/</li>
-    <li><a href="{% url sentry-remove-project project.pk %}">{% trans "Remove Project" %}</a></li>
+    <li><a href="{% url sentry-remove-project project.slug %}">{% trans "Remove Project" %}</a></li>
 {% endblock %}
 
 {% block main %}
@@ -28,7 +28,7 @@
                 {% include "sentry/partial/_form_field.html" %}
             {% endfor %}
             <fieldset class="form-actions">
-                <button type="submit" class="btn btn-danger">{% trans "Confirm" %}</button> <a href="{% url sentry-manage-project project.pk %}" class="btn">{% trans "Cancel" %}</a>
+                <button type="submit" class="btn btn-danger">{% trans "Confirm" %}</button> <a href="{% url sentry-manage-project project.slug %}" class="btn">{% trans "Cancel" %}</a>
             </fieldset>
         </form>
     </section>
diff --git a/sentry/templates/sentry/teams/manage.html b/sentry/templates/sentry/teams/manage.html
index 07bc32c8d7..749a16a71a 100644
--- a/sentry/templates/sentry/teams/manage.html
+++ b/sentry/templates/sentry/teams/manage.html
@@ -60,10 +60,10 @@
                         {% for project in project_list %}
                             <tr>
                                 <td>
-                                    <a href="{% url sentry project.pk %}">{{ project.name }}</a><br>
+                                    <a href="{% url sentry project.slug %}">{{ project.name }}</a><br>
                                 </td>
                                 <td style="text-align:center;">
-                                    <a href="{% url sentry-manage-project project.pk %}" class="btn btn-small">{% trans "Edit" %}</a>
+                                    <a href="{% url sentry-manage-project project.slug %}" class="btn btn-small">{% trans "Edit" %}</a>
                                 </td>
                             </tr>
                         {% endfor %}
diff --git a/sentry/web/api.py b/sentry/web/api.py
index c4799d97b1..38949828b3 100644
--- a/sentry/web/api.py
+++ b/sentry/web/api.py
@@ -13,7 +13,7 @@ from django.views.decorators.csrf import csrf_exempt
 from django.views.decorators.http import require_http_methods
 
 from sentry.conf import settings
-from sentry.exceptions import InvalidData, InvalidTimestamp
+from sentry.exceptions import InvalidData
 from sentry.coreapi import project_from_auth_vars, project_from_api_key_and_id, \
   project_from_id, decode_and_decompress_data, safely_load_json_string, \
   validate_data, insert_data_to_database, APIError, APIUnauthorized, \
diff --git a/sentry/web/decorators.py b/sentry/web/decorators.py
index 73cb04f2a6..d34559d3b1 100644
--- a/sentry/web/decorators.py
+++ b/sentry/web/decorators.py
@@ -31,10 +31,15 @@ def has_access(group_or_func=None):
         @wraps(func)
         def _wrapped(request, project_id=None, *args, **kwargs):
             # XXX: if project_id isn't set, should we only allow superuser?
+            if project_id.isdigit():
+                lookup_kwargs = {'id': int(project_id)}
+            else:
+                lookup_kwargs = {'slug': project_id}
+
             if request.user.is_superuser:
                 if project_id:
                     try:
-                        project = Project.objects.get_from_cache(pk=project_id)
+                        project = Project.objects.get_from_cache(**lookup_kwargs)
                     except Project.DoesNotExist:
                         return HttpResponseRedirect(reverse('sentry'))
                 else:
@@ -42,9 +47,10 @@ def has_access(group_or_func=None):
                 return func(request, project, *args, **kwargs)
 
             if project_id:
-                project_list = get_project_list(request.user, group_or_func)
+                key, value = lookup_kwargs.items()[0]
+                project_list = get_project_list(request.user, group_or_func, key)
                 try:
-                    project = project_list[int(project_id)]
+                    project = project_list[value]
                 except (KeyError, ValueError):
                     return HttpResponseRedirect(reverse('sentry'))
             else:
diff --git a/sentry/web/frontend/generic.py b/sentry/web/frontend/generic.py
index 41b71db797..18a8cf957e 100644
--- a/sentry/web/frontend/generic.py
+++ b/sentry/web/frontend/generic.py
@@ -17,7 +17,7 @@ from sentry.web.helpers import get_project_list, render_to_response, \
 
 @login_required
 def dashboard(request):
-    project_list = get_project_list(request.user)
+    project_list = get_project_list(request.user, key='slug')
     if len(project_list) == 1:
         return HttpResponseRedirect(reverse('sentry', kwargs={'project_id': project_list.keys()[0]}))
     if len(project_list) == 0 and not request.user.is_authenticated():
diff --git a/sentry/web/frontend/groups.py b/sentry/web/frontend/groups.py
index 7bda59c6e9..ef053ff9ea 100644
--- a/sentry/web/frontend/groups.py
+++ b/sentry/web/frontend/groups.py
@@ -129,7 +129,7 @@ def search(request, project):
     query = request.GET.get('q')
 
     if not query:
-        return HttpResponseRedirect(reverse('sentry', args=[project.pk]))
+        return HttpResponseRedirect(reverse('sentry', args=[project.slug]))
 
     sort = request.GET.get('sort')
     if sort not in SEARCH_SORT_OPTIONS:
@@ -196,7 +196,7 @@ def group_list(request, project, view_id=None):
         try:
             view = View.objects.get_from_cache(pk=view_id)
         except View.DoesNotExist:
-            return HttpResponseRedirect(reverse('sentry', args=[project.pk]))
+            return HttpResponseRedirect(reverse('sentry', args=[project.slug]))
     else:
         view = None
 
@@ -256,7 +256,7 @@ def group_json(request, project, group_id):
     data = SortedDict()
     data['id'] = event.event_id
     data['checksum'] = event.checksum
-    data['project'] = event.project_id
+    data['project'] = event.project.slug
     data['logger'] = event.logger
     data['level'] = event.get_level_display()
     data['culprit'] = event.culprit
@@ -272,7 +272,7 @@ def group(request, project, group_id):
     group = get_object_or_404(Group, pk=group_id)
 
     if group.project and group.project != project:
-        return HttpResponseRedirect(reverse('sentry-group', kwargs={'group_id': group.pk, 'project_id': group.project_id}))
+        return HttpResponseRedirect(reverse('sentry-group', kwargs={'group_id': group.pk, 'project_id': group.project.slug}))
 
     # It's possible that a message would not be created under certain
     # circumstances (such as a post_save signal failing)
@@ -295,7 +295,7 @@ def group_event_list(request, project, group_id):
     group = get_object_or_404(Group, pk=group_id)
 
     if group.project and group.project != project:
-        return HttpResponseRedirect(reverse('sentry-group-events', kwargs={'group_id': group.pk, 'project_id': group.project_id}))
+        return HttpResponseRedirect(reverse('sentry-group-events', kwargs={'group_id': group.pk, 'project_id': group.project.slug}))
 
     event_list = group.event_set.all().order_by('-datetime')
 
@@ -313,7 +313,7 @@ def group_event_details(request, project, group_id, event_id):
     group = get_object_or_404(Group, pk=group_id)
 
     if group.project and group.project != project:
-        return HttpResponseRedirect(reverse('sentry-group-event', kwargs={'group_id': group.pk, 'project_id': group.project_id, 'event_id': event_id}))
+        return HttpResponseRedirect(reverse('sentry-group-event', kwargs={'group_id': group.pk, 'project_id': group.project.slug, 'event_id': event_id}))
 
     event = get_object_or_404(group.event_set, pk=event_id)
 
@@ -334,7 +334,7 @@ def group_plugin_action(request, project, group_id, slug):
     group = get_object_or_404(Group, pk=group_id)
 
     if group.project and group.project != project:
-        return HttpResponseRedirect(reverse('sentry-group-plugin-action', kwargs={'group_id': group.pk, 'project_id': group.project_id, 'slug': slug}))
+        return HttpResponseRedirect(reverse('sentry-group-plugin-action', kwargs={'group_id': group.pk, 'project_id': group.project.slug, 'slug': slug}))
 
     try:
         plugin = plugins.get(slug)
@@ -344,4 +344,4 @@ def group_plugin_action(request, project, group_id, slug):
     response = plugin.get_view_response(request, group)
     if response:
         return response
-    return HttpResponseRedirect(request.META.get('HTTP_REFERER') or reverse('sentry', kwargs={'project_id': group.project_id}))
+    return HttpResponseRedirect(request.META.get('HTTP_REFERER') or reverse('sentry', kwargs={'project_id': group.project.slug}))
diff --git a/sentry/web/frontend/projects.py b/sentry/web/frontend/projects.py
index c4715444d7..81dd87214f 100644
--- a/sentry/web/frontend/projects.py
+++ b/sentry/web/frontend/projects.py
@@ -126,10 +126,10 @@ def configure_project_plugin(request, project, slug):
     try:
         plugin = plugins.get(slug)
     except KeyError:
-        return HttpResponseRedirect(reverse('sentry-manage-project', args=[project.pk]))
+        return HttpResponseRedirect(reverse('sentry-manage-project', args=[project.slug]))
 
     if not plugin.is_enabled(project):
-        return HttpResponseRedirect(reverse('sentry-manage-project', args=[project.pk]))
+        return HttpResponseRedirect(reverse('sentry-manage-project', args=[project.slug]))
 
     result = plugins.first('has_perm', request.user, 'configure_project_plugin', project, plugin)
     if result is False and not request.user.is_superuser:
@@ -137,7 +137,7 @@ def configure_project_plugin(request, project, slug):
 
     form = plugin.project_conf_form
     if form is None:
-        return HttpResponseRedirect(reverse('sentry-manage-project', args=[project.pk]))
+        return HttpResponseRedirect(reverse('sentry-manage-project', args=[project.slug]))
 
     action, view = plugin_config(plugin, project, request)
     if action == 'redirect':
diff --git a/sentry/web/frontend/teams.py b/sentry/web/frontend/teams.py
index a296ba27dc..740951d480 100644
--- a/sentry/web/frontend/teams.py
+++ b/sentry/web/frontend/teams.py
@@ -338,7 +338,7 @@ def create_new_team_project(request, team):
         if not project.owner:
             project.owner = request.user
         project.save()
-        return HttpResponseRedirect(reverse('sentry-manage-project', args=[project.pk]))
+        return HttpResponseRedirect(reverse('sentry-manage-project', args=[project.slug]))
 
     context = csrf(request)
     context.update({
diff --git a/sentry/web/urls.py b/sentry/web/urls.py
index 45dd0bbbc2..317e924b25 100644
--- a/sentry/web/urls.py
+++ b/sentry/web/urls.py
@@ -75,13 +75,13 @@ urlpatterns = patterns('',
 
     url(r'^account/projects/$', projects.project_list, name='sentry-project-list'),
     url(r'^account/projects/new/$', projects.new_project, name='sentry-new-project'),
-    url(r'^account/projects/(?P<project_id>\d+)/edit/$', projects.manage_project,
+    url(r'^account/projects/(?P<project_id>[\w_-]+)/edit/$', projects.manage_project,
         name='sentry-manage-project'),
-    url(r'^account/projects/(?P<project_id>\d+)/plugins/$', projects.manage_plugins,
+    url(r'^account/projects/(?P<project_id>[\w_-]+)/plugins/$', projects.manage_plugins,
         name='sentry-manage-project-plugins'),
-    url(r'^account/projects/(?P<project_id>\d+)/plugins/(?P<slug>[\w_-]+)/$', projects.configure_project_plugin,
+    url(r'^account/projects/(?P<project_id>[\w_-]+)/plugins/(?P<slug>[\w_-]+)/$', projects.configure_project_plugin,
         name='sentry-configure-project-plugin'),
-    url(r'^account/projects/(?P<project_id>\d+)/remove/$', projects.remove_project,
+    url(r'^account/projects/(?P<project_id>[\w_-]+)/remove/$', projects.remove_project,
         name='sentry-remove-project'),
 
     # Global
@@ -109,29 +109,29 @@ urlpatterns = patterns('',
 
     url(r'^api/store/$', api.store, name='sentry-api-store'),
     url(r'^api/notification/$', api.notification, name='sentry-api-notification'),
-    url(r'^api/(?P<project_id>\d+)/poll/$', api.poll, name='sentry-api-poll'),
-    url(r'^api/(?P<project_id>\d+)/resolve/$', api.resolve, name='sentry-api-resolve'),
-    url(r'^api/(?P<project_id>\d+)/bookmark/$', api.bookmark, name='sentry-api-bookmark'),
-    url(r'^api/(?P<project_id>\d+)/clear/$', api.clear, name='sentry-api-clear'),
-    url(r'^api/(?P<project_id>\d+)/chart/$', api.chart, name='sentry-api-chart'),
+    url(r'^api/(?P<project_id>[\w_-]+)/poll/$', api.poll, name='sentry-api-poll'),
+    url(r'^api/(?P<project_id>[\w_-]+)/resolve/$', api.resolve, name='sentry-api-resolve'),
+    url(r'^api/(?P<project_id>[\w_-]+)/bookmark/$', api.bookmark, name='sentry-api-bookmark'),
+    url(r'^api/(?P<project_id>[\w_-]+)/clear/$', api.clear, name='sentry-api-clear'),
+    url(r'^api/(?P<project_id>[\w_-]+)/chart/$', api.chart, name='sentry-api-chart'),
 
     # Project specific
 
-    # url(r'^(?P<project_id>\d+)/docs/$', groups.search, name='sentry-search'),
-    url(r'^(?P<project_id>\d+)/docs/(?P<platform>%s)/$' % ('|'.join(re.escape(r) for r in docs.PLATFORM_LIST),), docs.client_guide,
+    # url(r'^(?P<project_id>[\w_-]+)/docs/$', groups.search, name='sentry-search'),
+    url(r'^(?P<project_id>[\w_-]+)/docs/(?P<platform>%s)/$' % ('|'.join(re.escape(r) for r in docs.PLATFORM_LIST),), docs.client_guide,
         name='sentry-docs-client'),
 
-    url(r'^(?P<project_id>\d+)/group/(?P<group_id>\d+)/$', groups.group, name='sentry-group'),
-    url(r'^(?P<project_id>\d+)/group/(?P<group_id>\d+)/json/$', groups.group_json, name='sentry-group-json'),
-    url(r'^(?P<project_id>\d+)/group/(?P<group_id>\d+)/events/$', groups.group_event_list, name='sentry-group-events'),
-    url(r'^(?P<project_id>\d+)/group/(?P<group_id>\d+)/events/(?P<event_id>\d+)/$', groups.group_event_details, name='sentry-group-event'),
-    url(r'^(?P<project_id>\d+)/group/(?P<group_id>\d+)/actions/(?P<slug>[\w_-]+)/', groups.group_plugin_action, name='sentry-group-plugin-action'),
+    url(r'^(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/$', groups.group, name='sentry-group'),
+    url(r'^(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/json/$', groups.group_json, name='sentry-group-json'),
+    url(r'^(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/events/$', groups.group_event_list, name='sentry-group-events'),
+    url(r'^(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/events/(?P<event_id>\d+)/$', groups.group_event_details, name='sentry-group-event'),
+    url(r'^(?P<project_id>[\w_-]+)/group/(?P<group_id>\d+)/actions/(?P<slug>[\w_-]+)/', groups.group_plugin_action, name='sentry-group-plugin-action'),
 
-    url(r'^(?P<project_id>\d+)/events/$', events.event_list, name='sentry-events'),
-    url(r'^(?P<project_id>\d+)/events/(?P<event_id>\d+)/replay/$', events.replay_event, name='sentry-replay'),
+    url(r'^(?P<project_id>[\w_-]+)/events/$', events.event_list, name='sentry-events'),
+    url(r'^(?P<project_id>[\w_-]+)/events/(?P<event_id>\d+)/replay/$', events.replay_event, name='sentry-replay'),
 
-    url(r'^(?P<project_id>\d+)/search/$', groups.search, name='sentry-search'),
+    url(r'^(?P<project_id>[\w_-]+)/search/$', groups.search, name='sentry-search'),
 
-    url(r'^(?P<project_id>\d+)/view/(?P<view_id>\d+)/$', groups.group_list, name='sentry'),
-    url(r'^(?P<project_id>\d+)/$', groups.group_list, name='sentry'),
+    url(r'^(?P<project_id>[\w_-]+)/view/(?P<view_id>\d+)/$', groups.group_list, name='sentry'),
+    url(r'^(?P<project_id>[\w_-]+)/$', groups.group_list, name='sentry'),
 )
diff --git a/tests/sentry/models/tests.py b/tests/sentry/models/tests.py
index 68d584458a..fa75ee2599 100644
--- a/tests/sentry/models/tests.py
+++ b/tests/sentry/models/tests.py
@@ -40,17 +40,17 @@ class ProjectKeyTest(TestCase):
     def test_get_dsn(self):
         key = ProjectKey(project_id=1, public_key='public', secret_key='secret')
         with self.Settings(SENTRY_URL_PREFIX='http://example.com'):
-            self.assertEquals(key.get_dsn(), 'http://public:secret@example.com/1')
+            self.assertEquals(key.get_dsn(), 'http://public:secret@example.com/default')
 
     def test_get_dsn_with_ssl(self):
         key = ProjectKey(project_id=1, public_key='public', secret_key='secret')
         with self.Settings(SENTRY_URL_PREFIX='https://example.com'):
-            self.assertEquals(key.get_dsn(), 'https://public:secret@example.com/1')
+            self.assertEquals(key.get_dsn(), 'https://public:secret@example.com/default')
 
     def test_get_dsn_with_port(self):
         key = ProjectKey(project_id=1, public_key='public', secret_key='secret')
         with self.Settings(SENTRY_URL_PREFIX='http://example.com:81'):
-            self.assertEquals(key.get_dsn(), 'http://public:secret@example.com:81/1')
+            self.assertEquals(key.get_dsn(), 'http://public:secret@example.com:81/default')
 
 
 class PendingTeamMemberTest(TestCase):
