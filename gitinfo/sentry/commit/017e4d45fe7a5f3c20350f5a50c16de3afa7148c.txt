commit 017e4d45fe7a5f3c20350f5a50c16de3afa7148c
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Wed Aug 23 12:32:51 2017 -0700

    Handle missing token info in js frames

diff --git a/src/sentry/lang/javascript/processor.py b/src/sentry/lang/javascript/processor.py
index b800abc7bd..a4acf04b9a 100644
--- a/src/sentry/lang/javascript/processor.py
+++ b/src/sentry/lang/javascript/processor.py
@@ -604,8 +604,11 @@ class JavaScriptStacktraceProcessor(StacktraceProcessor):
                 new_frame['lineno'] = token.src_line + 1
                 new_frame['colno'] = token.src_col
                 last_token = None
+
+                # we might go back to a frame that is unhandled.  In that
+                # case we might not find the token in the data.
                 if processable_frame.previous_frame:
-                    last_token = processable_frame.previous_frame.data['token']
+                    last_token = processable_frame.previous_frame.data.get('token')
 
                 # The offending function is always the previous function in the stack
                 # Honestly, no idea what the bottom most frame is, so
