commit 7cfb73584f870e90231596f675ee16bd2df33108
Author: Ben Vinegar <ben@benv.ca>
Date:   Thu Sep 22 14:36:49 2016 -0700

    Refactor LetterAvatar into UserLetterAvatar

diff --git a/src/sentry/static/sentry/app/components/avatar.jsx b/src/sentry/static/sentry/app/components/avatar.jsx
index 43565f47f0..9fbad744f4 100644
--- a/src/sentry/static/sentry/app/components/avatar.jsx
+++ b/src/sentry/static/sentry/app/components/avatar.jsx
@@ -1,7 +1,7 @@
 import React from 'react';
 import $ from 'jquery';
 import MD5 from 'crypto-js/md5';
-import LetterAvatar from '../components/letterAvatar';
+import UserLetterAvatar from '../components/userLetterAvatar';
 
 const Avatar = React.createClass({
   propTypes: {
@@ -82,7 +82,7 @@ const Avatar = React.createClass({
     } else if (avatarType === 'upload') {
       return <img src={this.buildProfileUrl()} {...props}/>;
     } else {
-      return <LetterAvatar user={user}/>;
+      return <UserLetterAvatar user={user}/>;
     }
   },
 
@@ -94,7 +94,7 @@ const Avatar = React.createClass({
 
     return (
       <span className={this.props.className}>
-        {this.state.showBackupAvatar && <LetterAvatar user={user}/>}
+        {this.state.showBackupAvatar && <UserLetterAvatar user={user}/>}
         {this.renderImg()}
       </span>
     );
diff --git a/src/sentry/static/sentry/app/components/letterAvatar.jsx b/src/sentry/static/sentry/app/components/letterAvatar.jsx
index 7adf1b62ce..032d27ecd5 100644
--- a/src/sentry/static/sentry/app/components/letterAvatar.jsx
+++ b/src/sentry/static/sentry/app/components/letterAvatar.jsx
@@ -7,7 +7,8 @@ import React from 'react';
 
 const LetterAvatar = React.createClass({
   propTypes: {
-    user: React.PropTypes.object.isRequired
+    identifier: React.PropTypes.string.isRequired,
+    displayName: React.PropTypes.string.isRequired
   },
 
   COLORS: [
@@ -26,10 +27,11 @@ const LetterAvatar = React.createClass({
   ],
 
   getColor() {
-    let userId = this.getIdentifierHash();
-    return this.COLORS[userId % this.COLORS.length];
+    let id = this.hashIdentifier(this.props.identifier);
+    return this.COLORS[id % this.COLORS.length];
   },
 
+
   hashIdentifier(identifier) {
     identifier += '';
     let hash = 0;
@@ -39,19 +41,8 @@ const LetterAvatar = React.createClass({
     return hash;
   },
 
-  getIdentifierHash() {
-    let user = this.props.user;
-    let identifier = user.email || user.username || user.id || user.ip_address;
-    return this.hashIdentifier(identifier);
-  },
-
-  getDisplayName() {
-    let user = this.props.user;
-    return user.name || user.email || user.username || '';
-  },
-
   getInitials() {
-    let names = (this.getDisplayName().trim() || '?').split(' ');
+    let names = (this.props.displayName.trim() || '?').split(' ');
     let initials = names[0][0] + (names.length > 1 ? names[names.length - 1][0] : '');
     return initials.toUpperCase();
   },
diff --git a/src/sentry/static/sentry/app/components/userLetterAvatar.jsx b/src/sentry/static/sentry/app/components/userLetterAvatar.jsx
new file mode 100644
index 0000000000..f21edddeee
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/userLetterAvatar.jsx
@@ -0,0 +1,30 @@
+import React from 'react';
+import LetterAvatar from './letterAvatar';
+
+const UserLetterAvatar = React.createClass({
+  propTypes: {
+    user: React.PropTypes.object.isRequired
+  },
+
+  getIdentifier() {
+    let user = this.props.user;
+    let identifier = user.email || user.username || user.id || user.ip_address;
+    return identifier;
+  },
+
+  getDisplayName() {
+    let user = this.props.user;
+    return user.name || user.email || user.username || '';
+  },
+
+
+  render() {
+    return (
+      <LetterAvatar
+        identifier={this.getIdentifier()}
+        displayName={this.getDisplayName()}/>
+    );
+  }
+});
+
+export default UserLetterAvatar;
