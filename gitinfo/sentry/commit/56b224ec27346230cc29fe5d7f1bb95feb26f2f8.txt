commit 56b224ec27346230cc29fe5d7f1bb95feb26f2f8
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Oct 16 16:07:28 2014 +0200

    Improve assignee selector

diff --git a/src/sentry/static/sentry/app/directives/assigneeSelector.js b/src/sentry/static/sentry/app/directives/assigneeSelector.js
index 4db2836b4a..3226e77aab 100644
--- a/src/sentry/static/sentry/app/directives/assigneeSelector.js
+++ b/src/sentry/static/sentry/app/directives/assigneeSelector.js
@@ -1,15 +1,19 @@
 (function(){
   'use strict';
 
-  angular.module('sentry.directives.assigneeSelector', [])
-    .directive('assigneeSelector', function() {
-      return {
-        restrict: 'E',
-        templateUrl: '/templates/assignee-selector.html',
-        link: function(scope, element, attrs) {
-          scope.group = scope.$eval(attrs.group);
-        },
-        controller: ['$scope', '$timeout', 'projectMemberList', function($scope, $timeout, projectMemberList){
+  angular.module('sentry.directives.assigneeSelector', [
+    'sentry.flash',
+    'ui.bootstrap'
+  ]).directive('assigneeSelector', function() {
+    return {
+      restrict: 'E',
+      templateUrl: '/templates/assignee-selector.html',
+      link: function(scope, element, attrs) {
+        scope.group = scope.$eval(attrs.group);
+      },
+      controller: [
+        '$scope', '$timeout', 'flash', 'projectMemberList',
+        function($scope, $timeout, flash, projectMemberList){
           projectMemberList.success(function(data){
             $scope.projectMemberList = data;
           });
@@ -26,11 +30,15 @@
                 $timeout(function(){
                   $scope.group.assignedTo = user;
                 });
+              },
+              error: function(){
+                flash('error', 'Unable to change assignee. Please try again.');
               }
             });
           };
-        }],
-        controllerAs: 'assigneeSelector'
-      };
-    });
+        }
+      ],
+      controllerAs: 'assigneeSelector'
+    };
+  });
 }());
diff --git a/src/sentry/static/sentry/app/templates/assignee-selector.html b/src/sentry/static/sentry/app/templates/assignee-selector.html
index 5a3543cb05..72c3a3501e 100644
--- a/src/sentry/static/sentry/app/templates/assignee-selector.html
+++ b/src/sentry/static/sentry/app/templates/assignee-selector.html
@@ -1,12 +1,12 @@
 <div class="user-selector" ng-cloak>
-  <div class="btn-group">
-    <a href="#" class="btn btn-sm btn-default dropdown-toggle">
+  <div dropdown>
+    <a href="#" class="btn btn-sm btn-default" dropdown-toggle>
       <span ng-if="group.assignedTo">
         <img ng-src="<% group.assignedTo.avatarUrl %>" class="avatar">
       </span>
       <span aria-hidden="true" class="icon-arrow-down"></span>
     </a>
-    <div class="dropdown-menu" ng-click="$event.stopPropagation()">
+    <div class="dropdown-menu" role="menu">
       <input type="text" class="form-control input-sm" placeholder="Filter people">
       <ul>
         <li ng-repeat="projectMember in projectMemberList">
