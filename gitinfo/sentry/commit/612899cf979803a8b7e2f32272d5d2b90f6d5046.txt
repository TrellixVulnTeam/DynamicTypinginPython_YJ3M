commit 612899cf979803a8b7e2f32272d5d2b90f6d5046
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Jul 20 14:23:05 2014 +0200

    Work towards basic angular group details

diff --git a/src/sentry/static/sentry/app/controllers/groupDetails.js b/src/sentry/static/sentry/app/controllers/groupDetails.js
new file mode 100644
index 0000000000..d67de69bd1
--- /dev/null
+++ b/src/sentry/static/sentry/app/controllers/groupDetails.js
@@ -0,0 +1,17 @@
+define([
+  'app'
+], function(app) {
+  'use strict';
+
+  app.classy.controller({
+    name: 'GroupDetailsCtrl',
+
+    inject: ['$scope', '$http'],
+
+    init: function() {
+      // TODO(dcramer): remove the window hack
+      this.$http.post('/api/0/groups/' + window.SentryConfig.selectedGroup.id + '/markseen/');
+    }
+  });
+});
+
diff --git a/src/sentry/static/sentry/main.js b/src/sentry/static/sentry/main.js
index 28b1ddfbbc..3ae19e7dd7 100644
--- a/src/sentry/static/sentry/main.js
+++ b/src/sentry/static/sentry/main.js
@@ -6,6 +6,7 @@ define([
 
   'app/controllers/default',
   'app/controllers/deleteTeam',
+  'app/controllers/groupDetails',
   'app/controllers/manageTeamOwnership',
   'app/controllers/manageTeamSettings',
   'app/controllers/projectStream',
diff --git a/src/sentry/templates/sentry/groups/details.html b/src/sentry/templates/sentry/groups/details.html
index 42d4e0af37..720e5432b7 100644
--- a/src/sentry/templates/sentry/groups/details.html
+++ b/src/sentry/templates/sentry/groups/details.html
@@ -2,11 +2,14 @@
 
 {% load i18n %}
 {% load sentry_activity %}
+{% load sentry_api %}
 {% load sentry_helpers %}
 {% load sentry_plugins %}
 
 {% block title %}{{ group.title }} | {{ block.super }}{% endblock %}
 
+{% block controller %}GroupDetailsCtrl{% endblock %}
+
 {% block page_header %}{% endblock %}
 
 {% block content_before %}
@@ -41,20 +44,11 @@
             </div>
           </div>
       </div>
-      <div class="seen-by">
+      <div class="seen-by" ng-if="selectedGroup.seenBy">
         <ul>
           <li>Seen by</li>
           <li ng-repeat="user in selectedGroup.seenBy">
-            <a href="#"><img src="{{user.avatarUrl}}" /></a>
-          </li>
-          <li>
-            <a href="#"><img src="http://github.com/ckj.png"></a>
-          </li>
-          <li>
-            <a href="#"><img src="http://github.com/dcramer.png"></a>
-          </li>
-          <li>
-            <a href="#"><img src="http://github.com/mattrobenolt.png"></a>
+            <img src="{{user.avatarUrl}}" />
           </li>
         </ul>
       </div>
@@ -230,6 +224,7 @@
 
 {% block content_after %}
     <script>
+    window.SentryConfig.selectedGroup = {% convert_to_json selectedGroup %};
     require(['config', 'app/init'], function(_, app){
         new app.GroupDetailsPage({
             group: {{ group|to_json:request|safe }},
diff --git a/src/sentry/web/frontend/groups.py b/src/sentry/web/frontend/groups.py
index 3df255087e..b344f9b022 100644
--- a/src/sentry/web/frontend/groups.py
+++ b/src/sentry/web/frontend/groups.py
@@ -20,6 +20,7 @@ from django.shortcuts import get_object_or_404
 from django.utils import timezone
 
 from sentry import app
+from sentry.api.serializers import serialize
 from sentry.constants import (
     SORT_OPTIONS, MEMBER_USER, DEFAULT_SORT_OPTION, EVENTS_PER_PAGE
 )
@@ -131,6 +132,7 @@ def render_with_group_context(group, template, context, request=None,
         'team': group.project.team,
         'project': group.project,
         'group': group,
+        'selectedGroup': serialize(group, request.user),
         'can_admin_event': can_admin_group(request.user, group),
     })
 
