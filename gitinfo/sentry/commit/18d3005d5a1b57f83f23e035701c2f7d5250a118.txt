commit 18d3005d5a1b57f83f23e035701c2f7d5250a118
Author: josh <josh@jrl.ninja>
Date:   Fri Jan 17 23:26:28 2020 +0000

    fix(drf): don't attempt to use QueryDict api on new null value of request.data (#16523)

diff --git a/src/sentry/api/endpoints/chunk.py b/src/sentry/api/endpoints/chunk.py
index 31b7cda3d0..54daec17b6 100644
--- a/src/sentry/api/endpoints/chunk.py
+++ b/src/sentry/api/endpoints/chunk.py
@@ -86,8 +86,11 @@ class ChunkUploadEndpoint(OrganizationEndpoint):
         logger = logging.getLogger("sentry.files")
         logger.info("chunkupload.start")
 
-        files = request.data.getlist("file")
-        files += [GzipChunk(chunk) for chunk in request.data.getlist("file_gzip")]
+        files = []
+        if request.data:
+            files = request.data.getlist("file")
+            files += [GzipChunk(chunk) for chunk in request.data.getlist("file_gzip")]
+
         if len(files) == 0:
             # No files uploaded is ok
             logger.info("chunkupload.end", extra={"status": status.HTTP_200_OK})
diff --git a/tests/sentry/api/endpoints/test_chunk_upload.py b/tests/sentry/api/endpoints/test_chunk_upload.py
index 679892a24c..fcbb127380 100644
--- a/tests/sentry/api/endpoints/test_chunk_upload.py
+++ b/tests/sentry/api/endpoints/test_chunk_upload.py
@@ -87,6 +87,15 @@ class ChunkUploadTest(APITestCase):
         assert file_blobs[0].checksum == checksum1
         assert file_blobs[1].checksum == checksum2
 
+    def test_empty_upload(self):
+        response = self.client.post(
+            self.url, HTTP_AUTHORIZATION=u"Bearer {}".format(self.token.token), format="multipart"
+        )
+        assert response.status_code == 200
+
+        file_blobs = FileBlob.objects.all()
+        assert len(file_blobs) == 0
+
     def test_too_many_chunks(self):
         files = []
 
