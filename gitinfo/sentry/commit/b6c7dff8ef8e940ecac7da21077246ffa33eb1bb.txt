commit b6c7dff8ef8e940ecac7da21077246ffa33eb1bb
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Fri Feb 1 11:40:08 2019 -0800

    feat(app-platorm): Update web_url for Sentry 10 (#11854)

diff --git a/src/sentry/tasks/sentry_apps.py b/src/sentry/tasks/sentry_apps.py
index 41a575c35b..57bf8225cd 100644
--- a/src/sentry/tasks/sentry_apps.py
+++ b/src/sentry/tasks/sentry_apps.py
@@ -6,6 +6,7 @@ from celery.task import current
 from django.core.urlresolvers import reverse
 from requests.exceptions import RequestException
 
+from sentry import features
 from sentry.http import safe_urlopen
 from sentry.tasks.base import instrumented_task, retry
 from sentry.utils.http import absolute_uri
@@ -69,12 +70,20 @@ def send_alert_event(event, rule, sentry_app_id):
         project.slug,
         event.id,
     ]))
-    event_context['web_url'] = absolute_uri(reverse('sentry-group-event', args=[
-        project.organization.slug,
-        project.slug,
-        group.id,
-        event.id,
-    ]))
+
+    if features.has('organizations:sentry10', project.organization):
+        event_context['web_url'] = absolute_uri(reverse('sentry-organization-event-detail', args=[
+            project.organization.slug,
+            group.id,
+            event.id,
+        ]))
+    else:
+        event_context['web_url'] = absolute_uri(reverse('sentry-group-event', args=[
+            project.organization.slug,
+            project.slug,
+            group.id,
+            event.id,
+        ]))
 
     # The URL has a regex OR in it ("|") which means `reverse` cannot generate
     # a valid URL (it can't know which option to pick). We have to manually
