commit cd687935f7c366764f962ffe9cd32538c452e22a
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Thu Sep 24 21:00:28 2015 +0200

    Changed logic for plugin url registration

diff --git a/src/sentry/plugins/base/urls.py b/src/sentry/plugins/base/urls.py
index 62556da1dc..4498192254 100644
--- a/src/sentry/plugins/base/urls.py
+++ b/src/sentry/plugins/base/urls.py
@@ -1,6 +1,6 @@
 from __future__ import absolute_import
 
-from django.conf.urls import patterns
+from django.conf.urls import patterns, include, url
 
 from sentry.plugins import plugins
 
@@ -8,6 +8,8 @@ from sentry.plugins import plugins
 urlpatterns = patterns('')
 
 for _plugin in plugins.all():
-    _plugin_patterns = _plugin.get_url_patterns()
-    if _plugin_patterns:
-        urlpatterns += _plugin_patterns
+    _plugin_url_module = _plugin.get_url_module()
+    if _plugin_url_module:
+        urlpatterns += (
+            url('^plugins/%s/' % _plugin.slug, include(_plugin_url_module)),
+        )
diff --git a/src/sentry/plugins/base/v1.py b/src/sentry/plugins/base/v1.py
index a8f7af0bac..f238b062d6 100644
--- a/src/sentry/plugins/base/v1.py
+++ b/src/sentry/plugins/base/v1.py
@@ -471,8 +471,8 @@ class IPlugin(local, PluggableViewMixin):
         """Configures the plugin."""
         return default_plugin_config(self, project, request)
 
-    def get_url_patterns(self):
-        """Allows a plugin to return a URL module."""
+    def get_url_module(self):
+        """Allows a plugin to return the import path to a URL module."""
 
 
 class Plugin(IPlugin):
diff --git a/src/sentry/plugins/base/v2.py b/src/sentry/plugins/base/v2.py
index 39649b182f..7b1e9e24f3 100644
--- a/src/sentry/plugins/base/v2.py
+++ b/src/sentry/plugins/base/v2.py
@@ -393,8 +393,8 @@ class IPlugin2(local):
         """Configures the plugin."""
         return default_plugin_config(self, project, request)
 
-    def get_url_patterns(self):
-        """Allows a plugin to return a URL module."""
+    def get_url_module(self):
+        """Allows a plugin to return the import path to a URL module."""
 
 
 class Plugin2(IPlugin2):
