commit 860968a24e40df6c891f46f0bd6b2114873a0c67
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Thu Feb 8 10:32:20 2018 -0800

    feat(ui): Friendlier 403 err msg for AsyncComponent (#7168)

diff --git a/src/sentry/static/sentry/app/components/asyncComponent.jsx b/src/sentry/static/sentry/app/components/asyncComponent.jsx
index fd6d7ee359..2976942496 100644
--- a/src/sentry/static/sentry/app/components/asyncComponent.jsx
+++ b/src/sentry/static/sentry/app/components/asyncComponent.jsx
@@ -1,10 +1,14 @@
+import {isEqual} from 'lodash';
 import PropTypes from 'prop-types';
+import Raven from 'raven-js';
 import React from 'react';
-import {isEqual} from 'lodash';
 
+import {Client} from '../api';
+import {tct} from '../locale';
+import ExternalLink from './externalLink';
+import LoadingError from './loadingError';
 import LoadingIndicator from '../components/loadingIndicator';
 import RouteError from './../views/routeError';
-import {Client} from '../api';
 
 class AsyncComponent extends React.Component {
   constructor(props, context) {
@@ -110,7 +114,7 @@ class AsyncComponent extends React.Component {
               },
               remainingRequests: prevState.remainingRequests - 1,
               loading: prevState.remainingRequests > 1,
-              error: !!error,
+              error: prevState.error || !!error,
             };
           });
         },
@@ -150,6 +154,28 @@ class AsyncComponent extends React.Component {
   }
 
   renderError(error) {
+    // Look through endpoint results to see if we had any 403s
+    let permissionErrors = Object.keys(this.state.errors).find(endpointName => {
+      let result = this.state.errors[endpointName];
+
+      return result && result.status === 403;
+    });
+
+    if (permissionErrors) {
+      // TODO(billy): Refactor this into a new PermissionDenied component
+      Raven.captureException(new Error('Permission Denied'), {});
+      return (
+        <LoadingError
+          message={tct(
+            'You do not have permission to access this, please read more about [link:organizational roles]',
+            {
+              link: <ExternalLink href="https://docs.sentry.io/learn/membership/" />,
+            }
+          )}
+        />
+      );
+    }
+
     return <RouteError error={error} component={this} onRetry={this.remountComponent} />;
   }
 
