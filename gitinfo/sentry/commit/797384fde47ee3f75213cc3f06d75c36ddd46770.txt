commit 797384fde47ee3f75213cc3f06d75c36ddd46770
Author: ted kaemming <ted@kaemming.com>
Date:   Tue Jun 5 10:41:03 2018 -0700

    ref(tagstore): Enable pickling of types (#8650)

diff --git a/src/sentry/tagstore/types.py b/src/sentry/tagstore/types.py
index 0e543f7504..fe3607d9b4 100644
--- a/src/sentry/tagstore/types.py
+++ b/src/sentry/tagstore/types.py
@@ -1,5 +1,7 @@
 from __future__ import absolute_import
 
+import six
+
 from sentry.tagstore.base import TagKeyStatus
 
 
@@ -17,6 +19,13 @@ class TagType(object):
         return type(self) == type(other) and \
             all(getattr(self, name) == getattr(other, name) for name in self.__slots__)
 
+    def __getstate__(self):
+        return {name: getattr(self, name) for name in self.__slots__}
+
+    def __setstate__(self, state):
+        for name, value in six.iteritems(state):
+            setattr(self, name, value)
+
 
 class TagKey(TagType):
     __slots__ = ['key', 'values_seen', 'status']
diff --git a/tests/sentry/tagstore/test_types.py b/tests/sentry/tagstore/test_types.py
new file mode 100644
index 0000000000..40d6e71f2a
--- /dev/null
+++ b/tests/sentry/tagstore/test_types.py
@@ -0,0 +1,11 @@
+from __future__ import absolute_import
+
+import pickle
+
+from sentry.tagstore.types import TagKey, TagValue, GroupTagKey, GroupTagValue
+
+
+def test_pickle():
+    for cls in [TagKey, TagValue, GroupTagKey, GroupTagValue]:
+        value = cls(**{name: 1 for name in cls.__slots__})
+        pickle.loads(pickle.dumps(value)) == value
