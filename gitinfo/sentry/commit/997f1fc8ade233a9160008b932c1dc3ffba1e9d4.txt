commit 997f1fc8ade233a9160008b932c1dc3ffba1e9d4
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Wed Apr 6 20:18:30 2016 -0700

    Read csrf cookie on every API request since the value may change
    
    During subsequent requests, it's possible for the server to send back a
    new value. This may happen if cookies are cleared or any other way that
    the csrf cookie disappears causing the server to regenerate a new one.
    
    Since we have a single page app, the actual page doesn't refresh,
    causing this cached value to never be updated.
    
    Refs: SENTRY-HP
    
    /cc @getsentry/ui

diff --git a/src/sentry/static/sentry/app/index.js b/src/sentry/static/sentry/app/index.js
index 7220a328b1..52cd85bc3d 100644
--- a/src/sentry/static/sentry/app/index.js
+++ b/src/sentry/static/sentry/app/index.js
@@ -17,8 +17,6 @@ function getCookie(name) {
   return cookieValue;
 }
 
-let csrftoken = getCookie('csrf');
-
 function csrfSafeMethod(method) {
   // these HTTP methods do not require CSRF protection
   return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
@@ -26,7 +24,7 @@ function csrfSafeMethod(method) {
 jQuery.ajaxSetup({
   beforeSend: function(xhr, settings) {
     if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
-      xhr.setRequestHeader('X-CSRFToken', csrftoken);
+      xhr.setRequestHeader('X-CSRFToken', getCookie('csrf'));
     }
   }
 });
