commit bb0c4da565aa8e60108979efb35aab88e2d9cd12
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jun 10 09:43:35 2015 -0700

    add isPublic to bulk mutations

diff --git a/src/sentry/api/endpoints/project_group_index.py b/src/sentry/api/endpoints/project_group_index.py
index 1034544bf7..24cc2a4d63 100644
--- a/src/sentry/api/endpoints/project_group_index.py
+++ b/src/sentry/api/endpoints/project_group_index.py
@@ -30,6 +30,7 @@ class GroupSerializer(serializers.Serializer):
     ))
     hasSeen = serializers.BooleanField()
     isBookmarked = serializers.BooleanField()
+    isPublic = serializers.BooleanField()
     merge = serializers.BooleanField()
 
 
@@ -168,6 +169,7 @@ class ProjectGroupIndexEndpoint(ProjectEndpoint):
         - status: resolved, unresolved, muted
         - hasSeen: true, false
         - isBookmarked: true, false
+        - isPublic: true, false
         - merge: true, false
 
         If any ids are out of scope this operation will succeed without any data
@@ -282,6 +284,35 @@ class ProjectGroupIndexEndpoint(ProjectEndpoint):
                 user=request.user,
             ).delete()
 
+        if result.get('isPublic'):
+            Group.objects.filter(
+                id__in=group_ids,
+            ).update(is_public=True)
+            for group in group_list:
+                if group.is_public:
+                    continue
+                group.is_public = True
+                Activity.objects.create(
+                    project=group.project,
+                    group=group,
+                    type=Activity.SET_PUBLIC,
+                    user=request.user,
+                )
+        elif result.get('isPublic') is False:
+            Group.objects.filter(
+                id__in=group_ids,
+            ).update(is_public=False)
+            for group in group_list:
+                if not group.is_public:
+                    continue
+                group.is_public = False
+                Activity.objects.create(
+                    project=group.project,
+                    group=group,
+                    type=Activity.SET_PRIVATE,
+                    user=request.user,
+                )
+
         # XXX(dcramer): this feels a bit shady like it should be its own
         # endpoint
         if result.get('merge') and len(group_list) > 1:
