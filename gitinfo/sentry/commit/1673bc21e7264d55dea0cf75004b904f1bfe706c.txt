commit 1673bc21e7264d55dea0cf75004b904f1bfe706c
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Tue Nov 5 11:17:09 2019 -0700

    ref(ui): Remove `grid-emotion` from `<ApiTokenRow>` (#15427)
    
    * Clean up HTML
    * Remove `grid-emotion`
    * use more theme items

diff --git a/src/sentry/static/sentry/app/views/settings/account/apiTokenRow.jsx b/src/sentry/static/sentry/app/views/settings/account/apiTokenRow.jsx
index e948c42123..4e833a39f7 100644
--- a/src/sentry/static/sentry/app/views/settings/account/apiTokenRow.jsx
+++ b/src/sentry/static/sentry/app/views/settings/account/apiTokenRow.jsx
@@ -1,4 +1,3 @@
-import {Box, Flex} from 'grid-emotion';
 import PropTypes from 'prop-types';
 import React from 'react';
 import styled from 'react-emotion';
@@ -9,46 +8,7 @@ import Button from 'app/components/button';
 import DateTime from 'app/components/dateTime';
 import TextCopyInput from 'app/views/settings/components/forms/textCopyInput';
 import getDynamicText from 'app/utils/getDynamicText';
-
-const StyledPanelItem = styled(PanelItem)`
-  flex-direction: column;
-`;
-
-const Details = styled(Flex)`
-  margin-top: 10px;
-`;
-
-const ScopeList = styled('div')`
-  font-size: 0.9em;
-  line-height: 1.4;
-`;
-
-const Time = styled('time')`
-  font-size: 0.9em;
-  line-height: 1.4;
-`;
-
-const Action = styled(Box)`
-  align-self: flex-start;
-`;
-
-const Heading = styled('div')`
-  font-size: 13px;
-  text-transform: uppercase;
-  color: ${p => p.theme.gray3};
-  margin-bottom: 8px;
-`;
-
-const StyledButton = styled(Button)`
-  /* todo(ckj): Buttons need to be refactored to be properly extended by styled.
-     For now, we'll need to use a child selector:
-  */
-
-  .button-label {
-    padding-top: 9px;
-    padding-bottom: 9px;
-  }
-`;
+import space from 'app/styles/space';
 
 class ApiTokenRow extends React.Component {
   static propTypes = {
@@ -65,43 +25,24 @@ class ApiTokenRow extends React.Component {
     const {token} = this.props;
 
     return (
-      <StyledPanelItem p={2}>
-        <div>
-          <Flex>
-            <Box flex="1">
-              <div style={{marginBottom: 5}}>
-                <small>
-                  <TextCopyInput
-                    flexValueContainer={false}
-                    renderer={({value, ref}) => (
-                      <Flex align="center" ref={ref}>
-                        {value}
-                      </Flex>
-                    )}
-                  >
-                    {getDynamicText({value: token.token, fixed: 'PERCY_AUTH_TOKEN'})}
-                  </TextCopyInput>
-                </small>
-              </div>
-            </Box>
-            <Action pl={2}>
-              <StyledButton
-                size="small"
-                onClick={this.handleRemove}
-                icon="icon-circle-subtract"
-              >
-                <span className="ref-delete-api-token">{t('Remove')}</span>
-              </StyledButton>
-            </Action>
-          </Flex>
-        </div>
+      <StyledPanelItem>
+        <Controls>
+          <InputWrapper>
+            <TextCopyInput>
+              {getDynamicText({value: token.token, fixed: 'PERCY_AUTH_TOKEN'})}
+            </TextCopyInput>
+          </InputWrapper>
+          <Button size="small" onClick={this.handleRemove} icon="icon-circle-subtract">
+            {t('Remove')}
+          </Button>
+        </Controls>
 
         <Details>
-          <Box flex="1">
+          <ScopesWrapper>
             <Heading>{t('Scopes')}</Heading>
             <ScopeList>{token.scopes.join(', ')}</ScopeList>
-          </Box>
-          <Box>
+          </ScopesWrapper>
+          <div>
             <Heading>{t('Created')}</Heading>
             <Time>
               <DateTime
@@ -111,11 +52,54 @@ class ApiTokenRow extends React.Component {
                 })}
               />
             </Time>
-          </Box>
+          </div>
         </Details>
       </StyledPanelItem>
     );
   }
 }
 
+const StyledPanelItem = styled(PanelItem)`
+  flex-direction: column;
+  padding: ${space(2)};
+`;
+
+const Controls = styled('div')`
+  display: flex;
+  align-items: center;
+  margin-bottom: ${space(1)};
+`;
+
+const InputWrapper = styled('div')`
+  font-size: ${p => p.theme.fontSizeRelativeSmaller};
+  flex: 1;
+  margin-right: ${space(1)};
+`;
+
+const Details = styled('div')`
+  display: flex;
+  margin-top: ${space(1)};
+`;
+
+const ScopesWrapper = styled('div')`
+  flex: 1;
+`;
+
+const ScopeList = styled('div')`
+  font-size: ${p => p.theme.fontSizeRelativeSmaller};
+  line-height: 1.4;
+`;
+
+const Time = styled('time')`
+  font-size: ${p => p.theme.fontSizeRelativeSmaller};
+  line-height: 1.4;
+`;
+
+const Heading = styled('div')`
+  font-size: ${p => p.theme.fontSizeMedium};
+  text-transform: uppercase;
+  color: ${p => p.theme.gray3};
+  margin-bottom: ${space(1)};
+`;
+
 export default ApiTokenRow;
diff --git a/tests/js/spec/views/__snapshots__/apiTokenRow.spec.jsx.snap b/tests/js/spec/views/__snapshots__/apiTokenRow.spec.jsx.snap
index d353334bd8..5d4cd391aa 100644
--- a/tests/js/spec/views/__snapshots__/apiTokenRow.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/apiTokenRow.spec.jsx.snap
@@ -4,60 +4,34 @@ exports[`ApiTokenRow renders 1`] = `
 <StyledPanelItem
   p={2}
 >
-  <div>
-    <Flex>
-      <Box
-        flex="1"
+  <Controls>
+    <InputWrapper>
+      <TextCopyInput
+        onCopy={[Function]}
       >
-        <div
-          style={
-            Object {
-              "marginBottom": 5,
-            }
-          }
-        >
-          <small>
-            <TextCopyInput
-              flexValueContainer={false}
-              onCopy={[Function]}
-              renderer={[Function]}
-            >
-              apitoken123
-            </TextCopyInput>
-          </small>
-        </div>
-      </Box>
-      <Action
-        pl={2}
-      >
-        <StyledButton
-          align="center"
-          disabled={false}
-          icon="icon-circle-subtract"
-          onClick={[Function]}
-          size="small"
-        >
-          <span
-            className="ref-delete-api-token"
-          >
-            Remove
-          </span>
-        </StyledButton>
-      </Action>
-    </Flex>
-  </div>
-  <Details>
-    <Box
-      flex="1"
+        apitoken123
+      </TextCopyInput>
+    </InputWrapper>
+    <Button
+      align="center"
+      disabled={false}
+      icon="icon-circle-subtract"
+      onClick={[Function]}
+      size="small"
     >
+      Remove
+    </Button>
+  </Controls>
+  <Details>
+    <ScopesWrapper>
       <Heading>
         Scopes
       </Heading>
       <ScopeList>
         scope1, scope2
       </ScopeList>
-    </Box>
-    <Box>
+    </ScopesWrapper>
+    <div>
       <Heading>
         Created
       </Heading>
@@ -67,7 +41,7 @@ exports[`ApiTokenRow renders 1`] = `
           seconds={true}
         />
       </Time>
-    </Box>
+    </div>
   </Details>
 </StyledPanelItem>
 `;
diff --git a/tests/js/spec/views/apiTokens.spec.jsx b/tests/js/spec/views/apiTokens.spec.jsx
index ab57243753..c6544cb454 100644
--- a/tests/js/spec/views/apiTokens.spec.jsx
+++ b/tests/js/spec/views/apiTokens.spec.jsx
@@ -49,7 +49,7 @@ describe('ApiTokens', function() {
 
     const wrapper = mountWithTheme(<ApiTokens />, routerContext);
 
-    wrapper.find('.ref-delete-api-token').simulate('click');
+    wrapper.find('button[aria-label="Remove"]').simulate('click');
 
     // Should be loading
     expect(mock).toHaveBeenCalledTimes(1);
