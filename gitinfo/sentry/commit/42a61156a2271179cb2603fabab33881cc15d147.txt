commit 42a61156a2271179cb2603fabab33881cc15d147
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Jan 6 14:42:36 2013 -0800

    Revert "Always tag user email addresses"
    
    This reverts commit f9fb2be73c5eff1417d991b258a69bbed1ec7fde.
    
    (This maintains the users_seen column)

diff --git a/src/sentry/manager.py b/src/sentry/manager.py
index 3838b362da..692916c727 100644
--- a/src/sentry/manager.py
+++ b/src/sentry/manager.py
@@ -641,10 +641,6 @@ class GroupManager(BaseManager, ChartMixin):
             ('level', event.get_level_display()),
         ]
 
-        user_data = event.user_data
-        if user_data.get('email'):
-            tags.append(('user_email', user_data['email']))
-
         self.add_tags(group, tags)
 
         return group, is_new, is_sample
diff --git a/src/sentry/models.py b/src/sentry/models.py
index 572f940a37..f05a315bd6 100644
--- a/src/sentry/models.py
+++ b/src/sentry/models.py
@@ -390,10 +390,6 @@ class MessageBase(Model):
             return self.culprit
         return truncatechars(self.message.splitlines()[0], 100)
 
-    @property
-    def user_data(self):
-        return self.data.get('sentry.interfaces.User', {})
-
 
 class Group(MessageBase):
     """
diff --git a/src/sentry/plugins/sentry_user_emails/__init__.py b/src/sentry/plugins/sentry_user_emails/__init__.py
new file mode 100644
index 0000000000..6a59e2fc52
--- /dev/null
+++ b/src/sentry/plugins/sentry_user_emails/__init__.py
@@ -0,0 +1,7 @@
+"""
+sentry.plugins.sentry_user_emails
+~~~~~~~~~~~~~~~~~~~~~~~~~~
+
+:copyright: (c) 2010-2012 by the Sentry Team, see AUTHORS for more details.
+:license: BSD, see LICENSE for more details.
+"""
diff --git a/src/sentry/plugins/sentry_user_emails/models.py b/src/sentry/plugins/sentry_user_emails/models.py
new file mode 100644
index 0000000000..30079c8eb0
--- /dev/null
+++ b/src/sentry/plugins/sentry_user_emails/models.py
@@ -0,0 +1,39 @@
+"""
+sentry.plugins.sentry_user_emails.models
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+
+:copyright: (c) 2010-2012 by the Sentry Team, see AUTHORS for more details.
+:license: BSD, see LICENSE for more details.
+"""
+import sentry
+
+from django.utils.translation import ugettext_lazy as _
+
+from sentry.plugins import register
+from sentry.plugins.bases.tag import TagPlugin
+
+
+class UserEmailsPlugin(TagPlugin):
+    """
+    Adds additional support for showing information about users including:
+
+    * A panel which shows all users a message was created by.
+    * A sidebar module which shows the users most actively seeing event.
+    """
+    slug = 'user-emails'
+    title = _('Auto Tag: User Emails')
+    version = sentry.VERSION
+    author = "Sentry Team"
+    author_url = "https://github.com/getsentry/sentry"
+    tag = 'user_email'
+    tag_label = _('User Email')
+
+    def get_tag_values(self, event):
+        user = event.interfaces.get('sentry.interfaces.User')
+        if not user:
+            return []
+        if not getattr(user, 'email', None):
+            return []
+        return [user.email]
+
+register(UserEmailsPlugin)
