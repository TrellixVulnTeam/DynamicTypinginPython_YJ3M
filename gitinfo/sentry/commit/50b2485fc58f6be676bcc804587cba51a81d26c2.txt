commit 50b2485fc58f6be676bcc804587cba51a81d26c2
Author: Mark Story <mark@sentry.io>
Date:   Tue Oct 8 09:54:44 2019 -0400

    fix(discover) Fix error clearing condition (#14939)
    
    When clearing the condition field the event needs to be persisted in
    order for Select2 to have access to the target later on.
    
    Fixes #14597

diff --git a/src/sentry/static/sentry/app/views/discover/aggregations/aggregation.tsx b/src/sentry/static/sentry/app/views/discover/aggregations/aggregation.tsx
index 1a31634ecd..4ea0eade67 100644
--- a/src/sentry/static/sentry/app/views/discover/aggregations/aggregation.tsx
+++ b/src/sentry/static/sentry/app/views/discover/aggregations/aggregation.tsx
@@ -28,11 +28,11 @@ export default class AggregationRow extends React.Component<
   AggregationProps,
   AggregationState
 > {
+  state = initalState;
+
   // This is the ref of the inner react-select component
   private select: any;
 
-  state = initalState;
-
   getOptions() {
     const currentValue = getInternal(this.props.value);
     const shouldDisplayValue = currentValue || this.state.inputValue;
diff --git a/src/sentry/static/sentry/app/views/discover/conditions/condition.tsx b/src/sentry/static/sentry/app/views/discover/conditions/condition.tsx
index 1f4fdb5575..0a1049d686 100644
--- a/src/sentry/static/sentry/app/views/discover/conditions/condition.tsx
+++ b/src/sentry/static/sentry/app/views/discover/conditions/condition.tsx
@@ -142,7 +142,8 @@ export default class ConditionRow extends React.Component<
 
   inputRenderer = (props: ConditionProps) => {
     const onChange = (evt: any) => {
-      if (evt.target.value === '') {
+      if (evt.target && evt.target.value === '') {
+        evt.persist();
         // React select won't trigger an onChange event when a value is completely
         // cleared, so we'll force this before calling onChange
         this.setState({inputValue: evt.target.value}, () => {
