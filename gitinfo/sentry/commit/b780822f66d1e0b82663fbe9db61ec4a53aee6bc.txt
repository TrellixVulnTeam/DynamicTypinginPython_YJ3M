commit b780822f66d1e0b82663fbe9db61ec4a53aee6bc
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 15 00:59:00 2014 -0800

    Dont restrict access if project is present

diff --git a/src/sentry/web/decorators.py b/src/sentry/web/decorators.py
index be6d08ffe0..f5436d0d5a 100644
--- a/src/sentry/web/decorators.py
+++ b/src/sentry/web/decorators.py
@@ -66,7 +66,7 @@ def has_access(access_or_func=None, organization=None, access=None):
 
             if organization_slug:
                 if not request.user.is_superuser:
-                    if team_slug:
+                    if has_team or has_project:
                         org_access = None
                     else:
                         org_access = access
@@ -153,6 +153,8 @@ def has_access(access_or_func=None, organization=None, access=None):
                                 return HttpResponse(status=400)
                             return HttpResponseRedirect(reverse('sentry'))
                     else:
+                        if request.is_ajax():
+                            return HttpResponse(status=400)
                         return HttpResponseRedirect(reverse('sentry'))
 
                 if not request.user.is_superuser and not project.has_access(request.user, access=access):
