commit 5de5fbdf476c89abdb57823ecbf899c36046f934
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Mon Nov 19 17:30:46 2018 -0800

    feat(forms): Add disabled state to form field labels (#10668)

diff --git a/src/sentry/static/sentry/app/views/settings/components/forms/field/fieldLabel.jsx b/src/sentry/static/sentry/app/views/settings/components/forms/field/fieldLabel.jsx
index 05d6dedf84..c166242c45 100644
--- a/src/sentry/static/sentry/app/views/settings/components/forms/field/fieldLabel.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/forms/field/fieldLabel.jsx
@@ -1,7 +1,10 @@
 import styled from 'react-emotion';
+import isPropValid from '@emotion/is-prop-valid';
 
-const FieldLabel = styled.div`
-  color: ${p => p.theme.gray5};
+const shouldForwardProp = p => p !== 'disabled' && isPropValid(p);
+
+const FieldLabel = styled('div', {shouldForwardProp})`
+  color: ${p => (!p.disabled ? p.theme.gray5 : p.theme.gray2)};
 `;
 
 export default FieldLabel;
diff --git a/src/sentry/static/sentry/app/views/settings/components/forms/field/index.jsx b/src/sentry/static/sentry/app/views/settings/components/forms/field/index.jsx
index e37d3c1e21..6978b947b4 100644
--- a/src/sentry/static/sentry/app/views/settings/components/forms/field/index.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/forms/field/index.jsx
@@ -157,7 +157,7 @@ class Field extends React.Component {
         {(label || help) && (
           <FieldDescription inline={inline} htmlFor={id}>
             {label && (
-              <FieldLabel>
+              <FieldLabel disabled={isDisabled}>
                 {label} {required && <FieldRequiredBadge />}
               </FieldLabel>
             )}
diff --git a/src/sentry/static/sentry/app/views/settings/project/projectKeys/projectKeyDetails.jsx b/src/sentry/static/sentry/app/views/settings/project/projectKeys/projectKeyDetails.jsx
index 0424a56562..13998af9ca 100644
--- a/src/sentry/static/sentry/app/views/settings/project/projectKeys/projectKeyDetails.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/projectKeys/projectKeyDetails.jsx
@@ -227,6 +227,7 @@ class KeyRateLimitsForm extends React.Component {
                   className="rate-limit-group"
                   name="rateLimit"
                   label={t('Rate Limit')}
+                  disabled={!hasFeature}
                   validate={({id, form, model}) => {
                     let isValid =
                       form &&
diff --git a/tests/js/spec/components/__snapshots__/confirmDelete.spec.jsx.snap b/tests/js/spec/components/__snapshots__/confirmDelete.spec.jsx.snap
index 7fee6cea22..19a15543f0 100644
--- a/tests/js/spec/components/__snapshots__/confirmDelete.spec.jsx.snap
+++ b/tests/js/spec/components/__snapshots__/confirmDelete.spec.jsx.snap
@@ -106,7 +106,9 @@ exports[`ConfirmDelete renders 1`] = `
                           <label
                             className="css-jq43rd-FieldDescription-inlineStyle e12jefmo0"
                           >
-                            <FieldLabel>
+                            <FieldLabel
+                              disabled={false}
+                            >
                               <div
                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                               >
diff --git a/tests/js/spec/views/settings/organizationDeveloperSettings/__snapshots__/sentryApplicationDetails.spec.jsx.snap b/tests/js/spec/views/settings/organizationDeveloperSettings/__snapshots__/sentryApplicationDetails.spec.jsx.snap
index dee495e9e2..6e10fdec93 100644
--- a/tests/js/spec/views/settings/organizationDeveloperSettings/__snapshots__/sentryApplicationDetails.spec.jsx.snap
+++ b/tests/js/spec/views/settings/organizationDeveloperSettings/__snapshots__/sentryApplicationDetails.spec.jsx.snap
@@ -353,7 +353,9 @@ exports[`Sentry Application Details edit existing application renders() it shows
                                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                                             htmlFor="name"
                                                           >
-                                                            <FieldLabel>
+                                                            <FieldLabel
+                                                              disabled={false}
+                                                            >
                                                               <div
                                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                                               >
@@ -1005,7 +1007,9 @@ exports[`Sentry Application Details edit existing application renders() it shows
                                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                                             htmlFor="webhookUrl"
                                                           >
-                                                            <FieldLabel>
+                                                            <FieldLabel
+                                                              disabled={false}
+                                                            >
                                                               <div
                                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                                               >
@@ -1653,7 +1657,9 @@ exports[`Sentry Application Details edit existing application renders() it shows
                                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                                             htmlFor="redirectUrl"
                                                           >
-                                                            <FieldLabel>
+                                                            <FieldLabel
+                                                              disabled={false}
+                                                            >
                                                               <div
                                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                                               >
@@ -2371,7 +2377,9 @@ exports[`Sentry Application Details edit existing application renders() it shows
                                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                                             htmlFor="isAlertable"
                                                           >
-                                                            <FieldLabel>
+                                                            <FieldLabel
+                                                              disabled={false}
+                                                            >
                                                               <div
                                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                                               >
@@ -3069,7 +3077,9 @@ exports[`Sentry Application Details edit existing application renders() it shows
                                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                                             htmlFor="overview"
                                                           >
-                                                            <FieldLabel>
+                                                            <FieldLabel
+                                                              disabled={false}
+                                                            >
                                                               <div
                                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                                               >
@@ -5418,7 +5428,9 @@ exports[`Sentry Application Details edit existing application renders() it shows
                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                             htmlFor="clientId"
                                           >
-                                            <FieldLabel>
+                                            <FieldLabel
+                                              disabled={false}
+                                            >
                                               <div
                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                               >
@@ -6010,7 +6022,9 @@ exports[`Sentry Application Details edit existing application renders() it shows
                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                             htmlFor="clientSecret"
                                           >
-                                            <FieldLabel>
+                                            <FieldLabel
+                                              disabled={false}
+                                            >
                                               <div
                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                               >
@@ -6969,7 +6983,9 @@ exports[`Sentry Application Details new sentry application renders() it shows em
                                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                                             htmlFor="name"
                                                           >
-                                                            <FieldLabel>
+                                                            <FieldLabel
+                                                              disabled={false}
+                                                            >
                                                               <div
                                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                                               >
@@ -7512,7 +7528,9 @@ exports[`Sentry Application Details new sentry application renders() it shows em
                                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                                             htmlFor="webhookUrl"
                                                           >
-                                                            <FieldLabel>
+                                                            <FieldLabel
+                                                              disabled={false}
+                                                            >
                                                               <div
                                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                                               >
@@ -8051,7 +8069,9 @@ exports[`Sentry Application Details new sentry application renders() it shows em
                                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                                             htmlFor="redirectUrl"
                                                           >
-                                                            <FieldLabel>
+                                                            <FieldLabel
+                                                              disabled={false}
+                                                            >
                                                               <div
                                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                                               >
@@ -8660,7 +8680,9 @@ exports[`Sentry Application Details new sentry application renders() it shows em
                                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                                             htmlFor="isAlertable"
                                                           >
-                                                            <FieldLabel>
+                                                            <FieldLabel
+                                                              disabled={false}
+                                                            >
                                                               <div
                                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                                               >
@@ -9249,7 +9271,9 @@ exports[`Sentry Application Details new sentry application renders() it shows em
                                                             className="css-gxpq9u-FieldDescription-inlineStyle e12jefmo0"
                                                             htmlFor="overview"
                                                           >
-                                                            <FieldLabel>
+                                                            <FieldLabel
+                                                              disabled={false}
+                                                            >
                                                               <div
                                                                 className="css-qzvhly-FieldLabel ejkuyjq0"
                                                               >
