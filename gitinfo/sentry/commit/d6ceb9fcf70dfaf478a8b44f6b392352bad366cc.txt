commit d6ceb9fcf70dfaf478a8b44f6b392352bad366cc
Author: Jess MacQueen <macqueen@users.noreply.github.com>
Date:   Thu Dec 15 16:13:35 2016 -0800

    have secret fields close after save (#4671)

diff --git a/src/sentry/static/sentry/app/components/bases/pluginComponentBase.jsx b/src/sentry/static/sentry/app/components/bases/pluginComponentBase.jsx
index 8a61b9b4a3..2a47bc3385 100644
--- a/src/sentry/static/sentry/app/components/bases/pluginComponentBase.jsx
+++ b/src/sentry/static/sentry/app/components/bases/pluginComponentBase.jsx
@@ -111,6 +111,8 @@ class PluginComponentBase extends React.Component {
   }
 
   renderField(props) {
+    props = {...props};
+    props.formState = this.state.state;
     return <GenericField {...props}/>;
   }
 }
diff --git a/src/sentry/static/sentry/app/components/forms/genericField.jsx b/src/sentry/static/sentry/app/components/forms/genericField.jsx
index 462ca8b40c..ba3bdf6e22 100644
--- a/src/sentry/static/sentry/app/components/forms/genericField.jsx
+++ b/src/sentry/static/sentry/app/components/forms/genericField.jsx
@@ -26,6 +26,7 @@ class GenericField extends React.Component {
       error: (this.props.formErrors || {})[config.name],
       disabled: config.readonly,
       key: config.name,
+      formState: this.props.formState,
       help: (
         (defined(config.help) && config.help !== '')
           ? <span dangerouslySetInnerHTML={{__html: config.help}}/>
@@ -70,6 +71,7 @@ GenericField.propTypes = {
     config: React.PropTypes.object.isRequired,
     formData: React.PropTypes.object,
     formErrors: React.PropTypes.object,
+    formState: React.PropTypes.string.isRequired,
     onChange: React.PropTypes.func,
 };
 
diff --git a/src/sentry/static/sentry/app/components/forms/passwordField.jsx b/src/sentry/static/sentry/app/components/forms/passwordField.jsx
index 2a95e2ffaa..95cea9c8ee 100644
--- a/src/sentry/static/sentry/app/components/forms/passwordField.jsx
+++ b/src/sentry/static/sentry/app/components/forms/passwordField.jsx
@@ -1,5 +1,6 @@
 import React from 'react';
 import InputField from './inputField';
+import {FormState} from '.';
 
 class PasswordField extends InputField {
   constructor(props) {
@@ -25,6 +26,15 @@ class PasswordField extends InputField {
     });
   }
 
+  componentWillReceiveProps(nextProps) {
+    // close edit mode after successful save
+    if (this.props.formState === FormState.SAVING && nextProps.formState === FormState.READY) {
+      this.setState({
+        editing: false
+      });
+    }
+  }
+
   startEdit(ev) {
     ev.preventDefault();
     this.setState({
diff --git a/src/sentry/static/sentry/app/plugins/components/settings.jsx b/src/sentry/static/sentry/app/plugins/components/settings.jsx
index a309001663..542d37736b 100644
--- a/src/sentry/static/sentry/app/plugins/components/settings.jsx
+++ b/src/sentry/static/sentry/app/plugins/components/settings.jsx
@@ -59,6 +59,7 @@ class PluginSettings extends PluginComponentBase {
           initialData[field.name] = field.value;
         });
         this.setState({
+          fieldList: data.config,
           formData: formData,
           initialData: initialData,
           errors: {}
