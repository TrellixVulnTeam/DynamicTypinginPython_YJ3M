commit 6c47852f42bb25323e9ebe15252517ec4566d69c
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Mon Nov 19 20:48:30 2018 +0100

    build: write egg info to work around pip caching bug (#10654)

diff --git a/.travis.yml b/.travis.yml
index f3f4363c8b..47cb9b62e6 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -73,6 +73,7 @@ matrix:
         - riak
         - redis-server
       install:
+        - python setup.py install_egg_info
         - pip install -e ".[dev,tests,optional]"
 
     - python: 2.7
@@ -82,6 +83,7 @@ matrix:
         - redis-server
         - postgresql
       install:
+        - python setup.py install_egg_info
         - pip install -e ".[dev,tests,optional]"
       before_script:
         - psql -c 'create database sentry;' -U postgres
@@ -95,6 +97,7 @@ matrix:
         - redis-server
         - postgresql
       install:
+        - python setup.py install_egg_info
         - pip install -e ".[dev,tests,optional]"
       before_script:
         - psql -c 'create database sentry;' -U postgres
@@ -106,6 +109,7 @@ matrix:
         - mysql
         - redis-server
       install:
+        - python setup.py install_egg_info
         - pip install -e ".[dev,tests,optional]"
         - pip install mysqlclient
       before_script:
@@ -126,6 +130,7 @@ matrix:
         - docker ps -a
       install:
         - yarn install --pure-lockfile
+        - python setup.py install_egg_info
         - pip install -e ".[dev,tests,optional]"
         - wget -N "http://chromedriver.storage.googleapis.com/$(curl https://chromedriver.storage.googleapis.com/LATEST_RELEASE)/chromedriver_linux64.zip" -P ~/
         - unzip ~/chromedriver_linux64.zip -d ~/
@@ -149,6 +154,7 @@ matrix:
         - postgresql
         - redis-server
       install:
+        - python setup.py install_egg_info
         - pip install -e .
       before_script:
         - psql -c 'create database sentry;' -U postgres
@@ -163,6 +169,7 @@ matrix:
         - redis-server
         - postgresql
       install:
+        - python setup.py install_egg_info
         - pip install -e ".[dev,tests,optional]"
       before_script:
         - psql -c 'create database sentry;' -U postgres
@@ -175,6 +182,7 @@ matrix:
         - redis-server
         - postgresql
       install:
+        - python setup.py install_egg_info
         - pip install -e ".[dev,tests,optional]"
       before_script:
         - psql -c 'create database sentry;' -U postgres
@@ -187,6 +195,7 @@ matrix:
         - redis-server
         - postgresql
       install:
+        - python setup.py install_egg_info
         - pip install -e ".[dev,tests,optional]"
       before_script:
         - psql -c 'create database sentry;' -U postgres
@@ -204,6 +213,7 @@ matrix:
         - docker run -d --network host --name snuba --env SNUBA_SETTINGS=test --env CLICKHOUSE_SERVER=localhost:9000 getsentry/snuba
         - docker ps -a
       install:
+        - python setup.py install_egg_info
         - pip install -e ".[dev,tests,optional]"
       before_script:
         - psql -c 'create database sentry;' -U postgres
@@ -221,6 +231,7 @@ matrix:
         - gcloud auth activate-service-account --key-file client-secret.json
         - npm install -g "yarn@${YARN_VERSION}"
       install:
+        - python setup.py install_egg_info
         - yarn install --pure-lockfile
         - gcloud version
       script: bash .travis/deploy-storybook.sh
