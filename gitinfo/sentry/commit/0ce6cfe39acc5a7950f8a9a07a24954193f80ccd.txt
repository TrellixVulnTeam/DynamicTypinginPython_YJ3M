commit 0ce6cfe39acc5a7950f8a9a07a24954193f80ccd
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Thu Jun 23 12:11:19 2016 -0700

    Use POST + CSRF token for disconnecting social auth identities (#3577)

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index df449ea8b7..ee33e2acdb 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -355,6 +355,7 @@ import random
 
 SOCIAL_AUTH_DEFAULT_USERNAME = lambda: random.choice(['Darth Vader', 'Obi-Wan Kenobi', 'R2-D2', 'C-3PO', 'Yoda'])
 SOCIAL_AUTH_PROTECTED_USER_FIELDS = ['email']
+SOCIAL_AUTH_FORCE_POST_DISCONNECT = True
 
 # Queue configuration
 from kombu import Exchange, Queue
diff --git a/src/sentry/templates/sentry/account/identities.html b/src/sentry/templates/sentry/account/identities.html
index de0e3bcc1f..c0ff7b2184 100644
--- a/src/sentry/templates/sentry/account/identities.html
+++ b/src/sentry/templates/sentry/account/identities.html
@@ -25,7 +25,10 @@
                     <tr>
                         <td>{{ identity.provider|title }}</td>
                         <td style="text-align: center;">
-                            <a href="{% url 'socialauth_disconnect_individual' identity.provider identity.id %}?next={% filter urlencode %}{% absolute_uri request.path %}{% endfilter %}">Disconnect</a>
+                            <form method="post" action="{% url 'socialauth_disconnect_individual' identity.provider identity.id %}?next={% filter urlencode %}{% absolute_uri request.path %}{% endfilter %}">
+                            {% csrf_token %}
+                            <button type="submit" class="btn btn-link">Disconnect</button>
+                            </form>
                         </td>
                     </tr>
                 {% endfor %}
