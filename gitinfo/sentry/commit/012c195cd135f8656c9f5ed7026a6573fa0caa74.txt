commit 012c195cd135f8656c9f5ed7026a6573fa0caa74
Author: Ben Vinegar <benvinegar@users.noreply.github.com>
Date:   Fri Jan 13 11:45:34 2017 -0800

    Fix sourceMappingURL not being output after wp2 upgrade (#4764)

diff --git a/webpack.config.js b/webpack.config.js
index c8b5f6f201..5a43363425 100644
--- a/webpack.config.js
+++ b/webpack.config.js
@@ -197,10 +197,13 @@ if (IS_PRODUCTION) {
   }));
 
   // Disable annoying UglifyJS warnings that pollute Travis log output
+  // NOTE: This breaks -p in webpack 2. Must call webpack w/ NODE_ENV=production for minification.
   config.plugins.push(new webpack.optimize.UglifyJsPlugin({
     compress: {
       warnings: false
-    }
+    },
+    // https://github.com/webpack/webpack/blob/951a7603d279c93c936e4b8b801a355dc3e26292/bin/convert-argv.js#L442
+    sourceMap: config.devtool && (config.devtool.indexOf('sourcemap') >= 0 || config.devtool.indexOf('source-map') >= 0)
   }));
 }
 
