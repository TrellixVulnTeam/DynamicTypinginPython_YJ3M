commit 034199d9b9f76ae8b76156e2832631acb29a302c
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Thu Apr 9 16:25:59 2020 -0700

    fix: Fix duplicate event node binding (#18200)
    
    * fix: Fix duplicate event node binding
    
    nodestore.get_multi() currently fails to return when duplicate node
    IDs are provided. Remove any duplicates from the list before sending
    to nodestore. The same node data will be bound to both events with
    matching IDs.
    
    * Update src/sentry/eventstore/base.py
    
    Co-Authored-By: Matt Robenolt <matt@ydekproductions.com>
    
    Co-authored-by: Matt Robenolt <matt@ydekproductions.com>

diff --git a/src/sentry/eventstore/base.py b/src/sentry/eventstore/base.py
index 3942f5372e..05ef9e17a9 100644
--- a/src/sentry/eventstore/base.py
+++ b/src/sentry/eventstore/base.py
@@ -231,7 +231,8 @@ class EventStorage(Service):
             (i, getattr(i, node_name)) for i in object_list if getattr(i, node_name).id
         ]
 
-        node_ids = [n.id for _, n in object_node_list]
+        # Remove duplicates from the list of nodes to be fetched
+        node_ids = list({n.id for _, n in object_node_list})
         if not node_ids:
             return
 
