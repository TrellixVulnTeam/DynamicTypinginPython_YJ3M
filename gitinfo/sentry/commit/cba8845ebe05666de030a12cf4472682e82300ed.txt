commit cba8845ebe05666de030a12cf4472682e82300ed
Author: Mark Story <mark@sentry.io>
Date:   Thu Dec 5 13:12:15 2019 -0500

    fix(issues) Fix tombstone deletion (#15932)
    
    There were race conditions between the delete and the reload that
    presented themselves mostly in firefox but could have effected all
    browsers. I've removed the grid-emotion usage as eslint was complaining.

diff --git a/src/sentry/static/sentry/app/views/settings/project/projectFilters/groupTombstones.jsx b/src/sentry/static/sentry/app/views/settings/project/projectFilters/groupTombstones.jsx
index b403f6c3cc..6b86b6a7a7 100644
--- a/src/sentry/static/sentry/app/views/settings/project/projectFilters/groupTombstones.jsx
+++ b/src/sentry/static/sentry/app/views/settings/project/projectFilters/groupTombstones.jsx
@@ -1,7 +1,6 @@
 import PropTypes from 'prop-types';
 import React from 'react';
 import styled from 'react-emotion';
-import {Box} from 'grid-emotion';
 
 import {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';
 import {t} from 'app/locale';
@@ -12,6 +11,7 @@ import LinkWithConfirmation from 'app/components/links/linkWithConfirmation';
 import Tooltip from 'app/components/tooltip';
 import {Panel, PanelItem} from 'app/components/panels';
 import EmptyMessage from 'app/views/settings/components/emptyMessage';
+import space from 'app/styles/space';
 
 class GroupTombstoneRow extends React.Component {
   static propTypes = {
@@ -33,7 +33,7 @@ class GroupTombstoneRow extends React.Component {
             data={data}
           />
         </StyledBox>
-        <Box w={20} mx={30}>
+        <AvatarContainer>
           {actor && (
             <Avatar
               user={data.actor}
@@ -41,10 +41,11 @@ class GroupTombstoneRow extends React.Component {
               tooltip={t('Discarded by %s', actor.name || actor.email)}
             />
           )}
-        </Box>
-        <Box w={30}>
+        </AvatarContainer>
+        <ActionContainer>
           <Tooltip title={t('Undiscard')}>
             <LinkWithConfirmation
+              title={t('Undiscard')}
               className="group-remove btn btn-default btn-sm"
               message={t(
                 'Undiscarding this issue means that ' +
@@ -60,7 +61,7 @@ class GroupTombstoneRow extends React.Component {
               <span className="icon-trash undiscard" />
             </LinkWithConfirmation>
           </Tooltip>
-        </Box>
+        </ActionContainer>
       </PanelItem>
     );
   }
@@ -80,16 +81,18 @@ class GroupTombstones extends AsyncComponent {
   handleUndiscard = tombstoneId => {
     const {orgId, projectId} = this.props;
     const path = `/projects/${orgId}/${projectId}/tombstones/${tombstoneId}/`;
-    this.api.request(path, {
-      method: 'DELETE',
-      success: data => {
+    this.api
+      .requestPromise(path, {
+        method: 'DELETE',
+      })
+      .then(() => {
         addSuccessMessage(t('Events similar to these will no longer be filtered'));
-      },
-      error: () => {
+        this.fetchData();
+      })
+      .catch(() => {
         addErrorMessage(t('We were unable to undiscard this issue'));
-      },
-    });
-    this.fetchData();
+        this.fetchData();
+      });
   };
 
   renderEmpty() {
@@ -121,9 +124,19 @@ class GroupTombstones extends AsyncComponent {
   }
 }
 
-const StyledBox = styled(Box)`
+const StyledBox = styled('div')`
   flex: 1;
+  align-items: center;
   min-width: 0; /* keep child content from stretching flex item */
 `;
 
+const AvatarContainer = styled('div')`
+  margin: 0 ${space(4)};
+  width: ${space(3)};
+`;
+
+const ActionContainer = styled('div')`
+  width: ${space(4)};
+`;
+
 export default GroupTombstones;
