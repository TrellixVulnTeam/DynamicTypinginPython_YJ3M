commit 15b8985f11d06e071ea1a4eefa418c766f0f7134
Author: askfor <askfor@gmail.com>
Date:   Thu Jan 24 22:59:58 2013 +0800

    Update src/sentry/utils/dates.py

diff --git a/src/sentry/utils/dates.py b/src/sentry/utils/dates.py
index 10602bdbc1..b4c8af85f7 100644
--- a/src/sentry/utils/dates.py
+++ b/src/sentry/utils/dates.py
@@ -29,10 +29,10 @@ def get_sql_date_trunc(col, db='default', grouper='hour'):
     # TODO: does extract work for sqlite?
     if engine.startswith('oracle'):
         method = DATE_TRUNC_GROUPERS['oracle'].get(grouper, DATE_TRUNC_GROUPERS['default'][grouper])
+        if not '"' in col:
+            col = '"%s"'%str.upper(col)
     else:
         method = DATE_TRUNC_GROUPERS['default'][grouper]
-    if not '"' in col:
-        col = '"%s"'%str.upper(col)
     return conn.ops.date_trunc_sql(method, col)
 
 
