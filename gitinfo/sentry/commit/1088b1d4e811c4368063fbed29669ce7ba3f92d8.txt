commit 1088b1d4e811c4368063fbed29669ce7ba3f92d8
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Wed Apr 20 09:51:47 2016 -0700

    Fix project_details with API key
    
    Fixes FREIGHT-12

diff --git a/src/sentry/api/endpoints/project_details.py b/src/sentry/api/endpoints/project_details.py
index b48c2f96db..2e3e66c49e 100644
--- a/src/sentry/api/endpoints/project_details.py
+++ b/src/sentry/api/endpoints/project_details.py
@@ -172,9 +172,12 @@ class ProjectDetailsEndpoint(ProjectEndpoint):
                                project settings.
         :auth: required
         """
-        if request.auth and request.auth.has_scope('project:write'):
-            serializer_cls = ProjectAdminSerializer
-        elif request.access.has_scope('project:write'):
+        has_project_write = (
+            (request.auth and request.auth.has_scope('project:write')) or
+            (request.access and request.access.has_scope('project:write'))
+        )
+
+        if has_project_write:
             serializer_cls = ProjectAdminSerializer
         else:
             serializer_cls = ProjectMemberSerializer
@@ -217,7 +220,7 @@ class ProjectDetailsEndpoint(ProjectEndpoint):
         elif result.get('isSubscribed') is False:
             UserOption.objects.set_value(request.user, project, 'mail:alert', 0)
 
-        if request.access.has_scope('project:write'):
+        if has_project_write:
             options = request.DATA.get('options', {})
             if 'sentry:origins' in options:
                 project.update_option(
