commit 56be7faa8f4de56fbfb5e2d66c70b0a84be84401
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Mon Feb 22 13:13:03 2016 +0100

    Accept all dsyms even if nested at different levels

diff --git a/src/sentry/models/dsymfile.py b/src/sentry/models/dsymfile.py
index 727c6e28a3..56f1fb9cae 100644
--- a/src/sentry/models/dsymfile.py
+++ b/src/sentry/models/dsymfile.py
@@ -90,22 +90,17 @@ class DSymFile(Model):
             safe_extract_zip(fileobj, scratchpad)
             to_create = []
 
-            # If we're dealing with a resource bundle, use the DWARF
-            # folder otherwise assume people just dumped binaries directly
-            # into the thing.
-            path = os.path.join(scratchpad, 'Contents/Resources/DWARF')
-            if not os.path.isdir(path):
-                path = scratchpad
-
-            for fn in os.listdir(path):
-                try:
-                    uuids = get_macho_uuids(os.path.join(path, fn))
-                except (IOError, ValueError):
-                    # Whatever was contained there, was probably not a
-                    # macho file.
-                    continue
-                for cpu, uuid in uuids:
-                    to_create.append((cpu, uuid, os.path.join(path, fn)))
+            for dirpath, dirnames, filenames in os.walk(scratchpad):
+                for fn in filenames:
+                    fn = os.path.join(dirpath, fn)
+                    try:
+                        uuids = get_macho_uuids(fn)
+                    except (IOError, ValueError):
+                        # Whatever was contained there, was probably not a
+                        # macho file.
+                        continue
+                    for cpu, uuid in uuids:
+                        to_create.append((cpu, uuid, fn))
 
             rv = []
             for cpu, uuid, filename in to_create:
