commit 10347d4ca4caa826f5e6962557718880c9f61199
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Dec 15 13:15:16 2015 -0800

    Change clear behavior to remove any existing query (fixes GH-2453)

diff --git a/src/sentry/static/sentry/app/views/stream/searchBar.jsx b/src/sentry/static/sentry/app/views/stream/searchBar.jsx
index c7c5e9bc4f..b34cff42a9 100644
--- a/src/sentry/static/sentry/app/views/stream/searchBar.jsx
+++ b/src/sentry/static/sentry/app/views/stream/searchBar.jsx
@@ -124,7 +124,7 @@ const SearchBar = React.createClass({
 
   clearSearch() {
     this.setState(
-      {query: this.props.defaultQuery},
+      {query: ''},
       () => this.props.onSearch(this.state.query)
     );
   },
@@ -428,7 +428,7 @@ const SearchBar = React.createClass({
               disabled={this.props.disabled}
               />
             <span className="icon-search" />
-            {this.state.query !== this.props.defaultQuery &&
+            {this.state.query !== '' &&
               <div>
                 <a className="search-clear-form" onClick={this.clearSearch}>
                   <span className="icon-circle-cross" />
diff --git a/tests/js/spec/views/stream/searchBar.spec.jsx b/tests/js/spec/views/stream/searchBar.spec.jsx
index 9b926c5f31..6537c5c8f8 100644
--- a/tests/js/spec/views/stream/searchBar.spec.jsx
+++ b/tests/js/spec/views/stream/searchBar.spec.jsx
@@ -67,7 +67,7 @@ describe('SearchBar', function() {
 
       wrapper.clearSearch();
 
-      expect(wrapper.state.query).to.equal('is:unresolved');
+      expect(wrapper.state.query).to.equal('');
     });
 
     it('calls onSearch()', function(done) {
@@ -83,7 +83,7 @@ describe('SearchBar', function() {
       wrapper.clearSearch();
 
       setTimeout(() => {
-        expect(props.onSearch.calledWith('is:unresolved')).to.be.true;
+        expect(props.onSearch.calledWith('')).to.be.true;
         done();
       });
     });
