commit f2a1b42015018c5e9a9b29b23d1f4bfdafae8976
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Aug 18 12:17:34 2015 -0700

    Hide tag keys which are not visible (refs GH-1789)

diff --git a/src/sentry/api/serializers/models/group.py b/src/sentry/api/serializers/models/group.py
index 8419a40a79..c1ab1aaf29 100644
--- a/src/sentry/api/serializers/models/group.py
+++ b/src/sentry/api/serializers/models/group.py
@@ -9,7 +9,7 @@ from sentry.api.serializers import Serializer, register, serialize
 from sentry.app import tsdb
 from sentry.models import (
     Group, GroupAssignee, GroupBookmark, GroupMeta, GroupTagKey, GroupSeen,
-    GroupStatus, TagKey
+    GroupStatus, TagKey, TagKeyStatus
 )
 from sentry.utils.db import attach_foreignkey
 from sentry.utils.http import absolute_uri
@@ -67,9 +67,14 @@ class GroupSerializer(Serializer):
             tags = {}
             for key in tag_counts.iterkeys():
                 try:
-                    label = tagkeys[key].get_label()
+                    tagkey = tagkeys[key]
                 except KeyError:
                     label = key.replace('_', ' ').title()
+                else:
+                    if tagkey.status != TagKeyStatus.VISIBLE:
+                        continue
+                    label = tagkey.get_label()
+
                 try:
                     value = tag_counts[key].get(item.id, 0)
                 except KeyError:
