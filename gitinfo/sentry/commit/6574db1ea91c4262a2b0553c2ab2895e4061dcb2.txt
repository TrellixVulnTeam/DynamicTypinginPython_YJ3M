commit 6574db1ea91c4262a2b0553c2ab2895e4061dcb2
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jan 3 18:24:30 2011 -0800

    Ensure we properly cover default version

diff --git a/sentry/tests/tests.py b/sentry/tests/tests.py
index 21e4864f21..ac39b85783 100644
--- a/sentry/tests/tests.py
+++ b/sentry/tests/tests.py
@@ -610,16 +610,16 @@ class SentryTestCase(TestCase):
 
     def testVersions(self):
         import sentry
-        logger = logging.getLogger()
-        
-        self.setUpHandler()
-        
-        logger.error('Test')
+        resp = self.client.get(reverse('sentry-log-request-exc'))
+        self.assertEquals(resp.status_code, 200)
 
         self.assertEquals(Message.objects.count(), 1)
         self.assertEquals(GroupedMessage.objects.count(), 1)
         last = Message.objects.get()
-        self.assertEquals(last.data['__sentry__']['versions']['sentry'], sentry.VERSION, last.data['__sentry__']['versions'])
+        self.assertEquals(last.data['__sentry__']['versions']['sentry'], sentry.VERSION)
+        self.assertEquals(last.data['__sentry__']['version'], sentry.VERSION)
+        last = GroupedMessage.objects.get()
+        self.assertEquals(last.data['version'], sentry.VERSION)
 
 class SentryViewsTest(TestCase):
     urls = 'sentry.tests.urls'
