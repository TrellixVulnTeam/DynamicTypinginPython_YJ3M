commit e1f3f08a918f985595024b79113da775e2835abd
Author: Katie Lundsgaard <katie@getsentry.com>
Date:   Tue Mar 21 17:54:10 2017 -0700

    Add real data to hovercard

diff --git a/src/sentry/static/sentry/app/components/group/seenInfo.jsx b/src/sentry/static/sentry/app/components/group/seenInfo.jsx
index 6ea2014338..2f24e8aa2d 100644
--- a/src/sentry/static/sentry/app/components/group/seenInfo.jsx
+++ b/src/sentry/static/sentry/app/components/group/seenInfo.jsx
@@ -84,7 +84,7 @@ const SeenInfo = React.createClass({
         )}
         <dt key={4}>{t('Release')}:</dt>
         {defined(release) ?
-          <dd key={5}><Version orgId={orgId} projectId={projectId} version={release.version} /></dd>
+          <dd key={5}><Version orgId={orgId} projectId={projectId} version={release.version} onIssuePage={true} /></dd>
         : (!this.props.hasRelease ?
           <dd key={5}><small style={{marginLeft: 5, fontStyle: 'italic'}}><a href={this.getReleaseTrackingUrl()}>not configured</a></small></dd>
         :
diff --git a/src/sentry/static/sentry/app/components/hoverCard.jsx b/src/sentry/static/sentry/app/components/hoverCard.jsx
index ce34a95c62..c7d96957be 100644
--- a/src/sentry/static/sentry/app/components/hoverCard.jsx
+++ b/src/sentry/static/sentry/app/components/hoverCard.jsx
@@ -1,37 +1,97 @@
 import React from 'react';
 
+import Avatar from './avatar';
+
+import LoadingIndicator from './loadingIndicator';
+import LoadingError from './loadingError';
+
+import ApiMixin from '../mixins/apiMixin';
+
 const HoverCard = React.createClass({
   propTypes: {
     version: React.PropTypes.string.isRequired,
     orgId: React.PropTypes.string.isRequired,
-    projectId: React.PropTypes.string.isRequired
+    projectId: React.PropTypes.string.isRequired,
+    visible: React.PropTypes.bool.isRequired,
+  },
+
+  mixins: [ApiMixin],
+
+  getInitialState() {
+    return {
+      loading: true,
+      error: false,
+      data: {},
+    };
+  },
+
+  componentDidMount() {
+    let {orgId, version} = this.props;
+
+    let path = `/organizations/${orgId}/releases/${version}/`;
+    this.api.request(path, {
+      method: 'GET',
+      success: (data, _, jqXHR) => {
+        this.setState({
+          release: data,
+          loading: false,
+        });
+      },
+      error: () => {
+        this.setState({
+          error: true,
+        });
+      }
+    });
   },
 
   render() {
-    let {orgId, projectId, version} = this.props;
+
+    let {version, visible} = this.props;
     let shortVersion = version.match(/^[a-f0-9]{40}$/) ? version.substr(0, 12) : version;
+    let release = this.state.release;
+    if (!visible) {
+      return null;
+    }
+
+    if (this.state.error) {
+      return(
+        <div className="hovercard">
+          <div className="hovercard-header">
+            <span>Release {shortVersion}</span>
+          </div>
+          <LoadingError />
+        </div>
+      );
+    }
 
     return (
       <div className="hovercard">
         <div className="hovercard-header">
-          <div className="pull-right">
-            <a href="#"><span className="icon icon-open" /></a>
-          </div>
           <span>Release {shortVersion}</span>
         </div>
         <div className="hovercard-body">
+        {this.state.loading ? <LoadingIndicator mini={true}/> :
           <div className="row row-flex">
             <div className="col-xs-4">
               <h6>New Issues</h6>
-              <div className="count">23</div>
+              <div className="count">{release.newGroups}</div>
             </div>
             <div className="col-xs-8">
-              <h6>18 commits by 3 authors</h6>
+              <h6>{release.commitCount} commits by {release.authors.length} authors</h6>
               <div className="avatar-grid">
-                [Avatar grid]
+                {release.authors.map(author => {
+                  return (
+                    <span className="avatar-grid-item tip"
+                         title={author.name + ' ' + author.email}>
+                      <Avatar user={author}/>
+                    </span>
+                  );
+                })}
               </div>
             </div>
           </div>
+        }
         </div>
       </div>
     );
diff --git a/src/sentry/static/sentry/app/components/version.jsx b/src/sentry/static/sentry/app/components/version.jsx
index e16cebfe65..6ec29a0744 100644
--- a/src/sentry/static/sentry/app/components/version.jsx
+++ b/src/sentry/static/sentry/app/components/version.jsx
@@ -8,24 +8,32 @@ const Version = React.createClass({
     anchor: React.PropTypes.bool,
     version: React.PropTypes.string.isRequired,
     orgId: React.PropTypes.string.isRequired,
-    projectId: React.PropTypes.string.isRequired
+    projectId: React.PropTypes.string.isRequired,
+    onIssuePage: React.PropTypes.bool,
+  },
+
+  contextTypes: {
+    organization: React.PropTypes.object,
   },
 
   getDefaultProps() {
     return {
-      anchor: true
+      anchor: true,
+      onIssuePage: false,
     };
   },
 
   getInitialState() {
     return {
       showHovercard: false,
+      mountHovercard: false,
     };
   },
 
   toggleHovercard () {
     this.setState({
-      showHovercard: !this.state.showHovercard
+      showHovercard: !this.state.showHovercard,
+      mountHovercard: true,
     });
   },
 
@@ -41,8 +49,8 @@ const Version = React.createClass({
           <Link to={`/${orgId}/${projectId}/releases/${encodeURIComponent(version)}/`}>
           <span title={version}>{shortVersion}</span>
           </Link>
-          {this.state.showHovercard &&
-            <HoverCard orgId={orgId} projectId={projectId} version={shortVersion} />
+          {this.state.mountHovercard && this.props.onIssuePage && new Set(this.context.organization.features).has('release-commits') &&
+            <HoverCard visible={this.state.showHovercard} orgId={orgId} projectId={projectId} version={version} />
           }
         </span>
       );
diff --git a/src/sentry/static/sentry/less/sentry-hovercard.less b/src/sentry/static/sentry/less/sentry-hovercard.less
index 4dbbc45bc8..602d7e7b53 100644
--- a/src/sentry/static/sentry/less/sentry-hovercard.less
+++ b/src/sentry/static/sentry/less/sentry-hovercard.less
@@ -59,6 +59,7 @@
 
   .hovercard-body {
     padding: @hovercard-padding;
+    min-height: 74px;
   }
 
   h6 {
