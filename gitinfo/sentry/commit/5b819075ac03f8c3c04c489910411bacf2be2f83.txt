commit 5b819075ac03f8c3c04c489910411bacf2be2f83
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Aug 4 14:47:19 2013 -0700

    Revert "Invalid call to sourcemap_to_index"
    
    This reverts commit 8e2543bc0446f0c0f8e41bf10fd189b53ddd6659.

diff --git a/src/sentry/tasks/fetch_source.py b/src/sentry/tasks/fetch_source.py
index cfe4523187..31cd7e7e36 100644
--- a/src/sentry/tasks/fetch_source.py
+++ b/src/sentry/tasks/fetch_source.py
@@ -138,7 +138,7 @@ def fetch_sourcemap(url, logger=None):
     if body.startswith(")]}'"):
         body = body.split('\n', 1)[1]
     try:
-        index = sourcemap.load(body)
+        index = sourcemap_to_index(body)
     except (JSONDecodeError, ValueError):
         if logger:
             logger.warning('Failed parsing sourcemap JSON: %r', body[:15], exc_info=True)
@@ -234,7 +234,7 @@ def expand_javascript_source(data, **kwargs):
             sourcemap_idxs[sourcemap] = None
             continue
 
-        sourcemap_idxs[sourcemap] = index
+        sourcemap_idxs[sourcemap] = sourcemap.load(index)
 
         # queue up additional source files for download
         for source in index.sources:
