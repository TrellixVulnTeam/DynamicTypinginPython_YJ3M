commit e244694eec43df3d9a8f1be373479941efef85b1
Author: Dan Fuller <dfuller@sentry.io>
Date:   Mon Apr 22 14:31:51 2019 -0700

    feat(api): Store last used label for project when creating a jira issue from sentry (SEN-440)
    
    We want to remember the last used label for an issue and use it when creating other issues within
    the same project.

diff --git a/src/sentry/integrations/jira/integration.py b/src/sentry/integrations/jira/integration.py
index fe0dd4ddd2..62aacbb454 100644
--- a/src/sentry/integrations/jira/integration.py
+++ b/src/sentry/integrations/jira/integration.py
@@ -252,7 +252,7 @@ class JiraIntegration(IntegrationInstallation, IssueSyncMixin):
         return '%s/browse/%s' % (self.model.metadata['base_url'], key)
 
     def get_persisted_default_config_fields(self):
-        return ['project', 'issuetype', 'priority']
+        return ['project', 'issuetype', 'priority', 'labels']
 
     def get_group_description(self, group, event, **kwargs):
         output = [
@@ -530,6 +530,8 @@ class JiraIntegration(IntegrationInstallation, IssueSyncMixin):
                 field['default'] = defaults.get('priority', '')
             elif field['name'] == 'fixVersions':
                 field['choices'] = self.make_choices(client.get_versions(meta['key']))
+            elif field['name'] == 'labels':
+                field['default'] = defaults.get('labels', '')
 
         return fields
 
diff --git a/tests/sentry/integrations/jira/test_integration.py b/tests/sentry/integrations/jira/test_integration.py
index 6eb031e0f0..7ca22806e4 100644
--- a/tests/sentry/integrations/jira/test_integration.py
+++ b/tests/sentry/integrations/jira/test_integration.py
@@ -452,6 +452,7 @@ class JiraIntegrationTest(APITestCase):
                 'type': 'text',
                 'name': 'labels',
                 'label': 'Labels',
+                'default': '',
             }]
 
     def test_get_create_issue_config_with_default_and_param(self):
@@ -514,6 +515,37 @@ class JiraIntegrationTest(APITestCase):
                 'updatesForm': True,
             }
 
+    def test_get_create_issue_config_with_label_default(self):
+        org = self.organization
+        self.login_as(self.user)
+        group = self.create_group()
+        self.create_event(group=group)
+
+        label_default = 'hi'
+
+        installation = self.integration.get_installation(org.id)
+        installation.org_integration.config = {
+            'project_issue_defaults': {
+                six.text_type(group.project_id): {'labels': label_default}
+            }
+        }
+        installation.org_integration.save()
+
+        def get_client():
+            return MockJiraApiClient()
+
+        with mock.patch.object(installation, 'get_client', get_client):
+            fields = installation.get_create_issue_config(group)
+            label_field = [field for field in fields if field['name'] == 'labels'][0]
+
+            assert label_field == {
+                'required': False,
+                'type': 'text',
+                'name': 'labels',
+                'label': 'Labels',
+                'default': label_default,
+            }
+
     def test_get_link_issue_config(self):
         org = self.organization
         self.login_as(self.user)
