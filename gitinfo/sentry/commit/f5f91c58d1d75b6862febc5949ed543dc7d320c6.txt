commit f5f91c58d1d75b6862febc5949ed543dc7d320c6
Author: Ben Vinegar <ben@benv.ca>
Date:   Wed Aug 5 14:57:16 2015 -0700

    Fix checkboxes not working correctly after taking action (fixes GH-1679)

diff --git a/src/sentry/static/sentry/app/stores/selectedGroupStore.jsx b/src/sentry/static/sentry/app/stores/selectedGroupStore.jsx
index 1832ab3117..b5dc70a52a 100644
--- a/src/sentry/static/sentry/app/stores/selectedGroupStore.jsx
+++ b/src/sentry/static/sentry/app/stores/selectedGroupStore.jsx
@@ -65,8 +65,10 @@ var SelectedGroupStore = Reflux.createStore({
     return this.records[itemId] === true;
   },
 
-  clearAll() {
-    this.records = {};
+  deselectAll() {
+    for (var itemId in this.records) {
+      this.records[itemId] = false;
+    }
     this.trigger();
   },
 
diff --git a/src/sentry/static/sentry/app/views/stream/actions.jsx b/src/sentry/static/sentry/app/views/stream/actions.jsx
index 2e4c4f35de..d9dc696e52 100644
--- a/src/sentry/static/sentry/app/views/stream/actions.jsx
+++ b/src/sentry/static/sentry/app/views/stream/actions.jsx
@@ -64,7 +64,7 @@ var StreamActions = React.createClass({
 
     callback(selectedIds);
 
-    SelectedGroupStore.clearAll();
+    SelectedGroupStore.deselectAll();
   },
 
   onUpdate(data, event, actionType) {
diff --git a/tests/js/spec/stores/selectedGroupStore.spec.js b/tests/js/spec/stores/selectedGroupStore.spec.js
index 4ce2fd5b9e..79be69e4f3 100644
--- a/tests/js/spec/stores/selectedGroupStore.spec.js
+++ b/tests/js/spec/stores/selectedGroupStore.spec.js
@@ -166,16 +166,16 @@ describe('SelectedGroupStore', function() {
 
   });
 
-  describe('clearAll()', function() {
+  describe('deselectAll()', function() {
 
-    it("resets records", function() {
-      SelectedGroupStore.records = { 1: true };
-      SelectedGroupStore.clearAll();
-      expect(SelectedGroupStore.records).to.eql({});
+    it("sets all records to false", function() {
+      SelectedGroupStore.records = { 1: true, 2: true, 3: false };
+      SelectedGroupStore.deselectAll();
+      expect(SelectedGroupStore.records).to.eql({ 1: false, 2: false, 3: false });
     });
 
     it("triggers an update", function() {
-      SelectedGroupStore.clearAll();
+      SelectedGroupStore.deselectAll();
       expect(this.trigger.called).to.be.true;
     });
 
@@ -206,7 +206,6 @@ describe('SelectedGroupStore', function() {
       SelectedGroupStore.toggleSelect();
       expect(this.trigger.called).to.be.false;
     });
-
   });
 
   describe('toggleSelectAll()', function() {
