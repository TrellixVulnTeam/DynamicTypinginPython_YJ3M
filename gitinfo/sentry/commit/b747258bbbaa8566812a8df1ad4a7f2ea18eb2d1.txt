commit b747258bbbaa8566812a8df1ad4a7f2ea18eb2d1
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Mar 3 11:22:42 2015 -0800

    Correct AuthIdentity queries to include user

diff --git a/src/sentry/auth/access.py b/src/sentry/auth/access.py
index 24ec20cd4d..b1eafb29f4 100644
--- a/src/sentry/auth/access.py
+++ b/src/sentry/auth/access.py
@@ -95,6 +95,7 @@ def from_member(member):
         try:
             auth_identity = AuthIdentity.objects.get(
                 auth_provider=auth_provider,
+                user=member.user_id,
             )
         except AuthIdentity.DoesNotExist:
             sso_is_valid = False
diff --git a/src/sentry/models/project.py b/src/sentry/models/project.py
index ee3bf9e802..234678ae1c 100644
--- a/src/sentry/models/project.py
+++ b/src/sentry/models/project.py
@@ -224,6 +224,7 @@ class Project(Model):
         try:
             auth_identity = AuthIdentity.objects.get(
                 auth_provider__organization=self.organization_id,
+                user=member.user_id,
             )
         except AuthIdentity.DoesNotExist:
             return True
diff --git a/src/sentry/models/team.py b/src/sentry/models/team.py
index 98db476145..e2e1d2b619 100644
--- a/src/sentry/models/team.py
+++ b/src/sentry/models/team.py
@@ -196,6 +196,7 @@ class Team(Model):
         try:
             auth_identity = AuthIdentity.objects.get(
                 auth_provider__organization=self.organization_id,
+                user=member.user_id,
             )
         except AuthIdentity.DoesNotExist:
             return True
