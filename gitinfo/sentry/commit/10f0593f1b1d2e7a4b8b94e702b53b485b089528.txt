commit 10f0593f1b1d2e7a4b8b94e702b53b485b089528
Author: Mark Story <mark@sentry.io>
Date:   Tue May 7 10:28:06 2019 -0400

    feat(ui) Add a popper based tooltip (#13043)
    
    This tooltip allows us to more easily render react elements as the
    tooltip comments and removes a dependency on jQuery / bootstrap allowing
    us to upgrade to a non-vulnerable version of bootstrap.
    
    I've used a portal for the tooltip because the elements it generates cannot
    exist inside an SVG canvas, and conditionally rendering means we won't
    spam the DOM with tons of tooltip elements for content that cannot be
    seen.
    
    Using `ref` doesn't work on custom components as we can't rely on them
    implementing forwardRef() and SVG elements can't have spans wrapped onto
    elements. If we can detect that we're dealing with a styled/class
    component we can wrap with a known element that makes ref handling easy.
    
    Add a theme.zIndex value for tooltips at 1070 which is the current value we want
    to retain.
    
    Refs SEN-595

diff --git a/docs-ui/components/tooltip.stories.js b/docs-ui/components/tooltip.stories.js
index a289c5d064..7ea171d6ce 100644
--- a/docs-ui/components/tooltip.stories.js
+++ b/docs-ui/components/tooltip.stories.js
@@ -1,42 +1,112 @@
 import React from 'react';
 import {storiesOf} from '@storybook/react';
 import {withInfo} from '@storybook/addon-info';
-import {text, boolean} from '@storybook/addon-knobs';
+import {text, boolean, select} from '@storybook/addon-knobs';
 
 import Tooltip from 'app/components/tooltip';
+import Tooltip2 from 'app/components/tooltip2';
 import Button from 'app/components/button';
 
-storiesOf('UI|Tooltip', module).add(
-  'Tooltip',
-  withInfo({
-    text: 'Adds a tool to any component',
-    propTablesExclude: [Button],
-  })(() => {
-    let title = text('My tooltip', 'My tooltip');
-    let disabled = boolean('Disabled', false);
-
-    return (
-      <div>
-        <p>Test</p>
-        <div>
-          <Tooltip title={title} disabled={disabled}>
-            <Button>Custom React Component</Button>
-          </Tooltip>
-        </div>
-        <p>Test with options</p>
+class CustomThing extends React.Component {
+  render() {
+    return <span>A class component with no ref</span>;
+  }
+}
 
+storiesOf('UI|Tooltip', module)
+  .add(
+    'Tooltip',
+    withInfo({
+      text: 'Adds a tool to any component',
+      propTablesExclude: [Button],
+    })(() => {
+      const title = text('My tooltip', 'My tooltip');
+      const disabled = boolean('Disabled', false);
+
+      return (
         <div>
-          <Tooltip
-            title={title}
-            disabled={disabled}
-            tooltipOptions={{
-              placement: 'bottom',
-            }}
-          >
-            <button>Native button</button>
-          </Tooltip>
+          <p>Test</p>
+          <div>
+            <Tooltip title={title} disabled={disabled}>
+              <Button>Custom React Component</Button>
+            </Tooltip>
+          </div>
+          <p>Test with options</p>
+
+          <div>
+            <Tooltip
+              title={title}
+              disabled={disabled}
+              tooltipOptions={{
+                placement: 'bottom',
+              }}
+            >
+              <button>Native button</button>
+            </Tooltip>
+          </div>
         </div>
-      </div>
-    );
-  })
-);
+      );
+    })
+  )
+  .add(
+    'Tooltip v2',
+    withInfo({
+      text: 'Adds a tooltip to any component,',
+      propTablesExclude: [CustomThing, Button, 'Button'],
+    })(() => {
+      const title = text('tooltip', 'Basic tooltip content');
+      const disabled = boolean('Disabled', false);
+      const position = select(
+        'position',
+        {top: 'top', bottom: 'bottom', left: 'left', right: 'right'},
+        'top'
+      );
+
+      return (
+        <React.Fragment>
+          <h3>With styled component trigger</h3>
+          <p>
+            <Tooltip2 title={title} position={position} disabled={disabled}>
+              <Button>Styled button</Button>
+            </Tooltip2>
+          </p>
+
+          <h3>With class component trigger</h3>
+          <p>
+            <Tooltip2 title={title} position={position} disabled={disabled}>
+              <CustomThing>Custom React Component</CustomThing>
+            </Tooltip2>
+          </p>
+
+          <h3>With an SVG element trigger</h3>
+          <p>
+            <svg
+              viewBox="0 0 100 100"
+              width="100"
+              height="100"
+              xmlns="http://www.w3.org/2000/svg"
+            >
+              <Tooltip2 title={title} position={position} disabled={disabled}>
+                <circle cx="50" cy="50" r="50" />
+              </Tooltip2>
+            </svg>
+          </p>
+
+          <h3>With element title and native html element</h3>
+          <p>
+            <Tooltip2
+              title={
+                <span>
+                  <em>so strong</em>
+                </span>
+              }
+              position={position}
+              disabled={disabled}
+            >
+              <button>Native button</button>
+            </Tooltip2>
+          </p>
+        </React.Fragment>
+      );
+    })
+  );
diff --git a/package.json b/package.json
index 4100c7c2a6..b90e24867f 100644
--- a/package.json
+++ b/package.json
@@ -76,6 +76,7 @@
     "react-keydown": "^1.9.7",
     "react-lazyload": "^2.3.0",
     "react-mentions": "^1.2.0",
+    "react-popper": "^1.3.3",
     "react-router": "3.2.0",
     "react-select": "^1.2.1",
     "react-sparklines": "1.7.0",
diff --git a/src/sentry/static/sentry/app/components/avatar/avatarList.jsx b/src/sentry/static/sentry/app/components/avatar/avatarList.jsx
index 3b8fd3abb7..c0c9be03ef 100644
--- a/src/sentry/static/sentry/app/components/avatar/avatarList.jsx
+++ b/src/sentry/static/sentry/app/components/avatar/avatarList.jsx
@@ -37,8 +37,8 @@ export default class AvatarList extends React.Component {
     const visibleUsers = users.slice(0, maxVisibleAvatars);
     const numCollapsedUsers = users.length - visibleUsers.length;
 
-    if (!tooltipOptions.placement) {
-      tooltipOptions.placement = 'top auto';
+    if (!tooltipOptions.position) {
+      tooltipOptions.position = 'top';
     }
 
     return (
diff --git a/src/sentry/static/sentry/app/components/avatar/baseAvatar.jsx b/src/sentry/static/sentry/app/components/avatar/baseAvatar.jsx
index 4a66bdfd44..82d9c39b68 100644
--- a/src/sentry/static/sentry/app/components/avatar/baseAvatar.jsx
+++ b/src/sentry/static/sentry/app/components/avatar/baseAvatar.jsx
@@ -5,7 +5,7 @@ import qs from 'query-string';
 import styled from 'react-emotion';
 
 import LetterAvatar from 'app/components/letterAvatar';
-import Tooltip from 'app/components/tooltip';
+import Tooltip2 from 'app/components/tooltip2';
 
 import {imageStyle} from './styles';
 import Gravatar from './gravatar';
@@ -40,7 +40,7 @@ class BaseAvatar extends React.Component {
     gravatarId: PropTypes.string,
     letterId: PropTypes.string,
     title: PropTypes.string,
-    tooltip: PropTypes.string,
+    tooltip: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),
     tooltipOptions: PropTypes.object,
     /**
      * Should avatar be round instead of a square
@@ -151,7 +151,7 @@ class BaseAvatar extends React.Component {
     }
 
     return (
-      <Tooltip title={tooltip} tooltipOptions={tooltipOptions} disabled={!hasTooltip}>
+      <Tooltip2 title={tooltip} disabled={!hasTooltip} {...tooltipOptions}>
         <StyledBaseAvatar
           loaded={this.state.hasLoaded}
           className={classNames('avatar', className)}
@@ -164,7 +164,7 @@ class BaseAvatar extends React.Component {
           {this.state.showBackupAvatar && this.renderLetterAvatar()}
           {this.renderImg()}
         </StyledBaseAvatar>
-      </Tooltip>
+      </Tooltip2>
     );
   }
 }
diff --git a/src/sentry/static/sentry/app/components/tooltip2.jsx b/src/sentry/static/sentry/app/components/tooltip2.jsx
new file mode 100644
index 0000000000..4de8e65d37
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/tooltip2.jsx
@@ -0,0 +1,232 @@
+import React from 'react';
+import ReactDOM from 'react-dom';
+import styled from 'react-emotion';
+import PropTypes from 'prop-types';
+
+import {Manager, Reference, Popper} from 'react-popper';
+import {domId} from 'app/utils/domId';
+
+class Tooltip2 extends React.Component {
+  static propTypes = {
+    /**
+     * Disable the tooltip display entirely
+     */
+    disabled: PropTypes.bool,
+    /**
+     * The content to show in the tooltip popover
+     */
+    title: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),
+    /**
+     * Position for the tooltip.
+     */
+    position: PropTypes.oneOf([
+      'bottom',
+      'top',
+      'left',
+      'right',
+      'bottom-start',
+      'bottom-end',
+      'top-start',
+      'top-end',
+      'left-start',
+      'left-end',
+      'right-start',
+      'right-end',
+      'auto',
+    ]),
+    /**
+     * Additional style rules for the tooltip content.
+     */
+    popperStyle: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),
+  };
+
+  static defaultProps = {
+    position: 'top',
+  };
+
+  constructor(props) {
+    super(props);
+
+    let portal = document.getElementById('tooltip-portal');
+    if (!portal) {
+      portal = document.createElement('div');
+      portal.setAttribute('id', 'tooltip-portal');
+      document.body.appendChild(portal);
+    }
+    this.portalEl = portal;
+  }
+
+  state = {
+    isOpen: false,
+  };
+
+  componentDidMount() {
+    this.tooltipId = domId('tooltip-');
+  }
+
+  handleOpen = evt => {
+    this.setState({isOpen: true});
+  };
+
+  handleClose = evt => {
+    this.setState({isOpen: false});
+  };
+
+  renderTrigger(children, ref) {
+    const propList = {
+      'aria-describedby': this.tooltipId,
+      onFocus: this.handleOpen,
+      onBlur: this.handleClose,
+      onMouseEnter: this.handleOpen,
+      onMouseLeave: this.handleClose,
+    };
+    // Use the `type` property of the react instance to detect whether we
+    // have a basic element (type=string) or a class/function component (type=function)
+    // Because we can't rely on the child element implementing forwardRefs we wrap
+    // it with a span tag so that popper has ref
+    if (children.type instanceof Function) {
+      return (
+        <Container {...propList} innerRef={ref}>
+          {children}
+        </Container>
+      );
+    }
+    // Basic DOM nodes can be cloned and have more props applied.
+    return React.cloneElement(children, {
+      ...propList,
+      ref,
+    });
+  }
+
+  render() {
+    const {disabled, children, title, position, popperStyle} = this.props;
+    const {isOpen} = this.state;
+    if (disabled) {
+      return children;
+    }
+
+    let tip = null;
+    const modifiers = {
+      hide: {enabled: false},
+      preventOverflow: {
+        padding: 10,
+        enabled: true,
+        boundariesElement: 'viewport',
+      },
+    };
+
+    if (isOpen) {
+      tip = ReactDOM.createPortal(
+        <Popper placement={position} modifiers={modifiers}>
+          {({ref, style, placement, arrowProps}) => (
+            <TooltipContent
+              id={this.tooltipId}
+              aria-hidden={!isOpen}
+              isOpen={isOpen}
+              innerRef={ref}
+              style={style}
+              data-placement={placement}
+              popperStyle={popperStyle}
+            >
+              {title}
+              <TooltipArrow
+                innerRef={arrowProps.ref}
+                data-placement={placement}
+                style={arrowProps.style}
+              />
+            </TooltipContent>
+          )}
+        </Popper>,
+        this.portalEl
+      );
+    }
+
+    return (
+      <Manager>
+        <Reference>{({ref}) => this.renderTrigger(children, ref)}</Reference>
+        {tip}
+      </Manager>
+    );
+  }
+}
+
+// Using an inline-block solves the container being smaller
+// than the elements it is wrapping
+const Container = styled('span')`
+  display: inline-block;
+`;
+
+const TooltipContent = styled('span')`
+  color: #fff;
+  background: #000;
+  opacity: 0.9;
+  padding: 5px 10px;
+  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.15);
+  border-radius: ${p => p.theme.borderRadius};
+  overflow-wrap: break-word;
+  max-width: 200px;
+  z-index: ${p => p.theme.zIndex.tooltip};
+
+  font-weight: bold;
+  font-size: ${p => p.theme.fontSizeSmall};
+  line-height: 1.4;
+
+  margin: 6px;
+  text-align: center;
+  ${props => props.popperStyle};
+`;
+
+const TooltipArrow = styled('span')`
+  position: absolute;
+  width: 10px;
+  height: 5px;
+
+  &[data-placement*='bottom'] {
+    top: 0;
+    left: 0;
+    margin-top: -5px;
+    &::before {
+      border-width: 0 5px 5px 5px;
+      border-color: transparent transparent #000 transparent;
+    }
+  }
+
+  &[data-placement*='top'] {
+    bottom: 0;
+    left: 0;
+    margin-bottom: -5px;
+    &::before {
+      border-width: 5px 5px 0 5px;
+      border-color: #000 transparent transparent transparent;
+    }
+  }
+
+  &[data-placement*='right'] {
+    left: 0;
+    margin-left: -5px;
+    &::before {
+      border-width: 5px 5px 5px 0;
+      border-color: transparent #000 transparent transparent;
+    }
+  }
+
+  &[data-placement*='left'] {
+    right: 0;
+    margin-right: -5px;
+    &::before {
+      border-width: 5px 0 5px 5px;
+      border-color: transparent transparent transparent #000;
+    }
+  }
+
+  &::before {
+    content: '';
+    margin: auto;
+    display: block;
+    width: 0;
+    height: 0;
+    border-style: solid;
+  }
+`;
+
+export default Tooltip2;
diff --git a/src/sentry/static/sentry/app/utils/__mocks__/domId.jsx b/src/sentry/static/sentry/app/utils/__mocks__/domId.jsx
new file mode 100644
index 0000000000..3fe9bd1e11
--- /dev/null
+++ b/src/sentry/static/sentry/app/utils/__mocks__/domId.jsx
@@ -0,0 +1,5 @@
+function domId(prefix) {
+  return prefix + '123456';
+}
+
+export {domId};
diff --git a/src/sentry/static/sentry/app/utils/domId.jsx b/src/sentry/static/sentry/app/utils/domId.jsx
new file mode 100644
index 0000000000..5149560dc7
--- /dev/null
+++ b/src/sentry/static/sentry/app/utils/domId.jsx
@@ -0,0 +1,10 @@
+function domId(prefix) {
+  return (
+    prefix +
+    Math.random()
+      .toString(36)
+      .substr(2, 10)
+  );
+}
+
+export {domId};
diff --git a/src/sentry/static/sentry/app/utils/theme.jsx b/src/sentry/static/sentry/app/utils/theme.jsx
index 4cde907a89..b6d431b0dd 100644
--- a/src/sentry/static/sentry/app/utils/theme.jsx
+++ b/src/sentry/static/sentry/app/utils/theme.jsx
@@ -90,6 +90,8 @@ const theme = {
     sidebar: 1010,
     orgAndUserMenu: 1011,
 
+    tooltip: 1070,
+
     // Sentry user feedback modal
     sentryErrorEmbed: 1090,
 
diff --git a/src/sentry/static/sentry/app/views/groupDetails/shared/seenBy.jsx b/src/sentry/static/sentry/app/views/groupDetails/shared/seenBy.jsx
index 66778d8c9b..90a9a44348 100644
--- a/src/sentry/static/sentry/app/views/groupDetails/shared/seenBy.jsx
+++ b/src/sentry/static/sentry/app/views/groupDetails/shared/seenBy.jsx
@@ -1,6 +1,5 @@
 import React from 'react';
 import moment from 'moment';
-import _ from 'lodash';
 import styled from 'react-emotion';
 
 import SentryTypes from 'app/sentryTypes';
@@ -39,8 +38,13 @@ export default class GroupSeenBy extends React.Component {
           avatarSize={28}
           maxVisibleAvatars={10}
           tooltipOptions={{html: true}}
-          renderTooltip={user => `${_.escape(userDisplayName(user))} <br/>
-            ${moment(user.lastSeen).format('LL')}`}
+          renderTooltip={user => (
+            <React.Fragment>
+              {userDisplayName(user)}
+              <br />
+              {moment(user.lastSeen).format('LL')}
+            </React.Fragment>
+          )}
         />
         <IconWrapper>
           <Tooltip title={t("People who've viewed this issue")}>
diff --git a/tests/js/setup.js b/tests/js/setup.js
index 9831376519..8309c50529 100644
--- a/tests/js/setup.js
+++ b/tests/js/setup.js
@@ -52,6 +52,7 @@ jest.mock('lodash/debounce', () => jest.fn(fn => fn));
 jest.mock('app/utils/recreateRoute');
 jest.mock('app/translations');
 jest.mock('app/api');
+jest.mock('app/utils/domId');
 jest.mock('app/utils/withOrganization');
 jest.mock('scroll-to-element', () => {});
 jest.mock('react-router', () => {
diff --git a/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap b/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
index c31794a5ec..1538ffffb8 100644
--- a/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
+++ b/tests/js/spec/components/avatar/__snapshots__/avatarList.spec.jsx.snap
@@ -6,7 +6,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
   maxVisibleAvatars={5}
   tooltipOptions={
     Object {
-      "placement": "top auto",
+      "position": "top",
     }
   }
   typeMembers="users"
@@ -140,7 +140,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
           size={28}
           tooltipOptions={
             Object {
-              "placement": "top auto",
+              "position": "top",
             }
           }
           user={
@@ -166,7 +166,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
             size={28}
             tooltipOptions={
               Object {
-                "placement": "top auto",
+                "position": "top",
               }
             }
             user={
@@ -193,7 +193,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
               size={28}
               tooltipOptions={
                 Object {
-                  "placement": "top auto",
+                  "position": "top",
                 }
               }
               user={
@@ -225,85 +225,105 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                 tooltip="Foo Bar (foo@example.com)"
                 tooltipOptions={
                   Object {
-                    "placement": "top auto",
+                    "position": "top",
                   }
                 }
                 type="letter_avatar"
                 uploadPath="avatar"
               >
-                <Tooltip
+                <Tooltip2
                   disabled={false}
+                  position="top"
                   title="Foo Bar (foo@example.com)"
-                  tooltipOptions={
-                    Object {
-                      "placement": "top auto",
-                    }
-                  }
                 >
-                  <StyledBaseAvatar
-                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
-                    loaded={true}
-                    round={true}
-                    style={
-                      Object {
-                        "height": "28px",
-                        "width": "28px",
-                      }
-                    }
-                    title="Foo Bar (foo@example.com)"
-                  >
-                    <span
-                      className="tip avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
-                      style={
-                        Object {
-                          "height": "28px",
-                          "width": "28px",
-                        }
-                      }
-                      title="Foo Bar (foo@example.com)"
-                    >
-                      <LetterAvatar
-                        displayName="Foo Bar"
-                        identifier="foo@example.com"
-                        round={true}
+                  <Manager>
+                    <Reference>
+                      <InnerReference
+                        setReferenceNode={[Function]}
                       >
-                        <Svg
-                          round={true}
-                          viewBox="0 0 120 120"
+                        <Container
+                          aria-describedby="tooltip-123456"
+                          innerRef={[Function]}
+                          onBlur={[Function]}
+                          onFocus={[Function]}
+                          onMouseEnter={[Function]}
+                          onMouseLeave={[Function]}
                         >
-                          <svg
-                            className="css-1r4mnb9-Svg e1knxa8x0"
-                            viewBox="0 0 120 120"
+                          <span
+                            aria-describedby="tooltip-123456"
+                            className="css-1m3e0hg-Container e7ebgxc0"
+                            onBlur={[Function]}
+                            onFocus={[Function]}
+                            onMouseEnter={[Function]}
+                            onMouseLeave={[Function]}
                           >
-                            <rect
-                              fill="#315cac"
-                              height="120"
-                              rx="15"
-                              ry="15"
-                              width="120"
-                              x="0"
-                              y="0"
-                            />
-                            <text
-                              fill="#FFFFFF"
-                              fontSize="65"
+                            <StyledBaseAvatar
+                              className="avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                              loaded={true}
+                              round={true}
                               style={
                                 Object {
-                                  "dominantBaseline": "central",
+                                  "height": "28px",
+                                  "width": "28px",
                                 }
                               }
-                              textAnchor="middle"
-                              x="50%"
-                              y="50%"
                             >
-                              FB
-                            </text>
-                          </svg>
-                        </Svg>
-                      </LetterAvatar>
-                    </span>
-                  </StyledBaseAvatar>
-                </Tooltip>
+                              <span
+                                className="avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                                style={
+                                  Object {
+                                    "height": "28px",
+                                    "width": "28px",
+                                  }
+                                }
+                              >
+                                <LetterAvatar
+                                  displayName="Foo Bar"
+                                  identifier="foo@example.com"
+                                  round={true}
+                                >
+                                  <Svg
+                                    round={true}
+                                    viewBox="0 0 120 120"
+                                  >
+                                    <svg
+                                      className="css-1r4mnb9-Svg e1knxa8x0"
+                                      viewBox="0 0 120 120"
+                                    >
+                                      <rect
+                                        fill="#315cac"
+                                        height="120"
+                                        rx="15"
+                                        ry="15"
+                                        width="120"
+                                        x="0"
+                                        y="0"
+                                      />
+                                      <text
+                                        fill="#FFFFFF"
+                                        fontSize="65"
+                                        style={
+                                          Object {
+                                            "dominantBaseline": "central",
+                                          }
+                                        }
+                                        textAnchor="middle"
+                                        x="50%"
+                                        y="50%"
+                                      >
+                                        FB
+                                      </text>
+                                    </svg>
+                                  </Svg>
+                                </LetterAvatar>
+                              </span>
+                            </StyledBaseAvatar>
+                          </span>
+                        </Container>
+                      </InnerReference>
+                    </Reference>
+                  </Manager>
+                </Tooltip2>
               </BaseAvatar>
             </UserAvatar>
           </Avatar>
@@ -314,7 +334,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
           size={28}
           tooltipOptions={
             Object {
-              "placement": "top auto",
+              "position": "top",
             }
           }
           user={
@@ -340,7 +360,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
             size={28}
             tooltipOptions={
               Object {
-                "placement": "top auto",
+                "position": "top",
               }
             }
             user={
@@ -367,7 +387,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
               size={28}
               tooltipOptions={
                 Object {
-                  "placement": "top auto",
+                  "position": "top",
                 }
               }
               user={
@@ -399,85 +419,105 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                 tooltip="Foo Bar (foo@example.com)"
                 tooltipOptions={
                   Object {
-                    "placement": "top auto",
+                    "position": "top",
                   }
                 }
                 type="letter_avatar"
                 uploadPath="avatar"
               >
-                <Tooltip
+                <Tooltip2
                   disabled={false}
+                  position="top"
                   title="Foo Bar (foo@example.com)"
-                  tooltipOptions={
-                    Object {
-                      "placement": "top auto",
-                    }
-                  }
                 >
-                  <StyledBaseAvatar
-                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
-                    loaded={true}
-                    round={true}
-                    style={
-                      Object {
-                        "height": "28px",
-                        "width": "28px",
-                      }
-                    }
-                    title="Foo Bar (foo@example.com)"
-                  >
-                    <span
-                      className="tip avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
-                      style={
-                        Object {
-                          "height": "28px",
-                          "width": "28px",
-                        }
-                      }
-                      title="Foo Bar (foo@example.com)"
-                    >
-                      <LetterAvatar
-                        displayName="Foo Bar"
-                        identifier="foo@example.com"
-                        round={true}
+                  <Manager>
+                    <Reference>
+                      <InnerReference
+                        setReferenceNode={[Function]}
                       >
-                        <Svg
-                          round={true}
-                          viewBox="0 0 120 120"
+                        <Container
+                          aria-describedby="tooltip-123456"
+                          innerRef={[Function]}
+                          onBlur={[Function]}
+                          onFocus={[Function]}
+                          onMouseEnter={[Function]}
+                          onMouseLeave={[Function]}
                         >
-                          <svg
-                            className="css-1r4mnb9-Svg e1knxa8x0"
-                            viewBox="0 0 120 120"
+                          <span
+                            aria-describedby="tooltip-123456"
+                            className="css-1m3e0hg-Container e7ebgxc0"
+                            onBlur={[Function]}
+                            onFocus={[Function]}
+                            onMouseEnter={[Function]}
+                            onMouseLeave={[Function]}
                           >
-                            <rect
-                              fill="#315cac"
-                              height="120"
-                              rx="15"
-                              ry="15"
-                              width="120"
-                              x="0"
-                              y="0"
-                            />
-                            <text
-                              fill="#FFFFFF"
-                              fontSize="65"
+                            <StyledBaseAvatar
+                              className="avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                              loaded={true}
+                              round={true}
                               style={
                                 Object {
-                                  "dominantBaseline": "central",
+                                  "height": "28px",
+                                  "width": "28px",
                                 }
                               }
-                              textAnchor="middle"
-                              x="50%"
-                              y="50%"
                             >
-                              FB
-                            </text>
-                          </svg>
-                        </Svg>
-                      </LetterAvatar>
-                    </span>
-                  </StyledBaseAvatar>
-                </Tooltip>
+                              <span
+                                className="avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                                style={
+                                  Object {
+                                    "height": "28px",
+                                    "width": "28px",
+                                  }
+                                }
+                              >
+                                <LetterAvatar
+                                  displayName="Foo Bar"
+                                  identifier="foo@example.com"
+                                  round={true}
+                                >
+                                  <Svg
+                                    round={true}
+                                    viewBox="0 0 120 120"
+                                  >
+                                    <svg
+                                      className="css-1r4mnb9-Svg e1knxa8x0"
+                                      viewBox="0 0 120 120"
+                                    >
+                                      <rect
+                                        fill="#315cac"
+                                        height="120"
+                                        rx="15"
+                                        ry="15"
+                                        width="120"
+                                        x="0"
+                                        y="0"
+                                      />
+                                      <text
+                                        fill="#FFFFFF"
+                                        fontSize="65"
+                                        style={
+                                          Object {
+                                            "dominantBaseline": "central",
+                                          }
+                                        }
+                                        textAnchor="middle"
+                                        x="50%"
+                                        y="50%"
+                                      >
+                                        FB
+                                      </text>
+                                    </svg>
+                                  </Svg>
+                                </LetterAvatar>
+                              </span>
+                            </StyledBaseAvatar>
+                          </span>
+                        </Container>
+                      </InnerReference>
+                    </Reference>
+                  </Manager>
+                </Tooltip2>
               </BaseAvatar>
             </UserAvatar>
           </Avatar>
@@ -488,7 +528,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
           size={28}
           tooltipOptions={
             Object {
-              "placement": "top auto",
+              "position": "top",
             }
           }
           user={
@@ -514,7 +554,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
             size={28}
             tooltipOptions={
               Object {
-                "placement": "top auto",
+                "position": "top",
               }
             }
             user={
@@ -541,7 +581,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
               size={28}
               tooltipOptions={
                 Object {
-                  "placement": "top auto",
+                  "position": "top",
                 }
               }
               user={
@@ -573,85 +613,105 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                 tooltip="Foo Bar (foo@example.com)"
                 tooltipOptions={
                   Object {
-                    "placement": "top auto",
+                    "position": "top",
                   }
                 }
                 type="letter_avatar"
                 uploadPath="avatar"
               >
-                <Tooltip
+                <Tooltip2
                   disabled={false}
+                  position="top"
                   title="Foo Bar (foo@example.com)"
-                  tooltipOptions={
-                    Object {
-                      "placement": "top auto",
-                    }
-                  }
                 >
-                  <StyledBaseAvatar
-                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
-                    loaded={true}
-                    round={true}
-                    style={
-                      Object {
-                        "height": "28px",
-                        "width": "28px",
-                      }
-                    }
-                    title="Foo Bar (foo@example.com)"
-                  >
-                    <span
-                      className="tip avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
-                      style={
-                        Object {
-                          "height": "28px",
-                          "width": "28px",
-                        }
-                      }
-                      title="Foo Bar (foo@example.com)"
-                    >
-                      <LetterAvatar
-                        displayName="Foo Bar"
-                        identifier="foo@example.com"
-                        round={true}
+                  <Manager>
+                    <Reference>
+                      <InnerReference
+                        setReferenceNode={[Function]}
                       >
-                        <Svg
-                          round={true}
-                          viewBox="0 0 120 120"
+                        <Container
+                          aria-describedby="tooltip-123456"
+                          innerRef={[Function]}
+                          onBlur={[Function]}
+                          onFocus={[Function]}
+                          onMouseEnter={[Function]}
+                          onMouseLeave={[Function]}
                         >
-                          <svg
-                            className="css-1r4mnb9-Svg e1knxa8x0"
-                            viewBox="0 0 120 120"
+                          <span
+                            aria-describedby="tooltip-123456"
+                            className="css-1m3e0hg-Container e7ebgxc0"
+                            onBlur={[Function]}
+                            onFocus={[Function]}
+                            onMouseEnter={[Function]}
+                            onMouseLeave={[Function]}
                           >
-                            <rect
-                              fill="#315cac"
-                              height="120"
-                              rx="15"
-                              ry="15"
-                              width="120"
-                              x="0"
-                              y="0"
-                            />
-                            <text
-                              fill="#FFFFFF"
-                              fontSize="65"
+                            <StyledBaseAvatar
+                              className="avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                              loaded={true}
+                              round={true}
                               style={
                                 Object {
-                                  "dominantBaseline": "central",
+                                  "height": "28px",
+                                  "width": "28px",
                                 }
                               }
-                              textAnchor="middle"
-                              x="50%"
-                              y="50%"
                             >
-                              FB
-                            </text>
-                          </svg>
-                        </Svg>
-                      </LetterAvatar>
-                    </span>
-                  </StyledBaseAvatar>
-                </Tooltip>
+                              <span
+                                className="avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                                style={
+                                  Object {
+                                    "height": "28px",
+                                    "width": "28px",
+                                  }
+                                }
+                              >
+                                <LetterAvatar
+                                  displayName="Foo Bar"
+                                  identifier="foo@example.com"
+                                  round={true}
+                                >
+                                  <Svg
+                                    round={true}
+                                    viewBox="0 0 120 120"
+                                  >
+                                    <svg
+                                      className="css-1r4mnb9-Svg e1knxa8x0"
+                                      viewBox="0 0 120 120"
+                                    >
+                                      <rect
+                                        fill="#315cac"
+                                        height="120"
+                                        rx="15"
+                                        ry="15"
+                                        width="120"
+                                        x="0"
+                                        y="0"
+                                      />
+                                      <text
+                                        fill="#FFFFFF"
+                                        fontSize="65"
+                                        style={
+                                          Object {
+                                            "dominantBaseline": "central",
+                                          }
+                                        }
+                                        textAnchor="middle"
+                                        x="50%"
+                                        y="50%"
+                                      >
+                                        FB
+                                      </text>
+                                    </svg>
+                                  </Svg>
+                                </LetterAvatar>
+                              </span>
+                            </StyledBaseAvatar>
+                          </span>
+                        </Container>
+                      </InnerReference>
+                    </Reference>
+                  </Manager>
+                </Tooltip2>
               </BaseAvatar>
             </UserAvatar>
           </Avatar>
@@ -662,7 +722,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
           size={28}
           tooltipOptions={
             Object {
-              "placement": "top auto",
+              "position": "top",
             }
           }
           user={
@@ -688,7 +748,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
             size={28}
             tooltipOptions={
               Object {
-                "placement": "top auto",
+                "position": "top",
               }
             }
             user={
@@ -715,7 +775,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
               size={28}
               tooltipOptions={
                 Object {
-                  "placement": "top auto",
+                  "position": "top",
                 }
               }
               user={
@@ -747,85 +807,105 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                 tooltip="Foo Bar (foo@example.com)"
                 tooltipOptions={
                   Object {
-                    "placement": "top auto",
+                    "position": "top",
                   }
                 }
                 type="letter_avatar"
                 uploadPath="avatar"
               >
-                <Tooltip
+                <Tooltip2
                   disabled={false}
+                  position="top"
                   title="Foo Bar (foo@example.com)"
-                  tooltipOptions={
-                    Object {
-                      "placement": "top auto",
-                    }
-                  }
                 >
-                  <StyledBaseAvatar
-                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
-                    loaded={true}
-                    round={true}
-                    style={
-                      Object {
-                        "height": "28px",
-                        "width": "28px",
-                      }
-                    }
-                    title="Foo Bar (foo@example.com)"
-                  >
-                    <span
-                      className="tip avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
-                      style={
-                        Object {
-                          "height": "28px",
-                          "width": "28px",
-                        }
-                      }
-                      title="Foo Bar (foo@example.com)"
-                    >
-                      <LetterAvatar
-                        displayName="Foo Bar"
-                        identifier="foo@example.com"
-                        round={true}
+                  <Manager>
+                    <Reference>
+                      <InnerReference
+                        setReferenceNode={[Function]}
                       >
-                        <Svg
-                          round={true}
-                          viewBox="0 0 120 120"
+                        <Container
+                          aria-describedby="tooltip-123456"
+                          innerRef={[Function]}
+                          onBlur={[Function]}
+                          onFocus={[Function]}
+                          onMouseEnter={[Function]}
+                          onMouseLeave={[Function]}
                         >
-                          <svg
-                            className="css-1r4mnb9-Svg e1knxa8x0"
-                            viewBox="0 0 120 120"
+                          <span
+                            aria-describedby="tooltip-123456"
+                            className="css-1m3e0hg-Container e7ebgxc0"
+                            onBlur={[Function]}
+                            onFocus={[Function]}
+                            onMouseEnter={[Function]}
+                            onMouseLeave={[Function]}
                           >
-                            <rect
-                              fill="#315cac"
-                              height="120"
-                              rx="15"
-                              ry="15"
-                              width="120"
-                              x="0"
-                              y="0"
-                            />
-                            <text
-                              fill="#FFFFFF"
-                              fontSize="65"
+                            <StyledBaseAvatar
+                              className="avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                              loaded={true}
+                              round={true}
                               style={
                                 Object {
-                                  "dominantBaseline": "central",
+                                  "height": "28px",
+                                  "width": "28px",
                                 }
                               }
-                              textAnchor="middle"
-                              x="50%"
-                              y="50%"
                             >
-                              FB
-                            </text>
-                          </svg>
-                        </Svg>
-                      </LetterAvatar>
-                    </span>
-                  </StyledBaseAvatar>
-                </Tooltip>
+                              <span
+                                className="avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                                style={
+                                  Object {
+                                    "height": "28px",
+                                    "width": "28px",
+                                  }
+                                }
+                              >
+                                <LetterAvatar
+                                  displayName="Foo Bar"
+                                  identifier="foo@example.com"
+                                  round={true}
+                                >
+                                  <Svg
+                                    round={true}
+                                    viewBox="0 0 120 120"
+                                  >
+                                    <svg
+                                      className="css-1r4mnb9-Svg e1knxa8x0"
+                                      viewBox="0 0 120 120"
+                                    >
+                                      <rect
+                                        fill="#315cac"
+                                        height="120"
+                                        rx="15"
+                                        ry="15"
+                                        width="120"
+                                        x="0"
+                                        y="0"
+                                      />
+                                      <text
+                                        fill="#FFFFFF"
+                                        fontSize="65"
+                                        style={
+                                          Object {
+                                            "dominantBaseline": "central",
+                                          }
+                                        }
+                                        textAnchor="middle"
+                                        x="50%"
+                                        y="50%"
+                                      >
+                                        FB
+                                      </text>
+                                    </svg>
+                                  </Svg>
+                                </LetterAvatar>
+                              </span>
+                            </StyledBaseAvatar>
+                          </span>
+                        </Container>
+                      </InnerReference>
+                    </Reference>
+                  </Manager>
+                </Tooltip2>
               </BaseAvatar>
             </UserAvatar>
           </Avatar>
@@ -836,7 +916,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
           size={28}
           tooltipOptions={
             Object {
-              "placement": "top auto",
+              "position": "top",
             }
           }
           user={
@@ -862,7 +942,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
             size={28}
             tooltipOptions={
               Object {
-                "placement": "top auto",
+                "position": "top",
               }
             }
             user={
@@ -889,7 +969,7 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
               size={28}
               tooltipOptions={
                 Object {
-                  "placement": "top auto",
+                  "position": "top",
                 }
               }
               user={
@@ -921,85 +1001,105 @@ exports[`AvatarList renders with collapsed avatar count if > 5 users 1`] = `
                 tooltip="Foo Bar (foo@example.com)"
                 tooltipOptions={
                   Object {
-                    "placement": "top auto",
+                    "position": "top",
                   }
                 }
                 type="letter_avatar"
                 uploadPath="avatar"
               >
-                <Tooltip
+                <Tooltip2
                   disabled={false}
+                  position="top"
                   title="Foo Bar (foo@example.com)"
-                  tooltipOptions={
-                    Object {
-                      "placement": "top auto",
-                    }
-                  }
                 >
-                  <StyledBaseAvatar
-                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
-                    loaded={true}
-                    round={true}
-                    style={
-                      Object {
-                        "height": "28px",
-                        "width": "28px",
-                      }
-                    }
-                    title="Foo Bar (foo@example.com)"
-                  >
-                    <span
-                      className="tip avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
-                      style={
-                        Object {
-                          "height": "28px",
-                          "width": "28px",
-                        }
-                      }
-                      title="Foo Bar (foo@example.com)"
-                    >
-                      <LetterAvatar
-                        displayName="Foo Bar"
-                        identifier="foo@example.com"
-                        round={true}
+                  <Manager>
+                    <Reference>
+                      <InnerReference
+                        setReferenceNode={[Function]}
                       >
-                        <Svg
-                          round={true}
-                          viewBox="0 0 120 120"
+                        <Container
+                          aria-describedby="tooltip-123456"
+                          innerRef={[Function]}
+                          onBlur={[Function]}
+                          onFocus={[Function]}
+                          onMouseEnter={[Function]}
+                          onMouseLeave={[Function]}
                         >
-                          <svg
-                            className="css-1r4mnb9-Svg e1knxa8x0"
-                            viewBox="0 0 120 120"
+                          <span
+                            aria-describedby="tooltip-123456"
+                            className="css-1m3e0hg-Container e7ebgxc0"
+                            onBlur={[Function]}
+                            onFocus={[Function]}
+                            onMouseEnter={[Function]}
+                            onMouseLeave={[Function]}
                           >
-                            <rect
-                              fill="#315cac"
-                              height="120"
-                              rx="15"
-                              ry="15"
-                              width="120"
-                              x="0"
-                              y="0"
-                            />
-                            <text
-                              fill="#FFFFFF"
-                              fontSize="65"
+                            <StyledBaseAvatar
+                              className="avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                              loaded={true}
+                              round={true}
                               style={
                                 Object {
-                                  "dominantBaseline": "central",
+                                  "height": "28px",
+                                  "width": "28px",
                                 }
                               }
-                              textAnchor="middle"
-                              x="50%"
-                              y="50%"
                             >
-                              FB
-                            </text>
-                          </svg>
-                        </Svg>
-                      </LetterAvatar>
-                    </span>
-                  </StyledBaseAvatar>
-                </Tooltip>
+                              <span
+                                className="avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                                style={
+                                  Object {
+                                    "height": "28px",
+                                    "width": "28px",
+                                  }
+                                }
+                              >
+                                <LetterAvatar
+                                  displayName="Foo Bar"
+                                  identifier="foo@example.com"
+                                  round={true}
+                                >
+                                  <Svg
+                                    round={true}
+                                    viewBox="0 0 120 120"
+                                  >
+                                    <svg
+                                      className="css-1r4mnb9-Svg e1knxa8x0"
+                                      viewBox="0 0 120 120"
+                                    >
+                                      <rect
+                                        fill="#315cac"
+                                        height="120"
+                                        rx="15"
+                                        ry="15"
+                                        width="120"
+                                        x="0"
+                                        y="0"
+                                      />
+                                      <text
+                                        fill="#FFFFFF"
+                                        fontSize="65"
+                                        style={
+                                          Object {
+                                            "dominantBaseline": "central",
+                                          }
+                                        }
+                                        textAnchor="middle"
+                                        x="50%"
+                                        y="50%"
+                                      >
+                                        FB
+                                      </text>
+                                    </svg>
+                                  </Svg>
+                                </LetterAvatar>
+                              </span>
+                            </StyledBaseAvatar>
+                          </span>
+                        </Container>
+                      </InnerReference>
+                    </Reference>
+                  </Manager>
+                </Tooltip2>
               </BaseAvatar>
             </UserAvatar>
           </Avatar>
@@ -1016,7 +1116,7 @@ exports[`AvatarList renders with user avatars 1`] = `
   maxVisibleAvatars={5}
   tooltipOptions={
     Object {
-      "placement": "top auto",
+      "position": "top",
     }
   }
   typeMembers="users"
@@ -1070,7 +1170,7 @@ exports[`AvatarList renders with user avatars 1`] = `
           size={28}
           tooltipOptions={
             Object {
-              "placement": "top auto",
+              "position": "top",
             }
           }
           user={
@@ -1096,7 +1196,7 @@ exports[`AvatarList renders with user avatars 1`] = `
             size={28}
             tooltipOptions={
               Object {
-                "placement": "top auto",
+                "position": "top",
               }
             }
             user={
@@ -1123,7 +1223,7 @@ exports[`AvatarList renders with user avatars 1`] = `
               size={28}
               tooltipOptions={
                 Object {
-                  "placement": "top auto",
+                  "position": "top",
                 }
               }
               user={
@@ -1155,85 +1255,105 @@ exports[`AvatarList renders with user avatars 1`] = `
                 tooltip="Foo Bar (foo@example.com)"
                 tooltipOptions={
                   Object {
-                    "placement": "top auto",
+                    "position": "top",
                   }
                 }
                 type="letter_avatar"
                 uploadPath="avatar"
               >
-                <Tooltip
+                <Tooltip2
                   disabled={false}
+                  position="top"
                   title="Foo Bar (foo@example.com)"
-                  tooltipOptions={
-                    Object {
-                      "placement": "top auto",
-                    }
-                  }
                 >
-                  <StyledBaseAvatar
-                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
-                    loaded={true}
-                    round={true}
-                    style={
-                      Object {
-                        "height": "28px",
-                        "width": "28px",
-                      }
-                    }
-                    title="Foo Bar (foo@example.com)"
-                  >
-                    <span
-                      className="tip avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
-                      style={
-                        Object {
-                          "height": "28px",
-                          "width": "28px",
-                        }
-                      }
-                      title="Foo Bar (foo@example.com)"
-                    >
-                      <LetterAvatar
-                        displayName="Foo Bar"
-                        identifier="foo@example.com"
-                        round={true}
+                  <Manager>
+                    <Reference>
+                      <InnerReference
+                        setReferenceNode={[Function]}
                       >
-                        <Svg
-                          round={true}
-                          viewBox="0 0 120 120"
+                        <Container
+                          aria-describedby="tooltip-123456"
+                          innerRef={[Function]}
+                          onBlur={[Function]}
+                          onFocus={[Function]}
+                          onMouseEnter={[Function]}
+                          onMouseLeave={[Function]}
                         >
-                          <svg
-                            className="css-1r4mnb9-Svg e1knxa8x0"
-                            viewBox="0 0 120 120"
+                          <span
+                            aria-describedby="tooltip-123456"
+                            className="css-1m3e0hg-Container e7ebgxc0"
+                            onBlur={[Function]}
+                            onFocus={[Function]}
+                            onMouseEnter={[Function]}
+                            onMouseLeave={[Function]}
                           >
-                            <rect
-                              fill="#315cac"
-                              height="120"
-                              rx="15"
-                              ry="15"
-                              width="120"
-                              x="0"
-                              y="0"
-                            />
-                            <text
-                              fill="#FFFFFF"
-                              fontSize="65"
+                            <StyledBaseAvatar
+                              className="avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                              loaded={true}
+                              round={true}
                               style={
                                 Object {
-                                  "dominantBaseline": "central",
+                                  "height": "28px",
+                                  "width": "28px",
                                 }
                               }
-                              textAnchor="middle"
-                              x="50%"
-                              y="50%"
                             >
-                              FB
-                            </text>
-                          </svg>
-                        </Svg>
-                      </LetterAvatar>
-                    </span>
-                  </StyledBaseAvatar>
-                </Tooltip>
+                              <span
+                                className="avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                                style={
+                                  Object {
+                                    "height": "28px",
+                                    "width": "28px",
+                                  }
+                                }
+                              >
+                                <LetterAvatar
+                                  displayName="Foo Bar"
+                                  identifier="foo@example.com"
+                                  round={true}
+                                >
+                                  <Svg
+                                    round={true}
+                                    viewBox="0 0 120 120"
+                                  >
+                                    <svg
+                                      className="css-1r4mnb9-Svg e1knxa8x0"
+                                      viewBox="0 0 120 120"
+                                    >
+                                      <rect
+                                        fill="#315cac"
+                                        height="120"
+                                        rx="15"
+                                        ry="15"
+                                        width="120"
+                                        x="0"
+                                        y="0"
+                                      />
+                                      <text
+                                        fill="#FFFFFF"
+                                        fontSize="65"
+                                        style={
+                                          Object {
+                                            "dominantBaseline": "central",
+                                          }
+                                        }
+                                        textAnchor="middle"
+                                        x="50%"
+                                        y="50%"
+                                      >
+                                        FB
+                                      </text>
+                                    </svg>
+                                  </Svg>
+                                </LetterAvatar>
+                              </span>
+                            </StyledBaseAvatar>
+                          </span>
+                        </Container>
+                      </InnerReference>
+                    </Reference>
+                  </Manager>
+                </Tooltip2>
               </BaseAvatar>
             </UserAvatar>
           </Avatar>
@@ -1244,7 +1364,7 @@ exports[`AvatarList renders with user avatars 1`] = `
           size={28}
           tooltipOptions={
             Object {
-              "placement": "top auto",
+              "position": "top",
             }
           }
           user={
@@ -1270,7 +1390,7 @@ exports[`AvatarList renders with user avatars 1`] = `
             size={28}
             tooltipOptions={
               Object {
-                "placement": "top auto",
+                "position": "top",
               }
             }
             user={
@@ -1297,7 +1417,7 @@ exports[`AvatarList renders with user avatars 1`] = `
               size={28}
               tooltipOptions={
                 Object {
-                  "placement": "top auto",
+                  "position": "top",
                 }
               }
               user={
@@ -1329,85 +1449,105 @@ exports[`AvatarList renders with user avatars 1`] = `
                 tooltip="Foo Bar (foo@example.com)"
                 tooltipOptions={
                   Object {
-                    "placement": "top auto",
+                    "position": "top",
                   }
                 }
                 type="letter_avatar"
                 uploadPath="avatar"
               >
-                <Tooltip
+                <Tooltip2
                   disabled={false}
+                  position="top"
                   title="Foo Bar (foo@example.com)"
-                  tooltipOptions={
-                    Object {
-                      "placement": "top auto",
-                    }
-                  }
                 >
-                  <StyledBaseAvatar
-                    className="tip avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
-                    loaded={true}
-                    round={true}
-                    style={
-                      Object {
-                        "height": "28px",
-                        "width": "28px",
-                      }
-                    }
-                    title="Foo Bar (foo@example.com)"
-                  >
-                    <span
-                      className="tip avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
-                      style={
-                        Object {
-                          "height": "28px",
-                          "width": "28px",
-                        }
-                      }
-                      title="Foo Bar (foo@example.com)"
-                    >
-                      <LetterAvatar
-                        displayName="Foo Bar"
-                        identifier="foo@example.com"
-                        round={true}
+                  <Manager>
+                    <Reference>
+                      <InnerReference
+                        setReferenceNode={[Function]}
                       >
-                        <Svg
-                          round={true}
-                          viewBox="0 0 120 120"
+                        <Container
+                          aria-describedby="tooltip-123456"
+                          innerRef={[Function]}
+                          onBlur={[Function]}
+                          onFocus={[Function]}
+                          onMouseEnter={[Function]}
+                          onMouseLeave={[Function]}
                         >
-                          <svg
-                            className="css-1r4mnb9-Svg e1knxa8x0"
-                            viewBox="0 0 120 120"
+                          <span
+                            aria-describedby="tooltip-123456"
+                            className="css-1m3e0hg-Container e7ebgxc0"
+                            onBlur={[Function]}
+                            onFocus={[Function]}
+                            onMouseEnter={[Function]}
+                            onMouseLeave={[Function]}
                           >
-                            <rect
-                              fill="#315cac"
-                              height="120"
-                              rx="15"
-                              ry="15"
-                              width="120"
-                              x="0"
-                              y="0"
-                            />
-                            <text
-                              fill="#FFFFFF"
-                              fontSize="65"
+                            <StyledBaseAvatar
+                              className="avatar css-ptswrs-StyledAvatar-Circle e1axh4r50"
+                              loaded={true}
+                              round={true}
                               style={
                                 Object {
-                                  "dominantBaseline": "central",
+                                  "height": "28px",
+                                  "width": "28px",
                                 }
                               }
-                              textAnchor="middle"
-                              x="50%"
-                              y="50%"
                             >
-                              FB
-                            </text>
-                          </svg>
-                        </Svg>
-                      </LetterAvatar>
-                    </span>
-                  </StyledBaseAvatar>
-                </Tooltip>
+                              <span
+                                className="avatar e1axh4r50 css-p25dkn-StyledBaseAvatar-StyledAvatar-Circle e1z0ohzl0"
+                                style={
+                                  Object {
+                                    "height": "28px",
+                                    "width": "28px",
+                                  }
+                                }
+                              >
+                                <LetterAvatar
+                                  displayName="Foo Bar"
+                                  identifier="foo@example.com"
+                                  round={true}
+                                >
+                                  <Svg
+                                    round={true}
+                                    viewBox="0 0 120 120"
+                                  >
+                                    <svg
+                                      className="css-1r4mnb9-Svg e1knxa8x0"
+                                      viewBox="0 0 120 120"
+                                    >
+                                      <rect
+                                        fill="#315cac"
+                                        height="120"
+                                        rx="15"
+                                        ry="15"
+                                        width="120"
+                                        x="0"
+                                        y="0"
+                                      />
+                                      <text
+                                        fill="#FFFFFF"
+                                        fontSize="65"
+                                        style={
+                                          Object {
+                                            "dominantBaseline": "central",
+                                          }
+                                        }
+                                        textAnchor="middle"
+                                        x="50%"
+                                        y="50%"
+                                      >
+                                        FB
+                                      </text>
+                                    </svg>
+                                  </Svg>
+                                </LetterAvatar>
+                              </span>
+                            </StyledBaseAvatar>
+                          </span>
+                        </Container>
+                      </InnerReference>
+                    </Reference>
+                  </Manager>
+                </Tooltip2>
               </BaseAvatar>
             </UserAvatar>
           </Avatar>
diff --git a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
index d1f49e0e25..d89d7a56f4 100644
--- a/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
+++ b/tests/js/spec/components/sidebar/__snapshots__/index.spec.jsx.snap
@@ -285,8 +285,9 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                 type="letter_avatar"
                 uploadPath="organization-avatar"
               >
-                <Tooltip
+                <Tooltip2
                   disabled={true}
+                  position="top"
                   title="org-slug"
                 >
                   <StyledBaseAvatar
@@ -347,7 +348,7 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                       </LetterAvatar>
                     </span>
                   </StyledBaseAvatar>
-                </Tooltip>
+                </Tooltip2>
               </BaseAvatar>
             </OrganizationAvatar>
           </Avatar>
@@ -753,8 +754,9 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                                     type="letter_avatar"
                                     uploadPath="avatar"
                                   >
-                                    <Tooltip
+                                    <Tooltip2
                                       disabled={true}
+                                      position="top"
                                       title="Foo Bar (foo@example.com)"
                                     >
                                       <StyledBaseAvatar
@@ -818,7 +820,7 @@ exports[`Sidebar SidebarDropdown can open Sidebar org/name dropdown menu 1`] = `
                                           </LetterAvatar>
                                         </span>
                                       </StyledBaseAvatar>
-                                    </Tooltip>
+                                    </Tooltip2>
                                   </BaseAvatar>
                                 </UserAvatar>
                               </Avatar>
@@ -1954,8 +1956,9 @@ exports[`Sidebar renders without org and router 1`] = `
                                     type="letter_avatar"
                                     uploadPath="avatar"
                                   >
-                                    <Tooltip
+                                    <Tooltip2
                                       disabled={true}
+                                      position="top"
                                       title="Foo Bar (foo@example.com)"
                                     >
                                       <StyledBaseAvatar
@@ -2019,7 +2022,7 @@ exports[`Sidebar renders without org and router 1`] = `
                                           </LetterAvatar>
                                         </span>
                                       </StyledBaseAvatar>
-                                    </Tooltip>
+                                    </Tooltip2>
                                   </BaseAvatar>
                                 </UserAvatar>
                               </Avatar>
diff --git a/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap b/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
index 6c8d9f5771..92e3f64d06 100644
--- a/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/ruleBuilder.spec.jsx.snap
@@ -2627,74 +2627,99 @@ exports[`RuleBuilder renders with suggestions 1`] = `
                                               type="letter_avatar"
                                               uploadPath="avatar"
                                             >
-                                              <Tooltip
+                                              <Tooltip2
                                                 disabled={false}
+                                                position="top"
                                                 title="Jane Doe (janedoe@example.com)"
                                               >
-                                                <StyledBaseAvatar
-                                                  className="tip avatar"
-                                                  loaded={true}
-                                                  round={true}
-                                                  style={
-                                                    Object {
-                                                      "height": "28px",
-                                                      "width": "28px",
-                                                    }
-                                                  }
-                                                  title="Jane Doe (janedoe@example.com)"
-                                                >
-                                                  <span
-                                                    className="tip avatar css-3f9bmx-StyledBaseAvatar e1z0ohzl0"
-                                                    style={
-                                                      Object {
-                                                        "height": "28px",
-                                                        "width": "28px",
-                                                      }
-                                                    }
-                                                    title="Jane Doe (janedoe@example.com)"
-                                                  >
-                                                    <LetterAvatar
-                                                      displayName="Jane Doe"
-                                                      identifier="janedoe@example.com"
-                                                      round={true}
+                                                <Manager>
+                                                  <Reference>
+                                                    <InnerReference
+                                                      setReferenceNode={[Function]}
                                                     >
-                                                      <Svg
-                                                        round={true}
-                                                        viewBox="0 0 120 120"
+                                                      <Container
+                                                        aria-describedby="tooltip-123456"
+                                                        innerRef={[Function]}
+                                                        onBlur={[Function]}
+                                                        onFocus={[Function]}
+                                                        onMouseEnter={[Function]}
+                                                        onMouseLeave={[Function]}
                                                       >
-                                                        <svg
-                                                          className="css-1r4mnb9-Svg e1knxa8x0"
-                                                          viewBox="0 0 120 120"
+                                                        <span
+                                                          aria-describedby="tooltip-123456"
+                                                          className="css-1m3e0hg-Container e7ebgxc0"
+                                                          onBlur={[Function]}
+                                                          onFocus={[Function]}
+                                                          onMouseEnter={[Function]}
+                                                          onMouseLeave={[Function]}
                                                         >
-                                                          <rect
-                                                            fill="#f868bc"
-                                                            height="120"
-                                                            rx="15"
-                                                            ry="15"
-                                                            width="120"
-                                                            x="0"
-                                                            y="0"
-                                                          />
-                                                          <text
-                                                            fill="#FFFFFF"
-                                                            fontSize="65"
+                                                          <StyledBaseAvatar
+                                                            className="avatar"
+                                                            loaded={true}
+                                                            round={true}
                                                             style={
                                                               Object {
-                                                                "dominantBaseline": "central",
+                                                                "height": "28px",
+                                                                "width": "28px",
                                                               }
                                                             }
-                                                            textAnchor="middle"
-                                                            x="50%"
-                                                            y="50%"
                                                           >
-                                                            JD
-                                                          </text>
-                                                        </svg>
-                                                      </Svg>
-                                                    </LetterAvatar>
-                                                  </span>
-                                                </StyledBaseAvatar>
-                                              </Tooltip>
+                                                            <span
+                                                              className="avatar css-3f9bmx-StyledBaseAvatar e1z0ohzl0"
+                                                              style={
+                                                                Object {
+                                                                  "height": "28px",
+                                                                  "width": "28px",
+                                                                }
+                                                              }
+                                                            >
+                                                              <LetterAvatar
+                                                                displayName="Jane Doe"
+                                                                identifier="janedoe@example.com"
+                                                                round={true}
+                                                              >
+                                                                <Svg
+                                                                  round={true}
+                                                                  viewBox="0 0 120 120"
+                                                                >
+                                                                  <svg
+                                                                    className="css-1r4mnb9-Svg e1knxa8x0"
+                                                                    viewBox="0 0 120 120"
+                                                                  >
+                                                                    <rect
+                                                                      fill="#f868bc"
+                                                                      height="120"
+                                                                      rx="15"
+                                                                      ry="15"
+                                                                      width="120"
+                                                                      x="0"
+                                                                      y="0"
+                                                                    />
+                                                                    <text
+                                                                      fill="#FFFFFF"
+                                                                      fontSize="65"
+                                                                      style={
+                                                                        Object {
+                                                                          "dominantBaseline": "central",
+                                                                        }
+                                                                      }
+                                                                      textAnchor="middle"
+                                                                      x="50%"
+                                                                      y="50%"
+                                                                    >
+                                                                      JD
+                                                                    </text>
+                                                                  </svg>
+                                                                </Svg>
+                                                              </LetterAvatar>
+                                                            </span>
+                                                          </StyledBaseAvatar>
+                                                        </span>
+                                                      </Container>
+                                                    </InnerReference>
+                                                  </Reference>
+                                                </Manager>
+                                              </Tooltip2>
                                             </BaseAvatar>
                                           </UserAvatar>
                                         </Avatar>
diff --git a/tests/js/spec/views/releases/detail/__snapshots__/releaseCommits.spec.jsx.snap b/tests/js/spec/views/releases/detail/__snapshots__/releaseCommits.spec.jsx.snap
index 9e9917d8cf..38da4571af 100644
--- a/tests/js/spec/views/releases/detail/__snapshots__/releaseCommits.spec.jsx.snap
+++ b/tests/js/spec/views/releases/detail/__snapshots__/releaseCommits.spec.jsx.snap
@@ -218,8 +218,9 @@ Users now have access to useful links from the blogs and docs on Spike-protectio
                                     uploadId={null}
                                     uploadPath="avatar"
                                   >
-                                    <Tooltip
+                                    <Tooltip2
                                       disabled={true}
+                                      position="top"
                                       title="Foo Bar (example@sentry.io)"
                                     >
                                       <StyledBaseAvatar
@@ -283,7 +284,7 @@ Users now have access to useful links from the blogs and docs on Spike-protectio
                                           </LetterAvatar>
                                         </span>
                                       </StyledBaseAvatar>
-                                    </Tooltip>
+                                    </Tooltip2>
                                   </BaseAvatar>
                                 </UserAvatar>
                               </Avatar>
@@ -626,8 +627,9 @@ Users now have access to useful links from the blogs and docs on Spike-protectio
                                     uploadId={null}
                                     uploadPath="avatar"
                                   >
-                                    <Tooltip
+                                    <Tooltip2
                                       disabled={true}
+                                      position="top"
                                       title="Foo Bar (example@sentry.io)"
                                     >
                                       <StyledBaseAvatar
@@ -691,7 +693,7 @@ Users now have access to useful links from the blogs and docs on Spike-protectio
                                           </LetterAvatar>
                                         </span>
                                       </StyledBaseAvatar>
-                                    </Tooltip>
+                                    </Tooltip2>
                                   </BaseAvatar>
                                 </UserAvatar>
                               </Avatar>
diff --git a/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/sentryAppInstallations.spec.jsx.snap b/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/sentryAppInstallations.spec.jsx.snap
index 8e62b7590c..9a87396c8a 100644
--- a/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/sentryAppInstallations.spec.jsx.snap
+++ b/tests/js/spec/views/settings/organizationIntegrations/__snapshots__/sentryAppInstallations.spec.jsx.snap
@@ -464,6 +464,7 @@ exports[`Sentry App Installations when Apps exist displays all Apps owned by the
                                         "sentryErrorEmbed": 1090,
                                         "sidebar": 1010,
                                         "toast": 10001,
+                                        "tooltip": 1070,
                                       },
                                     }
                                   }
@@ -735,6 +736,7 @@ exports[`Sentry App Installations when Apps exist displays all Apps owned by the
                                                 "sentryErrorEmbed": 1090,
                                                 "sidebar": 1010,
                                                 "toast": 10001,
+                                                "tooltip": 1070,
                                               },
                                             }
                                           }
diff --git a/yarn.lock b/yarn.lock
index 4bc78f90ca..c88673a122 100644
--- a/yarn.lock
+++ b/yarn.lock
@@ -4029,6 +4029,14 @@ create-react-class@^15.5.1, create-react-class@^15.6.2:
     loose-envify "^1.3.1"
     object-assign "^4.1.1"
 
+create-react-context@<=0.2.2:
+  version "0.2.2"
+  resolved "https://registry.yarnpkg.com/create-react-context/-/create-react-context-0.2.2.tgz#9836542f9aaa22868cd7d4a6f82667df38019dca"
+  integrity sha512-KkpaLARMhsTsgp0d2NA/R94F/eDLbhXERdIq3LvX2biCAXcDvHYoOqHfWCHf1+OLj+HKBotLG3KqaOOf+C1C+A==
+  dependencies:
+    fbjs "^0.8.0"
+    gud "^1.0.0"
+
 cross-spawn@6.0.5, cross-spawn@^6.0.0, cross-spawn@^6.0.5:
   version "6.0.5"
   resolved "https://registry.yarnpkg.com/cross-spawn/-/cross-spawn-6.0.5.tgz#4a5ec7c64dfae22c3a14124dbacdee846d80cbc4"
@@ -5649,7 +5657,7 @@ fb-watchman@^2.0.0:
   dependencies:
     bser "^2.0.0"
 
-fbjs@^0.8.16:
+fbjs@^0.8.0, fbjs@^0.8.16:
   version "0.8.17"
   resolved "https://registry.yarnpkg.com/fbjs/-/fbjs-0.8.17.tgz#c4d598ead6949112653d6588b01a5cdcd9f90fdd"
   integrity sha1-xNWY6taUkRJlPWWIsBpc3Nn5D90=
@@ -6269,6 +6277,11 @@ growly@^1.3.0:
   resolved "https://registry.yarnpkg.com/growly/-/growly-1.3.0.tgz#f10748cbe76af964b7c96c93c6bcc28af120c081"
   integrity sha1-8QdIy+dq+WS3yWyTxrzCivEgwIE=
 
+gud@^1.0.0:
+  version "1.0.0"
+  resolved "https://registry.yarnpkg.com/gud/-/gud-1.0.0.tgz#a489581b17e6a70beca9abe3ae57de7a499852c0"
+  integrity sha512-zGEOVKFM5sVPPrYs7J5/hYEw2Pof8KCyOwyhG8sAF26mCAeUFAcYPu1mwB7hhpIP29zOIBaDqwuHdLp0jvZXjw==
+
 gzip-size@5.0.0:
   version "5.0.0"
   resolved "https://registry.yarnpkg.com/gzip-size/-/gzip-size-5.0.0.tgz#a55ecd99222f4c48fd8c01c625ce3b349d0a0e80"
@@ -9807,6 +9820,11 @@ po-catalog-loader@2.0.0:
   dependencies:
     loader-utils "1.1.0"
 
+popper.js@^1.14.4:
+  version "1.15.0"
+  resolved "https://registry.yarnpkg.com/popper.js/-/popper.js-1.15.0.tgz#5560b99bbad7647e9faa475c6b8056621f5a4ff2"
+  integrity sha512-w010cY1oCUmI+9KwwlWki+r5jxKfTFDVoadl7MSrIujHU5MJ5OR6HTDj6Xo8aoR/QsA56x8jKjA59qGH4ELtrA==
+
 portfinder@^1.0.9:
   version "1.0.13"
   resolved "https://registry.yarnpkg.com/portfinder/-/portfinder-1.0.13.tgz#bb32ecd87c27104ae6ee44b5a3ccbf0ebb1aede9"
@@ -10982,6 +11000,18 @@ react-overlays@^0.8.0:
     react-transition-group "^2.2.0"
     warning "^3.0.0"
 
+react-popper@^1.3.3:
+  version "1.3.3"
+  resolved "https://registry.yarnpkg.com/react-popper/-/react-popper-1.3.3.tgz#2c6cef7515a991256b4f0536cd4bdcb58a7b6af6"
+  integrity sha512-ynMZBPkXONPc5K4P5yFWgZx5JGAUIP3pGGLNs58cfAPgK67olx7fmLp+AdpZ0+GoQ+ieFDa/z4cdV6u7sioH6w==
+  dependencies:
+    "@babel/runtime" "^7.1.2"
+    create-react-context "<=0.2.2"
+    popper.js "^1.14.4"
+    prop-types "^15.6.1"
+    typed-styles "^0.0.7"
+    warning "^4.0.2"
+
 react-prop-types@^0.4.0:
   version "0.4.0"
   resolved "https://registry.yarnpkg.com/react-prop-types/-/react-prop-types-0.4.0.tgz#f99b0bfb4006929c9af2051e7c1414a5c75b93d0"
@@ -13222,6 +13252,11 @@ type-is@~1.6.16:
     media-typer "0.3.0"
     mime-types "~2.1.18"
 
+typed-styles@^0.0.7:
+  version "0.0.7"
+  resolved "https://registry.yarnpkg.com/typed-styles/-/typed-styles-0.0.7.tgz#93392a008794c4595119ff62dde6809dbc40a3d9"
+  integrity sha512-pzP0PWoZUhsECYjABgCGQlRGL1n7tOHsgwYv3oIiEpJwGhFTuty/YNeduxQYzXXa3Ge5BdT6sHYIQYpl4uJ+5Q==
+
 typedarray@^0.0.6:
   version "0.0.6"
   resolved "https://registry.yarnpkg.com/typedarray/-/typedarray-0.0.6.tgz#867ac74e3864187b1d3d47d996a78ec5c8830777"
@@ -13649,6 +13684,13 @@ warning@^3.0.0:
   dependencies:
     loose-envify "^1.0.0"
 
+warning@^4.0.2:
+  version "4.0.3"
+  resolved "https://registry.yarnpkg.com/warning/-/warning-4.0.3.tgz#16e9e077eb8a86d6af7d64aa1e05fd85b4678ca3"
+  integrity sha512-rpJyN222KWIvHJ/F53XSZv0Zl/accqHR8et1kpaMTD/fLCRxtV8iX8czMzY7sVZupTI3zcUTg8eycS2kNF9l6w==
+  dependencies:
+    loose-envify "^1.0.0"
+
 watch@~0.18.0:
   version "0.18.0"
   resolved "https://registry.yarnpkg.com/watch/-/watch-0.18.0.tgz#28095476c6df7c90c963138990c0a5423eb4b986"
