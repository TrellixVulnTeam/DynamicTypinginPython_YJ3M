commit 1c3cef1feb9094b53617c85b80b945fbe09c9a1e
Author: Lauryn Brown <lauryndbrown@gmail.com>
Date:   Tue Sep 4 12:28:49 2018 -0700

    added webhook stub for pull request. (#9606)

diff --git a/src/sentry/integrations/bitbucket/integration.py b/src/sentry/integrations/bitbucket/integration.py
index 57791a3b1f..b9301db3c0 100644
--- a/src/sentry/integrations/bitbucket/integration.py
+++ b/src/sentry/integrations/bitbucket/integration.py
@@ -32,7 +32,9 @@ metadata = IntegrationMetadata(
 )
 scopes = (
     'account',
+    'email',
     'issue:write',
+    'pullrequest',
     'repository',
     'repository:admin',
     'team',
diff --git a/src/sentry/integrations/bitbucket/repository.py b/src/sentry/integrations/bitbucket/repository.py
index c4a35fa895..d83340bb3c 100644
--- a/src/sentry/integrations/bitbucket/repository.py
+++ b/src/sentry/integrations/bitbucket/repository.py
@@ -67,7 +67,7 @@ class BitbucketRepositoryProvider(providers.IntegrationRepositoryProvider):
                         '/extensions/bitbucket/organizations/{}/webhook/'.format(organization.id)
                     ),
                     'active': True,
-                    'events': ['repo:push'],
+                    'events': ['repo:push', 'pullrequest:fulfilled'],
                 }
             )
         except Exception as e:
diff --git a/src/sentry/integrations/bitbucket/webhook.py b/src/sentry/integrations/bitbucket/webhook.py
index 8e1f901308..c424802006 100644
--- a/src/sentry/integrations/bitbucket/webhook.py
+++ b/src/sentry/integrations/bitbucket/webhook.py
@@ -49,6 +49,11 @@ def parse_raw_user_name(raw):
     return raw.split('<')[0].strip()
 
 
+class PullEventWebhook(Webhook):
+    def __call__(self, organization, event):
+        pass
+
+
 class PushEventWebhook(Webhook):
     # https://confluence.atlassian.com/bitbucket/event-payloads-740262817.html#EventPayloads-Push
     def __call__(self, organization, event):
@@ -107,6 +112,7 @@ class PushEventWebhook(Webhook):
 class BitbucketWebhookEndpoint(View):
     _handlers = {
         'repo:push': PushEventWebhook,
+        'pullrequest:fulfilled': PullEventWebhook,
     }
 
     def get_handler(self, event_type):
