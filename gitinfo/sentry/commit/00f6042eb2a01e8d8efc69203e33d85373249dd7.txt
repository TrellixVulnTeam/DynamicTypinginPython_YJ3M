commit 00f6042eb2a01e8d8efc69203e33d85373249dd7
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Tue Nov 27 11:29:49 2018 -0800

    feat(settings): Expose disabled Security Headers to members (#10777)
    
    Disables the only settings currently in this setting tree.

diff --git a/src/sentry/static/sentry/app/views/settings/projectSecurityHeaders/csp.jsx b/src/sentry/static/sentry/app/views/settings/projectSecurityHeaders/csp.jsx
index 3068ffb21a..73b2edf347 100644
--- a/src/sentry/static/sentry/app/views/settings/projectSecurityHeaders/csp.jsx
+++ b/src/sentry/static/sentry/app/views/settings/projectSecurityHeaders/csp.jsx
@@ -1,16 +1,17 @@
-import React from 'react';
 import PropTypes from 'prop-types';
+import React from 'react';
 
+import {Panel, PanelBody, PanelHeader} from 'app/components/panels';
 import {t, tct} from 'app/locale';
+import Access from 'app/components/acl/access';
 import AsyncView from 'app/views/asyncView';
 import ExternalLink from 'app/components/externalLink';
 import Form from 'app/views/settings/components/forms/form';
 import JsonForm from 'app/views/settings/components/forms/jsonForm';
-import {Panel, PanelBody, PanelHeader} from 'app/components/panels';
+import PreviewFeature from 'app/components/previewFeature';
 import ReportUri, {
   getSecurityDsn,
 } from 'app/views/settings/projectSecurityHeaders/reportUri';
-import PreviewFeature from 'app/components/previewFeature';
 import SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';
 import formGroups from 'app/data/forms/cspReports';
 
@@ -76,7 +77,9 @@ export default class ProjectCspReports extends AsyncView {
           initialData={this.state.project.options}
           apiEndpoint={`/projects/${orgId}/${projectId}/`}
         >
-          <JsonForm forms={formGroups} />
+          <Access access={['project:write']}>
+            {({hasAccess}) => <JsonForm disabled={!hasAccess} forms={formGroups} />}
+          </Access>
         </Form>
 
         <Panel>
diff --git a/tests/js/spec/views/projectSecurityHeaders/__snapshots__/projectCspReports.spec.jsx.snap b/tests/js/spec/views/projectSecurityHeaders/__snapshots__/projectCspReports.spec.jsx.snap
index d93752feab..30ba1539e5 100644
--- a/tests/js/spec/views/projectSecurityHeaders/__snapshots__/projectCspReports.spec.jsx.snap
+++ b/tests/js/spec/views/projectSecurityHeaders/__snapshots__/projectCspReports.spec.jsx.snap
@@ -35,39 +35,15 @@ exports[`ProjectCspReports renders 1`] = `
       submitLabel="Save Changes"
       submitPriority="primary"
     >
-      <JsonForm
-        additionalFieldProps={Object {}}
-        forms={
+      <AccessContainer
+        access={
           Array [
-            Object {
-              "fields": Array [
-                Object {
-                  "getData": [Function],
-                  "help": "Our default list will attempt to ignore common issues and reduce noise.",
-                  "label": "Use default ignored sources",
-                  "name": "sentry:csp_ignored_sources_defaults",
-                  "type": "boolean",
-                },
-                Object {
-                  "autosize": true,
-                  "extraHelp": "Separate multiple entries with a newline.",
-                  "getData": [Function],
-                  "help": "Discard reports about requests from the given sources. Separate multiple entries with a newline.",
-                  "label": "Additional ignored sources",
-                  "multiline": true,
-                  "name": "sentry:csp_ignored_sources",
-                  "placeholder": "e.g.
-file://*
-*.example.com
-example.com",
-                  "type": "string",
-                },
-              ],
-              "title": "CSP Settings",
-            },
+            "project:write",
           ]
         }
-      />
+      >
+        <Component />
+      </AccessContainer>
     </Form>
     <Panel>
       <PanelHeader>
