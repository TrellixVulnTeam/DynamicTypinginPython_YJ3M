commit e49756dc15ba6577521cc162c616c25006303650
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Sep 13 11:04:42 2015 -0700

    Render aggregate sidebar on event details (refs GH-1947)

diff --git a/src/sentry/static/sentry/app/views/groupDetails/chart.jsx b/src/sentry/static/sentry/app/components/group/chart.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/groupDetails/chart.jsx
rename to src/sentry/static/sentry/app/components/group/chart.jsx
diff --git a/src/sentry/static/sentry/app/views/groupOverview/seenInfo.jsx b/src/sentry/static/sentry/app/components/group/seenInfo.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/groupOverview/seenInfo.jsx
rename to src/sentry/static/sentry/app/components/group/seenInfo.jsx
diff --git a/src/sentry/static/sentry/app/components/group/sidebar.jsx b/src/sentry/static/sentry/app/components/group/sidebar.jsx
new file mode 100644
index 0000000000..95c7322bbc
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/group/sidebar.jsx
@@ -0,0 +1,66 @@
+import React from "react";
+import GroupChart from "./chart";
+import GroupState from "../../mixins/groupState";
+import SeenInfo from "./seenInfo";
+import TagDistributionMeter from "./tagDistributionMeter";
+import PropTypes from "../../proptypes";
+
+var GroupSidebar = React.createClass({
+  mixins: [GroupState],
+
+  propTypes: {
+    event: PropTypes.Event.isRequired
+  },
+
+  render(){
+    var orgId = this.getOrganization().slug;
+    var projectId = this.getProject().slug;
+    var group = this.getGroup();
+    var tagList = [];
+    for (var key in group.tags) {
+      tagList.push([group.tags[key].name, key]);
+    }
+    tagList.sort();
+
+    return (
+      <div className="group-stats">
+        <GroupChart statsPeriod="24h" group={group}
+                    title="Last 24 Hours"
+                    firstSeen={group.firstSeen}
+                    lastSeen={group.lastSeen} />
+        <GroupChart statsPeriod="30d" group={group}
+                    title="Last 30 Days"
+                    className="bar-chart-small"
+                    firstSeen={group.firstSeen}
+                    lastSeen={group.lastSeen} />
+
+        <h6 className="first-seen"><span>First seen</span></h6>
+        <SeenInfo
+            orgId={orgId}
+            projectId={projectId}
+            date={group.firstSeen}
+            release={group.firstRelease} />
+
+        <h6 className="last-seen"><span>Last seen</span></h6>
+        <SeenInfo
+            orgId={orgId}
+            projectId={projectId}
+            date={group.lastSeen}
+            release={group.lastRelease} />
+
+        <h6><span>Tags</span></h6>
+        {tagList.map((data) => {
+          return (
+            <TagDistributionMeter
+              key={data[0]}
+              group={group}
+              name={data[0]}
+              tag={data[1]} />
+          );
+        })}
+      </div>
+    );
+  }
+});
+
+export default GroupSidebar;
diff --git a/src/sentry/static/sentry/app/views/groupOverview/tagDistributionMeter.jsx b/src/sentry/static/sentry/app/components/group/tagDistributionMeter.jsx
similarity index 100%
rename from src/sentry/static/sentry/app/views/groupOverview/tagDistributionMeter.jsx
rename to src/sentry/static/sentry/app/components/group/tagDistributionMeter.jsx
diff --git a/src/sentry/static/sentry/app/views/groupDetails/event.jsx b/src/sentry/static/sentry/app/views/groupDetails/event.jsx
index 037164ce44..bb8857b5d9 100644
--- a/src/sentry/static/sentry/app/views/groupDetails/event.jsx
+++ b/src/sentry/static/sentry/app/views/groupDetails/event.jsx
@@ -1,13 +1,8 @@
 import React from "react";
-import DateTime from "../../components/dateTime";
-import FileSize from "../../components/fileSize";
-import GroupEventEntries from "../../components/events/eventEntries";
+import EventEntries from "../../components/events/eventEntries";
 import GroupState from "../../mixins/groupState";
+import GroupSidebar from "../../components/group/sidebar";
 import PropTypes from "../../proptypes";
-import TimeSince from "../../components/timeSince";
-
-import UserWidget from "./userWidget";
-import ReleaseWidget from "./releaseWidget";
 
 var GroupEvent = React.createClass({
   mixins: [GroupState],
@@ -23,30 +18,10 @@ var GroupEvent = React.createClass({
     return (
       <div className="row event">
         <div className="col-md-9">
-          <GroupEventEntries
-              group={group}
-              event={evt} />
+          <EventEntries group={group} event={evt} />
         </div>
         <div className="col-md-3">
-          <div className="event-stats group-stats">
-            <h6><span>Meta</span></h6>
-            <dl>
-              <dt>ID:</dt>
-              <dd className="truncate">{evt.eventID}</dd>
-              <dt>When:</dt>
-              <dd><TimeSince date={evt.dateCreated} /></dd>
-              <dt>Date:</dt>
-              <dd><DateTime date={evt.dateCreated} /></dd>
-              <dt>Size:</dt>
-              <dd><FileSize bytes={evt.size} /></dd>
-            </dl>
-            {evt.user &&
-              <UserWidget data={evt.user} />
-            }
-            {evt.release &&
-              <ReleaseWidget data={evt.release} />
-            }
-          </div>
+          <GroupSidebar group={group} />
         </div>
       </div>
     );
diff --git a/src/sentry/static/sentry/app/views/groupOverview/index.jsx b/src/sentry/static/sentry/app/views/groupOverview.jsx
similarity index 51%
rename from src/sentry/static/sentry/app/views/groupOverview/index.jsx
rename to src/sentry/static/sentry/app/views/groupOverview.jsx
index 9b3a95f8dc..c51e5cb3f5 100644
--- a/src/sentry/static/sentry/app/views/groupOverview/index.jsx
+++ b/src/sentry/static/sentry/app/views/groupOverview.jsx
@@ -1,17 +1,15 @@
 import React from "react";
 import Router from "react-router";
-import api from "../../api";
+import api from "../api";
 
-import RouteMixin from "../../mixins/routeMixin";
-import GroupState from "../../mixins/groupState";
-import ApiMixin from "../../mixins/apiMixin";
+import RouteMixin from "../mixins/routeMixin";
+import GroupState from "../mixins/groupState";
+import ApiMixin from "../mixins/apiMixin";
 
-import GroupChart from "../groupDetails/chart";
-import GroupEventEntries from "../../components/events/eventEntries";
-import LoadingError from "../../components/loadingError";
-import LoadingIndicator from "../../components/loadingIndicator";
-import SeenInfo from "./seenInfo";
-import TagDistributionMeter from "./tagDistributionMeter";
+import EventEntries from "../components/events/eventEntries";
+import GroupSidebar from "../components/group/sidebar";
+import LoadingError from "../components/loadingError";
+import LoadingIndicator from "../components/loadingIndicator";
 
 var GroupOverview = React.createClass({
   contextTypes: {
@@ -80,53 +78,9 @@ var GroupOverview = React.createClass({
     var orgId = this.getOrganization().slug;
     var projectId = this.getProject().slug;
 
-    var tagList = [];
-    for (var key in group.tags) {
-      tagList.push([group.tags[key].name, key]);
-    }
-    tagList.sort();
-
     return (
       <div>
         <div className="row group-overview">
-          <div className="col-md-3 group-stats-column">
-            <div className="group-stats">
-              <GroupChart statsPeriod="24h" group={group}
-                          title="Last 24 Hours"
-                          firstSeen={group.firstSeen}
-                          lastSeen={group.lastSeen} />
-              <GroupChart statsPeriod="30d" group={group}
-                          title="Last 30 Days"
-                          className="bar-chart-small"
-                          firstSeen={group.firstSeen}
-                          lastSeen={group.lastSeen} />
-
-              <h6 className="first-seen"><span>First seen</span></h6>
-              <SeenInfo
-                  orgId={orgId}
-                  projectId={projectId}
-                  date={group.firstSeen}
-                  release={group.firstRelease} />
-
-              <h6 className="last-seen"><span>Last seen</span></h6>
-              <SeenInfo
-                  orgId={orgId}
-                  projectId={projectId}
-                  date={group.lastSeen}
-                  release={group.lastRelease} />
-
-              <h6><span>Tags</span></h6>
-              {tagList.map((data) => {
-                return (
-                  <TagDistributionMeter
-                    key={data[0]}
-                    group={group}
-                    name={data[0]}
-                    tag={data[1]} />
-                );
-              })}
-            </div>
-          </div>
           <div className="col-md-9">
             {this.state.loading ?
               <LoadingIndicator />
@@ -147,12 +101,13 @@ var GroupOverview = React.createClass({
                     </div>
                     This summary is based on the most recent event in this aggregate.
                 </div>
-                <GroupEventEntries
-                    group={group}
-                    event={evt} />
+                <EventEntries group={group} event={evt} />
               </div>
             )}
           </div>
+          <div className="col-md-3">
+            <GroupSidebar group={group} />
+          </div>
         </div>
       </div>
     );
