commit ecabc90a6f55fdd2fa0d0ed789b72d3196d3e2eb
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Oct 16 21:07:15 2012 -0700

    Correct query to members and pending members

diff --git a/src/sentry/web/forms/teams.py b/src/sentry/web/forms/teams.py
index 835ae7c7a8..7677cefb41 100644
--- a/src/sentry/web/forms/teams.py
+++ b/src/sentry/web/forms/teams.py
@@ -91,10 +91,10 @@ class InviteTeamMemberForm(BaseTeamMemberForm):
         if not value:
             return None
 
-        if self.project.member_set.filter(user__email__iexact=value).exists():
+        if self.project.team.member_set.filter(user__email__iexact=value).exists():
             raise forms.ValidationError(_('There is already a member with this email address'))
 
-        if self.project.pending_member_set.filter(email__iexact=value).exists():
+        if self.project.team.pending_member_set.filter(email__iexact=value).exists():
             raise forms.ValidationError(_('There is already a pending invite for this user'))
 
         return value
