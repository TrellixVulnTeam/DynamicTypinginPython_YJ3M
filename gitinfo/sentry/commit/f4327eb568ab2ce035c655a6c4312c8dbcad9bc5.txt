commit f4327eb568ab2ce035c655a6c4312c8dbcad9bc5
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Dec 11 09:33:42 2019 -0800

    feat(sdk): Improve JS SDK configuration
    
    - Reuse existing environment / release configuration
    - Add SENTRY_FRONTEND_WHITELIST_URLS setting

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 3f2b11ba02..89a8e42d39 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -913,6 +913,9 @@ SENTRY_FRONTEND_PROJECT = None
 # over SENTRY_FRONTEND_PROJECT or SENTRY_PROJECT
 SENTRY_FRONTEND_DSN = None
 
+# Configuration for JavaScript's whitelistUrls - defaults to ALLOWED_HOSTS
+SENTRY_FRONTEND_WHITELIST_URLS = None
+
 # DSN to use for Sentry monitors
 SENTRY_MONITOR_DSN = None
 SENTRY_MONITOR_API_ROOT = None
diff --git a/src/sentry/web/client_config.py b/src/sentry/web/client_config.py
index 2b4d3082fd..21b776a74a 100644
--- a/src/sentry/web/client_config.py
+++ b/src/sentry/web/client_config.py
@@ -160,10 +160,13 @@ def get_client_config(request=None):
         "csrfCookieName": settings.CSRF_COOKIE_NAME,
         "sentryConfig": {
             "dsn": public_dsn,
-            "release": version_info["build"],
+            "release": settings.SENTRY_SDK_CONFIG["release"],
+            "environment": settings.SENTRY_SDK_CONFIG["environment"],
             # By default `ALLOWED_HOSTS` is [*], however the JS SDK does not support globbing
-            "whitelistUrls": list(
-                "" if settings.ALLOWED_HOSTS == ["*"] else settings.ALLOWED_HOSTS
+            "whitelistUrls": (
+                settings.SENTRY_FRONTEND_WHITELIST_URLS
+                if settings.SENTRY_FRONTEND_WHITELIST_URLS
+                else list("" if settings.ALLOWED_HOSTS == ["*"] else settings.ALLOWED_HOSTS)
             ),
         },
     }
