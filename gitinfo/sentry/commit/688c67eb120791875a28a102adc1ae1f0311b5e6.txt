commit 688c67eb120791875a28a102adc1ae1f0311b5e6
Author: Dan Fuller <dfuller@sentry.io>
Date:   Wed Feb 20 17:33:19 2019 -0800

    fix: Rename advanced_search feature to advanced-search for consistency

diff --git a/src/sentry/api/helpers/group_index.py b/src/sentry/api/helpers/group_index.py
index 9063e48084..21403c7180 100644
--- a/src/sentry/api/helpers/group_index.py
+++ b/src/sentry/api/helpers/group_index.py
@@ -122,7 +122,7 @@ def validate_search_filter_permissions(organization, search_filters):
     """
     # If the organization has advanced search, then no need to perform any
     # other checks since they're allowed to use all search features
-    if features.has('organizations:advanced_search', organization):
+    if features.has('organizations:advanced-search', organization):
         return
 
     for search_filter in search_filters:
diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index f0ac02d0be..09ea06911d 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -792,7 +792,7 @@ SENTRY_FEATURES = {
     'auth:register': True,
 
     # Enable advanced search features, like negation and wildcard matching.
-    'organizations:advanced_search': True,
+    'organizations:advanced-search': True,
     # Enable obtaining and using API keys.
     'organizations:api-keys': False,
     # Enable creating organizations within sentry (if SENTRY_SINGLE_ORGANIZATION
diff --git a/src/sentry/features/__init__.py b/src/sentry/features/__init__.py
index c6697b5b5e..a6495a333d 100644
--- a/src/sentry/features/__init__.py
+++ b/src/sentry/features/__init__.py
@@ -50,7 +50,7 @@ default_manager.add('auth:register')
 default_manager.add('organizations:create')
 
 # Organization scoped features
-default_manager.add('organizations:advanced_search', OrganizationFeature)  # NOQA
+default_manager.add('organizations:advanced-search', OrganizationFeature)  # NOQA
 default_manager.add('organizations:api-keys', OrganizationFeature)  # NOQA
 default_manager.add('organizations:discover', OrganizationFeature)  # NOQA
 default_manager.add('organizations:events', OrganizationFeature)  # NOQA
diff --git a/tests/sentry/api/helpers/test_group_index.py b/tests/sentry/api/helpers/test_group_index.py
index d337d6e97e..21f3b2e832 100644
--- a/tests/sentry/api/helpers/test_group_index.py
+++ b/tests/sentry/api/helpers/test_group_index.py
@@ -16,7 +16,7 @@ class ValidateSearchFilterPermissionsTest(TestCase):
     def test_negative(self):
         query = '!has:user'
         with self.feature(
-                {'organizations:advanced_search': False},
+                {'organizations:advanced-search': False},
         ), self.assertRaisesRegexp(ValidationError, '.*negative search.*'):
             self.run_test(query)
 
@@ -24,7 +24,7 @@ class ValidateSearchFilterPermissionsTest(TestCase):
 
         query = '!something:123'
         with self.feature(
-                {'organizations:advanced_search': False},
+                {'organizations:advanced-search': False},
         ), self.assertRaisesRegexp(ValidationError, '.*negative search.*'):
             self.run_test(query)
 
@@ -33,7 +33,7 @@ class ValidateSearchFilterPermissionsTest(TestCase):
     def test_wildcard(self):
         query = 'abc:hello*'
         with self.feature(
-                {'organizations:advanced_search': False},
+                {'organizations:advanced-search': False},
         ), self.assertRaisesRegexp(ValidationError, '.*wildcard search.*'):
             self.run_test(query)
 
@@ -41,7 +41,7 @@ class ValidateSearchFilterPermissionsTest(TestCase):
 
         query = 'raw * search'
         with self.feature(
-                {'organizations:advanced_search': False},
+                {'organizations:advanced-search': False},
         ), self.assertRaisesRegexp(ValidationError, '.*wildcard search.*'):
             self.run_test(query)
 
diff --git a/tests/sentry/api/serializers/test_organization.py b/tests/sentry/api/serializers/test_organization.py
index 3699812124..f677bd4904 100644
--- a/tests/sentry/api/serializers/test_organization.py
+++ b/tests/sentry/api/serializers/test_organization.py
@@ -19,7 +19,7 @@ class OrganizationSerializerTest(TestCase):
 
         assert result['id'] == six.text_type(organization.id)
         assert result['features'] == set([
-            'advanced_search',
+            'advanced-search',
             'new-teams',
             'shared-issues',
             'repos',
diff --git a/tests/snuba/api/endpoints/test_organization_group_index.py b/tests/snuba/api/endpoints/test_organization_group_index.py
index 42348ade38..778d658728 100644
--- a/tests/snuba/api/endpoints/test_organization_group_index.py
+++ b/tests/snuba/api/endpoints/test_organization_group_index.py
@@ -393,7 +393,7 @@ class GroupListTestWithSearchFilters(GroupListTest):
 
     def test_advanced_search_errors(self):
         self.login_as(user=self.user)
-        with self.feature({'organizations:advanced_search': False}):
+        with self.feature({'organizations:advanced-search': False}):
             response = self.get_response(sort_by='date', query='!has:user')
             assert response.status_code == 400, response.data
             assert (
