commit f5ff293c713a618c5156bb8bf9ef03a10c11569f
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Feb 26 11:30:17 2013 -0800

    Clean up app config

diff --git a/src/sentry/templates/sentry/layout.html b/src/sentry/templates/sentry/layout.html
index 3b992679ec..094c6ae6ff 100644
--- a/src/sentry/templates/sentry/layout.html
+++ b/src/sentry/templates/sentry/layout.html
@@ -29,9 +29,16 @@
             app.config.mediaUrl = '{% url sentry-media "sentry" '' %}';
             app.config.urlPrefix = {{ URL_PREFIX|to_json|safe }};
             app.config.hasRealtime = {{ hasRealtime|to_json|safe  }};
-            app.config.projectId = {{ project.slug|to_json|safe }};
-            app.config.teamId = {{ team.slug|to_json|safe }};
-            app.config.viewId = {% if view %}{{ view.pk|to_json|safe }}{% else %}null{% endif %};
+            {% if project %}
+                app.config.projectId = {{ project.slug|to_json|safe }};
+                app.config.teamId = {{ project.team.slug|to_json|safe }};
+            {% elif team %}
+                app.config.projectId = null;
+                app.config.teamId = {{ team.slug|to_json|safe }};
+            {% else %}
+                app.config.projectId = null;
+                app.config.teamId = null;
+            {% endif %}
             </script>
         {% endblock %}
 
