commit 10d0bef7c5f934d00e7e090302add5b59c8b432f
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jan 12 22:22:31 2012 -0800

    fix rendering of version data

diff --git a/sentry/templates/sentry/groups/details.html b/sentry/templates/sentry/groups/details.html
index e25bc828d2..1244c7d32e 100644
--- a/sentry/templates/sentry/groups/details.html
+++ b/sentry/templates/sentry/groups/details.html
@@ -118,7 +118,7 @@
                     <h2>{% trans "Module Versions" %}</h2>
                 </div>
                 <table class="inline">
-                    {% for k, v in version_data %}
+                    {% for k, v in version_data.iteritems %}
                         <tr>
                             <th class="key">{{ k }}</th>
                             <td class="values"><code>{{ v }}</code></td>
diff --git a/sentry/templates/sentry/groups/event.html b/sentry/templates/sentry/groups/event.html
index ed08528472..19be72e592 100644
--- a/sentry/templates/sentry/groups/event.html
+++ b/sentry/templates/sentry/groups/event.html
@@ -40,18 +40,18 @@
 
 
     {% if version_data %}
-        <div id="versioninfo" class="module">
-            <h2>{% trans "Module Versions" %}</h2>
-            <div class="module-content">
-                <table class="inline">
-                    {% for k, v in version_data %}
-                        <tr>
-                            <th class="key">{{ k }}</th>
-                            <td class="values"><code>{{ v }}</code></td>
-                        </tr>
-                    {% endfor %}
-                </table>
+        <div id="versioninfo">
+            <div class="page-header">
+                <h2>{% trans "Module Versions" %}</h2>
             </div>
+            <table class="inline">
+                {% for k, v in version_data.iteritems %}
+                    <tr>
+                        <th class="key">{{ k }}</th>
+                        <td class="values"><code>{{ v }}</code></td>
+                    </tr>
+                {% endfor %}
+            </table>
         </div>
     {% endif %}
 
@@ -60,45 +60,43 @@
     {% endfor %}
 
     {% if json_data %}
-        <div id="requestinfo" class="module">
+        <div id="extra">
             <div class="page-header">
                 <h2>{% trans "Additional Data" %}</h2>
             </div>
-            <div class="module-content">
-                <table>
-                    {% for k, v in json_data.iteritems %}
-                        <tr>
-                            <th class="key">{{ k }}</th>
-                            <td class="values">
-                            {% if v %}
-                                {% if v|is_dict %}
-                                    <table class="vars">
-                                        <thead>
-                                            <tr>
-                                                <th>{% trans "Variable" %}</th>
-                                                <th>{% trans "Value" %}</th>
-                                            </tr>
-                                        </thead>
-                                        <tbody>
-                                            {% for k_, v_ in v.iteritems|as_sorted %}
+            <table>
+                {% for k, v in json_data.iteritems %}
+                    <tr>
+                        <th class="key">{{ k }}</th>
+                        <td class="values">
+                        {% if v %}
+                            {% if v|is_dict %}
+                                {% if v|length > 5 %}
+                                    <a href="#" onclick="return varToggle(this, 'Extra{{ forloop.index }}')"><span>&#x25b6;</span> {% trans "Body" %}</a>
+                                {% endif %}
+                                <table class="vars" id="vExtra{{ forloop.index }}"{% if v|length > 5 %} style="display:none;"{% endif %}>
+                                    <colgroup>
+                                        <col style="width:100px;">
+                                    </colgroup>
+                                    <tbody>
+                                        {% for k_, v_ in v.iteritems|as_sorted %}
                                             <tr>
                                                 <td>{{ k_ }}</td>
                                                 <td class="code"><pre>{{ v_|pprint }}</pre></td>
                                             </tr>
-                                            {% endfor %}
-                                        </tbody>
-                                    </table>
-                                {% else %}
-                                    <pre>{{ v|pprint }}</pre>
-                                {% endif %}
+                                        {% endfor %}
+                                    </tbody>
+                                </table>
                             {% else %}
-                                <p>{% blocktrans with k as varname %}No data for {{ varname }}{% endblocktrans %}</p>
+                                <pre>{{ v|pprint }}</pre>
                             {% endif %}
-                            </td>
-                        </tr>
-                    {% endfor %}
-                </table>
-            </div>
+                        {% else %}
+                            <p>{% blocktrans with k as varname %}No data for {{ varname }}{% endblocktrans %}</p>
+                        {% endif %}
+                        </td>
+                    </tr>
+                {% endfor %}
+            </table>
         </div>
     {% endif %}
 {% endblock %}
\ No newline at end of file
diff --git a/sentry/web/frontend/groups.py b/sentry/web/frontend/groups.py
index 6234c429d6..adab98bec5 100644
--- a/sentry/web/frontend/groups.py
+++ b/sentry/web/frontend/groups.py
@@ -253,7 +253,7 @@ def group(request, project, group_id):
         'event': event,
         'interface_list': filter(None, [mark_safe(i.to_html(event) or '') for i in event.interfaces.itervalues()]),
         'json_data': event.data.get('extra', {}),
-        'version_data': event.data.get('modules', []),
+        'version_data': event.data.get('modules', None),
     }, request)
 
 
@@ -292,7 +292,7 @@ def group_event_details(request, project, group_id, event_id):
         'event': event,
         'interface_list': filter(None, [mark_safe(i.to_html(event) or '') for i in event.interfaces.itervalues()]),
         'json_data': event.data.get('extra', {}),
-        'version_data': event.data.get('modules', []),
+        'version_data': event.data.get('modules', None),
     }, request)
 
 
diff --git a/setup.py b/setup.py
index 487dbab1a6..218913d349 100755
--- a/setup.py
+++ b/setup.py
@@ -46,7 +46,7 @@ install_requires = [
 
 setup(
     name='sentry',
-    version='2.0.0-Alpha1',
+    version='2.0.0-RC1',
     author='David Cramer',
     author_email='dcramer@gmail.com',
     url='http://github.com/dcramer/sentry',
