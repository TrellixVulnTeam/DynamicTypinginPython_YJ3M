commit e5ec86803de5ff2f6f417c831f23651a1d6abc9a
Author: Katie Lundsgaard <katie@getsentry.com>
Date:   Mon Jan 30 15:28:04 2017 -0800

    Make tests pass

diff --git a/src/sentry/api/serializers/models/release.py b/src/sentry/api/serializers/models/release.py
index 92c555ffe2..acfb19ea6a 100644
--- a/src/sentry/api/serializers/models/release.py
+++ b/src/sentry/api/serializers/models/release.py
@@ -50,10 +50,9 @@ def get_users_for_commits(item_list):
     # Figure out which email address matches to a user
     users_by_email = {}
     for email in user_emails:
-        if email.email in users_by_email:
-            pass
-        user = users_by_id.get(email.user_id)
-        users_by_email[email.email] = user
+        if email.email not in users_by_email:
+            user = users_by_id.get(email.user_id)
+            users_by_email[email.email] = user
 
     author_objs = {}
     for author in authors:
diff --git a/tests/sentry/api/serializers/test_release.py b/tests/sentry/api/serializers/test_release.py
index e67a1fee21..0bb63db37e 100644
--- a/tests/sentry/api/serializers/test_release.py
+++ b/tests/sentry/api/serializers/test_release.py
@@ -150,9 +150,9 @@ class ReleaseSerializerTest(TestCase):
     def test_get_single_user_from_email(self):
         user = User.objects.create(email='stebe@sentry.io')
         otheruser = User.objects.create(email='adifferentstebe@sentry.io')
-        UserEmail.objects.create(user=otheruser, email='stebe@sentry.io')
         project = self.create_project()
         self.create_member(user=user, organization=project.organization)
+        self.create_member(user=otheruser, organization=project.organization)
         release = Release.objects.create(
             organization_id=project.organization_id,
             version=uuid4().hex,
