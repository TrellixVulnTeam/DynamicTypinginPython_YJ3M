commit 9fc41ea15a851c70041b152b0966f10b438d3f6e
Author: adhiraj <adhirajsomani@gmail.com>
Date:   Tue Dec 19 17:45:28 2017 -0800

    feat(workflow): Hook to modify organization settings pages (#6778)
    
    * feat(workflow): Hook to modify organization settings pages
    
    Allows injection of content into settings pages.
    
    * Hook in component from getsentry
    
    * Fix route component
    
    * Add members route to array
    
    * Move array into function

diff --git a/src/sentry/static/sentry/app/index.js b/src/sentry/static/sentry/app/index.js
index ed0ccef131..4ea5bef37c 100644
--- a/src/sentry/static/sentry/app/index.js
+++ b/src/sentry/static/sentry/app/index.js
@@ -140,6 +140,8 @@ export default {
       .default,
     OrganizationsLoader: require('./components/organizations/organizationsLoader')
       .default,
+    OrganizationMembersView:
+      require('./views/settings/organization/members/organizationMembersView').default,
     Pagination: require('./components/pagination').default,
     PluginConfig: require('./components/pluginConfig').default,
     ProjectIssueTracking: require('./views/projectIssueTracking').default,
diff --git a/src/sentry/static/sentry/app/routes.jsx b/src/sentry/static/sentry/app/routes.jsx
index d6d5dc3227..8de5c2037e 100644
--- a/src/sentry/static/sentry/app/routes.jsx
+++ b/src/sentry/static/sentry/app/routes.jsx
@@ -114,125 +114,8 @@ function appendTrailingSlash(nextState, replaceState) {
   }
 }
 
-const orgSettingsRoutes = [
-  <IndexRedirect key="index-org-settings" to="settings/" />,
-
-  <Route
-    key="projects"
-    path="projects/"
-    name="Projects"
-    component={errorHandler(OrganizationProjectsView)}
-  />,
-
-  <Route
-    key="settings"
-    path="settings/"
-    name="General"
-    component={errorHandler(OrganizationGeneralSettingsView)}
-  />,
-
-  <Route
-    key="api-keys"
-    path="api-keys/"
-    name="API Key"
-    component={errorHandler(OrganizationApiKeysView)}
-  />,
-
-  <Route
-    key="api-keys-detail"
-    path="api-keys/:apiKey/"
-    component={errorHandler(OrganizationApiKeyDetailsView)}
-  />,
-
-  <Route
-    key="audit-log"
-    path="audit-log/"
-    name="Audit Log"
-    component={errorHandler(OrganizationAuditLogView)}
-  />,
-
-  <Route
-    key="auth"
-    path="auth/"
-    name="Auth Providers"
-    component={errorHandler(OrganizationAuthView)}
-  />,
-
-  <Route
-    key="integrations"
-    path="integrations/"
-    name="Integrations"
-    component={errorHandler(OrganizationIntegrations)}
-  />,
-
-  <Route key="members" path="members/" name="Members">
-    <IndexRoute component={errorHandler(OrganizationMembersView)} />
-    <Route path="new/" name="Invite" component={errorHandler(InviteMember)} />,
-    <Route
-      path=":memberId/"
-      name="Details"
-      component={errorHandler(OrganizationMemberDetail)}
-    />,
-  </Route>,
-
-  <Route
-    key="rate-limits"
-    path="rate-limits/"
-    name="Rate Limits"
-    component={errorHandler(OrganizationRateLimits)}
-  />,
-
-  <Route
-    key="repos"
-    path="repos/"
-    name="Repositories"
-    component={errorHandler(OrganizationRepositoriesView)}
-  />,
-
-  <Route
-    key="settings"
-    path="settings/"
-    component={errorHandler(OrganizationGeneralSettingsView)}
-  />,
-
-  <Route key="teams" name="Project & Teams" path="teams/">
-    <IndexRedirect to="your-teams" />
-    <Route
-      path="all-teams/"
-      name="All Teams"
-      allTeams
-      component={errorHandler(OrganizationTeams)}
-    />
-
-    <Route
-      name="Your Teams"
-      path="your-teams/"
-      component={errorHandler(OrganizationTeams)}
-    />
-
-    <Route
-      key="team-details"
-      name="Team"
-      path=":teamId/"
-      component={errorHandler(TeamDetails)}
-    >
-      <IndexRedirect to="settings/" />
-      <Route path="settings/" name="Settings" component={errorHandler(TeamSettings)} />
-      <Route path="members/" name="Members" component={errorHandler(TeamMembers)} />
-    </Route>
-  </Route>,
-
-  <Route
-    key="org-stats"
-    name="Stats"
-    path="stats/"
-    component={errorHandler(OrganizationStats)}
-  />,
-];
-
 const accountSettingsRoutes = [
   <IndexRedirect key="account-settings-index" to="notifications/" />,
-
   <Route
     key="notifications/"
     path="notifications/"
@@ -373,6 +256,128 @@ function routes() {
     hooksOrgRoutes.push(cb());
   });
 
+  // This is declared in the routes() function because some routes need the
+  // hook store which is not available at import time.
+  const orgSettingsRoutes = [
+    <IndexRedirect key="index-org-settings" to="settings/" />,
+
+    <Route
+      key="projects"
+      path="projects/"
+      name="Projects"
+      component={errorHandler(OrganizationProjectsView)}
+    />,
+
+    <Route
+      key="settings"
+      path="settings/"
+      name="General"
+      component={errorHandler(OrganizationGeneralSettingsView)}
+    />,
+
+    <Route
+      key="api-keys"
+      path="api-keys/"
+      name="API Key"
+      component={errorHandler(OrganizationApiKeysView)}
+    />,
+
+    <Route
+      key="api-keys-detail"
+      path="api-keys/:apiKey/"
+      component={errorHandler(OrganizationApiKeyDetailsView)}
+    />,
+
+    <Route
+      key="audit-log"
+      path="audit-log/"
+      name="Audit Log"
+      component={errorHandler(OrganizationAuditLogView)}
+    />,
+
+    <Route
+      key="auth"
+      path="auth/"
+      name="Auth Providers"
+      component={errorHandler(OrganizationAuthView)}
+    />,
+
+    <Route
+      key="integrations"
+      path="integrations/"
+      name="Integrations"
+      component={errorHandler(OrganizationIntegrations)}
+    />,
+
+    <Route key="members" path="members/" name="Members">
+      <IndexRoute component={
+        HookStore.get('component:org-members-view').length ?
+          HookStore.get('component:org-members-view')[0]() :
+          OrganizationMembersView
+      } />
+      <Route path="new/" name="Invite" component={errorHandler(InviteMember)} />,
+      <Route
+        path=":memberId/"
+        name="Details"
+        component={errorHandler(OrganizationMemberDetail)}
+      />,
+    </Route>,
+
+    <Route
+      key="rate-limits"
+      path="rate-limits/"
+      name="Rate Limits"
+      component={errorHandler(OrganizationRateLimits)}
+    />,
+
+    <Route
+      key="repos"
+      path="repos/"
+      name="Repositories"
+      component={errorHandler(OrganizationRepositoriesView)}
+    />,
+
+    <Route
+      key="settings"
+      path="settings/"
+      component={errorHandler(OrganizationGeneralSettingsView)}
+    />,
+
+    <Route key="teams" name="Project & Teams" path="teams/">
+      <IndexRedirect to="your-teams" />
+      <Route
+        path="all-teams/"
+        name="All Teams"
+        allTeams
+        component={errorHandler(OrganizationTeams)}
+      />
+
+      <Route
+        name="Your Teams"
+        path="your-teams/"
+        component={errorHandler(OrganizationTeams)}
+      />
+
+      <Route
+        key="team-details"
+        name="Team"
+        path=":teamId/"
+        component={errorHandler(TeamDetails)}
+      >
+        <IndexRedirect to="settings/" />
+        <Route path="settings/" name="Settings" component={errorHandler(TeamSettings)} />
+        <Route path="members/" name="Members" component={errorHandler(TeamMembers)} />
+      </Route>
+    </Route>,
+
+    <Route
+      key="org-stats"
+      name="Stats"
+      path="stats/"
+      component={errorHandler(OrganizationStats)}
+    />,
+  ];
+
   return (
     <Route path="/" component={errorHandler(App)}>
       <Route path="/account/" component={errorHandler(AccountLayout)}>
diff --git a/src/sentry/static/sentry/app/stores/hookStore.jsx b/src/sentry/static/sentry/app/stores/hookStore.jsx
index 1b2f3103fe..622885df60 100644
--- a/src/sentry/static/sentry/app/stores/hookStore.jsx
+++ b/src/sentry/static/sentry/app/stores/hookStore.jsx
@@ -2,6 +2,7 @@ import Reflux from 'reflux';
 import _ from 'lodash';
 
 let validHookNames = new Set([
+  'component:org-members-view',
   'footer',
   'settings:organization-navigation',
   'settings:organization-navigation-config',
