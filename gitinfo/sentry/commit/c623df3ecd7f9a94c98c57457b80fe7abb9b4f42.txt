commit c623df3ecd7f9a94c98c57457b80fe7abb9b4f42
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Feb 23 22:25:21 2012 -0800

    Gracefully handle plugin errors in plugins.first()

diff --git a/sentry/plugins/base.py b/sentry/plugins/base.py
index 9442b06854..8909b73e59 100644
--- a/sentry/plugins/base.py
+++ b/sentry/plugins/base.py
@@ -8,6 +8,8 @@ sentry.plugins.base
 
 __all__ = ('Plugin', 'plugins', 'register')
 
+import logging
+
 from django.core.urlresolvers import reverse
 from django.http import HttpResponseRedirect, HttpResponse
 
@@ -55,7 +57,16 @@ class PluginManager(InstanceManager):
 
     def first(self, func_name, *args, **kwargs):
         for plugin in self.all():
-            result = getattr(plugin, func_name)(*args, **kwargs)
+            try:
+                result = getattr(plugin, func_name)(*args, **kwargs)
+            except Exception, e:
+                logger = logging.getLogger('sentry.plugins')
+                logger.error('Error processing %s() on %r: %s', func_name, plugin.__class__, e, extra={
+                    'args': args,
+                    'kwargs': kwargs,
+                }, exc_info=True)
+                continue
+
             if result is not None:
                 return result
 
