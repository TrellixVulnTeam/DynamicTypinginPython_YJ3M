commit 45fe054d7fe3a3d434d39211001c6c3701774c70
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Mon Jul 2 10:28:04 2018 -0700

    feat(ui): Use PlatformList as ProjectBadge Avatar (#8852)

diff --git a/src/sentry/static/sentry/app/components/avatar/projectAvatar.jsx b/src/sentry/static/sentry/app/components/avatar/projectAvatar.jsx
index e9c78bf04f..9b8a233d18 100644
--- a/src/sentry/static/sentry/app/components/avatar/projectAvatar.jsx
+++ b/src/sentry/static/sentry/app/components/avatar/projectAvatar.jsx
@@ -1,7 +1,7 @@
 import React from 'react';
 
-import {explodeSlug} from 'app/utils';
 import BaseAvatar from 'app/components/avatar/baseAvatar';
+import PlatformList from 'app/components/platformList';
 import SentryTypes from 'app/proptypes';
 
 class ProjectAvatar extends React.Component {
@@ -12,21 +12,8 @@ class ProjectAvatar extends React.Component {
 
   render() {
     let {project, ...props} = this.props;
-    if (!project) return null;
-    let slug = (project && project.slug) || '';
-    let title = explodeSlug(slug);
 
-    return (
-      <BaseAvatar
-        {...props}
-        type={(project.avatar && project.avatar.avatarType) || 'letter_avatar'}
-        uploadPath="project-avatar"
-        uploadId={project.avatar && project.avatar.avatarUuid}
-        letterId={slug}
-        tooltip={slug}
-        title={title}
-      />
-    );
+    return <PlatformList platforms={(project && project.platforms) || []} {...props} />;
   }
 }
 export default ProjectAvatar;
diff --git a/src/sentry/static/sentry/app/components/idBadge/baseBadge.jsx b/src/sentry/static/sentry/app/components/idBadge/baseBadge.jsx
index 325f4fe2cf..4a84e5022f 100644
--- a/src/sentry/static/sentry/app/components/idBadge/baseBadge.jsx
+++ b/src/sentry/static/sentry/app/components/idBadge/baseBadge.jsx
@@ -13,18 +13,27 @@ class BaseBadge extends React.Component {
     team: SentryTypes.Team,
     organization: SentryTypes.Organization,
     project: SentryTypes.Project,
+
     /**
      * Avatar size
      */
     avatarSize: PropTypes.number,
+
     /**
      * Hides the avatar
      */
     hideAvatar: PropTypes.bool,
+
+    /**
+     * Additional props for Avatar component
+     */
+    avatarProps: PropTypes.object,
+
     /**
      * Hides the main display name
      */
     hideName: PropTypes.bool,
+
     className: PropTypes.string,
     displayName: PropTypes.node,
     description: PropTypes.node,
@@ -32,6 +41,7 @@ class BaseBadge extends React.Component {
   };
 
   static defaultProps = {
+    avatarProps: {},
     avatarSize: 24,
     hideAvatar: false,
   };
@@ -45,6 +55,7 @@ class BaseBadge extends React.Component {
       avatarClassName,
       displayName,
       description,
+      avatarProps,
       team,
       organization,
       project,
@@ -59,7 +70,12 @@ class BaseBadge extends React.Component {
     return (
       <Flex align="center" className={className}>
         {!hideAvatar && (
-          <StyledAvatar css={avatarClassName} size={avatarSize} {...data} />
+          <StyledAvatar
+            css={avatarClassName}
+            size={avatarSize}
+            {...avatarProps || {}}
+            {...data}
+          />
         )}
 
         <DisplayNameAndDescription>
diff --git a/src/sentry/static/sentry/app/components/idBadge/projectBadge.jsx b/src/sentry/static/sentry/app/components/idBadge/projectBadge.jsx
index 6b73465f0f..860008bc4d 100644
--- a/src/sentry/static/sentry/app/components/idBadge/projectBadge.jsx
+++ b/src/sentry/static/sentry/app/components/idBadge/projectBadge.jsx
@@ -18,7 +18,7 @@ export default class ProjectBadge extends React.Component {
   };
 
   static defaultProps = {
-    hideAvatar: true,
+    hideAvatar: false,
     hideOverflow: true,
   };
 
diff --git a/src/sentry/static/sentry/app/components/platformList.jsx b/src/sentry/static/sentry/app/components/platformList.jsx
index 86e0572cfa..343a5dbc24 100644
--- a/src/sentry/static/sentry/app/components/platformList.jsx
+++ b/src/sentry/static/sentry/app/components/platformList.jsx
@@ -5,61 +5,83 @@ import styled from 'react-emotion';
 import Platformicon from 'app/components/platformicon';
 import space from '../styles/space';
 
-const MAX_PLATFORMS = 3;
-const ICON_SIZE = 16;
-
 class PlatformList extends React.Component {
   static propTypes = {
     platforms: PropTypes.array,
-    direction: PropTypes.string,
+    direction: PropTypes.oneOf(['right', 'left']),
+    /**
+     * Maximum number of platform icons to display
+     */
+    max: PropTypes.number,
+    /**
+     * Platform icon size in pixels
+     */
+    size: PropTypes.number,
+    /**
+     * Will set container width to be size of having `this.props.max` icons
+     * This is good for lists where the project name is displayed
+     */
+    consistentWidth: PropTypes.bool,
   };
 
   static defaultProps = {
     platforms: [],
     direction: 'right',
+    max: 3,
+    size: 16,
+    consistentWidth: false,
   };
 
-  getIcon(platform) {
-    return (
-      <StyledPlatformIcon key={platform} platform={platform} size={ICON_SIZE + 'px'} />
-    );
-  }
+  getIcon = platform => {
+    const {size} = this.props;
+    return <StyledPlatformIcon key={platform} platform={platform} size={size} />;
+  };
 
-  getIcons(platforms) {
+  getIcons = platforms => {
     return platforms
       .slice()
       .reverse()
       .map(this.getIcon);
-  }
+  };
 
   render() {
-    const {platforms} = this.props;
-    const platformsPreview = platforms.slice(0, MAX_PLATFORMS);
+    const {platforms, max, size, direction, consistentWidth} = this.props;
+    const platformsPreview = platforms.slice(0, max);
     return (
-      <PlatformIcons direction={this.props.direction} {...this.props}>
+      <PlatformIcons
+        direction={direction}
+        max={max}
+        size={size}
+        consistentWidth={consistentWidth}
+      >
         {platforms.length > 0 ? (
           this.getIcons(platformsPreview)
         ) : (
-          <StyledPlatformIcon size={ICON_SIZE + 'px'} platform="default" />
+          <StyledPlatformIcon size={size} platform="default" />
         )}
       </PlatformIcons>
     );
   }
 }
 
+const getOverlapWidth = size => Math.round(size / 4);
+
 const PlatformIcons = styled('div')`
   margin-right: ${space(0.5)};
   display: flex;
   flex-direction: row;
-  justify-content: ${p => (p.direction == 'left' ? 'flex-end' : 'flex-start')};
-  width: 24px;
+  justify-content: ${p => (p.direction === 'right' ? 'flex-end' : 'flex-start')};
+  ${p =>
+    p.consistentWidth && `width: ${p.size + (p.max - 1) * getOverlapWidth(p.size)}px;`};
 `;
 
-const StyledPlatformIcon = styled(Platformicon)`
+const StyledPlatformIcon = styled(({size, ...props}) => (
+  <Platformicon size={`${size}px`} {...props} />
+))`
   border-radius: 3px;
   box-shadow: 0 0 0 1px #fff;
   &:not(:first-child) {
-    margin-left: ${ICON_SIZE * -1 + 4}px;
+    margin-left: ${p => `${p.size * -1 + getOverlapWidth(p.size)}px;`};
   }
 `;
 
diff --git a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
index f16643984d..03a3f033bd 100644
--- a/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
+++ b/src/sentry/static/sentry/app/components/projectHeader/projectSelector.jsx
@@ -1,21 +1,18 @@
+import {browserHistory} from 'react-router';
 import PropTypes from 'prop-types';
 import React from 'react';
-import createReactClass from 'create-react-class';
-import {browserHistory} from 'react-router';
 import classNames from 'classnames';
-import {Flex} from 'grid-emotion';
+import createReactClass from 'create-react-class';
+import styled from 'react-emotion';
 
+import {sortArray} from 'app/utils';
+import {t} from 'app/locale';
 import ApiMixin from 'app/mixins/apiMixin';
-
-import ProjectLabel from 'app/components/projectLabel';
 import DropdownLink from 'app/components/dropdownLink';
-import MenuItem from 'app/components/menuItem';
+import IdBadge from 'app/components/idBadge';
 import Link from 'app/components/link';
-import PlatformList from 'app/components/platformList';
-
-import {sortArray} from 'app/utils';
-import {t} from 'app/locale';
-import styled from 'react-emotion';
+import MenuItem from 'app/components/menuItem';
+import ProjectLabel from 'app/components/projectLabel';
 
 const ProjectSelector = createReactClass({
   displayName: 'ProjectSelector',
@@ -202,7 +199,6 @@ const ProjectSelector = createReactClass({
   getProjectNode(team, project, highlightText, hasSingleTeam, isSelected) {
     let projectId = project.slug;
     let label = this.getProjectLabel(team, project, hasSingleTeam, highlightText);
-    const platforms = (project && project.platforms) || [];
 
     let menuItemProps = {
       key: projectId, // TODO: what if two projects w/ same name under diff orgs?
@@ -218,13 +214,15 @@ const ProjectSelector = createReactClass({
 
     return (
       <MenuItem {...menuItemProps}>
-        <ProjectBadge>
-          <Flex>
-            <StyledPlatformList platforms={platforms} direction="left" />
-            {label}
-          </Flex>
+        <ProjectRow>
+          <IdBadge
+            project={project}
+            avatarSize={16}
+            displayName={label}
+            avatarProps={{consistentWidth: true}}
+          />
           {project.isBookmarked && <BookmarkIcon />}
-        </ProjectBadge>
+        </ProjectRow>
       </MenuItem>
     );
   },
@@ -255,7 +253,6 @@ const ProjectSelector = createReactClass({
 
     // in case we have something to highlight we just render a replacement
     // selector without the callsigns.
-    // TODO(mitsuhiko): make this work with the project label.
     highlightText = highlightText.toLowerCase();
     let idx = text.toLowerCase().indexOf(highlightText);
     if (idx === -1) {
@@ -271,17 +268,23 @@ const ProjectSelector = createReactClass({
   },
 
   getLinkNode(team, project) {
-    let org = this.props.organization;
+    let {organization} = this.props;
     let label = this.getProjectLabel(team, project);
 
-    if (!this.context.location) {
-      return <a {...this.getProjectUrlProps(project)}>{label}</a>;
-    }
-
-    let orgId = org.slug;
-    let projectId = project.slug;
+    // TODO(billy): Only show platform icons for internal users
+    let internalOnly =
+      organization &&
+      organization.features &&
+      organization.features.includes('internal-catchall');
 
-    return <Link to={`/${orgId}/${projectId}/`}>{label}</Link>;
+    return (
+      <IdBadge
+        project={project}
+        avatarSize={16}
+        hideAvatar={!internalOnly}
+        displayName={<Link {...this.getProjectUrlProps(project)}>{label}</Link>}
+      />
+    );
   },
 
   renderProjectList({organization: org, projects, filter, hasProjectWrite}) {
@@ -402,15 +405,11 @@ const ProjectSelector = createReactClass({
   },
 });
 
-const StyledPlatformList = styled(PlatformList)`
-  width: 28px;
-  margin-right: 6px;
-`;
-
-const ProjectBadge = styled.div`
+const ProjectRow = styled.div`
   display: flex;
   align-items: center;
   justify-content: space-between;
+  margin-left: 4px;
 `;
 
 const BookmarkIcon = styled(props => (
diff --git a/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx b/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
index 566bc3523f..a3a1efcbad 100644
--- a/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDashboard/projectCard.jsx
@@ -1,26 +1,26 @@
-import createReactClass from 'create-react-class';
+import {Flex, Box} from 'grid-emotion';
+import {withRouter} from 'react-router';
+import PropTypes from 'prop-types';
 import React from 'react';
 import Reflux from 'reflux';
-import PropTypes from 'prop-types';
+import createReactClass from 'create-react-class';
 import styled from 'react-emotion';
-import {withRouter} from 'react-router';
-import {Flex, Box} from 'grid-emotion';
 
-import {addErrorMessage} from 'app/actionCreators/indicator';
-import SentryTypes from 'app/proptypes';
 import {Client} from 'app/api';
-import Link from 'app/components/link';
-import space from 'app/styles/space';
-import Tooltip from 'app/components/tooltip';
+import {addErrorMessage} from 'app/actionCreators/indicator';
 import {t} from 'app/locale';
 import {update, loadStatsForProject} from 'app/actionCreators/projects';
+import IdBadge from 'app/components/idBadge';
+import Link from 'app/components/link';
 import ProjectsStatsStore from 'app/stores/projectsStatsStore';
+import SentryTypes from 'app/proptypes';
+import Tooltip from 'app/components/tooltip';
 import overflowEllipsis from 'app/styles/overflowEllipsis';
-import PlatformList from 'app/components/platformList';
+import space from 'app/styles/space';
 
 import Chart from './chart';
-import NoEvents from './noEvents';
 import Deploys from './deploys';
+import NoEvents from './noEvents';
 
 class ProjectCard extends React.Component {
   static propTypes = {
@@ -62,25 +62,28 @@ class ProjectCard extends React.Component {
       ? t('Remove from bookmarks')
       : t('Add to bookmarks');
 
-    const platforms = (project && project.platforms) || [];
-
     return (
       <ProjectCardWrapper data-test-id={slug} width={['100%', '50%', '33%', '25%']}>
         {stats ? (
           <StyledProjectCard>
             <Flex justify="space-between" align="center">
               <Box ml={2}>
-                <PlatformList direction={'right'} platforms={platforms} />
+                <IdBadge
+                  project={project}
+                  avatarSize={24}
+                  displayName={
+                    <StyledTitle>
+                      {hasProjectAccess ? (
+                        <Link to={`/${params.orgId}/${slug}/`}>
+                          <strong>{slug}</strong>
+                        </Link>
+                      ) : (
+                        <div>{slug}</div>
+                      )}
+                    </StyledTitle>
+                  }
+                />
               </Box>
-              <StyledTitle>
-                {hasProjectAccess ? (
-                  <Link to={`/${params.orgId}/${slug}/`}>
-                    <strong>{slug}</strong>
-                  </Link>
-                ) : (
-                  <div>{slug}</div>
-                )}
-              </StyledTitle>
               <Tooltip title={bookmarkText}>
                 <Star
                   active={isBookmarked}
diff --git a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/projectCrumb.jsx b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/projectCrumb.jsx
index f47f236211..79a08fa2c6 100644
--- a/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/projectCrumb.jsx
+++ b/src/sentry/static/sentry/app/views/settings/components/settingsBreadcrumb/projectCrumb.jsx
@@ -55,7 +55,7 @@ class ProjectCrumb extends React.Component {
                   projectId: latestProject.slug,
                 })}
               >
-                <IdBadge project={latestProject} />
+                <IdBadge project={latestProject} avatarSize={18} />
               </TextLink>
             )}
           </ProjectName>
@@ -77,7 +77,11 @@ class ProjectCrumb extends React.Component {
           value: project.slug,
           label: (
             <MenuItem>
-              <IdBadge project={project} />
+              <IdBadge
+                project={project}
+                avatarProps={{consistentWidth: true}}
+                avatarSize={18}
+              />
             </MenuItem>
           ),
         }))}
diff --git a/tests/js/spec/components/idBadge/index.spec.jsx b/tests/js/spec/components/idBadge/index.spec.jsx
index da6a3dd59a..1e746751e5 100644
--- a/tests/js/spec/components/idBadge/index.spec.jsx
+++ b/tests/js/spec/components/idBadge/index.spec.jsx
@@ -21,7 +21,6 @@ describe('IdBadge', function() {
     let wrapper = shallow(<IdBadge project={TestStubs.Project()} />, routerContext);
 
     expect(wrapper.find('ProjectBadge')).toHaveLength(1);
-    expect(wrapper.find('ProjectBadge').prop('hideAvatar')).toBe(true);
   });
 
   it('renders the correct component when `organization` property is passed', function() {
diff --git a/tests/js/spec/components/idBadge/projectBadge.spec.jsx b/tests/js/spec/components/idBadge/projectBadge.spec.jsx
index e278f0d983..1eb78ba675 100644
--- a/tests/js/spec/components/idBadge/projectBadge.spec.jsx
+++ b/tests/js/spec/components/idBadge/projectBadge.spec.jsx
@@ -8,7 +8,8 @@ describe('ProjectBadge', function() {
       <ProjectBadge project={TestStubs.Project()} />,
       TestStubs.routerContext()
     );
-    expect(wrapper.find('StyledAvatar')).toHaveLength(0);
+    expect(wrapper.find('StyledAvatar')).toHaveLength(1);
+    expect(wrapper.find('PlatformList')).toHaveLength(1);
     expect(wrapper.find('BadgeDisplayName').text()).toEqual('project-slug');
   });
 });
diff --git a/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap b/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
index 4b7560e0ca..dd1b4fe216 100644
--- a/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
+++ b/tests/js/spec/components/projectHeader/__snapshots__/projectSelector.spec.jsx.snap
@@ -5,64 +5,56 @@ exports[`ProjectSelector render() can filter projects by project name 1`] = `
   organization={
     Object {
       "access": Array [],
+      "features": Array [
+        "new-teams",
+      ],
       "id": "org",
+      "name": "Organization Name",
+      "onboardingTasks": Array [],
       "projects": Array [
         Object {
+          "hasAccess": true,
+          "id": "test-project",
+          "isBookmarked": false,
           "isMember": true,
-          "name": "Test Project",
+          "name": "Project Name",
           "slug": "test-project",
-          "team": Object {
-            "isMember": true,
-            "name": "Test Team",
-            "projects": Array [
-              Object {
-                "name": "Test Project",
-                "slug": "test-project",
-              },
-              Object {
-                "name": "Another Project",
-                "slug": "another-project",
-              },
-            ],
-            "slug": "test-team",
-          },
+          "teams": Array [
+            Object {
+              "id": "test-team",
+              "isMember": true,
+              "name": "Team Name",
+              "slug": "test-team",
+            },
+          ],
         },
         Object {
+          "hasAccess": true,
+          "id": "another-project",
+          "isBookmarked": false,
           "isMember": true,
-          "name": "Another Project",
+          "name": "Project Name",
           "slug": "another-project",
-          "team": Object {
-            "isMember": true,
-            "name": "Test Team",
-            "projects": Array [
-              Object {
-                "name": "Test Project",
-                "slug": "test-project",
-              },
-              Object {
-                "name": "Another Project",
-                "slug": "another-project",
-              },
-            ],
-            "slug": "test-team",
-          },
+          "teams": Array [
+            Object {
+              "id": "test-team",
+              "isMember": true,
+              "name": "Team Name",
+              "slug": "test-team",
+            },
+          ],
         },
       ],
       "slug": "org",
+      "status": Object {
+        "id": "active",
+        "name": "active",
+      },
       "teams": Array [
         Object {
+          "id": "test-team",
           "isMember": true,
-          "name": "Test Team",
-          "projects": Array [
-            Object {
-              "name": "Test Project",
-              "slug": "test-project",
-            },
-            Object {
-              "name": "Another Project",
-              "slug": "another-project",
-            },
-          ],
+          "name": "Team Name",
           "slug": "test-team",
         },
       ],
@@ -160,77 +152,303 @@ exports[`ProjectSelector render() can filter projects by project name 1`] = `
                     onClick={[Function]}
                     tabIndex="-1"
                   >
-                    <ProjectBadge>
+                    <ProjectRow>
                       <div
-                        className="css-1dx2nj3-ProjectBadge et07ovj1"
+                        className="css-130agdj-ProjectRow et07ovj0"
                       >
-                        <Flex>
-                          <Base
-                            className="css-sncxrr"
+                        <IdBadge
+                          avatarProps={
+                            Object {
+                              "consistentWidth": true,
+                            }
+                          }
+                          avatarSize={16}
+                          displayName={
+                            <span>
+                              
+                              <strong
+                                className="highlight"
+                              >
+                                another
+                              </strong>
+                              -project
+                            </span>
+                          }
+                          project={
+                            Object {
+                              "hasAccess": true,
+                              "id": "another-project",
+                              "isBookmarked": false,
+                              "isMember": true,
+                              "name": "Project Name",
+                              "slug": "another-project",
+                              "teams": Array [
+                                Object {
+                                  "id": "test-team",
+                                  "isMember": true,
+                                  "name": "Team Name",
+                                  "slug": "test-team",
+                                },
+                              ],
+                            }
+                          }
+                        >
+                          <InlineErrorBoundary
+                            mini={true}
                           >
-                            <div
-                              className="css-sncxrr"
-                              is={null}
+                            <ErrorBoundary
+                              className="css-otlbo1-InlineErrorBoundary e83vi020"
+                              mini={true}
                             >
-                              <StyledPlatformList
-                                direction="left"
-                                platforms={Array []}
+                              <ProjectBadge
+                                avatarProps={
+                                  Object {
+                                    "consistentWidth": true,
+                                  }
+                                }
+                                avatarSize={16}
+                                displayName={
+                                  <span>
+                                    
+                                    <strong
+                                      className="highlight"
+                                    >
+                                      another
+                                    </strong>
+                                    -project
+                                  </span>
+                                }
+                                hideAvatar={false}
+                                hideOverflow={true}
+                                project={
+                                  Object {
+                                    "hasAccess": true,
+                                    "id": "another-project",
+                                    "isBookmarked": false,
+                                    "isMember": true,
+                                    "name": "Project Name",
+                                    "slug": "another-project",
+                                    "teams": Array [
+                                      Object {
+                                        "id": "test-team",
+                                        "isMember": true,
+                                        "name": "Team Name",
+                                        "slug": "test-team",
+                                      },
+                                    ],
+                                  }
+                                }
                               >
-                                <PlatformList
-                                  className="css-16pu8f4-StyledPlatformList et07ovj0"
-                                  direction="left"
-                                  platforms={Array []}
+                                <BaseBadge
+                                  avatarProps={
+                                    Object {
+                                      "consistentWidth": true,
+                                    }
+                                  }
+                                  avatarSize={16}
+                                  displayName={
+                                    <span>
+                                      
+                                      <strong
+                                        className="highlight"
+                                      >
+                                        another
+                                      </strong>
+                                      -project
+                                    </span>
+                                  }
+                                  hideAvatar={false}
+                                  project={
+                                    Object {
+                                      "hasAccess": true,
+                                      "id": "another-project",
+                                      "isBookmarked": false,
+                                      "isMember": true,
+                                      "name": "Project Name",
+                                      "slug": "another-project",
+                                      "teams": Array [
+                                        Object {
+                                          "id": "test-team",
+                                          "isMember": true,
+                                          "name": "Team Name",
+                                          "slug": "test-team",
+                                        },
+                                      ],
+                                    }
+                                  }
                                 >
-                                  <PlatformIcons
-                                    className="css-16pu8f4-StyledPlatformList et07ovj0"
-                                    direction="left"
-                                    platforms={Array []}
+                                  <Flex
+                                    align="center"
                                   >
-                                    <div
-                                      className="et07ovj0 css-1or6tzj-PlatformIcons-StyledPlatformList ezvce7z0"
-                                      direction="left"
+                                    <Base
+                                      align="center"
+                                      className="css-5ipae5"
                                     >
-                                      <StyledPlatformIcon
-                                        platform="default"
-                                        size="16px"
+                                      <div
+                                        className="css-5ipae5"
+                                        is={null}
                                       >
-                                        <Platformicon
-                                          className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
-                                          platform="default"
-                                          size="16px"
+                                        <StyledAvatar
+                                          className="css-0"
+                                          consistentWidth={true}
+                                          project={
+                                            Object {
+                                              "hasAccess": true,
+                                              "id": "another-project",
+                                              "isBookmarked": false,
+                                              "isMember": true,
+                                              "name": "Project Name",
+                                              "slug": "another-project",
+                                              "teams": Array [
+                                                Object {
+                                                  "id": "test-team",
+                                                  "isMember": true,
+                                                  "name": "Team Name",
+                                                  "slug": "test-team",
+                                                },
+                                              ],
+                                            }
+                                          }
+                                          size={16}
                                         >
-                                          <img
-                                            className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
-                                            height="16px"
-                                            src={
+                                          <Avatar
+                                            className="css-robds0-StyledAvatar e165dl3i0"
+                                            consistentWidth={true}
+                                            hasTooltip={false}
+                                            project={
                                               Object {
-                                                "default": Object {
-                                                  "id": "test",
-                                                  "viewBox": Object {},
-                                                },
+                                                "hasAccess": true,
+                                                "id": "another-project",
+                                                "isBookmarked": false,
+                                                "isMember": true,
+                                                "name": "Project Name",
+                                                "slug": "another-project",
+                                                "teams": Array [
+                                                  Object {
+                                                    "id": "test-team",
+                                                    "isMember": true,
+                                                    "name": "Team Name",
+                                                    "slug": "test-team",
+                                                  },
+                                                ],
                                               }
                                             }
-                                            width="16px"
-                                          />
-                                        </Platformicon>
-                                      </StyledPlatformIcon>
-                                    </div>
-                                  </PlatformIcons>
-                                </PlatformList>
-                              </StyledPlatformList>
-                              <span>
-                                <strong
-                                  className="highlight"
-                                >
-                                  Another
-                                </strong>
-                                 Project
-                              </span>
-                            </div>
-                          </Base>
-                        </Flex>
+                                            size={16}
+                                          >
+                                            <ProjectAvatar
+                                              className="css-robds0-StyledAvatar e165dl3i0"
+                                              consistentWidth={true}
+                                              hasTooltip={false}
+                                              project={
+                                                Object {
+                                                  "hasAccess": true,
+                                                  "id": "another-project",
+                                                  "isBookmarked": false,
+                                                  "isMember": true,
+                                                  "name": "Project Name",
+                                                  "slug": "another-project",
+                                                  "teams": Array [
+                                                    Object {
+                                                      "id": "test-team",
+                                                      "isMember": true,
+                                                      "name": "Team Name",
+                                                      "slug": "test-team",
+                                                    },
+                                                  ],
+                                                }
+                                              }
+                                              size={16}
+                                            >
+                                              <PlatformList
+                                                className="css-robds0-StyledAvatar e165dl3i0"
+                                                consistentWidth={true}
+                                                direction="right"
+                                                hasTooltip={false}
+                                                max={3}
+                                                platforms={Array []}
+                                                size={16}
+                                              >
+                                                <PlatformIcons
+                                                  consistentWidth={true}
+                                                  direction="right"
+                                                  max={3}
+                                                  size={16}
+                                                >
+                                                  <div
+                                                    className="css-10kccj9-PlatformIcons ezvce7z0"
+                                                    direction="right"
+                                                    max={3}
+                                                    size={16}
+                                                  >
+                                                    <StyledPlatformIcon
+                                                      platform="default"
+                                                      size={16}
+                                                    >
+                                                      <Component
+                                                        className="css-htodfm-StyledPlatformIcon ezvce7z1"
+                                                        platform="default"
+                                                        size={16}
+                                                      >
+                                                        <Platformicon
+                                                          className="css-htodfm-StyledPlatformIcon ezvce7z1"
+                                                          platform="default"
+                                                          size="16px"
+                                                        >
+                                                          <img
+                                                            className="css-htodfm-StyledPlatformIcon ezvce7z1"
+                                                            height="16px"
+                                                            src={
+                                                              Object {
+                                                                "default": Object {
+                                                                  "id": "test",
+                                                                  "viewBox": Object {},
+                                                                },
+                                                              }
+                                                            }
+                                                            width="16px"
+                                                          />
+                                                        </Platformicon>
+                                                      </Component>
+                                                    </StyledPlatformIcon>
+                                                  </div>
+                                                </PlatformIcons>
+                                              </PlatformList>
+                                            </ProjectAvatar>
+                                          </Avatar>
+                                        </StyledAvatar>
+                                        <DisplayNameAndDescription>
+                                          <Base
+                                            className="css-1eifx5k-DisplayNameAndDescription e165dl3i1"
+                                          >
+                                            <div
+                                              className="css-1eifx5k-DisplayNameAndDescription e165dl3i1"
+                                              is={null}
+                                            >
+                                              <div
+                                                data-test-id="badge-display-name"
+                                              >
+                                                <span>
+                                                  <strong
+                                                    className="highlight"
+                                                  >
+                                                    another
+                                                  </strong>
+                                                  -project
+                                                </span>
+                                              </div>
+                                            </div>
+                                          </Base>
+                                        </DisplayNameAndDescription>
+                                      </div>
+                                    </Base>
+                                  </Flex>
+                                </BaseBadge>
+                              </ProjectBadge>
+                            </ErrorBoundary>
+                          </InlineErrorBoundary>
+                        </IdBadge>
                       </div>
-                    </ProjectBadge>
+                    </ProjectRow>
                   </a>
                 </li>
               </MenuItem>
@@ -248,64 +466,56 @@ exports[`ProjectSelector render() can filter projects by team name/project name
   organization={
     Object {
       "access": Array [],
+      "features": Array [
+        "new-teams",
+      ],
       "id": "org",
+      "name": "Organization Name",
+      "onboardingTasks": Array [],
       "projects": Array [
         Object {
+          "hasAccess": true,
+          "id": "test-project",
+          "isBookmarked": false,
           "isMember": true,
-          "name": "Test Project",
+          "name": "Project Name",
           "slug": "test-project",
-          "team": Object {
-            "isMember": true,
-            "name": "Test Team",
-            "projects": Array [
-              Object {
-                "name": "Test Project",
-                "slug": "test-project",
-              },
-              Object {
-                "name": "Another Project",
-                "slug": "another-project",
-              },
-            ],
-            "slug": "test-team",
-          },
+          "teams": Array [
+            Object {
+              "id": "test-team",
+              "isMember": true,
+              "name": "Team Name",
+              "slug": "test-team",
+            },
+          ],
         },
         Object {
+          "hasAccess": true,
+          "id": "another-project",
+          "isBookmarked": false,
           "isMember": true,
-          "name": "Another Project",
+          "name": "Project Name",
           "slug": "another-project",
-          "team": Object {
-            "isMember": true,
-            "name": "Test Team",
-            "projects": Array [
-              Object {
-                "name": "Test Project",
-                "slug": "test-project",
-              },
-              Object {
-                "name": "Another Project",
-                "slug": "another-project",
-              },
-            ],
-            "slug": "test-team",
-          },
+          "teams": Array [
+            Object {
+              "id": "test-team",
+              "isMember": true,
+              "name": "Team Name",
+              "slug": "test-team",
+            },
+          ],
         },
       ],
       "slug": "org",
+      "status": Object {
+        "id": "active",
+        "name": "active",
+      },
       "teams": Array [
         Object {
+          "id": "test-team",
           "isMember": true,
-          "name": "Test Team",
-          "projects": Array [
-            Object {
-              "name": "Test Project",
-              "slug": "test-project",
-            },
-            Object {
-              "name": "Another Project",
-              "slug": "another-project",
-            },
-          ],
+          "name": "Team Name",
           "slug": "test-team",
         },
       ],
@@ -385,91 +595,6 @@ exports[`ProjectSelector render() can filter projects by team name/project name
                   value="TEST"
                 />
               </li>
-              <MenuItem
-                className=""
-                href="/org/another-project/"
-                key="another-project"
-                linkClassName=""
-              >
-                <li
-                  className=""
-                  href={null}
-                  role="presentation"
-                  title={null}
-                >
-                  <a
-                    className=""
-                    href="/org/another-project/"
-                    onClick={[Function]}
-                    tabIndex="-1"
-                  >
-                    <ProjectBadge>
-                      <div
-                        className="css-1dx2nj3-ProjectBadge et07ovj1"
-                      >
-                        <Flex>
-                          <Base
-                            className="css-sncxrr"
-                          >
-                            <div
-                              className="css-sncxrr"
-                              is={null}
-                            >
-                              <StyledPlatformList
-                                direction="left"
-                                platforms={Array []}
-                              >
-                                <PlatformList
-                                  className="css-16pu8f4-StyledPlatformList et07ovj0"
-                                  direction="left"
-                                  platforms={Array []}
-                                >
-                                  <PlatformIcons
-                                    className="css-16pu8f4-StyledPlatformList et07ovj0"
-                                    direction="left"
-                                    platforms={Array []}
-                                  >
-                                    <div
-                                      className="et07ovj0 css-1or6tzj-PlatformIcons-StyledPlatformList ezvce7z0"
-                                      direction="left"
-                                    >
-                                      <StyledPlatformIcon
-                                        platform="default"
-                                        size="16px"
-                                      >
-                                        <Platformicon
-                                          className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
-                                          platform="default"
-                                          size="16px"
-                                        >
-                                          <img
-                                            className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
-                                            height="16px"
-                                            src={
-                                              Object {
-                                                "default": Object {
-                                                  "id": "test",
-                                                  "viewBox": Object {},
-                                                },
-                                              }
-                                            }
-                                            width="16px"
-                                          />
-                                        </Platformicon>
-                                      </StyledPlatformIcon>
-                                    </div>
-                                  </PlatformIcons>
-                                </PlatformList>
-                              </StyledPlatformList>
-                              Another Project
-                            </div>
-                          </Base>
-                        </Flex>
-                      </div>
-                    </ProjectBadge>
-                  </a>
-                </li>
-              </MenuItem>
               <MenuItem
                 className=""
                 href="/org/test-project/"
@@ -488,77 +613,303 @@ exports[`ProjectSelector render() can filter projects by team name/project name
                     onClick={[Function]}
                     tabIndex="-1"
                   >
-                    <ProjectBadge>
+                    <ProjectRow>
                       <div
-                        className="css-1dx2nj3-ProjectBadge et07ovj1"
+                        className="css-130agdj-ProjectRow et07ovj0"
                       >
-                        <Flex>
-                          <Base
-                            className="css-sncxrr"
+                        <IdBadge
+                          avatarProps={
+                            Object {
+                              "consistentWidth": true,
+                            }
+                          }
+                          avatarSize={16}
+                          displayName={
+                            <span>
+                              
+                              <strong
+                                className="highlight"
+                              >
+                                test
+                              </strong>
+                              -project
+                            </span>
+                          }
+                          project={
+                            Object {
+                              "hasAccess": true,
+                              "id": "test-project",
+                              "isBookmarked": false,
+                              "isMember": true,
+                              "name": "Project Name",
+                              "slug": "test-project",
+                              "teams": Array [
+                                Object {
+                                  "id": "test-team",
+                                  "isMember": true,
+                                  "name": "Team Name",
+                                  "slug": "test-team",
+                                },
+                              ],
+                            }
+                          }
+                        >
+                          <InlineErrorBoundary
+                            mini={true}
                           >
-                            <div
-                              className="css-sncxrr"
-                              is={null}
+                            <ErrorBoundary
+                              className="css-otlbo1-InlineErrorBoundary e83vi020"
+                              mini={true}
                             >
-                              <StyledPlatformList
-                                direction="left"
-                                platforms={Array []}
+                              <ProjectBadge
+                                avatarProps={
+                                  Object {
+                                    "consistentWidth": true,
+                                  }
+                                }
+                                avatarSize={16}
+                                displayName={
+                                  <span>
+                                    
+                                    <strong
+                                      className="highlight"
+                                    >
+                                      test
+                                    </strong>
+                                    -project
+                                  </span>
+                                }
+                                hideAvatar={false}
+                                hideOverflow={true}
+                                project={
+                                  Object {
+                                    "hasAccess": true,
+                                    "id": "test-project",
+                                    "isBookmarked": false,
+                                    "isMember": true,
+                                    "name": "Project Name",
+                                    "slug": "test-project",
+                                    "teams": Array [
+                                      Object {
+                                        "id": "test-team",
+                                        "isMember": true,
+                                        "name": "Team Name",
+                                        "slug": "test-team",
+                                      },
+                                    ],
+                                  }
+                                }
                               >
-                                <PlatformList
-                                  className="css-16pu8f4-StyledPlatformList et07ovj0"
-                                  direction="left"
-                                  platforms={Array []}
+                                <BaseBadge
+                                  avatarProps={
+                                    Object {
+                                      "consistentWidth": true,
+                                    }
+                                  }
+                                  avatarSize={16}
+                                  displayName={
+                                    <span>
+                                      
+                                      <strong
+                                        className="highlight"
+                                      >
+                                        test
+                                      </strong>
+                                      -project
+                                    </span>
+                                  }
+                                  hideAvatar={false}
+                                  project={
+                                    Object {
+                                      "hasAccess": true,
+                                      "id": "test-project",
+                                      "isBookmarked": false,
+                                      "isMember": true,
+                                      "name": "Project Name",
+                                      "slug": "test-project",
+                                      "teams": Array [
+                                        Object {
+                                          "id": "test-team",
+                                          "isMember": true,
+                                          "name": "Team Name",
+                                          "slug": "test-team",
+                                        },
+                                      ],
+                                    }
+                                  }
                                 >
-                                  <PlatformIcons
-                                    className="css-16pu8f4-StyledPlatformList et07ovj0"
-                                    direction="left"
-                                    platforms={Array []}
+                                  <Flex
+                                    align="center"
                                   >
-                                    <div
-                                      className="et07ovj0 css-1or6tzj-PlatformIcons-StyledPlatformList ezvce7z0"
-                                      direction="left"
+                                    <Base
+                                      align="center"
+                                      className="css-5ipae5"
                                     >
-                                      <StyledPlatformIcon
-                                        platform="default"
-                                        size="16px"
+                                      <div
+                                        className="css-5ipae5"
+                                        is={null}
                                       >
-                                        <Platformicon
-                                          className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
-                                          platform="default"
-                                          size="16px"
+                                        <StyledAvatar
+                                          className="css-0"
+                                          consistentWidth={true}
+                                          project={
+                                            Object {
+                                              "hasAccess": true,
+                                              "id": "test-project",
+                                              "isBookmarked": false,
+                                              "isMember": true,
+                                              "name": "Project Name",
+                                              "slug": "test-project",
+                                              "teams": Array [
+                                                Object {
+                                                  "id": "test-team",
+                                                  "isMember": true,
+                                                  "name": "Team Name",
+                                                  "slug": "test-team",
+                                                },
+                                              ],
+                                            }
+                                          }
+                                          size={16}
                                         >
-                                          <img
-                                            className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
-                                            height="16px"
-                                            src={
+                                          <Avatar
+                                            className="css-robds0-StyledAvatar e165dl3i0"
+                                            consistentWidth={true}
+                                            hasTooltip={false}
+                                            project={
                                               Object {
-                                                "default": Object {
-                                                  "id": "test",
-                                                  "viewBox": Object {},
-                                                },
+                                                "hasAccess": true,
+                                                "id": "test-project",
+                                                "isBookmarked": false,
+                                                "isMember": true,
+                                                "name": "Project Name",
+                                                "slug": "test-project",
+                                                "teams": Array [
+                                                  Object {
+                                                    "id": "test-team",
+                                                    "isMember": true,
+                                                    "name": "Team Name",
+                                                    "slug": "test-team",
+                                                  },
+                                                ],
                                               }
                                             }
-                                            width="16px"
-                                          />
-                                        </Platformicon>
-                                      </StyledPlatformIcon>
-                                    </div>
-                                  </PlatformIcons>
-                                </PlatformList>
-                              </StyledPlatformList>
-                              <span>
-                                <strong
-                                  className="highlight"
-                                >
-                                  Test
-                                </strong>
-                                 Project
-                              </span>
-                            </div>
-                          </Base>
-                        </Flex>
+                                            size={16}
+                                          >
+                                            <ProjectAvatar
+                                              className="css-robds0-StyledAvatar e165dl3i0"
+                                              consistentWidth={true}
+                                              hasTooltip={false}
+                                              project={
+                                                Object {
+                                                  "hasAccess": true,
+                                                  "id": "test-project",
+                                                  "isBookmarked": false,
+                                                  "isMember": true,
+                                                  "name": "Project Name",
+                                                  "slug": "test-project",
+                                                  "teams": Array [
+                                                    Object {
+                                                      "id": "test-team",
+                                                      "isMember": true,
+                                                      "name": "Team Name",
+                                                      "slug": "test-team",
+                                                    },
+                                                  ],
+                                                }
+                                              }
+                                              size={16}
+                                            >
+                                              <PlatformList
+                                                className="css-robds0-StyledAvatar e165dl3i0"
+                                                consistentWidth={true}
+                                                direction="right"
+                                                hasTooltip={false}
+                                                max={3}
+                                                platforms={Array []}
+                                                size={16}
+                                              >
+                                                <PlatformIcons
+                                                  consistentWidth={true}
+                                                  direction="right"
+                                                  max={3}
+                                                  size={16}
+                                                >
+                                                  <div
+                                                    className="css-10kccj9-PlatformIcons ezvce7z0"
+                                                    direction="right"
+                                                    max={3}
+                                                    size={16}
+                                                  >
+                                                    <StyledPlatformIcon
+                                                      platform="default"
+                                                      size={16}
+                                                    >
+                                                      <Component
+                                                        className="css-htodfm-StyledPlatformIcon ezvce7z1"
+                                                        platform="default"
+                                                        size={16}
+                                                      >
+                                                        <Platformicon
+                                                          className="css-htodfm-StyledPlatformIcon ezvce7z1"
+                                                          platform="default"
+                                                          size="16px"
+                                                        >
+                                                          <img
+                                                            className="css-htodfm-StyledPlatformIcon ezvce7z1"
+                                                            height="16px"
+                                                            src={
+                                                              Object {
+                                                                "default": Object {
+                                                                  "id": "test",
+                                                                  "viewBox": Object {},
+                                                                },
+                                                              }
+                                                            }
+                                                            width="16px"
+                                                          />
+                                                        </Platformicon>
+                                                      </Component>
+                                                    </StyledPlatformIcon>
+                                                  </div>
+                                                </PlatformIcons>
+                                              </PlatformList>
+                                            </ProjectAvatar>
+                                          </Avatar>
+                                        </StyledAvatar>
+                                        <DisplayNameAndDescription>
+                                          <Base
+                                            className="css-1eifx5k-DisplayNameAndDescription e165dl3i1"
+                                          >
+                                            <div
+                                              className="css-1eifx5k-DisplayNameAndDescription e165dl3i1"
+                                              is={null}
+                                            >
+                                              <div
+                                                data-test-id="badge-display-name"
+                                              >
+                                                <span>
+                                                  <strong
+                                                    className="highlight"
+                                                  >
+                                                    test
+                                                  </strong>
+                                                  -project
+                                                </span>
+                                              </div>
+                                            </div>
+                                          </Base>
+                                        </DisplayNameAndDescription>
+                                      </div>
+                                    </Base>
+                                  </Flex>
+                                </BaseBadge>
+                              </ProjectBadge>
+                            </ErrorBoundary>
+                          </InlineErrorBoundary>
+                        </IdBadge>
                       </div>
-                    </ProjectBadge>
+                    </ProjectRow>
                   </a>
                 </li>
               </MenuItem>
@@ -615,39 +966,83 @@ exports[`ProjectSelector render() lists projects and has filter 1`] = `
       </li>
       <MenuItem
         className=""
-        href="/org/another-project/"
-        key="another-project"
+        href="/org/test-project/"
+        key="test-project"
         linkClassName=""
       >
-        <ProjectBadge>
-          <Flex>
-            <StyledPlatformList
-              direction="left"
-              platforms={Array []}
-            />
-            <span>
-              Another Project
-            </span>
-          </Flex>
-        </ProjectBadge>
+        <ProjectRow>
+          <IdBadge
+            avatarProps={
+              Object {
+                "consistentWidth": true,
+              }
+            }
+            avatarSize={16}
+            displayName={
+              <span>
+                test-project
+              </span>
+            }
+            project={
+              Object {
+                "hasAccess": true,
+                "id": "test-project",
+                "isBookmarked": false,
+                "isMember": true,
+                "name": "Project Name",
+                "slug": "test-project",
+                "teams": Array [
+                  Object {
+                    "id": "test-team",
+                    "isMember": true,
+                    "name": "Team Name",
+                    "slug": "test-team",
+                  },
+                ],
+              }
+            }
+          />
+        </ProjectRow>
       </MenuItem>
       <MenuItem
         className=""
-        href="/org/test-project/"
-        key="test-project"
+        href="/org/another-project/"
+        key="another-project"
         linkClassName=""
       >
-        <ProjectBadge>
-          <Flex>
-            <StyledPlatformList
-              direction="left"
-              platforms={Array []}
-            />
-            <span>
-              Test Project
-            </span>
-          </Flex>
-        </ProjectBadge>
+        <ProjectRow>
+          <IdBadge
+            avatarProps={
+              Object {
+                "consistentWidth": true,
+              }
+            }
+            avatarSize={16}
+            displayName={
+              <span>
+                another-project
+              </span>
+            }
+            project={
+              Object {
+                "hasAccess": true,
+                "id": "another-project",
+                "isBookmarked": false,
+                "isMember": true,
+                "name": "Project Name",
+                "slug": "another-project",
+                "teams": Array [
+                  Object {
+                    "id": "test-team",
+                    "isMember": true,
+                    "name": "Team Name",
+                    "slug": "test-team",
+                  },
+                ],
+              }
+            }
+          />
+        </ProjectRow>
       </MenuItem>
     </DropdownLink>
   </h3>
@@ -761,64 +1156,56 @@ exports[`ProjectSelector render() shows empty filter message when filtering has
   organization={
     Object {
       "access": Array [],
+      "features": Array [
+        "new-teams",
+      ],
       "id": "org",
+      "name": "Organization Name",
+      "onboardingTasks": Array [],
       "projects": Array [
         Object {
+          "hasAccess": true,
+          "id": "test-project",
+          "isBookmarked": false,
           "isMember": true,
-          "name": "Test Project",
+          "name": "Project Name",
           "slug": "test-project",
-          "team": Object {
-            "isMember": true,
-            "name": "Test Team",
-            "projects": Array [
-              Object {
-                "name": "Test Project",
-                "slug": "test-project",
-              },
-              Object {
-                "name": "Another Project",
-                "slug": "another-project",
-              },
-            ],
-            "slug": "test-team",
-          },
+          "teams": Array [
+            Object {
+              "id": "test-team",
+              "isMember": true,
+              "name": "Team Name",
+              "slug": "test-team",
+            },
+          ],
         },
         Object {
+          "hasAccess": true,
+          "id": "another-project",
+          "isBookmarked": false,
           "isMember": true,
-          "name": "Another Project",
+          "name": "Project Name",
           "slug": "another-project",
-          "team": Object {
-            "isMember": true,
-            "name": "Test Team",
-            "projects": Array [
-              Object {
-                "name": "Test Project",
-                "slug": "test-project",
-              },
-              Object {
-                "name": "Another Project",
-                "slug": "another-project",
-              },
-            ],
-            "slug": "test-team",
-          },
+          "teams": Array [
+            Object {
+              "id": "test-team",
+              "isMember": true,
+              "name": "Team Name",
+              "slug": "test-team",
+            },
+          ],
         },
       ],
       "slug": "org",
+      "status": Object {
+        "id": "active",
+        "name": "active",
+      },
       "teams": Array [
         Object {
+          "id": "test-team",
           "isMember": true,
-          "name": "Test Team",
-          "projects": Array [
-            Object {
-              "name": "Test Project",
-              "slug": "test-project",
-            },
-            Object {
-              "name": "Another Project",
-              "slug": "another-project",
-            },
-          ],
+          "name": "Team Name",
           "slug": "test-team",
         },
       ],
diff --git a/tests/js/spec/components/projectHeader/projectSelector.spec.jsx b/tests/js/spec/components/projectHeader/projectSelector.spec.jsx
index bed8b15e01..fb288014fe 100644
--- a/tests/js/spec/components/projectHeader/projectSelector.spec.jsx
+++ b/tests/js/spec/components/projectHeader/projectSelector.spec.jsx
@@ -4,70 +4,33 @@ import {mount, shallow} from 'enzyme';
 import ProjectSelector from 'app/components/projectHeader/projectSelector';
 
 describe('ProjectSelector', function() {
-  const mockOrg = {
+  const testTeam = TestStubs.Team({
+    id: 'test-team',
+    slug: 'test-team',
+    isMember: true,
+  });
+
+  const testProject = TestStubs.Project({
+    id: 'test-project',
+    slug: 'test-project',
+    isMember: true,
+    teams: [testTeam],
+  });
+  const anotherProject = TestStubs.Project({
+    id: 'another-project',
+    slug: 'another-project',
+    isMember: true,
+    teams: [testTeam],
+  });
+
+  const mockOrg = TestStubs.Organization({
     id: 'org',
     slug: 'org',
-    teams: [
-      {
-        name: 'Test Team',
-        slug: 'test-team',
-        isMember: true,
-        projects: [
-          {
-            slug: 'test-project',
-            name: 'Test Project',
-          },
-          {
-            slug: 'another-project',
-            name: 'Another Project',
-          },
-        ],
-      },
-    ],
-    projects: [
-      {
-        slug: 'test-project',
-        name: 'Test Project',
-        isMember: true,
-        team: {
-          name: 'Test Team',
-          slug: 'test-team',
-          isMember: true,
-          projects: [
-            {
-              slug: 'test-project',
-              name: 'Test Project',
-            },
-            {
-              slug: 'another-project',
-              name: 'Another Project',
-            },
-          ],
-        },
-      },
-      {
-        slug: 'another-project',
-        name: 'Another Project',
-        isMember: true,
-        team: {
-          name: 'Test Team',
-          slug: 'test-team',
-          isMember: true,
-          projects: [
-            {
-              slug: 'test-project',
-              name: 'Test Project',
-            },
-            {
-              slug: 'another-project',
-              name: 'Another Project',
-            },
-          ],
-        },
-      },
-    ],
+    teams: [testTeam],
+    projects: [testProject, anotherProject],
+    features: ['new-teams'],
     access: [],
-  };
+  });
 
   describe('render()', function() {
     beforeEach(function() {
diff --git a/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap b/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap
index 68a403fcad..61eb2dee9d 100644
--- a/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap
+++ b/tests/js/spec/views/inviteMember/__snapshots__/inviteMember.spec.jsx.snap
@@ -510,6 +510,7 @@ exports[`CreateProject should render roles when available and allowed, and handl
                                           }
                                         >
                                           <BaseBadge
+                                            avatarProps={Object {}}
                                             avatarSize={24}
                                             displayName={
                                               <BadgeDisplayName
@@ -657,6 +658,7 @@ exports[`CreateProject should render roles when available and allowed, and handl
                                           }
                                         >
                                           <BaseBadge
+                                            avatarProps={Object {}}
                                             avatarSize={24}
                                             displayName={
                                               <BadgeDisplayName
diff --git a/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap b/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
index c89bc0d09e..db5fedf911 100644
--- a/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
+++ b/tests/js/spec/views/organizationDashboard/__snapshots__/projectCard.spec.jsx.snap
@@ -88,66 +88,313 @@ exports[`ProjectCard renders 1`] = `
                         className="css-1dvsqd3"
                         is={null}
                       >
-                        <PlatformList
-                          direction="right"
-                          platforms={
-                            Array [
-                              "javascript",
-                            ]
+                        <IdBadge
+                          avatarSize={24}
+                          displayName={
+                            <StyledTitle>
+                              <div>
+                                project-slug
+                              </div>
+                            </StyledTitle>
                           }
-                        >
-                          <PlatformIcons
-                            direction="right"
-                            platforms={
-                              Array [
+                          project={
+                            Object {
+                              "hasAccess": true,
+                              "id": "2",
+                              "isBookmarked": false,
+                              "isMember": true,
+                              "name": "Project Name",
+                              "platforms": Array [
                                 "javascript",
-                              ]
+                              ],
+                              "slug": "project-slug",
+                              "stats": Array [
+                                Array [
+                                  1525042800,
+                                  1,
+                                ],
+                                Array [
+                                  1525046400,
+                                  2,
+                                ],
+                              ],
+                              "teams": Array [],
                             }
+                          }
+                        >
+                          <InlineErrorBoundary
+                            mini={true}
                           >
-                            <div
-                              className="css-1wtj5bg-PlatformIcons ezvce7z0"
-                              direction="right"
+                            <ErrorBoundary
+                              className="css-otlbo1-InlineErrorBoundary e83vi020"
+                              mini={true}
                             >
-                              <StyledPlatformIcon
-                                key="javascript"
-                                platform="javascript"
-                                size="16px"
+                              <ProjectBadge
+                                avatarSize={24}
+                                displayName={
+                                  <StyledTitle>
+                                    <div>
+                                      project-slug
+                                    </div>
+                                  </StyledTitle>
+                                }
+                                hideAvatar={false}
+                                hideOverflow={true}
+                                project={
+                                  Object {
+                                    "hasAccess": true,
+                                    "id": "2",
+                                    "isBookmarked": false,
+                                    "isMember": true,
+                                    "name": "Project Name",
+                                    "platforms": Array [
+                                      "javascript",
+                                    ],
+                                    "slug": "project-slug",
+                                    "stats": Array [
+                                      Array [
+                                        1525042800,
+                                        1,
+                                      ],
+                                      Array [
+                                        1525046400,
+                                        2,
+                                      ],
+                                    ],
+                                    "teams": Array [],
+                                  }
+                                }
                               >
-                                <Platformicon
-                                  className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
-                                  platform="javascript"
-                                  size="16px"
-                                >
-                                  <img
-                                    className="css-b9p6z1-StyledPlatformIcon ezvce7z1"
-                                    height="16px"
-                                    src={
-                                      Object {
-                                        "default": Object {
-                                          "id": "test",
-                                          "viewBox": Object {},
-                                        },
-                                      }
+                                <BaseBadge
+                                  avatarProps={Object {}}
+                                  avatarSize={24}
+                                  displayName={
+                                    <StyledTitle>
+                                      <div>
+                                        project-slug
+                                      </div>
+                                    </StyledTitle>
+                                  }
+                                  hideAvatar={false}
+                                  project={
+                                    Object {
+                                      "hasAccess": true,
+                                      "id": "2",
+                                      "isBookmarked": false,
+                                      "isMember": true,
+                                      "name": "Project Name",
+                                      "platforms": Array [
+                                        "javascript",
+                                      ],
+                                      "slug": "project-slug",
+                                      "stats": Array [
+                                        Array [
+                                          1525042800,
+                                          1,
+                                        ],
+                                        Array [
+                                          1525046400,
+                                          2,
+                                        ],
+                                      ],
+                                      "teams": Array [],
                                     }
-                                    width="16px"
-                                  />
-                                </Platformicon>
-                              </StyledPlatformIcon>
-                            </div>
-                          </PlatformIcons>
-                        </PlatformList>
+                                  }
+                                >
+                                  <Flex
+                                    align="center"
+                                  >
+                                    <Base
+                                      align="center"
+                                      className="css-5ipae5"
+                                    >
+                                      <div
+                                        className="css-5ipae5"
+                                        is={null}
+                                      >
+                                        <StyledAvatar
+                                          className="css-0"
+                                          project={
+                                            Object {
+                                              "hasAccess": true,
+                                              "id": "2",
+                                              "isBookmarked": false,
+                                              "isMember": true,
+                                              "name": "Project Name",
+                                              "platforms": Array [
+                                                "javascript",
+                                              ],
+                                              "slug": "project-slug",
+                                              "stats": Array [
+                                                Array [
+                                                  1525042800,
+                                                  1,
+                                                ],
+                                                Array [
+                                                  1525046400,
+                                                  2,
+                                                ],
+                                              ],
+                                              "teams": Array [],
+                                            }
+                                          }
+                                          size={24}
+                                        >
+                                          <Avatar
+                                            className="css-robds0-StyledAvatar e165dl3i0"
+                                            hasTooltip={false}
+                                            project={
+                                              Object {
+                                                "hasAccess": true,
+                                                "id": "2",
+                                                "isBookmarked": false,
+                                                "isMember": true,
+                                                "name": "Project Name",
+                                                "platforms": Array [
+                                                  "javascript",
+                                                ],
+                                                "slug": "project-slug",
+                                                "stats": Array [
+                                                  Array [
+                                                    1525042800,
+                                                    1,
+                                                  ],
+                                                  Array [
+                                                    1525046400,
+                                                    2,
+                                                  ],
+                                                ],
+                                                "teams": Array [],
+                                              }
+                                            }
+                                            size={24}
+                                          >
+                                            <ProjectAvatar
+                                              className="css-robds0-StyledAvatar e165dl3i0"
+                                              hasTooltip={false}
+                                              project={
+                                                Object {
+                                                  "hasAccess": true,
+                                                  "id": "2",
+                                                  "isBookmarked": false,
+                                                  "isMember": true,
+                                                  "name": "Project Name",
+                                                  "platforms": Array [
+                                                    "javascript",
+                                                  ],
+                                                  "slug": "project-slug",
+                                                  "stats": Array [
+                                                    Array [
+                                                      1525042800,
+                                                      1,
+                                                    ],
+                                                    Array [
+                                                      1525046400,
+                                                      2,
+                                                    ],
+                                                  ],
+                                                  "teams": Array [],
+                                                }
+                                              }
+                                              size={24}
+                                            >
+                                              <PlatformList
+                                                className="css-robds0-StyledAvatar e165dl3i0"
+                                                consistentWidth={false}
+                                                direction="right"
+                                                hasTooltip={false}
+                                                max={3}
+                                                platforms={
+                                                  Array [
+                                                    "javascript",
+                                                  ]
+                                                }
+                                                size={24}
+                                              >
+                                                <PlatformIcons
+                                                  consistentWidth={false}
+                                                  direction="right"
+                                                  max={3}
+                                                  size={24}
+                                                >
+                                                  <div
+                                                    className="css-zaq10o-PlatformIcons ezvce7z0"
+                                                    direction="right"
+                                                    max={3}
+                                                    size={24}
+                                                  >
+                                                    <StyledPlatformIcon
+                                                      key="javascript"
+                                                      platform="javascript"
+                                                      size={24}
+                                                    >
+                                                      <Component
+                                                        className="css-1rk01z5-StyledPlatformIcon ezvce7z1"
+                                                        platform="javascript"
+                                                        size={24}
+                                                      >
+                                                        <Platformicon
+                                                          className="css-1rk01z5-StyledPlatformIcon ezvce7z1"
+                                                          platform="javascript"
+                                                          size="24px"
+                                                        >
+                                                          <img
+                                                            className="css-1rk01z5-StyledPlatformIcon ezvce7z1"
+                                                            height="24px"
+                                                            src={
+                                                              Object {
+                                                                "default": Object {
+                                                                  "id": "test",
+                                                                  "viewBox": Object {},
+                                                                },
+                                                              }
+                                                            }
+                                                            width="24px"
+                                                          />
+                                                        </Platformicon>
+                                                      </Component>
+                                                    </StyledPlatformIcon>
+                                                  </div>
+                                                </PlatformIcons>
+                                              </PlatformList>
+                                            </ProjectAvatar>
+                                          </Avatar>
+                                        </StyledAvatar>
+                                        <DisplayNameAndDescription>
+                                          <Base
+                                            className="css-1eifx5k-DisplayNameAndDescription e165dl3i1"
+                                          >
+                                            <div
+                                              className="css-1eifx5k-DisplayNameAndDescription e165dl3i1"
+                                              is={null}
+                                            >
+                                              <div
+                                                data-test-id="badge-display-name"
+                                              >
+                                                <StyledTitle>
+                                                  <div
+                                                    className="css-25y8kw-StyledTitle efesc7i1"
+                                                  >
+                                                    <div>
+                                                      project-slug
+                                                    </div>
+                                                  </div>
+                                                </StyledTitle>
+                                              </div>
+                                            </div>
+                                          </Base>
+                                        </DisplayNameAndDescription>
+                                      </div>
+                                    </Base>
+                                  </Flex>
+                                </BaseBadge>
+                              </ProjectBadge>
+                            </ErrorBoundary>
+                          </InlineErrorBoundary>
+                        </IdBadge>
                       </div>
                     </Base>
                   </Box>
-                  <StyledTitle>
-                    <div
-                      className="css-25y8kw-StyledTitle efesc7i1"
-                    >
-                      <div>
-                        project-slug
-                      </div>
-                    </div>
-                  </StyledTitle>
                   <Tooltip
                     title="Add to bookmarks"
                   >
diff --git a/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx b/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
index 8d06fe1e17..e7b85f7509 100644
--- a/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
+++ b/tests/js/spec/views/organizationDashboard/projectCard.spec.jsx
@@ -74,7 +74,7 @@ describe('ProjectCard', function() {
       <ProjectCard
         project={TestStubs.Project({
           stats: [[1525042800, 1], [1525046400, 2]],
-          platform: 'javascript',
+          platforms: ['javascript'],
           latestDeploys,
         })}
         params={{orgId: 'org-slug'}}
