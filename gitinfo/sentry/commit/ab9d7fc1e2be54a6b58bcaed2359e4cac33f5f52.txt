commit ab9d7fc1e2be54a6b58bcaed2359e4cac33f5f52
Author: Mark Story <mark@mark-story.com>
Date:   Thu Nov 29 13:33:00 2018 -0500

    feat(integrations) Add icon to jira-server (#10814)
    
    Add a logo for jira-server. I've also added the `domain_name` metadata
    key to jira-server integrations so that they display nicer in the
    integration list.
    
    Fixes APP-578

diff --git a/src/sentry/integrations/jira_server/integration.py b/src/sentry/integrations/jira_server/integration.py
index 71a20f77e2..9a6a20bff4 100644
--- a/src/sentry/integrations/jira_server/integration.py
+++ b/src/sentry/integrations/jira_server/integration.py
@@ -242,7 +242,8 @@ class JiraServerIntegrationProvider(IntegrationProvider):
         install = state['installation_data']
         access_token = state['access_token']
 
-        external_id = '%s:%s' % (urlparse(install['url']).netloc, install['consumer_key'])
+        hostname = urlparse(install['url']).netloc
+        external_id = '%s:%s' % (hostname, install['consumer_key'])
         webhook_secret = sha1_text(install['private_key']).hexdigest()
 
         credentials = {
@@ -261,6 +262,7 @@ class JiraServerIntegrationProvider(IntegrationProvider):
             'external_id': external_id,
             'metadata': {
                 'base_url': install['url'],
+                'domain_name': hostname,
                 'verify_ssl': install['verify_ssl'],
                 'webhook_secret': webhook_secret,
             },
diff --git a/src/sentry/static/sentry/app/plugins/components/pluginIcon.jsx b/src/sentry/static/sentry/app/plugins/components/pluginIcon.jsx
index d3ff26e352..8545dcec61 100644
--- a/src/sentry/static/sentry/app/plugins/components/pluginIcon.jsx
+++ b/src/sentry/static/sentry/app/plugins/components/pluginIcon.jsx
@@ -15,6 +15,7 @@ import gitlab from 'app/../images/integrations/gitlab-logo.png';
 import heroku from 'app/../images/integrations/heroku-logo.png';
 import hipchat from 'app/../images/integrations/hipchat-logo.png';
 import jira from 'app/../images/integrations/jira-logo.png';
+import jiraserver from 'app/../images/integrations/jira-server-logo.png';
 import lighthouse from 'app/../images/integrations/lighthouse-logo.png';
 import opsgenie from 'app/../images/integrations/opsgenie-logo.png';
 import pagerduty from 'app/../images/integrations/pagerduty-logo.png';
@@ -56,6 +57,7 @@ export const ICON_PATHS = {
   jira,
   'jira-atlassian-connect': jira,
   'jira-ac': jira,
+  jira_server: jiraserver,
   lighthouse,
   opsgenie,
   pagerduty,
diff --git a/src/sentry/static/sentry/images/integrations/jira-server-logo.png b/src/sentry/static/sentry/images/integrations/jira-server-logo.png
new file mode 100644
index 0000000000..f155cde592
Binary files /dev/null and b/src/sentry/static/sentry/images/integrations/jira-server-logo.png differ
diff --git a/tests/sentry/integrations/jira_server/test_integration.py b/tests/sentry/integrations/jira_server/test_integration.py
index eff8ef3815..517aeaf792 100644
--- a/tests/sentry/integrations/jira_server/test_integration.py
+++ b/tests/sentry/integrations/jira_server/test_integration.py
@@ -210,6 +210,7 @@ class JiraServerIntegrationTest(IntegrationTestCase):
 
         integration = Integration.objects.get()
         assert integration.name == 'sentry-bot'
+        assert integration.metadata['domain_name'] == 'jira.example.com'
         assert integration.metadata['base_url'] == 'https://jira.example.com'
         assert integration.metadata['verify_ssl'] is False
         assert integration.metadata['webhook_secret']
