commit 5f064b988f98f6258d84670c660e3ebcfa3c36ac
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Jan 2 10:09:31 2015 -0800

    Add Plugin2.get_rules

diff --git a/src/sentry/plugins/base/v2.py b/src/sentry/plugins/base/v2.py
index bfebfbcf19..fbac38e60c 100644
--- a/src/sentry/plugins/base/v2.py
+++ b/src/sentry/plugins/base/v2.py
@@ -208,6 +208,15 @@ class IPlugin2(local):
         """
         return self.resource_links
 
+    def get_rules(self):
+        """
+        Return a list of Rule classes to add to the registry.
+
+        >>> def get_rules(self):
+        >>>     return [MyCustomRule]
+        """
+        return []
+
 
 class Plugin2(IPlugin2):
     """
diff --git a/src/sentry/rules/__init__.py b/src/sentry/rules/__init__.py
index 4d451ecc33..0aa7ad43a6 100644
--- a/src/sentry/rules/__init__.py
+++ b/src/sentry/rules/__init__.py
@@ -14,12 +14,18 @@ from .registry import RuleRegistry  # NOQA
 
 def init_registry():
     from sentry.constants import SENTRY_RULES
+    from sentry.plugins import plugins
     from sentry.utils.imports import import_string
+    from sentry.utils.safe import safe_execute
 
     registry = RuleRegistry()
     for rule in SENTRY_RULES:
         cls = import_string(rule)
         registry.add(cls)
+    for plugin in plugins.all(version=2):
+        for cls in (safe_execute(plugin.get_rules) or ()):
+            register.add(cls)
+
     return registry
 
 
