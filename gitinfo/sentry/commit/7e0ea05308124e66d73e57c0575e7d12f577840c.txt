commit 7e0ea05308124e66d73e57c0575e7d12f577840c
Author: David Cramer <dcramer@David-Cramers-MacBook.local>
Date:   Wed Mar 31 20:14:53 2010 -0500

    Fix leaking test

diff --git a/djangodblog/tests.py b/djangodblog/tests.py
index 93762c3ce5..dc152a83ce 100644
--- a/djangodblog/tests.py
+++ b/djangodblog/tests.py
@@ -55,14 +55,15 @@ class DBLogTestCase(TestCase):
         Error.objects.all().delete()
         ErrorBatch.objects.all().delete()
 
+        dblog_handler = DBLogHandler()
 
         logger = logging.getLogger()
-        logger.setLevel(logging.DEBUG)
         for h in logger.handlers:
             # TODO: fix this, for now, I don't care.
             logger.removeHandler(h)
 
-        logger.addHandler(DBLogHandler())
+        logger.setLevel(logging.DEBUG)
+        logger.addHandler(dblog_handler)
 
         logger.error('This is a test error')
         cur = (Error.objects.count(), ErrorBatch.objects.count())
@@ -96,6 +97,9 @@ class DBLogTestCase(TestCase):
         self.assertEquals(last.logger, 'test')
         self.assertEquals(last.level, logging.INFO)
         self.assertEquals(last.message, 'This is a test info')
+        
+        logger = logging.getLogger()
+        logger.removeHandler(dblog_handler)
     
     def testMiddleware(self):
         Error.objects.all().delete()
