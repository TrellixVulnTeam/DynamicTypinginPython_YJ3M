commit 2deb2d7f790597be4599aef5f743b73c6f135c3f
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Feb 18 10:03:28 2015 -0800

    Handle utf-8 encoded origin header

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 72856870b8..cec8755ce0 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -175,7 +175,10 @@ class APIView(BaseView):
         """
         Returns either the Origin or Referer value from the request headers.
         """
-        return request.META.get('HTTP_ORIGIN', request.META.get('HTTP_REFERER'))
+        origin = request.META.get('HTTP_ORIGIN', request.META.get('HTTP_REFERER'))
+        if origin:
+            origin = origin.decode('utf-8')
+        return origin
 
     def _dispatch(self, request, project_id=None, *args, **kwargs):
         request.user = AnonymousUser()
