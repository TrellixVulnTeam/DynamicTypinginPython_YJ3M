commit 9d34153857141e4bf0a496e3ff96a74e2091679b
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Mar 7 16:17:36 2014 -0800

    handle missing keys

diff --git a/src/sentry/tsdb/backend.py b/src/sentry/tsdb/backend.py
index 7b050a14dc..72c6a66a24 100644
--- a/src/sentry/tsdb/backend.py
+++ b/src/sentry/tsdb/backend.py
@@ -129,7 +129,7 @@ class RedisTSDB(object):
         results_by_key = defaultdict(dict)
         for epoch, keys, data in results:
             for key, count in zip(keys, data):
-                results_by_key[key][epoch] = int(count)
+                results_by_key[key][epoch] = int(count or 0)
 
         for key, points in results_by_key.iteritems():
             results_by_key[key] = sorted(points.items())
