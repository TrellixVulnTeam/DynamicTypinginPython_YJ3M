commit ca83aa0d594e279dc876cc3890cde66fff761c80
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Sep 20 11:48:39 2014 -0700

    Ensure develop forces resource compilation

diff --git a/setup.py b/setup.py
index 4f8e25968d..19f91a6a44 100755
--- a/setup.py
+++ b/setup.py
@@ -23,7 +23,8 @@ any application.
 """
 
 from distutils import log
-from distutils.command.sdist import sdist
+from setuptools.command.sdist import sdist
+from setuptools.command.develop import develop
 from setuptools import setup, find_packages
 from subprocess import check_output
 
@@ -112,19 +113,25 @@ mysql_requires = [
 ]
 
 
+def _build_static_assets():
+    log.info("running npm install")
+    check_output(['npm', 'install', '--quiet'])
+    log.info("running sentry compilestatic")
+    check_output(['sentry', 'compilestatic'])
+
+
 class CustomSdist(sdist):
-    """
-    Identical to the built-in sdist command except that we need to generate
-    static media before building the tarball.
-    """
     def make_distribution(self):
-        log.info("running npm install")
-        check_output(['npm', 'install', '--quiet'])
-        log.info("running sentry compilestatic")
-        check_output(['sentry', 'compilestatic'])
+        _build_static_assets()
         return sdist.make_distribution(self)
 
 
+class CustomDevelop(develop):
+    def install_for_development(self):
+        _build_static_assets()
+        return develop.install_for_development(self)
+
+
 setup(
     name='sentry',
     version='7.0.0-DEV',
@@ -146,6 +153,7 @@ setup(
     },
     cmdclass={
         'sdist': CustomSdist,
+        'develop': CustomDevelop,
     },
     license='BSD',
     include_package_data=True,
