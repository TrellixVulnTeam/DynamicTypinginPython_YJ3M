commit 5242977e3210b6dc7e6cfed1c0d28b51242d5224
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jul 29 13:00:14 2010 -0700

    tests for disabling thrahsing

diff --git a/djangodblog/tests/tests.py b/djangodblog/tests/tests.py
index 08c55bca49..788a899af3 100644
--- a/djangodblog/tests/tests.py
+++ b/djangodblog/tests/tests.py
@@ -373,6 +373,20 @@ class DBLogTestCase(TestCase):
         self.assertEquals(last.level, logging.ERROR)
         self.assertEquals(last.message, smart_unicode(exc))
 
+    def testNoThrashing(self):
+        prev = settings.THRASHING_LIMIT
+        settings.THRASHING_LIMIT = 0
+        
+        Error.objects.all().delete()
+        ErrorBatch.objects.all().delete()
+        
+        for i in range(0, 50):
+            Error.objects.create_from_text('hi')
+        
+        self.assertEquals(Error.objects.count(), 50)
+
+        settings.THRASHING_LIMIT = prev
+
 class DBLogViewsTest(TestCase):
     urls = 'djangodblog.tests.urls'
     
