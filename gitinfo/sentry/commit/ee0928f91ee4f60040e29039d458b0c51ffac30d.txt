commit ee0928f91ee4f60040e29039d458b0c51ffac30d
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Mar 21 11:32:09 2016 -0700

    Add tests for get_from_email_domain

diff --git a/tests/sentry/utils/email/tests.py b/tests/sentry/utils/email/tests.py
index cad148460e..6cf7c9d5a7 100644
--- a/tests/sentry/utils/email/tests.py
+++ b/tests/sentry/utils/email/tests.py
@@ -6,7 +6,7 @@ from django.core import mail
 
 from sentry.models import User, UserOption, GroupEmailThread
 from sentry.testutils import TestCase
-from sentry.utils.email import MessageBuilder
+from sentry.utils.email import MessageBuilder, get_from_email_domain
 
 
 class MessageBuilderTest(TestCase):
@@ -229,3 +229,15 @@ class MessageBuilderTest(TestCase):
         out = mail.outbox[0]
         assert out.to == ['foo@example.com']
         assert out.bcc == ['bar@example.com']
+
+
+class MiscTestCase(TestCase):
+    def test_get_from_email_domain(self):
+        with self.options({'mail.from': 'matt@example.com'}):
+            assert get_from_email_domain() == 'example.com'
+
+        with self.options({'mail.from': 'root@localhost'}):
+            assert get_from_email_domain() == 'localhost'
+
+        with self.options({'mail.from': 'garbage'}):
+            assert get_from_email_domain() == 'garbage'
