commit 8a78bf10ba48a2fd45599f889575af3cbb6d2f9f
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Mar 18 19:15:07 2013 -0700

    Better handling of in_app

diff --git a/src/sentry/interfaces.py b/src/sentry/interfaces.py
index b3971b9305..b6979877e9 100644
--- a/src/sentry/interfaces.py
+++ b/src/sentry/interfaces.py
@@ -265,7 +265,7 @@ class Frame(object):
         else:
             self.colno = None
 
-        self.in_app = bool(in_app)
+        self.in_app = in_app
         self.context_line = context_line
         self.pre_context = pre_context
         self.post_context = post_context
@@ -282,6 +282,8 @@ class Frame(object):
         return is_url(self.abs_path)
 
     def is_valid(self):
+        if self.in_app not in (False, True, None):
+            return False
         return self.filename or self.function or self.module
 
     def get_hash(self):
@@ -507,6 +509,11 @@ class Stacktrace(Interface):
         if len(frames) == system_frames:
             system_frames = 0
 
+        # if theres no system frames, pretend they're all part of the app
+        if not system_frames:
+            for frame in frames:
+                frame['in_app'] = True
+
         newest_first = self.is_newest_frame_first(event)
         if newest_first:
             frames = frames[::-1]
