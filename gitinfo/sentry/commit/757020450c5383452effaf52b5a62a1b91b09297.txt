commit 757020450c5383452effaf52b5a62a1b91b09297
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Mar 4 16:25:52 2015 -0800

    More intelligent routing updates

diff --git a/src/sentry/static/sentry/app/mixins/routeMixin.jsx b/src/sentry/static/sentry/app/mixins/routeMixin.jsx
index 5171b20165..b919144255 100644
--- a/src/sentry/static/sentry/app/mixins/routeMixin.jsx
+++ b/src/sentry/static/sentry/app/mixins/routeMixin.jsx
@@ -3,14 +3,23 @@
 var RouteMixin = {
   getInitialState() {
     return {
-      activeRoutePath: this.getPath()
+      activeRoutePath: this.getPath(),
+      activeParams: this.getParams(),
+      activeQuery: this.getQuery()
     };
   },
 
   componentWillReceiveProps(nextProps) {
     if (this.state.activeRoutePath != this.getPath()) {
-      this.routeDidChange(this.state.activeRoutePath);
-      this.setState({activeRoutePath: this.getPath()});
+      this.routeDidChange(
+        this.state.activeRoutePath,
+        this.state.activeParams,
+        this.state.activeQuery);
+      this.setState({
+        activeRoutePath: this.getPath(),
+        activeParams: this.getParams(),
+        activeQuery: this.getQuery()
+      });
     }
   },
 };
diff --git a/src/sentry/static/sentry/app/views/organizationDetails.jsx b/src/sentry/static/sentry/app/views/organizationDetails.jsx
index 739451ad3d..1f53c38d70 100644
--- a/src/sentry/static/sentry/app/views/organizationDetails.jsx
+++ b/src/sentry/static/sentry/app/views/organizationDetails.jsx
@@ -16,6 +16,7 @@ var RouteMixin = require("../mixins/routeMixin");
 var OrganizationDetails = React.createClass({
   mixins: [
     BreadcrumbMixin,
+    RouteMixin,
     Router.State
   ],
 
@@ -43,8 +44,10 @@ var OrganizationDetails = React.createClass({
     this.fetchData();
   },
 
-  componentWillReceiveProps(nextProps) {
-    this.fetchData();
+  routeDidChange(nextPath, nextParams) {
+    if (nextParams.orgId != this.getParams().orgId) {
+      this.fetchData();
+    }
   },
 
   fetchData() {
diff --git a/src/sentry/static/sentry/app/views/projectDetails.jsx b/src/sentry/static/sentry/app/views/projectDetails.jsx
index 1a2eae8bbe..232f9e038c 100644
--- a/src/sentry/static/sentry/app/views/projectDetails.jsx
+++ b/src/sentry/static/sentry/app/views/projectDetails.jsx
@@ -44,14 +44,19 @@ var ProjectDetails = React.createClass({
       team: null
     };
   },
+
   componentWillMount() {
     this.fetchData();
   },
 
-  routeDidChange(nextProps) {
-    this.fetchData();
+  routeDidChange(nextPath, nextParams) {
+    if (nextParams.projectId != this.getParams().projectId ||
+        nextParams.orgId != this.getParams().orgId) {
+      this.fetchData();
+    }
   },
 
+
   fetchData() {
     // TODO(dcramer): we could read some of this info from contexts
     api.request(this.getProjectDetailsEndpoint(), {
diff --git a/src/sentry/static/sentry/app/views/teamDashboard/chart.jsx b/src/sentry/static/sentry/app/views/teamDashboard/chart.jsx
index 0a09788c56..e5cf2d787e 100644
--- a/src/sentry/static/sentry/app/views/teamDashboard/chart.jsx
+++ b/src/sentry/static/sentry/app/views/teamDashboard/chart.jsx
@@ -37,8 +37,10 @@ var TeamChart = React.createClass({
     this.fetchData();
   },
 
-  routeDidChange() {
-    this.fetchData();
+  routeDidChange(nextPath, nextParams) {
+    if (nextParams.teamId != this.getParams().teamId) {
+      this.fetchData();
+    }
   },
 
   fetchData() {
diff --git a/src/sentry/static/sentry/app/views/teamDashboard/eventList.jsx b/src/sentry/static/sentry/app/views/teamDashboard/eventList.jsx
index 46dd07fd1e..947eb0b440 100644
--- a/src/sentry/static/sentry/app/views/teamDashboard/eventList.jsx
+++ b/src/sentry/static/sentry/app/views/teamDashboard/eventList.jsx
@@ -93,8 +93,10 @@ var EventList = React.createClass({
     this.fetchData();
   },
 
-  routeDidChange() {
-    this.fetchData();
+  routeDidChange(nextPath, nextParams) {
+    if (nextParams.teamId != this.getParams().teamId) {
+      this.fetchData();
+    }
   },
 
   componentDidUpdate(_, prevState) {
diff --git a/src/sentry/static/sentry/app/views/teamDetails.jsx b/src/sentry/static/sentry/app/views/teamDetails.jsx
index 3fecffa73b..0dab5b369c 100644
--- a/src/sentry/static/sentry/app/views/teamDetails.jsx
+++ b/src/sentry/static/sentry/app/views/teamDetails.jsx
@@ -43,15 +43,10 @@ var TeamDetails = React.createClass({
     this.fetchData();
   },
 
-  routeDidChange(nextProps) {
-    this.fetchData();
-  },
-
-  shouldComponentUpdate(nextProps, nextState) {
-    if (this.state.team === null || nextState.team === null) {
-      return true;
+  routeDidChange(nextPath, nextParams) {
+    if (nextParams.teamId != this.getParams().teamId) {
+      this.fetchData();
     }
-    return this.state.team.id !== nextState.team.id;
   },
 
   fetchData() {
