commit bc04df230a59946cc8112e96becead45752cee5e
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Sep 9 01:05:42 2010 -0700

    SQLite should be fully supported now (however graphs wont show)

diff --git a/sentry/models.py b/sentry/models.py
index ebf87c70d4..f754c2db1c 100644
--- a/sentry/models.py
+++ b/sentry/models.py
@@ -130,9 +130,10 @@ class GroupedMessage(MessageBase):
 
     @classmethod
     def get_score_clause(cls):
-        if dj_settings.DATABASE_ENGINE.rsplit('.', 1)[-1].startswith('postgresql'):
+        engine = dj_settings.DATABASE_ENGINE.rsplit('.', 1)[-1]
+        if engine.startswith('postgresql'):
             return 'times_seen / (pow((floor(extract(epoch from now() - last_seen) / 3600) + 2), 1.25) + 1)'
-        if dj_settings.DATABASE_ENGINE.rsplit('.', 1)[-1].startswith('mysql'):
+        if engine.startswith('mysql'):
             return 'times_seen / (pow((floor(unix_timestamp(now() - last_seen) / 3600) + 2), 1.25) + 1)'
         return 'times_seen'
 
diff --git a/sentry/views.py b/sentry/views.py
index 4367e3d2df..e62537307c 100644
--- a/sentry/views.py
+++ b/sentry/views.py
@@ -12,6 +12,7 @@ try:
 except ImportError:
     SimpleLineChart = None
 
+from django.conf import settings as dj_settings
 from django.core.context_processors import csrf
 from django.core.urlresolvers import reverse
 from django.db.models import Count
@@ -200,7 +201,8 @@ def group(request, group_id):
     
     unique_servers = message_list.filter(server_name__isnull=False).values_list('server_name', 'logger', 'view', 'checksum').annotate(times_seen=Count('server_name')).values('server_name', 'times_seen').order_by('-times_seen')
     
-    if SimpleLineChart:
+    engine = dj_settings.DATABASE_ENGINE.rsplit('.', 1)[-1]
+    if SimpleLineChart and not engine.startswith('sqlite'):
         today = datetime.datetime.now()
 
         chart_qs = message_list\
