commit 54878ff9d2f78c34fb7758dac148e866ee45bf6b
Author: Lauryn Brown <lauryndbrown@gmail.com>
Date:   Thu Apr 11 10:51:33 2019 -0700

    feat(search): Add analytics to organization-wide saved searches. (#12567)
    
    * Added  analytics to org searches.
    
    * Renamed organization saved searches anayltics classes
    
    * switched hyphens to underscores
    
    * fixed analytics apparently type was a key word causing a test failure.

diff --git a/src/sentry/api/__init__.py b/src/sentry/api/__init__.py
index 73ed067337..7488d87fc0 100644
--- a/src/sentry/api/__init__.py
+++ b/src/sentry/api/__init__.py
@@ -1,5 +1,6 @@
 from __future__ import absolute_import
 
+from .analytics import *  # NOQA
 from .client import ApiClient
 
 client = ApiClient()
diff --git a/src/sentry/api/analytics.py b/src/sentry/api/analytics.py
new file mode 100644
index 0000000000..f19c71d76c
--- /dev/null
+++ b/src/sentry/api/analytics.py
@@ -0,0 +1,29 @@
+from __future__ import absolute_import, print_function
+
+from sentry import analytics
+
+
+class OrganizationSavedSearchCreatedEvent(analytics.Event):
+    type = 'organization_saved_search.created'
+
+    attributes = (
+        analytics.Attribute('organization_id'),
+        analytics.Attribute('search_type'),
+        analytics.Attribute('id'),
+        analytics.Attribute('user_id'),
+    )
+
+
+class OrganizationSavedSearchDeletedEvent(analytics.Event):
+    type = 'organization_saved_search.deleted'
+
+    attributes = (
+        analytics.Attribute('organization_id'),
+        analytics.Attribute('search_type'),
+        analytics.Attribute('id'),
+        analytics.Attribute('user_id'),
+    )
+
+
+analytics.register(OrganizationSavedSearchCreatedEvent)
+analytics.register(OrganizationSavedSearchDeletedEvent)
diff --git a/src/sentry/api/endpoints/organization_search_details.py b/src/sentry/api/endpoints/organization_search_details.py
index 0cb8797b3f..1f07c12a0b 100644
--- a/src/sentry/api/endpoints/organization_search_details.py
+++ b/src/sentry/api/endpoints/organization_search_details.py
@@ -2,6 +2,7 @@ from __future__ import absolute_import
 
 from rest_framework.response import Response
 
+from sentry import analytics
 from sentry.api.bases.organization import (
     OrganizationEndpoint,
     OrganizationSearchPermission,
@@ -32,4 +33,11 @@ class OrganizationSearchDetailsEndpoint(OrganizationEndpoint):
             raise ResourceDoesNotExist
 
         search.delete()
+        analytics.record(
+            'organization_saved_search.deleted',
+            search_type=search.type,
+            organization_id=organization.id,
+            id=search_id,
+            user_id=request.user.id,
+        )
         return Response(status=204)
diff --git a/src/sentry/api/endpoints/organization_searches.py b/src/sentry/api/endpoints/organization_searches.py
index 40a66f1645..6e60ae2436 100644
--- a/src/sentry/api/endpoints/organization_searches.py
+++ b/src/sentry/api/endpoints/organization_searches.py
@@ -5,6 +5,7 @@ from rest_framework.response import Response
 from django.db.models import Q
 from django.utils import six
 
+from sentry import analytics
 from sentry.api.bases.organization import (
     OrganizationEndpoint,
     OrganizationSearchPermission,
@@ -108,6 +109,12 @@ class OrganizationSearchesEndpoint(OrganizationEndpoint):
                 name=result['name'],
                 query=result['query'],
             )
-
+            analytics.record(
+                'organization_saved_search.created',
+                search_type=saved_search.type,
+                organization_id=organization.id,
+                id=saved_search.id,
+                user_id=request.user.id,
+            )
             return Response(serialize(saved_search, request.user))
         return Response(serializer.errors, status=400)
