commit 36750b046c035c568c1b233c3c3302c3a0166018
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Sep 22 11:53:31 2015 -0700

    Add basic endpoint for platform docs

diff --git a/src/sentry/api/endpoints/project_platform_docs.py b/src/sentry/api/endpoints/project_platform_docs.py
new file mode 100644
index 0000000000..eacf1e2700
--- /dev/null
+++ b/src/sentry/api/endpoints/project_platform_docs.py
@@ -0,0 +1,42 @@
+from __future__ import absolute_import
+
+from django.core.cache import cache
+from rest_framework.response import Response
+
+from sentry import http
+from sentry.api.bases.project import ProjectEndpoint
+from sentry.api.exceptions import ResourceDoesNotExist
+
+DOC_URL = 'https://docs.getsentry.com/hosted/_wizards/{platform}.json'
+
+PLATFORMS = set([
+    'python',
+    'python-bottle',
+    'python-celery',
+    'python-django',
+    'python-flask',
+    'python-pylons',
+    'python-pyramid',
+    'python-tornado',
+])
+
+
+class ProjectPlatformDocsEndpoint(ProjectEndpoint):
+    def get(self, request, project, platform):
+        if platform not in PLATFORMS:
+            raise ResourceDoesNotExist
+
+        cache_key = 'docs:{}'.format(platform)
+        result = cache.get(cache_key)
+        if result is None:
+            session = http.build_session()
+            result = session.get(DOC_URL.format(platform=platform)).json()
+            cache.set(cache_key, result, 3600)
+
+        return Response({
+            'name': result['name'],
+            'html': result['body'],
+            'sdk': result['client_lib'],
+            'isFramework': result['is_framework'],
+            'link': result['doc_link'],
+        })
diff --git a/src/sentry/api/urls.py b/src/sentry/api/urls.py
index b715a8299a..d638da890b 100644
--- a/src/sentry/api/urls.py
+++ b/src/sentry/api/urls.py
@@ -40,6 +40,7 @@ from .endpoints.project_member_index import ProjectMemberIndexEndpoint
 from .endpoints.project_releases import ProjectReleasesEndpoint
 from .endpoints.project_rules import ProjectRulesEndpoint
 from .endpoints.project_rule_details import ProjectRuleDetailsEndpoint
+from .endpoints.project_platform_docs import ProjectPlatformDocsEndpoint
 from .endpoints.project_searches import ProjectSearchesEndpoint
 from .endpoints.project_search_details import ProjectSearchDetailsEndpoint
 from .endpoints.project_stats import ProjectStatsEndpoint
@@ -132,6 +133,9 @@ urlpatterns = patterns(
     url(r'^projects/(?P<organization_slug>[^\/]+)/(?P<project_slug>[^\/]+)/$',
         ProjectDetailsEndpoint.as_view(),
         name='sentry-api-0-project-details'),
+    url(r'^projects/(?P<organization_slug>[^\/]+)/(?P<project_slug>[^\/]+)/docs/(?P<platform>[\w-]+)/$',
+        ProjectPlatformDocsEndpoint.as_view(),
+        name='sentry-api-0-project-platform-docs'),
     url(r'^projects/(?P<organization_slug>[^\/]+)/(?P<project_slug>[^\/]+)/events/$',
         ProjectEventsEndpoint.as_view(),
         name='sentry-api-0-project-events'),
