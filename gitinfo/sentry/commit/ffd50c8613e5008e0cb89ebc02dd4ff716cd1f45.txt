commit ffd50c8613e5008e0cb89ebc02dd4ff716cd1f45
Author: Jan Michael Auer <account@jauer.org>
Date:   Fri Nov 9 16:25:44 2018 +0100

    ref(interfaces): Remove the Device interface (#10477)

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 935a2d80b5..3790d00def 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -910,7 +910,6 @@ SENTRY_INTERFACES = {
     'hpkp': 'sentry.interfaces.security.Hpkp',
     'expectct': 'sentry.interfaces.security.ExpectCT',
     'expectstaple': 'sentry.interfaces.security.ExpectStaple',
-    'device': 'sentry.interfaces.device.Device',
     'exception': 'sentry.interfaces.exception.Exception',
     'logentry': 'sentry.interfaces.message.Message',
     'request': 'sentry.interfaces.http.Http',
diff --git a/src/sentry/constants.py b/src/sentry/constants.py
index 7e609cfc93..fb2f68ff3c 100644
--- a/src/sentry/constants.py
+++ b/src/sentry/constants.py
@@ -167,7 +167,7 @@ CLIENT_RESERVED_ATTRS = (
     'project', 'errors', 'event_id', 'message', 'checksum', 'culprit', 'fingerprint', 'level',
     'time_spent', 'logger', 'server_name', 'site', 'received', 'timestamp', 'extra', 'modules',
     'tags', 'platform', 'release', 'dist', 'environment', 'transaction', 'key_id', '_meta',
-    'repos', 'query',
+    'device', 'repos', 'query',
 )
 
 # XXX: Must be all lowercase
diff --git a/src/sentry/interfaces/device.py b/src/sentry/interfaces/device.py
deleted file mode 100644
index d333b1962f..0000000000
--- a/src/sentry/interfaces/device.py
+++ /dev/null
@@ -1,56 +0,0 @@
-from __future__ import absolute_import
-
-__all__ = ('Device', )
-
-from sentry.interfaces.base import Interface, InterfaceValidationError
-from sentry.interfaces.schemas import validate_and_default_interface
-from sentry.utils.safe import trim, trim_dict
-
-
-class Device(Interface):
-    """
-    An interface which describes the device.
-
-    >>> {
-    >>>     "name": "Windows",
-    >>>     "version": "95",
-    >>>     "build": "95.0.134.1651",
-    >>>     "arbitrary": "data"
-    >>> }
-    """
-    path = 'device'
-
-    @classmethod
-    def to_python(cls, data):
-        is_valid, errors = validate_and_default_interface(data, cls.path)
-        if not is_valid:
-            raise InterfaceValidationError("Invalid device")
-
-        data = data.copy()
-
-        extra_data = data.pop('data', data)
-        name = trim(data.pop('name', None), 64)
-        version = trim(data.pop('version', None), 64)
-        build = trim(data.pop('build', None), 64)
-
-        kwargs = {
-            'name': name,
-            'version': version,
-            'build': build,
-            'data': trim_dict(extra_data),
-        }
-        return cls(**kwargs)
-
-    def get_api_context(self, is_public=False):
-        return {
-            'name': self.name,
-            'version': self.version,
-            'build': self.build,
-            'data': self.data,
-        }
-
-    def get_path(self):
-        return 'device'
-
-    def get_hash(self):
-        return []
diff --git a/src/sentry/interfaces/schemas.py b/src/sentry/interfaces/schemas.py
index f02422f010..c8101551fb 100644
--- a/src/sentry/interfaces/schemas.py
+++ b/src/sentry/interfaces/schemas.py
@@ -256,25 +256,6 @@ GEO_INTERFACE_SCHEMA = {
     'additionalProperties': False,
 }
 
-DEVICE_INTERFACE_SCHEMA = {
-    'type': 'object',
-    'properties': {
-        'name': {
-            'type': 'string',
-            'minLength': 1,
-        },
-        'version': {
-            'type': 'string',
-            'minLength': 1,
-        },
-        'build': {},
-        'data': {
-            'type': 'object',
-            'default': {},
-        },
-    },
-}
-
 TEMPLATE_INTERFACE_SCHEMA = {'type': 'object'}  # TODO fill this out
 MESSAGE_INTERFACE_SCHEMA = {'type': 'object'}
 
@@ -709,7 +690,6 @@ INTERFACE_SCHEMAS = {
     'sentry.interfaces.Message': MESSAGE_INTERFACE_SCHEMA,
     'template': TEMPLATE_INTERFACE_SCHEMA,
     'sentry.interfaces.Template': TEMPLATE_INTERFACE_SCHEMA,
-    'device': DEVICE_INTERFACE_SCHEMA,
     'geo': GEO_INTERFACE_SCHEMA,
 
     # Security reports
diff --git a/tests/sentry/interfaces/test_device.py b/tests/sentry/interfaces/test_device.py
deleted file mode 100644
index c3e5681ede..0000000000
--- a/tests/sentry/interfaces/test_device.py
+++ /dev/null
@@ -1,40 +0,0 @@
-# -*- coding: utf-8 -*-
-
-from __future__ import absolute_import
-
-from sentry.interfaces.device import Device
-from sentry.testutils import TestCase
-
-
-class DeviceTest(TestCase):
-    def test_serialize_behavior(self):
-        assert Device.to_python({
-            'name': 'Windows',
-            'version': '95',
-        }).to_json() == {
-            'name': 'Windows',
-            'version': '95',
-        }
-
-    def test_null_values(self):
-        sink = {}
-
-        assert Device.to_python({}).to_json() == sink
-        assert Device.to_python({'name': None}).to_json() == sink
-
-    def test_missing_name(self):
-        assert Device.to_python({
-            'version': '95',
-        }).to_json() == {
-            'version': '95',
-        }
-
-    def test_missing_version(self):
-        assert Device.to_python({
-            'name': 'Windows',
-        }).to_json() == {
-            'name': 'Windows',
-        }
-
-    def test_path(self):
-        assert Device().get_path() == 'device'
