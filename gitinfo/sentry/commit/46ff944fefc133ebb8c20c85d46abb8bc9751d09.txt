commit 46ff944fefc133ebb8c20c85d46abb8bc9751d09
Author: Matej Minar <matej.minar@sentry.io>
Date:   Mon Jan 13 12:21:20 2020 +0100

    ref(ts): Convert <BookmarkStar> to typescript (#16355)
    
    * ref(ts): Convert <BookmarkStar> to typescript
    
    * updated snaps
    
    * refactored to function component

diff --git a/src/sentry/static/sentry/app/components/projects/bookmarkStar.jsx b/src/sentry/static/sentry/app/components/projects/bookmarkStar.jsx
deleted file mode 100644
index d7be5e9db1..0000000000
--- a/src/sentry/static/sentry/app/components/projects/bookmarkStar.jsx
+++ /dev/null
@@ -1,76 +0,0 @@
-import PropTypes from 'prop-types';
-import React from 'react';
-import styled from '@emotion/styled';
-
-import {addErrorMessage} from 'app/actionCreators/indicator';
-import {defined} from 'app/utils';
-import InlineSvg from 'app/components/inlineSvg';
-import SentryTypes from 'app/sentryTypes';
-import {t} from 'app/locale';
-import {update} from 'app/actionCreators/projects';
-import withApi from 'app/utils/withApi';
-
-class BookmarkStar extends React.Component {
-  static propTypes = {
-    api: PropTypes.object.isRequired,
-    /* used to override when under local state */
-    isBookmarked: PropTypes.bool,
-    className: PropTypes.string,
-    organization: SentryTypes.Organization.isRequired,
-    project: SentryTypes.Project.isRequired,
-    onToggle: PropTypes.func,
-  };
-
-  isBookmarked() {
-    return defined(this.props.isBookmarked)
-      ? this.props.isBookmarked
-      : this.props.project.isBookmarked;
-  }
-
-  toggleProjectBookmark = event => {
-    const {project, organization, api} = this.props;
-    const isBookmarked = this.isBookmarked();
-
-    update(api, {
-      orgId: organization.slug,
-      projectId: project.slug,
-      data: {isBookmarked: !isBookmarked},
-    }).catch(() => {
-      addErrorMessage(t('Unable to toggle bookmark for %s', project.slug));
-    });
-
-    //needed to dismiss tooltip
-    document.activeElement.blur();
-
-    //prevent dropdowns from closing
-    event.stopPropagation();
-
-    if (this.props.onToggle) {
-      this.props.onToggle(!isBookmarked);
-    }
-  };
-
-  render() {
-    const {className} = this.props;
-    const isBookmarked = this.isBookmarked();
-
-    return (
-      <Star
-        isBookmarked={isBookmarked}
-        src="icon-star-small-filled"
-        onClick={this.toggleProjectBookmark}
-        className={className}
-      />
-    );
-  }
-}
-
-const Star = styled(InlineSvg)`
-  color: ${p => (p.isBookmarked ? p.theme.yellowOrange : p.theme.gray1)};
-
-  &:hover {
-    color: ${p => (p.isBookmarked ? p.theme.yellowOrangeLight : p.theme.gray2)};
-  }
-`;
-
-export default withApi(BookmarkStar);
diff --git a/src/sentry/static/sentry/app/components/projects/bookmarkStar.tsx b/src/sentry/static/sentry/app/components/projects/bookmarkStar.tsx
new file mode 100644
index 0000000000..991cd0a349
--- /dev/null
+++ b/src/sentry/static/sentry/app/components/projects/bookmarkStar.tsx
@@ -0,0 +1,85 @@
+import PropTypes from 'prop-types';
+import React from 'react';
+import styled from '@emotion/styled';
+
+import {addErrorMessage} from 'app/actionCreators/indicator';
+import {defined} from 'app/utils';
+import InlineSvg from 'app/components/inlineSvg';
+import SentryTypes from 'app/sentryTypes';
+import {t} from 'app/locale';
+import {update} from 'app/actionCreators/projects';
+import withApi from 'app/utils/withApi';
+import {Organization, Project} from 'app/types';
+import {Client} from 'app/api';
+
+type Props = {
+  api: Client;
+  /* used to override when under local state */
+  isBookmarked?: boolean;
+  className?: string;
+  organization: Organization;
+  project: Project;
+  onToggle?: (isBookmarked: boolean) => void;
+};
+
+const BookmarkStar: React.FC<Props> = ({
+  api,
+  isBookmarked: isBookmarkedProp,
+  className,
+  organization,
+  project,
+  onToggle,
+}) => {
+  const isBookmarked = defined(isBookmarkedProp)
+    ? isBookmarkedProp
+    : project.isBookmarked;
+
+  const toggleProjectBookmark = (event: React.MouseEvent) => {
+    update(api, {
+      orgId: organization.slug,
+      projectId: project.slug,
+      data: {isBookmarked: !isBookmarked},
+    }).catch(() => {
+      addErrorMessage(t('Unable to toggle bookmark for %s', project.slug));
+    });
+
+    //needed to dismiss tooltip
+    (document.activeElement as HTMLElement).blur();
+
+    //prevent dropdowns from closing
+    event.stopPropagation();
+
+    if (onToggle) {
+      onToggle(!isBookmarked);
+    }
+  };
+
+  return (
+    <Star
+      isBookmarked={isBookmarked}
+      src="icon-star-small-filled"
+      onClick={toggleProjectBookmark}
+      className={className}
+    />
+  );
+};
+
+BookmarkStar.propTypes = {
+  api: PropTypes.any.isRequired,
+  /* used to override when under local state */
+  isBookmarked: PropTypes.bool,
+  className: PropTypes.string,
+  organization: SentryTypes.Organization.isRequired,
+  project: SentryTypes.Project.isRequired,
+  onToggle: PropTypes.func,
+};
+
+const Star = styled(InlineSvg)<{isBookmarked: boolean}>`
+  color: ${p => (p.isBookmarked ? p.theme.yellowOrange : p.theme.gray1)};
+
+  &:hover {
+    color: ${p => (p.isBookmarked ? p.theme.yellowOrangeLight : p.theme.gray2)};
+  }
+`;
+
+export default withApi(BookmarkStar);
diff --git a/tests/js/spec/components/projects/__snapshots__/bookmarkStar.spec.jsx.snap b/tests/js/spec/components/projects/__snapshots__/bookmarkStar.spec.jsx.snap
index d97f5b2008..607db7712f 100644
--- a/tests/js/spec/components/projects/__snapshots__/bookmarkStar.spec.jsx.snap
+++ b/tests/js/spec/components/projects/__snapshots__/bookmarkStar.spec.jsx.snap
@@ -100,13 +100,13 @@ exports[`BookmarkStar renders 1`] = `
       src="icon-star-small-filled"
     >
       <ForwardRef
-        className="css-m298mp-InlineSvg-Star e5ekdrk0"
+        className="css-m298mp-InlineSvg-Star ez1a7zv0"
         isBookmarked={false}
         onClick={[Function]}
         src="icon-star-small-filled"
       >
         <svg
-          className="css-m298mp-InlineSvg-Star e5ekdrk0"
+          className="css-m298mp-InlineSvg-Star ez1a7zv0"
           height="1em"
           onClick={[Function]}
           viewBox={Object {}}
diff --git a/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap b/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap
index 56b5161241..574de0f33a 100644
--- a/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/organizationTeamProjects.spec.jsx.snap
@@ -522,13 +522,13 @@ exports[`OrganizationTeamProjects Should render 1`] = `
                                 src="icon-star-small-filled"
                               >
                                 <ForwardRef
-                                  className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink e5ekdrk0"
+                                  className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink ez1a7zv0"
                                   isBookmarked={false}
                                   onClick={[Function]}
                                   src="icon-star-small-filled"
                                 >
                                   <svg
-                                    className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink e5ekdrk0"
+                                    className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink ez1a7zv0"
                                     height="1em"
                                     onClick={[Function]}
                                     viewBox={Object {}}
@@ -878,13 +878,13 @@ exports[`OrganizationTeamProjects Should render 1`] = `
                                 src="icon-star-small-filled"
                               >
                                 <ForwardRef
-                                  className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink e5ekdrk0"
+                                  className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink ez1a7zv0"
                                   isBookmarked={false}
                                   onClick={[Function]}
                                   src="icon-star-small-filled"
                                 >
                                   <svg
-                                    className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink e5ekdrk0"
+                                    className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink ez1a7zv0"
                                     height="1em"
                                     onClick={[Function]}
                                     viewBox={Object {}}
diff --git a/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap b/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
index 7ce7624385..510413d5c1 100644
--- a/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
+++ b/tests/js/spec/views/projectsDashboard/__snapshots__/projectCard.spec.jsx.snap
@@ -567,13 +567,13 @@ exports[`ProjectCard renders 1`] = `
                     src="icon-star-small-filled"
                   >
                     <ForwardRef
-                      className="css-176na0z-InlineSvg-Star e5ekdrk0"
+                      className="css-176na0z-InlineSvg-Star ez1a7zv0"
                       isBookmarked={false}
                       onClick={[Function]}
                       src="icon-star-small-filled"
                     >
                       <svg
-                        className="css-176na0z-InlineSvg-Star e5ekdrk0"
+                        className="css-176na0z-InlineSvg-Star ez1a7zv0"
                         height="1em"
                         onClick={[Function]}
                         viewBox={Object {}}
diff --git a/tests/js/spec/views/settings/__snapshots__/organizationProjects.spec.jsx.snap b/tests/js/spec/views/settings/__snapshots__/organizationProjects.spec.jsx.snap
index 7d14ce08ea..7b925d373a 100644
--- a/tests/js/spec/views/settings/__snapshots__/organizationProjects.spec.jsx.snap
+++ b/tests/js/spec/views/settings/__snapshots__/organizationProjects.spec.jsx.snap
@@ -592,13 +592,13 @@ exports[`OrganizationProjects should render the projects in the store 1`] = `
                                               src="icon-star-small-filled"
                                             >
                                               <ForwardRef
-                                                className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink e5ekdrk0"
+                                                className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink ez1a7zv0"
                                                 isBookmarked={false}
                                                 onClick={[Function]}
                                                 src="icon-star-small-filled"
                                               >
                                                 <svg
-                                                  className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink e5ekdrk0"
+                                                  className="enngb6z1 css-lulb5m-InlineSvg-Star-BookmarkLink ez1a7zv0"
                                                   height="1em"
                                                   onClick={[Function]}
                                                   viewBox={Object {}}
