commit 6766f31a6a8c51d0d70ae1f981157ec8f03c9165
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Sat Feb 13 20:33:43 2016 -0800

    Fix transaction exception handling

diff --git a/src/sentry/models/user.py b/src/sentry/models/user.py
index 9adc6544cb..aeb82c2c1c 100644
--- a/src/sentry/models/user.py
+++ b/src/sentry/models/user.py
@@ -95,23 +95,23 @@ class User(BaseModel, AbstractBaseUser):
         )
 
         for obj in OrganizationMember.objects.filter(user=from_user):
-            with transaction.atomic():
-                try:
+            try:
+                with transaction.atomic():
                     obj.update(user=to_user)
-                except IntegrityError:
-                    pass
+            except IntegrityError:
+                pass
         for obj in GroupBookmark.objects.filter(user=from_user):
-            with transaction.atomic():
-                try:
+            try:
+                with transaction.atomic():
                     obj.update(user=to_user)
-                except IntegrityError:
-                    pass
+            except IntegrityError:
+                pass
         for obj in UserOption.objects.filter(user=from_user):
-            with transaction.atomic():
-                try:
+            try:
+                with transaction.atomic():
                     obj.update(user=to_user)
-                except IntegrityError:
-                    pass
+            except IntegrityError:
+                pass
 
         Activity.objects.filter(
             user=from_user,
