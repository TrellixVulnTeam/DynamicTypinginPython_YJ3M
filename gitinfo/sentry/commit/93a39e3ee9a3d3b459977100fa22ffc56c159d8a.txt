commit 93a39e3ee9a3d3b459977100fa22ffc56c159d8a
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Tue Mar 19 14:50:57 2019 -0700

    dev: Run memcached if configured to do so

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index 8c57044fe1..01d3b8989c 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -1410,6 +1410,10 @@ SENTRY_DEVSERVICES = {
         'image': 'mattrobenolt/cbtemulator:0.36.0',
         'ports': {'8086/tcp': 8086},
     },
+    'memcached': {
+        'image': 'memcached:1.5-alpine',
+        'ports': {'11211/tcp': 11211},
+    },
 }
 
 # Max file size for avatar photo uploads
diff --git a/src/sentry/runner/commands/devservices.py b/src/sentry/runner/commands/devservices.py
index f3526fc3c0..6a2c835a69 100644
--- a/src/sentry/runner/commands/devservices.py
+++ b/src/sentry/runner/commands/devservices.py
@@ -78,6 +78,9 @@ def up(project, exclude):
     if 'bigtable' not in settings.SENTRY_NODESTORE:
         exclude |= {'bigtable'}
 
+    if 'memcached' not in settings.CACHES.get('default', {}).get('BACKEND'):
+        exclude |= {'memcached'}
+
     if 'kafka' in settings.SENTRY_EVENTSTREAM:
         pass
     elif 'snuba' in settings.SENTRY_EVENTSTREAM:
