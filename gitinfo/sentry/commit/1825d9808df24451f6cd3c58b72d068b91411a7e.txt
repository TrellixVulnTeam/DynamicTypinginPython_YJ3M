commit 1825d9808df24451f6cd3c58b72d068b91411a7e
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Jun 3 19:10:58 2013 -0700

    Correct redirect test

diff --git a/tests/sentry/web/frontend/generic/tests.py b/tests/sentry/web/frontend/generic/tests.py
index f32b877587..2c72b15b6c 100644
--- a/tests/sentry/web/frontend/generic/tests.py
+++ b/tests/sentry/web/frontend/generic/tests.py
@@ -26,14 +26,13 @@ class DashboardTest(TestCase):
         assert resp['Location'] == 'http://testserver' + reverse('sentry-new-team')
 
     @mock.patch('sentry.web.frontend.generic.can_create_teams', mock.Mock(return_value=True))
-    def test_redirects_to_first_team_when_possible(self):
-        # HACK: force team creation
-        team = self.team
+    def test_shows_team_selector_with_single(self):
+        Team.objects.create(name='test', owner=self.user)
 
         resp = self.client.get(self.path)
 
-        assert resp.status_code == 302
-        assert resp['Location'] == 'http://testserver' + reverse('sentry', args=[team.slug])
+        assert resp.status_code == 200
+        self.assertTemplateUsed(resp, 'sentry/select_team.html')
 
     @mock.patch('sentry.web.frontend.generic.can_create_teams', mock.Mock(return_value=True))
     def test_renders_team_selector_with_multiple(self):
