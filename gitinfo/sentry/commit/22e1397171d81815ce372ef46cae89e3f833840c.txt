commit 22e1397171d81815ce372ef46cae89e3f833840c
Author: Evan Purkhiser <evanpurkhiser@gmail.com>
Date:   Fri Sep 22 13:05:12 2017 -0700

    ref(saml): Clean up metadata view error messages

diff --git a/src/sentry/auth/providers/saml2.py b/src/sentry/auth/providers/saml2.py
index 5a38dbca4c..ef67f2b5a7 100644
--- a/src/sentry/auth/providers/saml2.py
+++ b/src/sentry/auth/providers/saml2.py
@@ -342,11 +342,11 @@ class SAML2MetadataView(AuthView):
         metadata = saml_settings.get_sp_metadata()
         errors = saml_settings.validate_metadata(metadata)
 
-        if len(errors) == 0:
-            resp = HttpResponse(content=metadata, content_type='text/xml')
-        else:
-            resp = HttpResponseServerError(content=', '.join(errors))
-        return resp
+        if len(errors) > 0:
+            message = '\n'.join(errors)
+            return HttpResponseServerError(content=message, content_type='plain/text')
+
+        return HttpResponse(content=metadata, content_type='text/xml')
 
 
 class SAML2Provider(Provider):
