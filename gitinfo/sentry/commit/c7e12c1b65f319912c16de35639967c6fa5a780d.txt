commit c7e12c1b65f319912c16de35639967c6fa5a780d
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Wed Mar 7 18:16:28 2018 -0800

    feat(tagstore): Move sampling value to OptionStore

diff --git a/src/sentry/options/defaults.py b/src/sentry/options/defaults.py
index cc67e27baa..82614b75ba 100644
--- a/src/sentry/options/defaults.py
+++ b/src/sentry/options/defaults.py
@@ -112,3 +112,6 @@ register('analytics.backend', default='noop', flags=FLAG_NOSTORE)
 register('analytics.options', default={}, flags=FLAG_NOSTORE)
 
 register('cloudflare.secret-key', default='')
+
+# Tagstore
+register('tagstore.multi-sampling', default=0.0)
diff --git a/src/sentry/tagstore/multi/backend.py b/src/sentry/tagstore/multi/backend.py
index 5255dc13d9..d0faa82f72 100644
--- a/src/sentry/tagstore/multi/backend.py
+++ b/src/sentry/tagstore/multi/backend.py
@@ -13,9 +13,9 @@ import six
 import random
 from threading import Thread
 from six.moves.queue import Queue, Full
-from django.conf import settings
 from operator import itemgetter
 
+from sentry import options
 from sentry.tagstore.base import TagStorage
 from sentry.utils.imports import import_string
 
@@ -33,7 +33,6 @@ class QueuedRunner(object):
 
     def __init__(self):
         self.q = q = Queue(maxsize=100)
-        self.sample_channel = getattr(settings, 'SENTRY_TAGSTORE_MULTI_SAMPLING', 1.0)
 
         def worker():
             while True:
@@ -50,7 +49,7 @@ class QueuedRunner(object):
         t.start()
 
     def run(self, f, *args, **kwargs):
-        if random.random() <= self.sample_channel:
+        if random.random() <= options.get('tagstore.multi-sampling'):
             try:
                 self.q.put((f, args, kwargs), block=False)
             except Full:
