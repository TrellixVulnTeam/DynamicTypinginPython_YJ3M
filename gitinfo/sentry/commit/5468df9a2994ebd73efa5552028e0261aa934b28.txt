commit 5468df9a2994ebd73efa5552028e0261aa934b28
Author: Alex Coomans <alexc@squareup.com>
Date:   Thu Mar 10 18:37:29 2016 -0800

    Fixes for User Reports
    
    * Make sure to return a response with proper CORS headers when the report was
      successfully saved
    * Make sure to render the absolute URL to the Sentry server instead of the
      relative one

diff --git a/src/sentry/web/frontend/error_page_embed.py b/src/sentry/web/frontend/error_page_embed.py
index 7465a1b604..ef90d53b3c 100644
--- a/src/sentry/web/frontend/error_page_embed.py
+++ b/src/sentry/web/frontend/error_page_embed.py
@@ -100,7 +100,7 @@ class ErrorPageEmbedView(View):
             else:
                 report.group = Group.objects.get(id=mapping.group_id)
             report.save()
-            return HttpResponse(status=200)
+            return self._json_response(request)
         elif request.method == 'POST':
             return self._json_response(request, {
                 "errors": dict(form.errors),
@@ -111,7 +111,7 @@ class ErrorPageEmbedView(View):
         })
 
         context = {
-            'endpoint': mark_safe('*/' + json.dumps(request.get_full_path()) + ';/*'),
+            'endpoint': mark_safe('*/' + json.dumps(request.build_absolute_uri()) + ';/*'),
             'template': mark_safe('*/' + json.dumps(template) + ';/*'),
         }
 
