commit abe5525a88a255e21d22558d456fea7f395580ad
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 26 20:03:37 2011 -0800

    Show modules, python version, and extensions under status

diff --git a/sentry/templates/sentry/status.html b/sentry/templates/sentry/status.html
index d487b46136..abe52a920a 100644
--- a/sentry/templates/sentry/status.html
+++ b/sentry/templates/sentry/status.html
@@ -3,54 +3,100 @@
 {% load i18n %}
 {% load sentry_helpers %}
 
-{% block title %}{% trans "Sentry Status" %} | {{ block.super }}{% endblock %}
+{% block title %}{% trans "Status" %} | {{ block.super }}{% endblock %}
 
-{% block heading %}{% trans "Sentry Status" %}{% endblock %}
+{% block heading %}{% trans "Status" %}{% endblock %}
 
 {% block content %}
     <div class="span16">
-        <div class="page-header">
-            <h2>Environment</h2>
-        </div>
-        {% if environment %}
-            <table class="vars bordered-table zebra-striped">
-                <colgroup>
-                    <col style="width:220px">
-                </colgroup>
-                <tbody>
-                    <tr>
-                        <th>Server Version</th>
-                        <td>{% sentry_version %}</td>
-                    </tr>
-                    <tr>
-                        <th>Configuration File</th>
-                        <td>{{ environment.config }}</td>
-                    </tr>
-                    <tr>
-                        <th>Uptime</th>
-                        <td>{{ environment.start_date|timesince }} (since {{ environment.start_date|date }})</td>
-                    </tr>
-                </tbody>
-            </table>
-        {% else %}
-            <p>Environment not found (are you using the builtin Sentry webserver?).</p>
-        {% endif %}
+        <ul class="tabs" data-tabs="tabs">
+            <li class="active"><a href="#main">Environment</a></li>
+            <li><a href="#packages">Packages</a></li>
+        </ul>
+        <div class="tab-content">
+            <div id="main" class="active">
+                <div class="page-header">
+                    <h2>Environment</h2>
+                </div>
+                {% if environment %}
+                    <table class="vars bordered-table zebra-striped">
+                        <colgroup>
+                            <col style="width:220px">
+                        </colgroup>
+                        <tbody>
+                            <tr>
+                                <th>Server Version</th>
+                                <td>{% sentry_version %}</td>
+                            </tr>
+                            <tr>
+                                <th>Python Version</th>
+                                <td>{{ python_version }}</td>
+                            </tr>
+                            <tr>
+                                <th>Configuration File</th>
+                                <td>{{ environment.config }}</td>
+                            </tr>
+                            <tr>
+                                <th>Uptime</th>
+                                <td>{{ environment.start_date|timesince }} (since {{ environment.start_date|date }})</td>
+                            </tr>
+                        </tbody>
+                    </table>
+                {% else %}
+                    <p>Environment not found (are you using the builtin Sentry webserver?).</p>
+                {% endif %}
 
-        <div class="page-header">
-            <h2>Configuration{% if environment.config %} <small>{{ environment.config }}</small>{% endif %}</h2>
+                <div class="page-header">
+                    <h2>Configuration{% if environment.config %} <small>{{ environment.config }}</small>{% endif %}</h2>
+                </div>
+                <table class="vars bordered-table zebra-striped">
+                    <colgroup>
+                        <col style="width:220px">
+                    </colgroup>
+                    <tbody>
+                        {% for key, value in config %}
+                            <tr>
+                                <th>{{ key }}</th>
+                                <td class="code"><pre>{{ value|pprint }}</pre></td>
+                            </tr>
+                        {% endfor %}
+                    </tbody>
+                </table>
+            </div>
+            <div id="packages">
+                <div class="page-header">
+                    <h2>Extensions</h2>
+                </div>
+                <table class="vars bordered-table zebra-striped">
+                    <colgroup>
+                        <col style="width:220px">
+                    </colgroup>
+                    <tbody>
+                        {% for key, value in extensions %}
+                            <tr>
+                                <th>{{ key }}</th>
+                                <td>{{ value }}</td>
+                            </tr>
+                        {% endfor %}
+                    </tbody>
+                </table>
+                <div class="page-header">
+                    <h2>Modules</h2>
+                </div>
+                <table class="vars bordered-table zebra-striped">
+                    <colgroup>
+                        <col style="width:220px">
+                    </colgroup>
+                    <tbody>
+                        {% for key, value in modules %}
+                            <tr>
+                                <th>{{ key }}</th>
+                                <td>{{ value }}</td>
+                            </tr>
+                        {% endfor %}
+                    </tbody>
+                </table>
+            </div>
         </div>
-        <table class="vars bordered-table zebra-striped">
-            <colgroup>
-                <col style="width:220px">
-            </colgroup>
-            <tbody>
-                {% for key, value in config %}
-                    <tr>
-                        <th>{{ key }}</th>
-                        <td class="code"><pre>{{ value|pprint }}</pre></td>
-                    </tr>
-                {% endfor %}
-            </tbody>
-        </table>
     </div>
 {% endblock %}
diff --git a/sentry/web/frontend/generic.py b/sentry/web/frontend/generic.py
index 1dd45a4d26..28f61a4cda 100644
--- a/sentry/web/frontend/generic.py
+++ b/sentry/web/frontend/generic.py
@@ -1,9 +1,13 @@
+import pkg_resources
+import sys
+
 from django.core.urlresolvers import reverse
 from django.http import HttpResponseRedirect, Http404, HttpResponseNotModified, \
   HttpResponse
 
 from sentry import environment
 from sentry.conf import settings
+from sentry.plugins import GroupActionProvider
 from sentry.web.decorators import login_required
 from sentry.web.helpers import get_project_list, render_to_response
 
@@ -31,6 +35,9 @@ def status(request):
     return render_to_response('sentry/status.html', {
         'config': config,
         'environment': environment,
+        'python_version': sys.version,
+        'modules': sorted([(p.project_name, p.version) for p in pkg_resources.working_set]),
+        'extensions': [(cls.title, cls.__module__.rsplit('.', 1)[0]) for cls in GroupActionProvider.plugins.itervalues()],
     }, request)
 
 
