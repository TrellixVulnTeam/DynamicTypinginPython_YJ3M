commit 9e1cda8f8bbf7b713847e63faabc890d02664737
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Wed May 13 10:15:25 2020 +0200

    feat(releases): Update release version parser to latest version (#18774)

diff --git a/requirements-base.txt b/requirements-base.txt
index cefd33d975..49530129dd 100644
--- a/requirements-base.txt
+++ b/requirements-base.txt
@@ -49,7 +49,7 @@ redis-py-cluster==1.3.4
 redis>=2.10.3,<2.10.6
 requests-oauthlib==1.2.0
 requests[security]>=2.20.0,<2.21.0
-sentry-relay>=0.5.7,<0.6.0
+sentry-relay>=0.5.9,<0.6.0
 sentry-sdk>=0.13.5
 simplejson>=3.2.0,<3.9.0
 six>=1.10.0,<1.11.0
diff --git a/src/sentry/api/serializers/models/release.py b/src/sentry/api/serializers/models/release.py
index 8c33b67175..9708deac10 100644
--- a/src/sentry/api/serializers/models/release.py
+++ b/src/sentry/api/serializers/models/release.py
@@ -336,6 +336,7 @@ class ReleaseSerializer(Serializer):
                         "patch": info["version_parsed"]["patch"],
                         "pre": info["version_parsed"]["pre"],
                         "buildCode": info["version_parsed"]["build_code"],
+                        "components": info["version_parsed"]["components"],
                     }
                 )
             return {
diff --git a/tests/sentry/api/serializers/test_release.py b/tests/sentry/api/serializers/test_release.py
index bc306c7454..fa579c4d89 100644
--- a/tests/sentry/api/serializers/test_release.py
+++ b/tests/sentry/api/serializers/test_release.py
@@ -125,7 +125,8 @@ class ReleaseSerializerTest(TestCase, SnubaTestCase):
         assert result["versionInfo"]["version"]["pre"] == "a"
         assert result["versionInfo"]["version"]["buildCode"] == "20200101100"
         assert result["versionInfo"]["buildHash"] is None
-        assert result["versionInfo"]["description"] == "1.0.0-a (20200101100)"
+        assert result["versionInfo"]["description"] == "1.0-a (20200101100)"
+        assert result["versionInfo"]["components"] == 2
 
     def test_no_tag_data(self):
         user = self.create_user()
