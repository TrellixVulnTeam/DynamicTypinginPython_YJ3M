commit 9dd3e824b6d7498026ae75a96f1424fdfe98de86
Author: Eric Feng <ehfeng@users.noreply.github.com>
Date:   Tue May 22 15:20:08 2018 -0700

    feat(analytics): Add Tracking to Project Searches (#8470)
    
    * feat(analytics): Add Tracking to Project Searches
    
    * fixing adhiraj's comments

diff --git a/src/sentry/analytics/events/project_issue_searched.py b/src/sentry/analytics/events/project_issue_searched.py
new file mode 100644
index 0000000000..089e534e34
--- /dev/null
+++ b/src/sentry/analytics/events/project_issue_searched.py
@@ -0,0 +1,17 @@
+from __future__ import absolute_import, print_function
+
+from sentry import analytics
+
+
+class ProjectIssueSearchEvent(analytics.Event):
+    type = 'project_issue.searched'
+
+    attributes = (
+        analytics.Attribute('user_id'),
+        analytics.Attribute('organization_id'),
+        analytics.Attribute('project_id'),
+        analytics.Attribute('query'),
+    )
+
+
+analytics.register(ProjectIssueSearchEvent)
diff --git a/src/sentry/api/endpoints/project_group_index.py b/src/sentry/api/endpoints/project_group_index.py
index e00fb1ccda..7c50bed019 100644
--- a/src/sentry/api/endpoints/project_group_index.py
+++ b/src/sentry/api/endpoints/project_group_index.py
@@ -11,7 +11,7 @@ from django.utils import timezone
 from rest_framework import serializers
 from rest_framework.response import Response
 
-from sentry import features, search
+from sentry import analytics, features, search
 from sentry.api.base import DocSection, EnvironmentMixin
 from sentry.api.bases.project import ProjectEndpoint, ProjectEventPermission
 from sentry.api.fields import ActorField, Actor
@@ -365,6 +365,9 @@ class ProjectGroupIndexEndpoint(ProjectEndpoint, EnvironmentMixin):
 
         if results and query not in SAVED_SEARCH_QUERIES:
             advanced_search.send(project=project, sender=request.user)
+            analytics.record('project_issue.searched', user_id=request.user.id,
+                             organization_id=project.organization_id, project_id=project.id,
+                             query=query)
 
         return response
 
