commit f9cdfebc43f403f56de0907128ebb76decdb8efc
Author: David Cramer <dcramer@gmail.com>
Date:   Sat Jan 5 22:35:58 2013 -0800

    Improve team management pages

diff --git a/src/sentry/templates/sentry/teams/manage.html b/src/sentry/templates/sentry/teams/manage.html
index 3dffc896ea..fa732f8f54 100644
--- a/src/sentry/templates/sentry/teams/manage.html
+++ b/src/sentry/templates/sentry/teams/manage.html
@@ -1,11 +1,14 @@
 {% extends "sentry/teams/list.html" %}
 
+{% load crispy_forms_tags %}
 {% load i18n %}
 {% load sentry_helpers %}
 {% load sentry_plugins %}
 
 {% block title %}{% blocktrans with team.name as name %}Manage Team: {{ name }}{% endblocktrans %} | {{ block.super }}{% endblock %}
 
+{% block bodyclass %} with-left-sidebar{% endblock %}
+
 {% block breadcrumb %}
     {{ block.super }}
     <li class="divider">/</li>
@@ -15,21 +18,24 @@
 {% block main %}
     <section class="body">
         {% block inner %}
-            <p>{% trans "Here you can edit team information, as well as control the access list for a team with fine-grained permissions." %}</p>
-            {% if request.GET.success %}
-                <div class="alert alert-success">{% trans "Changes to your team were saved successfully." %}</div>
-            {% else %}
+            <div class="page-header">
+                <h2>{% trans "Team Details" %}</h2>
+            </div>
+            <form class="form-stacked" action="" method="post">
+                {% csrf_token %}
+
                 {% if form.errors %}
                     <div class="alert alert-error">{% trans "Please correct the errors below." %}</div>
                 {% endif %}
-            {% endif %}
-            <form class="form-stacked" action="" method="post">
-                {% csrf_token %}
+
+                {{ form|as_crispy_errors}}
+
                 <fieldset>
                     {% for field in form %}
                         {% include "sentry/partial/_form_field.html" %}
                     {% endfor %}
                 </fieldset>
+
                 <fieldset class="form-actions">
                     <button type="submit" class="btn btn-primary">{% trans "Save Changes" %}</button>
                     {% if can_remove_team %}
@@ -39,137 +45,21 @@
                     {% endif %}
                 </fieldset>
             </form>
-            <div class="page-header">
-                {% if can_add_project %}
-                    <a href="{% url sentry-new-team-project team.slug %}" class="btn pull-right btn-primary">{% trans "New Project" %}</a>
-                {% endif %}
-                <h2>{% trans "Projects" %}</h2>
-            </div>
-            {% if project_list %}
-                <table class="table table-bordered table-striped">
-                    <colgroup>
-                        <col/>
-                        <col width="90px"/>
-                    </colgroup>
-                    <thead>
-                        <tr>
-                            <th>{% trans "Project" %}</th>
-                            <th style="text-align:center">{% trans "Actions" %}</th>
-                        </tr>
-                    </thead>
-                    <tbody>
-                        {% for project in project_list %}
-                            <tr>
-                                <td>
-                                    <a href="{% url sentry project.slug %}">{{ project.name }}</a><br>
-                                </td>
-                                <td style="text-align:center;">
-                                    <a href="{% url sentry-manage-project project.slug %}" class="btn btn-small">{% trans "Settings" %}</a>
-                                </td>
-                            </tr>
-                        {% endfor %}
-                    </tbody>
-                </table>
-            {% else %}
-                <p>{% trans "There are no projects managed by this team." %}</p>
-            {% endif %}
-            <div class="page-header">
-                {% if can_add_member %}
-                    <a href="{% url sentry-new-team-member team.slug %}" class="btn pull-right btn-primary">{% trans "New Member" %}</a>
-                {% endif %}
-                <h2>{% trans "Members" %}</h2>
-            </div>
-            <ul class="nav nav-tabs">
-                <li class="active"><a href="#members" data-toggle="tab">{% trans "Members" %}</a></li>
-                <li><a href="#pending-members" data-toggle="tab">{% blocktrans with pending_member_list|length as count %}Pending ({{ count }}){% endblocktrans %}</a></li>
-            </ul>
-            <div class="tab-content">
-                <div class="tab-pane active" id="members">
-                    <table class="table table-bordered table-striped">
-                        <colgroup>
-                            <col/>
-                            <col width="100px"/>
-                            <col width="90px"/>
-                            <col width="90px"/>
-                        </colgroup>
-                        <thead>
-                            <tr>
-                                <th>{% trans "User" %}</th>
-                                <th style="text-align:center">{% trans "Access" %}</th>
-                                <th colspan="2" style="text-align:center">{% trans "Actions" %}</th>
-                            </tr>
-                        </thead>
-                        <tbody>
-                            {% for member, user in member_list %}
-                                <tr>
-                                    <td>
-                                        <a href="{% url sentry-edit-team-member team.slug member.pk %}">{{ user.username }}</a><br>
-                                        {{ user.email }}
-                                    </td>
-                                    <td style="text-align:center;">
-                                        {% if user == team.owner %}
-                                            {% trans "Owner" %}
-                                        {% else %}
-                                            {{ member.get_type_display }}
-                                        {% endif %}
-                                    </td>
-                                    {% if user == team.owner %}
-                                        <td style="text-align:center;" colspan="2">
-                                            <em>{% trans "unavailable for owner" %}</em>
-                                        </td>
-                                    {% else %}
-                                        <td style="text-align:center;">
-                                            <a href="{% url sentry-remove-team-member team.slug member.pk %}" class="btn btn-danger btn-small">{% trans "Remove" %}</a>
-                                        </td>
-                                        <td style="text-align:center;">
-                                            {% if member.is_active %}
-                                                <a href="{% url sentry-suspend-team-member team.slug member.pk %}" class="btn btn-small">{% trans "Suspend" %}</a>
-                                            {% else %}
-                                                <a href="{% url sentry-restore-team-member team.slug member.pk %}" class="btn btn-small">{% trans "Restore" %}</a>
-                                            {% endif %}
-                                        </td>
-                                    {% endif %}
-                                </tr>
-                            {% endfor %}
-                        </tbody>
-                    </table>
-                </div>
-                <div class="tab-pane" id="pending-members">
-                    <table class="table table-bordered table-striped">
-                        <colgroup>
-                            <col/>
-                            <col width="100px"/>
-                            <col width="90px"/>
-                            <col width="90px"/>
-                        </colgroup>
-                        <thead>
-                            <tr>
-                                <th>{% trans "User" %}</th>
-                                <th style="text-align:center">{% trans "Access" %}</th>
-                                <th style="text-align:center" colspan="2">{% trans "Actions" %}</th>
-                            </tr>
-                        </thead>
-                        <tbody>
-                            {% for member, email in pending_member_list %}
-                                <tr>
-                                    <td>
-                                        {{ email }}
-                                    </td>
-                                    <td style="text-align:center;">
-                                        {{ member.get_type_display }}
-                                    </td>
-                                    <td style="text-align:center;">
-                                        <a href="{% url sentry-remove-pending-team-member team.slug member.pk %}" class="btn btn-small btn-danger">{% trans "Remove" %}</a>
-                                    </td>
-                                    <td style="text-align:center;">
-                                        <a href="{% url sentry-reinvite-pending-team-member team.slug member.pk %}" class="btn btn-small">{% trans "Resend" %}</a>
-                                    </td>
-                                </tr>
-                            {% endfor %}
-                        </tbody>
-                    </table>
-                </div>
-            </div>
         {% endblock %}
     </section>
 {% endblock %}
+
+{% block sidebar %}
+    <ul class="nav nav-list">
+        <li class="nav-header">{% trans "Team" %}</li>
+        <li{% if page == 'details' %} class="active"{% endif %}>
+            <a href="{% url sentry-manage-team team.slug %}">{% trans "Settings" %}</a>
+        </li>
+        <li{% if page == 'projects' %} class="active"{% endif %}>
+            <a href="{% url sentry-manage-team-projects team.slug %}">{% trans "Projects" %}</a>
+        </li>
+        <li{% if page == 'members' %} class="active"{% endif %}>
+            <a href="{% url sentry-manage-team-members team.slug %}">{% trans "Members" %}</a>
+        </li>
+    </ul>
+{% endblock %}
diff --git a/src/sentry/templates/sentry/teams/members/edit.html b/src/sentry/templates/sentry/teams/members/edit.html
index 677aa9eb47..77e75bbbaa 100644
--- a/src/sentry/templates/sentry/teams/members/edit.html
+++ b/src/sentry/templates/sentry/teams/members/edit.html
@@ -1,5 +1,6 @@
 {% extends "sentry/teams/manage.html" %}
 
+{% load crispy_forms_tags %}
 {% load i18n %}
 {% load sentry_helpers %}
 
@@ -11,32 +12,30 @@
     <li><a href="{% url sentry-edit-team-member team.slug member.pk %}">Member: {{ member.user.username|truncatechars:30 }}</a></li>
 {% endblock %}
 
-{% block main %}
-    <section class="body">
-        {% if request.GET.success %}
-            <div class="alert alert-success">{% trans "Changes to the member were saved successfully." %}</div>
-        {% else %}
-            {% if form.errors %}
-                <div class="alert alert-error">{% trans "Please correct the errors below." %}</div>
-            {% endif %}
+{% block inner %}
+    <form class="form-stacked" action="" method="post">
+        {% csrf_token %}
+        <legend>{% trans "Details" %}</legend>
+
+        {% if form.errors %}
+            <div class="alert alert-error">{% trans "Please correct the errors below." %}</div>
         {% endif %}
-        <form class="form-stacked" action="" method="post">
-            {% csrf_token %}
-            <legend>{% trans "Details" %}</legend>
-            <div class="control-group">
-                <label>{% trans "User" %}</label>
-                <div class="controls">
-                    {{ member.user.username }}
-                </div>
-            </div>
-            <br/>
-            <legend>{% trans "Access" %}</legend>
-            {% for field in form %}
-                {% include "sentry/partial/_form_field.html" %}
-            {% endfor %}
-            <div class="form-actions">
-                <button type="submit" class="btn btn-primary">{% trans "Save Changes" %}</button>
+
+        {{ form|as_crispy_errors }}
+
+        <div class="control-group">
+            <label>{% trans "User" %}</label>
+            <div class="controls">
+                {{ member.user.username }}
             </div>
-        </form>
-    </section>
+        </div>
+        <br/>
+        <legend>{% trans "Access" %}</legend>
+        {% for field in form %}
+            {% include "sentry/partial/_form_field.html" %}
+        {% endfor %}
+        <div class="form-actions">
+            <button type="submit" class="btn btn-primary">{% trans "Save Changes" %}</button>
+        </div>
+    </form>
 {% endblock %}
diff --git a/src/sentry/templates/sentry/teams/members/index.html b/src/sentry/templates/sentry/teams/members/index.html
new file mode 100644
index 0000000000..3841838dc8
--- /dev/null
+++ b/src/sentry/templates/sentry/teams/members/index.html
@@ -0,0 +1,105 @@
+{% extends "sentry/teams/manage.html" %}
+
+{% load i18n %}
+{% load sentry_helpers %}
+
+{% block breadcrumb %}
+    {{ block.super }}
+    <li class="divider">/</li>
+    <li><a href="{% url sentry-manage-team-members team.slug %}">{% trans "Members" %}</a></li>
+{% endblock %}
+
+{% block inner %}
+    <div class="page-header">
+        {% if can_add_member %}
+            <a href="{% url sentry-new-team-member team.slug %}" class="btn pull-right btn-primary">{% trans "New Member" %}</a>
+        {% endif %}
+        <h2>{% trans "Members" %}</h2>
+    </div>
+    <table class="table table-bordered table-striped">
+        <colgroup>
+            <col/>
+            <col width="100px"/>
+            <col width="90px"/>
+            <col width="90px"/>
+        </colgroup>
+        <thead>
+            <tr>
+                <th>{% trans "User" %}</th>
+                <th style="text-align:center">{% trans "Access" %}</th>
+                <th colspan="2" style="text-align:center">{% trans "Actions" %}</th>
+            </tr>
+        </thead>
+        <tbody>
+            {% for member, user in member_list %}
+                <tr>
+                    <td>
+                        <a href="{% url sentry-edit-team-member team.slug member.pk %}">{{ user.username }}</a><br>
+                        {{ user.email }}
+                    </td>
+                    <td style="text-align:center;">
+                        {% if user == team.owner %}
+                            {% trans "Owner" %}
+                        {% else %}
+                            {{ member.get_type_display }}
+                        {% endif %}
+                    </td>
+                    {% if user == team.owner %}
+                        <td style="text-align:center;" colspan="2">
+                            <em>{% trans "unavailable for owner" %}</em>
+                        </td>
+                    {% else %}
+                        <td style="text-align:center;">
+                            <a href="{% url sentry-remove-team-member team.slug member.pk %}" class="btn btn-danger btn-small">{% trans "Remove" %}</a>
+                        </td>
+                        <td style="text-align:center;">
+                            {% if member.is_active %}
+                                <a href="{% url sentry-suspend-team-member team.slug member.pk %}" class="btn btn-small">{% trans "Suspend" %}</a>
+                            {% else %}
+                                <a href="{% url sentry-restore-team-member team.slug member.pk %}" class="btn btn-small">{% trans "Restore" %}</a>
+                            {% endif %}
+                        </td>
+                    {% endif %}
+                </tr>
+            {% endfor %}
+        </tbody>
+    </table>
+    {% if pending_member_list %}
+        <div class="page-header">
+            <h3>{% trans "Pending Members" %}</h3>
+        </div>
+        <table class="table table-bordered table-striped">
+            <colgroup>
+                <col/>
+                <col width="100px"/>
+                <col width="90px"/>
+                <col width="90px"/>
+            </colgroup>
+            <thead>
+                <tr>
+                    <th>{% trans "User" %}</th>
+                    <th style="text-align:center">{% trans "Access" %}</th>
+                    <th style="text-align:center" colspan="2">{% trans "Actions" %}</th>
+                </tr>
+            </thead>
+            <tbody>
+                {% for member, email in pending_member_list %}
+                    <tr>
+                        <td>
+                            {{ email }}
+                        </td>
+                        <td style="text-align:center;">
+                            {{ member.get_type_display }}
+                        </td>
+                        <td style="text-align:center;">
+                            <a href="{% url sentry-remove-pending-team-member team.slug member.pk %}" class="btn btn-small btn-danger">{% trans "Remove" %}</a>
+                        </td>
+                        <td style="text-align:center;">
+                            <a href="{% url sentry-reinvite-pending-team-member team.slug member.pk %}" class="btn btn-small">{% trans "Resend" %}</a>
+                        </td>
+                    </tr>
+                {% endfor %}
+            </tbody>
+        </table>
+    {% endif %}
+{% endblock %}
diff --git a/src/sentry/templates/sentry/teams/members/new.html b/src/sentry/templates/sentry/teams/members/new.html
index 98dcb8718e..31869edfe0 100644
--- a/src/sentry/templates/sentry/teams/members/new.html
+++ b/src/sentry/templates/sentry/teams/members/new.html
@@ -10,25 +10,23 @@
     <li><a href="{% url sentry-new-team-member team.slug %}">{% trans "New Member" %}</a></li>
 {% endblock %}
 
-{% block main %}
-    <section class="body">
-        <ul class="nav nav-tabs">
-            <li class="active"><a href="#invite" data-toggle="tab">{% trans "Invite a new user" %}</a></li>
-            <li><a href="#add" data-toggle="tab">{% trans "Add an existing user" %}</a></li>
-        </ul>
-        <div class="tab-content">
-            <div class="tab-pane active" id="invite">
-                <p>{% trans "Invite a member to join this team via their email address. If they do not already have an account they will first be asked to create one." %}</p>
-                {% with invite_form as form %}
-                    {% include "sentry/partial/_form.html" %}
-                {% endwith %}
-            </div>
-            <div class="tab-pane" id="add">
-                <p>{% trans "You may add a user by their username if they already have an account." %}</p>
-                {% with add_form as form %}
-                    {% include "sentry/partial/_form.html" %}
-                {% endwith %}
-            </div>
+{% block inner %}
+    <ul class="nav nav-tabs">
+        <li class="active"><a href="#invite" data-toggle="tab">{% trans "Invite a new user" %}</a></li>
+        <li><a href="#add" data-toggle="tab">{% trans "Add an existing user" %}</a></li>
+    </ul>
+    <div class="tab-content">
+        <div class="tab-pane active" id="invite">
+            <p>{% trans "Invite a member to join this team via their email address. If they do not already have an account they will first be asked to create one." %}</p>
+            {% with invite_form as form %}
+                {% include "sentry/partial/_form.html" %}
+            {% endwith %}
         </div>
-    </section>
+        <div class="tab-pane" id="add">
+            <p>{% trans "You may add a user by their username if they already have an account." %}</p>
+            {% with add_form as form %}
+                {% include "sentry/partial/_form.html" %}
+            {% endwith %}
+        </div>
+    </div>
 {% endblock %}
diff --git a/src/sentry/templates/sentry/teams/projects/index.html b/src/sentry/templates/sentry/teams/projects/index.html
new file mode 100644
index 0000000000..5aeeba5d12
--- /dev/null
+++ b/src/sentry/templates/sentry/teams/projects/index.html
@@ -0,0 +1,47 @@
+{% extends "sentry/teams/manage.html" %}
+
+{% load i18n %}
+{% load sentry_helpers %}
+
+{% block breadcrumb %}
+    {{ block.super }}
+    <li class="divider">/</li>
+    <li><a href="{% url sentry-manage-team-projects team.slug %}">{% trans "Projects" %}</a></li>
+{% endblock %}
+
+{% block inner %}
+    <div class="page-header">
+        {% if can_add_project %}
+            <a href="{% url sentry-new-team-project team.slug %}" class="btn pull-right btn-primary">{% trans "New Project" %}</a>
+        {% endif %}
+        <h2>{% trans "Projects" %}</h2>
+    </div>
+    {% if project_list %}
+        <table class="table table-bordered table-striped">
+            <colgroup>
+                <col/>
+                <col width="90px"/>
+            </colgroup>
+            <thead>
+                <tr>
+                    <th>{% trans "Project" %}</th>
+                    <th style="text-align:center">{% trans "Actions" %}</th>
+                </tr>
+            </thead>
+            <tbody>
+                {% for project in project_list %}
+                    <tr>
+                        <td>
+                            <a href="{% url sentry project.slug %}">{{ project.name }}</a><br>
+                        </td>
+                        <td style="text-align:center;">
+                            <a href="{% url sentry-manage-project project.slug %}" class="btn btn-small">{% trans "Settings" %}</a>
+                        </td>
+                    </tr>
+                {% endfor %}
+            </tbody>
+        </table>
+    {% else %}
+        <p>{% trans "There are no projects managed by this team." %}</p>
+    {% endif %}
+{% endblock %}
diff --git a/src/sentry/web/forms/projects.py b/src/sentry/web/forms/projects.py
index 7d0b56caaf..dccc560c02 100644
--- a/src/sentry/web/forms/projects.py
+++ b/src/sentry/web/forms/projects.py
@@ -39,7 +39,8 @@ class ProjectTagsForm(forms.Form):
 
 
 class NewProjectForm(forms.ModelForm):
-    name = forms.CharField(label=_('Project Name'), max_length=200, widget=forms.TextInput(attrs={'placeholder': _('My Project Name')}))
+    name = forms.CharField(label=_('Project Name'), max_length=200,
+        widget=forms.TextInput(attrs={'placeholder': _('example.com')}))
 
     class Meta:
         fields = ('name',)
diff --git a/src/sentry/web/forms/teams.py b/src/sentry/web/forms/teams.py
index c2b88a124c..63ba000caf 100644
--- a/src/sentry/web/forms/teams.py
+++ b/src/sentry/web/forms/teams.py
@@ -18,7 +18,7 @@ class RemoveTeamForm(forms.Form):
 
 class NewTeamForm(forms.ModelForm):
     name = forms.CharField(label=_('Team Name'), max_length=200,
-        widget=forms.TextInput(attrs={'placeholder': _('My Team Name')}))
+        widget=forms.TextInput(attrs={'placeholder': _('example.com')}))
 
     class Meta:
         fields = ('name',)
diff --git a/src/sentry/web/frontend/teams.py b/src/sentry/web/frontend/teams.py
index fa725c8df8..1a499c6009 100644
--- a/src/sentry/web/frontend/teams.py
+++ b/src/sentry/web/frontend/teams.py
@@ -10,6 +10,7 @@ from django.core.context_processors import csrf
 from django.core.urlresolvers import reverse
 from django.http import HttpResponseRedirect
 from django.views.decorators.csrf import csrf_protect
+from django.utils.translation import ugettext as _
 
 from sentry.constants import MEMBER_USER, MEMBER_OWNER
 from sentry.models import PendingTeamMember, TeamMember
@@ -87,27 +88,62 @@ def manage_team(request, team):
             # (e.g. member used to be USER, but is now OWNER)
             team.member_set.filter(user=team.owner).update(type=MEMBER_OWNER)
 
-        return HttpResponseRedirect(request.path + '?success=1')
+        messages.add_message(request, messages.SUCCESS,
+            _('Changes to your team were saved.'))
 
-    member_list = [(pm, pm.user) for pm in team.member_set.select_related('user').order_by('user__username')]
-    pending_member_list = [(pm, pm.email) for pm in team.pending_member_set.all().order_by('email')]
+        return HttpResponseRedirect(request.path)
+
+    context = csrf(request)
+    context.update({
+        'can_remove_team': can_remove_team(request.user, team),
+        'page': 'details',
+        'form': form,
+        'team': team,
+    })
+
+    return render_to_response('sentry/teams/manage.html', context, request)
+
+
+@has_team_access(MEMBER_OWNER)
+@csrf_protect
+def manage_team_projects(request, team):
+    result = plugins.first('has_perm', request.user, 'edit_team', team)
+    if result is False and not request.user.has_perm('sentry.can_change_team'):
+        return HttpResponseRedirect(reverse('sentry'))
 
     project_list = list(team.project_set.all())
 
     context = csrf(request)
     context.update({
         'can_add_project': can_create_projects(request.user, team),
+        'page': 'projects',
+        'team': team,
+        'project_list': project_list,
+    })
+
+    return render_to_response('sentry/teams/projects/index.html', context, request)
+
+
+@has_team_access(MEMBER_OWNER)
+@csrf_protect
+def manage_team_members(request, team):
+    result = plugins.first('has_perm', request.user, 'edit_team', team)
+    if result is False and not request.user.has_perm('sentry.can_change_team'):
+        return HttpResponseRedirect(reverse('sentry'))
+
+    member_list = [(pm, pm.user) for pm in team.member_set.select_related('user').order_by('user__username')]
+    pending_member_list = [(pm, pm.email) for pm in team.pending_member_set.all().order_by('email')]
+
+    context = csrf(request)
+    context.update({
         'can_add_member': can_add_team_member(request.user, team),
-        'can_remove_team': can_remove_team(request.user, team),
-        'page': 'details',
-        'form': form,
+        'page': 'members',
         'team': team,
         'member_list': member_list,
         'pending_member_list': pending_member_list,
-        'project_list': project_list,
     })
 
-    return render_to_response('sentry/teams/manage.html', context, request)
+    return render_to_response('sentry/teams/members/index.html', context, request)
 
 
 @has_team_access(MEMBER_OWNER)
@@ -124,6 +160,7 @@ def remove_team(request, team):
 
     context = csrf(request)
     context.update({
+        'page': 'settings',
         'form': form,
         'team': team,
     })
@@ -150,7 +187,10 @@ def new_team_member(request, team):
         pm.team = team
         pm.save()
 
-        return HttpResponseRedirect(reverse('sentry-edit-team-member', args=[team.slug, pm.id]) + '?success=1')
+        messages.add_message(request, messages.SUCCESS,
+            _('The team member was added.'))
+
+        return HttpResponseRedirect(reverse('sentry-edit-team-member', args=[team.slug, pm.id]))
 
     elif invite_form.is_valid():
         pm = invite_form.save(commit=False)
@@ -163,6 +203,7 @@ def new_team_member(request, team):
 
     context = csrf(request)
     context.update({
+        'page': 'members',
         'team': team,
         'add_form': add_form,
         'invite_form': invite_form,
@@ -213,7 +254,8 @@ def accept_invite(request, member_id, token):
 
         pending_member.delete()
 
-        messages.add_message(request, messages.SUCCESS, 'You have been added to the %r team.' % (team.name.encode('utf-8'),))
+        messages.add_message(request, messages.SUCCESS,
+            _('You have been added to the %r team.') % (team.name.encode('utf-8'),))
 
         return HttpResponseRedirect(reverse('sentry', args=[team.slug]))
 
@@ -236,10 +278,15 @@ def edit_team_member(request, team, member_id):
     form = EditTeamMemberForm(team, request.POST or None, instance=member)
     if form.is_valid():
         member = form.save(commit=True)
-        return HttpResponseRedirect(request.path + '?success=1')
+
+        messages.add_message(request, messages.SUCCESS,
+            _('Changes to your team member were saved.'))
+
+        return HttpResponseRedirect(request.path)
 
     context = csrf(request)
     context.update({
+        'page': 'members',
         'member': member,
         'team': team,
         'form': form,
@@ -269,6 +316,7 @@ def remove_team_member(request, team, member_id):
 
     context = csrf(request)
     context.update({
+        'page': 'members',
         'member': member,
         'team': team,
     })
@@ -293,7 +341,10 @@ def suspend_team_member(request, team, member_id):
 
     member.update(is_active=False)
 
-    return HttpResponseRedirect(reverse('sentry-manage-team', args=[team.slug]) + '?success=1')
+    messages.add_message(request, messages.SUCCESS,
+        _('The team member was suspended.'))
+
+    return HttpResponseRedirect(reverse('sentry-manage-team', args=[team.slug]))
 
 
 @csrf_protect
@@ -313,7 +364,10 @@ def restore_team_member(request, team, member_id):
 
     member.update(is_active=True)
 
-    return HttpResponseRedirect(reverse('sentry-manage-team', args=[team.slug]) + '?success=1')
+    messages.add_message(request, messages.SUCCESS,
+        _('The team member was made active.'))
+
+    return HttpResponseRedirect(reverse('sentry-manage-team', args=[team.slug]))
 
 
 @csrf_protect
@@ -330,7 +384,10 @@ def remove_pending_team_member(request, team, member_id):
 
     member.delete()
 
-    return HttpResponseRedirect(reverse('sentry-manage-team', args=[team.slug]) + '?success=1')
+    messages.add_message(request, messages.SUCCESS,
+        _('The team member was removed.'))
+
+    return HttpResponseRedirect(reverse('sentry-manage-team', args=[team.slug]))
 
 
 @csrf_protect
@@ -347,7 +404,10 @@ def reinvite_pending_team_member(request, team, member_id):
 
     member.send_invite_email()
 
-    return HttpResponseRedirect(reverse('sentry-manage-team', args=[team.slug]) + '?success=1')
+    messages.add_message(request, messages.SUCCESS,
+        _('An email was sent to the pending team member.'))
+
+    return HttpResponseRedirect(reverse('sentry-manage-team', args=[team.slug]))
 
 
 @csrf_protect
@@ -380,6 +440,7 @@ def create_new_team_project(request, team):
     context.update({
         'form': form,
         'team': team,
+        'page': 'projects',
     })
 
     return render_to_response('sentry/teams/projects/new.html', context, request)
diff --git a/src/sentry/web/urls.py b/src/sentry/web/urls.py
index 672bf69c04..cac4dfd171 100644
--- a/src/sentry/web/urls.py
+++ b/src/sentry/web/urls.py
@@ -55,6 +55,8 @@ urlpatterns = patterns('',
         name='sentry-manage-team'),
     url(r'^account/teams/(?P<team_slug>[\w_-]+)/remove/$', teams.remove_team,
         name='sentry-remove-team'),
+    url(r'^account/teams/(?P<team_slug>[\w_-]+)/members/$', teams.manage_team_members,
+        name='sentry-manage-team-members'),
     url(r'^account/teams/(?P<team_slug>[\w_-]+)/members/new/$', teams.new_team_member,
         name='sentry-new-team-member'),
     url(r'^account/teams/(?P<team_slug>[\w_-]+)/members/(?P<member_id>\d+)/edit/$', teams.edit_team_member,
@@ -69,7 +71,10 @@ urlpatterns = patterns('',
         name='sentry-remove-pending-team-member'),
     url(r'^account/teams/(?P<team_slug>[\w_-]+)/members/pending/(?P<member_id>\d+)/reinvite/$', teams.reinvite_pending_team_member,
         name='sentry-reinvite-pending-team-member'),
-    url(r'^account/teams/(?P<team_slug>[\w_-]+)/projects/new/$', teams.create_new_team_project, name='sentry-new-team-project'),
+    url(r'^account/teams/(?P<team_slug>[\w_-]+)/projects/$', teams.manage_team_projects,
+        name='sentry-manage-team-projects'),
+    url(r'^account/teams/(?P<team_slug>[\w_-]+)/projects/new/$', teams.create_new_team_project,
+        name='sentry-new-team-project'),
     url(r'^accept/(?P<member_id>\d+)/(?P<token>\w+)/$', teams.accept_invite,
         name='sentry-accept-invite'),
 
diff --git a/tests/sentry/web/frontend/teams/tests.py b/tests/sentry/web/frontend/teams/tests.py
index 2f7cc33f41..4f0d37147f 100644
--- a/tests/sentry/web/frontend/teams/tests.py
+++ b/tests/sentry/web/frontend/teams/tests.py
@@ -115,7 +115,7 @@ class ManageTeamTest(BaseTeamTest):
             'owner': self.team.owner.username,
         })
         self.assertNotEquals(resp.status_code, 200)
-        self.assertEquals(resp['Location'], 'http://testserver' + path + '?success=1')
+        self.assertEquals(resp['Location'], 'http://testserver' + path)
         team = Team.objects.get(pk=self.team.pk)
         self.assertEquals(team.name, 'bar')
 
@@ -172,7 +172,7 @@ class SuspendTeamMemberTest(BaseTeamTest):
     def test_does_suspend(self):
         resp = self.client.get(reverse('sentry-suspend-team-member', args=[self.team.slug, self.tm2.id]))
         self.assertEquals(resp.status_code, 302)
-        self.assertEquals(resp['Location'], 'http://testserver' + reverse('sentry-manage-team', args=[self.team.slug]) + '?success=1')
+        self.assertEquals(resp['Location'], 'http://testserver' + reverse('sentry-manage-team', args=[self.team.slug]))
         tm = self.team.member_set.get(pk=self.tm2.id)
         self.assertFalse(tm.is_active)
 
@@ -189,7 +189,7 @@ class RestoreTeamMemberTest(BaseTeamTest):
         self.tm2.update(is_active=False)
         resp = self.client.get(reverse('sentry-restore-team-member', args=[self.team.slug, self.tm2.id]))
         self.assertEquals(resp.status_code, 302)
-        self.assertEquals(resp['Location'], 'http://testserver' + reverse('sentry-manage-team', args=[self.team.slug]) + '?success=1')
+        self.assertEquals(resp['Location'], 'http://testserver' + reverse('sentry-manage-team', args=[self.team.slug]))
         tm = self.team.member_set.get(pk=self.tm2.id)
         self.assertTrue(tm.is_active)
 
