commit 021e04ef226ac38ce2f8839c8b6d54cab9761db6
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Jan 6 03:10:50 2012 -0800

    Handle the enabled attribute correctly

diff --git a/sentry/middleware.py b/sentry/middleware.py
index 652ea8a0b4..b44569dac8 100644
--- a/sentry/middleware.py
+++ b/sentry/middleware.py
@@ -2,6 +2,20 @@ from sentry.models import Project
 from sentry.plugins import Plugin, PluginProxy
 
 
+class PluginList(object):
+    def __init__(self, plugins):
+        self.plugins = plugins
+
+    def __getitem__(self, slice):
+        return list.__getitem__(self)
+
+    def __iter__(self):
+        for p in self.plugins:
+            if not p.enabled:
+                continue
+            yield p
+
+
 def get_plugins(request, project):
     plugins = []
     for cls in Plugin.plugins.itervalues():
@@ -16,7 +30,7 @@ class SentryMiddleware(object):
             return
         project = Project.objects.get(pk=view_kwargs['project_id'])
 
-        request.plugins = get_plugins(request, project)
+        request.plugins = PluginList(get_plugins(request, project))
 
     def process_response(self, request, response):
         request.plugins = []
diff --git a/sentry/plugins/__init__.py b/sentry/plugins/__init__.py
index 8b8a7736ad..44e143504d 100644
--- a/sentry/plugins/__init__.py
+++ b/sentry/plugins/__init__.py
@@ -47,18 +47,18 @@ class PluginProxy(object):
         self.__configured = False
         self.__plugin = plugin
 
+    def __repr__(self):
+        return repr(self.__plugin)
+
     def __call__(self, *args, **kwargs):
         if not self.__configured:
             self._configure()
         return self.__plugin.__call__(*args, **kwargs)
 
     def __getattr__(self, attr):
-        f = getattr(self.__plugin, attr)
-        if self.__configured:
-            return f
-        if callable(f):
+        if not self.__configured:
             self._configure()
-        return f
+        return getattr(self.__plugin, attr)
 
     def _configure(self):
         self.__plugin.configure(self.project)
