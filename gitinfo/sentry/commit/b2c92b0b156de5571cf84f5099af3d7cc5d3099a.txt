commit b2c92b0b156de5571cf84f5099af3d7cc5d3099a
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Wed Jul 10 14:49:25 2019 -0700

    conf: Add a setting to explicitly declare a default organization id
    
    In single organization mode there's currently an assumption that the
    default is the single row being returned from the database. But in cases
    where you've explicitly created multiple organizations, and are using
    SINGLE_ORGANIZATION as just a way to prevent more from being created and
    give a single org experience, we need a way of saying which org to use.
    
    This is similar vein to the SENTRY_PROJECT setting.
    
    And to save investigation, Organization.get_default() is only used in
    contexts behind a check for SENTRY_SINGLE_ORGANIZATION.

diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index cdfaca2463..648f582762 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -923,6 +923,10 @@ SENTRY_LOGIN_URL = None
 SENTRY_PROJECT = 1
 SENTRY_PROJECT_KEY = None
 
+# Default organization to represent the Internal Sentry project.
+# Used as a default when in SINGLE_ORGANIZATION mode.
+SENTRY_ORGANIZATION = 1
+
 # Project ID for recording frontend (javascript) exceptions
 SENTRY_FRONTEND_PROJECT = None
 # DSN for the frontend to use explicitly, which takes priority
diff --git a/src/sentry/models/organization.py b/src/sentry/models/organization.py
index 3b88520b5b..efabb759f1 100644
--- a/src/sentry/models/organization.py
+++ b/src/sentry/models/organization.py
@@ -159,9 +159,11 @@ class Organization(Model):
         """
         Return the organization used in single organization mode.
         """
-        return cls.objects.filter(
+
+        return cls.objects.get(
+            id=settings.SENTRY_ORGANIZATION,
             status=OrganizationStatus.ACTIVE,
-        )[0]
+        )
 
     def __unicode__(self):
         return u'%s (%s)' % (self.name, self.slug)
