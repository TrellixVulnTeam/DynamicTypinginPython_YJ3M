commit a789fa5d87e3e8101c4f247a559d4e245efd3dfe
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jan 1 17:55:27 2015 -0800

    Fix create_default_rules usage

diff --git a/src/sentry/migrations/0118_create_default_rules.py b/src/sentry/migrations/0118_create_default_rules.py
index 4581e5c60e..eca2ec9202 100644
--- a/src/sentry/migrations/0118_create_default_rules.py
+++ b/src/sentry/migrations/0118_create_default_rules.py
@@ -10,9 +10,10 @@ class Migration(DataMigration):
         from sentry.receivers.rules import create_default_rules
 
         Project = orm['sentry.Project']
+        Rule = orm['sentry.Rule']
 
         for project in Project.objects.all():
-            create_default_rules(instance=project, created=True)
+            create_default_rules(instance=project, created=True, RuleModel=Rule)
 
     def backwards(self, orm):
         pass
diff --git a/src/sentry/receivers/rules.py b/src/sentry/receivers/rules.py
index fc64dfe37a..86f4dd2007 100644
--- a/src/sentry/receivers/rules.py
+++ b/src/sentry/receivers/rules.py
@@ -5,11 +5,11 @@ from django.db.models.signals import post_save
 from sentry.models import Project, Rule
 
 
-def create_default_rules(instance, created=True, **kwargs):
+def create_default_rules(instance, created=True, RuleModel=Rule, **kwargs):
     if not created:
         return
 
-    Rule.objects.create(
+    RuleModel.objects.create(
         project=instance,
         label='Send a notification for new events',
         data={
@@ -22,7 +22,7 @@ def create_default_rules(instance, created=True, **kwargs):
         },
     )
 
-    Rule.objects.create(
+    RuleModel.objects.create(
         project=instance,
         label='Send a notification for regressions',
         data={
