commit fa39bd81e85e0d69717a4a9ddf1a30879d1ccc7f
Author: Billy Vong <billyvg@users.noreply.github.com>
Date:   Thu Feb 13 14:33:54 2020 -0800

    feat(workflow): Update alert email subjects (#16965)
    
    They should be `[<status>] <alert name> - <project>`

diff --git a/src/sentry/incidents/action_handlers.py b/src/sentry/incidents/action_handlers.py
index f058311349..cc880ed41d 100644
--- a/src/sentry/incidents/action_handlers.py
+++ b/src/sentry/incidents/action_handlers.py
@@ -90,7 +90,9 @@ class EmailActionHandler(ActionHandler):
     def build_message(self, context, status, user_id):
         display = self.status_display[status]
         return MessageBuilder(
-            subject=u"Alert Rule {} for Project {}".format(display, self.project.slug),
+            subject=u"[{}] {} - {}".format(
+                context["status"], context["incident_name"], self.project.slug
+            ),
             template=u"sentry/emails/incidents/trigger.txt",
             html_template=u"sentry/emails/incidents/trigger.html",
             type="incident.alert_rule_{}".format(display.lower()),
diff --git a/tests/sentry/incidents/test_action_handlers.py b/tests/sentry/incidents/test_action_handlers.py
index b214e259a2..3e6ec41eaf 100644
--- a/tests/sentry/incidents/test_action_handlers.py
+++ b/tests/sentry/incidents/test_action_handlers.py
@@ -129,13 +129,13 @@ class EmailActionHandlerFireTest(TestCase):
         action = self.create_alert_rule_trigger_action(
             target_identifier=six.text_type(self.user.id)
         )
-        incident = self.create_incident()
+        incident = self.create_incident(status=IncidentStatus.CRITICAL.value)
         handler = EmailActionHandler(action, incident, self.project)
         with self.tasks():
             handler.fire()
         out = mail.outbox[0]
         assert out.to == [self.user.email]
-        assert out.subject.startswith("Alert Rule Fired")
+        assert out.subject == u"[Critical] {} - {}".format(incident.title, self.project.slug)
 
 
 @freeze_time()
@@ -147,10 +147,11 @@ class EmailActionHandlerResolveTest(TestCase):
         incident = self.create_incident()
         handler = EmailActionHandler(action, incident, self.project)
         with self.tasks():
+            incident.status = IncidentStatus.CLOSED.value
             handler.resolve()
         out = mail.outbox[0]
         assert out.to == [self.user.email]
-        assert out.subject.startswith("Alert Rule Resolved")
+        assert out.subject == u"[Resolved] {} - {}".format(incident.title, self.project.slug)
 
 
 @freeze_time()
