commit e0d8c43f8d4850510fd4c2136680008538e3ae3d
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Jan 4 22:40:00 2012 -0800

    test POST of new project

diff --git a/tests/web/tests.py b/tests/web/tests.py
index 094601ea29..74041f1928 100644
--- a/tests/web/tests.py
+++ b/tests/web/tests.py
@@ -125,6 +125,34 @@ class SentryViewsTest(TestCase):
         # self.assertEquals(resp.status_code, 200)
         # self.assertTemplateUsed(resp, 'sentry/events/replay.html')
 
+    def test_new_project(self):
+        self.client.login(username='admin', password='admin')
+
+        # missing name
+        path = reverse('sentry-new-project')
+        resp = self.client.post(path, {})
+        self.assertEquals(resp.status_code, 200)
+
+        # valid params
+        path = reverse('sentry-new-project')
+        resp = self.client.post(path, {
+            'name': 'Test Project',
+        })
+        self.assertNotEquals(resp.status_code, 200)
+
+        project = Project.objects.filter(name='Test Project')
+        self.assertTrue(project.exists())
+        project = project.get()
+
+        self.assertEquals(project.owner, self.user)
+
+        member_set = list(project.member_set.all())
+
+        self.assertEquals(len(member_set), 1)
+        member = member_set[0]
+        self.assertEquals(member.user, self.user)
+        self.assertEquals(member.type, MEMBER_OWNER)
+
 
 class ViewPermissionTest(TestCase):
     """
