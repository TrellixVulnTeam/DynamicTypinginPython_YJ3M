commit 6ad87eb6f57a744c0b4dd9d85180e900f53b8d07
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Jan 27 12:15:18 2015 -0800

    Missing module prefix on import_submodules

diff --git a/src/sentry/utils/imports.py b/src/sentry/utils/imports.py
index cef58db404..4194a08887 100644
--- a/src/sentry/utils/imports.py
+++ b/src/sentry/utils/imports.py
@@ -8,7 +8,6 @@ sentry.utils.imports
 from __future__ import absolute_import
 
 import pkgutil
-import sys
 
 
 class ModuleProxyCache(dict):
@@ -43,12 +42,11 @@ def import_submodules(context, root_module, path):
     """
     Import all submodules and register them in the ``context`` namespace.
 
-    >>> import_submodules(globals(), __name__, __path__)
+    >>> import_submodules(locals(), __name__, __path__)
     """
-    for loader, module_name, is_pkg in pkgutil.walk_packages(path):
+    for loader, module_name, is_pkg in pkgutil.walk_packages(path, root_module + '.'):
         module = loader.find_module(module_name).load_module(module_name)
         for k, v in vars(module).iteritems():
             if not k.startswith('_'):
                 context[k] = v
         context[module_name] = module
-        sys.modules['{0}.{1}'.format(root_module, module_name)] = module
