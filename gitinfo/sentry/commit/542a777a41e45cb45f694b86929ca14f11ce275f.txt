commit 542a777a41e45cb45f694b86929ca14f11ce275f
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Jan 24 17:10:26 2013 -0800

    Adjust transaction block

diff --git a/src/sentry/migrations/0083_migrate_dupe_groups.py b/src/sentry/migrations/0083_migrate_dupe_groups.py
index dae5eda9fa..16b29795e0 100644
--- a/src/sentry/migrations/0083_migrate_dupe_groups.py
+++ b/src/sentry/migrations/0083_migrate_dupe_groups.py
@@ -22,14 +22,14 @@ class Migration(DataMigration):
             if not orm['sentry.Group'].objects.filter(id=group.id).exists():
                 continue
 
-            db.start_transaction()
-
             matches = list(orm['sentry.Group'].objects.exclude(id=group.id).filter(
                 checksum=group.checksum, project=group.project))
 
             if not matches:
                 continue
 
+            db.start_transaction()
+
             updates = defaultdict(int)
             updates.update({
                 'first_seen': group.first_seen,
