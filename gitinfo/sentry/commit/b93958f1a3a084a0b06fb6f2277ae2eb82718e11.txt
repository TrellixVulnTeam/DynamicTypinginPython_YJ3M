commit b93958f1a3a084a0b06fb6f2277ae2eb82718e11
Author: Ben Vinegar <benvinegar@users.noreply.github.com>
Date:   Tue Jan 17 17:34:36 2017 -0800

    Release commits view (#4766)

diff --git a/src/sentry/api/serializers/models/organization.py b/src/sentry/api/serializers/models/organization.py
index 338d9a2826..f65d8f0b26 100644
--- a/src/sentry/api/serializers/models/organization.py
+++ b/src/sentry/api/serializers/models/organization.py
@@ -69,6 +69,8 @@ class DetailedOrganizationSerializer(OrganizationSerializer):
         if features.has('organizations:api-keys', obj, actor=user) or \
                 ApiKey.objects.filter(organization=obj).exists():
             feature_list.append('api-keys')
+        if features.has('organizations:release-commits', obj, actor=user):
+            feature_list.append('release-commits')
 
         if getattr(obj.flags, 'allow_joinleave'):
             feature_list.append('open-membership')
diff --git a/src/sentry/conf/server.py b/src/sentry/conf/server.py
index aab945b6d7..34289fd5bb 100644
--- a/src/sentry/conf/server.py
+++ b/src/sentry/conf/server.py
@@ -681,6 +681,7 @@ SENTRY_FEATURES = {
     'organizations:repos': False,
     'organizations:sso': True,
     'organizations:callsigns': False,
+    'organizations:release-commits': False,
     'projects:global-events': False,
     'projects:plugins': True,
     'projects:dsym': False,
diff --git a/src/sentry/features/__init__.py b/src/sentry/features/__init__.py
index 96792d733f..d4fc85d443 100644
--- a/src/sentry/features/__init__.py
+++ b/src/sentry/features/__init__.py
@@ -13,6 +13,7 @@ default_manager.add('organizations:sso', OrganizationFeature)  # NOQA
 default_manager.add('organizations:onboarding', OrganizationFeature)  # NOQA
 default_manager.add('organizations:callsigns', OrganizationFeature)  # NOQA
 default_manager.add('organizations:repos', OrganizationFeature)  # NOQA
+default_manager.add('organizations:release-commits', OrganizationFeature)  # NOQA
 default_manager.add('projects:global-events', ProjectFeature)  # NOQA
 default_manager.add('projects:plugins', ProjectPluginFeature)  # NOQA
 default_manager.add('workflow:release-emails')
diff --git a/src/sentry/static/sentry/app/routes.jsx b/src/sentry/static/sentry/app/routes.jsx
index cfdaeb50b1..b3ce7a09f7 100644
--- a/src/sentry/static/sentry/app/routes.jsx
+++ b/src/sentry/static/sentry/app/routes.jsx
@@ -52,6 +52,7 @@ import ProjectUserReports from './views/projectUserReports';
 import ProjectUserReportSettings from './views/projectUserReportSettings';
 import ReleaseAllEvents from './views/releaseAllEvents';
 import ReleaseArtifacts from './views/releaseArtifacts';
+import ReleaseCommits from './views/releases/releaseCommits';
 import ReleaseDetails from './views/releaseDetails';
 import ReleaseNewEvents from './views/releaseNewEvents';
 import RouteNotFound from './views/routeNotFound';
@@ -148,6 +149,7 @@ function routes() {
             <IndexRoute component={errorHandler(ReleaseNewEvents)} />
             <Route path="all-events/" component={errorHandler(ReleaseAllEvents)} />
             <Route path="artifacts/" component={errorHandler(ReleaseArtifacts)} />
+            <Route path="commits/" component={errorHandler(ReleaseCommits)}/>
           </Route>
           <Route path="user-feedback/" component={errorHandler(ProjectUserReports)} />
           <Route path="settings/" component={errorHandler(ProjectSettings)}>
diff --git a/src/sentry/static/sentry/app/views/releaseDetails.jsx b/src/sentry/static/sentry/app/views/releaseDetails.jsx
index 92d4879f26..9fa284fb61 100644
--- a/src/sentry/static/sentry/app/views/releaseDetails.jsx
+++ b/src/sentry/static/sentry/app/views/releaseDetails.jsx
@@ -91,8 +91,8 @@ const ReleaseDetails = React.createClass({
       return <LoadingError onRetry={this.fetchData} />;
 
     let release = this.state.release;
-
     let {orgId, projectId} = this.props.params;
+
     return (
       <DocumentTitle title={this.getTitle()}>
         <div>
@@ -139,6 +139,11 @@ const ReleaseDetails = React.createClass({
               }}>{t('New Issues')}</ListLink>
               <ListLink to={`/${orgId}/${projectId}/releases/${encodeURIComponent(release.version)}/all-events/`}>{t('All Issues')}</ListLink>
               <ListLink to={`/${orgId}/${projectId}/releases/${encodeURIComponent(release.version)}/artifacts/`}>{t('Artifacts')}</ListLink>
+
+              {(new Set(this.context.organization.features)).has('release-commits') &&
+                <ListLink
+                  to={`/${orgId}/${projectId}/releases/${encodeURIComponent(release.version)}/commits/`}>{t('Commits')}</ListLink>
+              }
             </ul>
           </div>
           {React.cloneElement(this.props.children, {
diff --git a/src/sentry/static/sentry/app/views/releases/releaseCommits.jsx b/src/sentry/static/sentry/app/views/releases/releaseCommits.jsx
new file mode 100644
index 0000000000..7413ea3f75
--- /dev/null
+++ b/src/sentry/static/sentry/app/views/releases/releaseCommits.jsx
@@ -0,0 +1,76 @@
+import React from 'react';
+import LoadingIndicator from '../../components/loadingIndicator';
+import LoadingError from '../../components/loadingError';
+
+import ApiMixin from '../../mixins/apiMixin';
+
+const ReleaseCommits = React.createClass({
+  mixins: [ApiMixin],
+
+  getInitialState() {
+    return {
+      loading: true,
+      error: false,
+      commitList: []
+    };
+  },
+
+  componentDidMount() {
+    let {orgId, projectId, version} = this.props.params;
+
+    let path = `/projects/${orgId}/${projectId}/releases/${version}/commits/`;
+    this.api.request(path, {
+      method: 'GET',
+      data: this.props.location.query,
+      success: (data, _, jqXHR) => {
+        this.setState({
+          error: false,
+          loading: false,
+          commitList: data,
+          pageLinks: jqXHR.getResponseHeader('Link')
+        });
+      },
+      error: () => {
+        this.setState({
+          error: true,
+          loading: false
+        });
+      }
+    });
+  },
+
+  render() {
+    if (this.state.loading)
+      return <LoadingIndicator/>;
+
+    if (this.state.error)
+      return <LoadingError/>;
+
+    let {commitList} = this.state;
+    return (
+      <div>
+        <div className="release-group-header">
+          <div className="row">
+            <div className="col-sm-2 col-xs-2">{'SHA'}</div>
+            <div className="col-sm-7 col-xs-7">{'Message'}</div>
+            <div className="col-sm-3 col-xs-3 align-right">{'Date'}</div>
+          </div>
+        </div>
+        <div className="release-list">
+          {commitList.map(commit => {
+            let shortId = commit.id.slice(0, 7);
+            return (
+              <div className="release release-artifact row" key={commit.id}>
+                <div className="col-sm-2 col-xs-2"><strong>{shortId}</strong></div>
+                <div className="col-sm-7 col-xs-7">{commit.message}</div>
+                <div className="col-sm-3 col-xs-3 align-right actions">{commit.dateCreated}</div>
+              </div>
+            );
+          })}
+        </div>
+      </div>
+    );
+  }
+});
+
+export default ReleaseCommits;
