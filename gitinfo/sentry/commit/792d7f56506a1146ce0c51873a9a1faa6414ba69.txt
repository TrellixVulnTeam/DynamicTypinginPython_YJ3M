commit 792d7f56506a1146ce0c51873a9a1faa6414ba69
Author: David Cramer <dcramer@gmail.com>
Date:   Mon Dec 22 13:53:25 2014 -0800

    Dont wrap save_aggregate in atomic transaction

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index 898c3ac862..2a0092106b 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -303,6 +303,7 @@ class EventManager(object):
             event=event,
             tags=tags,
             hashes=hashes,
+            _with_transaction=False,
             **group_kwargs
         )
         if result is None:
diff --git a/src/sentry/utils/safe.py b/src/sentry/utils/safe.py
index 45f8ab0172..94f808abf1 100644
--- a/src/sentry/utils/safe.py
+++ b/src/sentry/utils/safe.py
@@ -19,8 +19,12 @@ from sentry.utils.strings import truncatechars
 def safe_execute(func, *args, **kwargs):
     # TODO: we should make smart savepoints (only executing the savepoint server
     # side if we execute a query)
+    _with_transaction = kwargs.pop('_with_transaction', True)
     try:
-        with transaction.atomic():
+        if _with_transaction:
+            with transaction.atomic():
+                result = func(*args, **kwargs)
+        else:
             result = func(*args, **kwargs)
     except Exception, e:
         if hasattr(func, 'im_class'):
