commit 515cb330e799f7cb554fad902c39ec069437aae3
Author: David Cramer <dcramer@gmail.com>
Date:   Sun Apr 22 20:40:00 2012 -0700

    Add the ability to permanently remove a group

diff --git a/sentry/templates/sentry/groups/details.html b/sentry/templates/sentry/groups/details.html
index 729b716afe..1aae4a39da 100644
--- a/sentry/templates/sentry/groups/details.html
+++ b/sentry/templates/sentry/groups/details.html
@@ -97,7 +97,7 @@
             <li class="dropdown pull-right">
                 <a class="dropdown-toggle" href="#" data-toggle="dropdown">{% trans "Actions" %} <span class="caret"></span></a>
                 <ul class="dropdown-menu">
-                    {# We're going to move these to the resolve action location #}
+                    <li><a href="{% url sentry-api-remove-group project_id=project.slug group_id=group.pk %}">{% trans "Remove Event" %}</a></li>
                     <li><a href="{% url sentry-group-json project_id=project.slug group_id=group.pk %}">{% trans "Raw JSON Data" %}</a></li>
                     {% for label, link, is_active in group|get_actions:request %}
                         {% if forloop.first %}
diff --git a/sentry/web/api.py b/sentry/web/api.py
index 38949828b3..38b82b5182 100644
--- a/sentry/web/api.py
+++ b/sentry/web/api.py
@@ -7,8 +7,9 @@ sentry.web.views
 """
 import logging
 
+from django.core.urlresolvers import reverse
 from django.http import HttpResponse, HttpResponseBadRequest, \
-  HttpResponseForbidden
+  HttpResponseForbidden, HttpResponseRedirect
 from django.views.decorators.csrf import csrf_exempt
 from django.views.decorators.http import require_http_methods
 
@@ -197,6 +198,24 @@ def resolve(request, project):
     return response
 
 
+@csrf_exempt
+@has_access
+def remove_group(request, project, group_id):
+    try:
+        group = Group.objects.get(pk=group_id)
+    except Group.DoesNotExist:
+        return HttpResponseForbidden()
+
+    group.delete()
+
+    if request.is_ajax():
+        response = HttpResponse('{}')
+        response['Content-Type'] = 'application/json'
+    else:
+        response = HttpResponseRedirect(reverse('sentry', args=[project.slug]))
+    return response
+
+
 @csrf_exempt
 @has_access
 def bookmark(request, project):
diff --git a/sentry/web/urls.py b/sentry/web/urls.py
index 317e924b25..ce5f1eb3ab 100644
--- a/sentry/web/urls.py
+++ b/sentry/web/urls.py
@@ -114,6 +114,7 @@ urlpatterns = patterns('',
     url(r'^api/(?P<project_id>[\w_-]+)/bookmark/$', api.bookmark, name='sentry-api-bookmark'),
     url(r'^api/(?P<project_id>[\w_-]+)/clear/$', api.clear, name='sentry-api-clear'),
     url(r'^api/(?P<project_id>[\w_-]+)/chart/$', api.chart, name='sentry-api-chart'),
+    url(r'^api/(?P<project_id>[\w_-]+)/group/(?P<group_id>[\w_-]+)/remove/$', api.remove_group, name='sentry-api-remove-group'),
 
     # Project specific
 
