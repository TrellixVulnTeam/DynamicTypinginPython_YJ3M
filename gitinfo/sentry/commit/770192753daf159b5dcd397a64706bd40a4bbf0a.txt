commit 770192753daf159b5dcd397a64706bd40a4bbf0a
Author: David Cramer <dcramer@gmail.com>
Date:   Thu Dec 27 21:44:38 2012 -0800

    Include event in plugin responses

diff --git a/src/sentry/plugins/base.py b/src/sentry/plugins/base.py
index b6213beac4..33ede39ddc 100644
--- a/src/sentry/plugins/base.py
+++ b/src/sentry/plugins/base.py
@@ -310,6 +310,7 @@ class IPlugin(local):
         return self.resource_links
 
     def get_view_response(self, request, group):
+        from sentry.models import Event
         from sentry.permissions import can_admin_group
 
         self.selected = request.path == self.get_url(group)
@@ -328,10 +329,14 @@ class IPlugin(local):
         if not isinstance(response, Response):
             raise NotImplementedError('Please use self.render() when returning responses.')
 
+        event = group.get_latest_event() or Event()
+        event.group = group
+
         return response.respond(request, {
             'plugin': self,
             'project': group.project,
             'group': group,
+            'event': event,
             'can_admin_event': can_admin_group(request.user, group),
         })
 
diff --git a/src/sentry/static/sentry/less/sentry.less b/src/sentry/static/sentry/less/sentry.less
index fa0d9be53e..11a0aa8f66 100644
--- a/src/sentry/static/sentry/less/sentry.less
+++ b/src/sentry/static/sentry/less/sentry.less
@@ -1281,7 +1281,9 @@ legend {
   > ul {
     padding: 0 20px;
     margin: -21px -20px 0;
-    background: #eee;
+    background: #f4f4f4 url(../images/dashboard/toolbar-bg.png);
+    .box-shadow(0 1px 2px rgba(0,0,0, .7));
+
     > li {
       > a {
         padding: 10px 12px;
@@ -1289,6 +1291,7 @@ legend {
         color: #666;
         .border-radius(0);
         margin: 0;
+        .transition(none);
         &:hover,
         &:focus {
           .transition(none);
@@ -1297,6 +1300,7 @@ legend {
         }
       }
       &.active > a {
+        .transition(none);
         color: @white;
         background-color: @linkColor;
       }
