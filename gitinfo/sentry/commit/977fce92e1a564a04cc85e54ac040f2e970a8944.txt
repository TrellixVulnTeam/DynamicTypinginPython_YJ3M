commit 977fce92e1a564a04cc85e54ac040f2e970a8944
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Dec 21 12:48:56 2015 -0800

    Make sure we compress bytes, not unicodes

diff --git a/src/sentry/lang/javascript/processor.py b/src/sentry/lang/javascript/processor.py
index 4c237f936e..60f6caed7a 100644
--- a/src/sentry/lang/javascript/processor.py
+++ b/src/sentry/lang/javascript/processor.py
@@ -323,7 +323,7 @@ def fetch_file(url, project=None, release=None, allow_scraping=True):
             response.encoding = 'utf-8'
 
         body = response.text
-        z_body = zlib.compress(body)
+        z_body = zlib.compress(force_bytes(body))
         headers = {k.lower(): v for k, v in response.headers.items()}
 
         cache.set(cache_key, (headers, z_body, response.status_code), 60)
