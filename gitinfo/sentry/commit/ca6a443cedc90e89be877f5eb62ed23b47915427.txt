commit ca6a443cedc90e89be877f5eb62ed23b47915427
Author: David Cramer <dcramer@gmail.com>
Date:   Wed May 28 20:03:03 2014 -0700

    Basic tests for date_filter

diff --git a/tests/sentry/search/django/tests.py b/tests/sentry/search/django/tests.py
index 96841d2a1a..1180b19c52 100644
--- a/tests/sentry/search/django/tests.py
+++ b/tests/sentry/search/django/tests.py
@@ -2,7 +2,7 @@
 
 from __future__ import absolute_import
 
-from datetime import datetime
+from datetime import datetime, timedelta
 
 from sentry.constants import STATUS_RESOLVED, STATUS_UNRESOLVED
 from sentry.models import GroupTagValue
@@ -115,3 +115,33 @@ class DjangoSearchBackendTest(TestCase):
     def test_project(self):
         results = self.backend.query(self.project2)
         assert len(results) == 0
+
+    def test_first_seen_date_filter(self):
+        backend = self.create_backend()
+
+        results = self.backend.query(
+            self.project1, date_from=self.group2.first_seen,
+            date_filter='first_seen')
+        assert len(results) == 1
+        assert results[0] == self.group2
+
+        results = self.backend.query(
+            self.project1, date_to=self.group1.first_seen + timedelta(minutes=1),
+            date_filter='first_seen')
+        assert len(results) == 1
+        assert results[0] == self.group1
+
+    def test_last_seen_date_filter(self):
+        backend = self.create_backend()
+
+        results = self.backend.query(
+            self.project1, date_from=self.group1.last_seen,
+            date_filter='last_seen')
+        assert len(results) == 1
+        assert results[0] == self.group1
+
+        results = self.backend.query(
+            self.project1, date_to=self.group1.last_seen - timedelta(minutes=1),
+            date_filter='last_seen')
+        assert len(results) == 1
+        assert results[0] == self.group2
diff --git a/tests/sentry/search/elastic_search/test_backend.py b/tests/sentry/search/elastic_search/test_backend.py
index 8928e43adb..759e09668a 100644
--- a/tests/sentry/search/elastic_search/test_backend.py
+++ b/tests/sentry/search/elastic_search/test_backend.py
@@ -2,7 +2,9 @@
 
 from __future__ import absolute_import
 
-from datetime import datetime
+import pytest
+
+from datetime import datetime, timedelta
 
 from sentry.constants import STATUS_RESOLVED, STATUS_UNRESOLVED
 from sentry.models import GroupTagValue
@@ -130,3 +132,35 @@ class ElasticSearchTest(TestCase):
     def test_project(self):
         results = self.backend.query(self.project2)
         assert len(results) == 0
+
+    @pytest.mark.xfail
+    def test_first_seen_date_filter(self):
+        backend = self.create_backend()
+
+        results = self.backend.query(
+            self.project1, date_from=self.group2.first_seen,
+            date_filter='first_seen')
+        assert len(results) == 1
+        assert results[0] == self.group2
+
+        results = self.backend.query(
+            self.project1, date_to=self.group1.first_seen + timedelta(minutes=1),
+            date_filter='first_seen')
+        assert len(results) == 1
+        assert results[0] == self.group1
+
+    @pytest.mark.xfail
+    def test_last_seen_date_filter(self):
+        backend = self.create_backend()
+
+        results = self.backend.query(
+            self.project1, date_from=self.group1.last_seen,
+            date_filter='last_seen')
+        assert len(results) == 1
+        assert results[0] == self.group1
+
+        results = self.backend.query(
+            self.project1, date_to=self.group1.last_seen - timedelta(minutes=1),
+            date_filter='last_seen')
+        assert len(results) == 1
+        assert results[0] == self.group2
