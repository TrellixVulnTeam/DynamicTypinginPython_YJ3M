commit 5424c76890e5063c06999384ed77420b44bf903e
Author: Matt Robenolt <matt@ydekproductions.com>
Date:   Mon Dec 21 13:14:38 2015 -0800

    Handle json decode errors gracefully on release endpoint

diff --git a/src/sentry/web/frontend/release_webhook.py b/src/sentry/web/frontend/release_webhook.py
index d8812d6d52..bc00caff25 100644
--- a/src/sentry/web/frontend/release_webhook.py
+++ b/src/sentry/web/frontend/release_webhook.py
@@ -3,6 +3,7 @@ from __future__ import absolute_import, print_function
 from hashlib import sha256
 import hmac
 import logging
+from simplejson import JSONDecodeError
 
 from django.http import HttpResponse
 from django.views.decorators.csrf import csrf_exempt
@@ -33,6 +34,16 @@ class ReleaseWebhookView(View):
             project.organization.slug,
             project.slug,
         )
+
+        try:
+            data = json.loads(request.body)
+        except JSONDecodeError as exc:
+            return HttpResponse(
+                status=400,
+                content=json.dumps({'error': unicode(exc)}),
+                content_type='application/json',
+            )
+
         try:
             # Ideally the API client would support some kind of god-mode here
             # as we've already confirmed credentials and simply want to execute
@@ -44,7 +55,7 @@ class ReleaseWebhookView(View):
 
             resp = client.post(
                 endpoint,
-                data=json.loads(request.body),
+                data=data,
                 auth=god,
             )
         except client.ApiError as exc:
