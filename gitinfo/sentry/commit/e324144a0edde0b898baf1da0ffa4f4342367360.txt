commit e324144a0edde0b898baf1da0ffa4f4342367360
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Tue Feb 19 10:41:31 2019 +0100

    fix: Introduce hard limit on event size after normalization (#11846)

diff --git a/src/sentry/web/api.py b/src/sentry/web/api.py
index 11293bad3c..8c8574c17e 100644
--- a/src/sentry/web/api.py
+++ b/src/sentry/web/api.py
@@ -549,6 +549,14 @@ class StoreView(APIView):
         self.pre_normalize(event_manager, helper)
         event_manager.normalize()
 
+        data = event_manager.get_data()
+        dict_data = dict(data)
+        data_size = len(json.dumps(dict_data))
+
+        if data_size > 10000000:
+            metrics.timing('events.size.rejected', data_size)
+            raise APIForbidden("Event size exceeded 10MB after normalization.")
+
         return process_event(event_manager, project,
                              key, remote_addr, helper, attachments)
 
