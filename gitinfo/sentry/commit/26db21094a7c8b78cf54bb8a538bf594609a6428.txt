commit 26db21094a7c8b78cf54bb8a538bf594609a6428
Author: David Cramer <dcramer@gmail.com>
Date:   Mon May 27 15:25:15 2013 +0800

    Updated Java instructions and other improvements

diff --git a/src/sentry/constants.py b/src/sentry/constants.py
index fe7c2d1861..82bde3f116 100644
--- a/src/sentry/constants.py
+++ b/src/sentry/constants.py
@@ -103,6 +103,10 @@ PLATFORM_LIST = (
     'flask',
     'ios',
     'java',
+    'java_log4j',
+    'java_log4j2',
+    'java_logback',
+    'java_logging',
     'javascript',
     'node.js',
     'php',
@@ -124,6 +128,10 @@ PLATFORM_ROOTS = {
     'tornado': 'python',
     'express': 'node.js',
     'connect': 'node.js',
+    'java_log4j': 'java',
+    'java_log4j2': 'java',
+    'java_logback': 'java',
+    'java_logging': 'java',
 }
 
 PLATFORM_TITLES = {
@@ -135,6 +143,10 @@ PLATFORM_TITLES = {
     'django': 'Django (Python)',
     'flask': 'Flask (Python)',
     'csharp': 'C#',
+    'java_log4j': 'Log4j (Java)',
+    'java_log4j2': 'Log4j 2.x (Java)',
+    'java_logback': 'Logback (Java)',
+    'java_logging': 'java.util.logging',
 }
 
 # Normalize counts to the 15 minute marker. This value MUST be less than 60. A
diff --git a/src/sentry/templates/sentry/partial/client_config/flask.html b/src/sentry/templates/sentry/partial/client_config/flask.html
index 6dff9a45b0..e1a9883477 100644
--- a/src/sentry/templates/sentry/partial/client_config/flask.html
+++ b/src/sentry/templates/sentry/partial/client_config/flask.html
@@ -3,18 +3,18 @@
 {% load i18n %}
 
 {% block inner %}
-	<p>{% trans "You'll also need blinker if you do not have it already:" %}</p>
+    <p>{% trans "You'll also need blinker if you do not have it already:" %}</p>
 
-	<pre>pip install blinker</pre>
+    <pre>pip install blinker</pre>
 
-	<p><em>{% trans "Blinker is required for signals to work within Flask." %}</em></p>
+    <p><em>{% trans "Blinker is required for signals to work within Flask." %}</em></p>
 
-	<p>{% trans "Add the required configuration in your application setup:" %}</p>
+    <p>{% trans "Add the required configuration in your application setup:" %}</p>
 
-	<pre>from raven.contrib.flask import Sentry
+    <pre>from raven.contrib.flask import Sentry
 
 app.config['SENTRY_DSN'] = '{% if dsn %}{{ dsn }}{% else %}<strong>SENTRY_DSN</strong>{% endif %}'
 sentry = Sentry(app)</pre>
 
-	<p>{% trans "That's it! Raven automatically installs an error handling hook to pipe all uncaught exceptions to Sentry." %}</p>
+    <p>{% trans "That's it! Raven automatically installs an error handling hook to pipe all uncaught exceptions to Sentry." %}</p>
 {% endblock %}
diff --git a/src/sentry/templates/sentry/partial/client_config/java.html b/src/sentry/templates/sentry/partial/client_config/java.html
index 18456cc367..cc040bcf79 100644
--- a/src/sentry/templates/sentry/partial/client_config/java.html
+++ b/src/sentry/templates/sentry/partial/client_config/java.html
@@ -1,22 +1,22 @@
-{% load i18n %}
-
-<p>{% blocktrans with 'https://github.com/kencochrane/raven-java' as link %}Start by installing <a href="{{ link }}">raven-java</a>.{% endblocktrans %}</p>
+{% extends "sentry/partial/client_config/java_base.html" %}
 
-<p>{% trans "Create an instance of the client:" %}</p>
+{% load i18n %}
 
-<pre>RavenClient client = new RavenClient("{% if dsn %}{{ dsn }}{% else %}<strong>SENTRY_DSN</strong>{% endif %}");</pre>
+{% block inner %}
+    <p>{% trans "You can manually send events using the EventBuilder:" %}</p>
 
-<p>{% trans "Now call out to the raven client to capture events:" %}</p>
+    <pre>import net.kencochrane.raven.Raven;
+import net.kencochrane.raven.event.EventBuilder;
 
-<pre>// {% trans "record a simple message" %}
-client.captureMessage("hello world!");
+public class Example {
+    public static void main(String[] args) {
+        String rawDsn = "{% if dsn %}{{ dsn }}{% else %}<strong>SENTRY_DSN</strong>{% endif %}";
+        Raven client = new Raven(rawDsn);
 
-// {% trans "capture an exception" %}
-try {
-    throw new RuntimeException("Uh oh!");
-}
-catch (Throwable e) {
-    client.captureException(e);
+        // {% trans "record a simple message" %}
+        EventBuilder eventBuilder = new EventBuilder()
+                        .setMessage("Hello from Raven!");
+        client.sendEvent(eventBuilder.build());
+    }
 }</pre>
-
-<p>{% blocktrans with 'https://github.com/kencochrane/raven-java' as link %}For more information on other uses of Raven with Java, please see the <a href="{{ link }}">official documentation for raven-java</a>.{% endblocktrans %}</p>
+{% endblock %}
diff --git a/src/sentry/templates/sentry/partial/client_config/java_base.html b/src/sentry/templates/sentry/partial/client_config/java_base.html
new file mode 100644
index 0000000000..7b5f03ea03
--- /dev/null
+++ b/src/sentry/templates/sentry/partial/client_config/java_base.html
@@ -0,0 +1,29 @@
+{% load i18n %}
+{% load sentry_helpers %}
+
+<div class="pull-right">
+    {% github_button 'kencochrane' 'raven-java' %}
+</div>
+
+<ul class="nav nav-tabs">
+    <li{% if platform == 'java' %} class="active"{% endif %}><a href="{% url 'sentry-docs-client' project.team.slug project.slug 'java' %}">Java</a></li>
+    <li{% if platform == 'java_logging' %} class="active"{% endif %}><a href="{% url 'sentry-docs-client' project.team.slug project.slug 'java_logging' %}">java.util.logging</a></li>
+    <li{% if platform == 'java_log4j' %} class="active"{% endif %}><a href="{% url 'sentry-docs-client' project.team.slug project.slug 'java_log4j' %}">log4j</a></li>
+    <li{% if platform == 'java_log4j2' %} class="active"{% endif %}><a href="{% url 'sentry-docs-client' project.team.slug project.slug 'java_log4j2' %}">log4j2</a></li>
+    <li{% if platform == 'java_logback' %} class="active"{% endif %}><a href="{% url 'sentry-docs-client' project.team.slug project.slug 'java_logback' %}">logback</a></li>
+</ul>
+
+<p>{% blocktrans with 'https://github.com/kencochrane/raven-java' as link %}Start by installing <a href="{{ link }}">raven-java</a>.{% endblocktrans %}</p>
+
+<p>{% blocktrans %}The easiest way to add the Raven dependency is with Maven:{% endblocktrans %}</p>
+
+<pre>&lt;dependency&gt;
+  &lt;groupId&gt;net.kencochrane.raven&lt;/groupId&gt;
+  &lt;artifactId&gt;raven&lt;/artifactId&gt;
+  &lt;version&gt;4.0&lt;/version&gt;
+&lt;/dependency&gt;</pre>
+    
+{% block inner %}
+{% endblock %}
+
+<p>{% blocktrans with 'https://github.com/kencochrane/raven-java' as link %}For more information on other uses of Raven with Java, please see the <a href="{{ link }}">official documentation for raven-java</a>.{% endblocktrans %}</p>
diff --git a/src/sentry/templates/sentry/partial/client_config/java_log4j.html b/src/sentry/templates/sentry/partial/client_config/java_log4j.html
new file mode 100644
index 0000000000..8834347f3c
--- /dev/null
+++ b/src/sentry/templates/sentry/partial/client_config/java_log4j.html
@@ -0,0 +1,12 @@
+{% extends "sentry/partial/client_config/java_base.html" %}
+
+{% load i18n %}
+
+{% block inner %}
+    <p>{% trans "You'll need to configure the SentryAppender in your logging configuration:" %}</p>
+
+    <pre>log4j.rootLogger=DEBUG, SentryAppender
+log4j.appender.SentryAppender=net.kencochrane.raven.log4j.SentryAppender
+log4j.appender.SentryAppender.dsn={% if dsn %}{{ dsn }}{% else %}<strong>SENTRY_DSN</strong>{% endif %}
+level=ERROR</pre>
+{% endblock %}
diff --git a/src/sentry/templates/sentry/partial/client_config/java_log4j2.html b/src/sentry/templates/sentry/partial/client_config/java_log4j2.html
new file mode 100644
index 0000000000..790cbe1fbc
--- /dev/null
+++ b/src/sentry/templates/sentry/partial/client_config/java_log4j2.html
@@ -0,0 +1,24 @@
+{% extends "sentry/partial/client_config/java_base.html" %}
+
+{% load i18n %}
+
+{% block inner %}
+    <p>{% trans "You'll need to configure the SentryAppender in your logging configuration:" %}</p>
+
+    <pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
+&lt;configuration status="warn" packages="org.apache.logging.log4j.core,net.kencochrane.raven.log4j2"&gt;
+    &lt;appenders&gt;
+        &lt;Raven name="Sentry"&gt;
+            &lt;dsn&gt;
+                {% if dsn %}{{ dsn }}{% else %}<strong>SENTRY_DSN</strong>{% endif %}
+            &lt;/dsn&gt;
+        &lt;/Raven&gt;
+    &lt;/appenders&gt;
+
+    &lt;loggers&gt;
+        &lt;root level="error"&gt;
+            &lt;appender-ref ref="Sentry"/&gt;
+        &lt;/root&gt;
+    &lt;/loggers&gt;
+&lt;/configuration&gt;</pre>
+{% endblock %}
diff --git a/src/sentry/templates/sentry/partial/client_config/java_logback.html b/src/sentry/templates/sentry/partial/client_config/java_logback.html
new file mode 100644
index 0000000000..115059eb97
--- /dev/null
+++ b/src/sentry/templates/sentry/partial/client_config/java_logback.html
@@ -0,0 +1,19 @@
+{% extends "sentry/partial/client_config/java_base.html" %}
+
+{% load i18n %}
+
+{% block inner %}
+    <p>{% trans "You'll need to configure the SentryAppender in your logging configuration:" %}</p>
+
+    <pre>&lt;configuration&gt;
+    &lt;appender name="Sentry" class="net.kencochrane.raven.logback.SentryAppender"&gt;
+        &lt;dsn&gt;
+            {% if dsn %}{{ dsn }}{% else %}<strong>SENTRY_DSN</strong>{% endif %}
+        &lt;/dsn&gt;
+    &lt;/appender&gt;
+
+    &lt;root &lt;"error"&gt;
+        &lt;appender-ref ref="Sentry"/&gt;
+    &lt;/root&gt;
+&lt;/configuration&gt;</pre>
+{% endblock %}
diff --git a/src/sentry/templates/sentry/partial/client_config/java_logging.html b/src/sentry/templates/sentry/partial/client_config/java_logging.html
new file mode 100644
index 0000000000..865a8b62bc
--- /dev/null
+++ b/src/sentry/templates/sentry/partial/client_config/java_logging.html
@@ -0,0 +1,11 @@
+{% extends "sentry/partial/client_config/java_base.html" %}
+
+{% load i18n %}
+
+{% block inner %}
+    <p>{% trans "You'll need to configure the SentryHandler in your logging.properties:" %}</p>
+
+    <pre>level=ERROR
+handlers=net.kencochrane.raven.jul.SentryHandler
+net.kencochrane.raven.jul.SentryHandler.dsn={% if dsn %}{{ dsn }}{% else %}<strong>SENTRY_DSN</strong>{% endif %}</pre>
+{% endblock %}
diff --git a/src/sentry/templates/sentry/partial/client_config/tornado.html b/src/sentry/templates/sentry/partial/client_config/tornado.html
index ad8b1a2e28..910ba816a9 100644
--- a/src/sentry/templates/sentry/partial/client_config/tornado.html
+++ b/src/sentry/templates/sentry/partial/client_config/tornado.html
@@ -3,9 +3,9 @@
 {% load i18n %}
 
 {% block inner %}
-	<p>{% trans "Add the required configuration in your application setup:" %}</p>
+    <p>{% trans "Add the required configuration in your application setup:" %}</p>
 
-	<pre>import tornado.web
+    <pre>import tornado.web
 from raven.contrib.tornado import AsyncSentryClient
 
 class MainHandler(tornado.web.RequestHandler):
@@ -19,9 +19,9 @@ application.sentry_client = AsyncSentryClient(
     '{% if dsn %}{{ dsn }}{% else %}<strong>SENTRY_DSN</strong>{% endif %}'
 )</pre>
 
-	<p>{% blocktrans %}Once the sentry client is attached to the application, request handlers can automatically capture uncaught exceptions by inheriting the SentryMixin class.{% endblocktrans %}</p>
+    <p>{% blocktrans %}Once the sentry client is attached to the application, request handlers can automatically capture uncaught exceptions by inheriting the SentryMixin class.{% endblocktrans %}</p>
 
-	<pre>import tornado.web
+    <pre>import tornado.web
 from raven.contrib.tornado import SentryMixin
 
 class UncaughtExceptionExampleHandler(SentryMixin, tornado.web.RequestHandler):
diff --git a/src/sentry/templates/sentry/projects/manage.html b/src/sentry/templates/sentry/projects/manage.html
index 146a96e970..00ea529f77 100644
--- a/src/sentry/templates/sentry/projects/manage.html
+++ b/src/sentry/templates/sentry/projects/manage.html
@@ -95,8 +95,8 @@
         <li{% if page == 'client_help_node.js' %} class="active"{% endif %}>
             <a href="{% url 'sentry-docs-client' project.team.slug project.slug "node.js" %}">{% trans "Node.js" %}</a>
         </li>
-        <li{% if page == 'client_help_ios' %} class="active"{% endif %}>
-            <a href="{% url 'sentry-docs-client' project.team.slug project.slug "ios" %}">{% trans "iOS" %}</a>
+        <li{% if page == 'client_help_java' %} class="active"{% endif %}>
+            <a href="{% url 'sentry-docs-client' project.team.slug project.slug "java" %}">{% trans "Java" %}</a>
         </li>
     </ul>
     {% with project|get_plugins as plugins %}
