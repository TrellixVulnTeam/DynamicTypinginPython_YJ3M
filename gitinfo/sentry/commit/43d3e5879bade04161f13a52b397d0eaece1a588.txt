commit 43d3e5879bade04161f13a52b397d0eaece1a588
Author: ted kaemming <ted@kaemming.com>
Date:   Thu May 31 15:02:14 2018 -0700

    fix(api): Avoid doing extra/invalid queries during in OrganizationUserIssuesSearchEndpoint (#8610)

diff --git a/src/sentry/api/endpoints/organization_user_issues_search.py b/src/sentry/api/endpoints/organization_user_issues_search.py
index d403e01fc9..df09e974d2 100644
--- a/src/sentry/api/endpoints/organization_user_issues_search.py
+++ b/src/sentry/api/endpoints/organization_user_issues_search.py
@@ -30,18 +30,21 @@ class OrganizationUserIssuesSearchEndpoint(OrganizationEndpoint, EnvironmentMixi
             ).values_list('id', flat=True)[:1000]
         )
 
-        event_users = EventUser.objects.filter(
+        event_users = list(EventUser.objects.filter(
             email=email,
             project_id__in=project_ids,
-        )[:1000]
-
-        project_ids = list(set([e.project_id for e in event_users]))
-
-        group_ids = tagstore.get_group_ids_for_users(project_ids, event_users, limit=limit)
-
-        groups = Group.objects.filter(
-            id__in=group_ids,
-        ).order_by('-last_seen')[:limit]
+        )[:1000])
+
+        if event_users:
+            groups = Group.objects.filter(
+                id__in=tagstore.get_group_ids_for_users(
+                    project_ids=list(set([e.project_id for e in event_users])),
+                    event_users=event_users,
+                    limit=limit,
+                ),
+            ).order_by('-last_seen')[:limit]
+        else:
+            groups = []
 
         context = serialize(list(groups), request.user, GroupSerializer(
             environment_func=self._get_environment_func(
