commit e8ff7b52516e88f3b963d4e2b5e8f58b375e049d
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Tue Feb 27 10:54:08 2018 -0800

    feat(environments): Remove environment feature flag from alert rules (#7346)

diff --git a/src/sentry/static/sentry/app/views/ruleEditor/index.jsx b/src/sentry/static/sentry/app/views/ruleEditor/index.jsx
index e6c8b721d0..0d5b0966ac 100644
--- a/src/sentry/static/sentry/app/views/ruleEditor/index.jsx
+++ b/src/sentry/static/sentry/app/views/ruleEditor/index.jsx
@@ -173,9 +173,6 @@ const RuleEditor = createReactClass({
   },
 
   render() {
-    const hasEnvironmentsFeature = new Set(this.props.organization.features).has(
-      'environments'
-    );
     const activeEnvs = EnvironmentStore.getActive() || [];
     const environmentChoices = [
       ['all', t('All Environments')],
@@ -246,22 +243,18 @@ const RuleEditor = createReactClass({
 
             <hr />
 
-            {hasEnvironmentsFeature && (
-              <React.Fragment>
-                <h6>{t('In this environment')}:</h6>
-                <Select2Field
-                  className={this.hasError('environment') ? ' error' : ''}
-                  style={{marginBottom: 0, marginLeft: 5, marginRight: 5}}
-                  name="environment"
-                  value={environment}
-                  required={true}
-                  choices={environmentChoices}
-                  onChange={val => this.handleEnvironmentChange(val)}
-                />
-
-                <hr />
-              </React.Fragment>
-            )}
+            <h6>{t('In this environment')}:</h6>
+            <Select2Field
+              className={this.hasError('environment') ? ' error' : ''}
+              style={{marginBottom: 0, marginLeft: 5, marginRight: 5}}
+              name="environment"
+              value={environment}
+              required={true}
+              choices={environmentChoices}
+              onChange={val => this.handleEnvironmentChange(val)}
+            />
+
+            <hr />
 
             <h6>{t('Take these actions:')}</h6>
 
diff --git a/tests/js/spec/views/__snapshots__/projectAlertRuleDetails.spec.jsx.snap b/tests/js/spec/views/__snapshots__/projectAlertRuleDetails.spec.jsx.snap
index 8580ef1f3e..ea37ee9d55 100644
--- a/tests/js/spec/views/__snapshots__/projectAlertRuleDetails.spec.jsx.snap
+++ b/tests/js/spec/views/__snapshots__/projectAlertRuleDetails.spec.jsx.snap
@@ -286,6 +286,72 @@ exports[`ProjectAlertRuleDetails Edit alert rule renders 1`] = `
                 </div>
               </RuleNodeList>
               <hr />
+              <h6>
+                In this environment
+                :
+              </h6>
+              <Select2Field
+                allowClear={false}
+                allowEmpty={false}
+                choices={
+                  Array [
+                    Array [
+                      "all",
+                      "All Environments",
+                    ],
+                  ]
+                }
+                className=""
+                disabled={false}
+                escapeMarkup={true}
+                hideErrorMessage={false}
+                multiple={false}
+                name="environment"
+                onChange={[Function]}
+                placeholder="--"
+                required={true}
+                style={
+                  Object {
+                    "marginBottom": 0,
+                    "marginLeft": 5,
+                    "marginRight": 5,
+                  }
+                }
+              >
+                <div
+                  className="control-group required"
+                  style={
+                    Object {
+                      "marginBottom": 0,
+                      "marginLeft": 5,
+                      "marginRight": 5,
+                    }
+                  }
+                >
+                  <div
+                    className="controls"
+                  >
+                    <select
+                      className="form-control"
+                      disabled={false}
+                      id="id-environment"
+                      multiple={false}
+                      onChange={[Function]}
+                      placeholder="--"
+                      required={true}
+                      value=""
+                    >
+                      <option
+                        key="all"
+                        value="all"
+                      >
+                        All Environments
+                      </option>
+                    </select>
+                  </div>
+                </div>
+              </Select2Field>
+              <hr />
               <h6>
                 Take these actions:
               </h6>
@@ -821,6 +887,72 @@ exports[`ProjectAlertRuleDetails New alert rule renders 1`] = `
                 </div>
               </RuleNodeList>
               <hr />
+              <h6>
+                In this environment
+                :
+              </h6>
+              <Select2Field
+                allowClear={false}
+                allowEmpty={false}
+                choices={
+                  Array [
+                    Array [
+                      "all",
+                      "All Environments",
+                    ],
+                  ]
+                }
+                className=""
+                disabled={false}
+                escapeMarkup={true}
+                hideErrorMessage={false}
+                multiple={false}
+                name="environment"
+                onChange={[Function]}
+                placeholder="--"
+                required={true}
+                style={
+                  Object {
+                    "marginBottom": 0,
+                    "marginLeft": 5,
+                    "marginRight": 5,
+                  }
+                }
+              >
+                <div
+                  className="control-group required"
+                  style={
+                    Object {
+                      "marginBottom": 0,
+                      "marginLeft": 5,
+                      "marginRight": 5,
+                    }
+                  }
+                >
+                  <div
+                    className="controls"
+                  >
+                    <select
+                      className="form-control"
+                      disabled={false}
+                      id="id-environment"
+                      multiple={false}
+                      onChange={[Function]}
+                      placeholder="--"
+                      required={true}
+                      value=""
+                    >
+                      <option
+                        key="all"
+                        value="all"
+                      >
+                        All Environments
+                      </option>
+                    </select>
+                  </div>
+                </div>
+              </Select2Field>
+              <hr />
               <h6>
                 Take these actions:
               </h6>
