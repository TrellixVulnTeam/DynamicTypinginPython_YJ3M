commit 80ac30549322ab692ca95ea5a36b02721ce18143
Author: Dan Fuller <dfuller@sentry.io>
Date:   Wed Feb 12 18:36:53 2020 -0800

    fix(subscriptions): Add logging to query_subscription_consumer
    
    Haven't had much luck adding this to APM, just adding logging for the moment so that we can diagnose
    this better.

diff --git a/src/sentry/snuba/query_subscription_consumer.py b/src/sentry/snuba/query_subscription_consumer.py
index 1b680c3bd7..3f2ece7b9a 100644
--- a/src/sentry/snuba/query_subscription_consumer.py
+++ b/src/sentry/snuba/query_subscription_consumer.py
@@ -172,6 +172,15 @@ class QuerySubscriptionConsumer(object):
                 )
                 return
 
+            logger.info(
+                "query-subscription-consumer.handle_message",
+                extra={
+                    "timestamp": contents["timestamp"],
+                    "query_subscription_id": contents["subscription_id"],
+                    "contents": contents,
+                },
+            )
+
             callback = subscriber_registry[subscription.type]
             with sentry_sdk.start_span(
                 op="process_message", transaction="query_subscription_consumer_process_message"
