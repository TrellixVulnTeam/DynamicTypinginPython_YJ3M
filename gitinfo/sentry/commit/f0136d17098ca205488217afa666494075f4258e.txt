commit f0136d17098ca205488217afa666494075f4258e
Author: Markus Unterwaditzer <markus@unterwaditzer.net>
Date:   Mon Nov 4 14:02:59 2019 +0100

    ref: Refactor event metrics to distinguish between relay vs non-relay (#15369)
    
    * ref: Refactor event metrics to distinguish between relay vs non-relay events
    
    * fix: Switch to incr

diff --git a/src/sentry/event_manager.py b/src/sentry/event_manager.py
index e75a62b364..c1bdb7f833 100644
--- a/src/sentry/event_manager.py
+++ b/src/sentry/event_manager.py
@@ -324,8 +324,6 @@ class EventManager(object):
         with metrics.timer("events.store.normalize.duration"):
             self._normalize_impl()
 
-        metrics.timing("events.store.normalize.errors", len(self._data.get("errors") or ()))
-
     def _normalize_impl(self):
         if self._normalized:
             raise RuntimeError("Already normalized")
@@ -810,9 +808,15 @@ class EventManager(object):
             skip_consume=raw,
         )
 
-        metrics.timing("events.latency", received_timestamp - recorded_timestamp)
+        metric_tags = {"from_relay": "_relay_processed" in self._data}
 
-        metrics.timing("events.size.data.post_save", event.size)
+        metrics.timing("events.latency", received_timestamp - recorded_timestamp, tags=metric_tags)
+        metrics.timing("events.size.data.post_save", event.size, tags=metric_tags)
+        metrics.incr(
+            "events.post_save.normalize.errors",
+            amount=len(self._data.get("errors") or ()),
+            tags=metric_tags,
+        )
 
         return event
 
