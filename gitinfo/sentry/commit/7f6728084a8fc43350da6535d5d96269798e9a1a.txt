commit 7f6728084a8fc43350da6535d5d96269798e9a1a
Author: askfor <askfor@gmail.com>
Date:   Thu Jan 24 18:13:43 2013 +0800

    Update src/sentry/utils/dates.py
    
    DATE is a keyword in oracle.
    So it should be TRUNC("DATE") instead of TRUNC(date)

diff --git a/src/sentry/utils/dates.py b/src/sentry/utils/dates.py
index 6a3c0816b1..10602bdbc1 100644
--- a/src/sentry/utils/dates.py
+++ b/src/sentry/utils/dates.py
@@ -31,7 +31,8 @@ def get_sql_date_trunc(col, db='default', grouper='hour'):
         method = DATE_TRUNC_GROUPERS['oracle'].get(grouper, DATE_TRUNC_GROUPERS['default'][grouper])
     else:
         method = DATE_TRUNC_GROUPERS['default'][grouper]
-
+    if not '"' in col:
+        col = '"%s"'%str.upper(col)
     return conn.ops.date_trunc_sql(method, col)
 
 
