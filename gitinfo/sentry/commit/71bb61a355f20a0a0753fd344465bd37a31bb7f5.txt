commit 71bb61a355f20a0a0753fd344465bd37a31bb7f5
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Apr 2 01:21:38 2013 -0700

    Correct alert option fetching

diff --git a/src/sentry/tasks/check_alerts.py b/src/sentry/tasks/check_alerts.py
index ecff16b35a..507e303cd5 100644
--- a/src/sentry/tasks/check_alerts.py
+++ b/src/sentry/tasks/check_alerts.py
@@ -63,8 +63,12 @@ def check_project_alerts(project_id, when, count, **kwargs):
     from sentry.conf import settings
     from sentry.models import ProjectCountByMinute, ProjectOption, Alert
 
+    # TODO: make this use the cache
     try:
-        threshold, min_events = ProjectOption.objects.get(project=project_id, key='alert:threshold')
+        threshold, min_events = ProjectOption.objects.get(
+            project=project_id,
+            key='alert:threshold',
+        ).value
     except ProjectOption.DoesNotExist:
         threshold, min_events = settings.DEFAULT_ALERT_PROJECT_THRESHOLD
 
