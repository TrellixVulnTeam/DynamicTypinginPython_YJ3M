commit 2f9169c41d7106d1d438502bda017eb965364a56
Author: Dora <dora.l.chan@gmail.com>
Date:   Tue Nov 26 16:58:25 2019 -0800

    feat(discoverv2): removing issue from tab and updating order of issue in sidebar (#15834)
    
    * moving issue higher
    
    * removing issue from tab
    
    * adjusting color for event detail header
    
    * mv renderLinkedEvents() and add hasLinkedEvents

diff --git a/src/sentry/static/sentry/app/views/eventsV2/eventDetails/content.tsx b/src/sentry/static/sentry/app/views/eventsV2/eventDetails/content.tsx
index 845c6dca98..bb4967c929 100644
--- a/src/sentry/static/sentry/app/views/eventsV2/eventDetails/content.tsx
+++ b/src/sentry/static/sentry/app/views/eventsV2/eventDetails/content.tsx
@@ -152,10 +152,10 @@ class EventDetailsContent extends AsyncComponent<Props, State & AsyncComponent['
               organization={organization}
               projectId={this.projectId}
             />
-            <TagsTable tags={event.tags} />
             {event.groupID && (
               <LinkedIssue groupId={event.groupID} eventId={event.eventID} />
             )}
+            <TagsTable tags={event.tags} />
           </Side>
         </ContentBox>
       </div>
@@ -262,8 +262,8 @@ const EventHeader = (props: {event: Event}) => {
   const {title} = getTitle(props.event);
   return (
     <StyledEventHeader data-test-id="event-header">
-      <StyledTitle>{title}</StyledTitle>
-      <span>{getMessage(props.event)}</span>
+      <StyledTitle>{title}:</StyledTitle>
+      <StyledMessage>{getMessage(props.event)}</StyledMessage>
     </StyledEventHeader>
   );
 };
@@ -277,10 +277,13 @@ const StyledEventHeader = styled('div')`
 `;
 
 const StyledTitle = styled('span')`
-  color: ${p => p.theme.purple};
   margin-right: ${space(1)};
 `;
 
+const StyledMessage = styled('span')`
+  color: ${p => p.theme.gray2};
+`;
+
 /**
  * Render metadata about the event and provide a link to the JSON blob
  */
diff --git a/src/sentry/static/sentry/app/views/eventsV2/eventDetails/linkedEvents.tsx b/src/sentry/static/sentry/app/views/eventsV2/eventDetails/linkedEvents.tsx
index 5405547ca8..0b234b89fa 100644
--- a/src/sentry/static/sentry/app/views/eventsV2/eventDetails/linkedEvents.tsx
+++ b/src/sentry/static/sentry/app/views/eventsV2/eventDetails/linkedEvents.tsx
@@ -1,13 +1,11 @@
 import React from 'react';
 import styled from 'react-emotion';
 
-import {Organization, Event, Group, Project} from 'app/types';
+import {Organization, Event, Project} from 'app/types';
 import AsyncComponent from 'app/components/asyncComponent';
 import DateTime from 'app/components/dateTime';
-import ShortId from 'app/components/shortId';
 import Link from 'app/components/links/link';
 import ProjectBadge from 'app/components/idBadge/projectBadge';
-import Times from 'app/components/group/times';
 import {t} from 'app/locale';
 import space from 'app/styles/space';
 import theme from 'app/utils/theme';
@@ -19,7 +17,6 @@ import {SectionHeading} from '../styles';
 type DiscoverResult = {
   id: string;
   'project.name': string;
-  'issue.id': number;
   'event.type': string;
   title: string;
   transaction: string;
@@ -34,7 +31,6 @@ type Props = {
 } & AsyncComponent['props'];
 
 type State = {
-  issue: Group;
   linkedEvents: {data: DiscoverResult[]};
 } & AsyncComponent['state'];
 
@@ -43,10 +39,6 @@ class LinkedEvents extends AsyncComponent<Props, State> {
     const {event, organization} = this.props;
     const endpoints: any = [];
 
-    if (event.type !== 'transaction') {
-      endpoints.push(['issue', `/issues/${event.groupID}/`, {}]);
-    }
-
     const trace = event.tags.find(tag => tag.key === 'trace');
     if (trace) {
       endpoints.push([
@@ -59,7 +51,6 @@ class LinkedEvents extends AsyncComponent<Props, State> {
               'title',
               'transaction',
               'id',
-              'issue.id',
               'event.type',
               'timestamp',
             ],
@@ -72,37 +63,17 @@ class LinkedEvents extends AsyncComponent<Props, State> {
     return endpoints;
   }
 
-  renderLinkedIssue() {
-    const {event} = this.props;
-    const {issue} = this.state;
-    const issueUrl = `${issue.permalink}events/${event.eventID}/`;
-
-    return (
-      <Section>
-        <SectionHeading>{t('Linked Issue')}</SectionHeading>
-        <StyledCard>
-          <StyledLink to={issueUrl} data-test-id="linked-issue">
-            <StyledShortId
-              shortId={issue.shortId}
-              avatar={<ProjectBadge project={issue.project} avatarSize={16} hideName />}
-            />
-            <div>{issue.title}</div>
-          </StyledLink>
-          <StyledDate>
-            <Times lastSeen={issue.lastSeen} firstSeen={issue.firstSeen} />
-          </StyledDate>
-        </StyledCard>
-      </Section>
-    );
-  }
-
-  renderLinkedEvents() {
+  renderBody() {
     const {event, organization, projects} = this.props;
     const {linkedEvents} = this.state;
+
+    const hasLinkedEvents =
+      linkedEvents && linkedEvents.data && linkedEvents.data.length >= 1;
+
     return (
       <Section>
         <SectionHeading>{t('Linked Trace Events')}</SectionHeading>
-        {linkedEvents.data.length < 1 ? (
+        {!hasLinkedEvents ? (
           <StyledCard>{t('No linked events found.')}</StyledCard>
         ) : (
           linkedEvents.data.map((item: DiscoverResult) => {
@@ -129,15 +100,6 @@ class LinkedEvents extends AsyncComponent<Props, State> {
       </Section>
     );
   }
-
-  renderBody() {
-    return (
-      <React.Fragment>
-        {this.state.issue && this.renderLinkedIssue()}
-        {this.state.linkedEvents && this.renderLinkedEvents()}
-      </React.Fragment>
-    );
-  }
 }
 
 const Section = styled('div')`
@@ -185,13 +147,4 @@ const StyledDate = styled('div')`
   }
 `;
 
-const StyledShortId = styled(ShortId)`
-  justify-content: flex-start;
-  color: ${p => p.theme.gray4};
-
-  @media (min-width: ${theme.breakpoints[3]}) {
-    margin-right: ${space(2)};
-  }
-`;
-
 export default withProjects(LinkedEvents);
diff --git a/src/sentry/static/sentry/app/views/eventsV2/eventDetails/linkedIssue.tsx b/src/sentry/static/sentry/app/views/eventsV2/eventDetails/linkedIssue.tsx
index 3c2d93aeb0..9a8baa4ff6 100644
--- a/src/sentry/static/sentry/app/views/eventsV2/eventDetails/linkedIssue.tsx
+++ b/src/sentry/static/sentry/app/views/eventsV2/eventDetails/linkedIssue.tsx
@@ -50,7 +50,7 @@ class LinkedIssue extends AsyncComponent<
     const issueUrl = `${group.permalink}events/${eventId}/`;
 
     return (
-      <div>
+      <Section>
         <SectionHeading>{t('Event Issue')}</SectionHeading>
         <StyledIssueCard>
           <IssueCardHeader>
@@ -69,11 +69,15 @@ class LinkedIssue extends AsyncComponent<
             <Times lastSeen={group.lastSeen} firstSeen={group.firstSeen} />
           </IssueCardFooter>
         </StyledIssueCard>
-      </div>
+      </Section>
     );
   }
 }
 
+const Section = styled('div')`
+  margin-bottom: ${space(3)};
+`;
+
 const StyledIssueCard = styled('div')`
   border: 1px solid ${p => p.theme.borderLight};
   border-radius: ${p => p.theme.borderRadius};
diff --git a/src/sentry/static/sentry/app/views/eventsV2/querycard.tsx b/src/sentry/static/sentry/app/views/eventsV2/querycard.tsx
index 138f3fefaf..514074a661 100644
--- a/src/sentry/static/sentry/app/views/eventsV2/querycard.tsx
+++ b/src/sentry/static/sentry/app/views/eventsV2/querycard.tsx
@@ -1,6 +1,7 @@
 import React from 'react';
 import styled from 'react-emotion';
 import {browserHistory} from 'react-router';
+import overflowEllipsis from 'app/styles/overflowEllipsis';
 
 import space from 'app/styles/space';
 import {callIfFunction} from 'app/utils/callIfFunction';
@@ -35,9 +36,7 @@ class QueryCard extends React.PureComponent<Props> {
         </QueryCardHeader>
         <QueryCardBody>{renderGraph()}</QueryCardBody>
         <QueryCardFooter>
-          <StyledCreator>
-            <small>{subtitle}</small>
-          </StyledCreator>
+          <StyledCreator>{subtitle}</StyledCreator>
           {renderContextMenu && renderContextMenu()}
         </QueryCardFooter>
       </StyledQueryCard>
@@ -118,6 +117,8 @@ const QueryCardFooter = styled('div')`
 `;
 
 const StyledCreator = styled('div')`
+  font-size: ${p => p.theme.fontSizeSmall};
+  ${overflowEllipsis};
   display: flex;
   align-items: center;
 `;
