commit 3be74402b93ec692f84aa5958618c2c438783f88
Author: David Cramer <dcramer@gmail.com>
Date:   Tue Nov 25 18:11:21 2014 -0800

    Store less data for individual user tags

diff --git a/src/sentry/tasks/post_process.py b/src/sentry/tasks/post_process.py
index 56850955be..430c5d010f 100644
--- a/src/sentry/tasks/post_process.py
+++ b/src/sentry/tasks/post_process.py
@@ -187,14 +187,15 @@ def record_affected_user(event, **kwargs):
 
     user_data = event.data.get('sentry.interfaces.User', {})
 
+    tag_data = {}
+    for key in ('id', 'email', 'username', 'data'):
+        value = user_data.get(key)
+        if value:
+            tag_data[key] = value
+    tag_data['ip'] = event.ip_address
+
     Group.objects.add_tags(event.group, [
-        ('sentry:user', user_ident, {
-            'id': user_data.get('id'),
-            'email': user_data.get('email'),
-            'username': user_data.get('username'),
-            'data': user_data.get('data'),
-            'ip': event.ip_address,
-        })
+        ('sentry:user', user_ident, tag_data)
     ])
 
 
