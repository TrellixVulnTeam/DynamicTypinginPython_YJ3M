commit 876e53b65f9985e9cf59f4ecf080a2d4c4349683
Author: David Cramer <dcramer@gmail.com>
Date:   Wed Nov 14 04:03:53 2012 -0800

    Fix realtime button

diff --git a/src/sentry/static/sentry/coffee/app.coffee b/src/sentry/static/sentry/coffee/app.coffee
index d2b7a32b70..47cc262c6b 100644
--- a/src/sentry/static/sentry/coffee/app.coffee
+++ b/src/sentry/static/sentry/coffee/app.coffee
@@ -83,6 +83,21 @@ jQuery ->
                 realtime: true
                 pollUrl: app.config.urlPrefix + '/api/' + app.config.projectId + '/poll/'
 
+            $('a[data-action=pause]').click (e) =>
+                e.preventDefault()
+                $target = $(e.target)
+                if $target.hasClass('realtime-pause')
+                    @group_list.config.realtime = true
+                    $target.removeClass('realtime-pause')
+                    $target.addClass('realtime-play')
+                    $target.html($target.attr('data-pause-label'))
+                else
+                    @group_list.config.realtime = false
+                    $target.addClass('realtime-pause')
+                    $target.removeClass('realtime-play')
+                    $target.html($target.attr('data-play-label'))
+
+
     app.DashboardPage = class DashboardPage extends BasePage
 
         initialize: (data) ->
diff --git a/src/sentry/static/sentry/scripts/site.js b/src/sentry/static/sentry/scripts/site.js
index 46412f0d91..20def54798 100644
--- a/src/sentry/static/sentry/scripts/site.js
+++ b/src/sentry/static/sentry/scripts/site.js
@@ -100,8 +100,9 @@
       }
 
       StreamPage.prototype.initialize = function(data) {
+        var _this = this;
         BasePage.prototype.initialize.call(this, data);
-        return this.group_list = new app.GroupListView({
+        this.group_list = new app.GroupListView({
           className: 'group-list',
           id: 'event_list',
           members: data.groups,
@@ -109,6 +110,22 @@
           realtime: true,
           pollUrl: app.config.urlPrefix + '/api/' + app.config.projectId + '/poll/'
         });
+        return $('a[data-action=pause]').click(function(e) {
+          var $target;
+          e.preventDefault();
+          $target = $(e.target);
+          if ($target.hasClass('realtime-pause')) {
+            _this.group_list.config.realtime = true;
+            $target.removeClass('realtime-pause');
+            $target.addClass('realtime-play');
+            return $target.html($target.attr('data-pause-label'));
+          } else {
+            _this.group_list.config.realtime = false;
+            $target.addClass('realtime-pause');
+            $target.removeClass('realtime-play');
+            return $target.html($target.attr('data-play-label'));
+          }
+        });
       };
 
       return StreamPage;
diff --git a/src/sentry/templates/sentry/groups/group_list.html b/src/sentry/templates/sentry/groups/group_list.html
index 358d26878d..633558e6fb 100644
--- a/src/sentry/templates/sentry/groups/group_list.html
+++ b/src/sentry/templates/sentry/groups/group_list.html
@@ -58,7 +58,7 @@
             <a class="btn" href="javascript:void(0)" id="sentry-resolve-feed" onclick="Sentry.stream.clear('{{ project.slug }}');">{% trans "Resolve Feed" %}</a>
         </div>
         <div class="btn-group">
-            <a class="btn realtime-play" href="javascript:void(0)" id="sentry-realtime" onclick="Sentry.realtime.toggle();">{% trans "Pause Feed" %}</a>
+            <a class="btn realtime-play" data-action="pause" data-pause-label="{% trans "Pause Updates" %}" data-play-label="{% trans "Enable Updates" %}" href="javascript:void(0)">{% trans "Pause Updates" %}</a>
         </div>
         <div class="btn-group">
             <a href="#" class="btn dropdown-toggle" data-toggle="dropdown">{% blocktrans with sort_label as label %}Sort by: {{ label }}{% endblocktrans %} <span class="caret"></span></a>
