commit 01e2019c3ad475e60d8ad7a225c75502feb5d1b6
Author: Jess MacQueen <jessmacqueen@gmail.com>
Date:   Tue Sep 25 13:09:22 2018 -0700

    fix(integrations): Fix UnicodeDecodeError in atlassian connect query encoding
    fixes SENTRY-7MQ
    fixes SENTRY-7PB

diff --git a/src/sentry/utils/http.py b/src/sentry/utils/http.py
index 7d48e4d9ec..7ac2351423 100644
--- a/src/sentry/utils/http.py
+++ b/src/sentry/utils/http.py
@@ -266,4 +266,6 @@ def heuristic_decode(data, possible_content_type=None):
 
 def percent_encode(val):
     # see https://en.wikipedia.org/wiki/Percent-encoding
-    return quote(val.encode('utf8', errors='replace')).replace('%7E', '~').replace('/', '%2F')
+    if isinstance(val, six.text_type):
+        val = val.encode('utf8', errors='replace')
+    return quote(val).replace('%7E', '~').replace('/', '%2F')
