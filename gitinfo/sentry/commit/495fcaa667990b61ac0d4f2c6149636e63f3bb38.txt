commit 495fcaa667990b61ac0d4f2c6149636e63f3bb38
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Fri Mar 11 22:47:49 2016 +0100

    Fixed a bug with the callsign migration that could cause endless loops.

diff --git a/src/sentry/migrations/0242_prefill_callsigns.py b/src/sentry/migrations/0242_prefill_callsigns.py
index 86fab551c4..a0956b1fd4 100644
--- a/src/sentry/migrations/0242_prefill_callsigns.py
+++ b/src/sentry/migrations/0242_prefill_callsigns.py
@@ -29,8 +29,7 @@ def get_callsigns(projects):
         if project.callsign is not None:
             rv[project.callsign] = project.id
             continue
-        for callsign in iter_callsign_choices(project.name,
-                                              team_name=project.team.name):
+        for callsign in iter_callsign_choices(project.name):
             if callsign in rv:
                 continue
             rv[callsign] = project.id
diff --git a/src/sentry/utils/strings.py b/src/sentry/utils/strings.py
index d001cbf2c2..66bd466b61 100644
--- a/src/sentry/utils/strings.py
+++ b/src/sentry/utils/strings.py
@@ -111,8 +111,6 @@ def validate_callsign(value):
 def iter_callsign_choices(project_name, team_name=None):
     words = list(x.upper() for x in tokens_from_name(
         project_name, remove_digits=True))
-    if not words:
-        words = ['AA']
     bits = []
 
     if len(words) == 2:
@@ -129,6 +127,10 @@ def iter_callsign_choices(project_name, team_name=None):
     for bit in bits:
         yield bit
 
+    # Fallback if nothing else works, use PR for project
+    if not bits:
+        bits.append('PR')
+
     if team_name is not None:
         try:
             team_bit = _letters_re.findall(team_name.upper())[0][:1]
