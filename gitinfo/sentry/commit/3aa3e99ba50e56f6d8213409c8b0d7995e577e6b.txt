commit 3aa3e99ba50e56f6d8213409c8b0d7995e577e6b
Author: Lyn Nagara <lyn.nagara@gmail.com>
Date:   Wed Jan 17 11:36:33 2018 -0800

    fix: Prevent merging if only one issue is selected (#6982)
    
    Disables the merge button in the action stream view if only one issue is selected
    
    Fixes #6949

diff --git a/src/sentry/static/sentry/app/views/stream/actions.jsx b/src/sentry/static/sentry/app/views/stream/actions.jsx
index 975e48d186..d8c766447b 100644
--- a/src/sentry/static/sentry/app/views/stream/actions.jsx
+++ b/src/sentry/static/sentry/app/views/stream/actions.jsx
@@ -283,8 +283,7 @@ const StreamActions = createReactClass({
     // TODO(mitsuhiko): very unclear how to translate this
     let issues = this.state.selectedIds;
     let numIssues = issues.size;
-    let {allInQuerySelected, anySelected} = this.state;
-    let disabled = !anySelected;
+    let {allInQuerySelected, anySelected, multiSelected} = this.state;
     let confirm = getConfirm(numIssues, allInQuerySelected, this.props.query);
     let label = getLabel(numIssues, allInQuerySelected);
 
@@ -308,14 +307,14 @@ const StreamActions = createReactClass({
               shouldConfirm={this.shouldConfirm('resolve')}
               confirmMessage={confirm('resolve', true)}
               confirmLabel={label('resolve')}
-              disabled={disabled}
+              disabled={!anySelected}
             />
             <IgnoreActions
               onUpdate={this.onUpdate}
               shouldConfirm={this.shouldConfirm('ignore')}
               confirmMessage={confirm('ignore', true)}
               confirmLabel={label('ignore')}
-              disabled={disabled}
+              disabled={!anySelected}
             />
             <div className="btn-group">
               <ActionLink
@@ -325,7 +324,7 @@ const StreamActions = createReactClass({
                 message={confirm('bookmark', false)}
                 confirmLabel={label('bookmark')}
                 title={t('Add to Bookmarks')}
-                disabled={disabled}
+                disabled={!anySelected}
               >
                 <i aria-hidden="true" className="icon-star-solid" />
               </ActionLink>
@@ -341,7 +340,7 @@ const StreamActions = createReactClass({
                 <MenuItem noAnchor={true}>
                   <ActionLink
                     className="action-merge"
-                    disabled={disabled}
+                    disabled={!multiSelected}
                     onAction={this.onMerge}
                     shouldConfirm={this.shouldConfirm('merge')}
                     message={confirm('merge', false)}
@@ -353,7 +352,7 @@ const StreamActions = createReactClass({
                 <MenuItem noAnchor={true}>
                   <ActionLink
                     className="action-remove-bookmark"
-                    disabled={disabled}
+                    disabled={!anySelected}
                     onAction={() => this.onUpdate({isBookmarked: false})}
                     shouldConfirm={this.shouldConfirm('unbookmark')}
                     message={confirm('remove', false, ' from your bookmarks')}
@@ -366,7 +365,7 @@ const StreamActions = createReactClass({
                 <MenuItem noAnchor={true}>
                   <ActionLink
                     className="action-unresolve"
-                    disabled={disabled}
+                    disabled={!anySelected}
                     onAction={() => this.onUpdate({status: 'unresolved'})}
                     shouldConfirm={this.shouldConfirm('unresolve')}
                     message={confirm('unresolve', true)}
@@ -379,7 +378,7 @@ const StreamActions = createReactClass({
                 <MenuItem noAnchor={true}>
                   <ActionLink
                     className="action-delete"
-                    disabled={disabled || this.state.allInQuerySelected}
+                    disabled={!anySelected || this.state.allInQuerySelected}
                     onAction={this.onDelete}
                     shouldConfirm={this.shouldConfirm('delete')}
                     message={confirm('delete', false)}
