commit 5263e1b4411479e5236f0699f9a3fc84db1ae96d
Author: David Cramer <dcramer@gmail.com>
Date:   Fri Feb 8 13:59:28 2013 -0800

    Correct crossdomain tests

diff --git a/tests/sentry/web/api/tests.py b/tests/sentry/web/api/tests.py
index 502aa5cc8b..0b1069cd0c 100644
--- a/tests/sentry/web/api/tests.py
+++ b/tests/sentry/web/api/tests.py
@@ -85,7 +85,7 @@ class CrossDomainXmlTest(TestCase):
         self.assertEquals(resp.status_code, 200)
         self.assertEquals(resp['Content-Type'], 'application/xml')
         self.assertTemplateUsed(resp, 'sentry/crossdomain.xml')
-        self.assertIn('<allow-access-from domain="*" secure="true"></allow-access-from>', resp.content)
+        assert '<allow-access-from domain="*" secure="false" />' in resp.content
 
     @mock.patch('sentry.web.api.get_origins')
     def test_output_with_whitelist(self, get_origins):
@@ -95,8 +95,8 @@ class CrossDomainXmlTest(TestCase):
         self.assertEquals(resp.status_code, 200)
         self.assertEquals(resp['Content-Type'], 'application/xml')
         self.assertTemplateUsed(resp, 'sentry/crossdomain.xml')
-        self.assertIn('<allow-access-from domain="disqus.com" secure="true"></allow-access-from>', resp.content)
-        self.assertIn('<allow-access-from domain="www.disqus.com" secure="true"></allow-access-from>', resp.content)
+        assert '<allow-access-from domain="disqus.com" secure="false" />' in resp.content
+        assert '<allow-access-from domain="www.disqus.com" secure="false" />' in resp.content
 
     @mock.patch('sentry.web.api.get_origins')
     def test_output_with_no_origins(self, get_origins):
@@ -106,14 +106,14 @@ class CrossDomainXmlTest(TestCase):
         self.assertEquals(resp.status_code, 200)
         self.assertEquals(resp['Content-Type'], 'application/xml')
         self.assertTemplateUsed(resp, 'sentry/crossdomain.xml')
-        self.assertNotIn('<allow-access-from', resp.content)
+        assert '<allow-access-from' not in resp.content
 
     def test_output_allows_x_sentry_auth(self):
         resp = self.client.get(self.path)
         self.assertEquals(resp.status_code, 200)
         self.assertEquals(resp['Content-Type'], 'application/xml')
         self.assertTemplateUsed(resp, 'sentry/crossdomain.xml')
-        self.assertIn('<allow-http-request-headers-from domain="*" headers="X-Sentry-Auth" secure="true"></allow-http-request-headers-from>', resp.content)
+        assert '<allow-http-request-headers-from domain="*" headers="X-Sentry-Auth" secure="false" />' in resp.content
 
 
 class CrossDomainXmlIndexTest(TestCase):
@@ -125,4 +125,5 @@ class CrossDomainXmlIndexTest(TestCase):
         resp = self.client.get(self.path)
         self.assertEquals(resp.status_code, 200)
         self.assertEquals(resp['Content-Type'], 'application/xml')
-        self.assertIn('<site-control permitted-cross-domain-policies="all"></site-control>', resp.content)
+        self.assertTemplateUsed(resp, 'sentry/crossdomain_index.xml')
+        assert '<site-control permitted-cross-domain-policies="all" />' in resp.content
