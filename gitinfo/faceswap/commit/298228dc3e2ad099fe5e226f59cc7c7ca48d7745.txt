commit 298228dc3e2ad099fe5e226f59cc7c7ca48d7745
Author: Lev Velykoivanenko <velykoivanenko.lev@gmail.com>
Date:   Fri Jun 1 12:38:37 2018 +0200

     Fix small frame ranges bug in scripts/convert.py and tools/effmpeg.py (#410)
    
    * Fix small frame ranges bug in scripts/convert.py and tools/effmpeg.py
    
    scripts/convert.py:
    Fix bug where frame ranges would not work properly when frame numbers were appended to an mp4 file extension.
    Improve PEP8 conformity.
    
    tools/effmpeg.py:
    Add '_' as separator between frame number and video file name to avoid future frame ranges bugs.

diff --git a/scripts/convert.py b/scripts/convert.py
index 63d31f0..116d7ed 100644
--- a/scripts/convert.py
+++ b/scripts/convert.py
@@ -143,6 +143,7 @@ class Convert(object):
         image = self.images.rotate_image(image, face.r, reverse=True)
         return image
 
+
 class OptionalActions(object):
     """ Process the optional actions for convert """
 
@@ -153,9 +154,9 @@ class OptionalActions(object):
         self.faces_to_swap = self.get_aligned_directory()
 
         self.frame_ranges = self.get_frame_ranges()
-        self.imageidxre = re.compile(r"(\d+)(?!.*\d)")
+        self.imageidxre = re.compile(r"[^(mp4)](\d+)(?!.*\d)")
 
-    ### SKIP FACES ###
+    # SKIP FACES #
     def get_aligned_directory(self):
         """ Check for the existence of an aligned directory for identifying
             which faces in the target frames should be swapped """
@@ -178,7 +179,7 @@ class OptionalActions(object):
                       "directory?")
         return faces_to_swap
 
-    ### SKIP FRAME RANGES ###
+    # SKIP FRAME RANGES #
     def get_frame_ranges(self):
         """ split out the frame ranges and parse out 'min' and 'max' values """
         if not self.args.frame_ranges:
diff --git a/tools/effmpeg.py b/tools/effmpeg.py
index 92f32e4..2e1df3f 100644
--- a/tools/effmpeg.py
+++ b/tools/effmpeg.py
@@ -522,7 +522,7 @@ class Effmpeg(object):
         _input_opts = Effmpeg._common_ffmpeg_args[:]
         _input = {input_.path: _input_opts}
         _output_opts = '-y -vf fps="' + str(fps) + '"'
-        _output_path = output.path + "/" + input_.name + "%05d" + extract_ext
+        _output_path = output.path + "/" + input_.name + "_%05d" + extract_ext
         _output = {_output_path: _output_opts}
         ff = FFmpeg(inputs=_input, outputs=_output)
         os.makedirs(output.path, exist_ok=True)
