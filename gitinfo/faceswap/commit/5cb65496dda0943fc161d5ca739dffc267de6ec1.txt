commit 5cb65496dda0943fc161d5ca739dffc267de6ec1
Author: bryanlyon <bryanlyon@mail.weber.edu>
Date:   Wed Apr 4 15:48:15 2018 -0700

    Enable filename migration for lowmem
    
    Right now, lowmem and Original use the same filenames.  Since their models are incompatible, this could lead to failure by attemptiong to  load lowmem weights in original or vice versa.  This namechange migration will rename existing lowmem models in order to prevent problems.
    
    Recommend that all users either manually rename the lowmem files or run this branch to update to the correct filenames.

diff --git a/plugins/Model_LowMem/AutoEncoder.py b/plugins/Model_LowMem/AutoEncoder.py
index db009e0..b9d3206 100644
--- a/plugins/Model_LowMem/AutoEncoder.py
+++ b/plugins/Model_LowMem/AutoEncoder.py
@@ -1,8 +1,15 @@
 # AutoEncoder base classes
 
-encoderH5 = 'encoder.h5'
-decoder_AH5 = 'decoder_A.h5'
-decoder_BH5 = 'decoder_B.h5'
+encoderH5 = 'lowmem_encoder.h5'
+decoder_AH5 = 'lowmem_decoder_A.h5'
+decoder_BH5 = 'lowmem_decoder_B.h5'
+
+#Part of Filename migration, should be remopved some reasonable time after first added
+import os.path
+old_encoderH5 = 'encoder.h5'
+old_decoder_AH5 = 'decoder_A.h5'
+old_decoder_BH5 = 'decoder_B.h5'
+#End filename migration
 
 class AutoEncoder:
     def __init__(self, model_dir, gpus):
@@ -19,6 +26,17 @@ class AutoEncoder:
         (face_A,face_B) = (decoder_AH5, decoder_BH5) if not swapped else (decoder_BH5, decoder_AH5)
 
         try:
+            #Part of Filename migration, should be remopved some reasonable time after first added
+            if os.path.isfile(str(self.model_dir / old_encoderH5)):
+                print('Migrating to new filenames: ', end='')
+                if os.path.isfile(str(self.model_dir / encoderH5)) is not True:
+                    os.rename(str(self.model_dir / old_decoder_AH5), str(self.model_dir / decoder_AH5))
+                    os.rename(str(self.model_dir / old_decoder_BH5), str(self.model_dir / decoder_BH5))
+                    os.rename(str(self.model_dir / old_encoderH5), str(self.model_dir / encoderH5))
+                    print('Complete')
+                else:
+                    print('Failed due to existing files in folder.  Loading already migrated files')
+            #End filename migration
             self.encoder.load_weights(str(self.model_dir / encoderH5))
             self.decoder_A.load_weights(str(self.model_dir / face_A))
             self.decoder_B.load_weights(str(self.model_dir / face_B))
