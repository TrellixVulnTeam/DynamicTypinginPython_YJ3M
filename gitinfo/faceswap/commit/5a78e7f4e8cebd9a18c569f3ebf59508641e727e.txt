commit 5a78e7f4e8cebd9a18c569f3ebf59508641e727e
Author: Lorjuo <julien.seitz@gmail.com>
Date:   Wed Feb 6 03:26:07 2019 +0100

    Effmpeg split quality (#600)
    
    * detection bugfixes:
    
    -scale in detector has been used as a member variable and shared between multiple threads. however scale heavily depends on the concrete image. if thread change occurs between calculation of scale, actual detection and postprocessing, then random behaviour and exceptions might happen. especially in the case of input images with varying sizes this might cause negative effects
    
    -wrong scale factor calculation:
    scale factor was calculated as: scale = target / source
    whereas target and source are variables for the total number of pixels in the image (= width * height)
    However, later on it was applied on the individual dimensions/components as width/height independantly:
    e.g.: dims = (int(width * scale), int(height * scale))
    or: int(face.left() / scale),
    
    therefore scaling factor often was too small and detection for very big input images was performed on very small intermediate images
    Therefore calculation has been changed to:
    scale = sqrt(target / source)
    
    * changed quality of extracted / splitted jpg pictures to maximum

diff --git a/tools/effmpeg.py b/tools/effmpeg.py
index 3933039..c809535 100644
--- a/tools/effmpeg.py
+++ b/tools/effmpeg.py
@@ -292,7 +292,7 @@ class Effmpeg(object):
                 **kwargs):
         _input_opts = Effmpeg._common_ffmpeg_args[:]
         _input = {input_.path: _input_opts}
-        _output_opts = '-y -vf fps="' + str(fps) + '"'
+        _output_opts = '-y -vf fps="' + str(fps) + '" -q:v 1'
         _output_path = output.path + "/" + input_.name + "_%05d" + extract_ext
         _output = {_output_path: _output_opts}
         os.makedirs(output.path, exist_ok=True)
