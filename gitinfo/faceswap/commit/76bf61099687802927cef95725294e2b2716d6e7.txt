commit 76bf61099687802927cef95725294e2b2716d6e7
Author: torzdf <36920800+torzdf@users.noreply.github.com>
Date:   Sun Jan 26 00:34:59 2020 +0000

    plugins.extract.mask - Enable allow_growth option for mask tool

diff --git a/plugins/extract/mask/unet_dfl.py b/plugins/extract/mask/unet_dfl.py
index 79b8c5f..dd60727 100644
--- a/plugins/extract/mask/unet_dfl.py
+++ b/plugins/extract/mask/unet_dfl.py
@@ -32,7 +32,8 @@ class Mask(Masker):
         self.batchsize = self.config["batch-size"]
 
     def init_model(self):
-        self.model = KSession(self.name, self.model_path, model_kwargs=dict())
+        self.model = KSession(self.name, self.model_path,
+                              model_kwargs=dict(), allow_growth=self.config["allow_growth"])
         self.model.load_model()
         placeholder = np.zeros((self.batchsize, self.input_size, self.input_size, 3),
                                dtype="float32")
diff --git a/plugins/extract/mask/vgg_clear.py b/plugins/extract/mask/vgg_clear.py
index c363f4f..3b5cb46 100644
--- a/plugins/extract/mask/vgg_clear.py
+++ b/plugins/extract/mask/vgg_clear.py
@@ -11,7 +11,7 @@ https://github.com/YuvalNirkin/face_segmentation
 Model file sourced from...
 https://github.com/YuvalNirkin/face_segmentation/releases/download/1.1/face_seg_fcn8s_300_no_aug.zip
 
-Caffe model reimplemented in Keras by Kyle Vrooman
+Caffe model re-implemented in Keras by Kyle Vrooman
 """
 
 import numpy as np
@@ -28,12 +28,13 @@ class Mask(Masker):
         self.name = "VGG Clear"
         self.input_size = 300
         self.vram = 2944
-        self.vram_warnings = 1088  # at BS 1. OOMs at higher batchsizes
+        self.vram_warnings = 1088  # at BS 1. OOMs at higher batch sizes
         self.vram_per_batch = 400
         self.batchsize = self.config["batch-size"]
 
     def init_model(self):
-        self.model = KSession(self.name, self.model_path, model_kwargs=dict())
+        self.model = KSession(self.name, self.model_path,
+                              model_kwargs=dict(), allow_growth=self.config["allow_growth"])
         self.model.load_model()
         self.model.append_softmax_activation(layer_index=-1)
         placeholder = np.zeros((self.batchsize, self.input_size, self.input_size, 3),
diff --git a/plugins/extract/mask/vgg_obstructed.py b/plugins/extract/mask/vgg_obstructed.py
index 60248c7..95d7056 100644
--- a/plugins/extract/mask/vgg_obstructed.py
+++ b/plugins/extract/mask/vgg_obstructed.py
@@ -11,7 +11,7 @@ https://github.com/YuvalNirkin/face_segmentation
 Model file sourced from...
 https://github.com/YuvalNirkin/face_segmentation/releases/download/1.0/face_seg_fcn8s.zip
 
-Caffe model reimplemented in Keras by Kyle Vrooman
+Caffe model re-implemented in Keras by Kyle Vrooman
 """
 
 import numpy as np
@@ -33,7 +33,8 @@ class Mask(Masker):
         self.batchsize = self.config["batch-size"]
 
     def init_model(self):
-        self.model = KSession(self.name, self.model_path, model_kwargs=dict())
+        self.model = KSession(self.name, self.model_path,
+                              model_kwargs=dict(), allow_growth=self.config["allow_growth"])
         self.model.load_model()
         self.model.append_softmax_activation(layer_index=-1)
         placeholder = np.zeros((self.batchsize, self.input_size, self.input_size, 3),
