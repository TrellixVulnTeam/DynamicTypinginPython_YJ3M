commit 58b291fa77d5ab153135cf34b839704168ca818b
Author: torzdf <36920800+torzdf@users.noreply.github.com>
Date:   Mon Dec 31 13:31:50 2018 +0000

    bugfix: Handle FAN detection errors

diff --git a/plugins/extract/align/fan.py b/plugins/extract/align/fan.py
index 310c562..5c54c1e 100644
--- a/plugins/extract/align/fan.py
+++ b/plugins/extract/align/fan.py
@@ -61,9 +61,14 @@ class Align(Aligner):
             image = item["image"][:, :, ::-1].copy()
 
             logger.trace("Algning faces")
-            item["landmarks"] = self.process_landmarks(image, item["detected_faces"])
-            logger.trace("Algned faces: %s", item["landmarks"])
-
+            try:
+                item["landmarks"] = self.process_landmarks(image, item["detected_faces"])
+                logger.trace("Algned faces: %s", item["landmarks"])
+            except ValueError as err:
+                logger.warning("Image '%s' could not be processed. This may be due to corrupted "
+                               "data: %s", item["filename"], str(err))
+                item["detected_faces"] = list()
+                item["landmarks"] = list()
             self.finalize(item)
         logger.debug("Completed Align")
 
