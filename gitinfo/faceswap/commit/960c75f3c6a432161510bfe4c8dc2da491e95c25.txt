commit 960c75f3c6a432161510bfe4c8dc2da491e95c25
Author: torzdf <36920800+torzdf@users.noreply.github.com>
Date:   Sat Dec 22 19:56:13 2018 +0000

    setup.py: Install ffmpeg on Conda

diff --git a/setup.py b/setup.py
index 562e420..9af7252 100755
--- a/setup.py
+++ b/setup.py
@@ -487,10 +487,11 @@ def update_tf_dep(cpu_only):
 def install_missing_dep():
     """ Install missing dependencies """
     global MISSING_PACKAGES, ENABLE_CUDA
+    install_tkinter()
+    install_ffmpeg()
     if MISSING_PACKAGES:
         out_info("Installing Required Python Packages. "
                  "This may take some time...")
-        install_tkinter()
         for pkg in MISSING_PACKAGES:
             if pkg.startswith("dlib"):
                 msg = ("Compiling {}. This will take a while...\n"
@@ -536,6 +537,21 @@ def install_tkinter():
         run(["conda", "install", "-q", "-y", "tk"], stdout=devnull)
 
 
+def install_ffmpeg():
+    """ Install ffmpeg on Conda Environments """
+    if not IS_CONDA:
+        return
+    pkgs = os.popen("conda list").read()
+    ffm = [re.sub(" +", " ", line.strip())
+           for line in pkgs.splitlines()
+           if line.lower().strip().startswith("ffmpeg")]
+    if ffm:
+        return
+    out_info("Installing ffmpeg")
+    with open(os.devnull, "w") as devnull:
+        run(["conda", "install", "-q", "-y", "-c", "conda-forge", "ffmpeg"], stdout=devnull)
+
+
 def tips_1_1():
     """ Output Tips """
     out_info("""1. Install Docker
