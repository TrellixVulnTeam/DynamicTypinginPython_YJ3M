commit 6d5336220c5918b6141cf879114c8753a4367128
Author: torzdf <36920800+torzdf@users.noreply.github.com>
Date:   Sun Nov 4 12:36:50 2018 +0000

    gui bugfixes

diff --git a/lib/gui/display_command.py b/lib/gui/display_command.py
index 1806072..79b9d46 100644
--- a/lib/gui/display_command.py
+++ b/lib/gui/display_command.py
@@ -43,7 +43,7 @@ class PreviewExtract(DisplayOptionalPage):
 
     def save_items(self):
         """ Open save dialogue and save preview """
-        location = FileHandler("dir").retfile
+        location = FileHandler("dir", None).retfile
         if not location:
             return
         filename = "extract_convert_preview"
@@ -92,7 +92,7 @@ class PreviewTrain(DisplayOptionalPage):
 
     def save_items(self):
         """ Open save dialogue and save preview """
-        location = FileHandler("dir").retfile
+        location = FileHandler("dir", None).retfile
         if not location:
             return
         for preview in self.subnotebook.children.values():
@@ -178,7 +178,7 @@ class GraphDisplay(DisplayOptionalPage):
 
     def save_items(self):
         """ Open save dialogue and save graphs """
-        graphlocation = FileHandler("dir").retfile
+        graphlocation = FileHandler("dir", None).retfile
         if not graphlocation:
             return
         for graph in self.subnotebook.children.values():
diff --git a/lib/gui/wrapper.py b/lib/gui/wrapper.py
index 77a4fc0..0840fb0 100644
--- a/lib/gui/wrapper.py
+++ b/lib/gui/wrapper.py
@@ -3,8 +3,7 @@
 import os
 import re
 import signal
-import subprocess
-from subprocess import PIPE, Popen, TimeoutExpired
+from subprocess import PIPE, Popen
 import sys
 import tkinter as tk
 from threading import Thread
@@ -134,8 +133,6 @@ class ProcessWrapper():
 
 class FaceswapControl():
     """ Control the underlying Faceswap tasks """
-    __group_processes = ["effmpeg"]
-
     def __init__(self, wrapper):
 
         self.wrapper = wrapper
@@ -155,11 +152,6 @@ class FaceswapControl():
                   "bufsize": 1,
                   "universal_newlines": True}
 
-        if self.command in self.__group_processes:
-            kwargs["preexec_fn"] = os.setsid
-
-        if os.name == "nt":
-            kwargs["creationflags"] = subprocess.CREATE_NEW_PROCESS_GROUP
         self.process = Popen(args, **kwargs)
         self.thread_stdout()
         self.thread_stderr()
@@ -275,17 +267,6 @@ class FaceswapControl():
                 return
             except ValueError as err:
                 print(err)
-        elif self.command in self.__group_processes:
-            print("Terminating Process Group...")
-            pgid = os.getpgid(self.process.pid)
-            try:
-                os.killpg(pgid, signal.SIGINT)
-                self.process.wait(timeout=10)
-                print("Terminated")
-            except TimeoutExpired:
-                print("Termination timed out. Killing Process Group...")
-                os.killpg(pgid, signal.SIGKILL)
-                print("Killed")
         else:
             print("Terminating Process...")
             children = psutil.Process().children(recursive=True)
