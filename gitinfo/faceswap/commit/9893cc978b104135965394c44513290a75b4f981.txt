commit 9893cc978b104135965394c44513290a75b4f981
Author: torzdf <36920800+torzdf@users.noreply.github.com>
Date:   Mon Mar 11 13:21:30 2019 +0000

    Handle empty .recent.json

diff --git a/lib/gui/menu.py b/lib/gui/menu.py
index fe98ac3..98809cf 100644
--- a/lib/gui/menu.py
+++ b/lib/gui/menu.py
@@ -61,7 +61,7 @@ class MainMenuBar(tk.Menu):
         logger.debug("Building Recent Files menu")
         serializer = JSONSerializer
         menu_file = os.path.join(self.config.pathcache, ".recent.json")
-        if not os.path.isfile(menu_file):
+        if not os.path.isfile(menu_file) or os.path.getsize(menu_file) == 0:
             self.clear_recent_files(serializer, menu_file)
         with open(menu_file, "rb") as inp:
             recent_files = serializer.unmarshal(inp.read().decode("utf-8"))
diff --git a/lib/gui/utils.py b/lib/gui/utils.py
index 9e8e92a..ac629ab 100644
--- a/lib/gui/utils.py
+++ b/lib/gui/utils.py
@@ -589,7 +589,7 @@ class Config():
         """ Add to recent files """
         recent_filename = os.path.join(self.pathcache, ".recent.json")
         logger.debug("Adding to recent files '%s': (%s, %s)", recent_filename, filename, command)
-        if not os.path.exists(recent_filename):
+        if not os.path.exists(recent_filename) or os.path.getsize(recent_filename) == 0:
             recent_files = list()
         else:
             with open(recent_filename, "rb") as inp:
