commit 21c55122b67189783b2e80fd3f5c4773dd3623f6
Author: torzdf <36920800+torzdf@users.noreply.github.com>
Date:   Fri Nov 22 23:28:01 2019 +0000

    lib.gui - Fix check for updates when launched from desktop shortcut (linux)

diff --git a/lib/gui/menu.py b/lib/gui/menu.py
index 047001a..48c4daf 100644
--- a/lib/gui/menu.py
+++ b/lib/gui/menu.py
@@ -312,7 +312,8 @@ class HelpMenu(tk.Menu):  # pylint:disable=too-many-ancestors
         update = False
         msg = ""
         gitcmd = "git remote update && git status -uno"
-        cmd = Popen(gitcmd, shell=True, stdout=PIPE, stderr=STDOUT)
+        working_dir = os.path.dirname(os.path.realpath(sys.argv[0]))
+        cmd = Popen(gitcmd, shell=True, stdout=PIPE, stderr=STDOUT, cwd=working_dir)
         stdout, _ = cmd.communicate()
         retcode = cmd.poll()
         if retcode != 0:
@@ -344,7 +345,8 @@ class HelpMenu(tk.Menu):  # pylint:disable=too-many-ancestors
         """ Update Faceswap """
         logger.info("A new version is available. Updating...")
         gitcmd = "git pull"
-        cmd = Popen(gitcmd, shell=True, stdout=PIPE, stderr=STDOUT, bufsize=1)
+        working_dir = os.path.dirname(os.path.realpath(sys.argv[0]))
+        cmd = Popen(gitcmd, shell=True, stdout=PIPE, stderr=STDOUT, bufsize=1, cwd=working_dir)
         while True:
             output = cmd.stdout.readline().decode(encoding)
             if output == "" and cmd.poll() is not None:
