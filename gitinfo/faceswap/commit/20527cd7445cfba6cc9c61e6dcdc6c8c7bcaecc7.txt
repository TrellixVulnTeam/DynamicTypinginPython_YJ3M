commit 20527cd7445cfba6cc9c61e6dcdc6c8c7bcaecc7
Author: Gareth Dunstone <freedom.2.the.leetle.people@gmail.com>
Date:   Mon Feb 12 10:33:05 2018 +1100

    should fix full paths, and windowspath issues

diff --git a/lib/cli.py b/lib/cli.py
index edd3342..d764822 100644
--- a/lib/cli.py
+++ b/lib/cli.py
@@ -64,7 +64,7 @@ class DirectoryProcessor(object):
 
     def read_alignments(self):
 
-        fn = os.path.join(self.arguments.input_dir,"alignments.{}".format(self.serializer.ext))
+        fn = os.path.join(str(self.arguments.input_dir),"alignments.{}".format(self.serializer.ext))
         if self.arguments.alignments_path is not None:
             fn = self.arguments.alignments_path
 
@@ -79,7 +79,7 @@ class DirectoryProcessor(object):
 
     def write_alignments(self):
 
-        fn = os.path.join(self.output_dir,"alignments.{}".format(self.serializer.ext))
+        fn = os.path.join(str(self.input_dir), "alignments.{}".format(self.serializer.ext))
         if self.arguments.alignments_path is not None:
             fn = self.arguments.alignments_path
         try:
@@ -100,7 +100,7 @@ class DirectoryProcessor(object):
 
     def get_faces_alignments(self, filename, image):
         faces_count = 0
-        faces = self.faces_detected[filename]
+        faces = self.faces_detected[os.path.basename(filename)]
         for rawface in faces:
             face = DetectedFace(**rawface)
             face.image = image[face.y : face.y + face.h, face.x : face.x + face.w]
diff --git a/scripts/extract.py b/scripts/extract.py
index 8f7fd39..93e8595 100644
--- a/scripts/extract.py
+++ b/scripts/extract.py
@@ -45,13 +45,13 @@ class ExtractTrainingData(DirectoryProcessor):
         try:
             if processes != 1:
                 files = list(self.read_directory())
-                for fn, faces in tqdm(pool_process(self.processFiles, files, processes=processes), total = len(files)):
+                for filename, faces in tqdm(pool_process(self.processFiles, files, processes=processes), total = len(files)):
                     self.num_faces_detected += 1
-                    self.faces_detected[fn] = faces
+                    self.faces_detected[os.path.basename(filename)] = faces
             else:
                 try:
                     for filename in tqdm(self.read_directory()):
-                         self.faces_detected[filename] = self.handleImage(filename)[1]
+                         self.faces_detected[os.path.basename(filename)] = self.handleImage(filename)[1]
                 except Exception as e:
                     print('Failed to extract from image: {}. Reason: {}'.format(filename, e))
         finally:
