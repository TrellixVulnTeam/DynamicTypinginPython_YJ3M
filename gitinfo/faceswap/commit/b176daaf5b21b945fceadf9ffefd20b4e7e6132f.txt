commit b176daaf5b21b945fceadf9ffefd20b4e7e6132f
Author: torzdf <36920800+torzdf@users.noreply.github.com>
Date:   Sun Jan 6 13:40:57 2019 +0000

    Fix system verbosity

diff --git a/lib/utils.py b/lib/utils.py
index 3037a1d..29193e9 100644
--- a/lib/utils.py
+++ b/lib/utils.py
@@ -17,6 +17,7 @@ import dlib
 
 from lib.faces_detect import DetectedFace
 from lib.training_data import TrainingDataGenerator
+from lib.logger import get_loglevel
 
 
 logger = logging.getLogger(__name__)  # pylint: disable=invalid-name
@@ -90,7 +91,7 @@ def backup_file(directory, filename):
         os.rename(origfile, backupfile)
 
 
-def set_system_verbosity():
+def set_system_verbosity(loglevel):
     """ Set the verbosity level of tensorflow and suppresses
         future and deprecation warnings from any modules
         From:
@@ -101,7 +102,8 @@ def set_system_verbosity():
         2 - filter out WARNING logs
         3 - filter out ERROR logs  """
 
-    loglevel = "2" if logger.getEffectiveLevel() > 15 else "0"
+    numeric_level = get_loglevel(loglevel)
+    loglevel = "2" if numeric_level > 15 else "0"
     logger.debug("System Verbosity level: %s", loglevel)
     os.environ['TF_CPP_MIN_LOG_LEVEL'] = loglevel
     if loglevel != '0':
diff --git a/scripts/convert.py b/scripts/convert.py
index 4aaf571..f79618a 100644
--- a/scripts/convert.py
+++ b/scripts/convert.py
@@ -47,7 +47,7 @@ class Convert():
 
             Note: GAN prediction outputs a mask + an image, while other
             predicts only an image. """
-        Utils.set_verbosity()
+        Utils.set_verbosity(self.args.loglevel)
 
         if not self.alignments.have_alignments_file:
             self.load_extractor()
diff --git a/scripts/extract.py b/scripts/extract.py
index f09f766..f199f4a 100644
--- a/scripts/extract.py
+++ b/scripts/extract.py
@@ -42,7 +42,7 @@ class Extract():
     def process(self):
         """ Perform the extraction process """
         logger.info('Starting, this may take a while...')
-        Utils.set_verbosity()
+        Utils.set_verbosity(self.args.loglevel)
 #        queue_manager.debug_monitor(1)
         self.threaded_io("load")
         save_thread = self.threaded_io("save")
diff --git a/scripts/fsmedia.py b/scripts/fsmedia.py
index 74db537..53c665a 100644
--- a/scripts/fsmedia.py
+++ b/scripts/fsmedia.py
@@ -26,9 +26,9 @@ class Utils():
         object """
 
     @staticmethod
-    def set_verbosity():
+    def set_verbosity(loglevel):
         """ Set the system output verbosity """
-        set_system_verbosity()
+        set_system_verbosity(loglevel)
 
     @staticmethod
     def finalize(images_found, num_faces_detected, verify_output):
diff --git a/scripts/train.py b/scripts/train.py
index 3e7a87d..06eabb0 100644
--- a/scripts/train.py
+++ b/scripts/train.py
@@ -37,7 +37,7 @@ class Train():
     def process(self):
         """ Call the training process object """
         logger.info("Training data directory: %s", self.args.model_dir)
-        set_system_verbosity()
+        set_system_verbosity(self.args.loglevel)
         thread = self.start_thread()
 
         if self.args.preview:
diff --git a/tools/alignments.py b/tools/alignments.py
index 103b83a..634df55 100644
--- a/tools/alignments.py
+++ b/tools/alignments.py
@@ -11,7 +11,7 @@ class Alignments():
     """ Perform tasks relating to alignments file """
     def __init__(self, arguments):
         self.args = arguments
-        set_system_verbosity()
+        set_system_verbosity(self.args.loglevel)
 
         dest_format = self.get_dest_format()
         self.alignments = AlignmentData(self.args.alignments_file, dest_format)
