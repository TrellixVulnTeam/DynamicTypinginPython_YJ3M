commit 66c0ffa7de0d8c207c99ce68a47e7a7cdfa19a8b
Author: torzdf <36920800+torzdf@users.noreply.github.com>
Date:   Fri Aug 16 00:09:42 2019 +0000

    Training bugfix: Set training stop flag outside of thread

diff --git a/lib/gui/wrapper.py b/lib/gui/wrapper.py
index 0ac662d..36cebc7 100644
--- a/lib/gui/wrapper.py
+++ b/lib/gui/wrapper.py
@@ -348,6 +348,8 @@ class FaceswapControl():
             logger.debug("Terminating wrapper in LongRunningTask")
             self.thread = LongRunningTask(target=self.terminate_in_thread,
                                           args=(self.command, self.process))
+            if self.command == "train":
+                self.wrapper.tk_vars["istraining"].set(False)
             self.thread.start()
             self.config.root.after(1000, self.terminate)
         elif not self.thread.complete.is_set():
@@ -366,7 +368,6 @@ class FaceswapControl():
             logger.debug("Sending Exit Signal")
             print("Sending Exit Signal", flush=True)
             now = time()
-            self.config.tk_vars["istraining"].set(False)
             if os.name == "nt":
                 logger.debug("Sending carriage return to process")
                 con_in = win32console.GetStdHandle(  # pylint:disable=c-extension-no-member
