commit baac4f53bfdcae348e5a273d0050b58ddccf9f9b
Author: torzdf <36920800+torzdf@users.noreply.github.com>
Date:   Wed Nov 13 22:05:44 2019 +0000

    extract bugfixes - post_processing, correctly reference aligned face

diff --git a/lib/image.py b/lib/image.py
index 122552d..642a3a3 100644
--- a/lib/image.py
+++ b/lib/image.py
@@ -415,7 +415,8 @@ class ImageIO():
     def close(self):
         """ Closes down and joins the internal threads """
         logger.debug("Received Close")
-        self._thread.join()
+        if self._thread is not None:
+            self._thread.join()
         logger.debug("Closed")
 
 
diff --git a/scripts/fsmedia.py b/scripts/fsmedia.py
index 7de1e79..62d53db 100644
--- a/scripts/fsmedia.py
+++ b/scripts/fsmedia.py
@@ -314,7 +314,7 @@ class BlurryFaceFilter(PostProcessAction):  # pylint: disable=too-few-public-met
 
         for idx, detected_face in enumerate(output_item["detected_faces"]):
             frame_name = detected_face["file_location"].parts[-1]
-            face = detected_face["face"]
+            face = detected_face.aligned_face
             logger.trace("Checking for blurriness. Frame: '%s', Face: %s", frame_name, idx)
             aligned_landmarks = face.aligned_landmarks
             resized_face = face.aligned_face
@@ -362,7 +362,7 @@ class DebugLandmarks(PostProcessAction):  # pylint: disable=too-few-public-metho
     def process(self, output_item):
         """ Draw landmarks on image """
         for idx, detected_face in enumerate(output_item["detected_faces"]):
-            face = detected_face["face"]
+            face = detected_face.aligned_face
             logger.trace("Drawing Landmarks. Frame: '%s'. Face: %s",
                          detected_face["file_location"].parts[-1], idx)
             aligned_landmarks = face.aligned_landmarks
