commit 112f2a2bf291d9e15a97bf34c02398966dae54ab
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Sun Nov 16 18:25:02 2014 +0100

    Convert test_cookiecutter along with its teardown

diff --git a/tests/test_cookiecutter_local_no_input.py b/tests/test_cookiecutter_local_no_input.py
new file mode 100644
index 0000000..d89f9bd
--- /dev/null
+++ b/tests/test_cookiecutter_local_no_input.py
@@ -0,0 +1,40 @@
+#!/usr/bin/env python
+# -*- coding: utf-8 -*-
+
+"""
+test_cookiecutter_local_no_input
+--------------------------------
+
+Tests formerly known from a unittest residing in test_main.py named
+TestCookiecutterLocalNoInput.test_cookiecutter
+"""
+
+import os
+import pytest
+
+from cookiecutter import main, utils
+
+
+@pytest.fixture(scope='function')
+def remove_additional_dirs(request):
+    """
+    Remove special directories which are creating during the tests.
+    """
+    def fin_remove_additional_dirs():
+        if os.path.isdir('fake-project'):
+            utils.rmtree('fake-project')
+        if os.path.isdir('fake-project-extra'):
+            utils.rmtree('fake-project-extra')
+        if os.path.isdir('fake-project-templated'):
+            utils.rmtree('fake-project-templated')
+    request.addfinalizer(fin_remove_additional_dirs)
+
+
+@pytest.mark.usefixtures('clean_system', 'remove_additional_dirs')
+def test_cookiecutter():
+    main.cookiecutter('tests/fake-repo-pre/', no_input=True)
+    assert os.path.isdir('tests/fake-repo-pre/{{cookiecutter.repo_name}}')
+    assert not os.path.isdir('tests/fake-repo-pre/fake-project')
+    assert os.path.isdir('fake-project')
+    assert os.path.isfile('fake-project/README.rst')
+    assert not os.path.exists('fake-project/json/')
diff --git a/tests/test_main.py b/tests/test_main.py
index cc683ea..0568795 100755
--- a/tests/test_main.py
+++ b/tests/test_main.py
@@ -26,14 +26,6 @@ logging.basicConfig(format='%(levelname)s: %(message)s', level=logging.DEBUG)
 
 class TestCookiecutterLocalNoInput(CookiecutterCleanSystemTestCase):
 
-    def test_cookiecutter(self):
-        main.cookiecutter('tests/fake-repo-pre/', no_input=True)
-        self.assertTrue(os.path.isdir('tests/fake-repo-pre/{{cookiecutter.repo_name}}'))
-        self.assertFalse(os.path.isdir('tests/fake-repo-pre/fake-project'))
-        self.assertTrue(os.path.isdir('fake-project'))
-        self.assertTrue(os.path.isfile('fake-project/README.rst'))
-        self.assertFalse(os.path.exists('fake-project/json/'))
-
     def test_cookiecutter_no_slash(self):
         main.cookiecutter('tests/fake-repo-pre', no_input=True)
         self.assertTrue(os.path.isdir('tests/fake-repo-pre/{{cookiecutter.repo_name}}'))
