commit 38c2ec4926b63ffcf9b92924b7326a0fe44662ab
Author: Jindrich Smitka <jsmitka@smita.info>
Date:   Mon Sep 2 09:03:09 2013 +0200

    Fix unicode default value.

diff --git a/cookiecutter/prompt.py b/cookiecutter/prompt.py
index 2413961..cc29d58 100755
--- a/cookiecutter/prompt.py
+++ b/cookiecutter/prompt.py
@@ -18,6 +18,7 @@ else:
     input = raw_input
     iteritems = lambda d: d.iteritems()
 
+
 def prompt_for_config(context):
     """
     Prompts the user to enter new config, using context as a source for the
@@ -27,16 +28,18 @@ def prompt_for_config(context):
 
     for key, val in iteritems(context['cookiecutter']):
         prompt = "{0} (default is \"{1}\")? ".format(key, val)
-        new_val = input(prompt.encode('utf-8'))
+
+        if PY3:
+            new_val = input(prompt.encode('utf-8'))
+        else:
+            new_val = input(prompt.encode('utf-8')).decode('utf-8')
+
         new_val = new_val.strip()
 
         if new_val == '':
             new_val = val
 
-        if PY3:
-            cookiecutter_dict[key] = new_val
-        else:
-            cookiecutter_dict[key] = new_val.decode('utf-8')
+        cookiecutter_dict[key] = new_val
     return cookiecutter_dict
 
 
diff --git a/tests/test_prompt.py b/tests/test_prompt.py
index 4b82c90..da7a4ed 100755
--- a/tests/test_prompt.py
+++ b/tests/test_prompt.py
@@ -69,6 +69,20 @@ class TestPrompt(unittest.TestCase):
         else:
             self.assertEqual(cookiecutter_dict, {"full_name": u"Pizzä ïs Gööd"})
 
+    @patch(input_str, lambda x: '\n')
+    def test_unicode_prompt_for_default_config_unicode(self):
+        context = {"cookiecutter": {"full_name": u"Řekni či napiš své jméno"}}
+
+        if not PY3:
+            sys.stdin = StringIO("\n")
+
+        cookiecutter_dict = prompt.prompt_for_config(context)
+
+        if PY3:
+            self.assertEqual(cookiecutter_dict, {"full_name": "Řekni či napiš své jméno"})
+        else:
+            self.assertEqual(cookiecutter_dict, {"full_name": u"Řekni či napiš své jméno"})
+
 
 class TestQueryAnswers(unittest.TestCase):
 
