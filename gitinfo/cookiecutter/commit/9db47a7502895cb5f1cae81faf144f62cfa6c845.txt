commit 9db47a7502895cb5f1cae81faf144f62cfa6c845
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Fri Dec 4 23:02:35 2015 +0100

    Implement a test to cover undefined variables in prompts

diff --git a/tests/test_prompt.py b/tests/test_prompt.py
index 583da1d..1274292 100644
--- a/tests/test_prompt.py
+++ b/tests/test_prompt.py
@@ -14,7 +14,7 @@ import platform
 import pytest
 from past.builtins import basestring
 
-from cookiecutter import prompt
+from cookiecutter import prompt, exceptions
 from jinja2.environment import Environment
 
 
@@ -251,3 +251,18 @@ class TestPromptChoiceForConfig(object):
         )
         read_choice.assert_called_once_with('orientation', choices)
         assert expected_choice == actual_choice
+
+
+def test_undefined_variable_in_cookiecutter_dict():
+    context = {
+        'cookiecutter': {
+            'hello': 'world',
+            'foo': '{{cookiecutter.nope}}'
+        }
+    }
+    with pytest.raises(exceptions.UndefinedVariableInTemplate) as err:
+        prompt.prompt_for_config(context, no_input=True)
+
+    error = err.value
+    assert error.message == "Unable to render variable '{{cookiecutter.nope}}'"
+    assert error.context == {'hello': 'world'}
