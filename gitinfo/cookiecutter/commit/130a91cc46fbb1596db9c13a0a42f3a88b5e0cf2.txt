commit 130a91cc46fbb1596db9c13a0a42f3a88b5e0cf2
Author: raphigaziano <r.gaziano@gmail.com>
Date:   Sat Aug 24 17:48:16 2013 +0200

    integrate hook calls in before & after project generation

diff --git a/cookiecutter/generate.py b/cookiecutter/generate.py
index 66b9143..257829e 100755
--- a/cookiecutter/generate.py
+++ b/cookiecutter/generate.py
@@ -19,6 +19,7 @@ from binaryornot.check import is_binary
 
 from .exceptions import NonTemplatedInputDirException
 from .utils import make_sure_path_exists, unicode_open
+from .hooks import run_hook
 
 
 if sys.version_info[:2] < (2, 7):
@@ -118,8 +119,13 @@ def generate_files(template_dir, context=None):
     logging.debug("output_dir is {0}".format(output_dir))
     make_sure_path_exists(output_dir)
 
+    # run pre-gen hook
+    run_hook('pre_gen_project', template_dir, output_dir)
+
     for root, dirs, files in os.walk(template_dir):
         for d in dirs:
+            if d == 'hooks':
+                continue
             indir = os.path.join(root, d)
             outdir = indir.replace(template_dir, output_dir, 1)
 
@@ -132,4 +138,10 @@ def generate_files(template_dir, context=None):
         for f in files:
             logging.debug("f is {0}".format(f))
             infile = os.path.join(root, f)
+            if infile.endswith('hooks%s%s' % (os.path.sep, f)):
+                logging.debug("skipping: {0}".format(infile))
+                continue
             generate_file(infile, context, env)
+
+    # run post-gen hook
+    run_hook('post_gen_project', template_dir, output_dir)
diff --git a/tests/test_generate.py b/tests/test_generate.py
index 1dc2738..2bbe03c 100755
--- a/tests/test_generate.py
+++ b/tests/test_generate.py
@@ -111,6 +111,22 @@ It is 2014."""
         self.assertTrue(os.path.isdir('tests/inputgreen/im_a.dir'))
         self.assertTrue(os.path.isfile('tests/inputgreen/im_a.dir/im_a.file.py'))
 
+    def test_ignore_hooks_dirs(self):
+        generate.generate_files(
+            context={'hooks': 'hooks'},
+            template_dir='tests/input{{hooks}}'
+        )
+        self.assertFalse(os.path.exists('tests/inputhooks/hooks'))
+
+    def test_run_hooks(self):
+        generate.generate_files(
+            context={'hooks': 'hooks'},
+            template_dir='tests/input{{hooks}}'
+        )
+        self.assertTrue(os.path.exists('tests/inputhooks/foo.txt'))
+        self.assertTrue(os.path.exists('tests/inputhooks/bar.txt'))
+
+
     def tearDown(self):
         if os.path.exists('tests/inputpizzä'):
             shutil.rmtree('tests/inputpizzä')
@@ -120,7 +136,8 @@ It is 2014."""
             shutil.rmtree('tests/inputbinary_files')
         if os.path.exists('tests/files/cheese.txt'):
             os.remove('tests/files/cheese.txt')
-
+        if os.path.exists('tests/inputhooks'):
+            shutil.rmtree('tests/inputhooks')
 
 if __name__ == '__main__':
     unittest.main()
