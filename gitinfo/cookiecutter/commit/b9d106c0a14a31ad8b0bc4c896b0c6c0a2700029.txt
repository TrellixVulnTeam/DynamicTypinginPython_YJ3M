commit b9d106c0a14a31ad8b0bc4c896b0c6c0a2700029
Author: Daniel Roy Greenfeld <danny@eventbrite.com>
Date:   Sun Oct 18 01:37:18 2015 -0700

    Addresses Windows/Python2.7 installation woes

diff --git a/setup.py b/setup.py
index e1d953a..c09da8f 100755
--- a/setup.py
+++ b/setup.py
@@ -1,6 +1,7 @@
 #!/usr/bin/env python
 
 import os
+import platform
 import sys
 
 try:
@@ -30,11 +31,18 @@ requirements = [
     'future>=0.15.2',
     'binaryornot>=0.2.0',
     'jinja2>=2.7',
-    'ruamel.yaml>=0.10.12',
     'click>=5.0',
     'whichcraft>=0.1.1'
 ]
 
+# Use PyYAML for 2.7 on Windows, ruamel.yaml everywhere else
+PY2 = sys.version_info[0] == 2
+windows = platform.system().lower().startswith('windows')
+if PY2 and windows:
+    requirements.append('PyYAML>=3.10')
+else:
+    requirements.append('ruamel.yaml>=0.10.12')
+
 long_description = readme + '\n\n' + history
 
 if sys.argv[-1] == 'readme':
