commit 11e531cbe6c534b68d3244f2e05eb436cd76647d
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Fri Nov 14 23:25:33 2014 +0100

    Convert test_ignore_hooks_dirs using fixture teardown

diff --git a/tests/test_generate.py b/tests/test_generate.py
index 9006ade..f260c8b 100755
--- a/tests/test_generate.py
+++ b/tests/test_generate.py
@@ -127,16 +127,6 @@ class TestHooks(CookiecutterCleanSystemTestCase):
             utils.rmtree('tests/test-shellhooks')
         super(TestHooks, self).tearDown()
 
-    def test_ignore_hooks_dirs(self):
-        generate.generate_files(
-            context={
-                'cookiecutter': {'pyhooks': 'pyhooks'}
-            },
-            repo_dir='tests/test-pyhooks/',
-            output_dir='tests/test-pyhooks/'
-        )
-        self.assertFalse(os.path.exists('tests/test-pyhooks/inputpyhooks/hooks'))
-
     def test_run_python_hooks(self):
         generate.generate_files(
             context={
diff --git a/tests/test_generate_hooks.py b/tests/test_generate_hooks.py
new file mode 100644
index 0000000..2f7376f
--- /dev/null
+++ b/tests/test_generate_hooks.py
@@ -0,0 +1,44 @@
+#!/usr/bin/env python
+# -*- coding: utf-8 -*-
+
+"""
+test_generate_hooks
+-------------------
+
+Tests formerly known from a unittest residing in test_generate.py named
+TestHooks.test_ignore_hooks_dirs
+"""
+
+from __future__ import unicode_literals
+import os
+import pytest
+
+from cookiecutter import generate
+from cookiecutter import utils
+
+
+@pytest.fixture(scope='function')
+def remove_additional_folders(request):
+    """
+    Remove some special folders which are created by the tests.
+    """
+    def fin_remove_additional_folders():
+        if os.path.exists('tests/test-pyhooks/inputpyhooks'):
+            utils.rmtree('tests/test-pyhooks/inputpyhooks')
+        if os.path.exists('inputpyhooks'):
+            utils.rmtree('inputpyhooks')
+        if os.path.exists('tests/test-shellhooks'):
+            utils.rmtree('tests/test-shellhooks')
+    request.addfinalizer(fin_remove_additional_folders)
+
+
+@pytest.mark.usefixtures('clean_system', 'remove_additional_folders')
+def test_ignore_hooks_dirs():
+    generate.generate_files(
+        context={
+            'cookiecutter': {'pyhooks': 'pyhooks'}
+        },
+        repo_dir='tests/test-pyhooks/',
+        output_dir='tests/test-pyhooks/'
+    )
+    assert not os.path.exists('tests/test-pyhooks/inputpyhooks/hooks')
