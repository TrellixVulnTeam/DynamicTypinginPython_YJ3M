commit 8ad1d1cc198b2a58f873542dc83c47a2b766daf5
Author: Audrey Roy <audreyr@gmail.com>
Date:   Sun Sep 1 12:09:13 2013 +0200

    Add output_dir function params back in.

diff --git a/cookiecutter/generate.py b/cookiecutter/generate.py
index a5fc2c5..78b8bb3 100755
--- a/cookiecutter/generate.py
+++ b/cookiecutter/generate.py
@@ -103,7 +103,7 @@ def generate_file(project_dir, infile, context, env):
         with unicode_open(rendered_name, 'w') as fh:
             fh.write(rendered_file)
 
-def generate_files(template_dir, context=None):
+def generate_files(template_dir, context=None, output_dir='.'):
     """
     Renders the templates and saves them to files.
     :param input_dir: Project template input directory.
@@ -138,10 +138,10 @@ def generate_files(template_dir, context=None):
 
     with work_in(template_dir):
         env = Environment()
-        env.loader = FileSystemLoader(".")
+        env.loader = FileSystemLoader(output_dir)
 
         # run pre-gen hook
-        run_hook('pre_gen_project', template_dir)
+        run_hook('pre_gen_project', template_dir, output_dir)
 
         for root, dirs, files in os.walk("."):
 
@@ -163,4 +163,4 @@ def generate_files(template_dir, context=None):
                 generate_file(project_dir, infile, context, env)
 
         # run post-gen hook
-        run_hook('post_gen_project', template_dir)
+        run_hook('post_gen_project', template_dir, output_dir)
diff --git a/cookiecutter/hooks.py b/cookiecutter/hooks.py
index b2bc30b..b38332a 100755
--- a/cookiecutter/hooks.py
+++ b/cookiecutter/hooks.py
@@ -36,7 +36,7 @@ def find_hooks(template_root):
     return r
 
 
-def _run_hook(script_path):
+def _run_hook(script_path, cwd='.'):
     '''
     Run a sigle external script located at `script_path` (path should be 
     absolute).
@@ -45,7 +45,7 @@ def _run_hook(script_path):
     subprocess.call(script_path)
 
 
-def run_hook(hook_name, input_dir):
+def run_hook(hook_name, input_dir, output_dir):
     '''
     Try and find a script mapped to `hook_name` in `input_dir`,
     and execute it with the current working directory.
@@ -53,4 +53,4 @@ def run_hook(hook_name, input_dir):
     script = find_hooks(input_dir).get(hook_name)
     if script is None: 
         return
-    return _run_hook(script)
+    return _run_hook(script, output_dir)
