commit 3329813eec586afba110232f74fa24f9e6673fa7
Author: Audrey Roy <audreyr@gmail.com>
Date:   Sat Sep 14 16:37:03 2013 +0200

    Use non-context mgr version of subprocess in test_vcs
    
    I hate to do this, but I have to since the subprocess32 backport doesn't
    build cleanly on Windows

diff --git a/tests/test_vcs.py b/tests/test_vcs.py
index 3921a5a..c26aa5b 100755
--- a/tests/test_vcs.py
+++ b/tests/test_vcs.py
@@ -73,14 +73,14 @@ class TestVCS(unittest.TestCase):
         self.assertEqual(repo_dir, git_dir)
         self.assertTrue(os.path.isfile(os.path.join('cookiecutter-pypackage', 'README.rst')))
 
-        with subprocess.Popen(
+        proc = subprocess.Popen(
             ['git', 'symbolic-ref', 'HEAD'],
             cwd=git_dir,
             stdout=subprocess.PIPE
-        ) as proc:
-            symbolic_ref = proc.communicate()[0]
-            branch = symbolic_ref.decode(encoding).strip().split('/')[-1]
-            self.assertEqual('console-script', branch)
+        )
+        symbolic_ref = proc.communicate()[0]
+        branch = symbolic_ref.decode(encoding).strip().split('/')[-1]
+        self.assertEqual('console-script', branch)
 
         if os.path.isdir(git_dir):
             shutil.rmtree(git_dir)
