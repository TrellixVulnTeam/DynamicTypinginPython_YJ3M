commit c2a731e4981b107a0105f36b7a5dfbe738c58639
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Sat Dec 19 19:46:23 2015 +0100

    Extend environment class to load extensions from a given context

diff --git a/cookiecutter/environment.py b/cookiecutter/environment.py
index 15873ee..fb431e0 100644
--- a/cookiecutter/environment.py
+++ b/cookiecutter/environment.py
@@ -2,13 +2,21 @@
 
 from jinja2 import Environment, StrictUndefined
 
+from .exceptions import UnknownExtension
+
 
 class StrictEnvironment(Environment):
     """Jinja2 environment that raises an error when it hits a variable
     which is not defined in the context used to render a template.
     """
-    def __init__(self, **kwargs):
-        super(StrictEnvironment, self).__init__(
-            undefined=StrictUndefined,
-            **kwargs
-        )
+    def __init__(self, context, **kwargs):
+        extensions = context.get('_extensions', [])
+
+        try:
+            super(StrictEnvironment, self).__init__(
+                undefined=StrictUndefined,
+                extensions=extensions,
+                **kwargs
+            )
+        except ImportError as err:
+            raise UnknownExtension('Unable to load extension: {}'.format(err))
diff --git a/cookiecutter/exceptions.py b/cookiecutter/exceptions.py
index 0179625..54615f1 100755
--- a/cookiecutter/exceptions.py
+++ b/cookiecutter/exceptions.py
@@ -104,3 +104,8 @@ class UndefinedVariableInTemplate(CookiecutterException):
             "Error message: {self.error.message}. "
             "Context: {self.context}"
         ).format(**locals())
+
+
+class UnknownExtension(CookiecutterException):
+    """Raised when an extension cannot be imported from an import environent.
+    """
