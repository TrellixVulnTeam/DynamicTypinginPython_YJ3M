commit e7597f9e56b44d78cd4783a5241a7b4ba9684952
Author: Hamish Downer <hamish@aptivate.org>
Date:   Fri Aug 23 15:36:16 2013 +0100

    Use older subprocess command for python2.6 compatibility

diff --git a/tests/test_vcs.py b/tests/test_vcs.py
index a58ba79..d230563 100755
--- a/tests/test_vcs.py
+++ b/tests/test_vcs.py
@@ -51,7 +51,10 @@ class TestVCS(unittest.TestCase):
         git_dir = 'dye'
         self.assertEqual(repo_dir, git_dir)
         self.assertTrue(os.path.isfile(os.path.join('dye', 'README.md')))
-        symbolic_ref = subprocess.check_output(['git', 'symbolic-ref', 'HEAD'], cwd=git_dir)
+        symbolic_ref = subprocess.Popen(
+            ['git', 'symbolic-ref', 'HEAD'],
+            cwd=git_dir,
+            stdout=subprocess.PIPE).communicate()[0]
         branch = symbolic_ref.strip().split('/')[-1]
         self.assertEqual('develop', branch)
         if os.path.isdir(git_dir):
