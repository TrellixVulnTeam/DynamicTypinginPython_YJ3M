commit 59229152bcffc31d4a9feb99b302ac89f28e50b0
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Sun Aug 16 21:57:26 2015 +0200

    Change cookiecutter.main to take replay into account

diff --git a/cookiecutter/main.py b/cookiecutter/main.py
index dfa1d51..2771e88 100755
--- a/cookiecutter/main.py
+++ b/cookiecutter/main.py
@@ -20,6 +20,7 @@ from .exceptions import InvalidModeException
 from .prompt import prompt_for_config
 from .generate import generate_context, generate_files
 from .vcs import clone
+from .replay import dump, load
 
 logger = logging.getLogger(__name__)
 
@@ -92,18 +93,25 @@ def cookiecutter(
         # cookiecutters_dir
         repo_dir = template
 
-    context_file = os.path.join(repo_dir, 'cookiecutter.json')
-    logging.debug('context_file is {0}'.format(context_file))
+    template_name = os.path.basename(template)
 
-    context = generate_context(
-        context_file=context_file,
-        default_context=config_dict['default_context'],
-        extra_context=extra_context,
-    )
+    if replay:
+        context = load(template_name)
+    else:
+        context_file = os.path.join(repo_dir, 'cookiecutter.json')
+        logging.debug('context_file is {0}'.format(context_file))
+
+        context = generate_context(
+            context_file=context_file,
+            default_context=config_dict['default_context'],
+            extra_context=extra_context,
+        )
+
+        # prompt the user to manually configure at the command line.
+        # except when 'no-input' flag is set
+        context['cookiecutter'] = prompt_for_config(context, no_input)
 
-    # prompt the user to manually configure at the command line.
-    # except when 'no-input' flag is set
-    context['cookiecutter'] = prompt_for_config(context, no_input)
+        dump(template_name, context)
 
     # Create project from local context and project template.
     generate_files(
