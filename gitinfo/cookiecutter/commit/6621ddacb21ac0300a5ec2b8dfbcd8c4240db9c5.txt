commit 6621ddacb21ac0300a5ec2b8dfbcd8c4240db9c5
Author: Benjamin Schwarze <benjamin.schwarze@mailboxd.de>
Date:   Wed Sep 11 21:01:50 2013 +0200

    second attempt to make permission tests pass on travis too
    
    by comparing original file permissions to generated file permissions (without hard-coding original permissions in test case)

diff --git a/.travis.yml b/.travis.yml
index 741eca9..cb51c7a 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -8,8 +8,6 @@ python:
   - "2.6"
   - "pypy"
 
-before_install: umask 0022
-
 # command to install dependencies, e.g. pip install -r requirements.txt --use-mirrors
 install:
  - if [[ $TRAVIS_PYTHON_VERSION == '2.6' ]]; then pip install -r requirements/test_26.txt; fi
diff --git a/tests/test_generate.py b/tests/test_generate.py
index b017da8..28ad541 100755
--- a/tests/test_generate.py
+++ b/tests/test_generate.py
@@ -164,9 +164,15 @@ class TestGenerateFiles(CookiecutterCleanSystemTestCase):
             repo_dir='tests/test-generate-files-permissions'
         )
         self.assertTrue(os.path.isfile('inputpermissions/simple.txt'))
-        self.assertEquals(0o644, os.stat('inputpermissions/simple.txt').st_mode & 0o777)
+        self.assertEquals(
+            os.stat('tests/test-generate-files-permissions/input{{cookiecutter.permissions}}/simple.txt').st_mode & 0o777,
+            os.stat('inputpermissions/simple.txt').st_mode & 0o777
+        )
         self.assertTrue(os.path.isfile('inputpermissions/script.sh'))
-        self.assertEquals(0o755, os.stat('inputpermissions/script.sh').st_mode & 0o777)
+        self.assertEquals(
+            os.stat('tests/test-generate-files-permissions/input{{cookiecutter.permissions}}/script.sh').st_mode & 0o777,
+            os.stat('inputpermissions/script.sh').st_mode & 0o777
+        )
 
 
 class TestGenerateContext(CookiecutterCleanSystemTestCase):
