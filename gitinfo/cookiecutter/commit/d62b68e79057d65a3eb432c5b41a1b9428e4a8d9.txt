commit d62b68e79057d65a3eb432c5b41a1b9428e4a8d9
Author: Hamish Downer <hamish@aptivate.org>
Date:   Fri Aug 23 14:37:27 2013 +0100

    Add failing test for git clone with checkout
    
    So I can choose what branch to checkout after running clone.

diff --git a/tests/test_vcs.py b/tests/test_vcs.py
index 7749523..a58ba79 100755
--- a/tests/test_vcs.py
+++ b/tests/test_vcs.py
@@ -11,6 +11,7 @@ Tests for `cookiecutter.vcs` module.
 import logging
 import os
 import shutil
+import subprocess
 import sys
 import unittest
 
@@ -42,6 +43,20 @@ class TestVCS(unittest.TestCase):
         if os.path.isdir('cookiecutter-pypackage'):
             shutil.rmtree('cookiecutter-pypackage')
 
+    def test_git_clone_checkout(self):
+        repo_dir = vcs.git_clone(
+            'https://github.com/aptivate/dye.git',
+            'develop'
+        )
+        git_dir = 'dye'
+        self.assertEqual(repo_dir, git_dir)
+        self.assertTrue(os.path.isfile(os.path.join('dye', 'README.md')))
+        symbolic_ref = subprocess.check_output(['git', 'symbolic-ref', 'HEAD'], cwd=git_dir)
+        branch = symbolic_ref.strip().split('/')[-1]
+        self.assertEqual('develop', branch)
+        if os.path.isdir(git_dir):
+            shutil.rmtree(git_dir)
+
 
 class TestVCSPrompt(unittest.TestCase):
 
