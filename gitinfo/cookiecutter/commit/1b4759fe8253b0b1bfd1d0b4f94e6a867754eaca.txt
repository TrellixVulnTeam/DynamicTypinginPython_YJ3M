commit 1b4759fe8253b0b1bfd1d0b4f94e6a867754eaca
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Tue Nov 11 22:36:37 2014 +0100

    Reimplement trailing newline test with pytest

diff --git a/tests/test_generate_files.py b/tests/test_generate_files.py
index 09f2d01..9474009 100644
--- a/tests/test_generate_files.py
+++ b/tests/test_generate_files.py
@@ -71,3 +71,20 @@ def test_generate_files():
 
     simple_text = io.open(simple_file, 'rt', encoding='utf-8').read()
     assert simple_text == u'I eat pizz채'
+
+
+@pytest.mark.usefixtures("clean_system_remove_additional_folders")
+def test_generate_files_with_trailing_newline():
+    generate.generate_files(
+        context={
+            'cookiecutter': {'food': 'pizz채'}
+        },
+        repo_dir='tests/test-generate-files'
+    )
+
+    newline_file = 'inputpizz채/simple-with-newline.txt'
+    assert os.path.isfile(newline_file)
+
+    with io.open(newline_file, 'r', encoding='utf-8') as f:
+        simple_text = f.read()
+    assert simple_text == u'I eat pizz채\n'
