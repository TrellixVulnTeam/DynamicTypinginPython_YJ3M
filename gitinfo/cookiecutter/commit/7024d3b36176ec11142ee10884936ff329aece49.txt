commit 7024d3b36176ec11142ee10884936ff329aece49
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Wed Aug 5 10:36:48 2015 +0200

    Set PYTHONPATH and use sys.executable

diff --git a/tests/test_cookiecutter_invocation.py b/tests/test_cookiecutter_invocation.py
index 73df88b..830c777 100644
--- a/tests/test_cookiecutter_invocation.py
+++ b/tests/test_cookiecutter_invocation.py
@@ -11,6 +11,7 @@ using the entry point set up for the package.
 import os
 import pytest
 import subprocess
+import sys
 
 from cookiecutter import utils
 
@@ -37,12 +38,15 @@ def project_dir(request):
     return rendered_dir
 
 
-def test_should_invoke_main(project_dir):
+def test_should_invoke_main(monkeypatch, project_dir):
+    monkeypatch.setenv('PYTHONPATH', '.')
+
     subprocess.check_call([
-        'python',
+        sys.executable,
         '-m',
         'cookiecutter.cli',
         'tests/fake-repo-tmpl',
         '--no-input'
     ])
+
     assert os.path.isdir(project_dir)
