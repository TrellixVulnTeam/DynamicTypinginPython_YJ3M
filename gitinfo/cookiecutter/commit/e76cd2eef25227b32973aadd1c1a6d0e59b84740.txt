commit e76cd2eef25227b32973aadd1c1a6d0e59b84740
Author: Audrey Roy <audreyr@gmail.com>
Date:   Fri Sep 6 16:47:40 2013 +0200

    Fix tests after repo_dir change, for simple generate_files() and nontemplated exception.

diff --git a/cookiecutter/find.py b/cookiecutter/find.py
index 0c3d915..ca1e25d 100755
--- a/cookiecutter/find.py
+++ b/cookiecutter/find.py
@@ -11,6 +11,8 @@ Functions for finding Cookiecutter templates and other components.
 import logging
 import os
 
+from .exceptions import NonTemplatedInputDirException
+
 
 def find_template(repo_dir):
     """
@@ -34,6 +36,7 @@ def find_template(repo_dir):
 
     if project_template:
         project_template = os.path.join(repo_dir, project_template)
-
-    logging.debug('The project template appears to be {0}'.format(project_template))
-    return project_template
+        logging.debug('The project template appears to be {0}'.format(project_template))
+        return project_template
+    else:
+        raise NonTemplatedInputDirException
\ No newline at end of file
diff --git a/tests/input{{food}}/simple.txt b/tests/input{{food}}/simple.txt
deleted file mode 100644
index a459ce5..0000000
--- a/tests/input{{food}}/simple.txt
+++ /dev/null
@@ -1 +0,0 @@
-I eat {{ food }}
\ No newline at end of file
diff --git a/tests/input/simple.txt b/tests/test-generate-files-nontemplated/input/simple.txt
similarity index 100%
rename from tests/input/simple.txt
rename to tests/test-generate-files-nontemplated/input/simple.txt
diff --git a/tests/test-generate-files/input{{cookiecutter.food}}/simple.txt b/tests/test-generate-files/input{{cookiecutter.food}}/simple.txt
new file mode 100644
index 0000000..a4b8860
--- /dev/null
+++ b/tests/test-generate-files/input{{cookiecutter.food}}/simple.txt
@@ -0,0 +1 @@
+I eat {{ cookiecutter.food }}
\ No newline at end of file
diff --git a/tests/test_generate.py b/tests/test_generate.py
index 70f976e..2d595b7 100755
--- a/tests/test_generate.py
+++ b/tests/test_generate.py
@@ -72,18 +72,22 @@ class TestGenerateFile(unittest.TestCase):
 
 class TestGenerateFiles(unittest.TestCase):
 
-    def test_generate_files_bad(self):
+    def test_generate_files_nontemplated_exception(self):
         self.assertRaises(
             exceptions.NonTemplatedInputDirException,
             generate.generate_files,
-            context={'food': 'pizza'},
-            template_dir='tests/input'
+            context={
+                'cookiecutter': {'food': 'pizza'}
+            },
+            repo_dir='tests/test-generate-files-nontemplated'
         )
 
     def test_generate_files(self):
         generate.generate_files(
-            context={'food': 'pizz채'},
-            template_dir='tests/input{{food}}'
+            context={
+                'cookiecutter': {'food': 'pizz채'}
+            },
+            repo_dir='tests/test-generate-files'
         )
         self.assertTrue(os.path.isfile('inputpizz채/simple.txt'))
         simple_text = open('inputpizz채/simple.txt', 'rt').read()
