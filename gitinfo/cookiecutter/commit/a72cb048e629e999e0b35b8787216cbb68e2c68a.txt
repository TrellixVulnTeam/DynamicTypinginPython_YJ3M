commit a72cb048e629e999e0b35b8787216cbb68e2c68a
Author: michaeljoseph <michaeljoseph+github@gmail.com>
Date:   Sat Jul 16 20:55:19 2016 +0200

    Validate cloned repo and reorganise

diff --git a/cookiecutter/repository.py b/cookiecutter/repository.py
index 9683f58..9b21aac 100644
--- a/cookiecutter/repository.py
+++ b/cookiecutter/repository.py
@@ -76,25 +76,27 @@ def determine_repo_dir(template, abbreviations, clone_to_dir, checkout,
     """
     template = expand_abbreviations(template, abbreviations)
 
+    repository_candidates = []
+
     if is_repo_url(template):
-        return clone(
+        cloned_repo = clone(
             repo_url=template,
             checkout=checkout,
             clone_to_dir=clone_to_dir,
             no_input=no_input,
         )
-    else:
-        # If it's a local repo, no need to clone or copy to your
-        # cookiecutters_dir
-        repo_dir = template
-        if not repository_has_cookiecutter_json(repo_dir):
-            already_cloned_cookiecutter = os.path.join(clone_to_dir, template)
-            repo_dir = already_cloned_cookiecutter
+        repository_candidates.append(cloned_repo)
+
+    repository_candidates.extend([
+        template,
+        os.path.join(clone_to_dir, template)
+    ])
 
-    if repository_has_cookiecutter_json(repo_dir):
-        return repo_dir
+    for repo_candidate in repository_candidates:
+        if repository_has_cookiecutter_json(repo_candidate):
+            return repo_candidate
 
     raise RepositoryNotFound(
         'The repository {} could not be located or does not contain '
-        'a "cookiecutter.json" file.'.format(repo_dir)
+        'a "cookiecutter.json" file.'.format(template)
     )
diff --git a/tests/repository/test_determine_repo_dir_clones_repo.py b/tests/repository/test_determine_repo_dir_clones_repo.py
index b5d3d50..b29dad3 100644
--- a/tests/repository/test_determine_repo_dir_clones_repo.py
+++ b/tests/repository/test_determine_repo_dir_clones_repo.py
@@ -64,6 +64,6 @@ def test_repository_url_with_no_context_file(
         )
 
     assert str(err.value) == (
-        'The repository tests/fake-repo-bad could not be located or does not '
-        'contain a "cookiecutter.json" file.'
+        'The repository {} could not be located or does not '
+        'contain a "cookiecutter.json" file.'.format(template_url)
     )
