commit 6864ab090545310c5d5cd340e6fb1fc6d5cf792e
Author: michaeljoseph <michaeljoseph+github@gmail.com>
Date:   Thu Sep 22 22:52:01 2016 +0200

    Extract setup code into fixtures

diff --git a/tests/repository/test_determine_repo_dir_finds_existing_cookiecutter.py b/tests/repository/test_determine_repo_dir_finds_existing_cookiecutter.py
index c391d70..7b274a3 100644
--- a/tests/repository/test_determine_repo_dir_finds_existing_cookiecutter.py
+++ b/tests/repository/test_determine_repo_dir_finds_existing_cookiecutter.py
@@ -1,23 +1,36 @@
 # -*- coding: utf-8 -*-
 import io
 import os
+import pytest
 
 from cookiecutter import repository
 
 
-def test_should_find_existing_cookiecutter(user_config_data):
-    template = 'cookiecutter-pytest-plugin'
+@pytest.fixture
+def template():
+    return 'cookiecutter-pytest-plugin'
+
+
+@pytest.fixture
+def cloned_cookiecutter_path(user_config_data, template):
     cookiecutters_dir = user_config_data['cookiecutters_dir']
+
     cloned_template_path = os.path.join(cookiecutters_dir, template)
     os.mkdir(cloned_template_path)
+
     io.open(os.path.join(cloned_template_path, 'cookiecutter.json'), 'w')
 
+    return cloned_template_path
+
+
+def test_should_find_existing_cookiecutter(
+        template, user_config_data, cloned_cookiecutter_path):
     project_dir = repository.determine_repo_dir(
         template,
         abbreviations={},
-        clone_to_dir=cookiecutters_dir,
+        clone_to_dir=user_config_data['cookiecutters_dir'],
         checkout=None,
         no_input=True,
     )
 
-    assert cloned_template_path == project_dir
+    assert cloned_cookiecutter_path == project_dir
