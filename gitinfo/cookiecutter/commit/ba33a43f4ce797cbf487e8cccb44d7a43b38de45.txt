commit ba33a43f4ce797cbf487e8cccb44d7a43b38de45
Author: Abdo Roig-Maranges <abdo.roig@gmail.com>
Date:   Sat Aug 20 15:04:33 2016 +0200

    add test for the jsonify filter extension

diff --git a/tests/files/{{cookiecutter.jsonify_file}}.txt b/tests/files/{{cookiecutter.jsonify_file}}.txt
new file mode 100644
index 0000000..b07ca2a
--- /dev/null
+++ b/tests/files/{{cookiecutter.jsonify_file}}.txt
@@ -0,0 +1 @@
+{{ cookiecutter | jsonify }}
diff --git a/tests/test_generate_file.py b/tests/test_generate_file.py
index 84e2608..2726a5e 100644
--- a/tests/test_generate_file.py
+++ b/tests/test_generate_file.py
@@ -12,6 +12,7 @@ TestGenerateFile.test_generate_file_verbose_template_syntax_error
 from __future__ import unicode_literals
 import os
 import pytest
+import json
 
 from jinja2 import FileSystemLoader
 from jinja2.exceptions import TemplateSyntaxError
@@ -65,6 +66,22 @@ def test_generate_file_with_false_condition(env):
     assert not os.path.exists('tests/files/cheese.txt')
 
 
+@pytest.mark.usefixtures('remove_cheese_file')
+def test_generate_file_jsonify_filter(env):
+    infile = 'tests/files/{{cookiecutter.jsonify_file}}.txt'
+    data = {'jsonify_file': 'cheese', 'type': 'roquefort'}
+    generate.generate_file(
+        project_dir=".",
+        infile=infile,
+        context={'cookiecutter': data},
+        env=env
+    )
+    assert os.path.isfile('tests/files/cheese.txt')
+    with open('tests/files/cheese.txt', 'rt') as f:
+        generated_text = f.read()
+        assert json.loads(generated_text) == data
+
+
 @pytest.mark.usefixtures('remove_cheese_file')
 def test_generate_file_with_true_conditional(env):
     infile = 'tests/files/{% if generate_file == \'y\' %}cheese.txt{% endif %}'
