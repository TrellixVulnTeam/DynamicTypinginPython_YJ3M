commit 53751720818e4fbd17370b47ca730c61f3127a5e
Author: Benjamin Schwarze <benjamin.schwarze@mailboxd.de>
Date:   Wed Aug 28 22:04:32 2013 +0200

    show syntax error location when running into jinja2.exceptions.TemplateSyntaxError

diff --git a/cookiecutter/generate.py b/cookiecutter/generate.py
index 66b9143..178365f 100755
--- a/cookiecutter/generate.py
+++ b/cookiecutter/generate.py
@@ -15,6 +15,7 @@ import sys
 
 from jinja2 import FileSystemLoader, Template
 from jinja2.environment import Environment
+from jinja2.exceptions import TemplateSyntaxError
 from binaryornot.check import is_binary
 
 from .exceptions import NonTemplatedInputDirException
@@ -82,7 +83,13 @@ def generate_file(infile, context, env):
         infile_fwd_slashes = infile.replace(os.path.sep, '/')
 
         # Render the file
-        tmpl = env.get_template(infile_fwd_slashes)
+        try:
+            tmpl = env.get_template(infile_fwd_slashes)
+        except TemplateSyntaxError as exception:
+            # Disable translated so that printed exception contains verbose
+            # information about syntax error location
+            exception.translated = False
+            raise
         rendered_file = tmpl.render(**context)
 
         # Render the output filename before writing
diff --git a/tests/input{{syntax_error}}/simple.txt b/tests/input{{syntax_error}}/simple.txt
new file mode 100644
index 0000000..50ea250
--- /dev/null
+++ b/tests/input{{syntax_error}}/simple.txt
@@ -0,0 +1 @@
+I eat {{ syntax_error }} {# this comment is not closed}
\ No newline at end of file
diff --git a/tests/test_generate.py b/tests/test_generate.py
index 1dc2738..d8e75c1 100755
--- a/tests/test_generate.py
+++ b/tests/test_generate.py
@@ -16,6 +16,7 @@ import unittest
 
 from jinja2 import FileSystemLoader
 from jinja2.environment import Environment
+from jinja2.exceptions import TemplateSyntaxError
 
 from cookiecutter import generate
 from cookiecutter import exceptions
@@ -49,6 +50,17 @@ class TestGenerate(unittest.TestCase):
             template_dir='tests/input'
         )
 
+    def test_generate_files_verbose_template_syntax_error(self):
+        self.assertRaisesRegexp(
+            TemplateSyntaxError,
+            r'^Missing end of comment tag\n'
+            '\s*File "\./tests/input{{syntax_error}}/simple\.txt", line 1\n'
+            '\s*I eat {{ syntax_error }} {# this comment is not closed}$',
+            generate.generate_files,
+            context={'syntax_error': 'syntax_error'},
+            template_dir='tests/input{{syntax_error}}'
+        )
+
     def test_generate_files(self):
         generate.generate_files(
             context={'food': 'pizz√§'},
