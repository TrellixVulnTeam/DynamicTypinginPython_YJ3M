commit e1a1a19408c052c93ccc1684b2e1408ba229addc
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Tue Aug 4 23:17:57 2015 +0200

    Implement test to make sure cookiecutter main is called

diff --git a/tests/test_cookiecutter_invocation.py b/tests/test_cookiecutter_invocation.py
index fa261e1..73df88b 100644
--- a/tests/test_cookiecutter_invocation.py
+++ b/tests/test_cookiecutter_invocation.py
@@ -8,9 +8,12 @@ Tests to make sure that cookiecutter can be called from the cli without
 using the entry point set up for the package.
 """
 
+import os
 import pytest
 import subprocess
 
+from cookiecutter import utils
+
 
 def test_should_raise_error_without_template_arg(capfd):
     with pytest.raises(subprocess.CalledProcessError):
@@ -19,3 +22,27 @@ def test_should_raise_error_without_template_arg(capfd):
     _, err = capfd.readouterr()
     exp_message = 'Error: Missing argument "template".'
     assert exp_message in err
+
+
+@pytest.fixture
+def project_dir(request):
+    """Remove the rendered project directory created by the test."""
+    rendered_dir = 'fake-project-templated'
+
+    def remove_generated_project():
+        if os.path.isdir(rendered_dir):
+            utils.rmtree(rendered_dir)
+    request.addfinalizer(remove_generated_project)
+
+    return rendered_dir
+
+
+def test_should_invoke_main(project_dir):
+    subprocess.check_call([
+        'python',
+        '-m',
+        'cookiecutter.cli',
+        'tests/fake-repo-tmpl',
+        '--no-input'
+    ])
+    assert os.path.isdir(project_dir)
