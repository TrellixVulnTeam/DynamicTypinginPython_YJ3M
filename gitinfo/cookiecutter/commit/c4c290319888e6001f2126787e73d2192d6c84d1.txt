commit c4c290319888e6001f2126787e73d2192d6c84d1
Author: Andrey Shpak <insspb@users.noreply.github.com>
Date:   Fri Apr 17 02:12:14 2020 +0300

    Add CI/CD steps for Github actions to speedup CI/CD (#1360)
    
    * Add alpha version of github actions CI/CD
    
    * Fix pypy2 naming.
    
    * Add pypy3 to travis + verbose tests logging everywhere.
    
    * Add skip test for pypy3 on Ubuntu travis.
    
    * Remove pypy tests from windows CI/CD (Broken)

diff --git a/.github/workflows/main.yml b/.github/workflows/main.yml
new file mode 100644
index 0000000..0f20aa1
--- /dev/null
+++ b/.github/workflows/main.yml
@@ -0,0 +1,140 @@
+name: CI Tests
+
+on:
+  push:
+    branches:
+      - master
+    tags:
+      - "*"
+  pull_request:
+    branches:
+      - "*"
+
+jobs:
+  build:
+    runs-on: ${{ matrix.os }}
+    strategy:
+      fail-fast: false
+      matrix:
+        name:
+          - "linting"
+
+          - "ubuntu-py27"
+          - "ubuntu-py35"
+          - "ubuntu-py36"
+          - "ubuntu-py37"
+          - "ubuntu-py38"
+          - "ubuntu-pypy"
+          - "ubuntu-pypy3"
+
+          - "macos-py27"
+          - "macos-py35"
+          - "macos-py36"
+          - "macos-py37"
+          - "macos-py38"
+          - "macos-pypy"
+          - "macos-pypy3"
+
+          - "windows-py27"
+          - "windows-py35"
+          - "windows-py36"
+          - "windows-py37"
+          - "windows-py38"
+
+        include:
+          - name: "linting"
+            python: "3.8"
+            os: ubuntu-latest
+            tox_env: "lint"
+
+          - name: "ubuntu-py27"
+            python: "2.7"
+            os: ubuntu-latest
+            tox_env: "py27"
+          - name: "ubuntu-py35"
+            python: "3.5"
+            os: ubuntu-latest
+            tox_env: "py35"
+          - name: "ubuntu-py36"
+            python: "3.6"
+            os: ubuntu-latest
+            tox_env: "py36"
+          - name: "ubuntu-py37"
+            python: "3.7"
+            os: ubuntu-latest
+            tox_env: "py37"
+          - name: "ubuntu-py38"
+            python: "3.8"
+            os: ubuntu-latest
+            tox_env: "py38"
+          - name: "ubuntu-pypy"
+            python: "pypy2"
+            os: ubuntu-latest
+            tox_env: "pypy"
+          - name: "ubuntu-pypy3"
+            python: "pypy3"
+            os: ubuntu-latest
+            tox_env: "pypy3"
+
+          - name: "macos-py27"
+            python: "2.7"
+            os: macos-latest
+            tox_env: "py27"
+          - name: "macos-py35"
+            python: "3.5"
+            os: macos-latest
+            tox_env: "py35"
+          - name: "macos-py36"
+            python: "3.6"
+            os: macos-latest
+            tox_env: "py36"
+          - name: "macos-py37"
+            python: "3.7"
+            os: macos-latest
+            tox_env: "py37"
+          - name: "macos-py38"
+            python: "3.8"
+            os: macos-latest
+            tox_env: "py38"
+          - name: "macos-pypy"
+            python: "pypy2"
+            os: macos-latest
+            tox_env: "pypy"
+          - name: "macos-pypy3"
+            python: "pypy3"
+            os: macos-latest
+            tox_env: "pypy3"
+
+          - name: "windows-py27"
+            python: "2.7"
+            os: windows-latest
+            tox_env: "py27"
+          - name: "windows-py35"
+            python: "3.5"
+            os: windows-latest
+            tox_env: "py35"
+          - name: "windows-py36"
+            python: "3.6"
+            os: windows-latest
+            tox_env: "py36"
+          - name: "windows-py37"
+            python: "3.7"
+            os: windows-latest
+            tox_env: "py37"
+          - name: "windows-py38"
+            python: "3.8"
+            os: windows-latest
+            tox_env: "py38"
+
+    steps:
+    - uses: actions/checkout@v2
+    - name: Set up Python ${{ matrix.python }}
+      uses: actions/setup-python@v1
+      with:
+        python-version: ${{ matrix.python }}
+    - name: Install dependencies
+      run: |
+        python -m pip install --upgrade pip
+        pip install tox virtualenv
+    - name: Test build
+      run: "tox -e ${{ matrix.tox_env }}"
diff --git a/.travis.yml b/.travis.yml
index a46de06..89bdc08 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -19,6 +19,8 @@ jobs:
         env: TOXENV=py38
       - python: pypy
         env: TOXENV=pypy
+      - python: pypy3
+        env: TOXENV=pypy3
       - name: "Python 2.7 on Windows"
         os: windows
         language: shell
diff --git a/setup.cfg b/setup.cfg
index b218fdf..34ca4a4 100644
--- a/setup.cfg
+++ b/setup.cfg
@@ -29,4 +29,4 @@ universal = 1
 
 [tool:pytest]
 testpaths = tests
-addopts = --cov-report term-missing --cov=cookiecutter
+addopts = -vvv --cov-report term-missing --cov=cookiecutter
diff --git a/tests/test_cli.py b/tests/test_cli.py
index 43609d3..1ba8392 100644
--- a/tests/test_cli.py
+++ b/tests/test_cli.py
@@ -4,6 +4,7 @@
 
 import json
 import os
+import sys
 
 import pytest
 from click.testing import CliRunner
@@ -354,6 +355,10 @@ def test_default_user_config(mocker, cli_runner):
     )
 
 
+@pytest.mark.skipif(
+    sys.version_info[0] == 3 and sys.version_info[1] == 6 and sys.version_info[2] == 1,
+    reason="Outdated pypy3 version on Travis CI/CD with wrong OrderedDict syntax."
+)
 def test_echo_undefined_variable_error(tmpdir, cli_runner):
     """Cli invocation return error if variable undefined in template."""
     output_dir = str(tmpdir.mkdir('output'))
