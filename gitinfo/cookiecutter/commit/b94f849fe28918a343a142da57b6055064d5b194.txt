commit b94f849fe28918a343a142da57b6055064d5b194
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Sun Nov 8 02:13:34 2015 +0100

    Test that an error in post_gen_project aborts generation

diff --git a/tests/test_abort_generate_on_hook_error.py b/tests/test_abort_generate_on_hook_error.py
index 2b3ca74..34e5420 100644
--- a/tests/test_abort_generate_on_hook_error.py
+++ b/tests/test_abort_generate_on_hook_error.py
@@ -25,3 +25,22 @@ def test_pre_gen_hook(tmpdir):
 
     assert not tmpdir.join('foobar').isdir()
 
+
+@pytest.mark.usefixtures('clean_system')
+def test_post_gen_hook(tmpdir):
+    context = {
+        'cookiecutter': {
+            "repo_dir": "foobar",
+            "abort_pre_gen": "no",
+            "abort_post_gen": "yes"
+        }
+    }
+
+    with pytest.raises(exceptions.FailedHookException):
+        generate.generate_files(
+            repo_dir='tests/hooks-abort-render',
+            context=context,
+            output_dir=str(tmpdir)
+        )
+
+    assert not tmpdir.join('foobar').isdir()
