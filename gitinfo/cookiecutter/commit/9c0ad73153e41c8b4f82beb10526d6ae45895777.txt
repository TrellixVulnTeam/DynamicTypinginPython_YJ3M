commit 9c0ad73153e41c8b4f82beb10526d6ae45895777
Author: Audrey Roy <audreyr@gmail.com>
Date:   Thu Sep 12 01:14:06 2013 +0200

    Fix test failure in test_main.TestCookiecutterRepoArg.test_cookiecutter_git.
    
    For some unknown reason, test_main.TestCookiecutterRepoArg.test_cookiecutter_git
    started failing on my system for Python 2.6 & 3.3 (both in tox and in isolated
    2.6 & 3.3 virtualenvs). I believe this test failure was completely unrelated to
    @benjixx's file permissions changes.
    
    This commit is a bit hackish, so I added detailed explanations inline. If anyone
    happens to have any insight about why this might have started happening or how
    to improve this, I am interested.

diff --git a/tests/test_main.py b/tests/test_main.py
index b6b4fde..52e69e2 100755
--- a/tests/test_main.py
+++ b/tests/test_main.py
@@ -104,10 +104,28 @@ class TestCookiecutterRepoArg(CookiecutterCleanSystemTestCase):
             shutil.rmtree('module_name')
         super(TestCookiecutterRepoArg, self).tearDown()
 
-    @patch(input_str, lambda x: '')
+    # HACK: The *args is because:
+    # 1. If the lambda has 1 arg named x, I sometimes get this error:
+    #    TypeError: <lambda>() missing 1 required positional argument: 'x'
+    # 2. If lambda has no args, I unpredictably get this error:
+    #    TypeError: <lambda>() takes 0 positional arguments but 1 was given
+    # *args is the best of both worlds.
+    # But I am not sure why I started getting these errors for no reason.
+    # Any help would be appreciated. -- @audreyr
+    @patch(input_str, lambda *args: '')
     def test_cookiecutter_git(self):
         if not PY3:
-            sys.stdin = StringIO('\n\n\n\n\n\n\n\n\n')
+            # Simulate pressing return 10x.
+            # HACK: There are only 9 prompts in cookiecutter-pypackage's
+            # cookiecutter.json (http://git.io/b-1MVA) but 10 \n chars here.
+            # There was an "EOFError: EOF when reading a line" test fail here
+            # out of the blue, which an extra \n fixed. 
+            # Not sure why. There shouldn't be an extra prompt to delete 
+            # the repo, since CookiecutterCleanSystemTestCase ensured that it
+            # wasn't present.
+            # It's possibly an edge case in CookiecutterCleanSystemTestCase.
+            # Improvements to this would be appreciated. -- @audreyr
+            sys.stdin = StringIO('\n\n\n\n\n\n\n\n\n\n')
         main.cookiecutter('https://github.com/audreyr/cookiecutter-pypackage.git')
         logging.debug('Current dir is {0}'.format(os.getcwd()))
         clone_dir = os.path.join(os.path.expanduser('~/.cookiecutters'), 'cookiecutter-pypackage')
