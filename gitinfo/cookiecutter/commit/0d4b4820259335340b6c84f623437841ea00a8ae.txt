commit 0d4b4820259335340b6c84f623437841ea00a8ae
Author: Andrey Shpak <insspb@users.noreply.github.com>
Date:   Tue May 26 13:26:21 2020 +0300

    Changed: Restored coverage reporter #1398

diff --git a/.github/workflows/coverage.yml b/.github/workflows/coverage.yml
new file mode 100644
index 0000000..9d2f231
--- /dev/null
+++ b/.github/workflows/coverage.yml
@@ -0,0 +1,38 @@
+name: Coverage reporter
+
+on:
+  push:
+    branches:
+      - master
+    tags:
+      - "*"
+  pull_request:
+    branches:
+      - "*"
+
+jobs:
+  build:
+    runs-on: ubuntu-latest
+    steps:
+    - uses: actions/checkout@v2
+    - name: Set up Python 3.8
+      uses: actions/setup-python@v1
+      with:
+        python-version: "3.8"
+    - name: Install dependencies
+      run: |
+        python -m pip install --upgrade pip
+        pip install tox virtualenv
+    - name: Test build with coverage
+      run: "tox -e cov-report"
+    - name: Send coverage report to codeclimate
+      uses: paambaati/codeclimate-action@v2.6.0
+      with:
+        coverageCommand: echo "Ignore rerun"
+        coverageLocations: ${{github.workspace}}/coverage.xml:coverage.py
+      env:
+        CC_TEST_REPORTER_ID: ${{secrets.CC_TEST_REPORTER_ID}}
+    - name: Send coverage report to codecov
+      uses: codecov/codecov-action@v1
+      with:
+        file: ./coverage.xml
diff --git a/tox.ini b/tox.ini
index c9ddfa5..1c1c611 100644
--- a/tox.ini
+++ b/tox.ini
@@ -33,14 +33,13 @@ skip_install = true
 usedevelop = false
 
 [testenv:cov-report]
-; This coverage only report run. Only for local development. Not used at CI/CD
 passenv =
     LC_ALL
     LANG
     HOME
 commands =
     pip install -e .
-    pytest --cov=cookiecutter --cov-report=term --cov-report=html
+    pytest --cov=cookiecutter --cov-report=term --cov-report=html --cov-report=xml
 deps = -rtest_requirements.txt
 skip_install = true
 
