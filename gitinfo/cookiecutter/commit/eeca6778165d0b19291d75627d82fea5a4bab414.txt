commit eeca6778165d0b19291d75627d82fea5a4bab414
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Sun Mar 15 13:40:06 2015 +0100

    Reimplement test_git_clone_overwrite using skipif markers

diff --git a/tests/test_vcs.py b/tests/test_vcs.py
index 70390a7..0190df3 100755
--- a/tests/test_vcs.py
+++ b/tests/test_vcs.py
@@ -106,14 +106,6 @@ class TestVCSPrompt(unittest.TestCase):
             utils.rmtree('cookiecutter-trytonmodule')
         os.mkdir('cookiecutter-trytonmodule/')
 
-    @patch('cookiecutter.prompt.read_response', lambda x=u'': u'y')
-    def test_git_clone_overwrite(self):
-        repo_dir = vcs.clone(
-            'https://github.com/audreyr/cookiecutter-pypackage.git'
-        )
-        self.assertEqual(repo_dir, 'cookiecutter-pypackage')
-        self.assertTrue(os.path.isfile('cookiecutter-pypackage/README.rst'))
-
     def test_git_clone_overwrite_with_no_prompt(self):
         repo_dir = vcs.clone(
             'https://github.com/audreyr/cookiecutter-pypackage.git',
diff --git a/tests/test_vcs_prompt.py b/tests/test_vcs_prompt.py
index 2948484..8edd4fa 100755
--- a/tests/test_vcs_prompt.py
+++ b/tests/test_vcs_prompt.py
@@ -9,10 +9,11 @@ test_vcs_prompt
 import os
 import pytest
 
-from cookiecutter import utils
+from cookiecutter import utils, vcs
+from tests.skipif_markers import skipif_no_network
 
 
-@pytest.fixture
+@pytest.fixture(autouse=True)
 def clean_cookiecutter_dirs(request):
     if os.path.isdir('cookiecutter-pypackage'):
         utils.rmtree('cookiecutter-pypackage')
@@ -27,3 +28,16 @@ def clean_cookiecutter_dirs(request):
         if os.path.isdir('cookiecutter-trytonmodule'):
             utils.rmtree('cookiecutter-trytonmodule')
     request.addfinalizer(remove_cookiecutter_dirs)
+
+
+@skipif_no_network
+def test_git_clone_overwrite(monkeypatch):
+    monkeypatch.setattr(
+        'cookiecutter.prompt.read_response',
+        lambda x=u'': u'y'
+    )
+    repo_dir = vcs.clone(
+        'https://github.com/audreyr/cookiecutter-pypackage.git'
+    )
+    assert repo_dir == 'cookiecutter-pypackage'
+    assert os.path.isfile('cookiecutter-pypackage/README.rst')
