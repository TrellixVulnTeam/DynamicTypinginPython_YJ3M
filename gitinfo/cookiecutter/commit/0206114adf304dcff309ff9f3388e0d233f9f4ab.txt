commit 0206114adf304dcff309ff9f3388e0d233f9f4ab
Author: michaeljoseph <michaeljoseph+github@gmail.com>
Date:   Fri Jul 15 22:47:17 2016 +0200

    Test context missing scenarios

diff --git a/tests/repository/test_determine_repo_dir_clones_repo.py b/tests/repository/test_determine_repo_dir_clones_repo.py
index 5526122..d0dfd51 100644
--- a/tests/repository/test_determine_repo_dir_clones_repo.py
+++ b/tests/repository/test_determine_repo_dir_clones_repo.py
@@ -3,7 +3,7 @@ import os
 
 import pytest
 
-from cookiecutter import repository
+from cookiecutter import repository, exceptions
 
 
 @pytest.fixture
@@ -17,8 +17,8 @@ def template_url():
 
 def test_repository_url_should_clone(
         mocker, template_url, user_config_data):
-    """`clone()` should be called with correct args when `cookiecutter()` is
-    called.
+    """`clone()` should be called with correct args when
+    `determine_repo_dir()` is passed a repository template url.
     """
 
     mock_clone = mocker.patch(
@@ -44,3 +44,20 @@ def test_repository_url_should_clone(
 
     assert os.path.isdir(project_dir)
     assert 'tests/fake-repo-tmpl' == project_dir
+
+
+def test_repository_url_with_no_context_file(mocker, template_url):
+    mocker.patch(
+        'cookiecutter.repository.clone',
+        return_value='tests/fake-repo-bad',
+        autospec=True
+    )
+
+    with pytest.raises(exceptions.RepositoryNotFound):
+        repository.determine_repo_dir(
+            template_url,
+            abbreviations={},
+            clone_to_dir=None,
+            checkout=None,
+            no_input=True
+        )
diff --git a/tests/repository/test_determine_repository_should_use_local_repo.py b/tests/repository/test_determine_repository_should_use_local_repo.py
index 696cbee..edc2bad 100644
--- a/tests/repository/test_determine_repository_should_use_local_repo.py
+++ b/tests/repository/test_determine_repository_should_use_local_repo.py
@@ -5,6 +5,7 @@ import pytest
 
 
 def test_finds_local_repo():
+    """A valid local repository should be returned."""
     project_dir = repository.determine_repo_dir(
         'tests/fake-repo',
         abbreviations={},
@@ -16,15 +17,29 @@ def test_finds_local_repo():
     assert 'tests/fake-repo' == project_dir
 
 
-def test_local_repo_with_no_context_raises(user_config_data):
-    """A repository without a cookiecutter.json should raise a
+def test_local_repo_with_no_context_raises():
+    """A local repository without a cookiecutter.json should raise a
     `RepositoryNotFound` exception.
     """
     with pytest.raises(exceptions.RepositoryNotFound):
         repository.determine_repo_dir(
             'tests/fake-repo-bad',
             abbreviations={},
-            clone_to_dir=user_config_data['cookiecutters_dir'],
+            clone_to_dir=None,
+            checkout=None,
+            no_input=True
+        )
+
+
+def test_local_repo_typo():
+    """An unknown local repository should raise a `RepositoryNotFound`
+    exception.
+    """
+    with pytest.raises(exceptions.RepositoryNotFound):
+        repository.determine_repo_dir(
+            'tests/unknown-repo',
+            abbreviations={},
+            clone_to_dir=None,
             checkout=None,
             no_input=True
         )
