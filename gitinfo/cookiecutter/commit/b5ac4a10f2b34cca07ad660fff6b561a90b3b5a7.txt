commit b5ac4a10f2b34cca07ad660fff6b561a90b3b5a7
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Sun Nov 22 02:29:27 2015 +0100

    Implement tests for file name, file content, project dir and dir name

diff --git a/tests/test_generate_files.py b/tests/test_generate_files.py
index f75b0db..a9b96a5 100644
--- a/tests/test_generate_files.py
+++ b/tests/test_generate_files.py
@@ -212,3 +212,79 @@ def test_generate_files_permissions():
     )
     input_script_file_mode = os.stat(input_script_file).st_mode & 0o777
     assert tests_script_file_mode == input_script_file_mode
+
+
+@pytest.fixture
+def undefined_context():
+    return {
+        'cookiecutter': {
+            'project_slug': 'testproject',
+            'github_username': 'hackebrot'
+        }
+    }
+
+
+def test_raise_undefined_variable_file_name(tmpdir, undefined_context):
+    output_dir = tmpdir.mkdir('output')
+
+    with pytest.raises(exceptions.UndefinedVariableInTemplate) as err:
+        generate.generate_files(
+            repo_dir='tests/undefined-variable/file-name/',
+            output_dir=str(output_dir),
+            context=undefined_context
+        )
+    error = err.value
+    assert "Unable to create file '{{cookiecutter.foobar}}'" == error.message
+    assert error.context == undefined_context
+
+    assert not output_dir.join('testproject').exists()
+
+
+def test_raise_undefined_variable_file_content(tmpdir, undefined_context):
+    output_dir = tmpdir.mkdir('output')
+
+    with pytest.raises(exceptions.UndefinedVariableInTemplate) as err:
+        generate.generate_files(
+            repo_dir='tests/undefined-variable/file-content/',
+            output_dir=str(output_dir),
+            context=undefined_context
+        )
+    error = err.value
+    assert "Unable to create file 'README.rst'" == error.message
+    assert error.context == undefined_context
+
+    assert not output_dir.join('testproject').exists()
+
+
+def test_raise_undefined_variable_dir_name(tmpdir, undefined_context):
+    output_dir = tmpdir.mkdir('output')
+
+    with pytest.raises(exceptions.UndefinedVariableInTemplate) as err:
+        generate.generate_files(
+            repo_dir='tests/undefined-variable/dir-name/',
+            output_dir=str(output_dir),
+            context=undefined_context
+        )
+    error = err.value
+    msg = "Unable to create directory 'testproject/{{cookiecutter.foobar}}'"
+    assert msg == error.message
+    assert error.context == undefined_context
+
+    assert not output_dir.join('testproject').exists()
+
+
+def test_raise_undefined_variable_project_dir(tmpdir):
+    output_dir = tmpdir.mkdir('output')
+
+    with pytest.raises(exceptions.UndefinedVariableInTemplate) as err:
+        generate.generate_files(
+            repo_dir='tests/undefined-variable/dir-name/',
+            output_dir=str(output_dir),
+            context={}
+        )
+    error = err.value
+    msg = "Unable to create project directory '{{cookiecutter.project_slug}}'"
+    assert msg == error.message
+    assert error.context == {}
+
+    assert not output_dir.join('testproject').exists()
