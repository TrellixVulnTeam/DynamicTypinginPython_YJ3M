commit 9add92c87b7b1474fc0e2a49bef1ab36e6c74bf9
Author: Raphael Pierzina <raphael@hackebrot.de>
Date:   Mon Nov 23 20:45:20 2015 +0100

    Implement a test for vcs.clone() and git including branch checkout

diff --git a/tests/test_vcs.py b/tests/test_vcs.py
index 8d5c92f..91c67ee 100755
--- a/tests/test_vcs.py
+++ b/tests/test_vcs.py
@@ -204,3 +204,40 @@ def test_clone_should_raise_if_vcs_not_installed(mocker, clone_dir):
 
     with pytest.raises(exceptions.VCSNotInstalled):
         vcs.clone(repo_url, clone_to_dir=clone_dir)
+
+
+def test_clone_should_invoke_git(mocker, clone_dir):
+    mocker.patch(
+        'cookiecutter.vcs.is_vcs_installed',
+        autospec=True,
+        return_value=True
+    )
+
+    mock_subprocess = mocker.patch(
+        'cookiecutter.vcs.subprocess.check_call',
+        autospec=True,
+    )
+
+    repo_url = 'https://github.com/pytest-dev/cookiecutter-pytest-plugin.git'
+
+    expected_repo_dir = os.path.normpath(
+        os.path.join(clone_dir, 'cookiecutter-pytest-plugin')
+    )
+
+    branch = 'foobar'
+
+    repo_dir = vcs.clone(
+        repo_url,
+        checkout=branch,
+        clone_to_dir=clone_dir,
+        no_input=True
+    )
+
+    assert repo_dir == expected_repo_dir
+
+    mock_subprocess.assert_any_call(
+        ['git', 'clone', repo_url], cwd=clone_dir
+    )
+    mock_subprocess.assert_any_call(
+        ['git', 'checkout', branch], cwd=expected_repo_dir
+    )
