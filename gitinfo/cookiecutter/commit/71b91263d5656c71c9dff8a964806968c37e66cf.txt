commit 71b91263d5656c71c9dff8a964806968c37e66cf
Author: Pablo Panero <ppanero27@gmail.com>
Date:   Tue Mar 31 11:26:09 2020 +0200

    Add slugify template filter (#1336)

diff --git a/cookiecutter/environment.py b/cookiecutter/environment.py
index 5660c26..cc36a86 100644
--- a/cookiecutter/environment.py
+++ b/cookiecutter/environment.py
@@ -28,6 +28,7 @@ class ExtensionLoaderMixin(object):
         default_extensions = [
             'cookiecutter.extensions.JsonifyExtension',
             'cookiecutter.extensions.RandomStringExtension',
+            'cookiecutter.extensions.SlugifyExtension',
             'jinja2_time.TimeExtension',
         ]
         extensions = default_extensions + self._read_extensions(context)
diff --git a/cookiecutter/extensions.py b/cookiecutter/extensions.py
index cf53d75..471ab60 100644
--- a/cookiecutter/extensions.py
+++ b/cookiecutter/extensions.py
@@ -11,6 +11,7 @@ except ImportError:
     from random import choice
 
 from jinja2.ext import Extension
+from slugify import slugify as pyslugify
 
 
 class JsonifyExtension(Extension):
@@ -40,3 +41,17 @@ class RandomStringExtension(Extension):
                 corpus = string.ascii_letters
             return "".join(choice(corpus) for _ in range(length))
         environment.globals.update(random_ascii_string=random_ascii_string)
+
+
+class SlugifyExtension(Extension):
+    """Jinja2 Extension to slugify string."""
+
+    def __init__(self, environment):
+        """Jinja2 Extension constructor."""
+        super(SlugifyExtension, self).__init__(environment)
+
+        def slugify(value, **kwargs):
+            """Slugifies the value."""
+            return pyslugify(value, **kwargs)
+
+        environment.filters['slugify'] = slugify
diff --git a/docs/advanced/template_extensions.rst b/docs/advanced/template_extensions.rst
index e8e993a..dce723e 100644
--- a/docs/advanced/template_extensions.rst
+++ b/docs/advanced/template_extensions.rst
@@ -82,6 +82,29 @@ Outputs:
 
     fQupUkY}W!)!
 
+Slugify extension
+~~~~~~~~~~~~~~~~~
+
+The ``cookiecutter.extensions.SlugifyExtension`` extension provides a ``slugify`` filter in templates
+that converts string into its underscored ("slugified") version:
+
+.. code-block:: jinja
+
+    {% "It's a random version" | slugify %}
+
+Would output:
+
+.. code-block:: json
+
+    it-s-a-random-version
+
+It is diferent from a mere replace of spaces since it also trates some special characters
+such as `'` in the example above. The function accepts all arguments that can be passed to
+the `slugify` function of python-slugify. For example to change the output from
+`it-s-a-random-version` to `it_s_a_random_version`, the parameter `separator='_'` would
+be passed to `slugify()`.
+
 .. _`Jinja2 extensions`: http://jinja.pocoo.org/docs/latest/extensions/
 .. _`now`: https://github.com/hackebrot/jinja2-time#now-tag
 .. _`jinja2_time.TimeExtension`: https://github.com/hackebrot/jinja2-time
+.. _`python-slugify`: https://github.com/un33k/python-slugify
\ No newline at end of file
diff --git a/setup.py b/setup.py
index d9ddb1c..a149670 100644
--- a/setup.py
+++ b/setup.py
@@ -30,6 +30,7 @@ requirements = [
     'click>=7.0',
     'poyo>=0.1.0',
     'jinja2-time>=0.1.0',
+    'python-slugify>=4.0.0',
     'requests>=2.18.0',
     'six>=1.10',
 ]
diff --git a/tests/test-extensions/default/cookiecutter.json b/tests/test-extensions/default/cookiecutter.json
index bab29ab..d03f59a 100644
--- a/tests/test-extensions/default/cookiecutter.json
+++ b/tests/test-extensions/default/cookiecutter.json
@@ -1,4 +1,4 @@
 {
-    "project_slug": "Foobar",
+    "project_slug": "{{ 'It\\'s slugified Foobar' | slugify() }}",
     "year": "{% now 'utc', '%Y' %}"
 }
diff --git a/tests/test_default_extensions.py b/tests/test_default_extensions.py
index 1b0f793..2830f78 100644
--- a/tests/test_default_extensions.py
+++ b/tests/test_default_extensions.py
@@ -46,3 +46,13 @@ def test_jinja2_time_extension(tmpdir):
         'First release on PyPI.\n'
     ]
     assert expected_lines == changelog_lines
+
+
+def test_jinja2_slugify_extension(tmpdir):
+    project_dir = cookiecutter(
+        'tests/test-extensions/default/',
+        no_input=True,
+        output_dir=str(tmpdir)
+    )
+
+    assert os.path.basename(project_dir) == "it-s-slugified-foobar"
