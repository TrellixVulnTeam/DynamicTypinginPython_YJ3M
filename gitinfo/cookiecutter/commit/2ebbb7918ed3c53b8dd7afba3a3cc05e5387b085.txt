commit 2ebbb7918ed3c53b8dd7afba3a3cc05e5387b085
Author: raphigaziano <r.gaziano@gmail.com>
Date:   Sat Aug 24 12:55:46 2013 +0200

    hooks discovery

diff --git a/cookiecutter/hooks.py b/cookiecutter/hooks.py
new file mode 100644
index 0000000..5cc647d
--- /dev/null
+++ b/cookiecutter/hooks.py
@@ -0,0 +1,34 @@
+#!/usr/bin/env python
+# -*- coding: utf-8 -*-
+
+"""
+cookiecutter.hooks
+------------------
+
+Functions for discovering and executing various cookiecutter hooks.
+"""
+
+import os
+
+_HOOKS = {
+    'pre_gen_project': None,
+    'post_gen_project': None,
+    # TODO: other hooks should be listed here
+}
+
+def find_hooks(template_root):
+    ''' '''
+    hooks_dir = os.path.join(template_root, 'hooks')
+    r = {}
+    if not os.path.isdir(hooks_dir):
+        return r
+    for f in os.listdir(hooks_dir):
+        basename = os.path.splitext(os.path.basename(f))[0]
+        if basename in _HOOKS:
+            r[basename] = os.path.abspath(os.path.join(hooks_dir, f))
+    return r
+
+
+def run_hook(hook):
+    pass
+
diff --git a/tests/fake-repo-hooks/dummy/README.rst b/tests/fake-repo-hooks/dummy/README.rst
new file mode 100644
index 0000000..a71dc41
--- /dev/null
+++ b/tests/fake-repo-hooks/dummy/README.rst
@@ -0,0 +1,4 @@
+foo
+===
+
+bar
diff --git a/tests/fake-repo-hooks/hooks/post_gen_project.sh b/tests/fake-repo-hooks/hooks/post_gen_project.sh
new file mode 100644
index 0000000..7683837
--- /dev/null
+++ b/tests/fake-repo-hooks/hooks/post_gen_project.sh
@@ -0,0 +1,3 @@
+#!/usr/bin/bash
+
+echo 'post generation hook';
diff --git a/tests/fake-repo-hooks/hooks/pre_gen_project.py b/tests/fake-repo-hooks/hooks/pre_gen_project.py
new file mode 100644
index 0000000..d0844ce
--- /dev/null
+++ b/tests/fake-repo-hooks/hooks/pre_gen_project.py
@@ -0,0 +1,4 @@
+#!/usr/bin/env python
+# -*- coding: utf-8 -*-
+
+print 'pre generation hook'
diff --git a/tests/test_hooks.py b/tests/test_hooks.py
new file mode 100644
index 0000000..23f854e
--- /dev/null
+++ b/tests/test_hooks.py
@@ -0,0 +1,33 @@
+#!/usr/bin/env python
+# -*- coding: utf-8 -*-
+
+"""
+test_hooks
+------------
+
+Tests for `cookiecutter.hooks` module.
+"""
+
+import os
+import shutil
+import unittest
+
+from cookiecutter import hooks
+
+
+class TestFindHooks(unittest.TestCase):
+
+    repo_path = 'tests/fake-repo-hooks'
+
+    def test_find_hooks(self):
+        '''Getting the list of all defined hooks'''
+        self.assertEqual({
+            'pre_gen_project': os.path.abspath(
+                os.path.join(self.repo_path, 'hooks', 'pre_gen_project.py')),
+            'post_gen_project': os.path.abspath(
+                os.path.join(self.repo_path, 'hooks', 'post_gen_project.sh')),
+        }, hooks.find_hooks(self.repo_path))
+
+    def test_no_hooks(self):
+        '''find_hooks should return an empty dict if no hooks folder could be found. '''
+        self.assertEqual({}, hooks.find_hooks('tests/fake-repo'))
