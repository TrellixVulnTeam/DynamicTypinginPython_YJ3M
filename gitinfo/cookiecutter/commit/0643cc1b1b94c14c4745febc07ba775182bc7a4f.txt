commit 0643cc1b1b94c14c4745febc07ba775182bc7a4f
Author: Michael Joseph <michaeljoseph+github@gmail.com>
Date:   Sun Feb 22 16:32:35 2015 +0200

    Adjust `ccext.py` for click options

diff --git a/docs/ccext.py b/docs/ccext.py
index 9359cea..604a2cf 100644
--- a/docs/ccext.py
+++ b/docs/ccext.py
@@ -1,30 +1,29 @@
 # -*- coding: utf-8 -*-
-import sys
 from cookiecutter import cli
+
+import click
+
 from docutils import nodes
 from docutils.parsers import rst
 from docutils.statemachine import ViewList
 
 
 class CcCommandLineOptions(rst.Directive):
-    def _format_action(self, action):
-        bookmark_line = ".. _`%s`:" % action.dest
-        line = ".. option:: "
-        line += ", ".join(action.option_strings)
-        opt_help = action.help.replace('%default', str(action.default))
-
-        # fix paths with sys.prefix
-        opt_help = opt_help.replace(sys.prefix, "<sys.prefix>")
-
-        return [bookmark_line, "", line, "", " %s" % opt_help, ""]
+    def _format_option(self, option):
+        return [
+            ".. _`%s`:" % option.name,
+            "",
+            ".. option:: " + ", ".join(option.opts),
+            "",
+            option.help,
+            ""
+        ]
 
     def process_actions(self):
-        parser = cli._get_parser()
-        for action in parser._actions:
-            if not action.option_strings:
-                continue
-            for line in self._format_action(action):
-                self.view_list.append(line, "")
+        for option in cli.main.params:
+            if isinstance(option, click.core.Option):
+                for line in self._format_option(option):
+                    self.view_list.append(line, "")
 
     def run(self):
         node = nodes.paragraph()
diff --git a/docs/conf.py b/docs/conf.py
index 17f999b..2fc99a3 100644
--- a/docs/conf.py
+++ b/docs/conf.py
@@ -63,7 +63,7 @@ import cookiecutter
 # coming with Sphinx (named 'sphinx.ext.*') or your custom ones.
 extensions = ['sphinx.ext.autodoc', 'sphinx.ext.doctest', 'sphinx.ext.intersphinx',
               'sphinx.ext.todo', 'sphinx.ext.coverage', 'sphinx.ext.pngmath',
-              'sphinx.ext.ifconfig', 'sphinx.ext.viewcode', ]#'docs.ccext']
+              'sphinx.ext.ifconfig', 'sphinx.ext.viewcode', 'docs.ccext']
 
 # Add any paths that contain templates here, relative to this directory.
 templates_path = ['_templates']
