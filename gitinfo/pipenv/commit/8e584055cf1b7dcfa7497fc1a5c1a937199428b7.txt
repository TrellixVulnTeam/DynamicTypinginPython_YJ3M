commit 8e584055cf1b7dcfa7497fc1a5c1a937199428b7
Author: John Vandenberg <jayvdb@gmail.com>
Date:   Wed Apr 3 10:11:44 2019 +0700

    conftest.py: Ignore KeyboardInterrupt
    
    During check_internet() and check_github_ssh(), a KeyboardInterrupt
    should be interpreted as user desire to escape the check, not escape
    the entire test run.  This is especially true during check_github_ssh
    which may require a passphrase from the user, which they might feel
    uncomfortable giving during a test suite.
    
    After these checks are bypassed, there is user feedback indicating the
    tests are running, and so they can trigger KeyboardInterrupt again if
    they wish to escape the entire test run.

diff --git a/tests/integration/conftest.py b/tests/integration/conftest.py
index 766291e8..d6d0aded 100644
--- a/tests/integration/conftest.py
+++ b/tests/integration/conftest.py
@@ -38,6 +38,10 @@ def check_internet():
     for url in ("http://httpbin.org/ip", "http://clients3.google.com/generate_204"):
         try:
             try_internet(url)
+        except KeyboardInterrupt:
+            warnings.warn(
+                "Skipped connecting to internet: {0}".format(url), RuntimeWarning
+            )
         except Exception:
             warnings.warn(
                 "Failed connecting to internet: {0}".format(url), RuntimeWarning
@@ -58,6 +62,10 @@ def check_github_ssh():
         # return_code=255 and say 'Permission denied (publickey).'
         c = delegator.run('ssh -T git@github.com')
         res = True if c.return_code == 1 else False
+    except KeyboardInterrupt:
+        warnings.warn(
+            "KeyboardInterrupt while checking GitHub ssh access", RuntimeWarning
+        )
     except Exception:
         pass
     global HAS_WARNED_GITHUB
