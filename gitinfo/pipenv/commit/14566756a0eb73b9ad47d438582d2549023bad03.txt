commit 14566756a0eb73b9ad47d438582d2549023bad03
Author: Dan Ryan <dan.ryan@canonical.com>
Date:   Wed Mar 25 17:25:18 2020 -0400

    Fix outline table conversion for new tomlkit release
    
    - Fix conversion of outline tables with new tomlkit release
    - Fix pip and pip-shims patches
    
    Signed-off-by: Dan Ryan <dan.ryan@canonical.com>

diff --git a/pipenv/utils.py b/pipenv/utils.py
index 55cb7a96..680b7e21 100644
--- a/pipenv/utils.py
+++ b/pipenv/utils.py
@@ -89,7 +89,11 @@ def cleanup_toml(tml):
 def convert_toml_outline_tables(parsed):
     """Converts all outline tables to inline tables."""
     def convert_tomlkit_table(section):
-        for key, value in section._body:
+        if isinstance(section, tomlkit.items.Table):
+            body = section.value._body
+        else:
+            body = section._body
+        for key, value in body:
             if not key:
                 continue
             if hasattr(value, "keys") and not isinstance(value, tomlkit.items.InlineTable):
diff --git a/tasks/vendoring/patches/patched/pip19.patch b/tasks/vendoring/patches/patched/pip19.patch
index 7d57cfd5..fa0a7dea 100644
--- a/tasks/vendoring/patches/patched/pip19.patch
+++ b/tasks/vendoring/patches/patched/pip19.patch
@@ -504,10 +504,10 @@ index 77d40be6..8a32cf2d 100644
 -        return path
 +        return path
 \ No newline at end of file
-diff --git a/pipenv/patched/notpip/_internal/commands/__init__.py b/pipenv/patched/notpip/_internal/commands/__init__.py
+diff --git a/pipenv/patched/pip/_internal/commands/__init__.py b/pipenv/patched/pip/_internal/commands/__init__.py
 index abcafa55..ca155a94 100644
---- a/pipenv/patched/notpip/_internal/commands/__init__.py
-+++ b/pipenv/patched/notpip/_internal/commands/__init__.py
+--- a/pipenv/patched/pip/_internal/commands/__init__.py
++++ b/pipenv/patched/pip/_internal/commands/__init__.py
 @@ -21,7 +21,7 @@ CommandInfo = namedtuple('CommandInfo', 'module_path, class_name, summary')
  
  # The ordering matters for help display.
diff --git a/tasks/vendoring/patches/vendor/pip_shims_module_names.patch b/tasks/vendoring/patches/vendor/pip_shims_module_names.patch
index f783c96e..7c49f82a 100644
--- a/tasks/vendoring/patches/vendor/pip_shims_module_names.patch
+++ b/tasks/vendoring/patches/vendor/pip_shims_module_names.patch
@@ -18,10 +18,10 @@ index 2af4166e..598b9ad8 100644
  module.shims = shims
  module.__dict__.update(
      {
-diff --git a/pipenv/vendor/pip_shims/compat.py b/../pip-shims/src/pip_shims/compat.py
+diff --git a/pipenv/vendor/pip_shims/compat.py b/pipenv/vendor/pip_shims/compat.py
 index ed99d970..63061a6a 100644
 --- a/pipenv/vendor/pip_shims/compat.py
-+++ b/../pip-shims/src/pip_shims/compat.py
++++ b/pipenv/vendor/pip_shims/compat.py
 @@ -25,14 +25,14 @@ from .utils import (
  )
  
