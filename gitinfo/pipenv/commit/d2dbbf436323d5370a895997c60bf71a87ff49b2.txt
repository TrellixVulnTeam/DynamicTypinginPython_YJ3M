commit d2dbbf436323d5370a895997c60bf71a87ff49b2
Author: Dan Ryan <dan@danryan.co>
Date:   Tue Jun 26 18:46:53 2018 -0400

    Update vendoring scripts
    
    - Update appveyor script to respect PR updates
    - Add vendoring script to CI
    - Closes #2428

diff --git a/appveyor.yml b/appveyor.yml
index f07cea23..ed18930e 100644
--- a/appveyor.yml
+++ b/appveyor.yml
@@ -1,6 +1,5 @@
 build: off
 version: 1.0.{build}
-
 skip_branch_with_pr: true
 
 init:
@@ -13,23 +12,15 @@ init:
     git config --global core.autocrlf input
 
     if ($env:APPVEYOR_PULL_REQUEST_NUMBER -and $env:APPVEYOR_BUILD_NUMBER -ne ((Invoke-RestMethod `
-
             https://ci.appveyor.com/api/projects/$env:APPVEYOR_ACCOUNT_NAME/$env:APPVEYOR_PROJECT_SLUG/history?recordsNumber=50).builds | `
-    
             Where-Object pullRequestId -eq $env:APPVEYOR_PULL_REQUEST_NUMBER)[0].buildNumber) { `
-    
               Write-Host "There are newer queued builds for this pull request, skipping build."
-    
               Exit-AppveyorBuild
-    
             }
 
     If (($env:SKIP_NOTAG -eq "true") -and ($env:APPVEYOR_REPO_TAG -ne "true")) {
-    
               Write-Host "Skipping build, not at a tag."
-    
               Exit-AppveyorBuild
-    
           }
 
 
@@ -37,6 +28,8 @@ environment:
 
   PYPI_VENDOR_DIR: '.\tests\pypi\'
   GIT_ASK_YESNO: 'false'
+  APPVEYOR_SAVE_CACHE_ON_ERROR: 'true'
+  APPVEYOR_SKIP_FINALIZE_ON_EXIT: 'true'
   SHELL: 'windows'
   PYTHON_ARCH: '64'
   PYTHONIOENCODING: 'utf-8'
diff --git a/pipenv/vendor/vendor.txt b/pipenv/vendor/vendor.txt
index e95b5178..8ecc6ba5 100644
--- a/pipenv/vendor/vendor.txt
+++ b/pipenv/vendor/vendor.txt
@@ -34,7 +34,7 @@ requirementslib==1.0.7
     pyparsing==2.2.0
     pytoml==0.1.16
     requirements-parser==0.2.0
-shellingham==1.1.0dev0
+shellingham==1.1.0
 six==1.11.0
 semver==2.8.0
 shutilwhich==1.1.0
diff --git a/run-tests.sh b/run-tests.sh
index 3f3ca7a0..9a6db97f 100755
--- a/run-tests.sh
+++ b/run-tests.sh
@@ -41,10 +41,8 @@ fi
 echo "Installing dependenciesâ€¦"
 PIPENV_PYTHON=2.7 pipenv run pip install -e . --upgrade
 PIPENV_PYTHON=3.6 pipenv run pip install -e . --upgrade
-PIPENV_PYTHON=3.7 pipenv run pip install -e . --upgrade
 PIPENV_PYTHON=2.7 pipenv install --dev
 PIPENV_PYTHON=3.6 pipenv install --dev
-PIPENV_PYTHON=3.7 pipenv install --dev
 
 echo "$ pipenv run time pytest -v -n auto tests -m \"$TEST_SUITE\""
 # PIPENV_PYTHON=2.7 pipenv run time pytest -v -n auto tests -m "$TEST_SUITE" | prefix 2.7 &
@@ -52,10 +50,9 @@ echo "$ pipenv run time pytest -v -n auto tests -m \"$TEST_SUITE\""
 # Better to run them sequentially.
 PIPENV_PYTHON=2.7 pipenv run time pytest -v -n auto tests -m "$TEST_SUITE"
 PIPENV_PYTHON=3.6 pipenv run time pytest -v -n auto tests -m "$TEST_SUITE"
-PIPENV_PYTHON=3.7 pipenv run time pytest -v -n auto tests -m "$TEST_SUITE"
 
 # test revendoring
-pip install --upgrade invoke
-inv vendoring.update
+pip3 install --upgrade invoke requests parver
+python3 -m invoke vendoring.update
 # Cleanup junk.
 rm -fr .venv
