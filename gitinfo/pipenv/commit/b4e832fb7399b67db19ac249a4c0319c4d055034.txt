commit b4e832fb7399b67db19ac249a4c0319c4d055034
Author: Tzu-ping Chung <uranusjr@gmail.com>
Date:   Mon Apr 2 15:09:09 2018 +0800

    Improve test error report

diff --git a/tests/test_pipenv.py b/tests/test_pipenv.py
index faf4ab71..c2859168 100644
--- a/tests/test_pipenv.py
+++ b/tests/test_pipenv.py
@@ -1132,15 +1132,13 @@ requests = "==2.14.0"
 
             c = p.pipenv('install {}'.format(file_name))
             assert c.return_code == 0
-            key = [k for k in p.pipfile['packages'].keys()][0]
-            dep = p.pipfile['packages'][key]
 
+            assert p.pipfile['packages']
+            dep = list(p.pipfile['packages'].values())[0]
             assert 'file' in dep or 'path' in dep
-            assert c.return_code == 0
-
-            key = [k for k in p.lockfile['default'].keys()][0]
-            dep = p.lockfile['default'][key]
 
+            assert p.lockfile['default']
+            dep = list(p.lockfile['default'].values())[0]
             assert 'file' in dep or 'path' in dep
 
     @pytest.mark.install
