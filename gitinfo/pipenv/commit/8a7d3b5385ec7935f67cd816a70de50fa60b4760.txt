commit 8a7d3b5385ec7935f67cd816a70de50fa60b4760
Author: Dan Ryan <dan.ryan@canonical.com>
Date:   Mon Apr 6 23:54:32 2020 -0400

    Update ACL scripts
    
    Signed-off-by: Dan Ryan <dan.ryan@canonical.com>

diff --git a/.azure-pipelines/steps/run-tests-windows.yml b/.azure-pipelines/steps/run-tests-windows.yml
index d0257f92..188f0661 100644
--- a/.azure-pipelines/steps/run-tests-windows.yml
+++ b/.azure-pipelines/steps/run-tests-windows.yml
@@ -10,13 +10,13 @@ steps:
     displayName: Setup RAMDisk
 
   - powershell: |
-      mkdir R:\Temp
-      $acl = Get-Acl "R:\Temp"
+      mkdir R:\virtualenvs
+      $acl = Get-Acl "R:\"
       $rule = New-Object System.Security.AccessControl.FileSystemAccessRule(
           "Everyone", "FullControl", "ContainerInherit,ObjectInherit", "None", "Allow"
       )
       $acl.AddAccessRule($rule)
-      Set-Acl "R:\Temp" $acl
+      Set-Acl "R:\" $acl
     displayName: Set RAMDisk Permissions
 
   - powershell: |
diff --git a/.azure-pipelines/steps/run-vendor-scripts.yml b/.azure-pipelines/steps/run-vendor-scripts.yml
index df0f766d..d4580672 100644
--- a/.azure-pipelines/steps/run-vendor-scripts.yml
+++ b/.azure-pipelines/steps/run-vendor-scripts.yml
@@ -9,27 +9,24 @@ steps:
     addToPath: true
   displayName: Use Python $(python.version)
 
-
 - bash: |
+    python -m pip install --upgrade --upgrade-strategy=eager pip requests certifi wheel setuptools
     PYTHON_PATH=$(python -c 'import sys; print(sys.executable)')
+    CERTIFI_CONTENT=$(python -m certifi)
     echo "##vso[task.setvariable variable=PY_EXE]$PYTHON_PATH"
+    echo "##vso[task.setvariable variable=GIT_SSL_CAINFO]$CERTIFI_CONTENT"
   displayName: Set Python Path
 
-- script: |
-    echo '##vso[task.setvariable variable=PIPENV_DEFAULT_PYTHON_VERSION]'$(python.version)
-  env:
-    PYTHON_VERSION: $(python.version)
-
 - template: install-dependencies.yml
 
 - script: |
-    python -m pip install --upgrade invoke requests parver bs4 vistir towncrier pip setuptools wheel --upgrade-strategy=eager
+    python -m pip install --upgrade invoke parver bs4 vistir towncrier --upgrade-strategy=eager
     python -m invoke vendoring.update
   displayName: Run Vendor Scripts
   env:
     PY_EXE: $(PY_EXE)
     GIT_SSL_CAINFO: $(GIT_SSL_CAINFO)
     LANG: $(LANG)
-    PIPENV_DEFAULT_PYTHON_VERSION: '${{ parameters.python_version }}'
+    PIPENV_DEFAULT_PYTHON_VERSION: $(python.version)
     PYTHONWARNINGS: ignore:DEPRECATION
     PIPENV_NOSPIN: '1'
