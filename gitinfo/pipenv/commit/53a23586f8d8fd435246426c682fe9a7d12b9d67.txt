commit 53a23586f8d8fd435246426c682fe9a7d12b9d67
Author: Dan Ryan <dan@danryan.co>
Date:   Sat May 26 16:21:00 2018 -0400

    Fix `pipenv graph` to use local pip
    
     - Fixes #2258
     - Add patch to prevent import rewrites from catching this again
     - Add useful debugging line to print errors to stderr
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/pipenv/core.py b/pipenv/core.py
index 75bc6276..8bfcd957 100644
--- a/pipenv/core.py
+++ b/pipenv/core.py
@@ -2495,6 +2495,14 @@ def do_graph(bare=False, json=False, json_tree=False, reverse=False):
                     click.echo(crayons.normal(line, bold=False))
     else:
         click.echo(c.out)
+    if c.return_code != 0:
+        click.echo(
+            '{0} {1}'.format(
+                crayons.red('ERROR: ', bold=True),
+                crayons.white('{0}'.format(c.err, bold=True)),
+            ),
+            err=True
+        )
     # Return its return code.
     sys.exit(c.return_code)
 
diff --git a/pipenv/vendor/pipdeptree.py b/pipenv/vendor/pipdeptree.py
index a62badf7..a2ea83fd 100644
--- a/pipenv/vendor/pipdeptree.py
+++ b/pipenv/vendor/pipdeptree.py
@@ -14,10 +14,10 @@ except ImportError:
     from ordereddict import OrderedDict
 
 try:
-    from pipenv.patched.notpip._internal import get_installed_distributions
-    from pipenv.patched.notpip._internal.operations.freeze import FrozenRequirement
+    from pip._internal import get_installed_distributions
+    from pip._internal.operations.freeze import FrozenRequirement
 except ImportError:
-    from pipenv.patched.notpip import get_installed_distributions, FrozenRequirement
+    from pip import get_installed_distributions, FrozenRequirement
 
 import pkg_resources
 # inline:
diff --git a/tasks/vendoring/patches/vendor/pipdeptree-local-pip.patch b/tasks/vendoring/patches/vendor/pipdeptree-local-pip.patch
new file mode 100644
index 00000000..a3210177
--- /dev/null
+++ b/tasks/vendoring/patches/vendor/pipdeptree-local-pip.patch
@@ -0,0 +1,18 @@
+diff --git a/pipenv/vendor/pipdeptree.py b/pipenv/vendor/pipdeptree.py
+index a62badf7..a2ea83fd 100644
+--- a/pipenv/vendor/pipdeptree.py
++++ b/pipenv/vendor/pipdeptree.py
+@@ -14,10 +14,10 @@ except ImportError:
+     from ordereddict import OrderedDict
+ 
+ try:
+-    from pipenv.patched.notpip._internal import get_installed_distributions
+-    from pipenv.patched.notpip._internal.operations.freeze import FrozenRequirement
++    from pip._internal import get_installed_distributions
++    from pip._internal.operations.freeze import FrozenRequirement
+ except ImportError:
+-    from pipenv.patched.notpip import get_installed_distributions, FrozenRequirement
++    from pip import get_installed_distributions, FrozenRequirement
+ 
+ import pkg_resources
+ # inline:
