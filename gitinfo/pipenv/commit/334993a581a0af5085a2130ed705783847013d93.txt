commit 334993a581a0af5085a2130ed705783847013d93
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Thu Sep 7 17:11:32 2017 -0400

    simplify upgrade logic
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/pipenv/cli.py b/pipenv/cli.py
index b113deeb..ffc3ea90 100644
--- a/pipenv/cli.py
+++ b/pipenv/cli.py
@@ -89,17 +89,11 @@ def enhance(user=False):
 
     if current < latest:
 
-        # Resolve user site, enable user mode automatically.
-        c = delegator.run('{0} -m site'.format(sys.executable))
-
-        for line in c.out.split('\n'):
-            if line.strip().startswith('ENABLE_USER_SITE'):
-                can_user = eval(line[len('ENABLE_USER_SITE: '):])
-            if line.strip().startswith('USER_SITE'):
-                user_site = eval(''.join(line[len('USER_SITE: '):].split()[:-1]))
+        import site
 
-        if can_user:
-            if user_site in sys.modules['pipenv'].__file__:
+        # Resolve user site, enable user mode automatically.
+        if site.ENABLE_USER_SITE:
+            if site.USER_SITE in sys.modules['pipenv'].__file__:
                 user = True
 
         click.echo('{0}: {1} is now available. Automatically upgrading!'.format(
@@ -108,11 +102,11 @@ def enhance(user=False):
         ), err=True)
 
         if not user:
-            sys.argv = ['pip', 'install', '--upgrade', 'pipenv']
+            args = ['install', '--upgrade', 'pipenv']
         else:
-            sys.argv = ['pip', 'install', '--user', '--upgrade', 'pipenv']
+            args = ['install', '--user', '--upgrade', 'pipenv']
 
-        sys.modules['pip'].main()
+        sys.modules['pip'].main(args)
 
         click.echo('{0} to {1}!'.format(
             crayons.green('Pipenv updated'),
