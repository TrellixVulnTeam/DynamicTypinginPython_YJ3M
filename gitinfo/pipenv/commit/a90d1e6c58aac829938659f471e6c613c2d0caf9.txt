commit a90d1e6c58aac829938659f471e6c613c2d0caf9
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Fri Sep 1 18:05:56 2017 -0400

    cleanup
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/Pipfile b/Pipfile
index 49ea72dc..31cb0e1d 100644
--- a/Pipfile
+++ b/Pipfile
@@ -10,6 +10,7 @@ Sphinx = "<=1.5.5"
 pew = ">=0.1.26"
 pep8 = "*"
 pytest = "*"
+pip-tools = "*"
 
 [requires]
 python_version = "3.6"
diff --git a/Pipfile.lock b/Pipfile.lock
index 79f0c64c..609e0fea 100644
--- a/Pipfile.lock
+++ b/Pipfile.lock
@@ -1,7 +1,7 @@
 {
     "_meta": {
         "hash": {
-            "sha256": "9e25129496d188d88c2dc1120da0f8186e937754376779d33894a6a9090f72fd"
+            "sha256": "76e3894ec377275576c53e478d0ecc005d0886027f0bb2962bc14faee96bb0e1"
         },
         "requires": {
             "python_version": "3.6"
@@ -20,12 +20,30 @@
         "chardet": {
             "version": "==3.0.4"
         },
+        "click": {
+            "version": "==6.7"
+        },
+        "first": {
+            "version": "==2.0.1"
+        },
         "idna": {
             "version": "==2.6"
         },
+        "pep8": {
+            "version": "==1.7.0"
+        },
         "pew": {
             "version": "==0.1.26"
         },
+        "pip-tools": {
+            "version": "==1.9.0"
+        },
+        "py": {
+            "version": "==1.4.34"
+        },
+        "pytest": {
+            "version": "==3.2.1"
+        },
         "pythonz-bd": {
             "version": "==1.11.4"
         },
@@ -35,8 +53,8 @@
         "resumable-urlretrieve": {
             "version": "==0.1.5"
         },
-        "setuptools": {
-            "version": "==36.3.0"
+        "six": {
+            "version": "==1.10.0"
         },
         "urllib3": {
             "version": "==1.22"
@@ -49,6 +67,18 @@
         }
     },
     "develop": {
+        "Jinja2": {
+            "version": "==2.9.6"
+        },
+        "MarkupSafe": {
+            "version": "==1.0"
+        },
+        "Pygments": {
+            "version": "==2.2.0"
+        },
+        "Sphinx": {
+            "version": "==1.5.5"
+        },
         "alabaster": {
             "version": "==0.7.10"
         },
@@ -76,12 +106,6 @@
         "imagesize": {
             "version": "==0.7.1"
         },
-        "jinja2": {
-            "version": "==2.9.6"
-        },
-        "markupsafe": {
-            "version": "==1.0"
-        },
         "mccabe": {
             "version": "==0.6.1"
         },
@@ -106,9 +130,6 @@
         "pyflakes": {
             "version": "==1.5.0"
         },
-        "pygments": {
-            "version": "==2.2.0"
-        },
         "pytest": {
             "version": "==3.2.1"
         },
@@ -118,18 +139,13 @@
         "requests": {
             "version": "==2.18.4"
         },
-        "setuptools": {
-            "version": "==36.3.0"
-        },
         "six": {
             "version": "==1.10.0"
         },
         "snowballstemmer": {
             "version": "==1.2.1"
         },
-        "sphinx": {
-            "version": "==1.5.5"
-        },
+        "sphinx": "<=1.5.5",
         "toml": {
             "version": "==0.9.2"
         },
diff --git a/pipenv/cli.py b/pipenv/cli.py
index 87151c6a..ef929f8d 100644
--- a/pipenv/cli.py
+++ b/pipenv/cli.py
@@ -445,22 +445,24 @@ def do_lock(no_hashes=True):
     """Executes the freeze functionality."""
 
     if no_hashes:
+        # Alert the user of progress.
         click.echo(crayons.yellow('Locking {0} dependencies...'.format(crayons.red('[dev-packages]'))), err=True)
 
+        # Create the lockfile.
         lockfile = project._lockfile
 
+        # Resolve dev-package dependencies.
         deps = convert_deps_to_pip(project.parsed_pipfile.get('dev-packages', {}), r=False)
         results = resolve_deps(deps)
 
         # Add develop dependencies to lockfile.
         for dep in results:
             lockfile['develop'].update({dep['name']: {'version': '=={0}'.format(dep['version'])}})
-            if not no_hashes:
-                lockfile['develop'][dep['name']]['hash'] = dep['hash']
-
 
+        # Alert the user of progress.
         click.echo(crayons.yellow('Locking {0} dependencies...'.format(crayons.red('[packages]'))), err=True)
 
+        # Resolve package dependencies.
         deps = convert_deps_to_pip(project.parsed_pipfile.get('packages', {}), r=False)
         results = resolve_deps(deps)
 
@@ -470,6 +472,12 @@ def do_lock(no_hashes=True):
             if not no_hashes:
                 lockfile['default'][dep['name']]['hash'] = dep['hash']
 
+        # Write out lockfile.
+        with open(project.lockfile_location, 'w') as f:
+            json.dump(lockfile, f, indent=4, separators=(',', ': '), sort_keys=True)
+            # Write newline at end of document. GH Issue #319.
+            f.write('\n')
+
         click.echo('{0} Pipfile.lock{1}'.format(crayons.yellow('Updated'), crayons.yellow('!')), err=True)
 
     else:
diff --git a/requirements.txt b/requirements.txt
deleted file mode 100644
index a2994768..00000000
--- a/requirements.txt
+++ /dev/null
@@ -1,36 +0,0 @@
--e .
-alabaster==0.7.10
-appdirs==1.4.3
-Babel==2.4.0
-backports.shutil-get-terminal-size==1.0.0
-certifi==2017.4.17
-chardet==3.0.3
-delegator.py==0.0.12
-docutils==0.13.1
-funcsigs==1.0.2
-idna==2.5
-imagesize==0.7.1
-Jinja2==2.9.6
-MarkupSafe==1.0
-mock==2.0.0
-packaging==16.8
-pathlib==1.0.1
-pbr==3.0.1
-pew==0.1.26
-pexpect==4.2.1
-ptyprocess==0.5.1
-py==1.4.33
-Pygments==2.2.0
-pyparsing==2.2.0
-pytest==3.0.7
-pythonz-bd==1.11.4
-pytz==2017.2
-requests==2.14.2
-shutilwhich==1.1.0
-six==1.10.0
-snowballstemmer==1.2.1
-Sphinx==1.5.5
-toml==0.9.2
-urllib3==1.21.1
-virtualenv==15.1.0
-virtualenv-clone==0.2.6
