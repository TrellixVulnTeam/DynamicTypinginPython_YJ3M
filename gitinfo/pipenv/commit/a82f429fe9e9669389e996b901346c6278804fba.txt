commit a82f429fe9e9669389e996b901346c6278804fba
Author: Dan Ryan <dan@danryan.co>
Date:   Wed Oct 10 17:21:25 2018 -0400

    Fix pipfile entry formation
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/pipenv/utils.py b/pipenv/utils.py
index 88622b68..4c65f363 100644
--- a/pipenv/utils.py
+++ b/pipenv/utils.py
@@ -489,9 +489,14 @@ def resolve_deps(
             #     if verbose:
             #         print('Error generating hash for {}'.format(name))
             req.hashes = sorted(set(collected_hashes))
-            name, entry = req.pipfile_entry
+            name, _entry = req.pipfile_entry
+            entry = {}
+            if isinstance(_entry, six.string_types):
+                entry["version"] = _entry
+            else:
+                entry["version"] = version
+                entry.update(_entry)
             entry["name"] = name
-            entry["version"] = version
             # if index:
             #     d.update({"index": index})
             if markers_lookup.get(result.name):
