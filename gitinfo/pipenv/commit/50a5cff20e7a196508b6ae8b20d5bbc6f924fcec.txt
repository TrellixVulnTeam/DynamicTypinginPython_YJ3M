commit 50a5cff20e7a196508b6ae8b20d5bbc6f924fcec
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Sun Mar 4 16:41:29 2018 -0500

    refactor
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/pipenv/utils.py b/pipenv/utils.py
index 4e6ce1ca..5d7cb855 100644
--- a/pipenv/utils.py
+++ b/pipenv/utils.py
@@ -1124,7 +1124,15 @@ class TemporaryDirectory(object):
     """
 
     def __init__(self, suffix=None, prefix=None, dir=None):
+        if 'RAM_DISK' in os.environ:
+            import uuid
+            name = uuid.uuid4().hex
+            dir_name = os.path.sep.join([os.environ['RAM_DISK'], name])
+            os.mkdir(dir_name)
+            self.name = dir_name
+
         self.name = tempfile.mkdtemp(suffix, prefix, dir)
+
         self._finalizer = finalize(
             self, self._cleanup, self.name,
             warn_message="Implicitly cleaning up {!r}".format(self))
diff --git a/tests/test_pipenv.py b/tests/test_pipenv.py
index c4b22693..914d8555 100644
--- a/tests/test_pipenv.py
+++ b/tests/test_pipenv.py
@@ -40,23 +40,13 @@ def pip_src_dir(request):
     return request
 
 
-def ram_disk_or_tempdir():
-    import uuid
-    if 'RAM_DISK' in os.environ:
-        name = uuid.uuid4().hex
-        dir_name = os.path.sep.join([os.environ['RAM_DISK'], name])
-        os.mkdir(dir_name)
-        return dir_name
-    else:
-        return TemporaryDirectory(suffix='project', prefix='pipenv')
-
 class PipenvInstance():
     """An instance of a Pipenv Project..."""
     def __init__(self, pypi=None, pipfile=True, chdir=False):
         self.pypi = pypi
         self.original_umask = os.umask(0o007)
         self.original_dir = os.path.abspath(os.curdir)
-        self._path = ram_disk_or_tempdir()
+        self._path = TemporaryDirectory(suffix='project', prefix='pipenv')
         self.path = self._path.name
         # set file creation perms
         self.pipfile_path = None
