commit eb839e52b6624de08ab14e25fcc0a078ed835282
Author: Andrew Haigh <nelfin@gmail.com>
Date:   Mon May 21 17:05:00 2018 +1000

    Add test of behaviour in issue #2229
    
    requirements.txt files (and by extension pipfreeze) can contain comment
    lines, but the stdout of pip freeze is used in a number of places with
    the assumption that every line contains a dependency declaration. This
    change adds an integration test that could trigger one of these cases
    that was the cause of the behaviour seen in issue #2229.

diff --git a/tests/integration/test_cli.py b/tests/integration/test_cli.py
index aed10ade..34b78dfb 100644
--- a/tests/integration/test_cli.py
+++ b/tests/integration/test_cli.py
@@ -85,6 +85,26 @@ def test_pipenv_check(PipenvInstance, pypi):
         assert 'requests' in p.pipenv('check').out
 
 
+@pytest.mark.cli
+def test_pipenv_clean_pip_no_warnings(PipenvInstance):
+    with PipenvInstance(chdir=True) as p:
+        with open('setup.py', 'w') as f:
+            f.write('from setuptools import setup; setup(name="empty")')
+        p.pipenv('run pip install -e .')
+        assert p.pipenv('clean').out
+
+
+@pytest.mark.cli
+def test_pipenv_clean_pip_warnings(PipenvInstance):
+    with PipenvInstance(chdir=True) as p:
+        with open('setup.py', 'w') as f:
+            f.write('from setuptools import setup; setup(name="empty")')
+        # create a fake git repo to trigger a pip freeze warning
+        os.mkdir('.git')
+        p.pipenv('run pip install -e .')
+        assert p.pipenv('clean').out
+
+
 @pytest.mark.cli
 def test_venv_envs(PipenvInstance):
     with PipenvInstance() as p:
