commit c8c251b1438b59d34623531ec4502f7040bac637
Author: Erin O'Connell <erinocon5@gmail.com>
Date:   Sun Jun 25 01:54:58 2017 -0600

    added PIPENV_MAX_DEPTH for test to work without a pipfile

diff --git a/tests/test_pipenv.py b/tests/test_pipenv.py
index b689040a..221103a2 100644
--- a/tests/test_pipenv.py
+++ b/tests/test_pipenv.py
@@ -67,40 +67,43 @@ class TestPipenv():
         delegator.run('rm -fr test_project')
 
     def test_requirements_to_pipfile(self):
-        delegator.run('mkdir test_requirements_to_pip')
-        os.chdir('test_requirements_to_pip')
+            delegator.run('mkdir test_requirements_to_pip')
+            os.chdir('test_requirements_to_pip')
 
-        os.environ['PIPENV_VENV_IN_PROJECT'] = '1'
+            os.environ['PIPENV_VENV_IN_PROJECT'] = '1'
+            os.environ['PIPENV_MAX_DEPTH'] = '1'
 
-        with open('requirements.txt', 'w') as f:
-            f.write('maya==0.3.2\n'
-                    'requests[socks]==2.18.1\n'
-                    'git+https://github.com/kennethreitz/records.git@v0.5.0#egg=records\n'
-                    '-e git+https://github.com/kennethreitz/tablib.git@v0.11.5#egg=tablib\n')
+            with open('requirements.txt', 'w') as f:
+                f.write('maya==0.3.2\n'
+                        'requests[socks]==2.18.1\n'
+                        'git+https://github.com/kennethreitz/records.git@v0.5.0#egg=records\n'
+                        '-e git+https://github.com/kennethreitz/tablib.git@v0.11.5#egg=tablib\n')
 
-        assert delegator.run('pipenv --python python').return_code == 0
+            assert delegator.run('pipenv --python python').return_code == 0
+            assert delegator.run('pipenv lock').return_code == 0
 
-        pipfile_output = delegator.run('cat Pipfile').out
-        lockfile_output = delegator.run('cat Pipfile.lock').out
+            pipfile_output = delegator.run('cat Pipfile').out
+            lockfile_output = delegator.run('cat Pipfile.lock').out
 
-        # Ensure packages dependencies work.
-        assert 'maya' in pipfile_output
-        assert 'maya' in lockfile_output
+            # Ensure packages dependencies work.
+            assert 'maya' in pipfile_output
+            assert 'maya' in lockfile_output
 
-        # Ensure extras work
-        assert 'extras = [ "socks",]' in pipfile_output
-        assert 'pysocks' in lockfile_output
+            # Ensure extras work
+            assert 'extras = [ "socks",]' in pipfile_output
+            assert 'pysocks' in lockfile_output
 
-        # Ensure vcs dependencies work.
-        assert 'packages.records' in pipfile_output
-        assert '"git": "https://github.com/kennethreitz/records.git"' in lockfile_output
+            # Ensure vcs dependencies work.
+            assert 'packages.records' in pipfile_output
+            assert '"git": "https://github.com/kennethreitz/records.git"' in lockfile_output
 
-        #Ensure editable packages work
-        assert 'ref = "v0.11.5"' in pipfile_output
-        assert '"editable": true' in lockfile_output
+            #Ensure editable packages work
+            assert 'ref = "v0.11.5"' in pipfile_output
+            assert '"editable": true' in lockfile_output
 
-        os.chdir('..')
-        delegator.run('rm -fr test_requirements_to_pip')
+            os.chdir('..')
+            delegator.run('rm -fr test_requirements_to_pip')
+            del os.environ['PIPENV_MAX_DEPTH']
 
     def test_timeout_long(self):
         delegator.run('mkdir test_timeout_long')
