commit 16708a4da5b95a1a0a6e94a2851c30f136904b80
Author: Dan Ryan <dan@danryan.co>
Date:   Sun Nov 19 13:31:47 2017 -0500

    Pass 'allow_global' to resolve_deps
    
    - Fixes #1002

diff --git a/pipenv/cli.py b/pipenv/cli.py
index 16678415..401f42f7 100644
--- a/pipenv/cli.py
+++ b/pipenv/cli.py
@@ -1038,7 +1038,8 @@ def do_lock(verbose=False, system=False, clear=False, pre=False):
         which=which,
         which_pip=which_pip,
         project=project,
-        pre=pre
+        pre=pre,
+        allow_global=system
     )
 
     # Add develop dependencies to lockfile.
diff --git a/pipenv/utils.py b/pipenv/utils.py
index 90a774e9..711cff5e 100644
--- a/pipenv/utils.py
+++ b/pipenv/utils.py
@@ -526,7 +526,7 @@ def actually_resolve_reps(deps, index_lookup, markers_lookup, project, sources,
     return resolved_tree, resolver
 
 
-def resolve_deps(deps, which, which_pip, project, sources=None, verbose=False, python=False, clear=False, pre=False):
+def resolve_deps(deps, which, which_pip, project, sources=None, verbose=False, python=False, clear=False, pre=False, allow_global=False):
     """Given a list of dependencies, return a resolved list of dependencies,
     using pip-tools -- and their hashes, using the warehouse API / pip.
     """
@@ -534,7 +534,7 @@ def resolve_deps(deps, which, which_pip, project, sources=None, verbose=False, p
     index_lookup = {}
     markers_lookup = {}
 
-    python_path = which('python')
+    python_path = which('python', allow_global=allow_global)
     backup_python_path = shellquote(sys.executable)
 
     results = []
