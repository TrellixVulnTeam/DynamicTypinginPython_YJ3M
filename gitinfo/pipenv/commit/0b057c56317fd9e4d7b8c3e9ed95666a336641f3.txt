commit 0b057c56317fd9e4d7b8c3e9ed95666a336641f3
Author: Dan Ryan <dan@danryan.co>
Date:   Sat Apr 7 23:09:50 2018 -0400

    Alter tests for python 3 markers
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/tests/test_pipenv.py b/tests/test_pipenv.py
index 1f2f4d9c..4b95807e 100644
--- a/tests/test_pipenv.py
+++ b/tests/test_pipenv.py
@@ -672,20 +672,33 @@ funcsigs = {version = "*", os_name = "== 'splashwear'"}
         override dependencies with environment markers. In this example,
         APScheduler requires funcsigs only on Python 2, but since funcsigs is
         also specified as an unconditional dep, its markers should be empty.
+        
+        When using a python 3 environment use vcrpy 1.11 which depends on 
+        yarl which has markers "python version in '3.4, 3.5, 3.6'"
         """
+        if sys.version_info >= (3, 0):
+            parent = 'vcrpy'
+            parent_version = '==1.11.0'
+            child = 'yarl'
+            child_version = '*'
+        else:
+            parent = 'apscheduler'
+            parent_version = '*'
+            child = 'funcsigs'
+            child_version = '*'
         with PipenvInstance(pypi=pypi) as p:
             with open(p.pipfile_path, 'w') as f:
                 contents = """
 [packages]
-apscheduler = "*"
-funcsigs = "*"
-                """.strip()
+{0} = "{1}"
+{2} = "{3}"
+                """.format(parent, parent_version, child, child_version).strip()
                 f.write(contents)
 
             c = p.pipenv('install')
             assert c.return_code == 0
 
-            assert p.lockfile['default']['funcsigs'].get('markers', '') == ''
+            assert p.lockfile['default'][child].get('markers', '') == ''
 
     @pytest.mark.install
     @pytest.mark.vcs
