commit f9ce0227942848c1961322c4d32ac4eecc0de220
Author: Dan Ryan <dan@danryan.co>
Date:   Fri Mar 30 18:25:42 2018 -0400

    Tweeak pypi mock
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/tests/test_pipenv.py b/tests/test_pipenv.py
index 9c337667..ca8781fc 100644
--- a/tests/test_pipenv.py
+++ b/tests/test_pipenv.py
@@ -475,8 +475,8 @@ setup(
     @pytest.mark.vcs
     @pytest.mark.install
     @needs_internet
-    def test_basic_vcs_install(self, pip_src_dir):
-        with PipenvInstance() as p:
+    def test_basic_vcs_install(self, pip_src_dir, pypi):
+        with PipenvInstance(pypi=pypi) as p:
             c = p.pipenv('install git+https://github.com/requests/requests.git#egg=requests')
             assert c.return_code == 0
             # edge case where normal package starts with VCS name shouldn't be flagged as vcs
@@ -491,8 +491,8 @@ setup(
     @pytest.mark.vcs
     @pytest.mark.install
     @needs_internet
-    def test_editable_vcs_install(self, pip_src_dir):
-        with PipenvInstance() as p:
+    def test_editable_vcs_install(self, pip_src_dir, pypi):
+        with PipenvInstance(pypi=pypi) as p:
             c = p.pipenv('install -e git+https://github.com/requests/requests.git#egg=requests', verbose=False)
             assert c.return_code == 0
             assert 'requests' in p.pipfile['packages']
@@ -506,9 +506,8 @@ setup(
 
     @pytest.mark.install
     @pytest.mark.pin
-    @needs_internet
-    def test_windows_pinned_pipfile(self):
-        with PipenvInstance() as p:
+    def test_windows_pinned_pipfile(self, pypi):
+        with PipenvInstance(pypi=pypi) as p:
             with open(p.pipfile_path, 'w') as f:
                 contents = """
 [packages]
