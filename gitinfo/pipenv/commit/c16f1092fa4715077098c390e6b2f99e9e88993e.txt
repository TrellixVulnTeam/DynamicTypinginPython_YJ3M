commit c16f1092fa4715077098c390e6b2f99e9e88993e
Author: Fridolin Pokorny <fridolin@redhat.com>
Date:   Mon Dec 16 10:58:53 2019 +0100

    Fix setting os.environ of Python 3.7+
    
    Fixes: #4059

diff --git a/pipenv/utils.py b/pipenv/utils.py
index f263ee9f..23d118f9 100644
--- a/pipenv/utils.py
+++ b/pipenv/utils.py
@@ -1286,7 +1286,9 @@ def venv_resolve_deps(
         os.environ["PIPENV_VERBOSITY"] = str(environments.PIPENV_VERBOSITY)
         os.environ["PIPENV_REQ_DIR"] = fs_str(req_dir)
         os.environ["PIP_NO_INPUT"] = fs_str("1")
-        os.environ["PIPENV_SITE_DIR"] = get_pipenv_sitedir()
+        pipenv_site_dir = get_pipenv_sitedir()
+        if pipenv_site_dir is not None:
+            os.environ["PIPENV_SITE_DIR"] = pipenv_site_dir
         if keep_outdated:
             os.environ["PIPENV_KEEP_OUTDATED"] = fs_str("1")
         with create_spinner(text=decode_for_output("Locking...")) as sp:
