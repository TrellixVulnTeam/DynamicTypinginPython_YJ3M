commit cbbd94217d796a31658bc1f09b0eefd8373f0a35
Author: Dan Ryan <dan@danryan.co>
Date:   Wed Jun 27 15:05:12 2018 -0400

    Update resolver to use venv python.
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/pipenv/resolver.py b/pipenv/resolver.py
index 337ef22b..91259bd2 100644
--- a/pipenv/resolver.py
+++ b/pipenv/resolver.py
@@ -35,7 +35,8 @@ def main():
     sys.argv = new_sys_argv
 
     from pipenv.utils import create_mirror_source, resolve_deps, replace_pypi_sources
-
+    os.environ['PIP_PYTHON_VERSION'] = '.'.join([str(s) for s in sys.version_info[:3]])
+    os.environ['PIP_PYTHON_PATH'] = sys.executable
     if is_verbose:
         logging.getLogger('notpip').setLevel(logging.INFO)
     if is_debug:
diff --git a/tests/integration/test_lock.py b/tests/integration/test_lock.py
index 1924b1d2..6e637ed7 100644
--- a/tests/integration/test_lock.py
+++ b/tests/integration/test_lock.py
@@ -349,14 +349,14 @@ requests = {git = "https://github.com/requests/requests.git", ref = "master", ed
 
 
 @pytest.mark.lock
-def test_lock_respecting_python_version(PipenvInstance):
-    with PipenvInstance() as p:
+def test_lock_respecting_python_version(PipenvInstance, pypi):
+    with PipenvInstance(pypi=pypi) as p:
         with open(p.pipfile_path, 'w') as f:
             f.write("""
 [packages]
 django = "*"
             """.strip())
-        django_version = '==2.0.6' if six.PY3 else '==1.11.10'
+        django_version = '==2.0.6' if six.PY3 else '==1.11.13'
         c = p.pipenv('lock')
         assert c.return_code == 0
         assert p.lockfile['default']['django']['version'] == django_version
