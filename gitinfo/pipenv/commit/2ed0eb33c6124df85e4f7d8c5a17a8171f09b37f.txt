commit 2ed0eb33c6124df85e4f7d8c5a17a8171f09b37f
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Thu Sep 7 13:21:54 2017 -0400

    fixes for ryan
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/pipenv/cli.py b/pipenv/cli.py
index ae117871..deac82a8 100644
--- a/pipenv/cli.py
+++ b/pipenv/cli.py
@@ -479,7 +479,6 @@ def do_lock(no_hashes=True, verbose=False, legacy=False):
         # Resolve dev-package dependencies.
         deps = convert_deps_to_pip(project.dev_packages, r=False)
         results = resolve_deps(deps, sources=project.sources, verbose=verbose, hashes=(not no_hashes))
-
         # Add develop dependencies to lockfile.
         for dep in results:
             lockfile['develop'].update({dep['name']: {'version': '=={0}'.format(dep['version'])}})
diff --git a/pipenv/utils.py b/pipenv/utils.py
index 5c4e0933..1d77adad 100644
--- a/pipenv/utils.py
+++ b/pipenv/utils.py
@@ -56,7 +56,7 @@ def resolve_deps(deps, sources=None, verbose=False, hashes=False):
 
     for result in r.resolve():
         name = pep423_name(result.name)
-        version = six.u(str(result.specifier)).replace('==', '')
+        version = six.u(pep440_version(str(result.specifier))).replace('==', '')
 
         if hashes:
             try:
@@ -242,9 +242,14 @@ def is_vcs(pipfile_entry):
     return False
 
 
+def pep440_version(version):
+    # TODO: https://github.com/pypa/pip/blob/a9d56c7734fd465d01437d61f632749a293e7805/src/pip/_vendor/distlib/version.py#L184
+    return version.replace('.post', '-')
+
+
 def pep423_name(name):
     """Normalize package name to PEP 423 style standard."""
-    return name.lower().replace('_','-')
+    return name.lower().replace('_', '-')
 
 
 def proper_case(package_name):
