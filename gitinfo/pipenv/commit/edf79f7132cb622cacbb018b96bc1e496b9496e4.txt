commit edf79f7132cb622cacbb018b96bc1e496b9496e4
Author: Dan Ryan <dan.ryan@canonical.com>
Date:   Sun May 17 01:12:23 2020 -0400

    Fix resolution of direct url subdependencies
    
    - Fix resolution of direct url VCS subdependencies (e.g. top level dep
      depends on a VCS direct url subdependency) which rely on subdirectory
      resolution
    - Fixes #3976
    
    Signed-off-by: Dan Ryan <dan.ryan@canonical.com>

diff --git a/news/3976.bugfix.rst b/news/3976.bugfix.rst
new file mode 100644
index 00000000..4dd381df
--- /dev/null
+++ b/news/3976.bugfix.rst
@@ -0,0 +1 @@
+Fixed a bug which prevented resolution of direct URL dependencies which have PEP508 style direct url VCS sub-dependencies with subdirectories.
diff --git a/pipenv/utils.py b/pipenv/utils.py
index ed8ed296..87185564 100644
--- a/pipenv/utils.py
+++ b/pipenv/utils.py
@@ -997,6 +997,8 @@ class Resolver(object):
         for req, ireq in reqs:
             if (req.vcs and req.editable and not req.is_direct_url):
                 continue
+            elif req.normalized_name in self.skipped.keys():
+                continue
             collected_hashes = self.collect_hashes(ireq)
             req = req.add_hashes(collected_hashes)
             if not collected_hashes and self._should_include_hash(ireq):
