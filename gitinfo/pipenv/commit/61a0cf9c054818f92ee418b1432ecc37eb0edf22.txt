commit 61a0cf9c054818f92ee418b1432ecc37eb0edf22
Author: Dan Ryan <dan@danryan.co>
Date:   Mon Nov 20 13:22:56 2017 -0500

    Scrub needless system flag additions

diff --git a/pipenv/cli.py b/pipenv/cli.py
index 256347f8..a78f94d1 100644
--- a/pipenv/cli.py
+++ b/pipenv/cli.py
@@ -1747,7 +1747,7 @@ def do_py(system=False):
 @click.option('--dev', '-d', is_flag=True, default=False, help="Install package(s) in [dev-packages].")
 @click.option('--three/--two', is_flag=True, default=None, help="Use Python 3/2 when creating virtualenv.")
 @click.option('--python', default=False, nargs=1, help="Specify which version of Python virtualenv should use.")
-@click.option('--system', is_flag=True, default=False, help="System pip management.", envvar='PIPENV_USE_SYSTEM')
+@click.option('--system', is_flag=True, default=False, help="System pip management.")
 @click.option('--requirements', '-r', nargs=1, default=False, help="Import a requirements.txt file.")
 @click.option('--code', '-c', nargs=1, default=False, help="Import from codebase.")
 @click.option('--verbose', is_flag=True, default=False, help="Verbose mode.")
@@ -1943,7 +1943,7 @@ def install(
 @click.argument('more_packages', nargs=-1)
 @click.option('--three/--two', is_flag=True, default=None, help="Use Python 3/2 when creating virtualenv.")
 @click.option('--python', default=False, nargs=1, help="Specify which version of Python virtualenv should use.")
-@click.option('--system', is_flag=True, default=False, help="System pip management.", envvar='PIPENV_USE_SYSTEM')
+@click.option('--system', is_flag=True, default=False, help="System pip management.")
 @click.option('--verbose', is_flag=True, default=False, help="Verbose mode.")
 @click.option('--lock', is_flag=True, default=True, help="Lock afterwards.")
 @click.option('--all-dev', is_flag=True, default=False, help="Un-install all package from [dev-packages].")
@@ -2046,30 +2046,24 @@ def uninstall(
 @click.option('--python', default=False, nargs=1, help="Specify which version of Python virtualenv should use.")
 @click.option('--verbose', is_flag=True, default=False, help="Verbose mode.")
 @click.option('--requirements', '-r', is_flag=True, default=False, help="Generate output compatible with requirements.txt.")
-@click.option('--system', is_flag=True, default=False, help="System pip management.", envvar='PIPENV_USE_SYSTEM')
 @click.option('--dev', '-d', is_flag=True, default=False, help="Generate output compatible with requirements.txt for the development dependencies.")
 @click.option('--clear', is_flag=True, default=False, help="Clear the dependency cache.")
 @click.option('--pre', is_flag=True, default=False, help=u"Allow preâ€“releases.")
 def lock(
-    three=None, python=False, system=False, verbose=False,
-    requirements=False, dev=False, clear=False, pre=False
+    three=None, python=False, verbose=False, requirements=False, dev=False,
+    clear=False, pre=False
 ):
-
-    # Automatically use an activated virtualenv.
-    if PIPENV_USE_SYSTEM:
-        system = True
-
     # Ensure that virtualenv is available.
-    ensure_project(three=three, python=python, system=system)
+    ensure_project(three=three, python=python)
 
     # Load the --pre settings from the Pipfile.
     if not pre:
         pre = project.settings.get('pre')
 
     if requirements:
-        do_init(dev=dev, requirements=requirements, system=system)
+        do_init(dev=dev, requirements=requirements)
 
-    do_lock(verbose=verbose, clear=clear, pre=pre, system=system)
+    do_lock(verbose=verbose, clear=clear, pre=pre)
 
 
 def do_shell(three=None, python=False, fancy=False, shell_args=None):
@@ -2235,16 +2229,22 @@ def inline_activate_virtualenv():
 @click.argument('command')
 @click.argument('args', nargs=-1)
 @click.option('--three/--two', is_flag=True, default=None, help="Use Python 3/2 when creating virtualenv.")
-@click.option('--system', is_flag=True, default=False, help="System pip management.", envvar='PIPENV_USE_SYSTEM')
 @click.option('--python', default=False, nargs=1, help="Specify which version of Python virtualenv should use.")
-def run(command, args, three=None, python=False, system=False):
+def run(command, args, three=None, python=False):
 
-    # Automatically use an activated virtualenv.
-    if PIPENV_USE_SYSTEM:
-        system = True
+    if not project.virtualenv_exists:
+        click.echo(
+            crayons.red(
+                u'{0}'.format(crayons.bold(
+                    'This project has no virtualenv yet! Use $ pipenv install, for example, to create one.'
+                ))
+            ),
+            err=True
+        )
+        sys.exit(1)
 
     # Ensure that virtualenv is available.
-    ensure_project(three=three, python=python, validate=False, system=system)
+    ensure_project(three=three, python=python, validate=False)
 
     load_dot_env()
 
@@ -2498,24 +2498,19 @@ def run_open(module, three=None, python=None):
 @click.option('--dev', '-d', is_flag=True, default=False, help="Additionally install package(s) in [dev-packages].")
 @click.option('--three/--two', is_flag=True, default=None, help="Use Python 3/2 when creating virtualenv.")
 @click.option('--python', default=False, nargs=1, help="Specify which version of Python virtualenv should use.")
-@click.option('--system', is_flag=True, default=False, help="System pip management.", envvar='PIPENV_USE_SYSTEM')
 @click.option('--dry-run', is_flag=True, default=False, help="Just output outdated packages.")
 @click.option('--bare', is_flag=True, default=False, help="Minimal output.")
 @click.option('--clear', is_flag=True, default=False, help="Clear the dependency cache.")
 @click.option('--sequential', is_flag=True, default=False, help="Install dependencies one-at-a-time, instead of concurrently.")
 @click.pass_context
 def update(
-    ctx, dev=False, three=None, python=None, system=False, dry_run=False, bare=False,
+    ctx, dev=False, three=None, python=None, dry_run=False, bare=False,
     dont_upgrade=False, user=False, verbose=False, clear=False, unused=False,
     package_name=None, sequential=False
 ):
 
-    # Automatically use an activated virtualenv.
-    if PIPENV_USE_SYSTEM:
-        system = True
-
     # Ensure that virtualenv is available.
-    ensure_project(three=three, python=python, validate=False, system=system)
+    ensure_project(three=three, python=python, validate=False)
 
     concurrent = (not sequential)
 
@@ -2546,7 +2541,7 @@ def update(
         # Resolve dependency tree.
         for result in resolve_deps(
             deps, sources=project.sources, clear=clear, which=which,
-            which_pip=which_pip, project=project, allow_global=system
+            which_pip=which_pip, project=project
         ):
 
             name = result['name']
@@ -2583,13 +2578,13 @@ def update(
         pre = project.settings.get('allow_prereleases')
 
         # Purge.
-        do_purge(allow_global=system)
+        do_purge()
 
         # Lock.
-        do_lock(pre=pre, system=system)
+        do_lock(pre=pre)
 
         # Install everything.
-        do_init(dev=dev, verbose=verbose, concurrent=concurrent, system=system)
+        do_init(dev=dev, verbose=verbose, concurrent=concurrent)
 
         click.echo(
             crayons.green('All dependencies are now up-to-date!')
@@ -2615,7 +2610,7 @@ def update(
                 # sys.exit(1)
 
             p_name = convert_deps_to_pip({package_name: project.all_packages[package_name]}, r=False)
-            ctx.invoke(install, package_name=p_name[0], system=system)
+            ctx.invoke(install, package_name=p_name[0])
 
         else:
             click.echo(
