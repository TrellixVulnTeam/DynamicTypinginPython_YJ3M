commit bb0719f8ae8ec98e6004a85f9324abc4a729f34b
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Thu Sep 7 17:01:15 2017 -0400

    only call recase_file once
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/pipenv/cli.py b/pipenv/cli.py
index 60d9a8c7..eeb1f007 100644
--- a/pipenv/cli.py
+++ b/pipenv/cli.py
@@ -174,6 +174,8 @@ def ensure_pipfile(validate=True):
                     else:
                         project.add_package_to_pipfile(str(package.req))
 
+            project.recase_pipfile()
+
         else:
             click.echo(crayons.yellow('Creating a Pipfile for this project...'), err=True)
             # Create the pipfile if it doesn't exist.
diff --git a/pipenv/project.py b/pipenv/project.py
index 9654a217..09cec0d8 100644
--- a/pipenv/project.py
+++ b/pipenv/project.py
@@ -273,4 +273,7 @@ class Project(object):
         p[key][package_name] = package[package_name]
 
         # Write Pipfile.
-        self.write_toml(recase_file(p))
+        self.write_toml(p)
+
+    def recase_pipfile(self):
+        self.write_toml(recase_file(self._pipfile))
