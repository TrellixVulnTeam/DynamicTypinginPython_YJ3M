commit e025a3b52f64f1910fb8132cd6447a47c4cfe849
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Wed Mar 21 06:59:30 2018 -0400

    don't propogate env vars to pipfile.lock
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/pipenv/patched/pipfile/api.py b/pipenv/patched/pipfile/api.py
index e0604403..08aa49c3 100644
--- a/pipenv/patched/pipfile/api.py
+++ b/pipenv/patched/pipfile/api.py
@@ -147,11 +147,11 @@ class Pipfile(object):
         raise RuntimeError('No Pipfile found!')
 
     @classmethod
-    def load(klass, filename):
+    def load(klass, filename, inject_env=True):
         """Load a Pipfile from a given filename."""
         p = PipfileParser(filename=filename)
         pipfile = klass(filename=filename)
-        pipfile.data = p.parse()
+        pipfile.data = p.parse(inject_env=inject_env)
         return pipfile
 
     @property
@@ -212,7 +212,7 @@ class Pipfile(object):
                     raise AssertionError('Specifier {!r} does not match {!r}.'.format(marker, specifier))
 
 
-def load(pipfile_path=None):
+def load(pipfile_path=None, inject_env=True):
     """Loads a pipfile from a given path.
     If none is provided, one will try to be found.
     """
@@ -220,4 +220,4 @@ def load(pipfile_path=None):
     if pipfile_path is None:
         pipfile_path = Pipfile.find()
 
-    return Pipfile.load(filename=pipfile_path)
+    return Pipfile.load(filename=pipfile_path, inject_env=inject_env)
diff --git a/pipenv/project.py b/pipenv/project.py
index c9ced40c..812a9841 100644
--- a/pipenv/project.py
+++ b/pipenv/project.py
@@ -391,7 +391,7 @@ class Project(object):
     @property
     def _lockfile(self):
         """Pipfile.lock divided by PyPI and external dependencies."""
-        pfile = pipfile.load(self.pipfile_location)
+        pfile = pipfile.load(self.pipfile_location, inject_env=False)
         lockfile = json.loads(pfile.lock())
         for section in ('default', 'develop'):
             lock_section = lockfile.get(section, {})
