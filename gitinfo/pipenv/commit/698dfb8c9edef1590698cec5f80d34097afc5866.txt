commit 698dfb8c9edef1590698cec5f80d34097afc5866
Author: Dan Ryan <dan@danryan.co>
Date:   Sun Feb 17 19:11:36 2019 -0500

    Port over changes that were overwritten
    
    - Bring in changes from bugfix/3148
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/pipenv/_compat.py b/pipenv/_compat.py
index ca3bbd0f..e8ef16e5 100644
--- a/pipenv/_compat.py
+++ b/pipenv/_compat.py
@@ -122,6 +122,12 @@ UNICODE_TO_ASCII_TRANSLATION_MAP = {
 }
 
 
+def decode_for_output(output, target=sys.stdout):
+    return vistir.misc.decode_for_output(
+        output, sys.stdout, translation_map=UNICODE_TO_ASCII_TRANSLATION_MAP
+    )
+
+
 def decode_output(output):
     if not isinstance(output, six.string_types):
         return output
diff --git a/pipenv/resolver.py b/pipenv/resolver.py
index 42856a3f..468b6027 100644
--- a/pipenv/resolver.py
+++ b/pipenv/resolver.py
@@ -42,6 +42,7 @@ def handle_parsed_args(parsed):
         logging.getLogger("notpip").setLevel(logging.DEBUG)
     elif parsed.verbose > 0:
         logging.getLogger("notpip").setLevel(logging.INFO)
+    os.environ["PIPENV_VERBOSITY"] = str(parsed.verbose)
     if "PIPENV_PACKAGES" in os.environ:
         parsed.packages += os.environ.get("PIPENV_PACKAGES", "").strip().split("\n")
     return parsed
diff --git a/tests/pypi/Cerberus/Cerberus-1.2.tar.gz b/tests/pypi/Cerberus/Cerberus-1.2.tar.gz
new file mode 100644
index 00000000..b9f2c01d
Binary files /dev/null and b/tests/pypi/Cerberus/Cerberus-1.2.tar.gz differ
diff --git a/tests/pypi/cerberus/Cerberus-1.2.tar.gz b/tests/pypi/cerberus/Cerberus-1.2.tar.gz
new file mode 100644
index 00000000..b9f2c01d
Binary files /dev/null and b/tests/pypi/cerberus/Cerberus-1.2.tar.gz differ
diff --git a/tests/pypi/enum34/api.json b/tests/pypi/enum34/api.json
new file mode 100644
index 00000000..64a47647
--- /dev/null
+++ b/tests/pypi/enum34/api.json
@@ -0,0 +1,190 @@
+{
+    "info": {
+        "author": "Ethan Furman",
+        "author_email": "ethan@stoneleaf.us",
+        "bugtrack_url": null,
+        "classifiers": [
+            "Development Status :: 5 - Production/Stable",
+            "Intended Audience :: Developers",
+            "License :: OSI Approved :: BSD License",
+            "Programming Language :: Python",
+            "Programming Language :: Python :: 2.4",
+            "Programming Language :: Python :: 2.5",
+            "Programming Language :: Python :: 2.6",
+            "Programming Language :: Python :: 2.7",
+            "Programming Language :: Python :: 3.3",
+            "Programming Language :: Python :: 3.4",
+            "Programming Language :: Python :: 3.5",
+            "Topic :: Software Development"
+        ],
+        "description": "enum --- support for enumerations\n========================================\n\nAn enumeration is a set of symbolic names (members) bound to unique, constant\nvalues.  Within an enumeration, the members can be compared by identity, and\nthe enumeration itself can be iterated over.\n\n    from enum import Enum\n\n    class Fruit(Enum):\n        apple = 1\n        banana = 2\n        orange = 3\n\n    list(Fruit)\n    # [<Fruit.apple: 1>, <Fruit.banana: 2>, <Fruit.orange: 3>]\n\n    len(Fruit)\n    # 3\n\n    Fruit.banana\n    # <Fruit.banana: 2>\n\n    Fruit['banana']\n    # <Fruit.banana: 2>\n\n    Fruit(2)\n    # <Fruit.banana: 2>\n\n    Fruit.banana is Fruit['banana'] is Fruit(2)\n    # True\n\n    Fruit.banana.name\n    # 'banana'\n\n    Fruit.banana.value\n    # 2\n\nRepository and Issue Tracker at https://bitbucket.org/stoneleaf/enum34.",
+        "description_content_type": null,
+        "docs_url": null,
+        "download_url": "",
+        "downloads": {
+            "last_day": -1,
+            "last_month": -1,
+            "last_week": -1
+        },
+        "home_page": "https://bitbucket.org/stoneleaf/enum34",
+        "keywords": "",
+        "license": "BSD License",
+        "maintainer": "",
+        "maintainer_email": "",
+        "name": "enum34",
+        "package_url": "https://pypi.org/project/enum34/",
+        "platform": "UNKNOWN",
+        "project_url": "https://pypi.org/project/enum34/",
+        "project_urls": {
+            "Homepage": "https://bitbucket.org/stoneleaf/enum34"
+        },
+        "release_url": "https://pypi.org/project/enum34/1.1.6/",
+        "requires_dist": null,
+        "requires_python": "",
+        "summary": "Python 3.4 Enum backported to 3.3, 3.2, 3.1, 2.7, 2.6, 2.5, and 2.4",
+        "version": "1.1.6"
+    },
+    "last_serial": 2117417,
+    "releases": {
+        "1.1.6": [
+            {
+                "comment_text": "",
+                "digests": {
+                    "md5": "68f6982cc07dde78f4b500db829860bd",
+                    "sha256": "6bd0f6ad48ec2aa117d3d141940d484deccda84d4fcd884f5c3d93c23ecd8c79"
+                },
+                "downloads": -1,
+                "filename": "enum34-1.1.6-py2-none-any.whl",
+                "has_sig": false,
+                "md5_digest": "68f6982cc07dde78f4b500db829860bd",
+                "packagetype": "bdist_wheel",
+                "python_version": "py2",
+                "requires_python": null,
+                "size": 12427,
+                "upload_time": "2016-05-16T03:31:13",
+                "url": "https://files.pythonhosted.org/packages/c5/db/e56e6b4bbac7c4a06de1c50de6fe1ef3810018ae11732a50f15f62c7d050/enum34-1.1.6-py2-none-any.whl"
+            },
+            {
+                "comment_text": "",
+                "digests": {
+                    "md5": "a63ecb4f0b1b85fb69be64bdea999b43",
+                    "sha256": "644837f692e5f550741432dd3f223bbb9852018674981b1664e5dc339387588a"
+                },
+                "downloads": -1,
+                "filename": "enum34-1.1.6-py3-none-any.whl",
+                "has_sig": false,
+                "md5_digest": "a63ecb4f0b1b85fb69be64bdea999b43",
+                "packagetype": "bdist_wheel",
+                "python_version": "py3",
+                "requires_python": null,
+                "size": 12428,
+                "upload_time": "2016-05-16T03:31:19",
+                "url": "https://files.pythonhosted.org/packages/af/42/cb9355df32c69b553e72a2e28daee25d1611d2c0d9c272aa1d34204205b2/enum34-1.1.6-py3-none-any.whl"
+            },
+            {
+                "comment_text": "",
+                "digests": {
+                    "md5": "5f13a0841a61f7fc295c514490d120d0",
+                    "sha256": "8ad8c4783bf61ded74527bffb48ed9b54166685e4230386a9ed9b1279e2df5b1"
+                },
+                "downloads": -1,
+                "filename": "enum34-1.1.6.tar.gz",
+                "has_sig": false,
+                "md5_digest": "5f13a0841a61f7fc295c514490d120d0",
+                "packagetype": "sdist",
+                "python_version": "source",
+                "requires_python": null,
+                "size": 40048,
+                "upload_time": "2016-05-16T03:31:30",
+                "url": "https://files.pythonhosted.org/packages/bf/3e/31d502c25302814a7c2f1d3959d2a3b3f78e509002ba91aea64993936876/enum34-1.1.6.tar.gz"
+            },
+            {
+                "comment_text": "",
+                "digests": {
+                    "md5": "61ad7871532d4ce2d77fac2579237a9e",
+                    "sha256": "2d81cbbe0e73112bdfe6ef8576f2238f2ba27dd0d55752a776c41d38b7da2850"
+                },
+                "downloads": -1,
+                "filename": "enum34-1.1.6.zip",
+                "has_sig": false,
+                "md5_digest": "61ad7871532d4ce2d77fac2579237a9e",
+                "packagetype": "sdist",
+                "python_version": "source",
+                "requires_python": null,
+                "size": 44773,
+                "upload_time": "2016-05-16T03:31:48",
+                "url": "https://files.pythonhosted.org/packages/e8/26/a6101edcf724453845c850281b96b89a10dac6bd98edebc82634fccce6a5/enum34-1.1.6.zip"
+            }
+        ]
+    },
+    "urls": [
+        {
+            "comment_text": "",
+            "digests": {
+                "md5": "68f6982cc07dde78f4b500db829860bd",
+                "sha256": "6bd0f6ad48ec2aa117d3d141940d484deccda84d4fcd884f5c3d93c23ecd8c79"
+            },
+            "downloads": -1,
+            "filename": "enum34-1.1.6-py2-none-any.whl",
+            "has_sig": false,
+            "md5_digest": "68f6982cc07dde78f4b500db829860bd",
+            "packagetype": "bdist_wheel",
+            "python_version": "py2",
+            "requires_python": null,
+            "size": 12427,
+            "upload_time": "2016-05-16T03:31:13",
+            "url": "https://files.pythonhosted.org/packages/c5/db/e56e6b4bbac7c4a06de1c50de6fe1ef3810018ae11732a50f15f62c7d050/enum34-1.1.6-py2-none-any.whl"
+        },
+        {
+            "comment_text": "",
+            "digests": {
+                "md5": "a63ecb4f0b1b85fb69be64bdea999b43",
+                "sha256": "644837f692e5f550741432dd3f223bbb9852018674981b1664e5dc339387588a"
+            },
+            "downloads": -1,
+            "filename": "enum34-1.1.6-py3-none-any.whl",
+            "has_sig": false,
+            "md5_digest": "a63ecb4f0b1b85fb69be64bdea999b43",
+            "packagetype": "bdist_wheel",
+            "python_version": "py3",
+            "requires_python": null,
+            "size": 12428,
+            "upload_time": "2016-05-16T03:31:19",
+            "url": "https://files.pythonhosted.org/packages/af/42/cb9355df32c69b553e72a2e28daee25d1611d2c0d9c272aa1d34204205b2/enum34-1.1.6-py3-none-any.whl"
+        },
+        {
+            "comment_text": "",
+            "digests": {
+                "md5": "5f13a0841a61f7fc295c514490d120d0",
+                "sha256": "8ad8c4783bf61ded74527bffb48ed9b54166685e4230386a9ed9b1279e2df5b1"
+            },
+            "downloads": -1,
+            "filename": "enum34-1.1.6.tar.gz",
+            "has_sig": false,
+            "md5_digest": "5f13a0841a61f7fc295c514490d120d0",
+            "packagetype": "sdist",
+            "python_version": "source",
+            "requires_python": null,
+            "size": 40048,
+            "upload_time": "2016-05-16T03:31:30",
+            "url": "https://files.pythonhosted.org/packages/bf/3e/31d502c25302814a7c2f1d3959d2a3b3f78e509002ba91aea64993936876/enum34-1.1.6.tar.gz"
+        },
+        {
+            "comment_text": "",
+            "digests": {
+                "md5": "61ad7871532d4ce2d77fac2579237a9e",
+                "sha256": "2d81cbbe0e73112bdfe6ef8576f2238f2ba27dd0d55752a776c41d38b7da2850"
+            },
+            "downloads": -1,
+            "filename": "enum34-1.1.6.zip",
+            "has_sig": false,
+            "md5_digest": "61ad7871532d4ce2d77fac2579237a9e",
+            "packagetype": "sdist",
+            "python_version": "source",
+            "requires_python": null,
+            "size": 44773,
+            "upload_time": "2016-05-16T03:31:48",
+            "url": "https://files.pythonhosted.org/packages/e8/26/a6101edcf724453845c850281b96b89a10dac6bd98edebc82634fccce6a5/enum34-1.1.6.zip"
+        }
+    ]
+}
\ No newline at end of file
diff --git a/tests/pypi/enum34/enum34-1.1.6-py2-none-any.whl b/tests/pypi/enum34/enum34-1.1.6-py2-none-any.whl
new file mode 100644
index 00000000..12be7c7e
Binary files /dev/null and b/tests/pypi/enum34/enum34-1.1.6-py2-none-any.whl differ
diff --git a/tests/pypi/enum34/enum34-1.1.6-py3-none-any.whl b/tests/pypi/enum34/enum34-1.1.6-py3-none-any.whl
new file mode 100644
index 00000000..53c1cb04
Binary files /dev/null and b/tests/pypi/enum34/enum34-1.1.6-py3-none-any.whl differ
diff --git a/tests/pypi/enum34/enum34-1.1.6.tar.gz b/tests/pypi/enum34/enum34-1.1.6.tar.gz
new file mode 100644
index 00000000..ab548ac6
Binary files /dev/null and b/tests/pypi/enum34/enum34-1.1.6.tar.gz differ
diff --git a/tests/pypi/enum34/enum34-1.1.6.zip b/tests/pypi/enum34/enum34-1.1.6.zip
new file mode 100644
index 00000000..caabfc64
Binary files /dev/null and b/tests/pypi/enum34/enum34-1.1.6.zip differ
diff --git a/tests/pypi/functools32/functools32-3.2.3-2.tar.gz b/tests/pypi/functools32/functools32-3.2.3-2.tar.gz
new file mode 100644
index 00000000..e4255eb4
Binary files /dev/null and b/tests/pypi/functools32/functools32-3.2.3-2.tar.gz differ
diff --git a/tests/pypi/functools32/functools32-3.2.3-2.zip b/tests/pypi/functools32/functools32-3.2.3-2.zip
new file mode 100644
index 00000000..9175388a
Binary files /dev/null and b/tests/pypi/functools32/functools32-3.2.3-2.zip differ
diff --git a/tests/pypi/plette/plette-0.2.2-py2.py3-none-any.whl b/tests/pypi/plette/plette-0.2.2-py2.py3-none-any.whl
new file mode 100644
index 00000000..1ca43416
Binary files /dev/null and b/tests/pypi/plette/plette-0.2.2-py2.py3-none-any.whl differ
diff --git a/tests/pypi/setuptools/setuptools-40.6.3-py2.py3-none-any.whl b/tests/pypi/setuptools/setuptools-40.6.3-py2.py3-none-any.whl
new file mode 100644
index 00000000..f9fc432a
Binary files /dev/null and b/tests/pypi/setuptools/setuptools-40.6.3-py2.py3-none-any.whl differ
diff --git a/tests/pypi/six/six-1.12.0-py2.py3-none-any.whl b/tests/pypi/six/six-1.12.0-py2.py3-none-any.whl
new file mode 100644
index 00000000..78ba9032
Binary files /dev/null and b/tests/pypi/six/six-1.12.0-py2.py3-none-any.whl differ
diff --git a/tests/pypi/tomlkit/api.json b/tests/pypi/tomlkit/api.json
new file mode 100644
index 00000000..c19763af
--- /dev/null
+++ b/tests/pypi/tomlkit/api.json
@@ -0,0 +1,123 @@
+{
+    "info": {
+        "author": "S\u00e9bastien Eustace",
+        "author_email": "sebastien@eustace.io",
+        "bugtrack_url": null,
+        "classifiers": [
+            "License :: OSI Approved :: MIT License",
+            "Programming Language :: Python :: 2",
+            "Programming Language :: Python :: 2.7",
+            "Programming Language :: Python :: 3",
+            "Programming Language :: Python :: 3.4",
+            "Programming Language :: Python :: 3.5",
+            "Programming Language :: Python :: 3.6",
+            "Programming Language :: Python :: 3.7"
+        ],
+        "description": "[github_release]: https://img.shields.io/github/release/sdispater/tomlkit.svg?logo=github&logoColor=white\n[pypi_version]: https://img.shields.io/pypi/v/tomlkit.svg?logo=python&logoColor=white\n[python_versions]: https://img.shields.io/pypi/pyversions/tomlkit.svg?logo=python&logoColor=white\n[github_license]: https://img.shields.io/github/license/sdispater/tomlkit.svg?logo=github&logoColor=white\n[travisci]: https://img.shields.io/travis/com/sdispater/tomlkit/master.svg?logo=travis&logoColor=white&label=Travis%20CI\n[appveyor]: https://img.shields.io/appveyor/ci/sdispater/tomlkit/master.svg?logo=appveyor&logoColor=white&label=AppVeyor\n<!--Codecov logo not offered by shields.io or simpleicons.org, this is Codecov's SVG image modified to be white-->\n[codecov]: https://img.shields.io/codecov/c/github/sdispater/tomlkit/master.svg?logo=data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CgogPGc+CiAgPHRpdGxlPmJhY2tncm91bmQ8L3RpdGxlPgogIDxyZWN0IGZpbGw9Im5vbmUiIGlkPSJjYW52YXNfYmFja2dyb3VuZCIgaGVpZ2h0PSI0MDIiIHdpZHRoPSI1ODIiIHk9Ii0xIiB4PSItMSIvPgogPC9nPgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxwYXRoIGlkPSJzdmdfMSIgZmlsbC1ydWxlPSJldmVub2RkIiBmaWxsPSIjZmZmZmZmIiBkPSJtMjUuMDE0LDBjLTEzLjc4NCwwLjAxIC0yNS4wMDQsMTEuMTQ5IC0yNS4wMTQsMjQuODMybDAsMC4wNjJsNC4yNTQsMi40ODJsMC4wNTgsLTAuMDM5YTEyLjIzOCwxMi4yMzggMCAwIDEgOS4wNzgsLTEuOTI4YTExLjg0NCwxMS44NDQgMCAwIDEgNS45OCwyLjk3NWwwLjczLDAuNjhsMC40MTMsLTAuOTA0YzAuNCwtMC44NzQgMC44NjIsLTEuNjk2IDEuMzc0LC0yLjQ0M2MwLjIwNiwtMC4zIDAuNDMzLC0wLjYwNCAwLjY5MiwtMC45MjlsMC40MjcsLTAuNTM1bC0wLjUyNiwtMC40NGExNy40NSwxNy40NSAwIDAgMCAtOC4xLC0zLjc4MWExNy44NTMsMTcuODUzIDAgMCAwIC04LjM3NSwwLjQ5YzIuMDIzLC04Ljg2OCA5LjgyLC0xNS4wNSAxOS4wMjcsLTE1LjA1N2M1LjE5NSwwIDEwLjA3OCwyLjAwNyAxMy43NTIsNS42NTJjMi42MTksMi41OTggNC40MjIsNS44MzUgNS4yMjQsOS4zNzJhMTcuOTA4LDE3LjkwOCAwIDAgMCAtNS4yMDgsLTAuNzlsLTAuMzE4LC0wLjAwMWExOC4wOTYsMTguMDk2IDAgMCAwIC0yLjA2NywwLjE1M2wtMC4wODcsMC4wMTJjLTAuMzAzLDAuMDQgLTAuNTcsMC4wODEgLTAuODEzLDAuMTI2Yy0wLjExOSwwLjAyIC0wLjIzNywwLjA0NSAtMC4zNTUsMC4wNjhjLTAuMjgsMC4wNTcgLTAuNTU0LDAuMTE5IC0wLjgxNiwwLjE4NWwtMC4yODgsMC4wNzNjLTAuMzM2LDAuMDkgLTAuNjc1LDAuMTkxIC0xLjAwNiwwLjNsLTAuMDYxLDAuMDJjLTAuNzQsMC4yNTEgLTEuNDc4LDAuNTU4IC0yLjE5LDAuOTE0bC0wLjA1NywwLjAyOWMtMC4zMTYsMC4xNTggLTAuNjM2LDAuMzMzIC0wLjk3OCwwLjUzNGwtMC4wNzUsMC4wNDVhMTYuOTcsMTYuOTcgMCAwIDAgLTQuNDE0LDMuNzhsLTAuMTU3LDAuMTkxYy0wLjMxNywwLjM5NCAtMC41NjcsMC43MjcgLTAuNzg3LDEuMDQ4Yy0wLjE4NCwwLjI3IC0wLjM2OSwwLjU2IC0wLjYsMC45NDJsLTAuMTI2LDAuMjE3Yy0wLjE4NCwwLjMxOCAtMC4zNDgsMC42MjIgLTAuNDg3LDAuOWwtMC4wMzMsMC4wNjFjLTAuMzU0LDAuNzExIC0wLjY2MSwxLjQ1NSAtMC45MTcsMi4yMTRsLTAuMDM2LDAuMTExYTE3LjEzLDE3LjEzIDAgMCAwIC0wLjg1NSw1LjY0NGwwLjAwMywwLjIzNGEyMy41NjUsMjMuNTY1IDAgMCAwIDAuMDQzLDAuODIyYzAuMDEsMC4xMyAwLjAyMywwLjI1OSAwLjAzNiwwLjM4OGMwLjAxNSwwLjE1OCAwLjAzNCwwLjMxNiAwLjA1MywwLjQ3MWwwLjAxMSwwLjA4OGwwLjAyOCwwLjIxNGMwLjAzNywwLjI2NCAwLjA4LDAuNTI1IDAuMTMsMC43ODdjMC41MDMsMi42MzcgMS43Niw1LjI3NCAzLjYzNSw3LjYyNWwwLjA4NSwwLjEwNmwwLjA4NywtMC4xMDRjMC43NDgsLTAuODg0IDIuNjAzLC0zLjY4NyAyLjc2LC01LjM2OWwwLjAwMywtMC4wMzFsLTAuMDE1LC0wLjAyOGExMS43MzYsMTEuNzM2IDAgMCAxIC0xLjMzMywtNS40MDdjMCwtNi4yODQgNC45NCwtMTEuNTAyIDExLjI0MywtMTEuODhsMC40MTQsLTAuMDE1YzIuNTYxLC0wLjA1OCA1LjA2NCwwLjY3MyA3LjIzLDIuMTM2bDAuMDU4LDAuMDM5bDQuMTk3LC0yLjQ0bDAuMDU1LC0wLjAzM2wwLC0wLjA2MmMwLjAwNiwtNi42MzIgLTIuNTkyLC0xMi44NjUgLTcuMzE0LC0xNy41NTFjLTQuNzE2LC00LjY3OSAtMTAuOTkxLC03LjI1NSAtMTcuNjcyLC03LjI1NSIvPgogPC9nPgo8L3N2Zz4=&label=Codecov\n\n[![GitHub Release][github_release]](https://github.com/sdispater/tomlkit/releases/)\n[![PyPI Version][pypi_version]](https://pypi.python.org/pypi/tomlkit/)\n[![Python Versions][python_versions]](https://pypi.python.org/pypi/tomlkit/)\n[![License][github_license]](https://github.com/sdispater/tomlkit/blob/master/LICENSE)\n<br>\n[![Travis CI][travisci]](https://travis-ci.com/sdispater/tomlkit)\n[![AppVeyor][appveyor]](https://ci.appveyor.com/project/sdispater/tomlkit)\n[![Codecov][codecov]](https://codecov.io/gh/sdispater/tomlkit)\n\n# TOML Kit - Style-preserving TOML library for Python\n\nTOML Kit is a **0.5.0-compliant** [TOML](https://github.com/toml-lang/toml) library.\n\nIt includes a parser that preserves all comments, indentations, whitespace and internal element ordering,\nand makes them accessible and editable via an intuitive API.\n\nYou can also create new TOML documents from scratch using the provided helpers.\n\nPart of the implementation as been adapted, improved and fixed from [Molten](https://github.com/LeopoldArkham/Molten).\n\n## Usage\n\n### Parsing\n\nTOML Kit comes with a fast and style-preserving parser to help you access\nthe content of TOML files and strings.\n\n```python\n>>> from tomlkit import dumps\n>>> from tomlkit import parse  # you can also use loads\n\n>>> content = \"\"\"[table]\n... foo = \"bar\"  # String\n... \"\"\"\n>>> doc = parse(content)\n\n# doc is a TOMLDocument instance that holds all the information\n# about the TOML string.\n# It behaves like a standard dictionary.\n\n>>> assert doc[\"table\"][\"foo\"] == \"bar\"\n\n# The string generated from the document is exactly the same\n# as the original string\n>>> assert dumps(doc) == content\n```\n\n### Modifying\n\nTOML Kit provides an intuitive API to modify TOML documents.\n\n```python\n>>> from tomlkit import dumps\n>>> from tomlkit import parse\n>>> from tomlkit import table\n\n>>> doc = parse(\"\"\"[table]\n... foo = \"bar\"  # String\n... \"\"\")\n\n>>> doc[\"table\"][\"baz\"] = 13\n\n>>> dumps(doc)\n\"\"\"[table]\nfoo = \"bar\"  # String\nbaz = 13\n\"\"\"\n\n# Add a new table\n>>> tab = table()\n>>> tab.add(\"array\", [1, 2, 3])\n\n>>> doc[\"table2\"] = tab\n\n>>> dumps(doc)\n\"\"\"[table]\nfoo = \"bar\"  # String\nbaz = 13\n\n[table2]\narray = [1, 2, 3]\n\"\"\"\n\n# Remove the newly added table\n>>> doc.remove(\"table2\")\n# del doc[\"table2] is also possible\n```\n\n### Writing\n\nYou can also write a new TOML document from scratch.\n\nLet's say we want to create this following document:\n\n```toml\n# This is a TOML document.\n\ntitle = \"TOML Example\"\n\n[owner]\nname = \"Tom Preston-Werner\"\norganization = \"GitHub\"\nbio = \"GitHub Cofounder & CEO\\nLikes tater tots and beer.\"\ndob = 1979-05-27T07:32:00Z # First class dates? Why not?\n\n[database]\nserver = \"192.168.1.1\"\nports = [ 8001, 8001, 8002 ]\nconnection_max = 5000\nenabled = true\n```\n\nIt can be created with the following code:\n\n```python\n>>> from tomlkit import comment\n>>> from tomlkit import document\n>>> from tomlkit import nl\n>>> from tomlkit import table\n\n>>> doc = document()\n>>> doc.add(comment(\"This is a TOML document.\"))\n>>> doc.add(nl())\n>>> doc.add(\"title\", \"TOML Example\")\n# Using doc[\"title\"] = \"TOML Example\" is also possible\n\n>>> owner = table()\n>>> owner.add(\"name\", \"Tom Preston-Werner\")\n>>> owner.add(\"organization\", \"GitHub\")\n>>> owner.add(\"bio\", \"GitHub Cofounder & CEO\\nLikes tater tots and beer.\")\n>>> owner.add(\"dob\", datetime(1979, 5, 27, 7, 32, tzinfo=utc))\n>>> owner[\"dob\"].comment(\"First class dates? Why not?\")\n\n# Adding the table to the document\n>>> doc.add(\"owner\", owner)\n\n>>> database = table()\n>>> database[\"server\"] = \"192.168.1.1\"\n>>> database[\"ports\"] = [8001, 8001, 8002]\n>>> database[\"connection_max\"] = 5000\n>>> database[\"enabled\"] = True\n\n>>> doc[\"database\"] = database\n```\n\n\n## Installation\n\nIf you are using [Poetry](https://poetry.eustace.io),\nadd `tomlkit` to your `pyproject.toml` file by using:\n\n```bash\npoetry add tomlkit\n```\n\nIf not, you can use `pip`:\n\n```bash\npip install tomlkit\n```\n",
+        "description_content_type": "text/markdown",
+        "docs_url": null,
+        "download_url": "",
+        "downloads": {
+            "last_day": -1,
+            "last_month": -1,
+            "last_week": -1
+        },
+        "home_page": "https://github.com/sdispater/tomlkit",
+        "keywords": "",
+        "license": "MIT",
+        "maintainer": "S\u00e9bastien Eustace",
+        "maintainer_email": "sebastien@eustace.io",
+        "name": "tomlkit",
+        "package_url": "https://pypi.org/project/tomlkit/",
+        "platform": "",
+        "project_url": "https://pypi.org/project/tomlkit/",
+        "project_urls": {
+            "Homepage": "https://github.com/sdispater/tomlkit",
+            "Repository": "https://github.com/sdispater/tomlkit"
+        },
+        "release_url": "https://pypi.org/project/tomlkit/0.5.3/",
+        "requires_dist": [
+            "enum34 (>=1.1,<2.0); python_version >= \"2.7\" and python_version < \"2.8\"",
+            "functools32 (>=3.2.3,<4.0.0); python_version >= \"2.7\" and python_version < \"2.8\"",
+            "typing (>=3.6,<4.0); python_version >= \"2.7\" and python_version < \"2.8\" or python_version >= \"3.4\" and python_version < \"3.5\""
+        ],
+        "requires_python": ">=2.7, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*",
+        "summary": "Style preserving TOML library",
+        "version": "0.5.3"
+    },
+    "last_serial": 4504211,
+    "releases": {
+        "0.5.3": [
+            {
+                "comment_text": "",
+                "digests": {
+                    "md5": "0a6cf417df5d0fc911f89447c9a662a9",
+                    "sha256": "f077456d35303e7908cc233b340f71e0bec96f63429997f38ca9272b7d64029e"
+                },
+                "downloads": -1,
+                "filename": "tomlkit-0.5.3-py2.py3-none-any.whl",
+                "has_sig": false,
+                "md5_digest": "0a6cf417df5d0fc911f89447c9a662a9",
+                "packagetype": "bdist_wheel",
+                "python_version": "py2.py3",
+                "requires_python": ">=2.7, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*",
+                "size": 116796,
+                "upload_time": "2018-11-19T20:05:37",
+                "url": "https://files.pythonhosted.org/packages/71/c6/06c014b92cc48270765d6a9418d82239b158d8a9b69e031b0e2c6598740b/tomlkit-0.5.3-py2.py3-none-any.whl"
+            },
+            {
+                "comment_text": "",
+                "digests": {
+                    "md5": "a708470b53d689013f2fc9f0a7902adf",
+                    "sha256": "d6506342615d051bc961f70bfcfa3d29b6616cc08a3ddfd4bc24196f16fd4ec2"
+                },
+                "downloads": -1,
+                "filename": "tomlkit-0.5.3.tar.gz",
+                "has_sig": false,
+                "md5_digest": "a708470b53d689013f2fc9f0a7902adf",
+                "packagetype": "sdist",
+                "python_version": "source",
+                "requires_python": ">=2.7, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*",
+                "size": 29864,
+                "upload_time": "2018-11-19T20:05:39",
+                "url": "https://files.pythonhosted.org/packages/f7/f7/bbd9213bfe76cb7821c897f9ed74877fd74993b4ca2fe9513eb5a31030f9/tomlkit-0.5.3.tar.gz"
+            }
+        ]
+    },
+    "urls": [
+        {
+            "comment_text": "",
+            "digests": {
+                "md5": "0a6cf417df5d0fc911f89447c9a662a9",
+                "sha256": "f077456d35303e7908cc233b340f71e0bec96f63429997f38ca9272b7d64029e"
+            },
+            "downloads": -1,
+            "filename": "tomlkit-0.5.3-py2.py3-none-any.whl",
+            "has_sig": false,
+            "md5_digest": "0a6cf417df5d0fc911f89447c9a662a9",
+            "packagetype": "bdist_wheel",
+            "python_version": "py2.py3",
+            "requires_python": ">=2.7, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*",
+            "size": 116796,
+            "upload_time": "2018-11-19T20:05:37",
+            "url": "https://files.pythonhosted.org/packages/71/c6/06c014b92cc48270765d6a9418d82239b158d8a9b69e031b0e2c6598740b/tomlkit-0.5.3-py2.py3-none-any.whl"
+        },
+        {
+            "comment_text": "",
+            "digests": {
+                "md5": "a708470b53d689013f2fc9f0a7902adf",
+                "sha256": "d6506342615d051bc961f70bfcfa3d29b6616cc08a3ddfd4bc24196f16fd4ec2"
+            },
+            "downloads": -1,
+            "filename": "tomlkit-0.5.3.tar.gz",
+            "has_sig": false,
+            "md5_digest": "a708470b53d689013f2fc9f0a7902adf",
+            "packagetype": "sdist",
+            "python_version": "source",
+            "requires_python": ">=2.7, !=3.0.*, !=3.1.*, !=3.2.*, !=3.3.*",
+            "size": 29864,
+            "upload_time": "2018-11-19T20:05:39",
+            "url": "https://files.pythonhosted.org/packages/f7/f7/bbd9213bfe76cb7821c897f9ed74877fd74993b4ca2fe9513eb5a31030f9/tomlkit-0.5.3.tar.gz"
+        }
+    ]
+}
\ No newline at end of file
diff --git a/tests/pypi/tomlkit/tomlkit-0.5.3-py2.py3-none-any.whl b/tests/pypi/tomlkit/tomlkit-0.5.3-py2.py3-none-any.whl
new file mode 100644
index 00000000..7375595e
Binary files /dev/null and b/tests/pypi/tomlkit/tomlkit-0.5.3-py2.py3-none-any.whl differ
diff --git a/tests/pypi/tomlkit/tomlkit-0.5.3.tar.gz b/tests/pypi/tomlkit/tomlkit-0.5.3.tar.gz
new file mode 100644
index 00000000..c4a7f024
Binary files /dev/null and b/tests/pypi/tomlkit/tomlkit-0.5.3.tar.gz differ
diff --git a/tests/pypi/typing/api.json b/tests/pypi/typing/api.json
new file mode 100644
index 00000000..df641aa8
--- /dev/null
+++ b/tests/pypi/typing/api.json
@@ -0,0 +1,153 @@
+{
+    "info": {
+        "author": "Guido van Rossum, Jukka Lehtosalo, \u0141ukasz Langa, Ivan Levkivskyi",
+        "author_email": "jukka.lehtosalo@iki.fi",
+        "bugtrack_url": null,
+        "classifiers": [
+            "Development Status :: 5 - Production/Stable",
+            "Environment :: Console",
+            "Intended Audience :: Developers",
+            "License :: OSI Approved :: Python Software Foundation License",
+            "Operating System :: OS Independent",
+            "Programming Language :: Python :: 2.7",
+            "Programming Language :: Python :: 3.3",
+            "Programming Language :: Python :: 3.4",
+            "Topic :: Software Development"
+        ],
+        "description": "Typing -- Type Hints for Python\n\nThis is a backport of the standard library typing module to Python\nversions older than 3.5.  (See note below for newer versions.)\n\nTyping defines a standard notation for Python function and variable\ntype annotations. The notation can be used for documenting code in a\nconcise, standard format, and it has been designed to also be used by\nstatic and runtime type checkers, static analyzers, IDEs and other\ntools.\n\nNOTE: in Python 3.5 and later, the typing module lives in the stdlib,\nand installing this package has NO EFFECT.  To get a newer version of\nthe typing module in Python 3.5 or later, you have to upgrade to a\nnewer Python (bugfix) version.  For example, typing in Python 3.6.0 is\nmissing the definition of 'Type' -- upgrading to 3.6.2 will fix this.\n\nAlso note that most improvements to the typing module in Python 3.7\nwill not be included in this package, since Python 3.7 has some\nbuilt-in support that is not present in older versions (See PEP 560.)\n\n\n",
+        "description_content_type": "",
+        "docs_url": null,
+        "download_url": "",
+        "downloads": {
+            "last_day": -1,
+            "last_month": -1,
+            "last_week": -1
+        },
+        "home_page": "https://docs.python.org/3/library/typing.html",
+        "keywords": "typing function annotations type hints hinting checking checker typehints typehinting typechecking backport",
+        "license": "PSF",
+        "maintainer": "",
+        "maintainer_email": "",
+        "name": "typing",
+        "package_url": "https://pypi.org/project/typing/",
+        "platform": "",
+        "project_url": "https://pypi.org/project/typing/",
+        "project_urls": {
+            "Homepage": "https://docs.python.org/3/library/typing.html"
+        },
+        "release_url": "https://pypi.org/project/typing/3.6.6/",
+        "requires_dist": null,
+        "requires_python": "",
+        "summary": "Type Hints for Python",
+        "version": "3.6.6"
+    },
+    "last_serial": 4208967,
+    "releases": {
+        "3.6.6": [
+            {
+                "comment_text": "",
+                "digests": {
+                    "md5": "7e50dcc98a528f47c8793c980128467c",
+                    "sha256": "a4c8473ce11a65999c8f59cb093e70686b6c84c98df58c1dae9b3b196089858a"
+                },
+                "downloads": -1,
+                "filename": "typing-3.6.6-py2-none-any.whl",
+                "has_sig": false,
+                "md5_digest": "7e50dcc98a528f47c8793c980128467c",
+                "packagetype": "bdist_wheel",
+                "python_version": "py2",
+                "requires_python": null,
+                "size": 23560,
+                "upload_time": "2018-08-26T18:46:05",
+                "url": "https://files.pythonhosted.org/packages/cc/3e/29f92b7aeda5b078c86d14f550bf85cff809042e3429ace7af6193c3bc9f/typing-3.6.6-py2-none-any.whl"
+            },
+            {
+                "comment_text": "",
+                "digests": {
+                    "md5": "0c84fda6fd4303fa6aee13a36ea62897",
+                    "sha256": "57dcf675a99b74d64dacf6fba08fb17cf7e3d5fdff53d4a30ea2a5e7e52543d4"
+                },
+                "downloads": -1,
+                "filename": "typing-3.6.6-py3-none-any.whl",
+                "has_sig": false,
+                "md5_digest": "0c84fda6fd4303fa6aee13a36ea62897",
+                "packagetype": "bdist_wheel",
+                "python_version": "py3",
+                "requires_python": null,
+                "size": 25727,
+                "upload_time": "2018-08-26T18:46:06",
+                "url": "https://files.pythonhosted.org/packages/4a/bd/eee1157fc2d8514970b345d69cb9975dcd1e42cd7e61146ed841f6e68309/typing-3.6.6-py3-none-any.whl"
+            },
+            {
+                "comment_text": "",
+                "digests": {
+                    "md5": "64614206b4bdc0864fc0e0bccd69efc9",
+                    "sha256": "4027c5f6127a6267a435201981ba156de91ad0d1d98e9ddc2aa173453453492d"
+                },
+                "downloads": -1,
+                "filename": "typing-3.6.6.tar.gz",
+                "has_sig": false,
+                "md5_digest": "64614206b4bdc0864fc0e0bccd69efc9",
+                "packagetype": "sdist",
+                "python_version": "source",
+                "requires_python": null,
+                "size": 71799,
+                "upload_time": "2018-08-26T18:46:08",
+                "url": "https://files.pythonhosted.org/packages/bf/9b/2bf84e841575b633d8d91ad923e198a415e3901f228715524689495b4317/typing-3.6.6.tar.gz"
+            }
+        ]
+    },
+    "urls": [
+        {
+            "comment_text": "",
+            "digests": {
+                "md5": "7e50dcc98a528f47c8793c980128467c",
+                "sha256": "a4c8473ce11a65999c8f59cb093e70686b6c84c98df58c1dae9b3b196089858a"
+            },
+            "downloads": -1,
+            "filename": "typing-3.6.6-py2-none-any.whl",
+            "has_sig": false,
+            "md5_digest": "7e50dcc98a528f47c8793c980128467c",
+            "packagetype": "bdist_wheel",
+            "python_version": "py2",
+            "requires_python": null,
+            "size": 23560,
+            "upload_time": "2018-08-26T18:46:05",
+            "url": "https://files.pythonhosted.org/packages/cc/3e/29f92b7aeda5b078c86d14f550bf85cff809042e3429ace7af6193c3bc9f/typing-3.6.6-py2-none-any.whl"
+        },
+        {
+            "comment_text": "",
+            "digests": {
+                "md5": "0c84fda6fd4303fa6aee13a36ea62897",
+                "sha256": "57dcf675a99b74d64dacf6fba08fb17cf7e3d5fdff53d4a30ea2a5e7e52543d4"
+            },
+            "downloads": -1,
+            "filename": "typing-3.6.6-py3-none-any.whl",
+            "has_sig": false,
+            "md5_digest": "0c84fda6fd4303fa6aee13a36ea62897",
+            "packagetype": "bdist_wheel",
+            "python_version": "py3",
+            "requires_python": null,
+            "size": 25727,
+            "upload_time": "2018-08-26T18:46:06",
+            "url": "https://files.pythonhosted.org/packages/4a/bd/eee1157fc2d8514970b345d69cb9975dcd1e42cd7e61146ed841f6e68309/typing-3.6.6-py3-none-any.whl"
+        },
+        {
+            "comment_text": "",
+            "digests": {
+                "md5": "64614206b4bdc0864fc0e0bccd69efc9",
+                "sha256": "4027c5f6127a6267a435201981ba156de91ad0d1d98e9ddc2aa173453453492d"
+            },
+            "downloads": -1,
+            "filename": "typing-3.6.6.tar.gz",
+            "has_sig": false,
+            "md5_digest": "64614206b4bdc0864fc0e0bccd69efc9",
+            "packagetype": "sdist",
+            "python_version": "source",
+            "requires_python": null,
+            "size": 71799,
+            "upload_time": "2018-08-26T18:46:08",
+            "url": "https://files.pythonhosted.org/packages/bf/9b/2bf84e841575b633d8d91ad923e198a415e3901f228715524689495b4317/typing-3.6.6.tar.gz"
+        }
+    ]
+}
\ No newline at end of file
diff --git a/tests/pypi/typing/typing-3.6.6-py2-none-any.whl b/tests/pypi/typing/typing-3.6.6-py2-none-any.whl
new file mode 100644
index 00000000..a6dc8ab1
Binary files /dev/null and b/tests/pypi/typing/typing-3.6.6-py2-none-any.whl differ
diff --git a/tests/pypi/typing/typing-3.6.6-py3-none-any.whl b/tests/pypi/typing/typing-3.6.6-py3-none-any.whl
new file mode 100644
index 00000000..f38e8528
Binary files /dev/null and b/tests/pypi/typing/typing-3.6.6-py3-none-any.whl differ
diff --git a/tests/pypi/typing/typing-3.6.6.tar.gz b/tests/pypi/typing/typing-3.6.6.tar.gz
new file mode 100644
index 00000000..26d02727
Binary files /dev/null and b/tests/pypi/typing/typing-3.6.6.tar.gz differ
diff --git a/tests/pypi/wheel/wheel-0.32.3-py2.py3-none-any.whl b/tests/pypi/wheel/wheel-0.32.3-py2.py3-none-any.whl
new file mode 100644
index 00000000..68006a56
Binary files /dev/null and b/tests/pypi/wheel/wheel-0.32.3-py2.py3-none-any.whl differ
