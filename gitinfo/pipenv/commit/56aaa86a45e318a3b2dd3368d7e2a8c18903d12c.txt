commit 56aaa86a45e318a3b2dd3368d7e2a8c18903d12c
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Wed Sep 13 22:41:36 2017 -0400

    potential fix for #539
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/pipenv/cli.py b/pipenv/cli.py
index e6b1f974..bf3f225a 100644
--- a/pipenv/cli.py
+++ b/pipenv/cli.py
@@ -501,15 +501,18 @@ def do_install_dependencies(
     # Allow pip to resolve dependencies when in skip-lock mode.
     no_deps = (not skip_lock)
 
-    # Install default dependencies, always.
-    deps = lockfile['default'] if not only else {}
-    vcs_deps = lockfile.get('default-vcs', {})
+    deps = {}
+    vcs_deps = {}
 
     # Add development deps if --dev was passed.
     if dev:
         deps.update(lockfile['develop'])
         vcs_deps.update(lockfile.get('develop-vcs', {}))
 
+    # Install default dependencies, always.
+    deps.update(lockfile['default'] if not only else {})
+    vcs_deps.update(lockfile.get('default-vcs', {}))
+
     if ignore_hashes:
         # Remove hashes from generated requirements.
         for k, v in deps.items():
