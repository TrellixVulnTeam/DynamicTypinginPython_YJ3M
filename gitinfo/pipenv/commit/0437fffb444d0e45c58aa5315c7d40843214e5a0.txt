commit 0437fffb444d0e45c58aa5315c7d40843214e5a0
Author: Dan Ryan <dan@danryan.co>
Date:   Wed May 23 18:25:46 2018 -0400

    Update piptools patch
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/tasks/vendoring/patches/patched/piptools.patch b/tasks/vendoring/patches/patched/piptools.patch
index 9a50ffe7..9a44883e 100644
--- a/tasks/vendoring/patches/patched/piptools.patch
+++ b/tasks/vendoring/patches/patched/piptools.patch
@@ -406,10 +406,10 @@ index 05ec8fd..6380e8f 100644
      def reverse_dependencies(self, ireqs):
          non_editable = [ireq for ireq in ireqs if not ireq.editable]
 diff --git a/pipenv/patched/piptools/utils.py b/pipenv/patched/piptools/utils.py
-index fde5816..d76695d 100644
+index fde5816..1d732bf 100644
 --- a/pipenv/patched/piptools/utils.py
 +++ b/pipenv/patched/piptools/utils.py
-@@ -43,16 +43,21 @@ def comment(text):
+@@ -43,16 +43,51 @@ def comment(text):
      return style(text, fg='green')
  
  
@@ -432,11 +432,45 @@ index fde5816..d76695d 100644
 +        return InstallRequirement.from_line(
 +            str('{}{}=={}; {}'.format(name, extras_string, version, str(markers))),
 +            constraint=constraint)
++
++
++def _requirement_to_str_lowercase_name(requirement):
++    """
++    Formats a packaging.requirements.Requirement with a lowercase name.
++
++    This is simply a copy of
++    https://github.com/pypa/packaging/blob/16.8/packaging/requirements.py#L109-L124
++    modified to lowercase the dependency name.
++
++    Previously, we were invoking the original Requirement.__str__ method and
++    lowercasing the entire result, which would lowercase the name, *and* other,
++    important stuff that should not be lowercased (such as the marker). See
++    this issue for more information: https://github.com/pypa/pipenv/issues/2113.
++    """
++    parts = [requirement.name.lower()]
++
++    if requirement.extras:
++        parts.append("[{0}]".format(",".join(sorted(requirement.extras))))
++
++    if requirement.specifier:
++        parts.append(str(requirement.specifier))
++
++    if requirement.url:
++        parts.append("@ {0}".format(requirement.url))
++
++    if requirement.marker:
++        parts.append("; {0}".format(requirement.marker))
++
++    return "".join(parts)
  
  
  def format_requirement(ireq, marker=None):
-@@ -66,7 +71,7 @@ def format_requirement(ireq, marker=None):
-         line = str(ireq.req).lower()
+@@ -63,10 +98,10 @@ def format_requirement(ireq, marker=None):
+     if ireq.editable:
+         line = '-e {}'.format(ireq.link)
+     else:
+-        line = str(ireq.req).lower()
++        line = _requirement_to_str_lowercase_name(ireq.req)
  
      if marker:
 -        line = '{} ; {}'.format(line, marker)
