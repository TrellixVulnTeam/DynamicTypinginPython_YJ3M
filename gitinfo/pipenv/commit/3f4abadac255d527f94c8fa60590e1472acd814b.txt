commit 3f4abadac255d527f94c8fa60590e1472acd814b
Author: frostming <frostming@tencent.com>
Date:   Fri May 29 11:02:33 2020 +0800

    Use InstallCommand to fetch options

diff --git a/pipenv/project.py b/pipenv/project.py
index 54d51a65..3d88c897 100644
--- a/pipenv/project.py
+++ b/pipenv/project.py
@@ -682,18 +682,10 @@ class Project(object):
 
     def create_pipfile(self, python=None):
         """Creates the Pipfile, filled with juicy defaults."""
-        from .vendor.pip_shims.shims import (
-            ConfigOptionParser, make_option_group, index_group
-        )
+        from .vendor.pip_shims.shims import InstallCommand
         # Inherit the pip's index configuration of install command.
-        config_parser = ConfigOptionParser(name="install")
-        config_parser.add_option_group(make_option_group(index_group, config_parser))
-        install = config_parser.option_groups[0]
-        indexes = (
-            " ".join(install.get_option("--extra-index-url").default)
-            .lstrip("\n")
-            .split("\n")
-        )
+        command = InstallCommand()
+        indexes = command.cmd_opts.get_option("--extra-index-url").default
         sources = [DEFAULT_SOURCE]
         for i, index in enumerate(indexes):
             if not index:
