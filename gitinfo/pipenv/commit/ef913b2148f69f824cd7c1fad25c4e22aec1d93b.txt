commit ef913b2148f69f824cd7c1fad25c4e22aec1d93b
Author: Dan Ryan <dan@danryan.co>
Date:   Sat Jun 23 20:27:08 2018 -0400

    Tests for #2273 and #2301
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/tests/integration/test_install_basic.py b/tests/integration/test_install_basic.py
index a992d49a..9da44f7d 100644
--- a/tests/integration/test_install_basic.py
+++ b/tests/integration/test_install_basic.py
@@ -355,3 +355,25 @@ chardet
         assert 'six' in p.pipfile['packages']
         assert 'chardet' not in p.pipfile['packages']
         assert 'pytz' not in p.pipfile['packages']
+
+
+@pytest.mark.deploy
+@pytest.mark.system
+def test_system_and_deploy_work(PipenvInstance, pypi):
+    with PipenvInstance(chdir=True, pypi=pypi) as p:
+        c = p.pipenv('install six requests')
+        assert c.return_code == 0
+        c = p.pipenv('--rm')
+        assert c.return_code == 0
+        c = delegator.run('virtualenv .venv')
+        assert c.return_code == 0
+        c = p.pipenv('install --system --deploy')
+        assert c.return_code == 0
+        c = p.pipenv('--rm')
+        assert c.return_code == 0
+        Path(p.pipfile_path).write_text("""
+[packages]
+requests
+        """.strip())
+        c = p.pipenv('install --system')
+        assert c.return_code == 0
