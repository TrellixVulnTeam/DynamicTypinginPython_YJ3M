commit e821cbb194d3c999d77cf61ed54942679bb0602e
Author: Vincent Philippon <sindaewoh@gmail.com>
Date:   Fri Oct 6 12:49:35 2017 -0400

    Reset the InstallRequirement.prepared attribute when yeilding dependencies
    
    Fixes #839
    This well ensure the dependencies are well-fetched on the next iteration
    too.

diff --git a/pipenv/patched/piptools/resolver.py b/pipenv/patched/piptools/resolver.py
index 99f37f48..297f00f2 100755
--- a/pipenv/patched/piptools/resolver.py
+++ b/pipenv/patched/piptools/resolver.py
@@ -276,9 +276,12 @@ class Resolver(object):
             return
         elif ireq.markers:
             for dependency in self.repository.get_dependencies(ireq):
+                dependency.prepared = False
                 yield dependency
+            return
         elif ireq.extras:
             for dependency in self.repository.get_dependencies(ireq):
+                dependency.prepared = False
                 yield dependency
             return
         elif not is_pinned_requirement(ireq):
