commit d851b7ea2d66dff53f50e875e441faf15a16ede4
Author: Dan Ryan <dan@danryan.co>
Date:   Wed Nov 7 10:39:31 2018 -0500

    Fix tomlkit implementation
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/pipenv/vendor/tomlkit/container.py b/pipenv/vendor/tomlkit/container.py
index 3934a05b..5ddd72e7 100644
--- a/pipenv/vendor/tomlkit/container.py
+++ b/pipenv/vendor/tomlkit/container.py
@@ -193,11 +193,11 @@ class Container(dict):
         old_data = self._body[idx][1]
         trivia = getattr(old_data, "trivia", None)
         if trivia and getattr(trivia, "comment", None):
-            self._body[idx] = (None, trivia)
+            self._body[idx] = (None, Comment(Trivia(comment_ws="", comment=trivia.comment)))
         else:
             self._body[idx] = (None, Null())
+            super(Container, self).__delitem__(key.key)
 
-        super(Container, self).__delitem__(key.key)
 
         return self
 
diff --git a/tasks/vendoring/patches/vendor/tomlkit-update-items.patch b/tasks/vendoring/patches/vendor/tomlkit-update-items.patch
index 10e4fcc1..51f6006a 100644
--- a/tasks/vendoring/patches/vendor/tomlkit-update-items.patch
+++ b/tasks/vendoring/patches/vendor/tomlkit-update-items.patch
@@ -1,5 +1,5 @@
 diff --git a/pipenv/vendor/tomlkit/container.py b/pipenv/vendor/tomlkit/container.py
-index 37014921..a425cf79 100644
+index 37014921..5ddd72e7 100644
 --- a/pipenv/vendor/tomlkit/container.py
 +++ b/pipenv/vendor/tomlkit/container.py
 @@ -9,6 +9,7 @@ from .items import Item
@@ -10,7 +10,7 @@ index 37014921..a425cf79 100644
  from .items import Whitespace
  from .items import item as _item
  
-@@ -189,7 +190,12 @@ class Container(dict):
+@@ -189,9 +190,14 @@ class Container(dict):
          if idx is None:
              raise NonExistentKey(key)
  
@@ -18,9 +18,12 @@ index 37014921..a425cf79 100644
 +        old_data = self._body[idx][1]
 +        trivia = getattr(old_data, "trivia", None)
 +        if trivia and getattr(trivia, "comment", None):
-+            self._body[idx] = (None, Trivia(comment_ws="", comment=trivia.comment))
++            self._body[idx] = (None, Comment(Trivia(comment_ws="", comment=trivia.comment)))
 +        else:
 +            self._body[idx] = (None, Null())
++            super(Container, self).__delitem__(key.key)
  
-         super(Container, self).__delitem__(key.key)
+-        super(Container, self).__delitem__(key.key)
+ 
+         return self
  
