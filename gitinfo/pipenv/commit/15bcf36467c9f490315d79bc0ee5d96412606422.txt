commit 15bcf36467c9f490315d79bc0ee5d96412606422
Author: Dan Ryan <dan@danryan.co>
Date:   Thu Jun 21 13:51:31 2018 -0400

    Catch `AttributeErrors` when resolving sdists
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/pipenv/patched/piptools/repositories/pypi.py b/pipenv/patched/piptools/repositories/pypi.py
index 5759ad07..e0023060 100644
--- a/pipenv/patched/piptools/repositories/pypi.py
+++ b/pipenv/patched/piptools/repositories/pypi.py
@@ -282,7 +282,7 @@ class PyPIRepository(BaseRepository):
                         setup_requires = self.finder.get_extras_links(
                             dist.get_metadata_lines('requires.txt')
                         )
-                except (TypeError, ValueError):
+                except (TypeError, ValueError, AttributeError):
                     pass
 
             try:
@@ -339,7 +339,7 @@ class PyPIRepository(BaseRepository):
                 try:
                     dist = ireq.get_dist() if not dist else None
                     ireq.version = ireq.get_dist().version
-                except (ValueError, OSError, TypeError) as e:
+                except (ValueError, OSError, TypeError, AttributeError) as e:
                     pass
             if not getattr(ireq, 'project_name', None):
                 try:
diff --git a/tasks/vendoring/patches/patched/piptools.patch b/tasks/vendoring/patches/patched/piptools.patch
index 096a6358..9b050291 100644
--- a/tasks/vendoring/patches/patched/piptools.patch
+++ b/tasks/vendoring/patches/patched/piptools.patch
@@ -239,7 +239,7 @@ index 1c4b943..c645e08 100644
 +                        setup_requires = self.finder.get_extras_links(
 +                            dist.get_metadata_lines('requires.txt')
 +                        )
-+                except (TypeError, ValueError):
++                except (TypeError, ValueError, AttributeError):
 +                    pass
  
              try:
@@ -287,7 +287,7 @@ index 1c4b943..c645e08 100644
 +                try:
 +                    dist = ireq.get_dist() if not dist else None
 +                    ireq.version = ireq.get_dist().version
-+                except (ValueError, OSError, TypeError) as e:
++                except (ValueError, OSError, TypeError, AttributeError) as e:
 +                    pass
 +            if not getattr(ireq, 'project_name', None):
 +                try:
