commit 91625d7ea0314c330b88b130d84d621e2615d927
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Tue Mar 6 10:16:01 2018 -0500

    only intall if needed
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/run-tests.sh b/run-tests.sh
index 17665155..f6839368 100755
--- a/run-tests.sh
+++ b/run-tests.sh
@@ -22,10 +22,14 @@ if [[ ! -z "$CI" ]]; then
 	TAP_OUTPUT="1"
 	export TAP_OUTPUT
 
-	echo "Installing Pipenv…"
+	if [[ $(openssl dgst -sha256 Pipfile.lock) != $(cat "$RAM_DISK/.venv/Pipfile.lock.sha256") ]]; then
+		echo "Installing Pipenv…"
+
+		pip install -e "$(pwd)" --upgrade --upgrade-strategy=only-if-needed
+		pipenv install --deploy --system --dev
 
-	pip install -e "$(pwd)" --upgrade --upgrade-strategy=only-if-needed
-	pipenv install --deploy --system --dev
+		openssl dgst -sha256 Pipfile.lock > "$RAM_DISK/.venv/Pipfile.lock.sha256"
+	fi
 
 else
 	# Otherwise, assume MacOS…
