commit 8459cd8d45de720e383faebb80de2f998bde0722
Author: Dan Ryan <dan@danryan.co>
Date:   Tue Oct 30 01:11:54 2018 -0400

    Fix requirementslib update
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/pipenv/vendor/requirementslib/models/requirements.py b/pipenv/vendor/requirementslib/models/requirements.py
index b3bc0132..4f392696 100644
--- a/pipenv/vendor/requirementslib/models/requirements.py
+++ b/pipenv/vendor/requirementslib/models/requirements.py
@@ -597,7 +597,7 @@ class VCSRequirement(FileRequirement):
     def get_vcs_repo(self, src_dir=None):
         from .vcs import VCSRepository
         checkout_dir = self.get_checkout_dir(src_dir=src_dir)
-        url = build_vcs_link(
+        link = build_vcs_link(
             self.vcs,
             self.uri,
             name=self.name,
@@ -606,7 +606,7 @@ class VCSRequirement(FileRequirement):
             extras=self.extras
         )
         vcsrepo = VCSRepository(
-            url=url,
+            url=link.url,
             name=self.name,
             ref=self.ref if self.ref else None,
             checkout_directory=checkout_dir,
