commit 040ae11a4197ef5d62f07da63d6b94aaabdd6af4
Author: Dan Ryan <dan@danryan.co>
Date:   Sat Jun 16 03:07:19 2018 -0400

    Update scandir to avoid importing from system lib
    
    - Update lockfile with py2 deps
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/Pipfile.lock b/Pipfile.lock
index 564e515e..45a16363 100644
--- a/Pipfile.lock
+++ b/Pipfile.lock
@@ -96,6 +96,13 @@
             "markers": "sys_platform == 'win32'",
             "version": "==0.3.9"
         },
+        "configparser": {
+            "hashes": [
+                "sha256:5308b47021bc2340965c371f0f058cc6971a04502638d4244225c49d80db273a"
+            ],
+            "markers": "python_version < '3.2'",
+            "version": "==3.5.0"
+        },
         "docutils": {
             "hashes": [
                 "sha256:02aec4bd92ab067f6ff27a38a38a41173bf01bed8f89157768c1573f53e474a6",
@@ -104,6 +111,16 @@
             ],
             "version": "==0.14"
         },
+        "enum34": {
+            "hashes": [
+                "sha256:2d81cbbe0e73112bdfe6ef8576f2238f2ba27dd0d55752a776c41d38b7da2850",
+                "sha256:644837f692e5f550741432dd3f223bbb9852018674981b1664e5dc339387588a",
+                "sha256:6bd0f6ad48ec2aa117d3d141940d484deccda84d4fcd884f5c3d93c23ecd8c79",
+                "sha256:8ad8c4783bf61ded74527bffb48ed9b54166685e4230386a9ed9b1279e2df5b1"
+            ],
+            "markers": "python_version < '3.4'",
+            "version": "==1.1.6"
+        },
         "execnet": {
             "hashes": [
                 "sha256:a7a84d5fa07a089186a329528f127c9d73b9de57f1a1131b82bb5320ee651f6a",
@@ -134,6 +151,14 @@
             ],
             "version": "==1.0.2"
         },
+        "funcsigs": {
+            "hashes": [
+                "sha256:330cc27ccbf7f1e992e69fef78261dc7c6569012cf397db8d3de0234e6c937ca",
+                "sha256:a7bb0f2cf3a3fd1ab2732cb49eba4252c2af4240442415b4abce3b87022a8f50"
+            ],
+            "markers": "python_version < '3.0'",
+            "version": "==1.0.2"
+        },
         "idna": {
             "hashes": [
                 "sha256:156a6814fb5ac1fc6850fb002e0852d56c0c8d2531923a51032d1b70760e186e",
@@ -400,6 +425,15 @@
             ],
             "version": "==4.23.4"
         },
+        "typing": {
+            "hashes": [
+                "sha256:3a887b021a77b292e151afb75323dea88a7bc1b3dfa92176cff8e44c8b68bddf",
+                "sha256:b2c689d54e1144bbcfd191b0832980a21c2dbcf7b5ff7a66248a60c90e951eb8",
+                "sha256:d400a9344254803a2368533e4533a4200d21eb7b6b729c173bc38201a74db3f2"
+            ],
+            "markers": "python_version < '3.5'",
+            "version": "==3.6.4"
+        },
         "twine": {
             "hashes": [
                 "sha256:08eb132bbaec40c6d25b358f546ec1dc96ebd2638a86eea68769d9e67fe2b129",
diff --git a/pipenv/vendor/scandir.py b/pipenv/vendor/scandir.py
index 2e47a397..2b2ade30 100644
--- a/pipenv/vendor/scandir.py
+++ b/pipenv/vendor/scandir.py
@@ -26,10 +26,7 @@ import collections
 import os
 import sys
 
-try:
-    import _scandir
-except ImportError:
-    _scandir = None
+_scandir = None
 
 try:
     import ctypes
diff --git a/tasks/vendoring/__init__.py b/tasks/vendoring/__init__.py
index 29e26b3e..f0e4eddf 100644
--- a/tasks/vendoring/__init__.py
+++ b/tasks/vendoring/__init__.py
@@ -343,6 +343,21 @@ def vendor(ctx, vendor_dir, rewrite=True):
             remove_all(msgpack.glob('*.so'))
 
 
+@invoke.task
+def redo_imports(ctx, library):
+    vendor_dir = _get_vendor_dir(ctx)
+    log('Using vendor dir: %s' % vendor_dir)
+    vendored_libs = detect_vendored_libs(vendor_dir)
+    item = vendor_dir / library
+    library_name = vendor_dir / '{0}.py'.format(library)
+    log("Detected vendored libraries: %s" % ", ".join(vendored_libs))
+    log('Rewriting imports for %s...' % item)
+    if item.is_dir():
+        rewrite_imports(item, vendored_libs, vendor_dir)
+    else:
+        rewrite_file_imports(library_name, vendored_libs, vendor_dir)
+
+
 @invoke.task
 def rewrite_all_imports(ctx):
     vendor_dir = _get_vendor_dir(ctx)
diff --git a/tasks/vendoring/patches/vendor/drop_scandir_import.patch b/tasks/vendoring/patches/vendor/drop_scandir_import.patch
new file mode 100644
index 00000000..66799efc
--- /dev/null
+++ b/tasks/vendoring/patches/vendor/drop_scandir_import.patch
@@ -0,0 +1,16 @@
+diff --git a/pipenv/vendor/scandir.py b/pipenv/vendor/scandir.py
+index 2e47a397..2b2ade30 100644
+--- a/pipenv/vendor/scandir.py
++++ b/pipenv/vendor/scandir.py
+@@ -26,10 +26,7 @@ import collections
+ import os
+ import sys
+ 
+-try:
+-    import _scandir
+-except ImportError:
+-    _scandir = None
++_scandir = None
+ 
+ try:
+     import ctypes
