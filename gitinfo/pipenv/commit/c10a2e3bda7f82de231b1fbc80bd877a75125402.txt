commit c10a2e3bda7f82de231b1fbc80bd877a75125402
Author: Dan Ryan <dan@danryan.co>
Date:   Mon May 27 19:02:27 2019 -0400

    Update azure steps
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/.azure-pipelines/steps/run-tests-linux.yml b/.azure-pipelines/steps/run-tests-linux.yml
index 0298e4ad..7d63d812 100644
--- a/.azure-pipelines/steps/run-tests-linux.yml
+++ b/.azure-pipelines/steps/run-tests-linux.yml
@@ -1,3 +1,6 @@
+parameters:
+  python_version: ''
+
 steps:
 - script: |
     # Fix Git SSL errors
@@ -9,7 +12,7 @@ steps:
     PY_EXE: $(PY_EXE)
     GIT_SSL_CAINFO: $(GIT_SSL_CAINFO)
     LANG: $(LANG)
-    PIP_PROCESS_DEPENDENCY_LINKS: $(PIP_PROCESS_DEPENDENCY_LINKS)
-    PIPENV_DEFAULT_PYTHON_VERSION: $(PIPENV_DEFAULT_PYTHON_VERSION)
+    PIP_PROCESS_DEPENDENCY_LINKS: '$(PIP_PROCESS_DEPENDENCY_LINKS)'
+    PIPENV_DEFAULT_PYTHON_VERSION: '${{ parameters.python_version }}'
     PYTHONWARNINGS: ignore:DEPRECATION
     PIPENV_NOSPIN: '1'
diff --git a/.azure-pipelines/steps/run-tests-windows.yml b/.azure-pipelines/steps/run-tests-windows.yml
index 5d854a9b..21e7e49d 100644
--- a/.azure-pipelines/steps/run-tests-windows.yml
+++ b/.azure-pipelines/steps/run-tests-windows.yml
@@ -1,3 +1,6 @@
+parameters:
+  python_version: ''
+
 steps:
 - powershell: |
     subst T: "$env:TEMP"
@@ -11,6 +14,6 @@ steps:
     pipenv run pytest -ra --ignore=pipenv\patched --ignore=pipenv\vendor --junitxml=test-results.xml tests
   displayName: Run integration tests
   env:
-    PIPENV_DEFAULT_PYTHON_VERSION: $(PIPENV_DEFAULT_PYTHON_VERSION)
+    PIPENV_DEFAULT_PYTHON_VERSION: '${{ parameters.python_version }}'
     PYTHONWARNINGS: 'ignore:DEPRECATION'
     PIPENV_NOSPIN: '1'
diff --git a/.azure-pipelines/steps/run-tests.yml b/.azure-pipelines/steps/run-tests.yml
index f559b8ca..9740a4fd 100644
--- a/.azure-pipelines/steps/run-tests.yml
+++ b/.azure-pipelines/steps/run-tests.yml
@@ -17,8 +17,12 @@ steps:
 
 - ${{ if eq(parameters.vmImage, 'windows-2019') }}:
   - template: run-tests-windows.yml
+    parameters:
+      python.version: $(python.version)
 - ${{ if ne(parameters.vmImage, 'windows-2019') }}:
   - template: run-tests-linux.yml
+    parameters:
+      python.version: $(python.version)
 
 - task: PublishTestResults@2
   displayName: Publish Test Results
