commit b8755151f60ebc48d2c33e31828bed23f2f06f7b
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Fri Feb 23 13:40:47 2018 -0500

    fix for lock -r
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/.gitignore b/.gitignore
index 1cd68ee1..0f6d4984 100644
--- a/.gitignore
+++ b/.gitignore
@@ -17,3 +17,5 @@ Pipfile.lock
 /.pytest_cache/
 
 /.env
+
+/requirements.txt
diff --git a/pipenv/core.py b/pipenv/core.py
index b0a128de..1f44432d 100644
--- a/pipenv/core.py
+++ b/pipenv/core.py
@@ -798,13 +798,11 @@ def do_install_dependencies(
         # requirements.txt, for pip.
 
         # Additional package selectors, specific to pip's --hash checking mode.
-        EXCLUDED_PACKAGES = list(BAD_PACKAGES) + ['-e .'] + ['-e file://'] + ['file://']
         for l in (deps_list, dev_deps_list):
             for i, dep in enumerate(l):
-                for bad_package in EXCLUDED_PACKAGES:
-                    if dep[0].startswith(bad_package):
-                        l[i] = list(l[i])
-                        l[i][0] = '# {0}'.format(l[i][0])
+                if '--hash' not in dep[0]:
+                    l[i] = list(l[i])
+                    l[i][0] = '# {0}'.format(l[i][0])
 
         # Output only default dependencies
         if not dev:
