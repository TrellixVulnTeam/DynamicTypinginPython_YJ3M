commit 8cd08f109356013babd79895f3a862296336043d
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Wed Sep 6 01:52:04 2017 -0400

    write out host_508_specifiers
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/pipenv/cli.py b/pipenv/cli.py
index 6730b925..76ca9c31 100644
--- a/pipenv/cli.py
+++ b/pipenv/cli.py
@@ -496,6 +496,10 @@ def do_lock(no_hashes=True):
             if not no_hashes:
                 lockfile['default'][dep['name']]['hash'] = dep['hash']
 
+        # Run the PEP 508 checker in the virtualenv, add it to the lockfile.
+        c = delegator.run('"{0}" {1}'.format(which('python'), pep508checker.__file__.rstrip('cdo')))
+        lockfile['_meta']['host_508_specifiers'] = json.loads(c.out)
+
         # Write out the lockfile.
         with open(project.lockfile_location, 'w') as f:
             json.dump(lockfile, f, indent=4, separators=(',', ': '), sort_keys=True)
@@ -546,6 +550,10 @@ def do_lock(no_hashes=True):
             if not no_hashes:
                 lockfile['default'][dep['name']]['hash'] = dep['hash']
 
+        # Run the PEP 508 checker in the virtualenv, add it to the lockfile.
+        c = delegator.run('"{0}" {1}'.format(which('python'), pep508checker.__file__.rstrip('cdo')))
+        lockfile['_meta']['host_508_specifiers'] = json.loads(c.out)
+
         # Write out lockfile.
         with open(project.lockfile_location, 'w') as f:
             json.dump(lockfile, f, indent=4, separators=(',', ': '), sort_keys=True)
