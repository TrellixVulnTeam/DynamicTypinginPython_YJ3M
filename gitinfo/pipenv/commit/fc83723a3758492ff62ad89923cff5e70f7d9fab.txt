commit fc83723a3758492ff62ad89923cff5e70f7d9fab
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Sat Feb 17 11:34:56 2018 -0500

    fix bug
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/pipenv/core.py b/pipenv/core.py
index b443c46d..8fd5d814 100644
--- a/pipenv/core.py
+++ b/pipenv/core.py
@@ -787,19 +787,20 @@ def do_install_dependencies(
     )
     failed_deps_list = []
 
-    # Comment out packages that shouldn't be included in
-    # requirements.txt, for pip.
-
-    # Additional package selectors, specific to pip's --hash checking mode.
-    EXCLUDED_PACKAGES = list(BAD_PACKAGES) + ['-e .'] + ['-e file://'] + ['file://']
-    for l in (deps_list, dev_deps_list):
-        for i, dep in enumerate(l):
-            for bad_package in EXCLUDED_PACKAGES:
-                if dep[0].startswith(bad_package):
-                    l[i] = list(l[i])
-                    l[i][0] = '# {0}'.format(l[i][0])
-
     if requirements:
+
+        # Comment out packages that shouldn't be included in
+        # requirements.txt, for pip.
+
+        # Additional package selectors, specific to pip's --hash checking mode.
+        EXCLUDED_PACKAGES = list(BAD_PACKAGES) + ['-e .'] + ['-e file://'] + ['file://']
+        for l in (deps_list, dev_deps_list):
+            for i, dep in enumerate(l):
+                for bad_package in EXCLUDED_PACKAGES:
+                    if dep[0].startswith(bad_package):
+                        l[i] = list(l[i])
+                        l[i][0] = '# {0}'.format(l[i][0])
+
         # Output only default dependencies
         if not dev:
             click.echo('\n'.join(d[0] for d in deps_list))
