commit 67fadafe58e7006d1bee42943f6f3f9a1f2997a5
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Wed Mar 7 06:31:57 2018 -0500

    clean up script
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/run-tests.sh b/run-tests.sh
index 2b1d90d1..6ac53b2f 100755
--- a/run-tests.sh
+++ b/run-tests.sh
@@ -22,15 +22,24 @@ if [[ ! -z "$CI" ]]; then
 	TAP_OUTPUT="1"
 	export TAP_OUTPUT
 
-	if [[ $(openssl dgst -sha256 Pipfile.lock) != $(cat "$RAM_DISK/Pipfile.lock.sha256") ]]; then
-		echo "Installing Pipenv…"
+	if [[ -f "$RAM_DISK/Pipfile.lock.sha256" ]]; then
+		if [[ $(openssl dgst -sha256 Pipfile.lock) != $(cat "$RAM_DISK/Pipfile.lock.sha256") ]]; then
+			INSTALL_PIPENV=1
+			echo "Installing Pipenv…"
+		fi
+	else
+		INSTALL_PIPENV=1
+	fi
 
+	if [[ "$INSTALL_PIPENV" ]]; then
 		pip install -e "$(pwd)" --upgrade --upgrade-strategy=only-if-needed
 		pipenv install --deploy --system --dev
 
 		openssl dgst -sha256 Pipfile.lock > "$RAM_DISK/Pipfile.lock.sha256"
 	fi
 
+
+
 else
 	# Otherwise, assume MacOS…
 	if [[ $(python -c "import sys; print(sys.platform)") == "darwin" ]]; then
