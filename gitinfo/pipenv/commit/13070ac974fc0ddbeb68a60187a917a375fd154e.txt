commit 13070ac974fc0ddbeb68a60187a917a375fd154e
Author: Jeff Tratner <jtratner@counsyl.com>
Date:   Tue Mar 20 10:40:11 2018 -0700

    Fix environment variable expansion with extras

diff --git a/pipenv/vendor/pipfile/api.py b/pipenv/vendor/pipfile/api.py
index 12bd27b9..0c0aa517 100644
--- a/pipenv/vendor/pipfile/api.py
+++ b/pipenv/vendor/pipfile/api.py
@@ -4,6 +4,7 @@ import codecs
 import json
 import hashlib
 import platform
+import six
 import sys
 import os
 
@@ -69,9 +70,10 @@ class PipfileParser(object):
 
         if not d:
             return d
-
+        if isinstance(d, six.string_types):
+            return os.path.expandvars(d)
         for k, v in d.items():
-            if isinstance(v, str):
+            if isinstance(v, six.string_types):
                 d[k] = os.path.expandvars(v)
             elif isinstance(v, dict):
                 d[k] = self.inject_environment_variables(v)
