commit d73879b5e57773973fdeb362d97bef7f46762046
Author: Dan Ryan <dan@danryan.co>
Date:   Tue Nov 13 01:01:49 2018 -0500

    Update requirementslib
    
    - Fix ref parsing
    - Fixes #3214
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/pipenv/vendor/requirementslib/__init__.py b/pipenv/vendor/requirementslib/__init__.py
index 05fd1943..f6c985d3 100644
--- a/pipenv/vendor/requirementslib/__init__.py
+++ b/pipenv/vendor/requirementslib/__init__.py
@@ -1,5 +1,5 @@
 # -*- coding=utf-8 -*-
-__version__ = '1.2.6'
+__version__ = '1.2.7'
 
 import logging
 import warnings
diff --git a/pipenv/vendor/requirementslib/models/requirements.py b/pipenv/vendor/requirementslib/models/requirements.py
index d5330b48..d034a12d 100644
--- a/pipenv/vendor/requirementslib/models/requirements.py
+++ b/pipenv/vendor/requirementslib/models/requirements.py
@@ -891,8 +891,8 @@ class VCSRequirement(FileRequirement):
             name = link.egg_fragment
         subdirectory = link.subdirectory_fragment
         ref = None
-        if "@" in link.show_url and "@" in uri:
-            uri, ref = uri.rsplit("@", 1)
+        if "@" in link.path and "@" in uri:
+            uri, _, ref = uri.rpartition("@")
         if relpath and "@" in relpath:
             relpath, ref = relpath.rsplit("@", 1)
         return cls(
