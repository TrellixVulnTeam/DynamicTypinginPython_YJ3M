commit 495ba0f94ee356d56946e72d28238b96fe8e2195
Author: Grey Baker <greysteil@gmail.com>
Date:   Thu Apr 12 18:33:13 2018 +0100

    Check whether dependency exists in old lockfile during keep-updated lock

diff --git a/pipenv/core.py b/pipenv/core.py
index ddaf5efc..05530bc3 100644
--- a/pipenv/core.py
+++ b/pipenv/core.py
@@ -1136,11 +1136,12 @@ def do_lock(
             for package_specified in section:
                 norm_name = pep423_name(package_specified)
                 if not is_pinned(section[package_specified]):
-                    lockfile[section_name][norm_name] = cached_lockfile[
-                        section_name
-                    ][
-                        norm_name
-                    ]
+                    if norm_name in cached_lockfile[section_name]:
+                        lockfile[section_name][norm_name] = cached_lockfile[
+                            section_name
+                        ][
+                            norm_name
+                        ]
     # Overwrite any develop packages with default packages.
     for default_package in lockfile['default']:
         if default_package in lockfile['develop']:
