commit 8e92aacb831e007ff41846e208c118d20c570964
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Fri Sep 1 18:16:47 2017 -0400

    support custom indexes
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/pipenv/cli.py b/pipenv/cli.py
index ef929f8d..ca800d24 100644
--- a/pipenv/cli.py
+++ b/pipenv/cli.py
@@ -453,7 +453,7 @@ def do_lock(no_hashes=True):
 
         # Resolve dev-package dependencies.
         deps = convert_deps_to_pip(project.parsed_pipfile.get('dev-packages', {}), r=False)
-        results = resolve_deps(deps)
+        results = resolve_deps(deps, sources=project.sources)
 
         # Add develop dependencies to lockfile.
         for dep in results:
@@ -464,7 +464,7 @@ def do_lock(no_hashes=True):
 
         # Resolve package dependencies.
         deps = convert_deps_to_pip(project.parsed_pipfile.get('packages', {}), r=False)
-        results = resolve_deps(deps)
+        results = resolve_deps(deps, sources=project.sources)
 
         # Add default dependencies to lockfile.
         for dep in results:
diff --git a/pipenv/utils.py b/pipenv/utils.py
index 63fcbfae..d587e24e 100644
--- a/pipenv/utils.py
+++ b/pipenv/utils.py
@@ -20,7 +20,7 @@ class PipCommand(pip.basecommand.Command):
     name = 'PipCommand'
 
 
-def resolve_deps(deps):
+def resolve_deps(deps, sources=None):
 
     constraints = []
 
@@ -29,7 +29,12 @@ def resolve_deps(deps):
         constraints.append(constraint)
 
     pip_command = get_pip_command()
+
     pip_args = []
+
+    if sources:
+        pip_args.extend(['i', sources[0]['url']])
+
     pip_options, _ = pip_command.parse_args(pip_args)
 
     pypi = PyPIRepository(pip_options=pip_options, session=requests)
