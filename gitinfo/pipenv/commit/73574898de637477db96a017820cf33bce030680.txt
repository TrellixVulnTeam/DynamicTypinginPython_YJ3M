commit 73574898de637477db96a017820cf33bce030680
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Fri Oct 6 09:59:28 2017 -0400

    cleanup_toml
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/pipenv/project.py b/pipenv/project.py
index d4505a20..027da542 100644
--- a/pipenv/project.py
+++ b/pipenv/project.py
@@ -13,7 +13,7 @@ import toml
 
 from .utils import (
     mkdir_p, convert_deps_from_pip, pep423_name, recase_file,
-    find_requirements, is_file, is_vcs, python_version
+    find_requirements, is_file, is_vcs, python_version, cleanup_toml
 )
 from .environments import PIPENV_MAX_DEPTH, PIPENV_VENV_IN_PROJECT
 from .environments import PIPENV_VIRTUALENV, PIPENV_PIPFILE
@@ -408,6 +408,7 @@ class Project(object):
 
             formatted_data = toml.dumps(data).rstrip()
 
+        formatted_data = cleanup_toml(formatted_data)
         with open(path, 'w') as f:
             f.write(formatted_data)
 
diff --git a/pipenv/utils.py b/pipenv/utils.py
index 94b6fdec..eeacb4f0 100644
--- a/pipenv/utils.py
+++ b/pipenv/utils.py
@@ -262,6 +262,31 @@ packages = [
 ]
 
 
+def cleanup_toml(tml):
+    toml = tml.split('\n')
+    new_toml = []
+
+    # Remove all empty lines from TOML.
+    for line in toml:
+        if line.strip():
+            new_toml.append(line)
+
+    toml = '\n'.join(new_toml)
+    new_toml = []
+
+    # Add newlines between TOML sections.
+    for i, line in enumerate(toml.split('\n')):
+        # Skip the first line.
+        if i > 0:
+            if line.startswith('['):
+                new_toml.append('\n')
+
+        new_toml.append(line)
+
+    toml = '\n'.join(new_toml)
+    return toml
+
+
 def suggest_package(package):
     """Suggests a package name, given a package name."""
     if SESSION_IS_INTERACTIVE:
