commit 9b8c86481ce9f476d54797cc4e6d4b963ecca939
Author: Yannick PEROUX <yannick.peroux@gmail.com>
Date:   Thu Oct 12 15:52:37 2017 +0200

    Add regression tests for #887

diff --git a/tests/test_pipenv.py b/tests/test_pipenv.py
index 22c08809..c2355e5c 100644
--- a/tests/test_pipenv.py
+++ b/tests/test_pipenv.py
@@ -586,6 +586,38 @@ pytest = "==3.1.1"
             for req in req_list:
                 assert req in c.out
 
+    @pytest.mark.lock
+    @pytest.mark.complex
+    def test_complex_lock_with_vcs_deps(self):
+
+        with PipenvInstance() as p:
+            with open(p.pipfile_path, 'w') as f:
+                contents = """
+[packages]
+click = "==6.7"
+
+[dev-packages]
+requests = {git = "https://github.com/requests/requests", egg = "requests"}
+                """.strip()
+                f.write(contents)
+
+            c = p.pipenv('install')
+            assert c.return_code == 0
+            lock = p.lockfile
+            assert 'requests' in lock['develop']
+            assert 'click' in lock['default']
+
+            c = p.pipenv('run pip install -e git+https://github.com/dateutil/dateutil#egg=python_dateutil')
+            assert c.return_code == 0
+
+            c = p.pipenv('lock')
+            assert c.return_code == 0
+            lock = p.lockfile
+            assert 'requests' in lock['develop']
+            assert 'click' in lock['default']
+            assert 'python_dateutil' not in lock['default']
+            assert 'python_dateutil' not in lock['develop']
+
     @pytest.mark.lock
     @pytest.mark.requirements
     @pytest.mark.complex
