commit 2dc999292e22cc8c9243868bf5917f8468aa16b5
Author: Tzu-ping Chung <uranusjr@gmail.com>
Date:   Wed May 2 17:07:49 2018 +0800

    Use the mock PyPI

diff --git a/tests/integration/test_lock.py b/tests/integration/test_lock.py
index 7aa9bc42..a14b8b10 100644
--- a/tests/integration/test_lock.py
+++ b/tests/integration/test_lock.py
@@ -258,11 +258,11 @@ def test_lock_updated_source(PipenvInstance, pypi):
         with open(p.pipfile_path, 'w') as f:
             contents = """
 [[source]]
-url = "https://pypi.python.org/${MY_ENV_VAR}"
+url = "{url}/${{MY_ENV_VAR}}"
 
 [packages]
 requests = "==2.14.0"
-            """.strip()
+            """.strip().format(url=pypi.url)
             f.write(contents)
 
         os.environ['MY_ENV_VAR'] = 'simple'
@@ -275,11 +275,11 @@ requests = "==2.14.0"
         with open(p.pipfile_path, 'w') as f:
             contents = """
 [[source]]
-url = "https://pypi.python.org/simple"
+url = "{url}/simple"
 
 [packages]
 requests = "==2.14.0"
-            """.strip()
+            """.strip().format(url=pypi.url)
             f.write(contents)
 
         c = p.pipenv('lock')
