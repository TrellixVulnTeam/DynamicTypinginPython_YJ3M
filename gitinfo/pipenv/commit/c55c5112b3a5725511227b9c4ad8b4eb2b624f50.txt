commit c55c5112b3a5725511227b9c4ad8b4eb2b624f50
Author: frostming <frostming@tencent.com>
Date:   Mon Mar 11 08:58:19 2019 +0800

    move the logic to a function

diff --git a/pipenv/environments.py b/pipenv/environments.py
index 24ea5631..1408c99c 100644
--- a/pipenv/environments.py
+++ b/pipenv/environments.py
@@ -13,6 +13,15 @@ from .vendor.vistir.misc import fs_str
 # I hope I can remove this one day.
 os.environ["PYTHONDONTWRITEBYTECODE"] = fs_str("1")
 
+
+def _is_env_truthy(name):
+    """An environment variable is truthy if it exists and isn't one of (0, false, no, off)
+    """
+    if name not in os.environ:
+        return False
+    return os.environ.get(name).lower() not in ("0", "false", "no", "off")
+
+
 PIPENV_IS_CI = bool("CI" in os.environ or "TF_BUILD" in os.environ)
 
 # HACK: Prevent invalid shebangs with Homebrew-installed Python:
@@ -70,18 +79,15 @@ Default is to detect emulators automatically. This should be set if your
 emulator, e.g. Cmder, cannot be detected correctly.
 """
 
-PIPENV_HIDE_EMOJIS = os.environ.get("PIPENV_HIDE_EMOJIS")
+PIPENV_HIDE_EMOJIS = (
+    os.environ.get("PIPENV_HIDE_EMOJIS") is None
+    and (os.name == "nt" or PIPENV_IS_CI)
+    or _is_env_truthy("PIPENV_HIDE_EMOJIS")
+)
 """Disable emojis in output.
 
 Default is to show emojis. This is automatically set on Windows.
 """
-if (PIPENV_HIDE_EMOJIS is None and (os.name == "nt" or PIPENV_IS_CI)) or (
-    PIPENV_HIDE_EMOJIS is not None
-    and PIPENV_HIDE_EMOJIS.lower() not in ('0', 'false', 'no')
-):
-    PIPENV_HIDE_EMOJIS = True
-else:
-    PIPENV_HIDE_EMOJIS = False
 
 PIPENV_IGNORE_VIRTUALENVS = bool(os.environ.get("PIPENV_IGNORE_VIRTUALENVS"))
 """If set, Pipenv will always assign a virtual environment for this project.
