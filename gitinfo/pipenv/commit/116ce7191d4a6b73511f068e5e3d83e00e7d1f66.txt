commit 116ce7191d4a6b73511f068e5e3d83e00e7d1f66
Author: Tzu-ping Chung <uranusjr@gmail.com>
Date:   Fri May 4 02:39:53 2018 +0800

    Better test errors and remove useless newline=''

diff --git a/tests/integration/test_project.py b/tests/integration/test_project.py
index 68caad84..4808dd2d 100644
--- a/tests/integration/test_project.py
+++ b/tests/integration/test_project.py
@@ -87,10 +87,12 @@ def test_maintain_file_line_endings(PipenvInstance, pypi, newlines):
 
         # Rewrite each file with parameterized newlines
         for fn in [p.pipfile_path, p.lockfile_path]:
-            with io.open(fn, newline='') as f:
+            with io.open(fn) as f:
                 contents = f.read()
                 written_newlines = f.newlines
-            assert written_newlines == u'\n'
+            assert written_newlines == u'\n', '{0!r} != {1!r} for {2}'.format(
+                written_newlines, u'\n', fn,
+            )
             with io.open(fn, 'w', newline=newlines) as f:
                 f.write(contents)
 
@@ -100,7 +102,9 @@ def test_maintain_file_line_endings(PipenvInstance, pypi, newlines):
 
         # Make sure we kept the right newlines
         for fn in [p.pipfile_path, p.lockfile_path]:
-            with io.open(fn, newline='') as f:
-                contents = f.read()
+            with io.open(fn) as f:
+                f.read()    # Consumes the content to detect newlines.
                 actual_newlines = f.newlines
-            assert actual_newlines == newlines
+            assert actual_newlines == newlines, '{0!r} != {1!r} for {2}'.format(
+                actual_newlines, newlines, fn,
+            )
