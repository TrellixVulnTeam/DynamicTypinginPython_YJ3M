commit bc37beaef43de351a1a215bea1c6fad678774233
Author: frostming <frostming@tencent.com>
Date:   Mon May 20 16:42:18 2019 +0800

    cleanup

diff --git a/pipenv/core.py b/pipenv/core.py
index f90c60d1..7f04ac49 100644
--- a/pipenv/core.py
+++ b/pipenv/core.py
@@ -242,16 +242,15 @@ def import_from_code(path="."):
 
     rs = []
     try:
-        for r in pipreqs.get_all_imports(path, encoding="utf-8"):
-            click.echo(r)
+        for r in pipreqs.get_all_imports(
+            path, encoding="utf-8", extra_ignore_dirs=[".venv"]
+        ):
             if r not in BAD_PACKAGES:
                 rs.append(r)
         pkg_names = pipreqs.get_pkg_names(rs)
         return [proper_case(r) for r in pkg_names]
 
     except Exception:
-        import traceback
-        traceback.print_exc()
         return []
 
 
diff --git a/pipenv/vendor/pipreqs/pipreqs.py b/pipenv/vendor/pipreqs/pipreqs.py
index c0466adf..791168a9 100644
--- a/pipenv/vendor/pipreqs/pipreqs.py
+++ b/pipenv/vendor/pipreqs/pipreqs.py
@@ -68,7 +68,7 @@ def get_all_imports(path, encoding=None, extra_ignore_dirs=None):
 
         candidates.append(os.path.basename(root))
         files = [fn for fn in files if os.path.splitext(fn)[1] == ".py"]
-        print(root, files)
+
         candidates += [os.path.splitext(fn)[0] for fn in files]
         for file_name in files:
             with open_func(os.path.join(root, file_name), "r", encoding=encoding) as f:
diff --git a/tests/integration/test_cli.py b/tests/integration/test_cli.py
index ae5db176..f131ae44 100644
--- a/tests/integration/test_cli.py
+++ b/tests/integration/test_cli.py
@@ -220,20 +220,17 @@ def test_install_parse_error(PipenvInstance, pypi):
 @pytest.mark.needs_internet(reason='required by check')
 def test_check_unused(PipenvInstance, pypi):
     with PipenvInstance(chdir=True, pypi=pypi) as p:
-        os.makedirs('mypackage')
-        with open('mypackage/__init__.py', 'w') as f:
+        with open('__init__.py', 'w') as f:
             contents = """
 import tablib
 import records
 import flask
             """.strip()
             f.write(contents)
-        p.pipenv('install requests')
-        p.pipenv('install tablib')
-        p.pipenv('install flask')
+        p.pipenv('install requests tablib flask')
 
         assert all(pkg in p.pipfile['packages'] for pkg in ['requests', 'tablib', 'flask'])
 
-        c = p.pipenv('check --unused mypackage')
+        c = p.pipenv('check --unused .')
         assert 'tablib' not in c.out
         assert 'flask' not in c.out
