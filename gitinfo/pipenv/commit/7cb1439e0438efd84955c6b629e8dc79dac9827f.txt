commit 7cb1439e0438efd84955c6b629e8dc79dac9827f
Author: Kenneth Reitz <me@kennethreitz.org>
Date:   Fri Mar 9 09:57:24 2018 -0500

    fix bug
    
    Signed-off-by: Kenneth Reitz <me@kennethreitz.org>

diff --git a/pipenv/patched/piptools/repositories/pypi.py b/pipenv/patched/piptools/repositories/pypi.py
index 350ea0c0..6cb27745 100755
--- a/pipenv/patched/piptools/repositories/pypi.py
+++ b/pipenv/patched/piptools/repositories/pypi.py
@@ -164,27 +164,29 @@ class PyPIRepository(BaseRepository):
 
     def get_dependencies(self, ireq):
         json_results = set()
-
+        json_raised = False
         if self.use_json:
             try:
                 json_results = self.get_json_dependencies(ireq)
             except TypeError:
+                json_raised = True
                 json_results = set()
 
+
+        legacy_raised = False
         try:
             legacy_results = self.get_legacy_dependencies(ireq)
         except Exception:
+            legacy_raised = True
             legacy_results = set()
 
-        results = json_results | legacy_results
-
-        if not len(results):
+        if all((legacy_raised, json_raised)):
             raise ValueError(
                 'Your dependencies could not be resolved.\n'
                 'Please run "$ pipenv-resolver {0!r} --verbose" to debug.'.format(str(ireq.req))
             )
 
-        return results
+        return json_results | legacy_results
 
     def get_legacy_dependencies(self, ireq):
         """
