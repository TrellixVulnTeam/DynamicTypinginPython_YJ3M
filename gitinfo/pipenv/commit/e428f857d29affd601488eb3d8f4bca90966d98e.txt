commit e428f857d29affd601488eb3d8f4bca90966d98e
Author: Tzu-ping Chung <uranusjr@gmail.com>
Date:   Thu Apr 12 18:14:31 2018 +0800

    Better finalize mock

diff --git a/pipenv/utils.py b/pipenv/utils.py
index af84e490..832105fa 100644
--- a/pipenv/utils.py
+++ b/pipenv/utils.py
@@ -22,8 +22,12 @@ except ImportError:
     try:
         from backports.weakref import finalize
     except ImportError:
-        def finalize(*args, **kwargs):
-            logging.warn('weakref.finalize unavailable, not cleaning...')
+        class finalize(object):
+            def __init__(self, *args, **kwargs):
+                logging.warn('weakref.finalize unavailable, not cleaning...')
+
+            def detach(self):
+                return False
 
 from time import time
 
