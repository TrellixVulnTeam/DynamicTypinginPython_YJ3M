commit 57b266f256f9b74aaf6386c4467fe05af51e1c5f
Author: Dan Ryan <dan@danryan.co>
Date:   Sat Mar 2 17:13:20 2019 -0500

    Update requirementslib to include extras in parser
    
    Signed-off-by: Dan Ryan <dan@danryan.co>

diff --git a/pipenv/vendor/requirementslib/models/requirements.py b/pipenv/vendor/requirementslib/models/requirements.py
index d57e4fff..bf207cf9 100644
--- a/pipenv/vendor/requirementslib/models/requirements.py
+++ b/pipenv/vendor/requirementslib/models/requirements.py
@@ -1289,6 +1289,13 @@ class FileRequirement(object):
             deps.update(setup_info.get("requires", {}))
             setup_deps.extend(setup_info.get("setup_requires", []))
             build_deps.extend(setup_info.get("build_requires", []))
+            if self.extras and self.setup_info.extras:
+                for dep in self.extras:
+                    if dep not in self.setup_info.extras:
+                        continue
+                    extras_list = self.setup_info.extras.get(dep, [])  # type: ignore
+                    for req_instance in extras_list:  # type: ignore
+                        deps[req_instance.key] = req_instance
         if self.pyproject_requires:
             build_deps.extend(list(self.pyproject_requires))
         setup_deps = list(set(setup_deps))
diff --git a/pipenv/vendor/requirementslib/models/setup_info.py b/pipenv/vendor/requirementslib/models/setup_info.py
index f278afd2..c8f9e93f 100644
--- a/pipenv/vendor/requirementslib/models/setup_info.py
+++ b/pipenv/vendor/requirementslib/models/setup_info.py
@@ -560,6 +560,9 @@ class SetupInfo(object):
                     if extra in self.extras:
                         extras_tuple = tuple([BaseRequirement.from_req(req) for req in self.extras[extra]])
                         self._extras_requirements += ((extra, extras_tuple),)
+                        self._requirements = frozenset(
+                            set(self._requirements) | set(list(extras_tuple))
+                        )
 
     def run_setup(self):
         # type: () -> None
