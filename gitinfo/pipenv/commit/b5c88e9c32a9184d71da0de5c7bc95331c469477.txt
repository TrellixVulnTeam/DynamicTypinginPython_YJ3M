commit b5c88e9c32a9184d71da0de5c7bc95331c469477
Author: Frost Ming <mianghong@gmail.com>
Date:   Thu Jan 17 15:47:32 2019 +0800

    ensure the existence of 'url'

diff --git a/pipenv/utils.py b/pipenv/utils.py
index 3cf6dc2f..c2a6c1bc 100644
--- a/pipenv/utils.py
+++ b/pipenv/utils.py
@@ -235,7 +235,8 @@ def get_resolver_metadata(deps, index_lookup, markers_lookup, project, sources):
         req = Requirement.from_line(dep)
         constraints.append(req.constraint_line)
         if url:
-            source = first(s for s in sources if url.startswith(s.get("url")))
+            source = first(
+                s for s in sources if s.get("url") and url.startswith(s["url"]))
             if source:
                 index_lookup[req.name] = source.get("name")
         # strip the marker and re-add it later after resolution
