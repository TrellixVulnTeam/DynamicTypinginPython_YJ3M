commit ffe5d2f74cd61af6c73d018a9d1828a4a8133995
Author: frostming <frostming@tencent.com>
Date:   Wed Mar 6 17:10:49 2019 +0800

    Overwrite environment variable

diff --git a/pipenv/project.py b/pipenv/project.py
index eb802cbb..8c813170 100644
--- a/pipenv/project.py
+++ b/pipenv/project.py
@@ -99,6 +99,9 @@ if PIPENV_PIPFILE:
 
     else:
         PIPENV_PIPFILE = _normalized(PIPENV_PIPFILE)
+        # Overwrite environment variable so that subprocesses can get the correct path.
+        # See https://github.com/pypa/pipenv/issues/3584
+        os.environ['PIPENV_PIPFILE'] = PIPENV_PIPFILE
 # (path, file contents) => TOMLFile
 # keeps track of pipfiles that we've seen so we do not need to re-parse 'em
 _pipfile_cache = {}
