commit 09e0d052cad966a7e9a5d756a3a73a77e35e08c9
Author: James Tanner <tanner.jc@gmail.com>
Date:   Fri Jan 10 17:42:43 2014 -0500

    Ensure sys.stdout has an istty method

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index 3bbad05d2d..e6556c6156 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -745,9 +745,10 @@ class Runner(object):
             data = result.result
 
             # https://github.com/ansible/ansible/issues/4958
-            if "stdout" in data and sys.stdout.isatty():
-                if not string_functions.isprintable(data['stdout']):
-                    data['stdout'] = ''
+            if hasattr(sys.stdout, "isatty"):
+                if "stdout" in data and sys.stdout.isatty():
+                    if not string_functions.isprintable(data['stdout']):
+                        data['stdout'] = ''
 
             if 'item' in inject:
                 result.result['item'] = inject['item']
