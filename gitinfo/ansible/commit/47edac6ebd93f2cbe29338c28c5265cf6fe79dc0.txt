commit 47edac6ebd93f2cbe29338c28c5265cf6fe79dc0
Author: Trishna Guha <trishnaguha17@gmail.com>
Date:   Tue Apr 25 08:37:22 2017 +0530

    Remove repetition of code nxos (#23908)
    
    Signed-off-by: Trishna Guha <trishnaguha17@gmail.com>

diff --git a/lib/ansible/module_utils/nxos.py b/lib/ansible/module_utils/nxos.py
index b13d50574a..8f47663c19 100644
--- a/lib/ansible/module_utils/nxos.py
+++ b/lib/ansible/module_utils/nxos.py
@@ -89,9 +89,7 @@ def get_connection(module):
     global _DEVICE_CONNECTION
     if not _DEVICE_CONNECTION:
         load_params(module)
-        transport = module.params['transport']
-        provider_transport = (module.params['provider'] or {}).get('transport')
-        if 'nxapi' in (transport, provider_transport):
+        if is_nxapi(module):
             conn = Nxapi(module)
         else:
             conn = Cli(module)
