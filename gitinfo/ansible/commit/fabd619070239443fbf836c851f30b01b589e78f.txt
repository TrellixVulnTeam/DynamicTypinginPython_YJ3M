commit fabd619070239443fbf836c851f30b01b589e78f
Author: Michael Scherer <misc@zarb.org>
Date:   Wed Feb 24 12:15:02 2016 +0100

    Rename consul variable to consul_client
    
    Since the module is also named consul, pyflakes emit a warning
    about it since the variable shadow the module.

diff --git a/lib/ansible/modules/extras/clustering/consul_session.py b/lib/ansible/modules/extras/clustering/consul_session.py
index ef7a0297eb..bfc30232a1 100644
--- a/lib/ansible/modules/extras/clustering/consul_session.py
+++ b/lib/ansible/modules/extras/clustering/consul_session.py
@@ -136,10 +136,10 @@ def lookup_sessions(module):
     datacenter = module.params.get('datacenter')
 
     state = module.params.get('state')
-    consul = get_consul_api(module)
+    consul_client = get_consul_api(module)
     try:
         if state == 'list':
-            sessions_list = consul.session.list(dc=datacenter)
+            sessions_list = consul_client.session.list(dc=datacenter)
             #ditch the index, this can be grabbed from the results
             if sessions_list and sessions_list[1]:
                 sessions_list = sessions_list[1]
@@ -150,7 +150,7 @@ def lookup_sessions(module):
             if not node:
                 module.fail_json(
                   msg="node name is required to retrieve sessions for node")
-            sessions = consul.session.node(node, dc=datacenter)
+            sessions = consul_client.session.node(node, dc=datacenter)
             module.exit_json(changed=True,
                              node=node,
                              sessions=sessions)
@@ -160,7 +160,7 @@ def lookup_sessions(module):
                 module.fail_json(
                   msg="session_id is required to retrieve indvidual session info")
 
-            session_by_id = consul.session.info(session_id, dc=datacenter)
+            session_by_id = consul_client.session.info(session_id, dc=datacenter)
             module.exit_json(changed=True,
                              session_id=session_id,
                              sessions=session_by_id)
@@ -178,12 +178,12 @@ def update_session(module):
     datacenter = module.params.get('datacenter')
     node = module.params.get('node')
 
-    consul = get_consul_api(module)
+    consul_client = get_consul_api(module)
     changed = True
 
     try:
         
-        session = consul.session.create(
+        session = consul_client.session.create(
             name=name,
             node=node,
             lock_delay=validate_duration('delay', delay),
@@ -207,11 +207,11 @@ def remove_session(module):
         module.fail_json(msg="""A session id must be supplied in order to
         remove a session.""")
 
-    consul = get_consul_api(module)
+    consul_client = get_consul_api(module)
     changed = False
 
     try:
-        session = consul.session.destroy(session_id)
+        session = consul_client.session.destroy(session_id)
 
         module.exit_json(changed=True,
                          session_id=session_id)
