commit 5048218ab5e3b328c085a2a3fc6c20685b9d1233
Author: Luca Berruti <nadirio@gmail.com>
Date:   Wed Aug 14 11:49:46 2013 +0200

    Fix: with_items and complex_args

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index 7f9e18aa1c..66503da0fd 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -467,8 +467,8 @@ class Runner(object):
                 inject['item'] = x
 
                 # TODO: this idiom should be replaced with an up-conversion to a Jinja2 template evaluation
-                if isinstance(complex_args, basestring):
-                    complex_args = template.template(self.basedir, complex_args, inject, convert_bare=True)
+                if isinstance(sel.fcomplex_args, basestring):
+                    complex_args = template.template(self.basedir, self.complex_args, inject, convert_bare=True)
                     complex_args = utils.safe_eval(complex_args)
                     if type(complex_args) != dict:
                         raise errors.AnsibleError("args must be a dictionary, received %s" % complex_args)
