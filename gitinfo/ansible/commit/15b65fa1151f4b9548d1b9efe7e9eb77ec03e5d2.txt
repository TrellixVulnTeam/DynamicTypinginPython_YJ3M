commit 15b65fa1151f4b9548d1b9efe7e9eb77ec03e5d2
Author: toninog <tag@reaper.org>
Date:   Mon Jun 8 13:55:24 2015 +0100

    Fixed bug in example where updating a user to a group Fixed bug in create_group and update_group whereby paramaters were not being set correctly.

diff --git a/lib/ansible/modules/cloud/amazon/iam.py b/lib/ansible/modules/cloud/amazon/iam.py
index 05c74c5b71..164676b825 100644
--- a/lib/ansible/modules/cloud/amazon/iam.py
+++ b/lib/ansible/modules/cloud/amazon/iam.py
@@ -144,7 +144,7 @@ task:
     iam_type: user
     name: jdavila
     state: update
-    group: "{{ item.created_group.group_name }}"
+    groups: "{{ item.created_group.group_name }}"
   with_items: new_groups.results
 
 '''
@@ -387,7 +387,7 @@ new_name=None):
     return (groups, changed)
 
 
-def create_group(module, iam, name, path):
+def create_group(module=None, iam=None, name=None, path=None):
     changed = False
     try:
         iam.create_group(
@@ -425,8 +425,7 @@ def delete_group(module, iam, name):
         changed = True
     return changed, name
 
-
-def update_group(module, iam, name, new_name, new_path):
+def update_group(module=None, iam=None, name=None, new_name=None, new_path=None):
     changed = False
     try:
         current_group_path = iam.get_group(
@@ -678,7 +677,7 @@ def main():
             module.exit_json(changed=changed, group_name=new_group)
         elif state in ['present', 'update'] and group_exists:
             changed, updated_name, updated_path, cur_path = update_group(
-                iam, name, new_name, new_path)
+                iam=iam, name=name, new_name=new_name, new_path=new_path)
 
             if new_path and new_name:
                 module.exit_json(changed=changed, old_group_name=name,
