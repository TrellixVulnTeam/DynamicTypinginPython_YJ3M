commit 329d3b892b05191ea2134a2275e027210816843d
Author: Chen Zhiwei <zhiweik@gmail.com>
Date:   Wed Nov 7 01:36:42 2018 +0800

    if we already have stderr, we don't need stderr_lines (#44675)

diff --git a/lib/ansible/plugins/callback/yaml.py b/lib/ansible/plugins/callback/yaml.py
index 756fb79bf2..9ef8b4e6c3 100644
--- a/lib/ansible/plugins/callback/yaml.py
+++ b/lib/ansible/plugins/callback/yaml.py
@@ -114,6 +114,10 @@ class CallbackModule(Default):
         if 'stdout' in abridged_result and 'stdout_lines' in abridged_result:
             abridged_result['stdout_lines'] = '<omitted>'
 
+        # if we already have stderr, we don't need stderr_lines
+        if 'stderr' in abridged_result and 'stderr_lines' in abridged_result:
+            abridged_result['stderr_lines'] = '<omitted>'
+
         if abridged_result:
             dumped += '\n'
             dumped += to_text(yaml.dump(abridged_result, allow_unicode=True, width=1000, Dumper=AnsibleDumper, default_flow_style=False))
