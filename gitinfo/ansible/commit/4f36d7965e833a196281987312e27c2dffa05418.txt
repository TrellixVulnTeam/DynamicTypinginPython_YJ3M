commit 4f36d7965e833a196281987312e27c2dffa05418
Author: bmfp <bmfp.molin@gmail.com>
Date:   Mon Apr 23 11:43:53 2018 +0200

    We need to return virtual_facts after VMWare platform detection (#38237)

diff --git a/lib/ansible/module_utils/facts/virtual/linux.py b/lib/ansible/module_utils/facts/virtual/linux.py
index fece8d8f22..819adfaaaf 100644
--- a/lib/ansible/module_utils/facts/virtual/linux.py
+++ b/lib/ansible/module_utils/facts/virtual/linux.py
@@ -245,6 +245,7 @@ class LinuxVirtual(Virtual):
                 if vendor_name.startwith('VMware'):
                     virtual_facts['virtualization_type'] = 'VMware'
                     virtual_facts['virtualization_role'] = 'guest'
+                    return virtual_facts
 
         # If none of the above matches, return 'NA' for virtualization_type
         # and virtualization_role. This allows for proper grouping.
