commit cb4b964070df2088fddb9c41f57c4eb01dde7852
Author: Andrey Shorin <a.shorin@hh.ru>
Date:   Mon Sep 23 13:33:36 2013 +0400

    Allow for dynamic accelerate_port: and port: in plays

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index be0d068248..2412ed8900 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -624,7 +624,7 @@ class Runner(object):
                 # calls just to accomodate this one case
                 actual_port = [actual_port, self.accelerate_port]
             elif actual_port is not None:
-                actual_port = int(actual_port)
+                actual_port = int(template.template(self.basedir, actual_port, inject))
         except ValueError, e:
             result = dict(failed=True, msg="FAILED: Configured port \"%s\" is not a valid port, expected integer" % actual_port)
             return ReturnData(host=host, comm_ok=False, result=result)
