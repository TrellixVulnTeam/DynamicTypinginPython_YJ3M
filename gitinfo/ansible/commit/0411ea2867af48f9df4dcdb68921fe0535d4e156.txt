commit 0411ea2867af48f9df4dcdb68921fe0535d4e156
Author: smoothify <dev@smoothify.com>
Date:   Wed Sep 4 12:38:42 2013 +0100

    Ensure duplicate roles are not loaded in the case of a missing meta/main.yml file.

diff --git a/lib/ansible/playbook/play.py b/lib/ansible/playbook/play.py
index 6e76cf717b..9b77c1a35f 100644
--- a/lib/ansible/playbook/play.py
+++ b/lib/ansible/playbook/play.py
@@ -194,6 +194,8 @@ class Play(object):
                                         continue
                                     else:
                                         self.included_roles.append(dep)
+                        else:
+                            continue
                         dep_vars = utils.combine_vars(passed_vars, dep_vars)
                         dep_vars = utils.combine_vars(role_vars, dep_vars)
                         vars = self._resolve_main(utils.path_dwim(self.basedir, os.path.join(dep_path, 'vars')))
