commit f6b188e5219a0f3af584b2819a17b685f897c70e
Author: Jim Gu <jim@jimgu.com>
Date:   Thu Nov 16 03:44:27 2017 -0500

    Fail module if unknown state passed to set_vm_power_state (#32631)

diff --git a/lib/ansible/module_utils/vmware.py b/lib/ansible/module_utils/vmware.py
index 1a10e70353..4d070a47e1 100644
--- a/lib/ansible/module_utils/vmware.py
+++ b/lib/ansible/module_utils/vmware.py
@@ -724,6 +724,10 @@ def set_vm_power_state(content, vm, state, force):
                     result['failed'] = True
                     result['msg'] = "Virtual machine %s must be in poweredon state for guest shutdown/reboot" % vm.name
 
+            else:
+                result['failed'] = True
+                result['msg'] = "Unsupported expected state provided: %s" % expected_state
+
         except Exception as e:
             result['failed'] = True
             result['msg'] = to_text(e)
