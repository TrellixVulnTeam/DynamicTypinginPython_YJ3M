commit 06b988e2d52f9844ffce34d6d64f67a08b3a6992
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Fri Apr 12 14:46:41 2013 -0400

    Create the .ssh dir if it does not already exist.

diff --git a/library/authorized_key b/library/authorized_key
index 8c1ad520b2..50b23d095c 100644
--- a/library/authorized_key
+++ b/library/authorized_key
@@ -128,7 +128,10 @@ def keyfile(module, user, write=False, path=None, manage_dir=True):
         os.chown(sshdir, uid, gid)
         os.chmod(sshdir, 0700)
 
-    if not os.path.exists( keysfile):
+    if not os.path.exists(keysfile):
+        basedir = os.path.dirname(keysfile)
+        if not os.path.exists(basedir):
+            os.makedirs(basedir)
         try:
             f = open(keysfile, "w") #touches file so we can set ownership and perms
         finally:
