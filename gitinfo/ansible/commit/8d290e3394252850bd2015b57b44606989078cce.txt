commit 8d290e3394252850bd2015b57b44606989078cce
Author: Petr Svoboda <petr@jatys.cz>
Date:   Fri Sep 13 16:26:11 2013 +0200

    Fix traceback in service module when svc_cmd is None (2nd fix)
    
    When service module is used on unsupported Linux system where init
    script is used directly, LinuxService.svc_cmd is None so .endswith()
    fails.
    
    This extends fix from e2f20db53481128553d876109d5fbdab9f43dd5b also
    for state=restarted.
    
    Fixes issue #3533

diff --git a/library/system/service b/library/system/service
index d7cd47afcd..6d4aec6cd8 100644
--- a/library/system/service
+++ b/library/system/service
@@ -677,7 +677,7 @@ class LinuxService(Service):
             else:
                 # SysV
                 rc_state, stdout, stderr = self.execute_command("%s %s %s" % (self.action, self.name, arguments), daemonize=True)
-        elif self.svc_cmd.endswith('rc-service'):
+        elif self.svc_cmd and self.svc_cmd.endswith('rc-service'):
             # All services in OpenRC support restart.
             rc_state, stdout, stderr = self.execute_command("%s %s %s" % (svc_cmd, self.action, arguments), daemonize=True)
         else:
