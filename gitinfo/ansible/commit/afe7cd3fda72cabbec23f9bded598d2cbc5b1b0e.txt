commit afe7cd3fda72cabbec23f9bded598d2cbc5b1b0e
Author: YuandongXu <786018072@qq.com>
Date:   Fri Jun 28 06:53:56 2019 +0800

    ce_snmp_location: fix for out of array index. (#57903)

diff --git a/changelogs/fragments/57903-ce_snmp_location_fix_for_out_of_array_index.yml b/changelogs/fragments/57903-ce_snmp_location_fix_for_out_of_array_index.yml
new file mode 100644
index 0000000000..9accccb10e
--- /dev/null
+++ b/changelogs/fragments/57903-ce_snmp_location_fix_for_out_of_array_index.yml
@@ -0,0 +1,3 @@
+---
+bugfixes:
+  - fix bug - out of array index.There should be a judgement about array length before the value of the array is taken out.
\ No newline at end of file
diff --git a/lib/ansible/modules/network/cloudengine/ce_snmp_location.py b/lib/ansible/modules/network/cloudengine/ce_snmp_location.py
index b27a4a9489..662a43bb00 100644
--- a/lib/ansible/modules/network/cloudengine/ce_snmp_location.py
+++ b/lib/ansible/modules/network/cloudengine/ce_snmp_location.py
@@ -171,8 +171,9 @@ class SnmpLocation(object):
         tmp_cfg = self.cli_get_config()
         if tmp_cfg:
             temp_data = tmp_cfg.split(r"location ")
-            self.cur_cfg["location"] = temp_data[1]
-            self.existing["location"] = temp_data[1]
+            if len(temp_data) > 1:
+                self.cur_cfg["location"] = temp_data[1]
+                self.existing["location"] = temp_data[1]
 
     def get_end_state(self):
         """ Get end state """
@@ -180,7 +181,8 @@ class SnmpLocation(object):
         tmp_cfg = self.cli_get_config()
         if tmp_cfg:
             temp_data = tmp_cfg.split(r"location ")
-            self.end_state["location"] = temp_data[1]
+            if len(temp_data) > 1:
+                self.end_state["location"] = temp_data[1]
 
     def cli_load_config(self, commands):
         """ Load config by cli """
