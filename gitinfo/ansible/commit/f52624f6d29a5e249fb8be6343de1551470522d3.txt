commit f52624f6d29a5e249fb8be6343de1551470522d3
Author: Stephen Fromm <sfromm@gmail.com>
Date:   Tue Sep 25 14:57:32 2012 -0700

    Give nice error message if destination directory doesn't exist (issue #1048)

diff --git a/library/copy b/library/copy
index 6491f6ea5e..de5ebcf409 100755
--- a/library/copy
+++ b/library/copy
@@ -56,6 +56,8 @@ def main():
             module.fail_json(msg="Destination %s cannot be a directory" % (dest))
         md5sum_dest = module.md5(dest)
     else:
+        if not os.path.exists(os.path.dirname(dest)):
+            module.fail_json(msg="Destination directory %s does not exist" % (os.path.dirname(dest)))
         if not os.access(os.path.dirname(dest), os.W_OK):
             module.fail_json(msg="Destination %s not writable" % (os.path.dirname(dest)))
 
