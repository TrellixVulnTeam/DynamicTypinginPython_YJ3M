commit dd023d137a5e5ca7e44dd911fbc5c9b8ae375b6a
Author: Marco Vito Moscaritolo <mavimo@gmail.com>
Date:   Mon Sep 10 18:31:40 2012 +0200

    Add support for differnt nova.ini file location: ./nova.ini, ~/nova.ini, /etc/ansible/nova.ini

diff --git a/inventory/nova.py b/inventory/nova.py
index a06d39888c..cbe5c72f88 100755
--- a/inventory/nova.py
+++ b/inventory/nova.py
@@ -76,9 +76,23 @@ except:
 # executed with no parameters, return the list of
 # all groups and hosts
 
-
-config = ConfigParser.SafeConfigParser()
-config.read(os.path.dirname(os.path.realpath(__file__)) + '/nova.ini')
+def nova_load_config_file():
+    p = ConfigParser.SafeConfigParser()
+    path1 = os.getcwd() + "/nova.ini"
+    path2 = os.path.expanduser(os.environ.get('ANSIBLE_CONFIG', "~/nova.ini"))
+    path3 = "/etc/ansible/nova.ini"
+
+    if os.path.exists(path1):
+        p.read(path1)
+    elif os.path.exists(path2):
+        p.read(path2)
+    elif os.path.exists(path3):
+        p.read(path3)
+    else:
+        return None
+    return p
+
+config = nova_load_config_file()
 
 client = nova_client.Client(
     version     = config.get('openstack', 'version'),
