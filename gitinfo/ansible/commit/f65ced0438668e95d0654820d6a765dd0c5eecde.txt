commit f65ced0438668e95d0654820d6a765dd0c5eecde
Author: Abhijeet Kasurde <akasurde@redhat.com>
Date:   Tue Jun 13 14:41:53 2017 +0530

    cloudstack: Use errortext from router in cs_router (#25634)
    
    Signed-off-by: Abhijeet Kasurde <akasurde@redhat.com>

diff --git a/lib/ansible/modules/cloud/cloudstack/cs_router.py b/lib/ansible/modules/cloud/cloudstack/cs_router.py
index f35fc955ac..7437955d64 100644
--- a/lib/ansible/modules/cloud/cloudstack/cs_router.py
+++ b/lib/ansible/modules/cloud/cloudstack/cs_router.py
@@ -317,7 +317,7 @@ class AnsibleCloudStackRouter(AnsibleCloudStack):
                 router = self.cs.changeServiceForRouter(**args)
 
                 if 'errortext' in router:
-                    self.module.fail_json(msg="Failed: '%s'" % res['errortext'])
+                    self.module.fail_json(msg="Failed: '%s'" % router['errortext'])
 
                 if state in [ 'restarted', 'started' ]:
                     router = self.start_router()
