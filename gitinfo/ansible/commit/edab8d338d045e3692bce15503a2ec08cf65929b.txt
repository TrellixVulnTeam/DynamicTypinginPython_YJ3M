commit edab8d338d045e3692bce15503a2ec08cf65929b
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Tue Apr 5 22:27:07 2016 -0700

    Expand tilde after expanding vars

diff --git a/lib/ansible/plugins/cache/jsonfile.py b/lib/ansible/plugins/cache/jsonfile.py
index e8162f596e..f0ec635ebe 100644
--- a/lib/ansible/plugins/cache/jsonfile.py
+++ b/lib/ansible/plugins/cache/jsonfile.py
@@ -50,7 +50,7 @@ class CacheModule(BaseCacheModule):
 
         self._timeout = float(C.CACHE_PLUGIN_TIMEOUT)
         self._cache = {}
-        self._cache_dir = os.path.expandvars(os.path.expanduser(C.CACHE_PLUGIN_CONNECTION)) # expects a dir path
+        self._cache_dir = os.path.expanduser(os.path.expandvars(C.CACHE_PLUGIN_CONNECTION)) # expects a dir path
         if not self._cache_dir:
             raise AnsibleError("error, fact_caching_connection is not set, cannot use fact cache")
 
