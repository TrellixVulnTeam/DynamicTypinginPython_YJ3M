commit 9249cf578d5214cd8b8687c63aa9f24a0e3ea405
Author: James Tanner <tanner.jc@gmail.com>
Date:   Mon Oct 28 12:56:46 2013 -0400

    Fixes #4572 Run until loop if until is set, ignoring result failures

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index 17558792f5..f10157a202 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -655,7 +655,7 @@ class Runner(object):
         result = handler.run(conn, tmp, module_name, module_args, inject, complex_args)
         # Code for do until feature
         until = self.module_vars.get('until', None)
-        if until is not None and result.comm_ok and "failed" not in result.result:
+        if until is not None and result.comm_ok:
             inject[self.module_vars.get('register')] = result.result
             cond = template.template(self.basedir, until, inject, expand_lists=False)
             if not utils.check_conditional(cond,  self.basedir, inject, fail_on_undefined=self.error_on_undefined_vars):
@@ -669,8 +669,6 @@ class Runner(object):
                     result = handler.run(conn, tmp, module_name, module_args, inject, complex_args)
                     result.result['attempts'] = x
                     vv("Result from run %i is: %s" % (x, result.result))
-                    if "failed" in result.result:
-                        break
                     inject[self.module_vars.get('register')] = result.result
                     cond = template.template(self.basedir, until, inject, expand_lists=False)
                     if utils.check_conditional(cond, self.basedir, inject, fail_on_undefined=self.error_on_undefined_vars):
