commit 67ffde4ac1be60cc851709df6a4ea2f31861610e
Author: Jordan Borean <jborean93@gmail.com>
Date:   Wed Mar 7 08:40:57 2018 +1000

    win_wait_for: use loopback IP instead of hostname if 127.0.0.1 is used (#36762)
    
    * win_wait_for: use loopback IP instead of hostname if 127.0.0.1 is used
    
    * removed reverse dns lookup in port check

diff --git a/lib/ansible/modules/windows/win_wait_for.ps1 b/lib/ansible/modules/windows/win_wait_for.ps1
index dee606ff33..66fd884dea 100644
--- a/lib/ansible/modules/windows/win_wait_for.ps1
+++ b/lib/ansible/modules/windows/win_wait_for.ps1
@@ -54,17 +54,9 @@ if ($port -ne $null) {
 }
 
 Function Test-Port($hostname, $port) {
-    # try and resolve the IP/Host, if it fails then just use the host passed in
-    try {
-        $resolve_hostname = ([System.Net.Dns]::GetHostEntry($hostname)).HostName
-    } catch {
-        # oh well just use the IP addres
-        $resolve_hostname = $hostname
-    }
-
     $timeout = $connect_timeout * 1000
     $socket = New-Object -TypeName System.Net.Sockets.TcpClient
-    $connect = $socket.BeginConnect($resolve_hostname, $port, $null, $null)
+    $connect = $socket.BeginConnect($hostname, $port, $null, $null)
     $wait = $connect.AsyncWaitHandle.WaitOne($timeout, $false)
 
     if ($wait) {
