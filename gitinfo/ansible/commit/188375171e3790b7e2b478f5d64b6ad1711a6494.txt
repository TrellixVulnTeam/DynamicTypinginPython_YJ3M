commit 188375171e3790b7e2b478f5d64b6ad1711a6494
Author: Serge van Ginderachter <serge@vanginderachter.be>
Date:   Mon Mar 10 13:06:04 2014 +0100

    Inventory: raise error when adding a group that already exists.
    
    The parsers check if a group already exists.

diff --git a/lib/ansible/inventory/__init__.py b/lib/ansible/inventory/__init__.py
index b6f644190f..9f076a72cd 100644
--- a/lib/ansible/inventory/__init__.py
+++ b/lib/ansible/inventory/__init__.py
@@ -16,7 +16,6 @@
 # along with Ansible.  If not, see <http://www.gnu.org/licenses/>.
 
 #############################################
-
 import fnmatch
 import os
 import sys
@@ -376,8 +375,11 @@ class Inventory(object):
         return vars
 
     def add_group(self, group):
-        self.groups.append(group)
-        self._groups_list = None  # invalidate internal cache 
+        if group.name not in self.groups_list():
+            self.groups.append(group)
+            self._groups_list = None  # invalidate internal cache 
+        else:
+            raise errors.AnsibleError("group already in inventory: %s" % group.name)
 
     def list_hosts(self, pattern="all"):
 
