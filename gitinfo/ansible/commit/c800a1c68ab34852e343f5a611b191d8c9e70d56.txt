commit c800a1c68ab34852e343f5a611b191d8c9e70d56
Author: Sheldon Hearn <sheldonh@starjuice.net>
Date:   Thu Jul 23 11:24:30 2015 +0200

    Preserve OLDPWD

diff --git a/hacking/env-setup b/hacking/env-setup
index 49390dfe5e..7b48db28db 100644
--- a/hacking/env-setup
+++ b/hacking/env-setup
@@ -53,13 +53,15 @@ if [ "$ANSIBLE_HOME" != "$PWD" ] ; then
 else
     current_dir="$ANSIBLE_HOME"
 fi
-cd "$ANSIBLE_HOME"
-if [ "$verbosity" = silent ] ; then
-    gen_egg_info > /dev/null 2>&1
-else
-    gen_egg_info
-fi
-cd "$current_dir"
+(
+	cd "$ANSIBLE_HOME"
+	if [ "$verbosity" = silent ] ; then
+	    gen_egg_info > /dev/null 2>&1
+	else
+	    gen_egg_info
+	fi
+	cd "$current_dir"
+)
 
 if [ "$verbosity" != silent ] ; then
     cat <<- EOF
