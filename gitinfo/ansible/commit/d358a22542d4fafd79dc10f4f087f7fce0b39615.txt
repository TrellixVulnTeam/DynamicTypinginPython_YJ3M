commit d358a22542d4fafd79dc10f4f087f7fce0b39615
Author: James Cammarata <jimi@sngx.net>
Date:   Sun Apr 3 11:31:18 2016 -0400

    Modification to 347b282 to prevent running the lookup with empty terms
    
    Fixes #15258

diff --git a/lib/ansible/executor/task_executor.py b/lib/ansible/executor/task_executor.py
index b198f225e4..e391ccc431 100644
--- a/lib/ansible/executor/task_executor.py
+++ b/lib/ansible/executor/task_executor.py
@@ -188,8 +188,8 @@ class TaskExecutor:
                     try:
                         loop_terms = listify_lookup_plugin_terms(terms=self._task.loop_args, templar=templar, loader=self._loader, fail_on_undefined=True, convert_bare=True)
                     except AnsibleUndefinedVariable as e:
-                        loop_terms = []
                         display.deprecated("Skipping task due to undefined Error, in the future this will be a fatal error.: %s" % to_bytes(e))
+                        return None
                 items = self._shared_loader_obj.lookup_loader.get(self._task.loop, loader=self._loader, templar=templar).run(terms=loop_terms, variables=self._job_vars, wantlist=True)
             else:
                 raise AnsibleError("Unexpected failure in finding the lookup named '%s' in the available lookup plugins" % self._task.loop)
