commit 945447e3929f2b3a3241cea6dede70876ba06008
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Thu Nov 13 10:32:38 2014 -0800

    if __name__ does work with ansible modules

diff --git a/lib/ansible/modules/packaging/os/apt.py b/lib/ansible/modules/packaging/os/apt.py
index 459aaaa97a..d732619b94 100644
--- a/lib/ansible/modules/packaging/os/apt.py
+++ b/lib/ansible/modules/packaging/os/apt.py
@@ -568,6 +568,5 @@ def main():
 # import module snippets
 from ansible.module_utils.basic import *
 
-# FIXME: if __name__ == "__main__": ?
-if "ANSIBLE_IN_HAPPY_UNITTEST_LAND" not in os.environ:
+if __name__ == "__main__":
     main()
diff --git a/lib/ansible/modules/tests/test_apt.py b/lib/ansible/modules/tests/test_apt.py
index 10e3583801..c580222775 100644
--- a/lib/ansible/modules/tests/test_apt.py
+++ b/lib/ansible/modules/tests/test_apt.py
@@ -3,8 +3,6 @@ import mock
 import os
 import unittest
 
-# FIXME: this is not super elegant
-os.environ["ANSIBLE_IN_HAPPY_UNITTEST_LAND"] = "1"
 from packaging.apt import (
     expand_pkgspec_from_fnmatches,
 )
