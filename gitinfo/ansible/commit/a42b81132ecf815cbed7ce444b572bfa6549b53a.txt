commit a42b81132ecf815cbed7ce444b572bfa6549b53a
Author: kletiz <mikestl15@gmail.com>
Date:   Wed Aug 16 16:11:02 2017 -0500

    win_dns_client failing on 2008R2 SP1 (Fixes #25216) (#28172)

diff --git a/lib/ansible/modules/windows/win_dns_client.ps1 b/lib/ansible/modules/windows/win_dns_client.ps1
index d959de3384..15a80f5f68 100644
--- a/lib/ansible/modules/windows/win_dns_client.ps1
+++ b/lib/ansible/modules/windows/win_dns_client.ps1
@@ -135,7 +135,13 @@ Function Get-DnsClientMatch {
 
     $current_dns_v4 = ($current_dns_all | Where-Object AddressFamily -eq 2 <# IPv4 #>).ServerAddresses
 
-    $v4_match = @(Compare-Object $current_dns_v4 $ipv4_addresses).Count -eq 0
+    If ($current_dns_v4 -eq $null) {
+        $v4_match = $False
+    }
+
+    Else {
+        $v4_match = @(Compare-Object $current_dns_v4 $ipv4_addresses).Count -eq 0
+    }
 
     # TODO: implement IPv6
 
