commit a1a732e24d026771a785f8f8996bffd837c6dd98
Author: Peter Sprygada <psprygada@ansible.com>
Date:   Sun Apr 24 11:26:16 2016 -0400

    updates action plugin junos_template to guess file format
    
    This update will attempt to guess the file format based on the template
    extension if the format argument isnt set.  It will also set the commit
    comment to the task name if the comment isnt' explicitly defined.

diff --git a/lib/ansible/plugins/action/junos_template.py b/lib/ansible/plugins/action/junos_template.py
index 5334b644d3..eb5eb803dc 100644
--- a/lib/ansible/plugins/action/junos_template.py
+++ b/lib/ansible/plugins/action/junos_template.py
@@ -23,6 +23,22 @@ from ansible.plugins.action import ActionBase
 from ansible.plugins.action.net_template import ActionModule as NetActionModule
 
 class ActionModule(NetActionModule, ActionBase):
-    pass
 
+    def run(self, tmp=None, task_vars=None):
+        src = self._task.args.get('src')
+
+        if self._task.args.get('config_format') is None:
+            if src.endswith('.xml'):
+                fmt = 'xml'
+            elif src.endswith('.set'):
+                fmt = 'set'
+            else:
+                fmt = 'text'
+
+            self._task.args['config_format'] = fmt
+
+        if self._task.args.get('comment') is None:
+            self._task.args['comment'] = self._task.name
+
+        return super(ActionModule, self).run(tmp, task_vars)
 
