commit b4e83642c8f0e354c3a448667d3ebebf833c0cf6
Author: Sam Doran <sdoran@redhat.com>
Date:   Tue Apr 16 14:12:13 2019 -0400

    Properly reset timezone in user test when it was originally n/a (#55389)

diff --git a/test/integration/targets/user/tasks/main.yml b/test/integration/targets/user/tasks/main.yml
index 591efba2d3..fe5e931afa 100644
--- a/test/integration/targets/user/tasks/main.yml
+++ b/test/integration/targets/user/tasks/main.yml
@@ -326,6 +326,8 @@
     state: present
     expires: 2529881062
   register: user_test_expires1
+  tags:
+    - timezone
 
 - name: Set user expiration again to ensure no change is made
   user:
@@ -333,6 +335,8 @@
     state: present
     expires: 2529881062
   register: user_test_expires2
+  tags:
+    - timezone
 
 - name: Ensure that account with expiration was created and did not change on subsequent run
   assert:
@@ -382,16 +386,31 @@
         state: present
         expires: 2529881062
       register: user_test_different_tz
+      tags:
+        - timezone
 
     - name: Ensure that no change was reported
       assert:
         that:
           - user_test_different_tz is not changed
+      tags:
+        - timezone
 
   always:
     - name: Restore original timezone - {{ original_timezone.diff.before.name }}
       timezone:
         name: "{{ original_timezone.diff.before.name }}"
+      when: original_timezone.diff.before.name != "n/a"
+      tags:
+        - timezone
+
+    - name: Restore original timezone when n/a
+      file:
+        path: /etc/sysconfig/clock
+        state: absent
+      when:
+        - original_timezone.diff.before.name == "n/a"
+        - "'/etc/sysconfig/clock' in original_timezone.msg"
       tags:
         - timezone
 
