commit 8157fa0b01bd7e790a50f8c0c5d6dc3cfb0cfc6c
Author: Deepak Agrawal <deepacks@gmail.com>
Date:   Tue Jul 10 19:25:09 2018 +0530

    run ovs tests on centos/rhel (#42556)

diff --git a/test/integration/targets/openvswitch_db/tests/basic.yaml b/test/integration/targets/openvswitch_db/tests/basic.yaml
index 9447715c7c..1f44e59fb7 100644
--- a/test/integration/targets/openvswitch_db/tests/basic.yaml
+++ b/test/integration/targets/openvswitch_db/tests/basic.yaml
@@ -2,10 +2,12 @@
 
 - name: Make sure test bridge does not exist before tests
   command: ovs-vsctl del-br br-test
+  become: yes
   ignore_errors: yes
 
 - name: Create test bridge
   command: ovs-vsctl add-br br-test
+  become: yes
 
 - name: Create bridge
   openvswitch_db:
@@ -14,6 +16,7 @@
     col: other_config
     key: disable-in-band
     value: true
+  become: yes
   register: result
 
 - assert:
@@ -27,6 +30,7 @@
     col: other_config
     key: disable-in-band
     value: true
+  become: yes
   register: result
 
 - assert:
@@ -40,6 +44,7 @@
     col: other_config
     key: disable-in-band
     value: false
+  become: yes
   register: result
 
 - assert:
@@ -53,6 +58,7 @@
     col: other_config
     key: disable-in-band
     value: false
+  become: yes
   register: result
 
 - assert:
@@ -104,6 +110,7 @@
     key: disable-in-band
     value: false
     state: absent
+  become: yes
   register: result
 
 - assert:
@@ -118,6 +125,7 @@
     key: disable-in-band
     value: false
     state: absent
+  become: yes
   register: result
 
 - assert:
@@ -126,3 +134,4 @@
 
 - name: Tear down test bridge
   command: ovs-vsctl del-br br-test
+  become: yes
diff --git a/test/integration/targets/prepare_ovs_tests/tasks/main.yml b/test/integration/targets/prepare_ovs_tests/tasks/main.yml
index 68241e4e6d..e29042e050 100644
--- a/test/integration/targets/prepare_ovs_tests/tasks/main.yml
+++ b/test/integration/targets/prepare_ovs_tests/tasks/main.yml
@@ -1,9 +1,17 @@
 ---
+# No easy way to know OS type without python or without ansible facts.
+# Run below raw commands and one would succeed with apt/yum on debian/centos
+- name: Install python
+  raw:
+    test -e /usr/bin/python || (apt-get -y update && apt-get install -y python-minimal)
+  become: yes
+  ignore_errors: yes
 
 - name: Install python
   raw:
-    test -e /usr/bin/python || apt-get -y update && apt-get install -y python-minimal
+    test -e /usr/bin/python || (yum -y update && yum install -y python)
   become: yes
+  ignore_errors: yes
 
 # network-integration test are ran with gather_facts: no
 # We need to explicitly call setup so ansible_distribution is set
