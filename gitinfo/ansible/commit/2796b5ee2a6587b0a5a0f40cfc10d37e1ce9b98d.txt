commit 2796b5ee2a6587b0a5a0f40cfc10d37e1ce9b98d
Author: Seth Vidal <skvidal@fedoraproject.org>
Date:   Thu Apr 4 12:44:03 2013 -0400

    simple fix for issue 2564
    when we encounter a group we've not seen before - we need
    to make sure we make it a subgroup of 'all', no matter what

diff --git a/lib/ansible/inventory/ini.py b/lib/ansible/inventory/ini.py
index d05037bc0b..78d5743fa3 100644
--- a/lib/ansible/inventory/ini.py
+++ b/lib/ansible/inventory/ini.py
@@ -69,7 +69,8 @@ class InventoryParser(object):
                 if line.find(":vars") != -1 or line.find(":children") != -1:
                     active_group_name = active_group_name.rsplit(":", 1)[0]
                     if active_group_name not in self.groups:
-                        self.groups[active_group_name] = Group(name=active_group_name)
+                        new_group = self.groups[active_group_name] = Group(name=active_group_name)
+                        all.add_child_group(new_group)
                     active_group_name = None
                 elif active_group_name not in self.groups:
                     new_group = self.groups[active_group_name] = Group(name=active_group_name)
