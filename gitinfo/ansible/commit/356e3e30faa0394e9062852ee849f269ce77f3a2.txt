commit 356e3e30faa0394e9062852ee849f269ce77f3a2
Author: Pavan Bidkar <pbidkar@vmware.com>
Date:   Thu Dec 12 09:46:24 2019 +0530

    VMware: Handle KeyError while moving VM from suspended to poweredon
    
    Modified module_utils/vmware.py to handle KeyError while moving VM from suspened to poweredon state.

diff --git a/lib/ansible/module_utils/vmware.py b/lib/ansible/module_utils/vmware.py
index 2f60b619c6..e9bcb1d025 100644
--- a/lib/ansible/module_utils/vmware.py
+++ b/lib/ansible/module_utils/vmware.py
@@ -739,6 +739,7 @@ def set_vm_power_state(content, vm, state, force, timeout=0):
     if not force and current_state not in ['poweredon', 'poweredoff']:
         result['failed'] = True
         result['msg'] = "Virtual Machine is in %s power state. Force is required!" % current_state
+        result['instance'] = gather_vm_facts(content, vm)
         return result
 
     # State is not already true
