commit 7b7f15cb3a60a02a408dc94c20ba89909b58a862
Author: Geoffrey Blake <geoffrey.w.blake@gmail.com>
Date:   Fri Nov 1 12:10:07 2019 -0500

    Fix ec2_instance module where if placement_group and tenancy are (#63340)
    
    both set in params, the placement_group setting is ignored.

diff --git a/lib/ansible/modules/cloud/amazon/ec2_instance.py b/lib/ansible/modules/cloud/amazon/ec2_instance.py
index b289db0bf2..a77d27cbc9 100644
--- a/lib/ansible/modules/cloud/amazon/ec2_instance.py
+++ b/lib/ansible/modules/cloud/amazon/ec2_instance.py
@@ -1220,7 +1220,10 @@ def build_top_level_options(params):
     if params.get('tenancy') is not None:
         spec['Placement'] = {'Tenancy': params.get('tenancy')}
     if params.get('placement_group'):
-        spec.setdefault('Placement', {'GroupName': str(params.get('placement_group'))})
+        if 'Placement' in spec:
+            spec['Placement']['GroupName'] = str(params.get('placement_group'))
+        else:
+            spec.setdefault('Placement', {'GroupName': str(params.get('placement_group'))})
     if params.get('ebs_optimized') is not None:
         spec['EbsOptimized'] = params.get('ebs_optimized')
     if params.get('instance_initiated_shutdown_behavior'):
