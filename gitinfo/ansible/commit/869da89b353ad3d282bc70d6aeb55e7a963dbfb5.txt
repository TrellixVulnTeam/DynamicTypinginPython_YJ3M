commit 869da89b353ad3d282bc70d6aeb55e7a963dbfb5
Author: Monty Taylor <mordred@inaugust.com>
Date:   Thu Jun 18 07:59:32 2015 -0400

    Move the order of argument processing

diff --git a/lib/ansible/modules/cloud/openstack/os_keypair.py b/lib/ansible/modules/cloud/openstack/os_keypair.py
index c6794b4782..b404e6cc02 100644
--- a/lib/ansible/modules/cloud/openstack/os_keypair.py
+++ b/lib/ansible/modules/cloud/openstack/os_keypair.py
@@ -84,18 +84,16 @@ def main():
         mutually_exclusive=[['public_key', 'public_key_file']])
     module = AnsibleModule(argument_spec, **module_kwargs)
 
+    state = module.params['state']
+    name = module.params['name']
+    public_key = module.params['public_key']
+
     if module.params['public_key_file']:
         public_key = open(module.params['public_key_file']).read()
-    else:
-        public_key = module.params['public_key']
 
     if not HAS_SHADE:
         module.fail_json(msg='shade is required for this module')
 
-    state = module.params['state']
-    name = module.params['name']
-    public_key = module.params['public_key']
-
     try:
         cloud = shade.openstack_cloud(**module.params)
 
