commit 6f91bccf7828e1234bcfcc57f0756e2bbe878731
Author: Veaceslav Mindru <mindruv@gmail.com>
Date:   Wed Feb 20 20:28:05 2019 +0100

    handle non strings in requirements version for ansible-galaxy (#52109)

diff --git a/changelogs/fragments/handle_non_strings_in_requirements.yaml b/changelogs/fragments/handle_non_strings_in_requirements.yaml
new file mode 100644
index 0000000000..180ac9d60e
--- /dev/null
+++ b/changelogs/fragments/handle_non_strings_in_requirements.yaml
@@ -0,0 +1,2 @@
+bugfixes:
+- handle non strings in requirements version for ansible-galaxy
diff --git a/lib/ansible/playbook/role/requirement.py b/lib/ansible/playbook/role/requirement.py
index 66f07dee9a..8e974f1684 100644
--- a/lib/ansible/playbook/role/requirement.py
+++ b/lib/ansible/playbook/role/requirement.py
@@ -32,6 +32,7 @@ from ansible.module_utils.common.process import get_bin_path
 from ansible.module_utils.six import string_types
 from ansible.playbook.role.definition import RoleDefinition
 from ansible.utils.display import Display
+from ansible.module_utils._text import to_text
 
 __all__ = ['RoleRequirement']
 
@@ -163,7 +164,7 @@ class RoleRequirement(RoleDefinition):
         run_scm_cmd(clone_cmd, tempdir)
 
         if scm == 'git' and version:
-            checkout_cmd = [scm_path, 'checkout', version]
+            checkout_cmd = [scm_path, 'checkout', to_text(version)]
             run_scm_cmd(checkout_cmd, os.path.join(tempdir, name))
 
         temp_file = tempfile.NamedTemporaryFile(delete=False, suffix='.tar', dir=C.DEFAULT_LOCAL_TMP)
