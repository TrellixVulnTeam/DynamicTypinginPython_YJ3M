commit d9c0a5c37d60a6796f1929e42ed31311ab74b859
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Wed Jun 19 19:00:18 2013 -0400

    Revert "now modules can implement with_items list globbing w/o updating"
    
    This reverts commit 4942a06bc2b229b10df19491fbe64e166f53e6ab.
    
    Conflicts:
    
            lib/ansible/runner/__init__.py

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index b82a1f605f..259c18b82b 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -165,7 +165,6 @@ class Runner(object):
         self.is_playbook      = is_playbook
         self.environment      = environment
         self.complex_args     = complex_args
-        self.module_with_list = False
         self.error_on_undefined_vars = error_on_undefined_vars
 
         self.callbacks.runner = self
@@ -414,8 +413,8 @@ class Runner(object):
             if type(items) != list:
                 raise errors.AnsibleError("lookup plugins have to return a list: %r" % items)
 
-            if len(items) and utils.is_list_of_strings(items) and self.module_with_list:
-                # with_items maps back into a single module call, making modules that support this more efficient
+            if len(items) and utils.is_list_of_strings(items) and self.module_name in [ 'apt', 'yum', 'pkgng' ]:
+                # hack for apt, yum, and pkgng so that with_items maps back into a single module call
                 inject['item'] = ",".join(items)
                 items = None
 
@@ -724,9 +723,6 @@ class Runner(object):
             if 'WANT_JSON' in module_data:
                 module_style = 'non_native_want_json'
 
-            if 'WITH_ITEMS_USES_LIST' in module_data:
-                self.module_with_list = True
-
             complex_args_json = utils.jsonify(complex_args)
             # We force conversion of module_args to str because module_common calls shlex.split,
             # a standard library function that incorrectly handles Unicode input before Python 2.7.3.
diff --git a/library/packaging/apt b/library/packaging/apt
index d0e86e8082..8f0922ec53 100644
--- a/library/packaging/apt
+++ b/library/packaging/apt
@@ -1,6 +1,5 @@
 #!/usr/bin/python
 # -*- coding: utf-8 -*-
-# WITH_ITEMS_USES_LIST
 
 # (c) 2012, Flowroute LLC
 # Written by Matthew Williams <matthew@flowroute.com>
diff --git a/library/packaging/pkgng b/library/packaging/pkgng
index f8c24c320f..fa341b2f80 100644
--- a/library/packaging/pkgng
+++ b/library/packaging/pkgng
@@ -1,6 +1,5 @@
 #!/usr/bin/python
 # -*- coding: utf-8 -*-
-# WITH_ITEMS_USES_LIST
 
 # (c) 2013, bleader
 # Written by bleader <bleader@ratonland.org>
diff --git a/library/packaging/yum b/library/packaging/yum
index 24fab6d8c6..226df89d4b 100644
--- a/library/packaging/yum
+++ b/library/packaging/yum
@@ -1,6 +1,5 @@
 #!/usr/bin/python -tt
 # -*- coding: utf-8 -*-
-# WITH_ITEMS_USES_LIST
 
 # (c) 2012, Red Hat, Inc
 # Written by Seth Vidal <skvidal at fedoraproject.org>
