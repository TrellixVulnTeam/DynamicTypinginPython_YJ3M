commit 5b3e009198200c75276c8bc363dc2c810d909a88
Author: Arun prasath <arunprasath33@gmail.com>
Date:   Sun Oct 14 08:34:44 2018 +0530

    Added ability to create Openstack users without password (#37338)

diff --git a/lib/ansible/modules/cloud/openstack/os_user.py b/lib/ansible/modules/cloud/openstack/os_user.py
index 236f192f9c..880a82308e 100644
--- a/lib/ansible/modules/cloud/openstack/os_user.py
+++ b/lib/ansible/modules/cloud/openstack/os_user.py
@@ -33,7 +33,7 @@ options:
      description:
         - Password for the user
    update_password:
-     default: always
+     required: false
      choices: ['always', 'on_create']
      version_added: "2.3"
      description:
@@ -97,6 +97,15 @@ EXAMPLES = '''
     email: demo@example.com
     domain: default
     default_project: demo
+
+# Create a user without password
+- os_user:
+    cloud: mycloud
+    state: present
+    name: demouser
+    email: demo@example.com
+    domain: default
+    default_project: demo
 '''
 
 
@@ -181,7 +190,7 @@ def main():
         domain=dict(required=False, default=None),
         enabled=dict(default=True, type='bool'),
         state=dict(default='present', choices=['absent', 'present']),
-        update_password=dict(default='always', choices=['always', 'on_create']),
+        update_password=dict(default=None, choices=['always', 'on_create']),
     )
 
     module_kwargs = openstack_module_kwargs()
