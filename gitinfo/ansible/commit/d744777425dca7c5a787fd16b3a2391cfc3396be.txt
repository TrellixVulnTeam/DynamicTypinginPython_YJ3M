commit d744777425dca7c5a787fd16b3a2391cfc3396be
Author: Dagobert Michelsen <dam@opencsw.org>
Date:   Wed May 27 13:35:34 2015 +0200

    svr4pkg: assume command worked only on known-to-be-good returncodes

diff --git a/lib/ansible/modules/extras/packaging/os/svr4pkg.py b/lib/ansible/modules/extras/packaging/os/svr4pkg.py
index e95d4d8643..882b679f7b 100644
--- a/lib/ansible/modules/extras/packaging/os/svr4pkg.py
+++ b/lib/ansible/modules/extras/packaging/os/svr4pkg.py
@@ -209,15 +209,25 @@ def main():
             (rc, out, err) = package_uninstall(module, name, src, category)
             out = out[:75]
 
-    # Success, Warning, Interruption, Reboot all, Reboot this return codes
+    # Returncodes as per pkgadd(1m)
+    #    0 Successful completion
+    #    1 Fatal error.
+    #    2 Warning.
+    #    3 Interruption.
+    #    4 Administration.
+    #    5 Administration. Interaction  is  required.  Do  not  use pkgadd -n.
+    #   10 Reboot after installation of all packages.
+    #   20 Reboot after installation of this package.
+    #   99 (observed) pkgadd: ERROR: could not process datastream from </tmp/pkgutil.pkg>
     if rc in (0, 2, 3, 10, 20):
         result['changed'] = True
     # no install nor uninstall, or failed
     else:
         result['changed'] = False
 
-    # Fatal error, Administration, Administration Interaction return codes
-    if rc in (1, 4 , 5):
+    # Only return failed=False when the returncode is known to be good as there may be more
+    # undocumented failure return codes
+    if rc not in (0, 2, 10, 20):
         result['failed'] = True
     else:
         result['failed'] = False
