commit f488d3cf79767482e9e07ef23215a6058f7722fc
Author: Jeffrey Zhang <zhang.lei.fly@gmail.com>
Date:   Sat May 26 23:32:12 2018 +0800

    Fail with more meaningful message when the volume can not be found (#37508)

diff --git a/lib/ansible/modules/cloud/openstack/os_server_volume.py b/lib/ansible/modules/cloud/openstack/os_server_volume.py
index 5191115538..ded0b5c9c3 100644
--- a/lib/ansible/modules/cloud/openstack/os_server_volume.py
+++ b/lib/ansible/modules/cloud/openstack/os_server_volume.py
@@ -100,6 +100,10 @@ def main():
     try:
         server = cloud.get_server(module.params['server'])
         volume = cloud.get_volume(module.params['volume'])
+
+        if not volume:
+            module.fail_json(msg='volume %s is not found' % module.params['volume'])
+
         dev = cloud.get_volume_attach_device(volume, server.id)
 
         if module.check_mode:
