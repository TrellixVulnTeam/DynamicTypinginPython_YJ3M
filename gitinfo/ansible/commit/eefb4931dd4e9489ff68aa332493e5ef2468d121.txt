commit eefb4931dd4e9489ff68aa332493e5ef2468d121
Author: Brian Coca <bcoca@ansible.com>
Date:   Mon Nov 30 09:16:33 2015 -0800

    allow for bad stdout return from make temp dir command
    
    fixes #13359

diff --git a/lib/ansible/plugins/action/__init__.py b/lib/ansible/plugins/action/__init__.py
index fcbd1e2c21..1ac8d79a41 100644
--- a/lib/ansible/plugins/action/__init__.py
+++ b/lib/ansible/plugins/action/__init__.py
@@ -1,5 +1,5 @@
 # (c) 2012-2014, Michael DeHaan <michael.dehaan@gmail.com>
-#
+/
 # This file is part of Ansible
 #
 # Ansible is free software: you can redistribute it and/or modify
@@ -229,7 +229,11 @@ class ActionBase(with_metaclass(ABCMeta, object)):
                 output = output + u": %s" % result['stdout']
             raise AnsibleConnectionFailure(output)
 
-        rc = self._connection._shell.join_path(result['stdout'].strip(), u'').splitlines()[-1]
+        try:
+            rc = self._connection._shell.join_path(result['stdout'].strip(), u'').splitlines()[-1]
+        except IndexError:
+            # stdout was empty or just space, set to / to trigger error in next if
+            rc = '/'
 
         # Catch failure conditions, files should never be
         # written to locations in /.
