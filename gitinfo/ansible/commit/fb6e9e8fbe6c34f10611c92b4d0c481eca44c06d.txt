commit fb6e9e8fbe6c34f10611c92b4d0c481eca44c06d
Author: Ritesh Khadgaray <khadgaray@gmail.com>
Date:   Wed May 3 12:12:16 2017 -0400

    rhn+register: do not pass username/passwd for registration if none is specified. (#24244)

diff --git a/lib/ansible/modules/packaging/os/rhn_register.py b/lib/ansible/modules/packaging/os/rhn_register.py
index f795179209..b6c9d3ac0b 100644
--- a/lib/ansible/modules/packaging/os/rhn_register.py
+++ b/lib/ansible/modules/packaging/os/rhn_register.py
@@ -254,7 +254,9 @@ class Rhn(redhat.RegistrationBase):
             Register system to RHN.  If enable_eus=True, extended update
             support will be requested.
         '''
-        register_cmd = ['/usr/sbin/rhnreg_ks', '--username', self.username, '--password', self.password, '--force']
+        register_cmd = ['/usr/sbin/rhnreg_ks', '--force']
+        if self.username:
+            register_cmd.extend(['--username', self.username, '--password', self.password])
         if self.server_url:
             register_cmd.extend(['--serverUrl', self.server_url])
         if enable_eus:
