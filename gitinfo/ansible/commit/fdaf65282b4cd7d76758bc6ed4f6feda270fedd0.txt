commit fdaf65282b4cd7d76758bc6ed4f6feda270fedd0
Author: Pepe Barbe <dev@antropoide.net>
Date:   Wed Aug 22 13:34:24 2012 -0500

    bugfix in sql query

diff --git a/library/postgresql_db b/library/postgresql_db
index ca5e805318..32ee920590 100755
--- a/library/postgresql_db
+++ b/library/postgresql_db
@@ -33,7 +33,7 @@ def set_owner(cursor, db, owner):
     return True
 
 def db_owned_by(cursor, db, user):
-    query = """SELECT count(*) FROM pg_database JOIN pg_user ON datdba = usesysid
+    query = """SELECT * FROM pg_database JOIN pg_user ON datdba = usesysid
     WHERE usename = %(user)s and datname = %(db)s"""
     cursor.execute(query, {'db':db, 'user':user})
     return cursor.rowcount == 1
