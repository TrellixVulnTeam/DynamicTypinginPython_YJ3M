commit 709a3aa42b829b13f4d58d9c0d4748d46be826b4
Author: Matt Clay <matt@mystile.com>
Date:   Wed Jan 4 15:55:57 2017 -0800

    Run service test on py3 + unprivileged on docker. (#19841)
    
    * Run service test on py3 + unprivileged on docker.
    * Fix service integration test for python 3.

diff --git a/test/integration/targets/service/aliases b/test/integration/targets/service/aliases
index b46d4eb449..5d97a9be5e 100644
--- a/test/integration/targets/service/aliases
+++ b/test/integration/targets/service/aliases
@@ -1,6 +1,4 @@
 destructive
-needs/privileged
 posix/ci/group1
 skip/freebsd
 skip/osx
-skip/python3
diff --git a/test/integration/targets/service/files/ansible_test_service b/test/integration/targets/service/files/ansible_test_service
index 5e8691f2f1..682edebb85 100755
--- a/test/integration/targets/service/files/ansible_test_service
+++ b/test/integration/targets/service/files/ansible_test_service
@@ -21,7 +21,7 @@ def createDaemon():
    try:
       pid = os.fork()
    except OSError as e:
-      raise Exception, "%s [%d]" % (e.strerror, e.errno)
+      raise Exception("%s [%d]" % (e.strerror, e.errno))
 
    if (pid == 0):
       os.setsid()
@@ -29,7 +29,7 @@ def createDaemon():
       try:
          pid = os.fork()
       except OSError as e:
-         raise Exception, "%s [%d]" % (e.strerror, e.errno)
+         raise Exception("%s [%d]" % (e.strerror, e.errno))
 
       if (pid == 0):
          os.chdir(WORKDIR)
@@ -45,7 +45,7 @@ def createDaemon():
    maxfd = resource.getrlimit(resource.RLIMIT_NOFILE)[1]
    if (maxfd == resource.RLIM_INFINITY):
       maxfd = MAXFD
-  
+
    for fd in range(0, maxfd):
       try:
          os.close(fd)
diff --git a/test/integration/targets/service/tasks/main.yml b/test/integration/targets/service/tasks/main.yml
index e11702c4df..368c201dad 100644
--- a/test/integration/targets/service/tasks/main.yml
+++ b/test/integration/targets/service/tasks/main.yml
@@ -6,7 +6,6 @@
   assert:
     that:
     - "install_result.dest == '/usr/sbin/ansible_test_service'"
-    - "install_result.checksum == '4e0164ceb9a5aeab76b38483ffd27fe791baa9f4'"
     - "install_result.state == 'file'"
     - "install_result.mode == '0755'"
 
