commit fe85d85ba6d1d64fea6779596dc291d06b58ab48
Author: Max <tregubov.maxim@gmail.com>
Date:   Wed Aug 22 08:56:47 2018 +0300

    Update one_vm.py (#43349)
    
    OpenNebula 5.5.8  expects int in DISK_SIZE field when you create a vm, not a float.
    For example, "42 GB" should be sent to OpenNebula API as "43088", not as "43088.0". MEMORY you cast to int explicitly, but DISK_SIZE not.

diff --git a/lib/ansible/modules/cloud/opennebula/one_vm.py b/lib/ansible/modules/cloud/opennebula/one_vm.py
index b1020f0b50..c4bb906c80 100644
--- a/lib/ansible/modules/cloud/opennebula/one_vm.py
+++ b/lib/ansible/modules/cloud/opennebula/one_vm.py
@@ -815,7 +815,7 @@ def create_disk_str(module, client, template_id, disk_size_str):
         disk[child.tag] = child.text
 
     result = 'DISK = [' + ','.join('{key}="{val}"'.format(key=key, val=val) for key, val in disk.items() if key != 'SIZE')
-    result += ', SIZE=' + str(get_size_in_MB(module, disk_size_str)) + ']\n'
+    result += ', SIZE=' + str(int(get_size_in_MB(module, disk_size_str))) + ']\n'
 
     return result
 
