commit 65ffb92bffca9bd1a0f651b01b49dc8a91d807bc
Author: Brian Coca <bcoca@ansible.com>
Date:   Fri Nov 24 15:37:20 2017 -0500

    ensure quote runs on text
    
    fixes #33260

diff --git a/lib/ansible/plugins/filter/core.py b/lib/ansible/plugins/filter/core.py
index 731a111fed..47811fcc22 100644
--- a/lib/ansible/plugins/filter/core.py
+++ b/lib/ansible/plugins/filter/core.py
@@ -141,7 +141,7 @@ def strftime(string_format, second=None):
 
 def quote(a):
     ''' return its argument quoted for shell usage '''
-    return shlex_quote(a)
+    return shlex_quote(to_text(a))
 
 
 def fileglob(pathname):
