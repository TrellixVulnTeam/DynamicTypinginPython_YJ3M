commit 43f96a636b317285559ce19dca3d3ad84886c89c
Author: James Cammarata <jimi@sngx.net>
Date:   Wed Jun 4 23:31:59 2014 -0500

    Fix issue with symlink path detection
    
    Fixes #7627
    Fixes #7664

diff --git a/library/files/file b/library/files/file
index 0e50cb67e8..effbe6b509 100644
--- a/library/files/file
+++ b/library/files/file
@@ -193,8 +193,9 @@ def main():
             relpath = path
         else:
             relpath = os.path.dirname(path)
+
         absrc = os.path.normpath('%s/%s' % (relpath, os.path.basename(src)))
-        if not os.path.exists(absrc) and not force:
+        if not os.path.exists(src) and not os.path.exists(absrc) and not force:
             module.fail_json(path=path, src=src, msg='src file does not exist, use "force=yes" if you really want to create the link: %s' % absrc)
 
         if state == 'hard':
