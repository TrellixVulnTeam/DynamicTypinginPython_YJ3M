commit fefd87c61a1cfa7ecc04394c56d45a2b8317d617
Author: Carl <jobguru1337@hotmail.com>
Date:   Tue May 10 17:00:07 2016 -0400

    Fixes #15745 playbook include: Conditional scoping
    
    Fixes #15745
    Applies conditional forwarding to all tasks/roles within the included playbook.
    The existing line only applies forwarded conditionals to the main Task block, and misses pre_, post_, and roles.
    
    Typo ::
    
    Made a selection mistake when I copied over the one line change

diff --git a/lib/ansible/playbook/playbook_include.py b/lib/ansible/playbook/playbook_include.py
index f481ba142c..9cac3317c2 100644
--- a/lib/ansible/playbook/playbook_include.py
+++ b/lib/ansible/playbook/playbook_include.py
@@ -96,7 +96,7 @@ class PlaybookInclude(Base, Conditional, Taggable):
             # plays. If so, we can take a shortcut here and simply prepend them to
             # those attached to each block (if any)
             if forward_conditional:
-                for task_block in entry.tasks:
+                for task_block in entry.pre_tasks + entry.roles + entry.tasks + entry.post_tasks:
                     task_block.when = self.when[:] + task_block.when
 
         return pb
