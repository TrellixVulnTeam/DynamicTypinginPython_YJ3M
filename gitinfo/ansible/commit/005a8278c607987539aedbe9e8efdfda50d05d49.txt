commit 005a8278c607987539aedbe9e8efdfda50d05d49
Author: Artem Zinenko <zinenkoartem@gmail.com>
Date:   Wed Jan 24 20:25:12 2018 +0500

    influxdb: fix 'database_name' not optional (#35280)
    
    follup up of 168fb07cba6515180df7b15374739dda888e5f68

diff --git a/lib/ansible/module_utils/influxdb.py b/lib/ansible/module_utils/influxdb.py
index bc90036274..a1762bde58 100644
--- a/lib/ansible/module_utils/influxdb.py
+++ b/lib/ansible/module_utils/influxdb.py
@@ -28,7 +28,7 @@ class InfluxDb():
         self.port = self.params['port']
         self.username = self.params['username']
         self.password = self.params['password']
-        self.database_name = self.params['database_name']
+        self.database_name = self.params.get('database_name')
 
     def check_lib(self):
         if not HAS_REQUESTS:
diff --git a/lib/ansible/modules/database/influxdb/influxdb_user.py b/lib/ansible/modules/database/influxdb/influxdb_user.py
index 34bc0d62a4..4460c0e053 100644
--- a/lib/ansible/modules/database/influxdb/influxdb_user.py
+++ b/lib/ansible/modules/database/influxdb/influxdb_user.py
@@ -125,7 +125,6 @@ def main():
         user_name=dict(required=True, type='str'),
         user_password=dict(required=False, type='str', no_log=True),
         admin=dict(default='False', type='bool')
-
     )
     module = AnsibleModule(
         argument_spec=argument_spec,
