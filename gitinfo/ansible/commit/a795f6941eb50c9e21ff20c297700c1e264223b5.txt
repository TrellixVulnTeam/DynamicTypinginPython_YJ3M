commit a795f6941eb50c9e21ff20c297700c1e264223b5
Author: Nilashish Chakraborty <nilashishchakraborty8@gmail.com>
Date:   Wed Sep 4 19:59:00 2019 +0530

    Make *_bgp modules collection safe (#61761)
    
    Signed-off-by: NilashishC <nilashishchakraborty8@gmail.com>

diff --git a/lib/ansible/module_utils/network/eos/providers/module.py b/lib/ansible/module_utils/network/eos/providers/module.py
index 9f259ebb46..2d8fd67ebc 100644
--- a/lib/ansible/module_utils/network/eos/providers/module.py
+++ b/lib/ansible/module_utils/network/eos/providers/module.py
@@ -31,7 +31,7 @@ class NetworkModule(AnsibleModule):
             if network_api == 'cliconf':
                 connection_type = 'network_cli'
 
-            cls = providers.get(network_os, self._name, connection_type)
+            cls = providers.get(network_os, self._name.split('.')[-1], connection_type)
 
             if not cls:
                 msg = 'unable to find suitable provider for network os %s' % network_os
diff --git a/lib/ansible/module_utils/network/frr/providers/module.py b/lib/ansible/module_utils/network/frr/providers/module.py
index d1dfa6c069..073837c8d3 100644
--- a/lib/ansible/module_utils/network/frr/providers/module.py
+++ b/lib/ansible/module_utils/network/frr/providers/module.py
@@ -31,7 +31,7 @@ class NetworkModule(AnsibleModule):
             if network_api == 'cliconf':
                 connection_type = 'network_cli'
 
-            cls = providers.get(network_os, self._name, connection_type)
+            cls = providers.get(network_os, self._name.split('.')[-1], connection_type)
 
             if not cls:
                 msg = 'unable to find suitable provider for network os %s' % network_os
diff --git a/lib/ansible/module_utils/network/ios/providers/module.py b/lib/ansible/module_utils/network/ios/providers/module.py
index e7dc037e5b..69c6dd9659 100644
--- a/lib/ansible/module_utils/network/ios/providers/module.py
+++ b/lib/ansible/module_utils/network/ios/providers/module.py
@@ -31,7 +31,7 @@ class NetworkModule(AnsibleModule):
             if network_api == 'cliconf':
                 connection_type = 'network_cli'
 
-            cls = providers.get(network_os, self._name, connection_type)
+            cls = providers.get(network_os, self._name.split('.')[-1], connection_type)
 
             if not cls:
                 msg = 'unable to find suitable provider for network os %s' % network_os
diff --git a/lib/ansible/module_utils/network/iosxr/providers/module.py b/lib/ansible/module_utils/network/iosxr/providers/module.py
index 28725e9a8e..2c4d97a337 100644
--- a/lib/ansible/module_utils/network/iosxr/providers/module.py
+++ b/lib/ansible/module_utils/network/iosxr/providers/module.py
@@ -31,7 +31,7 @@ class NetworkModule(AnsibleModule):
             if network_api == 'cliconf':
                 connection_type = 'network_cli'
 
-            cls = providers.get(network_os, self._name, connection_type)
+            cls = providers.get(network_os, self._name.split('.')[-1], connection_type)
 
             if not cls:
                 msg = 'unable to find suitable provider for network os %s' % network_os
