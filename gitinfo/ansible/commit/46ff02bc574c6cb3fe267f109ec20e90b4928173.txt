commit 46ff02bc574c6cb3fe267f109ec20e90b4928173
Author: Marcus McCurdy <mmccurdy@50onred.com>
Date:   Mon Sep 2 16:16:45 2013 -0400

    Makes pervious lineinfile fix more explicit

diff --git a/library/files/lineinfile b/library/files/lineinfile
index 7dd38a3cf0..d68b272a04 100644
--- a/library/files/lineinfile
+++ b/library/files/lineinfile
@@ -305,7 +305,7 @@ def main():
         module.fail_json(rc=256, msg='Destination %s is a directory !' % dest)
 
     if params['state'] == 'present':
-        if params.get('line') is None:
+        if params.get('line', None) is None:
             module.fail_json(msg='line= is required with state=present')
 
         # Deal with the insertafter default value manually, to avoid errors
