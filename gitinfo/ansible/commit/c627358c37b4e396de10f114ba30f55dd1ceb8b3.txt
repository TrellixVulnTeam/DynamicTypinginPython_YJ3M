commit c627358c37b4e396de10f114ba30f55dd1ceb8b3
Author: James Tanner <tanner.jc@gmail.com>
Date:   Wed Jan 15 10:25:27 2014 -0500

    sysctl module: append newline character to lines in the file

diff --git a/library/system/sysctl b/library/system/sysctl
index 050c2effb1..c16056937d 100644
--- a/library/system/sysctl
+++ b/library/system/sysctl
@@ -246,7 +246,7 @@ class SysctlModule(object):
         f = open(tmp_path,"w")
         try:
             for l in self.fixed_lines:
-                f.write(l)
+                f.write(l.strip() + "\n")
         except IOError, e:
             self.module.fail_json(msg="Failed to write to file %s: %s" % (tmp_path, str(e)))
         f.flush()
