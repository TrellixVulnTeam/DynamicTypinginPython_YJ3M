commit 60ea14fe1f8e594a23c21fc06ae6cf8aeb5d84dc
Author: Yuwei Zhou <yuwzho@microsoft.com>
Date:   Thu Jun 28 17:00:21 2018 +0800

    Retrive subscription id from env (#42036)

diff --git a/contrib/inventory/azure_rm.py b/contrib/inventory/azure_rm.py
index 59e0b70146..d68c83fae4 100755
--- a/contrib/inventory/azure_rm.py
+++ b/contrib/inventory/azure_rm.py
@@ -425,6 +425,7 @@ class AzureRM(object):
 
     def _get_msi_credentials(self, subscription_id_param=None):
         credentials = MSIAuthentication()
+        subscription_id_param = subscription_id_param or os.environ.get(AZURE_CREDENTIAL_ENV_MAPPING['subscription_id'], None)
         try:
             # try to get the subscription in MSI to test whether MSI is enabled
             subscription_client = SubscriptionClient(credentials)
