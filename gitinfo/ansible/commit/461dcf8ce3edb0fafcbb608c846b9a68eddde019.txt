commit 461dcf8ce3edb0fafcbb608c846b9a68eddde019
Author: Brian Coca <bcoca@users.noreply.github.com>
Date:   Tue Nov 29 16:43:29 2016 -0500

    log on target based on nolog, not verbosity (#18570)
    
    * log on target based on nolog, not verbosity
    
    fies #18569
    
    * initialize module name
    
    removing verbosity exposed missing name at certain stages, initialize to file name
    and update later once module args are parsed

diff --git a/lib/ansible/module_utils/basic.py b/lib/ansible/module_utils/basic.py
index 8c89644c81..3c31d0c68b 100644
--- a/lib/ansible/module_utils/basic.py
+++ b/lib/ansible/module_utils/basic.py
@@ -672,6 +672,7 @@ class AnsibleModule(object):
         see library/* for examples
         '''
 
+        self._name = os.path.basename(__file__) #initialize name until we can parse from options
         self.argument_spec = argument_spec
         self.supports_check_mode = supports_check_mode
         self.check_mode = False
@@ -751,7 +752,7 @@ class AnsibleModule(object):
 
         self._set_defaults(pre=False)
 
-        if not self.no_log and self._verbosity >= 3:
+        if not self.no_log:
             self._log_invocation()
 
         # finally, make sure we're in a sane working dir
