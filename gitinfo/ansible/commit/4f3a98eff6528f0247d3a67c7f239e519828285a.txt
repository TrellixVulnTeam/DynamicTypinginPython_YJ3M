commit 4f3a98eff6528f0247d3a67c7f239e519828285a
Author: Abhijit Menon-Sen <ams@2ndQuadrant.com>
Date:   Thu Aug 27 18:36:05 2015 +0530

    Update Vault tests to make sure AES decryption works
    
    Note that this test was broken in devel because it was really just
    duplicating the AES256 test because setting v.cipher_name to 'AES'
    no longer selected AES after it was de-write-whitelisted.
    
    Now that we've removed the VaultAES encryption code, we embed static
    output from an earlier version and test that we can decrypt it.

diff --git a/test/units/parsing/vault/test_vault.py b/test/units/parsing/vault/test_vault.py
index b627158c79..ac5a500173 100644
--- a/test/units/parsing/vault/test_vault.py
+++ b/test/units/parsing/vault/test_vault.py
@@ -104,9 +104,10 @@ class TestVaultLib(unittest.TestCase):
             raise SkipTest
         v = VaultLib('ansible')
         v.cipher_name = u'AES'
-        enc_data = v.encrypt("foobar")
+        # AES encryption code has been removed, so this is old output for
+        # AES-encrypted 'foobar' with password 'ansible'.
+        enc_data = '$ANSIBLE_VAULT;1.1;AES\n53616c7465645f5fc107ce1ef4d7b455e038a13b053225776458052f8f8f332d554809d3f150bfa3\nfe3db930508b65e0ff5947e4386b79af8ab094017629590ef6ba486814cf70f8e4ab0ed0c7d2587e\n786a5a15efeb787e1958cbdd480d076c\n'
         dec_data = v.decrypt(enc_data)
-        assert enc_data != "foobar", "encryption failed"
         assert dec_data == "foobar", "decryption failed"
 
     def test_encrypt_decrypt_aes256(self):
