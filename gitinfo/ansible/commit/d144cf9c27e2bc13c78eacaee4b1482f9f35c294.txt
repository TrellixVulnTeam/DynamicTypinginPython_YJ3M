commit d144cf9c27e2bc13c78eacaee4b1482f9f35c294
Author: Lo√Øc Blot <nerzhul@users.noreply.github.com>
Date:   Tue Feb 21 14:51:23 2017 +0100

    vmware_inventory: permit to skip nopermission error on host subkeys (notify user in debug mode) (#21663)
    
    example use case: you have rights on guest but you cannot see the VMWare host
    
    Signed-off-by: nerzhul <loic.blot@unix-experience.fr>

diff --git a/contrib/inventory/vmware_inventory.py b/contrib/inventory/vmware_inventory.py
index 86dfb2984a..f3cbd5fbec 100755
--- a/contrib/inventory/vmware_inventory.py
+++ b/contrib/inventory/vmware_inventory.py
@@ -685,12 +685,15 @@ class VMWareInventory(object):
                 if self.lowerkeys:
                     method = method.lower()
                 if level + 1 <= self.maxlevel:
-                    rdata[method] = self._process_object_types(
-                        methodToCall,
-                        thisvm=thisvm,
-                        inkey=inkey + '.' + method,
-                        level=(level + 1)
-                    )
+                    try:
+                        rdata[method] = self._process_object_types(
+                            methodToCall,
+                            thisvm=thisvm,
+                            inkey=inkey + '.' + method,
+                            level=(level + 1)
+                        )
+                    except vim.fault.NoPermission:
+                        self.debugl("Skipping method %s (NoPermission)" % method)
         else:
             pass
 
