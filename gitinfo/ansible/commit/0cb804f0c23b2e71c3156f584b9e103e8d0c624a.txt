commit 0cb804f0c23b2e71c3156f584b9e103e8d0c624a
Author: Brian Coca <bcoca@ansible.com>
Date:   Wed Mar 16 16:59:44 2016 -0700

    fix lsb fact gathering
    
    was erroring out when rc !=0 also fixed redundant paths
    fixes #14965

diff --git a/lib/ansible/module_utils/facts.py b/lib/ansible/module_utils/facts.py
index 4612816f53..335248f536 100644
--- a/lib/ansible/module_utils/facts.py
+++ b/lib/ansible/module_utils/facts.py
@@ -631,22 +631,20 @@ class Facts(object):
             rc, out, err = self.module.run_command([lsb_path, "-a"])
             if rc == 0:
                 self.facts['lsb'] = {}
-            for line in out.split('\n'):
-                if len(line) < 1 or ':' not in line:
-                    continue
-                value = line.split(':', 1)[1].strip()
-                if 'LSB Version:' in line:
-                    self.facts['lsb']['release'] = value
-                elif 'Distributor ID:' in line:
-                    self.facts['lsb']['id'] = value
-                elif 'Description:' in line:
-                    self.facts['lsb']['description'] = value
-                elif 'Release:' in line:
-                    self.facts['lsb']['release'] = value
-                elif 'Codename:' in line:
-                    self.facts['lsb']['codename'] = value
-            if 'lsb' in self.facts and 'release' in self.facts['lsb']:
-                self.facts['lsb']['major_release'] = self.facts['lsb']['release'].split('.')[0]
+                for line in out.split('\n'):
+                    if len(line) < 1 or ':' not in line:
+                        continue
+                    value = line.split(':', 1)[1].strip()
+                    if 'LSB Version:' in line:
+                        self.facts['lsb']['release'] = value
+                    elif 'Distributor ID:' in line:
+                        self.facts['lsb']['id'] = value
+                    elif 'Description:' in line:
+                        self.facts['lsb']['description'] = value
+                    elif 'Release:' in line:
+                        self.facts['lsb']['release'] = value
+                    elif 'Codename:' in line:
+                        self.facts['lsb']['codename'] = value
         elif lsb_path is None and os.path.exists('/etc/lsb-release'):
             self.facts['lsb'] = {}
             for line in get_file_lines('/etc/lsb-release'):
@@ -659,13 +657,10 @@ class Facts(object):
                     self.facts['lsb']['description'] = value
                 elif 'DISTRIB_CODENAME' in line:
                     self.facts['lsb']['codename'] = value
-        else:
-            return self.facts
 
         if 'lsb' in self.facts and 'release' in self.facts['lsb']:
             self.facts['lsb']['major_release'] = self.facts['lsb']['release'].split('.')[0]
 
-
     def get_selinux_facts(self):
         if not HAVE_SELINUX:
             self.facts['selinux'] = False
