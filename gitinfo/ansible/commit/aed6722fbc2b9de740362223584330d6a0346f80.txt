commit aed6722fbc2b9de740362223584330d6a0346f80
Author: Deepak Agrawal <deepacks@gmail.com>
Date:   Fri Aug 17 12:34:11 2018 +0530

    DCI devel iosxr fix : on-device diffs does not work always (#44265)
    
    * fix devel dci failure on iosxr
    
    * pep8 issue fix

diff --git a/lib/ansible/plugins/cliconf/iosxr.py b/lib/ansible/plugins/cliconf/iosxr.py
index d6828e2785..f290721cda 100644
--- a/lib/ansible/plugins/cliconf/iosxr.py
+++ b/lib/ansible/plugins/cliconf/iosxr.py
@@ -103,14 +103,10 @@ class Cliconf(CliconfBase):
             results.append(self.send_command(**line))
             requests.append(cmd)
 
-        diff = self.get_diff(admin=admin)
-        config_diff = diff.get('config_diff')
-        if config_diff or replace:
-            resp['diff'] = config_diff
-            if commit:
-                self.commit(comment=comment, label=label, replace=replace)
-            else:
-                self.discard_changes()
+        if commit:
+            self.commit(comment=comment, label=label, replace=replace)
+        else:
+            self.discard_changes()
 
         self.abort(admin=admin)
 
