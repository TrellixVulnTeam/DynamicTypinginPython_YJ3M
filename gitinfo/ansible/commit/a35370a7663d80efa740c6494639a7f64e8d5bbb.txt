commit a35370a7663d80efa740c6494639a7f64e8d5bbb
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Mon Jul 22 15:15:55 2013 -0400

    Fix prev feature commit, Do not require aptitude to use apt commands in the apt module, only needed when upgrading.

diff --git a/library/packaging/apt b/library/packaging/apt
index bf698cb403..d93835f5ae 100644
--- a/library/packaging/apt
+++ b/library/packaging/apt
@@ -233,6 +233,8 @@ def upgrade(m, mode="yes", force=False):
         check_arg = '--simulate'
     else:
         check_arg = ''
+
+    apt_cmd = None
     if mode == "dist":
         # apt-get dist-upgrade
         apt_cmd = APT_GET_CMD
@@ -291,10 +293,10 @@ def main():
     global APT_GET_CMD
     APT_GET_CMD = module.get_bin_path("apt-get")
 
-    if not APTITUDE_CMD:
+    p = module.params
+    if not APTITUDE_CMD and p.get('upgrade', None) in [ 'full', 'safe', 'yes' ]:
         module.fail_json(msg="Could not find aptitude. Please ensure it is installed.")
 
-    p = module.params
     install_recommends = p['install_recommends']
 
     try:
