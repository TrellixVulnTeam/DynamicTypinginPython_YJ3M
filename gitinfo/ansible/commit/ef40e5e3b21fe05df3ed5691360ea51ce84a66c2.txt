commit ef40e5e3b21fe05df3ed5691360ea51ce84a66c2
Author: Brian Coca <bcoca@ansible.com>
Date:   Thu Feb 22 11:53:40 2018 -0500

    protect against plugins using verify incorrectly
    
    assume false on any errors

diff --git a/lib/ansible/inventory/manager.py b/lib/ansible/inventory/manager.py
index 133809e5b8..845022aa52 100644
--- a/lib/ansible/inventory/manager.py
+++ b/lib/ansible/inventory/manager.py
@@ -257,8 +257,13 @@ class InventoryManager(object):
                 plugin_name = to_native(getattr(plugin, '_load_name', getattr(plugin, '_original_path', '')))
                 display.debug(u'Attempting to use plugin %s (%s)' % (plugin_name, plugin._original_path))
 
-                # initialize
-                if plugin.verify_file(source):
+                # initialize and figure out if plugin wants to attempt parsing this file
+                try:
+                    plugin_wants = bool(plugin.verify_file(source))
+                except Exception:
+                    plugin_wants = False
+
+                if plugin_wants:
                     try:
                         # in case plugin fails 1/2 way we dont want partial inventory
                         plugin.parse(self._inventory, self._loader, source, cache=cache)
