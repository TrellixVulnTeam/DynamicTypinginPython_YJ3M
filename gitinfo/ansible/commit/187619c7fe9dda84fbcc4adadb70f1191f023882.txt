commit 187619c7fe9dda84fbcc4adadb70f1191f023882
Author: James Cammarata <jimi@sngx.net>
Date:   Tue May 13 11:24:15 2014 -0500

    Use utils.combine_vars on vars_files data
    
    Fixes #7345

diff --git a/lib/ansible/playbook/play.py b/lib/ansible/playbook/play.py
index b41c676a7b..1465e3f2a1 100644
--- a/lib/ansible/playbook/play.py
+++ b/lib/ansible/playbook/play.py
@@ -785,7 +785,7 @@ class Play(object):
             """ update a host's varscache with new var data """
 
             data = utils.combine_vars(inject, data)
-            self.playbook.VARS_CACHE[host].update(data)
+            self.playbook.VARS_CACHE[host] = utils.combine_vars(self.playbook.VARS_CACHE.get(host, {}), data)
             self.playbook.callbacks.on_import_for_host(host, filename4)
 
         def process_files(filename, filename2, filename3, filename4, host=None):
