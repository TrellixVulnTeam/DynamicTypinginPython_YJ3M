commit b3b3c0ec546a71c671aeb83726c80f8f8cafc9ae
Author: Ganesh Nalawade <ganesh634@gmail.com>
Date:   Fri Jan 19 23:50:02 2018 +0530

    Add regex to catch ios error prompt (#35007)
    
    *  Move the error checking from ios_l3_module
       to ios termianl plugin by adding additional
       regex to catch error prompt.

diff --git a/lib/ansible/modules/network/ios/ios_l3_interface.py b/lib/ansible/modules/network/ios/ios_l3_interface.py
index 826535f979..45b5f9c0ff 100644
--- a/lib/ansible/modules/network/ios/ios_l3_interface.py
+++ b/lib/ansible/modules/network/ios/ios_l3_interface.py
@@ -302,12 +302,7 @@ def main():
 
     if commands:
         if not module.check_mode:
-            response = load_config(module, commands)
-            for item in response:
-                for cmd, rsp in iteritems(item):
-                    for err in ('Error:', 'overlaps with', 'Bad mask'):
-                        if err in rsp:
-                            module.fail_json(msg="command '%s' failed with error '%s'." % (cmd, rsp))
+            load_config(module, commands)
 
         result['changed'] = True
 
diff --git a/lib/ansible/plugins/terminal/ios.py b/lib/ansible/plugins/terminal/ios.py
index 42ecfe64ee..fa2072d27f 100644
--- a/lib/ansible/plugins/terminal/ios.py
+++ b/lib/ansible/plugins/terminal/ios.py
@@ -43,6 +43,10 @@ class TerminalModule(TerminalBase):
         re.compile(br"connection timed out", re.I),
         re.compile(br"[^\r\n]+ not found"),
         re.compile(br"'[^']' +returned error code: ?\d+"),
+        re.compile(br"Bad mask", re.I),
+        re.compile(br"% ?(\S+) ?overlaps with ?(\S+)", re.I),
+        re.compile(br"[%\S] ?Error: ?[\s]+", re.I),
+        re.compile(br"[%\S] ?Informational: ?[\s]+", re.I)
     ]
 
     def on_open_shell(self):
