commit 88aaa70f0ccd088488748dd2b4388a2c8f074b62
Author: bryan hunt <github@binarytemple.co.uk>
Date:   Wed Apr 30 10:40:23 2014 +0100

    fix issue #7228 ec2_vol crash

diff --git a/library/cloud/ec2_vol b/library/cloud/ec2_vol
index 152094d9b9..02688b5374 100644
--- a/library/cloud/ec2_vol
+++ b/library/cloud/ec2_vol
@@ -278,15 +278,15 @@ def attach_volume(module, ec2, volume, instance):
     # Use password data attribute to tell whether the instance is Windows or Linux
     if device_name is None and instance:
         try:
-            if not ec2.get_password_data(inst.id):
+            if not ec2.get_password_data(instance.id):
                 device_name = '/dev/sdf'
-                attach = volume.attach(inst.id, device_name)
+                attach = volume.attach(instance.id, device_name)
                 while volume.attachment_state() != 'attached':
                     time.sleep(3)
                     volume.update()
             else:
                 device_name = '/dev/xvdf'
-                attach = volume.attach(inst.id, device_name)
+                attach = volume.attach(instance.id, device_name)
                 while volume.attachment_state() != 'attached':
                     time.sleep(3)
                     volume.update()
