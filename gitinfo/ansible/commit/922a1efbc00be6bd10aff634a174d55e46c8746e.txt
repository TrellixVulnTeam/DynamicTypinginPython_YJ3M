commit 922a1efbc00be6bd10aff634a174d55e46c8746e
Author: Scott Sturdivant <scott.sturdivant@absio.com>
Date:   Thu May 23 13:43:23 2013 -0600

    Fixes #2924: User creation always reports 'changed'

diff --git a/library/system/user b/library/system/user
index 1fa114f8a8..de153c3f40 100644
--- a/library/system/user
+++ b/library/system/user
@@ -395,7 +395,7 @@ class User(object):
         groups = []
         info = self.get_pwd_info()
         for group in grp.getgrall():
-            if self.name in group[3] and info[3] != group[2]:
+            if self.name in group.gr_mem and info[3] == group.gr_gid:
                 groups.append(group[0])
         return groups
 
