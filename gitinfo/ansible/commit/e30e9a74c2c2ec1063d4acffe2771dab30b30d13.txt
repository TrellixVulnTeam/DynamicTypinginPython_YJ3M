commit e30e9a74c2c2ec1063d4acffe2771dab30b30d13
Author: Marco Vito Moscaritolo <mavimo@gmail.com>
Date:   Sat Sep 29 16:46:30 2012 +0200

    Added DOCUMENTATION to postgresql_user module.

diff --git a/library/postgresql_user b/library/postgresql_user
index 8f85988770..99de1414b2 100755
--- a/library/postgresql_user
+++ b/library/postgresql_user
@@ -16,6 +16,79 @@
 # You should have received a copy of the GNU General Public License
 # along with Ansible.  If not, see <http://www.gnu.org/licenses/>.
 
+DOCUMENTATION = '''
+---
+module: postgresql_user
+short_description: Adds or removes a users (roles) from a PostgreSQL database.
+description:
+   - Add or remove PostgreSQL users (roles) from a remote host and, optionally, grant the users access to an existing database or tables.
+   - The fundamental function of the module is to create, or delete, roles from a PostgreSQL cluster. Privilege assignment, or removal, is an optional step, which works on one database at a time. This allows for the module to be called several times in the same module to modify the permissions on different databases, or to grant permissions to already existing users.
+   - A user cannot be removed untill all the privileges have been stripped from the user. In such situation, if the module tries to remove the user it will fail. To avoid this from happening the fail_on_user option signals the module to try to remove the user, but if not possible keep going; the module will report if changes happened and separately if the user was removed or not.
+version_added: "0.6"
+options:
+  name:
+    description:
+      - name of the user (role) to add or remove
+    required: true
+    default: null
+  password:
+    description:
+      - set the user's password
+    required: true
+    default: null
+  db:
+    description:
+      - name of database where permissions will be granted
+    required: false
+    default: null
+  fail_on_user:
+    description:
+      - if yes, fail when user can't be removed. Otherwise just log and continue
+    required: false
+    default: yes
+    choices: [ "yes", "no" ]
+  login_user:
+    description:
+      - User (role) used to authenticate with PostgreSQL
+    required: false
+    default: postgres
+  login_password:
+    description:
+      - Password used to authenticate with PostgreSQL
+    required: false
+    default: null
+  login_host:
+    description:
+      - Host running PostgreSQL.
+    required: false
+    default: localhost
+  priv:
+    description:
+      - PostgreSQL privileges string in the format: table:priv1,priv2
+    required: false
+    default: null
+  state:
+    description:
+      - The database state
+    required: false
+    default: present
+    choices: [ "present", "absent" ]
+examples:
+   - code: postgresql_user db=acme user=django password=ceec4eif7ya priv=CONNECT/products:ALL
+     description: Create django user and grant access to database and products table
+   - code: postgresql_user db=acme user=test priv=ALL/products:ALL state=absent fail_on_user=no
+     description: Remove test user privileges from acme
+   - code: postgresql_user db=test user=test priv=ALL state=absent
+     description: Remove test user from test database and the cluster
+   - code: INSERT,UPDATE/table:SELECT/anothertable:ALL
+     description: Example privileges string format
+notes:
+   - The default authentication assumes that you are either logging in as or sudo'ing to the postgres account on the host.
+   - This module uses psycopg2, a Python PostgreSQL database adapter. You must ensure that psycopg2 is installed on the host before using this module. If the remote host is the PostgreSQL server (which is the default case), then PostgreSQL must also be installed on the remote host. For Ubuntu-based systems, install the postgresql, libpq-dev, and python-psycopg2 packages on the remote host before using this module.
+requirements: [ psycopg2 ]
+author: Lorin Hochstein
+'''
+
 import re
 
 try:
