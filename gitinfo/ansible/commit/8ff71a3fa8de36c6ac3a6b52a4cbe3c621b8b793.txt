commit 8ff71a3fa8de36c6ac3a6b52a4cbe3c621b8b793
Author: Monty Taylor <mordred@inaugust.com>
Date:   Wed Jun 17 08:47:14 2015 -0400

    Actually use changed variable

diff --git a/lib/ansible/modules/cloud/openstack/os_security_group.py b/lib/ansible/modules/cloud/openstack/os_security_group.py
index 48aed418fa..0864b83e9e 100644
--- a/lib/ansible/modules/cloud/openstack/os_security_group.py
+++ b/lib/ansible/modules/cloud/openstack/os_security_group.py
@@ -115,8 +115,8 @@ def main():
         if module.check_mode:
             module.exit_json(changed=_system_state_change(module, secgroup))
 
+        changed = False
         if state == 'present':
-            changed = False
             if not secgroup:
                 secgroup = cloud.create_security_group(name, description)
                 changed = True
@@ -126,14 +126,13 @@ def main():
                         secgroup['id'], description=description)
                     changed = True
             module.exit_json(
-                changed=True, id=secgroup.id, secgroup=secgroup)
+                changed=changed, id=secgroup.id, secgroup=secgroup)
 
         if state == 'absent':
-            if not secgroup:
-                module.exit_json(changed=False)
-            else:
+            if secgroup:
                 cloud.delete_security_group(secgroup['id'])
-                module.exit_json(changed=True)
+                changed=True
+            module.exit_json(changed=changed)
 
     except shade.OpenStackCloudException as e:
         module.fail_json(msg=e.message)
