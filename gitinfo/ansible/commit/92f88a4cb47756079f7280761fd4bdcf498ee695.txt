commit 92f88a4cb47756079f7280761fd4bdcf498ee695
Author: Shayne Clausson <shayne.clausson@stelligent.com>
Date:   Mon Sep 28 19:50:02 2015 +0200

    Replaces 'old' get_ec2_creds connection method with get_aws_connection_info to support passing in security_token for temporary creds.

diff --git a/lib/ansible/modules/cloud/amazon/iam_cert.py b/lib/ansible/modules/cloud/amazon/iam_cert.py
index 1f58be753c..53b2368bd3 100644
--- a/lib/ansible/modules/cloud/amazon/iam_cert.py
+++ b/lib/ansible/modules/cloud/amazon/iam_cert.py
@@ -241,13 +241,10 @@ def main():
     if not HAS_BOTO:
         module.fail_json(msg="Boto is required for this module")
 
-    ec2_url, aws_access_key, aws_secret_key, region = get_ec2_creds(module)
+    region, ec2_url, aws_connect_kwargs = get_aws_connection_info(module)
 
     try:
-        iam = boto.iam.connection.IAMConnection(
-            aws_access_key_id=aws_access_key,
-            aws_secret_access_key=aws_secret_key,
-        )
+        iam = boto.iam.connection.IAMConnection(**aws_connect_kwargs)
     except boto.exception.NoAuthHandlerFound, e:
         module.fail_json(msg=str(e))
 
