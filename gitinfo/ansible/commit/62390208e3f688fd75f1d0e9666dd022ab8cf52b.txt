commit 62390208e3f688fd75f1d0e9666dd022ab8cf52b
Author: Alex Lo <alexlo@gmail.com>
Date:   Fri Jun 12 00:50:27 2015 -0400

    Fix boto library checking

diff --git a/lib/ansible/modules/extras/cloud/amazon/cloudtrail.py b/lib/ansible/modules/extras/cloud/amazon/cloudtrail.py
index b557925a88..4a1b66e3a8 100644
--- a/lib/ansible/modules/extras/cloud/amazon/cloudtrail.py
+++ b/lib/ansible/modules/extras/cloud/amazon/cloudtrail.py
@@ -92,13 +92,14 @@ EXAMPLES = """
     local_action: cloudtrail state=disabled name=main region=us-east-1
 """
 
-boto_import_failed = False
+HAS_BOTO = False
 try:
     import boto
     import boto.cloudtrail
     from boto.regioninfo import RegionInfo
+    HAS_BOTO = True
 except ImportError:
-    boto_import_failed = True
+    HAS_BOTO = False
 
 class CloudTrailManager:
     """Handles cloudtrail configuration"""
@@ -149,9 +150,6 @@ class CloudTrailManager:
 
 def main():
 
-    if not has_libcloud:
-      module.fail_json(msg='boto is required.')
-
     argument_spec = ec2_argument_spec()
     argument_spec.update(dict(
         state={'required': True, 'choices': ['enabled', 'disabled'] },
@@ -163,6 +161,10 @@ def main():
     required_together = ( ['state', 's3_bucket_name'] )
 
     module = AnsibleModule(argument_spec=argument_spec, supports_check_mode=True, required_together=required_together)
+
+    if not HAS_BOTO:
+      module.fail_json(msg='Alex sucks boto is required.')
+
     ec2_url, access_key, secret_key, region = get_ec2_creds(module)
     aws_connect_params = dict(aws_access_key_id=access_key,
                               aws_secret_access_key=secret_key)
