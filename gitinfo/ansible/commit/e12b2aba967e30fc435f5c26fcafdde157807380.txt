commit e12b2aba967e30fc435f5c26fcafdde157807380
Author: Richard C Isaacson <richard.c.isaacson@gmail.com>
Date:   Thu Feb 20 15:59:25 2014 -0500

    Fix selinux in the new tests for the file module.
    
    We had some incorrect logic for when selinux is installed and disabled.

diff --git a/tests_new/integration/roles/test_file/tasks/main.yml b/tests_new/integration/roles/test_file/tasks/main.yml
index 1fd292cd23..4fc86e995b 100644
--- a/tests_new/integration/roles/test_file/tasks/main.yml
+++ b/tests_new/integration/roles/test_file/tasks/main.yml
@@ -98,13 +98,13 @@
   register: selinux_installed
 
 - name: determine if selinux is enabled
-  shell: getenforce | grep -q Disabled || echo yes
+  shell: getenforce | grep Disabled
   register: selinux_enabled
   when: selinux_installed.stdout != ""
   ignore_errors: true
 
 - include: selinux_tests.yml
-  when: selinux_enabled
+  when: selinux_enabled.stdout != "Disabled"
 
 - name: remote directory foobar
   file: path={{output_dir}}/foobar state=absent
