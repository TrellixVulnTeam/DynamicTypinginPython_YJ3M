commit 2a976ac3137e3fb0a8cdbc68769b92e70bd460dc
Author: James Tanner <tanner.jc@gmail.com>
Date:   Wed Mar 26 11:28:43 2014 -0400

    Fixes #5059 Ignore lookup failures when templating a task name

diff --git a/lib/ansible/utils/template.py b/lib/ansible/utils/template.py
index 2f79d6ca59..3f26f3f9c0 100644
--- a/lib/ansible/utils/template.py
+++ b/lib/ansible/utils/template.py
@@ -88,8 +88,14 @@ def lookup(name, *args, **kwargs):
     vars = kwargs.get('vars', None)
 
     if instance is not None:
-        ran = instance.run(*args, inject=vars, **kwargs)
-        return ",".join(ran)
+        # safely catch run failures per #5059
+        try:
+            ran = instance.run(*args, inject=vars, **kwargs)
+        except Exception, e:
+            ran = None
+        if ran:
+            ran = ",".join(ran)
+        return ran
     else:
         raise errors.AnsibleError("lookup plugin (%s) not found" % name)
 
