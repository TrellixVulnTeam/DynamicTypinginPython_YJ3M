commit e0cf64d64cc737cd9f6ae411609f23d13f0288e8
Author: Ganesh Nalawade <ganesh634@gmail.com>
Date:   Tue Jul 18 22:10:08 2017 +0530

    Fix idempotency issue in vyos_interface integration test (#26993)

diff --git a/test/integration/targets/vyos_interface/tests/cli/basic.yaml b/test/integration/targets/vyos_interface/tests/cli/basic.yaml
index 3832b0c72b..5b8c44cb31 100644
--- a/test/integration/targets/vyos_interface/tests/cli/basic.yaml
+++ b/test/integration/targets/vyos_interface/tests/cli/basic.yaml
@@ -12,11 +12,24 @@
     name: eth1
     state: absent
 
-- name: Configure interface params
+- name: Set up - Create interface
   vyos_interface:
     name: eth1
     state: present
     description: test-interface
+  register: result
+
+- assert:
+    that:
+      - 'result.changed == true'
+      - '"set interfaces ethernet eth1" in result.commands'
+      - '"set interfaces ethernet eth1 description test-interface" in result.commands'
+
+- name: Configure interface params
+  vyos_interface:
+    name: eth1
+    state: present
+    description: test-interface-1
     speed: 100
     duplex: half
     mtu: 256
@@ -26,7 +39,7 @@
 - assert:
     that:
       - 'result.changed == true'
-      - '"set interfaces ethernet eth1 description test-interface" in result.commands'
+      - '"set interfaces ethernet eth1 description test-interface-1" in result.commands'
       - '"set interfaces ethernet eth1 speed 100" in result.commands'
       - '"set interfaces ethernet eth1 duplex half" in result.commands'
       - '"set interfaces ethernet eth1 mtu 256" in result.commands'
