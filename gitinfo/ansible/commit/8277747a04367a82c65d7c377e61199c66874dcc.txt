commit 8277747a04367a82c65d7c377e61199c66874dcc
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Mon Oct 12 15:50:23 2015 -0700

    Fix password lookup when password file exists and the password is not encrypted

diff --git a/lib/ansible/plugins/lookup/password.py b/lib/ansible/plugins/lookup/password.py
index cf09a7e302..9806788165 100644
--- a/lib/ansible/plugins/lookup/password.py
+++ b/lib/ansible/plugins/lookup/password.py
@@ -135,20 +135,19 @@ class LookupModule(LookupBase):
             else:
                 content = open(path).read().rstrip()
 
+                password = content
+                salt = None
                 if params['encrypt'] is not None:
                     try:
                         sep = content.rindex(' ')
                     except ValueError:
-                        password = content
-                        salt = None
+                        # No salt
+                        pass
                     else:
                         salt_field = content[sep + 1:]
                         if salt_field.startswith('salt='):
                             password = content[:sep]
                             salt = salt_field[len('salt='):]
-                        else:
-                            password = content
-                            salt = None
 
                     # crypt requested, add salt if missing
                     if not salt:
