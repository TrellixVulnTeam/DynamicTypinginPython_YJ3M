commit b2b3d99839ba29415aec6a71de32814a8fd388bb
Author: Matt Clay <matt@mystile.com>
Date:   Thu Sep 22 16:34:33 2016 -0700

    Add shellcheck to sanity checks. (#3013)
    
    Also disable deprecation warnings during module validation.

diff --git a/lib/ansible/modules/extras/test/utils/shippable/sanity.sh b/lib/ansible/modules/extras/test/utils/shippable/sanity.sh
index 1c0e2451a4..d9234cf052 100755
--- a/lib/ansible/modules/extras/test/utils/shippable/sanity.sh
+++ b/lib/ansible/modules/extras/test/utils/shippable/sanity.sh
@@ -9,6 +9,10 @@ cd "${source_root}"
 if [ "${install_deps}" != "" ]; then
     add-apt-repository ppa:fkrull/deadsnakes && apt-get update -qq && apt-get install python2.4 -qq
 
+    apt-add-repository 'deb http://archive.ubuntu.com/ubuntu trusty-backports universe'
+    apt-get update -qq
+    apt-get install shellcheck
+
     pip install git+https://github.com/ansible/ansible.git@devel#egg=ansible
     pip install git+https://github.com/sivel/ansible-testing.git#egg=ansible_testing
 fi
@@ -19,4 +23,8 @@ python2.6 -m compileall -fq .
 python2.7 -m compileall -fq .
 python3.5 -m compileall -fq . -x "($(printf %s "$(< "test/utils/shippable/sanity-skip-python3.txt"))"  | tr '\n' '|')"
 
-ansible-validate-modules --exclude '/utilities/|/shippable(/|$)' .
+ANSIBLE_DEPRECATION_WARNINGS=false \
+    ansible-validate-modules --exclude '/utilities/|/shippable(/|$)' .
+
+shellcheck \
+    test/utils/shippable/*.sh
