commit 2dddfbe67ca162369ca0afe405c8c5ad5feeb0b8
Author: David Shrewsbury <shrewsbury.dave@gmail.com>
Date:   Thu Mar 24 08:45:00 2016 -0400

    Add shade version check to os_flavor_facts
    
    The range_search() API was added to the shade library in version
    1.5.0 so let's check for that and let the user know they need to
    upgrade if they try to use it.

diff --git a/lib/ansible/modules/extras/cloud/openstack/os_flavor_facts.py b/lib/ansible/modules/extras/cloud/openstack/os_flavor_facts.py
index 3795abd08d..05a3782be7 100644
--- a/lib/ansible/modules/extras/cloud/openstack/os_flavor_facts.py
+++ b/lib/ansible/modules/extras/cloud/openstack/os_flavor_facts.py
@@ -23,6 +23,9 @@ try:
 except ImportError:
     HAS_SHADE = False
 
+from distutils.version import StrictVersion
+
+
 DOCUMENTATION = '''
 ---
 module: os_flavor_facts
@@ -200,6 +203,9 @@ def main():
             if ram:
                 filters['ram'] = ram
             if filters:
+                # Range search added in 1.5.0
+                if StrictVersion(shade.__version__) < StrictVersion('1.5.0'):
+                    module.fail_json(msg="Shade >= 1.5.0 needed for this functionality")
                 flavors = cloud.range_search(flavors, filters)
 
         if limit is not None:
