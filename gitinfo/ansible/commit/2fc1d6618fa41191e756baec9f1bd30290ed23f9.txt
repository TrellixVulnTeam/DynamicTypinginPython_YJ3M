commit 2fc1d6618fa41191e756baec9f1bd30290ed23f9
Author: Yaacov Zamir <kobi.zamir@gmail.com>
Date:   Mon Oct 16 02:30:34 2017 +0300

    fix the handeling of empty auth_key (#31753)

diff --git a/lib/ansible/modules/remote_management/manageiq/manageiq_provider.py b/lib/ansible/modules/remote_management/manageiq/manageiq_provider.py
index 772709a497..6758f3a199 100644
--- a/lib/ansible/modules/remote_management/manageiq/manageiq_provider.py
+++ b/lib/ansible/modules/remote_management/manageiq/manageiq_provider.py
@@ -443,7 +443,7 @@ class ManageIQProvider(object):
                 # get role and authtype
                 role = endpoint.get('role') or provider_defaults.get(endpoint_key + '_role', 'default')
                 if role == 'default':
-                    authtype = provider_defaults.get('authtype', role)
+                    authtype = provider_defaults.get('authtype') or role
                 else:
                     authtype = role
 
@@ -461,7 +461,7 @@ class ManageIQProvider(object):
                         'authtype': authtype,
                         'userid': endpoint.get('userid'),
                         'password': endpoint.get('password'),
-                        'auth_key': endpoint.get('auth_key', default_auth_key),
+                        'auth_key': endpoint.get('auth_key') or default_auth_key,
                     }
                 })
 
