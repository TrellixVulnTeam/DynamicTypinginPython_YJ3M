commit 7553c42e0930d3b22f3bfc6551c58003c1449767
Author: Stanley Karunditu <skamithi@gmail.com>
Date:   Fri Oct 27 08:15:36 2017 -0400

    Fixes #31090. In network parse_cli filter plugin, this change moves the creation of a (#31092)
    
    new match(block). It previously only occurred if a new match occurred,
    but suggest it should occur when an end of a block match is found.

diff --git a/lib/ansible/plugins/filter/network.py b/lib/ansible/plugins/filter/network.py
index 6a53cf5c07..b46c363f14 100644
--- a/lib/ansible/plugins/filter/network.py
+++ b/lib/ansible/plugins/filter/network.py
@@ -112,8 +112,6 @@ def parse_cli(output, tmpl):
                 match_end = end_block.match(line)
 
                 if match_start:
-                    if lines:
-                        blocks.append('\n'.join(lines))
                     lines = list()
                     lines.append(line)
                     block_started = True
@@ -121,6 +119,7 @@ def parse_cli(output, tmpl):
                 elif match_end:
                     if lines:
                         lines.append(line)
+                        blocks.append('\n'.join(lines))
                     block_started = False
 
                 elif block_started:
