commit 6000d636b358853bd880eafb96792e0ff07670a6
Author: James Tanner <tanner.jc@gmail.com>
Date:   Mon Dec 2 15:11:23 2013 -0500

    Fixes #5023 Convert all modules to use new snippet import pattern

diff --git a/library/cloud/cloudformation b/library/cloud/cloudformation
index f9eeceefc9..afacb694f1 100644
--- a/library/cloud/cloudformation
+++ b/library/cloud/cloudformation
@@ -294,6 +294,6 @@ def main():
     module.exit_json(**result)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/cloud/digital_ocean b/library/cloud/digital_ocean
index 0c6eee8050..6309fd726b 100644
--- a/library/cloud/digital_ocean
+++ b/library/cloud/digital_ocean
@@ -420,6 +420,6 @@ def main():
         module.fail_json(msg=str(e))
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/cloud/docker b/library/cloud/docker
index a7e635f79e..e6a25ef139 100644
--- a/library/cloud/docker
+++ b/library/cloud/docker
@@ -480,6 +480,6 @@ def main():
         module.exit_json(failed=True, changed=changed, msg=repr(e))
         
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/cloud/gc_storage b/library/cloud/gc_storage
index 6cad93eb5b..ccce877bd3 100644
--- a/library/cloud/gc_storage
+++ b/library/cloud/gc_storage
@@ -414,6 +414,6 @@ def main():
 
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/cloud/gce b/library/cloud/gce
index cfc5811acf..598c279a72 100644
--- a/library/cloud/gce
+++ b/library/cloud/gce
@@ -417,6 +417,6 @@ def main():
     sys.exit(0)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/cloud/gce_lb b/library/cloud/gce_lb
index 21e142be18..415f36c5b7 100644
--- a/library/cloud/gce_lb
+++ b/library/cloud/gce_lb
@@ -328,6 +328,6 @@ def main():
     sys.exit(0)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/cloud/gce_net b/library/cloud/gce_net
index b0954a2f8d..8c0f3fc05b 100644
--- a/library/cloud/gce_net
+++ b/library/cloud/gce_net
@@ -268,6 +268,6 @@ def main():
     sys.exit(0)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/cloud/gce_pd b/library/cloud/gce_pd
index 0e125d260d..b2aa27d21f 100644
--- a/library/cloud/gce_pd
+++ b/library/cloud/gce_pd
@@ -250,6 +250,6 @@ def main():
     sys.exit(0)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/cloud/glance_image b/library/cloud/glance_image
index d6ab553847..a6fadfa85c 100644
--- a/library/cloud/glance_image
+++ b/library/cloud/glance_image
@@ -244,6 +244,6 @@ def main():
             _glance_delete_image(module, module.params, client)
 
 # this is magic, see lib/ansible/module.params['common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/cloud/keystone_user b/library/cloud/keystone_user
index 4efe72ddc0..2ccaef175f 100644
--- a/library/cloud/keystone_user
+++ b/library/cloud/keystone_user
@@ -386,6 +386,6 @@ def dispatch(keystone, user=None, password=None, tenant=None,
     return dict(changed=changed, id=id)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 if __name__ == '__main__':
     main()
diff --git a/library/cloud/linode b/library/cloud/linode
index b7d1aaa8c4..0426540909 100644
--- a/library/cloud/linode
+++ b/library/cloud/linode
@@ -483,6 +483,6 @@ def main():
                  payment_term, password, ssh_pub_key, swap, wait, wait_timeout)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/cloud/nova_compute b/library/cloud/nova_compute
index e6b550cd18..a3a4fa5c7b 100644
--- a/library/cloud/nova_compute
+++ b/library/cloud/nova_compute
@@ -248,6 +248,6 @@ def main():
         _delete_server(module, nova)
                 
 # this is magic, see lib/ansible/module.params['common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/cloud/nova_keypair b/library/cloud/nova_keypair
index 3d332a03fc..526ea06f40 100644
--- a/library/cloud/nova_keypair
+++ b/library/cloud/nova_keypair
@@ -125,6 +125,6 @@ def main():
         module.exit_json(changed = False, result = "not present")
 
 # this is magic, see lib/ansible/module.params['common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/cloud/ovirt b/library/cloud/ovirt
index c0f1fb99bb..b71d330375 100644
--- a/library/cloud/ovirt
+++ b/library/cloud/ovirt
@@ -416,6 +416,6 @@ def main():
 
 
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/cloud/quantum_floating_ip b/library/cloud/quantum_floating_ip
index 093787572c..1d755e67c2 100644
--- a/library/cloud/quantum_floating_ip
+++ b/library/cloud/quantum_floating_ip
@@ -236,6 +236,6 @@ def main():
         module.exit_json(changed=False)
 
 # this is magic, see lib/ansible/module.params['common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/cloud/quantum_floating_ip_associate b/library/cloud/quantum_floating_ip_associate
index 30b6224d94..9b720ea232 100644
--- a/library/cloud/quantum_floating_ip_associate
+++ b/library/cloud/quantum_floating_ip_associate
@@ -213,6 +213,6 @@ def main():
         module.exit_json(changed = True, result = "detached")
 
 # this is magic, see lib/ansible/module.params['common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/cloud/quantum_network b/library/cloud/quantum_network
index 7d7504075d..4eb416f752 100644
--- a/library/cloud/quantum_network
+++ b/library/cloud/quantum_network
@@ -275,6 +275,6 @@ def main():
             module.exit_json(changed = True, result = "Deleted")
 
 # this is magic, see lib/ansible/module.params['common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/cloud/quantum_router b/library/cloud/quantum_router
index f1655ea8a0..26387de205 100644
--- a/library/cloud/quantum_router
+++ b/library/cloud/quantum_router
@@ -206,6 +206,6 @@ def main():
             module.exit_json(changed=True, result="deleted")
                 
 # this is magic, see lib/ansible/module.params['common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/cloud/quantum_router_gateway b/library/cloud/quantum_router_gateway
index 6238c6c186..60d500e6f6 100644
--- a/library/cloud/quantum_router_gateway
+++ b/library/cloud/quantum_router_gateway
@@ -209,6 +209,6 @@ def main():
         module.exit_json(changed=True, result="Deleted")
 
 # this is magic, see lib/ansible/module.params['common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/cloud/quantum_router_interface b/library/cloud/quantum_router_interface
index 4fa1f03031..f34aecacf5 100644
--- a/library/cloud/quantum_router_interface
+++ b/library/cloud/quantum_router_interface
@@ -245,6 +245,6 @@ def main():
         module.exit_json(changed=True, result="Deleted")
                         
 # this is magic, see lib/ansible/module.params['common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/cloud/quantum_subnet b/library/cloud/quantum_subnet
index 24f8920381..372d346f71 100644
--- a/library/cloud/quantum_subnet
+++ b/library/cloud/quantum_subnet
@@ -281,6 +281,6 @@ def main():
             module.exit_json(changed = True, result = "deleted")
                 
 # this is magic, see lib/ansible/module.params['common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/cloud/rds b/library/cloud/rds
index cf937ef57a..b7eb5bb0a5 100644
--- a/library/cloud/rds
+++ b/library/cloud/rds
@@ -534,6 +534,6 @@ def main():
     module.exit_json(changed=True, instance=d)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/cloud/virt b/library/cloud/virt
index 69dcf05536..551768e2a6 100644
--- a/library/cloud/virt
+++ b/library/cloud/virt
@@ -478,5 +478,5 @@ def main():
 
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/commands/command b/library/commands/command
index 707ec325a6..0b661b2f4d 100644
--- a/library/commands/command
+++ b/library/commands/command
@@ -156,8 +156,8 @@ def main():
         changed = True
     )
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 
 # only the command module should ever need to do this
 # everything else should be simple key=value
diff --git a/library/database/mongodb_user b/library/database/mongodb_user
index cb5a7a97de..ab3a027e0a 100644
--- a/library/database/mongodb_user
+++ b/library/database/mongodb_user
@@ -214,5 +214,5 @@ def main():
     module.exit_json(changed=True, user=user)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/database/mysql_db b/library/database/mysql_db
index 9f92992343..2e91a66f79 100644
--- a/library/database/mysql_db
+++ b/library/database/mysql_db
@@ -302,5 +302,5 @@ def main():
     module.exit_json(changed=changed, db=db)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/database/mysql_replication b/library/database/mysql_replication
index 80ecf449f8..0659ac524c 100644
--- a/library/database/mysql_replication
+++ b/library/database/mysql_replication
@@ -364,5 +364,5 @@ def main():
             module.exit_json(msg="Slave already stopped", changed=False)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/database/mysql_user b/library/database/mysql_user
index 9758939a7a..4542f4dd37 100644
--- a/library/database/mysql_user
+++ b/library/database/mysql_user
@@ -462,5 +462,5 @@ def main():
     module.exit_json(changed=changed, user=user)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/database/mysql_variables b/library/database/mysql_variables
index 4c0341f18e..0bb5397334 100644
--- a/library/database/mysql_variables
+++ b/library/database/mysql_variables
@@ -212,5 +212,5 @@ def main():
             module.fail_json(msg=result, changed=False)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/database/postgresql_db b/library/database/postgresql_db
index f7274da884..11b77092f2 100644
--- a/library/database/postgresql_db
+++ b/library/database/postgresql_db
@@ -270,5 +270,5 @@ def main():
     module.exit_json(changed=changed, db=db)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/database/postgresql_privs b/library/database/postgresql_privs
index bea203dd66..e1bf03614f 100644
--- a/library/database/postgresql_privs
+++ b/library/database/postgresql_privs
@@ -608,5 +608,5 @@ def main():
 
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/database/postgresql_user b/library/database/postgresql_user
index b6a4047b4e..1798eafcc1 100644
--- a/library/database/postgresql_user
+++ b/library/database/postgresql_user
@@ -482,5 +482,5 @@ def main():
     module.exit_json(**kw)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/database/redis b/library/database/redis
index c869e5a838..ead1a1dacf 100644
--- a/library/database/redis
+++ b/library/database/redis
@@ -277,5 +277,5 @@ def main():
         module.fail_json(msg='A valid command must be provided')
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/database/riak b/library/database/riak
index 68a58e6a11..712c94e994 100644
--- a/library/database/riak
+++ b/library/database/riak
@@ -250,6 +250,6 @@ def main():
     module.exit_json(**result)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/files/acl b/library/files/acl
index 5c6a54dfd0..1dbaf198b6 100644
--- a/library/files/acl
+++ b/library/files/acl
@@ -192,6 +192,6 @@ def main():
     module.exit_json(changed=changed, msg=msg, acl=currentacl)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/files/assemble b/library/files/assemble
index 93779235c9..c16afe6131 100644
--- a/library/files/assemble
+++ b/library/files/assemble
@@ -174,7 +174,7 @@ def main():
     module.exit_json(src=src, dest=dest, md5sum=destmd5, changed=changed, msg="OK")
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
 
diff --git a/library/files/copy b/library/files/copy
index 1146c95a53..2ba313eb7e 100644
--- a/library/files/copy
+++ b/library/files/copy
@@ -185,5 +185,5 @@ def main():
     module.exit_json(**res_args)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/files/file b/library/files/file
index d30e3716bf..a26373f728 100644
--- a/library/files/file
+++ b/library/files/file
@@ -350,6 +350,6 @@ def main():
         module.fail_json(path=path, msg='unexpected position reached')
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/files/ini_file b/library/files/ini_file
index 2c29402f96..6bed212b51 100644
--- a/library/files/ini_file
+++ b/library/files/ini_file
@@ -185,5 +185,5 @@ def main():
     module.exit_json(dest=dest, changed=changed, msg="OK")
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/files/lineinfile b/library/files/lineinfile
index a519c8879c..185734c0c2 100644
--- a/library/files/lineinfile
+++ b/library/files/lineinfile
@@ -357,6 +357,6 @@ def main():
         absent(module, dest, params['regexp'], params.get('line', None), backup)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/files/stat b/library/files/stat
index a1e142acb4..6f38534d38 100644
--- a/library/files/stat
+++ b/library/files/stat
@@ -134,6 +134,6 @@ def main():
     module.exit_json(changed=False, stat=d)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/files/synchronize b/library/files/synchronize
index 9acc4d4662..fde23b0723 100644
--- a/library/files/synchronize
+++ b/library/files/synchronize
@@ -237,8 +237,8 @@ def main():
         return module.exit_json(changed=changed, msg=out.replace(changed_marker,''),
                                 rc=rc, cmd=cmdstr)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 
 main()
 
diff --git a/library/files/unarchive b/library/files/unarchive
index d85ae3cc59..519fa9a34f 100644
--- a/library/files/unarchive
+++ b/library/files/unarchive
@@ -195,5 +195,5 @@ def main():
     module.exit_json(**res_args)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/files/xattr b/library/files/xattr
index 273559149e..5b07405717 100644
--- a/library/files/xattr
+++ b/library/files/xattr
@@ -201,6 +201,6 @@ def main():
     module.exit_json(changed=changed, msg=msg, xattr=res)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/internal/async_status b/library/internal/async_status
index 79647da113..0f2290aa5c 100644
--- a/library/internal/async_status
+++ b/library/internal/async_status
@@ -95,5 +95,5 @@ def main():
     module.exit_json(**data)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/messaging/rabbitmq_parameter b/library/messaging/rabbitmq_parameter
index e7d26d4c2f..817b2705e5 100644
--- a/library/messaging/rabbitmq_parameter
+++ b/library/messaging/rabbitmq_parameter
@@ -147,5 +147,5 @@ def main():
     module.exit_json(changed=changed, component=component, name=name, vhost=vhost, state=state)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/messaging/rabbitmq_plugin b/library/messaging/rabbitmq_plugin
index 612e1c3763..d35827afa3 100644
--- a/library/messaging/rabbitmq_plugin
+++ b/library/messaging/rabbitmq_plugin
@@ -126,5 +126,5 @@ def main():
     module.exit_json(changed=changed, enabled=enabled, disabled=disabled)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/messaging/rabbitmq_user b/library/messaging/rabbitmq_user
index 9cae38efe4..dcf09aa93d 100644
--- a/library/messaging/rabbitmq_user
+++ b/library/messaging/rabbitmq_user
@@ -244,5 +244,5 @@ def main():
     module.exit_json(changed=changed, user=username, state=state)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/messaging/rabbitmq_vhost b/library/messaging/rabbitmq_vhost
index f36da079dd..3486727c24 100644
--- a/library/messaging/rabbitmq_vhost
+++ b/library/messaging/rabbitmq_vhost
@@ -142,5 +142,5 @@ def main():
     module.exit_json(changed=changed, name=name, state=state)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/monitoring/airbrake_deployment b/library/monitoring/airbrake_deployment
index 6b8ed3c0e0..fe164fdd43 100644
--- a/library/monitoring/airbrake_deployment
+++ b/library/monitoring/airbrake_deployment
@@ -127,6 +127,6 @@ def main():
             module.fail_json(msg="HTTP result code: %d" % result.code)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/monitoring/boundary_meter b/library/monitoring/boundary_meter
index ad94c14308..202dfd03ae 100644
--- a/library/monitoring/boundary_meter
+++ b/library/monitoring/boundary_meter
@@ -266,7 +266,7 @@ def main():
 
     module.exit_json(status=result,changed=True)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/monitoring/datadog_event b/library/monitoring/datadog_event
index 3b180635d5..2dcd932d98 100644
--- a/library/monitoring/datadog_event
+++ b/library/monitoring/datadog_event
@@ -134,5 +134,5 @@ def post_event(module):
         module.fail_json(msg="Socket error: %s to %s" % (e, uri))
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/monitoring/monit b/library/monitoring/monit
index 79ef5aa752..664e4d39cd 100644
--- a/library/monitoring/monit
+++ b/library/monitoring/monit
@@ -143,6 +143,6 @@ def main():
     module.exit_json(changed=False, name=name, state=state)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/monitoring/nagios b/library/monitoring/nagios
index a9100ad51f..1f40efbf54 100644
--- a/library/monitoring/nagios
+++ b/library/monitoring/nagios
@@ -876,5 +876,5 @@ class Nagios(object):
 
 ######################################################################
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/monitoring/newrelic_deployment b/library/monitoring/newrelic_deployment
index a7de3c6bca..c0d5c4beaa 100644
--- a/library/monitoring/newrelic_deployment
+++ b/library/monitoring/newrelic_deployment
@@ -157,6 +157,6 @@ def main():
             module.fail_json(msg="result code: %d" % result.code)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/monitoring/pagerduty b/library/monitoring/pagerduty
index 4f79f65b4c..bfd0573f4d 100644
--- a/library/monitoring/pagerduty
+++ b/library/monitoring/pagerduty
@@ -159,6 +159,6 @@ def main():
 
     module.exit_json(msg="success", result=out)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/monitoring/pingdom b/library/monitoring/pingdom
index 26ea1cfd95..6f658cd950 100644
--- a/library/monitoring/pingdom
+++ b/library/monitoring/pingdom
@@ -130,6 +130,6 @@ def main():
 
     module.exit_json(checkid=checkid, name=name, status=result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/net_infrastructure/arista_interface b/library/net_infrastructure/arista_interface
index 56807cb0c4..75a375b742 100644
--- a/library/net_infrastructure/arista_interface
+++ b/library/net_infrastructure/arista_interface
@@ -254,6 +254,6 @@ def main():
     module.exit_json(**result)
     
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/net_infrastructure/arista_l2interface b/library/net_infrastructure/arista_l2interface
index 5c26e47c0b..a41d5a84eb 100644
--- a/library/net_infrastructure/arista_l2interface
+++ b/library/net_infrastructure/arista_l2interface
@@ -332,6 +332,6 @@ def main():
     module.exit_json(**result)
 
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/net_infrastructure/arista_lag b/library/net_infrastructure/arista_lag
index a07caa423c..e8d23d11f9 100644
--- a/library/net_infrastructure/arista_lag
+++ b/library/net_infrastructure/arista_lag
@@ -319,6 +319,6 @@ def main():
     module.exit_json(**result)
 
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/net_infrastructure/arista_vlan b/library/net_infrastructure/arista_vlan
index b6346984f4..2a16bc3fb5 100644
--- a/library/net_infrastructure/arista_vlan
+++ b/library/net_infrastructure/arista_vlan
@@ -302,6 +302,6 @@ def main():
     module.exit_json(**result)
     
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/net_infrastructure/bigip_monitor_http b/library/net_infrastructure/bigip_monitor_http
index f814f24efb..924c826eaa 100644
--- a/library/net_infrastructure/bigip_monitor_http
+++ b/library/net_infrastructure/bigip_monitor_http
@@ -443,7 +443,7 @@ def main():
 
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/net_infrastructure/bigip_monitor_tcp b/library/net_infrastructure/bigip_monitor_tcp
index 560decff3b..61ed21178a 100644
--- a/library/net_infrastructure/bigip_monitor_tcp
+++ b/library/net_infrastructure/bigip_monitor_tcp
@@ -465,7 +465,7 @@ def main():
 
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/net_infrastructure/bigip_node b/library/net_infrastructure/bigip_node
index 9c71b8d8e0..68b6a2b52f 100644
--- a/library/net_infrastructure/bigip_node
+++ b/library/net_infrastructure/bigip_node
@@ -288,7 +288,7 @@ def main():
 
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/net_infrastructure/bigip_pool b/library/net_infrastructure/bigip_pool
index b05400a3f0..48d03b9f1c 100644
--- a/library/net_infrastructure/bigip_pool
+++ b/library/net_infrastructure/bigip_pool
@@ -530,7 +530,7 @@ def main():
 
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/net_infrastructure/bigip_pool_member b/library/net_infrastructure/bigip_pool_member
index 1053fafd01..5aef9f0ae9 100644
--- a/library/net_infrastructure/bigip_pool_member
+++ b/library/net_infrastructure/bigip_pool_member
@@ -372,7 +372,7 @@ def main():
 
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/net_infrastructure/dnsmadeeasy b/library/net_infrastructure/dnsmadeeasy
index 4fc341926d..a2ad7bb93c 100644
--- a/library/net_infrastructure/dnsmadeeasy
+++ b/library/net_infrastructure/dnsmadeeasy
@@ -337,5 +337,5 @@ def main():
             msg="'%s' is an unknown value for the state argument" % state)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/net_infrastructure/netscaler b/library/net_infrastructure/netscaler
index 13646df642..bb5df47f80 100644
--- a/library/net_infrastructure/netscaler
+++ b/library/net_infrastructure/netscaler
@@ -176,5 +176,5 @@ def main():
 
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/net_infrastructure/openvswitch_bridge b/library/net_infrastructure/openvswitch_bridge
index 82a2d3fef8..b45013f287 100644
--- a/library/net_infrastructure/openvswitch_bridge
+++ b/library/net_infrastructure/openvswitch_bridge
@@ -126,5 +126,5 @@ def main():
 
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/net_infrastructure/openvswitch_port b/library/net_infrastructure/openvswitch_port
index 3fe0c4e397..b8c454005f 100644
--- a/library/net_infrastructure/openvswitch_port
+++ b/library/net_infrastructure/openvswitch_port
@@ -130,5 +130,5 @@ def main():
 
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/network/get_url b/library/network/get_url
index 11e520b53a..f3351527b3 100644
--- a/library/network/get_url
+++ b/library/network/get_url
@@ -364,5 +364,5 @@ def main():
         sha256sum=sha256sum, changed=changed, msg=info.get('msg', ''))
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/network/slurp b/library/network/slurp
index 6661f9db32..a8a42443b8 100644
--- a/library/network/slurp
+++ b/library/network/slurp
@@ -69,7 +69,7 @@ def main():
     module.exit_json(content=data, encoding='base64')
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
 
diff --git a/library/network/uri b/library/network/uri
index c70565f8e2..39a78cb8cc 100644
--- a/library/network/uri
+++ b/library/network/uri
@@ -421,5 +421,5 @@ def main():
 
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/notification/campfire b/library/notification/campfire
index 9fdb06e6b3..4b8795fd74 100644
--- a/library/notification/campfire
+++ b/library/notification/campfire
@@ -129,5 +129,5 @@ def main():
     module.exit_json(changed=True, room=room, msg=msg, notify=notify)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/notification/flowdock b/library/notification/flowdock
index fa61368d92..9a391714f7 100644
--- a/library/notification/flowdock
+++ b/library/notification/flowdock
@@ -195,6 +195,6 @@ def main():
     module.exit_json(changed=False, msg=module.params["msg"])
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/notification/grove b/library/notification/grove
index 5b08852314..6979d45b0f 100644
--- a/library/notification/grove
+++ b/library/notification/grove
@@ -84,5 +84,5 @@ def main():
     module.exit_json(msg="OK")
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/notification/hipchat b/library/notification/hipchat
index 3568217ab6..02c61c22ee 100644
--- a/library/notification/hipchat
+++ b/library/notification/hipchat
@@ -140,5 +140,5 @@ def main():
                      msg=msg)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/notification/irc b/library/notification/irc
index 039b627499..92df1c9831 100644
--- a/library/notification/irc
+++ b/library/notification/irc
@@ -155,5 +155,5 @@ def main():
                      msg=msg)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/notification/jabber b/library/notification/jabber
index 4b72ea7a13..eb94d107af 100644
--- a/library/notification/jabber
+++ b/library/notification/jabber
@@ -142,5 +142,5 @@ def main():
     module.exit_json(changed=False, to=to, user=user, msg=msg.getBody())
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/notification/mail b/library/notification/mail
index 326ee6313c..9f69447de9 100644
--- a/library/notification/mail
+++ b/library/notification/mail
@@ -248,5 +248,5 @@ def main():
     module.exit_json(changed=False)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/notification/mqtt b/library/notification/mqtt
index 26a5f43019..4f64c4b78e 100644
--- a/library/notification/mqtt
+++ b/library/notification/mqtt
@@ -176,5 +176,5 @@ def main():
     module.exit_json(changed=False, topic=topic)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/notification/osx_say b/library/notification/osx_say
index 2bda3f719e..98d559ab42 100644
--- a/library/notification/osx_say
+++ b/library/notification/osx_say
@@ -72,5 +72,5 @@ def main():
     module.exit_json(msg=msg, changed=False) 
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/apt b/library/packaging/apt
index 403ce0ea96..a16912af95 100644
--- a/library/packaging/apt
+++ b/library/packaging/apt
@@ -435,6 +435,6 @@ def main():
         module.fail_json(msg="Failed to lock apt for exclusive operation")
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/packaging/apt_key b/library/packaging/apt_key
index 764eed6b8e..17b52888d4 100644
--- a/library/packaging/apt_key
+++ b/library/packaging/apt_key
@@ -238,6 +238,6 @@ def main():
 
     module.exit_json(changed=changed, **return_values)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/apt_repository b/library/packaging/apt_repository
index 28910c1fcd..7e0fd1a013 100644
--- a/library/packaging/apt_repository
+++ b/library/packaging/apt_repository
@@ -382,6 +382,6 @@ def main():
     module.exit_json(changed=changed, repo=repo, state=state)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/packaging/easy_install b/library/packaging/easy_install
index 55714ef0ac..9c542a22e1 100644
--- a/library/packaging/easy_install
+++ b/library/packaging/easy_install
@@ -180,6 +180,6 @@ def main():
                      name=name, virtualenv=env)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/packaging/gem b/library/packaging/gem
index 0a5bbbe822..8c46ceb5b3 100644
--- a/library/packaging/gem
+++ b/library/packaging/gem
@@ -222,6 +222,6 @@ def main():
 
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/homebrew b/library/packaging/homebrew
index 12c2e3e9b5..0ff162db4c 100644
--- a/library/packaging/homebrew
+++ b/library/packaging/homebrew
@@ -171,6 +171,6 @@ def main():
         remove_packages(module, brew_path, pkgs)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/packaging/macports b/library/packaging/macports
index 83da1516a3..898bdfbd88 100644
--- a/library/packaging/macports
+++ b/library/packaging/macports
@@ -210,6 +210,6 @@ def main():
         deactivate_packages(module, port_path, pkgs)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/packaging/npm b/library/packaging/npm
index 6eb35c346e..a8de161583 100644
--- a/library/packaging/npm
+++ b/library/packaging/npm
@@ -224,5 +224,5 @@ def main():
     module.exit_json(changed=changed)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/openbsd_pkg b/library/packaging/openbsd_pkg
index 16f969ff0f..f8db14de56 100644
--- a/library/packaging/openbsd_pkg
+++ b/library/packaging/openbsd_pkg
@@ -277,5 +277,5 @@ def main():
     module.exit_json(**result)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/opkg b/library/packaging/opkg
index 1bed0901ed..75c75ad011 100644
--- a/library/packaging/opkg
+++ b/library/packaging/opkg
@@ -144,6 +144,6 @@ def main():
         remove_packages(module, opkg_path, pkgs)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/packaging/pacman b/library/packaging/pacman
index 60891f1ff3..9865ae752c 100644
--- a/library/packaging/pacman
+++ b/library/packaging/pacman
@@ -213,6 +213,6 @@ def main():
         remove_packages(module, pkgs)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
     
 main()        
diff --git a/library/packaging/pip b/library/packaging/pip
index 3b054aa7c4..a862415ef5 100644
--- a/library/packaging/pip
+++ b/library/packaging/pip
@@ -347,6 +347,6 @@ def main():
                      state=state, requirements=requirements, virtualenv=env, stdout=out, stderr=err)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/packaging/pkgin b/library/packaging/pkgin
index c6b6e83370..1ff8897396 100755
--- a/library/packaging/pkgin
+++ b/library/packaging/pkgin
@@ -163,6 +163,6 @@ def main():
         remove_packages(module, pkgin_path, pkgs)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/packaging/pkgng b/library/packaging/pkgng
index c89572f6b1..8500a40f58 100644
--- a/library/packaging/pkgng
+++ b/library/packaging/pkgng
@@ -156,6 +156,6 @@ def main():
         remove_packages(module, pkgin_path, pkgs)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
     
 main()        
diff --git a/library/packaging/pkgutil b/library/packaging/pkgutil
index 8c9ff55d5a..d6c4f536c5 100644
--- a/library/packaging/pkgutil
+++ b/library/packaging/pkgutil
@@ -173,6 +173,6 @@ def main():
 
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/portinstall b/library/packaging/portinstall
index 5718c40eb7..b83214aebd 100644
--- a/library/packaging/portinstall
+++ b/library/packaging/portinstall
@@ -203,6 +203,6 @@ def main():
         remove_packages(module, pkgs)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/packaging/redhat_subscription b/library/packaging/redhat_subscription
index b6be4a7b27..e363aa0946 100644
--- a/library/packaging/redhat_subscription
+++ b/library/packaging/redhat_subscription
@@ -411,6 +411,6 @@ def main():
                 module.exit_json(changed=True, msg="System successfully unregistered from %s." % server_hostname)
 
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/rhn_channel b/library/packaging/rhn_channel
index 9c99360ee7..dac8a7ce09 100644
--- a/library/packaging/rhn_channel
+++ b/library/packaging/rhn_channel
@@ -147,6 +147,6 @@ def main():
     client.auth.logout(session)
 
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/rhn_register b/library/packaging/rhn_register
index ba6ddead39..5e8c3718f9 100644
--- a/library/packaging/rhn_register
+++ b/library/packaging/rhn_register
@@ -377,6 +377,6 @@ def main():
                 module.exit_json(changed=True, msg="System successfully unregistered from %s." % rhn.hostname)
 
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/rpm_key b/library/packaging/rpm_key
index ea491a65aa..a1c4b036a6 100644
--- a/library/packaging/rpm_key
+++ b/library/packaging/rpm_key
@@ -196,6 +196,6 @@ def main():
 
 
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/svr4pkg b/library/packaging/svr4pkg
index 73a141c61b..485e7ebcbf 100644
--- a/library/packaging/svr4pkg
+++ b/library/packaging/svr4pkg
@@ -190,6 +190,6 @@ def main():
 
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/swdepot b/library/packaging/swdepot
index ba89721842..230f6a5f0b 100644
--- a/library/packaging/swdepot
+++ b/library/packaging/swdepot
@@ -189,7 +189,7 @@ def main():
     module.exit_json(changed=changed, name=name, state=state, msg=msg)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
 
diff --git a/library/packaging/urpmi b/library/packaging/urpmi
index 34b3389587..8ce147f6e6 100644
--- a/library/packaging/urpmi
+++ b/library/packaging/urpmi
@@ -203,6 +203,6 @@ def main():
         remove_packages(module, packages)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
     
 main()        
diff --git a/library/packaging/yum b/library/packaging/yum
index 536c7e5040..08716a325b 100644
--- a/library/packaging/yum
+++ b/library/packaging/yum
@@ -738,6 +738,6 @@ def main():
         module.fail_json(msg="we should never get here unless this all failed", **res)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
 
diff --git a/library/packaging/zypper b/library/packaging/zypper
index ae6efbb230..abe91d3e85 100644
--- a/library/packaging/zypper
+++ b/library/packaging/zypper
@@ -225,5 +225,5 @@ def main():
     module.exit_json(**result)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/packaging/zypper_repository b/library/packaging/zypper_repository
index 26943b917e..9460660984 100644
--- a/library/packaging/zypper_repository
+++ b/library/packaging/zypper_repository
@@ -152,6 +152,6 @@ def main():
     module.exit_json(changed=changed, repo=repo, state=state)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/source_control/bzr b/library/source_control/bzr
index 728b8bab34..bc2dfc3089 100644
--- a/library/source_control/bzr
+++ b/library/source_control/bzr
@@ -195,6 +195,6 @@ def main():
 
     module.exit_json(changed=changed, before=before, after=after)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/source_control/git b/library/source_control/git
index ba7bcbf10b..61ef24e148 100644
--- a/library/source_control/git
+++ b/library/source_control/git
@@ -428,6 +428,6 @@ def main():
 
     module.exit_json(changed=changed, before=before, after=after)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/source_control/github_hooks b/library/source_control/github_hooks
index 0443855635..55eb8d3c8d 100644
--- a/library/source_control/github_hooks
+++ b/library/source_control/github_hooks
@@ -166,6 +166,6 @@ def main():
     module.exit_json(msg="success", result=out)
 
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/source_control/hg b/library/source_control/hg
index 5293ed3d27..e6730ad6f5 100644
--- a/library/source_control/hg
+++ b/library/source_control/hg
@@ -269,6 +269,6 @@ def main():
         changed = True
     module.exit_json(before=before, after=after, changed=changed, cleaned=cleaned)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/source_control/subversion b/library/source_control/subversion
index fa7339fd9f..38417e801b 100644
--- a/library/source_control/subversion
+++ b/library/source_control/subversion
@@ -206,6 +206,6 @@ def main():
     changed = before != after or local_mods
     module.exit_json(changed=changed, before=before, after=after)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/authorized_key b/library/system/authorized_key
index a503e9cc02..33b880a506 100644
--- a/library/system/authorized_key
+++ b/library/system/authorized_key
@@ -384,5 +384,5 @@ def main():
     module.exit_json(**results)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/cron b/library/system/cron
index 8f783d24c0..39727b4c76 100644
--- a/library/system/cron
+++ b/library/system/cron
@@ -510,8 +510,8 @@ def main():
     # --- should never get here
     module.exit_json(msg="Unable to execute cron task.")
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 
 main()
 
diff --git a/library/system/facter b/library/system/facter
index ef0bdc850b..83d3f5afb7 100644
--- a/library/system/facter
+++ b/library/system/facter
@@ -50,7 +50,7 @@ def main():
     module.exit_json(**json.loads(out))
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
 
diff --git a/library/system/filesystem b/library/system/filesystem
index 3c80d9445c..f85e602ae1 100644
--- a/library/system/filesystem
+++ b/library/system/filesystem
@@ -108,5 +108,5 @@ def main():
     module.exit_json(changed=changed)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/firewalld b/library/system/firewalld
index 9526abbeff..62c90d0656 100644
--- a/library/system/firewalld
+++ b/library/system/firewalld
@@ -386,8 +386,8 @@ def main():
 
 
 #################################################
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 
 main()
 
diff --git a/library/system/group b/library/system/group
index 2b19fab18b..7aaf7ed2b4 100644
--- a/library/system/group
+++ b/library/system/group
@@ -398,6 +398,6 @@ def main():
 
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/hostname b/library/system/hostname
index 04a831bc9d..569cdee2f1 100644
--- a/library/system/hostname
+++ b/library/system/hostname
@@ -319,6 +319,6 @@ def main():
 
     module.exit_json(changed=changed, name=name)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/kernel_blacklist b/library/system/kernel_blacklist
index 71f962f18c..8966d8c153 100644
--- a/library/system/kernel_blacklist
+++ b/library/system/kernel_blacklist
@@ -137,5 +137,5 @@ def main():
     module.exit_json(**args)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/lvg b/library/system/lvg
index 545ab1df5d..19e09a446c 100644
--- a/library/system/lvg
+++ b/library/system/lvg
@@ -229,5 +229,5 @@ def main():
     module.exit_json(changed=changed)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/lvol b/library/system/lvol
index b827c6fca7..06338b7df4 100644
--- a/library/system/lvol
+++ b/library/system/lvol
@@ -206,5 +206,5 @@ def main():
     module.exit_json(changed=changed,msg=msg)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/modprobe b/library/system/modprobe
index b09ccb2a4f..c6eff44190 100755
--- a/library/system/modprobe
+++ b/library/system/modprobe
@@ -95,5 +95,5 @@ def main():
     module.exit_json(**args)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/mount b/library/system/mount
index fb6a1a32a0..9696760a97 100644
--- a/library/system/mount
+++ b/library/system/mount
@@ -319,5 +319,5 @@ def main():
     sys.exit(0)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/ohai b/library/system/ohai
index fc7704898c..19c87da787 100644
--- a/library/system/ohai
+++ b/library/system/ohai
@@ -49,7 +49,7 @@ def main():
     module.exit_json(**json.loads(out))
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
 
diff --git a/library/system/open_iscsi b/library/system/open_iscsi
index a2e76a4218..afce585cd7 100644
--- a/library/system/open_iscsi
+++ b/library/system/open_iscsi
@@ -371,7 +371,7 @@ def main():
 
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
 
diff --git a/library/system/seboolean b/library/system/seboolean
index b45e94f084..9799e71636 100644
--- a/library/system/seboolean
+++ b/library/system/seboolean
@@ -207,6 +207,6 @@ def main():
         module.fail_json(msg="Failed to commit pending boolean %s value" % name)
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/selinux b/library/system/selinux
index af5f6efaab..53e53d1d49 100644
--- a/library/system/selinux
+++ b/library/system/selinux
@@ -196,8 +196,8 @@ def main():
         policy=policy, state=state)
 
 #################################################
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 
 main()
 
diff --git a/library/system/setup b/library/system/setup
index 353cf6f6d3..ab84cbb5d9 100755
--- a/library/system/setup
+++ b/library/system/setup
@@ -2206,5 +2206,5 @@ def main():
     module.exit_json(**data)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/sysctl b/library/system/sysctl
index b196fadc7b..cc3091f2a7 100644
--- a/library/system/sysctl
+++ b/library/system/sysctl
@@ -340,5 +340,5 @@ def main():
     sys.exit(0)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/user b/library/system/user
index 4d1699e4ee..daf23f7273 100644
--- a/library/system/user
+++ b/library/system/user
@@ -1524,6 +1524,6 @@ def main():
 
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/system/zfs b/library/system/zfs
index 91ace0a1a8..79363252e0 100644
--- a/library/system/zfs
+++ b/library/system/zfs
@@ -407,6 +407,6 @@ def main():
     result['changed'] = zfs.changed
     module.exit_json(**result)
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/utilities/accelerate b/library/utilities/accelerate
index d5e496a201..2c098c6571 100644
--- a/library/utilities/accelerate
+++ b/library/utilities/accelerate
@@ -451,5 +451,5 @@ def main():
     daemonize(module, password, port, timeout, minutes, ipv6)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/utilities/fireball b/library/utilities/fireball
index 3c7d7b85a1..ff8c6b172d 100644
--- a/library/utilities/fireball
+++ b/library/utilities/fireball
@@ -276,5 +276,5 @@ def main():
 
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/utilities/wait_for b/library/utilities/wait_for
index a175afc415..a6b1d324f9 100644
--- a/library/utilities/wait_for
+++ b/library/utilities/wait_for
@@ -197,5 +197,5 @@ def main():
     module.exit_json(state=state, port=port, search_regex=search_regex, path=path, elapsed=elapsed.seconds)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/web_infrastructure/django_manage b/library/web_infrastructure/django_manage
index d707ece8d7..ed31d33e3d 100644
--- a/library/web_infrastructure/django_manage
+++ b/library/web_infrastructure/django_manage
@@ -274,6 +274,6 @@ def main():
                      settings=module.params['settings'], pythonpath=module.params['pythonpath'])
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
diff --git a/library/web_infrastructure/ejabberd_user b/library/web_infrastructure/ejabberd_user
index 1fe15c7a45..99b9859faf 100644
--- a/library/web_infrastructure/ejabberd_user
+++ b/library/web_infrastructure/ejabberd_user
@@ -208,6 +208,6 @@ def main():
     module.exit_json(**result)
 
 
-# include magic from lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+# import module snippets
+from ansible.module_utils.basic import *
 main()
diff --git a/library/web_infrastructure/htpasswd b/library/web_infrastructure/htpasswd
index 0080c49faf..6d130209fa 100644
--- a/library/web_infrastructure/htpasswd
+++ b/library/web_infrastructure/htpasswd
@@ -212,7 +212,7 @@ def main():
 
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 if __name__ == '__main__':
     main()
diff --git a/library/web_infrastructure/jboss b/library/web_infrastructure/jboss
index c3d4becf7b..b936294bbc 100644
--- a/library/web_infrastructure/jboss
+++ b/library/web_infrastructure/jboss
@@ -136,5 +136,5 @@ def main():
     module.exit_json(changed=changed)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 main()
diff --git a/library/web_infrastructure/supervisorctl b/library/web_infrastructure/supervisorctl
index b40e0d4a87..b8586d2361 100644
--- a/library/web_infrastructure/supervisorctl
+++ b/library/web_infrastructure/supervisorctl
@@ -190,6 +190,6 @@ def main():
     module.exit_json(changed=False, name=name, state=state)
 
 # this is magic, see lib/ansible/module_common.py
-#<<INCLUDE_ANSIBLE_MODULE_COMMON>>
+from ansible.module_utils.basic import *
 
 main()
