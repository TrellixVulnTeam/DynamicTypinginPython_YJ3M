commit 81978cbacbd7a21b8f85f8d5b85da3e7a6e320a1
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Fri Nov 14 10:01:30 2014 -0800

    Fix retrieval of package version in apt module

diff --git a/lib/ansible/modules/packaging/os/apt.py b/lib/ansible/modules/packaging/os/apt.py
index 1bb52da4c8..5c557900b7 100644
--- a/lib/ansible/modules/packaging/os/apt.py
+++ b/lib/ansible/modules/packaging/os/apt.py
@@ -206,14 +206,14 @@ def package_status(m, pkgname, version, cache, state):
             package_is_installed = pkg.isInstalled
 
     if version:
-        try:
-            installed_version = pkg.installed.version
-        except AttributeError:
-            installed_version = pkg.installedVersion
-
         avail_upgrades = fnmatch.filter((p.version for p in pkg.versions), version)
 
         if package_is_installed:
+            try:
+                installed_version = pkg.installed.version
+            except AttributeError:
+                installed_version = pkg.installedVersion
+
             # Only claim the package is installed if the version is matched as well
             package_is_installed = fnmatch.fnmatch(installed_version, version)
 
