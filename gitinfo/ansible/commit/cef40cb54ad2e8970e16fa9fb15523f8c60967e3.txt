commit cef40cb54ad2e8970e16fa9fb15523f8c60967e3
Author: Sloane Hertel <shertel@redhat.com>
Date:   Thu Aug 31 15:27:05 2017 -0400

    [cloud] ec2_group: Allow rule source to be a security group in a peered VPC. (#28876)

diff --git a/lib/ansible/modules/cloud/amazon/ec2_group.py b/lib/ansible/modules/cloud/amazon/ec2_group.py
index 608b41a9e6..95f3675eef 100644
--- a/lib/ansible/modules/cloud/amazon/ec2_group.py
+++ b/lib/ansible/modules/cloud/amazon/ec2_group.py
@@ -385,7 +385,7 @@ def get_target_from_rule(module, client, rule, name, group, groups, vpc_id):
             group_id = group['GroupId']
             groups[group_id] = group
             groups[group_name] = group
-        elif group_name in groups and (vpc_id is None or groups[group_name]['VpcId'] == vpc_id):
+        elif group_name in groups:
             group_id = groups[group_name]['GroupId']
         else:
             if not rule.get('group_desc', '').strip():
