commit 38eba6084986322a477a931583063c2254e4db42
Author: Matt Clay <matt@mystile.com>
Date:   Mon Oct 15 12:43:45 2018 -0700

    Fix ansible-test --exclude with delegation.
    
    Previously the option worked with integration commands but not units or sanity.

diff --git a/test/runner/lib/executor.py b/test/runner/lib/executor.py
index c422022a06..82ceeb95d9 100644
--- a/test/runner/lib/executor.py
+++ b/test/runner/lib/executor.py
@@ -1213,7 +1213,7 @@ def command_units(args):
         raise AllTargetsSkipped()
 
     if args.delegate:
-        raise Delegate(require=changes)
+        raise Delegate(require=changes, exclude=args.exclude)
 
     version_commands = []
 
diff --git a/test/runner/lib/sanity/__init__.py b/test/runner/lib/sanity/__init__.py
index ed4b0a5fec..724d1fcab5 100644
--- a/test/runner/lib/sanity/__init__.py
+++ b/test/runner/lib/sanity/__init__.py
@@ -65,7 +65,7 @@ def command_sanity(args):
         raise AllTargetsSkipped()
 
     if args.delegate:
-        raise Delegate(require=changes)
+        raise Delegate(require=changes, exclude=args.exclude)
 
     install_command_requirements(args)
 
