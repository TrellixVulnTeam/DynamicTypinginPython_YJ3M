commit 650a7365f97829c4ec0e5a6b3cc6f21c96219717
Author: Bret Martin <bret_martin@h3biomedicine.com>
Date:   Fri Mar 6 14:59:27 2015 -0500

    Allow vpc_subnet_id to remain unspecified (see bc0c169)

diff --git a/lib/ansible/modules/cloud/amazon/ec2.py b/lib/ansible/modules/cloud/amazon/ec2.py
index 544f1e8cc8..b59d4bda66 100755
--- a/lib/ansible/modules/cloud/amazon/ec2.py
+++ b/lib/ansible/modules/cloud/amazon/ec2.py
@@ -785,6 +785,8 @@ def create_instances(module, ec2, vpc, override_count=None):
 
     if vpc_subnet_id:
         vpc_id = vpc.get_all_subnets(subnet_ids=[vpc_subnet_id])[0].vpc_id
+    else:
+        vpc_id = None
 
     try:
         # Here we try to lookup the group id from the security group name - if group is set.
