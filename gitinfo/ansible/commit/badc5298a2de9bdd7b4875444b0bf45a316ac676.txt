commit badc5298a2de9bdd7b4875444b0bf45a316ac676
Author: Rene Moser <mail@renemoser.net>
Date:   Sun Sep 6 01:42:56 2015 +0200

    cloudstack: cs_account: fix error handing on state=absent

diff --git a/lib/ansible/modules/extras/cloud/cloudstack/cs_account.py b/lib/ansible/modules/extras/cloud/cloudstack/cs_account.py
index 052354c581..e96d8e1263 100644
--- a/lib/ansible/modules/extras/cloud/cloudstack/cs_account.py
+++ b/lib/ansible/modules/extras/cloud/cloudstack/cs_account.py
@@ -326,7 +326,7 @@ class AnsibleCloudStackAccount(AnsibleCloudStack):
             if not self.module.check_mode:
                 res = self.cs.deleteAccount(id=account['id'])
 
-                if 'errortext' in account:
+                if 'errortext' in res:
                     self.module.fail_json(msg="Failed: '%s'" % res['errortext'])
 
                 poll_async = self.module.params.get('poll_async')
