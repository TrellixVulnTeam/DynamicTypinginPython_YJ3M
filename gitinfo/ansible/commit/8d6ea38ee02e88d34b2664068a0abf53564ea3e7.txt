commit 8d6ea38ee02e88d34b2664068a0abf53564ea3e7
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Mon Dec 8 13:39:01 2014 -0800

    Disable automatic running of test_delegate_to with an explanation of what it would take to set this up in our automated test systems

diff --git a/test/integration/Makefile b/test/integration/Makefile
index fc973e368f..cf15c753cf 100644
--- a/test/integration/Makefile
+++ b/test/integration/Makefile
@@ -19,7 +19,7 @@ TMPDIR = $(shell mktemp -d 2>/dev/null || mktemp -d -t 'mytmpdir')
 
 VAULT_PASSWORD_FILE = vault-password
 
-all: parsing test_var_precedence unicode non_destructive destructive includes check_mode test_hash test_handlers test_group_by test_vault test_delegate_to
+all: parsing test_var_precedence unicode non_destructive destructive includes check_mode test_hash test_handlers test_group_by test_vault
 
 parsing:
 	ansible-playbook bad_parsing.yml -i $(INVENTORY) -e @$(VARS_FILE) $(CREDENTIALS_ARG) -vvv $(TEST_FLAGS) --tags prepare,common,scenario1; [ $$? -eq 3 ]
@@ -65,6 +65,12 @@ test_vault:
 	ansible-playbook test_vault.yml -i $(INVENTORY) $(CREDENTIALS_ARG) -v $(TEST_FLAGS) --vault-password-file $(VAULT_PASSWORD_FILE) --syntax-check
 	ansible-playbook test_vault.yml -i $(INVENTORY) $(CREDENTIALS_ARG) -v $(TEST_FLAGS) --vault-password-file $(VAULT_PASSWORD_FILE)
 
+# test_delegate_to does not work unless we have permission to ssh to localhost.
+# Would take some more effort on our test systems to implement that -- probably
+# the test node should create an ssh public-private key pair that allows the
+# root user on a node to ssh to itself.  Until then, this is not in make all.
+# Have to run it manually.  Ordinary users should be able to run this test as
+# long as they have permissions to login to their local machine via ssh.
 test_delegate_to:
 	ansible-playbook test_delegate_to.yml -i $(INVENTORY) -e @$(VARS_FILE) $(CREDENTIALS_ARG) -v $(TEST_FLAGS)
 
