commit 7ce98f52cf7b4d42587b0dc2974a05c8a185f824
Author: Peter Sprygada <psprygada@ansible.com>
Date:   Mon Sep 12 16:45:56 2016 -0400

    bug fix in asa_acl module for missing candidate config
    
    This bug was introduced accidentally when refactoring to 2.2.  The instance
    of the candidate config was deleted.  This adds the candidate config
    instance back
    
    fixes #2890

diff --git a/lib/ansible/modules/extras/network/asa/asa_acl.py b/lib/ansible/modules/extras/network/asa/asa_acl.py
index 1ac0461ea3..80df451de6 100644
--- a/lib/ansible/modules/extras/network/asa/asa_acl.py
+++ b/lib/ansible/modules/extras/network/asa/asa_acl.py
@@ -128,8 +128,10 @@ responses:
   type: list
   sample: ['...', '...']
 """
+import ansible.module_utils.asa
+
 from ansible.module_utils.netcfg import NetworkConfig
-from ansible.module_utils.asa import NetworkModule
+from ansible.module_utils.network import NetworkModule
 
 
 def get_config(module):
@@ -179,16 +181,22 @@ def main():
     match = module.params['match']
     replace = module.params['replace']
 
+    candidate = NetworkConfig(indent=1)
+    candidate.add(lines)
+
     module.filter = check_input_acl(lines, module)
+
     if not module.params['force']:
+        contents = get_config(module)
+        config = NetworkConfig(indent=1, contents=contents)
         commands = candidate.difference(config)
         commands = dumps(commands, 'commands').split('\n')
-        commands = [str(c) for c in commands if c]
     else:
         commands = str(candidate).split('\n')
 
     if commands:
         if not module.check_mode:
+            commands = [str(c) for c in commands if c]
             response = module.config(commands)
             result['responses'] = response
         result['changed'] = True
