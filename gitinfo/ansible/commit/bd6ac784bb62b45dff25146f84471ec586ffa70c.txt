commit bd6ac784bb62b45dff25146f84471ec586ffa70c
Author: Michael Scherer <misc@zarb.org>
Date:   Sun Nov 6 12:43:56 2016 +0100

    Add support for KVM in the Solaris virt detection
    
    smbios -i 256 return:
    
        # smbios -i 256
        ID    SIZE TYPE
        256   77   SMB_TYPE_SYSTEM (system information)
    
          Manufacturer: Red Hat
          Product: KVM
          Version: RHEL 6.4.0 PC
    
          UUID: 8a3b8b1a-ba59-1a4b-5f85-ab53a5a885a9
          Wake-Up Event: 0x6 (power switch)
          SKU Number:
          Family: Red Hat Enterprise Linux

diff --git a/lib/ansible/module_utils/facts.py b/lib/ansible/module_utils/facts.py
index d673783bbb..38354572d6 100644
--- a/lib/ansible/module_utils/facts.py
+++ b/lib/ansible/module_utils/facts.py
@@ -3511,6 +3511,9 @@ class SunOSVirtual(Virtual):
                     elif 'HVM domU' in line:
                         self.facts['virtualization_type'] = 'xen'
                         self.facts['virtualization_role'] = 'guest'
+                    elif 'KVM' in line:
+                        self.facts['virtualization_type'] = 'kvm'
+                        self.facts['virtualization_role'] = 'guest'
 
 class Ohai(Facts):
     """
