commit 26310f411c15fc13bb1c3febb90f3611e12383b2
Author: Remy <rvanelst@digidentity.eu>
Date:   Mon Feb 4 08:44:35 2013 +0100

    Added check so that upgrade cannot be used with other options.

diff --git a/library/apt b/library/apt
index 39f5f8b99f..97358615fd 100644
--- a/library/apt
+++ b/library/apt
@@ -69,7 +69,7 @@ options:
     choices: [ "yes", "no" ]
   upgrade:
     description:
-      - If yes, performs an apt-get upgrade. If dist, performs an apt-get dist-upgrade.
+      - If yes, performs an apt-get upgrade. If dist, performs an apt-get dist-upgrade. Note: This does not upgrade a specific package, use state=latest for that.
     version_added: "1.1"
     required: false
     default: no
@@ -230,6 +230,8 @@ def main():
 
     if p['upgrade'] != 'no' and p['package'] is None:
         upgrade(module, p['upgrade'])
+    elif p['upgrade'] != 'no' and p['package'] != None:
+        module.fail_json(msg="Upgrade should not be used in conjunction with other options.")
 
     packages = p['package'].split(',')
     latest = p['state'] == 'latest'
