commit 86a63cfcd7f0c5fc2dd6969a9df2e62bc94f6c58
Author: Abhijeet Kasurde <akasurde@redhat.com>
Date:   Wed Apr 26 21:05:40 2017 +0530

    Handle fetch_url error gracefully (#23821)
    
    Fix adds http response code check for fetch_url.
    Also, method in fetch_url call.
    
    Fixes https://github.com/ansible/ansible/issues/23800
    
    Signed-off-by: Abhijeet Kasurde <akasurde@redhat.com>

diff --git a/lib/ansible/modules/packaging/os/apt.py b/lib/ansible/modules/packaging/os/apt.py
index a88cd5f398..4da86770fe 100644
--- a/lib/ansible/modules/packaging/os/apt.py
+++ b/lib/ansible/modules/packaging/os/apt.py
@@ -722,7 +722,10 @@ def download(module, deb):
     BUFSIZE = 65536
 
     try:
-        rsp, info = fetch_url(module, deb)
+        rsp, info = fetch_url(module, deb, method='GET')
+        if info['status'] != 200:
+            module.fail_json(msg="Failed to download %s, %s" % (deb,
+                                                                info['msg']))
         # Ensure file is open in binary mode for Python 3
         f = open(package, 'wb')
         # Read 1kb at a time to save on ram
