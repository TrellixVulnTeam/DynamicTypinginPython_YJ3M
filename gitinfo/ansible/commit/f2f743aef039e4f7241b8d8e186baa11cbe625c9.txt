commit f2f743aef039e4f7241b8d8e186baa11cbe625c9
Author: Matt Clay <matt@mystile.com>
Date:   Mon Jan 22 11:37:18 2018 -0800

    Uninstall backports.lzma in archive test.
    
    This avoids breaking other tests which depend on backports
    modules, since the backports.lzma module is currently
    incompatible with other backports modules.

diff --git a/test/integration/targets/archive/tasks/main.yml b/test/integration/targets/archive/tasks/main.yml
index 5cd9735e73..69e3047efd 100644
--- a/test/integration/targets/archive/tasks/main.yml
+++ b/test/integration/targets/archive/tasks/main.yml
@@ -62,6 +62,7 @@
 - name: Ensure backports.lzma is present to create test archive (pip)
   pip: name=backports.lzma state=latest
   when: ansible_python_version.split('.')[0] == '2'
+  register: backports_lzma_pip
 
 - name: prep our file
   copy: src={{ item }} dest={{output_dir}}/{{ item }}
@@ -328,3 +329,7 @@
 
 - name: remove nonascii test
   file: path="{{ output_dir }}/test-archive-nonascii-くらとみ.zip" state=absent
+
+- name: Remove backports.lzma if previously installed (pip)
+  pip: name=backports.lzma state=absent
+  when: backports_lzma_pip is changed
