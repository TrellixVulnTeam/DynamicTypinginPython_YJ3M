commit 9ba33f6ac1f5715b49a028cace4ef609a875da44
Author: Jordan Borean <jborean93@gmail.com>
Date:   Wed Oct 17 05:38:52 2018 +1000

    test: openssl 1.1.x compatibility (#47112)

diff --git a/test/integration/targets/openssl_certificate/tasks/ownca.yml b/test/integration/targets/openssl_certificate/tasks/ownca.yml
index 6ee075a3bd..9f7dbbff5c 100644
--- a/test/integration/targets/openssl_certificate/tasks/ownca.yml
+++ b/test/integration/targets/openssl_certificate/tasks/ownca.yml
@@ -8,6 +8,9 @@
     privatekey_path: '{{ output_dir }}/ca_privatekey.pem'
     subject:
       commonName: Example CA
+    basic_constraints:
+    - 'CA:TRUE'
+    basic_constraints_critical: yes
 
 - name: Generate selfsigned CA certificate
   openssl_certificate:
diff --git a/test/integration/targets/openssl_certificate/tests/validate_ownca.yml b/test/integration/targets/openssl_certificate/tests/validate_ownca.yml
index 5066d80f35..779452fb18 100644
--- a/test/integration/targets/openssl_certificate/tests/validate_ownca.yml
+++ b/test/integration/targets/openssl_certificate/tests/validate_ownca.yml
@@ -20,7 +20,8 @@
       - ownca_verify_ca.stdout == 'OK'
       - ownca_cert_modulus.stdout == privatekey_modulus.stdout
       - ownca_cert_version.stdout == '3'
-      - ownca_cert_issuer.stdout == 'CN=Example CA'
+      # openssl 1.1.x adds a space between the output
+      - ownca_cert_issuer.stdout in ['CN=Example CA', 'CN = Example CA']
 
 - name: Validate ownca certificate idempotence
   assert:
