commit d2032116cdb5e288cb434e0dc0a875d6d1870145
Author: Alexander Teves <alexander.teves@s24.com>
Date:   Wed May 24 12:16:05 2017 +0200

    Added timeout to jenkins_script POST request (#24924)
    
    * Added timeout to jenkins_script POST request
    
    The timeout value is passed to fetch_url to allow a custom timeout
    bigger than the predefined 10 seconds.
    
    * Added version, removed no_log

diff --git a/lib/ansible/modules/web_infrastructure/jenkins_script.py b/lib/ansible/modules/web_infrastructure/jenkins_script.py
index bf37a21a80..1348f373ea 100644
--- a/lib/ansible/modules/web_infrastructure/jenkins_script.py
+++ b/lib/ansible/modules/web_infrastructure/jenkins_script.py
@@ -65,6 +65,12 @@ options:
       - The password to connect to the jenkins server with.
     required: false
     default: null
+  timeout:
+    description:
+      - The request timeout in seconds
+    required: false
+    default: 10
+    version_added: "2.4"
   args:
     description:
       - A dict of key-value pairs used in formatting the script.
@@ -154,6 +160,7 @@ def main():
             validate_certs=dict(required=False, type="bool", default=True),
             user=dict(required=False, no_log=True, type="str", default=None),
             password=dict(required=False, no_log=True, type="str", default=None),
+            timeout=dict(required=False, type="int", default=10),
             args=dict(required=False, type="dict", default=None)
         )
     )
@@ -180,7 +187,8 @@ def main():
                            module.params['url'] + "/scriptText",
                            data=urlencode({'script': script_contents}),
                            headers=headers,
-                           method="POST")
+                           method="POST",
+                           timeout=module.params['timeout'])
 
     if info["status"] != 200:
         module.fail_json(msg="HTTP error " + str(info["status"]) + " " + info["msg"])
