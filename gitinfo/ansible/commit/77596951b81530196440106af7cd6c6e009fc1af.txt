commit 77596951b81530196440106af7cd6c6e009fc1af
Author: Sebastien Lacoste-Seris <sebastien@lacoste-seris.net>
Date:   Tue Feb 21 14:00:07 2017 +0000

    Update vca_vapp.py (#19562)
    
    Check result of vApp creation and return module failure if creation task not present

diff --git a/lib/ansible/modules/cloud/vmware/vca_vapp.py b/lib/ansible/modules/cloud/vmware/vca_vapp.py
index 9a8883e162..7632a8b7d0 100644
--- a/lib/ansible/modules/cloud/vmware/vca_vapp.py
+++ b/lib/ansible/modules/cloud/vmware/vca_vapp.py
@@ -189,6 +189,9 @@ def create(module):
                                   catalog_name, network_name, network_mode,
                                   vm_name, vm_cpus, vm_memory, deploy, poweron)
 
+    if task is False:
+        module.fail('Failed to create vapp: ' + vapp_name)
+        
     module.vca.block_until_completed(task)
 
 def delete(module):
