commit 0eca47cf91adc487af5250039381f9b468bbb258
Author: Dag Wieers <dag@wieers.com>
Date:   Fri Feb 26 15:03:51 2016 +0100

    Avoid merging a dict and a AnsibleUnicode
    
    This is the same fix we applied to v1.9 in PR #14565, however it does not fix #14678 completely !
    The dictionaries are not being merged as tey are on v1.9.

diff --git a/lib/ansible/utils/vars.py b/lib/ansible/utils/vars.py
index 73ba52b4b3..01eb5ac821 100644
--- a/lib/ansible/utils/vars.py
+++ b/lib/ansible/utils/vars.py
@@ -86,7 +86,7 @@ def merge_hash(a, b):
     for k, v in iteritems(b):
         # if there's already such key in a
         # and that key contains a MutableMapping
-        if k in result and isinstance(result[k], MutableMapping):
+        if k in result and isinstance(result[k], MutableMapping) and isinstance(v, MutableMapping):
             # merge those dicts recursively
             result[k] = merge_hash(result[k], v)
         else:
