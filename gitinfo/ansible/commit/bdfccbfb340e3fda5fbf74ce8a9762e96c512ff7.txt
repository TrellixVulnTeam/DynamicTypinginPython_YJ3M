commit bdfccbfb340e3fda5fbf74ce8a9762e96c512ff7
Author: Matt Wright <matt@nobien.net>
Date:   Thu Aug 30 12:35:37 2012 -0400

    Move conditional that accounts for variances in distros/versions to work when removing and adding.

diff --git a/library/apt_repository b/library/apt_repository
index 8724f7c301..3815937f81 100755
--- a/library/apt_repository
+++ b/library/apt_repository
@@ -39,6 +39,8 @@ def _find_binary(module):
                          '%s' % binaries)
 
 def _run(cmd):
+    if platform.dist()[0] == 'debian' or float(platform.dist()[1]) >= 11.10:
+        cmd = cmd + ' -y'
     # returns (rc, stdout, stderr) from shell command
     process = subprocess.Popen(cmd, stdout=subprocess.PIPE,
                                stderr=subprocess.PIPE, shell=True)
@@ -72,9 +74,6 @@ def main():
 
     cmd = '%s "%s"' % (add_apt_repository, repo)
 
-    if platform.dist()[0] == 'debian' or float(platform.dist()[1]) >= 11.10:
-        cmd = cmd + ' -y'
-
     rc, out, err = _run(cmd)
 
     changed = rc == 0 and not existed
