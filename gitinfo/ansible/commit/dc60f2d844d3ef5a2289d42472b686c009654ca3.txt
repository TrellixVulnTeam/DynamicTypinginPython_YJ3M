commit dc60f2d844d3ef5a2289d42472b686c009654ca3
Author: Jeroen Hoekx <jeroen.hoekx@hamok.be>
Date:   Fri May 11 14:14:53 2012 +0200

    Allow camelCase variables in varreplace.

diff --git a/lib/ansible/utils.py b/lib/ansible/utils.py
index 6c1e3be6a1..29b164de91 100644
--- a/lib/ansible/utils.py
+++ b/lib/ansible/utils.py
@@ -243,7 +243,7 @@ def varReplace(raw, vars):
 
         # Determine replacement value (if unknown variable then preserve
         # original)
-        varname = m.group(2).lower()
+        varname = m.group(2)
 
         replacement = unicode(varLookup(varname, vars) or m.group())
 
diff --git a/test/TestUtils.py b/test/TestUtils.py
index aeabdb0dbb..114ac71c0a 100644
--- a/test/TestUtils.py
+++ b/test/TestUtils.py
@@ -45,6 +45,16 @@ class TestUtils(unittest.TestCase):
 
         assert res == 'hello world'
 
+    def test_varReplace_caps(self):
+        template = 'hello $whoVar'
+        vars = {
+            'whoVar': 'world',
+        }
+
+        res = ansible.utils.varReplace(template, vars)
+        print res
+        assert res == 'hello world'
+
     def test_varReplace_middle(self):
         template = 'hello $who!'
         vars = {
