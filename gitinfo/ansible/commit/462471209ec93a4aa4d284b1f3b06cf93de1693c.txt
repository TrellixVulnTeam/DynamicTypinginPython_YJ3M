commit 462471209ec93a4aa4d284b1f3b06cf93de1693c
Author: jszwedko <jesse.szwedko@gmail.com>
Date:   Wed Dec 10 16:54:58 2014 -0500

    Allow retries to be templatable
    
    Fixes #5865

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index 47c1faadeb..7912d23462 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -1030,7 +1030,7 @@ class Runner(object):
 
             cond = template.template(self.basedir, until, inject, expand_lists=False)
             if not utils.check_conditional(cond,  self.basedir, inject, fail_on_undefined=self.error_on_undefined_vars):
-                retries = self.module_vars.get('retries')
+                retries = template.template(self.basedir, self.module_vars.get('retries'), inject, expand_lists=False)
                 delay   = self.module_vars.get('delay')
                 for x in range(1, int(retries) + 1):
                     # template the delay, cast to float and sleep
