commit a6ecbe7a4b82398001fb4baf1cc6db40f67496c3
Author: Abhijeet Kasurde <akasurde@redhat.com>
Date:   Tue Feb 12 18:12:18 2019 +0530

    Check metadata.status presence (#50416)
    
    Generate error if metadata.status is empty or missing.
    
    Signed-off-by: Abhijeet Kasurde <akasurde@redhat.com>

diff --git a/docs/bin/plugin_formatter.py b/docs/bin/plugin_formatter.py
index 65d803faa9..11db00b6de 100755
--- a/docs/bin/plugin_formatter.py
+++ b/docs/bin/plugin_formatter.py
@@ -293,7 +293,7 @@ def get_plugin_info(module_dir, limit_to=None, verbose=False):
         # use ansible core library to parse out doc metadata YAML and plaintext examples
         doc, examples, returndocs, metadata = plugin_docs.get_docstring(module_path, fragment_loader, verbose=verbose)
 
-        if metadata and 'removed' in metadata.get('status'):
+        if metadata and 'removed' in metadata.get('status', []):
             continue
 
         category = categories
