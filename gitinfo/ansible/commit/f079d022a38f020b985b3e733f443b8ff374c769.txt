commit f079d022a38f020b985b3e733f443b8ff374c769
Author: Brian Coca <bcoca@ansible.com>
Date:   Wed Apr 23 10:38:38 2014 -0400

    now when making multiple dirs in path to make dir, same permissions are assigned (but only for NEW dirs)
    
    Signed-off-by: Brian Coca <briancoca+ansible@gmail.com>

diff --git a/library/files/file b/library/files/file
index 3b4aaa9e23..b10688f2f6 100644
--- a/library/files/file
+++ b/library/files/file
@@ -165,8 +165,15 @@ def main():
         if prev_state == 'absent':
             if module.check_mode:
                 module.exit_json(changed=True)
-            os.makedirs(path)
             changed = True
+            curpath = ''
+            for dirname in path.split('/'):
+                curpath = '/'.join([curpath, dirname])
+                if not os.path.exists(curpath):
+                    os.mkdir(curpath)
+                    tmp_file_args = file_args.copy()
+                    tmp_file_args['path']=curpath
+                    changed = module.set_fs_attributes_if_different(tmp_file_args, changed)
 
         changed = module.set_fs_attributes_if_different(file_args, changed)
 
