commit 77ce83fe22cf4fde6d9179a075337448c67f9715
Author: Peter Sprygada <privateip@users.noreply.github.com>
Date:   Sat Mar 25 00:19:48 2017 -0400

    fixes ansible-connection working directory (#22964)
    
    When ansible-connection forks the process, it changed the working
    directory to /.  This patch will prevent ansible-connection from
    changing the working directory in the forked process.

diff --git a/bin/ansible-connection b/bin/ansible-connection
index 89e1158ef2..da1b4eec52 100755
--- a/bin/ansible-connection
+++ b/bin/ansible-connection
@@ -63,7 +63,7 @@ def do_fork():
         if pid > 0:
             return pid
 
-        os.chdir("/")
+        #os.chdir("/")
         os.setsid()
         os.umask(0)
 
@@ -119,6 +119,7 @@ class Server():
         self.play_context = play_context
 
         display.display("starting new persistent socket with path %s" % path, log_only=True)
+        display.display('current working directory is %s' % os.getcwd(), log_only=True)
 
         self._start_time = datetime.datetime.now()
 
