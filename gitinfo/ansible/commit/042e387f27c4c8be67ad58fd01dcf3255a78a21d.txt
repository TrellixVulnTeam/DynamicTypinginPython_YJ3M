commit 042e387f27c4c8be67ad58fd01dcf3255a78a21d
Author: Matt Clay <matt@mystile.com>
Date:   Mon Mar 20 15:31:57 2017 -0700

    Fix metadata handling for shell command. (#22801)

diff --git a/test/runner/lib/delegation.py b/test/runner/lib/delegation.py
index 1f0ddabafd..a5de0e0332 100644
--- a/test/runner/lib/delegation.py
+++ b/test/runner/lib/delegation.py
@@ -451,6 +451,7 @@ def filter_options(args, argv, options, exclude, require):
         yield '--require'
         yield target
 
-    if args.metadata_path:
-        yield '--metadata'
-        yield args.metadata_path
+    if isinstance(args, TestConfig):
+        if args.metadata_path:
+            yield '--metadata'
+            yield args.metadata_path
