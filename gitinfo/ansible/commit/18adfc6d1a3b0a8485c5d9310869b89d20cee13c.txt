commit 18adfc6d1a3b0a8485c5d9310869b89d20cee13c
Author: James Cammarata <jimi@sngx.net>
Date:   Tue Sep 22 02:35:01 2015 -0400

    Set some default vars on hosts created for delegate_to connections

diff --git a/lib/ansible/vars/__init__.py b/lib/ansible/vars/__init__.py
index 48c103d124..aef046fc49 100644
--- a/lib/ansible/vars/__init__.py
+++ b/lib/ansible/vars/__init__.py
@@ -315,8 +315,16 @@ class VariableManager:
                                 break
                         else:
                             delegated_host = Host(name=delegated_host_name)
+                            delegated_host.vars.update(dict(
+                                ansible_host=delegated_host_name,
+                                ansible_connection = C.DEFAULT_TRANSPORT,
+                            ))
                 else:
                     delegated_host = Host(name=delegated_host_name)
+                    delegated_host.vars.update(dict(
+                        ansible_host=delegated_host_name,
+                        ansible_connection = C.DEFAULT_TRANSPORT,
+                    ))
 
                 # now we go fetch the vars for the delegated-to host and save them in our
                 # master dictionary of variables to be used later in the TaskExecutor/PlayContext
