commit a5515e8490f69c801deed0348e1767cf6a46000e
Author: Constantin <Constantin07@users.noreply.github.com>
Date:   Mon Jun 13 18:43:38 2016 +0100

    Added block_device_mapping in the returned output (#1553)

diff --git a/lib/ansible/modules/extras/cloud/amazon/ec2_remote_facts.py b/lib/ansible/modules/extras/cloud/amazon/ec2_remote_facts.py
index 28fc2c97d6..55c00910b7 100644
--- a/lib/ansible/modules/extras/cloud/amazon/ec2_remote_facts.py
+++ b/lib/ansible/modules/extras/cloud/amazon/ec2_remote_facts.py
@@ -83,6 +83,21 @@ def get_instance_info(instance):
     except AttributeError:
         source_dest_check = None
 
+    # Get block device mapping
+    try:
+        bdm_dict = []
+        bdm = getattr(instance, 'block_device_mapping')
+        for device_name in bdm.keys():
+            bdm_dict.append({
+                'device_name': device_name,
+                'status': bdm[device_name].status,
+                'volume_id': bdm[device_name].volume_id,
+                'delete_on_termination': bdm[device_name].delete_on_termination,
+                'attach_time': bdm[device_name].attach_time
+            })
+    except AttributeError:
+        pass
+
     instance_info = { 'id': instance.id,
                     'kernel': instance.kernel,
                     'instance_profile': instance.instance_profile,
@@ -115,6 +130,7 @@ def get_instance_info(instance):
                     'private_ip_address': instance.private_ip_address,
                     'state': instance._state.name,
                     'vpc_id': instance.vpc_id,
+                    'block_device_mapping': bdm_dict,
                   }
 
     return instance_info
