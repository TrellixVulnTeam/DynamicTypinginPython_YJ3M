commit e1b1df3cb117e65738d9ac66116aa494d7506ae9
Author: John R Barker <john@johnrbarker.com>
Date:   Wed Jan 25 14:47:56 2017 +0000

    Detect VyOS based on /etc/issue (support 1.0.5) (#20221)
    
    * Detect VyOS based on /etc/issue (support 1.0.5)
    
    VyOS didn't contain `vyos` in `/proc/version`
    
    * Update vyos.py

diff --git a/lib/ansible/plugins/terminal/vyos.py b/lib/ansible/plugins/terminal/vyos.py
index 91c707471c..da33c0c3ad 100644
--- a/lib/ansible/plugins/terminal/vyos.py
+++ b/lib/ansible/plugins/terminal/vyos.py
@@ -50,7 +50,7 @@ class TerminalModule(TerminalBase):
 
     @staticmethod
     def guess_network_os(conn):
-        stdin, stdout, stderr = conn.exec_command('cat /proc/version')
-        if 'vyos' in stdout.read():
+        stdin, stdout, stderr = conn.exec_command('cat /etc/issue')
+        if 'VyOS' in stdout.read():
             return 'vyos'
 
