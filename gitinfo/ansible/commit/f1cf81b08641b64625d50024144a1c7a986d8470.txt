commit f1cf81b08641b64625d50024144a1c7a986d8470
Author: Serge van Ginderachter <serge@vanginderachter.be>
Date:   Mon Jun 3 22:35:07 2013 +0200

    optimization when adding child groups

diff --git a/lib/ansible/inventory/group.py b/lib/ansible/inventory/group.py
index 6f06cb0762..61ef1342bd 100644
--- a/lib/ansible/inventory/group.py
+++ b/lib/ansible/inventory/group.py
@@ -35,9 +35,12 @@ class Group(object):
 
         if self == group:
             raise Exception("can't add group to itself")
-        self.child_groups.append(group)
-        group.depth = max([self.depth+1, group.depth])
-        group.parent_groups.append(self)
+
+        # don't add if it's already there
+        if not group in self.child_groups:
+            self.child_groups.append(group)
+            group.depth = max([self.depth+1, group.depth])
+            group.parent_groups.append(self)
 
     def add_host(self, host):
 
