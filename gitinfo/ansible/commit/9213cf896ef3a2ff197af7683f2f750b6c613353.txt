commit 9213cf896ef3a2ff197af7683f2f750b6c613353
Author: Stephen Fromm <sfromm@gmail.com>
Date:   Tue Apr 10 13:20:03 2012 -0700

    Change to transport is local *and* is localhost
    
    Connection.connect() now requires that, in order to use LocalConnection,
    you specify transport is local and that the hostname is localhost.

diff --git a/lib/ansible/connection.py b/lib/ansible/connection.py
index 11faac402b..a01c7ae4cb 100755
--- a/lib/ansible/connection.py
+++ b/lib/ansible/connection.py
@@ -41,7 +41,7 @@ class Connection(object):
 
     def connect(self, host):
         conn = None
-        if self.transport == 'local' or self._LOCALHOSTRE.search(host):
+        if self.transport == 'local' and self._LOCALHOSTRE.search(host):
             conn = LocalConnection(self.runner, host)
         elif self.transport == 'paramiko':
             conn = ParamikoConnection(self.runner, host)
