commit ae81e3607f4e4aa8fe9cca79e79a8a57fd3518a0
Author: Javier Candeira <javier@candeira.com>
Date:   Wed Feb 13 03:52:43 2013 +1100

    fix remote execution NameError in module 'user'

diff --git a/library/user b/library/user
index 0a0327d2f7..5f08a1b100 100644
--- a/library/user
+++ b/library/user
@@ -861,7 +861,7 @@ def main():
         if user.user_exists():
             (rc, out, err) = user.remove_user()
             if rc != 0:
-                module.fail_json(name=name, msg=err, rc=rc)
+                module.fail_json(name=user.name, msg=err, rc=rc)
             result['force'] = user.force
             result['remove'] = user.remove
     elif user.state == 'present':
