commit 5493ea590cc7cd6b090732bde1df5da1c99aa59e
Author: Matthew Davis <Matthew.Davis.2@team.telstra.com>
Date:   Fri Jan 3 11:06:56 2020 +1100

    make concurrent aws_acm integration tests not clash (#64660)
    
    * add uuid for aws_acm test resources, allow concurrent tests
    
    * remove debug task in aws_acm int test

diff --git a/test/integration/targets/aws_acm/aliases b/test/integration/targets/aws_acm/aliases
index 71d8ec8651..9f66e8ba1d 100644
--- a/test/integration/targets/aws_acm/aliases
+++ b/test/integration/targets/aws_acm/aliases
@@ -1,4 +1,3 @@
 cloud/aws
 aws_acm_info
 shippable/aws/group2
-disabled
diff --git a/test/integration/targets/aws_acm/defaults/main.yml b/test/integration/targets/aws_acm/defaults/main.yml
index a159302ca5..5d3648f8e6 100644
--- a/test/integration/targets/aws_acm/defaults/main.yml
+++ b/test/integration/targets/aws_acm/defaults/main.yml
@@ -7,20 +7,20 @@ local_certs:
   - priv_key: "{{ remote_tmp_dir }}/private-1.pem"
     cert: "{{ remote_tmp_dir }}/public-1.pem"
     csr: "{{ remote_tmp_dir }}/csr-1.csr"
-    domain: acm1.ansible.com
-    name: "{{ resource_prefix }}_1"
+    domain: "acm1.{{ aws_acm_test_uuid }}.ansible.com"
+    name: "{{ resource_prefix }}_{{ aws_acm_test_uuid }}_1"
     
   - priv_key: "{{ remote_tmp_dir }}/private-2.pem"
     cert: "{{ remote_tmp_dir }}/public-2.pem"
     csr: "{{ remote_tmp_dir }}/csr-2.csr"
-    domain: acm2.ansible.com
-    name: "{{ resource_prefix }}_2"
+    domain: "acm2.{{ aws_acm_test_uuid }}.ansible.com"
+    name: "{{ resource_prefix }}_{{ aws_acm_test_uuid }}_2"
     
   - priv_key: "{{ remote_tmp_dir }}/private-3.pem"
     cert: "{{ remote_tmp_dir }}/public-3.pem"
     csr: "{{ remote_tmp_dir }}/csr-3.csr"
-    domain: acm3.ansible.com
-    name: "{{ resource_prefix }}_3"
+    domain: "acm3.{{ aws_acm_test_uuid }}.ansible.com"
+    name: "{{ resource_prefix }}_{{ aws_acm_test_uuid }}_3"
     
 # we'll have one private key
 # make 2 chains using it
@@ -28,8 +28,8 @@ local_certs:
 # not the domain or key
 chained_cert:
     priv_key: "{{ remote_tmp_dir }}/private-ch-0.pem"
-    domain: acm-ch.ansible.com
-    name: "{{ resource_prefix }}_4"
+    domain: "acm-ch.{{ aws_acm_test_uuid }}.ansible.com"
+    name: "{{ resource_prefix }}_{{ aws_acm_test_uuid }}_4"
     chains:
      - cert: "{{ remote_tmp_dir }}/public-ch-0.pem"
        csr: "{{ remote_tmp_dir }}/csr-ch-0.csr"
diff --git a/test/integration/targets/aws_acm/tasks/full_acm_test.yml b/test/integration/targets/aws_acm/tasks/full_acm_test.yml
index 64589a945d..605f7a5d44 100644
--- a/test/integration/targets/aws_acm/tasks/full_acm_test.yml
+++ b/test/integration/targets/aws_acm/tasks/full_acm_test.yml
@@ -8,7 +8,7 @@
         aws_secret_key: "{{ aws_secret_key }}"
         security_token: "{{ security_token }}"
       no_log: True
-        
+
   # just check this task doesn't fail
   # I'm not sure if I can assume there aren't already other certs in this account
   - name: list certs
diff --git a/test/integration/targets/aws_acm/tasks/main.yml b/test/integration/targets/aws_acm/tasks/main.yml
index 4774276fab..55e8309c5e 100644
--- a/test/integration/targets/aws_acm/tasks/main.yml
+++ b/test/integration/targets/aws_acm/tasks/main.yml
@@ -7,6 +7,12 @@
   - set_fact:
       virtualenv_interpreter: "{{ virtualenv }}/bin/python"
   
+  # The CI runs many of these tests in parallel
+  # Use this random ID to differentiate which resources
+  # are from which test
+  - set_fact:
+      aws_acm_test_uuid: "{{ (10**9) | random }}"
+  
   - pip:
       name: virtualenv
   
