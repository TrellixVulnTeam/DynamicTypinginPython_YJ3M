commit 6ff454748998575930455f941bfb368f5d9f6da6
Author: Abhijeet Kasurde <akasurde@redhat.com>
Date:   Sat Apr 13 04:05:35 2019 +0530

    VMware: get_all_host_objs accepts list of host (#55146)
    
    vmware_portgroup accepts list of hosts, get_all_host_objs API modified
    to accept list of hosts.
    
    Signed-off-by: Abhijeet Kasurde <akasurde@redhat.com>

diff --git a/changelogs/fragments/vmware_portgroup_list_host.yml b/changelogs/fragments/vmware_portgroup_list_host.yml
new file mode 100644
index 0000000000..2bb480d35b
--- /dev/null
+++ b/changelogs/fragments/vmware_portgroup_list_host.yml
@@ -0,0 +1,2 @@
+minor_changes:
+- vmware_portgroup accepts list of ESXi hostsystem. Modified get_all_host_objs API to accept list of hostsystems.
diff --git a/lib/ansible/module_utils/vmware.py b/lib/ansible/module_utils/vmware.py
index 3d6a63b7e4..5722b77279 100644
--- a/lib/ansible/module_utils/vmware.py
+++ b/lib/ansible/module_utils/vmware.py
@@ -1109,7 +1109,7 @@ class PyVmomi(object):
                 for host in esxi_host_name:
                     esxi_host_obj = self.find_hostsystem_by_name(host_name=host)
                     if esxi_host_obj:
-                        host_obj_list = [esxi_host_obj]
+                        host_obj_list.append(esxi_host_obj)
                     else:
                         self.module.fail_json(changed=False, msg="ESXi '%s' not found" % host)
 
