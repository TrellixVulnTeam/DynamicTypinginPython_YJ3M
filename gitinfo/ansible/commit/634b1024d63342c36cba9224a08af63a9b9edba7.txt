commit 634b1024d63342c36cba9224a08af63a9b9edba7
Author: James Tanner <tanner.jc@gmail.com>
Date:   Thu Aug 11 14:14:20 2016 -0400

    git: save changed submodules in check and non-check mode (#4392)

diff --git a/lib/ansible/modules/source_control/git.py b/lib/ansible/modules/source_control/git.py
index acc52b28fd..1e9b89df07 100644
--- a/lib/ansible/modules/source_control/git.py
+++ b/lib/ansible/modules/source_control/git.py
@@ -902,10 +902,12 @@ def main():
     submodules_updated = False
     if recursive and not bare:
         submodules_updated = submodules_fetch(git_path, module, remote, track_submodules, dest)
+        if submodules_updated:
+            result.update(submodules_changed=submodules_updated)
 
         if module.check_mode:
             if submodules_updated:
-                result.update(changed=True, after=remote_head, submodules_changed=True)
+                result.update(changed=True, after=remote_head)
             else:
                 result.update(changed=False, after=remote_head)
             module.exit_json(**result)
