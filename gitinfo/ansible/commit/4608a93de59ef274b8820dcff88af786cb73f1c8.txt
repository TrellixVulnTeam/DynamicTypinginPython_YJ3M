commit 4608a93de59ef274b8820dcff88af786cb73f1c8
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Thu Feb 23 22:24:56 2012 -0500

    Added docs on split success/failure structures

diff --git a/bin/ansible-inventory b/bin/ansible-inventory
new file mode 100755
index 0000000000..bb8cce7295
--- /dev/null
+++ b/bin/ansible-inventory
@@ -0,0 +1,80 @@
+#!/usr/bin/python
+
+# Copyright (c) 2012 Michael DeHaan <michael.dehaan@gmail.com>
+#
+# Permission is hereby granted, free of charge, to any person
+# obtaining a copy of this software and associated documentation
+# files (the "Software"), to deal in the Software without restriction,
+# including without limitation the rights to use, copy, modify, merge,
+# publish, distribute, sublicense, and/or sell copies of the Software,
+# and to permit persons to whom the Software is furnished to do so,
+# subject to the following conditions:
+#
+# The above copyright notice and this permission notice shall be
+# included in all copies or substantial portions of the Software.
+#
+# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
+# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
+# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
+# IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR
+# ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF
+# CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
+# WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
+
+from optparse import OptionParser
+import json
+import os
+import ansible
+
+DEFAULT_HOST_LIST      = '/etc/ansible/hosts'
+DEFAULT_MODULE_PATH    = '/usr/share/ansible'
+DEFAULT_MODULE_NAME    = 'ping'
+DEFAULT_PATTERN        = '*'
+DEFAULT_FORKS          = 3
+DEFAULT_MODULE_ARGS    = ''
+DEFAULT_REMOTE_USER    = 'root'
+
+class Cli(object):
+
+    def __init__(self):
+        pass
+
+    def runner(self):
+        parser = OptionParser()
+        parser.add_option("-H", "--host-list", dest="host_list",
+            help="path to hosts list", default=DEFAULT_HOST_LIST)
+        parser.add_option("-L", "--library", dest="module_path",
+            help="path to module library", default=DEFAULT_MODULE_PATH)
+        parser.add_option("-f", "--forks", dest="forks",
+            help="level of parallelism", default=DEFAULT_FORKS)
+        parser.add_option("-n", "--name", dest="module_name",
+            help="module name to execute", default=DEFAULT_MODULE_NAME)
+        parser.add_option("-a", "--args", dest="module_args",
+            help="module arguments", default=DEFAULT_MODULE_ARGS)
+        parser.add_option("-p", "--pattern", dest="pattern",
+            help="hostname pattern", default=DEFAULT_PATTERN)
+        parser.add_option("-u", "--remote-user", dest="remote_user",
+            help="remote username", default=DEFAULT_REMOTE_USER)
+
+        options, args = parser.parse_args()
+
+        # TODO: more shell like splitting on module_args would
+        # be a good idea
+
+        return ansible.Runner(
+            module_name=options.module_name,
+            module_path=options.module_path,
+            module_args=options.module_args.split(' '),
+            remote_user=options.remote_user,
+            host_list=options.host_list,
+            forks=options.forks,
+            pattern=options.pattern,
+            verbose=False,
+        )
+
+if __name__ == '__main__':
+
+    result = Cli().runner().run()
+    print json.dumps(result, sort_keys=True, indent=4)
+
+
