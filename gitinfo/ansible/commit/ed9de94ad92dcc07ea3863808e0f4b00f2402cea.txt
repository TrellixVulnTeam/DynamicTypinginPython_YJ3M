commit ed9de94ad92dcc07ea3863808e0f4b00f2402cea
Author: nitzmahone <mdavis@ansible.com>
Date:   Mon Mar 23 13:07:33 2020 -0700

    remove azure extras and extras_require support (#67822)
    
    * remove azure extras and extras_require support
    
    * Since Azure will be collectionized, the requirements will float more frequently than Ansible releases; the Azure collection needs to host the requirements now.
    * Removed the dynamic extras support as well, since Azure was the only thing using it. If we need it again, it's easy to pull back from history.
    
    * Mark azure-requirements as orhpaned.
    
    This keeps the docs around so that existing links from old test runs remain valid.
    
    Co-authored-by: Matt Clay <matt@mystile.com>

diff --git a/changelogs/fragments/removed_extras_require.yml b/changelogs/fragments/removed_extras_require.yml
new file mode 100644
index 0000000000..28a365b5f6
--- /dev/null
+++ b/changelogs/fragments/removed_extras_require.yml
@@ -0,0 +1,2 @@
+minor_changes:
+- Removed extras_require support from setup.py (and [azure] extra). Requirements will float with the collections, so it's not appropriate for ansible-base to host requirements for them any longer.
diff --git a/docs/docsite/rst/dev_guide/testing/sanity/azure-requirements.rst b/docs/docsite/rst/dev_guide/testing/sanity/azure-requirements.rst
index 0c2d27f361..5e0cc04444 100644
--- a/docs/docsite/rst/dev_guide/testing/sanity/azure-requirements.rst
+++ b/docs/docsite/rst/dev_guide/testing/sanity/azure-requirements.rst
@@ -1,3 +1,5 @@
+:orphan:
+
 azure-requirements
 ==================
 
diff --git a/packaging/requirements/requirements-azure.txt b/packaging/requirements/requirements-azure.txt
deleted file mode 100644
index 6df1a4e827..0000000000
--- a/packaging/requirements/requirements-azure.txt
+++ /dev/null
@@ -1,39 +0,0 @@
-packaging
-requests[security]
-xmltodict
-azure-cli-core==2.0.35
-azure-cli-nspkg==3.0.2
-azure-common==1.1.11
-azure-mgmt-authorization==0.51.1
-azure-mgmt-batch==5.0.1
-azure-mgmt-cdn==3.0.0
-azure-mgmt-compute==10.0.0
-azure-mgmt-containerinstance==1.4.0
-azure-mgmt-containerregistry==2.0.0
-azure-mgmt-containerservice==4.4.0
-azure-mgmt-dns==2.1.0
-azure-mgmt-keyvault==1.1.0
-azure-mgmt-marketplaceordering==0.1.0
-azure-mgmt-monitor==0.5.2
-azure-mgmt-network==4.0.0
-azure-mgmt-nspkg==2.0.0
-azure-mgmt-redis==5.0.0
-azure-mgmt-resource==2.1.0
-azure-mgmt-rdbms==1.4.1
-azure-mgmt-servicebus==0.5.3
-azure-mgmt-sql==0.10.0
-azure-mgmt-storage==3.1.0
-azure-mgmt-trafficmanager==0.50.0
-azure-mgmt-web==0.41.0
-azure-nspkg==2.0.0
-azure-storage==0.35.1
-msrest==0.6.10
-msrestazure==0.6.2
-azure-keyvault==1.0.0a1
-azure-graphrbac==0.40.0
-azure-mgmt-cosmosdb==0.5.2
-azure-mgmt-hdinsight==0.1.0
-azure-mgmt-devtestlabs==3.0.0
-azure-mgmt-loganalytics==0.2.0
-azure-mgmt-automation==0.1.1
-azure-mgmt-iothub==0.7.0
diff --git a/setup.py b/setup.py
index 6fcc4b3e82..ced8c8baaf 100644
--- a/setup.py
+++ b/setup.py
@@ -236,22 +236,6 @@ def substitute_crypto_to_req(req):
     return [r for r in req if is_not_crypto(r)] + [crypto_backend]
 
 
-def read_extras():
-    """Specify any extra requirements for installation."""
-    extras = dict()
-    extra_requirements_dir = 'packaging/requirements'
-    for extra_requirements_filename in os.listdir(extra_requirements_dir):
-        filename_match = re.search(r'^requirements-(\w*).txt$', extra_requirements_filename)
-        if not filename_match:
-            continue
-        extra_req_file_path = os.path.join(extra_requirements_dir, extra_requirements_filename)
-        try:
-            extras[filename_match.group(1)] = read_file(extra_req_file_path).splitlines()
-        except RuntimeError:
-            pass
-    return extras
-
-
 def get_dynamic_setup_params():
     """Add dynamically calculated setup params to static ones."""
     return {
@@ -260,7 +244,6 @@ def get_dynamic_setup_params():
         'install_requires': substitute_crypto_to_req(
             read_requirements('requirements.txt'),
         ),
-        'extras_require': read_extras(),
     }
 
 
diff --git a/test/sanity/code-smell/azure-requirements.json b/test/sanity/code-smell/azure-requirements.json
deleted file mode 100644
index 593b765d14..0000000000
--- a/test/sanity/code-smell/azure-requirements.json
+++ /dev/null
@@ -1,4 +0,0 @@
-{
-    "no_targets": true,
-    "output": "path-message"
-}
diff --git a/test/sanity/code-smell/azure-requirements.py b/test/sanity/code-smell/azure-requirements.py
deleted file mode 100755
index cef84f2062..0000000000
--- a/test/sanity/code-smell/azure-requirements.py
+++ /dev/null
@@ -1,30 +0,0 @@
-#!/usr/bin/env python
-"""Make sure the Azure requirements files match."""
-from __future__ import (absolute_import, division, print_function)
-__metaclass__ = type
-
-import filecmp
-import os
-
-
-def main():
-    src = 'packaging/requirements/requirements-azure.txt'
-    dst = 'test/lib/ansible_test/_data/requirements/integration.cloud.azure.txt'
-
-    missing = [p for p in [src, dst] if not os.path.isfile(p)]
-
-    if missing:
-        for path in missing:
-            print('%s: missing required file' % path)
-
-        return
-
-    if not filecmp.cmp(src, dst):
-        print('%s: must be identical to `%s`' % (dst, src))
-
-    if os.path.islink(dst):
-        print('%s: must not be a symbolic link' % dst)
-
-
-if __name__ == '__main__':
-    main()
