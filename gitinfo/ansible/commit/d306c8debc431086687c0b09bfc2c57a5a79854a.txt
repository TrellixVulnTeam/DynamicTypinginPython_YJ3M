commit d306c8debc431086687c0b09bfc2c57a5a79854a
Author: Timothy Appnel <tim@appnel.com>
Date:   Tue Aug 28 18:10:19 2012 -0400

    Add tojson filter to jinja environment used by the template module.

diff --git a/lib/ansible/utils.py b/lib/ansible/utils.py
index 4d4d7fa96a..6a7b678f31 100644
--- a/lib/ansible/utils.py
+++ b/lib/ansible/utils.py
@@ -211,6 +211,7 @@ def template_from_file(basedir, path, vars):
     ''' run a file through the templating engine '''
 
     environment = jinja2.Environment(loader=jinja2.FileSystemLoader(basedir), trim_blocks=False)
+    environment.filters['tojson'] = json.dumps
     data = codecs.open(path_dwim(basedir, path), encoding="utf8").read()
     t = environment.from_string(data)
     vars = vars.copy()
