commit 00b3a450c7764cd1d5bc3eac0f909141acbe65c6
Author: Stephen Fromm <sfromm@gmail.com>
Date:   Thu May 30 10:15:40 2013 -0700

    Verify /proc/modules is readable (issue #2990)

diff --git a/library/system/setup b/library/system/setup
index 5e4c76c3f3..f8f7926e84 100644
--- a/library/system/setup
+++ b/library/system/setup
@@ -1633,7 +1633,7 @@ class LinuxVirtual(Virtual):
                 return
 
         # Beware that we can have both kvm and virtualbox running on a single system
-        if os.path.exists("/proc/modules"):
+        if os.path.exists("/proc/modules") and os.access('/proc/modules', os.R_OK):
             modules = []
             for line in open("/proc/modules").readlines():
                 data = line.split(" ", 1)
