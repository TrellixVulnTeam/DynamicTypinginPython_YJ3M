commit f8157d579abd9ca5a599f4449ad7008b6ed6edb3
Author: Peter Sprygada <privateip@users.noreply.github.com>
Date:   Wed Feb 22 12:47:21 2017 -0500

    fixes error where a transport is not set for nxos (#21790)
    
    Will now make sure transport is set to `cli`

diff --git a/lib/ansible/plugins/action/nxos.py b/lib/ansible/plugins/action/nxos.py
index 5637360808..51b5215302 100644
--- a/lib/ansible/plugins/action/nxos.py
+++ b/lib/ansible/plugins/action/nxos.py
@@ -97,6 +97,10 @@ class ActionModule(_ActionModule):
             }
             self._task.args['provider'] = provider_arg
 
+        # make sure a transport value is set in args
+        if self._task.args.get('transport') is None and self._task.args.get('provider').get('transport') is None:
+            self._task.args['transport'] = 'cli'
+
         return super(ActionModule, self).run(tmp, task_vars)
 
     def _get_socket_path(self, play_context):
