commit c20c1a6d490933fa2ec8961508735422f3a6adeb
Author: Robin Roth <robin-roth@online.de>
Date:   Thu Dec 10 11:16:21 2015 +0100

    add depth option to ansible-pull
    
    Allows shallow checkouts in ansible-pull by adding `--depth 1` (or higher number)

diff --git a/lib/ansible/cli/pull.py b/lib/ansible/cli/pull.py
index 593d601e8d..67e8925930 100644
--- a/lib/ansible/cli/pull.py
+++ b/lib/ansible/cli/pull.py
@@ -80,6 +80,8 @@ class PullCLI(CLI):
             help='directory to checkout repository to')
         self.parser.add_option('-U', '--url', dest='url', default=None,
             help='URL of the playbook repository')
+        self.parser.add_option('--depth', dest='depth', default=None,
+            help='Depth of checkout, shallow checkout if greater or equal 1 . Defaults to full checkout.')
         self.parser.add_option('-C', '--checkout', dest='checkout',
             help='branch/tag/commit to checkout.  ' 'Defaults to behavior of repository module.')
         self.parser.add_option('--accept-host-key', default=False, dest='accept_host_key', action='store_true',
@@ -154,6 +156,10 @@ class PullCLI(CLI):
 
             if self.options.verify:
                 repo_opts += ' verify_commit=yes'
+                
+            if self.options.depth:
+                repo_opts += ' depth=%s' % self.options.depth
+
 
         path = module_loader.find_plugin(self.options.module_name)
         if path is None:
