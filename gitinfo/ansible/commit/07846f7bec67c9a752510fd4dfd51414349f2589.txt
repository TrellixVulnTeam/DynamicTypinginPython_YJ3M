commit 07846f7bec67c9a752510fd4dfd51414349f2589
Author: Brian Coca <bcoca@ansible.com>
Date:   Tue Jun 14 09:33:45 2016 -0400

    ignore closing file error when file not open
    
    fixes #16268

diff --git a/lib/ansible/plugins/cache/jsonfile.py b/lib/ansible/plugins/cache/jsonfile.py
index a99f5a3e31..1bf0ea10b6 100644
--- a/lib/ansible/plugins/cache/jsonfile.py
+++ b/lib/ansible/plugins/cache/jsonfile.py
@@ -101,7 +101,10 @@ class CacheModule(BaseCacheModule):
         else:
             f.write(jsonify(value))
         finally:
-            f.close()
+            try:
+                f.close()
+            except UnboundLocalError:
+                pass
 
     def has_expired(self, key):
 
