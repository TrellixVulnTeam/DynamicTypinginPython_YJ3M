commit 1c2d244964fea876740a6d2998b193f0c227161d
Author: Chris Hoffman <christopher.hoffman@gmail.com>
Date:   Sat Jun 21 22:01:02 2014 -0400

    Fixing bug with stopped state

diff --git a/library/windows/win_service.ps1 b/library/windows/win_service.ps1
index bed140e7ff..70a3aa0005 100644
--- a/library/windows/win_service.ps1
+++ b/library/windows/win_service.ps1
@@ -68,7 +68,7 @@ If ($state) {
         }
         Set-Attr $result "changed" $true;
     }
-    ElseIf ($state -eq "stopped" -and $svcName -ne "Stopped") {
+    ElseIf ($state -eq "stopped" -and $svc.Status -ne "Stopped") {
         try {
             Stop-Service -Name $svcName -ErrorAction Stop
         }
