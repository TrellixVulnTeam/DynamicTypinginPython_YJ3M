commit 4cfda2a965f16180abeab2ac19510fe72f545567
Author: Paul Sbarra <Sbarra.Paul@gmail.com>
Date:   Thu Mar 21 22:38:42 2013 -0500

    service: fix systemd compilation error with --check

diff --git a/library/service b/library/service
index 14b231a2ef..d0122c5de6 100644
--- a/library/service
+++ b/library/service
@@ -499,7 +499,7 @@ class LinuxService(Service):
 
         self.changed = True
 
-        if self.module.check_mode and changed:
+        if self.module.check_mode and self.changed:
             self.module.exit_json(changed=True)
 
         return self.execute_command("%s %s %s" % args)
