commit b17da1fae9967d548c23aa889c9cb13570e073f6
Author: Lorin Hochstein <lhochstein@netflix.com>
Date:   Sat Feb 11 09:56:18 2017 -0800

    ec2.py: Better error messages for OptInRequired
    
    Improve error messages for RDS and ElastiCache failures for code OptInRequired.

diff --git a/contrib/inventory/ec2.py b/contrib/inventory/ec2.py
index 589cef4919..5b30c90104 100755
--- a/contrib/inventory/ec2.py
+++ b/contrib/inventory/ec2.py
@@ -656,6 +656,10 @@ class Ec2Inventory(object):
 
             if e.error_code == 'AuthFailure':
                 error = self.get_auth_error_message()
+            if e.error_code == "OptInRequired":
+                error = "RDS hasn't been enabled for this account yet. " \
+                    "You must either log in to the RDS service through the AWS console to enable it, " \
+                    "or set 'rds = False' in ec2.ini"
             if not e.reason == "Forbidden":
                 error = "Looks like AWS RDS is down:\n%s" % e.message
             self.fail_with_error(error, 'getting RDS instances')
@@ -738,6 +742,10 @@ class Ec2Inventory(object):
 
             if e.error_code == 'AuthFailure':
                 error = self.get_auth_error_message()
+            if e.error_code == "OptInRequired":
+                error = "ElastiCache hasn't been enabled for this account yet. " \
+                    "You must either log in to the ElastiCache service through the AWS console to enable it, " \
+                    "or set 'elasticache = False' in ec2.ini"
             if not e.reason == "Forbidden":
                 error = "Looks like AWS ElastiCache is down:\n%s" % e.message
             self.fail_with_error(error, 'getting ElastiCache clusters')
