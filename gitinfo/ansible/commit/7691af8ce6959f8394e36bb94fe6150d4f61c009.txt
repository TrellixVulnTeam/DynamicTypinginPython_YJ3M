commit 7691af8ce6959f8394e36bb94fe6150d4f61c009
Author: Brian Coca <bcoca@users.noreply.github.com>
Date:   Tue Aug 9 12:39:34 2016 -0400

    added unsafe_writes to blockinfile (#2701)
    
    depends on  http://github.com/ansible/ansible/issues/17016

diff --git a/lib/ansible/modules/extras/files/blockinfile.py b/lib/ansible/modules/extras/files/blockinfile.py
index 38e719a970..a58e446bf7 100755
--- a/lib/ansible/modules/extras/files/blockinfile.py
+++ b/lib/ansible/modules/extras/files/blockinfile.py
@@ -169,7 +169,7 @@ def write_changes(module, contents, dest):
             module.fail_json(msg='failed to validate: '
                                  'rc:%s error:%s' % (rc, err))
     if valid:
-        module.atomic_move(tmpfile, dest)
+        module.atomic_move(tmpfile, dest, unsafe_writes=module.params['unsafe_writes'])
 
 
 def check_file_attrs(module, changed, message):
