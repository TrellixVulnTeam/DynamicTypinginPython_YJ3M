commit 178db5f3edb7c0394a642506c9e57ab4cb1bbe99
Author: Simon Dodsley <simon@purestorage.com>
Date:   Sun Aug 4 10:29:23 2019 +0200

    Fix bug in purefa_facts where remote pgroup without a schedule is skipped (#60030)

diff --git a/lib/ansible/modules/storage/purestorage/purefa_facts.py b/lib/ansible/modules/storage/purestorage/purefa_facts.py
index 11feefe934..826228053a 100644
--- a/lib/ansible/modules/storage/purestorage/purefa_facts.py
+++ b/lib/ansible/modules/storage/purestorage/purefa_facts.py
@@ -637,19 +637,19 @@ def generate_pgroups_dict(array):
             pgroups_facts[protgroup]['days'] = prot_reten['days']
             pgroups_facts[protgroup]['all_for'] = prot_reten['all_for']
             pgroups_facts[protgroup]['target_all_for'] = prot_reten['target_all_for']
-            if ":" in protgroup:
-                snap_transfers = array.get_pgroup(protgroup, snap=True, transfer=True)
-                pgroups_facts[protgroup]['snaps'] = {}
-                for snap_transfer in range(0, len(snap_transfers)):
-                    snap = snap_transfers[snap_transfer]['name']
-                    pgroups_facts[protgroup]['snaps'][snap] = {
-                        'created': snap_transfers[snap_transfer]['created'],
-                        'started': snap_transfers[snap_transfer]['started'],
-                        'completed': snap_transfers[snap_transfer]['completed'],
-                        'physical_bytes_written': snap_transfers[snap_transfer]['physical_bytes_written'],
-                        'data_transferred': snap_transfers[snap_transfer]['data_transferred'],
-                        'progress': snap_transfers[snap_transfer]['progress'],
-                    }
+        if ":" in protgroup:
+            snap_transfers = array.get_pgroup(protgroup, snap=True, transfer=True)
+            pgroups_facts[protgroup]['snaps'] = {}
+            for snap_transfer in range(0, len(snap_transfers)):
+                snap = snap_transfers[snap_transfer]['name']
+                pgroups_facts[protgroup]['snaps'][snap] = {
+                    'created': snap_transfers[snap_transfer]['created'],
+                    'started': snap_transfers[snap_transfer]['started'],
+                    'completed': snap_transfers[snap_transfer]['completed'],
+                    'physical_bytes_written': snap_transfers[snap_transfer]['physical_bytes_written'],
+                    'data_transferred': snap_transfers[snap_transfer]['data_transferred'],
+                    'progress': snap_transfers[snap_transfer]['progress'],
+                }
     return pgroups_facts
 
 
