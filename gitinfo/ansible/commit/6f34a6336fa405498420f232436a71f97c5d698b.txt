commit 6f34a6336fa405498420f232436a71f97c5d698b
Author: James Cammarata <jimi@sngx.net>
Date:   Wed Apr 2 15:52:08 2014 -0500

    Differentiate decryption failures from empty data files in ansible-vault
    
    Fixes #6822

diff --git a/lib/ansible/utils/vault.py b/lib/ansible/utils/vault.py
index 0a71bd49cb..b4d79a5038 100644
--- a/lib/ansible/utils/vault.py
+++ b/lib/ansible/utils/vault.py
@@ -123,7 +123,7 @@ class VaultLib(object):
 
         # try to unencrypt data
         data = this_cipher.decrypt(data, self.password)
-        if not data:
+        if data is None:
             raise errors.AnsibleError("Decryption failed")
 
         return data            
@@ -210,7 +210,7 @@ class VaultEditor(object):
         this_vault = VaultLib(self.password)
         if this_vault.is_encrypted(tmpdata):
             dec_data = this_vault.decrypt(tmpdata)
-            if not dec_data:
+            if dec_data is None:
                 raise errors.AnsibleError("Decryption failed")
             else:
                 self.write_data(dec_data, self.filename)
