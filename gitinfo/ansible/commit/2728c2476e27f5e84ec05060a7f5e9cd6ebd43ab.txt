commit 2728c2476e27f5e84ec05060a7f5e9cd6ebd43ab
Author: Abhijeet Kasurde <akasurde@redhat.com>
Date:   Thu Jan 30 21:25:46 2020 +0530

    docs: Fixed "Edit on GitHub" link for plugin, cli (#66745)
    
    Fixed sphinx theme to navigate "Edit on Github" link to locate correct
    plugin, cli source in GitHub repo.
    
    Signed-off-by: Abhijeet Kasurde <akasurde@redhat.com>

diff --git a/changelogs/fragments/plugin_doc_link_fix.yml b/changelogs/fragments/plugin_doc_link_fix.yml
new file mode 100644
index 0000000000..b68264b688
--- /dev/null
+++ b/changelogs/fragments/plugin_doc_link_fix.yml
@@ -0,0 +1,2 @@
+minor_changes:
+- "'Edit on GitHub' link for plugin, cli documentation fixed to navigate to correct plugin, cli source."
diff --git a/docs/docsite/_themes/sphinx_rtd_theme/breadcrumbs.html b/docs/docsite/_themes/sphinx_rtd_theme/breadcrumbs.html
index 7dcdeb34b2..ada446b42f 100644
--- a/docs/docsite/_themes/sphinx_rtd_theme/breadcrumbs.html
+++ b/docs/docsite/_themes/sphinx_rtd_theme/breadcrumbs.html
@@ -46,6 +46,10 @@
               <!-- Ansible-specific additions for modules etc -->
                 {% if pagename.endswith('_module') %}
                   <a href="https://{{ github_host|default("github.com") }}/{{ github_user }}/{{ github_repo }}/{{ theme_vcs_pageview_mode|default("blob") }}/{{ github_module_version }}{{ meta.get('source', '') }}?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> {{ _('Edit on GitHub') }}</a>
+                {% elif pagename.startswith('plugins') and meta.get('source', None) %}
+                  <a href="https://{{ github_host|default("github.com") }}/{{ github_user }}/{{ github_repo }}/{{ theme_vcs_pageview_mode|default("blob") }}/{{ github_root_dir }}/{{ pagename }}.py?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> {{ _('Edit on GitHub') }}</a>
+                {% elif pagename.startswith('cli') and meta.get('source', None) %}
+                  <a href="https://{{ github_host|default("github.com") }}/{{ github_user }}/{{ github_repo }}/{{ theme_vcs_pageview_mode|default("blob") }}/{{ github_cli_version }}{{ meta.get('source', '') }}?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> {{ _('Edit on GitHub') }}</a>
                 {% elif (not 'list_of' in pagename) and (not 'category' in pagename) %}
                   <a href="https://{{ github_host|default("github.com") }}/{{ github_user }}/{{ github_repo }}/{{ theme_vcs_pageview_mode|default("blob") }}/{{ github_version }}{{ conf_py_path }}{{ pagename }}{{ suffix }}?description=%23%23%23%23%23%20SUMMARY%0A%3C!---%20Your%20description%20here%20--%3E%0A%0A%0A%23%23%23%23%23%20ISSUE%20TYPE%0A-%20Docs%20Pull%20Request%0A%0A%2Blabel:%20docsite_pr" class="fa fa-github"> {{ _('Edit on GitHub') }}</a>
                 {% endif %}
diff --git a/docs/docsite/rst/conf.py b/docs/docsite/rst/conf.py
index d1a7d001d4..906167af56 100644
--- a/docs/docsite/rst/conf.py
+++ b/docs/docsite/rst/conf.py
@@ -142,6 +142,8 @@ html_context = {
     'github_repo': 'ansible',
     'github_version': 'devel/docs/docsite/rst/',
     'github_module_version': 'devel/lib/ansible/modules/',
+    'github_root_dir': 'devel/lib/ansible',
+    'github_cli_version': 'devel/lib/ansible/cli/',
     'current_version': version,
     'latest_version': '2.9',
     # list specifically out of order to make latest work
diff --git a/docs/templates/cli_rst.j2 b/docs/templates/cli_rst.j2
index 824843d86b..0e4c0f1683 100644
--- a/docs/templates/cli_rst.j2
+++ b/docs/templates/cli_rst.j2
@@ -1,3 +1,5 @@
+:source: {{ cli }}.py
+
 {% set name = cli_name -%}
 {% set name_slug = cli_name -%}
 
