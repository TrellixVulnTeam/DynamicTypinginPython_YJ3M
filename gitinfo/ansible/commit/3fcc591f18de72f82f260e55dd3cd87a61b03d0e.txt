commit 3fcc591f18de72f82f260e55dd3cd87a61b03d0e
Author: Seth Vidal <skvidal@fedoraproject.org>
Date:   Mon Oct 29 12:11:57 2012 -0400

    add check that vars plugins are not handing back None

diff --git a/lib/ansible/inventory/__init__.py b/lib/ansible/inventory/__init__.py
index aab74eb43b..df09d47ff9 100644
--- a/lib/ansible/inventory/__init__.py
+++ b/lib/ansible/inventory/__init__.py
@@ -282,7 +282,8 @@ class Inventory(object):
         vars = {}
         for ip in self._vars_plugins:
             updated = ip.run(host)
-            vars.update(updated)
+            if updated is not None:
+                vars.update(updated)
 
         if self._is_script:
             cmd = subprocess.Popen(
