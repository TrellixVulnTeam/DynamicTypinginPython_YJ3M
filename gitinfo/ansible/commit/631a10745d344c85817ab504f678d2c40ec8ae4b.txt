commit 631a10745d344c85817ab504f678d2c40ec8ae4b
Author: Brian Coca <bcoca@ansible.com>
Date:   Wed Apr 5 18:40:29 2017 -0400

    fix hashing when path is symlink

diff --git a/lib/ansible/module_utils/basic.py b/lib/ansible/module_utils/basic.py
index fb1f6f5130..70ee924a3a 100644
--- a/lib/ansible/module_utils/basic.py
+++ b/lib/ansible/module_utils/basic.py
@@ -2051,7 +2051,7 @@ class AnsibleModule(object):
                                    (filename, algorithm, ', '.join(AVAILABLE_HASH_ALGORITHMS)))
 
         blocksize = 64 * 1024
-        infile = open(filename, 'rb')
+        infile = open(os.path.realpath(filename), 'rb')
         block = infile.read(blocksize)
         while block:
             digest_method.update(block)
