commit e5ff35bbdb84b70e7bfa13398b296f15089aaa48
Author: Andreas Piesk <a.piesk@gmx.net>
Date:   Tue Jul 9 20:33:33 2013 +0200

    expand vars like $HOME used in config values too

diff --git a/lib/ansible/constants.py b/lib/ansible/constants.py
index 0d1e27c9cc..ee41d24a3a 100644
--- a/lib/ansible/constants.py
+++ b/lib/ansible/constants.py
@@ -70,7 +70,7 @@ def shell_expand_path(path):
     ''' shell_expand_path is needed as os.path.expanduser does not work
         when path is None, which is the default for ANSIBLE_PRIVATE_KEY_FILE '''
     if path:
-        path = os.path.expanduser(path)
+        path = os.path.expandvars(os.path.expanduser(path))
     return path
 
 p = load_config_file()
