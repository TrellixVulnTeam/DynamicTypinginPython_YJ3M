commit 820f9f9c1e5799119f7befe21265c1080c53f200
Author: Dag Wieers <dag@wieers.com>
Date:   Sat Oct 13 02:36:41 2018 +0200

    Move requests import into pypsrp try-block

diff --git a/lib/ansible/plugins/connection/psrp.py b/lib/ansible/plugins/connection/psrp.py
index dd34e2755f..9e87e3dd40 100644
--- a/lib/ansible/plugins/connection/psrp.py
+++ b/lib/ansible/plugins/connection/psrp.py
@@ -166,7 +166,6 @@ from ansible.plugins.connection import ConnectionBase
 from ansible.plugins.shell.powershell import _common_args
 from ansible.utils.hashing import secure_hash
 from ansible.utils.path import makedirs_safe
-from requests.exceptions import ConnectTimeout
 
 HAS_PYPSRP = True
 PYPSRP_IMP_ERR = None
@@ -177,6 +176,7 @@ try:
     from pypsrp.powershell import PowerShell, RunspacePool
     from pypsrp.shell import Process, SignalCode, WinRS
     from pypsrp.wsman import WSMan, AUTH_KWARGS
+    from requests.exceptions import ConnectTimeout
 except ImportError as err:
     HAS_PYPSRP = False
     PYPSRP_IMP_ERR = err
