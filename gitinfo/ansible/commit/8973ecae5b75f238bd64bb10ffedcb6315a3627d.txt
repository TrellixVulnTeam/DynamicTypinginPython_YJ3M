commit 8973ecae5b75f238bd64bb10ffedcb6315a3627d
Author: Laurent Mazuel <lmazuel@microsoft.com>
Date:   Tue Mar 15 16:13:13 2016 -0700

    Add user-agent information for analytics

diff --git a/lib/ansible/modules/extras/cloud/azure/azure_deployment.py b/lib/ansible/modules/extras/cloud/azure/azure_deployment.py
index 79875581d0..e28663b55f 100644
--- a/lib/ansible/modules/extras/cloud/azure/azure_deployment.py
+++ b/lib/ansible/modules/extras/cloud/azure/azure_deployment.py
@@ -591,8 +591,12 @@ def main():
                                               tenant=conn_info['tenant_id'])
 
     subscription_id = conn_info['subscription_id']
-    resource_client = ResourceManagementClient(ResourceManagementClientConfiguration(credentials, subscription_id))
-    network_client = NetworkManagementClient(NetworkManagementClientConfiguration(credentials, subscription_id))
+    resource_configuration = ResourceManagementClientConfiguration(credentials, subscription_id)
+    resource_configuration.add_user_agent('Ansible-Deploy')
+    resource_client = ResourceManagementClient(resource_configuration)
+    network_configuration = NetworkManagementClientConfiguration(credentials, subscription_id)
+    network_configuration.add_user_agent('Ansible-Deploy')
+    network_client = NetworkManagementClient(network_configuration)
     conn_info['deployment_name'] = module.params.get('deployment_name')
 
     if module.params.get('state') == 'present':
