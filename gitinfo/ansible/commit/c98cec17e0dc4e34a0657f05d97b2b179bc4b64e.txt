commit c98cec17e0dc4e34a0657f05d97b2b179bc4b64e
Author: Abhijeet Kasurde <akasurde@redhat.com>
Date:   Wed Sep 26 11:56:45 2018 +0530

    VMware: trigger customization for customization_spec (#45415)
    
    This fix allows to trigger VM customization if user specifies
    customization spec.
    
    Fixes: #44159
    
    Signed-off-by: Abhijeet Kasurde <akasurde@redhat.com>

diff --git a/lib/ansible/modules/cloud/vmware/vmware_guest.py b/lib/ansible/modules/cloud/vmware/vmware_guest.py
index a1fdfd7e04..b4f1b8597e 100644
--- a/lib/ansible/modules/cloud/vmware/vmware_guest.py
+++ b/lib/ansible/modules/cloud/vmware/vmware_guest.py
@@ -2020,7 +2020,7 @@ class PyVmomiHelper(PyVmomi):
                     network_changes = True
                     break
 
-        if len(self.params['customization']) > 0 or network_changes is True:
+        if len(self.params['customization']) > 0 or network_changes or self.params.get('customization_spec'):
             self.customize_vm(vm_obj=vm_obj)
 
         clonespec = None
