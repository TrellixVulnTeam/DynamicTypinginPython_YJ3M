commit 0dbebfddaa6a82538ea16e64c4f3ebc8d2083e07
Author: Brian Coca <bcoca@ansible.com>
Date:   Wed Sep 9 14:21:56 2015 -0400

    Revert "remove closing connections after every task, this goes against conneciton caching and was not expected behaviuor nor inhertited from v1"
    needed for winrm, disabled closing connections in ssh to avoid issues with that persistance, need to normalize all this in future
    
    This reverts commit 23a22397bfdbcf9d8a4b9037fc5fb63ae8dcefc1.

diff --git a/lib/ansible/executor/task_executor.py b/lib/ansible/executor/task_executor.py
index fd174a8421..9feb5f42c5 100644
--- a/lib/ansible/executor/task_executor.py
+++ b/lib/ansible/executor/task_executor.py
@@ -129,6 +129,13 @@ class TaskExecutor:
             return result
         except AnsibleError as e:
             return dict(failed=True, msg=to_unicode(e, nonstring='simplerepr'))
+        finally:
+            try:
+                self._connection.close()
+            except AttributeError:
+                pass
+            except Exception as e:
+                debug("error closing connection: %s" % to_unicode(e))
 
     def _get_loop_items(self):
         '''
