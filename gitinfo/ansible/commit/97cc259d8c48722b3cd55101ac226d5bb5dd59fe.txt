commit 97cc259d8c48722b3cd55101ac226d5bb5dd59fe
Author: Mark Theunissen <mark.theunissen@gmail.com>
Date:   Tue Jul 24 09:26:45 2012 -0500

    Undefined variable error

diff --git a/library/user b/library/user
index 310e61cd09..ce0a88729c 100755
--- a/library/user
+++ b/library/user
@@ -106,7 +106,7 @@ def user_mod(module, user, **kwargs):
         elif key == 'group' and kwargs[key] is not None:
             if not group_exists(kwargs[key]):
                 module.fail_json(msg="Group %s does not exist" % (kwargs[key]))
-            ginfo = group_info(group)
+            ginfo = group_info(kwargs[key])
             if info[3] != ginfo[2]:
                 cmd.append('-g')
                 cmd.append(kwargs[key])
