commit 6b1cb22fc31d85a3e9e9bbf315ae959d05623427
Author: Serge van Ginderachter <serge@vanginderachter.be>
Date:   Tue Mar 11 12:49:54 2014 +0100

    Allow hash_behaviour=merge to be respected in core inventory
    
    (For now, this means, enable it also for inventory scripts)

diff --git a/lib/ansible/inventory/host.py b/lib/ansible/inventory/host.py
index 19b919ac66..1b3c10f9d4 100644
--- a/lib/ansible/inventory/host.py
+++ b/lib/ansible/inventory/host.py
@@ -16,6 +16,7 @@
 # along with Ansible.  If not, see <http://www.gnu.org/licenses/>.
 
 import ansible.constants as C
+from ansible import utils
 
 class Host(object):
     ''' a single ansible host '''
@@ -56,7 +57,7 @@ class Host(object):
         results = {}
         groups = self.get_groups()
         for group in sorted(groups, key=lambda g: g.depth):
-            results.update(group.get_variables())
+            results = utils.combine_vars(results, group.get_variables())
         results.update(self.vars)
         results['inventory_hostname'] = self.name
         results['inventory_hostname_short'] = self.name.split('.')[0]
