commit cde36b883c044ae099804a3975296623d7350d6d
Author: Graham Mainwaring <gmainwar@redhat.com>
Date:   Wed Jul 12 17:28:56 2017 -0400

    Fix pycrypto backend setting to work when multiple distros are specified in DEB_DIST

diff --git a/packaging/debian/control b/packaging/debian/control
index 2db9db468f..8e5c6a7877 100644
--- a/packaging/debian/control
+++ b/packaging/debian/control
@@ -3,7 +3,7 @@ Section: admin
 Priority: optional
 Standards-Version: 3.9.3
 Maintainer: Ansible, Inc. <info@ansible.com>
-Build-Depends: cdbs, debhelper (>= 5.0.0), asciidoc, python, dh-python | python-support, python-setuptools
+Build-Depends: cdbs, debhelper (>= 5.0.0), asciidoc, python, dh-python | python-support, python-setuptools, lsb-release
 Homepage: http://ansible.github.com/
 
 Package: ansible
diff --git a/packaging/debian/rules b/packaging/debian/rules
index b48c433c33..130451a1ea 100755
--- a/packaging/debian/rules
+++ b/packaging/debian/rules
@@ -6,7 +6,7 @@ DEB_PYTHON2_MODULE_PACKAGES=ansible
 include /usr/share/cdbs/1/rules/debhelper.mk
 include /usr/share/cdbs/1/class/python-distutils.mk
 
-ifeq ($(DEB_DIST), trusty)
+ifeq ($(shell lsb_release -cs), trusty)
   export ANSIBLE_CRYPTO_BACKEND = pycrypto
 endif
 
