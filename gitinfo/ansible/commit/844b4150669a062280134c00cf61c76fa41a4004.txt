commit 844b4150669a062280134c00cf61c76fa41a4004
Author: Matt Clay <matt@mystile.com>
Date:   Fri May 27 12:28:13 2016 -0700

    Mark tasks expected to fail with EXPECTED FAILURE.
    
    This allows for automated identification of tasks which are
    expected to fail, but which cannot use ignore_errors because
    they need to fail.

diff --git a/test/integration/roles/test_force_handlers/tasks/main.yml b/test/integration/roles/test_force_handlers/tasks/main.yml
index a3948756d7..ea01660ba7 100644
--- a/test/integration/roles/test_force_handlers/tasks/main.yml
+++ b/test/integration/roles/test_force_handlers/tasks/main.yml
@@ -10,15 +10,15 @@
     - echoing handler
   when: inventory_hostname == 'A' or inventory_hostname == 'B'
 
-- name: fail task for all
+- name: EXPECTED FAILURE fail task for all
   fail: msg="Fail All"
   when: fail_all is defined and fail_all
 
-- name: fail task for A
+- name: EXPECTED FAILURE fail task for A
   fail: msg="Fail A"
   when: inventory_hostname == 'A'
 
-- name: fail task for C
+- name: EXPECTED FAILURE fail task for C
   fail: msg="Fail C"
   when: inventory_hostname == 'C'
   
diff --git a/test/integration/test_blocks/fail.yml b/test/integration/test_blocks/fail.yml
index ca8575a907..ae94655136 100644
--- a/test/integration/test_blocks/fail.yml
+++ b/test/integration/test_blocks/fail.yml
@@ -1 +1,2 @@
-- fail: msg="{{msg}}"
+- name: EXPECTED FAILURE
+  fail: msg="{{msg}}"
diff --git a/test/integration/test_blocks/main.yml b/test/integration/test_blocks/main.yml
index d318145ac9..a80a62b753 100644
--- a/test/integration/test_blocks/main.yml
+++ b/test/integration/test_blocks/main.yml
@@ -15,7 +15,7 @@
     - name: set block tasks run flag
       set_fact:
         block_tasks_run: true
-    - name: fail in tasks
+    - name: EXPECTED FAILURE fail in tasks
       fail:
     - name: tasks flag should not be set after failure
       set_fact:
@@ -24,7 +24,7 @@
     - name: set block rescue run flag
       set_fact:
         block_rescue_run: true
-    - name: fail in rescue
+    - name: EXPECTED FAILURE fail in rescue
       fail:
     - name: tasks flag should not be set after failure in rescue
       set_fact:
diff --git a/test/integration/test_test_infra.yml b/test/integration/test_test_infra.yml
index 48028ad8a7..13c570530a 100644
--- a/test/integration/test_test_infra.yml
+++ b/test/integration/test_test_infra.yml
@@ -20,7 +20,7 @@
   - debug:
       msg: assert works ({{ assert_out.failed }})
 
-  - name: ensure fail action stops execution
+  - name: EXPECTED FAILURE ensure fail action stops execution
     fail:
       msg: fail actually failed (this is expected)
 
