commit 017bd7b1cd78b0ca58ad673ef7316ad87bbf22b0
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Wed Aug 26 13:36:50 2015 -0700

    Fix synchronize lookup of localhost info

diff --git a/lib/ansible/plugins/action/synchronize.py b/lib/ansible/plugins/action/synchronize.py
index d151249407..cd7d9fd27c 100644
--- a/lib/ansible/plugins/action/synchronize.py
+++ b/lib/ansible/plugins/action/synchronize.py
@@ -82,7 +82,10 @@ class ActionModule(ActionBase):
                 del task_vars[key]
 
         # Add the definitions from localhost
-        localhost = task_vars['hostvars']['127.0.0.1']
+        for host in C.LOCALHOST:
+            if host in task_vars['hostvars']:
+                localhost = task_vars['hostvars'][host]
+                break
         if 'ansible_syslog_facility' in localhost:
             task_vars['ansible_syslog_facility'] = localhost['ansible_syslog_facility']
         for key in localhost:
