commit 5c458b97615df20a28c41153cdcb2e32b06d7dc6
Author: Seth Vidal <skvidal@fedoraproject.org>
Date:   Thu Aug 9 13:22:51 2012 -0400

    make yum module work with list=pkgspec

diff --git a/library/yum b/library/yum
index a36b2a81ae..b567be2d69 100755
--- a/library/yum
+++ b/library/yum
@@ -108,9 +108,9 @@ def repolist(repoq, qf="%{repoid}"):
 
 def list_stuff(conf_file, stuff):
     qf = "%{name}|%{epoch}|%{version}|%{release}|%{arch}|%{repoid}"
-    repoq = '%s --plugins --quiet  -q ' % repoquery
+    repoq = '%s --show-duplicates --plugins --quiet  -q ' % repoquery
     if conf_file and os.path.exists(conf_file):
-        repoq = '%s -c %s --plugins --quiet  -q ' % (repoquery,conf_file)
+        repoq = '%s -c %s --show-duplicates --plugins --quiet  -q ' % (repoquery,conf_file)
 
     if stuff == 'installed':
         return [ pkg_to_dict(p) for p in is_installed(repoq, '-a', qf=qf) if p.strip() ]
@@ -385,7 +385,7 @@ def main():
             pkg=dict(aliases=['name']),
             # removed==absent, installed==present, these are accepted as aliases
             state=dict(default='installed', choices=['absent','present','installed','removed','latest']),
-            list=dict(choices=['installed','updates','available','repos','pkgspec']),
+            list=dict(),
             conf_file=dict(default=None),
         )
     )
