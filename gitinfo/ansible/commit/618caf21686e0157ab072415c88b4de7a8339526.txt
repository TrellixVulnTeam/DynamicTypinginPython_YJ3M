commit 618caf21686e0157ab072415c88b4de7a8339526
Author: Semyon Deviatkin <devjatkin@gmail.com>
Date:   Mon Jan 7 23:13:00 2019 +0200

    add env variable VAULT_AUTH_METHOD (#50572)

diff --git a/lib/ansible/plugins/lookup/hashi_vault.py b/lib/ansible/plugins/lookup/hashi_vault.py
index 4e78314ade..015fd627f8 100644
--- a/lib/ansible/plugins/lookup/hashi_vault.py
+++ b/lib/ansible/plugins/lookup/hashi_vault.py
@@ -43,6 +43,8 @@ DOCUMENTATION = """
         - name: VAULT_SECRET_ID
     auth_method:
       description: authentication method used
+      env:
+        - name: VAULT_AUTH_METHOD
     mount_point:
       description: vault mount point, only required if you have a custom mount point
       default: ldap
@@ -139,7 +141,7 @@ class HashiVault:
         #
         # to enable a new auth backend, simply add a new 'def auth_<type>' method below.
         #
-        self.auth_method = kwargs.get('auth_method')
+        self.auth_method = kwargs.get('auth_method', os.environ.get('VAULT_AUTH_METHOD'))
         self.verify = self.boolean_or_cacert(kwargs.get('validate_certs', True), kwargs.get('cacert', ''))
         if self.auth_method and self.auth_method != 'token':
             try:
