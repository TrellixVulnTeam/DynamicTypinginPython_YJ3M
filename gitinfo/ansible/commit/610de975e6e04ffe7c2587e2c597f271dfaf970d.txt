commit 610de975e6e04ffe7c2587e2c597f271dfaf970d
Author: luto <m@luto.at>
Date:   Wed Nov 25 17:14:19 2015 +0100

    vsphere_guest: when creating a guest, gather facts about it *before* disconnect

diff --git a/lib/ansible/modules/cloud/vmware/vsphere_guest.py b/lib/ansible/modules/cloud/vmware/vsphere_guest.py
index fd1b3f7927..62bcad4c76 100644
--- a/lib/ansible/modules/cloud/vmware/vsphere_guest.py
+++ b/lib/ansible/modules/cloud/vmware/vsphere_guest.py
@@ -1319,9 +1319,10 @@ def create_vm(vsphere_client, module, esxi, resource_pool, cluster_name, guest,
         # Power on the VM if it was requested
         power_state(vm, state, True)
 
+        vmfacts=gather_facts(vm)
         vsphere_client.disconnect()
         module.exit_json(
-            ansible_facts=gather_facts(vm),
+            ansible_facts=vmfacts,
             changed=True,
             changes="Created VM %s" % guest)
 
