commit e8a5c6f58a78b6b769244af41fca2eac753da940
Author: Petr Svoboda <petr@jatys.cz>
Date:   Mon Sep 30 15:15:19 2013 +0200

    Fix check for ROLLBACK_COMPLETE in cloudformation module
    
    When stack creation is rolled back, final status is not
    CREATE_ROLLBACK_COMPLETE but ROLLBACK_COMPLETE.

diff --git a/library/cloud/cloudformation b/library/cloud/cloudformation
index ae9f2e0f26..92367ef66c 100644
--- a/library/cloud/cloudformation
+++ b/library/cloud/cloudformation
@@ -140,7 +140,7 @@ def stack_operation(cfn, stack_name, operation):
                           events = map(str, list(stack.describe_events())),
                           output = 'Stack %s complete' % operation)
             break
-        if '%s_ROLLBACK_COMPLETE' % operation == stack.stack_status:
+        if  'ROLLBACK_COMPLETE' == stack.stack_status or '%s_ROLLBACK_COMPLETE' % operation == stack.stack_status:
             result = dict(changed=True,
                           events = map(str, list(stack.describe_events())),
                           output = 'Problem with %s. Rollback complete' % operation)
