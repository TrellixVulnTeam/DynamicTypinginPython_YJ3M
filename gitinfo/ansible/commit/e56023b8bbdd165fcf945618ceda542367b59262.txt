commit e56023b8bbdd165fcf945618ceda542367b59262
Author: Matthew Williams <matthew@flowroute.com>
Date:   Tue May 8 07:11:32 2012 -0700

    Template dest and src parameters

diff --git a/lib/ansible/runner.py b/lib/ansible/runner.py
index cde1ecee17..135130c575 100644
--- a/lib/ansible/runner.py
+++ b/lib/ansible/runner.py
@@ -430,10 +430,18 @@ class Runner(object):
         if source is None or dest is None:
             return (host, True, dict(failed=True, msg="src and dest are required"), '')
 
+        # apply templating to source argument
+        inject = self.setup_cache.get(conn.host,{})
+        print source
+        source = utils.template(source, inject, self.setup_cache)
+
         # files are saved in dest dir, with a subdir for each host, then the filename
         dest   = "%s/%s/%s" % (utils.path_dwim(self.basedir, dest), host, source)
         dest   = dest.replace("//","/")
 
+        # apply templating to dest argument
+        dest = utils.template(dest, inject, self.setup_cache)
+
         # compare old and new md5 for support of change hooks
         local_md5 = None
         if os.path.exists(dest):
