commit 9b0cdad4d4ac75efbc54a79bdcbe9852818617c0
Author: Prasad Katti <prasadmkatti@gmail.com>
Date:   Thu Nov 14 08:37:55 2019 -0800

    Add a random component to state machine name in aws_step_functions_stâ€¦ (#64476)
    
    * Add a random component to state machine name in aws_step_functions_state_machine testsuite
    
    * Pick a random number from a bigger set to avoid conflicts between parallel runs
    
    Co-Authored-By: Matt Clay <matt@mystile.com>

diff --git a/test/integration/targets/aws_step_functions_state_machine/defaults/main.yml b/test/integration/targets/aws_step_functions_state_machine/defaults/main.yml
index 45e7f6e3aa..15d14b3cf6 100644
--- a/test/integration/targets/aws_step_functions_state_machine/defaults/main.yml
+++ b/test/integration/targets/aws_step_functions_state_machine/defaults/main.yml
@@ -1,2 +1,3 @@
-state_machine_name: "{{ resource_prefix }}_step_functions_state_machine_ansible_test"
+# the random_num is generated in a set_fact task at the start of the testsuite
+state_machine_name: "{{ resource_prefix }}_step_functions_state_machine_ansible_test_{{ random_num }}"
 step_functions_role_name: "ansible-test-sts-{{ resource_prefix }}-step_functions-role"
diff --git a/test/integration/targets/aws_step_functions_state_machine/tasks/main.yml b/test/integration/targets/aws_step_functions_state_machine/tasks/main.yml
index dffc5b8150..fb5b67624e 100644
--- a/test/integration/targets/aws_step_functions_state_machine/tasks/main.yml
+++ b/test/integration/targets/aws_step_functions_state_machine/tasks/main.yml
@@ -29,6 +29,10 @@
 
     # ==== Tests ===================================================
 
+    - name: Create a random component for state machine name
+      set_fact:
+        random_num: "{{ 999999999 | random }}"
+
     - name: Create a new state machine -- check_mode
       aws_step_functions_state_machine:
         name: "{{ state_machine_name }}"
