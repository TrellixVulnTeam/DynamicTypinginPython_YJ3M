commit 8e9344eef77ae4b4aa3c456e902a7a93cade53e5
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Sun Sep 30 20:06:55 2012 -0400

    add an error when user tries to async something that can't be asynced

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index 5d231b0370..e0bd167453 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -355,6 +355,8 @@ class Runner(object):
 
         handler = self.action_plugins.get(module_name, None)
         if handler:
+            if self.background != 0:
+                raise errors.AnsibleError("async mode is not supported with the %s module" % module_name)
             result = handler.run(conn, tmp, module_name, module_args, inject)
         else:
             if self.background == 0:
