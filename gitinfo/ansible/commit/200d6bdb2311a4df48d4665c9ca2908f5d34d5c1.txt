commit 200d6bdb2311a4df48d4665c9ca2908f5d34d5c1
Author: Andrew Haines <andrew@haines.org.nz>
Date:   Fri Nov 18 16:28:53 2016 +0000

    Default include_role results to empty list in linear strategy plugin
    
    Fixes #18544.
    
    When a loop is over an empty list, the result is set to
    
        {'skipped_reason': u'No items in the list', 'skipped': True, 'changed': False}
    
    which means that accessing `hr._result['results']` throws a `KeyError`.

diff --git a/lib/ansible/plugins/strategy/linear.py b/lib/ansible/plugins/strategy/linear.py
index c592824a05..6a4fe42543 100644
--- a/lib/ansible/plugins/strategy/linear.py
+++ b/lib/ansible/plugins/strategy/linear.py
@@ -287,7 +287,7 @@ class StrategyModule(StrategyBase):
                             loop_var = 'item'
                             if hr._task.loop_control:
                                 loop_var = hr._task.loop_control.loop_var or 'item'
-                            include_results = hr._result['results']
+                            include_results = hr._result.get('results', [])
                         else:
                             include_results = [ hr._result ]
 
