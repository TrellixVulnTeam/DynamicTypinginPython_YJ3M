commit 18b7852940a3525bc7d147f68420b360b29cd0d0
Author: Rene Moser <mail@renemoser.net>
Date:   Wed Dec 14 11:37:26 2016 +0100

    cloudstack: utils: fail friendlier if no zones available (#19332)

diff --git a/lib/ansible/module_utils/cloudstack.py b/lib/ansible/module_utils/cloudstack.py
index ddad13d05d..1ed4793f8b 100644
--- a/lib/ansible/module_utils/cloudstack.py
+++ b/lib/ansible/module_utils/cloudstack.py
@@ -407,6 +407,9 @@ class AnsibleCloudStack(object):
             zone = os.environ.get('CLOUDSTACK_ZONE')
         zones = self.cs.listZones()
 
+        if not zones:
+            self.module.fail_json(msg="No zones available. Please create a zone first")
+
         # use the first zone if no zone param given
         if not zone:
             self.zone = zones['zone'][0]
