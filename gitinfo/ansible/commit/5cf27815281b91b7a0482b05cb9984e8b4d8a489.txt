commit 5cf27815281b91b7a0482b05cb9984e8b4d8a489
Author: James Cammarata <jimi@sngx.net>
Date:   Tue Jul 28 15:34:10 2015 -0400

    A little more cleanup regarding _compute_environment_string

diff --git a/lib/ansible/plugins/action/__init__.py b/lib/ansible/plugins/action/__init__.py
index defed26b5b..1a723b99e5 100644
--- a/lib/ansible/plugins/action/__init__.py
+++ b/lib/ansible/plugins/action/__init__.py
@@ -96,8 +96,8 @@ class ActionBase:
                 environments = [ environments ]
 
             for environment in environments:
-                if type(environment) != dict:
-                    raise AnsibleError("environment must be a dictionary, received %s" % environment)
+                if not isinstance(environment, dict):
+                    raise AnsibleError("environment must be a dictionary, received %s (%s)" % (environment, type(environment)))
                 # very deliberatly using update here instead of combine_vars, as
                 # these environment settings should not need to merge sub-dicts
                 final_environment.update(environment)
