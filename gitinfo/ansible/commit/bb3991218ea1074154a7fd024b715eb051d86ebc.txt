commit bb3991218ea1074154a7fd024b715eb051d86ebc
Author: Abhijeet Kasurde <akasurde@redhat.com>
Date:   Tue Nov 28 17:58:12 2017 +0530

    VMware: Add debug details for error (#33337)
    
    This fix adds debugging details for 'no folder found' error.
    This will allow to debug the user's setup easily.
    
    Signed-off-by: Abhijeet Kasurde <akasurde@redhat.com>

diff --git a/lib/ansible/modules/cloud/vmware/vmware_guest.py b/lib/ansible/modules/cloud/vmware/vmware_guest.py
index 20e16bf60b..18a9625fd3 100644
--- a/lib/ansible/modules/cloud/vmware/vmware_guest.py
+++ b/lib/ansible/modules/cloud/vmware/vmware_guest.py
@@ -1293,7 +1293,16 @@ class PyVmomiHelper(PyVmomi):
 
         # abort if no strategy was successful
         if f_obj is None:
-            self.module.fail_json(msg='No folder matched the path: %(folder)s' % self.params)
+            # Add some debugging values in failure.
+            details = {
+                'datacenter': datacenter.name,
+                'datacenter_path': dcpath,
+                'folder': self.params['folder'],
+                'full_search_path': fullpath,
+            }
+            self.module.fail_json(msg='No folder %s matched in the search path : %s' % (self.params['folder'], fullpath),
+                                  details=details)
+
         destfolder = f_obj
 
         if self.params['template']:
