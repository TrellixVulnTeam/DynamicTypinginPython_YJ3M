commit 2f9470ec1d3d03feec67afd5a9f38f1d52d8ea1f
Author: Serge van Ginderachter <serge@vanginderachter.be>
Date:   Mon Nov 25 15:31:56 2013 +0100

    synchronize: allow ansible_ssh_host to be templated
    
    This is already enabled in the runner also.

diff --git a/lib/ansible/runner/action_plugins/synchronize.py b/lib/ansible/runner/action_plugins/synchronize.py
index 004deded22..7e27add804 100644
--- a/lib/ansible/runner/action_plugins/synchronize.py
+++ b/lib/ansible/runner/action_plugins/synchronize.py
@@ -69,6 +69,8 @@ class ActionModule(object):
         # from the perspective of the rsync call the delegate is the localhost
         src_host = '127.0.0.1'
         dest_host = inject.get('ansible_ssh_host', inject['inventory_hostname'])
+        # allow ansible_ssh_host to be templated
+        dest_host = template.template(self.runner.basedir, dest_host, inject, fail_on_undefined=True)
 
         # edge case: explicit delegate and dest_host are the same
         if dest_host == inject['delegate_to']:
