commit 805f768dab8e01dcad91ea11f571a70b8ab64f79
Author: Yannig Perr√© <yannig.perre@gmail.com>
Date:   Mon Nov 2 07:57:44 2015 +0100

    Clear cache when updating template variables.

diff --git a/lib/ansible/template/__init__.py b/lib/ansible/template/__init__.py
index 165b9e0e96..eded032c7c 100644
--- a/lib/ansible/template/__init__.py
+++ b/lib/ansible/template/__init__.py
@@ -260,6 +260,8 @@ class Templar:
 
         assert isinstance(variables, dict)
         self._available_variables = variables.copy()
+        # Clearing cache
+        self._cached_result       = {}
 
     def template(self, variable, convert_bare=False, preserve_trailing_newlines=True, escape_backslashes=True, fail_on_undefined=None, overrides=None, convert_data=True):
         '''
