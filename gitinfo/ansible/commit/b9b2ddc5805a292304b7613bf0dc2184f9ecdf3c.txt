commit b9b2ddc5805a292304b7613bf0dc2184f9ecdf3c
Author: Gon√©ri Le Bouder <goneri@lebouder.net>
Date:   Tue Jan 14 14:13:07 2020 -0500

    prepare_vmware_tests: no waiting loop during DS probing
    
    For a refresh of the datastore list on the vcenter, this before we
    check the present of the newly attached datastores.
    
    A lot of tests depend on the presence of the DS, and this little
    change allow us to save =~ 45s everytime.

diff --git a/test/integration/targets/prepare_vmware_tests/tasks/setup_datastore.yml b/test/integration/targets/prepare_vmware_tests/tasks/setup_datastore.yml
index ecdd840d86..5a62816016 100644
--- a/test/integration/targets/prepare_vmware_tests/tasks/setup_datastore.yml
+++ b/test/integration/targets/prepare_vmware_tests/tasks/setup_datastore.yml
@@ -27,6 +27,10 @@
     validate_certs: no
   with_items: "{{ esxi_hosts }}"
 
+- vmware_host_scanhba:
+    refresh_storage: true
+    cluster_name: '{{ ccr1 }}'
+
 - name: The vcenter needs a bit of time to refresh the DS list
   vmware_datastore_info:
     validate_certs: false
