commit 8f296a6533dd8c10e80b04de8495be3140a94c66
Author: Sam Doran <sdoran@redhat.com>
Date:   Mon Feb 10 19:29:47 2020 -0500

    ansible-test - add constraint for virtualenv (#67289)
    
    * ansible-test - add constraint for virtualenv
    
    * Limit virtualenv only on macOS.
    
    Co-authored-by: Matt Clay <matt@mystile.com>

diff --git a/changelogs/fragments/ansible-test-constraints-virtualenv.yml b/changelogs/fragments/ansible-test-constraints-virtualenv.yml
new file mode 100644
index 0000000000..5376448cb4
--- /dev/null
+++ b/changelogs/fragments/ansible-test-constraints-virtualenv.yml
@@ -0,0 +1,2 @@
+bugfixes:
+  - ansible-test - Use ``virtualenv`` versions before 20 on provisioned macOS instances to remain compatible with an older pip install.
diff --git a/test/lib/ansible_test/_data/setup/remote.sh b/test/lib/ansible_test/_data/setup/remote.sh
index ea6f912d4c..8a4d6c2d35 100644
--- a/test/lib/ansible_test/_data/setup/remote.sh
+++ b/test/lib/ansible_test/_data/setup/remote.sh
@@ -73,7 +73,7 @@ elif [ "${platform}" = "rhel" ]; then
 elif [ "${platform}" = "osx" ]; then
     while true; do
         pip install --disable-pip-version-check --quiet \
-            virtualenv \
+            'virtualenv<20' \
         && break
         echo "Failed to install packages. Sleeping before trying again..."
         sleep 10
