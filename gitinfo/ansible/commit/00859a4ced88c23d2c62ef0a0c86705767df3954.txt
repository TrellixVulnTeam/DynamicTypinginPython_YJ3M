commit 00859a4ced88c23d2c62ef0a0c86705767df3954
Author: Jake Morrison <jake@cogini.com>
Date:   Fri Dec 16 13:28:06 2016 +0800

    Handle inability to read /proc for ansible_service_mgr. Fixes #18957

diff --git a/lib/ansible/module_utils/facts.py b/lib/ansible/module_utils/facts.py
index ed01637b2f..98e466ecbf 100644
--- a/lib/ansible/module_utils/facts.py
+++ b/lib/ansible/module_utils/facts.py
@@ -335,6 +335,10 @@ class Facts(object):
             if re.match(r' *[0-9]+ ', proc_1):
                 proc_1 = None
 
+        # The ps command above may return "COMMAND" if the user cannot read /proc, e.g. with grsecurity
+        if proc_1 == "COMMAND\n":
+            proc_1 = None
+
         if proc_1 is not None:
             proc_1 = os.path.basename(proc_1)
             proc_1 = to_native(proc_1)
