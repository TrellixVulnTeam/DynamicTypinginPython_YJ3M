commit 4551965af168f9762d33409e4c06c1b88ce59999
Author: Felix Fontein <felix@fontein.de>
Date:   Sat Aug 24 00:30:28 2019 +0200

    ACME modules: bump test container version (#61192)
    
    * Fix root cert path.
    
    * Bump testing container version.
    
    * Improve check (needed due to letsencrypt/pebble#257).

diff --git a/test/integration/targets/acme_inspect/tests/validate.yml b/test/integration/targets/acme_inspect/tests/validate.yml
index 456ffdc045..a45b512f30 100644
--- a/test/integration/targets/acme_inspect/tests/validate.yml
+++ b/test/integration/targets/acme_inspect/tests/validate.yml
@@ -22,7 +22,7 @@
     - account_creation.headers.status == 201
     - "'location' in account_creation.headers"
     - account_creation.output_json.status == 'valid'
-    - not account_creation.output_json.contact
+    - not (account_creation.output_json.contact | default([]))
     - account_creation.output_text | from_json == account_creation.output_json
 
 - name: Check account get output
diff --git a/test/integration/targets/setup_acme/tasks/obtain-cert.yml b/test/integration/targets/setup_acme/tasks/obtain-cert.yml
index b87f90b5b5..08f3e5251d 100644
--- a/test/integration/targets/setup_acme/tasks/obtain-cert.yml
+++ b/test/integration/targets/setup_acme/tasks/obtain-cert.yml
@@ -134,6 +134,6 @@
   when: "challenge_data is changed and challenge == 'tls-alpn-01'"
 - name: ({{ certgen_title }}) Get root certificate
   get_url:
-    url: "http://{{ acme_host }}:5000/root-certificate-for-ca"
+    url: "http://{{ acme_host }}:5000/root-certificate-for-ca/0"
     dest: "{{ output_dir }}/{{ certificate_name }}-root.pem"
 ###############################################################################################
diff --git a/test/lib/ansible_test/_internal/cloud/acme.py b/test/lib/ansible_test/_internal/cloud/acme.py
index 770dc307da..0fb3b860c3 100644
--- a/test/lib/ansible_test/_internal/cloud/acme.py
+++ b/test/lib/ansible_test/_internal/cloud/acme.py
@@ -45,7 +45,7 @@ class ACMEProvider(CloudProvider):
         if os.environ.get('ANSIBLE_ACME_CONTAINER'):
             self.image = os.environ.get('ANSIBLE_ACME_CONTAINER')
         else:
-            self.image = 'quay.io/ansible/acme-test-container:1.6.0'
+            self.image = 'quay.io/ansible/acme-test-container:1.7.0'
         self.container_name = ''
 
     def _wait_for_service(self, protocol, acme_host, port, local_part, name):
