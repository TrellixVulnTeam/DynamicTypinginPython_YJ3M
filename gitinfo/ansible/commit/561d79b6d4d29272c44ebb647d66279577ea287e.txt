commit 561d79b6d4d29272c44ebb647d66279577ea287e
Author: Gavin McDonald <me@gavitron.com>
Date:   Wed Jun 5 17:10:26 2013 -0700

    quick and dirty fix for irc module - shadowIRCd discards unbuffered
    input, and the extra channel hash on join wasn't helping either.

diff --git a/library/notification/irc b/library/notification/irc
index 84a0a71c00..4dfd9b4fa7 100644
--- a/library/notification/irc
+++ b/library/notification/irc
@@ -76,6 +76,7 @@ local_action: irc port=6669
 # IRC module support methods.
 #
 
+from time import sleep
 import socket
 
 def send_msg(channel, msg, server='localhost', port='6667',
@@ -101,10 +102,13 @@ def send_msg(channel, msg, server='localhost', port='6667',
     irc.connect( ( server, int(port) ) )
     irc.send( 'NICK %s\r\n' % nick )
     irc.send( 'USER %s %s %s :ansible IRC\r\n' % (nick, nick, nick))
-    irc.send( 'JOIN #%s\r\n' % channel )
+    time.sleep(1)
+    irc.send( 'JOIN %s\r\n' % channel )
     irc.send( 'PRIVMSG %s :%s\r\n' % (channel, message))
+    time.sleep(1)
     irc.send( 'PART %s\r\n' % channel)
     irc.send( 'QUIT\r\n' )
+    time.sleep(1)
     irc.close()
 
 # ===========================================
