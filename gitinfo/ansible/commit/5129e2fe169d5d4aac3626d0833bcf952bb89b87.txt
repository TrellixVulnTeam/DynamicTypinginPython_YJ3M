commit 5129e2fe169d5d4aac3626d0833bcf952bb89b87
Author: Brian Coca <bcoca@ansible.com>
Date:   Wed Nov 16 20:56:40 2016 -0500

    added fail_if_missing shared service function

diff --git a/lib/ansible/module_utils/service.py b/lib/ansible/module_utils/service.py
index 635b4272de..b0d8ee33cf 100644
--- a/lib/ansible/module_utils/service.py
+++ b/lib/ansible/module_utils/service.py
@@ -45,3 +45,6 @@ def get_sysv_script(name):
 def sysv_exists(name):
     return os.path.exists(get_sysv_script(name))
 
+def fail_if_missing(module, found, service):
+    if not found:
+        module.fail_json(msg='Could not find the requested service %s' % (service))
