commit cd39bdd11d2ca061ade4f410b40d7d89e95abbe4
Author: Rene Moser <mail@renemoser.net>
Date:   Fri Sep 11 19:04:41 2015 +0200

    cloudstack: cs_account re-factor error handling state=present

diff --git a/lib/ansible/modules/extras/cloud/cloudstack/cs_account.py b/lib/ansible/modules/extras/cloud/cloudstack/cs_account.py
index b8c2f0f54e..2ffecf06fc 100644
--- a/lib/ansible/modules/extras/cloud/cloudstack/cs_account.py
+++ b/lib/ansible/modules/extras/cloud/cloudstack/cs_account.py
@@ -277,21 +277,16 @@ class AnsibleCloudStackAccount(AnsibleCloudStack):
     def present_account(self):
         missing_params = []
 
-        if not self.module.params.get('email'):
-            missing_params.append('email')
-
-        if not self.module.params.get('username'):
-            missing_params.append('username')
-
-        if not self.module.params.get('password'):
-            missing_params.append('password')
-
-        if not self.module.params.get('first_name'):
-            missing_params.append('first_name')
-
-        if not self.module.params.get('last_name'):
-            missing_params.append('last_name')
-
+        missing_params = []
+        for required_params in [
+            'email',
+            'username',
+            'password',
+            'first_name',
+            'last_name',
+        ]:
+            if not self.module.params.get(required_params):
+                missing_params.append(required_params)
         if missing_params:
             self.module.fail_json(msg="missing required arguments: %s" % ','.join(missing_params))
 
