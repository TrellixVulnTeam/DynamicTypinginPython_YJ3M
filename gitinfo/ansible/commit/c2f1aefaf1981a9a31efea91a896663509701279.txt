commit c2f1aefaf1981a9a31efea91a896663509701279
Author: Jeroen Hoekx <jeroen.hoekx@hamok.be>
Date:   Tue Apr 24 15:56:46 2012 +0200

    Expand user in SSH identity file.

diff --git a/lib/ansible/connection.py b/lib/ansible/connection.py
index 01bf45bbc9..85a004864c 100644
--- a/lib/ansible/connection.py
+++ b/lib/ansible/connection.py
@@ -99,7 +99,7 @@ class ParamikoConnection(object):
         if 'user' in credentials:
             user = credentials['user']
         if 'identityfile' in credentials:
-            keypair = credentials['identityfile']
+            keypair = os.path.expanduser(credentials['identityfile'])
 
         ssh = paramiko.SSHClient()
         ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
