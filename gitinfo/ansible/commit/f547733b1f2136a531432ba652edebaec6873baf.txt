commit f547733b1f2136a531432ba652edebaec6873baf
Author: James Cammarata <jimi@sngx.net>
Date:   Tue Apr 15 15:03:52 2014 -0500

    Check to make sure the firewalld client is connected before proceeding
    
    Fixes #6911

diff --git a/library/system/firewalld b/library/system/firewalld
index 62c90d0656..22db165aad 100644
--- a/library/system/firewalld
+++ b/library/system/firewalld
@@ -85,8 +85,13 @@ try:
 
     from firewall.client import FirewallClient
     fw = FirewallClient()
+    if not fw.connected:
+        raise Exception('failed to connect to the firewalld daemon')
 except ImportError:
-    print "fail=True msg='firewalld required for this module'"
+    print "failed=True msg='firewalld required for this module'"
+    sys.exit(1)
+except Exception, e:
+    print "failed=True msg='%s'" % str(e)
     sys.exit(1)
 
 ################
