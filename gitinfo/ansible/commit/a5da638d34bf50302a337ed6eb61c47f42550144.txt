commit a5da638d34bf50302a337ed6eb61c47f42550144
Author: Artem Zinenko <banan4eg@gmail.com>
Date:   Wed Mar 29 21:29:27 2017 +0300

    Fix #22126 (#22128)

diff --git a/lib/ansible/modules/windows/win_get_url.ps1 b/lib/ansible/modules/windows/win_get_url.ps1
index 76a2389a8e..bc1b669d0e 100644
--- a/lib/ansible/modules/windows/win_get_url.ps1
+++ b/lib/ansible/modules/windows/win_get_url.ps1
@@ -81,6 +81,14 @@ Else {
 
     Try {
         $webRequest = [System.Net.HttpWebRequest]::Create($url)
+        if ($proxy_url) {
+          $proxy_server = New-Object System.Net.WebProxy($proxy_url, $true)
+          if ($proxy_username -and $proxy_password) {
+            $proxy_credential = New-Object System.Net.NetworkCredential($proxy_username, $proxy_password)
+            $proxy_server.Credentials = $proxy_credential
+          }
+          $webRequest.Proxy = $proxy_server
+        }
 
         if($username -and $password){
             $webRequest.Credentials = New-Object System.Net.NetworkCredential($username, $password)
