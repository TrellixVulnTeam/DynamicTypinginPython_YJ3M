commit 750adbaa270bca5a63f443808a7b8ddc2a026d9a
Author: James Cammarata <jimi@sngx.net>
Date:   Fri Dec 4 12:48:56 2015 -0500

    Changing up how host (in)equality is checked
    
    Fixes #13397

diff --git a/lib/ansible/inventory/dir.py b/lib/ansible/inventory/dir.py
index e4f7ee80f9..e716987fd5 100644
--- a/lib/ansible/inventory/dir.py
+++ b/lib/ansible/inventory/dir.py
@@ -205,7 +205,7 @@ class InventoryDirectory(object):
         # because the __eq__/__ne__ methods in Host() compare the
         # name fields rather than references, we use id() here to
         # do the object comparison for merges
-        if id(self.hosts[host.name]) != id(host):
+        if self.hosts[host.name] != host:
             # different object, merge
             self._merge_hosts(self.hosts[host.name], host)
 
diff --git a/lib/ansible/inventory/host.py b/lib/ansible/inventory/host.py
index a561b951b4..a433463fa1 100644
--- a/lib/ansible/inventory/host.py
+++ b/lib/ansible/inventory/host.py
@@ -38,7 +38,7 @@ class Host:
     def __eq__(self, other):
         if not isinstance(other, Host):
             return False
-        return self.name == other.name
+        return id(self) == id(other)
 
     def __ne__(self, other):
         return not self.__eq__(other)
diff --git a/test/units/inventory/test_host.py b/test/units/inventory/test_host.py
index 078d4321b5..5c0945f7b4 100644
--- a/test/units/inventory/test_host.py
+++ b/test/units/inventory/test_host.py
@@ -29,9 +29,7 @@ class TestHost(unittest.TestCase):
     def test_equality(self):
         self.assertEqual(self.hostA, self.hostA)
         self.assertNotEqual(self.hostA, self.hostB)
-        self.assertEqual(self.hostA, Host('a'))
-        # __ne__ is a separate method
-        self.assertFalse(self.hostA != Host('a'))
+        self.assertNotEqual(self.hostA, Host('a'))
 
     def test_hashability(self):
         # equality implies the hash values are the same
