commit 095ec760ac0b9706e82e0e825568656b22294742
Author: James Tanner <tanner.jc@gmail.com>
Date:   Tue Apr 19 22:41:46 2016 -0400

    Provide a warning if the play or the task attempts to pass environment to the raw module.
    
    Addresses ansible-modules-core/issues/32

diff --git a/lib/ansible/plugins/action/raw.py b/lib/ansible/plugins/action/raw.py
index a76e6d6c3c..4774b3ade5 100644
--- a/lib/ansible/plugins/action/raw.py
+++ b/lib/ansible/plugins/action/raw.py
@@ -26,6 +26,11 @@ class ActionModule(ActionBase):
     def run(self, tmp=None, task_vars=None):
         if task_vars is None:
             task_vars = dict()
+        else:
+            if 'vars' in task_vars:
+                if 'environment' in task_vars['vars']:
+                    # The environment key only exists if explicitly declared in the task or in the play
+                    self._display.warning('raw module does not support the environment keyword')
 
         result = super(ActionModule, self).run(tmp, task_vars)
 
