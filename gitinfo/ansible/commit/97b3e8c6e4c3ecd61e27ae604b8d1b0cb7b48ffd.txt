commit 97b3e8c6e4c3ecd61e27ae604b8d1b0cb7b48ffd
Author: Paul Armstrong <github@otoh.org>
Date:   Wed Jul 2 23:13:29 2014 +0000

    Fix for #7368 breaks peering connections. Unreak them.

diff --git a/library/cloud/ec2_vpc b/library/cloud/ec2_vpc
index 5383f3892c..12aa84ebcf 100644
--- a/library/cloud/ec2_vpc
+++ b/library/cloud/ec2_vpc
@@ -422,8 +422,10 @@ def create_vpc(module, vpc_conn):
                             '(igw) route, but you have no Internet Gateway'
                         )
                     route_kwargs['gateway_id'] = igw.id
-                else:
+                elif route['gw'].startswith('i-'):
                     route_kwargs['instance_id'] = route['gw']
+                else:
+                    route_kwargs['gateway_id'] = route['gw']
                 vpc_conn.create_route(new_rt.id, route['dest'], **route_kwargs)
 
             # Associate with subnets
