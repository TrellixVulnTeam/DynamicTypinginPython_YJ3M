commit 7e279f972e832d24cb6121667aee6cda57c7f9fc
Author: Will Thames <will@thames.id.au>
Date:   Tue Jul 31 16:21:24 2012 +1000

    Use sudo_user as an argument in the sudo command

diff --git a/lib/ansible/runner/connection/local.py b/lib/ansible/runner/connection/local.py
index 1779ffb45c..c1aeb78c52 100644
--- a/lib/ansible/runner/connection/local.py
+++ b/lib/ansible/runner/connection/local.py
@@ -42,7 +42,7 @@ class LocalConnection(object):
                 # to do so.  The primary usage of the local connection is for crontab and kickstart usage however
                 # so this doesn't seem to be a huge priority
                 raise errors.AnsibleError("sudo with password is presently only supported on the paramiko (SSH) connection type")
-            cmd = "sudo -s %s" % cmd
+            cmd = "sudo -u {0} -s {1}".format(sudo_user, cmd)
 
         p = subprocess.Popen(cmd, shell=True, stdin=None,
                              stdout=subprocess.PIPE, stderr=subprocess.PIPE)
