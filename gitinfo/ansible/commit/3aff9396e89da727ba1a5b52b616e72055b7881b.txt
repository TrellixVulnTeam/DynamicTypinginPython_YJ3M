commit 3aff9396e89da727ba1a5b52b616e72055b7881b
Author: Sundar Raman <cybertoast@gmail.com>
Date:   Wed Aug 15 19:22:05 2012 -0400

    (Re #882) Handle errors in get_interfaces
    
    If there is an error in how interfaces are configured (or only one set, like IPv6),
    the setup command should not error out.

diff --git a/library/setup b/library/setup
index 60a36f8191..8f439a5794 100755
--- a/library/setup
+++ b/library/setup
@@ -467,6 +467,10 @@ class LinuxNetwork(Network):
         interface = dict(v4 = {}, v6 = {})
         for v in 'v4', 'v6':
             output = subprocess.Popen(command[v], stdout=subprocess.PIPE).communicate()[0]
+            if not output:
+                # v6 routing may result in 
+                #   RTNETLINK answers: Invalid argument
+                continue
             words = output.split('\n')[0].split()
             # A valid output starts with the queried address on the first line
             if words[0] == command[v][-1]:
