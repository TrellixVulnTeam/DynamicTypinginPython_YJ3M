commit 44c2fae80571a6bd4798a69262cb7a5d80f1584c
Author: chrisalbright <calbright@gmail.com>
Date:   Wed Oct 30 17:27:02 2013 -0700

    pip module: fix unexpected behavior when creating virtualenvs
    
    This module supports `virtualenv_site_packages` as an option to control whether or not to include system packages when installing pip packages into a virtual environment.
    
    The default is no, and when you say yes it explicitly it includes a flag to include site packages, otherwise it doesn't provide a flag.
    
    Some versions of virtualenv by default include site packages and other versions by default do not.
    
    This patch just makes both branches explicit, so `virtualenv_site_packages=no` really means no.

diff --git a/library/packaging/pip b/library/packaging/pip
index 2b03a73207..7f293c5c02 100644
--- a/library/packaging/pip
+++ b/library/packaging/pip
@@ -247,7 +247,7 @@ def main():
             if module.params['virtualenv_site_packages']:
                 cmd = '%s --system-site-packages %s' % (virtualenv, env)
             else:
-                cmd = '%s %s' % (virtualenv, env)
+                cmd = '%s --no-site-packages %s' % (virtualenv, env)
             os.chdir(tempfile.gettempdir())
             if chdir:
                 os.chdir(chdir)
