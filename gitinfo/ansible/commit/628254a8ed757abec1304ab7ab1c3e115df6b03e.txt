commit 628254a8ed757abec1304ab7ab1c3e115df6b03e
Author: Adam Garside <adam.garside@gmail.com>
Date:   Wed May 15 10:37:45 2013 -0400

    Typo fixes, tighter error handling, corrected check mode support

diff --git a/library/notification/campfire b/library/notification/campfire
index 4ba0b2cbf1..348d9aa910 100644
--- a/library/notification/campfire
+++ b/library/notification/campfire
@@ -78,7 +78,7 @@ def main():
                                  "tada", "tmyk", "trombone", "vuvuzela",
                                  "yeah", "yodel"]),
         ),
-        supports_check_mode=True
+        supports_check_mode=False
     )
 
     subscription = module.params["subscription"]
@@ -117,8 +117,14 @@ def main():
         req.add_header('User-agent', AGENT)
         response = opener.open(req)
 
+    except urllib2.HTTPError, e:
+        if not (200 <= e.code < 300):
+            module.fail_json(msg="unable to send msg: '%s', campfire api"
+                                 " returned error code: '%s'" %
+                                 (msg, e.code))
+
     except Exception, e:
-        module.fail_json(msg="unable to sent msg: %s" % e)
+        module.fail_json(msg="unable to send msg: %s" % msg)
 
     module.exit_json(changed=True, room=room, msg=msg, notify=notify)
 
