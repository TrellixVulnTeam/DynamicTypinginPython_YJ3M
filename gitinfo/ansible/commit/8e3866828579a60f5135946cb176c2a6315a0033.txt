commit 8e3866828579a60f5135946cb176c2a6315a0033
Author: Zim Kalinowski <zikalino@microsoft.com>
Date:   Wed May 23 12:49:04 2018 +0800

    fixing disabled azure sanity tests (#40519)
    
    * fixing azure sanity tests
    
    * fixing sanity
    
    * fixing some tags issues
    
    * removed unnecessary things from managed disk
    
    * fixed location problem
    
    * more sanity fixes
    
    * sanity test fixes
    
    * final sanity fixes?
    
    * final fixes again
    
    * undo changes related to container instance
    
    * removed container instance
    
    * readd again
    
    * fixed stupid mistake
    
    * removed _azure from changes
    
    * one more mistake

diff --git a/lib/ansible/modules/cloud/azure/azure_rm_acs.py b/lib/ansible/modules/cloud/azure/azure_rm_acs.py
index 78e53e4a12..0c811512df 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_acs.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_acs.py
@@ -39,10 +39,13 @@ options:
     location:
         description:
             - Valid azure location. Defaults to location of the resource group.
-        default: resource_group location
     orchestration_platform:
         description:
             - Specifies the Container Orchestration Platform to use. Currently can be either DCOS, Kubernetes or Swarm.
+        choices:
+            - 'DCOS'
+            - 'Kubernetes'
+            - 'Swarm'
         required: true
     master_profile:
         description:
@@ -116,6 +119,7 @@ options:
         description:
             - Should VM Diagnostics be enabled for the Container Service VM's.
         required: true
+        type: bool
 
 extends_documentation_fragment:
     - azure
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_availabilityset.py b/lib/ansible/modules/cloud/azure/azure_rm_availabilityset.py
index cda963aa3a..2789384ecd 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_availabilityset.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_availabilityset.py
@@ -45,7 +45,6 @@ options:
     location:
         description:
             - Valid azure location. Defaults to location of the resource group.
-        default: resource_group location
         required: false
     platform_update_domain_count:
         description:
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_availabilityset_facts.py b/lib/ansible/modules/cloud/azure/azure_rm_availabilityset_facts.py
index 18d19378f4..b755dc6323 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_availabilityset_facts.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_availabilityset_facts.py
@@ -29,6 +29,10 @@ options:
     resource_group:
         description:
             - The resource group to search for the desired availability set
+    tags:
+        description:
+            - List of tags to be matched
+        version_added: 2.6
 
 extends_documentation_fragment:
     - azure
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_containerregistry.py b/lib/ansible/modules/cloud/azure/azure_rm_containerregistry.py
index 7f97610a3e..3fe8a65687 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_containerregistry.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_containerregistry.py
@@ -38,7 +38,6 @@ options:
     location:
         description:
             - Valid azure location. Defaults to location of the resource group.
-        default: resource_group location
     admin_user_enabled:
         description:
             - If enabled, you can use the registry name as username and admin user access key as password to docker login to your container registry.
@@ -235,7 +234,7 @@ class AzureRMContainerRegistry(AzureRMModuleBase):
             sku=dict(
                 type='str',
                 required=False,
-                default='Basic',
+                default='Standard',
                 choices=['Basic', 'Standard', 'Premium']
             )
         )
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_deployment.py b/lib/ansible/modules/cloud/azure/azure_rm_deployment.py
index eb46fc6f40..69a7dac879 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_deployment.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_deployment.py
@@ -30,6 +30,8 @@ options:
     description:
       - The resource group name to use or create to host the deployed template
     required: true
+    aliases:
+      - resource_group
   location:
     description:
       - The geo-locations in which the resource group will be located.
@@ -83,6 +85,7 @@ options:
 
 extends_documentation_fragment:
     - azure
+    - azure_tags
 
 author:
     - David Justice (@devigned)
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset.py b/lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset.py
index 7530aa118e..7268d04110 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset.py
@@ -90,6 +90,7 @@ options:
 
 extends_documentation_fragment:
     - azure
+    - azure_tags
 
 author:
     - "Obezimnaka Boms (@ozboms)"
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset_facts.py b/lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset_facts.py
index 42a16c7fab..936c4049f0 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset_facts.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset_facts.py
@@ -42,6 +42,7 @@ options:
 
 extends_documentation_fragment:
     - azure
+    - azure_tags
 
 author:
     - "Ozi Boms @ozboms"
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_functionapp.py b/lib/ansible/modules/cloud/azure/azure_rm_functionapp.py
index 57fb9f4a67..8f5003ab8a 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_functionapp.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_functionapp.py
@@ -25,10 +25,28 @@ options:
         description:
             - Name of resource group
         required: true
+        aliases:
+            - resource_group_name
     name:
         description:
             - Name of the Azure Function App
         required: true
+    location:
+        description:
+            - Valid Azure location. Defaults to location of the resource group.
+        version_added: 2.6
+    storage_account:
+        description:
+            - Name of the storage account to use.
+        required: true
+        aliases:
+            - storage
+            - storage_account_name
+        version_added: 2.6
+    app_settings:
+        description:
+            - Dictionary containing application settings
+        version_added: 2.6
     state:
         description:
             - Assert the state of the Function App. Use 'present' to create or update a Function App and
@@ -41,6 +59,7 @@ options:
 
 extends_documentation_fragment:
     - azure
+    - azure_tags
 
 author:
     - "Thomas Stringer (@tstringer)"
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_loadbalancer.py b/lib/ansible/modules/cloud/azure/azure_rm_loadbalancer.py
index 8b2ebebd85..2c713521dc 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_loadbalancer.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_loadbalancer.py
@@ -42,7 +42,6 @@ options:
     location:
         description:
             - Valid azure location. Defaults to location of the resource group.
-        default: resource_group location
     sku:
         description:
             The load balancer SKU.
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_managed_disk.py b/lib/ansible/modules/cloud/azure/azure_rm_managed_disk.py
index d395c92f05..454876f485 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_managed_disk.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_managed_disk.py
@@ -43,7 +43,6 @@ options:
     location:
         description:
             - Valid Azure location. Defaults to location of the resource group.
-        default: resource_group location
     storage_account_type:
         description:
             - "Type of storage for the managed disk: C(Standard_LRS)  or C(Premium_LRS). If not specified the disk is created C(Standard_LRS)."
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_managed_disk_facts.py b/lib/ansible/modules/cloud/azure/azure_rm_managed_disk_facts.py
index 89ae3236dc..9eda39e46d 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_managed_disk_facts.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_managed_disk_facts.py
@@ -47,6 +47,7 @@ options:
 
 extends_documentation_fragment:
     - azure
+    - azure_tags
 
 author:
     - "Bruno Medina (@brusMX)"
@@ -112,34 +113,6 @@ class AzureRMManagedDiskFacts(AzureRMModuleBase):
                 type='str',
                 required=False
             ),
-            state=dict(
-                type='str',
-                required=False,
-                default='present',
-                choices=['present', 'absent']
-            ),
-            location=dict(
-                type='str',
-                required=False
-            ),
-            storage_account_type=dict(
-                type='str',
-                required=False,
-                choices=['Standard_LRS', 'Premium_LRS']
-            ),
-            os_type=dict(
-                type='str',
-                required=False,
-                choices=['linux', 'windows']
-            ),
-            disk_size_gb=dict(
-                type='int',
-                required=False
-            ),
-            managed_by=dict(
-                type='str',
-                required=False
-            ),
             tags=dict(
                 type='str',
                 required=False
@@ -152,13 +125,9 @@ class AzureRMManagedDiskFacts(AzureRMModuleBase):
         )
         self.resource_group = None
         self.name = None
-        self.location = None
-        self.storage_account_type = None
         self.create_option = None
         self.source_uri = None
         self.source_resource_uri = None
-        self.os_type = None
-        self.disk_size_gb = None
         self.tags = None
         super(AzureRMManagedDiskFacts, self).__init__(
             derived_arg_spec=self.module_arg_spec,
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_mysqldatabase.py b/lib/ansible/modules/cloud/azure/azure_rm_mysqldatabase.py
index 1c331a4818..9d03d36985 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_mysqldatabase.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_mysqldatabase.py
@@ -52,6 +52,14 @@ options:
             of the properties do not match.
       type: bool
       default: 'no'
+    state:
+        description:
+            - Assert the state of the MySQL Database. Use 'present' to create or update a database and 'absent' to delete it.
+        default: present
+        choices:
+            - absent
+            - present
+        version_added: 2.6
 
 extends_documentation_fragment:
     - azure
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_mysqlserver.py b/lib/ansible/modules/cloud/azure/azure_rm_mysqlserver.py
index a6c0a69694..281eb23dab 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_mysqlserver.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_mysqlserver.py
@@ -68,6 +68,19 @@ options:
     admin_password:
         description:
             - The password of the administrator login.
+    create_mode:
+        description:
+            - Create mode of SQL Server
+        default: Default
+        version_added: 2.6
+    state:
+        description:
+            - Assert the state of the MySQL Server. Use 'present' to create or update a server and 'absent' to delete it.
+        default: present
+        choices:
+            - absent
+            - present
+        version_added: 2.6
 
 extends_documentation_fragment:
     - azure
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_networkinterface.py b/lib/ansible/modules/cloud/azure/azure_rm_networkinterface.py
index caf327fcd4..042f9421e2 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_networkinterface.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_networkinterface.py
@@ -50,7 +50,6 @@ options:
     location:
         description:
             - Valid azure location. Defaults to location of the resource group.
-        default: resource_group location
         required: false
     virtual_network_resource_group:
         description:
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_postgresqldatabase.py b/lib/ansible/modules/cloud/azure/azure_rm_postgresqldatabase.py
index c0b7e5e122..18f64f2c20 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_postgresqldatabase.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_postgresqldatabase.py
@@ -52,6 +52,14 @@ options:
             of the properties do not match.
       type: bool
       default: 'no'
+    state:
+        description:
+            - Assert the state of the PostgreSQL database. Use 'present' to create or update a database and 'absent' to delete it.
+        default: present
+        choices:
+            - absent
+            - present
+        version_added: 2.6
 
 extends_documentation_fragment:
     - azure
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_postgresqlserver.py b/lib/ansible/modules/cloud/azure/azure_rm_postgresqlserver.py
index bc0b5322fc..b719a1d5af 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_postgresqlserver.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_postgresqlserver.py
@@ -68,6 +68,19 @@ options:
     admin_password:
         description:
             - The password of the administrator login.
+    create_mode:
+        description:
+            - Create mode of SQL Server
+        default: Default
+        version_added: 2.6
+    state:
+        description:
+            - Assert the state of the PostgreSQL server. Use 'present' to create or update a server and 'absent' to delete it.
+        default: present
+        choices:
+            - present
+            - absent
+        version_added: 2.6
 
 extends_documentation_fragment:
     - azure
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_publicipaddress.py b/lib/ansible/modules/cloud/azure/azure_rm_publicipaddress.py
index 517527dc9c..8dc5639da9 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_publicipaddress.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_publicipaddress.py
@@ -39,7 +39,7 @@ options:
             - Dynamic
             - Static
         default: Dynamic
-    domain_name_label:
+    domain_name:
         description:
             - The customizable portion of the FQDN assigned to public IP address. This is an explicit setting. If
               no value is provided, any existing value will be removed on an existing public IP.
@@ -60,7 +60,6 @@ options:
     location:
         description:
             - Valid azure location. Defaults to location of the resource group.
-        default: resource_group location
     sku:
         description:
             - The public IP address SKU.
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_securitygroup.py b/lib/ansible/modules/cloud/azure/azure_rm_securitygroup.py
index 36bc7b7e14..081fbd8557 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_securitygroup.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_securitygroup.py
@@ -34,7 +34,6 @@ options:
     location:
         description:
             - Valid azure location. Defaults to location of the resource group.
-        default: resource_group location
     name:
         description:
             - Name of the security group to operate on.
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_sqlserver.py b/lib/ansible/modules/cloud/azure/azure_rm_sqlserver.py
index cd65f234f9..71a0293597 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_sqlserver.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_sqlserver.py
@@ -46,6 +46,15 @@ options:
         description:
             - "The identity type. Set this to 'SystemAssigned' in order to automatically create and assign an Azure Active Directory principal for the resour
                ce. Possible values include: 'SystemAssigned'"
+    state:
+        description:
+            - Assert the state of the SQL server. Use 'present' to create or update a server and
+              'absent' to delete a server.
+        default: present
+        choices:
+            - absent
+            - present
+        version_added: "2.6"
 
 extends_documentation_fragment:
     - azure
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_sqlserver_facts.py b/lib/ansible/modules/cloud/azure/azure_rm_sqlserver_facts.py
index cad40ced6c..6a679a93b2 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_sqlserver_facts.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_sqlserver_facts.py
@@ -32,6 +32,7 @@ options:
 
 extends_documentation_fragment:
     - azure
+    - azure_tags
 
 author:
     - "Zim Kalinowski (@zikalino)"
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_storageaccount.py b/lib/ansible/modules/cloud/azure/azure_rm_storageaccount.py
index 91df058b00..10b3ac2735 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_storageaccount.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_storageaccount.py
@@ -42,7 +42,6 @@ options:
     location:
         description:
             - Valid azure location. Defaults to location of the resource group.
-        default: resource_group location
     account_type:
         description:
             - "Type of storage account. Required when creating a storage account. NOTE: Standard_ZRS and Premium_LRS
@@ -73,11 +72,15 @@ options:
     access_tier:
         description:
             - The access tier for this storage account. Required for a storage account of kind 'BlobStorage'.
-        default: 'Storage'
         choices:
             - Hot
             - Cool
         version_added: "2.4"
+    force:
+        description:
+            - Attempt deletion if resource already exists and cannot be updated
+        type: bool
+        version_added: "2.6"
 
 extends_documentation_fragment:
     - azure
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_storageblob.py b/lib/ansible/modules/cloud/azure/azure_rm_storageblob.py
index f813ee71b2..711ef174c9 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_storageblob.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_storageblob.py
@@ -201,10 +201,10 @@ class AzureRMStorageBlob(AzureRMModuleBase):
             blob=dict(type='str', aliases=['blob_name']),
             blob_type=dict(type='str', default='block', choices=['block', 'page']),
             container=dict(required=True, type='str', aliases=['container_name']),
-            dest=dict(type='path'),
+            dest=dict(type='path', aliases=['destination']),
             force=dict(type='bool', default=False),
             resource_group=dict(required=True, type='str', aliases=['resource_group_name']),
-            src=dict(type='str'),
+            src=dict(type='str', aliases=['source']),
             state=dict(type='str', default='present', choices=['absent', 'present']),
             public_access=dict(type='str', choices=['container', 'blob']),
             content_type=dict(type='str'),
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_subnet.py b/lib/ansible/modules/cloud/azure/azure_rm_subnet.py
index 73ac240eab..5157c13e72 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_subnet.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_subnet.py
@@ -61,6 +61,7 @@ options:
 
 extends_documentation_fragment:
     - azure
+    - azure_tags
 
 author:
     - "Chris Houseknecht (@chouseknecht)"
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine.py b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine.py
index dd082cbd07..82d3be1824 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine.py
@@ -58,13 +58,16 @@ options:
         description:
             - Use with state 'present' to start the machine. Set to false to have the machine be 'stopped'.
         default: true
+        type: bool
     allocated:
         description:
             - Toggle that controls if the machine is allocated/deallocated, only useful with state='present'.
         default: True
+        type: bool
     restarted:
         description:
             - Use with state 'present' to restart a running VM.
+        type: bool
     location:
         description:
             - Valid Azure location. Defaults to location of the resource group.
@@ -88,6 +91,7 @@ options:
             - When the os_type is Linux, setting ssh_password_enabled to false will disable SSH password authentication
               and require use of SSH keys.
         default: true
+        type: bool
     ssh_public_keys:
         description:
             - "For os_type Linux provide a list of SSH keys. Each item in the list should be a dictionary where the
@@ -118,11 +122,15 @@ options:
         description:
             - Name of an existing storage account that supports creation of VHD blobs. If not specified for a new VM,
               a new storage account named <vm name>01 will be created using storage type 'Standard_LRS'.
+        aliases:
+            - storage_account
     storage_container_name:
         description:
             - Name of the container to use within the storage account to store VHD blobs. If no name is specified a
               default container will created.
         default: vhds
+        aliases:
+            - storage_container
     storage_blob_name:
         description:
             - Name fo the storage blob used to hold the VM's OS disk image. If no name is provided, defaults to
@@ -151,8 +159,7 @@ options:
         choices:
             - Windows
             - Linux
-        default:
-            - Linux
+        default: Linux
     data_disks:
         description:
             - Describes list of data disks.
@@ -208,8 +215,7 @@ options:
             - Dynamic
             - Static
             - Disabled
-        default:
-            - Static
+        default: Static
         aliases:
             - public_ip_allocation
     open_ports:
@@ -223,6 +229,8 @@ options:
             - List of existing network interface names to add to the VM. If a network interface name is not provided
               when the VM is created, a default network interface will be created. In order for the module to create
               a network interface, at least one Virtual Network with one Subnet must exist.
+        aliases:
+            - network_interfaces
     virtual_network_resource_group:
         description:
             - When creating a virtual machine, if a specific virtual network from another resource group should be
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_extension.py b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_extension.py
index d392a7484b..401ea8c0a9 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_extension.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_extension.py
@@ -45,7 +45,6 @@ options:
     location:
         description:
             - Valid azure location. Defaults to location of the resource group.
-        default: resource_group location
         required: false
     virtual_machine_name:
         description:
@@ -75,6 +74,7 @@ options:
         description:
             - Whether the extension handler should be automatically upgraded across minor versions.
         required: false
+        type: bool
 
 extends_documentation_fragment:
     - azure
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset.py b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset.py
index 25b9da0fe4..4a1078e945 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset.py
@@ -47,6 +47,10 @@ options:
     location:
         description:
             - Valid Azure location. Defaults to location of the resource group.
+    short_hostname:
+        description:
+            - Short host name
+        version_added: 2.6
     vm_size:
         description:
             - A valid Azure VM size value. For example, 'Standard_D4'. The list of choices varies depending on the
@@ -56,6 +60,7 @@ options:
         description:
             - Capacity of VMSS.
         required: true
+        default: 1
     tier:
         description:
             - SKU Tier.
@@ -79,6 +84,7 @@ options:
         description:
             - When the os_type is Linux, setting ssh_password_enabled to false will disable SSH password authentication
               and require use of SSH keys.
+        type: bool
         default: true
     ssh_public_keys:
         description:
@@ -117,8 +123,7 @@ options:
         choices:
             - Windows
             - Linux
-        default:
-            - Linux
+        default: Linux
     managed_disk_type:
         description:
             - Managed disk type.
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset_facts.py b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset_facts.py
index 283ae459e1..c8b630863a 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset_facts.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset_facts.py
@@ -29,6 +29,10 @@ options:
     resource_group:
         description:
             - The resource group to search for the desired virtual machine scale set
+    tags:
+        description:
+            - List of tags to be matched
+        version_added: 2.6
     format:
         description:
             - Format of the data returned.
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py
index 46bd8faecc..4fb4b694cb 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py
@@ -26,9 +26,6 @@ description:
     - Get facts for virtual machine images.
 
 options:
-    name:
-        description:
-            - Only show results for a specific security group.
     location:
         description:
             - Azure location value (ie. westus, eastus, eastus2, northcentralus, etc.). Supplying only a
@@ -126,7 +123,7 @@ class AzureRMVirtualMachineImageFacts(AzureRMModuleBase):
         self.sku = None
         self.version = None
 
-        super(AzureRMVirtualMachineImageFacts, self).__init__(self.module_arg_spec)
+        super(AzureRMVirtualMachineImageFacts, self).__init__(self.module_arg_spec, supports_tags=False)
 
     def exec_module(self, **kwargs):
 
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_virtualnetwork.py b/lib/ansible/modules/cloud/azure/azure_rm_virtualnetwork.py
index 9416e78c99..b461cdd83e 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_virtualnetwork.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_virtualnetwork.py
@@ -42,7 +42,6 @@ options:
     location:
         description:
             - Valid azure location. Defaults to location of the resource group.
-        default: resource_group location
     name:
         description:
             - name of the virtual network.
@@ -52,6 +51,8 @@ options:
             - Use with state present to remove any existing address_prefixes.
         type: bool
         default: 'no'
+        aliases:
+          - purge
     purge_dns_servers:
         description:
             - Use with state present to remove existing DNS servers, reverting to default Azure servers. Mutually
diff --git a/test/sanity/validate-modules/ignore.txt b/test/sanity/validate-modules/ignore.txt
index d1cab64ab5..d621ea171b 100644
--- a/test/sanity/validate-modules/ignore.txt
+++ b/test/sanity/validate-modules/ignore.txt
@@ -145,75 +145,7 @@ lib/ansible/modules/cloud/atomic/atomic_container.py E317
 lib/ansible/modules/cloud/atomic/atomic_container.py E326
 lib/ansible/modules/cloud/azure/_azure.py E324
 lib/ansible/modules/cloud/azure/_azure.py E326
-lib/ansible/modules/cloud/azure/azure_rm_acs.py E324
-lib/ansible/modules/cloud/azure/azure_rm_acs.py E325
-lib/ansible/modules/cloud/azure/azure_rm_acs.py E326
-lib/ansible/modules/cloud/azure/azure_rm_availabilityset.py E324
-lib/ansible/modules/cloud/azure/azure_rm_availabilityset_facts.py E322
 lib/ansible/modules/cloud/azure/azure_rm_containerinstance.py E324
-lib/ansible/modules/cloud/azure/azure_rm_containerregistry.py E324
-lib/ansible/modules/cloud/azure/azure_rm_deployment.py E322
-lib/ansible/modules/cloud/azure/azure_rm_deployment.py E324
-lib/ansible/modules/cloud/azure/azure_rm_deployment.py E325
-lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset.py E322
-lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset.py E324
-lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset.py E325
-lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset_facts.py E322
-lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset_facts.py E324
-lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset_facts.py E325
-lib/ansible/modules/cloud/azure/azure_rm_functionapp.py E322
-lib/ansible/modules/cloud/azure/azure_rm_functionapp.py E324
-lib/ansible/modules/cloud/azure/azure_rm_functionapp.py E325
-lib/ansible/modules/cloud/azure/azure_rm_loadbalancer.py E324
-lib/ansible/modules/cloud/azure/azure_rm_managed_disk.py E324
-lib/ansible/modules/cloud/azure/azure_rm_managed_disk_facts.py E322
-lib/ansible/modules/cloud/azure/azure_rm_managed_disk_facts.py E324
-lib/ansible/modules/cloud/azure/azure_rm_managed_disk_facts.py E325
-lib/ansible/modules/cloud/azure/azure_rm_managed_disk_facts.py E326
-lib/ansible/modules/cloud/azure/azure_rm_mysqldatabase.py E322
-lib/ansible/modules/cloud/azure/azure_rm_mysqldatabase.py E324
-lib/ansible/modules/cloud/azure/azure_rm_mysqldatabase.py E326
-lib/ansible/modules/cloud/azure/azure_rm_mysqlserver.py E322
-lib/ansible/modules/cloud/azure/azure_rm_mysqlserver.py E324
-lib/ansible/modules/cloud/azure/azure_rm_mysqlserver.py E326
-lib/ansible/modules/cloud/azure/azure_rm_networkinterface.py E324
-lib/ansible/modules/cloud/azure/azure_rm_postgresqldatabase.py E322
-lib/ansible/modules/cloud/azure/azure_rm_postgresqldatabase.py E324
-lib/ansible/modules/cloud/azure/azure_rm_postgresqldatabase.py E326
-lib/ansible/modules/cloud/azure/azure_rm_postgresqlserver.py E322
-lib/ansible/modules/cloud/azure/azure_rm_postgresqlserver.py E324
-lib/ansible/modules/cloud/azure/azure_rm_postgresqlserver.py E326
-lib/ansible/modules/cloud/azure/azure_rm_publicipaddress.py E322
-lib/ansible/modules/cloud/azure/azure_rm_publicipaddress.py E324
-lib/ansible/modules/cloud/azure/azure_rm_securitygroup.py E324
-lib/ansible/modules/cloud/azure/azure_rm_sqlserver.py E322
-lib/ansible/modules/cloud/azure/azure_rm_sqlserver.py E324
-lib/ansible/modules/cloud/azure/azure_rm_sqlserver.py E326
-lib/ansible/modules/cloud/azure/azure_rm_sqlserver_facts.py E322
-lib/ansible/modules/cloud/azure/azure_rm_sqlserver_facts.py E324
-lib/ansible/modules/cloud/azure/azure_rm_sqlserver_facts.py E325
-lib/ansible/modules/cloud/azure/azure_rm_storageaccount.py E322
-lib/ansible/modules/cloud/azure/azure_rm_storageaccount.py E324
-lib/ansible/modules/cloud/azure/azure_rm_storageaccount.py E325
-lib/ansible/modules/cloud/azure/azure_rm_storageblob.py E323
-lib/ansible/modules/cloud/azure/azure_rm_subnet.py E322
-lib/ansible/modules/cloud/azure/azure_rm_subnet.py E324
-lib/ansible/modules/cloud/azure/azure_rm_subnet.py E325
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachine.py E322
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachine.py E324
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachine.py E325
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_extension.py E324
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_extension.py E325
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset.py E322
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset.py E324
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset.py E325
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset_facts.py E322
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py E322
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py E323
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py E324
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py E325
-lib/ansible/modules/cloud/azure/azure_rm_virtualnetwork.py E322
-lib/ansible/modules/cloud/azure/azure_rm_virtualnetwork.py E324
 lib/ansible/modules/cloud/centurylink/clc_alert_policy.py E317
 lib/ansible/modules/cloud/centurylink/clc_firewall_policy.py E317
 lib/ansible/modules/cloud/centurylink/clc_firewall_policy.py E324
