commit 11b55be5bbb90b2bc917b2637d6fcdbe1a15092d
Author: muffl0n <sven@schliesing.de>
Date:   Thu Aug 20 10:31:48 2015 +0200

    Show version without supplying a dummy action
    
    fixes #12004
    parsing x2 does not seem to break anything

diff --git a/lib/ansible/cli/galaxy.py b/lib/ansible/cli/galaxy.py
index 476a7d0f89..a022d17859 100644
--- a/lib/ansible/cli/galaxy.py
+++ b/lib/ansible/cli/galaxy.py
@@ -50,7 +50,7 @@ class GalaxyCLI(CLI):
 
     SKIP_INFO_KEYS = ("name", "description", "readme_html", "related", "summary_fields", "average_aw_composite", "average_aw_score", "url" )
     VALID_ACTIONS = ("delete", "import", "info", "init", "install", "list", "login", "remove", "search", "setup")
-    
+
     def __init__(self, args):
         self.api = None
         self.galaxy = None
@@ -64,6 +64,9 @@ class GalaxyCLI(CLI):
             epilog = "\nSee '%s <command> --help' for more information on a specific command.\n\n" % os.path.basename(sys.argv[0])
         )
 
+        # Workaround for #12004: show version without supplying a dummy action
+        self.parser.parse_args()
+
         self.set_action()
 
         # options specific to actions
@@ -141,7 +144,7 @@ class GalaxyCLI(CLI):
         return True
 
     def run(self):
-        
+
         super(GalaxyCLI, self).run()
 
         # if not offline, get connect to galaxy api
diff --git a/lib/ansible/cli/vault.py b/lib/ansible/cli/vault.py
index 9908f17e57..50a6fdebdc 100644
--- a/lib/ansible/cli/vault.py
+++ b/lib/ansible/cli/vault.py
@@ -53,6 +53,9 @@ class VaultCLI(CLI):
             epilog = "\nSee '%s <command> --help' for more information on a specific command.\n\n" % os.path.basename(sys.argv[0])
         )
 
+        # Workaround for #12004: show version without supplying a dummy action
+        self.parser.parse_args()
+
         self.set_action()
 
         # options specific to self.actions
