commit 35b699b99c274f21b48aa8bc41b9aa1ef7802419
Author: Rene Moser <mail@renemoser.net>
Date:   Thu Jun 9 22:54:25 2016 +0200

    cloudstack: cs_staticnat: fix static nat was always changed (disabled/enabled)
    
    Fixes firewall rules get lost after use of cs_staticnat.

diff --git a/lib/ansible/modules/extras/cloud/cloudstack/cs_staticnat.py b/lib/ansible/modules/extras/cloud/cloudstack/cs_staticnat.py
index 6c1014c48e..956b171b32 100644
--- a/lib/ansible/modules/extras/cloud/cloudstack/cs_staticnat.py
+++ b/lib/ansible/modules/extras/cloud/cloudstack/cs_staticnat.py
@@ -217,7 +217,7 @@ class AnsibleCloudStackStaticNat(AnsibleCloudStack):
 
         # make an alias, so we can use _has_changed()
         ip_address['vmguestip'] = ip_address['vmipaddress']
-        if self.has_changed(args, ip_address):
+        if self.has_changed(args, ip_address, ['vmguestip', 'virtualmachineid']):
             self.result['changed'] = True
             if not self.module.check_mode:
                 res = self.cs.disableStaticNat(ipaddressid=ip_address['id'])
