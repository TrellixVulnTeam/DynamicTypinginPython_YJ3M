commit f6353a548c32ea97b2996f42b8aa08477b63fca0
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Wed Oct 28 08:50:47 2015 -0700

    Document and return an error if httplib2 >= 0.7 is not present. We
    
    can't use httplib2 0.6.x and below because they do not verify TLS
    certificates and thus are insecure.
    
    Fixes #1875

diff --git a/lib/ansible/modules/network/basics/uri.py b/lib/ansible/modules/network/basics/uri.py
index c61b9c89bc..87eb44c448 100644
--- a/lib/ansible/modules/network/basics/uri.py
+++ b/lib/ansible/modules/network/basics/uri.py
@@ -25,6 +25,8 @@ import shutil
 import tempfile
 import base64
 import datetime
+from distutils.version import LooseVersion
+
 try:
     import json
 except ImportError:
@@ -142,7 +144,8 @@ options:
     version_added: '1.9.2'
 
 # informational: requirements for nodes
-requirements: [ urlparse, httplib2 ]
+requirements:
+  - httplib2 >= 0.7.0
 author: "Romeo Theriault (@romeotheriault)"
 '''
 
@@ -197,11 +200,15 @@ EXAMPLES = '''
 
 '''
 
-HAS_HTTPLIB2 = True
+HAS_HTTPLIB2 = False
+
 try:
     import httplib2
-except ImportError:
-    HAS_HTTPLIB2 = False
+    if LooseVersion(httplib2.__version__) >= LooseVersion('0.7'):
+        HAS_HTTPLIB2 = True
+except ImportError, AttributeError:
+    # AttributeError if __version__ is not present
+    pass
 
 HAS_URLPARSE = True
 
@@ -381,7 +388,7 @@ def main():
     )
 
     if not HAS_HTTPLIB2:
-        module.fail_json(msg="httplib2 is not installed")
+        module.fail_json(msg="httplib2 >= 0.7 is not installed")
     if not HAS_URLPARSE:
         module.fail_json(msg="urlparse is not installed")
 
