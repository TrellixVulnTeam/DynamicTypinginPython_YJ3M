commit ca5e5cfebc1ad1a7e54ba48c6caccb3b308f273c
Author: Rene Moser <mail@renemoser.net>
Date:   Fri Nov 15 13:38:32 2013 +0100

    host: fix changed is not available on fail

diff --git a/library/system/host b/library/system/host
index 0ca1de5622..c968360eb6 100644
--- a/library/system/host
+++ b/library/system/host
@@ -167,13 +167,13 @@ def main():
     result['state'] = host.state
     result['changed'] = False
 
-    err = host.validate_has_hostname_on_present()
-    if err:
-        module.fail_json(msg=err)
+    result['msg'] = host.validate_has_hostname_on_present()
+    if result['msg']:
+        module.fail_json(**result)
 
-    err = host.validate_has_ip_or_hostname_on_absent()
-    if err:
-        module.fail_json(msg=err)
+    result['msg'] = host.validate_has_ip_or_hostname_on_absent()
+    if result['msg']:
+        module.fail_json(**result)
 
     host.proceed_hosts_entries()
     if host.state == 'present':
