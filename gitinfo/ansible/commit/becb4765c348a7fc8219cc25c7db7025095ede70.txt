commit becb4765c348a7fc8219cc25c7db7025095ede70
Author: Indrajit Raychaudhuri <irc+code@indrajit.com>
Date:   Fri Sep 30 17:07:09 2016 -0500

    Add homebrew in squash_actions list (#16966)
    
    `homebrew`, like other package modules in the existing `squash_actions` list can
    benefit from `with_items` loops optimization.

diff --git a/docsite/rst/intro_configuration.rst b/docsite/rst/intro_configuration.rst
index d5506bd084..68a92abed5 100644
--- a/docsite/rst/intro_configuration.rst
+++ b/docsite/rst/intro_configuration.rst
@@ -700,7 +700,7 @@ Instead of calling the module once for each item, the module is called once with
 
 The default value for this setting is only for certain package managers, but it can be used for any module::
 
-    squash_actions = apk,apt,dnf,package,pacman,pkgng,yum,zypper
+    squash_actions = apk,apt,dnf,homebrew,package,pacman,pkgng,yum,zypper
 
 Currently, this is only supported for modules that have a name parameter, and only when the item is the
 only thing being passed to the parameter.
diff --git a/examples/ansible.cfg b/examples/ansible.cfg
index fac5181f11..1ad716f69c 100644
--- a/examples/ansible.cfg
+++ b/examples/ansible.cfg
@@ -226,7 +226,7 @@
 # when looping. Instead of calling the module once per with_ item, the
 # module is called once with all items at once. Currently this only works
 # under limited circumstances, and only with parameters named 'name'.
-#squash_actions = apk,apt,dnf,package,pacman,pkgng,yum,zypper
+#squash_actions = apk,apt,dnf,homebrew,package,pacman,pkgng,yum,zypper
 
 # prevents logging of task data, off by default
 #no_log = False
diff --git a/lib/ansible/constants.py b/lib/ansible/constants.py
index dd232fc896..32e06f4fd2 100644
--- a/lib/ansible/constants.py
+++ b/lib/ansible/constants.py
@@ -235,7 +235,7 @@ DEFAULT_BECOME_ASK_PASS   = get_config(p, 'privilege_escalation', 'become_ask_pa
 # the module takes both, bad things could happen.
 # In the future we should probably generalize this even further
 # (mapping of param: squash field)
-DEFAULT_SQUASH_ACTIONS         = get_config(p, DEFAULTS, 'squash_actions',     'ANSIBLE_SQUASH_ACTIONS', "apk, apt, dnf, package, pacman, pkgng, yum, zypper", islist=True)
+DEFAULT_SQUASH_ACTIONS         = get_config(p, DEFAULTS, 'squash_actions',     'ANSIBLE_SQUASH_ACTIONS', "apk, apt, dnf, homebrew, package, pacman, pkgng, yum, zypper", islist=True)
 # paths
 DEFAULT_ACTION_PLUGIN_PATH     = get_config(p, DEFAULTS, 'action_plugins',     'ANSIBLE_ACTION_PLUGINS', '~/.ansible/plugins/action:/usr/share/ansible/plugins/action', ispathlist=True)
 DEFAULT_CACHE_PLUGIN_PATH      = get_config(p, DEFAULTS, 'cache_plugins',      'ANSIBLE_CACHE_PLUGINS', '~/.ansible/plugins/cache:/usr/share/ansible/plugins/cache', ispathlist=True)
