commit 2e1c6a78396624d8c01a603f1247eb4b3326fd82
Author: Jordan Borean <jborean93@gmail.com>
Date:   Thu Sep 19 01:04:22 2019 +1000

    Add fix for specifying current dir in collections_paths (#62478)

diff --git a/changelogs/fragments/collection-prefix-basedir.yaml b/changelogs/fragments/collection-prefix-basedir.yaml
new file mode 100644
index 0000000000..674de8043f
--- /dev/null
+++ b/changelogs/fragments/collection-prefix-basedir.yaml
@@ -0,0 +1,2 @@
+bugfixes:
+- Fix issue where the collection loader tracebacks if ``collections_paths = ./`` is set in the config
diff --git a/lib/ansible/utils/collection_loader.py b/lib/ansible/utils/collection_loader.py
index cc7e4df54c..0fc18948c9 100644
--- a/lib/ansible/utils/collection_loader.py
+++ b/lib/ansible/utils/collection_loader.py
@@ -519,7 +519,7 @@ def get_collection_name_from_path(path):
             # strip off the common prefix (handle weird testing cases of nested collection roots, eg)
             collection_remnant = n_path[len(coll_path):]
             # commonprefix may include the trailing /, prepend to the remnant if necessary (eg trailing / on root)
-            if collection_remnant[0] != '/':
+            if collection_remnant and collection_remnant[0] != '/':
                 collection_remnant = '/' + collection_remnant
             # the path lives under this collection root, see if it maps to a collection
             found_collection = _N_COLLECTION_PATH_RE.search(collection_remnant)
