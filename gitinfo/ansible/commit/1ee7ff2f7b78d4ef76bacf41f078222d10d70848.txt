commit 1ee7ff2f7b78d4ef76bacf41f078222d10d70848
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Thu May 31 22:08:00 2012 -0400

    To allow plays using different user accounts in the same playbook to function, clear the setup cache
    between plays.

diff --git a/lib/ansible/playbook/__init__.py b/lib/ansible/playbook/__init__.py
index 4f24d0a9ad..b545f2dea6 100644
--- a/lib/ansible/playbook/__init__.py
+++ b/lib/ansible/playbook/__init__.py
@@ -81,7 +81,7 @@ class PlayBook(object):
         """
 
         self.SETUP_CACHE = {}
- 
+
         if playbook is None or callbacks is None or runner_callbacks is None or stats is None:
             raise Exception('missing required arguments')
 
@@ -122,6 +122,7 @@ class PlayBook(object):
         # loop through all patterns and run them
         self.callbacks.on_start()
         for play_ds in self.playbook:
+            self.SETUP_CACHE = {}
             self._run_play(Play(self,play_ds))
 
         # summarize the results
