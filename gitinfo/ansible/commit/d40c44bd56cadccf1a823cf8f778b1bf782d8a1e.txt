commit d40c44bd56cadccf1a823cf8f778b1bf782d8a1e
Author: Paul Belanger <pabelanger@redhat.com>
Date:   Mon Jun 17 11:42:30 2019 -0400

    Fix python3 encoding with iosxr_config (#57919)
    
    Python3 requires bytes when writing files.
    
    Depends-On: https://github.com/ansible/ansible/pull/57909/
    Signed-off-by: Paul Belanger <pabelanger@redhat.com>

diff --git a/lib/ansible/modules/network/iosxr/iosxr_config.py b/lib/ansible/modules/network/iosxr/iosxr_config.py
index 63fac281fa..bab06f039e 100644
--- a/lib/ansible/modules/network/iosxr/iosxr_config.py
+++ b/lib/ansible/modules/network/iosxr/iosxr_config.py
@@ -236,7 +236,7 @@ time:
 """
 import re
 
-from ansible.module_utils._text import to_text
+from ansible.module_utils._text import to_text, to_bytes
 from ansible.module_utils.basic import AnsibleModule
 from ansible.module_utils.connection import ConnectionError
 from ansible.module_utils.network.iosxr.iosxr import load_config, get_config, get_connection
@@ -251,7 +251,7 @@ def copy_file_to_node(module):
     """
     src = '/tmp/ansible_config.txt'
     file = open(src, 'wb')
-    file.write(module.params['src'])
+    file.write(to_bytes(module.params['src'], errors='surrogate_or_strict'))
     file.close()
 
     dst = '/harddisk:/ansible_config.txt'
