commit 849aab0a12e21947b82a0b5c9f8c8a9528557a96
Author: Rene Moser <mail@renemoser.net>
Date:   Thu Jan 16 10:48:35 2014 +0100

    apt: fixed pkg=<name>=<version> fails if package is not yet installed.
    
    Reported and patch provided by https://github.com/msolo. Closes GH-5625.

diff --git a/library/packaging/apt b/library/packaging/apt
index eb64f8701f..f2c8d9ce4e 100644
--- a/library/packaging/apt
+++ b/library/packaging/apt
@@ -191,7 +191,7 @@ def package_status(m, pkgname, version, cache, state):
             # assume older version of python-apt is installed
             package_is_installed = pkg.isInstalled
 
-    if version:
+    if version and package_is_installed:
         try:
             installed_version = pkg.installed.version
         except AttributeError:
