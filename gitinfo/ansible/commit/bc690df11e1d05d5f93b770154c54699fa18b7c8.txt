commit bc690df11e1d05d5f93b770154c54699fa18b7c8
Author: Zim Kalinowski <zikalino@microsoft.com>
Date:   Thu Jun 7 14:11:00 2018 +0800

    using lighter resource (#41223)

diff --git a/test/integration/targets/azure_rm_resource/tasks/main.yml b/test/integration/targets/azure_rm_resource/tasks/main.yml
index fa4553780e..e54fa25f78 100644
--- a/test/integration/targets/azure_rm_resource/tasks/main.yml
+++ b/test/integration/targets/azure_rm_resource/tasks/main.yml
@@ -1,22 +1,17 @@
 - name: Prepare random number
   set_fact:
-    rpfx: "{{ resource_group | hash('md5') | truncate(7, True, '') }}{{ 1000 | random }}"
+    nsgname: "{{ resource_group | hash('md5') | truncate(7, True, '') }}{{ 1000 | random }}"
   run_once: yes
 
-- name: Call REST API - StorageAccounts_Create
+- name: Call REST API
   azure_rm_resource:
-    api_version: '2017-10-01'
+    api_version: '2018-02-01'
     resource_group: "{{ resource_group }}"
-    provider: storage
-    resource_type: storageaccounts
-    resource_name: stacc{{ rpfx }}
+    provider: network
+    resource_type: networksecuritygroups
+    resource_name: "{{ nsgname }}"
     body:
-      sku:
-        name: Standard_LRS
-      kind: BlobStorage
       location: eastus
-      properties:
-        accessTier: Hot
     idempotency: yes
   register: output
 
@@ -24,20 +19,15 @@
   assert:
     that: output.changed
 
-- name: Call REST API - StorageAccounts_Create - with same parameters
+- name: Call REST API
   azure_rm_resource:
-    api_version: '2017-10-01'
+    api_version: '2018-02-01'
     resource_group: "{{ resource_group }}"
-    provider: storage
-    resource_type: storageaccounts
-    resource_name: stacc{{ rpfx }}
+    provider: network
+    resource_type: networksecuritygroups
+    resource_name: "{{ nsgname }}"
     body:
-      sku:
-        name: Standard_LRS
-      kind: BlobStorage
       location: eastus
-      properties:
-        accessTier: Hot
     idempotency: yes
   register: output
 
@@ -45,20 +35,18 @@
   assert:
     that: not output.changed
 
-- name: Call REST API - StorageAccounts_Create - with different parameters
+- name: Call REST API
   azure_rm_resource:
-    api_version: '2017-10-01'
+    api_version: '2018-02-01'
     resource_group: "{{ resource_group }}"
-    provider: storage
-    resource_type: storageaccounts
-    resource_name: stacc{{ rpfx }}
+    provider: network
+    resource_type: networksecuritygroups
+    resource_name: "{{ nsgname }}"
     body:
-      sku:
-        name: Standard_LRS
-      kind: BlobStorage
       location: eastus
-      properties:
-        accessTier: Cool
+      tags:
+        a: "abc"
+        b: "cde"
     idempotency: yes
   register: output
 
@@ -69,9 +57,9 @@
 
 - name: Try to get information about account
   azure_rm_resource_facts:
-    api_version: '2017-10-01'
+    api_version: '2018-02-01'
     resource_group: "{{ resource_group }}"
-    provider: storage
-    resource_type: storageaccounts
-    resource_name: stacc{{ rpfx }}
+    provider: network
+    resource_type: networksecuritygroups
+    resource_name: "{{ nsgname }}"
   register: output
