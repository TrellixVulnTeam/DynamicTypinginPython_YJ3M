commit bf5770dec4ab578ddc14ae09b04ed26517b756fe
Author: Adrian Likins <alikins@redhat.com>
Date:   Tue Jan 30 11:42:13 2018 -0500

    Fix virt role detection for kvm if no other match (#35403)
    
    This fixes an indention bug introduced in
    45a9f967749ec68e2077fe1d1d32dd37660ab376
    that was causing the virtualization_role to be set to 'host'
    for many cases incorrectly.
    
    Fixes https://github.com/ansible/ansible/pull/21621
    (the issue mentioned in the pr)

diff --git a/lib/ansible/module_utils/facts/virtual/linux.py b/lib/ansible/module_utils/facts/virtual/linux.py
index a634104448..4b33f8daf6 100644
--- a/lib/ansible/module_utils/facts/virtual/linux.py
+++ b/lib/ansible/module_utils/facts/virtual/linux.py
@@ -209,7 +209,8 @@ class LinuxVirtual(Virtual):
 
                 else:
                     virtual_facts['virtualization_type'] = 'kvm'
-                virtual_facts['virtualization_role'] = 'host'
+                    virtual_facts['virtualization_role'] = 'host'
+
                 return virtual_facts
 
             if 'vboxdrv' in modules:
