commit 447c625cb3a95294b435640d3c61d28f2ee4178c
Author: kustodian <kustodian@gmail.com>
Date:   Tue Sep 30 00:33:55 2014 +0200

    Set selinux state to 'permissive' for state=disabled

diff --git a/lib/ansible/modules/system/selinux.py b/lib/ansible/modules/system/selinux.py
index 53e53d1d49..908bbc250e 100644
--- a/lib/ansible/modules/system/selinux.py
+++ b/lib/ansible/modules/system/selinux.py
@@ -174,14 +174,19 @@ def main():
     if (state != runtime_state):
         if module.check_mode:
             module.exit_json(changed=True)
-        if (state == 'disabled'):
-            msgs.append('state change will take effect next reboot')
-        else:
-            if (runtime_enabled):
+        if (runtime_enabled):
+            if (state == 'disabled'):
+                if (runtime_state != 'permissive'):
+                    # Temporarily set state to permissive
+                    set_state('permissive')
+                    msgs.append('runtime state temporarily changed from \'%s\' to \'permissive\', state change will take effect next reboot' % (runtime_state))
+                else:
+                    msgs.append('state change will take effect next reboot')
+            else:
                 set_state(state)
                 msgs.append('runtime state changed from \'%s\' to \'%s\'' % (runtime_state, state))
-            else:
-                msgs.append('state change will take effect next reboot')
+        else:
+            msgs.append('state change will take effect next reboot')
         changed=True
 
     if (state != config_state):
