commit 53b95b865f7aabfa36ebac5514d604028346d001
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Fri May 29 14:31:55 2020 -0700

    __eq__ should be redefined if __hash__ is defined.

diff --git a/lib/ansible/module_utils/common/collections.py b/lib/ansible/module_utils/common/collections.py
index 0a166cd4cf..78f8bf3a29 100644
--- a/lib/ansible/module_utils/common/collections.py
+++ b/lib/ansible/module_utils/common/collections.py
@@ -28,6 +28,15 @@ class ImmutableDict(Hashable, Mapping):
     def __hash__(self):
         return hash(frozenset(self.items()))
 
+    def __eq__(self, other):
+        try:
+            if self.__hash__() == hash(other):
+                return True
+        except TypeError:
+            pass
+
+        return False
+
     def __repr__(self):
         return 'ImmutableDict({0})'.format(repr(self._store))
 
