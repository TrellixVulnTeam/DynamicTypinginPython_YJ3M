commit 8cab33a779b71c965b23d548ed57314354bd776a
Author: Brian Coca <bcoca@ansible.com>
Date:   Mon Nov 7 15:37:34 2016 -0500

    skip vmware inventory when missing lib
    
    fixes #18190

diff --git a/test/units/contrib/inventory/test_vmware_inventory.py b/test/units/contrib/inventory/test_vmware_inventory.py
index c2c851237f..5c5a851112 100644
--- a/test/units/contrib/inventory/test_vmware_inventory.py
+++ b/test/units/contrib/inventory/test_vmware_inventory.py
@@ -6,13 +6,20 @@ import pickle
 import unittest
 import sys
 
+try:
+    from vmware_inventory import VMWareInventory
+except ImportError:
+    from nose.plugins.skip import SkipTest
+    raise SkipTest("test_vmware_inventory.py requires the python module 'vmware_inventory'")
+
+
 
 # contrib's dirstruct doesn't contain __init__.py files
 checkout_path = os.path.dirname(__file__)
 checkout_path = checkout_path.replace('/test/units/contrib/inventory', '')
 inventory_dir = os.path.join(checkout_path, 'contrib', 'inventory')
 sys.path.append(os.path.abspath(inventory_dir))
-from vmware_inventory import VMWareInventory 
+
 # cleanup so that nose's path is not polluted with other inv scripts
 sys.path.remove(os.path.abspath(inventory_dir))
 
