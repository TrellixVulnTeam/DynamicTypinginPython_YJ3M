commit c0ab417ef91b52a70bc5ac901fc5e124426ca8a0
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Sat Aug 3 13:51:45 2013 -0400

    Don't iterate across strings in with_nested.

diff --git a/lib/ansible/runner/lookup_plugins/nested.py b/lib/ansible/runner/lookup_plugins/nested.py
index 66e6b2413f..28775746ef 100644
--- a/lib/ansible/runner/lookup_plugins/nested.py
+++ b/lib/ansible/runner/lookup_plugins/nested.py
@@ -47,6 +47,8 @@ class LookupModule(object):
         for x in terms:
             if isinstance(x, basestring) and x in inject:
                 results.append(inject[x])
+            elif isinstance(x, basestring):
+                raise errors.AnsibleError("cannot resolve: %s" % x)
             else:
                 results.append(x)
         return results
