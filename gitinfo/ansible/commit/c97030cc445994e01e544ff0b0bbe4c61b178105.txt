commit c97030cc445994e01e544ff0b0bbe4c61b178105
Author: markocelan <markocelan@users.noreply.github.com>
Date:   Fri Dec 22 08:00:35 2017 +0100

    cloudflare: fix CNAME not changed (#33939)

diff --git a/lib/ansible/modules/net_tools/cloudflare_dns.py b/lib/ansible/modules/net_tools/cloudflare_dns.py
index d26f01508d..41c094c4de 100644
--- a/lib/ansible/modules/net_tools/cloudflare_dns.py
+++ b/lib/ansible/modules/net_tools/cloudflare_dns.py
@@ -575,7 +575,7 @@ class CloudflareAPI(object):
             if ('data' in new_record) and ('data' in cur_record):
                 if (cur_record['data'] > new_record['data']) - (cur_record['data'] < new_record['data']):
                     do_update = True
-            if (type == 'CNAME') and (cur_record['content'] != new_record['content']):
+            if (params['type'] == 'CNAME') and (cur_record['content'] != new_record['content']):
                 do_update = True
             if do_update:
                 if self.module.check_mode:
