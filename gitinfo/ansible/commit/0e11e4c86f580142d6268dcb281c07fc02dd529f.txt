commit 0e11e4c86f580142d6268dcb281c07fc02dd529f
Author: Jasper N. Brouwer <jasper@nerdsweide.nl>
Date:   Wed Dec 4 21:49:00 2013 +0100

    Fixed false positive on initctl as enable_cmd
    
    Also on update-rc.d
    In service module

diff --git a/library/system/service b/library/system/service
index aac7319d75..2490c6a30f 100644
--- a/library/system/service
+++ b/library/system/service
@@ -431,10 +431,10 @@ class LinuxService(Service):
             if check_systemd(self.name):
                 # service is managed by systemd
                 self.enable_cmd = location['systemctl']
-            elif os.path.exists("/etc/init/%s.conf" % self.name):
+            elif os.path.exists("/etc/init/%s.conf" % self.name) and location['initctl']:
                 # service is managed by upstart
                 self.enable_cmd = location['initctl']
-            elif os.path.exists("/etc/init.d/%s" % self.name):
+            elif os.path.exists("/etc/init.d/%s" % self.name) and location['update-rc.d']:
                 # service is managed by with SysV init scripts, but with update-rc.d
                 self.enable_cmd = location['update-rc.d']
             else:
@@ -649,7 +649,7 @@ class LinuxService(Service):
                 return
 
             if self.enable:
-                # make sure the init.d symlinks are created 
+                # make sure the init.d symlinks are created
                 # otherwise enable might not work
                 (rc, out, err) = self.execute_command("%s %s defaults" \
                                                       % (self.enable_cmd, self.name))
