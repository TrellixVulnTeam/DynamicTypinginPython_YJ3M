commit 9a1191cbe56737610dc43d1f13b948661c82a418
Author: Bob Lee <emailbob@gmail.com>
Date:   Wed Sep 5 14:45:56 2018 -0400

    Update documentation for gcp_compute (#43791)
    
    Added examples on how to use "keyed_groups", "hostnames", and "compose"
    
    The compose example shows how to set the ansible_host var for a host to either the public or private ip. This is necessary when you set your hostname by name instead of ip

diff --git a/lib/ansible/plugins/inventory/gcp_compute.py b/lib/ansible/plugins/inventory/gcp_compute.py
index af18bcf897..2b35c0c2c1 100644
--- a/lib/ansible/plugins/inventory/gcp_compute.py
+++ b/lib/ansible/plugins/inventory/gcp_compute.py
@@ -60,11 +60,21 @@ projects:
 filters:
   - machineType = n1-standard-1
   - scheduling.automaticRestart = true AND machineType = n1-standard-1
-
 scopes:
   - https://www.googleapis.com/auth/compute
 service_account_file: /tmp/service_account.json
 auth_kind: serviceaccount
+keyed_groups:
+  # Create groups from GCE labels
+  - prefix: gcp
+    key: labels
+hostnames:
+  # List host by name instead of the default public ip
+  - name
+compose:
+  # Set an inventory parameter to use the Public IP address to connect to the host
+  # For Private ip use "networkInterfaces[0].networkIP"
+  ansible_host: networkInterfaces[0].accessConfigs[0].natIP
 '''
 
 from ansible.errors import AnsibleError, AnsibleParserError
