commit 6935d467eb6714301c9c2eb86366033e1edb4532
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Tue Apr 21 10:08:00 2015 -0700

    Add tests for yum module taking lists of packages in various formats

diff --git a/test/integration/roles/test_yum/tasks/yum.yml b/test/integration/roles/test_yum/tasks/yum.yml
index 6630a2ff4c..78bb9abf78 100644
--- a/test/integration/roles/test_yum/tasks/yum.yml
+++ b/test/integration/roles/test_yum/tasks/yum.yml
@@ -28,7 +28,7 @@
 - debug: var=yum_result
 - debug: var=rpm_result
 
-- name: verify uninstalltion of sos
+- name: verify uninstallation of sos
   assert:
     that: 
         - "yum_result.rc == 0"
@@ -73,7 +73,7 @@
         - "'rc' in yum_result"
         - "'results' in yum_result"
 
-# INSTALL AGAIN        
+# INSTALL AGAIN
 - name: install sos again
   yum: name=sos state=present
   register: yum_result
@@ -83,4 +83,106 @@
     that: 
         - "not yum_result.changed"
  
+# Multiple packages
+- name: uninstall sos and python-q
+  yum: name=sos,python-q state=removed
+  register: yum_result
+
+- name: check sos with rpm
+  shell: rpm -q sos
+  failed_when: False
+  register: rpm_sos_result
+
+- name: check python-q with rpm
+  shell: rpm -q python-q
+  failed_when: False
+  register: rpm_python_q_result
+
+- name: verify packages installed
+  assert:
+    that:
+        - "rpm_sos_result.rc != 0"
+        - "rpm_python_q_result.rc != 0"
+
+- name: install sos and python-q as comma separated
+  yum: name=sos,python-q state=present
+  register: yum_result
+
+- name: check sos with rpm
+  shell: rpm -q sos
+  failed_when: False
+  register: rpm_sos_result
+
+- name: check python-q with rpm
+  shell: rpm -q python-q
+  failed_when: False
+  register: rpm_python_q_result
+
+- name: verify packages installed
+  assert:
+    that:
+        - "yum_result.rc == 0"
+        - "yum_result.changed"
+        - "rpm_sos_result.rc == 0"
+        - "rpm_python_q_result.rc == 0"
+
+- name: uninstall sos and python-q
+  yum: name=sos,python-q state=removed
+  register: yum_result
+
+- name: install sos and python-q as list
+  yum:
+    name:
+      - sos
+      - python-q
+    state: present
+  register: yum_result
+
+- name: check sos with rpm
+  shell: rpm -q sos
+  failed_when: False
+  register: rpm_sos_result
+
+- name: check python-q with rpm
+  shell: rpm -q python-q
+  failed_when: False
+  register: rpm_python_q_result
+
+- name: verify packages installed
+  assert:
+    that:
+        - "yum_result.rc == 0"
+        - "yum_result.changed"
+        - "rpm_sos_result.rc == 0"
+        - "rpm_python_q_result.rc == 0"
+
+- name: uninstall sos and python-q
+  yum: name=sos,python-q state=removed
+  register: yum_result
+
+- name: install sos and python-q as comma separated with spaces
+  yum:
+    name: "sos, python-q"
+    state: present
+  register: yum_result
+
+- name: check sos with rpm
+  shell: rpm -q sos
+  failed_when: False
+  register: rpm_sos_result
+
+- name: check sos with rpm
+  shell: rpm -q python-q
+  failed_when: False
+  register: rpm_python_q_result
+
+- name: verify packages installed
+  assert:
+    that:
+        - "yum_result.rc == 0"
+        - "yum_result.changed"
+        - "rpm_sos_result.rc == 0"
+        - "rpm_python_q_result.rc == 0"
 
+- name: uninstall sos and python-q
+  yum: name=sos,python-q state=removed
