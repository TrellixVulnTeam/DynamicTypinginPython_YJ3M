commit 8d6b9cf6e086b4ced5ec6f52d2a13720039ac93f
Author: Gon√©ri Le Bouder <goneri@lebouder.net>
Date:   Thu Dec 12 11:39:19 2019 -0500

    prepare_vmware_tests: add scenario with one ESXi
    
    Add the ability to test with just one vcenter instance and a single
    ESXi. This allow us to cover 90 modules.

diff --git a/test/integration/targets/prepare_vmware_tests/tasks/main.yml b/test/integration/targets/prepare_vmware_tests/tasks/main.yml
index c99d46990d..91a6b9ca09 100644
--- a/test/integration/targets/prepare_vmware_tests/tasks/main.yml
+++ b/test/integration/targets/prepare_vmware_tests/tasks/main.yml
@@ -10,9 +10,13 @@
     include_vars:
       file: vcenter_only.yml
 
+  - when: esxi1_hostname is defined and esxi2_hostname is not defined
+    include_vars:
+      file: vcenter_1esxi.yml
+
   - when: esxi1_hostname is defined and esxi2_hostname is defined
     include_vars:
-      file: vcenter_with_2_nodes.yml
+      file: vcenter_2esxi.yml
 
   - when: vcsim is not defined
     include_tasks: init_real_lab.yml
diff --git a/test/integration/targets/prepare_vmware_tests/vars/vcenter_1esxi.yml b/test/integration/targets/prepare_vmware_tests/vars/vcenter_1esxi.yml
new file mode 100644
index 0000000000..47c5f1dbdc
--- /dev/null
+++ b/test/integration/targets/prepare_vmware_tests/vars/vcenter_1esxi.yml
@@ -0,0 +1,32 @@
+---
+esxi_hosts:
+  - esxi1.test
+rw_datastore: rw_datastore
+ro_datastore: ro_datastore
+esxi_password: '{{ esxi1_password }}'
+infra:
+  datastores:
+    rw_datastore:
+      type: nfs
+      server: datastore.test
+      path: /srv/share/vms
+      ro: false
+    ro_datastore:
+      type: nfs
+      server: datastore.test
+      path: /srv/share/isos
+      ro: true
+virtual_machines:
+  - name: DC0_H0_VM0
+    folder: '{{ f0 }}'
+  - name: DC0_H0_VM1
+    folder: '{{ f0 }}'
+virtual_machines_in_cluster:
+  - name: DC0_C0_RP0_VM0
+    folder: '{{ f0 }}'
+    cluster: '{{ ccr1 }}'
+  - name: DC0_C0_RP0_VM1
+    folder: '{{ f0 }}'
+    cluster: '{{ ccr1 }}'
+cluster_tag: test_cluster_tag_0001
+cluster_category: test_cluster_cat_0001
diff --git a/test/integration/targets/prepare_vmware_tests/vars/vcenter_with_2_nodes.yml b/test/integration/targets/prepare_vmware_tests/vars/vcenter_2esxi.yml
similarity index 100%
rename from test/integration/targets/prepare_vmware_tests/vars/vcenter_with_2_nodes.yml
rename to test/integration/targets/prepare_vmware_tests/vars/vcenter_2esxi.yml
diff --git a/test/integration/targets/vmware_cluster_facts/aliases b/test/integration/targets/vmware_cluster_facts/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_cluster_facts/aliases
+++ b/test/integration/targets/vmware_cluster_facts/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_cluster_info/aliases b/test/integration/targets/vmware_cluster_info/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_cluster_info/aliases
+++ b/test/integration/targets/vmware_cluster_info/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_datastore_facts/aliases b/test/integration/targets/vmware_datastore_facts/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_datastore_facts/aliases
+++ b/test/integration/targets/vmware_datastore_facts/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_datastore_info/aliases b/test/integration/targets/vmware_datastore_info/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_datastore_info/aliases
+++ b/test/integration/targets/vmware_datastore_info/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_datastore_maintenancemode/aliases b/test/integration/targets/vmware_datastore_maintenancemode/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_datastore_maintenancemode/aliases
+++ b/test/integration/targets/vmware_datastore_maintenancemode/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_drs_group/aliases b/test/integration/targets/vmware_drs_group/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_drs_group/aliases
+++ b/test/integration/targets/vmware_drs_group/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_drs_rule_facts/aliases b/test/integration/targets/vmware_drs_rule_facts/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_drs_rule_facts/aliases
+++ b/test/integration/targets/vmware_drs_rule_facts/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_drs_rule_info/aliases b/test/integration/targets/vmware_drs_rule_info/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_drs_rule_info/aliases
+++ b/test/integration/targets/vmware_drs_rule_info/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest/aliases b/test/integration/targets/vmware_guest/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_guest/aliases
+++ b/test/integration/targets/vmware_guest/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_boot_facts/aliases b/test/integration/targets/vmware_guest_boot_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_boot_facts/aliases
+++ b/test/integration/targets/vmware_guest_boot_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_boot_info/aliases b/test/integration/targets/vmware_guest_boot_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_boot_info/aliases
+++ b/test/integration/targets/vmware_guest_boot_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_controller/aliases b/test/integration/targets/vmware_guest_controller/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_controller/aliases
+++ b/test/integration/targets/vmware_guest_controller/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_custom_attribute_defs/aliases b/test/integration/targets/vmware_guest_custom_attribute_defs/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_custom_attribute_defs/aliases
+++ b/test/integration/targets/vmware_guest_custom_attribute_defs/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_custom_attributes/aliases b/test/integration/targets/vmware_guest_custom_attributes/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_custom_attributes/aliases
+++ b/test/integration/targets/vmware_guest_custom_attributes/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_customization_facts/aliases b/test/integration/targets/vmware_guest_customization_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_customization_facts/aliases
+++ b/test/integration/targets/vmware_guest_customization_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_customization_info/aliases b/test/integration/targets/vmware_guest_customization_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_customization_info/aliases
+++ b/test/integration/targets/vmware_guest_customization_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_disk_facts/aliases b/test/integration/targets/vmware_guest_disk_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_disk_facts/aliases
+++ b/test/integration/targets/vmware_guest_disk_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_disk_info/aliases b/test/integration/targets/vmware_guest_disk_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_disk_info/aliases
+++ b/test/integration/targets/vmware_guest_disk_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_facts/aliases b/test/integration/targets/vmware_guest_facts/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_guest_facts/aliases
+++ b/test/integration/targets/vmware_guest_facts/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_find/aliases b/test/integration/targets/vmware_guest_find/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_guest_find/aliases
+++ b/test/integration/targets/vmware_guest_find/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_info/aliases b/test/integration/targets/vmware_guest_info/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_guest_info/aliases
+++ b/test/integration/targets/vmware_guest_info/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_move/aliases b/test/integration/targets/vmware_guest_move/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_guest_move/aliases
+++ b/test/integration/targets/vmware_guest_move/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_network/aliases b/test/integration/targets/vmware_guest_network/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_network/aliases
+++ b/test/integration/targets/vmware_guest_network/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_powerstate/aliases b/test/integration/targets/vmware_guest_powerstate/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_guest_powerstate/aliases
+++ b/test/integration/targets/vmware_guest_powerstate/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_register_operation/aliases b/test/integration/targets/vmware_guest_register_operation/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_guest_register_operation/aliases
+++ b/test/integration/targets/vmware_guest_register_operation/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_screenshot/aliases b/test/integration/targets/vmware_guest_screenshot/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_screenshot/aliases
+++ b/test/integration/targets/vmware_guest_screenshot/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_sendkey/aliases b/test/integration/targets/vmware_guest_sendkey/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_sendkey/aliases
+++ b/test/integration/targets/vmware_guest_sendkey/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_serial_port/aliases b/test/integration/targets/vmware_guest_serial_port/aliases
index 6be35ad466..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_serial_port/aliases
+++ b/test/integration/targets/vmware_guest_serial_port/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
-needs/target/prepare_vmware_tests
\ No newline at end of file
+needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_snapshot/aliases b/test/integration/targets/vmware_guest_snapshot/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_snapshot/aliases
+++ b/test/integration/targets/vmware_guest_snapshot/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_snapshot_facts/aliases b/test/integration/targets/vmware_guest_snapshot_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_snapshot_facts/aliases
+++ b/test/integration/targets/vmware_guest_snapshot_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_snapshot_info/aliases b/test/integration/targets/vmware_guest_snapshot_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_snapshot_info/aliases
+++ b/test/integration/targets/vmware_guest_snapshot_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_tools_info/aliases b/test/integration/targets/vmware_guest_tools_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_guest_tools_info/aliases
+++ b/test/integration/targets/vmware_guest_tools_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_guest_tools_wait/aliases b/test/integration/targets/vmware_guest_tools_wait/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_guest_tools_wait/aliases
+++ b/test/integration/targets/vmware_guest_tools_wait/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_acceptance/aliases b/test/integration/targets/vmware_host_acceptance/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_acceptance/aliases
+++ b/test/integration/targets/vmware_host_acceptance/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_active_directory/aliases b/test/integration/targets/vmware_host_active_directory/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_active_directory/aliases
+++ b/test/integration/targets/vmware_host_active_directory/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_capability_facts/aliases b/test/integration/targets/vmware_host_capability_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_capability_facts/aliases
+++ b/test/integration/targets/vmware_host_capability_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_capability_info/aliases b/test/integration/targets/vmware_host_capability_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_capability_info/aliases
+++ b/test/integration/targets/vmware_host_capability_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_config_facts/aliases b/test/integration/targets/vmware_host_config_facts/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_host_config_facts/aliases
+++ b/test/integration/targets/vmware_host_config_facts/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_config_info/aliases b/test/integration/targets/vmware_host_config_info/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_host_config_info/aliases
+++ b/test/integration/targets/vmware_host_config_info/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_config_manager/aliases b/test/integration/targets/vmware_host_config_manager/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_config_manager/aliases
+++ b/test/integration/targets/vmware_host_config_manager/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_datastore/aliases b/test/integration/targets/vmware_host_datastore/aliases
index 6be35ad466..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_datastore/aliases
+++ b/test/integration/targets/vmware_host_datastore/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
-needs/target/prepare_vmware_tests
\ No newline at end of file
+needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_dns_facts/aliases b/test/integration/targets/vmware_host_dns_facts/aliases
index 9d678a191c..4df62ed098 100644
--- a/test/integration/targets/vmware_host_dns_facts/aliases
+++ b/test/integration/targets/vmware_host_dns_facts/aliases
@@ -2,3 +2,4 @@ shippable/vcenter/group1
 cloud/vcenter
 
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_dns_info/aliases b/test/integration/targets/vmware_host_dns_info/aliases
index 9d678a191c..4df62ed098 100644
--- a/test/integration/targets/vmware_host_dns_info/aliases
+++ b/test/integration/targets/vmware_host_dns_info/aliases
@@ -2,3 +2,4 @@ shippable/vcenter/group1
 cloud/vcenter
 
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_facts/aliases b/test/integration/targets/vmware_host_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_facts/aliases
+++ b/test/integration/targets/vmware_host_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_feature_facts/aliases b/test/integration/targets/vmware_host_feature_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_feature_facts/aliases
+++ b/test/integration/targets/vmware_host_feature_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_feature_info/aliases b/test/integration/targets/vmware_host_feature_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_feature_info/aliases
+++ b/test/integration/targets/vmware_host_feature_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_firewall_facts/aliases b/test/integration/targets/vmware_host_firewall_facts/aliases
index 9d678a191c..4df62ed098 100644
--- a/test/integration/targets/vmware_host_firewall_facts/aliases
+++ b/test/integration/targets/vmware_host_firewall_facts/aliases
@@ -2,3 +2,4 @@ shippable/vcenter/group1
 cloud/vcenter
 
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_firewall_info/aliases b/test/integration/targets/vmware_host_firewall_info/aliases
index 9d678a191c..4df62ed098 100644
--- a/test/integration/targets/vmware_host_firewall_info/aliases
+++ b/test/integration/targets/vmware_host_firewall_info/aliases
@@ -2,3 +2,4 @@ shippable/vcenter/group1
 cloud/vcenter
 
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_hyperthreading/aliases b/test/integration/targets/vmware_host_hyperthreading/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_hyperthreading/aliases
+++ b/test/integration/targets/vmware_host_hyperthreading/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_kernel_manager/aliases b/test/integration/targets/vmware_host_kernel_manager/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_kernel_manager/aliases
+++ b/test/integration/targets/vmware_host_kernel_manager/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_ntp/aliases b/test/integration/targets/vmware_host_ntp/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_ntp/aliases
+++ b/test/integration/targets/vmware_host_ntp/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_ntp_facts/aliases b/test/integration/targets/vmware_host_ntp_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_ntp_facts/aliases
+++ b/test/integration/targets/vmware_host_ntp_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_ntp_info/aliases b/test/integration/targets/vmware_host_ntp_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_ntp_info/aliases
+++ b/test/integration/targets/vmware_host_ntp_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_package_facts/aliases b/test/integration/targets/vmware_host_package_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_package_facts/aliases
+++ b/test/integration/targets/vmware_host_package_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_package_info/aliases b/test/integration/targets/vmware_host_package_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_package_info/aliases
+++ b/test/integration/targets/vmware_host_package_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_powerstate/aliases b/test/integration/targets/vmware_host_powerstate/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_powerstate/aliases
+++ b/test/integration/targets/vmware_host_powerstate/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_scanhba/aliases b/test/integration/targets/vmware_host_scanhba/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_host_scanhba/aliases
+++ b/test/integration/targets/vmware_host_scanhba/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_service_facts/aliases b/test/integration/targets/vmware_host_service_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_service_facts/aliases
+++ b/test/integration/targets/vmware_host_service_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_service_info/aliases b/test/integration/targets/vmware_host_service_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_service_info/aliases
+++ b/test/integration/targets/vmware_host_service_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_service_manager/aliases b/test/integration/targets/vmware_host_service_manager/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_service_manager/aliases
+++ b/test/integration/targets/vmware_host_service_manager/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_snmp/aliases b/test/integration/targets/vmware_host_snmp/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_snmp/aliases
+++ b/test/integration/targets/vmware_host_snmp/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_ssl_facts/aliases b/test/integration/targets/vmware_host_ssl_facts/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_host_ssl_facts/aliases
+++ b/test/integration/targets/vmware_host_ssl_facts/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_ssl_info/aliases b/test/integration/targets/vmware_host_ssl_info/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_host_ssl_info/aliases
+++ b/test/integration/targets/vmware_host_ssl_info/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_vmhba_facts/aliases b/test/integration/targets/vmware_host_vmhba_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_vmhba_facts/aliases
+++ b/test/integration/targets/vmware_host_vmhba_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_vmhba_info/aliases b/test/integration/targets/vmware_host_vmhba_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_vmhba_info/aliases
+++ b/test/integration/targets/vmware_host_vmhba_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_vmnic_facts/aliases b/test/integration/targets/vmware_host_vmnic_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_vmnic_facts/aliases
+++ b/test/integration/targets/vmware_host_vmnic_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_host_vmnic_info/aliases b/test/integration/targets/vmware_host_vmnic_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_host_vmnic_info/aliases
+++ b/test/integration/targets/vmware_host_vmnic_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_local_role_facts/aliases b/test/integration/targets/vmware_local_role_facts/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_local_role_facts/aliases
+++ b/test/integration/targets/vmware_local_role_facts/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_local_role_info/aliases b/test/integration/targets/vmware_local_role_info/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_local_role_info/aliases
+++ b/test/integration/targets/vmware_local_role_info/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_local_user_facts/aliases b/test/integration/targets/vmware_local_user_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_local_user_facts/aliases
+++ b/test/integration/targets/vmware_local_user_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_local_user_info/aliases b/test/integration/targets/vmware_local_user_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_local_user_info/aliases
+++ b/test/integration/targets/vmware_local_user_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_maintenancemode/aliases b/test/integration/targets/vmware_maintenancemode/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_maintenancemode/aliases
+++ b/test/integration/targets/vmware_maintenancemode/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_maintenancemode/tasks/main.yml b/test/integration/targets/vmware_maintenancemode/tasks/main.yml
index 27f39b1b94..2fa681927f 100644
--- a/test/integration/targets/vmware_maintenancemode/tasks/main.yml
+++ b/test/integration/targets/vmware_maintenancemode/tasks/main.yml
@@ -13,7 +13,7 @@
     username: "{{ vcenter_username }}"
     password: "{{ vcenter_password }}"
     state: present
-    esxi_hostname: '{{ esxi2 }}'
+    esxi_hostname: '{{ esxi1 }}'
     validate_certs: no
   register: test_result_0001
 
@@ -30,7 +30,7 @@
     username: "{{ vcenter_username }}"
     password: "{{ vcenter_password }}"
     state: present
-    esxi_hostname: '{{ esxi2 }}'
+    esxi_hostname: '{{ esxi1 }}'
     validate_certs: no
   register: test_result_0002
 
@@ -47,7 +47,7 @@
     username: "{{ vcenter_username }}"
     password: "{{ vcenter_password }}"
     state: absent
-    esxi_hostname: '{{ esxi2 }}'
+    esxi_hostname: '{{ esxi1 }}'
     validate_certs: no
   register: test_result_0003
 
@@ -64,7 +64,7 @@
     username: "{{ vcenter_username }}"
     password: "{{ vcenter_password }}"
     state: absent
-    esxi_hostname: '{{ esxi2 }}'
+    esxi_hostname: '{{ esxi1 }}'
     validate_certs: no
   register: test_result_0004
 
diff --git a/test/integration/targets/vmware_portgroup/aliases b/test/integration/targets/vmware_portgroup/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_portgroup/aliases
+++ b/test/integration/targets/vmware_portgroup/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_portgroup_facts/aliases b/test/integration/targets/vmware_portgroup_facts/aliases
index 9d678a191c..dea29ccd8b 100644
--- a/test/integration/targets/vmware_portgroup_facts/aliases
+++ b/test/integration/targets/vmware_portgroup_facts/aliases
@@ -1,4 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
-
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_portgroup_info/aliases b/test/integration/targets/vmware_portgroup_info/aliases
index 9d678a191c..4df62ed098 100644
--- a/test/integration/targets/vmware_portgroup_info/aliases
+++ b/test/integration/targets/vmware_portgroup_info/aliases
@@ -2,3 +2,4 @@ shippable/vcenter/group1
 cloud/vcenter
 
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_resource_pool/aliases b/test/integration/targets/vmware_resource_pool/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_resource_pool/aliases
+++ b/test/integration/targets/vmware_resource_pool/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_target_canonical_facts/aliases b/test/integration/targets/vmware_target_canonical_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_target_canonical_facts/aliases
+++ b/test/integration/targets/vmware_target_canonical_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_target_canonical_info/aliases b/test/integration/targets/vmware_target_canonical_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_target_canonical_info/aliases
+++ b/test/integration/targets/vmware_target_canonical_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_vm_facts/aliases b/test/integration/targets/vmware_vm_facts/aliases
index 1eb4d71b09..eaf9c08d77 100644
--- a/test/integration/targets/vmware_vm_facts/aliases
+++ b/test/integration/targets/vmware_vm_facts/aliases
@@ -2,3 +2,4 @@ shippable/vcenter/group1
 shippable/vcenter/smoketest
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_vm_host_drs_rule/aliases b/test/integration/targets/vmware_vm_host_drs_rule/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_vm_host_drs_rule/aliases
+++ b/test/integration/targets/vmware_vm_host_drs_rule/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_vm_info/aliases b/test/integration/targets/vmware_vm_info/aliases
index 1eb4d71b09..eaf9c08d77 100644
--- a/test/integration/targets/vmware_vm_info/aliases
+++ b/test/integration/targets/vmware_vm_info/aliases
@@ -2,3 +2,4 @@ shippable/vcenter/group1
 shippable/vcenter/smoketest
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_vm_storage_policy_info/aliases b/test/integration/targets/vmware_vm_storage_policy_info/aliases
index eb39c07bac..dea29ccd8b 100644
--- a/test/integration/targets/vmware_vm_storage_policy_info/aliases
+++ b/test/integration/targets/vmware_vm_storage_policy_info/aliases
@@ -1,3 +1,4 @@
 shippable/vcenter/group1
 cloud/vcenter
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_vm_vm_drs_rule/aliases b/test/integration/targets/vmware_vm_vm_drs_rule/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_vm_vm_drs_rule/aliases
+++ b/test/integration/targets/vmware_vm_vm_drs_rule/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_vmkernel/aliases b/test/integration/targets/vmware_vmkernel/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_vmkernel/aliases
+++ b/test/integration/targets/vmware_vmkernel/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_vmkernel_facts/aliases b/test/integration/targets/vmware_vmkernel_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_vmkernel_facts/aliases
+++ b/test/integration/targets/vmware_vmkernel_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_vmkernel_info/aliases b/test/integration/targets/vmware_vmkernel_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_vmkernel_info/aliases
+++ b/test/integration/targets/vmware_vmkernel_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_vspan_session/aliases b/test/integration/targets/vmware_vspan_session/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_vspan_session/aliases
+++ b/test/integration/targets/vmware_vspan_session/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_vswitch_facts/aliases b/test/integration/targets/vmware_vswitch_facts/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_vswitch_facts/aliases
+++ b/test/integration/targets/vmware_vswitch_facts/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
diff --git a/test/integration/targets/vmware_vswitch_info/aliases b/test/integration/targets/vmware_vswitch_info/aliases
index 3eede2cbf0..62871ab8f0 100644
--- a/test/integration/targets/vmware_vswitch_info/aliases
+++ b/test/integration/targets/vmware_vswitch_info/aliases
@@ -1,3 +1,4 @@
 cloud/vcenter
 shippable/vcenter/group1
 needs/target/prepare_vmware_tests
+zuul/vmware/vcenter_1esxi
