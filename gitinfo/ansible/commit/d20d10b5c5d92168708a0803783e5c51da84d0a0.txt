commit d20d10b5c5d92168708a0803783e5c51da84d0a0
Author: Nathaniel Case <ncase@redhat.com>
Date:   Tue Sep 3 08:55:20 2019 -0400

    Avoid infinite recursion on login (#61617)

diff --git a/lib/ansible/plugins/connection/httpapi.py b/lib/ansible/plugins/connection/httpapi.py
index 0140032ab7..37facee8f1 100644
--- a/lib/ansible/plugins/connection/httpapi.py
+++ b/lib/ansible/plugins/connection/httpapi.py
@@ -243,10 +243,10 @@ class Connection(NetworkConnectionBase):
             self.queue_message('vvv', "ESTABLISH HTTP(S) CONNECTFOR USER: %s TO %s" %
                                (self._play_context.remote_user, self._url))
             self.httpapi.set_become(self._play_context)
-            self.httpapi.login(self.get_option('remote_user'), self.get_option('password'))
-
             self._connected = True
 
+            self.httpapi.login(self.get_option('remote_user'), self.get_option('password'))
+
     def close(self):
         '''
         Close the active session to the device
