commit d9265c7498874098ba6ce469845b9cf1d7c37849
Author: Pilou <pierre-louis@libregerbil.fr>
Date:   Sat Jul 15 15:44:50 2017 +0200

    os_ironic: fix broken import (#26802)

diff --git a/lib/ansible/modules/cloud/openstack/os_ironic.py b/lib/ansible/modules/cloud/openstack/os_ironic.py
index b73df68b6e..2237779a6a 100644
--- a/lib/ansible/modules/cloud/openstack/os_ironic.py
+++ b/lib/ansible/modules/cloud/openstack/os_ironic.py
@@ -156,7 +156,11 @@ try:
 except ImportError:
     HAS_SHADE = False
 
-import jsonpatch
+try:
+    import jsonpatch
+    HAS_JSONPATCH = True
+except ImportError:
+    HAS_JSONPATCH = False
 
 
 def _parse_properties(module):
@@ -231,6 +235,8 @@ def main():
 
     if not HAS_SHADE:
         module.fail_json(msg='shade is required for this module')
+    if not HAS_JSONPATCH:
+        module.fail_json(msg='jsonpatch is required for this module')
     if (module.params['auth_type'] in [None, 'None'] and
             module.params['ironic_url'] is None):
         module.fail_json(msg="Authentication appears to be disabled, "
diff --git a/test/sanity/import/skip.txt b/test/sanity/import/skip.txt
index 012d4054d4..85a9eb8aa7 100644
--- a/test/sanity/import/skip.txt
+++ b/test/sanity/import/skip.txt
@@ -47,7 +47,6 @@ lib/ansible/modules/cloud/google/gcdns_record.py
 lib/ansible/modules/cloud/google/gcdns_zone.py
 lib/ansible/modules/cloud/misc/serverless.py
 lib/ansible/modules/cloud/openstack/os_client_config.py
-lib/ansible/modules/cloud/openstack/os_ironic.py
 lib/ansible/modules/cloud/ovirt/ovirt_disks.py
 lib/ansible/modules/cloud/univention/udm_user.py
 lib/ansible/modules/cloud/vmware/vca_nat.py
