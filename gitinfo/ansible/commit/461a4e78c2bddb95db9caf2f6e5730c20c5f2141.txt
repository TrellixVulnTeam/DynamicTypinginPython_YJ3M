commit 461a4e78c2bddb95db9caf2f6e5730c20c5f2141
Author: Matthew Williams <matthew@flowroute.com>
Date:   Mon Apr 2 14:56:09 2012 -0700

    raise error if executable host file execution fails

diff --git a/lib/ansible/runner.py b/lib/ansible/runner.py
index 3d83640fb4..5342e7ddf0 100755
--- a/lib/ansible/runner.py
+++ b/lib/ansible/runner.py
@@ -160,6 +160,9 @@ class Runner(object):
             cmd.extend(['--extra-vars', extra_vars])
         cmd = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE, shell=False)
         out, err = cmd.communicate()
+        rc = cmd.returncode
+        if rc:
+            raise errors.AnsibleError("%s: %s" % (host_list, err))
         try:
             groups = utils.json_loads(out)
         except:
