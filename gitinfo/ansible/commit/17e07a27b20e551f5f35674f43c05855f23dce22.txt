commit 17e07a27b20e551f5f35674f43c05855f23dce22
Author: Matt Clay <matt@mystile.com>
Date:   Wed May 3 08:24:05 2017 +0800

    Enable cloud tests for use with ansible-test.

diff --git a/shippable.yml b/shippable.yml
index dbf1b5c7fb..b663c21d8d 100644
--- a/shippable.yml
+++ b/shippable.yml
@@ -53,6 +53,9 @@ matrix:
     - env: TEST=linux/ubuntu1404/3
     - env: TEST=linux/ubuntu1604/3
     - env: TEST=linux/ubuntu1604py3/3
+
+    - env: TEST=cloud/ubuntu1604
+    - env: TEST=cloud/ubuntu1604py3
 build:
   pre_ci:
     - docker images drydock/u16pytall
diff --git a/test/integration/roles/setup_ec2 b/test/integration/roles/setup_ec2
new file mode 120000
index 0000000000..695decee54
--- /dev/null
+++ b/test/integration/roles/setup_ec2
@@ -0,0 +1 @@
+../targets/setup_ec2
\ No newline at end of file
diff --git a/test/integration/roles/setup_sshkey b/test/integration/roles/setup_sshkey
new file mode 120000
index 0000000000..aaef469c2e
--- /dev/null
+++ b/test/integration/roles/setup_sshkey
@@ -0,0 +1 @@
+../targets/setup_sshkey
\ No newline at end of file
diff --git a/test/integration/targets/cs_account/aliases b/test/integration/targets/cs_account/aliases
new file mode 100644
index 0000000000..ba249b99d7
--- /dev/null
+++ b/test/integration/targets/cs_account/aliases
@@ -0,0 +1,2 @@
+cloud/cs
+posix/ci/cloud/cs
diff --git a/test/integration/roles/test_cs_account/meta/main.yml b/test/integration/targets/cs_account/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_account/meta/main.yml
rename to test/integration/targets/cs_account/meta/main.yml
diff --git a/test/integration/roles/test_cs_account/tasks/main.yml b/test/integration/targets/cs_account/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_account/tasks/main.yml
rename to test/integration/targets/cs_account/tasks/main.yml
diff --git a/test/integration/targets/cs_affinitygroup/aliases b/test/integration/targets/cs_affinitygroup/aliases
new file mode 100644
index 0000000000..ba249b99d7
--- /dev/null
+++ b/test/integration/targets/cs_affinitygroup/aliases
@@ -0,0 +1,2 @@
+cloud/cs
+posix/ci/cloud/cs
diff --git a/test/integration/roles/test_cs_affinitygroup/meta/main.yml b/test/integration/targets/cs_affinitygroup/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_affinitygroup/meta/main.yml
rename to test/integration/targets/cs_affinitygroup/meta/main.yml
diff --git a/test/integration/roles/test_cs_affinitygroup/tasks/main.yml b/test/integration/targets/cs_affinitygroup/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_affinitygroup/tasks/main.yml
rename to test/integration/targets/cs_affinitygroup/tasks/main.yml
diff --git a/test/integration/targets/cs_cluster/aliases b/test/integration/targets/cs_cluster/aliases
new file mode 100644
index 0000000000..ff33c0bb61
--- /dev/null
+++ b/test/integration/targets/cs_cluster/aliases
@@ -0,0 +1,3 @@
+cloud/cs
+posix/ci/cloud/cs
+skip/python3
diff --git a/test/integration/roles/test_cs_cluster/meta/main.yml b/test/integration/targets/cs_cluster/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_cluster/meta/main.yml
rename to test/integration/targets/cs_cluster/meta/main.yml
diff --git a/test/integration/roles/test_cs_cluster/tasks/main.yml b/test/integration/targets/cs_cluster/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_cluster/tasks/main.yml
rename to test/integration/targets/cs_cluster/tasks/main.yml
diff --git a/test/integration/targets/cs_domain/aliases b/test/integration/targets/cs_domain/aliases
new file mode 100644
index 0000000000..ff33c0bb61
--- /dev/null
+++ b/test/integration/targets/cs_domain/aliases
@@ -0,0 +1,3 @@
+cloud/cs
+posix/ci/cloud/cs
+skip/python3
diff --git a/test/integration/roles/test_cs_domain/meta/main.yml b/test/integration/targets/cs_domain/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_domain/meta/main.yml
rename to test/integration/targets/cs_domain/meta/main.yml
diff --git a/test/integration/roles/test_cs_domain/tasks/main.yml b/test/integration/targets/cs_domain/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_domain/tasks/main.yml
rename to test/integration/targets/cs_domain/tasks/main.yml
diff --git a/test/integration/targets/cs_instancegroup/aliases b/test/integration/targets/cs_instancegroup/aliases
new file mode 100644
index 0000000000..ba249b99d7
--- /dev/null
+++ b/test/integration/targets/cs_instancegroup/aliases
@@ -0,0 +1,2 @@
+cloud/cs
+posix/ci/cloud/cs
diff --git a/test/integration/roles/test_cs_instancegroup/meta/main.yml b/test/integration/targets/cs_instancegroup/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_instancegroup/meta/main.yml
rename to test/integration/targets/cs_instancegroup/meta/main.yml
diff --git a/test/integration/roles/test_cs_instancegroup/tasks/main.yml b/test/integration/targets/cs_instancegroup/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_instancegroup/tasks/main.yml
rename to test/integration/targets/cs_instancegroup/tasks/main.yml
diff --git a/test/integration/targets/cs_project/aliases b/test/integration/targets/cs_project/aliases
new file mode 100644
index 0000000000..ff33c0bb61
--- /dev/null
+++ b/test/integration/targets/cs_project/aliases
@@ -0,0 +1,3 @@
+cloud/cs
+posix/ci/cloud/cs
+skip/python3
diff --git a/test/integration/roles/test_cs_project/meta/main.yml b/test/integration/targets/cs_project/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_project/meta/main.yml
rename to test/integration/targets/cs_project/meta/main.yml
diff --git a/test/integration/roles/test_cs_project/tasks/main.yml b/test/integration/targets/cs_project/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_project/tasks/main.yml
rename to test/integration/targets/cs_project/tasks/main.yml
diff --git a/test/integration/targets/cs_resourcelimit/aliases b/test/integration/targets/cs_resourcelimit/aliases
new file mode 100644
index 0000000000..ff33c0bb61
--- /dev/null
+++ b/test/integration/targets/cs_resourcelimit/aliases
@@ -0,0 +1,3 @@
+cloud/cs
+posix/ci/cloud/cs
+skip/python3
diff --git a/test/integration/roles/test_cs_resourcelimit/meta/main.yml b/test/integration/targets/cs_resourcelimit/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_resourcelimit/meta/main.yml
rename to test/integration/targets/cs_resourcelimit/meta/main.yml
diff --git a/test/integration/roles/test_cs_resourcelimit/tasks/cpu.yml b/test/integration/targets/cs_resourcelimit/tasks/cpu.yml
similarity index 100%
rename from test/integration/roles/test_cs_resourcelimit/tasks/cpu.yml
rename to test/integration/targets/cs_resourcelimit/tasks/cpu.yml
diff --git a/test/integration/roles/test_cs_resourcelimit/tasks/instance.yml b/test/integration/targets/cs_resourcelimit/tasks/instance.yml
similarity index 100%
rename from test/integration/roles/test_cs_resourcelimit/tasks/instance.yml
rename to test/integration/targets/cs_resourcelimit/tasks/instance.yml
diff --git a/test/integration/roles/test_cs_resourcelimit/tasks/main.yml b/test/integration/targets/cs_resourcelimit/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_resourcelimit/tasks/main.yml
rename to test/integration/targets/cs_resourcelimit/tasks/main.yml
diff --git a/test/integration/targets/cs_securitygroup/aliases b/test/integration/targets/cs_securitygroup/aliases
new file mode 100644
index 0000000000..ba249b99d7
--- /dev/null
+++ b/test/integration/targets/cs_securitygroup/aliases
@@ -0,0 +1,2 @@
+cloud/cs
+posix/ci/cloud/cs
diff --git a/test/integration/roles/test_cs_securitygroup/meta/main.yml b/test/integration/targets/cs_securitygroup/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_securitygroup/meta/main.yml
rename to test/integration/targets/cs_securitygroup/meta/main.yml
diff --git a/test/integration/roles/test_cs_securitygroup/tasks/main.yml b/test/integration/targets/cs_securitygroup/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_securitygroup/tasks/main.yml
rename to test/integration/targets/cs_securitygroup/tasks/main.yml
diff --git a/test/integration/targets/cs_securitygroup_rule/aliases b/test/integration/targets/cs_securitygroup_rule/aliases
new file mode 100644
index 0000000000..ba249b99d7
--- /dev/null
+++ b/test/integration/targets/cs_securitygroup_rule/aliases
@@ -0,0 +1,2 @@
+cloud/cs
+posix/ci/cloud/cs
diff --git a/test/integration/roles/test_cs_securitygroup_rule/meta/main.yml b/test/integration/targets/cs_securitygroup_rule/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_securitygroup_rule/meta/main.yml
rename to test/integration/targets/cs_securitygroup_rule/meta/main.yml
diff --git a/test/integration/roles/test_cs_securitygroup_rule/tasks/absent.yml b/test/integration/targets/cs_securitygroup_rule/tasks/absent.yml
similarity index 100%
rename from test/integration/roles/test_cs_securitygroup_rule/tasks/absent.yml
rename to test/integration/targets/cs_securitygroup_rule/tasks/absent.yml
diff --git a/test/integration/roles/test_cs_securitygroup_rule/tasks/cleanup.yml b/test/integration/targets/cs_securitygroup_rule/tasks/cleanup.yml
similarity index 100%
rename from test/integration/roles/test_cs_securitygroup_rule/tasks/cleanup.yml
rename to test/integration/targets/cs_securitygroup_rule/tasks/cleanup.yml
diff --git a/test/integration/roles/test_cs_securitygroup_rule/tasks/main.yml b/test/integration/targets/cs_securitygroup_rule/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_securitygroup_rule/tasks/main.yml
rename to test/integration/targets/cs_securitygroup_rule/tasks/main.yml
diff --git a/test/integration/roles/test_cs_securitygroup_rule/tasks/present.yml b/test/integration/targets/cs_securitygroup_rule/tasks/present.yml
similarity index 100%
rename from test/integration/roles/test_cs_securitygroup_rule/tasks/present.yml
rename to test/integration/targets/cs_securitygroup_rule/tasks/present.yml
diff --git a/test/integration/roles/test_cs_securitygroup_rule/tasks/setup.yml b/test/integration/targets/cs_securitygroup_rule/tasks/setup.yml
similarity index 100%
rename from test/integration/roles/test_cs_securitygroup_rule/tasks/setup.yml
rename to test/integration/targets/cs_securitygroup_rule/tasks/setup.yml
diff --git a/test/integration/targets/cs_user/aliases b/test/integration/targets/cs_user/aliases
new file mode 100644
index 0000000000..ff33c0bb61
--- /dev/null
+++ b/test/integration/targets/cs_user/aliases
@@ -0,0 +1,3 @@
+cloud/cs
+posix/ci/cloud/cs
+skip/python3
diff --git a/test/integration/roles/test_cs_user/meta/main.yml b/test/integration/targets/cs_user/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_user/meta/main.yml
rename to test/integration/targets/cs_user/meta/main.yml
diff --git a/test/integration/roles/test_cs_user/tasks/main.yml b/test/integration/targets/cs_user/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_cs_user/tasks/main.yml
rename to test/integration/targets/cs_user/tasks/main.yml
diff --git a/test/integration/targets/ec2_ami/aliases b/test/integration/targets/ec2_ami/aliases
new file mode 100644
index 0000000000..495c6e74ed
--- /dev/null
+++ b/test/integration/targets/ec2_ami/aliases
@@ -0,0 +1,2 @@
+cloud/aws
+posix/ci/cloud/aws
diff --git a/test/integration/roles/test_ec2_ami/defaults/main.yml b/test/integration/targets/ec2_ami/defaults/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_ami/defaults/main.yml
rename to test/integration/targets/ec2_ami/defaults/main.yml
diff --git a/test/integration/roles/test_ec2_ami/meta/main.yml b/test/integration/targets/ec2_ami/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_ami/meta/main.yml
rename to test/integration/targets/ec2_ami/meta/main.yml
diff --git a/test/integration/roles/test_ec2_ami/tasks/main.yml b/test/integration/targets/ec2_ami/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_ami/tasks/main.yml
rename to test/integration/targets/ec2_ami/tasks/main.yml
diff --git a/test/integration/roles/test_ec2_ami/vars/main.yml b/test/integration/targets/ec2_ami/vars/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_ami/vars/main.yml
rename to test/integration/targets/ec2_ami/vars/main.yml
diff --git a/test/integration/targets/ec2_elb_lb/aliases b/test/integration/targets/ec2_elb_lb/aliases
new file mode 100644
index 0000000000..495c6e74ed
--- /dev/null
+++ b/test/integration/targets/ec2_elb_lb/aliases
@@ -0,0 +1,2 @@
+cloud/aws
+posix/ci/cloud/aws
diff --git a/test/integration/roles/test_ec2_elb_lb/defaults/main.yml b/test/integration/targets/ec2_elb_lb/defaults/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_elb_lb/defaults/main.yml
rename to test/integration/targets/ec2_elb_lb/defaults/main.yml
diff --git a/test/integration/roles/test_ec2_elb_lb/meta/main.yml b/test/integration/targets/ec2_elb_lb/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_elb_lb/meta/main.yml
rename to test/integration/targets/ec2_elb_lb/meta/main.yml
diff --git a/test/integration/roles/test_ec2_elb_lb/tasks/main.yml b/test/integration/targets/ec2_elb_lb/tasks/main.yml
similarity index 99%
rename from test/integration/roles/test_ec2_elb_lb/tasks/main.yml
rename to test/integration/targets/ec2_elb_lb/tasks/main.yml
index b18d6b4f6c..1e933c2fe5 100644
--- a/test/integration/roles/test_ec2_elb_lb/tasks/main.yml
+++ b/test/integration/targets/ec2_elb_lb/tasks/main.yml
@@ -239,7 +239,7 @@
       assert:
         that:
            - 'result.failed'
-           - 'result.msg == "missing required arguments: name,state"'
+           - 'result.msg.startswith("missing required arguments: ")'
 
 
 
diff --git a/test/integration/roles/test_ec2_elb_lb/vars/main.yml b/test/integration/targets/ec2_elb_lb/vars/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_elb_lb/vars/main.yml
rename to test/integration/targets/ec2_elb_lb/vars/main.yml
diff --git a/test/integration/targets/ec2_facts/aliases b/test/integration/targets/ec2_facts/aliases
new file mode 100644
index 0000000000..495c6e74ed
--- /dev/null
+++ b/test/integration/targets/ec2_facts/aliases
@@ -0,0 +1,2 @@
+cloud/aws
+posix/ci/cloud/aws
diff --git a/test/integration/roles/test_ec2_facts/defaults/main.yml b/test/integration/targets/ec2_facts/defaults/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_facts/defaults/main.yml
rename to test/integration/targets/ec2_facts/defaults/main.yml
diff --git a/test/integration/roles/test_ec2_facts/meta/main.yml b/test/integration/targets/ec2_facts/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_facts/meta/main.yml
rename to test/integration/targets/ec2_facts/meta/main.yml
diff --git a/test/integration/roles/test_ec2_facts/tasks/main.yml b/test/integration/targets/ec2_facts/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_facts/tasks/main.yml
rename to test/integration/targets/ec2_facts/tasks/main.yml
diff --git a/test/integration/roles/test_ec2_facts/vars/main.yml b/test/integration/targets/ec2_facts/vars/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_facts/vars/main.yml
rename to test/integration/targets/ec2_facts/vars/main.yml
diff --git a/test/integration/targets/ec2_group/aliases b/test/integration/targets/ec2_group/aliases
new file mode 100644
index 0000000000..495c6e74ed
--- /dev/null
+++ b/test/integration/targets/ec2_group/aliases
@@ -0,0 +1,2 @@
+cloud/aws
+posix/ci/cloud/aws
diff --git a/test/integration/roles/test_ec2_group/defaults/main.yml b/test/integration/targets/ec2_group/defaults/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_group/defaults/main.yml
rename to test/integration/targets/ec2_group/defaults/main.yml
diff --git a/test/integration/roles/test_ec2_group/meta/main.yml b/test/integration/targets/ec2_group/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_group/meta/main.yml
rename to test/integration/targets/ec2_group/meta/main.yml
diff --git a/test/integration/roles/test_ec2_group/tasks/main.yml b/test/integration/targets/ec2_group/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_group/tasks/main.yml
rename to test/integration/targets/ec2_group/tasks/main.yml
diff --git a/test/integration/targets/ec2_key/aliases b/test/integration/targets/ec2_key/aliases
new file mode 100644
index 0000000000..535600b17e
--- /dev/null
+++ b/test/integration/targets/ec2_key/aliases
@@ -0,0 +1,3 @@
+cloud/aws
+posix/ci/cloud/aws
+skip/python3
diff --git a/test/integration/roles/test_ec2_key/defaults/main.yml b/test/integration/targets/ec2_key/defaults/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_key/defaults/main.yml
rename to test/integration/targets/ec2_key/defaults/main.yml
diff --git a/test/integration/roles/test_ec2_key/meta/main.yml b/test/integration/targets/ec2_key/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_key/meta/main.yml
rename to test/integration/targets/ec2_key/meta/main.yml
diff --git a/test/integration/roles/test_ec2_key/tasks/main.yml b/test/integration/targets/ec2_key/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_key/tasks/main.yml
rename to test/integration/targets/ec2_key/tasks/main.yml
diff --git a/test/integration/targets/ec2_tag/aliases b/test/integration/targets/ec2_tag/aliases
new file mode 100644
index 0000000000..495c6e74ed
--- /dev/null
+++ b/test/integration/targets/ec2_tag/aliases
@@ -0,0 +1,2 @@
+cloud/aws
+posix/ci/cloud/aws
diff --git a/test/integration/roles/test_ec2_tag/defaults/main.yml b/test/integration/targets/ec2_tag/defaults/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_tag/defaults/main.yml
rename to test/integration/targets/ec2_tag/defaults/main.yml
diff --git a/test/integration/roles/test_ec2_tag/meta/main.yml b/test/integration/targets/ec2_tag/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_tag/meta/main.yml
rename to test/integration/targets/ec2_tag/meta/main.yml
diff --git a/test/integration/roles/test_ec2_tag/tasks/main.yml b/test/integration/targets/ec2_tag/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_tag/tasks/main.yml
rename to test/integration/targets/ec2_tag/tasks/main.yml
diff --git a/test/integration/roles/test_ec2_tag/vars/main.yml b/test/integration/targets/ec2_tag/vars/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_tag/vars/main.yml
rename to test/integration/targets/ec2_tag/vars/main.yml
diff --git a/test/integration/targets/ec2_vol/aliases b/test/integration/targets/ec2_vol/aliases
new file mode 100644
index 0000000000..495c6e74ed
--- /dev/null
+++ b/test/integration/targets/ec2_vol/aliases
@@ -0,0 +1,2 @@
+cloud/aws
+posix/ci/cloud/aws
diff --git a/test/integration/roles/test_ec2_vol/defaults/main.yml b/test/integration/targets/ec2_vol/defaults/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_vol/defaults/main.yml
rename to test/integration/targets/ec2_vol/defaults/main.yml
diff --git a/test/integration/roles/test_ec2_vol/meta/main.yml b/test/integration/targets/ec2_vol/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_vol/meta/main.yml
rename to test/integration/targets/ec2_vol/meta/main.yml
diff --git a/test/integration/roles/test_ec2_vol/tasks/main.yml b/test/integration/targets/ec2_vol/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_vol/tasks/main.yml
rename to test/integration/targets/ec2_vol/tasks/main.yml
diff --git a/test/integration/roles/test_ec2_vol/vars/main.yml b/test/integration/targets/ec2_vol/vars/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_vol/vars/main.yml
rename to test/integration/targets/ec2_vol/vars/main.yml
diff --git a/test/integration/targets/ec2_vpc/aliases b/test/integration/targets/ec2_vpc/aliases
new file mode 100644
index 0000000000..495c6e74ed
--- /dev/null
+++ b/test/integration/targets/ec2_vpc/aliases
@@ -0,0 +1,2 @@
+cloud/aws
+posix/ci/cloud/aws
diff --git a/test/integration/roles/test_ec2_vpc/defaults/main.yml b/test/integration/targets/ec2_vpc/defaults/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_vpc/defaults/main.yml
rename to test/integration/targets/ec2_vpc/defaults/main.yml
diff --git a/test/integration/roles/test_ec2_vpc/meta/main.yml b/test/integration/targets/ec2_vpc/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_vpc/meta/main.yml
rename to test/integration/targets/ec2_vpc/meta/main.yml
diff --git a/test/integration/roles/test_ec2_vpc/tasks/main.yml b/test/integration/targets/ec2_vpc/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_vpc/tasks/main.yml
rename to test/integration/targets/ec2_vpc/tasks/main.yml
diff --git a/test/integration/roles/test_ec2_vpc/vars/main.yml b/test/integration/targets/ec2_vpc/vars/main.yml
similarity index 100%
rename from test/integration/roles/test_ec2_vpc/vars/main.yml
rename to test/integration/targets/ec2_vpc/vars/main.yml
diff --git a/test/integration/targets/ecs_ecr/aliases b/test/integration/targets/ecs_ecr/aliases
new file mode 100644
index 0000000000..495c6e74ed
--- /dev/null
+++ b/test/integration/targets/ecs_ecr/aliases
@@ -0,0 +1,2 @@
+cloud/aws
+posix/ci/cloud/aws
diff --git a/test/integration/roles/test_ecs_ecr/defaults/main.yml b/test/integration/targets/ecs_ecr/defaults/main.yml
similarity index 100%
rename from test/integration/roles/test_ecs_ecr/defaults/main.yml
rename to test/integration/targets/ecs_ecr/defaults/main.yml
diff --git a/test/integration/roles/test_ecs_ecr/meta/main.yml b/test/integration/targets/ecs_ecr/meta/main.yml
similarity index 100%
rename from test/integration/roles/test_ecs_ecr/meta/main.yml
rename to test/integration/targets/ecs_ecr/meta/main.yml
diff --git a/test/integration/roles/test_ecs_ecr/tasks/main.yml b/test/integration/targets/ecs_ecr/tasks/main.yml
similarity index 100%
rename from test/integration/roles/test_ecs_ecr/tasks/main.yml
rename to test/integration/targets/ecs_ecr/tasks/main.yml
diff --git a/test/integration/roles/setup_ec2/defaults/main.yml b/test/integration/targets/setup_ec2/defaults/main.yml
similarity index 100%
rename from test/integration/roles/setup_ec2/defaults/main.yml
rename to test/integration/targets/setup_ec2/defaults/main.yml
diff --git a/test/integration/roles/setup_ec2/tasks/common.yml b/test/integration/targets/setup_ec2/tasks/common.yml
similarity index 100%
rename from test/integration/roles/setup_ec2/tasks/common.yml
rename to test/integration/targets/setup_ec2/tasks/common.yml
diff --git a/test/integration/roles/setup_sshkey/tasks/main.yml b/test/integration/targets/setup_sshkey/tasks/main.yml
similarity index 100%
rename from test/integration/roles/setup_sshkey/tasks/main.yml
rename to test/integration/targets/setup_sshkey/tasks/main.yml
diff --git a/test/integration/targets/test_cs_common/aliases b/test/integration/targets/test_cs_common/aliases
new file mode 100644
index 0000000000..136c05e0d0
--- /dev/null
+++ b/test/integration/targets/test_cs_common/aliases
@@ -0,0 +1 @@
+hidden
diff --git a/test/integration/targets/test_cs_common/defaults/main.yml b/test/integration/targets/test_cs_common/defaults/main.yml
new file mode 100644
index 0000000000..ba9674ac92
--- /dev/null
+++ b/test/integration/targets/test_cs_common/defaults/main.yml
@@ -0,0 +1,2 @@
+---
+cs_resource_prefix: cloudstack
diff --git a/test/utils/shippable/cloud.sh b/test/utils/shippable/cloud.sh
new file mode 100755
index 0000000000..37535cf5e7
--- /dev/null
+++ b/test/utils/shippable/cloud.sh
@@ -0,0 +1,11 @@
+#!/bin/bash -eux
+
+set -o pipefail
+
+declare -a args
+IFS='/:' read -ra args <<< "${TEST}"
+
+image="ansible/ansible:${args[1]}"
+target="posix/ci/cloud/"
+
+ansible-test integration --color -v --retry-on-error "${target}" --docker "${image}"
diff --git a/test/utils/shippable/freebsd.sh b/test/utils/shippable/freebsd.sh
index 53b57b152b..5af7eab052 100755
--- a/test/utils/shippable/freebsd.sh
+++ b/test/utils/shippable/freebsd.sh
@@ -9,4 +9,4 @@ platform="${args[0]}"
 version="${args[1]}"
 target="posix/ci/"
 
-ansible-test integration --color -v --retry-on-error "${target}" --remote "${platform}/${version}"
+ansible-test integration --color -v --retry-on-error "${target}" --remote "${platform}/${version}" --exclude "posix/ci/cloud/"
diff --git a/test/utils/shippable/osx.sh b/test/utils/shippable/osx.sh
index 53b57b152b..5af7eab052 100755
--- a/test/utils/shippable/osx.sh
+++ b/test/utils/shippable/osx.sh
@@ -9,4 +9,4 @@ platform="${args[0]}"
 version="${args[1]}"
 target="posix/ci/"
 
-ansible-test integration --color -v --retry-on-error "${target}" --remote "${platform}/${version}"
+ansible-test integration --color -v --retry-on-error "${target}" --remote "${platform}/${version}" --exclude "posix/ci/cloud/"
