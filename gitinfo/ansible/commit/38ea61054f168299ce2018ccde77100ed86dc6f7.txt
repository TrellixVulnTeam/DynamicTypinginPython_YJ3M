commit 38ea61054f168299ce2018ccde77100ed86dc6f7
Author: Seth Vidal <skvidal@fedoraproject.org>
Date:   Thu May 3 15:52:02 2012 -0400

    if a playbook has no vars - still include the global vars

diff --git a/lib/ansible/playbook.py b/lib/ansible/playbook.py
index bba7e1f1bd..9f15784f1f 100644
--- a/lib/ansible/playbook.py
+++ b/lib/ansible/playbook.py
@@ -135,7 +135,7 @@ class PlayBook(object):
                 k, v = item.items()[0]
                 vars[k] = v
         else:
-            vars = play['vars']
+            vars.update(play['vars'])
 
         vars_prompt = play.get('vars_prompt', {})
         if type(vars_prompt) != dict:
