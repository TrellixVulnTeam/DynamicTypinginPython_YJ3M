commit 8f8109f1e0cfaefd5270358dd72ab35ced271dcb
Author: Johann Schmitz <johann@j-schmitz.net>
Date:   Tue May 26 16:13:40 2015 +0200

    Improved output of mysql_db plugin
    
    Show error number and error description on connect error to ease debugging.

diff --git a/lib/ansible/modules/database/mysql/mysql_db.py b/lib/ansible/modules/database/mysql/mysql_db.py
index 05db6beb07..b9d862b56a 100644
--- a/lib/ansible/modules/database/mysql/mysql_db.py
+++ b/lib/ansible/modules/database/mysql/mysql_db.py
@@ -346,11 +346,11 @@ def main():
             db_connection = MySQLdb.connect(host=module.params["login_host"], port=login_port, user=login_user, passwd=login_password, db=connect_to_db)
         cursor = db_connection.cursor()
     except Exception, e:
+        errno, errstr = e.args
         if "Unknown database" in str(e):
-                errno, errstr = e.args
                 module.fail_json(msg="ERROR: %s %s" % (errno, errstr))
         else:
-                module.fail_json(msg="unable to connect, check login credentials (login_user, and login_password, which can be defined in ~/.my.cnf), check that mysql socket exists and mysql server is running")
+                module.fail_json(msg="unable to connect, check login credentials (login_user, and login_password, which can be defined in ~/.my.cnf), check that mysql socket exists and mysql server is running (ERROR: %s %s)" % (errno, errstr))
 
     changed = False
     if db_exists(cursor, db):
