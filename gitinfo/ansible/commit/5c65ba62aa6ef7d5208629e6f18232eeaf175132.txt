commit 5c65ba62aa6ef7d5208629e6f18232eeaf175132
Author: Yanis Guenane <yanis@guenane.org>
Date:   Wed Aug 15 00:20:24 2018 +0200

    scaleway: Introduce scaleway_ip_facts module
    
    Co-authored-by: RÃ©my Leone <rleone@online.net>

diff --git a/lib/ansible/modules/cloud/scaleway/scaleway_ip_facts.py b/lib/ansible/modules/cloud/scaleway/scaleway_ip_facts.py
new file mode 100644
index 0000000000..0f8d7f5b9c
--- /dev/null
+++ b/lib/ansible/modules/cloud/scaleway/scaleway_ip_facts.py
@@ -0,0 +1,81 @@
+#!/usr/bin/python
+# -*- coding: utf-8 -*-
+#
+# (c) 2018, Yanis Guenane <yanis+ansible@guenane.org>
+# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)
+
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
+
+ANSIBLE_METADATA = {'metadata_version': '1.1',
+                    'status': ['preview'],
+                    'supported_by': 'community'}
+
+DOCUMENTATION = r'''
+---
+module: scaleway_ip_facts
+short_description: Gather facts about the Scaleway ips available.
+description:
+  - Gather facts about the Scaleway ips available.
+version_added: "2.7"
+author:
+  - "Yanis Guenane (@Spredzy)"
+  - "Remy Leone (@sieben)"
+extends_documentation_fragment: scaleway
+'''
+
+EXAMPLES = r'''
+- name: Gather Scaleway ips facts
+  scaleway_ip_facts:
+'''
+
+RETURN = r'''
+---
+scaleway_ip_facts:
+  description: Response from Scaleway API
+  returned: success
+  type: complex
+  contains:
+    "scaleway_ip_facts": [
+        {
+            "address": "163.172.170.243",
+            "id": "ea081794-a581-8899-8451-386ddaf0a451",
+            "organization": "3f709602-5e6c-4619-b80c-e324324324af",
+            "reverse": null,
+            "server": {
+                "id": "12f19bc7-109c-4517-954c-e6b3d0311363",
+                "name": "scw-e0d158"
+            }
+        }
+    ]
+'''
+
+from ansible.module_utils.basic import AnsibleModule
+from ansible.module_utils.scaleway import (
+    Scaleway, ScalewayException, scaleway_argument_spec
+)
+
+
+class ScalewayIpFacts(Scaleway):
+
+    def __init__(self, module):
+        super(ScalewayIpFacts, self).__init__(module)
+        self.name = 'ips'
+
+
+def main():
+    module = AnsibleModule(
+        argument_spec=scaleway_argument_spec(),
+        supports_check_mode=True,
+    )
+
+    try:
+        module.exit_json(
+            ansible_facts={'scaleway_ip_facts': ScalewayIpFacts(module).get_resources()}
+        )
+    except ScalewayException as exc:
+        module.fail_json(msg=exc.message)
+
+
+if __name__ == '__main__':
+    main()
diff --git a/test/legacy/roles/scaleway_ip_facts/tasks/main.yml b/test/legacy/roles/scaleway_ip_facts/tasks/main.yml
new file mode 100644
index 0000000000..826b0685cc
--- /dev/null
+++ b/test/legacy/roles/scaleway_ip_facts/tasks/main.yml
@@ -0,0 +1,12 @@
+- name: Get ip informations and register it in a variable
+  scaleway_ip_facts:
+  register: ips
+
+- name: Display ips variable
+  debug:
+    var: ips
+
+- name: Ensure retrieval of ips facts is success
+  assert:
+    that:
+      - ips is success
diff --git a/test/legacy/scaleway.yml b/test/legacy/scaleway.yml
index 80be835f20..cda957b823 100644
--- a/test/legacy/scaleway.yml
+++ b/test/legacy/scaleway.yml
@@ -8,6 +8,7 @@
   roles:
     - { role: scaleway_compute, tags: test_scaleway_compute }
     - { role: scaleway_image_facts, tags: test_scaleway_image_facts }
+    - { role: scaleway_ip_facts, tags: test_scaleway_ip_facts }
     - { role: scaleway_security_group_facts, tags: test_scaleway_security_group_facts }
     - { role: scaleway_ssh, tags: test_scaleway_ssh }
     - { role: scaleway_volume, tags: test_scaleway_volume }
