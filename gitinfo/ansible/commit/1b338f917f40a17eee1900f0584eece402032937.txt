commit 1b338f917f40a17eee1900f0584eece402032937
Author: Ruben Tsirunyan <rubentsirunyan@gmail.com>
Date:   Fri Mar 1 16:25:56 2019 +0400

    Fixing mediatype default value (#53114)
    
    * Fixing mediatype default value
    
    * Updating the documentation of media_type

diff --git a/lib/ansible/modules/monitoring/zabbix/zabbix_action.py b/lib/ansible/modules/monitoring/zabbix/zabbix_action.py
index 9c88569138..8e77b2c0b7 100644
--- a/lib/ansible/modules/monitoring/zabbix/zabbix_action.py
+++ b/lib/ansible/modules/monitoring/zabbix/zabbix_action.py
@@ -233,6 +233,8 @@ options:
             media_type:
                 description:
                     - Media type that will be used to send the message.
+                    - Set to C(all) for all media types
+                default: 'all'
             host_groups:
                 type: list
                 description:
@@ -664,6 +666,8 @@ class Zapi(object):
 
         """
         try:
+            if str(mediatype_name).lower() == 'all':
+                return '0'
             mediatype_list = self._zapi.mediatype.get({
                 'output': 'extend',
                 'selectInventory': 'extend',
@@ -672,7 +676,7 @@ class Zapi(object):
             if len(mediatype_list) < 1:
                 self._module.fail_json(msg="Media type not found: %s" % mediatype_name)
             else:
-                return mediatype_list[0]
+                return mediatype_list[0]['mediatypeid']
         except Exception as e:
             self._module.fail_json(msg="Failed to get mediatype '%s': %s" % (mediatype_name, e))
 
@@ -913,7 +917,7 @@ class Operations(object):
                 'default_msg': '0' if 'message' in operation or 'subject' in operation else '1',
                 'mediatypeid': self._zapi_wrapper.get_mediatype_by_mediatype_name(
                     operation.get('media_type')
-                )['mediatypeid'] if operation.get('media_type') is not None else None,
+                ) if operation.get('media_type') is not None else '0',
                 'message': operation.get('message'),
                 'subject': operation.get('subject'),
             }
