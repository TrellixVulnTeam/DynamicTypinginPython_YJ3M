commit 19d40cc54ce65b346901e4f040ec9007a57b3fb7
Author: Sebastien Goasguen <runseb@gmail.com>
Date:   Wed Dec 10 11:26:21 2014 -0500

    Add tags for inventory

diff --git a/plugins/inventory/apache-libcloud.py b/plugins/inventory/apache-libcloud.py
index 95804095da..151daeefe0 100755
--- a/plugins/inventory/apache-libcloud.py
+++ b/plugins/inventory/apache-libcloud.py
@@ -222,12 +222,17 @@ class LibcloudInventory(object):
         self.push(self.inventory, self.to_safe('type_' + node.instance_type), dest)
         '''
         # Inventory: Group by key pair
-        if node.extra['keyname']:
-            self.push(self.inventory, self.to_safe('key_' + node.extra['keyname']), dest)
+        if node.extra['key_name']:
+            self.push(self.inventory, self.to_safe('key_' + node.extra['key_name']), dest)
             
         # Inventory: Group by security group, quick thing to handle single sg
-        if node.extra['securitygroup']:
-            self.push(self.inventory, self.to_safe('sg_' + node.extra['securitygroup'][0]), dest)
+        if node.extra['security_group']:
+            self.push(self.inventory, self.to_safe('sg_' + node.extra['security_group'][0]), dest)
+
+        # Inventory: Group by tag
+        if node.extra['tags']:
+            for tagkey in node.extra['tags'].keys():
+                self.push(self.inventory, self.to_safe('tag_' + tagkey + '_' + node.extra['tags'][tagkey]), dest)
 
     def get_host_info(self):
         '''
