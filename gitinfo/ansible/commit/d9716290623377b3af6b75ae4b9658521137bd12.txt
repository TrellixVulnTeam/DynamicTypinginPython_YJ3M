commit d9716290623377b3af6b75ae4b9658521137bd12
Author: Sloane Hertel <shertel@redhat.com>
Date:   Tue Jul 18 16:21:11 2017 -0400

    [cloud] Fix ASG updates when LaunchConfigurationName does not exist for ASG instances
    
    when replacing launch configurations the previous launch config is removed from any instances (#26966)

diff --git a/lib/ansible/modules/cloud/amazon/ec2_asg.py b/lib/ansible/modules/cloud/amazon/ec2_asg.py
index ba1fef213d..3bc276e40a 100644
--- a/lib/ansible/modules/cloud/amazon/ec2_asg.py
+++ b/lib/ansible/modules/cloud/amazon/ec2_asg.py
@@ -423,7 +423,7 @@ def get_properties(autoscaling_group, module):
         for i in autoscaling_group_instances:
             instance_facts[i['InstanceId']] = {'health_status': i['HealthStatus'],
                                                'lifecycle_state': i['LifecycleState'],
-                                               'launch_config_name': i['LaunchConfigurationName']}
+                                               'launch_config_name': i.get('LaunchConfigurationName')}
             if i['HealthStatus'] == 'Healthy' and i['LifecycleState'] == 'InService':
                 properties['viable_instances'] += 1
             if i['HealthStatus'] == 'Healthy':
