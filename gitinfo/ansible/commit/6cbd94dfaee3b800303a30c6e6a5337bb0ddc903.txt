commit 6cbd94dfaee3b800303a30c6e6a5337bb0ddc903
Author: Stoned Elipot <stoned.elipot@gmail.com>
Date:   Mon Sep 2 12:26:02 2013 +0200

    Avoid duplicates of the 'all' group when using inventory script.
    
    Do not recreate an 'all' group when it is in the inventory script's
    output, but use the one created upfront.

diff --git a/lib/ansible/inventory/script.py b/lib/ansible/inventory/script.py
index 42c46559d9..9474c3ebd7 100644
--- a/lib/ansible/inventory/script.py
+++ b/lib/ansible/inventory/script.py
@@ -72,7 +72,10 @@ class InventoryScript(object):
                     self.host_vars_from_top = data['hostvars']
                     continue
 
-            group = groups[group_name] = Group(group_name)
+            if group_name != all.name:
+                group = groups[group_name] = Group(group_name)
+            else:
+                group = all
             host = None
 
             if not isinstance(data, dict):
