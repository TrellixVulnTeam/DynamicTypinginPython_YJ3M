commit c6391741a2fbd06bbcea392b8a32cfd3d716a76b
Author: Michael Scherer <misc@zarb.org>
Date:   Sat Jul 25 11:57:21 2015 +0200

    Do not assume that /var/lib/locales/supported.d/local exist
    
    Since people can generate their own image with debootstrap, and
    this wouldn't create a file /var/lib/locales/supported.d/local,
    better check if it exist and work if it doesn't.
    
    Fix #656

diff --git a/lib/ansible/modules/extras/system/locale_gen.py b/lib/ansible/modules/extras/system/locale_gen.py
index 06503b07ab..acf5b78ec9 100644
--- a/lib/ansible/modules/extras/system/locale_gen.py
+++ b/lib/ansible/modules/extras/system/locale_gen.py
@@ -175,7 +175,7 @@ def main():
     state = module.params['state']
 
     if not os.path.exists("/etc/locale.gen"):
-        if os.path.exists("/var/lib/locales/supported.d/local"):
+        if os.path.exists("/var/lib/locales/supported.d/"):
             # Ubuntu created its own system to manage locales.
             ubuntuMode = True
         else:
