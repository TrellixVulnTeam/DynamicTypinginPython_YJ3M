commit a17ca862fb2d3de4efc30367d35480a80cb1d16e
Author: serenecloud <ben@crimson.net.nz>
Date:   Sun Jun 30 15:36:13 2013 +1200

    Return a friendly error message if aptitude isn't installed

diff --git a/library/packaging/apt b/library/packaging/apt
index a352cabf66..5f8c97aa39 100644
--- a/library/packaging/apt
+++ b/library/packaging/apt
@@ -286,6 +286,9 @@ def main():
     global APT_GET_CMD
     APT_GET_CMD = module.get_bin_path("apt-get")
 
+    if not APTITUDE_CMD:
+      module.fail_json(msg="Could not find aptitude. Please ensure it is installed.")
+
     p = module.params
     install_recommends = p['install_recommends']
 
