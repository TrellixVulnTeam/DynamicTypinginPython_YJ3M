commit 917b6b0d0938b35790fc9467c3fa82b968fbd182
Author: Brian Coca <bcoca@ansible.com>
Date:   Mon Jul 23 00:48:40 2018 -0400

    import_playbook is not usable from inside a play
    
    (cherry picked from commit 55dddf530ad094810929823f80c4546e97a69ac7)

diff --git a/lib/ansible/cli/adhoc.py b/lib/ansible/cli/adhoc.py
index 437687cf8c..40026ff851 100644
--- a/lib/ansible/cli/adhoc.py
+++ b/lib/ansible/cli/adhoc.py
@@ -134,6 +134,10 @@ class AdHocCLI(CLI):
                 err = err + ' (did you mean to run ansible-playbook?)'
             raise AnsibleOptionsError(err)
 
+        # Avoid modules that don't work with ad-hoc
+        if self.options.module_name in ('import_playbook',):
+            raise AnsibleOptionsError("'%s' is not a valid action for ad-hoc commands" % self.options.module_name)
+
         play_ds = self._play_ds(pattern, self.options.seconds, self.options.poll_interval)
         play = Play().load(play_ds, variable_manager=variable_manager, loader=loader)
 
