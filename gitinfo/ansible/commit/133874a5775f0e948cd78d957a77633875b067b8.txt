commit 133874a5775f0e948cd78d957a77633875b067b8
Author: Daniel Hokka Zakrisson <daniel@hozac.com>
Date:   Mon Jan 28 12:40:18 2013 +0100

    Fix module.run_command usage in fireball

diff --git a/library/fireball b/library/fireball
index 6eb363723e..11a0b61188 100644
--- a/library/fireball
+++ b/library/fireball
@@ -143,7 +143,7 @@ def daemonize_self(module, password, port, minutes):
     os.dup2(dev_null.fileno(), sys.stderr.fileno())
     log("daemonizing successful (%s,%s)" % (password, port))
 
-def command(data):
+def command(module, data):
     if 'cmd' not in data:
         return dict(failed=True, msg='internal error: cmd is required')
     if 'tmp_path' not in data:
@@ -220,7 +220,7 @@ def serve(module, password, port, minutes):
         response = {}
 
         if mode == 'command':
-            response = command(data)
+            response = command(module, data)
         elif mode == 'put':
             response = put(data)
         elif mode == 'fetch':
