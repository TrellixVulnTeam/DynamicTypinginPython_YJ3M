commit 81540bd754e8f96857057e3391f0d299273ebec2
Author: Adam Miller <admiller@redhat.com>
Date:   Wed Nov 28 12:28:21 2018 -0600

    require git when trying to use it in ansible-galaxy cli (#49212)
    
    * require git when trying to use it in ansible-galaxy cli
    
    Previously we weren't setting `required=True` when calling
    `get_bin_path` and the path would return `None`, this would cause
    a traceback when attempting to ' '.join() to create a string
    representation of the failed command for error output
    
    Fixes #49200
    
    Signed-off-by: Adam Miller <admiller@redhat.com>
    
    * add changelog
    
    Signed-off-by: Adam Miller <admiller@redhat.com>

diff --git a/changelogs/fragments/49212-require-git-ansible-galaxy.yaml b/changelogs/fragments/49212-require-git-ansible-galaxy.yaml
new file mode 100644
index 0000000000..62bf5058c8
--- /dev/null
+++ b/changelogs/fragments/49212-require-git-ansible-galaxy.yaml
@@ -0,0 +1,2 @@
+minor_changes:
+ - "ansible-galaxy: properly warn when git isn't found in an installed bin path instead of traceback"
diff --git a/lib/ansible/playbook/role/requirement.py b/lib/ansible/playbook/role/requirement.py
index d77dda6991..66f07dee9a 100644
--- a/lib/ansible/playbook/role/requirement.py
+++ b/lib/ansible/playbook/role/requirement.py
@@ -154,7 +154,7 @@ class RoleRequirement(RoleDefinition):
             raise AnsibleError("- scm %s is not currently supported" % scm)
 
         try:
-            scm_path = get_bin_path(scm)
+            scm_path = get_bin_path(scm, required=True)
         except (ValueError, OSError, IOError):
             raise AnsibleError("could not find/use %s, it is required to continue with installing %s" % (scm, src))
 
