commit 279098bd034701acfb7ff5d6f03061b90780e10f
Author: Dag HÃ¸idahl <dag@onliveresearch.no>
Date:   Fri Jan 3 15:15:20 2014 +0100

    Use "brew list <name>" instead of grepping the output of "brew list".
    
    Some brew packages are not listed with their package name, e.g. libjpeg.

diff --git a/library/packaging/homebrew b/library/packaging/homebrew
index 8801a4e6c4..ab1362acf1 100644
--- a/library/packaging/homebrew
+++ b/library/packaging/homebrew
@@ -71,7 +71,7 @@ def query_package(module, brew_path, name, state="present"):
     """ Returns whether a package is installed or not. """
 
     if state == "present":
-        rc, out, err = module.run_command("%s list -m1 | grep -q '^%s$'" % (brew_path, name))
+        rc, out, err = module.run_command("%s list %s" % (brew_path, name))
         if rc == 0:
             return True
 
