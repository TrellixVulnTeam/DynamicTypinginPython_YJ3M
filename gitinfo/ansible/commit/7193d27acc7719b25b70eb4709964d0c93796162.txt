commit 7193d27acc7719b25b70eb4709964d0c93796162
Author: Eric Feliksik <e.feliksik@nerdalize.com>
Date:   Mon Jan 4 17:19:35 2016 +0100

    add os.fsync() so that the shredding data (hopefully) hits the drive

diff --git a/lib/ansible/parsing/vault/__init__.py b/lib/ansible/parsing/vault/__init__.py
index b7304d156f..1eca0cd571 100644
--- a/lib/ansible/parsing/vault/__init__.py
+++ b/lib/ansible/parsing/vault/__init__.py
@@ -235,9 +235,10 @@ class VaultEditor:
         passes = 3
         with open(tmp_path,  "w") as fh:
             for _ in range(int(passes)):
+                fh.seek(0,  0)
                 data = generate_data(ld)
                 fh.write(data)
-                fh.seek(0,  0)
+                os.fsync(fh)
         os.remove(tmp_path)
         
     def _edit_file_helper(self, filename, existing_data=None, force_save=False):
