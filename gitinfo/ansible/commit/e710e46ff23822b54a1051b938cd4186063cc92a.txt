commit e710e46ff23822b54a1051b938cd4186063cc92a
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Thu Mar 26 12:12:09 2015 -0700

    Make lack of boto call fail_json instead of sys.exit
    
    Fixes #994

diff --git a/lib/ansible/modules/cloud/amazon/cloudformation.py b/lib/ansible/modules/cloud/amazon/cloudformation.py
index 6963fb6f1d..44121a5c6d 100644
--- a/lib/ansible/modules/cloud/amazon/cloudformation.py
+++ b/lib/ansible/modules/cloud/amazon/cloudformation.py
@@ -125,9 +125,9 @@ import time
 try:
     import boto
     import boto.cloudformation.connection
+    HAS_BOTO = True
 except ImportError:
-    print "failed=True msg='boto required for this module'"
-    sys.exit(1)
+    HAS_BOTO = False
 
 
 def boto_exception(err):
@@ -219,6 +219,8 @@ def main():
     module = AnsibleModule(
         argument_spec=argument_spec,
     )
+    if not HAS_BOTO:
+        module.fail_json(msg='boto required for this module')
 
     state = module.params['state']
     stack_name = module.params['stack_name']
