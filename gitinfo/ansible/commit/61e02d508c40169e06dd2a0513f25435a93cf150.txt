commit 61e02d508c40169e06dd2a0513f25435a93cf150
Author: Seth Vidal <skvidal@fedoraproject.org>
Date:   Wed Aug 8 14:02:38 2012 -0400

    add show-duplicates to reqpoquery to keep people who
    want to install an old package happy.

diff --git a/library/yum b/library/yum
index df47cdd9d7..728d12aaf5 100755
--- a/library/yum
+++ b/library/yum
@@ -349,10 +349,10 @@ def ensure(module, state, pkgspec, conf_file):
         items = pkgspec.split(',')
 
     yum_basecmd = '%s -d 1 -y ' % yumbin
-    repoq = '%s --plugins --quiet  -q ' % repoquery
+    repoq = '%s --show-duplicates --plugins --quiet  -q ' % repoquery
     if conf_file and os.path.exists(conf_file):
         yum_basecmd = '%s -c %s -d 1 -y' % (yumbin, conf_file)
-        repoq = '%s -c %s --plugins --quiet  -q ' % (repoquery,conf_file)
+        repoq = '%s --show-duplicates -c %s --plugins --quiet  -q ' % (repoquery,conf_file)
 
     if state in ['installed', 'present']:
         install(module, items, repoq, yum_basecmd)
