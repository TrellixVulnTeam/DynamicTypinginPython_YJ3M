commit 1c49cc4377459d8848cc11c8fea117cdcffcb4d9
Author: Martin Krizek <martin.krizek@gmail.com>
Date:   Wed Apr 25 14:50:20 2018 +0200

    Actually check for import_role when loop detected (#39218)

diff --git a/lib/ansible/playbook/helpers.py b/lib/ansible/playbook/helpers.py
index 248a840bb0..86c0c14f84 100644
--- a/lib/ansible/playbook/helpers.py
+++ b/lib/ansible/playbook/helpers.py
@@ -317,7 +317,7 @@ def load_list_of_tasks(ds, play, block=None, role=None, task_include=None, use_h
 
                 if is_static:
                     if ir.loop is not None:
-                        if 'import_tasks' in task_ds:
+                        if 'import_role' in task_ds:
                             raise AnsibleParserError("You cannot use loops on 'import_role' statements. You should use 'include_role' instead.", obj=task_ds)
                         else:
                             raise AnsibleParserError("You cannot use 'static' on an include_role with a loop", obj=task_ds)
