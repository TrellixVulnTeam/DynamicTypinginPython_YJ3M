commit c9e62d7061d6b00d85d9e0726eb443c18278f3b7
Author: Dag Wieers <dag@wieers.com>
Date:   Wed Nov 7 15:16:00 2012 +0100

    Fix for an exception when for whatever reason the inventory script fails
    
    This avoids a traceback that gave no clue as to what was happening.
    
    This is in line with the change from #1535

diff --git a/lib/ansible/inventory/__init__.py b/lib/ansible/inventory/__init__.py
index 865a6acf8d..3c679ba67e 100644
--- a/lib/ansible/inventory/__init__.py
+++ b/lib/ansible/inventory/__init__.py
@@ -279,12 +279,12 @@ class Inventory(object):
                 vars.update(updated)
 
         if self._is_script:
-            cmd = subprocess.Popen(
-                [self.host_list,"--host",hostname],
-                stdout=subprocess.PIPE,
-                stderr=subprocess.PIPE
-            )
-            (out, err) = cmd.communicate()
+            cmd = [self.host_list,"--host",hostname]
+            try:
+                sp = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
+            except OSError, e:
+                raise errors.AnsibleError("problem running %s (%s)" % (' '.join(cmd), e))
+            (out, err) = sp.communicate()
             results = utils.parse_json(out)
 
             # FIXME: this is a bit redundant with host.py and should share code
