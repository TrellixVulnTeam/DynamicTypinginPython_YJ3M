commit 3383a7b37aa6aa1697369233d58182614636b453
Author: Leonid Evdokimov <leon@darkk.net.ru>
Date:   Sat Jul 5 09:15:57 2014 +0400

    tests: replace start-stop-daemon with async action

diff --git a/test/integration/roles/test_uri/handlers/main.yml b/test/integration/roles/test_uri/handlers/main.yml
deleted file mode 100644
index 2283208d19..0000000000
--- a/test/integration/roles/test_uri/handlers/main.yml
+++ /dev/null
@@ -1,3 +0,0 @@
----
-- name: stop SimpleHTTPServer
-  shell: start-stop-daemon --stop --pidfile {{ output_dir }}/SimpleHTTPServer.pid --exec {{ py2.stdout }}
diff --git a/test/integration/roles/test_uri/tasks/main.yml b/test/integration/roles/test_uri/tasks/main.yml
index 6dd23df86c..c41590636d 100644
--- a/test/integration/roles/test_uri/tasks/main.yml
+++ b/test/integration/roles/test_uri/tasks/main.yml
@@ -27,8 +27,9 @@
   register: py2
 
 - name: start SimpleHTTPServer
-  shell: start-stop-daemon --start --pidfile {{ output_dir }}/SimpleHTTPServer.pid --background --make-pidfile --chdir {{ files_dir }} --exec {{ py2.stdout }} -- -m SimpleHTTPServer {{ http_port }}
-  notify: stop SimpleHTTPServer
+  shell: cd {{ files_dir }} && {{ py2.stdout }} -m SimpleHTTPServer {{ http_port }}
+  async: 15 # this test set takes ~8 seconds to run
+  poll: 0
 
 - wait_for: port={{ http_port }}
 
