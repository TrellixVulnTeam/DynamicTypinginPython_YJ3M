commit 4002caf60ef6870600cc7aba9fa4e3c0850c4818
Author: Chris Houseknecht <chousekn@redhat.com>
Date:   Tue Jul 12 12:37:38 2016 -0400

    Fix module failing when no ports are exposed

diff --git a/lib/ansible/modules/cloud/docker/docker_container.py b/lib/ansible/modules/cloud/docker/docker_container.py
index 30834a1992..5ef10653c9 100644
--- a/lib/ansible/modules/cloud/docker/docker_container.py
+++ b/lib/ansible/modules/cloud/docker/docker_container.py
@@ -126,7 +126,7 @@ options:
     description:
       - List of additional container ports to expose for port mappings or links.
         If the port is already exposed using EXPOSE in a Dockerfile, it does not
-        need to be xposed again.
+        need to be exposed again.
     default: null
     required: false
     aliases:
@@ -738,15 +738,13 @@ class TaskParameters(DockerBaseClass):
                 except ValueError as exc:
                     self.fail("Failed to convert %s to bytes: %s" % (param_name, exc))
 
-        if 'all' in (port.lower() if isinstance(port, basestring) else port for port in self.published_ports):
+        self.publish_all_ports = False
+        self.published_ports = self._parse_publish_ports()
+        if self.published_ports == 'all':
             self.publish_all_ports = True
             self.published_ports = None
-            self.ports = None
-        else:
-            self.publish_all_ports = False
-            self.published_ports = self._parse_publish_ports()
-            self.ports = self._parse_exposed_ports(self.published_ports)
 
+        self.ports = self._parse_exposed_ports(self.published_ports)
         self.log("expose ports:")
         self.log(self.ports, pretty_print=True)
 
