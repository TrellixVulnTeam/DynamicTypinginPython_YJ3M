commit 24d73b0fe6fdc4503fd7ef2a00db9894065d6a9c
Author: Daniel Hokka Zakrisson <daniel@hozac.com>
Date:   Sat Jun 16 13:13:01 2012 +0200

    Add tests of iterative templating

diff --git a/test/TestUtils.py b/test/TestUtils.py
index 006a687e8b..b83dcb0312 100644
--- a/test/TestUtils.py
+++ b/test/TestUtils.py
@@ -236,6 +236,17 @@ class TestUtils(unittest.TestCase):
 
         assert res == u'hello w√≥rld'
 
+    def test_template_varReplace_iterated(self):
+        template = 'hello $who'
+        vars = {
+            'who': 'oh great $person',
+            'person': 'one',
+        }
+
+        res = ansible.utils.template(template, vars)
+
+        assert res == u'hello oh great one'
+
     #####################################
     ### key-value parsing
 
