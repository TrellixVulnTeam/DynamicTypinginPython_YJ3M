commit e613737b80affa87e468c1f68c465651a4369b1a
Author: mvgrimes <mgrimes@cpan.org>
Date:   Fri Mar 11 11:14:48 2016 -0500

    Dynamically add ssl key to the mysql config hash iff needed
    
    Just including the `ssl` key in the config for MySQLdb.connect, causes it to check for the existence of SSL support. This patch only adds the key if one of the ssl configuration options is included.

diff --git a/lib/ansible/module_utils/mysql.py b/lib/ansible/module_utils/mysql.py
index 74ae3d8c78..693650dac6 100644
--- a/lib/ansible/module_utils/mysql.py
+++ b/lib/ansible/module_utils/mysql.py
@@ -31,11 +31,12 @@
 
 def mysql_connect(module, login_user=None, login_password=None, config_file='', ssl_cert=None, ssl_key=None, ssl_ca=None, db=None, cursor_class=None, connect_timeout=30):
     config = {
-        'host': module.params['login_host'],
-        'ssl': {
-            }
+        'host': module.params['login_host']
     }
 
+    if ssl_ca is not None or ssl_key is not None or ssl_cert is not None:
+        config['ssl'] = {}
+
     if module.params['login_unix_socket']:
         config['unix_socket'] = module.params['login_unix_socket']
     else:
