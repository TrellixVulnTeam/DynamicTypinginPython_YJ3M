commit c54d79bc131c96e039a8981a7ad4e061cd83d744
Author: Felix Fontein <felix@fontein.de>
Date:   Sat Jun 1 15:29:00 2019 +0200

    Extend docker_image tests. (#57090)

diff --git a/test/integration/targets/docker_image/tasks/tests/old-options.yml b/test/integration/targets/docker_image/tasks/tests/old-options.yml
new file mode 100644
index 0000000000..5571cf96fa
--- /dev/null
+++ b/test/integration/targets/docker_image/tasks/tests/old-options.yml
@@ -0,0 +1,48 @@
+---
+- name: Registering image name
+  set_fact:
+    iname: "{{ name_prefix ~ '-old-options' }}"
+
+- name: Registering image name
+  set_fact:
+    inames: "{{ inames }} + [iname]"
+
+####################################################################
+## build ###########################################################
+####################################################################
+
+- name: build with old-style options
+  docker_image:
+    name: "{{ iname }}"
+    path: "{{ role_path }}/files"
+    dockerfile: Dockerfile
+    http_timeout: 60
+    nocache: yes
+    pull: no
+    rm: no
+    buildargs:
+      TEST1: val1
+      TEST2: val2
+      TEST3: "True"
+    container_limits:
+      memory: 5000000
+      memswap: 7000000
+    source: build
+  register: build
+
+- name: cleanup
+  docker_image:
+    name: "{{ iname }}"
+    state: absent
+    force_absent: yes
+
+- assert:
+    that:
+    - '"Please specify build.container_limits instead of container_limits. The container_limits option has been renamed and will be removed in Ansible 2.12." in build.warnings'
+    - '"Please specify build.dockerfile instead of dockerfile. The dockerfile option has been renamed and will be removed in Ansible 2.12." in build.warnings'
+    - '"Please specify build.http_timeout instead of http_timeout. The http_timeout option has been renamed and will be removed in Ansible 2.12." in build.warnings'
+    - '"Please specify build.nocache instead of nocache. The nocache option has been renamed and will be removed in Ansible 2.12." in build.warnings'
+    - '"Please specify build.path instead of path. The path option has been renamed and will be removed in Ansible 2.12." in build.warnings'
+    - '"Please specify build.pull instead of pull. The pull option has been renamed and will be removed in Ansible 2.12." in build.warnings'
+    - '"Please specify build.rm instead of rm. The rm option has been renamed and will be removed in Ansible 2.12." in build.warnings'
+    - '"Please specify build.args instead of buildargs. The buildargs option has been renamed and will be removed in Ansible 2.12." in build.warnings'
