commit b5c0141fb026b2b56322f94c2f9e69eb960d4895
Author: Robert "Bo" Davis <bo@awholecompany.com>
Date:   Tue Dec 19 17:04:46 2017 -0500

    Use hostname in group_by_aws_account to prevent duplicates. (#34053)
    
    Fix typo. The use of `dest` for group_by_aws_account causes the group to be produced using IP and to duplicate the hosts in the inventory.
    
    Fixes #23772
    
    Signed-off-by: bo <robert@jbanetwork.com>

diff --git a/contrib/inventory/ec2.py b/contrib/inventory/ec2.py
index e87c324a6e..30636fc023 100755
--- a/contrib/inventory/ec2.py
+++ b/contrib/inventory/ec2.py
@@ -1026,7 +1026,7 @@ class Ec2Inventory(object):
 
         # Inventory: Group by AWS account ID
         if self.group_by_aws_account:
-            self.push(self.inventory, self.aws_account_id, dest)
+            self.push(self.inventory, self.aws_account_id, hostname)
             if self.nested_groups:
                 self.push_group(self.inventory, 'accounts', self.aws_account_id)
 
