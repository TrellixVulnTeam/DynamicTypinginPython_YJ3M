commit c57df6220bc71446349e20d527d77f1a386e8439
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Fri Mar 2 21:20:37 2012 -0500

    Add pydoc to playbook binary, fix default types for playbook '.get()' call

diff --git a/bin/ansible-playbook b/bin/ansible-playbook
index dd4999d567..04f880dc3a 100755
--- a/bin/ansible-playbook
+++ b/bin/ansible-playbook
@@ -15,14 +15,20 @@
 #
 # You should have received a copy of the GNU General Public License
 # along with Ansible.  If not, see <http://www.gnu.org/licenses/>.
-#
+
+#######################################################
 
 import sys
 import ansible.playbook
 import ansible.constants as C
 from optparse import OptionParser
 
+#######################################################
+
 def main(args):
+    ''' run ansible-playbook operations '''
+
+    # create parser for CLI options
     parser = OptionParser()
     parser.usage = "ans-playbook playbook.yml ..."
     parser.add_option('-f','--forks', dest='forks', default=C.DEFAULT_FORKS, type='int',
@@ -35,6 +41,7 @@ def main(args):
        print >> sys.stderr, "playbook path is a required argument"
        return 1
 
+    # run all playbooks specified on the command line
     for playbook in args:
         pb = ansible.playbook.PlayBook(
             playbook=playbook,
diff --git a/lib/ansible/playbook.py b/lib/ansible/playbook.py
index 1af59d56ff..5773b633b9 100755
--- a/lib/ansible/playbook.py
+++ b/lib/ansible/playbook.py
@@ -161,8 +161,8 @@ class PlayBook(object):
         # summary information about successes and
         # failures.  TODO: split into subfunction
 
-        dark = results.get("dark", [])
-        contacted = results.get("contacted", [])
+        dark = results.get("dark", {})
+        contacted = results.get("contacted", {})
         ok_hosts = contacted.keys()
 
         for host, msg in dark.items():
