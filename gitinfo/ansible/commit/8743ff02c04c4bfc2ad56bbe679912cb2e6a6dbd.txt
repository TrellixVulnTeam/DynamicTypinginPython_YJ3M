commit 8743ff02c04c4bfc2ad56bbe679912cb2e6a6dbd
Author: Lukas KÃ¤mmerling <4281581+LKaemmerling@users.noreply.github.com>
Date:   Tue Jan 7 11:20:40 2020 +0100

    Fix hcloud_server and hcloud_server_info module when the image is None (#66234)

diff --git a/lib/ansible/modules/cloud/hcloud/hcloud_server.py b/lib/ansible/modules/cloud/hcloud/hcloud_server.py
index 5cb5211c24..791c890a29 100644
--- a/lib/ansible/modules/cloud/hcloud/hcloud_server.py
+++ b/lib/ansible/modules/cloud/hcloud/hcloud_server.py
@@ -272,12 +272,13 @@ class AnsibleHcloudServer(Hcloud):
         self.hcloud_server = None
 
     def _prepare_result(self):
+        image = None if self.hcloud_server.image is None else to_native(self.hcloud_server.image.name)
         return {
             "id": to_native(self.hcloud_server.id),
             "name": to_native(self.hcloud_server.name),
             "ipv4_address": to_native(self.hcloud_server.public_net.ipv4.ip),
             "ipv6": to_native(self.hcloud_server.public_net.ipv6.ip),
-            "image": to_native(self.hcloud_server.image.name),
+            "image": image,
             "server_type": to_native(self.hcloud_server.server_type.name),
             "datacenter": to_native(self.hcloud_server.datacenter.name),
             "location": to_native(self.hcloud_server.datacenter.location.name),
diff --git a/lib/ansible/modules/cloud/hcloud/hcloud_server_info.py b/lib/ansible/modules/cloud/hcloud/hcloud_server_info.py
index c369a56b12..87a8396bf3 100644
--- a/lib/ansible/modules/cloud/hcloud/hcloud_server_info.py
+++ b/lib/ansible/modules/cloud/hcloud/hcloud_server_info.py
@@ -150,12 +150,13 @@ class AnsibleHcloudServerInfo(Hcloud):
 
         for server in self.hcloud_server_info:
             if server is not None:
+                image = None if server.image is None else to_native(server.image.name)
                 tmp.append({
                     "id": to_native(server.id),
                     "name": to_native(server.name),
                     "ipv4_address": to_native(server.public_net.ipv4.ip),
                     "ipv6": to_native(server.public_net.ipv6.ip),
-                    "image": to_native(server.image.name),
+                    "image": image,
                     "server_type": to_native(server.server_type.name),
                     "datacenter": to_native(server.datacenter.name),
                     "location": to_native(server.datacenter.location.name),
