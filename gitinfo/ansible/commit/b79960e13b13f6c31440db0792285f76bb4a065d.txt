commit b79960e13b13f6c31440db0792285f76bb4a065d
Author: Daniel Hokka Zakrisson <daniel@hozac.com>
Date:   Tue Jan 29 10:31:33 2013 +0100

    If failed lookups are fatal, re-raise the exception
    
    Fixes #1938.

diff --git a/lib/ansible/utils/template.py b/lib/ansible/utils/template.py
index b947dc1894..e5db9e53dd 100644
--- a/lib/ansible/utils/template.py
+++ b/lib/ansible/utils/template.py
@@ -170,6 +170,8 @@ def _varFind(basedir, text, vars, lookup_fatal, depth=0):
             except errors.AnsibleError:
                 if not lookup_fatal:
                     replacement = None
+                else:
+                    raise
         else:
             replacement = None
         return {'replacement': replacement, 'start': start, 'end': end}
