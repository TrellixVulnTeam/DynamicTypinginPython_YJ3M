commit 5e24f5c701e9fcedc64482e9adcee2ab7387f1a1
Author: Sloane Hertel <shertel@redhat.com>
Date:   Mon Dec 11 15:21:56 2017 -0500

    [cloud] Ec2 module warning when IP assignment is changed on existing instances (#33783)

diff --git a/lib/ansible/modules/cloud/amazon/ec2.py b/lib/ansible/modules/cloud/amazon/ec2.py
index 321ff7b65c..8417fdbd29 100644
--- a/lib/ansible/modules/cloud/amazon/ec2.py
+++ b/lib/ansible/modules/cloud/amazon/ec2.py
@@ -992,9 +992,9 @@ def enforce_count(module, ec2, vpc):
     # ensure all instances are dictionaries
     all_instances = []
     for inst in instances:
-        warn_if_public_ip_assignment_changed(module, inst)
 
         if not isinstance(inst, dict):
+            warn_if_public_ip_assignment_changed(module, inst)
             inst = get_instance_info(inst)
         all_instances.append(inst)
 
