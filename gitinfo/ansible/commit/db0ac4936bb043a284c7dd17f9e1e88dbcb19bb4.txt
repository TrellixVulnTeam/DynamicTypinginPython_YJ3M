commit db0ac4936bb043a284c7dd17f9e1e88dbcb19bb4
Author: Matt Clay <matt@mystile.com>
Date:   Mon Oct 31 17:15:28 2016 -0700

    Skip shard count test in check mode. (#3329)
    
    The shard count is not available in check mode.

diff --git a/lib/ansible/modules/extras/cloud/amazon/kinesis_stream.py b/lib/ansible/modules/extras/cloud/amazon/kinesis_stream.py
index 37f20f8c11..6a9994daca 100644
--- a/lib/ansible/modules/extras/cloud/amazon/kinesis_stream.py
+++ b/lib/ansible/modules/extras/cloud/amazon/kinesis_stream.py
@@ -857,7 +857,7 @@ def create_stream(client, stream_name, number_of_shards=1, retention_period=None
     stream_found, stream_msg, current_stream = (
         find_stream(client, stream_name, check_mode=check_mode)
     )
-    if stream_found:
+    if stream_found and not check_mode:
         if current_stream['ShardsCount'] != number_of_shards:
             err_msg = 'Can not change the number of shards in a Kinesis Stream'
             return success, changed, err_msg, results
