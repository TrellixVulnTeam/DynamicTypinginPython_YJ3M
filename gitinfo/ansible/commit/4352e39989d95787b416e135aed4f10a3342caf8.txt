commit 4352e39989d95787b416e135aed4f10a3342caf8
Author: Ganesh Nalawade <ganesh634@gmail.com>
Date:   Thu Dec 5 13:21:01 2019 +0530

    Update network common code to support new states (#65534)
    
    *  Update the network common code to support the
       new resource modules state - parsed, rendered
       and gathered.
    *  For states parsed and rendered active connection
       to remote host is not required.

diff --git a/lib/ansible/module_utils/network/common/cfg/base.py b/lib/ansible/module_utils/network/common/cfg/base.py
index 8c1bae5934..5901dc767d 100644
--- a/lib/ansible/module_utils/network/common/cfg/base.py
+++ b/lib/ansible/module_utils/network/common/cfg/base.py
@@ -13,6 +13,12 @@ from ansible.module_utils.network.common.network import get_resource_connection
 class ConfigBase(object):
     """ The base class for all resource modules
     """
+    ACTION_STATES = ['merged', 'replaced', 'overridden', 'deleted']
+
     def __init__(self, module):
         self._module = module
-        self._connection = get_resource_connection(module)
+        self.state = module.params['state']
+        self._connection = None
+
+        if self.state not in ['rendered', 'parsed']:
+            self._connection = get_resource_connection(module)
diff --git a/lib/ansible/module_utils/network/common/facts/facts.py b/lib/ansible/module_utils/network/common/facts/facts.py
index b46299437a..1ebf31d7bd 100644
--- a/lib/ansible/module_utils/network/common/facts/facts.py
+++ b/lib/ansible/module_utils/network/common/facts/facts.py
@@ -20,7 +20,9 @@ class FactsBase(object):
         self._warnings = []
         self._gather_subset = module.params.get('gather_subset')
         self._gather_network_resources = module.params.get('gather_network_resources')
-        self._connection = get_resource_connection(module)
+        self._connection = None
+        if module.params.get('state') not in ['rendered', 'parsed']:
+            self._connection = get_resource_connection(module)
 
         self.ansible_facts = {'ansible_network_resources': {}}
         self.ansible_facts['ansible_net_gather_network_resources'] = list()
