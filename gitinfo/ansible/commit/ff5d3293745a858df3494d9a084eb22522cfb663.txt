commit ff5d3293745a858df3494d9a084eb22522cfb663
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Wed Apr 11 20:47:38 2012 -0400

    Yum package state defaults to installed

diff --git a/library/yum b/library/yum
index 87c2713d3e..edb2101978 100755
--- a/library/yum
+++ b/library/yum
@@ -317,22 +317,18 @@ def main():
         except Exception, e:
             return 1, str(e)
             
-    elif 'state' in params:
+    else:
         pkg = params.get('pkg', params.get('package', params.get('name', None))) 
         if 'pkg' is None:
             results['msg'] = "No pkg specified"
         else:
             try:
                 my = yum_base(conf_file=params['conf_file'], cachedir=True)        
-                state = params['state']
+                state = params.get('state', 'installed')
                 results = ensure(my, state, pkg)
             except Exception, e:
                 return 1, str(e)
 
-    else:
-        print json.dumps(dict(failed=True, msg='invalid module parameters'))
-        sys.exit(1)
-
     print json.dumps(results)
     return 0, None
 
