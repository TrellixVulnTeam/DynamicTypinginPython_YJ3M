commit 684b749e4775dc45b497857a182957af2af881cd
Author: Tyler Schwend <tyler.schwend@intersection.com>
Date:   Sun Apr 7 20:59:31 2019 -0400

    fix: Don't fail if updating Kinesis stream Shard count; We support this! (#54530)
    
    This added support for increasing shard count:
    https://github.com/ansible/ansible/pull/24805
    
    But the conditional to fail if you have specified a shard count other
    than the current shard count was still left in.
    
    This removes that conditional since it's no longer needed and prevents
    you from actually updating things!

diff --git a/lib/ansible/modules/cloud/amazon/kinesis_stream.py b/lib/ansible/modules/cloud/amazon/kinesis_stream.py
index f633ff0879..2cd9e11aec 100644
--- a/lib/ansible/modules/cloud/amazon/kinesis_stream.py
+++ b/lib/ansible/modules/cloud/amazon/kinesis_stream.py
@@ -1030,11 +1030,6 @@ def create_stream(client, stream_name, number_of_shards=1, retention_period=None
             )
         )
 
-    if stream_found and not check_mode:
-        if current_stream['ShardsCount'] != number_of_shards:
-            err_msg = 'Can not change the number of shards in a Kinesis Stream'
-            return success, changed, err_msg, results
-
     if stream_found and current_stream.get('StreamStatus') != 'DELETING':
         success, changed, err_msg = update(
             client, current_stream, stream_name, number_of_shards,
