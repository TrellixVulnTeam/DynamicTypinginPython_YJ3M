commit 0daacdccf82e5e69351a5bafc42a44e93b2c6947
Author: Martin Krizek <martin.krizek@gmail.com>
Date:   Mon Sep 11 19:16:49 2017 +0200

    dnf: add environment upgrade test

diff --git a/test/integration/targets/dnf/tasks/dnf.yml b/test/integration/targets/dnf/tasks/dnf.yml
index a3496560ff..174f8a4d7e 100644
--- a/test/integration/targets/dnf/tasks/dnf.yml
+++ b/test/integration/targets/dnf/tasks/dnf.yml
@@ -390,3 +390,23 @@
     that:
         - "'changed' in dnf_result"
         - "'msg' in dnf_result"
+
+# ENVIRONMENT UPGRADE
+# see commit de299ef77c03a64a8f515033a79ac6b7db1bc710
+- name: install Web Server environment
+  dnf:
+    name: "@Web Server"
+    state: latest
+  register: dnf_result
+
+- name: verify installation of the environment
+  assert:
+    that:
+        - "not dnf_result.failed | default(False)"
+        - "dnf_result.changed"
+
+- name: verify dnf module outputs
+  assert:
+    that:
+        - "'changed' in dnf_result"
+        - "'results' in dnf_result"
