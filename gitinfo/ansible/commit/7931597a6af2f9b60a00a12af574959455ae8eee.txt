commit 7931597a6af2f9b60a00a12af574959455ae8eee
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Thu Apr 11 12:15:13 2013 -0400

    Fix template call.

diff --git a/lib/ansible/playbook/task.py b/lib/ansible/playbook/task.py
index 1a2290e4b2..a1151e4f53 100644
--- a/lib/ansible/playbook/task.py
+++ b/lib/ansible/playbook/task.py
@@ -17,7 +17,7 @@
 
 from ansible import errors
 from ansible import utils
-
+import ansible.utils.template as template
 
 class Task(object):
 
@@ -98,7 +98,9 @@ class Task(object):
         self.args         = ds.get('args', {})
 
         if self.sudo:
-            self.sudo_user    = utils.template(play.basedir, ds.get('sudo_user', play.sudo_user), play.vars)
+            # this extra template call shouldn't be needed due to play template
+            # TODO: verify that this is true
+            self.sudo_user    = template.template(play.basedir, ds.get('sudo_user', play.sudo_user), play.vars)
             self.sudo_pass    = ds.get('sudo_pass', play.playbook.sudo_pass)
         else:
             self.sudo_user    = None
