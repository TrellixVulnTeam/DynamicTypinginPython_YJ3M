commit 034c766439723d509d71cf1b7170107edf0c35d5
Author: James Cammarata <jimi@sngx.net>
Date:   Sun Jul 26 13:56:01 2015 -0400

    Fixing logic in template.py to not assume 'changed' is in the result

diff --git a/lib/ansible/plugins/action/template.py b/lib/ansible/plugins/action/template.py
index aa9cf9802a..7c14ea1686 100644
--- a/lib/ansible/plugins/action/template.py
+++ b/lib/ansible/plugins/action/template.py
@@ -160,7 +160,7 @@ class ActionModule(ActionBase):
             else:
                 result=dict(changed=True)
 
-            if result['changed'] and self._play_context.diff:
+            if result.get('changed', False) and self._play_context.diff:
                 result['diff'] = dict(before=dest_contents, after=resultant, before_header=dest, after_header=source)
 
             return result
