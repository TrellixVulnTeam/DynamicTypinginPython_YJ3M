commit 9831e1597ff84108f6191ce41226fca4ab94083c
Author: Brian Coca <bcoca@ansible.com>
Date:   Mon Jun 5 16:46:51 2017 -0400

    minor protection against bad config

diff --git a/lib/ansible/inventory/manager.py b/lib/ansible/inventory/manager.py
index 4192d0aaa0..5822e43e2d 100644
--- a/lib/ansible/inventory/manager.py
+++ b/lib/ansible/inventory/manager.py
@@ -182,8 +182,10 @@ class InventoryManager(object):
 
         for name in C.INVENTORY_ENABLED:
             plugin = inventory_loader.get(name)
-            name = os.path.splitext(os.path.basename(plugin._original_path))[0]
-            self._inventory_plugins.append(plugin)
+            if plugin:
+                self._inventory_plugins.append(plugin)
+            else:
+                display.warning('Failed to load inventory plugin, skipping %s' % name)
 
         if not self._inventory_plugins:
             raise AnsibleError("No inventory plugins available to generate inventory, make sure you have at least one whitelisted.")
