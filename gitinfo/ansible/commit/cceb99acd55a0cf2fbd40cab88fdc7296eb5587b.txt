commit cceb99acd55a0cf2fbd40cab88fdc7296eb5587b
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Tue Oct 30 20:00:21 2012 -0400

    Simplify the group_by example a small bit

diff --git a/examples/playbooks/group_by.yml b/examples/playbooks/group_by.yml
index d08f260bd0..bc8548f2fc 100644
--- a/examples/playbooks/group_by.yml
+++ b/examples/playbooks/group_by.yml
@@ -1,23 +1,35 @@
 ---
 # Example playbook to demonstrate the group_by action plugin.
+#
+# as we know, the setup module will automatically run in each play, and sets up various
+# facts.  We can then create temporary (in memory only) groups based on those facts, which
+# are useful ways of selecting similar sets of hosts.
+#
+# Additionally, we can use the 'register' keyword in Ansible to set similar variables
+# and use those for grouping.  This is not shown in this example.
 
 - hosts: all
-  # This runs the setup module to gather facts
-  tasks:
-  # Use the ansible_machine variable to create a group for every value,
-  # prefix the group name with 'ansible-'
-  - action: group_by key=ansible-${ansible_machine}
 
-- hosts: ansible-x86_64
   tasks:
-  # Run ping on all x86_64 machines
-  - action: ping
 
-- hosts: all
+  - name: Create a group of all hosts by operating system
+    action: group_by key=${ansible_distribution}-${ansible_distribution_version}
+
+# the following host group does not exist in inventory and was created by the group_by
+# module.
+
+- hosts: CentOS-6.2
+
   tasks:
-  # Create a group of all kvm hosts
-  - action: group_by key=${ansible_virtualization_type}-${ansible_virtualization_role}
 
-- hosts: kvm-host
+  - name: ping all CentOS 6.2 hosts
+    action: ping
+
+- hosts: CentOS-6.3
+
   tasks:
-  - action: ping
+  
+  - name: ping all CentOS 6.3 hosts
+    action: ping
+
+
