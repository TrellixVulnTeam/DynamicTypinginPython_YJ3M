commit 97cc384ccf65c2263d9f182dc615619c13d0b9c8
Author: Daniel Hokka Zakrisson <daniel@hozac.com>
Date:   Wed Dec 19 13:22:57 2012 +0100

    Set basedir to . if there isn't one
    
    This avoids special-casing '' = '.' everywhere the basedir gets used.
    Fixes #1729.

diff --git a/lib/ansible/playbook/__init__.py b/lib/ansible/playbook/__init__.py
index a3b37ff4c8..aa48150c07 100644
--- a/lib/ansible/playbook/__init__.py
+++ b/lib/ansible/playbook/__init__.py
@@ -115,7 +115,7 @@ class PlayBook(object):
         else:
             self.inventory    = inventory
 
-        self.basedir     = os.path.dirname(playbook)
+        self.basedir     = os.path.dirname(playbook) or '.'
         (self.playbook, self.play_basedirs) = self._load_playbook_from_file(playbook)
 
     # *****************************************************
@@ -132,7 +132,7 @@ class PlayBook(object):
         if type(playbook_data) != list:
             raise errors.AnsibleError("parse error: playbooks must be formatted as a YAML list")
 
-        basedir = os.path.dirname(path)
+        basedir = os.path.dirname(path) or '.'
         utils.plugins.push_basedir(basedir)
         for play in playbook_data:
             if type(play) != dict:
diff --git a/lib/ansible/runner/connection_plugins/local.py b/lib/ansible/runner/connection_plugins/local.py
index 3c8e1b9512..2516cb2377 100644
--- a/lib/ansible/runner/connection_plugins/local.py
+++ b/lib/ansible/runner/connection_plugins/local.py
@@ -49,8 +49,6 @@ class Connection(object):
 
         vvv("EXEC %s" % cmd, host=self.host)
         basedir = self.runner.basedir
-        if basedir == '':
-            basedir = '.'
         p = subprocess.Popen(cmd, cwd=basedir, shell=True, stdin=None,
                              stdout=subprocess.PIPE, stderr=subprocess.PIPE)
         stdout, stderr = p.communicate()
