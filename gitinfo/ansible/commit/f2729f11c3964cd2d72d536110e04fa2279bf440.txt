commit f2729f11c3964cd2d72d536110e04fa2279bf440
Author: Rene Moser <mail@renemoser.net>
Date:   Tue Feb 14 03:12:54 2017 +0100

    ios_config: fix "save" arg results in timeout (#21344)
    
    * ios_config: fix "save" arg results in timeout
    
    The command "copy running-config startup-config" prompts for a
    destination filename, which was not handled.
    
    ~~~
    testswitch#copy running-config startup-config
    Destination filename [startup-config]?
    Building configuration...
    [OK]
    0 bytes copied in 0.679 secs (0 bytes/sec)
    
    [15:16]
    ios: write memory
    ~~~
    
    * test_ios_config: adjust test_ios_config_save

diff --git a/lib/ansible/modules/network/ios/ios_config.py b/lib/ansible/modules/network/ios/ios_config.py
index a390307dc4..25c5314677 100644
--- a/lib/ansible/modules/network/ios/ios_config.py
+++ b/lib/ansible/modules/network/ios/ios_config.py
@@ -382,7 +382,7 @@ def main():
 
     if module.params['save']:
         if not module.check_mode:
-            run_commands(module, ['copy running-config startup-config'])
+            run_commands(module, ['copy running-config startup-config\r'])
         result['changed'] = True
 
     module.exit_json(**result)
diff --git a/test/units/modules/network/ios/test_ios_config.py b/test/units/modules/network/ios/test_ios_config.py
index 68fd05dc00..f7d2af4582 100644
--- a/test/units/modules/network/ios/test_ios_config.py
+++ b/test/units/modules/network/ios/test_ios_config.py
@@ -75,7 +75,7 @@ class TestIosConfigModule(TestIosModule):
         self.assertEqual(self.get_config.call_count, 0)
         self.assertEqual(self.load_config.call_count, 0)
         args = self.run_commands.call_args[0][1]
-        self.assertIn('copy running-config startup-config', args)
+        self.assertIn('copy running-config startup-config\r', args)
 
     def test_ios_config_lines_wo_parents(self):
         set_module_args(dict(lines=['hostname foo']))
