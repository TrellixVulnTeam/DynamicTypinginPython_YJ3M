commit c1008d693c63293fd24e9f025fc77ddd488a80a4
Author: Ganesh Nalawade <ganesh634@gmail.com>
Date:   Mon Mar 12 20:12:44 2018 +0530

    Fix eos_facts eapi integration test failures (#37301)

diff --git a/test/integration/targets/eos_facts/tests/eapi/default_facts.yaml b/test/integration/targets/eos_facts/tests/eapi/default_facts.yaml
index fbf987a6bd..2892746671 100644
--- a/test/integration/targets/eos_facts/tests/eapi/default_facts.yaml
+++ b/test/integration/targets/eos_facts/tests/eapi/default_facts.yaml
@@ -1,6 +1,11 @@
 ---
 - debug: msg="START eapi/default_facts.yaml"
 
+- name: Make sure LLDP is running (setup)
+  eos_config:
+    lines: lldp run
+    authorize: yes
+    provider: "{{ eapi }}"
 
 - name: test getting default facts
   eos_facts:
@@ -28,4 +33,10 @@
       # ... and not present
       - "result.ansible_facts.ansible_net_config is not defined" # config
 
+- name: Make sure LLDP is running (setup)
+  eos_config:
+    lines: lldp run
+    authorize: yes
+    provider: "{{ eapi }}"
+
 - debug: msg="END eapi/default.yaml"
diff --git a/test/integration/targets/eos_facts/tests/eapi/not_hardware.yaml b/test/integration/targets/eos_facts/tests/eapi/not_hardware.yaml
index 9267f63846..46b54a6354 100644
--- a/test/integration/targets/eos_facts/tests/eapi/not_hardware.yaml
+++ b/test/integration/targets/eos_facts/tests/eapi/not_hardware.yaml
@@ -1,6 +1,11 @@
 ---
 - debug: msg="START eapi/not_hardware_facts.yaml"
 
+- name: Make sure LLDP is running (setup)
+  eos_config:
+    lines: lldp run
+    authorize: yes
+    provider: "{{ eapi }}"
 
 - name: test not hardware
   eos_facts:
@@ -27,4 +32,10 @@
       # ... and not present
       - "result.ansible_facts.ansible_net_filesystems is not defined"
 
+- name: Make sure LLDP is running (teardown)
+  eos_config:
+    lines: no lldp run
+    authorize: yes
+    provider: "{{ eapi }}"
+
 - debug: msg="END eapi/not_hardware_facts.yaml"
