commit d88f686976b874b0f409a78e1cb907bc11ff9c81
Author: The Magician <magic-modules@google.com>
Date:   Tue Jul 9 11:35:04 2019 -0700

    Bug fixes for GCP modules (#58851)

diff --git a/test/integration/targets/gcp_sourcerepo_repository/tasks/main.yml b/test/integration/targets/gcp_sourcerepo_repository/tasks/main.yml
index fe47467f1c..bfa9540130 100644
--- a/test/integration/targets/gcp_sourcerepo_repository/tasks/main.yml
+++ b/test/integration/targets/gcp_sourcerepo_repository/tasks/main.yml
@@ -44,7 +44,7 @@
 - name: verify that command succeeded
   assert:
     that:
-      - results['resources'] | length >= 1
+      - results['resources'] | map(attribute='name') | select("match", ".*{{ resource_name }}.*") | list | length == 1
 # ----------------------------------------------------------------------------
 - name: create a repository that already exists
   gcp_sourcerepo_repository:
@@ -82,7 +82,7 @@
 - name: verify that command succeeded
   assert:
     that:
-      - results['resources'] | length == 0
+      - results['resources'] | map(attribute='name') | select("match", ".*{{ resource_name }}.*") | list | length == 0
 # ----------------------------------------------------------------------------
 - name: delete a repository that does not exist
   gcp_sourcerepo_repository:
diff --git a/test/integration/targets/gcp_sql_instance/tasks/main.yml b/test/integration/targets/gcp_sql_instance/tasks/main.yml
index af75218749..0bee3e3c82 100644
--- a/test/integration/targets/gcp_sql_instance/tasks/main.yml
+++ b/test/integration/targets/gcp_sql_instance/tasks/main.yml
@@ -59,7 +59,7 @@
 - name: verify that command succeeded
   assert:
     that:
-      - results['resources'] | length >= 1
+      - results['resources'] | map(attribute='name') | select("match", ".*{{resource_name}}-2.*") | list | length == 1
 # ----------------------------------------------------------------------------
 - name: create a instance that already exists
   gcp_sql_instance:
@@ -113,7 +113,7 @@
 - name: verify that command succeeded
   assert:
     that:
-      - results['resources'] | length == 0
+      - results['resources'] | map(attribute='name') | select("match", ".*{{resource_name}}-2.*") | list | length == 0
 # ----------------------------------------------------------------------------
 - name: delete a instance that does not exist
   gcp_sql_instance:
diff --git a/test/integration/targets/gcp_tpu_node/tasks/main.yml b/test/integration/targets/gcp_tpu_node/tasks/main.yml
index 10c10ee34d..06157f93f1 100644
--- a/test/integration/targets/gcp_tpu_node/tasks/main.yml
+++ b/test/integration/targets/gcp_tpu_node/tasks/main.yml
@@ -53,7 +53,7 @@
 - name: verify that command succeeded
   assert:
     that:
-      - results['resources'] | length >= 1
+      - results['resources'] | map(attribute='name') | select("match", ".*{{ resource_name }}.*") | list | length == 1
 # ----------------------------------------------------------------------------
 - name: create a node that already exists
   gcp_tpu_node:
@@ -100,7 +100,7 @@
 - name: verify that command succeeded
   assert:
     that:
-      - results['resources'] | length == 0
+      - results['resources'] | map(attribute='name') | select("match", ".*{{ resource_name }}.*") | list | length == 0
 # ----------------------------------------------------------------------------
 - name: delete a node that does not exist
   gcp_tpu_node:
