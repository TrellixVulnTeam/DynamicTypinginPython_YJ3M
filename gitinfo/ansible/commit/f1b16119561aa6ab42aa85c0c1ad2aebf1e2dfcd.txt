commit f1b16119561aa6ab42aa85c0c1ad2aebf1e2dfcd
Author: Jeroen Hoekx <jeroen.hoekx@hamok.be>
Date:   Wed Jul 18 11:50:34 2012 +0200

    Fix typo while handling custom facts.
    
    This fixes #611.

diff --git a/lib/ansible/playbook/__init__.py b/lib/ansible/playbook/__init__.py
index 4f218f5319..796a570ff5 100644
--- a/lib/ansible/playbook/__init__.py
+++ b/lib/ansible/playbook/__init__.py
@@ -221,7 +221,7 @@ class PlayBook(object):
 
         # add facts to the global setup cache
         for host, result in results['contacted'].iteritems():
-            facts = results.get('ansible_facts', {})
+            facts = result.get('ansible_facts', {})
             self.SETUP_CACHE[host].update(facts)
 
         self.stats.compute(results)
