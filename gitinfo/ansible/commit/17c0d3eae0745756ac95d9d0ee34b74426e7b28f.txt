commit 17c0d3eae0745756ac95d9d0ee34b74426e7b28f
Author: John R Barker <john@johnrbarker.com>
Date:   Mon Feb 12 17:42:25 2018 +0000

    Fix more docs vs argspec (#36048)

diff --git a/lib/ansible/modules/network/eos/eos_linkagg.py b/lib/ansible/modules/network/eos/eos_linkagg.py
index 86f4c59970..3fa61f7db6 100644
--- a/lib/ansible/modules/network/eos/eos_linkagg.py
+++ b/lib/ansible/modules/network/eos/eos_linkagg.py
@@ -46,6 +46,10 @@ options:
       - State of the link aggregation group.
     default: present
     choices: ['present', 'absent']
+  purge:
+    description:
+      - Purge links not defined in the I(aggregate) parameter.
+    default: no
 extends_documentation_fragment: eos
 """
 
diff --git a/lib/ansible/modules/network/ios/ios_linkagg.py b/lib/ansible/modules/network/ios/ios_linkagg.py
index 0a4c572b5e..840576eee7 100644
--- a/lib/ansible/modules/network/ios/ios_linkagg.py
+++ b/lib/ansible/modules/network/ios/ios_linkagg.py
@@ -42,6 +42,10 @@ options:
       - State of the link aggregation group.
     default: present
     choices: ['present', 'absent']
+  purge:
+    description:
+      - Purge links not defined in the I(aggregate) parameter.
+    default: no
 extends_documentation_fragment: ios
 """
 
diff --git a/lib/ansible/modules/network/ios/ios_user.py b/lib/ansible/modules/network/ios/ios_user.py
index 4b2be8d457..56a62adcdd 100644
--- a/lib/ansible/modules/network/ios/ios_user.py
+++ b/lib/ansible/modules/network/ios/ios_user.py
@@ -44,7 +44,7 @@ options:
         Cisco IOS device. The list entries can either be the username
         or a hash of username and properties. This argument is mutually
         exclusive with the C(name) argument.
-    aliases: ['users']
+    aliases: ['users', 'collection']
   name:
     description:
       - The username to be configured on the Cisco IOS device.
diff --git a/lib/ansible/modules/network/iosxr/iosxr_netconf.py b/lib/ansible/modules/network/iosxr/iosxr_netconf.py
index 7ab0984ac2..d574241c1f 100644
--- a/lib/ansible/modules/network/iosxr/iosxr_netconf.py
+++ b/lib/ansible/modules/network/iosxr/iosxr_netconf.py
@@ -39,6 +39,7 @@ options:
       - netconf vrf name
     required: false
     default: default
+    aliases: ['vrf']
   state:
     description:
       - Specifies the state of the C(iosxr_netconf) resource on
diff --git a/lib/ansible/modules/network/vyos/vyos_system.py b/lib/ansible/modules/network/vyos/vyos_system.py
index d576882f86..77d2670f9a 100644
--- a/lib/ansible/modules/network/vyos/vyos_system.py
+++ b/lib/ansible/modules/network/vyos/vyos_system.py
@@ -42,12 +42,13 @@ options:
   domain_name:
     description:
       - The new domain name to apply to the device.
-  name_server:
+  name_servers:
     description:
       - A list of name servers to use with the device. Mutually exclusive with
         I(domain_search)
     required: false
     default: null
+    aliases: ['name_server']
   domain_search:
     description:
       - A list of domain names to search. Mutually exclusive with
@@ -81,7 +82,7 @@ EXAMPLES = """
 
 - name: configure name servers
   vyos_system:
-    name_server:
+    name_servers
       - 8.8.8.8
       - 8.8.4.4
 
diff --git a/lib/ansible/utils/module_docs_fragments/nxos.py b/lib/ansible/utils/module_docs_fragments/nxos.py
index 37b84375f1..389ed298d8 100644
--- a/lib/ansible/utils/module_docs_fragments/nxos.py
+++ b/lib/ansible/utils/module_docs_fragments/nxos.py
@@ -22,85 +22,84 @@ class ModuleDocFragment(object):
     # Standard files documentation fragment
     DOCUMENTATION = """
 options:
-  host:
-    description:
-      - Specifies the DNS host name or address for connecting to the remote
-        device over the specified transport.  The value of host is used as
-        the destination address for the transport.
-    required: true
-  port:
-    description:
-      - Specifies the port to use when building the connection to the remote
-        device.  This value applies to either I(cli) or I(nxapi).  The port
-        value will default to the appropriate transport common port if
-        none is provided in the task.  (cli=22, http=80, https=443).
-    required: false
-    default: 0 (use common port)
-  username:
-    description:
-      - Configures the username to use to authenticate the connection to
-        the remote device.  This value is used to authenticate
-        either the CLI login or the nxapi authentication depending on which
-        transport is used. If the value is not specified in the task, the
-        value of environment variable C(ANSIBLE_NET_USERNAME) will be used instead.
-    required: false
-  password:
-    description:
-      - Specifies the password to use to authenticate the connection to
-        the remote device.  This is a common argument used for either I(cli)
-        or I(nxapi) transports. If the value is not specified in the task, the
-        value of environment variable C(ANSIBLE_NET_PASSWORD) will be used instead.
-    required: false
-    default: null
-  timeout:
-    description:
-      - Specifies the timeout in seconds for communicating with the network device
-        for either connecting or sending commands.  If the timeout is
-        exceeded before the operation is completed, the module will error.
-        NX-API can be slow to return on long-running commands (sh mac, sh bgp, etc).
-    require: false
-    default: 10
-    version_added: 2.3
-  ssh_keyfile:
-    description:
-      - Specifies the SSH key to use to authenticate the connection to
-        the remote device.  This argument is only used for the I(cli)
-        transport. If the value is not specified in the task, the
-        value of environment variable C(ANSIBLE_NET_SSH_KEYFILE) will be used instead.
-    required: false
-  transport:
-    description:
-      - Configures the transport connection to use when connecting to the
-        remote device.  The transport argument supports connectivity to the
-        device over cli (ssh) or nxapi.
-    required: true
-    default: cli
-  use_ssl:
-    description:
-      - Configures the I(transport) to use SSL if set to true only when the
-        C(transport=nxapi), otherwise this value is ignored.
-    required: false
-    default: no
-    choices: ['yes', 'no']
-  validate_certs:
-    description:
-      - If C(no), SSL certificates will not be validated. This should only be used
-        on personally controlled sites using self-signed certificates.  If the transport
-        argument is not nxapi, this value is ignored.
-    choices: ['yes', 'no']
   provider:
     description:
-      - Convenience method that allows all I(nxos) arguments to be passed as
-        a dict object.  All constraints (required, choices, etc) must be
-        met either by individual arguments or values in this dict.
-    required: false
+      - A dict object containing connection details.
     default: null
-  use_proxy:
-    description:
-      - If C(no), the environment variables C(http_proxy) and C(https_proxy) will be ignored.
-    default: 'yes'
-    choices: ['yes', 'no']
-    version_added: "2.5"
+    suboptions:
+      host:
+        description:
+          - Specifies the DNS host name or address for connecting to the remote
+            device over the specified transport.  The value of host is used as
+            the destination address for the transport.
+        required: true
+      port:
+        description:
+          - Specifies the port to use when building the connection to the remote
+            device.  This value applies to either I(cli) or I(nxapi).  The port
+            value will default to the appropriate transport common port if
+            none is provided in the task.  (cli=22, http=80, https=443).
+        required: false
+        default: 0 (use common port)
+      username:
+        description:
+          - Configures the username to use to authenticate the connection to
+            the remote device.  This value is used to authenticate
+            either the CLI login or the nxapi authentication depending on which
+            transport is used. If the value is not specified in the task, the
+            value of environment variable C(ANSIBLE_NET_USERNAME) will be used instead.
+        required: false
+      password:
+        description:
+          - Specifies the password to use to authenticate the connection to
+            the remote device.  This is a common argument used for either I(cli)
+            or I(nxapi) transports. If the value is not specified in the task, the
+            value of environment variable C(ANSIBLE_NET_PASSWORD) will be used instead.
+        required: false
+        default: null
+      timeout:
+        description:
+          - Specifies the timeout in seconds for communicating with the network device
+            for either connecting or sending commands.  If the timeout is
+            exceeded before the operation is completed, the module will error.
+            NX-API can be slow to return on long-running commands (sh mac, sh bgp, etc).
+        require: false
+        default: 10
+        version_added: 2.3
+      ssh_keyfile:
+        description:
+          - Specifies the SSH key to use to authenticate the connection to
+            the remote device.  This argument is only used for the I(cli)
+            transport. If the value is not specified in the task, the
+            value of environment variable C(ANSIBLE_NET_SSH_KEYFILE) will be used instead.
+        required: false
+      transport:
+        description:
+          - Configures the transport connection to use when connecting to the
+            remote device.  The transport argument supports connectivity to the
+            device over cli (ssh) or nxapi.
+        required: true
+        default: cli
+      use_ssl:
+        description:
+          - Configures the I(transport) to use SSL if set to true only when the
+            C(transport=nxapi), otherwise this value is ignored.
+        required: false
+        default: no
+        choices: ['yes', 'no']
+      validate_certs:
+        description:
+          - If C(no), SSL certificates will not be validated. This should only be used
+            on personally controlled sites using self-signed certificates.  If the transport
+            argument is not nxapi, this value is ignored.
+        choices: ['yes', 'no']
+        default: null
+      use_proxy:
+        description:
+          - If C(no), the environment variables C(http_proxy) and C(https_proxy) will be ignored.
+        default: 'yes'
+        choices: ['yes', 'no']
+        version_added: "2.5"
 
 notes:
   - For more information on using Ansible to manage Cisco devices see U(https://www.ansible.com/ansible-cisco).
diff --git a/test/sanity/validate-modules/ignore.txt b/test/sanity/validate-modules/ignore.txt
index 8b2e443e0c..6eb0b306e0 100644
--- a/test/sanity/validate-modules/ignore.txt
+++ b/test/sanity/validate-modules/ignore.txt
@@ -321,19 +321,14 @@ lib/ansible/modules/network/cnos/cnos_facts.py E323
 lib/ansible/modules/network/cnos/cnos_rollback.py E322
 lib/ansible/modules/network/cnos/cnos_rollback.py E323
 lib/ansible/modules/network/cnos/cnos_showrun.py E323
-lib/ansible/modules/network/cumulus/_cl_interface.py E322
 lib/ansible/modules/network/dellos10/dellos10_command.py E322
 lib/ansible/modules/network/enos/enos_command.py E323
 lib/ansible/modules/network/enos/enos_config.py E323
 lib/ansible/modules/network/enos/enos_facts.py E323
-lib/ansible/modules/network/eos/eos_linkagg.py E322
 lib/ansible/modules/network/illumos/dladm_linkprop.py E317
 lib/ansible/modules/network/illumos/ipadm_addrprop.py E317
 lib/ansible/modules/network/illumos/ipadm_ifprop.py E317
-lib/ansible/modules/network/ios/ios_linkagg.py E322
-lib/ansible/modules/network/ios/ios_user.py E322
 lib/ansible/modules/network/iosxr/iosxr_command.py E322
-lib/ansible/modules/network/iosxr/iosxr_netconf.py E322
 lib/ansible/modules/network/ironware/ironware_command.py E323
 lib/ansible/modules/network/ironware/ironware_config.py E323
 lib/ansible/modules/network/ironware/ironware_facts.py E323
@@ -347,78 +342,6 @@ lib/ansible/modules/network/netscaler/netscaler_lb_monitor.py E323
 lib/ansible/modules/network/netscaler/netscaler_lb_vserver.py E323
 lib/ansible/modules/network/netscaler/netscaler_service.py E323
 lib/ansible/modules/network/netvisor/pn_vrouter.py E322
-lib/ansible/modules/network/nxos/_nxos_ip_interface.py E323
-lib/ansible/modules/network/nxos/_nxos_mtu.py E323
-lib/ansible/modules/network/nxos/_nxos_portchannel.py E323
-lib/ansible/modules/network/nxos/_nxos_switchport.py E323
-lib/ansible/modules/network/nxos/nxos_aaa_server.py E323
-lib/ansible/modules/network/nxos/nxos_aaa_server_host.py E323
-lib/ansible/modules/network/nxos/nxos_acl.py E323
-lib/ansible/modules/network/nxos/nxos_acl_interface.py E323
-lib/ansible/modules/network/nxos/nxos_banner.py E323
-lib/ansible/modules/network/nxos/nxos_bgp.py E323
-lib/ansible/modules/network/nxos/nxos_bgp_af.py E323
-lib/ansible/modules/network/nxos/nxos_bgp_neighbor.py E323
-lib/ansible/modules/network/nxos/nxos_bgp_neighbor_af.py E323
-lib/ansible/modules/network/nxos/nxos_command.py E323
-lib/ansible/modules/network/nxos/nxos_config.py E323
-lib/ansible/modules/network/nxos/nxos_evpn_global.py E323
-lib/ansible/modules/network/nxos/nxos_evpn_vni.py E323
-lib/ansible/modules/network/nxos/nxos_facts.py E323
-lib/ansible/modules/network/nxos/nxos_feature.py E323
-lib/ansible/modules/network/nxos/nxos_file_copy.py E323
-lib/ansible/modules/network/nxos/nxos_gir.py E323
-lib/ansible/modules/network/nxos/nxos_gir_profile_management.py E323
-lib/ansible/modules/network/nxos/nxos_hsrp.py E323
-lib/ansible/modules/network/nxos/nxos_igmp.py E323
-lib/ansible/modules/network/nxos/nxos_igmp_interface.py E323
-lib/ansible/modules/network/nxos/nxos_igmp_snooping.py E323
-lib/ansible/modules/network/nxos/nxos_install_os.py E323
-lib/ansible/modules/network/nxos/nxos_interface.py E323
-lib/ansible/modules/network/nxos/nxos_interface_ospf.py E323
-lib/ansible/modules/network/nxos/nxos_l2_interface.py E323
-lib/ansible/modules/network/nxos/nxos_l3_interface.py E323
-lib/ansible/modules/network/nxos/nxos_linkagg.py E323
-lib/ansible/modules/network/nxos/nxos_lldp.py E323
-lib/ansible/modules/network/nxos/nxos_logging.py E323
-lib/ansible/modules/network/nxos/nxos_ntp.py E323
-lib/ansible/modules/network/nxos/nxos_ntp_auth.py E323
-lib/ansible/modules/network/nxos/nxos_ntp_options.py E323
-lib/ansible/modules/network/nxos/nxos_nxapi.py E323
-lib/ansible/modules/network/nxos/nxos_ospf.py E323
-lib/ansible/modules/network/nxos/nxos_ospf_vrf.py E323
-lib/ansible/modules/network/nxos/nxos_overlay_global.py E323
-lib/ansible/modules/network/nxos/nxos_pim.py E323
-lib/ansible/modules/network/nxos/nxos_pim_interface.py E323
-lib/ansible/modules/network/nxos/nxos_pim_rp_address.py E323
-lib/ansible/modules/network/nxos/nxos_ping.py E323
-lib/ansible/modules/network/nxos/nxos_reboot.py E323
-lib/ansible/modules/network/nxos/nxos_rollback.py E323
-lib/ansible/modules/network/nxos/nxos_smu.py E323
-lib/ansible/modules/network/nxos/nxos_snapshot.py E323
-lib/ansible/modules/network/nxos/nxos_snmp_community.py E323
-lib/ansible/modules/network/nxos/nxos_snmp_contact.py E323
-lib/ansible/modules/network/nxos/nxos_snmp_host.py E323
-lib/ansible/modules/network/nxos/nxos_snmp_location.py E323
-lib/ansible/modules/network/nxos/nxos_snmp_traps.py E323
-lib/ansible/modules/network/nxos/nxos_snmp_user.py E323
-lib/ansible/modules/network/nxos/nxos_static_route.py E323
-lib/ansible/modules/network/nxos/nxos_system.py E323
-lib/ansible/modules/network/nxos/nxos_udld.py E323
-lib/ansible/modules/network/nxos/nxos_udld_interface.py E323
-lib/ansible/modules/network/nxos/nxos_user.py E323
-lib/ansible/modules/network/nxos/nxos_vlan.py E323
-lib/ansible/modules/network/nxos/nxos_vpc.py E323
-lib/ansible/modules/network/nxos/nxos_vpc_interface.py E323
-lib/ansible/modules/network/nxos/nxos_vrf.py E323
-lib/ansible/modules/network/nxos/nxos_vrf_af.py E323
-lib/ansible/modules/network/nxos/nxos_vrf_interface.py E323
-lib/ansible/modules/network/nxos/nxos_vrrp.py E323
-lib/ansible/modules/network/nxos/nxos_vtp_domain.py E323
-lib/ansible/modules/network/nxos/nxos_vtp_password.py E323
-lib/ansible/modules/network/nxos/nxos_vtp_version.py E323
-lib/ansible/modules/network/nxos/nxos_vxlan_vtep.py E323
-lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py E323
 lib/ansible/modules/network/onyx/onyx_command.py E323
 lib/ansible/modules/network/onyx/onyx_config.py E323
 lib/ansible/modules/network/onyx/onyx_interface.py E323
@@ -434,7 +357,6 @@ lib/ansible/modules/network/radware/vdirect_file.py E321
 lib/ansible/modules/network/radware/vdirect_runnable.py E321
 lib/ansible/modules/network/sros/sros_config.py E323
 lib/ansible/modules/network/vyos/vyos_lldp.py E322
-lib/ansible/modules/network/vyos/vyos_system.py E322
 lib/ansible/modules/notification/cisco_spark.py E322
 lib/ansible/modules/notification/hipchat.py E322
 lib/ansible/modules/notification/irc.py E322
