commit cb765ce5908b9fee412705af0f11bf1bcbfd2a1d
Author: Matthew Krupcale <mkrupcale@matthewkrupcale.com>
Date:   Thu Nov 17 13:15:11 2016 -0500

    gluster_volume: Fixes gluster peer probe / volume creation issue. (#3486)
    
    * gluster_volume: Fixes issue when creating a new volume failing due to peers not being present. The peers which are not 'localhost' should invoke wait_for_peer, but the find method returns -1 (not 0) on non-localhost peers.

diff --git a/lib/ansible/modules/extras/system/gluster_volume.py b/lib/ansible/modules/extras/system/gluster_volume.py
index ceb6330067..4043f10ae1 100644
--- a/lib/ansible/modules/extras/system/gluster_volume.py
+++ b/lib/ansible/modules/extras/system/gluster_volume.py
@@ -274,7 +274,7 @@ def wait_for_peer(host):
 def probe(host, myhostname):
     global module
     out = run_gluster([ 'peer', 'probe', host ])
-    if not out.find('localhost') and not wait_for_peer(host):
+    if out.find('localhost') == -1 and not wait_for_peer(host):
         module.fail_json(msg='failed to probe peer %s on %s' % (host, myhostname))
     changed = True
 
