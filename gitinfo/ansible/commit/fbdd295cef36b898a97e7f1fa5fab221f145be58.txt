commit fbdd295cef36b898a97e7f1fa5fab221f145be58
Author: Thomas Reppert <30984283+t-reppert@users.noreply.github.com>
Date:   Thu Nov 14 10:44:55 2019 -0500

    Adjust conditional for disabling alert email (#63951)
    
    * Adjust conditional for disabling alert email
    
    Conditional was improperly disabling existing alert email when it was found enabled.  The expectation is that it should only disable if module.param['enabled'] was set to false.
    
    * Adjusted disable logic
    
    Added back in the logic of only disabling the alert email if it is module.params['enabled'] is false AND current value of enabled is true on the array

diff --git a/lib/ansible/modules/storage/purestorage/purefa_alert.py b/lib/ansible/modules/storage/purestorage/purefa_alert.py
index 7d482ea107..23c683a4b6 100644
--- a/lib/ansible/modules/storage/purestorage/purefa_alert.py
+++ b/lib/ansible/modules/storage/purestorage/purefa_alert.py
@@ -160,7 +160,7 @@ def main():
         create_alert(module, array)
     elif module.params['state'] == 'present' and exists and not enabled and module.params['enabled']:
         enable_alert(module, array)
-    elif module.params['state'] == 'present' and exists and enabled:
+    elif module.params['state'] == 'present' and exists and enabled and not module.params['enabled']:
         disable_alert(module, array)
     elif module.params['state'] == 'absent' and exists:
         delete_alert(module, array)
