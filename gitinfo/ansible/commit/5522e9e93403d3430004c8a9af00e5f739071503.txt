commit 5522e9e93403d3430004c8a9af00e5f739071503
Author: Deric Crago <deric.crago@gmail.com>
Date:   Mon Jul 23 12:23:24 2018 -0400

    VMware: fixed network['vlan'] str / int mismatch (#42984)
    
    Typecast network vlan into string.

diff --git a/lib/ansible/modules/cloud/vmware/vmware_guest.py b/lib/ansible/modules/cloud/vmware/vmware_guest.py
index 41866aa072..a97cd8382b 100644
--- a/lib/ansible/modules/cloud/vmware/vmware_guest.py
+++ b/lib/ansible/modules/cloud/vmware/vmware_guest.py
@@ -1111,7 +1111,7 @@ class PyVmomiHelper(PyVmomi):
                 for dvp in dvps:
                     if hasattr(dvp.config.defaultPortConfig, 'vlan') and \
                             isinstance(dvp.config.defaultPortConfig.vlan.vlanId, int) and \
-                            str(dvp.config.defaultPortConfig.vlan.vlanId) == network['vlan']:
+                            str(dvp.config.defaultPortConfig.vlan.vlanId) == str(network['vlan']):
                         network['name'] = dvp.config.name
                         break
                     if 'dvswitch_name' in network and \
