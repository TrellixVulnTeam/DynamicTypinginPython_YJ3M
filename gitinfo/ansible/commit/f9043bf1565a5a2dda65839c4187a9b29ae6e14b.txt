commit f9043bf1565a5a2dda65839c4187a9b29ae6e14b
Author: Seth Vidal <skvidal@fedoraproject.org>
Date:   Tue Mar 27 12:06:21 2012 -0400

    make yum module work with older yum for rhel5 :(

diff --git a/library/yum b/library/yum
index 5ef8b7818c..a3b95d14ac 100755
--- a/library/yum
+++ b/library/yum
@@ -41,7 +41,12 @@ def yum_base(conf_file=None, cachedir=False):
     if conf_file and os.path.exists(conf_file):
         my.preconf.fn = conf_file
     if cachedir:
-        my.setCacheDir()
+        if hasattr(my, 'setCacheDir'):
+            my.setCacheDir()
+        else:
+            cachedir = yum.misc.getCacheDir()
+            my.repos.setCacheDir(cachedir)
+            my.conf.cache = 0 
     
     return my
 
