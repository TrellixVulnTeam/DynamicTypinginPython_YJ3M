commit 138b45e32f35f8ab647925c7d4a9f0e9c69dadc7
Author: Cristian Ciupitu <cristian.ciupitu@yahoo.com>
Date:   Fri Jan 24 16:31:45 2014 +0200

    hostname module: don't filter hostnamectl with awk
    
    There's no need to filter hostnamectl's output with awk because its man
    page says:
    
        hostnamectl [OPTIONS...] {COMMAND}
    
           --static, --transient, --pretty
               If status is used (or no explicit command is given) and one
               of those fields is given, hostnamectl will print out just
               this selected hostname.
    
    E.g. hostnamectl --static status => ansible.example.org

diff --git a/library/system/hostname b/library/system/hostname
index cca2364b61..c6d1f81945 100644
--- a/library/system/hostname
+++ b/library/system/hostname
@@ -285,7 +285,7 @@ class FedoraStrategy(GenericStrategy):
                 (rc, out, err))
 
     def get_permanent_hostname(self):
-        cmd = 'hostnamectl status | awk \'/^ *Static hostname:/{printf("%s", $3)}\''
+        cmd = 'hostnamectl --static status'
         rc, out, err = self.module.run_command(cmd, use_unsafe_shell=True)
         if rc != 0:
             self.module.fail_json(msg="Command failed rc=%d, out=%s, err=%s" %
