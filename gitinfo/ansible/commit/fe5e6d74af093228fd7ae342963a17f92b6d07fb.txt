commit fe5e6d74af093228fd7ae342963a17f92b6d07fb
Author: Brian Coca <bcoca@ansible.com>
Date:   Thu Apr 19 09:45:30 2018 -0400

    better handle appending \n on stderr
    
    fixes #39007

diff --git a/lib/ansible/plugins/inventory/script.py b/lib/ansible/plugins/inventory/script.py
index 35008fa2e8..342974dac2 100644
--- a/lib/ansible/plugins/inventory/script.py
+++ b/lib/ansible/plugins/inventory/script.py
@@ -104,7 +104,10 @@ class InventoryModule(BaseInventoryPlugin, Cacheable):
                 (stdout, stderr) = sp.communicate()
 
                 path = to_native(path)
-                err = to_native(stderr or "") + "\n"
+                err = to_native(stderr or "")
+
+                if err and not err.endswith('\n'):
+                    err =+ '\n'
 
                 if sp.returncode != 0:
                     raise AnsibleError("Inventory script (%s) had an execution error: %s " % (path, err))
