commit 661f7be0fe5acea3901b13691bef68467521aec2
Author: Sumit Jaiswal <sjaiswal@redhat.com>
Date:   Mon May 13 14:30:39 2019 +0530

    To fix the issue where nios_zone module was running second time for same object (#55595)
    
    * fix for 55128 issue
    
    Signed-off-by: Sumit Jaiswal <sjaiswal@redhat.com>
    
    * review comment fix
    
    Signed-off-by: Sumit Jaiswal <sjaiswal@redhat.com>

diff --git a/lib/ansible/module_utils/net_tools/nios/api.py b/lib/ansible/module_utils/net_tools/nios/api.py
index 1b85ea27fd..6a88bb095c 100644
--- a/lib/ansible/module_utils/net_tools/nios/api.py
+++ b/lib/ansible/module_utils/net_tools/nios/api.py
@@ -455,8 +455,8 @@ class WapiModule(WapiBase):
             temp = ib_spec['restart_if_needed']
             del ib_spec['restart_if_needed']
             ib_obj = self.get_object(ib_obj_type, obj_filter.copy(), return_fields=ib_spec.keys())
-            # reinstate restart_if_needed key if it's set to true in play
-            if module.params['restart_if_needed']:
+            # reinstate restart_if_needed if ib_obj is none, meaning there's no existing nios_zone ref
+            if not ib_obj:
                 ib_spec['restart_if_needed'] = temp
         elif (ib_obj_type == NIOS_MEMBER):
             # del key 'create_token' as nios_member get_object fails with the key present
