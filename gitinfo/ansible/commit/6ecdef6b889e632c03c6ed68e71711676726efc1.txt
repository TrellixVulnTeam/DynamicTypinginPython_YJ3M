commit 6ecdef6b889e632c03c6ed68e71711676726efc1
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Fri Mar 1 23:34:27 2013 -0500

    Type checking on library/apt means the upgrade parameter is now properly True/False

diff --git a/library/apt b/library/apt
index 7a8894ce68..bebea4e903 100644
--- a/library/apt
+++ b/library/apt
@@ -241,9 +241,9 @@ def main():
 
     force_yes = p['force']
 
-    if p['upgrade'] != 'no' and p['package'] is None:
+    if p['upgrade'] and p['package'] is None:
         upgrade(module, p['upgrade'])
-    elif p['upgrade'] != 'no' and p['package'] != None:
+    elif p['upgrade'] and p['package'] != None:
         module.fail_json(msg="Upgrade should not be used in conjunction with other options.")
 
     packages = p['package'].split(',')
