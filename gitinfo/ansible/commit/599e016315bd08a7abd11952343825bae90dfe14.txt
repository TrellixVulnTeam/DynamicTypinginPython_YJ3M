commit 599e016315bd08a7abd11952343825bae90dfe14
Author: Chris Houseknecht <chouseknecht@ansible.com>
Date:   Fri Dec 2 10:08:10 2016 -0500

    For container enabled role, display warning only when not ANSIBLE_CONTAINER (#18717)

diff --git a/lib/ansible/galaxy/role.py b/lib/ansible/galaxy/role.py
index a375210172..a3498c5e64 100644
--- a/lib/ansible/galaxy/role.py
+++ b/lib/ansible/galaxy/role.py
@@ -212,8 +212,8 @@ class GalaxyRole(object):
                 if not role_data:
                     raise AnsibleError("- sorry, %s was not found on %s." % (self.src, api.api_server))
 
-                if role_data.get('role_type') == 'CON':
-                    # Container Enabled
+                if role_data.get('role_type') == 'CON' and not os.environ.get('ANSIBLE_CONTAINER'):
+                    # Container Enabled, running outside of a container
                     display.warning("%s is a Container Enabled role and should only be installed using "
                                     "Ansible Container" % self.name)
 
