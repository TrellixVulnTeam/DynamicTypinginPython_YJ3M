commit e8a94acffa776bf4fc5468b94c85d6adcbee7ab4
Author: Lucas Alvares Gomes <lucasagomes@gmail.com>
Date:   Wed Jan 18 21:48:11 2017 +0000

    Pass the HOME environment variable to testenv in tox.ini
    
    In order to avoid the "missing HOME variable" issue when running the
    unit tests, this patch is passing the HOME environment variable to
    [testenv].
    
    Fixes #20424

diff --git a/tox.ini b/tox.ini
index 59aa4a0cd7..baef6d1423 100644
--- a/tox.ini
+++ b/tox.ini
@@ -16,6 +16,10 @@ commands =
     py27: python -m compileall -fq -x 'test/samples' lib test contrib
     py3{5,6}: python -m compileall -fq -x 'test/samples|lib/ansible/modules' lib test contrib
     make tests
+passenv =
+    # Pass HOME to the test environment to avoid the missing HOME env
+    # variable error. See issue: #20424
+    HOME
 
 
 [flake8]
