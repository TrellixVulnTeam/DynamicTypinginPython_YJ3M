commit ab7678f199ad002be04da577f79dea4075109565
Author: toninog <tag@reaper.org>
Date:   Mon Jun 8 14:21:49 2015 +0100

    Fixed more issues with the delete_group and paramater mismatch

diff --git a/lib/ansible/modules/cloud/amazon/iam.py b/lib/ansible/modules/cloud/amazon/iam.py
index ddf54c9272..c583332220 100644
--- a/lib/ansible/modules/cloud/amazon/iam.py
+++ b/lib/ansible/modules/cloud/amazon/iam.py
@@ -146,7 +146,7 @@ task:
     iam_type: user
     name: jdavila
     state: update
-    groups: "{{ item.created_group.group_name }}"
+    group: "{{ item.created_group.group_name }}"
   with_items: new_groups.results
 
 '''
@@ -401,7 +401,7 @@ def create_group(module=None, iam=None, name=None, path=None):
     return name, changed
 
 
-def delete_group(module, iam, name):
+def delete_group(module=None, iam=None, name=None):
     changed = False
     try:
         iam.delete_group(name)
@@ -675,7 +675,7 @@ def main():
         group_exists = name in orig_group_list
 
         if state == 'present' and not group_exists:
-            new_group, changed = create_group(iam, name, path)
+            new_group, changed = create_group(iam=iam, name=name, path=path)
             module.exit_json(changed=changed, group_name=new_group)
         elif state in ['present', 'update'] and group_exists:
             changed, updated_name, updated_path, cur_path = update_group(
@@ -703,7 +703,7 @@ def main():
                 changed=changed, msg="Update Failed. Group %s doesn't seem to exit!" % name)
         elif state == 'absent':
             if name in orig_group_list:
-                removed_group, changed = delete_group(iam, name)
+                removed_group, changed = delete_group(iam=iam, name=name)
                 module.exit_json(changed=changed, delete_group=removed_group)
             else:
                 module.exit_json(changed=changed, msg="Group already absent")
