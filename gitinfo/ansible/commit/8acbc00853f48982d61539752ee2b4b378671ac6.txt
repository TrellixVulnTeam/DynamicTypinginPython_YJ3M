commit 8acbc00853f48982d61539752ee2b4b378671ac6
Author: James Cammarata <jimi@sngx.net>
Date:   Thu Sep 17 10:24:03 2015 -0400

    Fixing groups variable structure to match v1
    
    Fixes #12418

diff --git a/lib/ansible/vars/__init__.py b/lib/ansible/vars/__init__.py
index 3fe8ada858..da4a4b42ec 100644
--- a/lib/ansible/vars/__init__.py
+++ b/lib/ansible/vars/__init__.py
@@ -264,7 +264,10 @@ class VariableManager:
             all_vars['group_names'] = [group.name for group in host.get_groups()]
 
             if self._inventory is not None:
-                all_vars['groups']  = self._inventory.groups.keys()
+                all_vars['groups']  = dict()
+                for (group_name, group) in self._inventory.groups.iteritems():
+                    all_vars['groups'][group_name] = [h.name for h in group.get_hosts()]
+
                 if include_hostvars:
                     hostvars = HostVars(vars_manager=self, play=play, inventory=self._inventory, loader=loader)
                     all_vars['hostvars'] = hostvars
