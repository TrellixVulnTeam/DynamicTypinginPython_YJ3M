commit bfdc5098cbf5bd4f582f6d450475ba8169079e8d
Author: Peter Sprygada <psprygada@ansible.com>
Date:   Tue Sep 6 22:51:40 2016 -0400

    minor bug fixes in eos_template
    
    * fixes issue where configuration was not being loaded (#4704)
    * fixes issue where defaults were not included when argument was set to True
    
    tested on EOS 4.15.4F

diff --git a/lib/ansible/modules/network/eos/eos_template.py b/lib/ansible/modules/network/eos/eos_template.py
index c536187659..59733ab593 100644
--- a/lib/ansible/modules/network/eos/eos_template.py
+++ b/lib/ansible/modules/network/eos/eos_template.py
@@ -122,8 +122,9 @@ from ansible.module_utils.eos import NetworkModule
 
 def get_config(module):
     config = module.params.get('config')
+    defaults = module.params['include_defaults']
     if not config and not module.params['force']:
-        config = module.config.get_config()
+        config = module.config.get_config(include_defaults=defaults)
     return config
 
 def filter_exit(commands):
@@ -198,7 +199,12 @@ def main():
     commands = filter_exit(commands)
     if commands:
         if not module.check_mode:
-            response = module.config(commands, replace=replace)
+            response = module.config.load_config(commands,
+                                                 replace=replace,
+                                                 session='eos_template',
+                                                 commit=True)
+
+            module.cli('no configure session eos_template')
             result['responses'] = response
         result['changed'] = True
 
