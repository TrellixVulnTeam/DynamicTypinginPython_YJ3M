commit 1f3755f86bf8603be1b7b4ea75c0aa9d683e0060
Author: Yujun Zhang <zhangyujun@gmail.com>
Date:   Thu Jun 29 00:45:38 2017 +0800

    Include error message when ansiballz_setup fails (#26127)
    
    It is quite difficult to pinpoint what is wrong without it

diff --git a/hacking/test-module b/hacking/test-module
index b8ae787163..63e23c169e 100755
--- a/hacking/test-module
+++ b/hacking/test-module
@@ -183,7 +183,7 @@ def ansiballz_setup(modfile, modname, interpreters):
         print("*" * 35)
         print("INVALID OUTPUT FROM ANSIBALLZ MODULE WRAPPER")
         print(out)
-        sys.exit(1)
+        sys.exit(err)
     debug_dir = lines[1].strip()
 
     argsfile = os.path.join(debug_dir, 'args')
