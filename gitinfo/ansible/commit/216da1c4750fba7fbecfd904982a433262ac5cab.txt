commit 216da1c4750fba7fbecfd904982a433262ac5cab
Author: tstoner <33665760+tstoner@users.noreply.github.com>
Date:   Fri Sep 21 07:06:37 2018 -0400

    Changed when condition from checking image version to checking keys being (#45943)
    
    defined

diff --git a/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_http.yaml b/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_http.yaml
index f610431dd3..0d13136aaa 100644
--- a/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_http.yaml
+++ b/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_http.yaml
@@ -5,7 +5,7 @@
       - result.stdout[0]['TABLE_listen_on_port']['ROW_listen_on_port'].l_port
       - result.stdout[0]['TABLE_listen_on_port']['ROW_listen_on_port'].l_port|string is search("80")
       - result.stdout[0]['operation_status'].o_status == 'nxapi enabled'
-  when: major_version is version('9.2', '<')
+  when: result.stdout[0].TABLE_listen_on_port is defined
 
 - name: Assert HTTP configuration changes 9.2 or greater
   assert:
@@ -13,4 +13,4 @@
       - result.stdout[0]['http_port']
       - result.stdout[0]['http_port']|string is search("80")
       - result.stdout[0]['nxapi_status'] == 'nxapi enabled'
-  when: major_version is version('9.2', '>=')
+  when: result.stdout[0].http_port is defined
diff --git a/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https.yaml b/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https.yaml
index e89a156fcf..629698ac98 100644
--- a/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https.yaml
+++ b/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https.yaml
@@ -5,7 +5,7 @@
       - result.stdout[0]['TABLE_listen_on_port']['ROW_listen_on_port'].l_port
       - result.stdout[0]['TABLE_listen_on_port']['ROW_listen_on_port'].l_port|string is search("9443")
       - result.stdout[0]['operation_status'].o_status == 'nxapi enabled'
-  when: major_version is version('9.2', '<')
+  when: result.stdout[0].TABLE_listen_on_port is defined
 
 - name: Assert HTTPS configuration changes 9.2 or greater
   assert:
@@ -13,4 +13,4 @@
       - result.stdout[0]['https_port']
       - result.stdout[0]['https_port']|string is search("9443")
       - result.stdout[0]['nxapi_status'] == 'nxapi enabled'
-  when: major_version is version('9.2', '>=')
+  when: result.stdout[0].https_port is defined
diff --git a/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https_http.yaml b/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https_http.yaml
index b7883e2cfe..89c30757d2 100644
--- a/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https_http.yaml
+++ b/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https_http.yaml
@@ -7,7 +7,7 @@
       - result.stdout[0]['TABLE_listen_on_port']['ROW_listen_on_port'][0].l_port
       - result.stdout[0]['TABLE_listen_on_port']['ROW_listen_on_port'][0].l_port|string is search("80")
       - result.stdout[0]['operation_status'].o_status == 'nxapi enabled'
-  when: major_version is version('9.2', '<')
+  when: result.stdout[0].TABLE_listen_on_port is defined
 
 - name: Assert HTTPS & HTTP configuration changes 9.2 or greater
   assert:
@@ -17,4 +17,4 @@
       - result.stdout[0]['http_port']
       - result.stdout[0]['http_port']|string is search("80")
       - result.stdout[0]['nxapi_status'] == 'nxapi enabled'
-  when: major_version is version('9.2', '>=')
+  when: result.stdout[0].https_port is defined or result.stdout[0].http_port is defined
diff --git a/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https_http_ports.yaml b/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https_http_ports.yaml
index 05fe2fd048..6838d0d6fa 100644
--- a/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https_http_ports.yaml
+++ b/test/integration/targets/nxos_nxapi/tasks/platform/default/assert_changes_https_http_ports.yaml
@@ -7,7 +7,7 @@
       - result.stdout[0]['TABLE_listen_on_port']['ROW_listen_on_port'][0].l_port
       - result.stdout[0]['TABLE_listen_on_port']['ROW_listen_on_port'][0].l_port|string is search("99")
       - result.stdout[0]['operation_status'].o_status == 'nxapi enabled'
-  when: major_version is version('9.2', '<')
+  when: result.stdout[0].TABLE_listen_on_port is defined
 
 - name: Assert HTTPS & HTTP configuration changes 9.2 or greater
   assert:
@@ -17,4 +17,4 @@
       - result.stdout[0]['http_port']
       - result.stdout[0]['http_port']|string is search("99")
       - result.stdout[0]['nxapi_status'] == 'nxapi enabled'
-  when: major_version is version('9.2', '>=')
+  when: result.stdout[0].https_port is defined or result.stdout[0].http_port is defined
