commit a01d97f12bc93ab7992a84bc2c6dd248dc2fbdb2
Author: James Cammarata <jimi@sngx.net>
Date:   Thu Aug 14 10:55:26 2014 -0500

    Fixing variable name bug introduced in ac8950f
    
    Fixes #8617

diff --git a/lib/ansible/playbook/__init__.py b/lib/ansible/playbook/__init__.py
index ed7dae20d7..c52acf3caa 100644
--- a/lib/ansible/playbook/__init__.py
+++ b/lib/ansible/playbook/__init__.py
@@ -236,10 +236,10 @@ class PlayBook(object):
             return vars.copy()
 
         play_vars = None
-        if isinstance(play_vars, dict):
+        if isinstance(play['vars'], dict):
             play_vars = play['vars'].copy()
             play_vars.update(vars)
-        elif isinstance(play_vars, list):
+        elif isinstance(play['vars'], list):
             # nobody should really do this, but handle vars: a=1 b=2
             play_vars = play['vars'][:]
             play_vars.extend([{k:v} for k,v in vars.iteritems()])
