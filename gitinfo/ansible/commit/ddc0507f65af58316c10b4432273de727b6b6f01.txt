commit ddc0507f65af58316c10b4432273de727b6b6f01
Author: Norman J. Harman Jr <njharman@gmail.com>
Date:   Wed Dec 12 16:55:30 2012 -0600

    Passing in module instead of just fail_json per upstream request.

diff --git a/library/subversion b/library/subversion
index 88699ab0e7..1a964b28fe 100644
--- a/library/subversion
+++ b/library/subversion
@@ -70,8 +70,8 @@ import re
 
 
 class Subversion(object):
-    def __init__(self, fail_callback, dest, repo, revision, username, password):
-        self.fail_callback = fail_callback
+    def __init__(self, module, dest, repo, revision, username, password):
+        self.module = module
         self.dest = dest
         self.repo = repo
         self.revision = revision
@@ -89,7 +89,7 @@ class Subversion(object):
         out, err = cmd.communicate()
         rc = cmd.returncode
         if rc != 0:
-            self.fail_callback(msg=err)
+            self.module.fail_json(msg=err)
         return out.splitlines()
 
     def checkout(self):
@@ -146,7 +146,7 @@ def main():
     username = module.params['username']
     password = module.params['password']
 
-    svn = Subversion(module.fail_json, dest, repo, revision, username, password)
+    svn = Subversion(module, dest, repo, revision, username, password)
 
     if not os.path.exists(dest):
         before = None
