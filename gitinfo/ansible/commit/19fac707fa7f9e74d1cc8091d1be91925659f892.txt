commit 19fac707fa7f9e74d1cc8091d1be91925659f892
Author: Ganesh Nalawade <ganesh634@gmail.com>
Date:   Tue Aug 1 21:33:11 2017 +0530

    junos_netconf integration test failure fix (#27569)
    
    *  Create socket using port value and not connection type
    *  Correct error message in integration test task

diff --git a/bin/ansible-connection b/bin/ansible-connection
index fde1883e1f..073de82af5 100755
--- a/bin/ansible-connection
+++ b/bin/ansible-connection
@@ -292,7 +292,7 @@ def main():
         sys.exit("FAIL: %s" % e)
 
     ssh = connection_loader.get('ssh', class_only=True)
-    cp = ssh._create_control_path(pc.remote_addr, pc.connection, pc.remote_user)
+    cp = ssh._create_control_path(pc.remote_addr, pc.port, pc.remote_user)
 
     # create the persistent connection dir if need be and create the paths
     # which we will be using later
diff --git a/test/integration/targets/junos_netconf/tests/cli/changeport.yaml b/test/integration/targets/junos_netconf/tests/cli/changeport.yaml
index ce153fad92..1e4c81bf9e 100644
--- a/test/integration/targets/junos_netconf/tests/cli/changeport.yaml
+++ b/test/integration/targets/junos_netconf/tests/cli/changeport.yaml
@@ -49,7 +49,7 @@
 - assert:
     that:
       - "result.failed == true"
-      - "'unable to connect to' in result.msg"
+      - "'unable to open shell' in result.msg"
 
 - name: Set back netconf to default port
   junos_netconf:
diff --git a/test/integration/targets/junos_netconf/tests/cli/netconf.yaml b/test/integration/targets/junos_netconf/tests/cli/netconf.yaml
index 56bf64ce8b..b53df7152c 100644
--- a/test/integration/targets/junos_netconf/tests/cli/netconf.yaml
+++ b/test/integration/targets/junos_netconf/tests/cli/netconf.yaml
@@ -61,7 +61,7 @@
 - assert:
     that:
       - "result.failed == true"
-      - "'unable to connect to' in result.msg"
+      - "'unable to open shell' in result.msg"
 
 - name: re-enable netconf
   junos_netconf:
