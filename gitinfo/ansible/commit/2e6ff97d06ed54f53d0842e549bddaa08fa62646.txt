commit 2e6ff97d06ed54f53d0842e549bddaa08fa62646
Author: James Andrewartha <trs80@ucc.asn.au>
Date:   Tue Jul 11 02:08:59 2017 +0800

    Detect UEFI VMware guests (#26590)
    
    VMware provides a different DMI product name for VMs booted via UEFI vs BIOS.
    
    VMware provides a different DMI product name for VMs booted via UEFI ('VMware7,1') vs BIOS ('VMware Virtual Platform')
    
    Fixes #26517

diff --git a/lib/ansible/module_utils/facts/virtual/linux.py b/lib/ansible/module_utils/facts/virtual/linux.py
index 09d94cfc57..ee5f17436e 100644
--- a/lib/ansible/module_utils/facts/virtual/linux.py
+++ b/lib/ansible/module_utils/facts/virtual/linux.py
@@ -92,7 +92,7 @@ class LinuxVirtual(Virtual):
             virtual_facts['virtualization_role'] = 'guest'
             return virtual_facts
 
-        if product_name == 'VMware Virtual Platform':
+        if product_name in ['VMware Virtual Platform', 'VMware7,1']:
             virtual_facts['virtualization_type'] = 'VMware'
             virtual_facts['virtualization_role'] = 'guest'
             return virtual_facts
