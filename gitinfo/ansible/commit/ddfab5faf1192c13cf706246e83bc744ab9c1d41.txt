commit ddfab5faf1192c13cf706246e83bc744ab9c1d41
Author: Matt Martz <matt@sivel.net>
Date:   Mon Feb 1 12:32:59 2016 -0600

    Use isinstance type checks in bool filter so we can handle unsafe proxy objects. Fixes #14240

diff --git a/lib/ansible/plugins/filter/core.py b/lib/ansible/plugins/filter/core.py
index fed5097d91..51638d02ae 100644
--- a/lib/ansible/plugins/filter/core.py
+++ b/lib/ansible/plugins/filter/core.py
@@ -41,7 +41,7 @@ import uuid
 import yaml
 from jinja2.filters import environmentfilter
 from distutils.version import LooseVersion, StrictVersion
-from ansible.compat.six import iteritems
+from ansible.compat.six import iteritems, string_types
 
 from ansible import errors
 from ansible.parsing.yaml.dumper import AnsibleDumper
@@ -110,7 +110,7 @@ def bool(a):
     ''' return a bool for the arg '''
     if a is None or type(a) == bool:
         return a
-    if type(a) in types.StringTypes:
+    if isinstance(a, string_types):
         a = a.lower()
     if a in ['yes', 'on', '1', 'true', 1]:
         return True
