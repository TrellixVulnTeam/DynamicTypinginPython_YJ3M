commit 0d5b7ae669ec568257f0415d8bee8dadfb85795a
Author: Benno Joy <benno@ansible.com>
Date:   Wed Jun 17 19:18:19 2015 +0530

    fixes 11296 where the groups does not have all the groups

diff --git a/lib/ansible/vars/__init__.py b/lib/ansible/vars/__init__.py
index 64ad9e3a14..239d77ca65 100644
--- a/lib/ansible/vars/__init__.py
+++ b/lib/ansible/vars/__init__.py
@@ -219,6 +219,7 @@ class VariableManager:
             if self._inventory is not None:
                 hostvars = HostVars(vars_manager=self, inventory=self._inventory, loader=loader)
                 all_vars['hostvars'] = hostvars
+                all_vars['groups']   = self._inventory.groups_list()
 
         if task:
             if task._role:
