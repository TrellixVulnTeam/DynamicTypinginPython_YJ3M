commit 22d657d3c7fe75326495d1730c6203b5f61f478b
Author: Benjamin Jolivot <bjolivot@users.noreply.github.com>
Date:   Wed Mar 1 17:20:51 2017 +0100

    Fix #22130 (ini_file crash when destination file don't exists or is eâ€¦ (#22132)
    
    * Fix #22130 (ini_file crash when destination file don't exists or is empty)

diff --git a/lib/ansible/modules/files/ini_file.py b/lib/ansible/modules/files/ini_file.py
index 7ccad90736..edddcc46ba 100644
--- a/lib/ansible/modules/files/ini_file.py
+++ b/lib/ansible/modules/files/ini_file.py
@@ -176,6 +176,10 @@ def do_ini(module, filename, section=None, option=None, value=None,
 
     changed = False
 
+    # ini file could be empty
+    if not ini_lines:
+        ini_lines.append('\n')
+
     # last line of file may not contain a trailing newline
     if ini_lines[-1] == "" or ini_lines[-1][-1] != '\n':
         ini_lines[-1] += '\n'
