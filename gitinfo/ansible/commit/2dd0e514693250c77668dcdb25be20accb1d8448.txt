commit 2dd0e514693250c77668dcdb25be20accb1d8448
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Wed Dec 10 14:25:40 2014 -0800

    Possible fix for postgres setup on F21 cloud image

diff --git a/test/integration/roles/setup_postgresql_db/tasks/main.yml b/test/integration/roles/setup_postgresql_db/tasks/main.yml
index d306ac3b7a..970b87d18d 100644
--- a/test/integration/roles/setup_postgresql_db/tasks/main.yml
+++ b/test/integration/roles/setup_postgresql_db/tasks/main.yml
@@ -61,13 +61,21 @@
 - name: Copy pg_hba into place
   copy: src=pg_hba.conf dest="{{ pg_hba_location }}" owner="postgres" group="root" mode="0644"
 
-- name: Generate locale on Debian systems
+- name: Generate pt_BR locale (Debian)
   command: locale-gen pt_BR
   when: ansible_os_family == 'Debian'
 
-- name: Generate locale on Debian systems
+- name: Generate es_MX locale (Debian)
   command: locale-gen es_MX
   when: ansible_os_family == 'Debian'
 
+- name: Generate pt_BR locale (Red Hat)
+  command: locale-gen -f UTF-8 -i pt_BR pt_BR
+  when: ansible_os_family == 'RedHat'
+
+- name: Generate es_MX locale (Red Hat)
+  command: locale-gen -f UTF-8 -i es_MX es_MX
+  when: ansible_os_family == 'RedHat'
+
 - name: restart postgresql service
   service: name={{ postgresql_service }} state=restarted
