commit c42b8b4ad7901fbcefc3fd1d4aca78fc042157ba
Author: Philip Carinhas <pcarinhas@zenoss.com>
Date:   Sat Dec 6 12:31:08 2014 -0600

    Fix rabbitmq_plugin.py: broken prefix path

diff --git a/lib/ansible/modules/extras/messaging/rabbitmq_plugin.py b/lib/ansible/modules/extras/messaging/rabbitmq_plugin.py
index db23df3fcc..bc71bcec51 100644
--- a/lib/ansible/modules/extras/messaging/rabbitmq_plugin.py
+++ b/lib/ansible/modules/extras/messaging/rabbitmq_plugin.py
@@ -59,12 +59,23 @@ EXAMPLES = '''
 - rabbitmq_plugin: names=rabbitmq_management state=enabled
 '''
 
+import os
+
 class RabbitMqPlugins(object):
     def __init__(self, module):
         self.module = module
 
         if module.params['prefix']:
-            self._rabbitmq_plugins = module.params['prefix'] + "/sbin/rabbitmq-plugins"
+            if os.path.isdir(os.path.join(module.params['prefix'], 'bin')):
+                bin_path = os.path.join(module.params['prefix'], 'bin')
+            elif os.path.isdir(os.path.join(module.params['prefix'], 'sbin')):
+                bin_path = os.path.join(module.params['prefix'], 'sbin')
+            else:
+                # No such path exists.
+                raise Exception("No binary folder in RabbitMQ prefix")
+
+            self._rabbitmq_plugins = bin_path + "/rabbitmq-plugins"
+
         else:
             self._rabbitmq_plugins = module.get_bin_path('rabbitmq-plugins', True)
 
