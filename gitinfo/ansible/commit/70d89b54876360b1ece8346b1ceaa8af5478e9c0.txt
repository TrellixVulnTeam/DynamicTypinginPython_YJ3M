commit 70d89b54876360b1ece8346b1ceaa8af5478e9c0
Author: Brian Coca <bcoca@ansible.com>
Date:   Tue Apr 24 14:11:08 2018 -0400

    use actual ssh executable as it might not be ssh

diff --git a/lib/ansible/plugins/connection/ssh.py b/lib/ansible/plugins/connection/ssh.py
index d4e9c5cfd7..57494a9d0d 100644
--- a/lib/ansible/plugins/connection/ssh.py
+++ b/lib/ansible/plugins/connection/ssh.py
@@ -677,7 +677,7 @@ class Connection(ConnectionBase):
         # only when using ssh. Otherwise we can send initial data straightaway.
 
         state = states.index('ready_to_send')
-        if b'ssh' in cmd and sudoable:
+        if to_bytes(self.get_option('ssh_executable')) in cmd and sudoable:
             if self._play_context.prompt:
                 # We're requesting escalation with a password, so we have to
                 # wait for a password prompt.
