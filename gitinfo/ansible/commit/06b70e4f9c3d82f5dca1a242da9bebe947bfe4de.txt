commit 06b70e4f9c3d82f5dca1a242da9bebe947bfe4de
Author: Adam Miller <admiller@redhat.com>
Date:   Thu Jan 8 11:29:11 2015 -0600

    When checking for Xen for LinuxHardware processor facts, don't check sysfs if already found in /proc/

diff --git a/lib/ansible/module_utils/facts.py b/lib/ansible/module_utils/facts.py
index d9929c8338..36f706d02c 100644
--- a/lib/ansible/module_utils/facts.py
+++ b/lib/ansible/module_utils/facts.py
@@ -612,10 +612,10 @@ class LinuxHardware(Hardware):
 
         xen = False
         xen_paravirt = False
-        if os.path.exists('/proc/xen'):
-            xen = True
         try:
-            if open('/sys/hypervisor/type').readline().strip() == 'xen':
+            if os.path.exists('/proc/xen'):
+                xen = True
+            elif open('/sys/hypervisor/type').readline().strip() == 'xen':
                 xen = True
         except IOError:
             pass
