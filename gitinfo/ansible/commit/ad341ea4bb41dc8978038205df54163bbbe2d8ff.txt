commit ad341ea4bb41dc8978038205df54163bbbe2d8ff
Author: Sam Doran <sdoran@redhat.com>
Date:   Mon Jan 13 19:23:31 2020 -0500

    Fix unarchive integration test failure due to rpm error (#66420)
    
    * Fix unarchive integration test failure
    * Do not cleanup pip packages

diff --git a/test/integration/targets/unarchive/aliases b/test/integration/targets/unarchive/aliases
index b08a15bf3e..961b20518e 100644
--- a/test/integration/targets/unarchive/aliases
+++ b/test/integration/targets/unarchive/aliases
@@ -1,4 +1,3 @@
 needs/root
 shippable/posix/group2
 destructive
-unstable
diff --git a/test/integration/targets/unarchive/handlers/main.yml b/test/integration/targets/unarchive/handlers/main.yml
deleted file mode 100644
index b612caaf87..0000000000
--- a/test/integration/targets/unarchive/handlers/main.yml
+++ /dev/null
@@ -1,9 +0,0 @@
-- name: remove python TLS packages
-  yum:
-    name:
-      - python-urllib3
-      - python2-ndg_httpsclient
-      - pyOpenSSL
-      - 'python-backports*'
-      - python-six
-    state: absent
diff --git a/test/integration/targets/unarchive/tasks/main.yml b/test/integration/targets/unarchive/tasks/main.yml
index 89d27dff44..ef780b5ec3 100644
--- a/test/integration/targets/unarchive/tasks/main.yml
+++ b/test/integration/targets/unarchive/tasks/main.yml
@@ -634,15 +634,15 @@
   file: path={{remote_tmp_dir}}/test-unarchive-tar-gz state=directory
 
 - name: Install packages to make TLS connections work on CentOS 6
-  yum:
+  pip:
     name:
-      - python-urllib3
-      - python2-ndg_httpsclient
+      - urllib3==1.10.2
+      - ndg_httpsclient==0.4.4
+      - pyOpenSSL==16.2.0
     state: present
   when:
     - ansible_facts.distribution == 'CentOS'
     - not ansible_facts.python.has_sslcontext
-  notify: remove python TLS packages
 
 - name: unarchive a tar from an URL
   unarchive:
