commit 81e2d871aa9a9fe8fce757c5b1c139b18db361f2
Author: Rob Parrott <robparrott@gmail.com>
Date:   Tue Mar 19 13:04:57 2013 -0400

    inject a dictionary of avaiable variables and the environment into the executor, so that templates can be used to debug playbooks by dumping more of the available context.

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index f0826c3bdd..2ca710316a 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -337,6 +337,8 @@ class Runner(object):
         inject['hostvars'] = HostVars(self.setup_cache, self.inventory)
         inject['group_names'] = host_variables.get('group_names', [])
         inject['groups'] = self.inventory.groups_list()
+        inject['vars'] = self.module_vars
+        inject['environment'] = self.environment
 
         # allow with_foo to work in playbooks...
         items = None
