commit 363596c67f36dcdd1f04e5ea94e8dd83a68bf752
Author: Brian Coca <bcoca@ansible.com>
Date:   Mon Jul 25 08:03:16 2016 -0400

    added check and diff mode control to console
    
    also expanded mk_boolean to allow for 'on/off'
    fixes #16815

diff --git a/lib/ansible/cli/console.py b/lib/ansible/cli/console.py
index 200611b5fa..5b0432036f 100644
--- a/lib/ansible/cli/console.py
+++ b/lib/ansible/cli/console.py
@@ -332,6 +332,22 @@ class ConsoleCLI(CLI, cmd.Cmd):
         else:
             display.display("Please specify a become_method, e.g. `become_method su`")
 
+    def do_check(self, arg):
+        """Toggle whether plays run with check mode"""
+        if arg:
+            self.options.check = C.mk_boolean(arg)
+            display.v("check mode changed to %s" % self.options.check)
+        else:
+            display.display("Please specify check mode value, e.g. `check yes`")
+
+    def do_diff(self, arg):
+        """Toggle whether plays run with diff"""
+        if arg:
+            self.options.diff = C.mk_boolean(arg)
+            display.v("diff mode changed to %s" % self.options.diff)
+        else:
+            display.display("Please specify a diff value , e.g. `diff yes`")
+
     def do_exit(self, args):
         """Exits from the console"""
         sys.stdout.write('\n')
diff --git a/lib/ansible/constants.py b/lib/ansible/constants.py
index 9e20ac5bf7..f6311f28f6 100644
--- a/lib/ansible/constants.py
+++ b/lib/ansible/constants.py
@@ -34,7 +34,7 @@ def mk_boolean(value):
     if value is None:
         return False
     val = str(value)
-    if val.lower() in [ "true", "t", "y", "1", "yes" ]:
+    if val.lower() in [ "true", "t", "y", "1", "yes", "on" ]:
         return True
     else:
         return False
