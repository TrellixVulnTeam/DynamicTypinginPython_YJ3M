commit 5a65dce6fb653e5cebae65b0d0dfd23b7a0bb576
Author: Brian Coca <bcoca@ansible.com>
Date:   Sun Aug 30 17:48:09 2015 -0400

    fix issues with csh redirection

diff --git a/lib/ansible/plugins/shell/csh.py b/lib/ansible/plugins/shell/csh.py
index 29751f73ee..1c383d133c 100644
--- a/lib/ansible/plugins/shell/csh.py
+++ b/lib/ansible/plugins/shell/csh.py
@@ -23,6 +23,7 @@ class ShellModule(ShModule):
 
     # How to end lines in a python script one-liner
     _SHELL_EMBEDDED_PY_EOL = '\\\n'
+    _SHELL_REDIRECT_ALLNULL = '>& /dev/null'
 
     def env_prefix(self, **kwargs):
         return 'env %s' % super(ShellModule, self).env_prefix(**kwargs)
diff --git a/lib/ansible/plugins/shell/sh.py b/lib/ansible/plugins/shell/sh.py
index 249131a0fb..ea27c24543 100644
--- a/lib/ansible/plugins/shell/sh.py
+++ b/lib/ansible/plugins/shell/sh.py
@@ -30,6 +30,7 @@ class ShellModule(object):
 
     # How to end lines in a python script one-liner
     _SHELL_EMBEDDED_PY_EOL = '\n'
+    _SHELL_REDIRECT_ALLNULL = '> /dev/null 2>&1'
 
     def env_prefix(self, **kwargs):
         '''Build command prefix with environment variables.'''
@@ -53,10 +54,10 @@ class ShellModule(object):
 
     def remove(self, path, recurse=False):
         path = pipes.quote(path)
+        cmd = 'rm -f '
         if recurse:
-            return "rm -rf %s >/dev/null 2>&1" % path
-        else:
-            return "rm -f %s >/dev/null 2>&1" % path
+            cmd += '-r '
+        return cmd + "%s %s" % (path, self._SHELL_REDIRECT_ALLNULL)
 
     def mkdtemp(self, basefile=None, system=False, mode=None):
         if not basefile:
@@ -139,5 +140,5 @@ class ShellModule(object):
         cmd_parts = [env_string.strip(), shebang.replace("#!", "").strip(), cmd]
         new_cmd = " ".join(cmd_parts)
         if rm_tmp:
-            new_cmd = '%s; rm -rf "%s" >/dev/null 2>&1' % (new_cmd, rm_tmp)
+            new_cmd = '%s; rm -rf "%s" %s' % (new_cmd, rm_tmp, self._SHELL_REDIRECT_ALLNULL)
         return new_cmd
