commit 3293fe7231c86295d4444f75111954e599a45622
Author: Toby Fleming <tobywf@users.noreply.github.com>
Date:   Mon Jul 20 21:07:43 2015 +0100

    Homebrew: Allow colons, direct check for outdated formula

diff --git a/lib/ansible/modules/extras/packaging/os/homebrew.py b/lib/ansible/modules/extras/packaging/os/homebrew.py
index 9d41dcd69a..d79a118b93 100644
--- a/lib/ansible/modules/extras/packaging/os/homebrew.py
+++ b/lib/ansible/modules/extras/packaging/os/homebrew.py
@@ -121,6 +121,7 @@ class Homebrew(object):
         /                   # slash (for taps)
         \+                  # plusses
         -                   # dashes
+        :                   # colons (for URLs)
     '''
 
     INVALID_PATH_REGEX        = _create_regex_group(VALID_PATH_CHARS)
@@ -396,18 +397,17 @@ class Homebrew(object):
 
         return False
 
-    def _outdated_packages(self):
+    def _current_package_is_outdated(self):
+        if not self.valid_package(self.current_package):
+            return False
+
         rc, out, err = self.module.run_command([
             self.brew_path,
             'outdated',
+            self.current_package,
         ])
-        return [line.split(' ')[0].strip() for line in out.split('\n') if line]
-
-    def _current_package_is_outdated(self):
-        if not self.valid_package(self.current_package):
-            return False
 
-        return self.current_package in self._outdated_packages()
+        return rc != 0
 
     def _current_package_is_installed_from_head(self):
         if not Homebrew.valid_package(self.current_package):
