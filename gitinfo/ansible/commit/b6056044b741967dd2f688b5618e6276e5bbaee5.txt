commit b6056044b741967dd2f688b5618e6276e5bbaee5
Author: James Cammarata <jimi@sngx.net>
Date:   Thu Mar 6 21:11:57 2014 -0600

    Partial revert of 73c883c due to issues with handlers in roles
    
    Fixes #6322

diff --git a/CHANGELOG.md b/CHANGELOG.md
index c36e6524ac..2703f76909 100644
--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -6,7 +6,6 @@ Ansible Changes By Release
 Major features/changes:
 
 * The deprecated legacy variable templating system has been finally removed.  Use {{ foo }} always not $foo or ${foo}.
-* Role dependencies are now tracked across multiple plays, making common roles easier to include in dependencies without any special variable tricks.
 * Any data file can also be JSON.  Use sparingly -- with great power comes great responsibility.  Starting file with "{" or "[" denotes JSON.
 
 New Modules:
diff --git a/lib/ansible/playbook/__init__.py b/lib/ansible/playbook/__init__.py
index 3fd84239fb..6596552625 100644
--- a/lib/ansible/playbook/__init__.py
+++ b/lib/ansible/playbook/__init__.py
@@ -240,20 +240,13 @@ class PlayBook(object):
         plays = []
         matched_tags_all = set()
         unmatched_tags_all = set()
-        included_roles = []
 
         # loop through all patterns and run them
         self.callbacks.on_start()
         for (play_ds, play_basedir) in zip(self.playbook, self.play_basedirs):
-            play = Play(self, play_ds, play_basedir, included_roles=included_roles, vault_password=self.vault_password)
+            play = Play(self, play_ds, play_basedir, vault_password=self.vault_password)
             assert play is not None
 
-            # add any new roles brought in by this play to the 
-            # global list of roles we're tracking
-            for role in play.included_roles:
-                if role not in included_roles:
-                    included_roles.append(role)
-
             matched_tags, unmatched_tags = play.compare_tags(self.only_tags)
             matched_tags_all = matched_tags_all | matched_tags
             unmatched_tags_all = unmatched_tags_all | unmatched_tags
diff --git a/lib/ansible/playbook/play.py b/lib/ansible/playbook/play.py
index 41f246cbbb..08564ba57e 100644
--- a/lib/ansible/playbook/play.py
+++ b/lib/ansible/playbook/play.py
@@ -49,7 +49,7 @@ class Play(object):
 
     # *************************************************
 
-    def __init__(self, playbook, ds, basedir, included_roles=[], vault_password=None):
+    def __init__(self, playbook, ds, basedir, vault_password=None):
         ''' constructor loads from a play datastructure '''
 
         for x in ds.keys():
@@ -81,7 +81,7 @@ class Play(object):
         self._update_vars_files_for_host(None)
 
         # now we load the roles into the datastructure
-        self.included_roles = included_roles
+        self.included_roles = []
         ds = self._load_roles(self.roles, ds)
         
         # and finally re-process the vars files as they may have
