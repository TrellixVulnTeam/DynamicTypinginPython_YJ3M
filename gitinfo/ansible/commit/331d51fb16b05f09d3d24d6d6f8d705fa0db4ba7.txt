commit 331d51fb16b05f09d3d24d6d6f8d705fa0db4ba7
Author: phongle1205 <phongle1205@gmail.com>
Date:   Sun Oct 20 14:06:50 2019 +0700

    Attach an attached/detached volume from OpenStack VM’s should return similar information (#21558)
    
    Currently, attach an attached volume from OpenStack VM’s returns only
    argument data. It is better to return full data as attaching a detached
    volume.
    
    In my use case, I need the extra data to mount and format the volume.

diff --git a/changelogs/fragments/os_server_volume.yml b/changelogs/fragments/os_server_volume.yml
new file mode 100644
index 0000000000..c280f0cf78
--- /dev/null
+++ b/changelogs/fragments/os_server_volume.yml
@@ -0,0 +1,2 @@
+minor_changes:
+- Attach an attached/detached volume from OpenStack VM's should return similar information in os_server_volume module.
diff --git a/lib/ansible/modules/cloud/openstack/os_server_volume.py b/lib/ansible/modules/cloud/openstack/os_server_volume.py
index 81d593c1ab..2caec55777 100644
--- a/lib/ansible/modules/cloud/openstack/os_server_volume.py
+++ b/lib/ansible/modules/cloud/openstack/os_server_volume.py
@@ -110,19 +110,18 @@ def main():
             module.exit_json(changed=_system_state_change(state, dev))
 
         if state == 'present':
-            if dev:
-                # Volume is already attached to this server
-                module.exit_json(changed=False)
-
-            cloud.attach_volume(server, volume, module.params['device'],
-                                wait=wait, timeout=timeout)
+            changed = False
+            if not dev:
+                changed = True
+                cloud.attach_volume(server, volume, module.params['device'],
+                                    wait=wait, timeout=timeout)
 
             server = cloud.get_server(module.params['server'])  # refresh
             volume = cloud.get_volume(module.params['volume'])  # refresh
             hostvars = cloud.get_openstack_vars(server)
 
             module.exit_json(
-                changed=True,
+                changed=changed,
                 id=volume['id'],
                 attachments=volume['attachments'],
                 openstack=hostvars
