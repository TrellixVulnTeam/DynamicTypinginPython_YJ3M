commit 8d6e18fc9041e7a146dd3c353d06c0046948f4f1
Author: Brian Coca <bcoca@ansible.com>
Date:   Thu May 16 08:32:49 2013 -0400

    no uses get_bin_path for 2nd use of ip tool (fixes reported issue with openwrt)
    
    module needs this added to many tool invokations, but his is a start
    Signed-off-by: Brian Coca <briancoca+dev@gmail.com>

diff --git a/library/system/setup b/library/system/setup
index 85607ef1ab..1999c44ef5 100644
--- a/library/system/setup
+++ b/library/system/setup
@@ -1110,7 +1110,8 @@ class LinuxNetwork(Network):
                     path = os.path.join(path, 'bonding', 'all_slaves_active')
                     if os.path.exists(path):
                         interfaces[device]['all_slaves_active'] = open(path).read() == '1'
-            output = subprocess.Popen(['/sbin/ip', 'addr', 'show', device], stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate()[0]
+            ip_path = module.get_bin_path("ip")
+            output = subprocess.Popen([ip_path, 'addr', 'show', device], stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate()[0]
             for line in output.split('\n'):
 
                 if not line: 
