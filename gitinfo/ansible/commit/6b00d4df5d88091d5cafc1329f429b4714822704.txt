commit 6b00d4df5d88091d5cafc1329f429b4714822704
Author: Chris Scheib <chris@scheib.io>
Date:   Fri Sep 28 12:29:57 2018 -0400

    Add logstash_plugin example for lower heap size
    
    In a scenario where you've set your logstash heap size high, you may need to set your heap lower in order to execute logstash-plugin while logstash is still running.
    
    Here's an example of someone running into insufficient memory while executing logstash-plugin: https://discuss.elastic.co/t/logstash-plugin-and-jvm-options/99646
    
    This scenario is probably fairly common, so it may be worth documenting as an example.
    
    +label: docsite_pr

diff --git a/lib/ansible/modules/monitoring/logstash_plugin.py b/lib/ansible/modules/monitoring/logstash_plugin.py
index bb48915b13..2d15c30891 100644
--- a/lib/ansible/modules/monitoring/logstash_plugin.py
+++ b/lib/ansible/modules/monitoring/logstash_plugin.py
@@ -62,6 +62,13 @@ EXAMPLES = '''
   logstash_plugin:
     state: absent
     name: logstash-filter-multiline
+
+- name: install Logstash plugin with alternate heap size
+  logstash_plugin:
+    state: present
+    name: logstash-input-beats
+  environment:
+    LS_JAVA_OPTS: "-Xms256m -Xmx256m"
 '''
 
 from ansible.module_utils.basic import AnsibleModule
