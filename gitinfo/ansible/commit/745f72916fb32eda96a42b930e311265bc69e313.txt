commit 745f72916fb32eda96a42b930e311265bc69e313
Author: Brian Coca <bcoca@ansible.com>
Date:   Wed Jun 7 17:24:51 2017 -0400

    bigip tests now skipped if missing lib

diff --git a/test/units/modules/network/f5/test_bigip_command.py b/test/units/modules/network/f5/test_bigip_command.py
index 4d3254ede0..d7d3eb52f8 100644
--- a/test/units/modules/network/f5/test_bigip_command.py
+++ b/test/units/modules/network/f5/test_bigip_command.py
@@ -40,9 +40,14 @@ try:
     from library.bigip_command import ModuleManager
     from library.bigip_command import ArgumentSpec
 except ImportError:
-    from ansible.modules.network.f5.bigip_command import Parameters
-    from ansible.modules.network.f5.bigip_command import ModuleManager
-    from ansible.modules.network.f5.bigip_command import ArgumentSpec
+    try:
+        from ansible.modules.network.f5.bigip_command import Parameters
+        from ansible.modules.network.f5.bigip_command import ModuleManager
+        from ansible.modules.network.f5.bigip_command import ArgumentSpec
+    except ImportError:
+        from nose.plugins.skip import SkipTest
+        raise SkipTest("%s requires the python modules for f5/bigip" % __file__)
+
 
 fixture_path = os.path.join(os.path.dirname(__file__), 'fixtures')
 
diff --git a/test/units/modules/network/f5/test_bigip_config.py b/test/units/modules/network/f5/test_bigip_config.py
index dc1aefe2f7..e56f0c2b33 100644
--- a/test/units/modules/network/f5/test_bigip_config.py
+++ b/test/units/modules/network/f5/test_bigip_config.py
@@ -40,9 +40,13 @@ try:
     from library.bigip_config import ModuleManager
     from library.bigip_config import ArgumentSpec
 except ImportError:
-    from ansible.modules.network.f5.bigip_config import Parameters
-    from ansible.modules.network.f5.bigip_config import ModuleManager
-    from ansible.modules.network.f5.bigip_config import ArgumentSpec
+    try:
+        from ansible.modules.network.f5.bigip_config import Parameters
+        from ansible.modules.network.f5.bigip_config import ModuleManager
+        from ansible.modules.network.f5.bigip_config import ArgumentSpec
+    except ImportError:
+        from nose.plugins.skip import SkipTest
+        raise SkipTest("%s requires the python modules for f5/bigip" % __file__)
 
 fixture_path = os.path.join(os.path.dirname(__file__), 'fixtures')
 
diff --git a/test/units/modules/network/f5/test_bigip_gtm_pool.py b/test/units/modules/network/f5/test_bigip_gtm_pool.py
index 5b8b9aed70..287594b923 100644
--- a/test/units/modules/network/f5/test_bigip_gtm_pool.py
+++ b/test/units/modules/network/f5/test_bigip_gtm_pool.py
@@ -42,11 +42,16 @@ try:
     from library.bigip_gtm_pool import UntypedManager
     from library.bigip_gtm_pool import TypedManager
 except ImportError:
-    from ansible.modules.network.f5.bigip_gtm_pool import Parameters
-    from ansible.modules.network.f5.bigip_gtm_pool import ModuleManager
-    from ansible.modules.network.f5.bigip_gtm_pool import ArgumentSpec
-    from ansible.modules.network.f5.bigip_gtm_pool import UntypedManager
-    from ansible.modules.network.f5.bigip_gtm_pool import TypedManager
+    try:
+        from ansible.modules.network.f5.bigip_gtm_pool import Parameters
+        from ansible.modules.network.f5.bigip_gtm_pool import ModuleManager
+        from ansible.modules.network.f5.bigip_gtm_pool import ArgumentSpec
+        from ansible.modules.network.f5.bigip_gtm_pool import UntypedManager
+        from ansible.modules.network.f5.bigip_gtm_pool import TypedManager
+    except ImportError:
+        from nose.plugins.skip import SkipTest
+        raise SkipTest("%s requires the python modules for f5/bigip" % __file__)
+
 
 fixture_path = os.path.join(os.path.dirname(__file__), 'fixtures')
 fixture_data = {}
diff --git a/test/units/modules/network/f5/test_bigip_pool.py b/test/units/modules/network/f5/test_bigip_pool.py
index b704d29c07..1bdb847fad 100644
--- a/test/units/modules/network/f5/test_bigip_pool.py
+++ b/test/units/modules/network/f5/test_bigip_pool.py
@@ -42,9 +42,14 @@ try:
     from library.bigip_pool import ModuleManager
     from library.bigip_pool import ArgumentSpec
 except ImportError:
-    from ansible.modules.network.f5.bigip_pool import Parameters
-    from ansible.modules.network.f5.bigip_pool import ModuleManager
-    from ansible.modules.network.f5.bigip_pool import ArgumentSpec
+    try:
+        from ansible.modules.network.f5.bigip_pool import Parameters
+        from ansible.modules.network.f5.bigip_pool import ModuleManager
+        from ansible.modules.network.f5.bigip_pool import ArgumentSpec
+    except ImportError:
+        from nose.plugins.skip import SkipTest
+        raise SkipTest("%s requires the python modules for f5/bigip" % __file__)
+
 
 fixture_path = os.path.join(os.path.dirname(__file__), 'fixtures')
 fixture_data = {}
diff --git a/test/units/modules/network/f5/test_bigip_snmp_trap.py b/test/units/modules/network/f5/test_bigip_snmp_trap.py
index ee377ef35c..3cec735da3 100644
--- a/test/units/modules/network/f5/test_bigip_snmp_trap.py
+++ b/test/units/modules/network/f5/test_bigip_snmp_trap.py
@@ -43,12 +43,17 @@ try:
     from library.bigip_snmp_trap import NonNetworkedManager
     from library.bigip_snmp_trap import ArgumentSpec
 except ImportError:
-    from ansible.modules.network.f5.bigip_snmp_trap import NetworkedParameters
-    from ansible.modules.network.f5.bigip_snmp_trap import NonNetworkedParameters
-    from ansible.modules.network.f5.bigip_snmp_trap import ModuleManager
-    from ansible.modules.network.f5.bigip_snmp_trap import NetworkedManager
-    from ansible.modules.network.f5.bigip_snmp_trap import NonNetworkedManager
-    from ansible.modules.network.f5.bigip_snmp_trap import ArgumentSpec
+    try:
+        from ansible.modules.network.f5.bigip_snmp_trap import NetworkedParameters
+        from ansible.modules.network.f5.bigip_snmp_trap import NonNetworkedParameters
+        from ansible.modules.network.f5.bigip_snmp_trap import ModuleManager
+        from ansible.modules.network.f5.bigip_snmp_trap import NetworkedManager
+        from ansible.modules.network.f5.bigip_snmp_trap import NonNetworkedManager
+        from ansible.modules.network.f5.bigip_snmp_trap import ArgumentSpec
+    except ImportError:
+        from nose.plugins.skip import SkipTest
+        raise SkipTest("%s requires the python modules for f5/bigip" % __file__)
+
 
 fixture_path = os.path.join(os.path.dirname(__file__), 'fixtures')
 fixture_data = {}
diff --git a/test/units/modules/network/f5/test_bigip_user.py b/test/units/modules/network/f5/test_bigip_user.py
index f2367f826b..4d9edbf35a 100644
--- a/test/units/modules/network/f5/test_bigip_user.py
+++ b/test/units/modules/network/f5/test_bigip_user.py
@@ -45,11 +45,16 @@ try:
     from library.bigip_user import UnparitionedManager
     from library.bigip_user import PartitionedManager
 except ImportError:
-    from ansible.modules.network.f5.bigip_user import Parameters
-    from ansible.modules.network.f5.bigip_user import ModuleManager
-    from ansible.modules.network.f5.bigip_user import ArgumentSpec
-    from ansible.modules.network.f5.bigip_user import UnparitionedManager
-    from ansible.modules.network.f5.bigip_user import PartitionedManager
+    try:
+        from ansible.modules.network.f5.bigip_user import Parameters
+        from ansible.modules.network.f5.bigip_user import ModuleManager
+        from ansible.modules.network.f5.bigip_user import ArgumentSpec
+        from ansible.modules.network.f5.bigip_user import UnparitionedManager
+        from ansible.modules.network.f5.bigip_user import PartitionedManager
+    except ImportError:
+        from nose.plugins.skip import SkipTest
+        raise SkipTest("%s requires the python modules for f5/bigip" % __file__)
+
 
 fixture_path = os.path.join(os.path.dirname(__file__), 'fixtures')
 fixture_data = {}
