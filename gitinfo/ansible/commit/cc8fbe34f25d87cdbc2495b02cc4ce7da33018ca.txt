commit cc8fbe34f25d87cdbc2495b02cc4ce7da33018ca
Author: Till Maas <opensource@till.name>
Date:   Fri Feb 22 14:42:41 2013 +0100

    mysql_user: handle unnecessary GRANT revocation

diff --git a/library/mysql_user b/library/mysql_user
index 9317bbdd7a..3f40411b0d 100644
--- a/library/mysql_user
+++ b/library/mysql_user
@@ -213,7 +213,13 @@ def privileges_revoke(cursor, user,host,db_table):
     query = "REVOKE ALL PRIVILEGES ON %s FROM '%s'@'%s'" % (db_table,user,host)
     cursor.execute(query)
     query = "REVOKE GRANT OPTION ON %s FROM '%s'@'%s'" % (db_table,user,host)
-    cursor.execute(query)
+    try:
+        cursor.execute(query)
+    except MySQLdb.OperationalError, e:
+        # 1141 -> There is no such grant defined for user ... on host ...
+        # If this exception is raised, there is no need to revoke the GRANT privilege
+        if e.args[0] != 1141 or not e.args[1].startswith("There is no such grant defined for user"):
+            raise e
 
 def privileges_grant(cursor, user,host,db_table,priv):
 
