commit 23930d799fdd5f079770e8c7c1531b6bd61768fb
Author: Adam Reznechek <adam@reznechek.com>
Date:   Tue Sep 13 16:19:33 2016 -0500

    Fix cpu facts for hosts missing fields in cpuinfo (16533) (#16535)
    
    Change linux fact gathering to correctly gather ansible_processor_count
    and ansible_processor_vcpus on systems without vendor_id/model_name in
    /proc/cpuinfo (for ex, ppc64/POWER)

diff --git a/lib/ansible/module_utils/facts.py b/lib/ansible/module_utils/facts.py
index 63c805e9ad..e9bce329c6 100644
--- a/lib/ansible/module_utils/facts.py
+++ b/lib/ansible/module_utils/facts.py
@@ -1121,8 +1121,10 @@ class LinuxHardware(Hardware):
             elif key == '# processors':
                 self.facts['processor_cores'] = int(data[1].strip())
 
-        if vendor_id_occurrence == model_name_occurrence:
-            i = vendor_id_occurrence
+        # Skip for platforms without vendor_id/model_name in cpuinfo (e.g ppc64le)
+        if vendor_id_occurrence > 0:
+            if vendor_id_occurrence == model_name_occurrence:
+                i = vendor_id_occurrence
 
         if self.facts['architecture'] != 's390x':
             if xen_paravirt:
