commit 8bdd96b273780971cfe5a8cb122f82f6fc1c5d0c
Author: Radek Simko <radek.simko@gmail.com>
Date:   Mon Apr 21 14:10:09 2014 +0100

    Explicit check of return code for autoinstallation of python-apt added
    
    This will allow easier debugging through more meaningful error message.

diff --git a/library/packaging/apt b/library/packaging/apt
index 6bd19177f2..87f14a942b 100755
--- a/library/packaging/apt
+++ b/library/packaging/apt
@@ -432,7 +432,7 @@ def main():
 
     if not HAS_PYTHON_APT:
         try:
-            module.run_command('apt-get update && apt-get install python-apt -y -q', use_unsafe_shell=True)
+            module.run_command('apt-get update && apt-get install python-apt -y -q', use_unsafe_shell=True, check_rc=True)
             global apt, apt_pkg
             import apt
             import apt_pkg
