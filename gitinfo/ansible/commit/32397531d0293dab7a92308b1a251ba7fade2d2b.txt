commit 32397531d0293dab7a92308b1a251ba7fade2d2b
Author: Abhijeet Kasurde <akasurde@redhat.com>
Date:   Wed Oct 10 22:57:58 2018 +0530

    lambda: fix unboundLocalError in lambda (#46729)
    
    This fix initializes current_version to None so that
    module proceeds in check mode.
    
    Fixes: #46654
    
    Signed-off-by: Abhijeet Kasurde <akasurde@redhat.com>

diff --git a/lib/ansible/modules/cloud/amazon/lambda.py b/lib/ansible/modules/cloud/amazon/lambda.py
index 15d0c09bfc..623f6545fd 100644
--- a/lib/ansible/modules/cloud/amazon/lambda.py
+++ b/lib/ansible/modules/cloud/amazon/lambda.py
@@ -554,6 +554,7 @@ def main():
                                               'SecurityGroupIds': vpc_security_group_ids}})
 
         # Finally try to create function
+        current_version = None
         try:
             if not check_mode:
                 response = client.create_function(**func_kwargs)
