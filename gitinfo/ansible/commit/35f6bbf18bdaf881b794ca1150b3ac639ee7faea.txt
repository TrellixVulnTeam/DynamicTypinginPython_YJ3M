commit 35f6bbf18bdaf881b794ca1150b3ac639ee7faea
Author: Jordan Borean <jborean93@gmail.com>
Date:   Mon Jul 23 05:16:22 2018 +1000

    win_wait_for: add a bit more stability to the tests (#43114)

diff --git a/test/integration/targets/win_wait_for/tasks/main.yml b/test/integration/targets/win_wait_for/tasks/main.yml
index 292401c774..4e4401c9d5 100644
--- a/test/integration/targets/win_wait_for/tasks/main.yml
+++ b/test/integration/targets/win_wait_for/tasks/main.yml
@@ -272,6 +272,12 @@
     that:
     - wait_for_port_already_started.wait_attempts == 1
 
+# add a manual wait to make sure the port is truly offline for next test
+- name: wait for port to be offline
+  win_wait_for:
+    port: '{{test_win_wait_for_port}}'
+    state: stopped
+
 - name: wait for port that is already offline
   win_wait_for:
     port: '{{test_win_wait_for_port}}'
