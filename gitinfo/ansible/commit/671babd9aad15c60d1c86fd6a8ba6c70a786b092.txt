commit 671babd9aad15c60d1c86fd6a8ba6c70a786b092
Author: Abhijeet Kasurde <akasurde@redhat.com>
Date:   Wed Jun 20 11:58:59 2018 +0530

    openssl_csr: Update example (#41677)
    
    Update example of Subject Alternative Name with dynamic list.
    
    Fixes: #33676
    
    Signed-off-by: Abhijeet Kasurde <akasurde@redhat.com>

diff --git a/lib/ansible/modules/crypto/openssl_csr.py b/lib/ansible/modules/crypto/openssl_csr.py
index 07e7bddf6f..4749be20f1 100644
--- a/lib/ansible/modules/crypto/openssl_csr.py
+++ b/lib/ansible/modules/crypto/openssl_csr.py
@@ -208,6 +208,16 @@ EXAMPLES = '''
     privatekey_path: /etc/ssl/private/ansible.com.pem
     subject_alt_name: 'DNS:www.ansible.com,DNS:m.ansible.com'
 
+# Generate an OpenSSL CSR with subjectAltName extension with dynamic list
+- openssl_csr:
+    path: /etc/ssl/csr/www.ansible.com.csr
+    privatekey_path: /etc/ssl/private/ansible.com.pem
+    subject_alt_name: "{{ item.value | map('regex_replace', '^', 'DNS:') | list }}"
+  with_dict:
+    dns_server:
+    - www.ansible.com
+    - m.ansible.com
+
 # Force re-generate an OpenSSL Certificate Signing Request
 - openssl_csr:
     path: /etc/ssl/csr/www.ansible.com.csr
