commit 844e58aedb2b3c611463bfd32bc40aea50e03f4a
Author: Javier Cortejoso <javier.cortejoso@gmail.com>
Date:   Mon Oct 16 13:33:47 2017 -0500

    Define new_target_group before. Fixes #31378 (#31379)

diff --git a/lib/ansible/modules/cloud/amazon/elb_target_group.py b/lib/ansible/modules/cloud/amazon/elb_target_group.py
index ed057fcf4b..be6ee23098 100644
--- a/lib/ansible/modules/cloud/amazon/elb_target_group.py
+++ b/lib/ansible/modules/cloud/amazon/elb_target_group.py
@@ -339,6 +339,7 @@ def wait_for_status(connection, module, target_group_arn, targets, status):
 def create_or_update_target_group(connection, module):
 
     changed = False
+    new_target_group = False
     params = dict()
     params['Name'] = module.params.get("name")
     params['Protocol'] = module.params.get("protocol").upper()
