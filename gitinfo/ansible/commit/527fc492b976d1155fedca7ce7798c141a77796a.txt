commit 527fc492b976d1155fedca7ce7798c141a77796a
Author: Nathaniel Case <this.is@nathanielca.se>
Date:   Tue Feb 13 10:59:37 2018 -0500

    Acquire `display`ed messages from forked process (#36064)
    
    Also restore verbosity value from loaded `play_context`

diff --git a/bin/ansible-connection b/bin/ansible-connection
index 68425ff6ba..ed6070b3f0 100755
--- a/bin/ansible-connection
+++ b/bin/ansible-connection
@@ -70,6 +70,7 @@ class ConnectionProcess(object):
             self.connection._connect()
             self.connection._socket_path = self.socket_path
             self.srv.register(self.connection)
+            messages.extend(sys.stdout.getvalue().splitlines())
             messages.append('connection to remote device started successfully')
 
             self.sock = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
@@ -189,6 +190,7 @@ def main():
 
         play_context = PlayContext()
         play_context.deserialize(pc_data)
+        display.verbosity = play_context.verbosity
 
     except Exception as e:
         rc = 1
@@ -278,6 +280,7 @@ def main():
 
     sys.exit(rc)
 
+
 if __name__ == '__main__':
     display = Display()
     main()
