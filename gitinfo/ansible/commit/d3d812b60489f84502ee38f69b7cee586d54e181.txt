commit d3d812b60489f84502ee38f69b7cee586d54e181
Author: Brian Coca <bcoca@ansible.com>
Date:   Fri Sep 28 16:21:00 2018 -0400

    avoid tests when ncclient is not installed

diff --git a/test/units/plugins/connection/test_connection.py b/test/units/plugins/connection/test_connection.py
index cef50807a5..cfcbdad9de 100644
--- a/test/units/plugins/connection/test_connection.py
+++ b/test/units/plugins/connection/test_connection.py
@@ -21,6 +21,7 @@ __metaclass__ = type
 
 from io import StringIO
 import sys
+import pytest
 
 from ansible.compat.tests import mock
 from ansible.compat.tests import unittest
@@ -43,8 +44,9 @@ from ansible.plugins.connection.docker import Connection as DockerConnection
 from ansible.plugins.connection.network_cli import Connection as NetworkCliConnection
 from ansible.plugins.connection.httpapi import Connection as HttpapiConnection
 
-PY3 = sys.version_info[0] == 3
+pytest.importorskip("ncclient")
 
+PY3 = sys.version_info[0] == 3
 builtin_import = __import__
 
 mock_ncclient = MagicMock(name='ncclient')
diff --git a/test/units/plugins/connection/test_netconf.py b/test/units/plugins/connection/test_netconf.py
index ecb3d9984d..2b8dbaf952 100644
--- a/test/units/plugins/connection/test_netconf.py
+++ b/test/units/plugins/connection/test_netconf.py
@@ -23,6 +23,7 @@ __metaclass__ = type
 import sys
 import re
 import json
+import pytest
 
 from io import StringIO
 
@@ -31,6 +32,8 @@ from ansible.compat.tests.mock import patch, MagicMock, PropertyMock
 from ansible.errors import AnsibleConnectionFailure
 from ansible.playbook.play_context import PlayContext
 
+pytest.importorskip("ncclient")
+
 PY3 = sys.version_info[0] == 3
 
 builtin_import = __import__
