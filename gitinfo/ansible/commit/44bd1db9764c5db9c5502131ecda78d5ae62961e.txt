commit 44bd1db9764c5db9c5502131ecda78d5ae62961e
Author: Brian Coca <bcoca@ansible.com>
Date:   Fri Jun 3 09:16:07 2016 -0400

    updated package to use minimal fact gathering
    
    also fixed results handling of fact gathering

diff --git a/lib/ansible/plugins/action/package.py b/lib/ansible/plugins/action/package.py
index 87759289cc..91fefd8ce6 100644
--- a/lib/ansible/plugins/action/package.py
+++ b/lib/ansible/plugins/action/package.py
@@ -46,9 +46,9 @@ class ActionModule(ActionBase):
                 pass # could not get it from template!
 
         if module == 'auto':
-            facts = self._execute_module(module_name='setup', module_args=dict(filter='ansible_pkg_mgr'), task_vars=task_vars)
+            facts = self._execute_module(module_name='setup', module_args=dict(filter='ansible_pkg_mgr', gather_subset='!all'), task_vars=task_vars)
             display.debug("Facts %s" % facts)
-            if 'failed' not in facts:
+            if 'ansible_facts' in facts and  'ansible_pkg_mgr' in facts['ansible_facts']:
                 module = getattr(facts['ansible_facts'], 'ansible_pkg_mgr', 'auto')
 
         if module != 'auto':
