commit 30cc54da8cc4efd7a554df964b0f7bddfde0c9c4
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Tue Oct 1 10:11:24 2019 -0700

    rpmfilename must be constructed using rpmmacros
    
    Different subpackages have different names so, at the least, the %NAME
    macros must be used when constructing the rpmfilename.  Otherwise each
    subsequent subpackage will overwrite the previous one.
    
    This reinstates dag's fix from d4b6aecd978736f034a6a2160475f04ec2451d36
    
    Fixes #62673

diff --git a/Makefile b/Makefile
index 7762d06898..99bbb6bd5b 100644
--- a/Makefile
+++ b/Makefile
@@ -301,7 +301,7 @@ rpm: rpmcommon
 	--define "_srcrpmdir %{_topdir}" \
 	--define "_specdir $(RPMSPECDIR)" \
 	--define "_sourcedir %{_topdir}" \
-	--define "_rpmfilename $(RPMNVR).%%{ARCH}.rpm" \
+	--define "_rpmfilename %%{NAME}-%%{VERSION}-%%{RELEASE}.%%{ARCH}.rpm" \
 	--define "__python `which $(PYTHON)`" \
 	--define "upstream_version $(VERSION)" \
 	--define "rpmversion $(RPMVERSION)" \
