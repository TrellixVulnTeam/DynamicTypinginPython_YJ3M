commit 5186c408f79560ba2c00206027349a854ceae9da
Author: James Tanner <tanner.jc@gmail.com>
Date:   Tue Oct 8 15:12:38 2013 -0400

    Do not enumerate ipv6 routes in CentOS 4

diff --git a/library/system/setup b/library/system/setup
index 714e7e3989..9bd9a9a6d3 100755
--- a/library/system/setup
+++ b/library/system/setup
@@ -1370,6 +1370,10 @@ class LinuxNetwork(Network):
         )
         interface = dict(v4 = {}, v6 = {})
         for v in 'v4', 'v6':
+            if v == 'v6' and self.facts['lsb']['id'] == 'CentOS' \
+                and self.facts['lsb']['major_release'] == '4':
+                # "ip -6 route get" causes kernel panics in Centos 4
+                continue
             if v == 'v6' and not socket.has_ipv6:
                 continue
             rc, out, err = module.run_command(command[v])
