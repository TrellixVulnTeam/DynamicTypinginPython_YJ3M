commit 41dc8e84e49e06e6f3c3f1153b6d2caf02126668
Author: Trishna Guha <trishnaguha17@gmail.com>
Date:   Tue Aug 20 16:14:00 2019 +0530

    fix nxos test failure (#60928)
    
    Signed-off-by: Trishna Guha <trishnaguha17@gmail.com>

diff --git a/test/integration/targets/nxos_lag_interfaces/tests/cli/deleted.yaml b/test/integration/targets/nxos_lag_interfaces/tests/cli/deleted.yaml
index 11d5e4a23b..ad4ac416e8 100644
--- a/test/integration/targets/nxos_lag_interfaces/tests/cli/deleted.yaml
+++ b/test/integration/targets/nxos_lag_interfaces/tests/cli/deleted.yaml
@@ -10,7 +10,7 @@
     feature: lacp
 
 - name: Setup1
-  nxos_config: &cleanup
+  nxos_config:
     lines:
       - "no channel-group 10"
     parents: "{{ item }}"
@@ -62,8 +62,15 @@
         - "result.changed == false"
 
   always:
-  - name: teardown
-    nxos_config: *cleanup
+  - name: Teardown
+    nxos_config:
+      lines:
+        - "no channel-group 10"
+      parents: "{{ item }}"
+    ignore_errors: yes
+    loop:
+      - "interface {{ test_int1 }}"
+      - "interface {{ test_int2 }}"
 
   - name: disable feature lacp
     nxos_feature:
diff --git a/test/integration/targets/nxos_lag_interfaces/tests/cli/merged.yaml b/test/integration/targets/nxos_lag_interfaces/tests/cli/merged.yaml
index 742f29dee5..4ebd1d7a6a 100644
--- a/test/integration/targets/nxos_lag_interfaces/tests/cli/merged.yaml
+++ b/test/integration/targets/nxos_lag_interfaces/tests/cli/merged.yaml
@@ -10,7 +10,7 @@
     feature: lacp
 
 - name: Setup
-  nxos_config: &cleanup
+  nxos_config:
     lines:
       - "no channel-group"
     parents: "{{ item }}"
@@ -56,7 +56,14 @@
 
   always:
   - name: Teardown
-    nxos_config: *cleanup
+    nxos_config:
+      lines:
+        - "no channel-group"
+      parents: "{{ item }}"
+    ignore_errors: yes
+    loop:
+      - "interface {{ test_int1 }}"
+      - "interface {{ test_int2 }}"
 
   - name: Disable feature lacp
     nxos_feature:
diff --git a/test/integration/targets/nxos_lag_interfaces/tests/cli/overridden.yaml b/test/integration/targets/nxos_lag_interfaces/tests/cli/overridden.yaml
index 7a55d9e70f..44bdff0145 100644
--- a/test/integration/targets/nxos_lag_interfaces/tests/cli/overridden.yaml
+++ b/test/integration/targets/nxos_lag_interfaces/tests/cli/overridden.yaml
@@ -11,7 +11,7 @@
     feature: lacp
 
 - name: setup1
-  nxos_config: &cleanup1
+  nxos_config:
     lines:
       - "no channel-group 10"
     parents: "{{ item }}"
@@ -75,10 +75,18 @@
         - "result.changed == false"
   always:
   - name: teardown1
-    nxos_config: *cleanup1
+    nxos_config:
+      lines:
+        - "no channel-group 10"
+      parents: "{{ item }}"
+    ignore_errors: yes
+    loop:
+      - "interface {{ test_int1 }}"
+      - "interface {{ test_int2 }}"
 
   - name: teardown2
     nxos_config: *cleanup2
+    ignore_errors: yes
 
   - name: disable feature lacp
     nxos_feature:
diff --git a/test/integration/targets/nxos_lag_interfaces/tests/cli/replaced.yaml b/test/integration/targets/nxos_lag_interfaces/tests/cli/replaced.yaml
index e8dd6d26ac..6393da7045 100644
--- a/test/integration/targets/nxos_lag_interfaces/tests/cli/replaced.yaml
+++ b/test/integration/targets/nxos_lag_interfaces/tests/cli/replaced.yaml
@@ -73,9 +73,11 @@
   always:
   - name: teardown1
     nxos_config: *cleanup1
+    ignore_errors: yes
 
   - name: teardown2
     nxos_config: *cleanup2
+    ignore_errors: yes
 
   - name: disable feature lacp
     nxos_feature:
