commit 26efc7ace82bdbe54a72479659600e1ff267c842
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Sun Mar 16 14:10:57 2014 -0400

    Revert "Populate module_setup from the setup module rather than special code elsewhere"
    
    This reverts commit 58eec2e4c22c800f1d8a68f0345f2872ece9c6e4.

diff --git a/lib/ansible/playbook/__init__.py b/lib/ansible/playbook/__init__.py
index 7063e9fe80..918b934171 100644
--- a/lib/ansible/playbook/__init__.py
+++ b/lib/ansible/playbook/__init__.py
@@ -529,6 +529,7 @@ class PlayBook(object):
         # let runner template out future commands
         setup_ok = setup_results.get('contacted', {})
         for (host, result) in setup_ok.iteritems():
+            self.SETUP_CACHE[host].update({'module_setup': True})
             self.SETUP_CACHE[host].update(result.get('ansible_facts', {}))
         return setup_results
 
