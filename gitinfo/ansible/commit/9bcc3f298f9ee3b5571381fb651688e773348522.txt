commit 9bcc3f298f9ee3b5571381fb651688e773348522
Author: Nathaniel Case <this.is@nathanielca.se>
Date:   Thu Apr 20 15:02:42 2017 -0400

    EOS default transport (#23824)
    
    * Give a default to eos transport

diff --git a/lib/ansible/module_utils/eos.py b/lib/ansible/module_utils/eos.py
index a0ae4434a6..c87bbb8e58 100644
--- a/lib/ansible/module_utils/eos.py
+++ b/lib/ansible/module_utils/eos.py
@@ -59,6 +59,7 @@ eos_argument_spec = {
 
 # Add argument's default value here
 ARGS_DEFAULT_VALUE = {
+    'transport': 'cli',
     'port': 443,
     'use_ssl': True,
     'validate_certs': True
@@ -94,9 +95,7 @@ def get_connection(module):
     global _DEVICE_CONNECTION
     if not _DEVICE_CONNECTION:
         load_params(module)
-        transport = module.params['transport']
-        provider_transport = (module.params['provider'] or {}).get('transport')
-        if 'eapi' in (transport, provider_transport):
+        if is_eapi(module):
             conn = Eapi(module)
         else:
             conn = Cli(module)
