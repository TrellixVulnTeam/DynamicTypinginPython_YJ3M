commit 8a3f8b757be1434df61abc0c0e491920b467ca26
Author: James Cammarata <jimi@sngx.net>
Date:   Tue Oct 1 10:52:39 2013 -0500

    Make sure yaml data loaded for role is valid before using it
    
    Fixes #4322

diff --git a/lib/ansible/playbook/play.py b/lib/ansible/playbook/play.py
index 25c00afd2d..a74b02a9c2 100644
--- a/lib/ansible/playbook/play.py
+++ b/lib/ansible/playbook/play.py
@@ -449,7 +449,7 @@ class Play(object):
                     include_file = template(dirname, tokens[0], mv)
                     include_filename = utils.path_dwim(dirname, include_file)
                     data = utils.parse_yaml_from_file(include_filename)
-                    if 'role_name' in x:
+                    if 'role_name' in x and data is not None:
                         for x in data:
                             if 'include' in x:
                                 x['role_name'] = new_role
