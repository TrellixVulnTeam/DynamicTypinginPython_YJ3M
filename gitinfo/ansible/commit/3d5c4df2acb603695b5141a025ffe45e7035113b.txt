commit 3d5c4df2acb603695b5141a025ffe45e7035113b
Author: Dag Wieers <dag@wieers.com>
Date:   Thu Oct 4 20:58:07 2012 +0200

    This hopefully fixes the documentation for the fail module

diff --git a/library/fail b/library/fail
index 7e7d7e6472..b1827807b1 100644
--- a/library/fail
+++ b/library/fail
@@ -32,7 +32,7 @@ options:
       - The customized message used for failing execution. If ommited,
         fail will simple bail out with a generic message.
     required: false
-    default: "Failed because only_if condition is true"
+    default: "'Failed because only_if condition is true'"
   rc:
     description:
       - The return code of the failure. This is currently not used by
@@ -40,10 +40,11 @@ options:
     required: false
     default: 1
 examples:
-    - code:
-        - action: fail msg="The system may not be provisioned according to the CMDB status."
-          only_if: "'$cmdb_status' != 'to-be-staged'"
-      description: "Example of how a playbook may fail when a condition is not met"
+    - code: |
+        action: fail msg="The system may not be provisioned according to the CMDB status." rc=100
+        only_if: "'$cmdb_status' != 'to-be-staged'"
+      description: "Example playbook using fail and only_if together"
+
 author: Dag Wieers
 '''
 
