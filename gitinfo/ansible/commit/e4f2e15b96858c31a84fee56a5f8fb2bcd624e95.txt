commit e4f2e15b96858c31a84fee56a5f8fb2bcd624e95
Author: Felix Fontein <felix@fontein.de>
Date:   Thu Mar 7 20:35:47 2019 +0100

    Trying to work around spurious test failures. (#53472)

diff --git a/test/integration/targets/docker_image/tasks/tests/options.yml b/test/integration/targets/docker_image/tasks/tests/options.yml
index d5e992c949..0e8f8f78e7 100644
--- a/test/integration/targets/docker_image/tasks/tests/options.yml
+++ b/test/integration/targets/docker_image/tasks/tests/options.yml
@@ -78,8 +78,14 @@
 
 - assert:
     that:
-    - "('Minimum memory limit allowed is 4MB') in container_limits_1.msg"
-    - container_limits_2 is changed
+    # It *sometimes* happens that the first task does not fail.
+    # For now, we work around this by
+    #   a) requiring that if it fails, the message must
+    #      contain 'Minimum memory limit allowed is 4MB', and
+    #   b) requiring that either the first task, or the second
+    #      task is changed, but not both.
+    - "not container_limits_1 is failed or ('Minimum memory limit allowed is 4MB') in container_limits_1.msg"
+    - "container_limits_1 is changed or container_limits_2 is changed and not (container_limits_1 is changed and container_limits_2 is changed)"
 
 ####################################################################
 ## dockerfile ######################################################
