commit 0aebdb4aca1c49814c8acd17b1acb85d1634ed2e
Author: Ondra Machacek <machacek.ondra@gmail.com>
Date:   Tue Sep 19 08:27:09 2017 +0200

    ovirt_vms: Fix the logout condition (#30410)

diff --git a/lib/ansible/modules/cloud/ovirt/ovirt_vms.py b/lib/ansible/modules/cloud/ovirt/ovirt_vms.py
index 433cdfbf2a..f62b37fe48 100644
--- a/lib/ansible/modules/cloud/ovirt/ovirt_vms.py
+++ b/lib/ansible/modules/cloud/ovirt/ovirt_vms.py
@@ -1339,7 +1339,7 @@ def main():
     except Exception as e:
         module.fail_json(msg=str(e), exception=traceback.format_exc())
     finally:
-        connection.close(logout='token' not in module.params['auth'])
+        connection.close(logout=auth.get('token') is None)
 
 
 if __name__ == "__main__":
