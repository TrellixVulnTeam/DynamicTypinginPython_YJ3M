commit 47be5b416658ef1474aee89873fbd72622f83777
Author: Brian Coca <bcoca@ansible.com>
Date:   Tue Jun 2 11:02:40 2015 -0400

    added missing ansibleoptionserror import and moved args check in playbook to after parser exists to allow for creating usage info

diff --git a/lib/ansible/cli/__init__.py b/lib/ansible/cli/__init__.py
index 1e997f58d3..d63203b2e5 100644
--- a/lib/ansible/cli/__init__.py
+++ b/lib/ansible/cli/__init__.py
@@ -31,7 +31,7 @@ import subprocess
 
 from ansible import __version__
 from ansible import constants as C
-from ansible.errors import AnsibleError
+from ansible.errors import AnsibleError, AnsibleOptionsError
 from ansible.utils.unicode import to_bytes
 
 class SortedOptParser(optparse.OptionParser):
diff --git a/lib/ansible/cli/playbook.py b/lib/ansible/cli/playbook.py
index 97d4f0de3f..1c59d5dde6 100644
--- a/lib/ansible/cli/playbook.py
+++ b/lib/ansible/cli/playbook.py
@@ -24,7 +24,7 @@ import sys
 
 from ansible import constants as C
 from ansible.cli import CLI
-from ansible.errors import AnsibleError
+from ansible.errors import AnsibleError, AnsibleOptionsError
 from ansible.executor.playbook_executor import PlaybookExecutor
 from ansible.inventory import Inventory
 from ansible.parsing import DataLoader
@@ -69,11 +69,12 @@ class PlaybookCLI(CLI):
 
         self.options, self.args = parser.parse_args()
 
-        if len(self.args) == 0:
-            raise AnsibleOptionsError("You must specify a playbook file to run")
 
         self.parser = parser
 
+        if len(self.args) == 0:
+            raise AnsibleOptionsError("You must specify a playbook file to run")
+
         self.display.verbosity = self.options.verbosity
         self.validate_conflicts()
 
