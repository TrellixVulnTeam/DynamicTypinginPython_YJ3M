commit e1c289118836ec0bf84a38133b38143d62c53ae6
Author: Matt Clay <matt@mystile.com>
Date:   Tue Jul 30 09:28:44 2019 -0700

    Add paths_to_dirs function to ansible-test.

diff --git a/test/runner/lib/util.py b/test/runner/lib/util.py
index 1a38ca2518..01d46ab1a8 100644
--- a/test/runner/lib/util.py
+++ b/test/runner/lib/util.py
@@ -787,6 +787,22 @@ def is_subdir(candidate_path, path):  # type: (str, str) -> bool
     return candidate_path.startswith(path)
 
 
+def paths_to_dirs(paths):  # type: (t.List[str]) -> t.List[str]
+    """Returns a list of directories extracted from the given list of paths."""
+    dir_names = set()
+
+    for path in paths:
+        while True:
+            path = os.path.dirname(path)
+
+            if not path or path == os.path.sep:
+                break
+
+            dir_names.add(path + os.path.sep)
+
+    return sorted(dir_names)
+
+
 def import_plugins(directory, root=None):  # type: (str, t.Optional[str]) -> None
     """
     Import plugins from the given directory relative to the given root.
