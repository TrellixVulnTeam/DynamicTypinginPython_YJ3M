commit 102de96ebf43d6efad43ff66f9a1ce73f071e237
Author: Brian Coca <bcoca@ansible.com>
Date:   Sun Jun 21 01:24:35 2015 -0400

    avoid password handling when no password is supplied

diff --git a/lib/ansible/plugins/connections/local.py b/lib/ansible/plugins/connections/local.py
index 3655cb5b6d..e046dc6c39 100644
--- a/lib/ansible/plugins/connections/local.py
+++ b/lib/ansible/plugins/connections/local.py
@@ -75,7 +75,7 @@ class Connection(ConnectionBase):
         )
         debug("done running command with Popen()")
 
-        if self.prompt:
+        if self.prompt  and self._connection_info.become_pass:
             fcntl.fcntl(p.stdout, fcntl.F_SETFL, fcntl.fcntl(p.stdout, fcntl.F_GETFL) | os.O_NONBLOCK)
             fcntl.fcntl(p.stderr, fcntl.F_SETFL, fcntl.fcntl(p.stderr, fcntl.F_GETFL) | os.O_NONBLOCK)
             become_output = ''
