commit ac9dbdeb103a390ab5f199c160949b7af4fb39f9
Author: Abhijeet Kasurde <akasurde@redhat.com>
Date:   Wed Apr 4 15:28:38 2018 +0530

    nmcli: check NMClient, NetworkManager availability (#38076)
    
    This fix adds check for NMClient, NetworkManager availability
    while using require_version API.
    
    Fixes: #38042
    
    Signed-off-by: Abhijeet Kasurde <akasurde@redhat.com>

diff --git a/lib/ansible/modules/net_tools/nmcli.py b/lib/ansible/modules/net_tools/nmcli.py
index 6e204ba026..ad08f8389b 100644
--- a/lib/ansible/modules/net_tools/nmcli.py
+++ b/lib/ansible/modules/net_tools/nmcli.py
@@ -467,7 +467,7 @@ try:
 
     from gi.repository import NetworkManager, NMClient
     HAVE_NM_CLIENT = True
-except ImportError:
+except (ImportError, ValueError):
     HAVE_NM_CLIENT = False
 
 from ansible.module_utils.basic import AnsibleModule
