commit 4b067fa47ec8883b8dc528f50486808ceb3d69f1
Author: Michael Scherer <misc@zarb.org>
Date:   Sun Oct 13 11:20:47 2013 +0200

    ansible-pull by default will look for local.yml and $fqdn.yml.
    For a small network ( home, small company ), having to put the FQDN
    in each file is a bit tedious, so this patch also add the shorthostname
    as a 3rd default if the fqdn is not found.

diff --git a/bin/ansible-pull b/bin/ansible-pull
index 4e1ff7e646..66782969c5 100755
--- a/bin/ansible-pull
+++ b/bin/ansible-pull
@@ -80,10 +80,12 @@ def select_playbook(path, args):
             return None
         return playbook
     else:
-        hostpb = "%s/%s.yml" % (path, socket.getfqdn())
+        fqdn = socket.getfqdn()
+        hostpb = "%s/%s.yml" % (path, fqdn)
+        shorthostpb = "%s/%s.yml" % (path, fqdn.split('.')[0])
         localpb = "%s/%s" % (path, DEFAULT_PLAYBOOK)
         errors = []
-        for pb in [hostpb, localpb]:
+        for pb in [hostpb, shorthostpb, localpb]:
             rc = try_playbook(pb)
             if rc == 0:
                 playbook = pb
