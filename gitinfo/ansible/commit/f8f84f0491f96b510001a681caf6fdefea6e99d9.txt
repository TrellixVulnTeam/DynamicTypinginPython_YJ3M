commit f8f84f0491f96b510001a681caf6fdefea6e99d9
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Sun Feb 7 12:46:41 2016 -0800

    Since we screenscrape output from git to tell us information we need to use the C locale when running commands.
    
    Using another locale would mean that we get information that may have
    the strings that we are looking for.
    
    Fixes #2449
    Fixes #2462

diff --git a/lib/ansible/modules/source_control/git.py b/lib/ansible/modules/source_control/git.py
index f017c4a02d..b98ab249e3 100644
--- a/lib/ansible/modules/source_control/git.py
+++ b/lib/ansible/modules/source_control/git.py
@@ -698,6 +698,10 @@ def main():
     key_file  = module.params['key_file']
     ssh_opts  = module.params['ssh_opts']
 
+    # We screenscrape a huge amount of git commands so use C locale anytime we
+    # call run_command()
+    module.run_command_environ_update = dict(LANG='C', LC_ALL='C', LC_MESSAGES='C', LC_CTYPE='C')
+
     gitconfig = None
     if not dest and allow_clone:
         module.fail_json(msg="the destination directory must be specified unless clone=no")
@@ -826,4 +830,5 @@ def main():
 from ansible.module_utils.basic import *
 from ansible.module_utils.known_hosts import *
 
-main()
+if __name__ == '__main__':
+    main()
