commit 6f91273fe116c303cb6194588337faa917975228
Author: Rene Moser <mail@renemoser.net>
Date:   Sun Aug 23 00:01:52 2015 +0200

    cloudstack: cs_instance: fix ip address may not be set on default nic

diff --git a/lib/ansible/modules/extras/cloud/cloudstack/cs_instance.py b/lib/ansible/modules/extras/cloud/cloudstack/cs_instance.py
index 378f651746..b7815812a4 100644
--- a/lib/ansible/modules/extras/cloud/cloudstack/cs_instance.py
+++ b/lib/ansible/modules/extras/cloud/cloudstack/cs_instance.py
@@ -779,7 +779,7 @@ class AnsibleCloudStackInstance(AnsibleCloudStack):
                 self.result['affinity_groups'] = affinity_groups
             if 'nic' in instance:
                 for nic in instance['nic']:
-                    if nic['isdefault']:
+                    if nic['isdefault'] and 'ipaddress' in nic:
                         self.result['default_ip'] = nic['ipaddress']
         return self.result
 
