commit b39aed87366f1ffd76abce42697d3f570db5d8f2
Author: Dag Wieers <dag@wieers.com>
Date:   Mon Oct 8 15:13:17 2012 +0200

    Add this module's namespace to the 'module_' namespace.
    
    Much like we currently have *setup* register the variable `module_setup`, we would like other facts-modules register their own namespace. This means that:
    
     - *network_facts* registers `module_network`
     - *hpilo_facts* registers `module_hw`
     - *vsphere_facts* registers `module_hw`
    
    In retrospect, it would have made more sense to have `setup` register `module_ansible` instead as the setup module uses the `ansible_` namesepace.
    
    Having the `module_` namespace allows us to check whether a certain namespace has already been loaded so we can avoid running the facts module a second time using only_if.
    
    ```yaml
     - action: network_facts host=${ansible_hostname_short}
       only_if: is_unset('$module_network')
    ```

diff --git a/library/hpilo_facts b/library/hpilo_facts
index 88a724aaca..66e8f490e4 100755
--- a/library/hpilo_facts
+++ b/library/hpilo_facts
@@ -124,7 +124,9 @@ def main():
 
     # TODO: Count number of CPUs, DIMMs and total memory
     data = ilo.get_host_data()
-    facts = {}
+    facts = {
+        'module_hw': True,
+    }
     for entry in data:
         if not entry.has_key('type'): continue
         if entry['type'] == 0: # BIOS Information
diff --git a/library/vsphere_facts b/library/vsphere_facts
index 4fc753b561..378a76c753 100755
--- a/library/vsphere_facts
+++ b/library/vsphere_facts
@@ -107,6 +107,7 @@ def main():
 
     data = vm.get_properties()
     facts = {
+        'module_hw': True,
         'hw_name': vm.properties.name,
         'hw_guest_full_name':  vm.properties.config.guestFullName,
         'hw_guest_id': vm.properties.config.guestId,
