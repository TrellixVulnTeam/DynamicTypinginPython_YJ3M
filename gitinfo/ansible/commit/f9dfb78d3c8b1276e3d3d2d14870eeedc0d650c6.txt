commit f9dfb78d3c8b1276e3d3d2d14870eeedc0d650c6
Author: Kris Amundson <krisa@subtend.net>
Date:   Wed Apr 3 11:39:00 2019 -0700

    Netbox Inventory: Group By Platforms (#52780)
    
    Fixes the functionality to group_by 'platforms'. Adds the call to self.refresh_platforms_lookup
    back and fixes square brackets to return a list instead of a string.

diff --git a/lib/ansible/plugins/inventory/netbox.py b/lib/ansible/plugins/inventory/netbox.py
index 5e6560ce73..9de0b9738c 100644
--- a/lib/ansible/plugins/inventory/netbox.py
+++ b/lib/ansible/plugins/inventory/netbox.py
@@ -222,7 +222,7 @@ class InventoryModule(BaseInventoryPlugin, Constructable):
 
     def extract_platform(self, host):
         try:
-            return self.platforms_lookup[host["platform"]["id"]]
+            return [self.platforms_lookup[host["platform"]["id"]]]
         except Exception:
             return
 
@@ -345,6 +345,7 @@ class InventoryModule(BaseInventoryPlugin, Constructable):
             self.refresh_tenants_lookup,
             self.refresh_racks_lookup,
             self.refresh_device_roles_lookup,
+            self.refresh_platforms_lookup,
             self.refresh_device_types_lookup,
             self.refresh_manufacturers_lookup,
         )
