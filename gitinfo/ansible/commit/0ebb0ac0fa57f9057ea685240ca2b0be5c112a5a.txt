commit 0ebb0ac0fa57f9057ea685240ca2b0be5c112a5a
Author: Nilashish Chakraborty <nilashishchakraborty8@gmail.com>
Date:   Tue Jan 7 13:12:30 2020 +0530

    Fix rendering duplicate peer-ip commands (#66088)
    
    Signed-off-by: NilashishC <nilashishchakraborty8@gmail.com>

diff --git a/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py b/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py
index 1b4e82cff1..de4937e25a 100644
--- a/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py
+++ b/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py
@@ -259,10 +259,10 @@ def state_present(module, existing, proposed, candidate):
                ingress_replicationnb_command, ingress_replicationns_command)):
             static_level_cmds = [cmd for cmd in commands if 'peer' in cmd]
             parents = [interface_command, vni_command]
+            commands = [cmd for cmd in commands if 'peer' not in cmd]
             for cmd in commands:
                 parents.append(cmd)
             candidate.add(static_level_cmds, parents=parents)
-            commands = [cmd for cmd in commands if 'peer' not in cmd]
 
         elif 'peer-ip' in commands[0]:
             static_level_cmds = [cmd for cmd in commands]
@@ -325,7 +325,7 @@ def main():
             if peer_list[0] == 'default':
                 module.params['peer_list'] = 'default'
             else:
-                stripped_peer_list = map(str.strip, peer_list)
+                stripped_peer_list = list(map(str.strip, peer_list))
                 module.params['peer_list'] = stripped_peer_list
 
     state = module.params['state']
