commit aa3975e084f515741729452494b6185784731bf2
Author: Ryan Brown <sb@ryansb.com>
Date:   Mon Jul 10 16:57:37 2017 -0400

    [cloud] Stop CloudFormation module from always making changesets (#26619)
    
    In Python a function is always truthy, and the name of the
    `create_changeset` function was being accidentally used instead of
    `module.params['changeset']`.

diff --git a/lib/ansible/modules/cloud/amazon/cloudformation.py b/lib/ansible/modules/cloud/amazon/cloudformation.py
index 88897337c5..b5a23028a4 100644
--- a/lib/ansible/modules/cloud/amazon/cloudformation.py
+++ b/lib/ansible/modules/cloud/amazon/cloudformation.py
@@ -518,7 +518,7 @@ def main():
     if state == 'present':
         if not stack_info:
             result = create_stack(module, stack_params, cfn)
-        elif create_changeset:
+        elif module.params.get('create_changeset'):
             result = create_changeset(module, stack_params, cfn)
         else:
             result = update_stack(module, stack_params, cfn)
