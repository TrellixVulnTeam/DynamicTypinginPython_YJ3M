commit 289be0222442803290b2d1db6a9512e45bdbbad3
Author: Zim Kalinowski <zikalino@microsoft.com>
Date:   Tue Aug 28 14:32:40 2018 +0800

    Revert "fix linux web app java linux_fx_version (#44715)" (#44750)

diff --git a/lib/ansible/modules/cloud/azure/azure_rm_webapp.py b/lib/ansible/modules/cloud/azure/azure_rm_webapp.py
index b2a377f1fc..7e5f2a91b3 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_webapp.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_webapp.py
@@ -77,7 +77,6 @@ options:
                     - node supported value sample, 6.6, 6.9.
                     - dotnetcore supported value sample, 1.0, 1,1, 1.2.
                     - ruby supported value sample, 2.3.
-                    - java supported value sample, 1.8, 1.9 for windows web app. 8 for linux web app.
             settings:
                 description:
                     - List of settings of the framework.
@@ -255,10 +254,10 @@ EXAMPLES = '''
           testkey: testvalue
         frameworks:
           - name: "java"
-            version: "8"
+            version: "1.8"
             settings:
               java_container: "Tomcat"
-              java_container_version: "8.5"
+              java_container_version: "8.0"
 '''
 
 RETURN = '''
@@ -300,8 +299,8 @@ deployment_source_spec = dict(
 
 
 framework_settings_spec = dict(
-    java_container=dict(type='str', required=True),
-    java_container_version=dict(type='str', required=True)
+    java_container=dict(type='str'),
+    java_container_version=dict(type='str')
 )
 
 
@@ -537,17 +536,6 @@ class AzureRMWebApps(AzureRMModuleBase):
                         self.fail('Unsupported framework {0} for Linux web app.'.format(self.frameworks[0]['name']))
 
                     self.site_config['linux_fx_version'] = (self.frameworks[0]['name'] + '|' + self.frameworks[0]['version']).upper()
-
-                    if self.frameworks[0]['name'] == 'java':
-                        if self.frameworks[0]['version'] != '8':
-                            self.fail("Linux web app only supports java 8.")
-                        if self.frameworks[0]['settings'] and self.frameworks[0]['settings']['java_container'].lower() != 'tomcat':
-                            self.fail("Linux web app only supports tomcat container.")
-
-                        if self.frameworks[0]['settings'] and self.frameworks[0]['settings']['java_container'].lower() == 'tomcat':
-                            self.site_config['linux_fx_version'] = 'TOMCAT|' + self.frameworks[0]['settings']['java_container_version'] + '-jre8'
-                        else:
-                            self.site_config['linux_fx_version'] = 'JAVA|8-jre8'
                 else:
                     for fx in self.frameworks:
                         if fx.get('name') not in self.supported_windows_frameworks:
@@ -555,11 +543,10 @@ class AzureRMWebApps(AzureRMModuleBase):
                         else:
                             self.site_config[fx.get('name') + '_version'] = fx.get('version')
 
-                if not is_linux:
-                    for fx in self.frameworks:
-                        if 'settings' in fx and fx['settings'] is not None:
-                            for key, value in fx['settings'].items():
-                                self.site_config[key] = value
+                for fx in self.frameworks:
+                    if 'settings' in fx and fx['settings'] is not None:
+                        for key, value in fx['settings'].items():
+                            self.site_config[key] = value
 
             if not self.app_settings:
                 self.app_settings = dict()
diff --git a/test/integration/targets/azure_rm_webapp/tasks/main.yml b/test/integration/targets/azure_rm_webapp/tasks/main.yml
index 8cb6cbf206..66f116b9bc 100644
--- a/test/integration/targets/azure_rm_webapp/tasks/main.yml
+++ b/test/integration/targets/azure_rm_webapp/tasks/main.yml
@@ -232,23 +232,4 @@
       - name: "node"
         version: "6.6"
   register: fail_linux_one_framework_only
-  failed_when: fail_linux_one_framework_only.msg != "Can specify one framework only for Linux web app."
-
-- name: Create a linux web app with java tomcat container
-  azure_rm_webapp:
-    resource_group: "{{ resource_group }}"
-    name: "{{ win_app_name }}13"
-    plan:
-      resource_group: "{{ linux_app_plan_resource_group }}"
-      name: "{{ linux_plan_name }}"
-    frameworks:
-      - name: java
-        version: "8"
-        settings:
-          java_container: "tomcat"
-          java_container_version: "8.5"
-  register: output
-
-- name: Assert the web app was created
-  assert:
-    that: output.changed
\ No newline at end of file
+  failed_when: fail_linux_one_framework_only.msg != "Can specify one framework only for Linux web app."
\ No newline at end of file
