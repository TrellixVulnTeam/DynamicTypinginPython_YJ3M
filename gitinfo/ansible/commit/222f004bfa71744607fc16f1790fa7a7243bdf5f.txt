commit 222f004bfa71744607fc16f1790fa7a7243bdf5f
Author: William Bowling <william.bowling@equella.com>
Date:   Wed May 22 12:55:58 2013 +1000

    Fixes apt_repository always reporting file uri repos as changed

diff --git a/library/packaging/apt_repository b/library/packaging/apt_repository
index 47b24c9e03..e35048f068 100644
--- a/library/packaging/apt_repository
+++ b/library/packaging/apt_repository
@@ -111,8 +111,10 @@ def main():
         # http://myserver/path/to/repo free non-free
         # deb http://myserver/path/to/repo free non-free
         for i in repo_url.split():
-            if 'http' in i:
-                repo_url = i
+            for prot in ['http', 'file', 'ftp']:
+              if prot in i:
+                  repo_url = i
+                  break
     exists = repo_exists(module, repo_url)
 
     rc = 0
