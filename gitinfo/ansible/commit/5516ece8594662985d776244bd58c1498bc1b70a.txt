commit 5516ece8594662985d776244bd58c1498bc1b70a
Author: Scott Sturdivant <scott.sturdivant@absio.com>
Date:   Thu May 23 12:13:09 2013 -0600

    Ensure the tmp_path is sufficiently open.

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index 0f9906bb31..4b71624248 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -662,7 +662,7 @@ class Runner(object):
             basetmp = os.path.join('/tmp', basefile)
 
         cmd = 'mkdir -p %s' % basetmp
-        if self.remote_user != 'root':
+        if self.remote_user != 'root' or (self.sudo and self.sudo_user != 'root'):
             cmd += ' && chmod a+rx %s' % basetmp
         cmd += ' && echo %s' % basetmp
 
