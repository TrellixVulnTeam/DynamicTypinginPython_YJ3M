commit cefb56979759816fa1607bdff5cba7239fdf7c2f
Author: Fabio Alessandro Locati <me@fale.io>
Date:   Mon Dec 5 16:24:50 2016 +0000

    Make `main()` calls conditional - messaging (#3654)

diff --git a/lib/ansible/modules/extras/messaging/rabbitmq_binding.py b/lib/ansible/modules/extras/messaging/rabbitmq_binding.py
index bc466388ac..2d0f9e4f08 100644
--- a/lib/ansible/modules/extras/messaging/rabbitmq_binding.py
+++ b/lib/ansible/modules/extras/messaging/rabbitmq_binding.py
@@ -224,4 +224,6 @@ def main():
 
 # import module snippets
 from ansible.module_utils.basic import *
-main()
+
+if __name__ == '__main__':
+    main()
diff --git a/lib/ansible/modules/extras/messaging/rabbitmq_exchange.py b/lib/ansible/modules/extras/messaging/rabbitmq_exchange.py
index 7475845727..011b63facc 100644
--- a/lib/ansible/modules/extras/messaging/rabbitmq_exchange.py
+++ b/lib/ansible/modules/extras/messaging/rabbitmq_exchange.py
@@ -202,4 +202,6 @@ def main():
 
 # import module snippets
 from ansible.module_utils.basic import *
-main()
+
+if __name__ == '__main__':
+    main()
diff --git a/lib/ansible/modules/extras/messaging/rabbitmq_parameter.py b/lib/ansible/modules/extras/messaging/rabbitmq_parameter.py
index 602f92fc4c..f3d188fd25 100644
--- a/lib/ansible/modules/extras/messaging/rabbitmq_parameter.py
+++ b/lib/ansible/modules/extras/messaging/rabbitmq_parameter.py
@@ -157,4 +157,6 @@ def main():
 
 # import module snippets
 from ansible.module_utils.basic import *
-main()
+
+if __name__ == '__main__':
+    main()
diff --git a/lib/ansible/modules/extras/messaging/rabbitmq_plugin.py b/lib/ansible/modules/extras/messaging/rabbitmq_plugin.py
index 6aa4fac305..832af02faf 100644
--- a/lib/ansible/modules/extras/messaging/rabbitmq_plugin.py
+++ b/lib/ansible/modules/extras/messaging/rabbitmq_plugin.py
@@ -149,4 +149,6 @@ def main():
 
 # import module snippets
 from ansible.module_utils.basic import *
-main()
+
+if __name__ == '__main__':
+    main()
diff --git a/lib/ansible/modules/extras/messaging/rabbitmq_policy.py b/lib/ansible/modules/extras/messaging/rabbitmq_policy.py
index 8293f6f897..ef7ffc6068 100644
--- a/lib/ansible/modules/extras/messaging/rabbitmq_policy.py
+++ b/lib/ansible/modules/extras/messaging/rabbitmq_policy.py
@@ -171,4 +171,6 @@ def main():
 
 # import module snippets
 from ansible.module_utils.basic import *
-main()
+
+if __name__ == '__main__':
+    main()
diff --git a/lib/ansible/modules/extras/messaging/rabbitmq_queue.py b/lib/ansible/modules/extras/messaging/rabbitmq_queue.py
index ec9e782f40..68d869da67 100644
--- a/lib/ansible/modules/extras/messaging/rabbitmq_queue.py
+++ b/lib/ansible/modules/extras/messaging/rabbitmq_queue.py
@@ -240,4 +240,6 @@ def main():
 
 # import module snippets
 from ansible.module_utils.basic import *
-main()
+
+if __name__ == '__main__':
+    main()
diff --git a/lib/ansible/modules/extras/messaging/rabbitmq_user.py b/lib/ansible/modules/extras/messaging/rabbitmq_user.py
index 470ae7c143..c51c6b0b59 100644
--- a/lib/ansible/modules/extras/messaging/rabbitmq_user.py
+++ b/lib/ansible/modules/extras/messaging/rabbitmq_user.py
@@ -305,4 +305,6 @@ def main():
 
 # import module snippets
 from ansible.module_utils.basic import *
-main()
+
+if __name__ == '__main__':
+    main()
diff --git a/lib/ansible/modules/extras/messaging/rabbitmq_vhost.py b/lib/ansible/modules/extras/messaging/rabbitmq_vhost.py
index 1ffb3d2674..ad8f9cba20 100644
--- a/lib/ansible/modules/extras/messaging/rabbitmq_vhost.py
+++ b/lib/ansible/modules/extras/messaging/rabbitmq_vhost.py
@@ -146,4 +146,6 @@ def main():
 
 # import module snippets
 from ansible.module_utils.basic import *
-main()
+
+if __name__ == '__main__':
+    main()
