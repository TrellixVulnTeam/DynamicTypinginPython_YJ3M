commit 7cd229aa972a249bd8648cdeb327cc0352fc82b2
Author: Felix Fontein <felix@fontein.de>
Date:   Fri May 31 23:47:53 2019 +0200

    Fix assignments in docker tests. (#57249)

diff --git a/test/integration/targets/docker_container/tasks/tests/comparisons.yml b/test/integration/targets/docker_container/tasks/tests/comparisons.yml
index f196ba7d46..8b7ae16bc6 100644
--- a/test/integration/targets/docker_container/tasks/tests/comparisons.yml
+++ b/test/integration/targets/docker_container/tasks/tests/comparisons.yml
@@ -4,7 +4,7 @@
     cname: "{{ cname_prefix ~ '-comparisons' }}"
 - name: Registering container name
   set_fact:
-    cnames: "{{ cnames }} + [cname]"
+    cnames: "{{ cnames + [cname] }}"
 
 ####################################################################
 ## value ###########################################################
diff --git a/test/integration/targets/docker_container/tasks/tests/image-ids.yml b/test/integration/targets/docker_container/tasks/tests/image-ids.yml
index 55d23eb987..376e7acfd7 100644
--- a/test/integration/targets/docker_container/tasks/tests/image-ids.yml
+++ b/test/integration/targets/docker_container/tasks/tests/image-ids.yml
@@ -4,7 +4,7 @@
     cname: "{{ cname_prefix ~ '-iid' }}"
 - name: Registering container name
   set_fact:
-    cnames: "{{ cnames }} + [cname]"
+    cnames: "{{ cnames + [cname] }}"
 
 - name: Pull images
   docker_image:
diff --git a/test/integration/targets/docker_container/tasks/tests/network.yml b/test/integration/targets/docker_container/tasks/tests/network.yml
index 9da4d6f3fc..f1412eeafe 100644
--- a/test/integration/targets/docker_container/tasks/tests/network.yml
+++ b/test/integration/targets/docker_container/tasks/tests/network.yml
@@ -7,8 +7,8 @@
     nname_2: "{{ cname_prefix ~ '-network-2' }}"
 - name: Registering container name
   set_fact:
-    cnames: "{{ cnames }} + [cname, cname_h1]"
-    dnetworks: "{{ dnetworks }} + [nname_1, nname_2]"
+    cnames: "{{ cnames + [cname, cname_h1] }}"
+    dnetworks: "{{ dnetworks + [nname_1, nname_2] }}"
 
 - name: Create networks
   docker_network:
diff --git a/test/integration/targets/docker_container/tasks/tests/options.yml b/test/integration/targets/docker_container/tasks/tests/options.yml
index cb3c901657..f564751de6 100644
--- a/test/integration/targets/docker_container/tasks/tests/options.yml
+++ b/test/integration/targets/docker_container/tasks/tests/options.yml
@@ -7,7 +7,7 @@
     cname_h3: "{{ cname_prefix ~ '-options-h3' }}"
 - name: Registering container name
   set_fact:
-    cnames: "{{ cnames }} + [cname, cname_h1, cname_h2, cname_h3]"
+    cnames: "{{ cnames + [cname, cname_h1, cname_h2, cname_h3] }}"
 
 ####################################################################
 ## auto_remove #####################################################
diff --git a/test/integration/targets/docker_container/tasks/tests/regression-45700-dont-parse-on-absent.yml b/test/integration/targets/docker_container/tasks/tests/regression-45700-dont-parse-on-absent.yml
index 3bb96dee13..bb7b1f2b5c 100644
--- a/test/integration/targets/docker_container/tasks/tests/regression-45700-dont-parse-on-absent.yml
+++ b/test/integration/targets/docker_container/tasks/tests/regression-45700-dont-parse-on-absent.yml
@@ -5,7 +5,7 @@
     cname: "{{ cname_prefix ~ '-45700' }}"
 - name: Registering container name
   set_fact:
-    cnames: "{{ cnames }} + [cname]"
+    cnames: "{{ cnames + [cname] }}"
 
 - name: Start container
   docker_container:
diff --git a/test/integration/targets/docker_container/tasks/tests/start-stop.yml b/test/integration/targets/docker_container/tasks/tests/start-stop.yml
index 33ea0aca9e..ecbe129edf 100644
--- a/test/integration/targets/docker_container/tasks/tests/start-stop.yml
+++ b/test/integration/targets/docker_container/tasks/tests/start-stop.yml
@@ -4,7 +4,7 @@
     cname: "{{ cname_prefix ~ '-hi' }}"
 - name: Registering container name
   set_fact:
-    cnames: "{{ cnames }} + [cname]"
+    cnames: "{{ cnames + [cname] }}"
 
 ####################################################################
 ## Creation ########################################################
diff --git a/test/integration/targets/docker_image/tasks/tests/options.yml b/test/integration/targets/docker_image/tasks/tests/options.yml
index 96d7a0afe4..5ee1a19a55 100644
--- a/test/integration/targets/docker_image/tasks/tests/options.yml
+++ b/test/integration/targets/docker_image/tasks/tests/options.yml
@@ -6,7 +6,7 @@
 
 - name: Registering image name
   set_fact:
-    inames: "{{ inames }} + [iname, iname_1]"
+    inames: "{{ inames + [iname, iname_1] }}"
 
 ####################################################################
 ## build.args ######################################################
diff --git a/test/integration/targets/docker_network/tasks/tests/basic.yml b/test/integration/targets/docker_network/tasks/tests/basic.yml
index 441a2beed1..89462d68e5 100644
--- a/test/integration/targets/docker_network/tasks/tests/basic.yml
+++ b/test/integration/targets/docker_network/tasks/tests/basic.yml
@@ -8,8 +8,8 @@
     nname_2: "{{ name_prefix ~ '-network-2' }}"
 - name: Registering container and network names
   set_fact:
-    cnames: "{{ cnames }} + [cname_1, cname_2, cname_3]"
-    dnetworks: "{{ dnetworks }} + [nname_1, nname_2]"
+    cnames: "{{ cnames + [cname_1, cname_2, cname_3] }}"
+    dnetworks: "{{ dnetworks + [nname_1, nname_2] }}"
 
 - name: Create containers
   docker_container:
diff --git a/test/integration/targets/docker_network/tasks/tests/ipam.yml b/test/integration/targets/docker_network/tasks/tests/ipam.yml
index 0c0a341ba6..2bd5f9b0e4 100644
--- a/test/integration/targets/docker_network/tasks/tests/ipam.yml
+++ b/test/integration/targets/docker_network/tasks/tests/ipam.yml
@@ -8,7 +8,7 @@
 
 - name: Registering network names
   set_fact:
-    dnetworks: "{{ dnetworks }} + [nname_ipam_0, nname_ipam_1, nname_ipam_2, nname_ipam_3]"
+    dnetworks: "{{ dnetworks + [nname_ipam_0, nname_ipam_1, nname_ipam_2, nname_ipam_3] }}"
 
 
 #################### network-ipam-0 deprecated ####################
diff --git a/test/integration/targets/docker_network/tasks/tests/options.yml b/test/integration/targets/docker_network/tasks/tests/options.yml
index 566f1d26c1..d89178bcde 100644
--- a/test/integration/targets/docker_network/tasks/tests/options.yml
+++ b/test/integration/targets/docker_network/tasks/tests/options.yml
@@ -4,7 +4,7 @@
     nname_1: "{{ name_prefix ~ '-network-1' }}"
 - name: Registering network name
   set_fact:
-    dnetworks: "{{ dnetworks }} + [nname_1]"
+    dnetworks: "{{ dnetworks + [nname_1] }}"
 
 ####################################################################
 ## internal ########################################################
diff --git a/test/integration/targets/docker_network/tasks/tests/overlay.yml b/test/integration/targets/docker_network/tasks/tests/overlay.yml
index 177996e1c3..832836aa05 100644
--- a/test/integration/targets/docker_network/tasks/tests/overlay.yml
+++ b/test/integration/targets/docker_network/tasks/tests/overlay.yml
@@ -4,7 +4,7 @@
     nname_1: "{{ name_prefix ~ '-network-1' }}"
 - name: Registering network name
   set_fact:
-    dnetworks: "{{ dnetworks }} + [nname_1]"
+    dnetworks: "{{ dnetworks + [nname_1] }}"
 
 ####################################################################
 ## overlay #########################################################
diff --git a/test/integration/targets/docker_network/tasks/tests/substring.yml b/test/integration/targets/docker_network/tasks/tests/substring.yml
index d789348b2d..bdee190e96 100644
--- a/test/integration/targets/docker_network/tasks/tests/substring.yml
+++ b/test/integration/targets/docker_network/tasks/tests/substring.yml
@@ -5,7 +5,7 @@
     nname_2: "{{ name_prefix ~ '-network-foobar' }}"
 - name: Registering container and network names
   set_fact:
-    dnetworks: "{{ dnetworks }} + [nname_1, nname_2]"
+    dnetworks: "{{ dnetworks + [nname_1, nname_2] }}"
 
 ####################################################################
 
diff --git a/test/integration/targets/docker_swarm_service/tasks/tests/configs.yml b/test/integration/targets/docker_swarm_service/tasks/tests/configs.yml
index c4c5d083d4..e995841d18 100644
--- a/test/integration/targets/docker_swarm_service/tasks/tests/configs.yml
+++ b/test/integration/targets/docker_swarm_service/tasks/tests/configs.yml
@@ -8,7 +8,7 @@
 
 - name: Registering container name
   set_fact:
-    config_names: "{{ config_names }} + [config_name_1, config_name_2]"
+    config_names: "{{ config_names + [config_name_1, config_name_2] }}"
 
 - docker_config:
     name: "{{ config_name_1 }}"
diff --git a/test/integration/targets/docker_swarm_service/tasks/tests/logging.yml b/test/integration/targets/docker_swarm_service/tasks/tests/logging.yml
index 42266b561d..88e7b561c9 100644
--- a/test/integration/targets/docker_swarm_service/tasks/tests/logging.yml
+++ b/test/integration/targets/docker_swarm_service/tasks/tests/logging.yml
@@ -6,7 +6,7 @@
 
 - name: Registering service name
   set_fact:
-    service_names: "{{ service_names }} + [service_name]"
+    service_names: "{{ service_names + [service_name] }}"
 
 ####################################################################
 ## logging.driver ##################################################
diff --git a/test/integration/targets/docker_swarm_service/tasks/tests/mounts.yml b/test/integration/targets/docker_swarm_service/tasks/tests/mounts.yml
index 631f55d96d..e2c2029329 100644
--- a/test/integration/targets/docker_swarm_service/tasks/tests/mounts.yml
+++ b/test/integration/targets/docker_swarm_service/tasks/tests/mounts.yml
@@ -6,8 +6,8 @@
 
 - name: Registering service name
   set_fact:
-    service_names: "{{ service_names }} + [service_name]"
-    volume_names: "{{ volume_names }} + [volume_name_1, volume_name_2]"
+    service_names: "{{ service_names + [service_name] }}"
+    volume_names: "{{ volume_names + [volume_name_1, volume_name_2] }}"
 
 - docker_volume:
     name: "{{ volume_name }}"
diff --git a/test/integration/targets/docker_swarm_service/tasks/tests/options.yml b/test/integration/targets/docker_swarm_service/tasks/tests/options.yml
index 35271dc18e..d1696d7bb3 100644
--- a/test/integration/targets/docker_swarm_service/tasks/tests/options.yml
+++ b/test/integration/targets/docker_swarm_service/tasks/tests/options.yml
@@ -8,8 +8,8 @@
 
 - name: Registering container name
   set_fact:
-    service_names: "{{ service_names }} + [service_name]"
-    network_names: "{{ network_names }} + [network_name_1, network_name_2]"
+    service_names: "{{ service_names + [service_name] }}"
+    network_names: "{{ network_names + [network_name_1, network_name_2] }}"
 
 - docker_network:
     name: "{{ network_name }}"
diff --git a/test/integration/targets/docker_swarm_service/tasks/tests/placement.yml b/test/integration/targets/docker_swarm_service/tasks/tests/placement.yml
index 38760d6362..76b064efa6 100644
--- a/test/integration/targets/docker_swarm_service/tasks/tests/placement.yml
+++ b/test/integration/targets/docker_swarm_service/tasks/tests/placement.yml
@@ -6,7 +6,7 @@
 
 - name: Registering service name
   set_fact:
-    service_names: "{{ service_names }} + [service_name]"
+    service_names: "{{ service_names + [service_name] }}"
 
 
 ####################################################################
diff --git a/test/integration/targets/docker_swarm_service/tasks/tests/resources.yml b/test/integration/targets/docker_swarm_service/tasks/tests/resources.yml
index 03ccea93c9..7eaba19f33 100644
--- a/test/integration/targets/docker_swarm_service/tasks/tests/resources.yml
+++ b/test/integration/targets/docker_swarm_service/tasks/tests/resources.yml
@@ -6,7 +6,7 @@
 
 - name: Registering service name
   set_fact:
-    service_names: "{{ service_names }} + [service_name]"
+    service_names: "{{ service_names + [service_name] }}"
 
 ####################################################################
 ## limits.cpus #####################################################
diff --git a/test/integration/targets/docker_swarm_service/tasks/tests/restart_config.yml b/test/integration/targets/docker_swarm_service/tasks/tests/restart_config.yml
index 9aa7ca1d75..d8a415190f 100644
--- a/test/integration/targets/docker_swarm_service/tasks/tests/restart_config.yml
+++ b/test/integration/targets/docker_swarm_service/tasks/tests/restart_config.yml
@@ -6,7 +6,7 @@
 
 - name: Registering service name
   set_fact:
-    service_names: "{{ service_names }} + [service_name]"
+    service_names: "{{ service_names + [service_name] }}"
 
 ###################################################################
 ## restart_config.condition #######################################
diff --git a/test/integration/targets/docker_swarm_service/tasks/tests/rollback_config.yml b/test/integration/targets/docker_swarm_service/tasks/tests/rollback_config.yml
index ac8bc03b4a..9789f450b3 100644
--- a/test/integration/targets/docker_swarm_service/tasks/tests/rollback_config.yml
+++ b/test/integration/targets/docker_swarm_service/tasks/tests/rollback_config.yml
@@ -6,7 +6,7 @@
 
 - name: Registering service name
   set_fact:
-    service_names: "{{ service_names }} + [service_name]"
+    service_names: "{{ service_names + [service_name] }}"
 
 ###################################################################
 ## rollback_config.delay ############################################
diff --git a/test/integration/targets/docker_swarm_service/tasks/tests/secrets.yml b/test/integration/targets/docker_swarm_service/tasks/tests/secrets.yml
index a5b56bd357..7ac2b4aa6e 100644
--- a/test/integration/targets/docker_swarm_service/tasks/tests/secrets.yml
+++ b/test/integration/targets/docker_swarm_service/tasks/tests/secrets.yml
@@ -8,7 +8,7 @@
 
 - name: Registering container name
   set_fact:
-    secret_names: "{{ secret_names }} + [secret_name_1, secret_name_2]"
+    secret_names: "{{ secret_names + [secret_name_1, secret_name_2] }}"
 
 - docker_secret:
     name: "{{ secret_name_1 }}"
diff --git a/test/integration/targets/docker_swarm_service/tasks/tests/update_config.yml b/test/integration/targets/docker_swarm_service/tasks/tests/update_config.yml
index c91d83da84..bb6e0ec1f1 100644
--- a/test/integration/targets/docker_swarm_service/tasks/tests/update_config.yml
+++ b/test/integration/targets/docker_swarm_service/tasks/tests/update_config.yml
@@ -6,7 +6,7 @@
 
 - name: Registering service name
   set_fact:
-    service_names: "{{ service_names }} + [service_name]"
+    service_names: "{{ service_names + [service_name] }}"
 
 ###################################################################
 ## update_config.delay ############################################
diff --git a/test/integration/targets/docker_volume/tasks/tests/basic.yml b/test/integration/targets/docker_volume/tasks/tests/basic.yml
index a01bb5865d..7ee562614c 100644
--- a/test/integration/targets/docker_volume/tasks/tests/basic.yml
+++ b/test/integration/targets/docker_volume/tasks/tests/basic.yml
@@ -4,7 +4,7 @@
     vname: "{{ name_prefix ~ '-basic' }}"
 - name: Registering container name
   set_fact:
-    vnames: "{{ vnames }} + [vname]"
+    vnames: "{{ vnames + [vname] }}"
 
 ####################################################################
 ## basic ###########################################################
