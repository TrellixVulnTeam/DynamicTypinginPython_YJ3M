commit 654a38897f550caf3ff6847fd0a338fa37a88e7d
Author: Peter Sprygada <privateip@users.noreply.github.com>
Date:   Fri Sep 23 16:09:14 2016 -0400

    fixes exception raised when nxos_facts uses nxapi transport (#4988)
    
    This fixes a condition where an exception is raised when collecting `interface`
    facts and the transport is set to nxapi in the nxos_nxapi module.
    
    fixes ansible/ansible#17691

diff --git a/lib/ansible/modules/network/nxos/nxos_facts.py b/lib/ansible/modules/network/nxos/nxos_facts.py
index af8df35071..ff9c454aaa 100644
--- a/lib/ansible/modules/network/nxos/nxos_facts.py
+++ b/lib/ansible/modules/network/nxos/nxos_facts.py
@@ -276,11 +276,11 @@ class Interfaces(FactsBase):
     def commands(self):
         add_command(self.runner, 'show interface', output='json')
 
-        resp = self.module.cli(['show ipv6 interface | wc lines'])
-        if int(resp[0]) > 1:
+        try:
+            self.module.cli('show ipv6 interface', 'json')
             add_command(self.runner, 'show ipv6 interface', output='json')
             self.ipv6 = True
-        else:
+        except NetworkError:
             self.ipv6 = False
 
         try:
