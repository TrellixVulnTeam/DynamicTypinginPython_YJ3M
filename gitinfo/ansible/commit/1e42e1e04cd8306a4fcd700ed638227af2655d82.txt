commit 1e42e1e04cd8306a4fcd700ed638227af2655d82
Author: Gregory Danenberg <gregory.danenberg@nice.com>
Date:   Thu Aug 3 15:40:28 2017 +0300

    [cloud] cloudformation: fix changeset_name bug fix #27487 (#27518)
    
    Closes #27487

diff --git a/lib/ansible/modules/cloud/amazon/cloudformation.py b/lib/ansible/modules/cloud/amazon/cloudformation.py
index 6aef6eac5b..e1d7417df8 100644
--- a/lib/ansible/modules/cloud/amazon/cloudformation.py
+++ b/lib/ansible/modules/cloud/amazon/cloudformation.py
@@ -324,6 +324,9 @@ def create_changeset(module, stack_params, cfn):
 
             changeset_name = 'Ansible-' + stack_params['StackName'] + '-' + sha1(to_bytes(json_params, errors='surrogate_or_strict')).hexdigest()
             stack_params['ChangeSetName'] = changeset_name
+        else:
+            changeset_name = stack_params['ChangeSetName']
+
         # Determine if this changeset already exists
         pending_changesets = list_changesets(cfn, stack_params['StackName'])
         if changeset_name in pending_changesets:
