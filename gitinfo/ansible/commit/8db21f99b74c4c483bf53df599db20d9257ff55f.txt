commit 8db21f99b74c4c483bf53df599db20d9257ff55f
Author: James Cammarata <jimi@sngx.net>
Date:   Thu May 7 12:53:22 2015 -0500

    Set the inventory on the variable manager for the adhoc cli usage (v2)

diff --git a/lib/ansible/cli/adhoc.py b/lib/ansible/cli/adhoc.py
index 16c2dc9e42..f7692a1335 100644
--- a/lib/ansible/cli/adhoc.py
+++ b/lib/ansible/cli/adhoc.py
@@ -93,6 +93,7 @@ class AdHocCLI(CLI):
         variable_manager = VariableManager()
 
         inventory = Inventory(loader=loader, variable_manager=variable_manager, host_list=self.options.inventory)
+        variable_manager.set_inventory(inventory)
 
         hosts = inventory.list_hosts(pattern)
         if len(hosts) == 0:
