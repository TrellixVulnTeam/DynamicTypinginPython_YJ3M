commit 06cd532cc59509a8acce5a3030b0bd9a011e043d
Author: Jonathan Mainguy <jon@soh.re>
Date:   Mon May 18 22:55:51 2015 -0400

    added nice error for systemd hosts where name > 64 chars

diff --git a/lib/ansible/modules/system/hostname.py b/lib/ansible/modules/system/hostname.py
index 307a8b687b..1fe16e506f 100644
--- a/lib/ansible/modules/system/hostname.py
+++ b/lib/ansible/modules/system/hostname.py
@@ -248,6 +248,8 @@ class SystemdStrategy(GenericStrategy):
         return out.strip()
 
     def set_current_hostname(self, name):
+        if len(name) > 64:
+            self.module.fail_json(msg="name cannot be longer than 64 characters on systemd servers, try a shorter name")
         cmd = ['hostnamectl', '--transient', 'set-hostname', name]
         rc, out, err = self.module.run_command(cmd)
         if rc != 0:
@@ -263,6 +265,8 @@ class SystemdStrategy(GenericStrategy):
         return out.strip()
 
     def set_permanent_hostname(self, name):
+        if len(name) > 64:
+            self.module.fail_json(msg="name cannot be longer than 64 characters on systemd servers, try a shorter name")
         cmd = ['hostnamectl', '--pretty', 'set-hostname', name]
         rc, out, err = self.module.run_command(cmd)
         if rc != 0:
