commit 32a8b620f399fdc9698bd31ea1e619b2eb72b666
Author: Baptiste Mille-Mathias <baptiste.millemathias@gmail.com>
Date:   Thu Dec 19 20:50:44 2019 +0100

    [get_url] Return status_code on HTTP 304 (#65739)
    
    Return field status_code on HTTP status 304 (implemented by lkthomas)
    Add an integration test for this case.
    Fixes #65263

diff --git a/changelogs/fragments/65307-get_url-return-status-code-on-http-304.yaml b/changelogs/fragments/65307-get_url-return-status-code-on-http-304.yaml
new file mode 100644
index 0000000000..76c0f9812d
--- /dev/null
+++ b/changelogs/fragments/65307-get_url-return-status-code-on-http-304.yaml
@@ -0,0 +1,2 @@
+bugfixes:
+- "On HTTP status code 304, return status_code"
diff --git a/lib/ansible/modules/net_tools/basics/get_url.py b/lib/ansible/modules/net_tools/basics/get_url.py
index 52a5bc0a23..17d3c140c5 100644
--- a/lib/ansible/modules/net_tools/basics/get_url.py
+++ b/lib/ansible/modules/net_tools/basics/get_url.py
@@ -365,7 +365,7 @@ def url_get(module, url, dest, use_proxy, last_mod_time, force, timeout=10, head
     elapsed = (datetime.datetime.utcnow() - start).seconds
 
     if info['status'] == 304:
-        module.exit_json(url=url, dest=dest, changed=False, msg=info.get('msg', ''), elapsed=elapsed)
+        module.exit_json(url=url, dest=dest, changed=False, msg=info.get('msg', ''), status_code=info['status'], elapsed=elapsed)
 
     # Exceptions in fetch_url may result in a status -1, the ensures a proper error to the user in all cases
     if info['status'] == -1:
diff --git a/test/integration/targets/get_url/tasks/main.yml b/test/integration/targets/get_url/tasks/main.yml
index c51a579a8d..a91968c9e0 100644
--- a/test/integration/targets/get_url/tasks/main.yml
+++ b/test/integration/targets/get_url/tasks/main.yml
@@ -221,7 +221,7 @@
       - result is changed
       - "stat_result.stat.mode == '0707'"
 
-- name: Test that setting file modes on an already downlaoded file work
+- name: Test that setting file modes on an already downloaded file work
   get_url:
     url: 'https://{{ httpbin_host }}/'
     dest: '{{ remote_tmp_dir }}/test'
@@ -238,6 +238,19 @@
       - result is changed
       - "stat_result.stat.mode == '0070'"
 
+# https://github.com/ansible/ansible/pull/65307/
+- name: Test that on http status 304, we get a status_code field.
+  get_url:
+    url: 'https://{{ httpbin_host }}/status/304'
+    dest: '{{ remote_tmp_dir }}/test'
+  register: result
+
+- name: Assert that we get the appropriate status_code
+  assert:
+    that:
+      - "'status_code' in result"
+      - "result.status_code == 304"
+
 # https://github.com/ansible/ansible/issues/29614
 - name: Change mode on an already downloaded file and specify checksum
   get_url:
