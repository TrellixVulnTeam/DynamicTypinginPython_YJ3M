commit 795cb90367c3f73ba1126193ee792df73ebe4b89
Author: Ganesh Nalawade <ganesh634@gmail.com>
Date:   Mon Jun 17 16:22:23 2019 +0530

    Fix iosxr discard_changes netconf rpc issue (#57931)
    
    * If dispatch() rpc response has data element
    return the xml string from <data> element
    else return the complete xml string from
    <rpc-reply>.
    
    Depends-On: #57909
    Depends-On: #57919

diff --git a/lib/ansible/plugins/netconf/__init__.py b/lib/ansible/plugins/netconf/__init__.py
index 39af3850ce..84d416d188 100644
--- a/lib/ansible/plugins/netconf/__init__.py
+++ b/lib/ansible/plugins/netconf/__init__.py
@@ -26,6 +26,7 @@ from ansible.errors import AnsibleError
 from ansible.plugins import AnsiblePlugin
 from ansible.module_utils._text import to_native
 from ansible.module_utils.basic import missing_required_lib
+from ansible.module_utils.six import string_types
 
 try:
     from ncclient.operations import RPCError
@@ -223,9 +224,9 @@ class NetconfBase(AnsiblePlugin):
         """
         if rpc_command is None:
             raise ValueError('rpc_command value must be provided')
-
-        resp = self.m.dispatch(fromstring(rpc_command), source=source, filter=filter)
-        return resp.data_xml if hasattr(resp, 'data_xml') else resp.xml
+        req = fromstring(rpc_command)
+        resp = self.m.dispatch(req, source=source, filter=filter)
+        return resp.data_xml if resp.data_ele else resp.xml
 
     @ensure_connected
     def lock(self, target="candidate"):
