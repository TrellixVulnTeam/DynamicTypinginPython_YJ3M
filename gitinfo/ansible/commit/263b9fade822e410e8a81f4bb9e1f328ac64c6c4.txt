commit 263b9fade822e410e8a81f4bb9e1f328ac64c6c4
Author: Matt Martz <matt@sivel.net>
Date:   Mon Sep 10 14:37:18 2018 -0500

    Don't pass file_name to DataLoader.load in script inventory plugin (#45428)
    
    * Don't pass file_name to DataLoader.load in script inventory plugin. Fixes #34164
    
    * Add changelog fragment

diff --git a/changelogs/fragments/script-module-no-file-path.yaml b/changelogs/fragments/script-module-no-file-path.yaml
new file mode 100644
index 0000000000..6df6aa45e1
--- /dev/null
+++ b/changelogs/fragments/script-module-no-file-path.yaml
@@ -0,0 +1,2 @@
+bugfixes:
+- script inventory plugin - Don't pass file_name to DataLoader.load, which will prevent misleading error messages (https://github.com/ansible/ansible/issues/34164)
diff --git a/lib/ansible/plugins/inventory/script.py b/lib/ansible/plugins/inventory/script.py
index 8bc1de7311..2912c9580a 100644
--- a/lib/ansible/plugins/inventory/script.py
+++ b/lib/ansible/plugins/inventory/script.py
@@ -120,7 +120,7 @@ class InventoryModule(BaseInventoryPlugin, Cacheable):
                     raise AnsibleError("Inventory {0} contained characters that cannot be interpreted as UTF-8: {1}".format(path, to_native(e)))
 
                 try:
-                    self._cache[cache_key] = self.loader.load(data, file_name=path)
+                    self._cache[cache_key] = self.loader.load(data)
                 except Exception as e:
                     raise AnsibleError("failed to parse executable inventory script results from {0}: {1}\n{2}".format(path, to_native(e), err))
 
