commit eb80bd1a56635233cfbe4e547de222f20bbe13c0
Author: James Cammarata <jimi@sngx.net>
Date:   Mon Jul 14 14:14:13 2014 -0500

    Break out of loop for sockets in wait_for when there's no data to read

diff --git a/library/utilities/wait_for b/library/utilities/wait_for
index e8788cb7a7..e87fd566a4 100644
--- a/library/utilities/wait_for
+++ b/library/utilities/wait_for
@@ -213,7 +213,9 @@ def main():
                         matched = False
                         while 1:
                             data += s.recv(1024)
-                            if re.search(search_regex, data, re.MULTILINE):
+                            if not data:
+                                break
+                            elif re.search(search_regex, data, re.MULTILINE):
                                 matched = True
                                 break
                         if matched:
