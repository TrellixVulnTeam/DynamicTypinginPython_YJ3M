commit ee32222ae7e95a0175b6d96870a0b91901e6ebf3
Author: Zim Kalinowski <zikalino@microsoft.com>
Date:   Wed Jun 19 17:00:43 2019 +0800

    fixing vmss failure (#56625)
    
    * triggering test
    
    * deleting autocreated as last one
    
    * fixed mistake

diff --git a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine.py b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine.py
index 61bd2e7dfa..44e19480aa 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachine.py
@@ -1795,6 +1795,9 @@ class AzureRMVirtualMachine(AzureRMModuleBase):
             for pip_dict in pip_names:
                 self.delete_pip(pip_dict['resource_group'], pip_dict['name'])
 
+        if 'all' in self.remove_on_absent or 'all_autocreated' in self.remove_on_absent:
+            self.remove_autocreated_resources(vm.tags)
+
         return True
 
     def get_network_interface(self, resource_group, name):
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachinescaleset.py b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachinescaleset.py
index 040bb4697b..bda9f22ea5 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_virtualmachinescaleset.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_virtualmachinescaleset.py
@@ -210,7 +210,7 @@ options:
         version_added: "2.8"
     zones:
         description:
-            - A list of Availability Zones for your virtual machine scale set
+            - A list of Availability Zones for your virtual machine scale set.
         type: list
         version_added: "2.8"
     custom_data:
