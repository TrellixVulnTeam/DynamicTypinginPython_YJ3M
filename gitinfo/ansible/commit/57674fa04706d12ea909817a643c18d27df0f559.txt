commit 57674fa04706d12ea909817a643c18d27df0f559
Author: Brian Coca <bcoca@ansible.com>
Date:   Thu Feb 19 16:04:57 2015 -0500

    Allow requesting a list to lookup plugins instead of , delimited string

diff --git a/lib/ansible/utils/template.py b/lib/ansible/utils/template.py
index 9556b8fcea..722e33e4c8 100644
--- a/lib/ansible/utils/template.py
+++ b/lib/ansible/utils/template.py
@@ -89,6 +89,8 @@ def lookup(name, *args, **kwargs):
     instance = utils.plugins.lookup_loader.get(name.lower(), basedir=kwargs.get('basedir',None))
     tvars = kwargs.get('vars', None)
 
+    wantlist = kwargs.pop('wantlist', False)
+
     if instance is not None:
         try:
             ran = instance.run(*args, inject=tvars, **kwargs)
@@ -98,7 +100,7 @@ def lookup(name, *args, **kwargs):
             raise errors.AnsibleUndefinedVariable("One or more undefined variables: %s" % str(e))
         except Exception, e:
             raise errors.AnsibleError('Unexpected error in during lookup: %s' % e)
-        if ran:
+        if ran and not wantlist:
             ran = ",".join(ran)
         return ran
     else:
