commit 70fd5d4caf65bdbafd1be023562bb9d28f7d0b6f
Author: Fedele Mantuano <mantuano.fedele@gmail.com>
Date:   Tue Jan 2 17:03:44 2018 +0100

    More stable explicit file close. (#34303)

diff --git a/contrib/inventory/openstack.py b/contrib/inventory/openstack.py
index b451f312a0..30007e408c 100755
--- a/contrib/inventory/openstack.py
+++ b/contrib/inventory/openstack.py
@@ -118,9 +118,11 @@ def get_host_groups(inventory, refresh=False, cloud=None):
     (cache_file, cache_expiration_time) = get_cache_settings(cloud)
     if is_cache_stale(cache_file, cache_expiration_time, refresh=refresh):
         groups = to_json(get_host_groups_from_cloud(inventory))
-        open(cache_file, 'w').write(groups)
+        with open(cache_file, 'w') as f:
+            f.write(groups)
     else:
-        groups = open(cache_file, 'r').read()
+        with open(cache_file, 'r') as f:
+            groups = f.read()
     return groups
 
 
