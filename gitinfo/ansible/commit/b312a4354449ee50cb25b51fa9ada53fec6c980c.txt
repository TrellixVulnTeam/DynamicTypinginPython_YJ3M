commit b312a4354449ee50cb25b51fa9ada53fec6c980c
Author: NAGA RAVI CHAITANYA ELLURI <nelluri@engineyard.com>
Date:   Fri Jul 1 13:25:48 2016 -0400

    fix(callback-mail plugin): fixes the warning 'TaskResult' object has no attribute '__getitem__'  because of which its not sending an email on failure (#16547)

diff --git a/lib/ansible/plugins/callback/mail.py b/lib/ansible/plugins/callback/mail.py
index 4a9c1f0b10..54f649db4b 100644
--- a/lib/ansible/plugins/callback/mail.py
+++ b/lib/ansible/plugins/callback/mail.py
@@ -94,7 +94,7 @@ class CallbackModule(CallbackBase):
             subject = res._result['stdout'].strip('\r\n').split('\n')[-1]
             body += 'with the following output in standard output:\n\n' + res._result['stdout'] + '\n\n'
         if 'stderr' in res._result.keys() and res._result['stderr']:
-            subject = res['stderr'].strip('\r\n').split('\n')[-1]
+            subject = res._result['stderr'].strip('\r\n').split('\n')[-1]
             body += 'with the following output in standard error:\n\n' + res._result['stderr'] + '\n\n'
         if 'msg' in res._result.keys() and res._result['msg']:
             subject = res._result['msg'].strip('\r\n').split('\n')[0]
