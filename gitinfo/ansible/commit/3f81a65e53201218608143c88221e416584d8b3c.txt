commit 3f81a65e53201218608143c88221e416584d8b3c
Author: Rob White <rob.white@truelocal.com.au>
Date:   Wed Nov 30 11:58:58 2016 +1100

    Fail if specifying an ENI as device but in_vpc is not true

diff --git a/lib/ansible/modules/cloud/amazon/ec2_eip.py b/lib/ansible/modules/cloud/amazon/ec2_eip.py
index 04e6e1e1d7..7fa81eb761 100644
--- a/lib/ansible/modules/cloud/amazon/ec2_eip.py
+++ b/lib/ansible/modules/cloud/amazon/ec2_eip.py
@@ -382,6 +382,8 @@ def main():
         if device_id and device_id.startswith('i-'):
             is_instance = True
         elif device_id:
+            if device_id.startswith('eni-') and not in_vpc:
+                module.fail_json(msg="If you are specifying an ENI, in_vpc must be true")
             is_instance = False
 
     try:
