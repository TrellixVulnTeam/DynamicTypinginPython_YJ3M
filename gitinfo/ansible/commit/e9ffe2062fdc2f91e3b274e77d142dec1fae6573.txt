commit e9ffe2062fdc2f91e3b274e77d142dec1fae6573
Author: Michael Scherer <misc@zarb.org>
Date:   Tue Sep 13 20:12:58 2016 +0200

    Add test for the pause in loop feature (#17336)
    
    See https://github.com/ansible/ansible/pull/17289

diff --git a/test/integration/non_destructive.yml b/test/integration/non_destructive.yml
index ec5d194fef..ef70bbaf65 100644
--- a/test/integration/non_destructive.yml
+++ b/test/integration/non_destructive.yml
@@ -43,4 +43,4 @@
     - { role: test_embedded_module, tags: test_embedded_module }
     - { role: test_add_host, tags: test_add_host }
     - { role: test_binary, tags: test_binary }
-
+    - { role: test_loops, tags: test_loops }
diff --git a/test/integration/roles/test_loops/tasks/main.yml b/test/integration/roles/test_loops/tasks/main.yml
new file mode 100644
index 0000000000..7fa6d0d03a
--- /dev/null
+++ b/test/integration/roles/test_loops/tasks/main.yml
@@ -0,0 +1,20 @@
+- name: Measure time before
+  shell: date +%s
+  register: before
+
+- debug:
+    var: i
+  with_sequence: count=3
+  loop_control:
+    loop_var: i
+    pause: 2
+
+- name: Measure time after
+  shell: date +%s
+  register: after
+
+# since there is 3 rounds, and 2 seconds between, it should last 4 seconds
+# we do not test the upper bound, since CI can lag significantly
+- assert:
+    that:
+    - '(after.stdout |int) - (before.stdout|int) >= 4'
