commit 3e52f47b51ab1e693090099d829205f557a8446f
Author: Ryan Fitzpatrick <rmfitzpatrick@users.noreply.github.com>
Date:   Fri Jun 23 12:33:55 2017 -0400

    [cloud] Fixes #26045 Ensure instance.instance_profile is not None before casting to dict (#26047)

diff --git a/lib/ansible/modules/cloud/amazon/ec2_remote_facts.py b/lib/ansible/modules/cloud/amazon/ec2_remote_facts.py
index a66ca39cce..b61ac362c9 100644
--- a/lib/ansible/modules/cloud/amazon/ec2_remote_facts.py
+++ b/lib/ansible/modules/cloud/amazon/ec2_remote_facts.py
@@ -108,9 +108,11 @@ def get_instance_info(instance):
     except AttributeError:
         pass
 
+    instance_profile = dict(instance.instance_profile) if instance.instance_profile is not None else None
+
     instance_info = { 'id': instance.id,
                     'kernel': instance.kernel,
-                    'instance_profile': dict(instance.instance_profile),
+                    'instance_profile': instance_profile,
                     'root_device_type': instance.root_device_type,
                     'private_dns_name': instance.private_dns_name,
                     'public_dns_name': instance.public_dns_name,
