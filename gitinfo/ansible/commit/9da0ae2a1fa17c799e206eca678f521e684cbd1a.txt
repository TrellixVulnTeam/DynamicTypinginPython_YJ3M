commit 9da0ae2a1fa17c799e206eca678f521e684cbd1a
Author: ryanaudiencepi <ryanaudiencepi@users.noreply.github.com>
Date:   Tue Oct 1 03:41:17 2013 +0800

    Fix monit module. Monit restart bug

diff --git a/library/monitoring/monit b/library/monitoring/monit
index 3856ce7e6c..e40768f642 100644
--- a/library/monitoring/monit
+++ b/library/monitoring/monit
@@ -116,9 +116,9 @@ def main():
     elif state == 'restarted':
         if module.check_mode:
             module.exit_json(changed=True)
-        module.run_command('%s stop %s' % (MONIT, name))
-        rc, out, err = module.run_command('%s start %s' % (MONIT, name))
-        if 'initializing' in out or 'start pending' in out:
+        module.run_command('%s restart %s' % (MONIT, name))
+        rc, out, err = module.run_command('%s summary | grep %s' % (MONIT, name))
+        if 'initializing' in out or 'restart pending' in out:
             module.exit_json(changed=True, name=name, state=state)
         module.fail_json(msg=out)
 
