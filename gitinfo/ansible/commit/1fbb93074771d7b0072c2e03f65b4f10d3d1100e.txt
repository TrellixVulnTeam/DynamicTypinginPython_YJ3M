commit 1fbb93074771d7b0072c2e03f65b4f10d3d1100e
Author: Matt Clay <matt@mystile.com>
Date:   Fri Aug 23 23:40:45 2019 -0700

    Add out-of-tree check to symlinks sanity test.

diff --git a/test/lib/ansible_test/_data/sanity/code-smell/symlinks.py b/test/lib/ansible_test/_data/sanity/code-smell/symlinks.py
index 8151d482e1..0585c6b1e5 100755
--- a/test/lib/ansible_test/_data/sanity/code-smell/symlinks.py
+++ b/test/lib/ansible_test/_data/sanity/code-smell/symlinks.py
@@ -7,15 +7,25 @@ import sys
 
 
 def main():
+    root_dir = os.getcwd() + os.path.sep
+
     for path in sys.argv[1:] or sys.stdin.read().splitlines():
         if not os.path.islink(path.rstrip(os.path.sep)):
             continue
 
         if not os.path.exists(path):
             print('%s: broken symlinks are not allowed' % path)
+            continue
 
         if path.endswith(os.path.sep):
             print('%s: symlinks to directories are not allowed' % path)
+            continue
+
+        real_path = os.path.realpath(path)
+
+        if not real_path.startswith(root_dir):
+            print('%s: symlinks outside content tree are not allowed: %s' % (path, os.path.relpath(real_path, os.path.dirname(path))))
+            continue
 
 
 if __name__ == '__main__':
