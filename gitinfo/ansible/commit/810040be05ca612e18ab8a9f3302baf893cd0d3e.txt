commit 810040be05ca612e18ab8a9f3302baf893cd0d3e
Author: Peter Sprygada <privateip@users.noreply.github.com>
Date:   Thu Oct 13 08:21:33 2016 -0400

    fixes issue with collecting all filesystems in ios (#5248)
    
    earlier versions of ios do not provide the all-filesystems argument.  This
    fix will now only report on the flash filesystem for ios_facts
    
    fixes #4712

diff --git a/lib/ansible/modules/network/ios/ios_facts.py b/lib/ansible/modules/network/ios/ios_facts.py
index 699637d9c0..c1516cec4e 100644
--- a/lib/ansible/modules/network/ios/ios_facts.py
+++ b/lib/ansible/modules/network/ios/ios_facts.py
@@ -195,12 +195,12 @@ class Default(FactsBase):
 class Hardware(FactsBase):
 
     def commands(self):
-        add_command(self.runner, 'dir all-filesystems | include Directory')
+        add_command(self.runner, 'dir | include Directory')
         add_command(self.runner, 'show version')
         add_command(self.runner, 'show memory statistics | include Processor')
 
     def populate(self):
-        data = self.runner.get_command('dir all-filesystems | include Directory')
+        data = self.runner.get_command('dir | include Directory')
         self.facts['filesystems'] = self.parse_filesystems(data)
 
         data = self.runner.get_command('show memory statistics | include Processor')
