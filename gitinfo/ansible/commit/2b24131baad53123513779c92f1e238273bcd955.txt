commit 2b24131baad53123513779c92f1e238273bcd955
Author: Matthew Johnson <mjjohnson33@gmail.com>
Date:   Wed Sep 12 20:07:02 2012 -0400

    fetch the git repo before trying to find a playbook

diff --git a/bin/ansible-pull b/bin/ansible-pull
index 6268bf0d02..284139f043 100755
--- a/bin/ansible-pull
+++ b/bin/ansible-pull
@@ -78,6 +78,13 @@ def main(args):
     now = datetime.datetime.now()
     print now.strftime("ansible-pull_started: %Y%m%d-%H%M-%S"), "\n"
 
+    git_opts = "repo=%s dest=%s version=%s" % (options.url, options.dest, options.checkout)
+    cmd = 'ansible all -c local -m git -a "%s"' % git_opts
+    print "cmd=%s" % cmd, "\n"
+    rc = _run(cmd)
+    if rc != 0:
+        return rc
+
     hostname = "%s.yml" % platform.node()
 
     if not args:
@@ -117,14 +124,6 @@ def main(args):
 
     print
 
-    git_opts = "repo=%s dest=%s version=%s" % (options.url, options.dest, options.checkout)
-    cmd = 'ansible all -c local -m git -a "%s"' % git_opts
-    print "cmd=%s" % cmd, "\n"
-    rc = _run(cmd)
-    if rc != 0:
-        return rc
-
-
     cmd = 'ansible-playbook -c local %s' % playbook
     print "cmd=%s" % cmd
     os.chdir(options.dest)
