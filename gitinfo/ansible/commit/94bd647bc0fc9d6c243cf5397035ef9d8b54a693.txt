commit 94bd647bc0fc9d6c243cf5397035ef9d8b54a693
Author: ≈Åukasz Kostka <luqasz@users.noreply.github.com>
Date:   Thu Apr 13 20:27:48 2017 +0200

    Fix alarm action comparison (#23523)
    
    This fixes issue when list from module contains more than one element.
    Ansible and/or boto may put same elements in list in different order,
    thus resulting task as changed.
    
    Fixes #3310

diff --git a/lib/ansible/modules/cloud/amazon/ec2_metric_alarm.py b/lib/ansible/modules/cloud/amazon/ec2_metric_alarm.py
index 2949c57630..5c23f5f734 100644
--- a/lib/ansible/modules/cloud/amazon/ec2_metric_alarm.py
+++ b/lib/ansible/modules/cloud/amazon/ec2_metric_alarm.py
@@ -225,7 +225,9 @@ def create_metric_alarm(connection, module):
 
         for attr in ('alarm_actions','insufficient_data_actions','ok_actions'):
             action = module.params.get(attr) or []
-            if getattr(alarm, attr) != action:
+            # Boto and/or ansible may provide same elements in lists but in different order.
+            # Compare on sets since they do not need any order.
+            if set(getattr(alarm, attr)) != set(action):
                 changed = True
                 setattr(alarm, attr, module.params.get(attr))
 
