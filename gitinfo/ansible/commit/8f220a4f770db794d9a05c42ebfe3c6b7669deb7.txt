commit 8f220a4f770db794d9a05c42ebfe3c6b7669deb7
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Sun Sep 2 12:34:28 2012 -0400

    Always pipe stderr in the setup module to avoid JSON interference.

diff --git a/library/setup b/library/setup
index 005919157b..89231a1b22 100755
--- a/library/setup
+++ b/library/setup
@@ -461,7 +461,7 @@ class LinuxNetwork(Network):
         )
         interface = dict(v4 = {}, v6 = {})
         for v in 'v4', 'v6':
-            output = subprocess.Popen(command[v], stdout=subprocess.PIPE).communicate()[0]
+            output = subprocess.Popen(command[v], stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate()[0]
             if not output:
                 # v6 routing may result in 
                 #   RTNETLINK answers: Invalid argument
@@ -484,7 +484,7 @@ class LinuxNetwork(Network):
             all_ipv4_addresses = [],
             all_ipv6_addresses = [],
         )
-        output = subprocess.Popen([ip_path, 'addr', 'show'], stdout=subprocess.PIPE).communicate()[0]
+        output = subprocess.Popen([ip_path, 'addr', 'show'], stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate()[0]
         for line in output.split('\n'):
             if line:
                 words = line.split()
