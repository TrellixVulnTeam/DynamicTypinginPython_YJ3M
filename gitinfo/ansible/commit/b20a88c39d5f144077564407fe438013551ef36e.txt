commit b20a88c39d5f144077564407fe438013551ef36e
Author: Zim Kalinowski <zikalino@microsoft.com>
Date:   Tue May 15 05:01:08 2018 +0800

    fix problem with documentation and param definition difference (#40067)
    
    * fix problem with documentation and param definition difference
    
    * removed some E324 from ignore.txt
    
    * fixed mistake
    
    * remove one more E324
    
    * removed function app
    
    * fixing append tags
    
    * leaving append tags for later

diff --git a/lib/ansible/module_utils/azure_rm_common.py b/lib/ansible/module_utils/azure_rm_common.py
index 8cf3a3cbf0..0546e87887 100644
--- a/lib/ansible/module_utils/azure_rm_common.py
+++ b/lib/ansible/module_utils/azure_rm_common.py
@@ -23,7 +23,8 @@ except ImportError:
 AZURE_COMMON_ARGS = dict(
     auth_source=dict(
         type='str',
-        choices=['auto', 'cli', 'env', 'credential_file', 'msi']
+        choices=['auto', 'cli', 'env', 'credential_file', 'msi'],
+        default='auto'
     ),
     profile=dict(type='str'),
     subscription_id=dict(type='str', no_log=True),
@@ -32,7 +33,7 @@ AZURE_COMMON_ARGS = dict(
     tenant=dict(type='str', no_log=True),
     ad_user=dict(type='str', no_log=True),
     password=dict(type='str', no_log=True),
-    cloud_environment=dict(type='str'),
+    cloud_environment=dict(type='str', default='AzureCloud'),
     cert_validation_mode=dict(type='str', choices=['validate', 'ignore']),
     api_profile=dict(type='str', default='latest')
     # debug=dict(type='bool', default=False),
diff --git a/test/sanity/validate-modules/ignore.txt b/test/sanity/validate-modules/ignore.txt
index 5408345f8b..4d88f65e69 100644
--- a/test/sanity/validate-modules/ignore.txt
+++ b/test/sanity/validate-modules/ignore.txt
@@ -150,7 +150,6 @@ lib/ansible/modules/cloud/azure/azure_rm_acs.py E325
 lib/ansible/modules/cloud/azure/azure_rm_acs.py E326
 lib/ansible/modules/cloud/azure/azure_rm_availabilityset.py E324
 lib/ansible/modules/cloud/azure/azure_rm_availabilityset_facts.py E322
-lib/ansible/modules/cloud/azure/azure_rm_availabilityset_facts.py E324
 lib/ansible/modules/cloud/azure/azure_rm_containerinstance.py E324
 lib/ansible/modules/cloud/azure/azure_rm_containerregistry.py E324
 lib/ansible/modules/cloud/azure/azure_rm_deployment.py E322
@@ -162,18 +161,10 @@ lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset.py E325
 lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset_facts.py E322
 lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset_facts.py E324
 lib/ansible/modules/cloud/azure/azure_rm_dnsrecordset_facts.py E325
-lib/ansible/modules/cloud/azure/azure_rm_dnszone.py E324
-lib/ansible/modules/cloud/azure/azure_rm_dnszone_facts.py E324
 lib/ansible/modules/cloud/azure/azure_rm_functionapp.py E322
 lib/ansible/modules/cloud/azure/azure_rm_functionapp.py E324
 lib/ansible/modules/cloud/azure/azure_rm_functionapp.py E325
-lib/ansible/modules/cloud/azure/azure_rm_functionapp_facts.py E324
-lib/ansible/modules/cloud/azure/azure_rm_image.py E324
-lib/ansible/modules/cloud/azure/azure_rm_keyvault.py E324
-lib/ansible/modules/cloud/azure/azure_rm_keyvaultkey.py E324
-lib/ansible/modules/cloud/azure/azure_rm_keyvaultsecret.py E324
 lib/ansible/modules/cloud/azure/azure_rm_loadbalancer.py E324
-lib/ansible/modules/cloud/azure/azure_rm_loadbalancer_facts.py E324
 lib/ansible/modules/cloud/azure/azure_rm_managed_disk.py E324
 lib/ansible/modules/cloud/azure/azure_rm_managed_disk_facts.py E322
 lib/ansible/modules/cloud/azure/azure_rm_managed_disk_facts.py E324
@@ -186,7 +177,6 @@ lib/ansible/modules/cloud/azure/azure_rm_mysqlserver.py E322
 lib/ansible/modules/cloud/azure/azure_rm_mysqlserver.py E324
 lib/ansible/modules/cloud/azure/azure_rm_mysqlserver.py E326
 lib/ansible/modules/cloud/azure/azure_rm_networkinterface.py E324
-lib/ansible/modules/cloud/azure/azure_rm_networkinterface_facts.py E324
 lib/ansible/modules/cloud/azure/azure_rm_postgresqldatabase.py E322
 lib/ansible/modules/cloud/azure/azure_rm_postgresqldatabase.py E324
 lib/ansible/modules/cloud/azure/azure_rm_postgresqldatabase.py E326
@@ -195,12 +185,7 @@ lib/ansible/modules/cloud/azure/azure_rm_postgresqlserver.py E324
 lib/ansible/modules/cloud/azure/azure_rm_postgresqlserver.py E326
 lib/ansible/modules/cloud/azure/azure_rm_publicipaddress.py E322
 lib/ansible/modules/cloud/azure/azure_rm_publicipaddress.py E324
-lib/ansible/modules/cloud/azure/azure_rm_publicipaddress_facts.py E324
-lib/ansible/modules/cloud/azure/azure_rm_resourcegroup.py E324
-lib/ansible/modules/cloud/azure/azure_rm_resourcegroup_facts.py E324
 lib/ansible/modules/cloud/azure/azure_rm_securitygroup.py E324
-lib/ansible/modules/cloud/azure/azure_rm_securitygroup_facts.py E324
-lib/ansible/modules/cloud/azure/azure_rm_sqldatabase.py E324
 lib/ansible/modules/cloud/azure/azure_rm_sqlserver.py E322
 lib/ansible/modules/cloud/azure/azure_rm_sqlserver.py E324
 lib/ansible/modules/cloud/azure/azure_rm_sqlserver.py E326
@@ -210,9 +195,7 @@ lib/ansible/modules/cloud/azure/azure_rm_sqlserver_facts.py E325
 lib/ansible/modules/cloud/azure/azure_rm_storageaccount.py E322
 lib/ansible/modules/cloud/azure/azure_rm_storageaccount.py E324
 lib/ansible/modules/cloud/azure/azure_rm_storageaccount.py E325
-lib/ansible/modules/cloud/azure/azure_rm_storageaccount_facts.py E324
 lib/ansible/modules/cloud/azure/azure_rm_storageblob.py E323
-lib/ansible/modules/cloud/azure/azure_rm_storageblob.py E324
 lib/ansible/modules/cloud/azure/azure_rm_subnet.py E322
 lib/ansible/modules/cloud/azure/azure_rm_subnet.py E324
 lib/ansible/modules/cloud/azure/azure_rm_subnet.py E325
@@ -225,14 +208,12 @@ lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset.py E322
 lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset.py E324
 lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset.py E325
 lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset_facts.py E322
-lib/ansible/modules/cloud/azure/azure_rm_virtualmachine_scaleset_facts.py E324
 lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py E322
 lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py E323
 lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py E324
 lib/ansible/modules/cloud/azure/azure_rm_virtualmachineimage_facts.py E325
 lib/ansible/modules/cloud/azure/azure_rm_virtualnetwork.py E322
 lib/ansible/modules/cloud/azure/azure_rm_virtualnetwork.py E324
-lib/ansible/modules/cloud/azure/azure_rm_virtualnetwork_facts.py E324
 lib/ansible/modules/cloud/centurylink/clc_alert_policy.py E317
 lib/ansible/modules/cloud/centurylink/clc_firewall_policy.py E317
 lib/ansible/modules/cloud/centurylink/clc_firewall_policy.py E324
