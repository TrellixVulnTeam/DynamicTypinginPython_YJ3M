commit f76043f40423466e18410e3f77426c075e2cb84e
Author: Toshaan Bharvani <tab@toshaan.com>
Date:   Fri Jun 7 16:55:33 2013 +0200

    changed get_mount_facts to ignore mount types 'none'

diff --git a/library/system/setup b/library/system/setup
index 274fb469ee..0d48c015be 100644
--- a/library/system/setup
+++ b/library/system/setup
@@ -547,16 +547,17 @@ class LinuxHardware(Hardware):
         for line in mtab.split('\n'):
             if line.startswith('/'):
                 fields = line.rstrip('\n').split()
-                statvfs_result = os.statvfs(fields[1])
-                self.facts['mounts'].append(
-                    {'mount': fields[1],
-                     'device':fields[0],
-                     'fstype': fields[2],
-                     'options': fields[3],
-                     # statvfs data
-                     'size_total': statvfs_result.f_bsize * statvfs_result.f_blocks,
-                     'size_available': statvfs_result.f_bsize * (statvfs_result.f_bavail),
-                     })
+                if(fields[2] != 'none'):
+                    statvfs_result = os.statvfs(fields[1])
+                    self.facts['mounts'].append(
+                        {'mount': fields[1],
+                         'device':fields[0],
+                         'fstype': fields[2],
+                         'options': fields[3],
+                         # statvfs data
+                         'size_total': statvfs_result.f_bsize * statvfs_result.f_blocks,
+                         'size_available': statvfs_result.f_bsize * (statvfs_result.f_bavail),
+                         })
 
     def get_device_facts(self):
         self.facts['devices'] = {}
