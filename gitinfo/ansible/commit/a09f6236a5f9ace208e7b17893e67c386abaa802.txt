commit a09f6236a5f9ace208e7b17893e67c386abaa802
Author: Brian Coca <bcoca@ansible.com>
Date:   Fri Jul 17 08:55:22 2015 -0400

    adapated to v2

diff --git a/lib/ansible/plugins/callback/profile_tasks.py b/lib/ansible/plugins/callback/profile_tasks.py
index 58dbdb16ec..90ee25d3a2 100644
--- a/lib/ansible/plugins/callback/profile_tasks.py
+++ b/lib/ansible/plugins/callback/profile_tasks.py
@@ -20,13 +20,11 @@
 
 import time
 
-from ansible.callbacks import display
-
+from ansible.plugins.callback import CallbackBase
 
 # define start time
 t0 = tn = time.time()
 
-
 def secondsToStr(t):
     # http://bytes.com/topic/python/answers/635958-handy-short-cut-formatting-elapsed-time-floating-point-seconds
     rediv = lambda ll, b: list(divmod(ll[0], b)) + ll[1:]
@@ -59,12 +57,15 @@ def tasktime():
     tn = time.time()
 
 
-class CallbackModule(object):
+class CallbackModule(CallbackBase):
 
-    def __init__(self):
+    def __init__(self, display):
         self.stats = {}
         self.current = None
 
+        super(CallbackModule, self).__init__(display)
+
+
     def playbook_on_task_start(self, name, is_conditional):
         """
         Logs the start of each task
@@ -97,10 +98,9 @@ class CallbackModule(object):
 
         # Print the timings
         for name, elapsed in results:
-            print(
+            self.display.display(
                 "{0:-<70}{1:->9}".format(
                     '{0} '.format(name),
                     ' {0:.02f}s'.format(elapsed),
                 )
             )
-        print ''
