commit f7d6b2a7e8f2edd0078e83630e37d2a58e32d8dc
Author: Ernst Kuschke <ernstk@users.noreply.github.com>
Date:   Wed May 20 16:34:21 2015 +0200

    Allow any custom chocolatey source
    
    This is to allow for a local source (for instance in the form of artifactory)

diff --git a/lib/ansible/modules/extras/windows/win_chocolatey.ps1 b/lib/ansible/modules/extras/windows/win_chocolatey.ps1
index 22e0d83e77..de42434da7 100644
--- a/lib/ansible/modules/extras/windows/win_chocolatey.ps1
+++ b/lib/ansible/modules/extras/windows/win_chocolatey.ps1
@@ -112,9 +112,9 @@ Else
 If ($params.source)
 {
     $source = $params.source.ToString().ToLower()
-    If (($source -ne "chocolatey") -and ($source -ne "webpi") -and ($source -ne "windowsfeatures") -and ($source -ne "ruby"))
+    If (($source -ne "chocolatey") -and ($source -ne "webpi") -and ($source -ne "windowsfeatures") -and ($source -ne "ruby") -and (!$source.startsWith("http://", "CurrentCultureIgnoreCase")) -and (!$source.startsWith("https://", "CurrentCultureIgnoreCase")))
     {
-        Fail-Json $result "source is $source - must be one of chocolatey, ruby, webpi or windowsfeatures."
+        Fail-Json $result "source is $source - must be one of chocolatey, ruby, webpi, windowsfeatures or a custom source url."
     }
 }
 Elseif (!$params.source)
@@ -190,6 +190,10 @@ elseif (($source -eq "windowsfeatures") -or ($source -eq "webpi") -or ($source -
 {
     $expression += " -source $source"
 }
+elseif(($source -ne $Null) -and ($source -ne ""))
+{
+    $expression += " -source $source"
+}
 
 Set-Attr $result "chocolatey command" $expression
 $op_result = invoke-expression $expression
