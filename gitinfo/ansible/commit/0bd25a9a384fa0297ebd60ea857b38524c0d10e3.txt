commit 0bd25a9a384fa0297ebd60ea857b38524c0d10e3
Author: Michael Laccetti <mlaccetti@uncharted.software>
Date:   Wed Feb 25 08:46:13 2015 -0500

    Change s3 to use connect_to_region
    
    * Allows us to use Ansible/s3 for GovCloud when accessing a pre-existing bucket

diff --git a/lib/ansible/modules/cloud/amazon/s3.py b/lib/ansible/modules/cloud/amazon/s3.py
index c91cc26236..aab86a1b4c 100644
--- a/lib/ansible/modules/cloud/amazon/s3.py
+++ b/lib/ansible/modules/cloud/amazon/s3.py
@@ -339,7 +339,8 @@ def main():
             module.fail_json(msg = str(e))
     else:
         try:
-            s3 = boto.connect_s3(aws_access_key, aws_secret_key)
+            from boto.s3.connection import OrdinaryCallingFormat
+            s3 = boto.s3.connect_to_region(location, aws_access_key_id=aws_access_key, aws_secret_access_key=aws_secret_key, is_secure=True, calling_format=OrdinaryCallingFormat())
         except boto.exception.NoAuthHandlerFound, e:
             module.fail_json(msg = str(e))
  
