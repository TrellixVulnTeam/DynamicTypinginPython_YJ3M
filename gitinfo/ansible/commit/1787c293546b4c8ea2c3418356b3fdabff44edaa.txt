commit 1787c293546b4c8ea2c3418356b3fdabff44edaa
Author: Will Thames <will@thames.id.au>
Date:   Fri Aug 1 15:58:00 2014 +1000

    Improved inventory handling when inventory does not yet exist
    
    Fixes #8324
    Improves #7667

diff --git a/bin/ansible-pull b/bin/ansible-pull
index 7e3de3aeb8..4f4da24d83 100755
--- a/bin/ansible-pull
+++ b/bin/ansible-pull
@@ -49,6 +49,7 @@ import time
 from ansible import utils
 from ansible.utils import cmd_functions
 from ansible import errors
+from ansible import inventory
 
 DEFAULT_REPO_TYPE = 'git'
 DEFAULT_PLAYBOOK = 'local.yml'
@@ -150,7 +151,9 @@ def main(args):
     now = datetime.datetime.now()
     print >>sys.stderr, now.strftime("Starting ansible-pull at %F %T")
 
-    if not options.inventory:
+    # Attempt to use the inventory passed in as an argument
+    # It might not yet have been downloaded so use localhost if note
+    if not options.inventory or not os.path.exists(options.inventory):
         inv_opts = 'localhost,'
     else:
         inv_opts = options.inventory
