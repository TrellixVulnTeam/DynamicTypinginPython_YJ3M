commit f0491b426195a2745aeabc11e41bf677ea560913
Author: Ryan Brown <sb@ryansb.com>
Date:   Mon Mar 6 17:26:02 2017 -0500

    [cloud] Fix ZeroDivisionError in ec2_elb_facts module (#22332)

diff --git a/lib/ansible/modules/cloud/amazon/ec2_elb_facts.py b/lib/ansible/modules/cloud/amazon/ec2_elb_facts.py
index bdd8a13ad0..5c075372f0 100644
--- a/lib/ansible/modules/cloud/amazon/ec2_elb_facts.py
+++ b/lib/ansible/modules/cloud/amazon/ec2_elb_facts.py
@@ -196,9 +196,13 @@ class ElbInformation(object):
             elb_info['instances_inservice_count'] = len(elb_info['instances_inservice'])
             elb_info['instances_outofservice'] = [inst.instance_id for inst in instance_health if inst.state == 'OutOfService']
             elb_info['instances_outofservice_count'] = len(elb_info['instances_outofservice'])
-            elb_info['instances_inservice_percent'] = float(elb_info['instances_inservice_count'])/(
-                float(elb_info['instances_inservice_count']) +
-                float(elb_info['instances_outofservice_count']))*100
+            try:
+                elb_info['instances_inservice_percent'] = (
+                    float(elb_info['instances_inservice_count']) /
+                    float(elb_info['instances_inservice_count'] + elb_info['instances_outofservice_count'])
+                ) * 100.
+            except ZeroDivisionError:
+                elb_info['instances_inservice_percent'] = 0.
         return elb_info
 
 
