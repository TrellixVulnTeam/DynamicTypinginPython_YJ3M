commit efc5a83f66f6b47818b8513853eca542e25d142d
Author: James Mills <j.mills@griffith.edu.au>
Date:   Mon Apr 29 10:08:24 2013 +1000

    Fixed setup module to accomodate venet interfaces (OpenVZ)

diff --git a/library/system/setup b/library/system/setup
index 23be63865e..27961e3ad6 100644
--- a/library/system/setup
+++ b/library/system/setup
@@ -1128,7 +1128,7 @@ class LinuxNetwork(Network):
                         default_ipv4['network'] = network
                         default_ipv4['macaddress'] = macaddress
                         default_ipv4['mtu'] = interfaces[device]['mtu']
-                        default_ipv4['type'] = interfaces[device]['type']
+                        default_ipv4['type'] = interfaces[device].get("type", "unknown")
                         default_ipv4['alias'] = words[-1]
 
                     if not address.startswith('127.'):
