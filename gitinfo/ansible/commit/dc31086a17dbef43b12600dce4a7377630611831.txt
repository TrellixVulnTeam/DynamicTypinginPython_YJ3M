commit dc31086a17dbef43b12600dce4a7377630611831
Author: Brian Coca <bcoca@ansible.com>
Date:   Mon Jun 15 17:12:18 2015 -0400

    added with_dict test

diff --git a/test/integration/roles/test_lookups/tasks/main.yml b/test/integration/roles/test_lookups/tasks/main.yml
index 44e8b18ccb..89f9e3f886 100644
--- a/test/integration/roles/test_lookups/tasks/main.yml
+++ b/test/integration/roles/test_lookups/tasks/main.yml
@@ -159,3 +159,13 @@
     that:
         - "test_val == known_var_value.stdout"
 
+
+- name: set with_dict
+  shell: echo "{{ item.key + '=' + item.value  }}"
+  register: keyval
+  with_dict: "{{ mydict }}"
+
+- name: compare dict return
+  assert:
+    that:
+        - "keyval.stdout == 'mykey=myval'"
