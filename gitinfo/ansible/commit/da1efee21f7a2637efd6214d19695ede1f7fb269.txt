commit da1efee21f7a2637efd6214d19695ede1f7fb269
Author: Patryk Zawadzki <patrys@room-303.com>
Date:   Wed Feb 26 13:39:03 2014 +0100

    Properly match existing security group
    
    If we don't care about `vpc_id` then neither should the code.

diff --git a/library/cloud/ec2_group b/library/cloud/ec2_group
index 34d9b16124..bbbb0fc24e 100644
--- a/library/cloud/ec2_group
+++ b/library/cloud/ec2_group
@@ -146,7 +146,7 @@ def main():
         groups[curGroup.id] = curGroup
         groups[curGroup.name] = curGroup
 
-        if curGroup.name == name and curGroup.vpc_id == vpc_id:
+        if curGroup.name == name and (vpc_id is None or curGroup.vpc_id == vpc_id):
             group = curGroup
 
     # Ensure requested group is absent
