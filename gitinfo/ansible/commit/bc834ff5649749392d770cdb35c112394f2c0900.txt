commit bc834ff5649749392d770cdb35c112394f2c0900
Author: Jason Kohles <kohles_jason@bah.com>
Date:   Wed Feb 10 12:42:44 2016 -0500

    Enable env vars for vsphere_guest
    
    This commit allows the connection information for
    the vsphere_guest module to be provided as environment
    variables, which makes it possible to use Cloud
    Credentials from Ansible Tower in playbooks that utilize
    vsphere_guest.
    
    | ENV VAR         | vsphere_guest param    |
    | --------------- | ---------------------- |
    | VMWARE_HOST     | vcenter_hostname       |
    | VMWARE_USER     | username               |
    | VMWARE_PASSWORD | password               |

diff --git a/lib/ansible/modules/cloud/vmware/vsphere_guest.py b/lib/ansible/modules/cloud/vmware/vsphere_guest.py
index 9ca2908edf..4e82cb4d93 100644
--- a/lib/ansible/modules/cloud/vmware/vsphere_guest.py
+++ b/lib/ansible/modules/cloud/vmware/vsphere_guest.py
@@ -1604,9 +1604,18 @@ def main():
 
     module = AnsibleModule(
         argument_spec=dict(
-            vcenter_hostname=dict(required=True, type='str'),
-            username=dict(required=True, type='str'),
-            password=dict(required=True, type='str', no_log=True),
+            vcenter_hostname=dict(
+                type='str',
+                default=os.environ['VMWARE_HOST']
+            ),
+            username=dict(
+                type='str',
+                default=os.environ['VMWARE_USER']
+            ),
+            password=dict(
+                type='str', no_log=True,
+                default=os.environ['VMWARE_PASSWORD']
+            ),
             state=dict(
                 required=False,
                 choices=[
