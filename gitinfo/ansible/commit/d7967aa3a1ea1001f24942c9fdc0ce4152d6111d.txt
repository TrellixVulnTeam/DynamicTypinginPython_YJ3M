commit d7967aa3a1ea1001f24942c9fdc0ce4152d6111d
Author: Baptiste DB <bathizte@gmail.com>
Date:   Wed Jan 18 23:32:17 2017 +0100

    UPD Azure_rm_common with non-blocking pull request from azure_rm.py (#20338)

diff --git a/lib/ansible/module_utils/azure_rm_common.py b/lib/ansible/module_utils/azure_rm_common.py
index 2dec4fbd4d..78ba496d5a 100644
--- a/lib/ansible/module_utils/azure_rm_common.py
+++ b/lib/ansible/module_utils/azure_rm_common.py
@@ -567,7 +567,11 @@ class AzureRMModuleBase(object):
             resource_client = self.rm_client
             resource_client.providers.register(key)
         except Exception as exc:
-            self.fail("One-time registration of {0} failed - {1}".format(key, str(exc)))
+            self.log("One-time registration of {0} failed - {1}".format(key, str(exc)))
+            self.log("You might need to register {0} using an admin account".format(key))
+            self.log(("To register a provider using the Python CLI: "
+                      "https://docs.microsoft.com/azure/azure-resource-manager/"
+                      "resource-manager-common-deployment-errors#noregisteredproviderfound"))
 
     @property
     def storage_client(self):
