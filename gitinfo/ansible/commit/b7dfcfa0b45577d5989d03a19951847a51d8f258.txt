commit b7dfcfa0b45577d5989d03a19951847a51d8f258
Author: Martin Krizek <martin.krizek@gmail.com>
Date:   Mon Jan 13 10:04:32 2020 +0100

    Check vars against Mapping in DEBUG (#66355)
    
    When ANSIBLE_DEBUG=1, vars are VarsWithSources now which is a Mapping.
    Check vars against Mapping instead of dict.

diff --git a/lib/ansible/template/__init__.py b/lib/ansible/template/__init__.py
index cda58527f7..062c4d6889 100644
--- a/lib/ansible/template/__init__.py
+++ b/lib/ansible/template/__init__.py
@@ -506,8 +506,8 @@ class Templar:
         are being changed.
         '''
 
-        if not isinstance(variables, dict):
-            raise AnsibleAssertionError("the type of 'variables' should be a dict but was a %s" % (type(variables)))
+        if not isinstance(variables, Mapping):
+            raise AnsibleAssertionError("the type of 'variables' should be a Mapping but was a %s" % (type(variables)))
         self._available_variables = variables
         self._cached_result = {}
 
