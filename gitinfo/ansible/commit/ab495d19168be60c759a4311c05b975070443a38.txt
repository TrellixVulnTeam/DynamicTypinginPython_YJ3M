commit ab495d19168be60c759a4311c05b975070443a38
Author: James Cammarata <jimi@sngx.net>
Date:   Thu Aug 28 08:21:09 2014 -0500

    Set the shell variable on the ssh connection type for accelerated mode
    
    Fixes #8799

diff --git a/lib/ansible/runner/connection_plugins/accelerate.py b/lib/ansible/runner/connection_plugins/accelerate.py
index 3f35a32548..8277d805de 100644
--- a/lib/ansible/runner/connection_plugins/accelerate.py
+++ b/lib/ansible/runner/connection_plugins/accelerate.py
@@ -80,6 +80,9 @@ class Connection(object):
                 private_key_file=private_key_file
             )
 
+        if not getattr(self.ssh, 'shell', None):
+            self.ssh.shell = utils.plugins.shell_loader.get('sh')
+
         # attempt to work around shared-memory funness
         if getattr(self.runner, 'aes_keys', None):
             utils.AES_KEYS = self.runner.aes_keys
