commit d314f1b038b3d79b4011fc6406294b92e068dcb9
Author: James Laska <jlaska@ansible.com>
Date:   Wed May 7 09:28:01 2014 -0400

    [test_apt_repository] Verify that 'python-apt' auto-installs correctly
    
    Remove 'python-apt' before testing the 'apt_repository' module.  The
    'apt_repository' module has the smarts to auto-install python-apt.  The
    integration test will now assert the correct auto-install behavior.

diff --git a/test/integration/roles/test_apt_repository/tasks/apt.yml b/test/integration/roles/test_apt_repository/tasks/apt.yml
index 7cbc9d2128..49d13bc52a 100644
--- a/test/integration/roles/test_apt_repository/tasks/apt.yml
+++ b/test/integration/roles/test_apt_repository/tasks/apt.yml
@@ -5,6 +5,19 @@
     test_ppa_spec: 'deb http://ppa.launchpad.net/menulibre-dev/devel/ubuntu {{ansible_distribution_release}} main'
     test_ppa_key: 'A7AD98A1' # http://keyserver.ubuntu.com:11371/pks/lookup?search=0xD06AAF4C11DAB86DF421421EFE6B20ECA7AD98A1&op=index
 
+# UNINSTALL 'python-apt'
+#  The `apt_repository` module has the smarts to auto-install `python-apt`.  To
+# test, we will first uninstall `python-apt`.
+- name: check python-apt with dpkg
+  shell: dpkg -s python-apt
+  register: dpkg_result
+  ignore_errors: true
+
+- name: uninstall python-apt with apt
+  apt: pkg=python-apt state=absent purge=yes
+  register: apt_result
+  when: dpkg_result|success
+
 #
 # TEST: apt_repository: repo=<name>
 #
