commit 12228301556546578f9cf161191ffed806cd8c73
Author: James Cammarata <jimi@sngx.net>
Date:   Sun Mar 13 03:19:47 2016 -0400

    Initial commit for Ubuntu 12.04 docker config for testing

diff --git a/test/utils/docker/ubuntu1204/Dockerfile b/test/utils/docker/ubuntu1204/Dockerfile
new file mode 100644
index 0000000000..289837c3f0
--- /dev/null
+++ b/test/utils/docker/ubuntu1204/Dockerfile
@@ -0,0 +1,61 @@
+FROM ubuntu:precise
+RUN apt-get clean; apt-get update -y;
+RUN apt-get install -y \
+    debianutils \
+    gawk \
+    git \
+    locales \
+    make \
+    mercurial \
+    ruby \
+    subversion \
+    sudo \
+    unzip
+
+# helpful things taken from the ubuntu-upstart Dockerfile:
+# https://github.com/tianon/dockerfiles/blob/4d24a12b54b75b3e0904d8a285900d88d3326361/sbin-init/ubuntu/upstart/14.04/Dockerfile
+ADD init-fake.conf /etc/init/fake-container-events.conf
+
+# undo some leet hax of the base image
+RUN rm /usr/sbin/policy-rc.d; \
+	rm /sbin/initctl; dpkg-divert --rename --remove /sbin/initctl
+# remove some pointless services
+RUN /usr/sbin/update-rc.d -f ondemand remove; \
+	for f in \
+		/etc/init/u*.conf \
+		/etc/init/mounted-dev.conf \
+		/etc/init/mounted-proc.conf \
+		/etc/init/mounted-run.conf \
+		/etc/init/mounted-tmp.conf \
+		/etc/init/mounted-var.conf \
+		/etc/init/hostname.conf \
+		/etc/init/networking.conf \
+		/etc/init/tty*.conf \
+		/etc/init/plymouth*.conf \
+		/etc/init/hwclock*.conf \
+		/etc/init/module*.conf\
+	; do \
+		dpkg-divert --local --rename --add "$f"; \
+	done; \
+	echo '# /lib/init/fstab: cleared out for bare-bones Docker' > /lib/init/fstab
+# end things from ubuntu-upstart Dockerfile
+
+RUN apt-get install -y \
+    python-coverage \
+    python-httplib2 \
+    python-jinja2 \
+    python-keyczar \
+    python-mock \
+    python-nose \
+    python-paramiko \
+    python-pip \
+    python-setuptools \
+    python-virtualenv \
+    python-yaml
+RUN rm /etc/apt/apt.conf.d/docker-clean
+RUN /bin/sed -i -e 's/^\(Defaults\s*requiretty\)/#--- \1/'  /etc/sudoers
+RUN mkdir /etc/ansible/
+RUN /bin/echo -e "[local]\nlocalhost ansible_connection=local" > /etc/ansible/hosts
+RUN locale-gen en_US.UTF-8
+ENV container docker
+CMD ["/sbin/init"]
diff --git a/test/utils/docker/ubuntu1204/init-fake.conf b/test/utils/docker/ubuntu1204/init-fake.conf
new file mode 100644
index 0000000000..f5db965051
--- /dev/null
+++ b/test/utils/docker/ubuntu1204/init-fake.conf
@@ -0,0 +1,13 @@
+# fake some events needed for correct startup other services
+
+description     "In-Container Upstart Fake Events"
+
+start on startup
+
+script
+	rm -rf /var/run/*.pid
+	rm -rf /var/run/network/*
+	/sbin/initctl emit stopped JOB=udevtrigger --no-wait
+	/sbin/initctl emit started JOB=udev --no-wait
+	/sbin/initctl emit runlevel RUNLEVEL=3 --no-wait
+end script
