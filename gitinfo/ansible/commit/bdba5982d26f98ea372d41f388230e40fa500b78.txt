commit bdba5982d26f98ea372d41f388230e40fa500b78
Author: Dag Wieers <dag@wieers.com>
Date:   Sat Aug 26 01:14:42 2017 +0200

    Small improvements to aci_tenant tests (#28685)

diff --git a/test/integration/targets/aci_tenant/tasks/main.yml b/test/integration/targets/aci_tenant/tasks/main.yml
index 446645cd37..a4059f8e77 100644
--- a/test/integration/targets/aci_tenant/tasks/main.yml
+++ b/test/integration/targets/aci_tenant/tasks/main.yml
@@ -8,6 +8,7 @@
     msg: 'Please define the following variables: aci_hostname, aci_username and aci_password.'
   when: aci_hostname is not defined or aci_username is not defined or aci_password is not defined
 
+
 # CLEAN ENVIRONMENT
 - name: Remove tenant
   aci_tenant: &tenant_absent
@@ -18,6 +19,7 @@
     tenant: ansible_test
     state: absent
 
+
 # ADD TENANT
 - name: Add tenant (check_mode)
   aci_tenant: &tenant_present
@@ -30,15 +32,15 @@
   check_mode: yes
   register: cm_add_tenant
 
+- name: Add tenant (normal mode)
+  aci_tenant: *tenant_present
+  register: nm_add_tenant
+
 - name: Add tenant again (check_mode)
   aci_tenant: *tenant_present
   check_mode: yes
   register: cm_add_tenant_again
 
-- name: Add tenant (normal mode)
-  aci_tenant: *tenant_present
-  register: nm_add_tenant
-
 - name: Add tenant again (normal mode)
   aci_tenant: *tenant_present
   register: nm_add_tenant_again
@@ -46,10 +48,9 @@
 - name: Verify add_tenant
   assert:
     that:
-    - cm_add_tenant.changed == true
-    - cm_add_tenant_again.changed == true
-    - nm_add_tenant.changed == true
-    - nm_add_tenant_again.changed == false
+    - cm_add_tenant.changed == nm_add_tenant.changed == true
+    - cm_add_tenant_again.changed == nm_add_tenant_again.changed == false
+
 
 # CHANGE TENANT
 - name: Change description of tenant (check_mode)
@@ -59,18 +60,18 @@
   check_mode: yes
   register: cm_add_tenant_descr
 
-- name: Change description of tenant again (check_mode)
+- name: Change description of tenant (normal mode)
   aci_tenant:
     <<: *tenant_present
     description: Ansible test tenant
-  check_mode: yes
-  register: cm_add_tenant_descr_again
+  register: nm_add_tenant_descr
 
-- name: Change description of tenant (normal mode)
+- name: Change description of tenant again (check_mode)
   aci_tenant:
     <<: *tenant_present
     description: Ansible test tenant
-  register: nm_add_tenant_descr
+  check_mode: yes
+  register: cm_add_tenant_descr_again
 
 - name: Change description of tenant again (normal mode)
   aci_tenant:
@@ -81,10 +82,9 @@
 - name: Verify add_tenant_descr
   assert:
     that:
-    - cm_add_tenant_descr.changed == true
-    - cm_add_tenant_descr_again.changed == true
-    - nm_add_tenant_descr.changed == true
-    - nm_add_tenant_descr_again.changed == false
+    - cm_add_tenant_descr.changed == nm_add_tenant_descr.changed == true
+    - cm_add_tenant_descr_again.changed == nm_add_tenant_descr_again.changed == false
+
 
 # ADD TENANT AGAIN
 - name: Add tenant again with no description (check_mode)
@@ -99,8 +99,8 @@
 - name: Verify add_tenant_again_no_descr
   assert:
     that:
-    - cm_add_tenant_again_no_descr.changed == false
-    - nm_add_tenant_again_no_descr.changed == false
+    - cm_add_tenant_again_no_descr.changed == nm_add_tenant_again_no_descr.changed == false
+
 
 # QUERY ALL TENANTS
 - name: Query all tenants (check_mode)
@@ -120,11 +120,11 @@
 - name: Verify query_all_tenants
   assert:
     that:
-    - cm_query_all_tenants.changed == false
-    - nm_query_all_tenants.changed == false
+    - cm_query_all_tenants.changed == nm_query_all_tenants.changed == false
     # NOTE: Order of tenants is not stable between calls
     #- cm_query_all_tenants == nm_query_all_tenants
 
+
 # QUERY A TENANT
 - name: Query our tenant
   aci_tenant:
@@ -142,25 +142,25 @@
 - name: Verify query_tenant
   assert:
     that:
-    - cm_query_tenant.changed == false
-    - nm_query_tenant.changed == false
+    - cm_query_tenant.changed == nm_query_tenant.changed == false
     - cm_query_tenant == nm_query_tenant
 
+
 # REMOVE TENANT
 - name: Remove tenant (check_mode)
   aci_tenant: *tenant_absent
   check_mode: yes
   register: cm_remove_tenant
 
+- name: Remove tenant (normal mode)
+  aci_tenant: *tenant_absent
+  register: nm_remove_tenant
+
 - name: Remove tenant again (check_mode)
   aci_tenant: *tenant_absent
   check_mode: yes
   register: cm_remove_tenant_again
 
-- name: Remove tenant (normal mode)
-  aci_tenant: *tenant_absent
-  register: nm_remove_tenant
-
 - name: Remove tenant again (normal mode)
   aci_tenant: *tenant_absent
   register: nm_remove_tenant_again
@@ -168,13 +168,11 @@
 - name: Verify remove_tenant
   assert:
     that:
-    - cm_remove_tenant.changed == true
-    - cm_remove_tenant_again.changed == true
-    - nm_remove_tenant.changed == true
-    - nm_remove_tenant_again.changed == false
+    - cm_remove_tenant.changed == nm_remove_tenant.changed == true
+    - cm_remove_tenant_again.changed == nm_remove_tenant_again.changed == false
+
 
 # QUERY NON-EXISTING TENANT
-# FIXME: Should this fail or return empty values ?
 - name: Query non-existing tenant (check_mode)
   aci_tenant:
     <<: *tenant_query
@@ -188,9 +186,9 @@
     tenant: ansible_test
   register: nm_query_non_tenant
 
+# TODO: Implement more tests
 - name: Verify query_non_tenant
   assert:
     that:
-    - cm_query_non_tenant.changed == false
-    - nm_query_non_tenant.changed == false
+    - cm_query_non_tenant.changed == nm_query_non_tenant.changed == false
     - cm_query_non_tenant == nm_query_non_tenant
