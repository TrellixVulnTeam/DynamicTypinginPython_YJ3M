commit b2622f6c0f1343b89796c6f2bad38391014f9a4a
Author: Yuwei Zhou <yuwzho@microsoft.com>
Date:   Mon May 20 10:15:35 2019 +0800

    Add service endpoints when creation (#56561)

diff --git a/lib/ansible/modules/cloud/azure/azure_rm_subnet.py b/lib/ansible/modules/cloud/azure/azure_rm_subnet.py
index 99c22fe488..09a56a24be 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_subnet.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_subnet.py
@@ -313,6 +313,8 @@ class AzureRMSubnet(AzureRMModuleBase):
                         subnet.network_security_group = self.network_models.NetworkSecurityGroup(id=nsg.get('id'))
                     if self.route_table:
                         subnet.route_table = self.network_models.RouteTable(id=self.route_table)
+                    if self.service_endpoints:
+                        subnet.service_endpoints = self.service_endpoints
                 else:
                     # update subnet
                     self.log('Updating subnet {0}'.format(self.name))
