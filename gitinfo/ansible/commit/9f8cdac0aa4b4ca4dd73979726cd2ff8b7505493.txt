commit 9f8cdac0aa4b4ca4dd73979726cd2ff8b7505493
Author: Yap Sok Ann <sokann@gmail.com>
Date:   Wed Oct 16 20:18:01 2013 +0800

    git: Handle network problem when running `git ls-remote`.

diff --git a/library/source_control/git b/library/source_control/git
index 569a26875b..a22c9cabdf 100644
--- a/library/source_control/git
+++ b/library/source_control/git
@@ -175,7 +175,7 @@ def get_remote_head(git_path, module, dest, version, remote):
 
 def is_remote_tag(git_path, module, dest, remote, version):
     cmd = '%s ls-remote %s -t refs/tags/%s' % (git_path, remote, version)
-    (rc, out, err) = module.run_command(cmd)
+    (rc, out, err) = module.run_command(cmd, check_rc=True)
     if version in out:
         return True
     else:
@@ -194,7 +194,7 @@ def get_branches(git_path, module, dest):
 
 def is_remote_branch(git_path, module, dest, remote, version):
     cmd = '%s ls-remote %s -h refs/heads/%s' % (git_path, remote, version)
-    (rc, out, err) = module.run_command(cmd)
+    (rc, out, err) = module.run_command(cmd, check_rc=True)
     if version in out:
         return True
     else:
