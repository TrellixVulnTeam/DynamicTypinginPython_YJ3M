commit 945909bf67e9e3737569ff9d1dea5be17b3d9a03
Author: Brian Coca <bcoca@ansible.com>
Date:   Wed Dec 17 19:55:54 2014 -0500

    update to use connect_to_region to avoid errors with china

diff --git a/lib/ansible/modules/cloud/amazon/cloudformation.py b/lib/ansible/modules/cloud/amazon/cloudformation.py
index 1c8a9d6aca..b382e3f05f 100644
--- a/lib/ansible/modules/cloud/amazon/cloudformation.py
+++ b/lib/ansible/modules/cloud/amazon/cloudformation.py
@@ -130,13 +130,6 @@ except ImportError:
     sys.exit(1)
 
 
-class Region:
-    def __init__(self, region):
-        '''connects boto to the region specified in the cloudformation template'''
-        self.name = region
-        self.endpoint = 'cloudformation.%s.amazonaws.com' % region
-
-
 def boto_exception(err):
     '''generic error message handler'''
     if hasattr(err, 'error_message'):
@@ -239,11 +232,10 @@ def main():
     stack_outputs = {}
 
     try:
-        cf_region = Region(region)
-        cfn = boto.cloudformation.connection.CloudFormationConnection(
-                  aws_access_key_id=aws_access_key, 
+        cfn = boto.cloudformation.connect_to_region(
+                  region,
+                  aws_access_key_id=aws_access_key,
                   aws_secret_access_key=aws_secret_key,
-                  region=cf_region,
               )
     except boto.exception.NoAuthHandlerFound, e:
         module.fail_json(msg=str(e))
