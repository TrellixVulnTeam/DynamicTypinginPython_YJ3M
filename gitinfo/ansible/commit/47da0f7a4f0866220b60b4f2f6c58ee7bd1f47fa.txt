commit 47da0f7a4f0866220b60b4f2f6c58ee7bd1f47fa
Author: nitzmahone <mdavis@ansible.com>
Date:   Tue May 5 10:50:39 2020 -0700

    restore jsonfile cache plugin (#69337)
    
    * restore jsonfile
    
    * update botmeta for jsonfile restoration

diff --git a/.github/BOTMETA.yml b/.github/BOTMETA.yml
index 391136422b..581fd4d6c5 100644
--- a/.github/BOTMETA.yml
+++ b/.github/BOTMETA.yml
@@ -7016,8 +7016,6 @@ files:
     migrated_to: community.general
   lib/ansible/plugins/become/sesu.py:
     migrated_to: community.general
-  lib/ansible/plugins/cache/jsonfile.py:
-    migrated_to: community.general
   lib/ansible/plugins/cache/memcached.py:
     migrated_to: community.general
   lib/ansible/plugins/cache/pickle.py:
diff --git a/lib/ansible/config/routing.yml b/lib/ansible/config/routing.yml
index 1c7ddbed5f..00347f353a 100644
--- a/lib/ansible/config/routing.yml
+++ b/lib/ansible/config/routing.yml
@@ -8183,8 +8183,6 @@ plugin_routing:
     enable:
       redirect: ansible.netcommon.enable
   cache:
-    jsonfile:
-      redirect: community.general.jsonfile
     memcached:
       redirect: community.general.memcached
     pickle:
diff --git a/lib/ansible/plugins/cache/jsonfile.py b/lib/ansible/plugins/cache/jsonfile.py
new file mode 100644
index 0000000000..7605dc4111
--- /dev/null
+++ b/lib/ansible/plugins/cache/jsonfile.py
@@ -0,0 +1,63 @@
+# (c) 2014, Brian Coca, Josh Drake, et al
+# (c) 2017 Ansible Project
+# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)
+
+# Make coding more python3-ish
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
+
+DOCUMENTATION = '''
+    cache: jsonfile
+    short_description: JSON formatted files.
+    description:
+        - This cache uses JSON formatted, per host, files saved to the filesystem.
+    version_added: "1.9"
+    author: Ansible Core (@ansible-core)
+    options:
+      _uri:
+        required: True
+        description:
+          - Path in which the cache plugin will save the JSON files
+        env:
+          - name: ANSIBLE_CACHE_PLUGIN_CONNECTION
+        ini:
+          - key: fact_caching_connection
+            section: defaults
+      _prefix:
+        description: User defined prefix to use when creating the JSON files
+        env:
+          - name: ANSIBLE_CACHE_PLUGIN_PREFIX
+        ini:
+          - key: fact_caching_prefix
+            section: defaults
+      _timeout:
+        default: 86400
+        description: Expiration timeout for the cache plugin data
+        env:
+          - name: ANSIBLE_CACHE_PLUGIN_TIMEOUT
+        ini:
+          - key: fact_caching_timeout
+            section: defaults
+        type: integer
+'''
+
+import codecs
+import json
+
+from ansible.parsing.ajson import AnsibleJSONEncoder, AnsibleJSONDecoder
+from ansible.plugins.cache import BaseFileCacheModule
+
+
+class CacheModule(BaseFileCacheModule):
+    """
+    A caching module backed by json files.
+    """
+
+    def _load(self, filepath):
+        # Valid JSON is always UTF-8 encoded.
+        with codecs.open(filepath, 'r', encoding='utf-8') as f:
+            return json.load(f, cls=AnsibleJSONDecoder)
+
+    def _dump(self, value, filepath):
+        with codecs.open(filepath, 'w', encoding='utf-8') as f:
+            f.write(json.dumps(value, cls=AnsibleJSONEncoder, sort_keys=True, indent=4))
