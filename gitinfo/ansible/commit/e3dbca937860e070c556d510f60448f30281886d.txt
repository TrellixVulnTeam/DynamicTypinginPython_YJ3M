commit e3dbca937860e070c556d510f60448f30281886d
Author: Marcus Cobden <mcobden@cisco.com>
Date:   Mon Aug 11 08:46:47 2014 +0100

    Test escaping strings with two variables

diff --git a/test/units/TestUtils.py b/test/units/TestUtils.py
index b091603626..a33e2080e7 100644
--- a/test/units/TestUtils.py
+++ b/test/units/TestUtils.py
@@ -729,6 +729,10 @@ class TestUtils(unittest.TestCase):
             ansible.utils._clean_data('this string has a {{variable}}', from_remote=True),
             'this string has a {#variable#}'
         )
+        self.assertEqual(
+            ansible.utils._clean_data('this string {{has}} two {{variables}} in it', from_remote=True),
+            'this string {#has#} two {#variables#} in it'
+        )
         self.assertEqual(
             ansible.utils._clean_data('this string has a {{variable with a\nnewline}}', from_remote=True),
             'this string has a {#variable with a\nnewline#}'
