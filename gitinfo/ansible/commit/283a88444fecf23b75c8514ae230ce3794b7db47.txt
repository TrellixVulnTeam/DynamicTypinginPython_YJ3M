commit 283a88444fecf23b75c8514ae230ce3794b7db47
Author: Pierre-Alexandre <paentraygues@hexaglobe.com>
Date:   Thu Apr 6 18:46:30 2017 +0200

    BUGFIX : using yaml hosts inventory, hosts in groups weren't added to the group 'all'

diff --git a/lib/ansible/inventory/yaml.py b/lib/ansible/inventory/yaml.py
index 2e89e8f76e..113822370d 100644
--- a/lib/ansible/inventory/yaml.py
+++ b/lib/ansible/inventory/yaml.py
@@ -71,7 +71,7 @@ class InventoryParser(object):
         # 'all' at the time it was created.
         for group in self.groups.values():
             if group.depth == 0 and group.name not in ('all', 'ungrouped'):
-                self.groups['all'].add_child_group(Group(group_name))
+                self.groups['all'].add_child_group(group)
 
     def _parse_groups(self, group, group_data):
 
