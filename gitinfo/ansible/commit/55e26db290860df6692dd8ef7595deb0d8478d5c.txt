commit 55e26db290860df6692dd8ef7595deb0d8478d5c
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Wed Feb 18 08:07:57 2015 -0800

    Support nested modules with ANSIBLE_LIBRARY env var
    
    From v1: 4c2d06d2feec0648498426e798a6dcd61cce1fa1

diff --git a/v2/ansible/plugins/__init__.py b/v2/ansible/plugins/__init__.py
index 2125cff7b8..78586372c9 100644
--- a/v2/ansible/plugins/__init__.py
+++ b/v2/ansible/plugins/__init__.py
@@ -131,7 +131,7 @@ class PluginLoader:
             configured_paths = self.config.split(os.pathsep)
             for path in configured_paths:
                 path = os.path.realpath(os.path.expanduser(path))
-                contents = glob.glob("%s/*" % path)
+                contents = glob.glob("%s/*" % path) + glob.glob("%s/*/*" % path)
                 for c in contents:
                     if os.path.isdir(c) and c not in ret:
                         ret.append(c)
