commit 4ee018e51d170fb0c0445cfd081485ef463957cb
Author: GGabriele <gabrielegerbino@gmail.com>
Date:   Sat Sep 3 00:52:37 2016 +0200

    Fix error handling

diff --git a/lib/ansible/modules/network/nxos/nxos_smu.py b/lib/ansible/modules/network/nxos/nxos_smu.py
index e7584de313..ddab9f0d2b 100644
--- a/lib/ansible/modules/network/nxos/nxos_smu.py
+++ b/lib/ansible/modules/network/nxos/nxos_smu.py
@@ -853,7 +853,8 @@ def main():
         try:
             apply_patch(module, commands)
             changed=True
-        except Exception as e:
+        except ShellError:
+            e = get_exception()
             module.fail_json(msg=str(e))
 
     module.exit_json(changed=changed,
