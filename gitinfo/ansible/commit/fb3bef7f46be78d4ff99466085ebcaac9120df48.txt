commit fb3bef7f46be78d4ff99466085ebcaac9120df48
Author: John R Barker <john@johnrbarker.com>
Date:   Mon Jan 9 17:21:04 2017 +0000

    Use inventory_hostname_short (#20054)
    
    When using AWS we have to use the full domain name in the inventory file, which
    we rather than the short name. This change avoids that ending up being
    set in the tests.

diff --git a/test/integration/targets/asa_config/tests/cli/backup.yaml b/test/integration/targets/asa_config/tests/cli/backup.yaml
index eea8a94cd3..39f53d3b5c 100644
--- a/test/integration/targets/asa_config/tests/cli/backup.yaml
+++ b/test/integration/targets/asa_config/tests/cli/backup.yaml
@@ -11,7 +11,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -36,7 +36,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/asa_config/tests/cli/toplevel.yaml b/test/integration/targets/asa_config/tests/cli/toplevel.yaml
index 870dd42b2e..c590bc781b 100644
--- a/test/integration/targets/asa_config/tests/cli/toplevel.yaml
+++ b/test/integration/targets/asa_config/tests/cli/toplevel.yaml
@@ -29,7 +29,7 @@
 
 - name: teardown
   asa_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
 
 - debug: msg="END cli/toplevel.yaml"
diff --git a/test/integration/targets/asa_config/tests/cli/toplevel_after.yaml b/test/integration/targets/asa_config/tests/cli/toplevel_after.yaml
index 3fbe745237..3bf0a35170 100644
--- a/test/integration/targets/asa_config/tests/cli/toplevel_after.yaml
+++ b/test/integration/targets/asa_config/tests/cli/toplevel_after.yaml
@@ -36,7 +36,7 @@
   asa_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
 
 - debug: msg="END cli/toplevel_after.yaml"
diff --git a/test/integration/targets/asa_config/tests/cli/toplevel_before.yaml b/test/integration/targets/asa_config/tests/cli/toplevel_before.yaml
index c326bc5f2d..4624e0df98 100644
--- a/test/integration/targets/asa_config/tests/cli/toplevel_before.yaml
+++ b/test/integration/targets/asa_config/tests/cli/toplevel_before.yaml
@@ -36,7 +36,7 @@
   asa_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
 
 - debug: msg="END cli/toplevel_before.yaml"
diff --git a/test/integration/targets/asa_config/tests/cli/toplevel_nonidempotent.yaml b/test/integration/targets/asa_config/tests/cli/toplevel_nonidempotent.yaml
index 9e8eafdcf0..314ef44164 100644
--- a/test/integration/targets/asa_config/tests/cli/toplevel_nonidempotent.yaml
+++ b/test/integration/targets/asa_config/tests/cli/toplevel_nonidempotent.yaml
@@ -32,7 +32,7 @@
 
 - name: teardown
   asa_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
 
 - debug: msg="END cli/toplevel_nonidempotent.yaml"
diff --git a/test/integration/targets/dellos10_config/tests/cli/toplevel.yaml b/test/integration/targets/dellos10_config/tests/cli/toplevel.yaml
index df5435f3f8..5cc299d173 100644
--- a/test/integration/targets/dellos10_config/tests/cli/toplevel.yaml
+++ b/test/integration/targets/dellos10_config/tests/cli/toplevel.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   dellos10_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
@@ -30,7 +30,7 @@
 
 - name: teardown
   dellos10_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/dellos10_config/tests/cli/toplevel_after.yaml b/test/integration/targets/dellos10_config/tests/cli/toplevel_after.yaml
index 57948bcfc6..3e6dbf1863 100644
--- a/test/integration/targets/dellos10_config/tests/cli/toplevel_after.yaml
+++ b/test/integration/targets/dellos10_config/tests/cli/toplevel_after.yaml
@@ -5,7 +5,7 @@
   dellos10_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   dellos10_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/dellos10_config/tests/cli/toplevel_before.yaml b/test/integration/targets/dellos10_config/tests/cli/toplevel_before.yaml
index 4e0acf604f..14768e88d4 100644
--- a/test/integration/targets/dellos10_config/tests/cli/toplevel_before.yaml
+++ b/test/integration/targets/dellos10_config/tests/cli/toplevel_before.yaml
@@ -5,7 +5,7 @@
   dellos10_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   dellos10_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/dellos10_config/tests/cli/toplevel_nonidempotent.yaml b/test/integration/targets/dellos10_config/tests/cli/toplevel_nonidempotent.yaml
index ad285718ba..120cf149bc 100644
--- a/test/integration/targets/dellos10_config/tests/cli/toplevel_nonidempotent.yaml
+++ b/test/integration/targets/dellos10_config/tests/cli/toplevel_nonidempotent.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   dellos10_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
@@ -32,7 +32,7 @@
 
 - name: teardown
   dellos10_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/dellos6_config/tests/cli/toplevel.yaml b/test/integration/targets/dellos6_config/tests/cli/toplevel.yaml
index 42ccda1b92..ecfd822df8 100644
--- a/test/integration/targets/dellos6_config/tests/cli/toplevel.yaml
+++ b/test/integration/targets/dellos6_config/tests/cli/toplevel.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   dellos6_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
@@ -30,7 +30,7 @@
 
 - name: teardown
   dellos6_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/dellos6_config/tests/cli/toplevel_after.yaml b/test/integration/targets/dellos6_config/tests/cli/toplevel_after.yaml
index c3048c1dce..bde57cb068 100644
--- a/test/integration/targets/dellos6_config/tests/cli/toplevel_after.yaml
+++ b/test/integration/targets/dellos6_config/tests/cli/toplevel_after.yaml
@@ -5,7 +5,7 @@
   dellos6_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   dellos6_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/dellos6_config/tests/cli/toplevel_before.yaml b/test/integration/targets/dellos6_config/tests/cli/toplevel_before.yaml
index 5c110da010..2142dda913 100644
--- a/test/integration/targets/dellos6_config/tests/cli/toplevel_before.yaml
+++ b/test/integration/targets/dellos6_config/tests/cli/toplevel_before.yaml
@@ -5,7 +5,7 @@
   dellos6_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   dellos6_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/dellos6_config/tests/cli/toplevel_nonidempotent.yaml b/test/integration/targets/dellos6_config/tests/cli/toplevel_nonidempotent.yaml
index 0694c836d6..3c94abef82 100644
--- a/test/integration/targets/dellos6_config/tests/cli/toplevel_nonidempotent.yaml
+++ b/test/integration/targets/dellos6_config/tests/cli/toplevel_nonidempotent.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   dellos6_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
@@ -32,7 +32,7 @@
 
 - name: teardown
   dellos6_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/dellos9_config/tests/cli/toplevel.yaml b/test/integration/targets/dellos9_config/tests/cli/toplevel.yaml
index 8ce5666356..22669a4d8f 100644
--- a/test/integration/targets/dellos9_config/tests/cli/toplevel.yaml
+++ b/test/integration/targets/dellos9_config/tests/cli/toplevel.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   dellos9_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
@@ -30,7 +30,7 @@
 
 - name: teardown
   dellos9_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/dellos9_config/tests/cli/toplevel_after.yaml b/test/integration/targets/dellos9_config/tests/cli/toplevel_after.yaml
index 9ac39e1056..6b5ee8e2c9 100644
--- a/test/integration/targets/dellos9_config/tests/cli/toplevel_after.yaml
+++ b/test/integration/targets/dellos9_config/tests/cli/toplevel_after.yaml
@@ -5,7 +5,7 @@
   dellos9_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   dellos9_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/dellos9_config/tests/cli/toplevel_before.yaml b/test/integration/targets/dellos9_config/tests/cli/toplevel_before.yaml
index 5b3390fbb3..79b01e47c1 100644
--- a/test/integration/targets/dellos9_config/tests/cli/toplevel_before.yaml
+++ b/test/integration/targets/dellos9_config/tests/cli/toplevel_before.yaml
@@ -5,7 +5,7 @@
   dellos9_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   dellos9_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/dellos9_config/tests/cli/toplevel_nonidempotent.yaml b/test/integration/targets/dellos9_config/tests/cli/toplevel_nonidempotent.yaml
index fed627bae2..142d5d7dee 100644
--- a/test/integration/targets/dellos9_config/tests/cli/toplevel_nonidempotent.yaml
+++ b/test/integration/targets/dellos9_config/tests/cli/toplevel_nonidempotent.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   dellos9_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
@@ -32,7 +32,7 @@
 
 - name: teardown
   dellos9_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/eos_config/tests/cli/backup.yaml b/test/integration/targets/eos_config/tests/cli/backup.yaml
index 282ded948e..e9f99e2456 100644
--- a/test/integration/targets/eos_config/tests/cli/backup.yaml
+++ b/test/integration/targets/eos_config/tests/cli/backup.yaml
@@ -14,7 +14,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -39,7 +39,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/eos_config/tests/cli/config.yaml b/test/integration/targets/eos_config/tests/cli/config.yaml
index d95a491a4b..46b55dc7db 100644
--- a/test/integration/targets/eos_config/tests/cli/config.yaml
+++ b/test/integration/targets/eos_config/tests/cli/config.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   eos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     match: none
     provider: "{{ cli }}"
 
@@ -39,7 +39,7 @@
 
 - name: teardown
   eos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     match: none
     provider: "{{ cli }}"
 
diff --git a/test/integration/targets/eos_config/tests/eapi/backup.yaml b/test/integration/targets/eos_config/tests/eapi/backup.yaml
index e37001ec86..ed943422b9 100644
--- a/test/integration/targets/eos_config/tests/eapi/backup.yaml
+++ b/test/integration/targets/eos_config/tests/eapi/backup.yaml
@@ -14,7 +14,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -39,7 +39,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/eos_config/tests/eapi/toplevel.yaml b/test/integration/targets/eos_config/tests/eapi/toplevel.yaml
index 4507c45adb..36383a94b3 100644
--- a/test/integration/targets/eos_config/tests/eapi/toplevel.yaml
+++ b/test/integration/targets/eos_config/tests/eapi/toplevel.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   eos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     match: none
     provider: "{{ eapi }}"
 
@@ -30,7 +30,7 @@
 
 - name: teardown
   eos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     match: none
     provider: "{{ eapi }}"
 
diff --git a/test/integration/targets/eos_config/tests/eapi/toplevel_after.yaml b/test/integration/targets/eos_config/tests/eapi/toplevel_after.yaml
index a7f69bec15..256823ccfe 100644
--- a/test/integration/targets/eos_config/tests/eapi/toplevel_after.yaml
+++ b/test/integration/targets/eos_config/tests/eapi/toplevel_after.yaml
@@ -5,7 +5,7 @@
   eos_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     match: none
     provider: "{{ eapi }}"
 
@@ -37,7 +37,7 @@
   eos_config:
     lines:
       - no snmp-server contact
-      - hostname {{ inventory_hostname }}
+      - hostname {{ inventory_hostname_short }}
     match: none
     provider: "{{ eapi }}"
 
diff --git a/test/integration/targets/eos_config/tests/eapi/toplevel_before.yaml b/test/integration/targets/eos_config/tests/eapi/toplevel_before.yaml
index 8ce04f56d7..0f1ca150f9 100644
--- a/test/integration/targets/eos_config/tests/eapi/toplevel_before.yaml
+++ b/test/integration/targets/eos_config/tests/eapi/toplevel_before.yaml
@@ -5,7 +5,7 @@
   eos_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     match: none
     provider: "{{ eapi }}"
 
@@ -37,7 +37,7 @@
   eos_config:
     lines:
       - no snmp-server contact ansible
-      - hostname {{ inventory_hostname }}
+      - hostname {{ inventory_hostname_short }}
     match: none
     provider: "{{ eapi }}"
 
diff --git a/test/integration/targets/eos_template/tests/cli/backup.yaml b/test/integration/targets/eos_template/tests/cli/backup.yaml
index c3d9491888..5088f9ede2 100644
--- a/test/integration/targets/eos_template/tests/cli/backup.yaml
+++ b/test/integration/targets/eos_template/tests/cli/backup.yaml
@@ -14,7 +14,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -39,7 +39,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/eos_template/tests/eapi/backup.yaml b/test/integration/targets/eos_template/tests/eapi/backup.yaml
index e39efb476e..4b510801d4 100644
--- a/test/integration/targets/eos_template/tests/eapi/backup.yaml
+++ b/test/integration/targets/eos_template/tests/eapi/backup.yaml
@@ -14,7 +14,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -39,7 +39,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/ios_config/tests/cli/backup.yaml b/test/integration/targets/ios_config/tests/cli/backup.yaml
index a34586a3cb..68a337adee 100644
--- a/test/integration/targets/ios_config/tests/cli/backup.yaml
+++ b/test/integration/targets/ios_config/tests/cli/backup.yaml
@@ -14,7 +14,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -39,7 +39,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/ios_config/tests/cli/toplevel.yaml b/test/integration/targets/ios_config/tests/cli/toplevel.yaml
index 13e34f2b69..59f4f50c23 100644
--- a/test/integration/targets/ios_config/tests/cli/toplevel.yaml
+++ b/test/integration/targets/ios_config/tests/cli/toplevel.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   ios_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
@@ -30,7 +30,7 @@
 
 - name: teardown
   ios_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/ios_config/tests/cli/toplevel_after.yaml b/test/integration/targets/ios_config/tests/cli/toplevel_after.yaml
index c308ecc5e7..e3182491c2 100644
--- a/test/integration/targets/ios_config/tests/cli/toplevel_after.yaml
+++ b/test/integration/targets/ios_config/tests/cli/toplevel_after.yaml
@@ -5,7 +5,7 @@
   ios_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   ios_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/ios_config/tests/cli/toplevel_before.yaml b/test/integration/targets/ios_config/tests/cli/toplevel_before.yaml
index 9707f41a0a..b459bf194c 100644
--- a/test/integration/targets/ios_config/tests/cli/toplevel_before.yaml
+++ b/test/integration/targets/ios_config/tests/cli/toplevel_before.yaml
@@ -5,7 +5,7 @@
   ios_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   ios_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/ios_config/tests/cli/toplevel_nonidempotent.yaml b/test/integration/targets/ios_config/tests/cli/toplevel_nonidempotent.yaml
index 99bac13ebb..05343549e2 100644
--- a/test/integration/targets/ios_config/tests/cli/toplevel_nonidempotent.yaml
+++ b/test/integration/targets/ios_config/tests/cli/toplevel_nonidempotent.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   ios_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
@@ -32,7 +32,7 @@
 
 - name: teardown
   ios_config:
-    lines: ['hostname {{ inventory_hostname }}']
+    lines: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/ios_template/tests/cli/backup.yaml b/test/integration/targets/ios_template/tests/cli/backup.yaml
index 87c37c9d00..df8e521d7d 100644
--- a/test/integration/targets/ios_template/tests/cli/backup.yaml
+++ b/test/integration/targets/ios_template/tests/cli/backup.yaml
@@ -12,7 +12,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -37,7 +37,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/iosxr_config/tests/cli/backup.yaml b/test/integration/targets/iosxr_config/tests/cli/backup.yaml
index 6782fd1de9..9bb43556fa 100644
--- a/test/integration/targets/iosxr_config/tests/cli/backup.yaml
+++ b/test/integration/targets/iosxr_config/tests/cli/backup.yaml
@@ -14,7 +14,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -39,7 +39,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/iosxr_config/tests/cli/toplevel.yaml b/test/integration/targets/iosxr_config/tests/cli/toplevel.yaml
index 07e645e938..078e99263e 100644
--- a/test/integration/targets/iosxr_config/tests/cli/toplevel.yaml
+++ b/test/integration/targets/iosxr_config/tests/cli/toplevel.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   iosxr_config:
-    commands: ['hostname {{ inventory_hostname }}']
+    commands: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
@@ -30,7 +30,7 @@
 
 - name: teardown
   iosxr_config:
-    commands: ['hostname {{ inventory_hostname }}']
+    commands: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/iosxr_config/tests/cli/toplevel_after.yaml b/test/integration/targets/iosxr_config/tests/cli/toplevel_after.yaml
index 3755529f84..874bbfa751 100644
--- a/test/integration/targets/iosxr_config/tests/cli/toplevel_after.yaml
+++ b/test/integration/targets/iosxr_config/tests/cli/toplevel_after.yaml
@@ -5,7 +5,7 @@
   iosxr_config:
     commands:
       - "no cdp"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   iosxr_config:
     commands:
       - "no cdp"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/iosxr_config/tests/cli/toplevel_before.yaml b/test/integration/targets/iosxr_config/tests/cli/toplevel_before.yaml
index b795417848..9915201634 100644
--- a/test/integration/targets/iosxr_config/tests/cli/toplevel_before.yaml
+++ b/test/integration/targets/iosxr_config/tests/cli/toplevel_before.yaml
@@ -5,7 +5,7 @@
   iosxr_config:
     commands:
       - "no cdp"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   iosxr_config:
     commands:
       - "no cdp"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/iosxr_config/tests/cli/toplevel_nonidempotent.yaml b/test/integration/targets/iosxr_config/tests/cli/toplevel_nonidempotent.yaml
index 227509e300..b72bf0cf88 100644
--- a/test/integration/targets/iosxr_config/tests/cli/toplevel_nonidempotent.yaml
+++ b/test/integration/targets/iosxr_config/tests/cli/toplevel_nonidempotent.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   iosxr_config:
-    commands: ['hostname {{ inventory_hostname }}']
+    commands: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
@@ -32,7 +32,7 @@
 
 - name: teardown
   iosxr_config:
-    commands: ['hostname {{ inventory_hostname }}']
+    commands: ['hostname {{ inventory_hostname_short }}']
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/iosxr_template/templates/basic/config.j2 b/test/integration/targets/iosxr_template/templates/basic/config.j2
index 7c9c4f7e63..10d8806d1b 100644
--- a/test/integration/targets/iosxr_template/templates/basic/config.j2
+++ b/test/integration/targets/iosxr_template/templates/basic/config.j2
@@ -1,4 +1,4 @@
-hostname {{ inventory_hostname }}
+hostname {{ inventory_hostname_short }}
 !
 interface Loopback999
    description this is a test
diff --git a/test/integration/targets/iosxr_template/tests/cli/backup.yaml b/test/integration/targets/iosxr_template/tests/cli/backup.yaml
index 4ef1ab01b0..38a8034e70 100644
--- a/test/integration/targets/iosxr_template/tests/cli/backup.yaml
+++ b/test/integration/targets/iosxr_template/tests/cli/backup.yaml
@@ -12,7 +12,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -37,7 +37,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/junos_config/tests/netconf/backup.yaml b/test/integration/targets/junos_config/tests/netconf/backup.yaml
index 58975df5d1..cb32ea034f 100644
--- a/test/integration/targets/junos_config/tests/netconf/backup.yaml
+++ b/test/integration/targets/junos_config/tests/netconf/backup.yaml
@@ -4,14 +4,14 @@
 - name: setup
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
       - delete interfaces lo0
     provider: "{{ netconf }}"
 
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -36,7 +36,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/junos_config/tests/netconf/invalid.yaml b/test/integration/targets/junos_config/tests/netconf/invalid.yaml
index d9b9d86593..c1f12e8c7e 100644
--- a/test/integration/targets/junos_config/tests/netconf/invalid.yaml
+++ b/test/integration/targets/junos_config/tests/netconf/invalid.yaml
@@ -16,7 +16,7 @@
 - name: configure multiple invalid command
   junos_config:
     lines:
-      - 'set system host-name {{ inventory_hostname }}'
+      - 'set system host-name {{ inventory_hostname_short }}'
       - 'set system foo'
     provider: "{{ netconf }}"
   register: result
diff --git a/test/integration/targets/junos_config/tests/netconf/multiple.yaml b/test/integration/targets/junos_config/tests/netconf/multiple.yaml
index 69e4592eba..25c260d406 100644
--- a/test/integration/targets/junos_config/tests/netconf/multiple.yaml
+++ b/test/integration/targets/junos_config/tests/netconf/multiple.yaml
@@ -4,7 +4,7 @@
 - name: setup
   junos_config:
     lines:
-      - "set system host-name {{ inventory_hostname }}"
+      - "set system host-name {{ inventory_hostname_short }}"
       - "delete interfaces lo0"
     provider: "{{ netconf }}"
   register: test
@@ -12,7 +12,7 @@
 - name: configure multiple commands
   junos_config:
     lines:
-      - 'set system host-name {{ inventory_hostname }}'
+      - 'set system host-name {{ inventory_hostname_short }}'
       - 'set interfaces lo0 unit 0 family inet address 1.1.1.1/32'
     provider: "{{ netconf }}"
   register: result
@@ -28,7 +28,7 @@
 - name: check multiple commands idempotent
   junos_config:
     lines:
-      - 'set system host-name {{ inventory_hostname }}'
+      - 'set system host-name {{ inventory_hostname_short }}'
       - 'set interfaces lo0 unit 0 family inet address 1.1.1.1/32'
     provider: "{{ netconf }}"
   register: result
@@ -41,7 +41,7 @@
 - name: teardown
   junos_config:
     lines:
-      - "set system host-name {{ inventory_hostname }}"
+      - "set system host-name {{ inventory_hostname_short }}"
       - "delete interfaces lo0"
     provider: "{{ netconf }}"
   register: test
diff --git a/test/integration/targets/junos_config/tests/netconf/single.yaml b/test/integration/targets/junos_config/tests/netconf/single.yaml
index f0d78c71fa..879338732f 100644
--- a/test/integration/targets/junos_config/tests/netconf/single.yaml
+++ b/test/integration/targets/junos_config/tests/netconf/single.yaml
@@ -5,7 +5,7 @@
 - name: setup
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
     provider: "{{ netconf }}"
 
 - name: configure single command
@@ -34,7 +34,7 @@
 - name: teardown
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
     provider: "{{ netconf }}"
 
 
diff --git a/test/integration/targets/junos_config/tests/netconf/src_basic.yaml b/test/integration/targets/junos_config/tests/netconf/src_basic.yaml
index 4508abcf9a..fdf0cd3b23 100644
--- a/test/integration/targets/junos_config/tests/netconf/src_basic.yaml
+++ b/test/integration/targets/junos_config/tests/netconf/src_basic.yaml
@@ -4,7 +4,7 @@
 - name: setup
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
       - delete interfaces lo0
     provider: "{{ netconf }}"
 
diff --git a/test/integration/targets/junos_netconf/tests/cli/changeport.yaml b/test/integration/targets/junos_netconf/tests/cli/changeport.yaml
index a2fc25a27e..3051a30ad6 100644
--- a/test/integration/targets/junos_netconf/tests/cli/changeport.yaml
+++ b/test/integration/targets/junos_netconf/tests/cli/changeport.yaml
@@ -35,7 +35,7 @@
 - name: Ensure we can communicate over 8080
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
     provider: "{{ netconf }}"
     port: 8080
 
@@ -43,7 +43,7 @@
 - name: Ensure we can NOT communicate over default port
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
     provider: "{{ netconf }}"
   register: result
   ignore_errors: true
@@ -62,7 +62,7 @@
 - name: Ensure we can communicate over netconf
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
     provider: "{{ netconf }}"
 
 - debug: msg="END netconf/changeport.yaml"
diff --git a/test/integration/targets/junos_netconf/tests/cli/netconf.yaml b/test/integration/targets/junos_netconf/tests/cli/netconf.yaml
index 3e03eb74a2..c01f21c19b 100644
--- a/test/integration/targets/junos_netconf/tests/cli/netconf.yaml
+++ b/test/integration/targets/junos_netconf/tests/cli/netconf.yaml
@@ -23,7 +23,7 @@
 - name: Ensure we can communicate over netconf
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
     provider: "{{ netconf }}"
 
 # Disable netconf
@@ -52,7 +52,7 @@
 - name: Ensure we can NOT talk via netconf
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
     provider: "{{ netconf }}"
   register: result
   ignore_errors: true
diff --git a/test/integration/targets/junos_template/tests/netconf/backup.yaml b/test/integration/targets/junos_template/tests/netconf/backup.yaml
index 85231660ed..8773d0f686 100644
--- a/test/integration/targets/junos_template/tests/netconf/backup.yaml
+++ b/test/integration/targets/junos_template/tests/netconf/backup.yaml
@@ -4,14 +4,14 @@
 - name: setup
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
       - delete interfaces lo0
     provider: "{{ netconf }}"
 
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -36,7 +36,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -47,7 +47,7 @@
 - name: teardown
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
       - delete interfaces lo0
     provider: "{{ netconf }}"
 
diff --git a/test/integration/targets/junos_template/tests/netconf/basic.yaml b/test/integration/targets/junos_template/tests/netconf/basic.yaml
index 41320efb41..74a84f791d 100644
--- a/test/integration/targets/junos_template/tests/netconf/basic.yaml
+++ b/test/integration/targets/junos_template/tests/netconf/basic.yaml
@@ -4,7 +4,7 @@
 - name: setup
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
       - delete interfaces lo0
     provider: "{{ netconf }}"
 
@@ -32,7 +32,7 @@
 - name: teardown
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
       - delete interfaces lo0
     provider: "{{ netconf }}"
 
diff --git a/test/integration/targets/junos_template/tests/netconf/force.yaml b/test/integration/targets/junos_template/tests/netconf/force.yaml
index c65686481b..05496b143e 100644
--- a/test/integration/targets/junos_template/tests/netconf/force.yaml
+++ b/test/integration/targets/junos_template/tests/netconf/force.yaml
@@ -4,7 +4,7 @@
 - name: setup
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
       - delete interfaces lo0
     provider: "{{ netconf }}"
 
@@ -35,7 +35,7 @@
 - name: teardown
   junos_config:
     lines:
-      - set system host-name {{ inventory_hostname }}
+      - set system host-name {{ inventory_hostname_short }}
       - delete interfaces lo0
     action: replace
     provider: "{{ netconf }}"
diff --git a/test/integration/targets/nxos_config/tests/cli/backup.yaml b/test/integration/targets/nxos_config/tests/cli/backup.yaml
index e3f9e14d17..7670923fb4 100644
--- a/test/integration/targets/nxos_config/tests/cli/backup.yaml
+++ b/test/integration/targets/nxos_config/tests/cli/backup.yaml
@@ -14,7 +14,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -39,7 +39,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/nxos_config/tests/cli/toplevel.yaml b/test/integration/targets/nxos_config/tests/cli/toplevel.yaml
index f66e41e68d..f495c51d52 100644
--- a/test/integration/targets/nxos_config/tests/cli/toplevel.yaml
+++ b/test/integration/targets/nxos_config/tests/cli/toplevel.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   nxos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     provider: "{{ cli }}"
     match: none
 
@@ -30,7 +30,7 @@
 
 - name: teardown
   nxos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/nxos_config/tests/cli/toplevel_after.yaml b/test/integration/targets/nxos_config/tests/cli/toplevel_after.yaml
index d8e5dc549a..393b686fc0 100644
--- a/test/integration/targets/nxos_config/tests/cli/toplevel_after.yaml
+++ b/test/integration/targets/nxos_config/tests/cli/toplevel_after.yaml
@@ -5,7 +5,7 @@
   nxos_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   nxos_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/nxos_config/tests/cli/toplevel_before.yaml b/test/integration/targets/nxos_config/tests/cli/toplevel_before.yaml
index ef64b7ce9d..acec416683 100644
--- a/test/integration/targets/nxos_config/tests/cli/toplevel_before.yaml
+++ b/test/integration/targets/nxos_config/tests/cli/toplevel_before.yaml
@@ -5,7 +5,7 @@
   nxos_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
@@ -37,7 +37,7 @@
   nxos_config:
     lines:
       - "no snmp-server contact"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/nxos_config/tests/cli/toplevel_nonidempotent.yaml b/test/integration/targets/nxos_config/tests/cli/toplevel_nonidempotent.yaml
index 049eac7b6c..1fd3bd9d77 100644
--- a/test/integration/targets/nxos_config/tests/cli/toplevel_nonidempotent.yaml
+++ b/test/integration/targets/nxos_config/tests/cli/toplevel_nonidempotent.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   nxos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     provider: "{{ cli }}"
     match: none
 
@@ -32,7 +32,7 @@
 
 - name: teardown
   nxos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/nxos_config/tests/nxapi/backup.yaml b/test/integration/targets/nxos_config/tests/nxapi/backup.yaml
index 9b063d0238..a33ab38413 100644
--- a/test/integration/targets/nxos_config/tests/nxapi/backup.yaml
+++ b/test/integration/targets/nxos_config/tests/nxapi/backup.yaml
@@ -14,7 +14,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -39,7 +39,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/nxos_config/tests/nxapi/toplevel.yaml b/test/integration/targets/nxos_config/tests/nxapi/toplevel.yaml
index 7485f61c3b..c88026c410 100644
--- a/test/integration/targets/nxos_config/tests/nxapi/toplevel.yaml
+++ b/test/integration/targets/nxos_config/tests/nxapi/toplevel.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   nxos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     provider: "{{ nxapi }}"
     match: none
 
@@ -30,7 +30,7 @@
 
 - name: teardown
   nxos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     provider: "{{ nxapi }}"
     match: none
 
diff --git a/test/integration/targets/nxos_config/tests/nxapi/toplevel_after.yaml b/test/integration/targets/nxos_config/tests/nxapi/toplevel_after.yaml
index 05b251edc1..6eeeeafd2c 100644
--- a/test/integration/targets/nxos_config/tests/nxapi/toplevel_after.yaml
+++ b/test/integration/targets/nxos_config/tests/nxapi/toplevel_after.yaml
@@ -5,7 +5,7 @@
   nxos_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ nxapi }}"
     match: none
 
@@ -37,7 +37,7 @@
   nxos_config:
     lines:
       - "no snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ nxapi }}"
     match: none
 
diff --git a/test/integration/targets/nxos_config/tests/nxapi/toplevel_before.yaml b/test/integration/targets/nxos_config/tests/nxapi/toplevel_before.yaml
index 7f2ff373bf..17e3390d70 100644
--- a/test/integration/targets/nxos_config/tests/nxapi/toplevel_before.yaml
+++ b/test/integration/targets/nxos_config/tests/nxapi/toplevel_before.yaml
@@ -5,7 +5,7 @@
   nxos_config:
     lines:
       - "snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ nxapi }}"
     match: none
 
@@ -37,7 +37,7 @@
   nxos_config:
     lines:
       - "no snmp-server contact ansible"
-      - "hostname {{ inventory_hostname }}"
+      - "hostname {{ inventory_hostname_short }}"
     provider: "{{ nxapi }}"
     match: none
 
diff --git a/test/integration/targets/nxos_config/tests/nxapi/toplevel_nonidempotent.yaml b/test/integration/targets/nxos_config/tests/nxapi/toplevel_nonidempotent.yaml
index 52089616df..7a99ac3f2a 100644
--- a/test/integration/targets/nxos_config/tests/nxapi/toplevel_nonidempotent.yaml
+++ b/test/integration/targets/nxos_config/tests/nxapi/toplevel_nonidempotent.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   nxos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     provider: "{{ nxapi }}"
     match: none
 
@@ -32,7 +32,7 @@
 
 - name: setup
   nxos_config:
-    lines: hostname {{ inventory_hostname }}
+    lines: hostname {{ inventory_hostname_short }}
     provider: "{{ nxapi }}"
     match: none
 
diff --git a/test/integration/targets/nxos_template/tests/cli/backup.yaml b/test/integration/targets/nxos_template/tests/cli/backup.yaml
index 3760dabe53..cefabe5d3d 100644
--- a/test/integration/targets/nxos_template/tests/cli/backup.yaml
+++ b/test/integration/targets/nxos_template/tests/cli/backup.yaml
@@ -14,7 +14,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -39,7 +39,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/nxos_template/tests/nxapi/backup.yaml b/test/integration/targets/nxos_template/tests/nxapi/backup.yaml
index f42f1b2fbd..4f62b180fd 100644
--- a/test/integration/targets/nxos_template/tests/nxapi/backup.yaml
+++ b/test/integration/targets/nxos_template/tests/nxapi/backup.yaml
@@ -14,7 +14,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
@@ -39,7 +39,7 @@
 - name: collect any backup files
   find:
     paths: "{{ role_path }}/backup"
-    pattern: "{{ inventory_hostname }}_config*"
+    pattern: "{{ inventory_hostname_short }}_config*"
   register: backup_files
   delegate_to: localhost
 
diff --git a/test/integration/targets/vyos_config/tests/cli/comment.yaml b/test/integration/targets/vyos_config/tests/cli/comment.yaml
index 91cc729770..56746aab83 100644
--- a/test/integration/targets/vyos_config/tests/cli/comment.yaml
+++ b/test/integration/targets/vyos_config/tests/cli/comment.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   vyos_config:
-    lines: set system host-name {{ inventory_hostname }}
+    lines: set system host-name {{ inventory_hostname_short }}
     provider: "{{ cli }}"
     match: none
 
@@ -31,7 +31,7 @@
 
 - name: teardown
   vyos_config:
-    lines: set system host-name {{ inventory_hostname }}
+    lines: set system host-name {{ inventory_hostname_short }}
     provider: "{{ cli }}"
     match: none
 
diff --git a/test/integration/targets/vyos_config/tests/cli/simple.yaml b/test/integration/targets/vyos_config/tests/cli/simple.yaml
index 957b91224d..70aea105f0 100644
--- a/test/integration/targets/vyos_config/tests/cli/simple.yaml
+++ b/test/integration/targets/vyos_config/tests/cli/simple.yaml
@@ -3,7 +3,7 @@
 
 - name: setup
   vyos_config:
-    lines: set system host-name {{ inventory_hostname }}
+    lines: set system host-name {{ inventory_hostname_short }}
     provider: "{{ cli }}"
     match: none
 
@@ -30,7 +30,7 @@
 
 - name: teardown
   vyos_config:
-    lines: set system host-name {{ inventory_hostname }}
+    lines: set system host-name {{ inventory_hostname_short }}
     provider: "{{ cli }}"
     match: none
 
