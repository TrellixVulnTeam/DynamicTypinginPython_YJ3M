commit f16933492dc96d10929dfe2158588f66b862f4e2
Author: Felix Fontein <felix@fontein.de>
Date:   Tue May 15 16:19:04 2018 +0200

    Fix problems in documentation generation (#40050)
    
    * Treat C(...) as inline literal (as opposed to interpreted text).
    
    * Making test for true and false more precise, to avoid matching 1, 1.0, etc.
    
    * The 'is sameas' test already takes care of definedness.

diff --git a/docs/bin/plugin_formatter.py b/docs/bin/plugin_formatter.py
index b1e558d0e2..e181eac409 100755
--- a/docs/bin/plugin_formatter.py
+++ b/docs/bin/plugin_formatter.py
@@ -94,7 +94,7 @@ def rst_ify(text):
         t = _MODULE.sub(r":ref:`\1 <\1_module>`", t)
         t = _LINK.sub(r"`\1 <\2>`_", t)
         t = _URL.sub(r"\1", t)
-        t = _CONST.sub(r"`\1`", t)
+        t = _CONST.sub(r"``\1``", t)
         t = _RULER.sub(r"------------", t)
     except Exception as e:
         raise AnsibleError("Could not process (%s) : %s" % (text, e))
diff --git a/docs/templates/plugin.rst.j2 b/docs/templates/plugin.rst.j2
index ac8926c3a6..421e681c57 100644
--- a/docs/templates/plugin.rst.j2
+++ b/docs/templates/plugin.rst.j2
@@ -116,12 +116,10 @@ Parameters
                 <td>
                     <div class="cell-border">
                         {# Turn boolean values in 'yes' and 'no' values #}
-                        {% if value.default is defined %}
-                            {% if value.default == true %}
-                                {% set _x = value.update({'default': 'yes'}) %}
-                            {% elif value.default == false %}
-                                {% set _x = value.update({'default': 'no'}) %}
-                            {% endif %}
+                        {% if value.default is sameas true %}
+                            {% set _x = value.update({'default': 'yes'}) %}
+                        {% elif value.default is sameas false %}
+                            {% set _x = value.update({'default': 'no'}) %}
                         {% endif %}
                         {% if value.type == 'bool' %}
                             {% set _x = value.update({'choices': ['no', 'yes']}) %}
@@ -131,9 +129,9 @@ Parameters
                             <ul><b>Choices:</b>
                                 {% for choice in value.choices %}
                                     {# Turn boolean values in 'yes' and 'no' values #}
-                                    {% if choice == true %}
+                                    {% if choice is sameas true %}
                                         {% set choice = 'yes' %}
-                                    {% elif choice == false %}
+                                    {% elif choice is sameas false %}
                                         {% set choice = 'no' %}
                                     {% endif %}
                                     {% if (value.default is string and value.default == choice) or (value.default is iterable and value.default is not string and choice in value.default) %}
