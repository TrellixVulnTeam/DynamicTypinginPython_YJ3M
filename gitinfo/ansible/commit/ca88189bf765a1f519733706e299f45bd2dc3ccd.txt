commit ca88189bf765a1f519733706e299f45bd2dc3ccd
Author: Rene Moser <mail@renemoser.net>
Date:   Sat Apr 25 18:31:58 2015 +0200

    cloudstack: add method to to get infos of API
    
    get_capabilities() allows you to get infos e.g. `cloudstackversion`
    to compare functionality of the API in your modules.

diff --git a/lib/ansible/module_utils/cloudstack.py b/lib/ansible/module_utils/cloudstack.py
index 74afc79836..48f16a1399 100644
--- a/lib/ansible/module_utils/cloudstack.py
+++ b/lib/ansible/module_utils/cloudstack.py
@@ -50,6 +50,7 @@ class AnsibleCloudStack:
         self.vm = None
         self.os_type = None
         self.hypervisor = None
+        self.capabilities = None
 
 
     def _connect(self):
@@ -235,6 +236,14 @@ class AnsibleCloudStack:
         self.module.fail_json(msg="Hypervisor '%s' not found" % hypervisor)
 
 
+    def get_capabilities(self, key=None):
+        if self.capabilities:
+            return self._get_by_key(key, self.capabilities)
+        capabilities = self.cs.listCapabilities()
+        self.capabilities = capabilities['capability']
+        return self._get_by_key(key, self.capabilities)
+
+
     def _poll_job(self, job=None, key=None):
         if 'jobid' in job:
             while True:
