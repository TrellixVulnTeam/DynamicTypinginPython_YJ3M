commit 05a7a3725b6c480557bc19e5c12ef806395c62ab
Author: Daniel Hokka Zakrisson <daniel@hozac.com>
Date:   Fri Jun 15 18:18:27 2012 +0200

    Add tests of host exclusions

diff --git a/test/TestInventory.py b/test/TestInventory.py
index a88236e75d..883af98dcd 100644
--- a/test/TestInventory.py
+++ b/test/TestInventory.py
@@ -99,6 +99,17 @@ class TestInventory(unittest.TestCase):
         print expected_hosts
         assert sorted(hosts) == sorted(expected_hosts)
 
+    def test_simple_exclude(self):
+        inventory = self.simple_inventory()
+
+        hosts = inventory.list_hosts("all:!greek")
+        expected_hosts=['jupiter', 'saturn', 'thor', 'odin', 'loki']
+        assert sorted(hosts) == sorted(expected_hosts)
+
+        hosts = inventory.list_hosts("all:!norse:!greek")
+        expected_hosts=['jupiter', 'saturn']
+        assert sorted(hosts) == sorted(expected_hosts)
+
     def test_simple_vars(self):
         inventory = self.simple_inventory()
         vars = inventory.get_variables('thor')
@@ -136,6 +147,13 @@ class TestInventory(unittest.TestCase):
         print expected
         assert vars == expected
 
+    def test_complex_exclude(self):
+        inventory = self.complex_inventory()
+
+        hosts = inventory.list_hosts("nc:!triangle:florida:!orlando")
+        expected_hosts=['rtp_a', 'rtp_b', 'rtb_c', 'miami']
+        assert sorted(hosts) == sorted(expected_hosts)
+
 
 
     ###################################################
