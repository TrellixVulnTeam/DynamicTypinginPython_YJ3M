commit 1ec9ac4b70b939d868dca0beec13ff7850fd886d
Author: Edward Marshall <ruckafella@gmail.com>
Date:   Thu Sep 8 16:41:32 2016 +0100

    Defined children for get_vm (#15904)

diff --git a/lib/ansible/module_utils/vca.py b/lib/ansible/module_utils/vca.py
index 070b2dec18..28d9fdceee 100644
--- a/lib/ansible/module_utils/vca.py
+++ b/lib/ansible/module_utils/vca.py
@@ -103,6 +103,7 @@ class VcaAnsibleModule(AnsibleModule):
 
     def get_vm(self, vapp_name, vm_name):
         vapp = self.get_vapp(vapp_name)
+        children = vapp.me.get_Children()
         vms = [vm for vm in children.get_Vm() if vm.name == vm_name]
         try:
             return vms[0]
