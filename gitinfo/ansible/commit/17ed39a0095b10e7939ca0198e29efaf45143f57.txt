commit 17ed39a0095b10e7939ca0198e29efaf45143f57
Author: Matt Clay <matt@mystile.com>
Date:   Thu Mar 14 21:52:03 2019 -0700

    Fix uri integration test uninstall of urllib3. (#53834)

diff --git a/test/integration/targets/uri/tasks/main.yml b/test/integration/targets/uri/tasks/main.yml
index 3362632cf5..3458fc437f 100644
--- a/test/integration/targets/uri/tasks/main.yml
+++ b/test/integration/targets/uri/tasks/main.yml
@@ -233,11 +233,18 @@
       - result is failed
   when: result is not skipped
 
+- name: check if urllib3 is installed as an OS package
+  package:
+    name: "{{ uri_os_packages[ansible_os_family].urllib3 }}"
+  check_mode: yes
+  when: not ansible_python.has_sslcontext and not is_ubuntu_precise|bool and uri_os_packages[ansible_os_family].urllib3|default
+  register: urllib3
+
 - name: uninstall conflicting urllib3 pip package
   pip:
     name: urllib3
     state: absent
-  when: not ansible_python.has_sslcontext and not is_ubuntu_precise|bool
+  when: not ansible_python.has_sslcontext and not is_ubuntu_precise|bool and uri_os_packages[ansible_os_family].urllib3|default and urllib3.changed
 
 - name: install OS packages that are needed for SNI on old python
   package:
diff --git a/test/integration/targets/uri/vars/main.yml b/test/integration/targets/uri/vars/main.yml
index c2cd06dce3..83a740bc77 100644
--- a/test/integration/targets/uri/vars/main.yml
+++ b/test/integration/targets/uri/vars/main.yml
@@ -1,5 +1,6 @@
 uri_os_packages:
   RedHat:
+    urllib3: python-urllib3
     step1:
       - python-pyasn1
       - pyOpenSSL
@@ -16,4 +17,4 @@ uri_os_packages:
     step2:
       - libffi-dev
       - libssl-dev
-      - python-dev
\ No newline at end of file
+      - python-dev
