commit 1e867b0b8ef31943b899ba625bf28c8d6e66b47d
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Sat Feb 14 22:25:56 2015 -0800

    Fix the to_nice_yaml filter to always return unicode strings
    
    Fixes #10243

diff --git a/lib/ansible/runner/filter_plugins/core.py b/lib/ansible/runner/filter_plugins/core.py
index e2ac36e79f..4680cf6b58 100644
--- a/lib/ansible/runner/filter_plugins/core.py
+++ b/lib/ansible/runner/filter_plugins/core.py
@@ -38,7 +38,7 @@ from distutils.version import LooseVersion, StrictVersion
 
 from ansible import errors
 from ansible.utils.hashing import md5s, checksum_s
-from ansible.utils.unicode import unicode_wrap
+from ansible.utils.unicode import unicode_wrap, to_unicode
 
 
 UUID_NAMESPACE_ANSIBLE = uuid.UUID('361E6D51-FAEC-444A-9079-341386DA8E2E')
@@ -46,7 +46,8 @@ UUID_NAMESPACE_ANSIBLE = uuid.UUID('361E6D51-FAEC-444A-9079-341386DA8E2E')
 
 def to_nice_yaml(*a, **kw):
     '''Make verbose, human readable yaml'''
-    return yaml.safe_dump(*a, indent=4, allow_unicode=True, default_flow_style=False, **kw)
+    transformed = yaml.safe_dump(*a, indent=4, allow_unicode=True, default_flow_style=False, **kw)
+    return to_unicode(transformed)
 
 def to_json(a, *args, **kw):
     ''' Convert the value to JSON '''
