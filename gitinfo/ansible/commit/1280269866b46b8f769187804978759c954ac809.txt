commit 1280269866b46b8f769187804978759c954ac809
Author: Andy Trevorah <andy@troupe.co>
Date:   Fri Feb 28 16:39:06 2014 +0000

    apt_repository: autoinstall python-apt if not available

diff --git a/library/packaging/apt_repository b/library/packaging/apt_repository
index 4587d90ba7..34cdc6f4c9 100644
--- a/library/packaging/apt_repository
+++ b/library/packaging/apt_repository
@@ -366,7 +366,13 @@ def main():
     )
 
     if not HAVE_PYTHON_APT:
-        module.fail_json(msg='Could not import python modules: apt_pkg. Please install python-apt package.')
+        try:
+            module.run_command('apt-get update && apt-get install python-apt -y -q')
+            global apt, apt_pkg
+            import apt
+            import apt_pkg
+        except:
+            module.fail_json(msg='Could not import python modules: apt, apt_pkg. Please install python-apt package.')
 
     if not HAVE_PYCURL:
         module.fail_json(msg='Could not import python modules: pycurl. Please install python-pycurl package.')
