commit 8654508cbd16268bdeb082a1f675ed90817b6b55
Author: Brian Coca <bcoca@users.noreply.github.com>
Date:   Fri May 11 14:04:08 2018 -0400

    added check mode spport to package_facts (#39801)
    
    * added check mode spport to package_facts
    
    fixes #39789
    
    * also service_facts

diff --git a/lib/ansible/modules/packaging/os/package_facts.py b/lib/ansible/modules/packaging/os/package_facts.py
index 37e8d5033b..4f7629924d 100644
--- a/lib/ansible/modules/packaging/os/package_facts.py
+++ b/lib/ansible/modules/packaging/os/package_facts.py
@@ -192,7 +192,7 @@ def apt_package_list():
 # FIXME: add more listing methods
 def main():
     global module
-    module = AnsibleModule(argument_spec=dict(manager=dict()))
+    module = AnsibleModule(argument_spec=dict(manager=dict()), supports_check_mode=True)
     manager = module.params['manager']
     packages = {}
     results = {}
diff --git a/lib/ansible/modules/system/service_facts.py b/lib/ansible/modules/system/service_facts.py
index ddf22d8670..1038569f68 100755
--- a/lib/ansible/modules/system/service_facts.py
+++ b/lib/ansible/modules/system/service_facts.py
@@ -192,7 +192,7 @@ class SystemctlScanService(BaseService):
 
 
 def main():
-    module = AnsibleModule(argument_spec=dict())
+    module = AnsibleModule(argument_spec=dict(), supports_check_mode=True)
     service_modules = (ServiceScanService, SystemctlScanService)
     all_services = {}
     incomplete_warning = False
