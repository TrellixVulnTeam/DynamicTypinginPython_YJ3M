commit f8905013cda08e6acdac4881a8cb46e94daba34d
Author: Brian Coca <bcoca@ansible.com>
Date:   Sun Jul 19 18:00:27 2015 -0400

    now executes fact search when needed

diff --git a/lib/ansible/plugins/action/package.py b/lib/ansible/plugins/action/package.py
index 6dfabf3949..fa412d45db 100644
--- a/lib/ansible/plugins/action/package.py
+++ b/lib/ansible/plugins/action/package.py
@@ -22,7 +22,7 @@ from ansible.plugins.action import ActionBase
 
 class ActionModule(ActionBase):
 
-    TRANSFERS_FILES = True
+    TRANSFERS_FILES = False
 
     def run(self, tmp=None, task_vars=dict()):
         ''' handler for package operations '''
@@ -38,10 +38,7 @@ class ActionModule(ActionBase):
                 pass # could not get it from template!
 
         if module == 'auto':
-            #FIXME: autodetect the package manager run facts module remotely to get ansible_pkg_mgr
-            #module = self._execute_module(module_name=setup, module_args={filter: 'ansible_pkg_mgr'}, task_vars=task_vars)
-            pass
-
+            module = self._execute_module(module_name=setup, module_args={filter: 'ansible_pkg_mgr'}, task_vars=task_vars)
 
         if module != 'auto':
             # run the 'package' module
