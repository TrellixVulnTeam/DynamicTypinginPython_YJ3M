commit 73a12b04a4e69248576807d148feeeb167c78d65
Author: Michael Vogt <mvo@debian.org>
Date:   Fri May 31 21:01:45 2013 +0200

    add "size_{total,free}" to the "mount" facts

diff --git a/library/system/setup b/library/system/setup
index 5e4c76c3f3..1e137e945c 100644
--- a/library/system/setup
+++ b/library/system/setup
@@ -555,7 +555,16 @@ class LinuxHardware(Hardware):
         for line in mtab.split('\n'):
             if line.startswith('/'):
                 fields = line.rstrip('\n').split()
-                self.facts['mounts'].append({'mount': fields[1], 'device':fields[0], 'fstype': fields[2], 'options': fields[3]})
+                statvfs_result = os.statvfs(fields[1])
+                self.facts['mounts'].append(
+                    {'mount': fields[1],
+                     'device':fields[0],
+                     'fstype': fields[2],
+                     'options': fields[3],
+                     # statvfs
+                     'size_total': statvfs_result.f_bsize * statvfs_result.f_blocks,
+                     'size_free': statvfs_result.f_bsize * statvfs_result.f_bfree,
+                     })
 
     def get_device_facts(self):
         self.facts['devices'] = {}
