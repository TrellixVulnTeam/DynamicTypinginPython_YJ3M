commit f4fd9d366b947ce0c8ea99c7edb7ec862575b161
Author: Ivo Senner <ivo.senner@googlemail.com>
Date:   Sun Jun 22 04:08:59 2014 +0200

    Check for empty os-release file, fixes #7885

diff --git a/lib/ansible/module_utils/facts.py b/lib/ansible/module_utils/facts.py
index a70608db69..9515bd1fff 100644
--- a/lib/ansible/module_utils/facts.py
+++ b/lib/ansible/module_utils/facts.py
@@ -266,7 +266,7 @@ class Facts(object):
             self.facts['distribution_release'] = dist[2] or 'NA'
             # Try to handle the exceptions now ...
             for (path, name) in Facts.OSDIST_DICT.items():
-                if os.path.exists(path):
+                if os.path.exists(path) and os.path.getsize(path) > 0:
                     if self.facts['distribution'] == 'Fedora':
                         pass
                     elif name == 'RedHat':
