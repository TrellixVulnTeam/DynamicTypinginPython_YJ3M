commit cfe8af493f99d99f2a74e588429f639f4773ce5e
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Sat Apr 20 09:24:59 2013 -0400

    Since using platform.node, be sure to just return the hostname component.

diff --git a/library/setup b/library/setup
index 6ea257d5a6..91982cbbb0 100644
--- a/library/setup
+++ b/library/setup
@@ -139,7 +139,7 @@ class Facts(object):
         self.facts['machine'] = platform.machine()
         self.facts['python_version'] = platform.python_version()
         self.facts['fqdn'] = socket.getfqdn()
-        self.facts['hostname'] = platform.node()
+        self.facts['hostname'] = platform.node().split('.')[0]
         self.facts['domain'] = '.'.join(self.facts['fqdn'].split('.')[1:])
         if self.facts['machine'] == 'x86_64':
             self.facts['architecture'] = self.facts['machine']
