commit 0894206467912a26fc836997257863880006a902
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Mon May 7 23:37:09 2012 -0400

    Be able to use --extra-vars to set the hosts variable

diff --git a/lib/ansible/playbook.py b/lib/ansible/playbook.py
index 6671acb7ab..68c8ea5cad 100644
--- a/lib/ansible/playbook.py
+++ b/lib/ansible/playbook.py
@@ -493,6 +493,7 @@ class PlayBook(object):
 
         # get configuration information about the pattern
         pattern = pg.get('hosts',None)
+        pattern = utils.template(pattern, self.extra_vars, {})
         name = pg.get('name', pattern)
         if isinstance(pattern, list):
             pattern = ';'.join(pattern)
