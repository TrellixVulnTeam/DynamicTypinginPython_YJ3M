commit 75a2b2ba2dd02d8a09bcb4a053c7c86fb8118295
Author: Nigel Metheringham <nigel.metheringham@jrtheatre.co.uk>
Date:   Sun Nov 4 09:47:30 2012 +0000

    Use the existing framework when running ssh_keygen

diff --git a/library/user b/library/user
index c699f8db13..7bd7c5a89f 100755
--- a/library/user
+++ b/library/user
@@ -450,9 +450,7 @@ class User(object):
         else:
             cmd.append('')
 
-        p = subprocess.Popen(cmd, shell=False, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
-        (out, err) = p.communicate()
-        rc = p.returncode
+        (rc, out, err) = self.execute_command(cmd)
         if rc == 0:
             # If the keys were successfully created, we should be able
             # to tweak ownership.
