commit 239213baee1ad03876e650cb1e0c58d6c1c39acf
Author: Gon√©ri Le Bouder <goneri@lebouder.net>
Date:   Fri Nov 22 21:17:05 2019 -0500

    vmware_guest: do not use autoselect_datastore in test (#65191)
    
    Disable the use of `autoselect_datastore` until https://github.com/ansible/ansible/issues/58541
    is fixed.

diff --git a/test/integration/targets/vmware_guest/tasks/boot_firmware_d1_c1_f0.yml b/test/integration/targets/vmware_guest/tasks/boot_firmware_d1_c1_f0.yml
index 3629cc6eee..c4de91e85d 100644
--- a/test/integration/targets/vmware_guest/tasks/boot_firmware_d1_c1_f0.yml
+++ b/test/integration/targets/vmware_guest/tasks/boot_firmware_d1_c1_f0.yml
@@ -18,7 +18,7 @@
     disk:
         - size: 1gb
           type: thin
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     state: poweredoff
     folder: "{{ f0 }}"
   register: clone_d1_c1_f0
@@ -49,7 +49,7 @@
         disk:
           - size: 1gb
             type: thin
-            autoselect_datastore: True
+            datastore: "{{ rw_datastore }}"
         state: poweredoff
         folder: "{{ f0 }}"
       register: clone_d1_c1_f0
@@ -75,7 +75,7 @@
     disk:
         - size: 1gb
           type: thin
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     state: poweredoff
     folder: "{{ f0 }}"
   register: clone_d1_c1_f0
@@ -106,7 +106,7 @@
         disk:
           - size: 1gb
             type: thin
-            autoselect_datastore: True
+            datastore: "{{ rw_datastore }}"
         state: poweredoff
         folder: "{{ f0 }}"
       register: clone_d1_c1_f0
diff --git a/test/integration/targets/vmware_guest/tasks/clone_resize_disks.yml b/test/integration/targets/vmware_guest/tasks/clone_resize_disks.yml
index 2f40b58d46..4c2d5a29a2 100644
--- a/test/integration/targets/vmware_guest/tasks/clone_resize_disks.yml
+++ b/test/integration/targets/vmware_guest/tasks/clone_resize_disks.yml
@@ -19,7 +19,7 @@
     disk:
       - size_gb: 1
         type: thin
-        autoselect_datastore: True
+        datastore: "{{ rw_datastore }}"
     state: poweredoff
 
 - name: convert to VM template
@@ -47,10 +47,10 @@
     disk:
       - size_gb: 2
         type: thin
-        autoselect_datastore: True
+        datastore: "{{ rw_datastore }}"
       - size_gb: 3
         type: thin
-        autoselect_datastore: True
+        datastore: "{{ rw_datastore }}"
     template: clone_resize_disks_original
     state: poweredoff
   register: l_clone_template_modify_disks
diff --git a/test/integration/targets/vmware_guest/tasks/create_d1_c1_f0.yml b/test/integration/targets/vmware_guest/tasks/create_d1_c1_f0.yml
index 1831ce2fc8..5e055ae073 100644
--- a/test/integration/targets/vmware_guest/tasks/create_d1_c1_f0.yml
+++ b/test/integration/targets/vmware_guest/tasks/create_d1_c1_f0.yml
@@ -32,7 +32,7 @@
     disk:
         - size: 1gb
           type: thin
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     state: poweredoff
     folder: '{{ f0 }}'
   register: clone_d1_c1_f0
@@ -61,7 +61,7 @@
     disk:
         - size: 1gb
           type: thin
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     state: poweredoff
     folder: '{{ f0 }}'
   register: clone_d1_c1_f0_recreate
diff --git a/test/integration/targets/vmware_guest/tasks/create_guest_invalid_d1_c1_f0.yml b/test/integration/targets/vmware_guest/tasks/create_guest_invalid_d1_c1_f0.yml
index dd5b25f8c6..abacc9f534 100644
--- a/test/integration/targets/vmware_guest/tasks/create_guest_invalid_d1_c1_f0.yml
+++ b/test/integration/targets/vmware_guest/tasks/create_guest_invalid_d1_c1_f0.yml
@@ -19,7 +19,7 @@
         disk:
             - size: 10gb
               type: thin
-              autoselect_datastore: True
+              datastore: "{{ rw_datastore }}"
         state: present
         folder: "{{ f0 }}"
       register: invalid_guest_0001_d1_c1_f0
diff --git a/test/integration/targets/vmware_guest/tasks/create_nw_d1_c1_f0.yml b/test/integration/targets/vmware_guest/tasks/create_nw_d1_c1_f0.yml
index ede3d8bc06..e778e50ceb 100644
--- a/test/integration/targets/vmware_guest/tasks/create_nw_d1_c1_f0.yml
+++ b/test/integration/targets/vmware_guest/tasks/create_nw_d1_c1_f0.yml
@@ -17,7 +17,7 @@
     disk:
         - size: 1gb
           type: thin
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     networks:
         - name: 'VM Network'
           device_type: vmxnet3
diff --git a/test/integration/targets/vmware_guest/tasks/create_rp_d1_c1_f0.yml b/test/integration/targets/vmware_guest/tasks/create_rp_d1_c1_f0.yml
index ab34e56f04..c803a39be5 100644
--- a/test/integration/targets/vmware_guest/tasks/create_rp_d1_c1_f0.yml
+++ b/test/integration/targets/vmware_guest/tasks/create_rp_d1_c1_f0.yml
@@ -15,7 +15,7 @@
     disk:
         - size: 1gb
           type: thin
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     state: poweredoff
     folder: F0
   register: clone_rp_d1_c1_f0
@@ -66,7 +66,7 @@
     disk:
         - size: 1gb
           type: thin
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     state: poweredoff
     folder: F0
   register: clone_rpc_d1_c1_f0
@@ -119,7 +119,7 @@
     disk:
         - size: 1gb
           type: thin
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     state: poweredoff
     folder: F0
   register: clone_rpcp_d1_c1_f0
@@ -171,7 +171,7 @@
     disk:
         - size: 1gb
           type: thin
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     state: poweredoff
     folder: F0
   register: clone_rph_d1_c1_f0
diff --git a/test/integration/targets/vmware_guest/tasks/disk_mode_d1_c1_f0.yml b/test/integration/targets/vmware_guest/tasks/disk_mode_d1_c1_f0.yml
index a6b1b84a55..a9e35f9365 100644
--- a/test/integration/targets/vmware_guest/tasks/disk_mode_d1_c1_f0.yml
+++ b/test/integration/targets/vmware_guest/tasks/disk_mode_d1_c1_f0.yml
@@ -17,7 +17,7 @@
     disk:
         - size: 1gb
           type: eagerzeroedthick
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
           disk_mode: 'invalid_disk_mode'
     state: poweredoff
     folder: "{{ f0 }}"
@@ -46,7 +46,7 @@
     disk:
         - size: 1gb
           type: eagerzeroedthick
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
           disk_mode: 'independent_persistent'
     state: poweredoff
     folder: "{{ f0 }}"
@@ -77,7 +77,7 @@
       disk:
         - size: 1gb
           type: eagerzeroedthick
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
           disk_mode: 'independent_persistent'
       state: poweredoff
       folder: "{{ f0 }}"
diff --git a/test/integration/targets/vmware_guest/tasks/disk_size_d1_c1_f0.yml b/test/integration/targets/vmware_guest/tasks/disk_size_d1_c1_f0.yml
index c16b83b586..3a209236a8 100644
--- a/test/integration/targets/vmware_guest/tasks/disk_size_d1_c1_f0.yml
+++ b/test/integration/targets/vmware_guest/tasks/disk_size_d1_c1_f0.yml
@@ -17,7 +17,7 @@
     disk:
         - size: 0gb
           type: eagerzeroedthick
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     state: poweredoff
     folder: "{{ f0 }}"
   register: disk_size_d1_c1_f0
diff --git a/test/integration/targets/vmware_guest/tasks/disk_type_d1_c1_f0.yml b/test/integration/targets/vmware_guest/tasks/disk_type_d1_c1_f0.yml
index 567fdd5254..e1c20c2e2c 100644
--- a/test/integration/targets/vmware_guest/tasks/disk_type_d1_c1_f0.yml
+++ b/test/integration/targets/vmware_guest/tasks/disk_type_d1_c1_f0.yml
@@ -17,10 +17,10 @@
     disk:
         - size: 1gb
           type: eagerzeroedthick
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
         - size: 1gb
           type: thin
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     state: poweredoff
     folder: F0
   register: disk_type_d1_c1_f0
diff --git a/test/integration/targets/vmware_guest/tasks/mac_address_d1_c1_f0.yml b/test/integration/targets/vmware_guest/tasks/mac_address_d1_c1_f0.yml
index dd89e3d0d8..bc55885207 100644
--- a/test/integration/targets/vmware_guest/tasks/mac_address_d1_c1_f0.yml
+++ b/test/integration/targets/vmware_guest/tasks/mac_address_d1_c1_f0.yml
@@ -17,7 +17,7 @@
     disk:
         - size: 1gb
           type: thin
-          autoselect_datastore: True
+          datastore: "{{ rw_datastore }}"
     networks:
         - name: VM Network
           ip: 192.168.10.12
diff --git a/test/integration/targets/vmware_guest/tasks/max_connections.yml b/test/integration/targets/vmware_guest/tasks/max_connections.yml
index 2d578b181f..8e6971635b 100644
--- a/test/integration/targets/vmware_guest/tasks/max_connections.yml
+++ b/test/integration/targets/vmware_guest/tasks/max_connections.yml
@@ -21,7 +21,7 @@
         disk:
           - size: 1gb
             type: thin
-            autoselect_datastore: True
+            datastore: "{{ rw_datastore }}"
         state: present
         folder: "{{ f0 }}"
       register: mk_conn_result_0001
diff --git a/test/integration/targets/vmware_guest/tasks/mem_reservation.yml b/test/integration/targets/vmware_guest/tasks/mem_reservation.yml
index 86190d0e09..066ca12886 100644
--- a/test/integration/targets/vmware_guest/tasks/mem_reservation.yml
+++ b/test/integration/targets/vmware_guest/tasks/mem_reservation.yml
@@ -21,7 +21,7 @@
         disk:
           - size: 1gb
             type: thin
-            autoselect_datastore: True
+            datastore: "{{ rw_datastore }}"
         state: present
         folder: "{{ virtual_machines[0].folder }}"
       register: mem_reserve_result_0001
@@ -61,7 +61,7 @@
         disk:
           - size: 1gb
             type: thin
-            autoselect_datastore: True
+            datastore: "{{ rw_datastore }}"
         state: present
         folder: "{{ virtual_machines[0].folder }}"
       register: memory_reserve_result_0003
@@ -101,7 +101,7 @@
         disk:
           - size: 1gb
             type: thin
-            autoselect_datastore: True
+            datastore: "{{ rw_datastore }}"
         state: present
         folder: "{{ virtual_machines[0].folder }}"
       register: no_memory_reserve_result_0005
diff --git a/test/integration/targets/vmware_guest/tasks/network_negative_test.yml b/test/integration/targets/vmware_guest/tasks/network_negative_test.yml
index 1d5de199f4..664990fc75 100644
--- a/test/integration/targets/vmware_guest/tasks/network_negative_test.yml
+++ b/test/integration/targets/vmware_guest/tasks/network_negative_test.yml
@@ -16,7 +16,7 @@
     disk:
       - size: 3mb
         type: thin
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     networks:
       - name: "Non existent VM"
     hardware:
@@ -47,7 +47,7 @@
     disk:
       - size: 3mb
         type: thin
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     networks:
       - name: "VM Network"
         type: static
@@ -80,7 +80,7 @@
     disk:
       - size: 3mb
         type: thin
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     networks:
       - name: "VM Network"
         type: static
@@ -113,7 +113,7 @@
     disk:
       - size: 3mb
         type: thin
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     networks:
       - ip: 10.10.10.10
         netmask: 255.255.255
@@ -146,7 +146,7 @@
     disk:
       - size: 3mb
         type: thin
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     networks:
       - vlan: non_existing_vlan
         ip: 10.10.10.10
@@ -179,7 +179,7 @@
     disk:
       - size: 3mb
         type: thin
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     networks:
       - name: "VM Network"
         ip: 10.10.10.10
@@ -213,7 +213,7 @@
     disk:
       - size: 3mb
         type: thin
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     networks:
       - name: "VM Network"
         ip: 10.10.10.10
@@ -248,7 +248,7 @@
     disk:
       - size: 3mb
         type: thin
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     networks:
       - name: "VM Network"
         ip: 10.10.10.10
@@ -284,7 +284,7 @@
     disk:
       - size: 3mb
         type: thin
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     networks:
       - name: "VM Network"
         ip: 10.10.10.10
@@ -320,7 +320,7 @@
     disk:
       - size: 3mb
         type: thin
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     networks:
       - name: "VM Network"
     hardware:
diff --git a/test/integration/targets/vmware_guest/tasks/network_with_device.yml b/test/integration/targets/vmware_guest/tasks/network_with_device.yml
index 926fa88560..4d02ef1873 100644
--- a/test/integration/targets/vmware_guest/tasks/network_with_device.yml
+++ b/test/integration/targets/vmware_guest/tasks/network_with_device.yml
@@ -18,7 +18,7 @@
     name: test_vm1
     disk:
       - size: 10mb
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     guest_id: rhel7_64guest
     hardware:
       memory_mb: 512
@@ -46,7 +46,7 @@
     name: test_vm1
     disk:
       - size: 10mb
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     guest_id: rhel7_64guest
     hardware:
       memory_mb: 512
diff --git a/test/integration/targets/vmware_guest/tasks/network_with_dvpg.yml b/test/integration/targets/vmware_guest/tasks/network_with_dvpg.yml
index 2c9c6a87a6..a2d94b0e7a 100644
--- a/test/integration/targets/vmware_guest/tasks/network_with_dvpg.yml
+++ b/test/integration/targets/vmware_guest/tasks/network_with_dvpg.yml
@@ -18,7 +18,7 @@
         name: test_vm1
         disk:
           - size: 10gb
-            autoselect_datastore: yes
+            datastore: "{{ rw_datastore }}"
         guest_id: rhel7_64guest
         hardware:
           memory_mb: 128
@@ -45,7 +45,7 @@
         name: test_vm2
         disk:
           - size: 10gb
-            autoselect_datastore: yes
+            datastore: "{{ rw_datastore }}"
         guest_id: rhel7_64guest
         hardware:
           memory_mb: 128
@@ -71,7 +71,7 @@
         name: test_vm2
         disk:
           - size: 10gb
-            autoselect_datastore: yes
+            datastore: "{{ rw_datastore }}"
         guest_id: rhel7_64guest
         hardware:
           memory_mb: 128
@@ -97,7 +97,7 @@
         name: test_vm3
         disk:
           - size: 10gb
-            autoselect_datastore: yes
+            datastore: "{{ rw_datastore }}"
         guest_id: rhel7_64guest
         hardware:
           memory_mb: 128
@@ -123,7 +123,7 @@
         name: test_vm3
         disk:
           - size: 10gb
-            autoselect_datastore: yes
+            datastore: "{{ rw_datastore }}"
         guest_id: rhel7_64guest
         hardware:
           memory_mb: 128
diff --git a/test/integration/targets/vmware_guest/tasks/network_with_portgroup.yml b/test/integration/targets/vmware_guest/tasks/network_with_portgroup.yml
index caa295f81b..1ca54d3788 100644
--- a/test/integration/targets/vmware_guest/tasks/network_with_portgroup.yml
+++ b/test/integration/targets/vmware_guest/tasks/network_with_portgroup.yml
@@ -28,7 +28,7 @@
     disk:
       - size: 3mb
         type: thin
-        autoselect_datastore: yes
+        datastore: "{{ rw_datastore }}"
     networks:
       - name: portgroup_network
         switch_name: "{{ dvswitch1 }}"
diff --git a/test/integration/targets/vmware_guest/tasks/remove_vm_from_inventory.yml b/test/integration/targets/vmware_guest/tasks/remove_vm_from_inventory.yml
index 17502e3842..93a179413d 100644
--- a/test/integration/targets/vmware_guest/tasks/remove_vm_from_inventory.yml
+++ b/test/integration/targets/vmware_guest/tasks/remove_vm_from_inventory.yml
@@ -19,7 +19,7 @@
     disk:
       - size: 1gb
         type: thin
-        autoselect_datastore: True
+        datastore: "{{ rw_datastore }}"
     state: present
   register: create_vm_for_test
 
