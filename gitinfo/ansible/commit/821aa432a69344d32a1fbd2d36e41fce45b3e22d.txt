commit 821aa432a69344d32a1fbd2d36e41fce45b3e22d
Author: Brian Coca <bcoca@ansible.com>
Date:   Fri Dec 20 12:50:06 2013 -0500

    corrected indentation and now handles non existing previous key (not
    just changed existing)
    
    Signed-off-by: Brian Coca <briancoca+dev@gmail.com>

diff --git a/library/system/debconf b/library/system/debconf
index 1b48e04156..23f147fcfa 100644
--- a/library/system/debconf
+++ b/library/system/debconf
@@ -146,8 +146,12 @@ def main():
             rc, msg, e = set_selection(module, pkg, question, type, value, unseen)
             if rc:
                 module.fail_json(msg=e)
-	curr = { question: value }
-	prev = {question: prev[question]}
+
+        curr = { question: value }
+        if question in prev:
+            prev = {question: prev[question]}
+        else:
+            prev[question] = ''
 
         module.exit_json(changed=changed, msg=msg, current=curr, previous=prev)
 
