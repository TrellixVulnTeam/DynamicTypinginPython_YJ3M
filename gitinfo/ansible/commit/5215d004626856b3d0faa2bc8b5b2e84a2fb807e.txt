commit 5215d004626856b3d0faa2bc8b5b2e84a2fb807e
Author: Alex Stephen <alexstephen@google.com>
Date:   Tue Apr 9 15:35:05 2019 -0700

    return actual error from module logic on gcp_compute (#55055)
    
    * return actual error from module logic on gcp_compute
    
    * changing how the error is presented
    
    * sanity

diff --git a/lib/ansible/plugins/inventory/gcp_compute.py b/lib/ansible/plugins/inventory/gcp_compute.py
index 07fc378e68..ff1e753354 100644
--- a/lib/ansible/plugins/inventory/gcp_compute.py
+++ b/lib/ansible/plugins/inventory/gcp_compute.py
@@ -124,6 +124,12 @@ from ansible.module_utils._text import to_native
 from ansible.module_utils.gcp_utils import GcpSession, navigate_hash, GcpRequestException
 from ansible.plugins.inventory import BaseInventoryPlugin, Constructable, Cacheable
 
+try:
+    import google.auth
+    import requests
+except ImportError:
+    raise AnsibleError('The gcp dynamic inventory plugin requires the requests and google-auth libraries')
+
 
 # Mocking a module to reuse module_utils
 class GcpMockModule(object):
