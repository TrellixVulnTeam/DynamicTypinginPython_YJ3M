commit 1b263e77de4c5714a558fe0fe5934363a2d85649
Author: sky-joker <sky.jokerxx@gmail.com>
Date:   Thu Feb 6 23:04:03 2020 +0900

    Add example for retrieve Product, Version, Build, Update info for ESXi

diff --git a/lib/ansible/modules/cloud/vmware/vmware_host_facts.py b/lib/ansible/modules/cloud/vmware/vmware_host_facts.py
index f7b5aa6ace..f5bfbe7fad 100644
--- a/lib/ansible/modules/cloud/vmware/vmware_host_facts.py
+++ b/lib/ansible/modules/cloud/vmware/vmware_host_facts.py
@@ -126,6 +126,36 @@ EXAMPLES = r'''
       - config.product.apiVersion
       - overallStatus
   register: host_facts
+
+- name: How to retrieve Product, Version, Build, Update info for ESXi from vCenter
+  block:
+    - name: Gather product version info for ESXi from vCenter
+      vmware_host_facts:
+        hostname: "{{ vcenter_hostname }}"
+        username: "{{ vcenter_user }}"
+        password: "{{ vcenter_pass }}"
+        validate_certs: no
+        esxi_hostname: "{{ esxi_hostname }}"
+        schema: vsphere
+        properties:
+          - config.product
+          - config.option
+      register: gather_host_facts_result
+
+    - name: Extract update level info from option properties
+      set_fact:
+        update_level_info: "{{ item.value }}"
+      loop: "{{ gather_host_facts_result.ansible_facts.config.option }}"
+      when:
+        - item.key == 'Misc.HostAgentUpdateLevel'
+
+    - name: The output of Product, Version, Build, Update info for ESXi
+      debug:
+        msg:
+          - "Product : {{ gather_host_facts_result.ansible_facts.config.product.name }}"
+          - "Version : {{ gather_host_facts_result.ansible_facts.config.product.version }}"
+          - "Build   : {{ gather_host_facts_result.ansible_facts.config.product.build }}"
+          - "Update  : {{ update_level_info }}"
 '''
 
 RETURN = r'''
