commit 52c20bbd3f3cf7dba8f5fef7882f4bc8696daeef
Author: Nathaniel Case <this.is@nathanielca.se>
Date:   Mon Sep 17 15:39:07 2018 -0400

    Update from napalm PR (#45743)

diff --git a/lib/ansible/plugins/connection/__init__.py b/lib/ansible/plugins/connection/__init__.py
index cd1998f928..b7cb3baf53 100644
--- a/lib/ansible/plugins/connection/__init__.py
+++ b/lib/ansible/plugins/connection/__init__.py
@@ -360,8 +360,10 @@ class NetworkConnectionBase(ConnectionBase):
         initialize implementation plugin options
         '''
         for plugin in self._implementation_plugins:
-            if hasattr(plugin, 'set_options'):
+            try:
                 plugin.set_options(task_keys=task_keys, var_options=var_options, direct=direct)
+            except AttributeError:
+                pass
 
     def _update_connection_state(self):
         '''
