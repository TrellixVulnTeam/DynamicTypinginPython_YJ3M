commit 0aedd0c0b24e58a9ee10d6487476fe9aaeef3eb9
Author: Scott Gilbert <scott@workdesktop.(none)>
Date:   Thu Jan 16 12:14:37 2014 -0600

    Allow keystring passed to authorized_key to contain blank lines and comments

diff --git a/library/system/authorized_key b/library/system/authorized_key
index ee613a9042..c9b178c374 100644
--- a/library/system/authorized_key
+++ b/library/system/authorized_key
@@ -341,7 +341,9 @@ def enforce_state(module, params):
     state       = params.get("state", "present")
     key_options = params.get("key_options", None)
 
-    key = key.split('\n')
+    # extract indivial keys into an array, skipping blank lines and comments
+    key = [s for s in key.splitlines() if s and not s.startswith('#')]
+
 
     # check current state -- just get the filename, don't create file
     do_write = False
