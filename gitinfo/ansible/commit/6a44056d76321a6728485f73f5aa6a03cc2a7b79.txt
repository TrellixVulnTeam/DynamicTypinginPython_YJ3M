commit 6a44056d76321a6728485f73f5aa6a03cc2a7b79
Author: James Cammarata <jimi@sngx.net>
Date:   Sat May 2 22:15:45 2015 -0500

    Fix bug in f310d13 (v2)

diff --git a/v2/ansible/playbook/base.py b/v2/ansible/playbook/base.py
index 82d1e704d1..ecd217c1e8 100644
--- a/v2/ansible/playbook/base.py
+++ b/v2/ansible/playbook/base.py
@@ -260,7 +260,7 @@ class Base:
                 # run the post-validator if present
                 method = getattr(self, '_post_validate_%s' % name, None)
                 if method:
-                    value = method(attribute, value, all_vars, fail_on_undefined)
+                    value = method(attribute, value, all_vars, templar._fail_on_undefined_errors)
                 else:
                     # otherwise, just make sure the attribute is of the type it should be
                     if attribute.isa == 'string':
@@ -281,7 +281,7 @@ class Base:
             except (TypeError, ValueError) as e:
                 raise AnsibleParserError("the field '%s' has an invalid value (%s), and could not be converted to an %s. Error was: %s" % (name, value, attribute.isa, e), obj=self.get_ds())
             except UndefinedError as e:
-                if fail_on_undefined:
+                if templar._fail_on_undefined_errors:
                     raise AnsibleParserError("the field '%s' has an invalid value, which appears to include a variable that is undefined. The error was: %s" % (name,e), obj=self.get_ds())
 
     def serialize(self):
