commit d3c94e82a5cee89c2388ee13f89d5e01d24d475b
Author: Jorge Quint√°s <jorge.quintas@jobandtalent.com>
Date:   Wed Oct 7 14:42:37 2015 +0200

    take into account if cache file exists when loading data from digitalocean even with --force-cache

diff --git a/contrib/inventory/digital_ocean.py b/contrib/inventory/digital_ocean.py
index 2489d89b7d..24ba64370e 100755
--- a/contrib/inventory/digital_ocean.py
+++ b/contrib/inventory/digital_ocean.py
@@ -192,7 +192,7 @@ or environment variables (DO_API_TOKEN)\n''')
         self.cache_filename = self.cache_path + "/ansible-digital_ocean.cache"
         self.cache_refreshed = False
 
-        if self.is_cache_valid:
+        if self.is_cache_valid():
             self.load_from_cache()
             if len(self.data) == 0:
                 if self.args.force_cache:
@@ -318,7 +318,7 @@ or environment variables (DO_API_TOKEN)\n''')
 
     def load_from_digital_ocean(self, resource=None):
         '''Get JSON from DigitalOcean API'''
-        if self.args.force_cache:
+        if self.args.force_cache and os.path.isfile(self.cache_filename):
             return
         # We always get fresh droplets
         if self.is_cache_valid() and not (resource == 'droplets' or resource is None):
