commit 1f406d45303a8ab00cee2bd1d6f84db4c6009f2f
Author: Michael Scherer <misc@zarb.org>
Date:   Fri Oct 14 16:36:58 2016 +0200

    Port virt to python3 (#3167)

diff --git a/lib/ansible/modules/extras/cloud/misc/virt.py b/lib/ansible/modules/extras/cloud/misc/virt.py
index be1a7f9ec6..68ff4a6c6c 100644
--- a/lib/ansible/modules/extras/cloud/misc/virt.py
+++ b/lib/ansible/modules/extras/cloud/misc/virt.py
@@ -510,7 +510,8 @@ def main():
     rc = VIRT_SUCCESS
     try:
         rc, result = core(module)
-    except Exception, e:
+    except Exception:
+        e = get_exception()
         module.fail_json(msg=str(e))
 
     if rc != 0: # something went wrong emit the msg
@@ -521,4 +522,5 @@ def main():
 
 # import module snippets
 from ansible.module_utils.basic import *
+from ansible.module_utils.pycompat24 import get_exception
 main()
diff --git a/lib/ansible/modules/extras/test/utils/shippable/sanity-skip-python3.txt b/lib/ansible/modules/extras/test/utils/shippable/sanity-skip-python3.txt
index 94524fa872..7cce932ec1 100644
--- a/lib/ansible/modules/extras/test/utils/shippable/sanity-skip-python3.txt
+++ b/lib/ansible/modules/extras/test/utils/shippable/sanity-skip-python3.txt
@@ -36,7 +36,6 @@
 /cloud/misc/ovirt.py
 /cloud/misc/proxmox.py
 /cloud/misc/proxmox_template.py
-/cloud/misc/virt.py
 /cloud/misc/virt_net.py
 /cloud/misc/virt_pool.py
 /cloud/profitbricks/profitbricks.py
