commit 00aa584c57edb676e3eb8e35c717be0749cce8c3
Author: Daniel Hokka Zakrisson <daniel@hozac.com>
Date:   Tue Nov 6 20:34:05 2012 +0100

    Don't double dwim first_available_file in template

diff --git a/lib/ansible/runner/action_plugins/template.py b/lib/ansible/runner/action_plugins/template.py
index ba7cad985c..80a7c4e782 100644
--- a/lib/ansible/runner/action_plugins/template.py
+++ b/lib/ansible/runner/action_plugins/template.py
@@ -56,17 +56,17 @@ class ActionModule(object):
         if 'first_available_file' in inject:
             found = False
             for fn in self.runner.module_vars.get('first_available_file'):
-                fn = utils.template(self.runner.basedir, fn, inject)
-                fn = utils.path_dwim(self.runner.basedir, fn)
-                if os.path.exists(fn):
-                    source = fn
+                fnt = utils.template(self.runner.basedir, fn, inject)
+                fnd = utils.path_dwim(self.runner.basedir, fnt)
+                if os.path.exists(fnd):
+                    source = fnt
                     found = True
                     break
             if not found:
                 result = dict(failed=True, msg="could not find src in first_available_file list")
                 return ReturnData(conn=conn, comm_ok=False, result=result)
-
-        source = utils.template(self.runner.basedir, source, inject)
+        else:
+            source = utils.template(self.runner.basedir, source, inject)
 
         # template the source data locally & transfer
         try:
