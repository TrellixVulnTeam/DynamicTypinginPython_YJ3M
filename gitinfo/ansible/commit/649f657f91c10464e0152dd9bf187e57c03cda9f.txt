commit 649f657f91c10464e0152dd9bf187e57c03cda9f
Author: Rick Elrod <rick@elrod.me>
Date:   Fri Mar 20 14:01:59 2020 -0500

    Fix coverage script to handle ongoing runs (#68380)
    
    * Fix get_recent_coverage_runs.py to handle ongoing runs
    
    Signed-off-by: Rick Elrod <rick@elrod.me>
    
    * Color code test status to make it easier to see at a glance
    
    Signed-off-by: Rick Elrod <rick@elrod.me>
    
    * fix lint
    
    Signed-off-by: Rick Elrod <rick@elrod.me>

diff --git a/hacking/shippable/get_recent_coverage_runs.py b/hacking/shippable/get_recent_coverage_runs.py
index 88f5b3a985..e05c1061f2 100755
--- a/hacking/shippable/get_recent_coverage_runs.py
+++ b/hacking/shippable/get_recent_coverage_runs.py
@@ -20,6 +20,7 @@
 from __future__ import (absolute_import, division, print_function)
 __metaclass__ = type
 
+from ansible.utils.color import stringc
 import requests
 import sys
 
@@ -53,11 +54,32 @@ def get_coverage_runs():
 
 
 def pretty_coverage_runs(runs):
-    for run in sorted(runs, key=lambda x: x['endedAt']):
+    ended = []
+    in_progress = []
+    for run in runs:
+        if run.get('endedAt'):
+            ended.append(run)
+        else:
+            in_progress.append(run)
+
+    for run in sorted(ended, key=lambda x: x['endedAt']):
         if run['statusCode'] == 30:
-            print('ðŸ™‚ [PASS] https://app.shippable.com/github/ansible/ansible/runs/%s (%s)' % (run['runNumber'], run['endedAt']))
+            print('ðŸ™‚ [%s] https://app.shippable.com/github/ansible/ansible/runs/%s (%s)' % (
+                stringc('PASS', 'green'),
+                run['runNumber'],
+                run['endedAt']))
         else:
-            print('ðŸ˜¢ [FAIL] https://app.shippable.com/github/ansible/ansible/runs/%s (%s)' % (run['runNumber'], run['endedAt']))
+            print('ðŸ˜¢ [%s] https://app.shippable.com/github/ansible/ansible/runs/%s (%s)' % (
+                stringc('FAIL', 'red'),
+                run['runNumber'],
+                run['endedAt']))
+
+    if in_progress:
+        print('The following runs are ongoing:')
+        for run in in_progress:
+            print('ðŸ¤” [%s] https://app.shippable.com/github/ansible/ansible/runs/%s' % (
+                stringc('FATE', 'yellow'),
+                run['runNumber']))
 
 
 def main():
