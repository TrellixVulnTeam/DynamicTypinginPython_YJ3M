commit 79645535c00451a53d6e9f367a3960024f71c2a1
Author: James Cammarata <jimi@sngx.net>
Date:   Fri Feb 28 12:49:25 2014 -0600

    Handle empty results from failed connections in _remote_md5()
    
    Fixes #5800

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index 9b4bc32cbc..207862857a 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -976,7 +976,12 @@ class Runner(object):
         data = self._low_level_exec_command(conn, cmd, tmp, sudoable=True)
         data2 = utils.last_non_blank_line(data['stdout'])
         try:
-            return data2.split()[0]
+            if data2 == '':
+                # this may happen if the connection to the remote server
+                # failed, so just return "INVALIDMD5SUM" to avoid errors
+                return "INVALIDMD5SUM"
+            else:
+                return data2.split()[0]
         except IndexError:
             sys.stderr.write("warning: md5sum command failed unusually, please report this to the list so it can be fixed\n")
             sys.stderr.write("command: %s\n" % md5s)
