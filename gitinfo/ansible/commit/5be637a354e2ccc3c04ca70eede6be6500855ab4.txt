commit 5be637a354e2ccc3c04ca70eede6be6500855ab4
Author: Sebastien ROHAUT <sebastien.rohaut@free.fr>
Date:   Sun Jun 21 18:52:59 2015 +0200

    Update pam_limits.py
    
    Add version 2.0
    Remove default: from documentation for required values
    use atomic_move from ansible module API

diff --git a/lib/ansible/modules/extras/system/pam_limits.py b/lib/ansible/modules/extras/system/pam_limits.py
index 2167e4f83e..5c7ab93806 100644
--- a/lib/ansible/modules/extras/system/pam_limits.py
+++ b/lib/ansible/modules/extras/system/pam_limits.py
@@ -26,7 +26,7 @@ import re
 DOCUMENTATION = '''
 ---
 module: pam_limits
-version_added: "historical"
+version_added: "2.0"
 short_description: Modify Linux PAM limits
 description:
      - The M(pam_limits) module modify PAM limits, default in /etc/security/limits.conf.
@@ -36,24 +36,20 @@ options:
     description:
       - A username, @groupname, wildcard, uid/gid range.
     required: true
-    default: null
   limit_type:
     description:
       - Limit type : hard or soft.
     required: true
     choices: [ "hard", "soft" ]
-    default: null
   limit_item:
     description:
       - The limit to be set : core, data, nofile, cpu, etc.
     required: true
     choices: [ "core", "data", "fsize", "memlock", "nofile", "rss", "stack", "cpu", "nproc", "as", "maxlogins", "maxsyslogins", "priority", "locks", "sigpending", "msgqueue", "nice", "rtprio", "chroot" ]
-        default: null
   value:
     description:
       - The value of the limit.
     required: true
-    default: null
   backup:
     description:
       - Create a backup file including the timestamp information so you can get
@@ -202,10 +198,7 @@ def main():
     nf.close()
 
     # Copy tempfile to newfile
-    shutil.copy(nf.name, f.name)
-
-    # delete tempfile
-    os.unlink(nf.name)
+    module.atomic_move(nf.name, f.name)
 
     res_args = dict(
         changed = changed, msg = message
