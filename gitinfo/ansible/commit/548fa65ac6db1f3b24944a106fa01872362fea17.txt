commit 548fa65ac6db1f3b24944a106fa01872362fea17
Author: Pavan Bidkar <pbidkar@vmware.com>
Date:   Thu Oct 31 14:02:52 2019 +0530

    VMware: Allow dash in Windows server dnsname (#64052)
    
    Fixes: #62810

diff --git a/changelogs/fragments/62810-Vmware-Guest-Allow-DashInWindowsServerDNSName.yml b/changelogs/fragments/62810-Vmware-Guest-Allow-DashInWindowsServerDNSName.yml
new file mode 100644
index 0000000000..1f41816435
--- /dev/null
+++ b/changelogs/fragments/62810-Vmware-Guest-Allow-DashInWindowsServerDNSName.yml
@@ -0,0 +1,2 @@
+bugfixes:
+- vmware_guest - Allow '-' (Dash) special char in windows DNS name.
diff --git a/lib/ansible/modules/cloud/vmware/vmware_guest.py b/lib/ansible/modules/cloud/vmware/vmware_guest.py
index a76fab86e3..53fd9341be 100644
--- a/lib/ansible/modules/cloud/vmware/vmware_guest.py
+++ b/lib/ansible/modules/cloud/vmware/vmware_guest.py
@@ -1813,7 +1813,8 @@ class PyVmomiHelper(PyVmomi):
             ident.userData.computerName = vim.vm.customization.FixedName()
             # computer name will be truncated to 15 characters if using VM name
             default_name = self.params['name'].replace(' ', '')
-            default_name = ''.join([c for c in default_name if c not in string.punctuation])
+            punctuation = string.punctuation.replace('-', '')
+            default_name = ''.join([c for c in default_name if c not in punctuation])
             ident.userData.computerName.name = str(self.params['customization'].get('hostname', default_name[0:15]))
             ident.userData.fullName = str(self.params['customization'].get('fullname', 'Administrator'))
             ident.userData.orgName = str(self.params['customization'].get('orgname', 'ACME'))
