commit 25ab2a8153de46e0fc6886a508bea1594c3f2faa
Author: nitzmahone <mdavis@ansible.com>
Date:   Thu Jun 7 15:07:21 2018 -0700

    fix truncated list functions in ansible-doc (#41281)
    
    * fixed incomplete refactor of instance-level plugin list var

diff --git a/lib/ansible/cli/doc.py b/lib/ansible/cli/doc.py
index 4b4aa3507a..ef158facd8 100644
--- a/lib/ansible/cli/doc.py
+++ b/lib/ansible/cli/doc.py
@@ -118,7 +118,7 @@ class DocCLI(CLI):
         if self.options.list_files:
             paths = loader._get_paths()
             for path in paths:
-                self.plugin_list = self.find_plugins(path, plugin_type)
+                self.plugin_list.update(self.find_plugins(path, plugin_type))
 
             list_text = self.get_plugin_list_filenames(loader)
             self.pager(list_text)
@@ -128,7 +128,7 @@ class DocCLI(CLI):
         if self.options.list_dir:
             paths = loader._get_paths()
             for path in paths:
-                self.plugin_list = self.find_plugins(path, plugin_type)
+                self.plugin_list.update(self.find_plugins(path, plugin_type))
 
             self.pager(self.get_plugin_list_text(loader))
             return 0
