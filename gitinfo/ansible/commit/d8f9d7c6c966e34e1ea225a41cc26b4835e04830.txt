commit d8f9d7c6c966e34e1ea225a41cc26b4835e04830
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Sat Apr 14 16:08:04 2012 -0400

    Use correct user to determine host files path, do not reuse .ansible
    which is already taken for ansible management ops.

diff --git a/lib/ansible/runner.py b/lib/ansible/runner.py
index a715b53125..78d0160947 100755
--- a/lib/ansible/runner.py
+++ b/lib/ansible/runner.py
@@ -28,6 +28,7 @@ import random
 import traceback
 import tempfile
 import subprocess
+import getpass
 
 import ansible.constants as C 
 import ansible.connection
@@ -405,8 +406,9 @@ class Runner(object):
     def _save_setup_result_to_disk(self, conn, result):
        ''' cache results of calling setup '''
 
-       dest = os.path.expanduser("~/.ansible/setup_data")
-       if self.remote_user == 'root':
+       dest = os.path.expanduser("~/.ansible_setup_data")
+       user = getpass.getuser()
+       if user == 'root':
            dest = "/var/lib/ansible/setup_data"
        if not os.path.exists(dest):
            os.makedirs(dest)
