commit 97e0f29a5b7109387b4ba3d954231ce25e19d722
Author: Matt Martz <matt@sivel.net>
Date:   Fri Feb 5 12:14:57 2016 -0600

    Add/improve tests for the uri module

diff --git a/test/integration/roles/test_uri/tasks/main.yml b/test/integration/roles/test_uri/tasks/main.yml
index 9ce05938b6..4d8f9c7db0 100644
--- a/test/integration/roles/test_uri/tasks/main.yml
+++ b/test/integration/roles/test_uri/tasks/main.yml
@@ -113,7 +113,7 @@
   assert:
     that:
       - "result.failed == true"
-      - "'certificate does not match ' in result.msg"
+      - "'SSL Certificate does not belong' in result.msg"
       - "stat_result.stat.exists == false"
 
 - name: Clean up any cruft from the results directory
@@ -140,3 +140,45 @@
     that:
       - "stat_result.stat.exists == true"
       - "result.changed == true"
+
+- name: test redirect without follow_redirects
+  uri:
+    url: 'http://httpbin.org/redirect/2'
+    follow_redirects: 'none'
+    status_code: 302
+  register: result
+
+- name: Assert location header
+  assert:
+    that:
+      - 'result.location|default("") == "http://httpbin.org/relative-redirect/1"'
+
+- name: test basic auth
+  uri:
+    url: 'http://httpbin.org/basic-auth/user/passwd'
+    user: user
+    password: passwd
+
+- name: test basic forced auth
+  uri:
+    url: 'http://httpbin.org/hidden-basic-auth/user/passwd'
+    force_basic_auth: true
+    user: user
+    password: passwd
+
+- name: test PUT
+  uri:
+    url: 'http://httpbin.org/put'
+    method: PUT
+    body: 'foo=bar'
+
+- name: test OPTIONS
+  uri:
+    url: 'http://httpbin.org/'
+    method: OPTIONS
+  register: result
+
+- name: Assert we got an allow header
+  assert:
+    that:
+      - 'result.allow|default("") == "HEAD, OPTIONS, GET"'
