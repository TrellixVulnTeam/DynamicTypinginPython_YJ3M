commit 37670b09f59c6fd811fbc56000319f86006e8ee1
Author: Ganesh Nalawade <ganesh634@gmail.com>
Date:   Wed Aug 2 12:46:15 2017 +0530

    Fix junos_linkagg integration test failure (#27621)
    
    Fixes #27574

diff --git a/test/integration/targets/junos_linkagg/tests/netconf/basic.yaml b/test/integration/targets/junos_linkagg/tests/netconf/basic.yaml
index 8afb925027..8c9a9d8237 100644
--- a/test/integration/targets/junos_linkagg/tests/netconf/basic.yaml
+++ b/test/integration/targets/junos_linkagg/tests/netconf/basic.yaml
@@ -126,17 +126,10 @@
     provider: "{{ netconf }}"
   register: result
 
-- name: Get running configuration
-  junos_rpc:
-    rpc: get-configuration
-    provider: "{{ netconf }}"
-  register: config
-
 - assert:
     that:
       - "result.changed == true"
-      - "'<disable/>' in config.xml"
-      - "'+   disable;' in result.diff.prepared"
+      - result.diff.prepared | search("\+ *disable")
 
 - name: Enable linkagg interface
   junos_linkagg:
@@ -145,16 +138,10 @@
     provider: "{{ netconf }}"
   register: result
 
-- name: Get running configuration
-  junos_rpc:
-    rpc: get-configuration
-    provider: "{{ netconf }}"
-  register: config
-
 - assert:
     that:
       - "result.changed == true"
-      - "'<disable/>' not in config.xml"
+      - result.diff.prepared | search("\- *disable")
 
 - name: Deactivate linkagg
   junos_linkagg:
