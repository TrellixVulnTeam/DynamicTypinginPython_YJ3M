commit c87300f9e7cd0ca545f9d0e369bbdae961b39e66
Author: Peter Sprygada <psprygada@ansible.com>
Date:   Sun Apr 24 08:20:14 2016 -0400

    adds check on config_format kwarg in junos
    
    This adds a check to validate the arugment for config_format kwarg in
    get_config.  If the specified format is not a valid option, the shared
    module will call fail_json

diff --git a/lib/ansible/module_utils/junos.py b/lib/ansible/module_utils/junos.py
index 66b8d742ac..5e81b55c41 100644
--- a/lib/ansible/module_utils/junos.py
+++ b/lib/ansible/module_utils/junos.py
@@ -250,9 +250,12 @@ class Netconf(object):
         return self.device.facts
 
     def get_config(self, config_format="text"):
-        ele = self.rpc('get_configuration', format=config_format)
+        if config_format not in ['text', 'set', 'xml']:
+            msg = 'invalid config format... must be one of xml, text, set'
+            self._fail(msg=msg)
 
-        if config_format == "text" or config_format == "set":
+        ele = self.rpc('get_configuration', format=config_format)
+        if config_format in ['text', 'set']:
            return str(ele.text).strip()
         elif config_format == "xml":
             return ele
