commit 49dc9eea169efb329d7d184df53ce3dea4dface1
Author: Jonathan Mainguy <jon@soh.re>
Date:   Wed Dec 9 15:11:21 2015 -0500

    add tests for encrypted hash mysql_user

diff --git a/test/integration/roles/test_mysql_user/tasks/user_password_update_test.yml b/test/integration/roles/test_mysql_user/tasks/user_password_update_test.yml
index 50307cef95..9a899b206c 100644
--- a/test/integration/roles/test_mysql_user/tasks/user_password_update_test.yml
+++ b/test/integration/roles/test_mysql_user/tasks/user_password_update_test.yml
@@ -79,8 +79,23 @@
 
 - include: remove_user.yml user_name={{user_name_2}} user_password={{ user_password_1 }}
 
+- name: Create user with password1234 using hash. (expect changed=true)
+  mysql_user: name=jmainguy password='*D65798AAC0E5C6DF3F320F8A30E026E7EBD73A95' encrypted=yes
+  register: encrypt_result
 
+- name: Check that the module made a change
+  assert:
+    that:
+      - "encrypt_result.changed == True"
 
+- name: See if the password needs to be updated. (expect changed=false)
+  mysql_user: name=jmainguy password='password1234'
+  register: plain_result
 
+- name: Check that the module did not change the password
+  assert:
+    that:
+      - "plain_result.changed == False"
 
-
+- name: Remove user (cleanup)
+  mysql_user: name=jmainguy state=absent
