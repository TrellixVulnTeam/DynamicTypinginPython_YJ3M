commit 8f9c3efb1d31b89b4b4133ab6eb3eaba892bfb91
Author: Rene Moser <mail@renemoser.net>
Date:   Sat Jun 6 09:13:11 2015 +0200

    puppet: ensure puppet is in live mode per default
    
    puppet may be configured to operate in `--noop` mode per default.
    
    That is why we must pass a `--no-noop` to make sure, changes are going to be applied.

diff --git a/lib/ansible/modules/extras/system/puppet.py b/lib/ansible/modules/extras/system/puppet.py
index a7796c1b7c..e8d02a89f7 100644
--- a/lib/ansible/modules/extras/system/puppet.py
+++ b/lib/ansible/modules/extras/system/puppet.py
@@ -156,10 +156,14 @@ def main():
             cmd += " --show-diff"
         if module.check_mode:
             cmd += " --noop"
+        else:
+            cmd += " --no-noop"
     else:
         cmd = "%s apply --detailed-exitcodes " % base_cmd
         if module.check_mode:
             cmd += "--noop "
+        else:
+            cmd += "--no-noop "
         cmd += pipes.quote(p['manifest'])
     rc, stdout, stderr = module.run_command(cmd)
 
