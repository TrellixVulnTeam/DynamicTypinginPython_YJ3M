commit 2a288141d3d3ea709d83772b431f6d58dae22198
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Mon Dec 8 10:55:04 2014 -0800

    Fix template module to fail if remote checksumming failed

diff --git a/lib/ansible/runner/action_plugins/template.py b/lib/ansible/runner/action_plugins/template.py
index fd38c61063..15e8e3a9a0 100644
--- a/lib/ansible/runner/action_plugins/template.py
+++ b/lib/ansible/runner/action_plugins/template.py
@@ -92,6 +92,11 @@ class ActionModule(object):
         local_checksum = utils.checksum_s(resultant)
         remote_checksum = self.runner._remote_checksum(conn, tmp, dest, inject)
 
+        if remote_checksum in ('0', '1', '2', '3', '4'):
+            result = dict(failed=True, msg="failed to checksum remote file."
+                        " Checksum error code: %s" % remote_checksum)
+            return ReturnData(conn=conn, comm_ok=True, result=result)
+
         if local_checksum != remote_checksum:
 
             # template is different from the remote value
