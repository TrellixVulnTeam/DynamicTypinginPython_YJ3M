commit e4af3a8957c33e6593339d6cbec2b5a4efd87a0e
Author: Andrew Gaffney <andrew@agaffney.org>
Date:   Fri Jul 13 11:15:03 2018 -0500

    Mark vars from facts cache as unsafe (fixes #42656) (#42682)
    
    Facts are marked as unsafe when originally gathered, but they lose that
    marking when they are serialized to JSON and parsed back out.

diff --git a/lib/ansible/vars/manager.py b/lib/ansible/vars/manager.py
index 01525f08e5..c4105807c1 100644
--- a/lib/ansible/vars/manager.py
+++ b/lib/ansible/vars/manager.py
@@ -308,7 +308,7 @@ class VariableManager:
 
             # finally, the facts caches for this host, if it exists
             try:
-                facts = self._fact_cache.get(host.name, {})
+                facts = wrap_var(self._fact_cache.get(host.name, {}))
                 all_vars.update(namespace_facts(facts))
 
                 # push facts to main namespace
