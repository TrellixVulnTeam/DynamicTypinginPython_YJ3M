commit 08f270ad712fc1842008c33f9e30e12768fe9bdd
Author: Devananda van der Veen <devananda.vdv@gmail.com>
Date:   Wed Mar 9 17:15:11 2016 -0800

    Send empty command before recv
    
    On some switches, starting an SSH connection and immediately calling
    recv() will result in a connection timeout. The switch requires some
    input on the channel before it provides any prompt.
    
    As such, this patch sends an empty command immediately upon connection,
    triggering the switch to send a prompt which the shell can then
    interpret.
    
    Signed-off-by: Devananda van der Veen <devananda.vdv@gmail.com>

diff --git a/lib/ansible/module_utils/shell.py b/lib/ansible/module_utils/shell.py
index bcb88fa790..5b94663457 100644
--- a/lib/ansible/module_utils/shell.py
+++ b/lib/ansible/module_utils/shell.py
@@ -109,6 +109,7 @@ class Shell(object):
 
         self.shell = self.ssh.invoke_shell()
         self.shell.settimeout(10)
+        self.shell.sendall("\n")
         self.receive()
 
     def strip(self, data):
