commit e1fde967be9feb94d7ee993944efceec54bb0075
Author: vaupelt <vaupelt@gmail.com>
Date:   Mon Aug 3 12:38:16 2015 +0200

    strange results with services=all
    
    I issued a command with action=disable_alerts host=webserver services=all set and get this results:
    
        "nagios_commands": [
            "[1438593631] DISABLE_SVC_NOTIFICATIONS;webserver;a",
            "[1438593631] DISABLE_SVC_NOTIFICATIONS;webserver;l",
            "[1438593631] DISABLE_SVC_NOTIFICATIONS;webserver;l"
        ]
    
    This is not a big deal because i have just overlooked the action=silence command. Nevertheless a more predictable result would be a nice thing to have.

diff --git a/lib/ansible/modules/extras/monitoring/nagios.py b/lib/ansible/modules/extras/monitoring/nagios.py
index 7b8f039f0e..23cbe7d0ec 100644
--- a/lib/ansible/modules/extras/monitoring/nagios.py
+++ b/lib/ansible/modules/extras/monitoring/nagios.py
@@ -912,6 +912,8 @@ class Nagios(object):
         elif self.action == 'enable_alerts':
             if self.services == 'host':
                 self.enable_host_notifications(self.host)
+            elif self.services == 'all':
+                self.enable_host_svc_notifications(self.host)
             else:
                 self.enable_svc_notifications(self.host,
                                               services=self.services)
@@ -919,6 +921,8 @@ class Nagios(object):
         elif self.action == 'disable_alerts':
             if self.services == 'host':
                 self.disable_host_notifications(self.host)
+            elif self.services == 'all':
+                self.disable_host_svc_notifications(self.host)
             else:
                 self.disable_svc_notifications(self.host,
                                                services=self.services)
