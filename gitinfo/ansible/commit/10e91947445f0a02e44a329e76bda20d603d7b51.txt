commit 10e91947445f0a02e44a329e76bda20d603d7b51
Author: Johan Wir√©n <johan.wiren.se@gmail.com>
Date:   Wed Jul 10 22:54:33 2013 +0200

    Fix for populating default_ipv6 on BSD systems

diff --git a/library/system/setup b/library/system/setup
index a151aa4693..dbd2029dde 100644
--- a/library/system/setup
+++ b/library/system/setup
@@ -1525,13 +1525,13 @@ class GenericBsdIfconfigNetwork(Network):
     def get_default_interfaces(self, route_path):
 
         # Use the commands:
-        #     route -n get 8.8.8.8                     -> Google public DNS
-        #     route -n get 2404:6800:400a:800::1012    -> ipv6.google.com
+        #     route -n get 8.8.8.8                            -> Google public DNS
+        #     route -n get -inet6 2404:6800:400a:800::1012    -> ipv6.google.com
         # to find out the default outgoing interface, address, and gateway
 
         command = dict(
             v4 = [route_path, '-n', 'get', '8.8.8.8'],
-            v6 = [route_path, '-n', 'get', '2404:6800:400a:800::1012']
+            v6 = [route_path, '-n', 'get', '-inet6', '2404:6800:400a:800::1012']
         )
 
         interface = dict(v4 = {}, v6 = {})
