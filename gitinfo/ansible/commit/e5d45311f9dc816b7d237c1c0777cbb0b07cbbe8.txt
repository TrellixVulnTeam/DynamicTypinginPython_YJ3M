commit e5d45311f9dc816b7d237c1c0777cbb0b07cbbe8
Author: Serge van Ginderachter <serge@vanginderachter.be>
Date:   Thu Oct 10 21:34:37 2013 +0200

    Implement a |changed filter plugin

diff --git a/lib/ansible/runner/filter_plugins/core.py b/lib/ansible/runner/filter_plugins/core.py
index 2729938dae..15d13e6c69 100644
--- a/lib/ansible/runner/filter_plugins/core.py
+++ b/lib/ansible/runner/filter_plugins/core.py
@@ -34,7 +34,8 @@ def to_nice_json(*a, **kw):
     return json.dumps(*a, indent=4, sort_keys=True, **kw)
 
 def failed(*a, **kw):
-    item = a[0] 
+    ''' Test if task result yields failed '''
+    item = a[0]
     if type(item) != dict:
         raise errors.AnsibleFilterError("|failed expects a dictionary")
     rc = item.get('rc',0)
@@ -45,9 +46,18 @@ def failed(*a, **kw):
         return False
 
 def success(*a, **kw):
+    ''' Test if task result yields success '''
     return not failed(*a, **kw)
 
+def changed(*a, **kw):
+    ''' Test if task result yields changed '''
+    item = a[0]
+    if type(item) != dict:
+        raise errors.AnsibleFilterError("|changed expects a dictionary")
+    return item.get('changed', False)
+
 def skipped(*a, **kw):
+    ''' Test if task result yields skipped '''
     item = a[0]
     if type(item) != dict:
         raise errors.AnsibleFilterError("|skipped expects a dictionary")
@@ -106,6 +116,9 @@ class FilterModule(object):
             'failed'  : failed,
             'success' : success,
 
+            # changed testing
+            'changed' : changed,
+
             # skip testing
             'skipped' : skipped,
 
