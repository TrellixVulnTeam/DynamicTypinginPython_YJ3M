commit 0e0e5097a95ae7606613f8096e5159792de72e15
Author: Jan-Piet Mens <jpmens@gmail.com>
Date:   Thu May 11 12:26:32 2017 +0200

    Optionally return raw data from URL lookup using split_lines=False

diff --git a/lib/ansible/plugins/lookup/url.py b/lib/ansible/plugins/lookup/url.py
index 2686543c30..135256d1dc 100644
--- a/lib/ansible/plugins/lookup/url.py
+++ b/lib/ansible/plugins/lookup/url.py
@@ -36,6 +36,7 @@ class LookupModule(LookupBase):
     def run(self, terms, variables=None, **kwargs):
 
         validate_certs = kwargs.get('validate_certs', True)
+        split_lines = kwargs.get('split_lines', True)
 
         ret = []
         for term in terms:
@@ -51,6 +52,9 @@ class LookupModule(LookupBase):
             except ConnectionError as e:
                 raise AnsibleError("Error connecting to %s: %s" % (term, str(e)))
 
-            for line in response.read().splitlines():
-                ret.append(to_text(line))
+            if split_lines:
+                for line in response.read().splitlines():
+                    ret.append(to_text(line))
+            else:
+                ret.append(to_text(response.read()))
         return ret
