commit 0e3e646189552950a9ae2e681a21554b2003d910
Author: Adam Miller <admiller@redhat.com>
Date:   Tue Oct 23 11:39:55 2018 -0500

    don't restrict disable_excludes choices incorrectly (#47453)
    
    * don't restrict disable_excludes choices incorrectly
    
    Fixes #47085
    
    Signed-off-by: Adam Miller <admiller@redhat.com>

diff --git a/changelogs/fragments/dnfyum-disable-excludes.yaml b/changelogs/fragments/dnfyum-disable-excludes.yaml
new file mode 100644
index 0000000000..e4b4d367db
--- /dev/null
+++ b/changelogs/fragments/dnfyum-disable-excludes.yaml
@@ -0,0 +1,3 @@
+---
+minor_changes:
+  - "dnf appropriately handles disable_excludes repoid argument"
diff --git a/lib/ansible/module_utils/yumdnf.py b/lib/ansible/module_utils/yumdnf.py
index c71f62bee7..b60c1e4248 100644
--- a/lib/ansible/module_utils/yumdnf.py
+++ b/lib/ansible/module_utils/yumdnf.py
@@ -24,7 +24,7 @@ yumdnf_argument_spec = dict(
         autoremove=dict(type='bool', default=False),
         bugfix=dict(required=False, type='bool', default=False),
         conf_file=dict(type='str'),
-        disable_excludes=dict(type='str', default=None, choices=['all', 'main', 'repoid']),
+        disable_excludes=dict(type='str', default=None),
         disable_gpg_check=dict(type='bool', default=False),
         disable_plugin=dict(type='list', default=[]),
         disablerepo=dict(type='list', default=[]),
diff --git a/lib/ansible/modules/packaging/os/dnf.py b/lib/ansible/modules/packaging/os/dnf.py
index fb7fa34ac0..1cfa90d7ce 100644
--- a/lib/ansible/modules/packaging/os/dnf.py
+++ b/lib/ansible/modules/packaging/os/dnf.py
@@ -142,7 +142,6 @@ options:
       - If set to C(all), disables all excludes.
       - If set to C(main), disable excludes defined in [main] in yum.conf.
       - If set to C(repoid), disable excludes defined for given repo id.
-    choices: [ all, main, repoid ]
     version_added: "2.7"
   validate_certs:
     description:
diff --git a/lib/ansible/modules/packaging/os/yum.py b/lib/ansible/modules/packaging/os/yum.py
index e167e35c51..409f118054 100644
--- a/lib/ansible/modules/packaging/os/yum.py
+++ b/lib/ansible/modules/packaging/os/yum.py
@@ -175,7 +175,6 @@ options:
       - If set to C(all), disables all excludes.
       - If set to C(main), disable excludes defined in [main] in yum.conf.
       - If set to C(repoid), disable excludes defined for given repo id.
-    choices: [ all, main, repoid ]
     version_added: "2.7"
   download_only:
     description:
