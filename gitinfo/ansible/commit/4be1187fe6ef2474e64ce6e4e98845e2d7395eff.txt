commit 4be1187fe6ef2474e64ce6e4e98845e2d7395eff
Author: Brian Coca <bcoca@ansible.com>
Date:   Mon Aug 31 16:48:31 2015 -0400

    much needed update to port makefile

diff --git a/packaging/port/sysutils/ansible/Makefile b/packaging/port/sysutils/ansible/Makefile
index 607f2f4a47..10016f9908 100644
--- a/packaging/port/sysutils/ansible/Makefile
+++ b/packaging/port/sysutils/ansible/Makefile
@@ -1,27 +1,66 @@
 # $FreeBSD$
 
-PORTNAME=       ansible
-PORTVERSION=    1.0
-PORTREVISION=   1
-CATEGORIES=     python net-mgmt
-MASTER_SITES=   http://releases.ansible.com/ansible/
-DISTNAME=		${PORTNAME}-${PORTVERSION}
+PORTNAME=	ansible
+PORTVERSION=	2.0
+PORTREVISION=	1
+CATEGORIES=	python net-mgmt sysutils
+MASTER_SITES=	http://releases.ansible.com/ansible/
+DISTNAME=	${PORTNAME}-${PORTVERSION}
 
-MAINTAINER=		briancoca+ansible@gmail.com
-COMMENT=        Ansible ssh based config management framework
+MAINTAINER=	bcoca@ansible.com
+COMMENT=	Ansible ssh based config management framework
 
-RUN_DEPENDS=   python>2.5:${PORTSDIR}/lang/python ${PORTSDIR}/devel/py-Jinja2 ${PORTSDIR}/devel/py-yaml \
-				${PORTSDIR}/security/py-paramiko ${PORTSDIR}/devel/py-simplejson
+LICENSE=	GPLv3
+LICENSE_FILE=	${WRKSRC}/COPYING
+
+RUN_DEPENDS=	python>2.5:${PORTSDIR}/lang/python \
+               ${PORTSDIR}/devel/py-Jinja2 \
+               ${PORTSDIR}/devel/py-yaml \
+               ${PORTSDIR}/security/py-paramiko \
+               ${PORTSDIR}/devel/py-simplejson \
+               ${PORTSDIR}/security/py-pycrypto
+
+OPTIONS_DEFINE=	EXAMPLES
 
 FETCH_ARGS=	-pRr
 
-USE_PYTHON=     yes
+USE_PYTHON=	yes
 USE_PYDISTUTILS=	yes
 
-#TODO:add optional dependencies (fireball mode i.e)
+CPE_VENDOR=	Ansible Inc
+
+SUB_FILES=	pkg-message
+
+PLIST_FILES+=	man/man1/ansible-doc.1.gz \
+                man/man1/ansible-galaxy.1.gz \
+                man/man1/ansible-playbook.1.gz \
+                man/man1/ansible-pull.1.gz \
+                man/man1/ansible-vault.1.gz \
+                man/man1/ansible.1.gz
+
+PORTEXAMPLES=	ansible.cfg hosts
+
+post-patch:
+.for f in bin/ansible-galaxy docs/man/man1/ansible-galaxy.1 \
+        docs/man/man1/ansible-playbook.1 docs/man/man1/ansible.1 \
+        examples/ansible.cfg examples/hosts lib/ansible/constants.py \
+        lib/ansible/module_utils/urls.py lib/ansible/modules/core/system/setup.py \
+        lib/ansible/playbook/__init__.py lib/ansible/runner/__init__.py
+        @${REINPLACE_CMD} -e 's|/etc/ansible|${ETCDIR}|' ${WRKSRC}/${f}
+.endfor
+
+.for f in docs/man/man1/ansible-playbook.1 docs/man/man1/ansible.1 \
+        examples/ansible.cfg lib/ansible/constants.py \
+        lib/ansible/playbook/__init__.py lib/ansible/runner/__init__.py \
+        @${REINPLACE_CMD} -e 's|/usr/share/ansible|${DATADIR}|' ${WRKSRC}/${f}
+.endfor
 
-# extracts with github name + short hash, needs to be updated with new releases
-#pre-configure:
-#	@${MV} ${WRKDIR}/ansible ${WRKSRC}
+post-install:
+				@${MKDIR} ${STAGEDIR}${MAN1PREFIX}/man/man1
+				${INSTALL_MAN} ${WRKSRC}/docs/man/man1/*.1 \
+            ${STAGEDIR}${MAN1PREFIX}/man/man1
+				@${MKDIR} ${STAGEDIR}${EXAMPLESDIR}
+				${INSTALL_DATA} ${WRKSRC}/examples/ansible.cfg ${STAGEDIR}${EXAMPLESDIR}
+				${INSTALL_DATA} ${WRKSRC}/examples/hosts ${STAGEDIR}${EXAMPLESDIR}
 
 .include <bsd.port.mk>
