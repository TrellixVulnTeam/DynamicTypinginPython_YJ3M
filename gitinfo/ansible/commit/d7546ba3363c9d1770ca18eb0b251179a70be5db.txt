commit d7546ba3363c9d1770ca18eb0b251179a70be5db
Author: Sam Doran <sdoran@redhat.com>
Date:   Thu Feb 27 15:01:15 2020 -0500

    Fix PostgreSQL tests for newer FreeBSD versions (#67658)
    
    Use PostgreSQL 9.5 on FreeBSD 12.0, and PostgreSQL 11 on FreeBSD 12.1 and 11.3 due to the Python packages having a dependency on that version of PostgreSQL and automatically uninstalling PostgreSQL 9.5.
    
    * Use separate PostgreSQL versions for 12.0 and 12.1

diff --git a/test/integration/targets/setup_postgresql_db/tasks/main.yml b/test/integration/targets/setup_postgresql_db/tasks/main.yml
index aa6201689e..651f6b3946 100644
--- a/test/integration/targets/setup_postgresql_db/tasks/main.yml
+++ b/test/integration/targets/setup_postgresql_db/tasks/main.yml
@@ -59,7 +59,9 @@
     loop_var: loop_item
 
 - name: install dependencies for postgresql test
-  package: name={{ postgresql_package_item }} state=present
+  package:
+    name: "{{ postgresql_package_item }}"
+    state: present
   with_items: "{{ postgresql_packages }}"
   loop_control:
     loop_var: postgresql_package_item
diff --git a/test/integration/targets/setup_postgresql_db/vars/FreeBSD-11-py3.yml b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-11-py3.yml
new file mode 100644
index 0000000000..2f6b0d9846
--- /dev/null
+++ b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-11-py3.yml
@@ -0,0 +1,12 @@
+postgresql_packages:
+  - postgresql95-server
+  - py36-psycopg2
+
+pg_dir: /usr/local/pgsql/data
+pg_hba_location: "{{ pg_dir }}/pg_hba.conf"
+pg_ver: 9.5
+pg_user: pgsql
+pg_group: pgsql
+
+locale_latin_suffix: .ISO8859-1
+locale_utf8_suffix: .UTF-8
diff --git a/test/integration/targets/setup_postgresql_db/vars/FreeBSD-11.yml b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-11.yml
new file mode 100644
index 0000000000..efb0603b5e
--- /dev/null
+++ b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-11.yml
@@ -0,0 +1,12 @@
+postgresql_packages:
+  - postgresql95-server
+  - py27-psycopg2
+
+pg_dir: /usr/local/pgsql/data
+pg_hba_location: "{{ pg_dir }}/pg_hba.conf"
+pg_ver: 9.5
+pg_user: pgsql
+pg_group: pgsql
+
+locale_latin_suffix: .ISO8859-1
+locale_utf8_suffix: .UTF-8
diff --git a/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.0-py3.yml b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.0-py3.yml
new file mode 100644
index 0000000000..2f6b0d9846
--- /dev/null
+++ b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.0-py3.yml
@@ -0,0 +1,12 @@
+postgresql_packages:
+  - postgresql95-server
+  - py36-psycopg2
+
+pg_dir: /usr/local/pgsql/data
+pg_hba_location: "{{ pg_dir }}/pg_hba.conf"
+pg_ver: 9.5
+pg_user: pgsql
+pg_group: pgsql
+
+locale_latin_suffix: .ISO8859-1
+locale_utf8_suffix: .UTF-8
diff --git a/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.0.yml b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.0.yml
new file mode 100644
index 0000000000..1fe6678262
--- /dev/null
+++ b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.0.yml
@@ -0,0 +1,12 @@
+postgresql_packages:
+  - postgresql96-server
+  - py27-psycopg2
+
+pg_dir: /usr/local/pgsql/data
+pg_hba_location: "{{ pg_dir }}/pg_hba.conf"
+pg_ver: 9.6
+pg_user: pgsql
+pg_group: pgsql
+
+locale_latin_suffix: .ISO8859-1
+locale_utf8_suffix: .UTF-8
diff --git a/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.1-py3.yml b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.1-py3.yml
new file mode 100644
index 0000000000..cd7c83a4c1
--- /dev/null
+++ b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.1-py3.yml
@@ -0,0 +1,12 @@
+postgresql_packages:
+  - postgresql11-server
+  - py36-psycopg2
+
+pg_dir: /var/db/postgres/data11
+pg_hba_location: "{{ pg_dir }}/pg_hba.conf"
+pg_ver: 11
+pg_user: postgres
+pg_group: postgres
+
+locale_latin_suffix: .ISO8859-1
+locale_utf8_suffix: .UTF-8
diff --git a/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.1.yml b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.1.yml
new file mode 100644
index 0000000000..0b1ab5b26e
--- /dev/null
+++ b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-12.1.yml
@@ -0,0 +1,12 @@
+postgresql_packages:
+  - postgresql11-server
+  - py27-psycopg2
+
+pg_dir: /var/db/postgres/data11
+pg_hba_location: "{{ pg_dir }}/pg_hba.conf"
+pg_ver: 11
+pg_user: postgres
+pg_group: postgres
+
+locale_latin_suffix: .ISO8859-1
+locale_utf8_suffix: .UTF-8
diff --git a/test/integration/targets/setup_postgresql_db/vars/FreeBSD-py3.yml b/test/integration/targets/setup_postgresql_db/vars/FreeBSD-py3.yml
deleted file mode 100644
index 7fef557924..0000000000
--- a/test/integration/targets/setup_postgresql_db/vars/FreeBSD-py3.yml
+++ /dev/null
@@ -1,12 +0,0 @@
-postgresql_packages:
-  - "postgresql95-server"
-  - "py36-psycopg2"
-
-pg_hba_location: "/usr/local/pgsql/data/pg_hba.conf"
-pg_dir: "/usr/local/pgsql/data"
-pg_ver: 9.5
-pg_user: pgsql
-pg_group: pgsql
-
-locale_latin_suffix: .ISO8859-1
-locale_utf8_suffix: .UTF-8
diff --git a/test/integration/targets/setup_postgresql_db/vars/FreeBSD.yml b/test/integration/targets/setup_postgresql_db/vars/FreeBSD.yml
deleted file mode 100644
index 216befe9d2..0000000000
--- a/test/integration/targets/setup_postgresql_db/vars/FreeBSD.yml
+++ /dev/null
@@ -1,12 +0,0 @@
-postgresql_packages:
-  - "postgresql95-server"
-  - "py27-psycopg2"
-
-pg_hba_location: "/usr/local/pgsql/data/pg_hba.conf"
-pg_dir: "/usr/local/pgsql/data"
-pg_ver: 9.5
-pg_user: pgsql
-pg_group: pgsql
-
-locale_latin_suffix: .ISO8859-1
-locale_utf8_suffix: .UTF-8
