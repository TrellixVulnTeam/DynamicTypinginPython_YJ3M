commit 7e2305f95383bab8e36a4353a04f70fc35e26636
Author: James Cammarata <jimi@sngx.net>
Date:   Mon Nov 21 13:02:24 2016 -0600

    Cache dynamically included blocks for later lookup via uuid
    
    Fixes #18357

diff --git a/lib/ansible/plugins/strategy/__init__.py b/lib/ansible/plugins/strategy/__init__.py
index 7ff1491d75..3157793491 100644
--- a/lib/ansible/plugins/strategy/__init__.py
+++ b/lib/ansible/plugins/strategy/__init__.py
@@ -783,6 +783,7 @@ class StrategyBase:
                     # of hosts which included the file to the notified_handlers dict
                     for block in new_blocks:
                         iterator._play.handlers.append(block)
+                        iterator.cache_block_tasks(block)
                         for task in block.block:
                             result = self._do_handler_run(
                                 handler=task,
