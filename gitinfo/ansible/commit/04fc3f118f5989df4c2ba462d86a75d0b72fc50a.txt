commit 04fc3f118f5989df4c2ba462d86a75d0b72fc50a
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Wed Dec 9 08:23:45 2015 -0800

    Code smell test for specifying both required and default in FieldAttributes

diff --git a/.travis.yml b/.travis.yml
index 1ff0ca118d..603132f722 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -24,6 +24,7 @@ script:
 - ./test/code-smell/replace-urlopen.sh .
 - ./test/code-smell/use-compat-six.sh lib
 - ./test/code-smell/boilerplate.sh
+- ./test/code-smell/required-and-default-attributes.sh
 - if test x"$TOXENV" != x'py24' ; then tox ; fi
 - if test x"$TOXENV" = x'py24' ; then python2.4 -V && python2.4 -m compileall -fq -x 'module_utils/(a10|rax|openstack|ec2|gce).py' lib/ansible/module_utils ; fi
   #- make -C docsite all
diff --git a/test/code-smell/required-and-default-attributes.sh b/test/code-smell/required-and-default-attributes.sh
new file mode 100755
index 0000000000..9822a15597
--- /dev/null
+++ b/test/code-smell/required-and-default-attributes.sh
@@ -0,0 +1,10 @@
+#!/bin/sh
+
+BASEDIR=${1-"lib/ansible"}
+cd "$BASEDIR"
+grep -r FieldAttribute . |grep 'default' | grep 'required'
+if test $? -eq 0 ; then
+    exit 1
+fi
+exit 0
+
