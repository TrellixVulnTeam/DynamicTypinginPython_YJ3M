commit 9c9b22dc8faded7c81b4ed62b56b2616db980a97
Author: John Baublitz <john@cambridgesemantics.com>
Date:   Tue May 24 14:55:38 2016 -0400

    Changes to allow 'auto' mode which does not allow IP address specification

diff --git a/lib/ansible/modules/cloud/google/gce_net.py b/lib/ansible/modules/cloud/google/gce_net.py
index 20136c8ff0..368f42ced6 100644
--- a/lib/ansible/modules/cloud/google/gce_net.py
+++ b/lib/ansible/modules/cloud/google/gce_net.py
@@ -240,12 +240,16 @@ def main():
 
         # user wants to create a new network that doesn't yet exist
         if name and not network:
-            if not ipv4_range:
-                module.fail_json(msg="Network '" + name + "' is not found. To create network, 'ipv4_range' parameter is required",
+            if not ipv4_range and mode != 'auto':
+                module.fail_json(msg="Network '" + name + "' is not found. To create network in legacy mode, 'ipv4_range' parameter is required",
                     changed=False)
+            if mode == 'legacy':
+                kwargs = {}
+            else:
+                kwargs = {'mode': mode}
 
             try:
-                network = gce.ex_create_network(name, ipv4_range, mode=mode)
+                network = gce.ex_create_network(name, ipv4_range, **kwargs)
                 json_output['name'] = name
                 json_output['ipv4_range'] = ipv4_range
                 changed = True
