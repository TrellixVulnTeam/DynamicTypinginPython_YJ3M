commit c0f3777fe2a41d4b8884dce82e5dc4d74c261f6b
Author: Chris Van Heuveln <cvanheuv@cisco.com>
Date:   Thu Sep 12 12:16:52 2019 -0400

    nxos_l2_interfaces: fix for integration tests failing to setup layer2 (#61887)

diff --git a/test/integration/targets/nxos_l2_interfaces/tests/cli/deleted.yaml b/test/integration/targets/nxos_l2_interfaces/tests/cli/deleted.yaml
index 3424920c38..d52a568aaf 100644
--- a/test/integration/targets/nxos_l2_interfaces/tests/cli/deleted.yaml
+++ b/test/integration/targets/nxos_l2_interfaces/tests/cli/deleted.yaml
@@ -17,8 +17,10 @@
     cli_config:
       config: |
         interface {{ test_int1 }}
+          switchport
           switchport trunk native vlan 10
         interface {{ test_int2 }}
+          switchport
           switchport trunk allowed vlan 20
 
   - name: Gather l2_interfaces facts
diff --git a/test/integration/targets/nxos_l2_interfaces/tests/cli/merged.yaml b/test/integration/targets/nxos_l2_interfaces/tests/cli/merged.yaml
index c1ad948eb2..72aba5ebda 100644
--- a/test/integration/targets/nxos_l2_interfaces/tests/cli/merged.yaml
+++ b/test/integration/targets/nxos_l2_interfaces/tests/cli/merged.yaml
@@ -11,6 +11,12 @@
   ignore_errors: yes
 
 - block:
+  - name: setup2
+    cli_config:
+      config: |
+        interface {{ test_int1 }}
+          switchport
+
   - name: Merged
     nxos_l2_interfaces: &merged
       config:
diff --git a/test/integration/targets/nxos_l2_interfaces/tests/cli/overridden.yaml b/test/integration/targets/nxos_l2_interfaces/tests/cli/overridden.yaml
index 09a01da83b..63f0d327e7 100644
--- a/test/integration/targets/nxos_l2_interfaces/tests/cli/overridden.yaml
+++ b/test/integration/targets/nxos_l2_interfaces/tests/cli/overridden.yaml
@@ -17,7 +17,10 @@
     cli_config:
       config: |
         interface {{ test_int1 }}
+          switchport
           switchport trunk allowed vlan 11
+        interface {{ test_int2 }}
+          switchport
 
   - name: Gather l2_interfaces facts
     nxos_facts: &facts
diff --git a/test/integration/targets/nxos_l2_interfaces/tests/cli/replaced.yaml b/test/integration/targets/nxos_l2_interfaces/tests/cli/replaced.yaml
index f5baf3a3ce..0e98182a80 100644
--- a/test/integration/targets/nxos_l2_interfaces/tests/cli/replaced.yaml
+++ b/test/integration/targets/nxos_l2_interfaces/tests/cli/replaced.yaml
@@ -17,8 +17,10 @@
     cli_config:
       config: |
         interface {{ test_int1 }}
+          switchport
           switchport access vlan 5
         interface {{ test_int2 }}
+          switchport
           switchport trunk native vlan 15
 
   - name: Gather l2_interfaces facts
