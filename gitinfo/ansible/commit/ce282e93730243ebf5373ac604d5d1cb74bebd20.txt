commit ce282e93730243ebf5373ac604d5d1cb74bebd20
Author: Brian Coca <bcoca@ansible.com>
Date:   Mon Aug 8 14:25:59 2016 -0400

    correctly detect action
    
    named matched only cause i set it to the same in my tests
    fixes #14857

diff --git a/lib/ansible/executor/task_executor.py b/lib/ansible/executor/task_executor.py
index e454f493c2..e34c4784e1 100644
--- a/lib/ansible/executor/task_executor.py
+++ b/lib/ansible/executor/task_executor.py
@@ -194,7 +194,7 @@ class TaskExecutor:
 
                 # give lookup task 'context' for subdir (mostly needed for first_found)
                 for subdir in ['template', 'var', 'file']: #TODO: move this to constants?
-                    if subdir in self._task.name:
+                    if subdir in self._task.action:
                         break
                 setattr(mylookup,'_subdir', subdir + 's')
 
