commit 64312a09c9f70daf0c61130870692a93144e304b
Author: Nathaniel Case <ncase@redhat.com>
Date:   Fri Aug 23 13:07:52 2019 -0400

    Add use_proxy option to httpapi (#59259)

diff --git a/lib/ansible/plugins/connection/httpapi.py b/lib/ansible/plugins/connection/httpapi.py
index f47163c290..0140032ab7 100644
--- a/lib/ansible/plugins/connection/httpapi.py
+++ b/lib/ansible/plugins/connection/httpapi.py
@@ -77,6 +77,14 @@ options:
     default: True
     vars:
       - name: ansible_httpapi_validate_certs
+  use_proxy:
+    type: boolean
+    version_added: "2.9"
+    description:
+      - Whether to use https_proxy for requests.
+    default: True
+    vars:
+      - name: ansible_httpapi_use_proxy
   timeout:
     type: int
     description:
@@ -257,6 +265,7 @@ class Connection(NetworkConnectionBase):
         '''
         url_kwargs = dict(
             timeout=self.get_option('timeout'), validate_certs=self.get_option('validate_certs'),
+            use_proxy=self.get_option("use_proxy"),
             headers={},
         )
         url_kwargs.update(kwargs)
