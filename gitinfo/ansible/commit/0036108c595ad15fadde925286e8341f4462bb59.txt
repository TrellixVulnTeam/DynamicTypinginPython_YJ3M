commit 0036108c595ad15fadde925286e8341f4462bb59
Author: Dag Wieers <dag@wieers.com>
Date:   Tue Mar 22 11:04:25 2016 +0100

    Implement destructor to ensure newline and terminal attributes
    
    Also fixed a typo

diff --git a/lib/ansible/plugins/callback/dense.py b/lib/ansible/plugins/callback/dense.py
index 5c0540e71b..2a78267138 100644
--- a/lib/ansible/plugins/callback/dense.py
+++ b/lib/ansible/plugins/callback/dense.py
@@ -180,6 +180,9 @@ class CallbackModule_dense(CallbackModule_default):
         sys.stdout.write(vt100.reset + vt100.save + vt100.clearline)
         sys.stdout.flush()
 
+    def __del__(self):
+        sys.stdout.write(vt100.restore + vt100.reset + '\n' + vt100.save + vt100.clearline)
+
     def _add_host(self, result, status):
         name = result._host.get_name()
 
@@ -349,7 +352,7 @@ class CallbackModule_dense(CallbackModule_default):
 
         # Write the next task on screen (behind the prompt is the previous output)
         sys.stdout.write('%s %d.' % (self.type, self.count[self.type]))
-        sys.stdout.write(v100.reset)
+        sys.stdout.write(vt100.reset)
         sys.stdout.flush()
 
     def v2_playbook_on_handler_task_start(self, task):
@@ -372,7 +375,7 @@ class CallbackModule_dense(CallbackModule_default):
 
         # Write the next task on screen (behind the prompt is the previous output)
         sys.stdout.write('%s %d.' % (self.type, self.count[self.type]))
-        sys.stdout.write(v100.reset)
+        sys.stdout.write(vt100.reset)
         sys.stdout.flush()
 
     def v2_playbook_on_cleanup_task_start(self, task):
