commit 8478e8264732d9abd91435c13fa03d6457cf720d
Author: James Tanner <tanner.jc@gmail.com>
Date:   Fri Oct 18 11:19:16 2013 -0400

    Fixes #4583 enforce that vars_files is a list

diff --git a/lib/ansible/playbook/play.py b/lib/ansible/playbook/play.py
index b684fb7f28..04d84002db 100644
--- a/lib/ansible/playbook/play.py
+++ b/lib/ansible/playbook/play.py
@@ -74,6 +74,8 @@ class Play(object):
         # We first load the vars files from the datastructure
         # so we have the default variables to pass into the roles
         self.vars_files = ds.get('vars_files', [])
+        if not isinstance(self.vars_files, list):
+            raise errors.AnsibleError('vars_files must be a list')
         self._update_vars_files_for_host(None)
 
         # now we load the roles into the datastructure
@@ -83,6 +85,8 @@ class Play(object):
         # and finally re-process the vars files as they may have
         # been updated by the included roles
         self.vars_files = ds.get('vars_files', [])
+        if not isinstance(self.vars_files, list):
+            raise errors.AnsibleError('vars_files must be a list')
         self._update_vars_files_for_host(None)
 
         # template everything to be efficient, but do not pre-mature template
