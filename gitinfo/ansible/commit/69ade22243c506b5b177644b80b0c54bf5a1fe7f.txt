commit 69ade22243c506b5b177644b80b0c54bf5a1fe7f
Author: Dag Wieers <dag@wieers.com>
Date:   Wed Jul 5 00:04:30 2017 +0200

    win_chocolatey: Fix updating 'all' packages (#26417)
    
    This fixes #15018

diff --git a/lib/ansible/modules/windows/win_chocolatey.ps1 b/lib/ansible/modules/windows/win_chocolatey.ps1
index 42a385771f..236a6c95f1 100644
--- a/lib/ansible/modules/windows/win_chocolatey.ps1
+++ b/lib/ansible/modules/windows/win_chocolatey.ps1
@@ -101,6 +101,10 @@ Function Choco-IsInstalled
         [string]$package
     )
 
+    if ($package -eq "all") {
+        return $true
+    }
+
     $cmd = "$executable list --local-only --exact $package"
     $output = invoke-expression $cmd
 
