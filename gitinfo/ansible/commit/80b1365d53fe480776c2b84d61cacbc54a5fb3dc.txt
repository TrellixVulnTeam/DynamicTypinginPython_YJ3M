commit 80b1365d53fe480776c2b84d61cacbc54a5fb3dc
Author: Brian Coca <bcoca@ansible.com>
Date:   Sat Nov 1 23:19:25 2014 -0400

    now correctly processes modules when in subdirs of cloud

diff --git a/hacking/module_formatter.py b/hacking/module_formatter.py
index 1218b85e71..fe0da35ed8 100755
--- a/hacking/module_formatter.py
+++ b/hacking/module_formatter.py
@@ -127,11 +127,12 @@ def list_modules(module_dir):
     files = glob.glob("%s/*/*" % module_dir)
     for d in files:
         if os.path.isdir(d):
-            files2 = glob.glob("%s/*" % d)
+            files2 = glob.glob("%s/*" % d) + glob.glob("%s/*/*" % d)
             for f in files2:
-
                 module = os.path.splitext(os.path.basename(f))[0]
-                category = os.path.dirname(f).split("/")[-1]
+                category = "cloud"
+                if os.path.dirname(f).split("/")[-2] != "cloud":
+                    category = os.path.dirname(f).split("/")[-1]
 
                 if not f.endswith(".py") or f.endswith('__init__.py'):
                     # windows powershell modules have documentation stubs in python docstring
