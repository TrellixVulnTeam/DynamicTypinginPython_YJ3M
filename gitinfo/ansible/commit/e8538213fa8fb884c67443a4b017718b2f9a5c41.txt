commit e8538213fa8fb884c67443a4b017718b2f9a5c41
Author: Nathaniel Case <this.is@nathanielca.se>
Date:   Wed Apr 5 07:12:13 2017 -0400

    Fix various junos errors (#23278)

diff --git a/lib/ansible/modules/network/junos/junos_command.py b/lib/ansible/modules/network/junos/junos_command.py
index 1b4c1caa9d..cab0bfe166 100644
--- a/lib/ansible/modules/network/junos/junos_command.py
+++ b/lib/ansible/modules/network/junos/junos_command.py
@@ -246,7 +246,7 @@ def parse_rpcs(module):
 
     return items
 
-def parse_commands(module):
+def parse_commands(module, warnings):
     items = list()
 
     for command in (module.params['commands'] or list()):
@@ -301,7 +301,7 @@ def main():
     check_args(module, warnings)
 
     items = list()
-    items.extend(parse_commands(module))
+    items.extend(parse_commands(module, warnings))
     items.extend(parse_rpcs(module))
 
     wait_for = module.params['wait_for'] or list()
diff --git a/lib/ansible/modules/network/junos/junos_config.py b/lib/ansible/modules/network/junos/junos_config.py
index b69b1e570e..ac738d6c4e 100644
--- a/lib/ansible/modules/network/junos/junos_config.py
+++ b/lib/ansible/modules/network/junos/junos_config.py
@@ -194,7 +194,7 @@ def check_args(module, warnings):
     if module.params['replace'] is not None:
         module.fail_json(msg='argument replace is deprecated, use update')
 
-zeroize = lambda x: send_request(x, Element('request-system-zeroize'))
+zeroize = lambda x: send_request(x, ElementTree.Element('request-system-zeroize'))
 rollback = lambda x: get_diff(x)
 
 def guess_format(config):
diff --git a/lib/ansible/modules/network/junos/junos_facts.py b/lib/ansible/modules/network/junos/junos_facts.py
index db9357b509..1f47e35ae6 100644
--- a/lib/ansible/modules/network/junos/junos_facts.py
+++ b/lib/ansible/modules/network/junos/junos_facts.py
@@ -65,7 +65,7 @@ ansible_facts:
 """
 
 import re
-from xml.etree.ElementTree import Element, SubElement
+from xml.etree.ElementTree import Element, SubElement, tostring
 
 from ansible.module_utils.basic import AnsibleModule
 from ansible.module_utils.six import iteritems
@@ -89,7 +89,7 @@ class FactsBase(object):
         reply = command(self.module, command)
         output = reply.find('.//output')
         if not output:
-            module.fail_json(msg='failed to retrieve facts for command %s' % command)
+            self.module.fail_json(msg='failed to retrieve facts for command %s' % command)
         return str(output.text).strip()
 
     def rpc(self, rpc):
diff --git a/lib/ansible/modules/network/junos/junos_user.py b/lib/ansible/modules/network/junos/junos_user.py
index 470276c4a2..652553fc82 100644
--- a/lib/ansible/modules/network/junos/junos_user.py
+++ b/lib/ansible/modules/network/junos/junos_user.py
@@ -119,7 +119,7 @@ from functools import partial
 from ncclient.xml_ import new_ele, sub_ele, to_xml
 
 from ansible.module_utils.basic import AnsibleModule
-from ansible.module_utils.junos import load
+from ansible.module_utils.junos import load_config
 from ansible.module_utils.six import iteritems
 
 ROLES = ['operator', 'read-only', 'super-user', 'unauthorized']
@@ -242,7 +242,7 @@ def main():
     if module.params['purge']:
         kwargs['action'] = 'replace'
 
-    diff = load(module, ele, **kwargs)
+    diff = load_config(module, ele, **kwargs)
 
     if diff:
         result.update({
