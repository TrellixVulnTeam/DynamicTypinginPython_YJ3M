commit 32f264d50876a3f42909a77645d150f9609860b3
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Tue Aug 20 10:32:07 2019 -0700

    ansible-doc added a new required element and broke changelog generation
    
    ansible-doc should probably be using subcommands for its
    exclusive_options...

diff --git a/packaging/release/changelogs/changelog.py b/packaging/release/changelogs/changelog.py
index 576fc98e81..ab09bef716 100755
--- a/packaging/release/changelogs/changelog.py
+++ b/packaging/release/changelogs/changelog.py
@@ -26,7 +26,7 @@ except ImportError:
 
 from ansible import constants as C
 from ansible.module_utils.six import string_types
-from ansible.module_utils._text import to_bytes
+from ansible.module_utils._text import to_bytes, to_text
 
 BASE_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), '..', '..', '..'))
 CHANGELOG_DIR = os.path.join(BASE_DIR, 'changelogs')
@@ -180,8 +180,9 @@ def load_plugins(version, force_reload):
         plugins_data['plugins'] = {}
 
         for plugin_type in C.DOCUMENTABLE_PLUGINS:
-            plugins_data['plugins'][plugin_type] = json.loads(subprocess.check_output([os.path.join(BASE_DIR, 'bin', 'ansible-doc'),
-                                                                                       '--json', '-t', plugin_type]))
+            output = subprocess.check_output([os.path.join(BASE_DIR, 'bin', 'ansible-doc'),
+                                              '--json', '--metadata-dump', '-t', plugin_type])
+            plugins_data['plugins'][plugin_type] = json.loads(to_text(output))
 
         # remove empty namespaces from plugins
         for section in plugins_data['plugins'].values():
