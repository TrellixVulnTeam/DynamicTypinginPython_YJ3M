commit af06a97f17a94808d90fff0e9adc4d9a1b5781eb
Author: Brian Coca <bcoca@ansible.com>
Date:   Sun Aug 23 12:50:15 2015 -0400

    kept vars as alias to hostvars[inventory_hostname] and avoid subtrees into themselves

diff --git a/lib/ansible/vars/__init__.py b/lib/ansible/vars/__init__.py
index fbae5cf2e4..27f7221252 100644
--- a/lib/ansible/vars/__init__.py
+++ b/lib/ansible/vars/__init__.py
@@ -294,11 +294,8 @@ class VariableManager:
 
         all_vars['ansible_version'] = CLI.version_info(gitinfo=False)
 
-        # make vars self referential, so people can do things like 'vars[var_name]'
-        copied_vars = all_vars.copy()
-        if 'hostvars' in copied_vars:
-            del copied_vars['hostvars']
-        all_vars['vars'] = copied_vars
+        if 'hostvars' in all_vars and host:
+            all_vars['vars'] = all_vars['hostvars'][host.get_name()]
 
         #CACHED_VARS[cache_entry] = all_vars
 
