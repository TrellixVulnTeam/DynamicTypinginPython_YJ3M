commit aaaf37ae413c730b93cb7c484f335cbde94bb7fa
Author: dougluce <doug@github.con.com>
Date:   Tue May 24 22:54:07 2016 -0700

    Don't bomb if original didn't exist (#2295)
    
    If we don't have an existing file, original ends up as None.  Bug
    introduced in 70fa125

diff --git a/lib/ansible/modules/extras/files/blockinfile.py b/lib/ansible/modules/extras/files/blockinfile.py
old mode 100644
new mode 100755
index 81834dfd2d..da67e2d4b3
--- a/lib/ansible/modules/extras/files/blockinfile.py
+++ b/lib/ansible/modules/extras/files/blockinfile.py
@@ -281,7 +281,7 @@ def main():
 
     if lines:
         result = '\n'.join(lines)
-        if original.endswith('\n'):
+        if original and original.endswith('\n'):
             result += '\n'
     else:
         result = ''
