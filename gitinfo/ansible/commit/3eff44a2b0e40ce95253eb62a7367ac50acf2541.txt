commit 3eff44a2b0e40ce95253eb62a7367ac50acf2541
Author: Jeroen Hoekx <jeroen.hoekx@hamok.be>
Date:   Tue May 15 17:43:01 2012 +0200

    Arguments to setup module should be json.

diff --git a/lib/ansible/runner.py b/lib/ansible/runner.py
index 8dc5b784ea..a9a0945fea 100644
--- a/lib/ansible/runner.py
+++ b/lib/ansible/runner.py
@@ -275,6 +275,8 @@ class Runner(object):
             return [ utils.smjson(dict(skipped=True)), None, 'skipped' ]
 
         if self.module_name == 'setup':
+            if not args:
+                args = {}
             args = self._add_setup_vars(inject, args)
             args = self._add_setup_metadata(args)
 
