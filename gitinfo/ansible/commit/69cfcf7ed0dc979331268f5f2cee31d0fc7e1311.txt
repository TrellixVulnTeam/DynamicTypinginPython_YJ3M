commit 69cfcf7ed0dc979331268f5f2cee31d0fc7e1311
Author: James Cammarata <jimi@sngx.net>
Date:   Thu Sep 19 08:12:43 2013 -0500

    Minor change to -vvvv mode to only show debugging info for ssh conns
    
    Also added this feature to the CHANGELOG

diff --git a/CHANGELOG.md b/CHANGELOG.md
index 5adf3eb043..2967ee7375 100644
--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -16,6 +16,7 @@ New modules:
 
 Misc changes:
 
+* Added a -vvvv level, which will show SSH client debugging information in the event of a failure.
 * Includes now support the more standard syntax, similar to that of role includes and dependencies. It is no longer necessary to specify a special "vas" field for the variables passed to the include.
 * Changed the `user:` parameter on plays to `remote_user:` to prevent confusion with the module of the same name.  Still backwards compatible on play parameters.
 * Added parameter to allow the fetch module to skip the md5 validation step ('validate_md5=false'). This is usefull when fetching files that are actively being written to, such as live log files.
diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index 78895fe4da..be0d068248 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -776,7 +776,7 @@ class Runner(object):
         if result['rc'] != 0:
             if result['rc'] == 5:
                 output = 'Authentication failure.'
-            elif result['rc'] == 255:
+            elif result['rc'] == 255 and self.transport == 'ssh':
                 if utils.VERBOSITY > 3:
                     output = 'SSH encountered an unknown error. The output was:\n%s' % (result['stdout']+result['stderr'])
                 else:
