commit fa6d328b8f5bfb52bb63ccd49b9316fc29f5d0d1
Author: Ondra Machacek <omachace@redhat.com>
Date:   Thu May 23 20:26:21 2019 +0200

    kubevirt: Fix RS and presets template parameters (#56865)

diff --git a/lib/ansible/modules/cloud/kubevirt/kubevirt_preset.py b/lib/ansible/modules/cloud/kubevirt/kubevirt_preset.py
index 303ee05c1d..5492793889 100644
--- a/lib/ansible/modules/cloud/kubevirt/kubevirt_preset.py
+++ b/lib/ansible/modules/cloud/kubevirt/kubevirt_preset.py
@@ -129,8 +129,11 @@ class KubeVirtVMPreset(KubeVirtRawModule):
         # attributes there, remove when we do:
         definition['spec']['domain']['devices'] = dict()
 
+        # defaults for template
+        defaults = {'disks': [], 'volumes': [], 'interfaces': [], 'networks': []}
+
         # Execute the CURD of VM:
-        dummy, definition = self.construct_vm_definition(KIND, definition, definition)
+        dummy, definition = self.construct_vm_definition(KIND, definition, definition, defaults)
         result_crud = self.execute_crud(KIND, definition)
         changed = result_crud['changed']
         result = result_crud.pop('result')
diff --git a/lib/ansible/modules/cloud/kubevirt/kubevirt_rs.py b/lib/ansible/modules/cloud/kubevirt/kubevirt_rs.py
index 4611774ff6..d7b8d0ffef 100644
--- a/lib/ansible/modules/cloud/kubevirt/kubevirt_rs.py
+++ b/lib/ansible/modules/cloud/kubevirt/kubevirt_rs.py
@@ -173,9 +173,12 @@ class KubeVirtVMIRS(KubeVirtRawModule):
         if replicas is not None:
             definition['spec']['replicas'] = replicas
 
+        # defaults for template
+        defaults = {'disks': [], 'volumes': [], 'interfaces': [], 'networks': []}
+
         # Execute the CURD of VM:
         template = definition['spec']['template']
-        dummy, definition = self.construct_vm_definition(KIND, definition, template)
+        dummy, definition = self.construct_vm_definition(KIND, definition, template, defaults)
         result_crud = self.execute_crud(KIND, definition)
         changed = result_crud['changed']
         result = result_crud.pop('result')
