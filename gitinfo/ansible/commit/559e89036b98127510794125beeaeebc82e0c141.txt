commit 559e89036b98127510794125beeaeebc82e0c141
Author: James Tanner <tanner.jc@gmail.com>
Date:   Thu Jan 16 14:24:11 2014 -0500

    Fixes #5631 Return a unique list of hosts when joining groups

diff --git a/lib/ansible/inventory/__init__.py b/lib/ansible/inventory/__init__.py
index 14538db007..e7979011cd 100644
--- a/lib/ansible/inventory/__init__.py
+++ b/lib/ansible/inventory/__init__.py
@@ -179,7 +179,7 @@ class Inventory(object):
             elif p.startswith("&"):
                 hosts = [ h for h in hosts if h in that ]
             else:
-                hosts.extend([ h for h in that if h not in hosts ])
+                hosts.extend([ h for h in that if h.name not in [ y.name for y in hosts ] ])
 
         return hosts
 
