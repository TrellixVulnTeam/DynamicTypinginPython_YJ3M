commit 40ca1d4b3e5db2833aed30dbb4e9766466acbed5
Author: Jimmy Tang <jtang@tchpc.tcd.ie>
Date:   Mon Mar 11 15:22:37 2013 +0000

    Teach 'make rpm' to build on RHEL5/SL5 etc...

diff --git a/Makefile b/Makefile
index 3893b69332..5a96067cde 100644
--- a/Makefile
+++ b/Makefile
@@ -154,6 +154,7 @@ rpm: rpmcommon
 	--define "_specdir $(RPMSPECDIR)" \
 	--define "_sourcedir %{_topdir}" \
 	--define "_rpmfilename %%{NAME}-%%{VERSION}-%%{RELEASE}.%%{ARCH}.rpm" \
+	--define "__python `which $(PYTHON)`" \
 	-ba rpm-build/$(NAME).spec
 	@rm -f rpm-build/$(NAME).spec
 	@echo "#############################################"
diff --git a/packaging/rpm/ansible.spec b/packaging/rpm/ansible.spec
index 64305291ae..7b03cd6b28 100644
--- a/packaging/rpm/ansible.spec
+++ b/packaging/rpm/ansible.spec
@@ -14,11 +14,19 @@ Source0: https://github.com/downloads/ansible/ansible/%{name}-%{version}.tar.gz
 Url: http://ansible.github.com
 
 BuildArch: noarch
+%if 0%{?rhel} <= 5
+BuildRequires: python26-devel
+
+Requires: python26-PyYAML
+Requires: python26-paramiko
+Requires: python26-jinja2
+%else
 BuildRequires: python2-devel
 
 Requires: PyYAML
 Requires: python-paramiko
 Requires: python-jinja2
+%endif
 
 %description
 
@@ -32,8 +40,13 @@ are transferred to managed machines automatically.
 Summary: Ansible fireball transport support
 Group: Development/Libraries
 Requires: %{name} = %{version}-%{release}
+%if 0%{?rhel} <= 5
+Requires: python26-keyczar
+Requires: python26-zmq
+%else
 Requires: python-keyczar
 Requires: python-zmq
+%endif
 
 %description fireball
 
@@ -44,8 +57,13 @@ multiple actions, but requires additional supporting packages.
 %package node-fireball
 Summary: Ansible fireball transport - node end support
 Group: Development/Libraries
+%if 0%{?rhel} <= 5
+Requires: python26-keyczar
+Requires: python26-zmq
+%else
 Requires: python-keyczar
 Requires: python-zmq
+%endif
 
 %description node-fireball
 
