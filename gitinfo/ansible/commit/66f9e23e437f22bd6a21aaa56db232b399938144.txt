commit 66f9e23e437f22bd6a21aaa56db232b399938144
Author: Trishna Guha <trishnaguha17@gmail.com>
Date:   Fri Jun 23 20:08:12 2017 +0530

    vyos net_system implementation (#25994)
    
    Signed-off-by: Trishna Guha <trishnaguha17@gmail.com>

diff --git a/test/integration/targets/net_system/tests/cli/set_name_servers.yaml b/test/integration/targets/net_system/tests/cli/set_name_servers.yaml
index e803e60e48..ad5fbf6823 100644
--- a/test/integration/targets/net_system/tests/cli/set_name_servers.yaml
+++ b/test/integration/targets/net_system/tests/cli/set_name_servers.yaml
@@ -13,4 +13,7 @@
 - include: "{{ role_path }}/tests/eos/set_name_servers.yaml"
   when: hostvars[inventory_hostname]['ansible_network_os'] == 'eos'
 
+- include: "{{ role_path }}/tests/vyos/set_name_servers.yaml"
+  when: hostvars[inventory_hostname]['ansible_network_os'] == 'vyos'
+
 - debug: msg="END cli/set_name_servers.yaml"
diff --git a/test/integration/targets/net_system/tests/vyos/set_name_servers.yaml b/test/integration/targets/net_system/tests/vyos/set_name_servers.yaml
new file mode 100644
index 0000000000..e925555058
--- /dev/null
+++ b/test/integration/targets/net_system/tests/vyos/set_name_servers.yaml
@@ -0,0 +1,66 @@
+---
+- debug: msg="START vyos/set_name_servers.yaml"
+
+- name: setup
+  vyos_config:
+    lines:
+      - no ip name-server 1.1.1.1
+      - no ip name-server 2.2.2.2
+      - no ip name-server 3.3.3.3
+    match: none
+    provider: "{{ cli }}"
+
+- name: configure name_servers
+  vyos_system:
+    name_servers:
+      - 1.1.1.1
+      - 2.2.2.2
+      - 3.3.3.3
+    provider: "{{ cli }}"
+  register: result
+
+- assert:
+    that:
+      - result.changed == true
+      - result.commands|length == 3
+      - "'ip name-server 1.1.1.1' in result.commands"
+      - "'ip name-server 2.2.2.2' in result.commands"
+      - "'ip name-server 3.3.3.3' in result.commands"
+
+- name: verify name_servers
+  vyos_system:
+    name_servers:
+      - 1.1.1.1
+      - 2.2.2.2
+      - 3.3.3.3
+    provider: "{{ cli }}"
+  register: result
+
+- assert:
+    that:
+      - result.changed == false
+
+- name: remove one
+  vyos_system:
+    name_servers:
+      - 1.1.1.1
+      - 2.2.2.2
+    provider: "{{ cli }}"
+  register: result
+
+- assert:
+    that:
+      - result.changed == true
+      - result.commands|length == 1
+      - "'no ip name-server 3.3.3.3' in result.commands"
+
+- name: teardown
+  vyos_config:
+    lines:
+      - no ip lookup source-interface
+    match: none
+    provider: "{{ cli }}"
+  ignore_errors: yes
+  # FIXME Copied from iosxr, not sure what we need here
+
+- debug: msg="END vyos/set_name_servers.yaml"
