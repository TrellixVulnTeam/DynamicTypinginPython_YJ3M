commit afef20827b98bf4f1c36015982b25197bd0c9e4a
Author: Pierre-Louis Bonicoli <pierre-louis.bonicoli@libregerbil.fr>
Date:   Mon Apr 23 02:46:42 2018 +0200

    openshift_raw & openshift_scale: fix broken import

diff --git a/lib/ansible/module_utils/k8s/common.py b/lib/ansible/module_utils/k8s/common.py
index e8e7738b9f..37ec932022 100644
--- a/lib/ansible/module_utils/k8s/common.py
+++ b/lib/ansible/module_utils/k8s/common.py
@@ -101,23 +101,17 @@ class KubernetesAnsibleModule(AnsibleModule):
 
     def __init__(self, *args, **kwargs):
 
+        kwargs['argument_spec'] = self.argspec
+        AnsibleModule.__init__(self, *args, **kwargs)
+
         if not HAS_K8S_MODULE_HELPER:
-            raise Exception(
-                "This module requires the OpenShift Python client. Try `pip install openshift`"
-            )
+            self.fail_json(msg="This module requires the OpenShift Python client. Try `pip install openshift`")
 
         if not HAS_YAML:
-            raise Exception(
-                "This module requires PyYAML. Try `pip install PyYAML`"
-            )
+            self.fail_json(msg="This module requires PyYAML. Try `pip install PyYAML`")
 
         if not HAS_STRING_UTILS:
-            raise Exception(
-                "This module requires Python string utils. Try `pip install python-string-utils`"
-            )
-
-        kwargs['argument_spec'] = self.argspec
-        AnsibleModule.__init__(self, *args, **kwargs)
+            self.fail_json(msg="This module requires Python string utils. Try `pip install python-string-utils`")
 
     @property
     def argspec(self):
diff --git a/test/sanity/import/skip.txt b/test/sanity/import/skip.txt
index 3b33390e4b..b423f88fc1 100644
--- a/test/sanity/import/skip.txt
+++ b/test/sanity/import/skip.txt
@@ -1,7 +1,5 @@
 lib/ansible/modules/clustering/k8s/k8s_raw.py
 lib/ansible/modules/clustering/k8s/k8s_scale.py
-lib/ansible/modules/clustering/openshift/openshift_raw.py
-lib/ansible/modules/clustering/openshift/openshift_scale.py
 lib/ansible/modules/network/avi/avi_gslbservice_patch_member.py
 lib/ansible/modules/network/radware/vdirect_commit.py
 lib/ansible/modules/network/radware/vdirect_file.py
diff --git a/test/sanity/validate-modules/ignore.txt b/test/sanity/validate-modules/ignore.txt
index d8a2476faa..b146f25ab8 100644
--- a/test/sanity/validate-modules/ignore.txt
+++ b/test/sanity/validate-modules/ignore.txt
@@ -669,10 +669,6 @@ lib/ansible/modules/clustering/k8s/_kubernetes.py E322
 lib/ansible/modules/clustering/k8s/_kubernetes.py E323
 lib/ansible/modules/clustering/k8s/_kubernetes.py E324
 lib/ansible/modules/clustering/k8s/_kubernetes.py E325
-lib/ansible/modules/clustering/k8s/k8s_raw.py E321
-lib/ansible/modules/clustering/k8s/k8s_scale.py E321
-lib/ansible/modules/clustering/openshift/openshift_raw.py E321
-lib/ansible/modules/clustering/openshift/openshift_scale.py E321
 lib/ansible/modules/clustering/znode.py E326
 lib/ansible/modules/commands/command.py E322
 lib/ansible/modules/commands/command.py E323
