commit d3b680e1c9b5c37fd07fd9999e9746871fd19824
Author: Rene Moser <mail@renemoser.net>
Date:   Fri Sep 11 08:52:30 2015 +0200

    cloudstack: fix templates not always have checksums
    
    It is not documented but it seems only registered templates have checksums. Templates created from VMs and snapshot don't.
    
    This change fixes the traceback. But we must re-thinking, if it still makes sense to look for the checksum.

diff --git a/lib/ansible/modules/extras/cloud/cloudstack/cs_template.py b/lib/ansible/modules/extras/cloud/cloudstack/cs_template.py
index ed5472c2c3..fbaa5665eb 100644
--- a/lib/ansible/modules/extras/cloud/cloudstack/cs_template.py
+++ b/lib/ansible/modules/extras/cloud/cloudstack/cs_template.py
@@ -501,7 +501,7 @@ class AnsibleCloudStackTemplate(AnsibleCloudStack):
                 return templates['template'][0]
             else:
                 for i in templates['template']:
-                    if i['checksum'] == checksum:
+                    if 'checksum' in i and i['checksum'] == checksum:
                         return i
         return None
 
