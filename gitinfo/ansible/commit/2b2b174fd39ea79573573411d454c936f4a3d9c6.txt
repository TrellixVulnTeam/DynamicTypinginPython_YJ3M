commit 2b2b174fd39ea79573573411d454c936f4a3d9c6
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Sun Mar 16 13:36:52 2014 -0400

    Merge conflict.

diff --git a/library/system/setup b/library/system/setup
index c6583d4202..71120b72dc 100644
--- a/library/system/setup
+++ b/library/system/setup
@@ -2305,8 +2305,8 @@ def ansible_facts(module):
 
 def run_setup(module):
 
-    setup_options = {}
-    facts = ansible_facts(module)
+    setup_options = dict(module_setup=True)
+    facts = ansible_facts()
 
     for (k, v) in facts.items():
         setup_options["ansible_%s" % k.replace('-', '_')] = v
