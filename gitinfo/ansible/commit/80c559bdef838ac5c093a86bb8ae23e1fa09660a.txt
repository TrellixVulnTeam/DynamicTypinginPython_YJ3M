commit 80c559bdef838ac5c093a86bb8ae23e1fa09660a
Author: Matt Clay <matt@mystile.com>
Date:   Wed Dec 14 17:17:47 2016 -0800

    Test sftp and scp for ssh connection.

diff --git a/test/integration/targets/connection_ssh/posix.sh b/test/integration/targets/connection_ssh/posix.sh
new file mode 120000
index 0000000000..70aa5dbdba
--- /dev/null
+++ b/test/integration/targets/connection_ssh/posix.sh
@@ -0,0 +1 @@
+../connection_posix/test.sh
\ No newline at end of file
diff --git a/test/integration/targets/connection_ssh/runme.sh b/test/integration/targets/connection_ssh/runme.sh
deleted file mode 120000
index 70aa5dbdba..0000000000
--- a/test/integration/targets/connection_ssh/runme.sh
+++ /dev/null
@@ -1 +0,0 @@
-../connection_posix/test.sh
\ No newline at end of file
diff --git a/test/integration/targets/connection_ssh/runme.sh b/test/integration/targets/connection_ssh/runme.sh
new file mode 100755
index 0000000000..2e74085fd8
--- /dev/null
+++ b/test/integration/targets/connection_ssh/runme.sh
@@ -0,0 +1,8 @@
+#!/usr/bin/env bash
+
+set -eux
+
+# sftp
+./posix.sh "$@"
+# scp
+ANSIBLE_SCP_IF_SSH=true ./posix.sh "$@"
