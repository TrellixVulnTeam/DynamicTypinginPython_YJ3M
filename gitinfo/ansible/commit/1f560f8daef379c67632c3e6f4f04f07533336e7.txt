commit 1f560f8daef379c67632c3e6f4f04f07533336e7
Author: Eero Niemi <eero@dealdash.com>
Date:   Fri Jul 17 16:54:39 2015 +0300

    Fixed parameter validation when creating a volume from a snapshot

diff --git a/lib/ansible/modules/cloud/amazon/ec2_vol.py b/lib/ansible/modules/cloud/amazon/ec2_vol.py
index 712be248af..0d275cc91d 100644
--- a/lib/ansible/modules/cloud/amazon/ec2_vol.py
+++ b/lib/ansible/modules/cloud/amazon/ec2_vol.py
@@ -436,11 +436,11 @@ def main():
 
     # Delaying the checks until after the instance check allows us to get volume ids for existing volumes
     # without needing to pass an unused volume_size
-    if not volume_size and not (id or name):
-        module.fail_json(msg="You must specify an existing volume with id or name or a volume_size")
+    if not volume_size and not (id or name or snapshot):
+        module.fail_json(msg="You must specify volume_size or identify an existing volume by id, name, or snapshot")
 
-    if volume_size and id:
-        module.fail_json(msg="Cannot specify volume_size and id")
+    if volume_size and (id or snapshot):
+        module.fail_json(msg="Cannot specify volume_size together with id or snapshot")
 
     if state == 'absent':
         delete_volume(module, ec2)
