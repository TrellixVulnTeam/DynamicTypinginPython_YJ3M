commit 5a504e3a3bd487e2813c431ba6037e6144bb92c8
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Tue Jun 18 13:30:02 2013 -0400

    Tweak error messages for undefined variables feature.

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index 1dac884af5..0c40babfd2 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -167,6 +167,7 @@ class Runner(object):
         self.complex_args     = complex_args
         self.module_with_list = False
         self.error_on_undefined_vars = error_on_undefined_vars
+        print "DEBUG: EOUV: %s" % error_on_undefined_vars
 
         self.callbacks.runner = self
 
@@ -583,7 +584,7 @@ class Runner(object):
             module_args = template.template(self.basedir, module_args, inject, fail_on_undefined=self.error_on_undefined_vars)
             complex_args = template.template(self.basedir, complex_args, inject, fail_on_undefined=self.error_on_undefined_vars)
         except jinja2.exceptions.UndefinedError, e:
-            raise errors.AnsibleUndefinedVariable("Undefined variables: %s" % str(e))
+            raise errors.AnsibleUndefinedVariable("One or more undefined variables: %s" % str(e))
 
 
         result = handler.run(conn, tmp, module_name, module_args, inject, complex_args)
diff --git a/lib/ansible/utils/template.py b/lib/ansible/utils/template.py
index 7da36b0ba9..8adb484595 100644
--- a/lib/ansible/utils/template.py
+++ b/lib/ansible/utils/template.py
@@ -462,7 +462,7 @@ def template_from_file(basedir, path, vars):
     try:
         res = jinja2.utils.concat(t.root_render_func(t.new_context(_jinja2_vars(basedir, vars, t.globals), shared=True)))
     except jinja2.exceptions.UndefinedError, e:
-        raise errors.AnsibleUndefinedVariable("Undefined variables: %s" % str(e))
+        raise errors.AnsibleUndefinedVariable("One or more undefined variables: %s" % str(e))
 
     if data.endswith('\n') and not res.endswith('\n'):
         res = res + '\n'
