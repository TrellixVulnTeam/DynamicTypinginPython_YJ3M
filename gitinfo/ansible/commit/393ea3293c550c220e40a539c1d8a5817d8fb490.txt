commit 393ea3293c550c220e40a539c1d8a5817d8fb490
Author: Hans-Joachim Kliemeck <h0nIg@users.noreply.github.com>
Date:   Fri May 20 10:25:10 2016 +0200

    blockinfile will always add newline at EOF (#2261)

diff --git a/lib/ansible/modules/extras/files/blockinfile.py b/lib/ansible/modules/extras/files/blockinfile.py
index 37d89ca2c8..81834dfd2d 100644
--- a/lib/ansible/modules/extras/files/blockinfile.py
+++ b/lib/ansible/modules/extras/files/blockinfile.py
@@ -280,7 +280,9 @@ def main():
     lines[n0:n0] = blocklines
 
     if lines:
-        result = '\n'.join(lines)+'\n'
+        result = '\n'.join(lines)
+        if original.endswith('\n'):
+            result += '\n'
     else:
         result = ''
     if original == result:
