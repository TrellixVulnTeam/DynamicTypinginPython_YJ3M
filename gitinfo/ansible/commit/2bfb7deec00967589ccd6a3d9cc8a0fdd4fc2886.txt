commit 2bfb7deec00967589ccd6a3d9cc8a0fdd4fc2886
Author: Daniel Hokka Zakrisson <daniel@hozac.com>
Date:   Sun Nov 25 00:14:16 2012 +0100

    Set all in the returned dict
    
    Otherwise the group is lost, and group_vars/all isn't used.

diff --git a/lib/ansible/inventory/script.py b/lib/ansible/inventory/script.py
index 126eee6d29..77666580ce 100644
--- a/lib/ansible/inventory/script.py
+++ b/lib/ansible/inventory/script.py
@@ -41,10 +41,9 @@ class InventoryScript(object):
     def _parse(self):
         all_hosts = {}
 
-        groups = {}
         self.raw = utils.parse_json(self.data)
         all=Group('all')
-        self.groups = dict(all=all)
+        groups = dict(all=all)
         group = None
         for (group_name, hosts) in self.raw.items():
             group = groups[group_name] = Group(group_name)
