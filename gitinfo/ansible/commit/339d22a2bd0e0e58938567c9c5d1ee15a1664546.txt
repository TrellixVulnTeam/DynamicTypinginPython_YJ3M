commit 339d22a2bd0e0e58938567c9c5d1ee15a1664546
Author: Matt Clay <matt@mystile.com>
Date:   Fri Sep 21 14:48:40 2018 -0700

    Improve stability of Docker integration tests. (#46005)

diff --git a/test/integration/targets/docker_stack/tasks/test_stack.yml b/test/integration/targets/docker_stack/tasks/test_stack.yml
index ad6540e4ba..4cd5135202 100644
--- a/test/integration/targets/docker_stack/tasks/test_stack.yml
+++ b/test/integration/targets/docker_stack/tasks/test_stack.yml
@@ -1,3 +1,8 @@
+- name: Make sure we're not already using Docker swarm
+  docker_swarm:
+    state: absent
+    force: true
+
 - name: Create a Swarm cluster
   docker_swarm:
     state: present
diff --git a/test/integration/targets/docker_swarm/tasks/test_swarm.yml b/test/integration/targets/docker_swarm/tasks/test_swarm.yml
index 9e6bf80844..bdff0b6332 100644
--- a/test/integration/targets/docker_swarm/tasks/test_swarm.yml
+++ b/test/integration/targets/docker_swarm/tasks/test_swarm.yml
@@ -1,3 +1,8 @@
+- name: Make sure we're not already using Docker swarm
+  docker_swarm:
+    state: absent
+    force: true
+
 - name: Test parameters with state=present
   docker_swarm:
     state: present
