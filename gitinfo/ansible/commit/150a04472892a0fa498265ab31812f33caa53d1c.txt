commit 150a04472892a0fa498265ab31812f33caa53d1c
Author: Russell Teague <MtnBikeNC@gmail.com>
Date:   Thu Aug 25 12:48:25 2016 -0400

    Fix vmware_dvs_portgroup destroy task (#2776)
    
    Fixes #2761

diff --git a/lib/ansible/modules/extras/cloud/vmware/vmware_dvs_portgroup.py b/lib/ansible/modules/extras/cloud/vmware/vmware_dvs_portgroup.py
index 7c686ba3bb..06b39672ed 100644
--- a/lib/ansible/modules/extras/cloud/vmware/vmware_dvs_portgroup.py
+++ b/lib/ansible/modules/extras/cloud/vmware/vmware_dvs_portgroup.py
@@ -68,7 +68,7 @@ EXAMPLES = '''
         password: vcenter_password
         portgroup_name: Management
         switch_name: dvSwitch
-        vlan_id: 123 
+        vlan_id: 123
         num_ports: 120
         portgroup_type: earlyBinding
         state: present
@@ -93,7 +93,7 @@ class VMwareDvsPortgroup(object):
         self.dv_switch = None
         self.state = self.module.params['state']
         self.content = connect_to_api(module)
-        
+
     def process_state(self):
         try:
             dvspg_states = {
@@ -143,7 +143,7 @@ class VMwareDvsPortgroup(object):
         result = None
 
         if not self.module.check_mode:
-            task = dvs_portgroup.Destroy_Task()
+            task = self.dvs_portgroup.Destroy_Task()
             changed, result = wait_for_task(task)
         self.module.exit_json(changed=changed, result=str(result))
 
