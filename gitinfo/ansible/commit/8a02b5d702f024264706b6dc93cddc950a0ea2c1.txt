commit 8a02b5d702f024264706b6dc93cddc950a0ea2c1
Author: Tristan de Cacqueray <tdecacqu@redhat.com>
Date:   Mon Dec 5 16:27:29 2016 +0000

    Use parameters in os_stack update (#3560)
    
    This change makes os_stack module idempotent. Otherwise, re-use of the
    module fails with:
    Error updating stack: ERROR: The Parameter (...) was not provided.
    
    Fixes #3165.

diff --git a/lib/ansible/modules/extras/cloud/openstack/os_stack.py b/lib/ansible/modules/extras/cloud/openstack/os_stack.py
index 503ae635db..3d3cb9be07 100644
--- a/lib/ansible/modules/extras/cloud/openstack/os_stack.py
+++ b/lib/ansible/modules/extras/cloud/openstack/os_stack.py
@@ -180,7 +180,8 @@ def _update_stack(module, stack, cloud):
             environment_files=module.params['environment'],
             timeout=module.params['timeout'],
             rollback=module.params['rollback'],
-            wait=module.params['wait'])
+            wait=module.params['wait'],
+            **module.params['parameters'])
 
         if stack['stack_status'] == 'UPDATE_COMPLETE':
             return stack
