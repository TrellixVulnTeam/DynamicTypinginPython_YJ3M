commit d0f7af4b096964c13b8f91587688382259c1c9a7
Author: David Shrewsbury <Shrews@users.noreply.github.com>
Date:   Tue Sep 27 15:03:21 2016 -0400

    Fix os_network's create_network() call for older shade versions (#5058)
    
    A value for the project_id parameter to shade's create_network()
    call was always being sent, even if no value for 'project' was
    supplied. This was breaking folks with older versions of shade
    (< 1.6).
    
    Fixes PR https://github.com/ansible/ansible-modules-core/issues/3567

diff --git a/lib/ansible/modules/cloud/openstack/os_network.py b/lib/ansible/modules/cloud/openstack/os_network.py
index 9a0c251631..d80267e893 100644
--- a/lib/ansible/modules/cloud/openstack/os_network.py
+++ b/lib/ansible/modules/cloud/openstack/os_network.py
@@ -222,8 +222,12 @@ def main():
                 if provider and StrictVersion(shade.__version__) < StrictVersion('1.5.0'):
                     module.fail_json(msg="Shade >= 1.5.0 required to use provider options")
 
-                net = cloud.create_network(name, shared, admin_state_up,
-                                           external, provider, project_id)
+                if project_id is not None:
+                    net = cloud.create_network(name, shared, admin_state_up,
+                                               external, provider, project_id)
+                else:
+                    net = cloud.create_network(name, shared, admin_state_up,
+                                               external, provider)
                 changed = True
             else:
                 changed = False
