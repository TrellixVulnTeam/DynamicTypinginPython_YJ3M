commit 82dedec0112f30b33722c0c00a77a0d75c60a60c
Author: Gon√©ri Le Bouder <goneri@lebouder.net>
Date:   Thu Oct 10 22:22:36 2019 -0400

    vmware_guest_sendkey/test: ensure the test VM is running (#63359)
    
    The `vmware_guest_sendkey` module fails if the test VM is off. We this
    commit, we ensures the VM is running.

diff --git a/test/integration/targets/vmware_guest_sendkey/tasks/main.yml b/test/integration/targets/vmware_guest_sendkey/tasks/main.yml
index eca69b2fb4..b23299223e 100644
--- a/test/integration/targets/vmware_guest_sendkey/tasks/main.yml
+++ b/test/integration/targets/vmware_guest_sendkey/tasks/main.yml
@@ -11,6 +11,16 @@
       setup_datastore: true
       setup_virtualmachines: true
 
+  - name: set state to poweron the first VM
+    vmware_guest_powerstate:
+      validate_certs: no
+      hostname: "{{ vcenter_hostname }}"
+      username: "{{ vcenter_username }}"
+      password: "{{ vcenter_password }}"
+      name: "{{ virtual_machines[0].name }}"
+      folder: '{{ f0 }}'
+      state: powered-on
+
   - name: send keys to virtual machine
     vmware_guest_sendkey:
       validate_certs: False
