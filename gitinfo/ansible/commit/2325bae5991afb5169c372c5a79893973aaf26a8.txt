commit 2325bae5991afb5169c372c5a79893973aaf26a8
Author: Robert Estelle <robert@getpreo.com>
Date:   Mon Dec 1 13:45:50 2014 -0500

    ec2_vpc - Fail module using fail_json on boto import failure.

diff --git a/lib/ansible/modules/extras/cloud/amazon/ec2_vpc_route_table.py b/lib/ansible/modules/extras/cloud/amazon/ec2_vpc_route_table.py
index 0f6184c40d..56d3c16c9e 100644
--- a/lib/ansible/modules/extras/cloud/amazon/ec2_vpc_route_table.py
+++ b/lib/ansible/modules/extras/cloud/amazon/ec2_vpc_route_table.py
@@ -145,15 +145,17 @@ EXAMPLES = '''
 '''
 
 
-import sys
+import sys  # noqa
 
 try:
     import boto.ec2
     import boto.vpc
     from boto.exception import EC2ResponseError
+    HAS_BOTO = True
 except ImportError:
-    print "failed=True msg='boto required for this module'"
-    sys.exit(1)
+    HAS_BOTO = False
+    if __name__ != '__main__':
+        raise
 
 
 class AnsibleRouteTableException(Exception):
@@ -432,6 +434,8 @@ def main():
         argument_spec=argument_spec,
         supports_check_mode=True,
     )
+    if not HAS_BOTO:
+        module.fail_json(msg='boto is required for this module')
 
     ec2_url, aws_access_key, aws_secret_key, region = get_ec2_creds(module)
     if not region:
