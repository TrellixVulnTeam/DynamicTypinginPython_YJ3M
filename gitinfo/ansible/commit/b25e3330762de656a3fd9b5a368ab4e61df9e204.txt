commit b25e3330762de656a3fd9b5a368ab4e61df9e204
Author: Lo√Øc Blot <nerzhul@users.noreply.github.com>
Date:   Mon Dec 18 22:40:56 2017 +0100

    icinga2_host: Don't set template attribute on modification, it's not permitted (#33989)

diff --git a/lib/ansible/modules/monitoring/icinga2_host.py b/lib/ansible/modules/monitoring/icinga2_host.py
index f570499324..8e1bcff230 100644
--- a/lib/ansible/modules/monitoring/icinga2_host.py
+++ b/lib/ansible/modules/monitoring/icinga2_host.py
@@ -81,6 +81,7 @@ options:
   template:
     description:
       - The template used to define the host.
+      - Template cannot be modified after object creation.
     required: false
     default: None
   check_command:
@@ -294,7 +295,12 @@ def main():
         elif icinga.diff(name, data):
             if module.check_mode:
                 module.exit_json(changed=False, name=name, data=data)
+
+            # Template attribute is not allowed in modification
+            del data['attrs']['templates']
+
             ret = icinga.modify(name, data)
+
             if ret['code'] == 200:
                 changed = True
             else:
