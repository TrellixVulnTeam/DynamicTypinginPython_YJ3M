commit 421fb6df8be10f3adaa4457e6915fded21cb76a2
Author: karimb <karimboumedhel@gmail.com>
Date:   Wed Mar 16 13:58:08 2016 +0100

    Fixes ovirt inventory to only override credentials from environment when keys exist

diff --git a/contrib/inventory/ovirt.py b/contrib/inventory/ovirt.py
index 23646fa206..dccbf42127 100755
--- a/contrib/inventory/ovirt.py
+++ b/contrib/inventory/ovirt.py
@@ -172,9 +172,9 @@ class OVirtInventory(object):
 
         # If the appropriate environment variables are set, they override
         # other configuration; process those into our args and kwargs.
-        kwargs['url'] = os.environ.get('OVIRT_URL')
-        kwargs['username'] = os.environ.get('OVIRT_EMAIL')
-        kwargs['password'] = os.environ.get('OVIRT_PASS')
+	 kwargs['url'] = os.environ.get('OVIRT_URL', kwargs['url'])
+	 kwargs['username'] = next(val for val in [os.environ.get('OVIRT_EMAIL'), os.environ.get('OVIRT_USERNAME'), kwargs['username']] if val is not None)
+	 kwargs['password'] = next(val for val in [os.environ.get('OVIRT_PASS'), os.environ.get('OVIRT_PASSWORD'), kwargs['password']] if val is not None)
 
         # Retrieve and return the ovirt driver.
         return API(insecure=True, **kwargs)
