commit f423554e200c2cfd54e275e558930d2b4e735872
Author: Michael Scherer <misc@redhat.com>
Date:   Sat May 14 12:45:53 2016 +0200

    Testing the module on freebsd fail, since module is not assigned yet

diff --git a/lib/ansible/modules/files/acl.py b/lib/ansible/modules/files/acl.py
index 47a6365619..d0de9c6d6b 100644
--- a/lib/ansible/modules/files/acl.py
+++ b/lib/ansible/modules/files/acl.py
@@ -218,9 +218,6 @@ def run_acl(module, cmd, check_rc=True):
 
 
 def main():
-    if get_platform().lower() != 'linux':
-        module.fail_json(msg="The acl module is only available for Linux distributions.")
-
     module = AnsibleModule(
         argument_spec=dict(
             name=dict(required=True, aliases=['path'], type='path'),
@@ -245,6 +242,9 @@ def main():
         supports_check_mode=True,
     )
 
+    if get_platform().lower() != 'linux':
+        module.fail_json(msg="The acl module is only available for Linux distributions.")
+
     path = module.params.get('name')
     entry = module.params.get('entry')
     entity = module.params.get('entity')
