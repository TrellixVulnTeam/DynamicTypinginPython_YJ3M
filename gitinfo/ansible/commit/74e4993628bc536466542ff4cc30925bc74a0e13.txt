commit 74e4993628bc536466542ff4cc30925bc74a0e13
Author: Ganesh Nalawade <ganesh634@gmail.com>
Date:   Tue Sep 17 18:30:54 2019 +0530

    Fix network_cli exec_command connection init (#62344)
    
    * Fix network_cli exec_command connection init
    
    Fixes https://github.com/ansible/ansible/issues/61596
    
    *  If `exec_command` method is invoked from module side
       on connection object to execute the command on target
       host check if connection is created if not create the
       connection.
    
    * Fix review comment

diff --git a/lib/ansible/cli/scripts/ansible_connection_cli_stub.py b/lib/ansible/cli/scripts/ansible_connection_cli_stub.py
index 5a61aa7167..487a00a52f 100755
--- a/lib/ansible/cli/scripts/ansible_connection_cli_stub.py
+++ b/lib/ansible/cli/scripts/ansible_connection_cli_stub.py
@@ -138,6 +138,10 @@ class ConnectionProcess(object):
                     if log_messages:
                         display.display("jsonrpc request: %s" % data, log_only=True)
 
+                    request = json.loads(to_text(data, errors='surrogate_or_strict'))
+                    if request.get('method') == "exec_command" and not self.connection.connected:
+                        self.connection._connect()
+
                     signal.alarm(self.connection.get_option('persistent_command_timeout'))
 
                     resp = self.srv.handle_request(data)
