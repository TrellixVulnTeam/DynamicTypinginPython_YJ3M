commit 1ff8c78f26dde3f844a64b69724541272854b61f
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Fri Jul 19 09:42:22 2013 -0400

    Removing legacy variable usage.

diff --git a/library/cloud/ec2 b/library/cloud/ec2
index e3118ec380..c3efb97123 100644
--- a/library/cloud/ec2
+++ b/library/cloud/ec2
@@ -244,14 +244,14 @@ local_action:
     region: us-east-1
   tasks:
     - name: Launch instance
-      local_action: ec2 keypair=$keypair group=$security_group instance_type=$instance_type image=$image wait=true region=$region
+      local_action: ec2 keypair={{ keypair }} group={{ security_group }} instance_type={{ instance_type }} image={{ image }} wait=true region={{ region }}
       register: ec2
     - name: Add new instance to host group
-      local_action: add_host hostname=${item.public_ip} groupname=launched
-      with_items: ${ec2.instances}
+      local_action: add_host hostname={{ item.public_ip }} groupname=launched
+      with_items: ec2.instances
     - name: Wait for SSH to come up
-      local_action: wait_for host=${item.public_dns_name} port=22 delay=60 timeout=320 state=started
-      with_items: ${ec2.instances}
+      local_action: wait_for host={{ item.public_dns_name }} port=22 delay=60 timeout=320 state=started
+      with_items: ec2.instances
 
 - name: Configure instance(s)
   hosts: launched
