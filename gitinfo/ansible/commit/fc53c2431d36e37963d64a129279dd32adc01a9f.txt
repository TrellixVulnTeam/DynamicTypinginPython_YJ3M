commit fc53c2431d36e37963d64a129279dd32adc01a9f
Author: whiter <rob.white@truelocal.com.au>
Date:   Wed Mar 18 14:52:49 2015 +1100

    Added changed=True flag when new subnet groups created. Added conditional so that modify_db_subnet_group is only called when necessary and changed=True flag will be set.

diff --git a/lib/ansible/modules/cloud/amazon/rds_subnet_group.py b/lib/ansible/modules/cloud/amazon/rds_subnet_group.py
index 9d8cd78621..eb9c369321 100644
--- a/lib/ansible/modules/cloud/amazon/rds_subnet_group.py
+++ b/lib/ansible/modules/cloud/amazon/rds_subnet_group.py
@@ -138,10 +138,14 @@ def main():
         else:
             if not exists:
                 new_group = conn.create_db_subnet_group(group_name, desc=group_description, subnet_ids=group_subnets)
-
+                changed = True
             else:
-                changed_group = conn.modify_db_subnet_group(group_name, description=group_description, subnet_ids=group_subnets)
-
+                # Sort the subnet groups before we compare them
+                matching_groups[0].subnet_ids.sort()
+                group_subnets.sort()
+                if ( (matching_groups[0].name != group_name) or (matching_groups[0].description != group_description) or (matching_groups[0].subnet_ids != group_subnets) ):
+                    changed_group = conn.modify_db_subnet_group(group_name, description=group_description, subnet_ids=group_subnets)
+                    changed = True
     except BotoServerError, e:
         module.fail_json(msg = e.error_message)
 
