commit 3c06833302af823d5cfa792c8490bf01094fff54
Author: Serge van Ginderachter <serge@vanginderachter.be>
Date:   Tue Aug 19 14:56:32 2014 +0200

    group_by: make sure new group has bigger priority than all group

diff --git a/lib/ansible/runner/action_plugins/group_by.py b/lib/ansible/runner/action_plugins/group_by.py
index d00ddc8d8c..25c2073fa0 100644
--- a/lib/ansible/runner/action_plugins/group_by.py
+++ b/lib/ansible/runner/action_plugins/group_by.py
@@ -93,6 +93,7 @@ class ActionModule(object):
             if not inv_group:
                 inv_group = ansible.inventory.Group(name=group)
                 inventory.add_group(inv_group)
+                inventory.get_group('all').add_child_group(inv_group)
                 inv_group.vars = inventory.get_group_variables(group, update_cached=False, vault_password=inventory._vault_password)
             for host in hosts:
                 if host in self.runner.inventory._vars_per_host:
