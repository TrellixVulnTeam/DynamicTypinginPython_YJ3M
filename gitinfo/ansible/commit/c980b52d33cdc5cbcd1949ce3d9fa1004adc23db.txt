commit c980b52d33cdc5cbcd1949ce3d9fa1004adc23db
Author: Gabriele <gabrielegerbino@gmail.com>
Date:   Fri Jan 6 22:36:13 2017 +0100

    Fixing issue when multiple vni exist (#19928)

diff --git a/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py b/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py
index 85a0139dbd..38ffffdbd7 100644
--- a/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py
+++ b/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py
@@ -376,11 +376,11 @@ def get_existing(module, args):
         parents = ['interface {0}'.format(interface_exist)]
         temp_config = netcfg.get_section(parents)
 
-        if 'associate-vrf' in temp_config:
+        if 'member vni {0} associate-vrf'.format(module.params['vni']) in temp_config:
             parents.append('member vni {0} associate-vrf'.format(
                                                     module.params['vni']))
             config = netcfg.get_section(parents)
-        elif 'member vni' in temp_config:
+        elif "member vni {0}".format(module.params['vni']) in temp_config:
             parents.append('member vni {0}'.format(module.params['vni']))
             config = netcfg.get_section(parents)
         else:
