commit fa1ab231c947725da283a2665d76d3463ded892c
Author: James Cammarata <jimi@sngx.net>
Date:   Thu Feb 20 15:24:16 2014 -0500

    Fixing bug in which playbook vars were not merged properly
    
    This occurred when a hash would be passed in via extra args and the
    hash variable behavior was set to 'merge', which resulted in the
    variable from extra args replacing the playbook variable.

diff --git a/lib/ansible/playbook/play.py b/lib/ansible/playbook/play.py
index 1e1e52dd13..93b9504998 100644
--- a/lib/ansible/playbook/play.py
+++ b/lib/ansible/playbook/play.py
@@ -649,7 +649,7 @@ class Play(object):
             raise errors.AnsibleError("'vars_prompt' section is malformed, see docs")
 
         if type(self.playbook.extra_vars) == dict:
-            vars.update(self.playbook.extra_vars)
+            vars = utils.combine_vars(vars, self.playbook.extra_vars)
 
         return vars
 
