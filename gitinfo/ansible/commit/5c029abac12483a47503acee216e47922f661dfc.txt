commit 5c029abac12483a47503acee216e47922f661dfc
Author: Pierre-Louis Bonicoli <pierre-louis.bonicoli@libregerbil.fr>
Date:   Tue Aug 29 17:15:04 2017 +0200

    alternatives: test that path parameter is checked
    
    Relates: #24800

diff --git a/test/integration/targets/alternatives/tasks/main.yml b/test/integration/targets/alternatives/tasks/main.yml
index 67ec0ea9b7..94f7deeb8c 100644
--- a/test/integration/targets/alternatives/tasks/main.yml
+++ b/test/integration/targets/alternatives/tasks/main.yml
@@ -40,6 +40,10 @@
     vars:
       with_alternatives: False
       mode: auto
+
+  # Test that path is checked: alternatives must fail when path is nonexistent
+  - import_tasks: path_is_checked.yml
+
   always:
     - include_tasks: remove_links.yml
 
diff --git a/test/integration/targets/alternatives/tasks/path_is_checked.yml b/test/integration/targets/alternatives/tasks/path_is_checked.yml
new file mode 100644
index 0000000000..9687707712
--- /dev/null
+++ b/test/integration/targets/alternatives/tasks/path_is_checked.yml
@@ -0,0 +1,12 @@
+- name: Try with nonexistent path
+  alternatives:
+    name: dummy
+    path: '/non/existent/path/there'
+    link: '/usr/bin/dummy'
+  ignore_errors: True
+  register: alternative
+
+- name: Check previous task failed
+  assert:
+    that:
+      - 'alternative|failed'
