commit 6030be3835758797c2520898bc208936a6386098
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Fri Nov 14 07:55:10 2014 -0800

    Add unittest for discrete functions in the apt module

diff --git a/test/units/module_tests/TestApt.py b/test/units/module_tests/TestApt.py
new file mode 100644
index 0000000000..e7f2dafc95
--- /dev/null
+++ b/test/units/module_tests/TestApt.py
@@ -0,0 +1,42 @@
+import collections
+import mock
+import os
+import unittest
+
+from ansible.modules.core.packaging.os.apt import (
+    expand_pkgspec_from_fnmatches,
+)
+
+
+class AptExpandPkgspecTestCase(unittest.TestCase):
+
+    def setUp(self):
+        FakePackage = collections.namedtuple("Package", ("name",))
+        self.fake_cache = [ FakePackage("apt"),
+                            FakePackage("apt-utils"),
+                            FakePackage("not-selected"),
+        ]
+
+    def test_trivial(self):
+        foo = ["apt"]
+        self.assertEqual(
+            expand_pkgspec_from_fnmatches(None, foo, self.fake_cache), foo)
+
+    def test_version_wildcard(self):
+        foo = ["apt=1.0*"]
+        self.assertEqual(
+            expand_pkgspec_from_fnmatches(None, foo, self.fake_cache), foo)
+
+    def test_pkgname_wildcard_version_wildcard(self):
+        foo = ["apt*=1.0*"]
+        m_mock = mock.Mock()
+        self.assertEqual(
+            expand_pkgspec_from_fnmatches(m_mock, foo, self.fake_cache),
+            ['apt', 'apt-utils'])
+
+    def test_pkgname_expands(self):
+        foo = ["apt*"]
+        m_mock = mock.Mock()
+        self.assertEqual(
+            expand_pkgspec_from_fnmatches(m_mock, foo, self.fake_cache),
+            ["apt", "apt-utils"])
