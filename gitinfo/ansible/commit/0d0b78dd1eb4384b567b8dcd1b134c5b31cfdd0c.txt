commit 0d0b78dd1eb4384b567b8dcd1b134c5b31cfdd0c
Author: nitzmahone <mdavis@ansible.com>
Date:   Tue Dec 8 16:16:23 2015 -0500

    fixed disappearing groups on OSX user module
    
    Ensure that we don't try to modify the groups collection if groups are not specified

diff --git a/lib/ansible/modules/system/user.py b/lib/ansible/modules/system/user.py
index 919d6fd51f..092f39ae7a 100755
--- a/lib/ansible/modules/system/user.py
+++ b/lib/ansible/modules/system/user.py
@@ -1673,9 +1673,10 @@ class DarwinUser(User):
         self._update_system_user()
         # here we don't care about change status since it is a creation,
         # thus changed is always true.
-        (rc, _out, _err, changed) = self._modify_group()
-        out += _out
-        err += _err
+        if self.groups:
+            (rc, _out, _err, changed) = self._modify_group()
+            out += _out
+            err += _err
         return (rc, err, out)
 
     def modify_user(self):
@@ -1707,12 +1708,13 @@ class DarwinUser(User):
             err += _err
             changed = rc
 
-        (rc, _out, _err, _changed) = self._modify_group()
-        out += _out
-        err += _err
+        if self.groups:
+            (rc, _out, _err, _changed) = self._modify_group()
+            out += _out
+            err += _err
 
-        if _changed is True:
-            changed = rc
+            if _changed is True:
+                changed = rc
 
         rc = self._update_system_user()
         if rc == 0:
