commit ab22ea1a66407c01bd2507ea60f10ba0a4329627
Author: Chris Archibald <carchi@netapp.com>
Date:   Mon Mar 4 08:58:09 2019 -0800

    Wrong Setup function was being used, which could result in failure if new global options were used.  (#52862)
    
    * Revert "changes to clusteR"
    
    This reverts commit 33ee1b71e4bc8435fb315762a871f8c4cb6c5f80.
    
    * Revert "changes to clusteR"
    
    This reverts commit 33ee1b71e4bc8435fb315762a871f8c4cb6c5f80.
    
    * Revert "Revert "changes to clusteR""
    
    This reverts commit f1104a37b42886aebb4d2b2ab27c91c96d97858a.
    
    * Revert "Revert "changes to clusteR""
    
    This reverts commit f1104a37b42886aebb4d2b2ab27c91c96d97858a.
    
    * Fix setup bug

diff --git a/lib/ansible/modules/storage/netapp/na_ontap_autosupport.py b/lib/ansible/modules/storage/netapp/na_ontap_autosupport.py
index 2f2a64aa2c..96affc492d 100644
--- a/lib/ansible/modules/storage/netapp/na_ontap_autosupport.py
+++ b/lib/ansible/modules/storage/netapp/na_ontap_autosupport.py
@@ -147,7 +147,7 @@ class NetAppONTAPasup(object):
         if HAS_NETAPP_LIB is False:
             self.module.fail_json(msg="the python NetApp-Lib module is required")
         else:
-            self.server = netapp_utils.setup_ontap_zapi(module=self.module)
+            self.server = netapp_utils.setup_na_ontap_zapi(module=self.module)
 
     def set_playbook_zapi_key_map(self):
         self.na_helper.zapi_string_keys = {
diff --git a/lib/ansible/modules/storage/netapp/na_ontap_flexcache.py b/lib/ansible/modules/storage/netapp/na_ontap_flexcache.py
index 35323ba29f..3b72e7d4d2 100644
--- a/lib/ansible/modules/storage/netapp/na_ontap_flexcache.py
+++ b/lib/ansible/modules/storage/netapp/na_ontap_flexcache.py
@@ -171,8 +171,7 @@ class NetAppONTAPFlexCache(object):
         if HAS_NETAPP_LIB is False:
             self.module.fail_json(msg="the python NetApp-Lib module is required")
         else:
-            self.server = netapp_utils.setup_ontap_zapi(module=self.module,
-                                                        vserver=self.parameters['vserver'])
+            self.server = netapp_utils.setup_na_ontap_zapi(module=self.module, vserver=self.parameters['vserver'])
 
     def add_parameter_to_dict(self, adict, name, key=None, tostr=False):
         ''' add defined parameter (not None) to adict using key '''
diff --git a/lib/ansible/modules/storage/netapp/na_ontap_job_schedule.py b/lib/ansible/modules/storage/netapp/na_ontap_job_schedule.py
index 7206bcaddd..c9339cadb4 100644
--- a/lib/ansible/modules/storage/netapp/na_ontap_job_schedule.py
+++ b/lib/ansible/modules/storage/netapp/na_ontap_job_schedule.py
@@ -261,7 +261,7 @@ class NetAppONTAPJob(object):
         :return: None
         """
         results = netapp_utils.get_cserver(self.server)
-        cserver = netapp_utils.setup_ontap_zapi(module=self.module, vserver=results)
+        cserver = netapp_utils.setup_na_ontap_zapi(module=self.module, vserver=results)
         netapp_utils.ems_log_event("na_ontap_job_schedule", cserver)
 
     def apply(self):
diff --git a/lib/ansible/modules/storage/netapp/na_ontap_snapmirror.py b/lib/ansible/modules/storage/netapp/na_ontap_snapmirror.py
index 9af82dfe76..5299ee0fe1 100644
--- a/lib/ansible/modules/storage/netapp/na_ontap_snapmirror.py
+++ b/lib/ansible/modules/storage/netapp/na_ontap_snapmirror.py
@@ -269,7 +269,7 @@ class NetAppONTAPSnapmirror(object):
         if self.parameters.get('source_password'):
             self.module.params['password'] = self.parameters['source_password']
         self.module.params['hostname'] = self.parameters['source_hostname']
-        self.source_server = netapp_utils.setup_ontap_zapi(module=self.module)
+        self.source_server = netapp_utils.setup_na_ontap_zapi(module=self.module)
 
     def delete_snapmirror(self):
         """
