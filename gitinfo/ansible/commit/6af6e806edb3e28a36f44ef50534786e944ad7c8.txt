commit 6af6e806edb3e28a36f44ef50534786e944ad7c8
Author: Trishna Guha <trishnaguha17@gmail.com>
Date:   Thu Aug 16 12:16:04 2018 +0530

    nxos_interface port-channel idempotence fix for mode (#44248)
    
    Signed-off-by: Trishna Guha <trishnaguha17@gmail.com>

diff --git a/lib/ansible/modules/network/nxos/nxos_interface.py b/lib/ansible/modules/network/nxos/nxos_interface.py
index a199474e0a..a3ce24eb8a 100644
--- a/lib/ansible/modules/network/nxos/nxos_interface.py
+++ b/lib/ansible/modules/network/nxos/nxos_interface.py
@@ -578,7 +578,11 @@ def map_config_to_obj(want, module):
                     obj['name'] = normalize_interface(interface_table.get('interface'))
                     obj['admin_state'] = interface_table.get('admin_state')
                     obj['description'] = interface_table.get('desc')
-                    obj['mode'] = interface_table.get('eth_mode')
+                    mode = interface_table.get('eth_mode')
+                    if mode == 'access':
+                        obj['mode'] = 'layer2'
+                    else:
+                        obj['mode'] = 'layer3'
 
         objs.append(obj)
 
