commit ea6a2bfd95b65639676b9ccd7920a451d33fe610
Author: Michael Scherer <misc@zarb.org>
Date:   Sun May 8 11:33:54 2016 +0200

    Use type='path' rather than str, so path is expanded correctly

diff --git a/lib/ansible/modules/extras/system/known_hosts.py b/lib/ansible/modules/extras/system/known_hosts.py
index b68e85e0e7..b4c26e0efa 100644
--- a/lib/ansible/modules/extras/system/known_hosts.py
+++ b/lib/ansible/modules/extras/system/known_hosts.py
@@ -85,9 +85,7 @@ def enforce_state(module, params):
     host = params["name"]
     key = params.get("key",None)
     port = params.get("port",None)
-    #expand the path parameter; otherwise module.add_path_info
-    #(called by exit_json) unhelpfully says the unexpanded path is absent.
-    path = os.path.expanduser(params.get("path"))
+    path = params.get("path")
     state = params.get("state")
     #Find the ssh-keygen binary
     sshkeygen = module.get_bin_path("ssh-keygen",True)
@@ -240,7 +238,7 @@ def main():
         argument_spec = dict(
             name      = dict(required=True,  type='str', aliases=['host']),
             key       = dict(required=False,  type='str'),
-            path      = dict(default="~/.ssh/known_hosts", type='str'),
+            path      = dict(default="~/.ssh/known_hosts", type='path'),
             state     = dict(default='present', choices=['absent','present']),
             ),
         supports_check_mode = True
