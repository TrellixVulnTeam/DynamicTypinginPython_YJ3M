commit c2fb581414b6fb60f411dba60e1930a658a6360e
Author: Dag Wieers <dag@wieers.com>
Date:   Tue Feb 5 01:44:45 2019 +0100

    Fix various sonarcloud issues
    
    This fixes various reported bugs through sonarcloud at:
    https://sonarcloud.io/project/issues?id=Rodney-Reis_ansible&resolved=false&types=BUG

diff --git a/contrib/inventory/gce.py b/contrib/inventory/gce.py
index 59a3ccf246..e030a5fb12 100755
--- a/contrib/inventory/gce.py
+++ b/contrib/inventory/gce.py
@@ -1,20 +1,7 @@
 #!/usr/bin/env python
-# Copyright 2013 Google Inc.
-#
-# This file is part of Ansible
-#
-# Ansible is free software: you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation, either version 3 of the License, or
-# (at your option) any later version.
-#
-# Ansible is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-#
-# You should have received a copy of the GNU General Public License
-# along with Ansible.  If not, see <http://www.gnu.org/licenses/>.
+
+# Copyright: (c) 2013, Google Inc.
+# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)
 
 '''
 GCE external inventory script
@@ -498,7 +485,7 @@ class GceInventory(object):
             else:
                 groups[machine_type] = [name]
 
-            image = node.image and node.image or 'persistent_disk'
+            image = node.image or 'persistent_disk'
             if image in groups:
                 groups[image].append(name)
             else:
diff --git a/lib/ansible/module_utils/basic.py b/lib/ansible/module_utils/basic.py
index af0af93cc7..8d5944f6d0 100644
--- a/lib/ansible/module_utils/basic.py
+++ b/lib/ansible/module_utils/basic.py
@@ -2870,8 +2870,6 @@ class AnsibleModule(object):
                     if prompt_re.search(stdout) and not data:
                         if encoding:
                             stdout = to_native(stdout, encoding=encoding, errors=errors)
-                        else:
-                            stdout = stdout
                         return (257, stdout, "A prompt was encountered while running a command, but no input data was specified")
                 # only break out if no pipes are left to read or
                 # the pipes are completely read and
diff --git a/lib/ansible/module_utils/network/cnos/cnos.py b/lib/ansible/module_utils/network/cnos/cnos.py
index 2e16b82ced..d63a69313c 100644
--- a/lib/ansible/module_utils/network/cnos/cnos.py
+++ b/lib/ansible/module_utils/network/cnos/cnos.py
@@ -300,9 +300,9 @@ def waitForDeviceResponse(command, prompt, timeout, obj):
         except Exception:
             # debugOutput(prompt)
             if prompt == "(yes/no)?":
-                retVal = retVal
+                pass
             elif prompt == "Password:":
-                retVal = retVal
+                pass
             else:
                 retVal = retVal + "\n Error-101"
             flag = True
diff --git a/lib/ansible/modules/cloud/amazon/kinesis_stream.py b/lib/ansible/modules/cloud/amazon/kinesis_stream.py
index 6461ca1d26..2cb1e8f625 100644
--- a/lib/ansible/modules/cloud/amazon/kinesis_stream.py
+++ b/lib/ansible/modules/cloud/amazon/kinesis_stream.py
@@ -516,7 +516,6 @@ def recreate_tags_from_list(list_of_tags):
     """
     tags = list()
     i = 0
-    list_of_tags = list_of_tags
     for i in range(len(list_of_tags)):
         key_name = list_of_tags[i][0]
         key_val = list_of_tags[i][1]
diff --git a/lib/ansible/modules/cloud/memset/memset_dns_reload.py b/lib/ansible/modules/cloud/memset/memset_dns_reload.py
index f86521431b..002652c3ad 100644
--- a/lib/ansible/modules/cloud/memset/memset_dns_reload.py
+++ b/lib/ansible/modules/cloud/memset/memset_dns_reload.py
@@ -113,7 +113,6 @@ def poll_reload_status(api_key=None, job_id=None, payload=None):
     if response.json()['error']:
         # the reload job was submitted but polling failed. Don't return this as an overall task failure.
         stderr = "Reload submitted successfully, but the Memset API returned a job error when attempting to poll the reload status."
-        msg = msg
     else:
         memset_api = response.json()
         msg = None
diff --git a/lib/ansible/modules/cloud/memset/memset_zone.py b/lib/ansible/modules/cloud/memset/memset_zone.py
index 19414c5f6d..7d525a842b 100644
--- a/lib/ansible/modules/cloud/memset/memset_zone.py
+++ b/lib/ansible/modules/cloud/memset/memset_zone.py
@@ -187,8 +187,6 @@ def create_zone(args=None, zone_exists=None, payload=None):
         api_method = 'dns.zone_info'
         _has_failed, _msg, response = memset_api_call(api_key=args['api_key'], api_method=api_method, payload=payload)
         memset_api = response.json()
-    else:
-        msg = msg
 
     return(has_failed, has_changed, memset_api, msg)
 
diff --git a/lib/ansible/modules/cloud/misc/rhevm.py b/lib/ansible/modules/cloud/misc/rhevm.py
index 0b398efaf9..1f40ca6d5c 100644
--- a/lib/ansible/modules/cloud/misc/rhevm.py
+++ b/lib/ansible/modules/cloud/misc/rhevm.py
@@ -588,7 +588,7 @@ class RHEVConn(object):
                 setMsg(str(e))
                 setFailed()
                 return False
-        elif int(DISK.size) < (1024 * 1024 * 1024 * int(disksize)):
+        elif int(DISK.size) > (1024 * 1024 * 1024 * int(disksize)):
             setMsg("Shrinking disks is not supported")
             setMsg(str(e))
             setFailed()
diff --git a/lib/ansible/modules/network/cloudengine/ce_static_route.py b/lib/ansible/modules/network/cloudengine/ce_static_route.py
index 636aa665e5..a13e024050 100644
--- a/lib/ansible/modules/network/cloudengine/ce_static_route.py
+++ b/lib/ansible/modules/network/cloudengine/ce_static_route.py
@@ -1,20 +1,7 @@
 #!/usr/bin/python
-#
-# This file is part of Ansible
-#
-# Ansible is free software: you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation, either version 3 of the License, or
-# (at your option) any later version.
-#
-# Ansible is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-#
-# You should have received a copy of the GNU General Public License
-# along with Ansible.  If not, see <http://www.gnu.org/licenses/>.
-#
+
+# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)
+
 ANSIBLE_METADATA = {'metadata_version': '1.1',
                     'status': ['preview'],
                     'supported_by': 'community'}
@@ -406,7 +393,6 @@ class StaticRoute(object):
             if self.prefix.find('.') == -1:
                 return False
             if self.mask == '32':
-                self.prefix = self.prefix
                 return True
             if self.mask == '0':
                 self.prefix = '0.0.0.0'
@@ -427,7 +413,6 @@ class StaticRoute(object):
             if self.prefix.find(':') == -1:
                 return False
             if self.mask == '128':
-                self.prefix = self.prefix
                 return True
             if self.mask == '0':
                 self.prefix = '::'
diff --git a/lib/ansible/modules/network/cnos/cnos_bgp.py b/lib/ansible/modules/network/cnos/cnos_bgp.py
index 366a018c56..7b74d079cb 100644
--- a/lib/ansible/modules/network/cnos/cnos_bgp.py
+++ b/lib/ansible/modules/network/cnos/cnos_bgp.py
@@ -361,8 +361,6 @@ def bgpNeighborConfig(module, cmd, prompt, answer):
         command = command + bgpNeighborArg1 + " "
         if(bgpNeighborArg2 is not None and bgpNeighborArg2 == "mutihop"):
             command = command + bgpNeighborArg2
-        else:
-            command = command
 
     elif(bgpNeighborArg1 == "connection-retry-time"):
         command = command + bgpNeighborArg1 + " "
@@ -565,8 +563,6 @@ def bgpNeighborAFConfig(module, cmd, prompt, answer):
             else:
                 retVal = "Error-325"
                 return retVal
-        else:
-            command = command
 
     elif(bgpNeighborAFArg1 == "default-originate"):
         command = command + bgpNeighborAFArg1 + " "
@@ -643,8 +639,6 @@ def bgpNeighborAFConfig(module, cmd, prompt, answer):
         command = command + bgpNeighborAFArg1 + " "
         if(bgpNeighborAFArg2 is not None and bgpNeighborAFArg2 == "extended"):
             command = command + bgpNeighborAFArg2
-        else:
-            command = command
 
     elif(bgpNeighborAFArg1 == "soft-reconfiguration"):
         command = command + bgpNeighborAFArg1 + " inbound"
diff --git a/lib/ansible/modules/storage/netapp/_na_cdot_aggregate.py b/lib/ansible/modules/storage/netapp/_na_cdot_aggregate.py
index 2466d18df3..6c34a7d315 100644
--- a/lib/ansible/modules/storage/netapp/_na_cdot_aggregate.py
+++ b/lib/ansible/modules/storage/netapp/_na_cdot_aggregate.py
@@ -197,8 +197,7 @@ class NetAppCDOTAggregate(object):
                 changed = True
 
             elif self.state == 'present':
-                if self.name is not None and not self.name == \
-                        self.name:
+                if self.name is not None and not self.name == self.name:
                     rename_aggregate = True
                     changed = True
 
diff --git a/lib/ansible/plugins/action/net_base.py b/lib/ansible/plugins/action/net_base.py
index 8f174eb611..9a207f1efc 100644
--- a/lib/ansible/plugins/action/net_base.py
+++ b/lib/ansible/plugins/action/net_base.py
@@ -1,19 +1,6 @@
-# (c) 2015, Ansible Inc,
-#
-# This file is part of Ansible
-#
-# Ansible is free software: you can redistribute it and/or modify
-# it under the terms of the GNU General Public License as published by
-# the Free Software Foundation, either version 3 of the License, or
-# (at your option) any later version.
-#
-# Ansible is distributed in the hope that it will be useful,
-# but WITHOUT ANY WARRANTY; without even the implied warranty of
-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-# GNU General Public License for more details.
-#
-# You should have received a copy of the GNU General Public License
-# along with Ansible.  If not, see <http://www.gnu.org/licenses/>.
+# Copyright: (c) 2015, Ansible Inc,
+# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)
+
 from __future__ import (absolute_import, division, print_function)
 __metaclass__ = type
 
@@ -64,7 +51,7 @@ class ActionModule(ActionBase):
                 play_context.connection = 'netconf'
                 play_context.port = int(self.provider['port'] or self._play_context.port or 830)
             elif self.provider.get('transport') in ('nxapi', 'eapi') and play_context.network_os in ('nxos', 'eos'):
-                play_context.connection = play_context.connection
+                play_context.connection = 'local'
                 play_context.port = int(self.provider['port'] or self._play_context.port or 22)
             else:
                 play_context.connection = 'network_cli'
diff --git a/test/runner/lib/cloud/openshift.py b/test/runner/lib/cloud/openshift.py
index 93cf54da4c..9d869af610 100644
--- a/test/runner/lib/cloud/openshift.py
+++ b/test/runner/lib/cloud/openshift.py
@@ -179,7 +179,6 @@ class OpenShiftCloudProvider(CloudProvider):
             return
 
         client = HttpClient(self.args, always=True, insecure=True)
-        endpoint = endpoint
 
         for dummy in range(1, 30):
             display.info('Waiting for OpenShift service: %s' % endpoint, verbosity=1)
