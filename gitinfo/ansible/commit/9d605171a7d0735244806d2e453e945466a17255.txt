commit 9d605171a7d0735244806d2e453e945466a17255
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Thu Feb 12 13:55:27 2015 -0800

    Didn't port isbasestring/isunicodestring from kitchen so switch to isinstance

diff --git a/lib/ansible/utils/unicode.py b/lib/ansible/utils/unicode.py
index b2fcf65161..7bd035c007 100644
--- a/lib/ansible/utils/unicode.py
+++ b/lib/ansible/utils/unicode.py
@@ -116,12 +116,12 @@ def to_unicode(obj, encoding='utf-8', errors='replace', nonstring=None):
                     simple = obj.__str__()
                 except (UnicodeError, AttributeError):
                     simple = u''
-        if isbytestring(simple):
+        if isinstance(simple, str):
             return unicode(simple, encoding, errors)
         return simple
     elif nonstring in ('repr', 'strict'):
         obj_repr = repr(obj)
-        if isbytestring(obj_repr):
+        if isinstance(obj_repr, str):
             obj_repr = unicode(obj_repr, encoding, errors)
         if nonstring == 'repr':
             return obj_repr
@@ -221,7 +221,7 @@ def to_bytes(obj, encoding='utf-8', errors='replace', nonstring=None):
                 simple = obj.__unicode__()
             except (AttributeError, UnicodeError):
                 simple = ''
-        if isunicodestring(simple):
+        if isinstance(simple, unicode):
             simple = simple.encode(encoding, 'replace')
         return simple
     elif nonstring in ('repr', 'strict'):
@@ -229,7 +229,7 @@ def to_bytes(obj, encoding='utf-8', errors='replace', nonstring=None):
             obj_repr = obj.__repr__()
         except (AttributeError, UnicodeError):
             obj_repr = ''
-        if isunicodestring(obj_repr):
+        if isinstance(obj_repr, unicode):
             obj_repr =  obj_repr.encode(encoding, errors)
         else:
             obj_repr = str(obj_repr)
diff --git a/v2/ansible/utils/unicode.py b/v2/ansible/utils/unicode.py
index b2fcf65161..7bd035c007 100644
--- a/v2/ansible/utils/unicode.py
+++ b/v2/ansible/utils/unicode.py
@@ -116,12 +116,12 @@ def to_unicode(obj, encoding='utf-8', errors='replace', nonstring=None):
                     simple = obj.__str__()
                 except (UnicodeError, AttributeError):
                     simple = u''
-        if isbytestring(simple):
+        if isinstance(simple, str):
             return unicode(simple, encoding, errors)
         return simple
     elif nonstring in ('repr', 'strict'):
         obj_repr = repr(obj)
-        if isbytestring(obj_repr):
+        if isinstance(obj_repr, str):
             obj_repr = unicode(obj_repr, encoding, errors)
         if nonstring == 'repr':
             return obj_repr
@@ -221,7 +221,7 @@ def to_bytes(obj, encoding='utf-8', errors='replace', nonstring=None):
                 simple = obj.__unicode__()
             except (AttributeError, UnicodeError):
                 simple = ''
-        if isunicodestring(simple):
+        if isinstance(simple, unicode):
             simple = simple.encode(encoding, 'replace')
         return simple
     elif nonstring in ('repr', 'strict'):
@@ -229,7 +229,7 @@ def to_bytes(obj, encoding='utf-8', errors='replace', nonstring=None):
             obj_repr = obj.__repr__()
         except (AttributeError, UnicodeError):
             obj_repr = ''
-        if isunicodestring(obj_repr):
+        if isinstance(obj_repr, unicode):
             obj_repr =  obj_repr.encode(encoding, errors)
         else:
             obj_repr = str(obj_repr)
