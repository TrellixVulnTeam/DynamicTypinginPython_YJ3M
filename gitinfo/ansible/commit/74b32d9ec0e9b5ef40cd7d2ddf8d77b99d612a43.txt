commit 74b32d9ec0e9b5ef40cd7d2ddf8d77b99d612a43
Author: zaiusdr <eduardosuarez@gmail.com>
Date:   Thu Nov 10 16:55:58 2016 +0100

    Fix wait_for Module to handle socket response as string in Python3
    
    In Python3 socket module returns responses as bytes type. So it's
    necessary to convert it to string for the module work correctly.

diff --git a/lib/ansible/modules/utilities/logic/wait_for.py b/lib/ansible/modules/utilities/logic/wait_for.py
index 2cd99c24a1..46be2ff04c 100644
--- a/lib/ansible/modules/utilities/logic/wait_for.py
+++ b/lib/ansible/modules/utilities/logic/wait_for.py
@@ -27,6 +27,8 @@ import socket
 import sys
 import time
 
+from ansible.module_utils._text import to_native
+
 HAS_PSUTIL = False
 try:
     import psutil
@@ -509,7 +511,7 @@ def main():
                             if not response:
                                 # Server shutdown
                                 break
-                            data += response
+                            data += to_native(response, errors='surrogate_or_strict')
                             if re.search(compiled_search_re, data):
                                 matched = True
                                 break
