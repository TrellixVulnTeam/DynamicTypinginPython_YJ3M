commit 062e82937f2f97f94e78369306dfedc3f818de91
Author: James Cammarata <jimi@sngx.net>
Date:   Wed May 21 12:48:27 2014 -0500

    Fixing absolute path calculation for file module when linking
    
    Fixes #7403

diff --git a/library/files/file b/library/files/file
index 4ba61f6d53..32588e56e6 100644
--- a/library/files/file
+++ b/library/files/file
@@ -191,7 +191,7 @@ def main():
 
         absrc = src
         if not os.path.isabs(absrc):
-            absrc = os.path.normpath('%s/%s' % (os.path.dirname(path), absrc))
+            absrc = os.path.abspath(src)
 
         if not os.path.exists(absrc) and not force:
             module.fail_json(path=path, src=src, msg='src file does not exist, use "force=yes" if you really want to create the link: %s' % absrc)
