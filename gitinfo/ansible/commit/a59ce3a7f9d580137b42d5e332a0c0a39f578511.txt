commit a59ce3a7f9d580137b42d5e332a0c0a39f578511
Author: Matt Clay <matt@mystile.com>
Date:   Fri Jan 13 17:58:36 2017 -0800

    Add retry on failure to get instance.

diff --git a/test/runner/lib/core_ci.py b/test/runner/lib/core_ci.py
index 43ae123562..2f2798ad5c 100644
--- a/test/runner/lib/core_ci.py
+++ b/test/runner/lib/core_ci.py
@@ -171,10 +171,23 @@ class AnsibleCoreCI(object):
         if self.connection and self.connection.running:
             return self.connection
 
-        response = self.client.get(self._uri)
+        tries = 2
+        sleep = 10
+
+        while True:
+            tries -= 1
+            response = self.client.get(self._uri)
+
+            if response.status_code == 200:
+                break
 
-        if response.status_code != 200:
-            raise self._create_http_error(response)
+            error = self._create_http_error(response)
+
+            if not tries:
+                raise error
+
+            display.warning('%s. Trying again after %d seconds.' % (error, sleep))
+            time.sleep(sleep)
 
         if self.args.explain:
             self.connection = InstanceConnection(
