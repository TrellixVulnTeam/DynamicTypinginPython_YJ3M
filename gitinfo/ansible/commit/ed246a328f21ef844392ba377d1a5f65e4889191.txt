commit ed246a328f21ef844392ba377d1a5f65e4889191
Author: Jean Prat <saez0pub@users.noreply.github.com>
Date:   Wed Aug 31 21:56:08 2016 +0200

    if user is empty, it is not converted to tuple when using host_all (#3038)

diff --git a/lib/ansible/modules/database/mysql/mysql_user.py b/lib/ansible/modules/database/mysql/mysql_user.py
index 7f97a18206..4778a4eeac 100644
--- a/lib/ansible/modules/database/mysql/mysql_user.py
+++ b/lib/ansible/modules/database/mysql/mysql_user.py
@@ -214,7 +214,7 @@ def get_mode(cursor):
 
 def user_exists(cursor, user, host, host_all):
     if host_all:
-        cursor.execute("SELECT count(*) FROM user WHERE user = %s", user)
+        cursor.execute("SELECT count(*) FROM user WHERE user = %s", ([user]))
     else:
         cursor.execute("SELECT count(*) FROM user WHERE user = %s AND host = %s", (user,host))
 
@@ -259,7 +259,7 @@ def user_mod(cursor, user, host, host_all, password, encrypted, new_priv, append
     # to simplify code, if we have a specific host and no host_all, we create
     # a list with just host and loop over that
     if host_all:
-        hostnames = user_get_hostnames(cursor, user)
+        hostnames = user_get_hostnames(cursor, [user])
     else:
         hostnames = [host]
 
@@ -349,7 +349,7 @@ def user_delete(cursor, user, host, host_all, check_mode):
         return True
 
     if host_all:
-        hostnames = user_get_hostnames(cursor, user)
+        hostnames = user_get_hostnames(cursor, [user])
 
         for hostname in hostnames:
             cursor.execute("DROP USER %s@%s", (user, hostname))
