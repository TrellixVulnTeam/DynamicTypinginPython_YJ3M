commit 2293252e529d4708c76ed2dc0dc60d7834a3eec9
Author: Chip Gwyn <chip@fluidgravity.com>
Date:   Tue Jan 30 00:56:54 2018 -0500

    bug-35431 fixed removing encryption from user on subsequent runs of the task (#35433)

diff --git a/lib/ansible/modules/network/nxos/nxos_snmp_user.py b/lib/ansible/modules/network/nxos/nxos_snmp_user.py
index 093d57c597..2978a6767b 100644
--- a/lib/ansible/modules/network/nxos/nxos_snmp_user.py
+++ b/lib/ansible/modules/network/nxos/nxos_snmp_user.py
@@ -289,9 +289,6 @@ def main():
                 reset = True
                 proposed['encrypt'] = 'aes-128'
 
-            elif encrypt:
-                proposed['encrypt'] = 'aes-128'
-
             delta = dict(set(proposed.items()).difference(existing.items()))
 
             if delta.get('pwd'):
@@ -300,6 +297,9 @@ def main():
             if delta:
                 delta['group'] = group
 
+            if delta and encrypt:
+                delta['encrypt'] = 'aes-128'
+
             command = config_snmp_user(delta, user, reset, new)
             commands.append(command)
 
