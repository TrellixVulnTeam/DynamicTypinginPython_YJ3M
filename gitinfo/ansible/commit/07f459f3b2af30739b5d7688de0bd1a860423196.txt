commit 07f459f3b2af30739b5d7688de0bd1a860423196
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Thu Aug 9 21:14:30 2012 -0400

    Allow user to be passed in via --extra-vars

diff --git a/lib/ansible/playbook/play.py b/lib/ansible/playbook/play.py
index ef122fdd9a..d05e68f238 100644
--- a/lib/ansible/playbook/play.py
+++ b/lib/ansible/playbook/play.py
@@ -68,7 +68,7 @@ class Play(object):
         self.vars         = self._get_vars(self.playbook.basedir)
         self._tasks       = ds.get('tasks', [])
         self._handlers    = ds.get('handlers', [])
-        self.remote_user  = ds.get('user', self.playbook.remote_user)
+        self.remote_user  = utils.template(ds.get('user', self.playbook.remote_user), playbook.extra_vars)
         self.remote_port  = ds.get('port', self.playbook.remote_port)
         self.sudo         = ds.get('sudo', self.playbook.sudo)
         self.sudo_user    = ds.get('sudo_user', self.playbook.sudo_user)
diff --git a/lib/ansible/runner/connection/paramiko_ssh.py b/lib/ansible/runner/connection/paramiko_ssh.py
index c347a684fd..79d91ec5a3 100644
--- a/lib/ansible/runner/connection/paramiko_ssh.py
+++ b/lib/ansible/runner/connection/paramiko_ssh.py
@@ -56,6 +56,9 @@ class ParamikoConnection(object):
             raise errors.AnsibleError("paramiko is not installed")
 
         user = self.runner.remote_user
+
+        vvv("ESTABLISH CONNECTION FOR USER: %s" % user, host=self.host)
+
         ssh = paramiko.SSHClient()
         ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
 
