commit 8e2bff407acafd1c82813c087802256815f54cc6
Author: ShachafGoldstein <shachaf.gold@gmail.com>
Date:   Wed May 15 03:50:56 2019 +0300

    Change S3 bucket urls to new method as per #56124 (#56418)
    
    * Change S3 bucket urls to new method as per #56124
    
    * duplicate / and dded changelog fragment
    
    * Revert "duplicate / and dded changelog fragment"
    
    This reverts commit b89d5cbe6d983168212c44def537d87f0ed22204.
    
    * duplicate /

diff --git a/test/integration/targets/setup_win_psget/tasks/main.yml b/test/integration/targets/setup_win_psget/tasks/main.yml
index a3c3c09778..6c84b903c9 100644
--- a/test/integration/targets/setup_win_psget/tasks/main.yml
+++ b/test/integration/targets/setup_win_psget/tasks/main.yml
@@ -10,7 +10,7 @@
   block:
   - name: install PackageManagement
     win_package:
-      path: https://s3.amazonaws.com/ansible-ci-files/test/integration/targets/setup_win_psget/PackageManagement_x64.msi
+      path: https://ansible-ci-files.s3.amazonaws.com/test/integration/targets/setup_win_psget/PackageManagement_x64.msi
       product_id: '{57E5A8BB-41EB-4F09-B332-B535C5954A28}'
       state: present
 
@@ -21,7 +21,7 @@
 
   - name: download nuget provider dll
     win_get_url:
-      url: https://s3.amazonaws.com/ansible-ci-files/test/integration/targets/setup_win_psget/Microsoft.PackageManagement.NuGetProvider-2.8.5.208.dll
+      url: https://ansible-ci-files.s3.amazonaws.com/test/integration/targets/setup_win_psget/Microsoft.PackageManagement.NuGetProvider-2.8.5.208.dll
       dest: C:\Program Files\PackageManagement\ProviderAssemblies\nuget\2.8.5.208\Microsoft.PackageManagement.NuGetProvider.dll
 
 - name: get version and install location of PackageManagement and PowerShellGet
@@ -63,9 +63,9 @@
     when: item.name in installed_modules
     loop:
     - name: PackageManagement
-      url: https://s3.amazonaws.com/ansible-ci-files/test/integration/targets/setup_win_psget/packagemanagement.1.1.7.nupkg
+      url: https://ansible-ci-files.s3.amazonaws.com/test/integration/targets/setup_win_psget/packagemanagement.1.1.7.nupkg
     - name: PowerShellGet
-      url: https://s3.amazonaws.com/ansible-ci-files/test/integration/targets/setup_win_psget/powershellget.1.6.0.nupkg
+      url: https://ansible-ci-files.s3.amazonaws.com/test/integration/targets/setup_win_psget/powershellget.1.6.0.nupkg
 
   - name: remove the old versions of PackageManagement and PowerShellGet
     win_file:
diff --git a/test/integration/targets/win_command/tasks/main.yml b/test/integration/targets/win_command/tasks/main.yml
index 74f8556a44..676d6eae4a 100644
--- a/test/integration/targets/win_command/tasks/main.yml
+++ b/test/integration/targets/win_command/tasks/main.yml
@@ -171,7 +171,7 @@
 
 - name: download binary the outputs argv to stdout
   win_get_url:
-    url: https://s3.amazonaws.com/ansible-ci-files/test/integration/roles/test_win_module_utils/PrintArgv.exe
+    url: https://ansible-ci-files.s3.amazonaws.com/test/integration/roles/test_win_module_utils/PrintArgv.exe
     dest: C:\ansible testing\PrintArgv.exe
 
 - name: call argv binary with absolute path
diff --git a/test/integration/targets/win_get_url/tasks/main.yml b/test/integration/targets/win_get_url/tasks/main.yml
index fbaa69f9b5..c2345536a3 100644
--- a/test/integration/targets/win_get_url/tasks/main.yml
+++ b/test/integration/targets/win_get_url/tasks/main.yml
@@ -15,7 +15,7 @@
 
 - name: download SlimFTPd binary
   win_get_url:
-    url: https://s3.amazonaws.com/ansible-ci-files/test/integration/roles/test_win_get_url/SlimFTPd.exe
+    url: https://ansible-ci-files.s3.amazonaws.com/test/integration/roles/test_win_get_url/SlimFTPd.exe
     dest: '{{ testing_dir }}\SlimFTPd.exe'
 
 # SlimFTPd does not work with special chars because it is so old, use a symlink as a workaround
diff --git a/test/integration/targets/win_get_url/tasks/tests_url.yml b/test/integration/targets/win_get_url/tasks/tests_url.yml
index d420f13844..66a9b26ee6 100644
--- a/test/integration/targets/win_get_url/tasks/tests_url.yml
+++ b/test/integration/targets/win_get_url/tasks/tests_url.yml
@@ -53,12 +53,12 @@
 # Cannot use httpbin as the Last-Modified date is generated dynamically
 - name: download file for force=no tests
   win_get_url:
-    url: https://s3.amazonaws.com/ansible-ci-files/test/integration/roles/test_win_get_url/SlimFTPd.exe
+    url: https://ansible-ci-files.s3.amazonaws.com/test/integration/roles/test_win_get_url/SlimFTPd.exe
     dest: '{{ testing_dir }}\output'
 
 - name: download single file with force no
   win_get_url:
-    url: https://s3.amazonaws.com/ansible-ci-files/test/integration/roles/test_win_get_url/SlimFTPd.exe
+    url: https://ansible-ci-files.s3.amazonaws.com/test/integration/roles/test_win_get_url/SlimFTPd.exe
     dest: '{{ testing_dir }}\output'
     force: no
   register: http_download_no_force
@@ -76,7 +76,7 @@
 
 - name: download newer file with force no
   win_get_url:
-    url: https://s3.amazonaws.com/ansible-ci-files/test/integration/roles/test_win_get_url/SlimFTPd.exe
+    url: https://ansible-ci-files.s3.amazonaws.com/test/integration/roles/test_win_get_url/SlimFTPd.exe
     dest: '{{ testing_dir }}\output'
     force: no
   register: http_download_newer_no_force
diff --git a/test/integration/targets/win_hotfix/defaults/main.yml b/test/integration/targets/win_hotfix/defaults/main.yml
index 9124eae05b..22edea7c16 100644
--- a/test/integration/targets/win_hotfix/defaults/main.yml
+++ b/test/integration/targets/win_hotfix/defaults/main.yml
@@ -1,9 +1,9 @@
 ---
 # these hotfixes, are for Hyper-V, there may be a chance the system already has them
 # but in most cases for our CI purposes they wouldn't be present
-test_win_hotfix_good_url: https://s3.amazonaws.com/ansible-ci-files/test/integration/targets/win_hotfix/windows8.1-kb3027108-v2-x64_66366c7be2d64d83b63cac42bc40c0a3c01bc70d.msu
-test_win_hotfix_reboot_url: https://s3.amazonaws.com/ansible-ci-files/test/integration/targets/win_hotfix/windows8.1-kb2913659-v2-x64_963a4d890c9ff9cc83a97cf54305de6451038ba4.msu
-test_win_hotfix_bad_url: https://s3.amazonaws.com/ansible-ci-files/test/integration/targets/win_hotfix/windows8-rt-kb3172729-x64_69cab4c7785b1faa3fc450f32bed4873d53bb96f.msu
+test_win_hotfix_good_url: https://ansible-ci-files.s3.amazonaws.com/test/integration/targets/win_hotfix/windows8.1-kb3027108-v2-x64_66366c7be2d64d83b63cac42bc40c0a3c01bc70d.msu
+test_win_hotfix_reboot_url: https://ansible-ci-files.s3.amazonaws.com/test/integration/targets/win_hotfix/windows8.1-kb2913659-v2-x64_963a4d890c9ff9cc83a97cf54305de6451038ba4.msu
+test_win_hotfix_bad_url: https://ansible-ci-files.s3.amazonaws.com/test/integration/targets/win_hotfix/windows8-rt-kb3172729-x64_69cab4c7785b1faa3fc450f32bed4873d53bb96f.msu
 test_win_hotfix_path: C:\ansible\win_hotfix
 
 test_win_hotfix_kb: KB3027108
diff --git a/test/integration/targets/win_module_utils/tasks/main.yml b/test/integration/targets/win_module_utils/tasks/main.yml
index 9faa331747..25a46d4a4f 100644
--- a/test/integration/targets/win_module_utils/tasks/main.yml
+++ b/test/integration/targets/win_module_utils/tasks/main.yml
@@ -93,7 +93,7 @@
 
 - name: download binary the outputs argv to stdout
   win_get_url:
-    url: https://s3.amazonaws.com/ansible-ci-files/test/integration/roles/test_win_module_utils/PrintArgv.exe
+    url: https://ansible-ci-files.s3.amazonaws.com/test/integration/roles/test_win_module_utils/PrintArgv.exe
     dest: C:\ansible testing\PrintArgv.exe
 
 - name: call module with CommandUtil tests
diff --git a/test/integration/targets/win_package/defaults/main.yml b/test/integration/targets/win_package/defaults/main.yml
index cdeff6c40e..c713139e81 100644
--- a/test/integration/targets/win_package/defaults/main.yml
+++ b/test/integration/targets/win_package/defaults/main.yml
@@ -4,10 +4,10 @@ test_win_package_path_safe: C:\ansible\win_package
 test_win_package_path: C:\ansible\win package
 test_win_package_log_path_install: C:\ansible\win package\test-install.log
 test_win_package_log_path_uninstall: C:\ansible\win package\test-uninstall.log
-test_win_package_good_url: https://s3.amazonaws.com/ansible-ci-files/test/integration/roles/test_win_package/good.msi
-test_win_package_reboot_url: https://s3.amazonaws.com/ansible-ci-files/test/integration/roles/test_win_package/reboot.msi
-test_win_package_bad_url: https://s3.amazonaws.com/ansible-ci-files/test/integration/roles/test_win_package/bad.msi
-test_win_package_exe_url: https://s3.amazonaws.com/ansible-ci-files/test/integration/roles/test_win_package/7z.exe # TODO: change to it's own executable
+test_win_package_good_url: https://ansible-ci-files.s3.amazonaws.com/test/integration/roles/test_win_package/good.msi
+test_win_package_reboot_url: https://ansible-ci-files.s3.amazonaws.com/test/integration/roles/test_win_package/reboot.msi
+test_win_package_bad_url: https://ansible-ci-files.s3.amazonaws.com/test/integration/roles/test_win_package/bad.msi
+test_win_package_exe_url: https://ansible-ci-files.s3.amazonaws.com/test/integration/roles/test_win_package/7z.exe # TODO: change to it's own executable
 
 test_win_package_good_id: '{223D9A13-653B-4231-A365-EDDC30B4F226}'
 test_win_package_reboot_id: '{223D9A13-653B-4231-A365-EDDC30B4F227}'
diff --git a/test/integration/targets/win_pester/tasks/main.yml b/test/integration/targets/win_pester/tasks/main.yml
index 1b1d9b6edd..8c7b4791f1 100644
--- a/test/integration/targets/win_pester/tasks/main.yml
+++ b/test/integration/targets/win_pester/tasks/main.yml
@@ -8,7 +8,7 @@
   win_get_url:
     # this was downloaded straight off the Pester GitHub release page and uploaded to the S3 bucket
     # https://github.com/pester/Pester/releases 
-    url: 'https://s3.amazonaws.com/ansible-ci-files/test/integration/roles/test_win_pester/Pester-4.3.1.zip'
+    url: 'https://ansible-ci-files.s3.amazonaws.com/test/integration/roles/test_win_pester/Pester-4.3.1.zip'
     dest: '{{test_win_pester_path}}\Pester-4.3.1.zip'
 
 - name: unzip Pester module
diff --git a/test/integration/targets/win_psexec/tasks/main.yml b/test/integration/targets/win_psexec/tasks/main.yml
index b4247e1fa1..27783f9e62 100644
--- a/test/integration/targets/win_psexec/tasks/main.yml
+++ b/test/integration/targets/win_psexec/tasks/main.yml
@@ -10,7 +10,7 @@
 
 - name: Download PsExec
   win_get_url:
-    url: https://s3.amazonaws.com/ansible-ci-files/test/integration/targets/win_psexec/PsExec.exe
+    url: https://ansible-ci-files.s3.amazonaws.com/test/integration/targets/win_psexec/PsExec.exe
     dest: '{{ testing_dir }}\PsExec.exe'
 
 - name: Get the existing PATH env var
diff --git a/test/integration/targets/win_psmodule/tasks/setup.yml b/test/integration/targets/win_psmodule/tasks/setup.yml
index 399db99f00..128c69eb1d 100644
--- a/test/integration/targets/win_psmodule/tasks/setup.yml
+++ b/test/integration/targets/win_psmodule/tasks/setup.yml
@@ -107,7 +107,7 @@
 # Used in the script below to create the .nupkg for each test module
 - name: download NuGet binary for module publishing
   win_get_url:
-    url: https://s3.amazonaws.com/ansible-ci-files/test/integration/targets/win_psmodule/nuget.exe
+    url: https://ansible-ci-files.s3.amazonaws.com/test/integration/targets/win_psmodule/nuget.exe
     dest: '{{ remote_tmp_dir }}'
 
 - name: create test PowerShell modules
diff --git a/test/integration/targets/win_service/defaults/main.yml b/test/integration/targets/win_service/defaults/main.yml
index 12df1c63fb..51567c7e06 100644
--- a/test/integration/targets/win_service/defaults/main.yml
+++ b/test/integration/targets/win_service/defaults/main.yml
@@ -1,5 +1,5 @@
 ---
-test_win_service_binary_url: https://s3.amazonaws.com/ansible-ci-files/test/integration/targets/win_service/SleepService.exe
+test_win_service_binary_url: https://ansible-ci-files.s3.amazonaws.com/test/integration/targets/win_service/SleepService.exe
 test_win_service_dir: C:\ansible testing\[win_service]
 test_win_service_path: '{{ test_win_service_dir }}\SleepService.exe'
 test_win_service_name: TestService [*abc]
diff --git a/test/runner/setup/windows-httptester.ps1 b/test/runner/setup/windows-httptester.ps1
index b854ef14b4..70bdb33229 100644
--- a/test/runner/setup/windows-httptester.ps1
+++ b/test/runner/setup/windows-httptester.ps1
@@ -113,7 +113,7 @@ if ($os_version -ge [Version]"6.2") {
     # versions of Windows. Use custom application Port Mapper to acheive the
     # same outcome
     # http://www.analogx.com/contents/download/Network/pmapper/Freeware.htm
-    $s3_url = "https://s3.amazonaws.com/ansible-ci-files/ansible-test/pmapper-1.04.exe"
+    $s3_url = "https://ansible-ci-files.s3.amazonaws.com/ansible-test/pmapper-1.04.exe"
 
     # download the Port Mapper executable to a temporary directory
     $pmapper_folder = Join-Path -Path ([System.IO.Path]::GetTempPath()) -ChildPath ([System.IO.Path]::GetRandomFileName())
