commit f7fafa8c1602ed075f2dc0e8ec169fe2b2dd8210
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Wed Nov 19 13:04:44 2014 -0800

    Cannot readlink() on a hard link

diff --git a/lib/ansible/modules/files/file.py b/lib/ansible/modules/files/file.py
index be7b05aaf5..7aa5e45d7b 100644
--- a/lib/ansible/modules/files/file.py
+++ b/lib/ansible/modules/files/file.py
@@ -170,7 +170,7 @@ def main():
         src = os.path.expanduser(src)
     else:
         if state in ['link','hard']:
-            if follow:
+            if follow and state == 'link':
                 # use the current target of the link as the source
                 src = os.readlink(path)
             else:
