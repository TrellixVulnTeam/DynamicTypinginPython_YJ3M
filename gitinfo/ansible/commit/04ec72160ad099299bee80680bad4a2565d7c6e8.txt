commit 04ec72160ad099299bee80680bad4a2565d7c6e8
Author: Rick Elrod <rick@elrod.me>
Date:   Fri May 15 20:30:08 2020 -0500

    Fixes for building ansible-base .debs, using py3 (#69534)
    
    Change:
    - Changes for ansible -> ansible base
    - Bump to py3 for 2.10 PPA release
    
    Test Plan:
    - Local VM; Jenkins after merge.
    
    Tickets:
    - Refs #57342
    
    Signed-off-by: Rick Elrod <rick@elrod.me>

diff --git a/Makefile b/Makefile
index b91e45a000..d49d0f0bd4 100644
--- a/Makefile
+++ b/Makefile
@@ -14,7 +14,7 @@
 ########################################################
 # variable section
 
-NAME = ansible
+NAME = ansible-base
 OS = $(shell uname -s)
 PREFIX ?= '/usr/local'
 SDIST_DIR ?= 'dist'
diff --git a/packaging/debian/ansible-test.install b/packaging/debian/ansible-test.install
index 99e6ba3007..9252890580 100644
--- a/packaging/debian/ansible-test.install
+++ b/packaging/debian/ansible-test.install
@@ -1,2 +1,2 @@
 debian/tmp/usr/bin/ansible-test usr/bin
-debian/tmp/usr/lib/python2.7/dist-packages/ansible_test usr/lib/python2.7/dist-packages
+debian/tmp/usr/lib/python3/dist-packages/ansible_test usr/lib/python3/dist-packages
diff --git a/packaging/debian/changelog b/packaging/debian/changelog
index de194369a7..0eb840ce7c 100644
--- a/packaging/debian/changelog
+++ b/packaging/debian/changelog
@@ -1,4 +1,4 @@
-ansible (%VERSION%-%RELEASE%~%DIST%) %DIST%; urgency=low
+ansible-base (%VERSION%-%RELEASE%~%DIST%) %DIST%; urgency=low
 
   * %VERSION% release
 
diff --git a/packaging/debian/control b/packaging/debian/control
index a771be78ee..c02f2c74ab 100644
--- a/packaging/debian/control
+++ b/packaging/debian/control
@@ -1,14 +1,14 @@
-Source: ansible
+Source: ansible-base
 Section: admin
 Priority: optional
 Standards-Version: 3.9.3
 Maintainer: Ansible, Inc. <info@ansible.com>
-Build-Depends: cdbs, debhelper (>= 5.0.0), python-docutils, python, dh-python | python-support, python-setuptools, lsb-release
+Build-Depends: cdbs, debhelper (>= 5.0.0), python3-docutils, python3, dh-python | python-support, python3-setuptools, lsb-release
 Homepage: https://github.com/ansible/ansible/
 
-Package: ansible
+Package: ansible-base
 Architecture: all
-Depends: python-jinja2, python-yaml, python-paramiko, python-httplib2, python-six, python-crypto (>= 2.6), python-setuptools, sshpass, ${misc:Depends}, ${python:Depends}
+Depends: python3-jinja2, python3-yaml, python3-paramiko, python3-cryptography, sshpass, ${misc:Depends}, ${python:Depends}
 Description: Ansible IT Automation
  Ansible is a radically simple model-driven configuration management,
  multi-node deployment, and remote task execution system. Ansible works
@@ -18,7 +18,7 @@ Description: Ansible IT Automation
 
 Package: ansible-test
 Architecture: all
-Depends: ansible (= ${binary:Version}), python-virtualenv, ${misc:Depends}
+Depends: ansible-base (= ${binary:Version}), python3-venv, ${misc:Depends}
 Description: Ansible IT Automation
  Ansible is a radically simple model-driven configuration management,
  multi-node deployment, and remote task execution system. Ansible works
diff --git a/packaging/debian/rules b/packaging/debian/rules
index e676325cd9..cd1e953418 100755
--- a/packaging/debian/rules
+++ b/packaging/debian/rules
@@ -1,9 +1,9 @@
 #!/usr/bin/make -f
 # -- makefile --
 
-DEB_PYTHON2_MODULE_PACKAGES=ansible ansible_test
+DEB_PYTHON3_MODULE_PACKAGES=ansible-base ansible_test
 #DEB_PYTHON_INSTALL_ARGS_ALL="--install-purelib=/usr/lib/python2.7/site-packages/"
-DEB_PYTHON_DISTUTILS_INSTALLDIR_SKEL = /usr/lib/@PYTHONBINARY@/dist-packages/
+DEB_PYTHON_DISTUTILS_INSTALLDIR_SKEL = /usr/lib/python3/dist-packages/
 
 include /usr/share/cdbs/1/rules/debhelper.mk
 include /usr/share/cdbs/1/class/python-distutils.mk
