commit be28794dfcf939fe351bd202f2116849bc6eb01a
Author: Yunge Zhu <37337818+yungezz@users.noreply.github.com>
Date:   Fri Nov 30 14:08:31 2018 +0800

    fix keyvault key secret not support cloud environment (#49182)

diff --git a/lib/ansible/modules/cloud/azure/azure_rm_keyvaultkey.py b/lib/ansible/modules/cloud/azure/azure_rm_keyvaultkey.py
index 88fe000001..d762e10ce2 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_keyvaultkey.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_keyvaultkey.py
@@ -149,6 +149,7 @@ class AzureRMKeyVaultKey(AzureRMModuleBase):
                 client_id=self.credentials['client_id'],
                 secret=self.credentials['secret'],
                 tenant=tenant,
+                cloud_environment=self._cloud_environment,
                 resource="https://vault.azure.net")
 
             token = authcredential.token
diff --git a/lib/ansible/modules/cloud/azure/azure_rm_keyvaultsecret.py b/lib/ansible/modules/cloud/azure/azure_rm_keyvaultsecret.py
index e5363556de..2830fee824 100644
--- a/lib/ansible/modules/cloud/azure/azure_rm_keyvaultsecret.py
+++ b/lib/ansible/modules/cloud/azure/azure_rm_keyvaultsecret.py
@@ -141,6 +141,7 @@ class AzureRMKeyVaultSecret(AzureRMModuleBase):
                 client_id=self.credentials['client_id'],
                 secret=self.credentials['secret'],
                 tenant=tenant,
+                cloud_environment=self._cloud_environment,
                 resource="https://vault.azure.net")
 
             token = authcredential.token
