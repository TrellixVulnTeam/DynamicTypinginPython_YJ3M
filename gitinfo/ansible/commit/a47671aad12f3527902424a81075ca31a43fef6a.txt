commit a47671aad12f3527902424a81075ca31a43fef6a
Author: Brian Coca <bcoca@ansible.com>
Date:   Mon Sep 17 18:47:42 2018 -0400

    allow openstack invetnory to work cacheless
    
    fixes #45431

diff --git a/changelogs/fragments/openstack_inventory_fix.yml b/changelogs/fragments/openstack_inventory_fix.yml
new file mode 100644
index 0000000000..890e6277d2
--- /dev/null
+++ b/changelogs/fragments/openstack_inventory_fix.yml
@@ -0,0 +1,2 @@
+bugfixes:
+    - allow using openstack inventory plugin w/o a cache
diff --git a/lib/ansible/plugins/inventory/openstack.py b/lib/ansible/plugins/inventory/openstack.py
index dc720f4694..f857a27cda 100644
--- a/lib/ansible/plugins/inventory/openstack.py
+++ b/lib/ansible/plugins/inventory/openstack.py
@@ -196,7 +196,8 @@ class InventoryModule(BaseInventoryPlugin, Constructable, Cacheable):
             source_data = cloud_inventory.list_hosts(
                 expand=expand_hostvars, fail_on_cloud_config=fail_on_errors)
 
-            self.cache.set(cache_key, source_data)
+            if self.cache is not None:
+                self.cache.set(cache_key, source_data)
 
         self._populate_from_source(source_data)
 
