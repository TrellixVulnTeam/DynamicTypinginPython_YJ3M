commit 4f1d0f1b394a14cbfbcb6943257ef0aca7b58ddf
Author: Matt Clay <matt@mystile.com>
Date:   Fri Jul 19 14:46:33 2019 -0700

    Skip using paths for ansible-doc sanity test.

diff --git a/test/runner/lib/sanity/ansible_doc.py b/test/runner/lib/sanity/ansible_doc.py
index 9ca541741a..357f9d5b86 100644
--- a/test/runner/lib/sanity/ansible_doc.py
+++ b/test/runner/lib/sanity/ansible_doc.py
@@ -43,7 +43,9 @@ class AnsibleDocTest(SanityMultipleVersion):
         :rtype: TestResult
         """
         skip_file = 'test/sanity/ansible-doc/skip.txt'
-        skip_modules = set(read_lines_without_comments(skip_file, remove_blank_lines=True, optional=True))
+        skip_paths = set(read_lines_without_comments(skip_file, remove_blank_lines=True, optional=True))
+
+        targets_include = [target for target in targets.include if target.path not in skip_paths and os.path.splitext(target.path)[1] == '.py']
 
         # This should use documentable plugins from constants instead
         plugin_type_blacklist = set([
@@ -56,9 +58,9 @@ class AnsibleDocTest(SanityMultipleVersion):
             'test',
         ])
 
-        modules = sorted(set(m for i in targets.include for m in i.modules) - skip_modules)
+        modules = sorted(set(m for i in targets_include for m in i.modules))
 
-        plugins = [os.path.splitext(i.path)[0].split('/')[-2:] + [i.path] for i in targets.include if os.path.splitext(i.path)[1] == '.py' and
+        plugins = [os.path.splitext(i.path)[0].split('/')[-2:] + [i.path] for i in targets_include if
                    os.path.basename(i.path) != '__init__.py' and
                    re.search(r'^lib/ansible/plugins/[^/]+/', i.path)
                    and i.path != 'lib/ansible/plugins/cache/base.py']
diff --git a/test/sanity/ansible-doc/skip.txt b/test/sanity/ansible-doc/skip.txt
index 99a8e526e7..b4ea7ce845 100644
--- a/test/sanity/ansible-doc/skip.txt
+++ b/test/sanity/ansible-doc/skip.txt
@@ -1,42 +1,42 @@
-async_wrapper
-accelerate
-aos_asn_pool
-aos_blueprint
-aos_blueprint_param
-aos_blueprint_virtnet
-aos_device
-aos_external_router
-aos_ip_pool
-aos_logical_device
-aos_logical_device_map
-aos_login
-aos_rack_type
-aos_template
-azure
-cl_bond
-cl_bridge
-cl_img_install
-cl_interface
-cl_interface_policy
-cl_license
-cl_ports
-cs_nic
-docker
-ec2_ami_find
-ec2_ami_search
-ec2_facts
-ec2_remote_facts
-ec2_vpc
-kubernetes
-netscaler
-nxos_ip_interface
-nxos_mtu
-nxos_portchannel
-nxos_switchport
-oc
-os_server_actions
-panos_nat_policy
-panos_security_policy
-s3
-vsphere_guest
-win_msi
+lib/ansible/modules/utilities/logic/async_wrapper.py
+lib/ansible/modules/utilities/helper/_accelerate.py
+lib/ansible/modules/network/aos/_aos_asn_pool.py
+lib/ansible/modules/network/aos/_aos_blueprint.py
+lib/ansible/modules/network/aos/_aos_blueprint_param.py
+lib/ansible/modules/network/aos/_aos_blueprint_virtnet.py
+lib/ansible/modules/network/aos/_aos_device.py
+lib/ansible/modules/network/aos/_aos_external_router.py
+lib/ansible/modules/network/aos/_aos_ip_pool.py
+lib/ansible/modules/network/aos/_aos_logical_device.py
+lib/ansible/modules/network/aos/_aos_logical_device_map.py
+lib/ansible/modules/network/aos/_aos_login.py
+lib/ansible/modules/network/aos/_aos_rack_type.py
+lib/ansible/modules/network/aos/_aos_template.py
+lib/ansible/modules/cloud/azure/_azure.py
+lib/ansible/modules/network/cumulus/_cl_bond.py
+lib/ansible/modules/network/cumulus/_cl_bridge.py
+lib/ansible/modules/network/cumulus/_cl_img_install.py
+lib/ansible/modules/network/cumulus/_cl_interface.py
+lib/ansible/modules/network/cumulus/_cl_interface_policy.py
+lib/ansible/modules/network/cumulus/_cl_license.py
+lib/ansible/modules/network/cumulus/_cl_ports.py
+lib/ansible/modules/cloud/cloudstack/_cs_nic.py
+lib/ansible/modules/cloud/docker/_docker.py
+lib/ansible/modules/cloud/amazon/_ec2_ami_find.py
+lib/ansible/modules/cloud/amazon/_ec2_ami_search.py
+lib/ansible/modules/cloud/amazon/_ec2_facts.py
+lib/ansible/modules/cloud/amazon/_ec2_remote_facts.py
+lib/ansible/modules/cloud/amazon/_ec2_vpc.py
+lib/ansible/modules/clustering/k8s/_kubernetes.py
+lib/ansible/modules/network/citrix/_netscaler.py
+lib/ansible/modules/network/nxos/_nxos_ip_interface.py
+lib/ansible/modules/network/nxos/_nxos_mtu.py
+lib/ansible/modules/network/nxos/_nxos_portchannel.py
+lib/ansible/modules/network/nxos/_nxos_switchport.py
+lib/ansible/modules/clustering/openshift/_oc.py
+lib/ansible/modules/cloud/openstack/_os_server_actions.py
+lib/ansible/modules/network/panos/_panos_nat_policy.py
+lib/ansible/modules/network/panos/_panos_security_policy.py
+lib/ansible/modules/cloud/amazon/_s3.py
+lib/ansible/modules/cloud/vmware/_vsphere_guest.py
+lib/ansible/modules/windows/_win_msi.py
