commit ae9843fccdac1bc5da95f2c9d274e927f4a43962
Author: James Cammarata <jimi@sngx.net>
Date:   Mon Feb 3 10:10:45 2014 -0600

    Fix issue with handler notifications being sent out incorrectly
    
    This is a partial revert of e8ad36c, which introduced the bug.
    
    Fixes #5848

diff --git a/lib/ansible/playbook/__init__.py b/lib/ansible/playbook/__init__.py
index 0d72548582..b52ee48770 100644
--- a/lib/ansible/playbook/__init__.py
+++ b/lib/ansible/playbook/__init__.py
@@ -299,7 +299,7 @@ class PlayBook(object):
     def _trim_unavailable_hosts(self, hostlist=[]):
         ''' returns a list of hosts that haven't failed and aren't dark '''
 
-        return [ h for h in hostlist if (h not in self.stats.failures) and (h not in self.stats.dark)]
+        return [ h for h in self.inventory.list_hosts(hostlist) if (h not in self.stats.failures) and (h not in self.stats.dark)]
 
     # *****************************************************
 
