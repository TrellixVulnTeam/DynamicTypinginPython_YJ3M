commit badb41390ed58851b6895c6d3c18e9a549b31850
Author: Tim Bielawa <tbielawa@redhat.com>
Date:   Tue Mar 5 13:59:39 2013 -0500

    Update the Makefile and build-site.py to notify of missing dependencies for doc compiling

diff --git a/Makefile b/Makefile
index 73f1b2e5f2..c712467348 100644
--- a/Makefile
+++ b/Makefile
@@ -20,9 +20,13 @@ OS = $(shell uname -s)
 # Manpages are currently built with asciidoc -- would like to move to markdown
 # This doesn't evaluate until it's called. The -D argument is the
 # directory of the target file ($@), kinda like `dirname`.
+MANPAGES := docs/man/man1/ansible.1 docs/man/man1/ansible-playbook.1 docs/man/man1/ansible-pull.1 docs/man/man1/ansible-doc.1
+ifneq ($(shell which a2x 2>/dev/null),)
 ASCII2MAN = a2x -D $(dir $@) -d manpage -f manpage $<
 ASCII2HTMLMAN = a2x -D docs/html/man/ -d manpage -f xhtml
-MANPAGES := docs/man/man1/ansible.1 docs/man/man1/ansible-playbook.1 docs/man/man1/ansible-pull.1 docs/man/man1/ansible-doc.1
+else
+ASCII2MAN = @echo "ERROR: AsciiDoc 'a2x' command is not installed but is required to build $(MANPAGES)" && exit 1
+endif
 
 SITELIB = $(shell python -c "from distutils.sysconfig import get_python_lib; print get_python_lib()")
 
@@ -186,4 +190,3 @@ webdocs:
 # just for quick testing of all the module docs
 webdocs2:
 	(cd docsite; make modules)
-
diff --git a/docsite/build-site.py b/docsite/build-site.py
index b0dfe9d11b..b8ed1a9afe 100755
--- a/docsite/build-site.py
+++ b/docsite/build-site.py
@@ -21,7 +21,13 @@ __docformat__ = 'restructuredtext'
 import os
 import sys
 import traceback
-from sphinx.application import Sphinx
+try:
+    from sphinx.application import Sphinx
+except ImportError:
+    print "#################################"
+    print "Dependency missing: Python Sphinx"
+    print "#################################"
+    sys.exit(1)
 import os
 
 
