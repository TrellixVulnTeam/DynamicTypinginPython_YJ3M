commit caefc20f160e2dece37d883fea98c94f5bd89379
Author: Michael Scherer <misc@zarb.org>
Date:   Sun Dec 14 18:09:42 2014 +0100

    Use --version to see if less can be executed
    
    (less) 2> /dev/null would fail if stdin is /dev/null.
    Sinceless --version do not read anything from stdin,
    it is perfect for seeing if the software exist or not.
    
    Also replace the whole os system detection by directly
    using subprocess ( as we use it elsewhere, we already
    depend on it ).

diff --git a/bin/ansible-doc b/bin/ansible-doc
index 59d14b6ef1..36db3dff42 100755
--- a/bin/ansible-doc
+++ b/bin/ansible-doc
@@ -71,7 +71,7 @@ def pager(text):
             pager_print(text)
         else:
             pager_pipe(text, os.environ['PAGER'])
-    elif hasattr(os, 'system') and os.system('(less) 2> /dev/null') == 0:
+    elif subprocess.call('(less --version) 2> /dev/null', shell = True) == 0:
         pager_pipe(text, 'less')
     else:
         pager_print(text)
