commit 4d0f374dbf29aefb1e33712adb2b269bbae7371f
Author: Sergey Sudakovich <sergey@cumulusnetworks.com>
Date:   Mon Nov 18 11:33:04 2013 -0800

    compatible with python 2.4

diff --git a/library/system/setup b/library/system/setup
index a07267b677..de82c62e9b 100755
--- a/library/system/setup
+++ b/library/system/setup
@@ -398,7 +398,8 @@ class Facts(object):
                 self.facts['lsb']['major_release'] = self.facts['lsb']['release'].split('.')[0]
         elif lsb_path is None and os.path.exists('/etc/lsb-release'):
             self.facts['lsb'] = {}
-            with open('/etc/lsb-release', 'r') as f:
+            f = open('/etc/lsb-release', 'r')
+            try:
                 for line in f.readlines():
                     value = line.split('=',1)[1].strip()
                     if 'DISTRIB_ID' in line:
@@ -409,6 +410,8 @@ class Facts(object):
                         self.facts['lsb']['description'] = value
                     elif 'DISTRIB_CODENAME' in line:
                         self.facts['lsb']['codename'] = value
+            finally:
+                f.close()
         else:
             return self.facts
 
