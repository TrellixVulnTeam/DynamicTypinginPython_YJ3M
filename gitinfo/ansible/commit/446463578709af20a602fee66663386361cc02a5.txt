commit 446463578709af20a602fee66663386361cc02a5
Author: John R Barker <john@johnrbarker.com>
Date:   Thu Nov 9 11:43:41 2017 +0000

    Specify branch details, add verbose, disable colour (#32731)

diff --git a/test/utils/dci/dci-coverage.sh b/test/utils/dci/dci-coverage.sh
index c4c332fdc1..4047da7b30 100644
--- a/test/utils/dci/dci-coverage.sh
+++ b/test/utils/dci/dci-coverage.sh
@@ -3,12 +3,14 @@
 set -o pipefail
 
 test="dci-$1"
+branch="$2"
+CODECOV_SLUG="ansible/ansible"
 
 if find test/results/coverage/ -mindepth 1 -name '.*' -prune -o -print -quit | grep -q .; then
     stub=""
 
     # shellcheck disable=SC2086
-    test/runner/ansible-test coverage xml --color -v --requirements --group-by command --group-by version ${stub:+"$stub"}
+    test/runner/ansible-test coverage xml -v --requirements --group-by command --group-by version ${stub:+"$stub"}
 
     # upload coverage report to codecov.io only when using complete on-demand coverage
     for file in test/results/reports/coverage=*.xml; do
@@ -27,6 +29,10 @@ if find test/results/coverage/ -mindepth 1 -name '.*' -prune -o -print -quit | g
             -X fix \
             -X search \
             -X xcode \
+            -K \
+            -B "$branch" \
+            -r "ansible/ansible" \
+            -v \
         || echo "Failed to upload code coverage report to codecov.io: ${file}"
     done
 fi
