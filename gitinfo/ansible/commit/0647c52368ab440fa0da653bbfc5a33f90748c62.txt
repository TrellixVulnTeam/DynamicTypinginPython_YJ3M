commit 0647c52368ab440fa0da653bbfc5a33f90748c62
Author: Jarno Huuskonen <jjh74@users.noreply.github.com>
Date:   Mon Dec 9 18:20:20 2019 +0200

    Detect virtualization facts when VM on Nutanix AHV hypervisor (#58327)
    
    - /sys/devices/virtual/dmi/id/product_name == 'AHV'
    - /sys/devices/virtual/dmi/id/sys_vendor == 'Nutanix'

diff --git a/lib/ansible/module_utils/facts/virtual/linux.py b/lib/ansible/module_utils/facts/virtual/linux.py
index 34c6b3da09..80de32bad4 100644
--- a/lib/ansible/module_utils/facts/virtual/linux.py
+++ b/lib/ansible/module_utils/facts/virtual/linux.py
@@ -85,7 +85,7 @@ class LinuxVirtual(Virtual):
 
         product_name = get_file_content('/sys/devices/virtual/dmi/id/product_name')
 
-        if product_name in ('KVM', 'Bochs'):
+        if product_name in ('KVM', 'Bochs', 'AHV'):
             virtual_facts['virtualization_type'] = 'kvm'
             return virtual_facts
 
@@ -117,7 +117,7 @@ class LinuxVirtual(Virtual):
 
         sys_vendor = get_file_content('/sys/devices/virtual/dmi/id/sys_vendor')
 
-        KVM_SYS_VENDORS = ('QEMU', 'oVirt', 'Amazon EC2', 'DigitalOcean', 'Google', 'Scaleway')
+        KVM_SYS_VENDORS = ('QEMU', 'oVirt', 'Amazon EC2', 'DigitalOcean', 'Google', 'Scaleway', 'Nutanix')
         if sys_vendor in KVM_SYS_VENDORS:
             virtual_facts['virtualization_type'] = 'kvm'
             return virtual_facts
