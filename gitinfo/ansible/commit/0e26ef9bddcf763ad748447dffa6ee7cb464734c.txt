commit 0e26ef9bddcf763ad748447dffa6ee7cb464734c
Author: Will Thames <will@thames.id.au>
Date:   Thu Aug 2 16:02:15 2012 +1000

    Revert acceptance of directory as dest for copy
    
    Although library/copy can be corrected to understand that dest is
    a directory, I can't see how to let _execute_copy know this and let the
    file module know.
    
    As a better solution than before #733, the copy module now explicitly (rather
    than silently) fails when dest is a directory.

diff --git a/library/copy b/library/copy
index 7284a12abf..b0c24bb312 100755
--- a/library/copy
+++ b/library/copy
@@ -49,7 +49,7 @@ def main():
             module.fail_json(msg="Destination %s not readable" % (dest))
         # Allow dest to be directory without compromising md5 check
         if (os.path.isdir(dest)):
-            dest = os.join(dest, os.path.basename(src))
+            module.fail_json(msg="Destination %s cannot be a directory" % (dest))
         md5sum_dest = module.md5(dest)
     else:
         if not os.access(os.path.dirname(dest), os.W_OK):
