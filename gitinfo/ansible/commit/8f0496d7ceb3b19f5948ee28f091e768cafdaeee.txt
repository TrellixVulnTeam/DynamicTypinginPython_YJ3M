commit 8f0496d7ceb3b19f5948ee28f091e768cafdaeee
Author: James Cammarata <jimi@sngx.net>
Date:   Wed Jul 8 09:15:55 2015 -0400

    Fix usage of set_host_var when registering a result var
    
    Fixes #11521

diff --git a/lib/ansible/executor/process/result.py b/lib/ansible/executor/process/result.py
index 8bf0fa34ac..4041021b16 100644
--- a/lib/ansible/executor/process/result.py
+++ b/lib/ansible/executor/process/result.py
@@ -107,7 +107,7 @@ class ResultProcess(multiprocessing.Process):
 
                 # if this task is registering a result, do it now
                 if result._task.register:
-                    self._send_result(('set_host_var', result._host, result._task.register, result._result))
+                    self._send_result(('set_host_var', result._host, result._task, None, result._task.register, result._result))
 
                 # send callbacks, execute other options based on the result status
                 # FIXME: this should all be cleaned up and probably moved to a sub-function.
