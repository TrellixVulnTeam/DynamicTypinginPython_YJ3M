commit 1d59caed073eb92437cd63a0e22219334034ee12
Author: Rene Moser <mail@renemoser.net>
Date:   Sun Nov 8 20:27:01 2015 +0100

    cloudstack: change order of tags handling, fixes update of tag value does not work

diff --git a/lib/ansible/module_utils/cloudstack.py b/lib/ansible/module_utils/cloudstack.py
index dc25de678d..53d142847d 100644
--- a/lib/ansible/module_utils/cloudstack.py
+++ b/lib/ansible/module_utils/cloudstack.py
@@ -371,8 +371,8 @@ class AnsibleCloudStack(object):
         if 'tags' in resource:
             tags = self.module.params.get('tags')
             if tags is not None:
-                self._process_tags(resource, resource_type, self._tags_that_should_exist_or_be_updated(resource, tags))
                 self._process_tags(resource, resource_type, self._tags_that_should_not_exist(resource, tags), operation="delete")
+                self._process_tags(resource, resource_type, self._tags_that_should_exist_or_be_updated(resource, tags))
                 self.tags = None
                 resource['tags'] = self.get_tags(resource)
         return resource
