commit f03e84592051187040a2eca4cbe731a6c8bda8a5
Author: Daniel Hokka Zakrisson <daniel@hozac.com>
Date:   Mon Feb 25 15:09:44 2013 +0100

    Allow hyphens in complex variables
    
    Primarily to support ${hostvars.hostname-with-hyphens.<var>}.

diff --git a/lib/ansible/utils/template.py b/lib/ansible/utils/template.py
index 000062a1fa..c17eab48a8 100644
--- a/lib/ansible/utils/template.py
+++ b/lib/ansible/utils/template.py
@@ -139,7 +139,7 @@ def _varFind(basedir, text, vars, lookup_fatal, depth, expand_lists):
             brace_level += 1
         elif is_complex and text[end] == '}':
             brace_level -= 1
-        elif is_complex and text[end] in ('$', '[', ']'):
+        elif is_complex and text[end] in ('$', '[', ']', '-'):
             pass
         elif is_complex and text[end] == '.':
             if brace_level == 1:
