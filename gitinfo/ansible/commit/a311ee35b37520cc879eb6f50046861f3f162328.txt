commit a311ee35b37520cc879eb6f50046861f3f162328
Author: Serge van Ginderachter <serge@vanginderachter.be>
Date:   Thu Aug 29 15:29:14 2013 +0200

    Fix bug in uri where redirect check fails.
    
    When the redirect check fails, the 'status' key is not set in
    resp_redir, so we need to check this.

diff --git a/library/network/uri b/library/network/uri
index a58c49d0e6..3d05db2281 100644
--- a/library/network/uri
+++ b/library/network/uri
@@ -261,7 +261,7 @@ def uri(module, url, dest, user, password, body, method, headers, redirects, soc
                 # and update dest with the new url filename
             except:
                 pass
-            if resp_redir['status'] in ["301", "302", "303", "307"]:
+            if 'status' in resp_redir and resp_redir['status'] in ["301", "302", "303", "307"]:
                 url = resp_redir['location']
                 redirected = True
             dest = os.path.join(dest, url_filename(url))
