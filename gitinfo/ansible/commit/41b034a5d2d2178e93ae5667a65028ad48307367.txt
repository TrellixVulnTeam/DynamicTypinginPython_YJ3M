commit 41b034a5d2d2178e93ae5667a65028ad48307367
Author: Victor Schr√∂der <schrodervictor@gmail.com>
Date:   Sun Jun 14 23:29:55 2015 +0200

    Process information about replica clusters for ElastiCache replication groups

diff --git a/plugins/inventory/ec2.py b/plugins/inventory/ec2.py
index dddcf587af..76fc83497d 100755
--- a/plugins/inventory/ec2.py
+++ b/plugins/inventory/ec2.py
@@ -1096,11 +1096,17 @@ class Ec2Inventory(object):
             if key == 'ec2_node_groups' and value:
                 host_info['ec2_endpoint_address'] = value[0]['PrimaryEndpoint']['Address']
                 host_info['ec2_endpoint_port'] = value[0]['PrimaryEndpoint']['Port']
+                replica_count = 0
                 for node in value[0]['NodeGroupMembers']:
                     if node['CurrentRole'] == 'primary':
                         host_info['ec2_primary_cluster_address'] = node['ReadEndpoint']['Address']
                         host_info['ec2_primary_cluster_port'] = node['ReadEndpoint']['Port']
                         host_info['ec2_primary_cluster_id'] = node['CacheClusterId']
+                    elif node['CurrentRole'] == 'replica':
+                        host_info['ec2_replica_cluster_address_'+ str(replica_count)] = node['ReadEndpoint']['Address']
+                        host_info['ec2_replica_cluster_port_'+ str(replica_count)] = node['ReadEndpoint']['Port']
+                        host_info['ec2_replica_cluster_id_'+ str(replica_count)] = node['CacheClusterId']
+                        replica_count += 1
             if key == 'ec2_member_clusters' and value:
                 host_info['ec2_member_clusters'] = ','.join([str(i) for i in value])
             elif key == 'ec2_cache_parameter_group':
