commit ef1fd19c009b3f1056ff888e173404d8c481fc2b
Author: Rotaru Sergey <badwings@yandex.ru>
Date:   Sat Feb 1 01:20:58 2020 +0300

    croc cloud - ec2 key patch (#60929)
    
    This patch fixes "IndexError: list index out of range" error for https://console.cloud.croc.ru.
    When key pair is new, croc return dict with an empty list for key KeyPairs that causes ansible to crush.

diff --git a/lib/ansible/modules/cloud/amazon/ec2_key.py b/lib/ansible/modules/cloud/amazon/ec2_key.py
index 85392d3915..de67af8bc0 100644
--- a/lib/ansible/modules/cloud/amazon/ec2_key.py
+++ b/lib/ansible/modules/cloud/amazon/ec2_key.py
@@ -180,6 +180,8 @@ def find_key_pair(module, ec2_client, name):
         if err.response['Error']['Code'] == "InvalidKeyPair.NotFound":
             return None
         module.fail_json_aws(err, msg="error finding keypair")
+    except IndexError:
+        key = None
     return key
 
 
