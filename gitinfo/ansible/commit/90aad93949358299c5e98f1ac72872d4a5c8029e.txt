commit 90aad93949358299c5e98f1ac72872d4a5c8029e
Author: Pavel Samokha <pas@rusaksoft.com>
Date:   Fri May 13 15:52:49 2016 +0300

    iptables module - add icmp_type

diff --git a/lib/ansible/modules/extras/system/iptables.py b/lib/ansible/modules/extras/system/iptables.py
index a714fe4699..98ce013793 100644
--- a/lib/ansible/modules/extras/system/iptables.py
+++ b/lib/ansible/modules/extras/system/iptables.py
@@ -266,6 +266,11 @@ options:
     description:
       - "Specifies the error packet type to return while rejecting."
     required: false
+  icmp_type:
+    version_added: "2.2"
+    description:
+      - "This allows specification of the ICMP type, which can be a numeric ICMP type, type/code pair, or one of the ICMP type names shown by the command 'iptables -p icmp -h'"
+    required: false
 '''
 
 EXAMPLES = '''
@@ -342,6 +347,7 @@ def construct_rule(params):
     append_param(rule, params['uid_owner'], '--uid-owner', False)
     append_jump(rule, params['reject_with'], 'REJECT')
     append_param(rule, params['reject_with'], '--reject-with', False)
+    append_param(rule, params['icmp_type'], '--icmp_type', False)
     return rule
 
 
@@ -399,6 +405,7 @@ def main():
             limit_burst=dict(required=False, default=None, type='str'),
             uid_owner=dict(required=False, default=None, type='str'),
             reject_with=dict(required=False, default=None, type='str'),
+            icmp_type=dict(required=False, default=None, type='str'),
         ),
         mutually_exclusive=(
             ['set_dscp_mark', 'set_dscp_mark_class'],
