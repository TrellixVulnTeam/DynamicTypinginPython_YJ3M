commit 186cc7cb17a0afaef62ea28b4f542b22c90b6c53
Author: Jérémie Astori <jeremie@astori.fr>
Date:   Thu Aug 20 22:43:15 2015 +0000

    Make sure entry is not sent when acl state=query

diff --git a/lib/ansible/modules/files/acl.py b/lib/ansible/modules/files/acl.py
index 58550c1912..06fd304e36 100644
--- a/lib/ansible/modules/files/acl.py
+++ b/lib/ansible/modules/files/acl.py
@@ -275,6 +275,9 @@ def main():
         if state == 'absent' and entry.count(":") != 1:
             module.fail_json(msg="'entry' MUST have 2 sections divided by ':' when 'state=absent'.")
 
+        if state == 'query':
+            module.fail_json(msg="'entry' MUST NOT be set when 'state=query'.")
+
         etype, entity, permissions = split_entry(entry)
 
     changed = False
