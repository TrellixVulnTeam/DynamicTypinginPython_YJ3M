commit d50089ca9f838beccfc7ce633d64267f47287373
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Mon Feb 2 18:28:47 2015 -0800

    Add a function to change output from a str to unicode

diff --git a/v2/ansible/utils/unicode.py b/v2/ansible/utils/unicode.py
index 06ebc18c02..b2fcf65161 100644
--- a/v2/ansible/utils/unicode.py
+++ b/v2/ansible/utils/unicode.py
@@ -241,3 +241,8 @@ def to_bytes(obj, encoding='utf-8', errors='replace', nonstring=None):
     raise TypeError('nonstring value, %(param)s, is not set to a valid'
         ' action' % {'param': nonstring})
 
+
+# force the return value of a function to be unicode.  Use with partial to
+# ensure that a filter will return unicode values.
+def unicode_wrap(func, *args, **kwargs):
+    return to_unicode(func(*args, **kwargs), nonstring='passthru')
