commit faa2449f55eb023fecf8bb69d32874ea17161058
Author: Nicolas Le Manchet <nicolas.le-manchet@ovh.pl>
Date:   Wed Feb 11 14:15:38 2015 +0100

    Set proper permissions for ansible-vault view

diff --git a/lib/ansible/utils/vault.py b/lib/ansible/utils/vault.py
index 3622b500b1..842688a2c1 100644
--- a/lib/ansible/utils/vault.py
+++ b/lib/ansible/utils/vault.py
@@ -281,8 +281,10 @@ class VaultEditor(object):
         tmpdata = self.read_data(self.filename)
         this_vault = VaultLib(self.password)
         dec_data = this_vault.decrypt(tmpdata)
+        old_umask = os.umask(0o077)
         _, tmp_path = tempfile.mkstemp()
         self.write_data(dec_data, tmp_path)
+        os.umask(old_umask)
 
         # drop the user into pager on the tmp file
         call(self._pager_shell_command(tmp_path))
