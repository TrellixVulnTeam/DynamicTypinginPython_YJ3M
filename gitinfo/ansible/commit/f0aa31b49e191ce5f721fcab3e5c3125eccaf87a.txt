commit f0aa31b49e191ce5f721fcab3e5c3125eccaf87a
Author: Ricardo Carrillo Cruz <ricardo.carrillo.cruz@gmail.com>
Date:   Mon Sep 11 16:04:51 2017 +0200

    Fix handling of config vars with eval expression (#29536)
    
    The config variables defined with eval, like INVENTORY_IGNORE_EXTS,
    are not stored properly once the eval is processed.
    This causes references to the constant to still have the eval in the
    value.

diff --git a/lib/ansible/constants.py b/lib/ansible/constants.py
index a83f166ec5..1ca1b2f082 100644
--- a/lib/ansible/constants.py
+++ b/lib/ansible/constants.py
@@ -108,6 +108,6 @@ for setting in config.data.get_settings():
         except:
             value = setting.value
 
-    set_constant(setting.name, setting.value)
+    set_constant(setting.name, value or setting.value)
 
 
