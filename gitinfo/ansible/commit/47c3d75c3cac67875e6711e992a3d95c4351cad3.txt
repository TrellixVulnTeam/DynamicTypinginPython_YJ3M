commit 47c3d75c3cac67875e6711e992a3d95c4351cad3
Author: Jeff Bachtel <jeffrey.bachtel@stelligent.com>
Date:   Tue Apr 28 14:17:53 2015 -0400

    Add test for https://github.com/ansible/ansible/issues/9851

diff --git a/test/integration/roles/test_filters/files/9851.txt b/test/integration/roles/test_filters/files/9851.txt
new file mode 100644
index 0000000000..70b12793e1
--- /dev/null
+++ b/test/integration/roles/test_filters/files/9851.txt
@@ -0,0 +1,3 @@
+ [{
+    "k": "Quotes \"'\n"
+}]
diff --git a/test/integration/roles/test_filters/tasks/main.yml b/test/integration/roles/test_filters/tasks/main.yml
index 3d1ee322e3..c4872b5037 100644
--- a/test/integration/roles/test_filters/tasks/main.yml
+++ b/test/integration/roles/test_filters/tasks/main.yml
@@ -25,6 +25,25 @@
 - name: Verify that we workaround a py26 json bug
   template: src=py26json.j2 dest={{output_dir}}/py26json.templated mode=0644
 
+- name: 9851 - Verify that we don't trigger https://github.com/ansible/ansible/issues/9851
+  copy:
+    content: " [{{item|to_nice_json}}]"
+    dest: "{{output_dir}}/9851.out"
+  with_items:
+  - {"k": "Quotes \"'\n"}
+
+- name: 9851 - copy known good output into place
+  copy: src=9851.txt dest={{output_dir}}/9851.txt
+
+- name: 9851 - Compare generated json to known good
+  shell: diff {{output_dir}}/9851.out {{output_dir}}/9851.txt
+  register: 9851_diff_result
+
+- name: 9851 - verify generated file matches known good
+  assert:  
+    that: 
+        - '9851_diff_result.stdout == ""' 
+
 - name: fill in a basic template
   template: src=foo.j2 dest={{output_dir}}/foo.templated mode=0644
   register: template_result
