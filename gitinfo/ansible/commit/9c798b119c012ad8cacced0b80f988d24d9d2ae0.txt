commit 9c798b119c012ad8cacced0b80f988d24d9d2ae0
Author: Junegunn Choi <junegunn.c@gmail.com>
Date:   Mon Nov 25 17:01:24 2013 +0900

    Remove Python 2.4-incompatible 'with' statement

diff --git a/library/utilities/wait_for b/library/utilities/wait_for
index 8644673eb5..a175afc415 100644
--- a/library/utilities/wait_for
+++ b/library/utilities/wait_for
@@ -157,7 +157,8 @@ def main():
         while datetime.datetime.now() < end:
             if path:
                 try:
-                    with open(path) as f:
+                    f = open(path)
+                    try:
                         if search_regex:
                             if re.search(search_regex, f.read(), re.MULTILINE):
                                 break
@@ -165,6 +166,8 @@ def main():
                                 time.sleep(1)
                         else:
                             break
+                    finally:
+                        f.close()
                 except IOError:
                     time.sleep(1)
                     pass
