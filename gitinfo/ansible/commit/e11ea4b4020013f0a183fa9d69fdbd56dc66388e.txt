commit e11ea4b4020013f0a183fa9d69fdbd56dc66388e
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Mon Jan 12 14:36:57 2015 -0800

    Also catch mysql errors so we can give the error message back through json rather than tracebacking

diff --git a/lib/ansible/modules/database/mysql/mysql_user.py b/lib/ansible/modules/database/mysql/mysql_user.py
index 1ca5372c25..3590fb8e64 100644
--- a/lib/ansible/modules/database/mysql/mysql_user.py
+++ b/lib/ansible/modules/database/mysql/mysql_user.py
@@ -498,16 +498,14 @@ def main():
         if user_exists(cursor, user, host):
             try:
                 changed = user_mod(cursor, user, host, password, priv, append_privs)
-            except SQLParseError, e:
+            except (SQLParseError, InvalidPrivsError, MySQLdb.Error), e:
                 module.fail_json(msg=str(e))
-            except InvalidPrivsError, e:
-                module.mail_json(msg=str(e))
         else:
             if password is None:
                 module.fail_json(msg="password parameter required when adding a user")
             try:
                 changed = user_add(cursor, user, host, password, priv)
-            except SQLParseError, e:
+            except (SQLParseError, InvalidPrivsError, MySQLdb.Error), e:
                 module.fail_json(msg=str(e))
     elif state == "absent":
         if user_exists(cursor, user, host):
