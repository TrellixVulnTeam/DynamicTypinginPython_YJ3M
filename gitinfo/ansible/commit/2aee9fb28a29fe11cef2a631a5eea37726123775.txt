commit 2aee9fb28a29fe11cef2a631a5eea37726123775
Author: Matt Clay <matt@mystile.com>
Date:   Sat Aug 12 11:11:28 2017 -0700

    Enable Azure integration tests in CI. (#28110)

diff --git a/test/integration/targets/azure_rm_publicipaddress/aliases b/test/integration/targets/azure_rm_publicipaddress/aliases
index b1cd4a5978..d6ff84111c 100644
--- a/test/integration/targets/azure_rm_publicipaddress/aliases
+++ b/test/integration/targets/azure_rm_publicipaddress/aliases
@@ -1,2 +1,3 @@
 cloud/azure
+posix/ci/cloud/azure
 destructive
diff --git a/test/integration/targets/azure_rm_publicipaddress/tasks/main.yml b/test/integration/targets/azure_rm_publicipaddress/tasks/main.yml
index 96d3ed8fe1..ab31f1efae 100644
--- a/test/integration/targets/azure_rm_publicipaddress/tasks/main.yml
+++ b/test/integration/targets/azure_rm_publicipaddress/tasks/main.yml
@@ -1,3 +1,7 @@
+- name: Create domain name
+  set_fact:
+      domain_name: "ansible-{{ resource_group | hash('md5') | truncate(24, True, '') }}"
+
 - name: Remove public ip
   azure_rm_publicipaddress:
       resource_group: "{{ resource_group }}"
@@ -9,7 +13,7 @@
       resource_group: "{{ resource_group }}"
       name: testing01
       allocation_method: Static
-      domain_name: autotest01
+      domain_name: "{{ domain_name }}"
       tags:
           testing: testing
           delete: on-exit
@@ -18,7 +22,7 @@
 - assert:
       that:
           - output.state.public_ip_allocation_method == 'Static'
-          - output.state.dns_settings.domain_name_label == 'autotest01'
+          - output.state.dns_settings.domain_name_label == domain_name
           - output.state.tags | length == 2
           - output.state.tags.testing == 'testing'
 
@@ -27,7 +31,7 @@
       resource_group: "{{ resource_group }}"
       name: testing01
       allocation_method: Static
-      domain_name: autotest01
+      domain_name: "{{ domain_name }}"
       tags:
           testing: testing
           delete: on-exit
diff --git a/test/integration/targets/azure_rm_storageaccount/aliases b/test/integration/targets/azure_rm_storageaccount/aliases
index b1cd4a5978..d6ff84111c 100644
--- a/test/integration/targets/azure_rm_storageaccount/aliases
+++ b/test/integration/targets/azure_rm_storageaccount/aliases
@@ -1,2 +1,3 @@
 cloud/azure
+posix/ci/cloud/azure
 destructive
diff --git a/test/integration/targets/azure_rm_subnet/aliases b/test/integration/targets/azure_rm_subnet/aliases
index b1cd4a5978..d6ff84111c 100644
--- a/test/integration/targets/azure_rm_subnet/aliases
+++ b/test/integration/targets/azure_rm_subnet/aliases
@@ -1,2 +1,3 @@
 cloud/azure
+posix/ci/cloud/azure
 destructive
diff --git a/test/integration/targets/azure_rm_virtualnetwork/aliases b/test/integration/targets/azure_rm_virtualnetwork/aliases
index b1cd4a5978..d6ff84111c 100644
--- a/test/integration/targets/azure_rm_virtualnetwork/aliases
+++ b/test/integration/targets/azure_rm_virtualnetwork/aliases
@@ -1,2 +1,3 @@
 cloud/azure
+posix/ci/cloud/azure
 destructive
