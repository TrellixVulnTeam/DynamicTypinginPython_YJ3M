commit 08370b3caf52dfe319374cbd361bbe52a9d9e6b6
Author: sid <sidred@gmail.com>
Date:   Wed Jun 25 18:30:38 2014 +0530

    Fixed FreeBSD ports install issue

diff --git a/library/packaging/portinstall b/library/packaging/portinstall
index 88e654b8db..068f413af7 100644
--- a/library/packaging/portinstall
+++ b/library/packaging/portinstall
@@ -99,15 +99,14 @@ def query_package(module, name):
 def matching_packages(module, name):
 
     ports_glob_path = module.get_bin_path('ports_glob', True)
-    rc, out, err = module.run_command("%s %s | wc" % (ports_glob_path, name))
-    parts = out.split()
-    occurrences = int(parts[0])
+    rc, out, err = module.run_command("%s %s" % (ports_glob_path, name))
+    #counts the numer of packages found
+    occurrences = out.count('\n')
     if occurrences == 0:
         name_without_digits = re.sub('[0-9]', '', name)
         if name != name_without_digits:
-            rc, out, err = module.run_command("%s %s | wc" % (ports_glob_path, name_without_digits))
-            parts = out.split()
-            occurrences = int(parts[0])
+            rc, out, err = module.run_command("%s %s" % (ports_glob_path, name_without_digits))
+            occurrences = out.count('\n')
     return occurrences
 
 
