commit dee960716b7fcc614abc8a99239fb911d1b71797
Author: James Tanner <tanner.jc@gmail.com>
Date:   Tue Jan 7 14:21:22 2014 -0500

    Fixes #5353 create etc/hostname file in debian if it does not exist

diff --git a/library/system/hostname b/library/system/hostname
index 9aa7c206a4..8a9401d243 100644
--- a/library/system/hostname
+++ b/library/system/hostname
@@ -146,6 +146,12 @@ class DebianStrategy(GenericStrategy):
     HOSTNAME_FILE = '/etc/hostname'
 
     def get_permanent_hostname(self):
+        if not os.path.isfile(self.HOSTNAME_FILE):
+            try:
+                open(self.HOSTNAME_FILE, "a").write("")
+            except IOError, err:
+                self.module.fail_json(msg="failed to write file: %s" % 
+                    str(err))
         try:
             f = open(self.HOSTNAME_FILE)
             try:
