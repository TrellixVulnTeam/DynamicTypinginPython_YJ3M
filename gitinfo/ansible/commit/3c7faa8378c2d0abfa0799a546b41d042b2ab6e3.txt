commit 3c7faa8378c2d0abfa0799a546b41d042b2ab6e3
Author: Brian Coca <bcoca@ansible.com>
Date:   Tue Jul 14 10:10:03 2015 -0400

    fixed missing self in self.action on rekey in vault
    fixes #11584

diff --git a/lib/ansible/cli/vault.py b/lib/ansible/cli/vault.py
index 969ea2b6fa..a56a2205a8 100644
--- a/lib/ansible/cli/vault.py
+++ b/lib/ansible/cli/vault.py
@@ -58,7 +58,7 @@ class VaultCLI(CLI):
             self.parser.set_usage("usage: %prog view [options] file_name")
         elif self.action == "encrypt":
             self.parser.set_usage("usage: %prog encrypt [options] file_name")
-        elif action == "rekey":
+        elif self.action == "rekey":
             self.parser.set_usage("usage: %prog rekey [options] file_name")
 
         self.options, self.args = self.parser.parse_args()
