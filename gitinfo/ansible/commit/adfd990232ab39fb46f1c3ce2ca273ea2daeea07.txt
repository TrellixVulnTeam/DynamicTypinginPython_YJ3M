commit adfd990232ab39fb46f1c3ce2ca273ea2daeea07
Author: Matthieu Barth√©lemy <bonsouere@gmail.com>
Date:   Wed Aug 10 01:52:18 2016 -0500

    Slack: Fix #2393 - Enable markdown parsing when using custom messsage color (#2626)

diff --git a/lib/ansible/modules/extras/notification/slack.py b/lib/ansible/modules/extras/notification/slack.py
index 40def3788a..2ac609d451 100644
--- a/lib/ansible/modules/extras/notification/slack.py
+++ b/lib/ansible/modules/extras/notification/slack.py
@@ -171,7 +171,8 @@ def build_payload_for_slack(module, text, channel, username, icon_url, icon_emoj
     if color == "normal" and text is not None:
         payload = dict(text=text)
     elif text is not None:
-        payload = dict(attachments=[dict(text=text, color=color)])
+        # With a custom color we have to set the message as attachment, and explicitely turn markdown parsing on for it.
+        payload = dict(attachments=[dict(text=text, color=color, mrkdwn_in=["text"])])
     if channel is not None:
         if (channel[0] == '#') or (channel[0] == '@'):
             payload['channel'] = channel
