commit 4dd68c07a02deb1c718d41ad5559d29e27a71533
Author: sjahl <stephenjahl+git@gmail.com>
Date:   Sun Aug 18 11:03:43 2013 -0400

    setting 0644 permissions on mkstemp file handles. Fixes issue #3857

diff --git a/library/packaging/apt_repository b/library/packaging/apt_repository
index 3ee5ec3e8f..a61a93b586 100644
--- a/library/packaging/apt_repository
+++ b/library/packaging/apt_repository
@@ -182,6 +182,7 @@ class SourcesList(object):
             if sources:
                 d, fn = os.path.split(filename)
                 fd, tmp_path = tempfile.mkstemp(prefix=".%s-" % fn, dir=d)
+                os.chmod(os.path.join(fd, tmp_path), 0644)
 
                 with os.fdopen(fd, 'w') as f:
                     for n, valid, enabled, source, comment in sources:
