commit 5036bba2e0e47c9dd07fdaf8e4c8fd41d541b014
Author: Peter Sprygada <psprygada@ansible.com>
Date:   Thu Aug 25 22:10:00 2016 -0400

    implements command_string property when preparing commands
    
    * commands that need | json added now use command_string property
    * adds additonal keyword args in exception handling for json commands

diff --git a/lib/ansible/module_utils/nxos.py b/lib/ansible/module_utils/nxos.py
index 32dfd9be26..0378b14954 100644
--- a/lib/ansible/module_utils/nxos.py
+++ b/lib/ansible/module_utils/nxos.py
@@ -251,7 +251,7 @@ class Cli(CliBase):
                 except ValueError:
                     raise NetworkError(
                         msg='unable to load response from device',
-                        response=responses[index]
+                        response=responses[index], command=str(cmd)
                     )
         return responses
 
@@ -287,5 +287,5 @@ def prepare_commands(commands):
     jsonify = lambda x: '%s | json' % x
     for cmd in to_list(commands):
         if cmd.output == 'json':
-            cmd.command = jsonify(cmd)
+            cmd.command_string = jsonify(cmd)
         yield cmd
