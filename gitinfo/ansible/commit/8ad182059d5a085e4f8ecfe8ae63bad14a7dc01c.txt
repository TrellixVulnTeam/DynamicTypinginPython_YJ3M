commit 8ad182059d5a085e4f8ecfe8ae63bad14a7dc01c
Author: Abhijeet Kasurde <akasurde@redhat.com>
Date:   Wed May 10 10:49:41 2017 +0530

    Add check for processor_core value
    
    Fixes #21893
    
    Signed-off-by: Abhijeet Kasurde <akasurde@redhat.com>

diff --git a/lib/ansible/module_utils/facts.py b/lib/ansible/module_utils/facts.py
index 46b0654171..662990a3f1 100644
--- a/lib/ansible/module_utils/facts.py
+++ b/lib/ansible/module_utils/facts.py
@@ -1204,7 +1204,7 @@ class LinuxHardware(Hardware):
                     self.facts['processor_count'] = i
 
                 socket_values = list(sockets.values())
-                if socket_values:
+                if socket_values and socket_values[0]:
                     self.facts['processor_cores'] = socket_values[0]
                 else:
                     self.facts['processor_cores'] = 1
