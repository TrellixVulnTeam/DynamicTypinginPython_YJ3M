commit 6e035a3e94efc18d7547b5b12d0cf520a8408106
Author: Petr Mifek <petr.mifek@anapol.cz>
Date:   Sat Oct 10 00:01:22 2015 +0200

    Move nested function test for ipv6 to top level in synchronize module.

diff --git a/lib/ansible/plugins/action/synchronize.py b/lib/ansible/plugins/action/synchronize.py
index eb7848dad0..c80523c0c0 100644
--- a/lib/ansible/plugins/action/synchronize.py
+++ b/lib/ansible/plugins/action/synchronize.py
@@ -44,17 +44,17 @@ class ActionModule(ActionBase):
 
         return path
 
+    def _host_is_ipv6_address(self, host):
+        return ':' in host
+
     def _format_rsync_rsh_target(self, host, path, user):
         ''' formats rsync rsh target, escaping ipv6 addresses if needed '''
 
-        def _needs_ipv6_brackets(host):
-            return ':' in host
-
         user_prefix = ''
         if user:
             user_prefix = '%s@' % (user, )
 
-        if _needs_ipv6_brackets(host):
+        if self._host_is_ipv6_address(host):
             return '[%s%s]:%s' % (user_prefix, host, path)
         else:
             return '%s%s:%s' % (user_prefix, host, path)
