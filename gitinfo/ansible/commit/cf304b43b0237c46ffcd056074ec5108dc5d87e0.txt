commit cf304b43b0237c46ffcd056074ec5108dc5d87e0
Author: James Martin <jmartin@ansible.com>
Date:   Sun May 5 14:54:23 2013 -0400

    Fixed docs.  Fixed fallback status method.  Fixed "changed" message with cluster commit.

diff --git a/library/database/riak b/library/database/riak
index 92328b2939..3ead6c4baa 100644
--- a/library/database/riak
+++ b/library/database/riak
@@ -61,7 +61,7 @@ options:
     type: 'bool'
   wait_for_ring:
     description:
-      - Waits for all nodes to agreee on the status of the ring
+      - Waits for all nodes to agree on the status of the ring
     required: false
     default: null
     aliases: []
@@ -107,6 +107,7 @@ def ring_check():
 
 def status_to_json():
     # remove all unnecessary symbols and whitespace
+    stats = ''
     rc, out, err = module.run_command("riak-admin status 2> /dev/null")
     if rc == 0:
         raw_stats = out
@@ -248,7 +249,7 @@ def main():
         rc, out, err = module.run_command('riak-admin cluster commit %s' % target_node)
         if rc == 0:
             result['commit'] = out
-            changed = True
+            result['changed'] = True
         else:
             module.fail_json(msg=out)
 
