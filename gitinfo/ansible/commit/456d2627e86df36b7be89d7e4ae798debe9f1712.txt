commit 456d2627e86df36b7be89d7e4ae798debe9f1712
Author: Ingmar Hupp <commits@sdfjkl.org>
Date:   Thu Mar 27 15:57:24 2014 +0000

    EC2 inventory toggle to exclude/include RDS instances.

diff --git a/plugins/inventory/ec2.ini b/plugins/inventory/ec2.ini
index b931c4a7da..90c09df1a7 100644
--- a/plugins/inventory/ec2.ini
+++ b/plugins/inventory/ec2.ini
@@ -38,6 +38,9 @@ vpc_destination_variable = ip_address
 # Route53, uncomment and set 'route53' to True.
 route53 = False
 
+# To include RDS instances in inventory, set to True.
+rds = False
+
 # Additionally, you can specify the list of zones to exclude looking up in
 # 'route53_excluded_zones' as a comma-separated list.
 # route53_excluded_zones = samplezone1.com, samplezone2.com
diff --git a/plugins/inventory/ec2.py b/plugins/inventory/ec2.py
index 84841d3f09..b6d6765fbe 100755
--- a/plugins/inventory/ec2.py
+++ b/plugins/inventory/ec2.py
@@ -222,6 +222,9 @@ class Ec2Inventory(object):
             self.route53_excluded_zones.extend(
                 config.get('ec2', 'route53_excluded_zones', '').split(','))
 
+        # RDS
+        self.rds_enabled = config.getboolean('ec2', 'rds')
+
         # Cache related
         cache_dir = os.path.expanduser(config.get('ec2', 'cache_path'))
         if not os.path.exists(cache_dir):
@@ -254,7 +257,8 @@ class Ec2Inventory(object):
 
         for region in self.regions:
             self.get_instances_by_region(region)
-            self.get_rds_instances_by_region(region)
+            if self.rds_enabled:
+                self.get_rds_instances_by_region(region)
 
         self.write_to_cache(self.inventory, self.cache_path_cache)
         self.write_to_cache(self.index, self.cache_path_index)
