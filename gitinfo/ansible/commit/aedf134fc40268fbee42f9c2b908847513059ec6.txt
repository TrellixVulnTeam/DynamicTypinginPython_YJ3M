commit aedf134fc40268fbee42f9c2b908847513059ec6
Author: Yang Liping <yangliping@live.com>
Date:   Mon May 26 10:55:32 2014 +0800

    Fix portability issue when checking local facts file permission.

diff --git a/lib/ansible/module_utils/facts.py b/lib/ansible/module_utils/facts.py
index bcdfd2a7e0..33de1b2a59 100644
--- a/lib/ansible/module_utils/facts.py
+++ b/lib/ansible/module_utils/facts.py
@@ -16,6 +16,7 @@
 # along with Ansible.  If not, see <http://www.gnu.org/licenses/>.
 
 import os
+import stat
 import array
 import errno
 import fcntl
@@ -173,7 +174,7 @@ class Facts(object):
         for fn in sorted(glob.glob(fact_path + '/*.fact')):
             # where it will sit under local facts
             fact_base = os.path.basename(fn).replace('.fact','')
-            if os.access(fn, os.X_OK):
+            if stat.S_IXUSR & os.stat(fn)[stat.ST_MODE]:
                 # run it
                 # try to read it as json first
                 # if that fails read it with ConfigParser
