commit eca4897a088f70475799c1d90803f9f3568f619b
Author: James Tanner <tanner.jc@gmail.com>
Date:   Sun Oct 1 18:21:58 2017 -0400

    Include the top level folder for esxi in the break condition

diff --git a/lib/ansible/module_utils/vmware.py b/lib/ansible/module_utils/vmware.py
index 85f6de2f3b..02062c3a43 100644
--- a/lib/ansible/module_utils/vmware.py
+++ b/lib/ansible/module_utils/vmware.py
@@ -239,7 +239,7 @@ def compile_folder_path_for_object(vobj):
             moid = thisobj._moId
         except AttributeError:
             moid = None
-        if moid == 'group-d1':
+        if moid in ['group-d1', 'ha-folder-root']:
             break
         if isinstance(thisobj, vim.Folder):
             paths.append(thisobj.name)
