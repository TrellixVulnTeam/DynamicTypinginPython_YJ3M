commit cd5edc416c810354704c5b41701b1bcebb42305c
Author: Marc Abramowitz <marc@marc-abramowitz.com>
Date:   Tue Jul 1 09:41:55 2014 -0700

    nova.py: Set defaults for OpenStack settings
    
    - auth_system
    - region_name
    - service_type
    
    These are config settings that could be left out in many scenarios, but
    the current code is requiring them. In particular, "service_type" is a
    new one in PR #7444 so if we add that and don't set a default, then
    existing .ini files won't work:
    
    ```
      File
    "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ConfigParser.py",
    line 618, in get
        raise NoOptionError(option, section)
    ConfigParser.NoOptionError: No option 'service_type' in section:
    'openstack'
    ```

diff --git a/plugins/inventory/nova.py b/plugins/inventory/nova.py
index b1094c7288..48e720184f 100644
--- a/plugins/inventory/nova.py
+++ b/plugins/inventory/nova.py
@@ -39,6 +39,7 @@ NOVA_CONFIG_FILES = [os.getcwd() + "/nova.ini",
 NOVA_DEFAULTS = {
     'auth_system': None,
     'region_name': None,
+    'service_type': 'compute',
 }
 
 
