commit 13c91ef9d4c5fad48e579b91d73380d618a7e735
Author: Brian Coca <bcoca@ansible.com>
Date:   Sun Aug 16 01:42:07 2015 -0400

    actually use the read source contents for the diff

diff --git a/lib/ansible/plugins/action/__init__.py b/lib/ansible/plugins/action/__init__.py
index 8c97988edc..58276d8f8e 100644
--- a/lib/ansible/plugins/action/__init__.py
+++ b/lib/ansible/plugins/action/__init__.py
@@ -541,7 +541,7 @@ class ActionBase:
                     diff['src_larger'] = C.MAX_FILE_SIZE_FOR_DIFF
                 else:
                     diff['after_header'] = source
-                    diff['after'] = src.read()
+                    diff['after'] = src_contents
             else:
                 self._display.debug("source of file passed in")
                 diff['after_header'] = 'dynamically generated'
