commit b00e6464e9ef31a05c7db59175fc2ab44c928006
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Tue Nov 25 16:03:52 2014 -0800

    Fix cornercase tracebaxk when detecting whether submodules changed

diff --git a/lib/ansible/modules/source_control/git.py b/lib/ansible/modules/source_control/git.py
index 17378fc97b..06768744b1 100644
--- a/lib/ansible/modules/source_control/git.py
+++ b/lib/ansible/modules/source_control/git.py
@@ -688,6 +688,7 @@ def main():
         switch_version(git_path, module, dest, remote, version, recursive, track_submodules)
 
     # Deal with submodules
+    submodules_updated = False
     if recursive and not bare:
         submodules_updated = submodules_fetch(git_path, module, remote, track_submodules, dest)
 
@@ -707,7 +708,7 @@ def main():
     changed = False
     if before != after or local_mods:
         changed = True
-    elif recursive and submodules_updated:
+    elif submodules_updated:
         changed =True
 
     # cleanup the wrapper script
