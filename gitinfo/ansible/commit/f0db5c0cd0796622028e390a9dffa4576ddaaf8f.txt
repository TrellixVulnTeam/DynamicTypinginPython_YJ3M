commit f0db5c0cd0796622028e390a9dffa4576ddaaf8f
Author: Kohei YOSHIDA <kohei.yoshida@gehirn.co.jp>
Date:   Tue Nov 4 17:52:43 2014 +0900

    support secure connection on fakes3

diff --git a/lib/ansible/modules/cloud/amazon/s3.py b/lib/ansible/modules/cloud/amazon/s3.py
index d6ff9602fc..114154a782 100644
--- a/lib/ansible/modules/cloud/amazon/s3.py
+++ b/lib/ansible/modules/cloud/amazon/s3.py
@@ -249,7 +249,7 @@ def get_download_url(module, s3, bucket, obj, expiry, changed=True):
 def is_fakes3(s3_url):
     """ Return True if s3_url has scheme fakes3:// """
     if s3_url is not None:
-        return urlparse.urlparse(s3_url).scheme == 'fakes3'
+        return urlparse.urlparse(s3_url).scheme in ('fakes3', 'fakes3s')
     else:
         return False
 
@@ -313,7 +313,7 @@ def main():
         if is_fakes3(s3_url):
             fakes3 = urlparse.urlparse(s3_url)
             s3 = S3Connection(
-                is_secure=False,
+                is_secure=fakes3.scheme == 'fakes3s',
                 host=fakes3.hostname,
                 port=fakes3.port,
                 calling_format=OrdinaryCallingFormat(),
