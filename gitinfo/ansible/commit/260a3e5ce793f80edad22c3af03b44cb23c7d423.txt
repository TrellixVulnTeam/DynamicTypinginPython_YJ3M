commit 260a3e5ce793f80edad22c3af03b44cb23c7d423
Author: Mathieu <mathieu@ghack.net>
Date:   Mon Oct 19 21:25:30 2015 +0200

    Fixes #11055 - Set locale via LC_ALL

diff --git a/lib/ansible/module_utils/basic.py b/lib/ansible/module_utils/basic.py
index 17e2773e5b..5827cf43b7 100644
--- a/lib/ansible/module_utils/basic.py
+++ b/lib/ansible/module_utils/basic.py
@@ -735,8 +735,8 @@ class AnsibleModule(object):
             # issues but is preferable to simply failing because
             # of an unknown locale
             locale.setlocale(locale.LC_ALL, 'C')
-            os.environ['LANG']     = 'C'
-            os.environ['LC_CTYPE'] = 'C'
+            os.environ['LANG']   = 'C'
+            os.environ['LC_ALL'] = 'C'
         except Exception, e:
             self.fail_json(msg="An unknown error was encountered while attempting to validate the locale: %s" % e)
 
diff --git a/lib/ansible/runner/shell_plugins/sh.py b/lib/ansible/runner/shell_plugins/sh.py
index 1ee225830b..730f6d2a92 100644
--- a/lib/ansible/runner/shell_plugins/sh.py
+++ b/lib/ansible/runner/shell_plugins/sh.py
@@ -24,8 +24,8 @@ class ShellModule(object):
     def env_prefix(self, **kwargs):
         '''Build command prefix with environment variables.'''
         env = dict(
-            LANG     = C.DEFAULT_MODULE_LANG,
-            LC_CTYPE = C.DEFAULT_MODULE_LANG,
+            LANG   = C.DEFAULT_MODULE_LANG,
+            LC_ALL = C.DEFAULT_MODULE_LANG,
         )
         env.update(kwargs)
         return ' '.join(['%s=%s' % (k, pipes.quote(unicode(v))) for k,v in env.items()])
