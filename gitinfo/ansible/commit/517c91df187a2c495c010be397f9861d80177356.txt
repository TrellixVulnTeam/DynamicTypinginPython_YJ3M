commit 517c91df187a2c495c010be397f9861d80177356
Author: Sloane Hertel <shertel@redhat.com>
Date:   Tue Aug 1 23:58:26 2017 -0400

    ec2_group: add integration test for port ranges (#27112)
    
    * fix port ranges for ec2_group and add a test to verify

diff --git a/test/integration/targets/ec2_group/tasks/main.yml b/test/integration/targets/ec2_group/tasks/main.yml
index f1c35abaf4..9a2d594b5f 100644
--- a/test/integration/targets/ec2_group/tasks/main.yml
+++ b/test/integration/targets/ec2_group/tasks/main.yml
@@ -408,6 +408,33 @@
            - 'result.group_id.startswith("sg-")'
 
 
+    # ============================================================
+
+    - name: test adding a range of ports and ports given as strings (expected changed=true)
+      ec2_group:
+        name: '{{ec2_group_name}}'
+        description: '{{ec2_group_description}}'
+        ec2_region: '{{ec2_region}}'
+        ec2_access_key: '{{ec2_access_key}}'
+        ec2_secret_key: '{{ec2_secret_key}}'
+        security_token: '{{security_token}}'
+        state: present
+        # set purge_rules to false so we don't get a false positive from previously added rules
+        purge_rules: false
+        rules:
+        - proto: "tcp"
+          ports:
+            - 8183-8190
+            - '8192'
+          cidr_ip: 1.1.1.1/32
+      register: result
+
+    - name: assert state=present (expected changed=true)
+      assert:
+        that:
+          - 'result.changed'
+          - 'result.group_id.startswith("sg-")'
+
     # ============================================================
     - name: test state=absent (expected changed=true)
       ec2_group:
