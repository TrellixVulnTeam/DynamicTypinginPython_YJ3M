commit 0dc5e8bf71279f16c496f124d9e4fbb414a49c9b
Author: cheko <iamcheko@users.noreply.github.com>
Date:   Tue May 23 20:31:28 2017 +0200

    Bugfix: Directories in /etc/skel will get users ownership when home dir is created (#24943)
    
    * Bugfix: Directories in /etc/skel will get users ownership when home dir is created
    * Bugfix: Chmod works now recursive for the home dir

diff --git a/lib/ansible/modules/system/user.py b/lib/ansible/modules/system/user.py
index d8fad5c353..3e7a90f61f 100644
--- a/lib/ansible/modules/system/user.py
+++ b/lib/ansible/modules/system/user.py
@@ -719,7 +719,7 @@ class User(object):
             os.chown(path, uid, gid)
             for root, dirs, files in os.walk(path):
                 for d in dirs:
-                    os.chown(path, uid, gid)
+                    os.chown(os.path.join(root, d), uid, gid)
                 for f in files:
                     os.chown(os.path.join(root, f), uid, gid)
         except OSError:
