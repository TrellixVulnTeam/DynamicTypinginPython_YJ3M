commit dddfeac9c418c079f62a48b4c2419adf01dfcba8
Author: Daniel Hokka Zakrisson <daniel@hozac.com>
Date:   Thu Feb 7 18:40:41 2013 +0100

    Allow using ${hostvars.<node>} for nodes not in SETUP_CACHE
    
    This allows accessing inventory data from nodes that have not been
    talked to (yet).

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index 5d913f50cd..19dc5c997f 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -85,6 +85,9 @@ class HostVars(dict):
             self.lookup[host] = result
         return self.lookup[host]
 
+    def __contains__(self, host):
+        return host in self.lookup or host in self.setup_cache or self.inventory.get_host(host)
+
 class Runner(object):
     ''' core API interface to ansible '''
 
