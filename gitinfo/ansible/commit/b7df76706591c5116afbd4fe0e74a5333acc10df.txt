commit b7df76706591c5116afbd4fe0e74a5333acc10df
Author: trbs <trbs@trbs.net>
Date:   Thu Feb 6 15:49:06 2014 +0100

    make --list-tasks honor --limit

diff --git a/bin/ansible-playbook b/bin/ansible-playbook
index 0659a0e8a6..2241d75716 100755
--- a/bin/ansible-playbook
+++ b/bin/ansible-playbook
@@ -149,12 +149,14 @@ def main(args):
                 playnum += 1
                 play = ansible.playbook.Play(pb, play_ds, play_basedir)
                 label = play.name
+                hosts = pb.inventory.list_hosts(play.hosts)
                 if options.listhosts:
-                    hosts = pb.inventory.list_hosts(play.hosts)
                     print '  play #%d (%s): host count=%d' % (playnum, label, len(hosts))
                     for host in hosts:
                         print '    %s' % host
                 if options.listtasks:
+                    if options.subset and not hosts:
+                        continue
                     matched_tags, unmatched_tags = play.compare_tags(pb.only_tags)
                     unmatched_tags.discard('all')
                     unknown_tags = set(pb.only_tags) - (matched_tags | unmatched_tags)
