commit 7a804fd17c6d61f4a89163dc36514dd696aa0313
Author: Brian Coca <bcoca@ansible.com>
Date:   Tue Feb 23 12:36:50 2016 -0500

    tolerate environment not being set
    
    default will be the same as before, None/null

diff --git a/lib/ansible/modules/cloud/vmware/vsphere_guest.py b/lib/ansible/modules/cloud/vmware/vsphere_guest.py
index 2b839d202d..962d6afec8 100644
--- a/lib/ansible/modules/cloud/vmware/vsphere_guest.py
+++ b/lib/ansible/modules/cloud/vmware/vsphere_guest.py
@@ -1606,15 +1606,15 @@ def main():
         argument_spec=dict(
             vcenter_hostname=dict(
                 type='str',
-                default=os.environ['VMWARE_HOST']
+                default=os.environ.get('VMWARE_HOST')
             ),
             username=dict(
                 type='str',
-                default=os.environ['VMWARE_USER']
+                default=os.environ.get('VMWARE_USER')
             ),
             password=dict(
                 type='str', no_log=True,
-                default=os.environ['VMWARE_PASSWORD']
+                default=os.environ.get('VMWARE_PASSWORD')
             ),
             state=dict(
                 required=False,
