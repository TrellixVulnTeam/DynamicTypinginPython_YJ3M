commit b042fcc349f965a60943a3bfcf25f143b5fff3dc
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Fri Dec 5 12:35:43 2014 -0800

    Fix for delegate_to with hosts that aren't in inventory

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index b1652d86e3..4f861e50ee 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -1227,7 +1227,7 @@ class Runner(object):
 
     def _remote_checksum(self, conn, tmp, path, inject):
         ''' takes a remote checksum and returns 1 if no file '''
-        if 'delegate_to' in inject and inject['delegate_to']:
+        if 'delegate_to' in inject and inject['delegate_to'] and inject['delegate_to'] in inject['hostvars']:
             python_interp = inject['hostvars'][inject['delegate_to']].get('ansible_python_interpreter', 'python')
         else:
             python_interp = inject['hostvars'][inject['inventory_hostname']].get('ansible_python_interpreter', 'python')
