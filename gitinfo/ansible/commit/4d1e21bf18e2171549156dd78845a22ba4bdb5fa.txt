commit 4d1e21bf18e2171549156dd78845a22ba4bdb5fa
Author: Roman Haefeli <reduzent@gmail.com>
Date:   Fri Jan 24 19:32:15 2020 +0100

    mysql_user: make sure current_pass_hash is a string before using it in comparison (#64059)
    
    * make sure current_pass_hash is a string before using it in comparison
    
    * add changelogs/fragments file
    
    * fix changelogs/fragments file: it is actually a bugfix, not a minor change

diff --git a/changelogs/fragments/64059-mysql_user_fix_password_comparison.yaml b/changelogs/fragments/64059-mysql_user_fix_password_comparison.yaml
new file mode 100644
index 0000000000..50fd48ff98
--- /dev/null
+++ b/changelogs/fragments/64059-mysql_user_fix_password_comparison.yaml
@@ -0,0 +1,2 @@
+bugfixes:
+- mysql_user - make sure current_pass_hash is a string before using it in comparison (https://github.com/ansible/ansible/issues/60567).
diff --git a/lib/ansible/modules/database/mysql/mysql_user.py b/lib/ansible/modules/database/mysql/mysql_user.py
index 1ca5994071..f999abb74a 100644
--- a/lib/ansible/modules/database/mysql/mysql_user.py
+++ b/lib/ansible/modules/database/mysql/mysql_user.py
@@ -390,6 +390,8 @@ def user_mod(cursor, user, host, host_all, password, encrypted,
                 FROM mysql.user WHERE user = %%s AND host = %%s
                 """ % (colA[0], colA[0], colB[0], colB[0]), (user, host))
             current_pass_hash = cursor.fetchone()[0]
+            if isinstance(current_pass_hash, bytes):
+                current_pass_hash = current_pass_hash.decode('ascii')
 
             if encrypted:
                 encrypted_password = password
