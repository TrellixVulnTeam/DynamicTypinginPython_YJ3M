commit c039dbe300d93e55eb641fb9ce34e53d2dc942a6
Author: Andrea.Mandolo <andrea.mandolo@gmail.com>
Date:   Mon Mar 10 17:27:05 2014 +0100

    Add STDOUT lines in response of "synchronize" module

diff --git a/library/files/synchronize b/library/files/synchronize
index d4b174f425..29b169b870 100644
--- a/library/files/synchronize
+++ b/library/files/synchronize
@@ -304,8 +304,11 @@ def main():
         return module.fail_json(msg=err, rc=rc, cmd=cmdstr)
     else:
         changed = changed_marker in out
-        return module.exit_json(changed=changed, msg=out.replace(changed_marker,''),
-                                rc=rc, cmd=cmdstr)
+        out_clean=out.replace(changed_marker,'')
+        out_lines=out_clean.split('\n')
+        while '' in out_lines: out_lines.remove('')
+        return module.exit_json(changed=changed, msg=out_clean,
+                                rc=rc, cmd=cmdstr, stdout_lines=out_lines)
 
 # import module snippets
 from ansible.module_utils.basic import *
