commit e9071c62ba0ba7812cecd91e38b02651b78876f5
Author: Abhijit Menon-Sen <ams@2ndQuadrant.com>
Date:   Sun Oct 11 07:07:37 2015 +0530

    Add missing variable initializations
    
    Without this, «ec2: state=stopped instance_ids=…» would fail with a
    traceback like this:
    
        if inst.get_attribute('sourceDestCheck')['sourceDestCheck'] != source_dest_check:
    NameError: global name 'source_dest_check' is not defined

diff --git a/lib/ansible/modules/cloud/amazon/ec2.py b/lib/ansible/modules/cloud/amazon/ec2.py
index 2d1c1fc61b..dee79980d0 100755
--- a/lib/ansible/modules/cloud/amazon/ec2.py
+++ b/lib/ansible/modules/cloud/amazon/ec2.py
@@ -1223,6 +1223,8 @@ def startstop_instances(module, ec2, instance_ids, state, instance_tags):
 
     wait = module.params.get('wait')
     wait_timeout = int(module.params.get('wait_timeout'))
+    source_dest_check = module.params.get('source_dest_check')
+    termination_protection = module.params.get('termination_protection')
     changed = False
     instance_dict_array = []
     source_dest_check = module.params.get('source_dest_check')
