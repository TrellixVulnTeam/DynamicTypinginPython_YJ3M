commit b34d150becfdb908da37e4b4964801578eba3956
Author: Ryan Groten <rgroten@gmail.com>
Date:   Mon Dec 18 10:28:19 2017 -0700

    Use hostgroup_find(all=True) returns member hosts of all hostgroups in a single call (#29106)

diff --git a/contrib/inventory/freeipa.py b/contrib/inventory/freeipa.py
index e2e4c9a9e7..20f5626aed 100755
--- a/contrib/inventory/freeipa.py
+++ b/contrib/inventory/freeipa.py
@@ -5,7 +5,6 @@
 import argparse
 from ipalib import api
 import json
-from distutils.version import StrictVersion
 
 
 def initialize():
@@ -35,15 +34,11 @@ def list_groups(api):
     inventory = {}
     hostvars = {}
 
-    ipa_version = api.Command.env()['result']['version']
-    result = api.Command.hostgroup_find()['result']
+    result = api.Command.hostgroup_find(all=True)['result']
 
     for hostgroup in result:
         # Get direct and indirect members (nested hostgroups) of hostgroup
         members = []
-        if StrictVersion(ipa_version) >= StrictVersion('4.0.0'):
-            hostgroup_name = hostgroup['cn'][0]
-            hostgroup = api.Command.hostgroup_show(hostgroup_name)['result']
 
         if 'member_host' in hostgroup:
             members = [host for host in hostgroup['member_host']]
