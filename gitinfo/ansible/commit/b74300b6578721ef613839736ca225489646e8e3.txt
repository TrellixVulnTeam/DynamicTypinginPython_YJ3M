commit b74300b6578721ef613839736ca225489646e8e3
Author: rahushen <rahul.shenoy.86@gmail.com>
Date:   Mon Aug 14 11:44:12 2017 -0400

    Additional fix for #27167: port-channel interface idempotence (#27979)

diff --git a/lib/ansible/modules/network/nxos/nxos_interface_ospf.py b/lib/ansible/modules/network/nxos/nxos_interface_ospf.py
index c1ccda9a20..f2304bed0e 100644
--- a/lib/ansible/modules/network/nxos/nxos_interface_ospf.py
+++ b/lib/ansible/modules/network/nxos/nxos_interface_ospf.py
@@ -207,7 +207,10 @@ def get_value(arg, config, module):
 def get_existing(module, args):
     existing = {}
     netcfg = CustomNetworkConfig(indent=2, contents=get_config(module))
-    parents = ['interface {0}'.format(module.params['interface'].capitalize())]
+    if module.params['interface'].startswith('loopback') or module.params['interface'].startswith('port-channel'):
+        parents = ['interface {0}'.format(module.params['interface'])]
+    else:
+        parents = ['interface {0}'.format(module.params['interface'].capitalize())]
     config = netcfg.get_section(parents)
     if 'ospf' in config:
         for arg in args:
@@ -390,7 +393,7 @@ def main():
                                                'message_digest_password']],
                            supports_check_mode=True)
 
-    if not module.params['interface'].startswith('loopback'):
+    if not module.params['interface'].startswith('loopback') and not module.params['interface'].startswith('port-channel'):
         module.params['interface'] = module.params['interface'].capitalize()
 
     warnings = list()
