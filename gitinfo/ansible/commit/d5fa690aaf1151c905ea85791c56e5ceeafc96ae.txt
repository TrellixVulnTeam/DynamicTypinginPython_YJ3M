commit d5fa690aaf1151c905ea85791c56e5ceeafc96ae
Author: trbs <trbs@trbs.net>
Date:   Thu Jun 19 15:47:46 2014 +0200

    In check mode if a symlink does not exist there is no need to check the ownership properties (which causes an exception)

diff --git a/library/files/file b/library/files/file
index effbe6b509..ea47811656 100644
--- a/library/files/file
+++ b/library/files/file
@@ -251,6 +251,9 @@ def main():
                 except OSError, e:
                     module.fail_json(path=path, msg='Error while linking: %s' % str(e))
 
+        if module.check_mode and not os.path.exists(path):
+            module.exit_json(dest=path, src=src, changed=changed)
+
         changed = module.set_fs_attributes_if_different(file_args, changed)
         module.exit_json(dest=path, src=src, changed=changed)
 
