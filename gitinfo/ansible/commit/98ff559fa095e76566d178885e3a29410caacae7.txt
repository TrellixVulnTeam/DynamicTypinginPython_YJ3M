commit 98ff559fa095e76566d178885e3a29410caacae7
Author: Martin Joehren <m.joehren@gmail.com>
Date:   Sun Jun 8 21:39:31 2014 +0200

    azure - fixed missing return statement

diff --git a/library/cloud/azure b/library/cloud/azure
index f9b42fa7d7..ec9aa9ec90 100644
--- a/library/cloud/azure
+++ b/library/cloud/azure
@@ -223,7 +223,6 @@ def create_virtual_machine(module, azure):
     Returns:
         True if a new virtual machine was created, false otherwise
     """
-
     name = module.params.get('name')
     hostname = module.params.get('hostname') or name + ".cloudapp.net"
     endpoints = module.params.get('endpoints').split(',')
@@ -302,8 +301,8 @@ def create_virtual_machine(module, azure):
             module.fail_json(msg="failed to create the new virtual machine, error was: %s" % str(e))
 
 
-        deployment = azure.get_deployment_by_name(service_name=name, deployment_name=name)
-        return (changed, urlparse(deployment.url).hostname, deployment)
+    deployment = azure.get_deployment_by_name(service_name=name, deployment_name=name)
+    return (changed, urlparse(deployment.url).hostname, deployment)
 
 
 def terminate_virtual_machine(module, azure):
