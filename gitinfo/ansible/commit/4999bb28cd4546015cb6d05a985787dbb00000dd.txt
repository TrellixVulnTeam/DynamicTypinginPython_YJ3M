commit 4999bb28cd4546015cb6d05a985787dbb00000dd
Author: Kevin Brebanov <kbrebanov@users.noreply.github.com>
Date:   Wed Aug 24 02:54:44 2016 -0400

    apk: Fix mutual exclusivity (#2768)
    
    * apk: Fix mutual exclusivity
    
    Ensure that 'name' and 'upgrade' are mutually exclusive.
    Also add a note to the documentation to say so.
    
    Fixes: #2767
    
    * Fix documentation

diff --git a/lib/ansible/modules/extras/packaging/os/apk.py b/lib/ansible/modules/extras/packaging/os/apk.py
index c867d1160d..911e50e094 100644
--- a/lib/ansible/modules/extras/packaging/os/apk.py
+++ b/lib/ansible/modules/extras/packaging/os/apk.py
@@ -52,6 +52,8 @@ options:
     required: false
     default: no
     choices: [ "yes", "no" ]
+notes:
+  - '"name" and "upgrade" are mutually exclusive.'
 '''
 
 EXAMPLES = '''
@@ -209,6 +211,7 @@ def main():
             upgrade = dict(default='no', type='bool'),
         ),
         required_one_of = [['name', 'update_cache', 'upgrade']],
+        mutually_exclusive = [['name', 'upgrade']],
         supports_check_mode = True
     )
 
