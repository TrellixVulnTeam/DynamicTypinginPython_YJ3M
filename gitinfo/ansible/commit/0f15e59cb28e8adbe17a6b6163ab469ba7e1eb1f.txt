commit 0f15e59cb28e8adbe17a6b6163ab469ba7e1eb1f
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Mon Feb 8 22:05:46 2016 -0800

    Also hide the before state of files with --diff and no_log

diff --git a/lib/ansible/plugins/action/__init__.py b/lib/ansible/plugins/action/__init__.py
index b81fd49561..cc2afdc865 100644
--- a/lib/ansible/plugins/action/__init__.py
+++ b/lib/ansible/plugins/action/__init__.py
@@ -617,7 +617,10 @@ class ActionBase(with_metaclass(ABCMeta, object)):
                 diff['after_header'] = 'dynamically generated'
                 diff['after'] = source
 
-        if self._play_context.no_log and 'after' in diff:
-            diff["after"] = " [[ Diff output has been hidden because 'no_log: true' was specified for this result ]]"
+        if self._play_context.no_log:
+            if 'before' in diff:
+                diff["before"] = ""
+            if 'after' in diff:
+                diff["after"] = " [[ Diff output has been hidden because 'no_log: true' was specified for this result ]]"
 
         return diff
