commit 7dd3ef7b60b09fb5c4a9ada0e96be87c5edd59ae
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Wed Jun 3 13:27:31 2015 -0700

    Older python-six from early RHEL and ubuntu do not have add_metaclass but do have with_metaclass

diff --git a/lib/ansible/plugins/cache/base.py b/lib/ansible/plugins/cache/base.py
index 767964b281..e903c935e4 100644
--- a/lib/ansible/plugins/cache/base.py
+++ b/lib/ansible/plugins/cache/base.py
@@ -20,11 +20,10 @@ __metaclass__ = type
 
 from abc import ABCMeta, abstractmethod
 
-from six import add_metaclass
+from six import with_metaclass
 
 
-@add_metaclass(ABCMeta)
-class BaseCacheModule:
+class BaseCacheModule(with_metaclass(ABCMeta, object)):
 
     @abstractmethod
     def get(self, key):
diff --git a/lib/ansible/plugins/connections/__init__.py b/lib/ansible/plugins/connections/__init__.py
index 70807b08f6..897bc58982 100644
--- a/lib/ansible/plugins/connections/__init__.py
+++ b/lib/ansible/plugins/connections/__init__.py
@@ -22,7 +22,7 @@ __metaclass__ = type
 
 from abc import ABCMeta, abstractmethod, abstractproperty
 
-from six import add_metaclass
+from six import with_metaclass
 
 from ansible import constants as C
 from ansible.errors import AnsibleError
@@ -34,8 +34,7 @@ from ansible.utils.display import Display
 
 __all__ = ['ConnectionBase']
 
-@add_metaclass(ABCMeta)
-class ConnectionBase:
+class ConnectionBase(with_metaclass(ABCMeta, object)):
     '''
     A base class for connections to contain common code.
     '''
diff --git a/lib/ansible/plugins/inventory/__init__.py b/lib/ansible/plugins/inventory/__init__.py
index 03fd89429b..74dbccc1bb 100644
--- a/lib/ansible/plugins/inventory/__init__.py
+++ b/lib/ansible/plugins/inventory/__init__.py
@@ -23,10 +23,9 @@ __metaclass__ = type
 
 from abc import ABCMeta, abstractmethod
 
-from six import add_metaclass
+from six import with_metaclass
 
-@add_metaclass(ABCMeta)
-class InventoryParser:
+class InventoryParser(with_metaclass(ABCMeta, object)):
     '''Abstract Base Class for retrieving inventory information
 
     Any InventoryParser functions by taking an inven_source.  The caller then
