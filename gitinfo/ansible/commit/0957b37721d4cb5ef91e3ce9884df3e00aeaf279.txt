commit 0957b37721d4cb5ef91e3ce9884df3e00aeaf279
Author: Petr Ruzicka <petr.ruzicka@gmail.com>
Date:   Fri Dec 14 17:17:21 2018 +0100

    with_items should not be used any more - using loop instead (#47652)

diff --git a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_certificate_facts.py b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_certificate_facts.py
index 5a9bea7a2d..5bc7e465c1 100644
--- a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_certificate_facts.py
+++ b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_certificate_facts.py
@@ -49,7 +49,7 @@ EXAMPLES = '''
   register: resp_out
 - set_fact:
     not_after_date: "{{ item.not_after }}"
-  with_items: "{{ resp_out.data|json_query(name) }}"
+  loop: "{{ resp_out.data|json_query(name) }}"
   vars:
     name: "[?name=='web-cert-01']"
 - debug: var=not_after_date
diff --git a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_domain_facts.py b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_domain_facts.py
index cba354ee4f..d30b7e6695 100644
--- a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_domain_facts.py
+++ b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_domain_facts.py
@@ -49,7 +49,7 @@ EXAMPLES = '''
   register: resp_out
 - set_fact:
     domain_ttl: "{{ item.ttl }}"
-  with_items: "{{ resp_out.data|json_query(name) }}"
+  loop: "{{ resp_out.data|json_query(name) }}"
   vars:
     name: "[?name=='example.com']"
 - debug: var=domain_ttl
diff --git a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_image_facts.py b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_image_facts.py
index ecae7a188c..cec527d3e7 100644
--- a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_image_facts.py
+++ b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_image_facts.py
@@ -62,7 +62,7 @@ EXAMPLES = '''
   register: resp_out
 - set_fact:
     distribution_name: "{{ item.distribution }}"
-  with_items: "{{ resp_out.data|json_query(name) }}"
+  loop: "{{ resp_out.data|json_query(name) }}"
   vars:
     name: "[?slug=='coreos-beta']"
 - debug: var=distribution_name
diff --git a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_load_balancer_facts.py b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_load_balancer_facts.py
index 8428226320..fcc8bc7c4c 100644
--- a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_load_balancer_facts.py
+++ b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_load_balancer_facts.py
@@ -49,7 +49,7 @@ EXAMPLES = '''
   register: resp_out
 - set_fact:
     load_balancer_name: "{{ item.name }}"
-  with_items: "{{ resp_out.data|json_query(name) }}"
+  loop: "{{ resp_out.data|json_query(name) }}"
   vars:
     name: "[?id=='4de7ac8b-495b-4884-9a69-1050c6793cd6']"
 - debug: var=load_balancer_name
diff --git a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_region_facts.py b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_region_facts.py
index fb90fa262d..19a9624775 100644
--- a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_region_facts.py
+++ b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_region_facts.py
@@ -41,7 +41,7 @@ EXAMPLES = '''
 - debug: var=resp_out
 - set_fact:
     region_slug: "{{ item.name }}"
-  with_items: "{{ resp_out.data|json_query(name) }}"
+  loop: "{{ resp_out.data|json_query(name) }}"
   vars:
     name: "[?slug==`nyc1`]"
 - debug: var=region_slug
diff --git a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_size_facts.py b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_size_facts.py
index 79ebe87236..479bd04698 100644
--- a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_size_facts.py
+++ b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_size_facts.py
@@ -41,7 +41,7 @@ EXAMPLES = '''
 - debug: var=resp_out
 - set_fact:
     size_slug: "{{ item.slug }}"
-  with_items: "{{ resp_out.data|json_query(name) }}"
+  loop: "{{ resp_out.data|json_query(name) }}"
   vars:
     name: "[?vcpus==`1`]"
 - debug: var=size_slug
diff --git a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_snapshot_facts.py b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_snapshot_facts.py
index 03faa566c5..f3a45be936 100644
--- a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_snapshot_facts.py
+++ b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_snapshot_facts.py
@@ -73,7 +73,7 @@ EXAMPLES = '''
   register: resp_out
 - set_fact:
     snapshot_id: "{{ item.id }}"
-  with_items: "{{ resp_out.data|json_query(name) }}"
+  loop: "{{ resp_out.data|json_query(name) }}"
   vars:
     name: "[?name=='big-data-snapshot1']"
 - debug: var=snapshot_id
diff --git a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_sshkey_facts.py b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_sshkey_facts.py
index d403dd39ba..91721315e0 100644
--- a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_sshkey_facts.py
+++ b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_sshkey_facts.py
@@ -36,7 +36,7 @@ EXAMPLES = '''
 
 - set_fact:
     pubkey: "{{ item.public_key }}"
-  with_items: "{{ ssh_keys|json_query(ssh_pubkey) }}"
+  loop: "{{ ssh_keys|json_query(ssh_pubkey) }}"
   vars:
     ssh_pubkey: "[?name=='ansible_ctrl']"
 
diff --git a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_tag.py b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_tag.py
index 9e04e19227..a1703c829e 100644
--- a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_tag.py
+++ b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_tag.py
@@ -65,7 +65,7 @@ EXAMPLES = '''
     name: "{{ item }}"
     resource_id: "73333005"
     state: present
-  with_items:
+  loop:
     - staging
     - dbserver
 
diff --git a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_tag_facts.py b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_tag_facts.py
index 0d09a34e43..e5f4e9c41c 100644
--- a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_tag_facts.py
+++ b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_tag_facts.py
@@ -49,7 +49,7 @@ EXAMPLES = '''
   register: resp_out
 - set_fact:
     resources: "{{ item.resources }}"
-  with_items: "{{ resp_out.data|json_query(name) }}"
+  loop: "{{ resp_out.data|json_query(name) }}"
   vars:
     name: "[?name=='extra_awesome_tag']"
 - debug: var=resources
diff --git a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_volume_facts.py b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_volume_facts.py
index 94e2ea733d..e772ce1984 100644
--- a/lib/ansible/modules/cloud/digital_ocean/digital_ocean_volume_facts.py
+++ b/lib/ansible/modules/cloud/digital_ocean/digital_ocean_volume_facts.py
@@ -52,7 +52,7 @@ EXAMPLES = '''
   register: resp_out
 - set_fact:
     volume_id: "{{ item.id }}"
-  with_items: "{{ resp_out.data|json_query(name) }}"
+  loop: "{{ resp_out.data|json_query(name) }}"
   vars:
     name: "[?name=='nyc3-test-volume']"
 - debug: var=volume_id
