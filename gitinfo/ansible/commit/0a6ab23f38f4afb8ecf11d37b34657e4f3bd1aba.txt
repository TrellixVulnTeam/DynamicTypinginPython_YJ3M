commit 0a6ab23f38f4afb8ecf11d37b34657e4f3bd1aba
Author: Ondra Machacek <machacek.ondra@gmail.com>
Date:   Tue Jul 3 16:04:51 2018 +0200

    ovirt_affinity_lables_facts: Raise error when host/vm not found (#41790)

diff --git a/lib/ansible/modules/cloud/ovirt/ovirt_affinity_label_facts.py b/lib/ansible/modules/cloud/ovirt/ovirt_affinity_label_facts.py
index 038b1fc74a..5d406daa9c 100644
--- a/lib/ansible/modules/cloud/ovirt/ovirt_affinity_label_facts.py
+++ b/lib/ansible/modules/cloud/ovirt/ovirt_affinity_label_facts.py
@@ -98,6 +98,7 @@ from ansible.module_utils.ovirt import (
     create_connection,
     get_dict_of_struct,
     ovirt_facts_full_argument_spec,
+    search_by_name,
 )
 
 
@@ -127,6 +128,8 @@ def main():
             ])
         if module.params['host']:
             hosts_service = connection.system_service().hosts_service()
+            if search_by_name(hosts_service, module.params['host']) is None:
+                raise Exception("Host '%s' was not found." % module.params['host'])
             labels.extend([
                 label
                 for label in all_labels
@@ -135,6 +138,8 @@ def main():
             ])
         if module.params['vm']:
             vms_service = connection.system_service().vms_service()
+            if search_by_name(vms_service, module.params['vm']) is None:
+                raise Exception("Vm '%s' was not found." % module.params['vm'])
             labels.extend([
                 label
                 for label in all_labels
