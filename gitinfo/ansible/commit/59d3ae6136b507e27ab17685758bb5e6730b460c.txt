commit 59d3ae6136b507e27ab17685758bb5e6730b460c
Author: Vincent Roy <vincentroy8@gmail.com>
Date:   Thu Apr 14 14:45:57 2016 -0300

    Don't let max_fail_percentage affect future plays.

diff --git a/lib/ansible/plugins/strategy/linear.py b/lib/ansible/plugins/strategy/linear.py
index 871642daff..6b505230e3 100644
--- a/lib/ansible/plugins/strategy/linear.py
+++ b/lib/ansible/plugins/strategy/linear.py
@@ -367,7 +367,7 @@ class StrategyModule(StrategyBase):
                 if iterator._play.max_fail_percentage is not None and len(results) > 0:
                     percentage = iterator._play.max_fail_percentage / 100.0
 
-                    if (len(failed_hosts) / len(results)) > percentage:
+                    if (len(iterator.get_failed_hosts()) / len(results)) > percentage:
                         for host in hosts_left:
                             # don't double-mark hosts, or the iterator will potentially
                             # fail them out of the rescue/always states
