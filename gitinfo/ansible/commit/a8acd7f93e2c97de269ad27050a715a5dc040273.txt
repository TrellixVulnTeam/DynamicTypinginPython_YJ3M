commit a8acd7f93e2c97de269ad27050a715a5dc040273
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Wed Mar 16 11:39:51 2016 -0700

    Enable pipelining for jail connection plugin

diff --git a/lib/ansible/plugins/connection/jail.py b/lib/ansible/plugins/connection/jail.py
index f5cd6d2ef1..844d94c51f 100644
--- a/lib/ansible/plugins/connection/jail.py
+++ b/lib/ansible/plugins/connection/jail.py
@@ -45,7 +45,7 @@ class Connection(ConnectionBase):
     transport = 'jail'
     # Pipelining may work.  Someone needs to test by setting this to True and
     # having pipelining=True in their ansible.cfg
-    has_pipelining = False
+    has_pipelining = True
     # Some become_methods may work in v2 (sudo works for other chroot-based
     # plugins while su seems to be failing).  If some work, check chroot.py to
     # see how to disable just some methods.
@@ -119,13 +119,6 @@ class Connection(ConnectionBase):
         ''' run a command on the jail '''
         super(Connection, self).exec_command(cmd, in_data=in_data, sudoable=sudoable)
 
-        # TODO: Check whether we can send the command to stdin via
-        # p.communicate(in_data)
-        # If we can, then we can change this plugin to has_pipelining=True and
-        # remove the error if in_data is given.
-        if in_data:
-            raise AnsibleError("Internal Error: this module does not support optimized module pipelining")
-
         p = self._buffered_exec_command(cmd)
 
         stdout, stderr = p.communicate(in_data)
