commit 542f07128eaf656d025206e33a3fecade19e7f8f
Author: James Cammarata <jimi@sngx.net>
Date:   Mon Aug 18 13:33:23 2014 -0500

    Correct check for role library/ existence
    
    Fixes #8633

diff --git a/lib/ansible/playbook/play.py b/lib/ansible/playbook/play.py
index 38aab2de7b..4de4565a55 100644
--- a/lib/ansible/playbook/play.py
+++ b/lib/ansible/playbook/play.py
@@ -401,7 +401,7 @@ class Play(object):
             library   = utils.path_dwim(self.basedir, os.path.join(role_path, 'library'))
 
             missing = lambda f: not os.path.isfile(f)
-            if missing(task) and missing(handler) and missing(vars_file) and missing(defaults_file) and missing(meta_file) and missing(library):
+            if missing(task) and missing(handler) and missing(vars_file) and missing(defaults_file) and missing(meta_file) and not os.path.isdir(library):
                 raise errors.AnsibleError("found role at %s, but cannot find %s or %s or %s or %s or %s or %s" % (role_path, task, handler, vars_file, defaults_file, meta_file, library))
 
             if isinstance(role, dict):
