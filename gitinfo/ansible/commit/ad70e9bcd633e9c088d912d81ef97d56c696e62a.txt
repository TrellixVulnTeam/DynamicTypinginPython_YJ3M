commit ad70e9bcd633e9c088d912d81ef97d56c696e62a
Author: James Tanner <tanner.jc@gmail.com>
Date:   Mon Mar 17 16:54:25 2014 -0400

    Fixes #6227 skip non-unicode strings and catch decode errors silently in template_from_string

diff --git a/lib/ansible/utils/template.py b/lib/ansible/utils/template.py
index fc4ff9fd20..0b86954e88 100644
--- a/lib/ansible/utils/template.py
+++ b/lib/ansible/utils/template.py
@@ -310,7 +310,13 @@ def template_from_string(basedir, data, vars, fail_on_undefined=False):
             if os.path.exists(filesdir):
                 basedir = filesdir
 
-        data = data.decode('utf-8')
+        # 6227
+        if isinstance(data, unicode):
+            try:
+                data = data.decode('utf-8')
+            except UnicodeEncodeError, e:
+                pass
+
         try:
             t = environment.from_string(data)
         except Exception, e:
