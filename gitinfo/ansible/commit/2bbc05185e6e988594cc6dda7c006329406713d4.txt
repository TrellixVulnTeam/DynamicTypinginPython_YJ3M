commit 2bbc05185e6e988594cc6dda7c006329406713d4
Author: Jeroen Hoekx <jeroen.hoekx@hamok.be>
Date:   Wed May 9 16:13:20 2012 +0200

    Make no_engine the default templating action.

diff --git a/lib/ansible/runner.py b/lib/ansible/runner.py
index 135130c575..aef135b3c5 100644
--- a/lib/ansible/runner.py
+++ b/lib/ansible/runner.py
@@ -545,7 +545,7 @@ class Runner(object):
         source_data = file(utils.path_dwim(self.basedir, source)).read()
         resultant = ''            
         try:
-            resultant = utils.template(source_data, inject, self.setup_cache)
+            resultant = utils.template(source_data, inject, self.setup_cache, no_engine=False)
         except Exception, e:
             return (host, False, dict(failed=True, msg=str(e)), '')
         xfered = self._transfer_str(conn, tmp, 'source', resultant)
diff --git a/lib/ansible/utils.py b/lib/ansible/utils.py
index 8385280407..6fb4c78aa4 100644
--- a/lib/ansible/utils.py
+++ b/lib/ansible/utils.py
@@ -243,7 +243,7 @@ def varReplace(raw, vars):
 
     return ''.join(done)
 
-def template(text, vars, setup_cache, no_engine=False):
+def template(text, vars, setup_cache, no_engine=True):
     ''' run a text buffer through the templating engine '''
     vars = vars.copy()
     text = varReplace(str(text), vars)
diff --git a/test/TestUtils.py b/test/TestUtils.py
index 23459d84a2..42953b854a 100644
--- a/test/TestUtils.py
+++ b/test/TestUtils.py
@@ -140,7 +140,7 @@ class TestUtils(unittest.TestCase):
             'who': 'world',
         }
 
-        res = ansible.utils.template(template, vars, {})
+        res = ansible.utils.template(template, vars, {}, no_engine=False)
 
         assert res == 'hello world'
 
@@ -150,6 +150,6 @@ class TestUtils(unittest.TestCase):
             'who': 'world',
         }
 
-        res = ansible.utils.template(template, vars, {})
+        res = ansible.utils.template(template, vars, {}, no_engine=False)
 
         assert res == 'hello world\n'
