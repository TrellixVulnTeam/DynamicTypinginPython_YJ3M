commit ce0bf71245d24801dfb2d829f0f125d6f9a2304f
Author: Matthew Barrington <edeninflames@gmail.com>
Date:   Fri Oct 11 16:01:54 2013 +0100

    Fixed crash when s3 bucket did not exist for put operation

diff --git a/library/cloud/s3 b/library/cloud/s3
index ae74424a57..75887eb9b6 100644
--- a/library/cloud/s3
+++ b/library/cloud/s3
@@ -371,7 +371,8 @@ def main():
         
         # Lets check to see if bucket exists to get ground truth.
         bucketrtn = bucket_check(module, s3, bucket)
-        keyrtn = key_check(module, s3, bucket, obj)
+        if bucketrtn is True:
+            keyrtn = key_check(module, s3, bucket, obj)
 
         # Lets check key state. Does it exist and if it does, compute the etag md5sum.
         if bucketrtn is True and keyrtn is True:
