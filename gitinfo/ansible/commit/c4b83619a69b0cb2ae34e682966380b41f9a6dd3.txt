commit c4b83619a69b0cb2ae34e682966380b41f9a6dd3
Author: Martin Krizek <martin.krizek@gmail.com>
Date:   Thu Nov 7 20:12:10 2019 +0100

    botmeta sanity: check migrated_to on non-existing file (#64551)

diff --git a/test/sanity/code-smell/botmeta.py b/test/sanity/code-smell/botmeta.py
index 7ae48d67e5..48660a0644 100755
--- a/test/sanity/code-smell/botmeta.py
+++ b/test/sanity/code-smell/botmeta.py
@@ -80,10 +80,11 @@ def main():
         path_macros.append(macro)
 
     # Ensure all `files` correspond to a file
-    for file in botmeta['files']:
+    for file, file_meta in botmeta['files'].items():
+        migrated = isinstance(file_meta, dict) and file_meta.get('migrated_to') is not None
         for macro in path_macros:
             file = file.replace('$' + macro, botmeta.get('macros', {}).get(macro, ''))
-        if not os.path.exists(file):
+        if not os.path.exists(file) and not migrated:
             # Not a file or directory, though maybe the prefix to one?
             # https://github.com/ansible/ansibullbot/pull/1023
             if not glob.glob('%s*' % file):
