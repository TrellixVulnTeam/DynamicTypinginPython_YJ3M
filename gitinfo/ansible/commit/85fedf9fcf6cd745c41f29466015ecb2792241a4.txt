commit 85fedf9fcf6cd745c41f29466015ecb2792241a4
Author: Adam Miller <admiller@redhat.com>
Date:   Tue Jul 24 17:17:51 2018 -0500

    make sure to get correct python version for rpmfluff in setup_rpm_repo (#43228)
    
    * make sure to get correct python version for rpmfluff in setup_rpm_repo
    
    Signed-off-by: Adam Miller <admiller@redhat.com>

diff --git a/test/integration/targets/setup_rpm_repo/tasks/main.yml b/test/integration/targets/setup_rpm_repo/tasks/main.yml
index fcee39c0a1..f3a8afc83f 100644
--- a/test/integration/targets/setup_rpm_repo/tasks/main.yml
+++ b/test/integration/targets/setup_rpm_repo/tasks/main.yml
@@ -22,6 +22,18 @@
       - createrepo  # used by el6 version of rpmfluff
     when:
       - ansible_distribution not in ['Fedora']
+      - ansible_python["version"]["major"] == 2
+
+  - name: Install rpmfluff and deps
+    package:
+      name: "{{ item }}"
+    with_items:
+      - python3-rpmfluff
+      - createrepo_c
+      - createrepo  # used by el6 version of rpmfluff
+    when:
+      - ansible_distribution not in ['Fedora']
+      - ansible_python["version"]["major"] == 3
 
   - name: Copy script for creating a repo
     copy:
