commit 5bf9f271b353d8156095104faa688b70898fdcbe
Author: Vyronas Tsingaras <vtsingaras@users.noreply.github.com>
Date:   Mon Oct 9 21:37:33 2017 +0300

    win_copy: Add missing check_mode fix (#31469)
    
    * Add missing check_mode fix
    
    * Refactor conditional to use the one embedded in Remove-Item

diff --git a/lib/ansible/modules/windows/win_copy.ps1 b/lib/ansible/modules/windows/win_copy.ps1
index 26b4c76a39..2af02105fe 100644
--- a/lib/ansible/modules/windows/win_copy.ps1
+++ b/lib/ansible/modules/windows/win_copy.ps1
@@ -76,7 +76,7 @@ Function Copy-File($source, $dest) {
         }
 
         if (Test-Path -Path $dest -PathType Leaf) {
-            Remove-Item -Path $dest -Force -Recurse | Out-Null
+            Remove-Item -Path $dest -Force -Recurse -WhatIf:$check_mode | Out-Null
             $diff += "-$dest`n"
         }
 
