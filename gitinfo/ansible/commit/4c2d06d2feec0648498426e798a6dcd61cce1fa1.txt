commit 4c2d06d2feec0648498426e798a6dcd61cce1fa1
Author: Matt Martz <matt@sivel.net>
Date:   Mon Nov 10 10:52:23 2014 -0600

    Support nested modules with ANSIBLE_LIBRARY env var

diff --git a/lib/ansible/utils/plugins.py b/lib/ansible/utils/plugins.py
index 0d050fd13d..1955ade237 100644
--- a/lib/ansible/utils/plugins.py
+++ b/lib/ansible/utils/plugins.py
@@ -127,7 +127,7 @@ class PluginLoader(object):
             configured_paths = self.config.split(os.pathsep)
             for path in configured_paths:
                 path = os.path.realpath(os.path.expanduser(path))
-                contents = glob.glob("%s/*" % path)
+                contents = glob.glob("%s/*" % path) + glob.glob("%s/*/*" % path)
                 for c in contents:
                     if os.path.isdir(c) and c not in ret:
                         ret.append(c)
