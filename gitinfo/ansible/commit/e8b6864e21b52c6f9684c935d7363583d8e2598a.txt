commit e8b6864e21b52c6f9684c935d7363583d8e2598a
Author: Martin Krizek <martin.krizek@gmail.com>
Date:   Fri Oct 19 20:29:27 2018 +0200

    yum/dnf: fail when space separated string of names (#47109)
    
    * yum/dnf: fail when space separated string of names
    
    * Groups allow spaces in names

diff --git a/lib/ansible/module_utils/yumdnf.py b/lib/ansible/module_utils/yumdnf.py
index 619fc583c9..c71f62bee7 100644
--- a/lib/ansible/module_utils/yumdnf.py
+++ b/lib/ansible/module_utils/yumdnf.py
@@ -95,6 +95,15 @@ class YumDnf(with_metaclass(ABCMeta, object)):
         self.enablerepo = self.listify_comma_sep_strings_in_list(self.enablerepo)
         self.exclude = self.listify_comma_sep_strings_in_list(self.exclude)
 
+        # Fail if someone passed a space separated string
+        # https://github.com/ansible/ansible/issues/46301
+        if any((' ' in name and '@' not in name for name in self.names)):
+            module.fail_json(
+                msg='It appears that a space separated string of packages was passed in '
+                    'as an argument. To operate on several packages, pass a comma separated '
+                    'string of packages or a list of packages.'
+            )
+
         # This should really be redefined by both the yum and dnf module but a
         # default isn't a bad idea
         self.lockfile = '/var/run/yum.pid'
diff --git a/lib/ansible/modules/packaging/os/dnf.py b/lib/ansible/modules/packaging/os/dnf.py
index 187bc0b42d..fb7fa34ac0 100644
--- a/lib/ansible/modules/packaging/os/dnf.py
+++ b/lib/ansible/modules/packaging/os/dnf.py
@@ -26,9 +26,10 @@ description:
 options:
   name:
     description:
-      - "A list of package names, or package specifier with version, like C(name-1.0)
+      - "A package name or package specifier with version, like C(name-1.0).
         When using state=latest, this can be '*' which means run: dnf -y update.
-        You can also pass a url or a local path to a rpm file."
+        You can also pass a url or a local path to a rpm file.
+        To operate on several packages this can accept a comma separated string of packages or a list of packages."
     required: true
     aliases:
         - pkg
diff --git a/lib/ansible/modules/packaging/os/yum.py b/lib/ansible/modules/packaging/os/yum.py
index 53a9996ddd..e167e35c51 100644
--- a/lib/ansible/modules/packaging/os/yum.py
+++ b/lib/ansible/modules/packaging/os/yum.py
@@ -39,7 +39,7 @@ options:
         See the C(allow_downgrade) documentation for caveats with downgrading packages.
       - When using state=latest, this can be C('*') which means run C(yum -y update).
       - You can also pass a url or a local path to a rpm file (using state=present).
-        To operate on several packages this can accept a comma separated list of packages or (as of 2.0) a list of packages.
+        To operate on several packages this can accept a comma separated string of packages or (as of 2.0) a list of packages.
     aliases: [ pkg ]
   exclude:
     description:
