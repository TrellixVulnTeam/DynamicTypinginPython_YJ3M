commit 66e29f0a7c4c9507e7c9c2d576765ba17bda75ec
Author: Ricardo Carrillo Cruz <ricardo.carrillo.cruz@gmail.com>
Date:   Wed Mar 29 22:38:15 2017 +0200

    Do not re.search show configuration stdout if empty (#23087)
    
    If the banner is not set, the stdout of 'show configuration | begin banner <banner>'
    returns empty string thus the re.search raises an exception.
    
    Fixes #22216

diff --git a/lib/ansible/modules/network/ios/ios_banner.py b/lib/ansible/modules/network/ios/ios_banner.py
index 6187a6f4a7..a3e136be93 100644
--- a/lib/ansible/modules/network/ios/ios_banner.py
+++ b/lib/ansible/modules/network/ios/ios_banner.py
@@ -113,7 +113,10 @@ def map_config_to_obj(module):
         rc, out, err = exec_command(module,
                                     'show running-config | begin banner %s'
                                     % module.params['banner'])
-        output = re.search('\^C(.*)\^C', out, re.S).group(1).strip()
+        if out:
+            output = re.search('\^C(.*)\^C', out, re.S).group(1).strip()
+        else:
+            output = None
     obj = {'banner': module.params['banner'], 'state': 'absent'}
     if output:
         obj['text'] = output
