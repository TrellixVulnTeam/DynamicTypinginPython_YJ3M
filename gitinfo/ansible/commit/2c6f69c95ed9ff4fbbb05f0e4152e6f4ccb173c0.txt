commit 2c6f69c95ed9ff4fbbb05f0e4152e6f4ccb173c0
Author: acaveroc <alejandro.cavero.c@gmail.com>
Date:   Wed Jun 17 13:53:08 2015 +0200

    Assorted minor bug fixes
    
    - Modified data type for port definition from string to integer
    - Modified login_host default value for compatibilize with port definition according with MySQL Documentation (https://dev.mysql.com/doc/refman/5.0/en/connecting.html)

diff --git a/lib/ansible/modules/database/mysql/mysql_variables.py b/lib/ansible/modules/database/mysql/mysql_variables.py
index 753d37433e..36415df546 100644
--- a/lib/ansible/modules/database/mysql/mysql_variables.py
+++ b/lib/ansible/modules/database/mysql/mysql_variables.py
@@ -197,7 +197,7 @@ def main():
             argument_spec = dict(
             login_user=dict(default=None),
             login_password=dict(default=None),
-            login_host=dict(default="localhost"),
+            login_host=dict(default="127.0.0.1"),
             login_port=dict(default="3306"),
             login_unix_socket=dict(default=None),
             variable=dict(default=None),
@@ -233,9 +233,9 @@ def main():
         module.fail_json(msg="when supplying login arguments, both login_user and login_password must be provided")
     try:
         if module.params["login_unix_socket"]:
-            db_connection = MySQLdb.connect(host=module.params["login_host"], port=module.params["login_port"], unix_socket=module.params["login_unix_socket"], user=login_user, passwd=login_password, db="mysql")
+            db_connection = MySQLdb.connect(host=module.params["login_host"], port=int(module.params["login_port"]), unix_socket=module.params["login_unix_socket"], user=login_user, passwd=login_password, db="mysql")
         else:
-            db_connection = MySQLdb.connect(host=module.params["login_host"], port=module.params["login_port"], user=login_user, passwd=login_password, db="mysql")
+            db_connection = MySQLdb.connect(host=module.params["login_host"], port=int(module.params["login_port"]), user=login_user, passwd=login_password, db="mysql")
         cursor = db_connection.cursor()
     except Exception, e:
         module.fail_json(msg="unable to connect to database, check login_user and login_password are correct or ~/.my.cnf has the credentials")
