commit d0a062ffa35c7179cf1238bdcb901c0918e59782
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Mon Jan 25 19:46:57 2016 -0800

    python3 doesn't have raw explicit-unicode literals.  Workaround it with a raw native string that we make unicode in py2.

diff --git a/lib/ansible/plugins/connection/winrm.py b/lib/ansible/plugins/connection/winrm.py
index ef2f630f97..c291e21782 100644
--- a/lib/ansible/plugins/connection/winrm.py
+++ b/lib/ansible/plugins/connection/winrm.py
@@ -138,9 +138,9 @@ class Connection(ConnectionBase):
                 return protocol
             except Exception as e:
                 err_msg = to_unicode(e).strip()
-                if re.search(ur'Operation\s+?timed\s+?out', err_msg, re.I):
+                if re.search(to_unicode(r'Operation\s+?timed\s+?out'), err_msg, re.I):
                     raise AnsibleError('the connection attempt timed out')
-                m = re.search(ur'Code\s+?(\d{3})', err_msg)
+                m = re.search(to_unicode(r'Code\s+?(\d{3})'), err_msg)
                 if m:
                     code = int(m.groups()[0])
                     if code == 401:
