commit 4d29cd6ee359f8ebbefc1392162fd02b48304a3a
Author: Seth Vidal <skvidal@fedoraproject.org>
Date:   Thu Aug 2 17:46:21 2012 -0400

    make virt module command= work again - better error handling should be in its
    future

diff --git a/library/virt b/library/virt
index 5de5567eba..45627b3d61 100755
--- a/library/virt
+++ b/library/virt
@@ -312,6 +312,7 @@ def core(module):
     v = Virt()
     res = {}
     
+    
     if state:
         if not guest:
             module.fail_json(msg = "state change requires a guest specified")
@@ -337,13 +338,13 @@ def core(module):
             res = getattr(v, command)(guest)
             if type(res) != dict:
                 res = { command: res }
-            return rc, res
+            return VIRT_SUCCESS, res
         
         elif hasattr(v, command):
             res = getattr(v, command)()
             if type(res) != dict:
                 res = { command: res }
-            return rc, res
+            return VIRT_SUCCESS, res
             
         else:
             module.fail_json(msg="Command %s not recognized" % basecmd)
