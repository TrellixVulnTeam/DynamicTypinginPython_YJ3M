commit 9b85a51c64a687f8db4a9bfe3fea0f62f5f65af2
Author: Andrew Klychkov <aaklychkov@mail.ru>
Date:   Tue Dec 17 16:53:51 2019 +0300

    Bugfix of 65761: postgresql_privs fail after it's updated to 2.9.2 (#65903)
    
    * Bugfix of 65761: postgresql_privs fail after it's updated to 2.9.2
    
    * add changelog

diff --git a/changelogs/fragments/65903-postgresql_privs_sort_lists_with_none_elements.yml b/changelogs/fragments/65903-postgresql_privs_sort_lists_with_none_elements.yml
new file mode 100644
index 0000000000..2a74e38980
--- /dev/null
+++ b/changelogs/fragments/65903-postgresql_privs_sort_lists_with_none_elements.yml
@@ -0,0 +1,2 @@
+bugfixes:
+- postgresql_privs - fix sorting lists with None elements for python3 (https://github.com/ansible/ansible/issues/65761).
diff --git a/lib/ansible/modules/database/postgresql/postgresql_privs.py b/lib/ansible/modules/database/postgresql/postgresql_privs.py
index b235d96c6a..ba8324dde6 100644
--- a/lib/ansible/modules/database/postgresql/postgresql_privs.py
+++ b/lib/ansible/modules/database/postgresql/postgresql_privs.py
@@ -780,8 +780,16 @@ class Connection(object):
         executed_queries.append(query)
         self.cursor.execute(query)
         status_after = get_status(objs)
-        status_before.sort()
-        status_after.sort()
+
+        def nonesorted(e):
+            # For python 3+ that can fail trying
+            # to compare NoneType elements by sort method.
+            if e is None:
+                return ''
+            return e
+
+        status_before.sort(key=nonesorted)
+        status_after.sort(key=nonesorted)
         return status_before != status_after
 
 
