commit af88e348315aaf6f0ac3870106405d32cb693213
Author: Brian Coca <bcoca@ansible.com>
Date:   Mon Jan 25 10:49:54 2016 -0500

    better error when host inventory script isnt dict

diff --git a/lib/ansible/inventory/script.py b/lib/ansible/inventory/script.py
index 999e472f53..95e48eff58 100644
--- a/lib/ansible/inventory/script.py
+++ b/lib/ansible/inventory/script.py
@@ -149,7 +149,10 @@ class InventoryScript:
     def get_host_variables(self, host):
         """ Runs <script> --host <hostname> to determine additional host variables """
         if self.host_vars_from_top is not None:
-            got = self.host_vars_from_top.get(host.name, {})
+            try:
+                got = self.host_vars_from_top.get(host.name, {})
+            except AttributeError as e:
+                raise AnsibleError("Improperly formated host information for %s: %s" % (host.name,to_str(e)))
             return got
 
         cmd = [self.filename, "--host", host.name]
