commit 63a0b99b6a3ddfa5da4d548aefff51fa9aab609d
Author: Yair Fried <yfried+github@redhat.com>
Date:   Mon Jan 25 14:49:37 2016 +0200

    Fix glance_client module
    
    Wrong variable name.

diff --git a/lib/ansible/modules/cloud/openstack/_glance_image.py b/lib/ansible/modules/cloud/openstack/_glance_image.py
index 4d779f2c22..13ea23e48c 100644
--- a/lib/ansible/modules/cloud/openstack/_glance_image.py
+++ b/lib/ansible/modules/cloud/openstack/_glance_image.py
@@ -238,6 +238,12 @@ def main():
         argument_spec=argument_spec,
         mutually_exclusive = [['file','copy_from']],
     )
+
+    if not HAS_GLANCECLIENT:
+        module.fail_json(msg='python-glanceclient is required for this module')
+    if not HAS_KEYSTONECLIENT:
+        module.fail_json(msg='python-keystoneclient is required for this module')
+
     if module.params['state'] == 'present':
         if not module.params['file'] and not module.params['copy_from']:
             module.fail_json(msg="Either file or copy_from variable should be set to create the image")
