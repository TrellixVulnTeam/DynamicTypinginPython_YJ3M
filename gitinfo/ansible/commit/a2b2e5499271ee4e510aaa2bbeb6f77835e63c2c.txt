commit a2b2e5499271ee4e510aaa2bbeb6f77835e63c2c
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Wed Dec 3 14:42:01 2014 -0800

    Fix checksum code to work with delegate_to/local_action
    
    Fixes #9704

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index 4d2bd66016..8da794ba6f 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -1223,7 +1223,10 @@ class Runner(object):
 
     def _remote_checksum(self, conn, tmp, path, inject):
         ''' takes a remote checksum and returns 1 if no file '''
-        python_interp = inject['hostvars'][inject['inventory_hostname']].get('ansible_python_interpreter', 'python')
+        if 'delegate_to' in inject and inject['delegate_to']:
+            python_interp = inject['hostvars'][inject['delegate_to']].get('ansible_python_interpreter', 'python')
+        else:
+            python_interp = inject['hostvars'][inject['inventory_hostname']].get('ansible_python_interpreter', 'python')
         cmd = conn.shell.checksum(path, python_interp)
         data = self._low_level_exec_command(conn, cmd, tmp, sudoable=True)
         data2 = utils.last_non_blank_line(data['stdout'])
