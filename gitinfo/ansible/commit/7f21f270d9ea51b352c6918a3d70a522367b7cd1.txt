commit 7f21f270d9ea51b352c6918a3d70a522367b7cd1
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Fri May 8 13:18:19 2015 -0700

    Be more lenient in instance check: MutableMapping is more general than dict

diff --git a/lib/ansible/vars/__init__.py b/lib/ansible/vars/__init__.py
index f30d52b7a3..040c224448 100644
--- a/lib/ansible/vars/__init__.py
+++ b/lib/ansible/vars/__init__.py
@@ -22,6 +22,7 @@ __metaclass__ = type
 import os
 
 from collections import defaultdict
+from collections import MutableMapping
 
 try:
     from hashlib import sha1
@@ -73,7 +74,7 @@ class VariableManager:
 
     def set_extra_vars(self, value):
         ''' ensures a clean copy of the extra_vars are used to set the value '''
-        assert isinstance(value, dict)
+        assert isinstance(value, MutableMapping)
         self._extra_vars = value.copy()
 
     def set_inventory(self, inventory):
@@ -83,7 +84,7 @@ class VariableManager:
         '''
         Validates that both arguments are dictionaries, or an error is raised.
         '''
-        if not (isinstance(a, dict) and isinstance(b, dict)):
+        if not (isinstance(a, MutableMapping) and isinstance(b, MutableMapping)):
             raise AnsibleError("failed to combine variables, expected dicts but got a '%s' and a '%s'" % (type(a).__name__, type(b).__name__))
 
     def _combine_vars(self, a, b):
