commit 0c4effb8a6b45bc7d2c3f56d904141b81f9e3be6
Author: Brad Davidson <brad@oatmail.org>
Date:   Sun May 15 22:09:56 2016 -0700

    Ignore limits and restrictions when parsing inventory.
    
    We want to update host vars for all hosts (even those that might
    have failed), and the in case of a refresh_inventory, the code has
    a stale restrictions list at this point anyway.

diff --git a/lib/ansible/inventory/__init__.py b/lib/ansible/inventory/__init__.py
index 1caaed4413..7742705009 100644
--- a/lib/ansible/inventory/__init__.py
+++ b/lib/ansible/inventory/__init__.py
@@ -159,8 +159,8 @@ class Inventory(object):
             group.vars = combine_vars(group.vars, self.get_group_variables(group.name))
             self.get_group_vars(group)
 
-        # set host vars from host_vars/ files and vars plugins
-        for host in self.get_hosts():
+        # get host vars from host_vars/ files and vars plugins
+        for host in self.get_hosts(ignore_limits_and_restrictions=True):
             host.vars = combine_vars(host.vars, self.get_host_variables(host.name))
             self.get_host_vars(host)
 
