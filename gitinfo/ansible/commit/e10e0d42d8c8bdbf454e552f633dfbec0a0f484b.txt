commit e10e0d42d8c8bdbf454e552f633dfbec0a0f484b
Author: Ganesh Nalawade <ganesh634@gmail.com>
Date:   Mon Apr 9 16:22:09 2018 +0530

    Fix junos transport check (#38460)
    
    For connection=local check only if the transport value in
    provider is cli and the respective module support cli
    transport. If not report back appropriate error message.

diff --git a/lib/ansible/plugins/action/junos.py b/lib/ansible/plugins/action/junos.py
index b0415921f9..6f61701103 100644
--- a/lib/ansible/plugins/action/junos.py
+++ b/lib/ansible/plugins/action/junos.py
@@ -57,8 +57,7 @@ class ActionModule(_ActionModule):
             pc.network_os = 'junos'
             pc.remote_addr = provider['host'] or self._play_context.remote_addr
 
-            if (provider['transport'] == 'cli' and self._task.action not in CLI_SUPPORTED_MODULES) or \
-                    (provider['transport'] == 'netconf' and self._task.action == 'junos_netconf'):
+            if provider['transport'] == 'cli' and self._task.action not in CLI_SUPPORTED_MODULES:
                 return {'failed': True, 'msg': "Transport type '%s' is not valid for '%s' module. "
                                                "Please see http://docs.ansible.com/ansible/latest/network/user_guide/platform_junos.html"
                                                % (provider['transport'], self._task.action)}
