commit 31a5b874a158b1379733cf2ea17b0688c587780d
Author: Matt Clay <matt@mystile.com>
Date:   Thu Aug 23 10:23:19 2018 -0700

    Use runtime instead of datetime for test output.

diff --git a/test/sanity/code-smell/shebang.py b/test/sanity/code-smell/shebang.py
index 23fd147881..7dd2a2718a 100755
--- a/test/sanity/code-smell/shebang.py
+++ b/test/sanity/code-smell/shebang.py
@@ -27,6 +27,7 @@ def main():
     skip = set([
         'test/integration/targets/win_module_utils/library/legacy_only_new_way_win_line_ending.ps1',
         'test/integration/targets/win_module_utils/library/legacy_only_old_way_win_line_ending.ps1',
+        'test/utils/shippable/timing.py',
     ])
 
     for path in sys.argv[1:] or sys.stdin.read().splitlines():
diff --git a/test/utils/shippable/timing.py b/test/utils/shippable/timing.py
new file mode 100755
index 0000000000..bc170f16c9
--- /dev/null
+++ b/test/utils/shippable/timing.py
@@ -0,0 +1,10 @@
+#!/usr/bin/env python3
+
+import sys
+import time
+
+start = time.time()
+
+for line in sys.stdin:
+    seconds = time.time() - start
+    sys.stdout.write('%02d:%02d %s' % (seconds // 60, seconds % 60, line))
diff --git a/test/utils/shippable/timing.sh b/test/utils/shippable/timing.sh
index 9cfdeb395e..2da6b82278 100755
--- a/test/utils/shippable/timing.sh
+++ b/test/utils/shippable/timing.sh
@@ -1,5 +1,5 @@
-#!/bin/bash -eux
+#!/bin/bash -eu
 
 set -o pipefail
 
-"$@" 2>&1 | gawk '{ print strftime("%Y-%m-%d %H:%M:%S"), $0; fflush(); }'
+"$@" 2>&1 | "$(dirname "$0")/timing.py"
