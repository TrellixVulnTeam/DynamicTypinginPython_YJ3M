commit 0f6669fafe9a3a26a21c092fe6a5578741c4339f
Author: Seth Vidal <skvidal@fedoraproject.org>
Date:   Tue Dec 11 14:12:10 2012 -0500

    make --list-hosts expand out extra vars in the hosts: field

diff --git a/bin/ansible-playbook b/bin/ansible-playbook
index 2d56df2d2a..7375017a7e 100755
--- a/bin/ansible-playbook
+++ b/bin/ansible-playbook
@@ -131,7 +131,8 @@ def main(args):
                     label = 'unnamed'
                     if 'name' in play:
                         label = play['name']
-                    hosts = pb.inventory.list_hosts(play['hosts'])
+                    tmp_hosts = utils.template(pb.basedir, play['hosts'], extra_vars)
+                    hosts = pb.inventory.list_hosts(tmp_hosts)
                     print '  hosts in play %s (%s): #%d' % (playnum, label, len(hosts))
                     for host in hosts:
                         print '    %s' % host
