commit 31d530d6af5b8e6706288bad1dab04aee1c5e6d5
Author: Rene Moser <mail@renemoser.net>
Date:   Tue Jul 11 23:36:34 2017 +0200

    cloudstack: cs_iso: add display_text param

diff --git a/lib/ansible/modules/cloud/cloudstack/cs_iso.py b/lib/ansible/modules/cloud/cloudstack/cs_iso.py
index 26e829844e..1b36fdf520 100644
--- a/lib/ansible/modules/cloud/cloudstack/cs_iso.py
+++ b/lib/ansible/modules/cloud/cloudstack/cs_iso.py
@@ -36,6 +36,13 @@ options:
     description:
       - Name of the ISO.
     required: true
+  display_text:
+    description:
+      - Display text of the ISO.
+      - If not specified, C(name) will be used.
+    required: false
+    default: null
+    version_added: "2.4"
   url:
     description:
       - URL where the ISO can be downloaded from. Required if C(state) is present.
@@ -238,7 +245,7 @@ class AnsibleCloudStackIso(AnsibleCloudStack):
     def _get_common_args(self):
         return {
             'name': self.module.params.get('name'),
-            'displaytext': self.module.params.get('name'),
+            'displaytext': self.get_or_fallback('display_text', 'name'),
             'isdynamicallyscalable': self.module.params.get('is_dynamically_scalable'),
             'ostypeid': self.get_os_type('id'),
             'bootable': self.module.params.get('bootable'),
@@ -348,6 +355,7 @@ def main():
     argument_spec = cs_argument_spec()
     argument_spec.update(dict(
         name=dict(required=True),
+        display_text=dict(),
         url=dict(),
         os_type=dict(),
         zone=dict(),
diff --git a/test/integration/targets/cs_iso/tasks/main.yml b/test/integration/targets/cs_iso/tasks/main.yml
index af10a5ba58..746562bdf0 100644
--- a/test/integration/targets/cs_iso/tasks/main.yml
+++ b/test/integration/targets/cs_iso/tasks/main.yml
@@ -50,6 +50,7 @@
 - name: test update iso in check mdoe
   cs_iso:
     name: "{{ cs_resource_prefix }}-iso"
+    display_text: "{{ cs_resource_prefix }}-iso display_text"
     url: http://mirror.switch.ch/ftp/mirror/debian-cd/current/amd64/iso-cd/debian-7.7.0-amd64-netinst.iso
     os_type: CentOS 7
   register: iso
@@ -64,6 +65,7 @@
 - name: test update iso
   cs_iso:
     name: "{{ cs_resource_prefix }}-iso"
+    display_text: "{{ cs_resource_prefix }}-iso display_text"
     url: http://mirror.switch.ch/ftp/mirror/debian-cd/current/amd64/iso-cd/debian-7.7.0-amd64-netinst.iso
     os_type: CentOS 7
   register: iso
@@ -72,7 +74,7 @@
     that:
     - iso|changed
     - iso.name == "{{ cs_resource_prefix }}-iso"
-    - iso.display_text == "{{ cs_resource_prefix }}-iso"
+    - iso.display_text == "{{ cs_resource_prefix }}-iso display_text"
 
 - name: test update iso idempotence
   cs_iso:
@@ -85,7 +87,7 @@
     that:
     - not iso|changed
     - iso.name == "{{ cs_resource_prefix }}-iso"
-    - iso.display_text == "{{ cs_resource_prefix }}-iso"
+    - iso.display_text == "{{ cs_resource_prefix }}-iso display_text"
 
 - name: test remove iso in check mode
   cs_iso:
@@ -98,7 +100,7 @@
     that:
     - iso|changed
     - iso.name == "{{ cs_resource_prefix }}-iso"
-    - iso.display_text == "{{ cs_resource_prefix }}-iso"
+    - iso.display_text == "{{ cs_resource_prefix }}-iso display_text"
 
 - name: test remove iso
   cs_iso:
@@ -110,7 +112,7 @@
     that:
     - iso|changed
     - iso.name == "{{ cs_resource_prefix }}-iso"
-    - iso.display_text == "{{ cs_resource_prefix }}-iso"
+    - iso.display_text == "{{ cs_resource_prefix }}-iso display_text"
 
 - name: test remove iso idempotence
   cs_iso:
