commit 32310a43ae13e55f37d4b8b576f3c529a5f50d27
Author: Robin Roth <robin-roth@online.de>
Date:   Thu Dec 4 11:28:18 2014 +0100

    fix local change

diff --git a/lib/ansible/modules/extras/packaging/os/zypper.py b/lib/ansible/modules/extras/packaging/os/zypper.py
index 2147779eee..fc4cca0122 100644
--- a/lib/ansible/modules/extras/packaging/os/zypper.py
+++ b/lib/ansible/modules/extras/packaging/os/zypper.py
@@ -95,11 +95,11 @@ def zypper_version(module):
         return rc, stderr
 
 # Function used for getting versions of currently installed packages.
-def get_current_version( packages):
+def get_current_version(m, packages):
     cmd = ['/bin/rpm', '-q', '--qf', '%{NAME} %{VERSION}-%{RELEASE}\n']
     cmd.extend(packages)
 
-    stdout = subprocess.check_output(cmd)
+    rc, stdout, stderr = m.run_command(cmd, check_rc=False)
 
     current_version = {}
     rpmoutput_re = re.compile('^(\S+) (\S+)$')
