commit 7ccc2143fd56c4b48cfaa4c6a95fd838aa2daf9c
Author: Brian Coca <bcoca@ansible.com>
Date:   Tue May 26 09:57:38 2015 -0400

    sleep when only doing a time delay to avoid cpu churn

diff --git a/lib/ansible/modules/utilities/logic/wait_for.py b/lib/ansible/modules/utilities/logic/wait_for.py
index 1f54957051..4aa5bc7828 100644
--- a/lib/ansible/modules/utilities/logic/wait_for.py
+++ b/lib/ansible/modules/utilities/logic/wait_for.py
@@ -337,12 +337,15 @@ def main():
     if params['exclude_hosts'] is not None and state != 'drained':
         module.fail_json(msg="exclude_hosts should only be with state=drained")
 
+
     start = datetime.datetime.now()
 
     if delay:
         time.sleep(delay)
 
-    if state in [ 'stopped', 'absent' ]:
+    if not port and not path and state != 'drained':
+        time.sleep(timeout)
+    elif state in [ 'stopped', 'absent' ]:
         ### first wait for the stop condition
         end = start + datetime.timedelta(seconds=timeout)
 
@@ -365,6 +368,8 @@ def main():
                     time.sleep(1)
                 except:
                     break
+            else:
+                time.sleep(1)
         else:
             elapsed = datetime.datetime.now() - start
             if port:
@@ -427,6 +432,8 @@ def main():
                 except:
                     time.sleep(1)
                     pass
+            else:
+                time.sleep(1)
         else:
             elapsed = datetime.datetime.now() - start
             if port:
