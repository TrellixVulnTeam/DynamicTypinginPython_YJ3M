commit 8f5cd049d677e56648da3a6fc1c790a30d4a90f5
Author: Ganesh Nalawade <ganesh634@gmail.com>
Date:   Tue Jan 29 12:00:39 2019 +0530

    Allow check_mode with supports_generate_diff capability in cli_config (#51384)
    
    * If network cliconf support `supports_generate_diff` in
      that case diff between running and cnadidate config
      is generated within Ansible and if check_mode is enabled
      in that case return only diff without actually invoking
      edit_config()

diff --git a/lib/ansible/modules/network/cli/cli_config.py b/lib/ansible/modules/network/cli/cli_config.py
index 0166049f58..72cdf25834 100644
--- a/lib/ansible/modules/network/cli/cli_config.py
+++ b/lib/ansible/modules/network/cli/cli_config.py
@@ -286,7 +286,8 @@ def run(module, device_operations, connection, candidate, running, rollback_id):
 
             kwargs = {'candidate': candidate, 'commit': commit, 'replace': replace,
                       'comment': commit_comment}
-            connection.edit_config(**kwargs)
+            if commit:
+                connection.edit_config(**kwargs)
             result['changed'] = True
 
         if banner_diff:
@@ -295,7 +296,8 @@ def run(module, device_operations, connection, candidate, running, rollback_id):
             kwargs = {'candidate': candidate, 'commit': commit}
             if multiline_delimiter:
                 kwargs.update({'multiline_delimiter': multiline_delimiter})
-            connection.edit_banner(**kwargs)
+            if commit:
+                connection.edit_banner(**kwargs)
             result['changed'] = True
 
     if module._diff:
