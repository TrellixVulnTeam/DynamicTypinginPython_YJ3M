commit 467914e3c339fa5cce2a9442875a0999a4da2555
Author: Dustin C. Hatch <admiralnemo@gmail.com>
Date:   Tue Feb 25 20:08:57 2014 -0600

    filesystem: Ignore blkid cache
    
    Sometimes, `blkid` will incorrectly return no information about a block
    device, even if it exists and has a valid filesystem. This causes the
    *filesystem* module to fail if *force=no*. Instructing `blkid` to use
    `/dev/null` as a cache file will force it to rescan the block device on
    each run, making results more consistent.
    
    Signed-off-by: Dustin C. Hatch <admiralnemo@gmail.com>

diff --git a/library/system/filesystem b/library/system/filesystem
index 698c71d453..46e798f6e8 100644
--- a/library/system/filesystem
+++ b/library/system/filesystem
@@ -79,7 +79,7 @@ def main():
 
     cmd = module.get_bin_path('blkid', required=True)
 
-    rc,raw_fs,err = module.run_command("%s -o value -s TYPE %s" % (cmd, dev))
+    rc,raw_fs,err = module.run_command("%s -c /dev/null -o value -s TYPE %s" % (cmd, dev))
     fs = raw_fs.strip()
 
 
