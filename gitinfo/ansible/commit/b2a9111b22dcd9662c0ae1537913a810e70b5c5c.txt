commit b2a9111b22dcd9662c0ae1537913a810e70b5c5c
Author: Brian Coca <bcoca@ansible.com>
Date:   Wed Nov 11 13:34:19 2015 -0800

    reversed the logic on new setting to control - replacment in groups as
    it was wrong
    fixes #13122

diff --git a/contrib/inventory/ec2.py b/contrib/inventory/ec2.py
index b8b1d43dea..0208ed1fde 100755
--- a/contrib/inventory/ec2.py
+++ b/contrib/inventory/ec2.py
@@ -1294,7 +1294,7 @@ class Ec2Inventory(object):
     def to_safe(self, word):
         ''' Converts 'bad' characters in a string to underscores so they can be used as Ansible groups '''
         regex = "[^A-Za-z0-9\_"
-        if self.replace_dash_in_groups:
+        if not self.replace_dash_in_groups:
             regex += "\-"
         return re.sub(regex + "]", "_", word)
 
