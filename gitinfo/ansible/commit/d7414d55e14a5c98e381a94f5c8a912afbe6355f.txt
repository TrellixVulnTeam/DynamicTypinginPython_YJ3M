commit d7414d55e14a5c98e381a94f5c8a912afbe6355f
Author: Ricardo Leonardo <raleonardo@gmail.com>
Date:   Sun Dec 15 04:13:49 2019 +0100

    fixes bug: visible_name was not updated when not set in existing hostâ€¦ (#64095)
    
    * fixes bug: visible_name was not updated when not set in existing host in zabbix
    
    * Update changelogs/fragments/fix_zabbix_host_visible_name.yml
    
    Co-Authored-By: Dusan Matejka <D3DeFi@users.noreply.github.com>
    
    * Update lib/ansible/modules/monitoring/zabbix/zabbix_host.py
    
    Co-Authored-By: Dusan Matejka <D3DeFi@users.noreply.github.com>

diff --git a/changelogs/fragments/fix_zabbix_host_visible_name.yml b/changelogs/fragments/fix_zabbix_host_visible_name.yml
new file mode 100644
index 0000000000..444f8b7d1f
--- /dev/null
+++ b/changelogs/fragments/fix_zabbix_host_visible_name.yml
@@ -0,0 +1,2 @@
+bugfixes:
+    - zabbix_host - was not possible to update a host where visible_name was not set in zabbix
diff --git a/lib/ansible/modules/monitoring/zabbix/zabbix_host.py b/lib/ansible/modules/monitoring/zabbix/zabbix_host.py
index 4bf667af1b..572dd15d5c 100644
--- a/lib/ansible/modules/monitoring/zabbix/zabbix_host.py
+++ b/lib/ansible/modules/monitoring/zabbix/zabbix_host.py
@@ -533,7 +533,7 @@ class Host(object):
 
         # Check whether the visible_name has changed; Zabbix defaults to the technical hostname if not set.
         if visible_name:
-            if host['name'] != visible_name and host['name'] != host_name:
+            if host['name'] != visible_name:
                 return True
 
         # Only compare description if it is given as a module parameter
