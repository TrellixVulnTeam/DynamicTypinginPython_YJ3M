commit aa1e491244ebbf772fa6ef9112fab8d92171430c
Author: Will Thames <will@thames.id.au>
Date:   Sat Mar 3 07:33:04 2018 +1000

    [cloud aws_s3] Enforce required parameters for the various aws_s3 modes (#36767)
    
    [cloud aws_s3] Most modes require `object` parameter, and this is easy to
    get wrong (e.g. through confusion with the `dest` parameter). As
    it's as easy to enforce, let's do that.

diff --git a/lib/ansible/modules/cloud/amazon/aws_s3.py b/lib/ansible/modules/cloud/amazon/aws_s3.py
index 28e9261fc9..ac570d718d 100644
--- a/lib/ansible/modules/cloud/amazon/aws_s3.py
+++ b/lib/ansible/modules/cloud/amazon/aws_s3.py
@@ -636,7 +636,10 @@ def main():
     module = AnsibleModule(
         argument_spec=argument_spec,
         supports_check_mode=True,
-        required_if=[('mode', 'put', ('src',))],
+        required_if=[['mode', 'put', ['src', 'object']],
+                     ['mode', 'get', ['dest', 'object']],
+                     ['mode', 'getstr', ['object']],
+                     ['mode', 'geturl', ['object']]],
     )
 
     if module._name == 's3':
