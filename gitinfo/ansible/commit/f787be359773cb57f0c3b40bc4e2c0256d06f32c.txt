commit f787be359773cb57f0c3b40bc4e2c0256d06f32c
Author: Reid Wahl <nrwahl@protonmail.com>
Date:   Sat Aug 26 18:47:58 2017 -0500

    Fixes #22335: Adds filename extension to tempfile for Vault

diff --git a/lib/ansible/parsing/vault/__init__.py b/lib/ansible/parsing/vault/__init__.py
index 05f50bf1ed..e02587e63d 100644
--- a/lib/ansible/parsing/vault/__init__.py
+++ b/lib/ansible/parsing/vault/__init__.py
@@ -662,7 +662,8 @@ class VaultEditor:
                           existing_data=None, force_save=False, vault_id=None):
 
         # Create a tempfile
-        fd, tmp_path = tempfile.mkstemp()
+        root, ext = os.path.splitext(os.path.realpath(filename))
+        fd, tmp_path = tempfile.mkstemp(suffix=ext)
         os.close(fd)
 
         try:
