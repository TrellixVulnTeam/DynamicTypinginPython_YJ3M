commit c193604f602e0cf4c44a7c02003f519fb35ddb15
Author: Michael DeHaan <michael.dehaan@gmail.com>
Date:   Wed Mar 12 17:04:19 2014 -0400

    Some more run_command updates.

diff --git a/library/packaging/portinstall b/library/packaging/portinstall
index 4bef8035be..711a853e34 100644
--- a/library/packaging/portinstall
+++ b/library/packaging/portinstall
@@ -71,7 +71,7 @@ def query_package(module, name):
     if pkg_info_path:
         pkgng = False
         pkg_glob_path = module.get_bin_path('pkg_glob', True)
-        rc, out, err = module.run_command("%s -e `pkg_glob %s`" % (pkg_info_path, name))
+        rc, out, err = module.run_command("%s -e `pkg_glob %s`" % (pkg_info_path, pipes.quote(name), use_unsafe_shell=True)
     else:
         pkgng = True
         pkg_info_path = module.get_bin_path('pkg', True)
@@ -128,11 +128,11 @@ def remove_packages(module, packages):
         if not query_package(module, package):
             continue
 
-        rc, out, err = module.run_command("%s `%s %s`" % (pkg_delete_path, pkg_glob_path, package))
+        rc, out, err = module.run_command("%s `%s %s`" % (pkg_delete_path, pkg_glob_path, pipes.quote(package)), use_unsafe_shell=True)
 
         if query_package(module, package):
             name_without_digits = re.sub('[0-9]', '', package)
-            rc, out, err = module.run_command("%s `%s %s`" % (pkg_delete_path, pkg_glob_path, name_without_digits))
+            rc, out, err = module.run_command("%s `%s %s`" % (pkg_delete_path, pkg_glob_path, pipes.quote(lame_without_digits)),use_unsafe_shell=True)
             if query_package(module, package):
                 module.fail_json(msg="failed to remove %s: %s" % (package, out))
 
diff --git a/library/source_control/bzr b/library/source_control/bzr
index 5217e46990..996150a39a 100644
--- a/library/source_control/bzr
+++ b/library/source_control/bzr
@@ -76,8 +76,7 @@ class Bzr(object):
         self.bzr_path = bzr_path
 
     def _command(self, args_list, cwd=None, **kwargs):
-        (rc, out, err) = self.module.run_command(
-            [self.bzr_path] + args_list, cwd=cwd, **kwargs)
+        (rc, out, err) = self.module.run_command([self.bzr_path] + args_list, cwd=cwd, **kwargs)
         return (rc, out, err)
 
     def get_version(self):
