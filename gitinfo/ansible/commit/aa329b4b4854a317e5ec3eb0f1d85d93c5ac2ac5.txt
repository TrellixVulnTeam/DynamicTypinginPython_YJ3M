commit aa329b4b4854a317e5ec3eb0f1d85d93c5ac2ac5
Author: Jim Dalton <jim@ere.net>
Date:   Thu Dec 12 13:09:40 2013 -0800

    Make sure initial_state is initialized

diff --git a/library/cloud/ec2_elb b/library/cloud/ec2_elb
index aab6760d04..3132d9e951 100644
--- a/library/cloud/ec2_elb
+++ b/library/cloud/ec2_elb
@@ -138,8 +138,7 @@ class ElbManager:
         to report it out-of-service"""
 
         for lb in self.lbs:
-            if wait:
-                initial_state = self._get_instance_health(lb)
+            initial_state = self._get_instance_health(lb) if wait else None
 
             if initial_state and initial_state.state == 'InService':
                 lb.deregister_instances([self.instance_id])
