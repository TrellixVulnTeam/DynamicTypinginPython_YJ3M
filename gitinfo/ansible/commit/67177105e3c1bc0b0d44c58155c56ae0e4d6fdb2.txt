commit 67177105e3c1bc0b0d44c58155c56ae0e4d6fdb2
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Fri Sep 2 08:27:01 2016 -0700

    We now have an exception return value.  Make use of it instead of putting the traceback into msg (#17365)

diff --git a/lib/ansible/module_utils/basic.py b/lib/ansible/module_utils/basic.py
index c940d6459a..3bb4b4e91b 100644
--- a/lib/ansible/module_utils/basic.py
+++ b/lib/ansible/module_utils/basic.py
@@ -2237,9 +2237,10 @@ class AnsibleModule(object):
             rc = cmd.returncode
         except (OSError, IOError):
             e = get_exception()
-            self.fail_json(rc=e.errno, msg=str(e), cmd=clean_args)
-        except:
-            self.fail_json(rc=257, msg=traceback.format_exc(), cmd=clean_args)
+            self.fail_json(rc=e.errno, msg=to_native(e), cmd=clean_args)
+        except Exception:
+            e = get_exception()
+            self.fail_json(rc=257, msg=to_native(e), exception=traceback.format_exc(), cmd=clean_args)
 
         # Restore env settings
         for key, val in old_env_vals.items():
