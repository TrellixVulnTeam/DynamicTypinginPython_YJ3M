commit 5a3032a9504f6868c06c0ae9a57580c54a3ab94d
Author: James Tanner <tanner.jc@gmail.com>
Date:   Tue Nov 12 18:17:20 2013 -0500

    Fixes #4884 Do not prematurely exit from file module if src not defined

diff --git a/library/files/file b/library/files/file
index 13a675c20c..01772a7e71 100644
--- a/library/files/file
+++ b/library/files/file
@@ -186,12 +186,8 @@ def main():
             prev_state = 'file'
 
     if prev_state is not None and state is None:
-        if not params.get('src', None):
-            # idempotent exit if state is not specified
-            module.exit_json(path=path, changed=False)
-        else:
-            # src is defined, need to process other operations
-            state = prev_state
+        # set state to current type of file
+        state = prev_state
     elif state is None:
         # set default state to file
         state = 'file'
