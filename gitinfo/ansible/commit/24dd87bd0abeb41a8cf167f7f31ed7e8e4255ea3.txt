commit 24dd87bd0abeb41a8cf167f7f31ed7e8e4255ea3
Author: Dag Wieers <dag@wieers.com>
Date:   Thu Sep 20 19:14:11 2018 +0200

    Fix incorrect use of subprocess.CalledProcessError (#45890)

diff --git a/test/sanity/code-smell/docs-build.py b/test/sanity/code-smell/docs-build.py
index 362c74ad44..f750572d6d 100755
--- a/test/sanity/code-smell/docs-build.py
+++ b/test/sanity/code-smell/docs-build.py
@@ -14,7 +14,10 @@ def main():
     stdout, stderr = sphinx.communicate()
 
     if sphinx.returncode != 0:
-        raise subprocess.CalledProcessError(sphinx.returncode, cmd, output=stdout, stderr=stderr)
+        print("Command '%s' failed with status code: %d" % (' '.join(cmd), sphinx.returncode))
+        print(stdout)
+        print(stderr)
+        return
 
     with open('docs/docsite/rst_warnings', 'r') as warnings_fd:
         output = warnings_fd.read().strip()
