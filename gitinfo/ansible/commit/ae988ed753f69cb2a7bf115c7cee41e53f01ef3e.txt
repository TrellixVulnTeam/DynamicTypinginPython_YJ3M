commit ae988ed753f69cb2a7bf115c7cee41e53f01ef3e
Author: Brian Coca <bcoca@ansible.com>
Date:   Fri Dec 11 15:35:57 2015 -0500

    avoid set to unique hosts to preserver order
    
    swiched to using a list comp and set to still unique but keep expected order
    fixes #13522

diff --git a/lib/ansible/inventory/__init__.py b/lib/ansible/inventory/__init__.py
index 3c1331e706..95e193f381 100644
--- a/lib/ansible/inventory/__init__.py
+++ b/lib/ansible/inventory/__init__.py
@@ -194,7 +194,8 @@ class Inventory(object):
                 if self._restriction is not None:
                     hosts = [ h for h in hosts if h in self._restriction ]
 
-            HOSTS_PATTERNS_CACHE[pattern_hash] = list(set(hosts))
+            seen = set()
+            HOSTS_PATTERNS_CACHE[pattern_hash] = [x for x in hosts if x not in seen and not seen.add(x)]
 
         return HOSTS_PATTERNS_CACHE[pattern_hash][:]
 
