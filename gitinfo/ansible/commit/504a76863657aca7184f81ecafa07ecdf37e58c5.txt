commit 504a76863657aca7184f81ecafa07ecdf37e58c5
Author: Lo√Øc Blot <nerzhul@users.noreply.github.com>
Date:   Thu Apr 20 12:11:04 2017 +0200

    Show UUID instead of name when using UUID to select snapshot (#23787)

diff --git a/lib/ansible/modules/cloud/vmware/vmware_guest_snapshot.py b/lib/ansible/modules/cloud/vmware/vmware_guest_snapshot.py
index 2834a43b02..451d8653aa 100644
--- a/lib/ansible/modules/cloud/vmware/vmware_guest_snapshot.py
+++ b/lib/ansible/modules/cloud/vmware/vmware_guest_snapshot.py
@@ -298,7 +298,11 @@ def main():
                    uuid=module.params['uuid'])
 
     if not vm:
-        module.fail_json(msg="Unable to manage snapshots for non-existing VM %(name)s" % module.params)
+        # If UUID is set, getvm select UUID, show error message accordingly.
+        if module.params['uuid'] is not None:
+            module.fail_json(msg="Unable to manage snapshots for non-existing VM %(uuid)s" % module.params)
+        else:
+            module.fail_json(msg="Unable to manage snapshots for non-existing VM %(name)s" % module.params)
 
     if not module.params['snapshot_name'] and module.params['state'] != 'remove_all':
         module.fail_json(msg="snapshot_name param is required when state is '%(state)s'" % module.params)
