commit a0fc8bb0bd834e29a652ed7face4ca360dc6cc56
Author: Matt Martz <matt@sivel.net>
Date:   Fri May 8 11:34:19 2015 -0500

    Testing additions and fixes
    
    * Fix import pathing for units.mock
    * Add some additional requirements
    * Use compileall to test compatiblity with different python versions

diff --git a/.travis.yml b/.travis.yml
index 6e18e06050..e53b870597 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -3,6 +3,12 @@ language: python
 env:
   - TOXENV=py26
   - TOXENV=py27
+addons:
+  apt:
+    sources:
+      - deadsnakes
+    packages:
+      - python2.4
 install:
   - pip install tox
 script:
diff --git a/setup.py b/setup.py
index 3752741406..1f73836cbd 100644
--- a/setup.py
+++ b/setup.py
@@ -21,7 +21,7 @@ setup(name='ansible',
       author_email='michael@ansible.com',
       url='http://ansible.com/',
       license='GPLv3',
-      install_requires=['paramiko', 'jinja2', "PyYAML", 'setuptools', 'pycrypto >= 2.6'],
+      install_requires=['paramiko', 'jinja2', "PyYAML", 'setuptools', 'pycrypto >= 2.6', 'six'],
       package_dir={ '': 'lib' },
       packages=find_packages('lib'),
       package_data={
diff --git a/test-requirements.txt b/test-requirements.txt
index abb61ed1e9..fe65457f37 100644
--- a/test-requirements.txt
+++ b/test-requirements.txt
@@ -7,3 +7,4 @@ mock
 passlib
 coverage
 coveralls
+unittest2
diff --git a/test/units/executor/test_play_iterator.py b/test/units/executor/test_play_iterator.py
index 47c0352b25..2fa32c7119 100644
--- a/test/units/executor/test_play_iterator.py
+++ b/test/units/executor/test_play_iterator.py
@@ -26,7 +26,7 @@ from ansible.errors import AnsibleError, AnsibleParserError
 from ansible.executor.play_iterator import PlayIterator
 from ansible.playbook import Playbook
 
-from test.mock.loader import DictDataLoader
+from units.mock.loader import DictDataLoader
 
 class TestPlayIterator(unittest.TestCase):
 
diff --git a/test/units/playbook/test_play.py b/test/units/playbook/test_play.py
index 22486f4129..637b6dbbe1 100644
--- a/test/units/playbook/test_play.py
+++ b/test/units/playbook/test_play.py
@@ -27,7 +27,7 @@ from ansible.playbook.play import Play
 from ansible.playbook.role import Role
 from ansible.playbook.task import Task
 
-from test.mock.loader import DictDataLoader
+from units.mock.loader import DictDataLoader
 
 class TestPlay(unittest.TestCase):
 
diff --git a/test/units/playbook/test_playbook.py b/test/units/playbook/test_playbook.py
index dfb52dc7b1..97307c4b27 100644
--- a/test/units/playbook/test_playbook.py
+++ b/test/units/playbook/test_playbook.py
@@ -26,7 +26,7 @@ from ansible.errors import AnsibleError, AnsibleParserError
 from ansible.playbook import Playbook
 from ansible.vars import VariableManager
 
-from test.mock.loader import DictDataLoader
+from units.mock.loader import DictDataLoader
 
 class TestPlaybook(unittest.TestCase):
 
diff --git a/test/units/playbook/test_role.py b/test/units/playbook/test_role.py
index d0f3708898..7aab5133da 100644
--- a/test/units/playbook/test_role.py
+++ b/test/units/playbook/test_role.py
@@ -28,7 +28,7 @@ from ansible.playbook.role import Role
 from ansible.playbook.role.include import RoleInclude
 from ansible.playbook.task import Task
 
-from test.mock.loader import DictDataLoader
+from units.mock.loader import DictDataLoader
 
 class TestRole(unittest.TestCase):
 
diff --git a/test/units/vars/test_variable_manager.py b/test/units/vars/test_variable_manager.py
index f8d815eb6f..173ba1370d 100644
--- a/test/units/vars/test_variable_manager.py
+++ b/test/units/vars/test_variable_manager.py
@@ -24,7 +24,7 @@ from ansible.compat.tests.mock import patch, MagicMock
 
 from ansible.vars import VariableManager
 
-from test.mock.loader import DictDataLoader
+from units.mock.loader import DictDataLoader
 
 class TestVariableManager(unittest.TestCase):
 
diff --git a/tox.ini b/tox.ini
index 5440a5825c..26d80ff7d3 100644
--- a/tox.ini
+++ b/tox.ini
@@ -1,23 +1,31 @@
 [tox]
-envlist = {py26,py27}-v{1}
+envlist = {py26,py27}
 
 [testenv]
 commands = make tests
 deps = -r{toxinidir}/test-requirements.txt
 whitelist_externals = make
 
-[testenv:py26-v1]
-
-[testenv:py27-v1]
-
-[testenv:py26-v2]
-deps = -r{toxinidir}/v2/test-requirements.txt
-commands = make newtests
+[testenv:py26]
+commands =
+    python -m compileall -fq -x 'test|samples' .
+    python2.4 -m compileall -fq -x 'module_utils/(a10|rax|openstack|ec2|gce).py' lib/ansible/module_utils
+    make tests
+deps = -r{toxinidir}/test-requirements.txt
+whitelist_externals =
+    make
+    python2.4
 
-[testenv:py27-v2]
-deps = -r{toxinidir}/v2/test-requirements.txt
-commands = make newtests
+[testenv:py27]
+commands =
+    python -m compileall -fq -x 'test|samples' .
+    make tests
+deps = -r{toxinidir}/test-requirements.txt
+whitelist_externals = make
 
-[testenv:py34-v2]
-deps = -r{toxinidir}/v2/test-requirements.txt
-commands = make newtests
+[testenv:py34]
+commands =
+    python -m compileall -fq -x 'lib/ansible/module_utils' lib
+    make tests
+deps = -r-r{toxinidir}/test-requirements.txt
+whitelist_externals = make
