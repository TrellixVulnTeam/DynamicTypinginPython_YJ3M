commit 8a1aee53bc50eff5e0bef615c000415b4cc55597
Author: Gonçalo Luiz <goncalo.luiz@gmail.com>
Date:   Wed May 4 06:29:15 2016 +0100

    fixed not resolving latest to snapshot for MD5 check when the file ex…

diff --git a/lib/ansible/modules/extras/packaging/language/maven_artifact.py b/lib/ansible/modules/extras/packaging/language/maven_artifact.py
index 77edd449af..c71c98d4ac 100644
--- a/lib/ansible/modules/extras/packaging/language/maven_artifact.py
+++ b/lib/ansible/modules/extras/packaging/language/maven_artifact.py
@@ -195,17 +195,17 @@ class MavenDownloader:
             return v[0]
 
     def find_uri_for_artifact(self, artifact):
+        if artifact.version == "latest":
+            artifact.version = self._find_latest_version_available(artifact)
+
         if artifact.is_snapshot():
             path = "/%s/maven-metadata.xml" % (artifact.path())
             xml = self._request(self.base + path, "Failed to download maven-metadata.xml", lambda r: etree.parse(r))
             timestamp = xml.xpath("/metadata/versioning/snapshot/timestamp/text()")[0]
             buildNumber = xml.xpath("/metadata/versioning/snapshot/buildNumber/text()")[0]
             return self._uri_for_artifact(artifact, artifact.version.replace("SNAPSHOT", timestamp + "-" + buildNumber))
-        else:
-            if artifact.version == "latest":
-                artifact.version = self._find_latest_version_available(artifact)
 
-            return self._uri_for_artifact(artifact, artifact.version)
+        return self._uri_for_artifact(artifact, artifact.version)
 
     def _uri_for_artifact(self, artifact, version=None):
         if artifact.is_snapshot() and not version:
