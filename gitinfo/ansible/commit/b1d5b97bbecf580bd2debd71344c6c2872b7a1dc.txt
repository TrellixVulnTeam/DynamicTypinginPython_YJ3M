commit b1d5b97bbecf580bd2debd71344c6c2872b7a1dc
Author: Alex Tomkins <tomkins@darkzone.net>
Date:   Sun Apr 21 15:28:56 2013 +0100

    sysctl check fails if a custom sysctl_file is given.

diff --git a/library/sysctl b/library/sysctl
index fc8516cc2b..c7f3af7128 100644
--- a/library/sysctl
+++ b/library/sysctl
@@ -89,7 +89,7 @@ def reload_sysctl(**sysctl_args):
         return 0, ''
 
     # do it
-    cmd = [ '/sbin/sysctl', '-p' ]
+    cmd = [ '/sbin/sysctl', '-p', sysctl_args['sysctl_file']]
     call = subprocess.Popen(cmd, shell=False, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
     out, err = call.communicate()
     if call.returncode == 0:
