commit 525c0469d2a90f128a9093fa10bf2388e8e66813
Author: nitzmahone <mdavis@ansible.com>
Date:   Thu Aug 11 16:58:08 2016 -0700

    tweak hacking/env-setup to work under ash (#17054)

diff --git a/hacking/env-setup b/hacking/env-setup
index c2872dcc18..926508b1ea 100644
--- a/hacking/env-setup
+++ b/hacking/env-setup
@@ -16,9 +16,9 @@ if [ -n "$BASH_SOURCE" ] ; then
     HACKING_DIR=$(dirname "$BASH_SOURCE")
 elif [ $(basename -- "$0") = "env-setup" ]; then
     HACKING_DIR=$(dirname "$0")
-# Works with ksh93 but not pdksh
+# Works with ksh93 but not pdksh, have to eval to keep ash happy...
 elif [ -n "$KSH_VERSION" ] && echo $KSH_VERSION | grep -qv '^@(#)PD KSH'; then
-    HACKING_DIR=$(dirname "${.sh.file}")
+    eval "HACKING_DIR=\$(dirname \"\${.sh.file}\")"
 else
     HACKING_DIR="$PWD/hacking"
 fi
