commit bd24c4ce9dcf5119ec64b57386ffef193a09c85c
Author: Ricardo Carrillo Cruz <ricardo.carrillo.cruz@gmail.com>
Date:   Mon Jul 17 14:28:03 2017 +0200

    Use eos_config for eos_user tests teardown (#26893)
    
    Purge is not idempotent, so let's fix it with other change.
    For teardown, it's better to use eos_config/eos_command.

diff --git a/test/integration/targets/eos_user/tests/cli/basic.yaml b/test/integration/targets/eos_user/tests/cli/basic.yaml
index a0d091deee..54399f6e4c 100644
--- a/test/integration/targets/eos_user/tests/cli/basic.yaml
+++ b/test/integration/targets/eos_user/tests/cli/basic.yaml
@@ -31,13 +31,9 @@
       - 'result.commands == ["username test1 role network-operator", "username test2 role network-operator"]'
 
 - name: tearDown
-  eos_user:
-    purge: yes
-    authorize: yes
+  eos_config:
+    lines:
+      - no username netend
+      - no username test1
+      - no username test2
     provider: "{{ cli }}"
-  register: result
-
-- assert:
-    that:
-      - 'result.changed == true'
-      - 'result.commands == ["no username netend", "no username test1", "no username test2"]'
