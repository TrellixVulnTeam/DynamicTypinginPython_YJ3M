commit a928db1420293f70a99f738d28313adf215e2d16
Author: Matt Clay <matt@mystile.com>
Date:   Wed Feb 12 10:15:31 2020 -0800

    Split out selinux setup in subversion test.
    
    This avoids failures when the sefcontext module is not present.

diff --git a/test/integration/targets/subversion/tasks/setup.yml b/test/integration/targets/subversion/tasks/setup.yml
index 1ec5b5fc24..63d33d68b0 100644
--- a/test/integration/targets/subversion/tasks/setup.yml
+++ b/test/integration/targets/subversion/tasks/setup.yml
@@ -24,18 +24,8 @@
     path: '{{ subversion_server_dir }}'
     state: directory
 
-- name: set SELinux security context for SVN folder
-  sefcontext:
-    target: '{{ subversion_server_dir }}(/.*)?'
-    setype: '{{ item }}'
-    state: present
-  when: ansible_selinux.status == "enabled"
-  with_items:
-  - httpd_sys_content_t
-  - httpd_sys_rw_content_t
-
-- name: apply new SELinux context to filesystem
-  command: restorecon -irv {{ subversion_server_dir | quote }}
+- name: setup selinux when enabled
+  include_tasks: setup_selinux.yml
   when: ansible_selinux.status == "enabled"
 
 - name: template out configuration file
diff --git a/test/integration/targets/subversion/tasks/setup_selinux.yml b/test/integration/targets/subversion/tasks/setup_selinux.yml
new file mode 100644
index 0000000000..a9ffa712f9
--- /dev/null
+++ b/test/integration/targets/subversion/tasks/setup_selinux.yml
@@ -0,0 +1,11 @@
+- name: set SELinux security context for SVN folder
+  sefcontext:
+    target: '{{ subversion_server_dir }}(/.*)?'
+    setype: '{{ item }}'
+    state: present
+  with_items:
+  - httpd_sys_content_t
+  - httpd_sys_rw_content_t
+
+- name: apply new SELinux context to filesystem
+  command: restorecon -irv {{ subversion_server_dir | quote }}
