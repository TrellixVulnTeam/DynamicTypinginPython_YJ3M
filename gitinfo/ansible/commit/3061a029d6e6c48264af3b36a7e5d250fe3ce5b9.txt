commit 3061a029d6e6c48264af3b36a7e5d250fe3ce5b9
Author: Michael Gr√∂ning <mgroe@localhost.localdomain>
Date:   Fri Nov 7 17:16:48 2014 +0100

    fix bugs

diff --git a/lib/ansible/modules/extras/monitoring/nagios.py b/lib/ansible/modules/extras/monitoring/nagios.py
index f00999c74f..5fd51d1712 100644
--- a/lib/ansible/modules/extras/monitoring/nagios.py
+++ b/lib/ansible/modules/extras/monitoring/nagios.py
@@ -227,7 +227,7 @@ def main():
     # 'minutes' and 'service' manually.
 
     ##################################################################
-    if action not in ['command', 'silence_nagios', 'unsilence_nagios', 'servicegroup_downtime']:
+    if action not in ['command', 'silence_nagios', 'unsilence_nagios']:
         if not host:
             module.fail_json(msg='no host specified for action requiring one')
     ######################################################################
@@ -300,7 +300,7 @@ class Nagios(object):
         self.author = kwargs['author']
         self.comment = kwargs['comment']
         self.host = kwargs['host']
-        self.service_group = kwargs['servicegroup']
+        self.servicegroup = kwargs['servicegroup']
         self.minutes = int(kwargs['minutes'])
         self.cmdfile = kwargs['cmdfile']
         self.command = kwargs['command']
@@ -893,11 +893,11 @@ class Nagios(object):
                                            services=self.services,
                                            minutes=self.minutes)
         elif self.action == "servicegroup_host_downtime":
-            if self.services  == 'servicegroup':
-                self.schedule_servicegroup_host_downtime(self, self.servicegroup, minutes=30)
+            if self.servicegroup:
+                self.schedule_servicegroup_host_downtime(servicegroup = self.servicegroup, minutes = self.minutes)
         elif self.action == "servicegroup_service_downtime":
-            if self.services  == 'servicegroup':
-                self.schedule_servicegroup_host_downtime(self, self.servicegroup, minutes=30)
+            if self.servicegroup:
+                self.schedule_servicegroup_svc_downtime(servicegroup = self.servicegroup, minutes = self.minutes)
 
         # toggle the host AND service alerts
         elif self.action == 'silence':
