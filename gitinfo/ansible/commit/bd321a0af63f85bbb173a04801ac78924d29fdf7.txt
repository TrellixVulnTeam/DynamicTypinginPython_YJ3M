commit bd321a0af63f85bbb173a04801ac78924d29fdf7
Author: Brian Coca <bcoca@ansible.com>
Date:   Fri Oct 27 12:16:21 2017 -0400

    adjust nohome param when using luser
    
    fixes #32199

diff --git a/lib/ansible/modules/system/user.py b/lib/ansible/modules/system/user.py
index 96d45173d7..0fc11ea1de 100644
--- a/lib/ansible/modules/system/user.py
+++ b/lib/ansible/modules/system/user.py
@@ -396,7 +396,10 @@ class User(object):
             cmd.append(self.password)
 
         if self.create_home:
-            cmd.append('-m')
+            if self.local:
+                cmd.append('-M')
+            else:
+                cmd.append('-m')
 
             if self.skeleton is not None:
                 cmd.append('-k')
