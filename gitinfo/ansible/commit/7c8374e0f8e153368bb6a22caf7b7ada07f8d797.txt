commit 7c8374e0f8e153368bb6a22caf7b7ada07f8d797
Author: Abhijit Menon-Sen <ams@2ndQuadrant.com>
Date:   Wed Jan 6 20:44:19 2016 +0530

    Strip string terms before templating
    
    The earlier code did call terms.strip(), but ignored the return value
    instead of passing that in to templar.template(). Clearly an oversight.

diff --git a/lib/ansible/utils/listify.py b/lib/ansible/utils/listify.py
index 7fe83a8fa0..d834737ab5 100644
--- a/lib/ansible/utils/listify.py
+++ b/lib/ansible/utils/listify.py
@@ -31,9 +31,8 @@ __all__ = ['listify_lookup_plugin_terms']
 def listify_lookup_plugin_terms(terms, templar, loader, fail_on_undefined=False, convert_bare=True):
 
     if isinstance(terms, string_types):
-        stripped = terms.strip()
         # TODO: warn/deprecation on bare vars in with_ so we can eventually remove fail on undefined override
-        terms = templar.template(terms, convert_bare=convert_bare, fail_on_undefined=fail_on_undefined)
+        terms = templar.template(terms.strip(), convert_bare=convert_bare, fail_on_undefined=fail_on_undefined)
     else:
         terms = templar.template(terms, fail_on_undefined=fail_on_undefined)
 
