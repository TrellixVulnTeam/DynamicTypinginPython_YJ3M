commit fca27c29f4f6bf8d89df8980dccc43b151262208
Author: James Cammarata <jimi@sngx.net>
Date:   Mon Aug 31 16:45:03 2015 -0400

    Properly fail if slurp fails during fetch

diff --git a/lib/ansible/plugins/action/fetch.py b/lib/ansible/plugins/action/fetch.py
index 297126c413..71bf68defd 100644
--- a/lib/ansible/plugins/action/fetch.py
+++ b/lib/ansible/plugins/action/fetch.py
@@ -61,7 +61,9 @@ class ActionModule(ActionBase):
         remote_data = None
         if remote_checksum in ('1', '2') or self._play_context.become:
             slurpres = self._execute_module(module_name='slurp', module_args=dict(src=source), task_vars=task_vars, tmp=tmp)
-            if not slurpres.get('failed', False):
+            if slurpres.get('failed'):
+                return slurpres
+            else:
                 if slurpres['encoding'] == 'base64':
                     remote_data = base64.b64decode(slurpres['content'])
                 if remote_data is not None:
@@ -72,9 +74,6 @@ class ActionModule(ActionBase):
                 remote_source = slurpres.get('source')
                 if remote_source and remote_source != source:
                     source = remote_source
-            else:
-                # FIXME: should raise an error here? the old code did nothing
-                pass
 
         # calculate the destination name
         if os.path.sep not in self._connection._shell.join_path('a', ''):
