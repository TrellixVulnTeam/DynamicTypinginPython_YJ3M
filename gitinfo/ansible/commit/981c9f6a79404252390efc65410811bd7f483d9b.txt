commit 981c9f6a79404252390efc65410811bd7f483d9b
Author: Trishna Guha <trishnaguha17@gmail.com>
Date:   Mon Jul 2 19:32:29 2018 +0530

    fix nxos_vxlan_vtep_vni issue (#42183)
    
    Signed-off-by: Trishna Guha <trishnaguha17@gmail.com>

diff --git a/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py b/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py
index 01fddf069d..6558106cfa 100644
--- a/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py
+++ b/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py
@@ -212,12 +212,13 @@ def state_present(module, existing, proposed, candidate):
         elif key == 'ingress-replication protocol' and value != existing_commands.get(key):
             evalue = existing_commands.get(key)
             dvalue = PARAM_TO_DEFAULT_KEYMAP.get('ingress_replication', 'default')
-            if value != dvalue:
-                if evalue != dvalue:
+            if evalue:
+                if value != dvalue:
+                    if evalue != dvalue:
+                        commands.append('no {0} {1}'.format(key, evalue))
+                    commands.append('{0} {1}'.format(key, value))
+                else:
                     commands.append('no {0} {1}'.format(key, evalue))
-                commands.append('{0} {1}'.format(key, value))
-            else:
-                commands.append('no {0} {1}'.format(key, evalue))
 
         elif value is True:
             commands.append(key)
