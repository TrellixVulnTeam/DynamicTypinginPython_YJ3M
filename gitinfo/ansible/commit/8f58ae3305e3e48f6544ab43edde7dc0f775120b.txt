commit 8f58ae3305e3e48f6544ab43edde7dc0f775120b
Author: Brian Coca <bcoca@ansible.com>
Date:   Mon May 26 08:52:57 2014 -0400

    changed exception handling for hashable test

diff --git a/lib/ansible/runner/filter_plugins/core.py b/lib/ansible/runner/filter_plugins/core.py
index 57dd9debeb..ca2e8b02d2 100644
--- a/lib/ansible/runner/filter_plugins/core.py
+++ b/lib/ansible/runner/filter_plugins/core.py
@@ -23,6 +23,7 @@ import types
 import pipes
 import glob
 import re
+import collections
 import operator as py_operator
 from ansible import errors
 from ansible.utils import md5s
@@ -140,38 +141,38 @@ def regex_replace(value='', pattern='', replacement='', ignorecase=False):
     return _re.sub(replacement, value)
 
 def unique(a):
-    try:
+    if isinstance(a,collections.Hashable):
         c = set(a)
-    except TypeError, e:
+    else:
         c = []
         c = filter(lambda x: x not in c, a)
     return c
 
 def intersect(a, b):
-    try:
+    if isinstance(a,collections.Hashable) and isinstance(b,collections.Hashable):
         c = set(a) & set(b)
-    except TypeError, e:
+    else:
         c = filter(lambda x: x in b, a)
     return c
 
 def difference(a, b):
-    try:
+    if isinstance(a,collections.Hashable) and isinstance(b,collections.Hashable):
         c = set(a) - set(b)
-    except TypeError, e:
+    else:
         c = filter(lambda x: x not in b, a)
     return c
 
 def symmetric_difference(a, b):
-    try:
+    if isinstance(a,collections.Hashable) and isinstance(b,collections.Hashable):
         c = set(a) ^ set(b)
-    except TypeError, e:
+    else:
         c = filter(lambda x: x not in intersect(a,b), union(a,b))
     return c
 
 def union(a, b):
-    try:
+    if isinstance(a,collections.Hashable) and isinstance(b,collections.Hashable):
         c = set(a) | set(b)
-    except TypeError, e:
+    else:
         c = a + b
     return c
 
