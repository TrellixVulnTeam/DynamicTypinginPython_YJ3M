commit 3f2b766d10ae1376047f30c6dad752dce73339f5
Author: Matt Clay <matt@mystile.com>
Date:   Thu Jul 11 23:46:20 2019 -0700

    Add future and metaclass boilerplate to test code.
    
    Continue to ignore:
    
    - test/integration/
    - test/legacy/
    - test/units/

diff --git a/test/runner/ansible-test b/test/runner/ansible-test
index 3bc73d6238..74dc229f16 100755
--- a/test/runner/ansible-test
+++ b/test/runner/ansible-test
@@ -1,6 +1,8 @@
 #!/usr/bin/env python
 # PYTHON_ARGCOMPLETE_OK
 """Legacy entry point for ansible-test. The preferred version is in the bin directory."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import lib.cli
 
diff --git a/test/runner/injector/python.py b/test/runner/injector/python.py
index b05eee9797..264a05ea45 100755
--- a/test/runner/injector/python.py
+++ b/test/runner/injector/python.py
@@ -1,5 +1,7 @@
 #!/usr/bin/env python
 """Provides an entry point for python scripts and python modules on the controller with the current python interpreter and optional code coverage collection."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import sys
diff --git a/test/runner/lib/__init__.py b/test/runner/lib/__init__.py
index c29c477f7a..35f044224c 100644
--- a/test/runner/lib/__init__.py
+++ b/test/runner/lib/__init__.py
@@ -1 +1,3 @@
 """Support code for Ansible testing infrastructure."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
diff --git a/test/runner/lib/ansible_util.py b/test/runner/lib/ansible_util.py
index b089ea4108..9d568cd0ec 100644
--- a/test/runner/lib/ansible_util.py
+++ b/test/runner/lib/ansible_util.py
@@ -1,6 +1,6 @@
 """Miscellaneous utility functions and classes specific to ansible cli tools."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import json
 import os
diff --git a/test/runner/lib/cache.py b/test/runner/lib/cache.py
index 20553caf29..45a1fbd3f3 100644
--- a/test/runner/lib/cache.py
+++ b/test/runner/lib/cache.py
@@ -1,6 +1,6 @@
 """Cache for commonly shared data that is intended to be immutable."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 
 class CommonCache(object):
diff --git a/test/runner/lib/changes.py b/test/runner/lib/changes.py
index 9a7f6b38dc..f1717d1e3f 100644
--- a/test/runner/lib/changes.py
+++ b/test/runner/lib/changes.py
@@ -1,6 +1,6 @@
 """Detect changes in Ansible code."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import re
 import os
diff --git a/test/runner/lib/classification.py b/test/runner/lib/classification.py
index cc3405be6a..8ff7d03333 100644
--- a/test/runner/lib/classification.py
+++ b/test/runner/lib/classification.py
@@ -1,6 +1,6 @@
 """Classify changes in Ansible code."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import collections
 import os
diff --git a/test/runner/lib/cli.py b/test/runner/lib/cli.py
index 9ce145d3aa..8e6dbf11f4 100644
--- a/test/runner/lib/cli.py
+++ b/test/runner/lib/cli.py
@@ -1,6 +1,6 @@
 """Test runner for all Ansible tests."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import errno
 import os
diff --git a/test/runner/lib/cloud/__init__.py b/test/runner/lib/cloud/__init__.py
index 8f21c715ce..a7575eaead 100644
--- a/test/runner/lib/cloud/__init__.py
+++ b/test/runner/lib/cloud/__init__.py
@@ -1,5 +1,6 @@
 """Plugin system for cloud providers and environments for use in integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import abc
 import atexit
diff --git a/test/runner/lib/cloud/acme.py b/test/runner/lib/cloud/acme.py
index 0a567a6e9a..0d200faa27 100644
--- a/test/runner/lib/cloud/acme.py
+++ b/test/runner/lib/cloud/acme.py
@@ -1,5 +1,6 @@
 """ACME plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import time
diff --git a/test/runner/lib/cloud/aws.py b/test/runner/lib/cloud/aws.py
index ff7fb9b688..948415bd90 100644
--- a/test/runner/lib/cloud/aws.py
+++ b/test/runner/lib/cloud/aws.py
@@ -1,5 +1,6 @@
 """AWS plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/cloud/azure.py b/test/runner/lib/cloud/azure.py
index efdad61ea2..b1930097e2 100644
--- a/test/runner/lib/cloud/azure.py
+++ b/test/runner/lib/cloud/azure.py
@@ -1,5 +1,6 @@
 """Azure plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/cloud/cloudscale.py b/test/runner/lib/cloud/cloudscale.py
index 0777a9ce56..60b3c9d3f4 100644
--- a/test/runner/lib/cloud/cloudscale.py
+++ b/test/runner/lib/cloud/cloudscale.py
@@ -4,7 +4,8 @@
 # GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)
 
 """Cloudscale plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 from os.path import isfile
 
diff --git a/test/runner/lib/cloud/cs.py b/test/runner/lib/cloud/cs.py
index d2e9654edf..5805575c8d 100644
--- a/test/runner/lib/cloud/cs.py
+++ b/test/runner/lib/cloud/cs.py
@@ -1,5 +1,6 @@
 """CloudStack plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import json
 import os
diff --git a/test/runner/lib/cloud/foreman.py b/test/runner/lib/cloud/foreman.py
index 14b99c275a..b421c4fd07 100644
--- a/test/runner/lib/cloud/foreman.py
+++ b/test/runner/lib/cloud/foreman.py
@@ -1,6 +1,6 @@
 """Foreman plugin for integration tests."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/cloud/gcp.py b/test/runner/lib/cloud/gcp.py
index 7336a6a0f6..9b56e54e22 100644
--- a/test/runner/lib/cloud/gcp.py
+++ b/test/runner/lib/cloud/gcp.py
@@ -1,7 +1,8 @@
 # Copyright: (c) 2018, Google Inc.
 # GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)
 """GCP plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/cloud/hcloud.py b/test/runner/lib/cloud/hcloud.py
index dba35f9e56..d523eb1065 100644
--- a/test/runner/lib/cloud/hcloud.py
+++ b/test/runner/lib/cloud/hcloud.py
@@ -1,5 +1,6 @@
 """Hetzner Cloud plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/cloud/nios.py b/test/runner/lib/cloud/nios.py
index 7d58631223..91456ae501 100644
--- a/test/runner/lib/cloud/nios.py
+++ b/test/runner/lib/cloud/nios.py
@@ -1,6 +1,6 @@
 """NIOS plugin for integration tests."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/cloud/opennebula.py b/test/runner/lib/cloud/opennebula.py
index 9cc87d3be1..812d19c309 100644
--- a/test/runner/lib/cloud/opennebula.py
+++ b/test/runner/lib/cloud/opennebula.py
@@ -1,4 +1,6 @@
 """OpenNebula plugin for integration tests."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 from lib.cloud import (
     CloudProvider,
diff --git a/test/runner/lib/cloud/openshift.py b/test/runner/lib/cloud/openshift.py
index 3e294ccde1..eedc764c17 100644
--- a/test/runner/lib/cloud/openshift.py
+++ b/test/runner/lib/cloud/openshift.py
@@ -1,5 +1,6 @@
 """OpenShift plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import json
 import os
diff --git a/test/runner/lib/cloud/scaleway.py b/test/runner/lib/cloud/scaleway.py
index fb9240823d..3dcba47dfe 100644
--- a/test/runner/lib/cloud/scaleway.py
+++ b/test/runner/lib/cloud/scaleway.py
@@ -1,5 +1,6 @@
 """Scaleway plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/cloud/tower.py b/test/runner/lib/cloud/tower.py
index 3e7cd7dc25..8f4ed01f1b 100644
--- a/test/runner/lib/cloud/tower.py
+++ b/test/runner/lib/cloud/tower.py
@@ -1,5 +1,6 @@
 """Tower plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import time
diff --git a/test/runner/lib/cloud/vcenter.py b/test/runner/lib/cloud/vcenter.py
index 8b6adb11f9..1e34371892 100644
--- a/test/runner/lib/cloud/vcenter.py
+++ b/test/runner/lib/cloud/vcenter.py
@@ -1,5 +1,6 @@
 """VMware vCenter plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import time
diff --git a/test/runner/lib/cloud/vultr.py b/test/runner/lib/cloud/vultr.py
index 79a664f54d..a47a60431a 100644
--- a/test/runner/lib/cloud/vultr.py
+++ b/test/runner/lib/cloud/vultr.py
@@ -1,5 +1,6 @@
 """Vultr plugin for integration tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/config.py b/test/runner/lib/config.py
index e441d76a81..85603260fd 100644
--- a/test/runner/lib/config.py
+++ b/test/runner/lib/config.py
@@ -1,6 +1,6 @@
 """Configuration classes."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import sys
diff --git a/test/runner/lib/constants.py b/test/runner/lib/constants.py
index 10329f4d9c..f4307822a1 100644
--- a/test/runner/lib/constants.py
+++ b/test/runner/lib/constants.py
@@ -1,4 +1,6 @@
 """Constants used by ansible-test. Imports should not be used in this file."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 # Setting a low soft RLIMIT_NOFILE value will improve the performance of subprocess.Popen on Python 2.x when close_fds=True.
 # This will affect all Python subprocesses. It will also affect the current Python process if set before subprocess is imported for the first time.
diff --git a/test/runner/lib/core_ci.py b/test/runner/lib/core_ci.py
index 27b38b7af7..d7ccecc6b2 100644
--- a/test/runner/lib/core_ci.py
+++ b/test/runner/lib/core_ci.py
@@ -1,6 +1,6 @@
 """Access Ansible Core CI remote services."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import json
 import os
diff --git a/test/runner/lib/cover.py b/test/runner/lib/cover.py
index e9948ca2ca..755c9e2bc5 100644
--- a/test/runner/lib/cover.py
+++ b/test/runner/lib/cover.py
@@ -1,6 +1,6 @@
 """Code coverage utilities."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/runner/lib/csharp_import_analysis.py b/test/runner/lib/csharp_import_analysis.py
index 38d8eed3f0..396d1640bf 100644
--- a/test/runner/lib/csharp_import_analysis.py
+++ b/test/runner/lib/csharp_import_analysis.py
@@ -1,6 +1,6 @@
 """Analyze C# import statements."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/runner/lib/delegation.py b/test/runner/lib/delegation.py
index 7c1e5cb85a..99c8671cab 100644
--- a/test/runner/lib/delegation.py
+++ b/test/runner/lib/delegation.py
@@ -1,6 +1,6 @@
 """Delegate test execution to another environment."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/runner/lib/diff.py b/test/runner/lib/diff.py
index 8150a48c48..f555846135 100644
--- a/test/runner/lib/diff.py
+++ b/test/runner/lib/diff.py
@@ -1,5 +1,6 @@
 """Diff parsing functions and classes."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import re
 import textwrap
diff --git a/test/runner/lib/docker_util.py b/test/runner/lib/docker_util.py
index 556486c9b4..c481bbfba5 100644
--- a/test/runner/lib/docker_util.py
+++ b/test/runner/lib/docker_util.py
@@ -1,6 +1,6 @@
 """Functions for accessing docker via the docker cli."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import json
 import os
diff --git a/test/runner/lib/env.py b/test/runner/lib/env.py
index 3588800ea5..97d6bb225c 100644
--- a/test/runner/lib/env.py
+++ b/test/runner/lib/env.py
@@ -1,6 +1,6 @@
 """Show information about the test environment."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import datetime
 import json
diff --git a/test/runner/lib/executor.py b/test/runner/lib/executor.py
index a6ae03fa55..5b004e95e0 100644
--- a/test/runner/lib/executor.py
+++ b/test/runner/lib/executor.py
@@ -1,6 +1,6 @@
 """Execute Ansible tests."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import json
 import os
diff --git a/test/runner/lib/git.py b/test/runner/lib/git.py
index 20ac5bc8d1..3333595199 100644
--- a/test/runner/lib/git.py
+++ b/test/runner/lib/git.py
@@ -1,6 +1,6 @@
 """Wrapper around git command-line tools."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import lib.types as t
 
diff --git a/test/runner/lib/http.py b/test/runner/lib/http.py
index c0f2a1ebb7..e14a5f4104 100644
--- a/test/runner/lib/http.py
+++ b/test/runner/lib/http.py
@@ -2,8 +2,8 @@
 Primitive replacement for requests to avoid extra dependency.
 Avoids use of urllib2 due to lack of SNI support.
 """
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import json
 import time
diff --git a/test/runner/lib/import_analysis.py b/test/runner/lib/import_analysis.py
index 5ecfff8635..dd511c1e4f 100644
--- a/test/runner/lib/import_analysis.py
+++ b/test/runner/lib/import_analysis.py
@@ -1,6 +1,6 @@
 """Analyze python import statements."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import ast
 import os
diff --git a/test/runner/lib/init.py b/test/runner/lib/init.py
index 7bc39c3ed0..5ce29a7e39 100644
--- a/test/runner/lib/init.py
+++ b/test/runner/lib/init.py
@@ -1,4 +1,6 @@
 """Early initialization for ansible-test before most other imports have been performed."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import resource
 
diff --git a/test/runner/lib/integration/__init__.py b/test/runner/lib/integration/__init__.py
index c5a54bba63..8e4fc1edaa 100644
--- a/test/runner/lib/integration/__init__.py
+++ b/test/runner/lib/integration/__init__.py
@@ -1,6 +1,6 @@
 """Ansible integration test infrastructure."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import contextlib
 import json
diff --git a/test/runner/lib/manage_ci.py b/test/runner/lib/manage_ci.py
index 8dce216aa7..5f1525daca 100644
--- a/test/runner/lib/manage_ci.py
+++ b/test/runner/lib/manage_ci.py
@@ -1,6 +1,6 @@
 """Access Ansible Core CI remote services."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import tempfile
diff --git a/test/runner/lib/metadata.py b/test/runner/lib/metadata.py
index a06404de4e..ac3d979253 100644
--- a/test/runner/lib/metadata.py
+++ b/test/runner/lib/metadata.py
@@ -1,5 +1,6 @@
 """Test metadata for passing data to delegated tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import json
 
diff --git a/test/runner/lib/powershell_import_analysis.py b/test/runner/lib/powershell_import_analysis.py
index adbd2065e3..7eb8d3eee4 100644
--- a/test/runner/lib/powershell_import_analysis.py
+++ b/test/runner/lib/powershell_import_analysis.py
@@ -1,6 +1,6 @@
 """Analyze powershell import statements."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/runner/lib/pytar.py b/test/runner/lib/pytar.py
index db79d49495..5fcfeb3e51 100644
--- a/test/runner/lib/pytar.py
+++ b/test/runner/lib/pytar.py
@@ -1,6 +1,6 @@
 """Python native TGZ creation."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import abc
 import tarfile
diff --git a/test/runner/lib/sanity/__init__.py b/test/runner/lib/sanity/__init__.py
index 145a10f686..3f38b1a3c3 100644
--- a/test/runner/lib/sanity/__init__.py
+++ b/test/runner/lib/sanity/__init__.py
@@ -1,5 +1,6 @@
 """Execute Ansible sanity tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import abc
 import glob
diff --git a/test/runner/lib/sanity/ansible_doc.py b/test/runner/lib/sanity/ansible_doc.py
index bc012fd94f..9ca541741a 100644
--- a/test/runner/lib/sanity/ansible_doc.py
+++ b/test/runner/lib/sanity/ansible_doc.py
@@ -1,5 +1,6 @@
 """Sanity test for ansible-doc."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import collections
 import os
diff --git a/test/runner/lib/sanity/compile.py b/test/runner/lib/sanity/compile.py
index 5f06fd84a9..2d3b8aadae 100644
--- a/test/runner/lib/sanity/compile.py
+++ b/test/runner/lib/sanity/compile.py
@@ -1,5 +1,6 @@
 """Sanity test for proper python syntax."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/sanity/import.py b/test/runner/lib/sanity/import.py
index a1a8527c04..30ca88261a 100644
--- a/test/runner/lib/sanity/import.py
+++ b/test/runner/lib/sanity/import.py
@@ -1,5 +1,6 @@
 """Sanity test for proper import exception handling."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/sanity/integration_aliases.py b/test/runner/lib/sanity/integration_aliases.py
index 9629f7b338..7e4611c8e7 100644
--- a/test/runner/lib/sanity/integration_aliases.py
+++ b/test/runner/lib/sanity/integration_aliases.py
@@ -1,5 +1,6 @@
 """Sanity test to check integration test aliases."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import json
 import textwrap
diff --git a/test/runner/lib/sanity/pep8.py b/test/runner/lib/sanity/pep8.py
index d120499e75..3c8a11e9c1 100644
--- a/test/runner/lib/sanity/pep8.py
+++ b/test/runner/lib/sanity/pep8.py
@@ -1,5 +1,6 @@
 """Sanity test for PEP 8 style guidelines using pycodestyle."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/runner/lib/sanity/pslint.py b/test/runner/lib/sanity/pslint.py
index b0292e46d4..d949578928 100644
--- a/test/runner/lib/sanity/pslint.py
+++ b/test/runner/lib/sanity/pslint.py
@@ -1,5 +1,6 @@
 """Sanity test using PSScriptAnalyzer."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import collections
 import json
diff --git a/test/runner/lib/sanity/pylint.py b/test/runner/lib/sanity/pylint.py
index 346c64c5f7..d51fb26a76 100644
--- a/test/runner/lib/sanity/pylint.py
+++ b/test/runner/lib/sanity/pylint.py
@@ -1,5 +1,6 @@
 """Sanity test using pylint."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import collections
 import itertools
diff --git a/test/runner/lib/sanity/rstcheck.py b/test/runner/lib/sanity/rstcheck.py
index 3004718478..8b4273d277 100644
--- a/test/runner/lib/sanity/rstcheck.py
+++ b/test/runner/lib/sanity/rstcheck.py
@@ -1,5 +1,6 @@
 """Sanity test using rstcheck."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/sanity/sanity_docs.py b/test/runner/lib/sanity/sanity_docs.py
index 9bb97b93de..3527fe3197 100644
--- a/test/runner/lib/sanity/sanity_docs.py
+++ b/test/runner/lib/sanity/sanity_docs.py
@@ -1,5 +1,6 @@
 """Sanity test for documentation of sanity tests."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/sanity/shellcheck.py b/test/runner/lib/sanity/shellcheck.py
index 8aeaf25a25..59be717c13 100644
--- a/test/runner/lib/sanity/shellcheck.py
+++ b/test/runner/lib/sanity/shellcheck.py
@@ -1,5 +1,6 @@
 """Sanity test using shellcheck."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/runner/lib/sanity/validate_modules.py b/test/runner/lib/sanity/validate_modules.py
index 7353b1919d..d4278af19e 100644
--- a/test/runner/lib/sanity/validate_modules.py
+++ b/test/runner/lib/sanity/validate_modules.py
@@ -1,5 +1,6 @@
 """Sanity test using validate-modules."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import collections
 import json
diff --git a/test/runner/lib/sanity/yamllint.py b/test/runner/lib/sanity/yamllint.py
index b7ee0a5d83..406fef9410 100644
--- a/test/runner/lib/sanity/yamllint.py
+++ b/test/runner/lib/sanity/yamllint.py
@@ -1,5 +1,6 @@
 """Sanity test using yamllint."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import json
 import os
diff --git a/test/runner/lib/target.py b/test/runner/lib/target.py
index c014fcfb8b..c5af7e93a2 100644
--- a/test/runner/lib/target.py
+++ b/test/runner/lib/target.py
@@ -1,6 +1,6 @@
 """Test target identification, iteration and inclusion/exclusion."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import collections
 import os
diff --git a/test/runner/lib/test.py b/test/runner/lib/test.py
index 235de16aab..ab00212d3c 100644
--- a/test/runner/lib/test.py
+++ b/test/runner/lib/test.py
@@ -1,6 +1,6 @@
 """Classes for storing and processing test results."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import datetime
 import json
diff --git a/test/runner/lib/thread.py b/test/runner/lib/thread.py
index 8a287790a2..49fbc1baff 100644
--- a/test/runner/lib/thread.py
+++ b/test/runner/lib/thread.py
@@ -1,6 +1,6 @@
 """Python threading tools."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import threading
 import sys
diff --git a/test/runner/lib/util.py b/test/runner/lib/util.py
index 0704bd03f7..0811c4ca4c 100644
--- a/test/runner/lib/util.py
+++ b/test/runner/lib/util.py
@@ -1,6 +1,6 @@
 """Miscellaneous utility functions and classes."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import contextlib
 import errno
diff --git a/test/runner/lib/util_common.py b/test/runner/lib/util_common.py
index 1f5548fb05..d6552bcea3 100644
--- a/test/runner/lib/util_common.py
+++ b/test/runner/lib/util_common.py
@@ -1,5 +1,6 @@
 """Common utility code that depends on CommonConfig."""
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import atexit
 import contextlib
diff --git a/test/runner/retry.py b/test/runner/retry.py
index 5de8db08ff..24af14ec9d 100755
--- a/test/runner/retry.py
+++ b/test/runner/retry.py
@@ -1,8 +1,8 @@
 #!/usr/bin/env python
 # PYTHON_ARGCOMPLETE_OK
 """Automatically retry failed commands."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 # noinspection PyCompatibility
 import argparse
diff --git a/test/runner/shippable.py b/test/runner/shippable.py
index 0b803a7fe9..3882b62220 100755
--- a/test/runner/shippable.py
+++ b/test/runner/shippable.py
@@ -1,8 +1,8 @@
 #!/usr/bin/env python
 # PYTHON_ARGCOMPLETE_OK
 """Verify the current Shippable run has the required number of jobs."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 # noinspection PyCompatibility
 import argparse
diff --git a/test/runner/units/test_diff.py b/test/runner/units/test_diff.py
index 22e28fb5a9..4f94ff4d5b 100644
--- a/test/runner/units/test_diff.py
+++ b/test/runner/units/test_diff.py
@@ -1,4 +1,7 @@
 """Tests for diff module."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
+
 import os
 import subprocess
 import pytest
diff --git a/test/runner/versions.py b/test/runner/versions.py
index e2a5db8767..06729720ed 100755
--- a/test/runner/versions.py
+++ b/test/runner/versions.py
@@ -1,5 +1,7 @@
 #!/usr/bin/env python
 """Show python and pip versions."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import sys
diff --git a/test/runner/yamlcheck.py b/test/runner/yamlcheck.py
index 9e9ddd451a..591842f4ad 100755
--- a/test/runner/yamlcheck.py
+++ b/test/runner/yamlcheck.py
@@ -1,5 +1,7 @@
 #!/usr/bin/env python
 """Show python and pip versions."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import json
 
diff --git a/test/sanity/code-smell/action-plugin-docs.py b/test/sanity/code-smell/action-plugin-docs.py
index 76de98ea4d..11c963e3e7 100755
--- a/test/sanity/code-smell/action-plugin-docs.py
+++ b/test/sanity/code-smell/action-plugin-docs.py
@@ -1,5 +1,7 @@
 #!/usr/bin/env python
 """Test to verify action plugins have an associated module to provide documentation."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import sys
diff --git a/test/sanity/code-smell/azure-requirements.py b/test/sanity/code-smell/azure-requirements.py
index dc3554c698..1c71b67a70 100755
--- a/test/sanity/code-smell/azure-requirements.py
+++ b/test/sanity/code-smell/azure-requirements.py
@@ -1,5 +1,7 @@
 #!/usr/bin/env python
 """Make sure the Azure requirements files match."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import filecmp
 import os
diff --git a/test/sanity/code-smell/botmeta.py b/test/sanity/code-smell/botmeta.py
index 6de3cb76e8..cf6edbf614 100755
--- a/test/sanity/code-smell/botmeta.py
+++ b/test/sanity/code-smell/botmeta.py
@@ -1,5 +1,7 @@
 #!/usr/bin/env python
 """Make sure the data in BOTMETA.yml is valid"""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import glob
 import os
diff --git a/test/sanity/code-smell/changelog.py b/test/sanity/code-smell/changelog.py
index 86b97ad5c9..31123e5b29 100755
--- a/test/sanity/code-smell/changelog.py
+++ b/test/sanity/code-smell/changelog.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import sys
diff --git a/test/sanity/code-smell/configure-remoting-ps1.py b/test/sanity/code-smell/configure-remoting-ps1.py
index 614bf6986a..7bf26bcf10 100755
--- a/test/sanity/code-smell/configure-remoting-ps1.py
+++ b/test/sanity/code-smell/configure-remoting-ps1.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/sanity/code-smell/docs-build.py b/test/sanity/code-smell/docs-build.py
index 29e9602096..4fe99de02e 100755
--- a/test/sanity/code-smell/docs-build.py
+++ b/test/sanity/code-smell/docs-build.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/empty-init.py b/test/sanity/code-smell/empty-init.py
index bde356fa96..3839765c39 100755
--- a/test/sanity/code-smell/empty-init.py
+++ b/test/sanity/code-smell/empty-init.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import sys
diff --git a/test/sanity/code-smell/future-import-boilerplate.py b/test/sanity/code-smell/future-import-boilerplate.py
index 326759946e..48ce75b661 100755
--- a/test/sanity/code-smell/future-import-boilerplate.py
+++ b/test/sanity/code-smell/future-import-boilerplate.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import sys
 
@@ -20,7 +22,9 @@ def main():
         'contrib/vault/',
         'docs/',
         'examples/',
-        'test/',
+        'test/integration/',
+        'test/legacy/',
+        'test/units/',
     )
 
     # These files pre-date the boilerplate test and should be fixed up as time goes on
diff --git a/test/sanity/code-smell/line-endings.py b/test/sanity/code-smell/line-endings.py
index fcbbc5cc49..21a981d3ca 100755
--- a/test/sanity/code-smell/line-endings.py
+++ b/test/sanity/code-smell/line-endings.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import sys
 
diff --git a/test/sanity/code-smell/metaclass-boilerplate.py b/test/sanity/code-smell/metaclass-boilerplate.py
index 6d6b086f2c..858d0b79f6 100755
--- a/test/sanity/code-smell/metaclass-boilerplate.py
+++ b/test/sanity/code-smell/metaclass-boilerplate.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import sys
 
@@ -18,7 +20,9 @@ def main():
         'contrib/vault/',
         'docs/',
         'examples/',
-        'test/'
+        'test/integration/',
+        'test/legacy/',
+        'test/units/',
     )
 
     grandfathered = frozenset((
diff --git a/test/sanity/code-smell/no-assert.py b/test/sanity/code-smell/no-assert.py
index 85d8596bce..626dcbc639 100755
--- a/test/sanity/code-smell/no-assert.py
+++ b/test/sanity/code-smell/no-assert.py
@@ -1,5 +1,6 @@
 #!/usr/bin/env python
-from __future__ import print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/no-basestring.py b/test/sanity/code-smell/no-basestring.py
index 3105a09729..6980b1934d 100755
--- a/test/sanity/code-smell/no-basestring.py
+++ b/test/sanity/code-smell/no-basestring.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/no-dict-iteritems.py b/test/sanity/code-smell/no-dict-iteritems.py
index 37a794d4eb..193e1eac80 100755
--- a/test/sanity/code-smell/no-dict-iteritems.py
+++ b/test/sanity/code-smell/no-dict-iteritems.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/no-dict-iterkeys.py b/test/sanity/code-smell/no-dict-iterkeys.py
index 7383c11209..65aeeb5b6d 100755
--- a/test/sanity/code-smell/no-dict-iterkeys.py
+++ b/test/sanity/code-smell/no-dict-iterkeys.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/no-dict-itervalues.py b/test/sanity/code-smell/no-dict-itervalues.py
index 8a93dd315e..c2fd99d1a5 100755
--- a/test/sanity/code-smell/no-dict-itervalues.py
+++ b/test/sanity/code-smell/no-dict-itervalues.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/no-get-exception.py b/test/sanity/code-smell/no-get-exception.py
index 42200053ef..55b05391c5 100755
--- a/test/sanity/code-smell/no-get-exception.py
+++ b/test/sanity/code-smell/no-get-exception.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/no-illegal-filenames.py b/test/sanity/code-smell/no-illegal-filenames.py
index 1a663c5aa7..bb2a68d5e8 100755
--- a/test/sanity/code-smell/no-illegal-filenames.py
+++ b/test/sanity/code-smell/no-illegal-filenames.py
@@ -3,6 +3,8 @@
 # a script to check for illegal filenames on various Operating Systems. The
 # main rules are derived from restrictions on Windows
 # https://msdn.microsoft.com/en-us/library/aa365247#naming_conventions
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/no-main-display.py b/test/sanity/code-smell/no-main-display.py
index 71fbc63859..61bf50b7f9 100755
--- a/test/sanity/code-smell/no-main-display.py
+++ b/test/sanity/code-smell/no-main-display.py
@@ -1,5 +1,6 @@
 #!/usr/bin/env python
-from __future__ import print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/no-smart-quotes.py b/test/sanity/code-smell/no-smart-quotes.py
index 7a78d49f00..52dbdd0756 100755
--- a/test/sanity/code-smell/no-smart-quotes.py
+++ b/test/sanity/code-smell/no-smart-quotes.py
@@ -1,5 +1,7 @@
 #!/usr/bin/env python
 # -*- coding: utf-8 -*-
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/no-unicode-literals.py b/test/sanity/code-smell/no-unicode-literals.py
index c80b222a5f..cc2dee767e 100755
--- a/test/sanity/code-smell/no-unicode-literals.py
+++ b/test/sanity/code-smell/no-unicode-literals.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/no-unwanted-files.py b/test/sanity/code-smell/no-unwanted-files.py
index 47cce53835..ff73615958 100755
--- a/test/sanity/code-smell/no-unwanted-files.py
+++ b/test/sanity/code-smell/no-unwanted-files.py
@@ -1,5 +1,8 @@
 #!/usr/bin/env python
 """Prevent unwanted files from being added to the source tree."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
+
 import os
 import sys
 
diff --git a/test/sanity/code-smell/replace-urlopen.py b/test/sanity/code-smell/replace-urlopen.py
index 677f9c88a9..5a92ac014e 100755
--- a/test/sanity/code-smell/replace-urlopen.py
+++ b/test/sanity/code-smell/replace-urlopen.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/required-and-default-attributes.py b/test/sanity/code-smell/required-and-default-attributes.py
index 6fa7944da9..746d358a2d 100755
--- a/test/sanity/code-smell/required-and-default-attributes.py
+++ b/test/sanity/code-smell/required-and-default-attributes.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/code-smell/shebang.py b/test/sanity/code-smell/shebang.py
index 9e7d1f136f..33b6322216 100755
--- a/test/sanity/code-smell/shebang.py
+++ b/test/sanity/code-smell/shebang.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import stat
diff --git a/test/sanity/code-smell/symlinks.py b/test/sanity/code-smell/symlinks.py
index ec5c72635b..3f54759ba9 100755
--- a/test/sanity/code-smell/symlinks.py
+++ b/test/sanity/code-smell/symlinks.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 
diff --git a/test/sanity/code-smell/test-constraints.py b/test/sanity/code-smell/test-constraints.py
index d26515de16..572487ed56 100755
--- a/test/sanity/code-smell/test-constraints.py
+++ b/test/sanity/code-smell/test-constraints.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import re
 import sys
diff --git a/test/sanity/code-smell/use-argspec-type-path.py b/test/sanity/code-smell/use-argspec-type-path.py
index 058f9f9ff5..be606d1450 100755
--- a/test/sanity/code-smell/use-argspec-type-path.py
+++ b/test/sanity/code-smell/use-argspec-type-path.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import re
 import sys
diff --git a/test/sanity/code-smell/use-compat-six.py b/test/sanity/code-smell/use-compat-six.py
index fc87ed2284..dd5dc594b0 100755
--- a/test/sanity/code-smell/use-compat-six.py
+++ b/test/sanity/code-smell/use-compat-six.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import os
 import re
diff --git a/test/sanity/compile/compile.py b/test/sanity/compile/compile.py
index 87d2ee9dda..cdd08ddaed 100755
--- a/test/sanity/compile/compile.py
+++ b/test/sanity/compile/compile.py
@@ -1,5 +1,7 @@
 #!/usr/bin/env python
 """Python syntax checker with lint friendly output."""
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import parser
 import sys
diff --git a/test/sanity/import/importer.py b/test/sanity/import/importer.py
index 62ba53762a..a5a417010f 100755
--- a/test/sanity/import/importer.py
+++ b/test/sanity/import/importer.py
@@ -1,7 +1,7 @@
 #!/usr/bin/env python
 """Import the given python module(s) and report error(s) encountered."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import contextlib
 import os
diff --git a/test/sanity/validate-modules/__init__.py b/test/sanity/validate-modules/__init__.py
index 365ff9e927..d8ff2dc0d4 100644
--- a/test/sanity/validate-modules/__init__.py
+++ b/test/sanity/validate-modules/__init__.py
@@ -15,5 +15,6 @@
 #
 #    You should have received a copy of the GNU General Public License
 #    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 __version__ = '0.0.1b'
diff --git a/test/sanity/validate-modules/main.py b/test/sanity/validate-modules/main.py
index 72b4d5c932..db2fb4a2ee 100755
--- a/test/sanity/validate-modules/main.py
+++ b/test/sanity/validate-modules/main.py
@@ -16,8 +16,8 @@
 #
 #    You should have received a copy of the GNU General Public License
 #    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-
-from __future__ import print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import abc
 import argparse
diff --git a/test/sanity/validate-modules/module_args.py b/test/sanity/validate-modules/module_args.py
index 0745c7c381..50e9416bf8 100644
--- a/test/sanity/validate-modules/module_args.py
+++ b/test/sanity/validate-modules/module_args.py
@@ -15,6 +15,8 @@
 #
 #    You should have received a copy of the GNU General Public License
 #    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import imp
 import json
diff --git a/test/sanity/validate-modules/schema.py b/test/sanity/validate-modules/schema.py
index fec13d6f48..0ca8ffcef9 100644
--- a/test/sanity/validate-modules/schema.py
+++ b/test/sanity/validate-modules/schema.py
@@ -3,6 +3,8 @@
 # Copyright: (c) 2015, Matt Martz <matt@sivel.net>
 # Copyright: (c) 2015, Rackspace US, Inc.
 # GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import re
 from voluptuous import ALLOW_EXTRA, PREVENT_EXTRA, All, Any, Length, Invalid, Required, Schema, Self
diff --git a/test/sanity/validate-modules/test_validate_modules_regex.py b/test/sanity/validate-modules/test_validate_modules_regex.py
index 2227ec1385..aebe3cd322 100644
--- a/test/sanity/validate-modules/test_validate_modules_regex.py
+++ b/test/sanity/validate-modules/test_validate_modules_regex.py
@@ -7,6 +7,8 @@
 #   1) cd <checkoutdir>
 #   2) source hacking/env-setup
 #   3) PYTHONPATH=./lib pytest -v sanity/validate-modules
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import re
 import unittest
diff --git a/test/sanity/validate-modules/utils.py b/test/sanity/validate-modules/utils.py
index fde2e1597d..82ee711f3d 100644
--- a/test/sanity/validate-modules/utils.py
+++ b/test/sanity/validate-modules/utils.py
@@ -15,6 +15,8 @@
 #
 #    You should have received a copy of the GNU General Public License
 #    along with this program.  If not, see <http://www.gnu.org/licenses/>.
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import ast
 import os
diff --git a/test/sanity/yamllint/yamllinter.py b/test/sanity/yamllint/yamllinter.py
index 8e61e4fc89..dfdabbac4f 100755
--- a/test/sanity/yamllint/yamllinter.py
+++ b/test/sanity/yamllint/yamllinter.py
@@ -1,7 +1,7 @@
 #!/usr/bin/env python
 """Wrapper around yamllint that supports YAML embedded in Ansible modules."""
-
-from __future__ import absolute_import, print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import ast
 import json
diff --git a/test/utils/shippable/timing.py b/test/utils/shippable/timing.py
index f40e21005f..fb538271b8 100755
--- a/test/utils/shippable/timing.py
+++ b/test/utils/shippable/timing.py
@@ -1,4 +1,6 @@
 #!/usr/bin/env python3.7
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 import sys
 import time
diff --git a/test/utils/shippable/tools/download.py b/test/utils/shippable/tools/download.py
index f3815d70e0..045028914c 100755
--- a/test/utils/shippable/tools/download.py
+++ b/test/utils/shippable/tools/download.py
@@ -18,8 +18,8 @@
 # You should have received a copy of the GNU General Public License
 # along with Ansible.  If not, see <http://www.gnu.org/licenses/>.
 """CLI tool for downloading results from Shippable CI runs."""
-
-from __future__ import print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 # noinspection PyCompatibility
 import argparse
diff --git a/test/utils/shippable/tools/run.py b/test/utils/shippable/tools/run.py
index 1986b9820e..7ec7590363 100755
--- a/test/utils/shippable/tools/run.py
+++ b/test/utils/shippable/tools/run.py
@@ -18,8 +18,8 @@
 # You should have received a copy of the GNU General Public License
 # along with Ansible.  If not, see <http://www.gnu.org/licenses/>.
 """CLI tool for starting new Shippable CI runs."""
-
-from __future__ import print_function
+from __future__ import (absolute_import, division, print_function)
+__metaclass__ = type
 
 # noinspection PyCompatibility
 import argparse
