commit 82011b043af2643a843ce9462834001300720972
Author: Stoned Elipot <stoned.elipot@gmail.com>
Date:   Tue Feb 5 21:16:26 2013 +0100

    For ansible --list-hosts benefit apply hosts selection limits early

diff --git a/bin/ansible b/bin/ansible
index 102390f42a..f1d96e32d1 100755
--- a/bin/ansible
+++ b/bin/ansible
@@ -70,6 +70,8 @@ class Cli(object):
         pattern = args[0]
 
         inventory_manager = inventory.Inventory(options.inventory)
+        if options.subset:
+            inventory_manager.subset(options.subset)
         hosts = inventory_manager.list_hosts(pattern)
         if len(hosts) == 0:
             print >>sys.stderr, "No hosts matched"
