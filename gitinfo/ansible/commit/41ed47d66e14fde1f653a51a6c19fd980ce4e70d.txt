commit 41ed47d66e14fde1f653a51a6c19fd980ce4e70d
Author: Michael Gruener <michael.gruener@bedag.ch>
Date:   Fri Mar 25 18:23:52 2016 +0100

    cloudflare_dns: Fix solo SRV record creation

diff --git a/lib/ansible/modules/extras/network/cloudflare_dns.py b/lib/ansible/modules/extras/network/cloudflare_dns.py
index 3e5ba50b52..5f0955f018 100644
--- a/lib/ansible/modules/extras/network/cloudflare_dns.py
+++ b/lib/ansible/modules/extras/network/cloudflare_dns.py
@@ -371,19 +371,21 @@ class CloudflareAPI(object):
                 params[param] = getattr(self,param)
 
         records = []
-        search_value = params['value']
+        content = params['value']
         search_record = params['record']
         if params['type'] == 'SRV':
-            search_value = str(params['weight']) + '\t' + str(params['port']) + '\t' + params['value']
+            content = str(params['weight']) + '\t' + str(params['port']) + '\t' + params['value']
             search_record = params['service'] + '.' + params['proto'] + '.' + params['record']
         if params['solo']:
             search_value = None
+        else:
+            search_value = content
 
         records = self.get_dns_records(params['zone'],params['type'],search_record,search_value)
 
         for rr in records:
             if params['solo']:
-                if not ((rr['type'] == params['type']) and (rr['name'] == params['record']) and (rr['content'] == params['value'])):
+                if not ((rr['type'] == params['type']) and (rr['name'] == search_record) and (rr['content'] == content)):
                     self.changed = True
                     if not self.module.check_mode:
                         result, info = self._cf_api_call('/zones/{0}/dns_records/{1}'.format(rr['zone_id'],rr['id']),'DELETE')
