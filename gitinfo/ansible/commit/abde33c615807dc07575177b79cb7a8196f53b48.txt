commit abde33c615807dc07575177b79cb7a8196f53b48
Author: Conrado Buhrer <conrado@buhrer.net>
Date:   Mon Jan 26 18:16:42 2015 -0200

    fixed: erroneous logic

diff --git a/lib/ansible/modules/packaging/os/apt.py b/lib/ansible/modules/packaging/os/apt.py
index 93809602af..90d1716e2c 100644
--- a/lib/ansible/modules/packaging/os/apt.py
+++ b/lib/ansible/modules/packaging/os/apt.py
@@ -607,8 +607,12 @@ def main():
                 module.fail_json(msg='version number inconsistent with state=latest: %s' % package)
 
         if p['state'] in ('latest', 'present', 'build-dep'):
-            build_dep = p.get('build-dep', False)
-            upgrade = p.get('latest', False)
+            upgrade = False
+            build_dep = False
+            if p['state'] == 'latest':
+                upgrade = True
+            if p['state'] == 'build-dep':
+                build_dep = True
             result = install(module, packages, cache, upgrade=upgrade,
                     default_release=p['default_release'],
                     install_recommends=install_recommends,
