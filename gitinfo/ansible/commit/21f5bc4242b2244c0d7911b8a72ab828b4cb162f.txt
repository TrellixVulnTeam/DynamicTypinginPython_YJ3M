commit 21f5bc4242b2244c0d7911b8a72ab828b4cb162f
Author: Andrey Shorin <a.shorin@hh.ru>
Date:   Tue Sep 24 16:14:20 2013 +0400

    Prevent UnicodeEncodeError: 'ascii' codec can't encode characters in position ...: ordinal not in range(128)

diff --git a/lib/ansible/utils/__init__.py b/lib/ansible/utils/__init__.py
index 2ba2d2d8fe..6af22d07c0 100644
--- a/lib/ansible/utils/__init__.py
+++ b/lib/ansible/utils/__init__.py
@@ -410,7 +410,7 @@ def md5s(data):
 
     buf = StringIO.StringIO(data)
     digest = _md5()
-    digest.update(buf.read())
+    digest.update(buf.read().encode('utf-8'))
     return digest.hexdigest()
 
 def md5(filename):
