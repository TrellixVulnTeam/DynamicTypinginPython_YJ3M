commit 1ff15373293c591219ee14db644152e5e519635b
Author: Dagobert Michelsen <dam@opencsw.org>
Date:   Wed Feb 18 10:33:21 2015 +0100

    Adjust setting to better make logic clearer

diff --git a/lib/ansible/modules/extras/packaging/os/pkgutil.py b/lib/ansible/modules/extras/packaging/os/pkgutil.py
index fe0e82a5ab..0204bbae98 100644
--- a/lib/ansible/modules/extras/packaging/os/pkgutil.py
+++ b/lib/ansible/modules/extras/packaging/os/pkgutil.py
@@ -162,15 +162,14 @@ def main():
             (rc, out, err) = package_uninstall(module, name)
             out = out[:75]
 
-    if rc == 0:
+    if rc is None:
+        # pkgutil was not executed because the package was already present/absent
+        result['changed'] = False
+    elif rc == 0
         result['changed'] = True
-    else:
+    else
         result['changed'] = False
-
-    if rc is not None and rc != 0:
         result['failed'] = True
-    else:
-        result['failed'] = False
 
     if out:
         result['stdout'] = out
