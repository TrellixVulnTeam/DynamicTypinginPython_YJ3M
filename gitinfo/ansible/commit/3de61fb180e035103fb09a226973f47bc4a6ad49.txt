commit 3de61fb180e035103fb09a226973f47bc4a6ad49
Author: Rafal Lewczuk <rafal.lewczuk@gmail.com>
Date:   Thu May 3 01:09:56 2012 +0200

    Fix: file module does not remove dangling symlinks

diff --git a/library/file b/library/file
index 3931f1ec3b..039f3bb4c8 100755
--- a/library/file
+++ b/library/file
@@ -290,7 +290,7 @@ def rmtree_error(func, path, exc_info):
 # go...
 
 prev_state = 'absent'
-if os.path.exists(path):
+if os.path.lexists(path):
     if os.path.islink(path):
         prev_state = 'link'
     elif os.path.isfile(path):
