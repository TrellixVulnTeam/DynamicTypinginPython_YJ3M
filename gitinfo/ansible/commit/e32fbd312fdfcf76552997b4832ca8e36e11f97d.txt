commit e32fbd312fdfcf76552997b4832ca8e36e11f97d
Author: Daniel Hokka Zakrisson <daniel@hozac.com>
Date:   Mon Feb 25 22:31:49 2013 +0100

    Shell-quote environment contents

diff --git a/lib/ansible/runner/__init__.py b/lib/ansible/runner/__init__.py
index d2d81dcbbf..93f50198f6 100644
--- a/lib/ansible/runner/__init__.py
+++ b/lib/ansible/runner/__init__.py
@@ -228,10 +228,10 @@ class Runner(object):
             return ""
         enviro = utils.template(self.basedir, self.environment, inject)
         if type(enviro) != dict:
-            raise errors.AnsibleError("environment must be a dictionary, recieved %s" % enviro)
+            raise errors.AnsibleError("environment must be a dictionary, received %s" % enviro)
         result = ""
         for (k,v) in enviro.iteritems():
-            result = "%s=%s %s" % (k, str(v), result)       
+            result = "%s=%s %s" % (k, pipes.quote(str(v)), result)
         return result
 
     # *****************************************************
