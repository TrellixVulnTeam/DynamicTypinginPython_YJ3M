commit c066a60b7c48c9a31b51834d49bccfd0b00dd2e5
Author: Rene Moser <mail@renemoser.net>
Date:   Thu Mar 26 15:32:58 2015 +0100

    cloudstack: fail_json() if library cs is not found

diff --git a/lib/ansible/module_utils/cloudstack.py b/lib/ansible/module_utils/cloudstack.py
index cb482ae993..ab72f2c789 100644
--- a/lib/ansible/module_utils/cloudstack.py
+++ b/lib/ansible/module_utils/cloudstack.py
@@ -17,19 +17,20 @@
 # You should have received a copy of the GNU General Public License
 # along with Ansible. If not, see <http://www.gnu.org/licenses/>.
 
-import sys
 
 try:
     from cs import CloudStack, CloudStackException, read_config
+    has_lib_cs = True
 except ImportError:
-    print("failed=True " + \
-        "msg='python library cs required: pip install cs'")
-    sys.exit(1)
+    has_lib_cs = False
 
 
 class AnsibleCloudStack:
 
     def __init__(self, module):
+        if not has_lib_cs:
+            module.fail_json(msg="python library cs required: pip install cs")
+
         self.module = module
         self._connect()
 
