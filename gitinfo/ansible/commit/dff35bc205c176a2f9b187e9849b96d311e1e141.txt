commit dff35bc205c176a2f9b187e9849b96d311e1e141
Author: Takuya Sato <takuya0219@gmail.com>
Date:   Thu Apr 6 18:46:40 2017 +0900

    ecs_taskdefinition module : Convert environment variables to string (#23297)
    
    Before modification, it fails unless it is a string type

diff --git a/lib/ansible/modules/cloud/amazon/ecs_taskdefinition.py b/lib/ansible/modules/cloud/amazon/ecs_taskdefinition.py
index 109e35b9fc..89b79f3d55 100644
--- a/lib/ansible/modules/cloud/amazon/ecs_taskdefinition.py
+++ b/lib/ansible/modules/cloud/amazon/ecs_taskdefinition.py
@@ -352,6 +352,10 @@ def main():
             if not module.check_mode:
                 # Doesn't exist. create it.
                 volumes = module.params.get('volumes', []) or []
+                for container in module.params['containers']:
+                    if 'environment' in container:
+                        for environment in container['environment']:
+                            environment['value'] = str(environment['value'])
                 results['taskdefinition'] = task_mgr.register_task(module.params['family'],
                                                                    module.params['task_role_arn'],
                                                                    module.params['network_mode'],
