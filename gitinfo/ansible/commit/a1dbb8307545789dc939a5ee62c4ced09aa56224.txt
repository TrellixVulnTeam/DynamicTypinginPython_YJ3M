commit a1dbb8307545789dc939a5ee62c4ced09aa56224
Author: M0ses <fs@isarnet.de>
Date:   Thu Apr 2 19:04:56 2015 +0200

    fix errorhandling in zypper.py module
    
    package_latest was calling package_present but did not care
    about the return code so errors in package_present were hidden
    and everthing look ok on the console when zypper update did not fail,
    but no packages where installed.

diff --git a/lib/ansible/modules/extras/packaging/os/zypper.py b/lib/ansible/modules/extras/packaging/os/zypper.py
index 5cf2f742f3..b1155c6014 100644
--- a/lib/ansible/modules/extras/packaging/os/zypper.py
+++ b/lib/ansible/modules/extras/packaging/os/zypper.py
@@ -212,6 +212,11 @@ def package_latest(m, name, installed_state, package_type, disable_gpg_check, di
     # first of all, make sure all the packages are installed
     (rc, stdout, stderr, changed) = package_present(m, name, installed_state, package_type, disable_gpg_check, disable_recommends, old_zypper)
 
+    # return if an error occured while installation
+    # otherwise error messages will be lost and user doesn`t see any error
+    if rc:
+        return (rc, stdout, stderr, changed)
+
     # if we've already made a change, we don't have to check whether a version changed
     if not changed:
         pre_upgrade_versions = get_current_version(m, name)
