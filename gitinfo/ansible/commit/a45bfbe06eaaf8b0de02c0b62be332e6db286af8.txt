commit a45bfbe06eaaf8b0de02c0b62be332e6db286af8
Author: aresch <andrewresch@gmail.com>
Date:   Thu Mar 6 16:12:11 2014 -0800

    Fix rpm_key on system with no gpg keys imported
    
    Without the -a option, rpm command will fail (exit code 1) and execute_command() will fail causing an initial key import to not work.
    
    [root@test ~]# rpm -q gpg-pubkey
    package gpg-pubkey is not installed
    [root@test ~]# echo $?
    1
    [root@test ~]# rpm -qa gpg-pubkey
    [root@test ~]# echo $?
    0

diff --git a/library/packaging/rpm_key b/library/packaging/rpm_key
index 8253247734..e9c3f34bd7 100644
--- a/library/packaging/rpm_key
+++ b/library/packaging/rpm_key
@@ -161,7 +161,7 @@ class RpmKey:
         return stdout, stderr
 
     def is_key_imported(self, keyid):
-        stdout, stderr = self.execute_command([self.rpm, '-q', 'gpg-pubkey'])
+        stdout, stderr = self.execute_command([self.rpm, '-qa', 'gpg-pubkey'])
         for line in stdout.splitlines():
             line = line.strip()
             if not line:
