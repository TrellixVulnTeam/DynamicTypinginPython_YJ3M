commit 9979a32e5c6d55345a8f87115ed86a94d86d8398
Author: Matt Clay <matt@mystile.com>
Date:   Thu Oct 18 17:15:15 2018 -0700

    Fix passing of env vars to Shippable.

diff --git a/test/utils/shippable/tools/run.py b/test/utils/shippable/tools/run.py
index 7eb60bcda1..4a74076d53 100755
--- a/test/utils/shippable/tools/run.py
+++ b/test/utils/shippable/tools/run.py
@@ -99,7 +99,7 @@ def main():
     # new build
 
     data = dict(
-        globalEnv=['%s=%s' % (kp[0], kp[1]) for kp in args.env or []]
+        globalEnv=dict((kp[0], kp[1]) for kp in args.env or [])
     )
 
     if args.branch:
@@ -108,10 +108,10 @@ def main():
         data['runId'] = args.run
 
     url = 'https://api.shippable.com/projects/%s/newBuild' % project_id
-    response = requests.post(url, data, headers=headers)
+    response = requests.post(url, json=data, headers=headers)
 
     if response.status_code != 200:
-        raise Exception(response.content)
+        raise Exception("HTTP %s: %s\n%s" % (response.status_code, response.reason, response.content))
 
     print(json.dumps(response.json(), indent=4, sort_keys=True))
 
