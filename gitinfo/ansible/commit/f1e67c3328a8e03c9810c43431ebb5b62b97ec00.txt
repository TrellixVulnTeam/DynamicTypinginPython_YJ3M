commit f1e67c3328a8e03c9810c43431ebb5b62b97ec00
Author: Sviatoslav Sydorenko <wk.cvs.github@sydorenko.org.ua>
Date:   Fri Feb 15 22:58:26 2019 +0100

    Bugfix/ fix mocker patch in tests (#52372)
    
    * üêõ Fix invalid os.stat mock in tests
    
    * üêõ Fix leaking mock patch in tests
    
    Closes #52347

diff --git a/test/units/module_utils/basic/test_atomic_move.py b/test/units/module_utils/basic/test_atomic_move.py
index d1dc4d7676..1dea91702c 100644
--- a/test/units/module_utils/basic/test_atomic_move.py
+++ b/test/units/module_utils/basic/test_atomic_move.py
@@ -197,7 +197,7 @@ def test_rename_perms_fail_temp_succeeds(atomic_am, atomic_mocks, fake_stat, moc
     mock_context = atomic_am.selinux_default_context.return_value
     atomic_mocks['path_exists'].return_value = False
     atomic_mocks['rename'].side_effect = [OSError(errno.EPERM, 'failing with EPERM'), None]
-    atomic_mocks['stat'].return_value = [fake_stat, fake_stat, fake_stat]
+    atomic_mocks['stat'].return_value = fake_stat
     atomic_mocks['stat'].side_effect = None
     atomic_mocks['mkstemp'].return_value = (None, '/path/to/tempfile')
     atomic_mocks['mkstemp'].side_effect = None
diff --git a/test/units/module_utils/basic/test_set_mode_if_different.py b/test/units/module_utils/basic/test_set_mode_if_different.py
index 7035f4c687..e9446cd83e 100644
--- a/test/units/module_utils/basic/test_set_mode_if_different.py
+++ b/test/units/module_utils/basic/test_set_mode_if_different.py
@@ -151,3 +151,6 @@ def test_missing_lchmod_is_link(am, mock_stats, mocker, check_mode):
         assert not m_chmod.called
     else:
         m_chmod.assert_called_with(b'/path/to/file/no_lchmod', 0o660)
+
+    mocker.resetall()
+    mocker.stopall()
