commit a560a2d5127044164af7d2342bfd993be6cef04b
Author: Adrian Likins <alikins@redhat.com>
Date:   Fri Jan 13 14:38:02 2017 -0500

    Use portable CPUS detect for docsite make default.
    
    Some folks run 'make webdocs' from docs/docsite, so
    use the portable CPUS detections as the default here as
    well.

diff --git a/docs/docsite/Makefile b/docs/docsite/Makefile
index 7978d69719..78b3616565 100644
--- a/docs/docsite/Makefile
+++ b/docs/docsite/Makefile
@@ -1,7 +1,11 @@
 SITELIB = $(shell python -c "from distutils.sysconfig import get_python_lib; print get_python_lib()")
 FORMATTER=../../hacking/module_formatter.py
 DUMPER=../../hacking/dump_playbook_attributes.py
+ifeq ($(shell echo $(OS) | egrep -c 'Darwin|FreeBSD|OpenBSD|DragonFly'),1)
+CPUS := $(shell sysctl hw.ncpu|awk '{print $2}')
+else
 CPUS := $(shell nproc)
+endif
 
 all: clean docs
 
