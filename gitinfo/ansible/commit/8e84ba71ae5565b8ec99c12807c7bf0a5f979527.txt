commit 8e84ba71ae5565b8ec99c12807c7bf0a5f979527
Author: Lee H <lee@leeh.uk>
Date:   Thu Jan 14 08:53:22 2016 -0500

    - fix check_mode test to avoid errors
    
    - correct test mode check to ensure it returns and doesnt apply changes
      (via jmainguy)

diff --git a/lib/ansible/modules/database/mysql/mysql_user.py b/lib/ansible/modules/database/mysql/mysql_user.py
index 8c16d13656..b930b71613 100644
--- a/lib/ansible/modules/database/mysql/mysql_user.py
+++ b/lib/ansible/modules/database/mysql/mysql_user.py
@@ -333,8 +333,8 @@ def user_mod(cursor, user, host, host_all, password, encrypted, new_priv, append
     return changed
 
 def user_delete(cursor, user, host, host_all, check_mode):
-    if module.check_mode:
-        changed = True
+    if check_mode:
+        return True
 
     if host_all:
         hostnames = user_get_hostnames(cursor, user)
