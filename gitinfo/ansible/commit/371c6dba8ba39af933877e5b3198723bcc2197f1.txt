commit 371c6dba8ba39af933877e5b3198723bcc2197f1
Author: Will Thames <will@thames.id.au>
Date:   Fri Sep 29 06:20:10 2017 +1000

    Fix aws_s3 connection exception handling (#30955)
    
    `ProfileNotFound` does not have a `response` attribute, and
    `NoCredentialsError` does not occur at connection creation time.

diff --git a/lib/ansible/modules/cloud/amazon/aws_s3.py b/lib/ansible/modules/cloud/amazon/aws_s3.py
index d2551bc899..216d978d0e 100644
--- a/lib/ansible/modules/cloud/amazon/aws_s3.py
+++ b/lib/ansible/modules/cloud/amazon/aws_s3.py
@@ -609,9 +609,8 @@ def main():
             aws_connect_kwargs.pop(key, None)
     try:
         s3 = get_s3_connection(module, aws_connect_kwargs, location, rgw, s3_url)
-    except (botocore.exceptions.NoCredentialsError, botocore.exceptions.ProfileNotFound) as e:
-        module.fail_json(msg="Can't authorize connection. Check your credentials and profile.",
-                         exceptions=traceback.format_exc(), **camel_dict_to_snake_dict(e.response))
+    except botocore.exceptions.ProfileNotFound as e:
+        module.fail_json(msg=to_native(e))
 
     validate = not ignore_nonexistent_bucket
 
