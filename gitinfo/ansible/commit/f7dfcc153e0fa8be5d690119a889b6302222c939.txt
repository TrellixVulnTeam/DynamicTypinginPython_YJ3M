commit f7dfcc153e0fa8be5d690119a889b6302222c939
Author: Keith Hassen <keith.hassen@gmail.com>
Date:   Sun Nov 22 21:53:21 2015 -0500

    Fail if any group name is not resolved to an ID.

diff --git a/lib/ansible/modules/cloud/amazon/ec2.py b/lib/ansible/modules/cloud/amazon/ec2.py
index f3b28abc07..3fcf69eee8 100755
--- a/lib/ansible/modules/cloud/amazon/ec2.py
+++ b/lib/ansible/modules/cloud/amazon/ec2.py
@@ -889,6 +889,9 @@ def create_instances(module, ec2, vpc, override_count=None):
                 grp_details = ec2.get_all_security_groups()
             if isinstance(group_name, basestring):
                 group_name = [group_name]
+            unmatched = list(set(group_name) - set([str(grp.name) for grp in grp_details]))
+            if len(unmatched) > 0:
+                module.fail_json(msg="the following group names are not valid: %s" % ','.join(unmatched))
             group_id = [ str(grp.id) for grp in grp_details if str(grp.name) in group_name ]
         # Now we try to lookup the group id testing if group exists.
         elif group_id:
