commit dd4838e4aadc8f1310aa2743558f343832aab876
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Mon May 25 09:22:08 2015 -0700

    Refactor dump compression and use get_bin_path for finding the compressors

diff --git a/lib/ansible/modules/database/mysql/mysql_db.py b/lib/ansible/modules/database/mysql/mysql_db.py
index b28ef219f6..0cf0ea5c61 100644
--- a/lib/ansible/modules/database/mysql/mysql_db.py
+++ b/lib/ansible/modules/database/mysql/mysql_db.py
@@ -143,14 +143,20 @@ def db_dump(module, host, user, password, db_name, target, all_databases, port,
         cmd += " --all-databases"
     else:
         cmd += " %s" % pipes.quote(db_name)
+
+    path = None
     if os.path.splitext(target)[-1] == '.gz':
-        cmd = cmd + ' | gzip > ' + pipes.quote(target)
+        path = module.get_bin_path('gzip', True)
     elif os.path.splitext(target)[-1] == '.bz2':
-        cmd = cmd + ' | bzip2 > ' + pipes.quote(target)
+        path = module.get_bin_path('bzip2', True)
     elif os.path.splitext(target)[-1] == '.xz':
-        cmd = cmd + ' | xz > ' + pipes.quote(target)
+        path = module.get_bin_path('xz', True)
+
+    if path:
+        cmd = '%s | %s > %s' % (cmd, path, pipes.quote(target))
     else:
         cmd += " > %s" % pipes.quote(target)
+
     rc, stdout, stderr = module.run_command(cmd, use_unsafe_shell=True)
     return rc, stdout, stderr
 
