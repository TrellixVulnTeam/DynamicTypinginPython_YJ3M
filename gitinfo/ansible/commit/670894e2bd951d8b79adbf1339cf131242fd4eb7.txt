commit 670894e2bd951d8b79adbf1339cf131242fd4eb7
Author: Matt Martz <matt@sivel.net>
Date:   Tue Jun 2 14:16:39 2015 -0500

    Move building the play_ds into a method, that can be overridden

diff --git a/lib/ansible/cli/adhoc.py b/lib/ansible/cli/adhoc.py
index 3607e3ee03..9bc234507c 100644
--- a/lib/ansible/cli/adhoc.py
+++ b/lib/ansible/cli/adhoc.py
@@ -65,6 +65,13 @@ class AdHocCLI(CLI):
 
         return True
 
+    def _play_ds(self, pattern):
+        return dict(
+            name = "Ansible Ad-Hoc",
+            hosts = pattern,
+            gather_facts = 'no',
+            tasks = [ dict(action=dict(module=self.options.module_name, args=parse_kv(self.options.module_args))), ]
+        )
 
     def run(self):
         ''' use Runner lib to do SSH things '''
@@ -117,13 +124,7 @@ class AdHocCLI(CLI):
         #    results = runner.run()
 
         # create a pseudo-play to execute the specified module via a single task
-        play_ds = dict(
-            name = "Ansible Ad-Hoc",
-            hosts = pattern,
-            gather_facts = 'no',
-            tasks = [ dict(action=dict(module=self.options.module_name, args=parse_kv(self.options.module_args))), ]
-        )
-
+        play_ds = self._play_ds(pattern)
         play = Play().load(play_ds, variable_manager=variable_manager, loader=loader)
 
         # now create a task queue manager to execute the play
