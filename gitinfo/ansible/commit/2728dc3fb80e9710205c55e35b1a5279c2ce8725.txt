commit 2728dc3fb80e9710205c55e35b1a5279c2ce8725
Author: Steve Gargan <steve.gargan@gmail.com>
Date:   Tue Mar 3 14:18:56 2015 +0000

    fix logic that tests for change in an existing registered service

diff --git a/lib/ansible/modules/extras/clustering/consul b/lib/ansible/modules/extras/clustering/consul
index fa1e06c367..8aa2ce1fe4 100644
--- a/lib/ansible/modules/extras/clustering/consul
+++ b/lib/ansible/modules/extras/clustering/consul
@@ -224,7 +224,7 @@ def add_service(module, service):
 
     # there is no way to retreive the details of checks so if a check is present
     # in the service it must be reregistered
-    if service.has_checks() or not(existing or existing == service):
+    if service.has_checks() or not existing or not existing == service:
 
         service.register(consul_api)
         # check that it registered correctly
