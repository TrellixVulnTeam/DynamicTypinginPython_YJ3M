commit 0f24199012531a69bb9256ee267bb0a1651aeb8f
Author: Trishna Guha <trishnaguha17@gmail.com>
Date:   Thu Jan 4 18:12:44 2018 +0530

    make eos_vlan idempotent (#34443)
    
    Signed-off-by: Trishna Guha <trishnaguha17@gmail.com>

diff --git a/lib/ansible/modules/network/eos/eos_vlan.py b/lib/ansible/modules/network/eos/eos_vlan.py
index 41f613102d..c93cee7aa2 100644
--- a/lib/ansible/modules/network/eos/eos_vlan.py
+++ b/lib/ansible/modules/network/eos/eos_vlan.py
@@ -140,7 +140,8 @@ def map_obj_to_commands(updates, module):
         elif state == 'present':
             if not obj_in_have:
                 commands.append('vlan %s' % w['vlan_id'])
-                commands.append('name %s' % w['name'])
+                if w['name']:
+                    commands.append('name %s' % w['name'])
 
                 if w['interfaces']:
                     for i in w['interfaces']:
@@ -172,13 +173,15 @@ def map_obj_to_commands(updates, module):
         else:
             if not obj_in_have:
                 commands.append('vlan %s' % w['vlan_id'])
-                commands.append('name %s' % w['name'])
+                if w['name']:
+                    commands.append('name %s' % w['name'])
                 commands.append('state %s' % w['state'])
-            elif obj_in_have['name'] != w['name'] or obj_in_have['state'] != w['state']:
+            elif (w['name'] and obj_in_have['name'] != w['name']) or obj_in_have['state'] != w['state']:
                 commands.append('vlan %s' % w['vlan_id'])
 
-                if obj_in_have['name'] != w['name']:
-                    commands.append('name %s' % w['name'])
+                if w['name']:
+                    if obj_in_have['name'] != w['name']:
+                        commands.append('name %s' % w['name'])
 
                 if obj_in_have['state'] != w['state']:
                     commands.append('state %s' % w['state'])
