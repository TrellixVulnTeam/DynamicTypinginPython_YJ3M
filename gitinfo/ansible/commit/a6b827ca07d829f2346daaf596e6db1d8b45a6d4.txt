commit a6b827ca07d829f2346daaf596e6db1d8b45a6d4
Author: Serge van Ginderachter <serge@vanginderachter.be>
Date:   Sat May 11 00:07:54 2013 +0200

    don't parse subdirs in host/group_vars
    
    as those are not supported in
    core vars_plugins/group_vars.py
    but might be used by other vars_plugins

diff --git a/lib/ansible/inventory/vars_plugins/group_vars.py b/lib/ansible/inventory/vars_plugins/group_vars.py
index d3864e400f..d07c90ce58 100644
--- a/lib/ansible/inventory/vars_plugins/group_vars.py
+++ b/lib/ansible/inventory/vars_plugins/group_vars.py
@@ -47,7 +47,7 @@ class VarsModule(object):
             p = os.path.join(basedir, "group_vars/%s" % x)
             paths = [p, '.'.join([p, 'yml']), '.'.join([p, 'yaml'])]
             for path in paths:
-                if os.path.exists(path):
+                if os.path.exists(path) and not os.path.isdir(path):
                     data = utils.parse_yaml_from_file(path)
                     if type(data) != dict:
                         raise errors.AnsibleError("%s must be stored as a dictionary/hash" % path)
@@ -57,7 +57,7 @@ class VarsModule(object):
         p = os.path.join(basedir, "host_vars/%s" % host.name)
         paths = [p, '.'.join([p, 'yml']), '.'.join([p, 'yaml'])]
         for path in paths:
-            if os.path.exists(path):
+            if os.path.exists(path) and not os.path.isdir(path):
                 data = utils.parse_yaml_from_file(path)
                 if type(data) != dict:
                     raise errors.AnsibleError("%s must be stored as a dictionary/hash" % path)
