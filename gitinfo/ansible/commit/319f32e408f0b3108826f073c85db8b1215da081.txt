commit 319f32e408f0b3108826f073c85db8b1215da081
Author: Paul Durivage <pauldurivage@gmail.com>
Date:   Thu Jun 19 16:41:05 2014 -0500

    Move check down for access to

diff --git a/library/windows/win_user.ps1 b/library/windows/win_user.ps1
index 5fbb5cca27..25267b631b 100644
--- a/library/windows/win_user.ps1
+++ b/library/windows/win_user.ps1
@@ -56,11 +56,6 @@ If (-not $params.name.GetType)
     Fail-Json $result "missing required arguments: name"
 }
 
-If (-not $params.password.GetType)
-{
-    Fail-Json $result "missing required arguments: password"
-}
-
 If ($params.state) {
     $state = $params.state.ToString().ToLower()
     If (($state -ne 'present') -and ($state -ne 'absent')) {
@@ -71,6 +66,11 @@ Elseif (!$params.state) {
     $state = "present"
 }
 
+If ((-not $params.password.GetType) -and ($state -eq 'present'))
+{
+    Fail-Json $result "missing required arguments: password"
+}
+
 $username = Get-Attr $params "name"
 $password = Get-Attr $params "password"
 
