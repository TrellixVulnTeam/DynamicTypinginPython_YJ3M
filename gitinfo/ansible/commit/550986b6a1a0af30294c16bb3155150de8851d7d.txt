commit 550986b6a1a0af30294c16bb3155150de8851d7d
Author: Fabian Arrotin <fabian.arrotin@arrfab.net>
Date:   Fri Apr 5 20:37:58 2013 +0200

    Added an extra check for target nodes with selinux but without libselinux-python package installed

diff --git a/lib/ansible/module_common.py b/lib/ansible/module_common.py
index 8e221ad9e7..7c1619c93f 100644
--- a/lib/ansible/module_common.py
+++ b/lib/ansible/module_common.py
@@ -84,6 +84,9 @@ try:
     import selinux
     HAVE_SELINUX=True
 except ImportError:
+    if os.path.exists("/selinux/enforce"):
+        sys.stderr.write('Error: ansible requires the package libselinux-python on nodes with selinux, none found!')
+        sys.exit(1)
     pass
 
 try:
