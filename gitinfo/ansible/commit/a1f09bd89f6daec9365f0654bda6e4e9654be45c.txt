commit a1f09bd89f6daec9365f0654bda6e4e9654be45c
Author: Serge van Ginderachter <serge@vanginderachter.be>
Date:   Wed Aug 20 01:54:15 2014 -0500

    Merge variables for hosts instead of updating in get_variables()

diff --git a/lib/ansible/inventory/host.py b/lib/ansible/inventory/host.py
index 1b3c10f9d4..d4dc20fa46 100644
--- a/lib/ansible/inventory/host.py
+++ b/lib/ansible/inventory/host.py
@@ -58,7 +58,7 @@ class Host(object):
         groups = self.get_groups()
         for group in sorted(groups, key=lambda g: g.depth):
             results = utils.combine_vars(results, group.get_variables())
-        results.update(self.vars)
+        results = utils.combine_vars(results, self.vars)
         results['inventory_hostname'] = self.name
         results['inventory_hostname_short'] = self.name.split('.')[0]
         results['group_names'] = sorted([ g.name for g in groups if g.name != 'all'])
