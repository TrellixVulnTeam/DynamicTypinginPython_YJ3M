commit bc60f52db5a180cbac72405ae2d75f169fb66ca3
Author: Brian Coca <bcoca@ansible.com>
Date:   Thu Mar 17 07:19:21 2016 -0700

    avoid exceptiosn when not being called by CLI

diff --git a/lib/ansible/plugins/callback/slack.py b/lib/ansible/plugins/callback/slack.py
index 575a1112c6..9fc406fd34 100644
--- a/lib/ansible/plugins/callback/slack.py
+++ b/lib/ansible/plugins/callback/slack.py
@@ -23,7 +23,10 @@ import json
 import os
 import uuid
 
-from __main__ import cli
+try:
+    from __main__ import cli
+except ImportError:
+    cli = None
 
 from ansible.constants import mk_boolean
 from ansible.module_utils.urls import open_url
