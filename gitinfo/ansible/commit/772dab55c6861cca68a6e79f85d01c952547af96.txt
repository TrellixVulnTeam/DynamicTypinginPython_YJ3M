commit 772dab55c6861cca68a6e79f85d01c952547af96
Author: Ganesh Nalawade <ganesh634@gmail.com>
Date:   Fri Sep 8 09:10:38 2017 +0530

    Add check for port and host in ios_interface (#29119)
    
    Fixes #29118

diff --git a/lib/ansible/modules/network/ios/ios_interface.py b/lib/ansible/modules/network/ios/ios_interface.py
index 39d52c6a8e..d3a9cd468e 100644
--- a/lib/ansible/modules/network/ios/ios_interface.py
+++ b/lib/ansible/modules/network/ios/ios_interface.py
@@ -385,10 +385,12 @@ def check_declarative_intent_params(module, want, result):
                             if item.startswith('Port Description:'):
                                 have_port.append(item.split(':')[1].strip())
             for item in want_neighbors:
-                if item['host'] not in have_host:
-                    failed_conditions.append('host ' + item['host'])
-                if item['port'] not in have_port:
-                    failed_conditions.append('port ' + item['port'])
+                host = item.get('host')
+                port = item.get('port')
+                if host and host not in have_host:
+                    failed_conditions.append('host ' + host)
+                if port and port not in have_port:
+                    failed_conditions.append('port ' + port)
     return failed_conditions
 
 
