commit 2b3381de7c6e0924b29123c33f0627a12418f2c8
Author: phy1729 <phy1729@gmail.com>
Date:   Tue Nov 19 13:35:01 2013 -0600

    Add zsh support for working dir independant sourcing

diff --git a/hacking/env-setup b/hacking/env-setup
index fcf8e4d049..38c372a79a 100755
--- a/hacking/env-setup
+++ b/hacking/env-setup
@@ -5,6 +5,8 @@
 # When run using source as directed, $0 gets set to bash, so we must use $BASH_SOURCE
 if [ -n "$BASH_SOURCE" ] ; then
     HACKING_DIR=`dirname $BASH_SOURCE`
+elif [ ${0:(-9)} = "env-setup" ]; then
+    HACKING_DIR=`dirname $0`
 else
     HACKING_DIR="$PWD/hacking"
 fi
