commit 731bf1b11ddd86b0801560d4533ae39cb8dadb5a
Author: Hideki Saito <saito@fgrep.org>
Date:   Mon Nov 26 13:08:03 2018 +0900

    Fix issue #39412 (#39483)
    
    * postgresql_db dump does not fail on FATAL error when using compression

diff --git a/lib/ansible/modules/database/postgresql/postgresql_db.py b/lib/ansible/modules/database/postgresql/postgresql_db.py
index 9d6df4a98e..e29e5d65bc 100644
--- a/lib/ansible/modules/database/postgresql/postgresql_db.py
+++ b/lib/ansible/modules/database/postgresql/postgresql_db.py
@@ -460,6 +460,9 @@ def main():
                 module.fail_json(msg=to_native(e), exception=traceback.format_exc())
 
         elif state in ("dump", "restore"):
+            if not db_exists(cursor, db) and state == "dump":
+                module.fail_json(
+                    msg="database \"{db}\" does not exist".format(db=db))
             method = state == "dump" and db_dump or db_restore
             try:
                 rc, stdout, stderr, cmd = method(module, target, target_opts, db, **kw)
