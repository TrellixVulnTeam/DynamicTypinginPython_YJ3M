commit 9e1b19e3640de5992864420ae68c4e4dcf3b147c
Author: Paul Belanger <pabelanger@redhat.com>
Date:   Wed Jul 10 09:41:54 2019 -0400

    Fix nxos_install_os test cases typo (#58825)
    
    This should be ansible_connection, not connection_type. We can also
    update local testing logic.
    
    Remove nxos_install_os/tasks/network_local.yaml as it is nolonger used.
    
    Signed-off-by: Paul Belanger <pabelanger@redhat.com>

diff --git a/test/integration/targets/nxos_install_os/tasks/main.yaml b/test/integration/targets/nxos_install_os/tasks/main.yaml
index 60614acac3..9199166cd5 100644
--- a/test/integration/targets/nxos_install_os/tasks/main.yaml
+++ b/test/integration/targets/nxos_install_os/tasks/main.yaml
@@ -1,12 +1,10 @@
 ---
 # Upgrade using SSH
 - include: network_cli.yaml
-  when: connection_type == 'network_cli'
-- include: network_local.yaml
-  when: connection_type == 'cli_local'
+  when: ansible_connection == 'network_cli'
 
 # Upgrade using NX-API
 - include: httpapi.yaml
-  when: connection_type == 'httpapi'
+  when: ansible_connection == 'httpapi'
 - include: nxapi.yaml
-  when: connection_type == 'nxapi_local'
+  when: ansible_connection == 'local'
diff --git a/test/integration/targets/nxos_install_os/tasks/network_local.yaml b/test/integration/targets/nxos_install_os/tasks/network_local.yaml
deleted file mode 100644
index 0e33562828..0000000000
--- a/test/integration/targets/nxos_install_os/tasks/network_local.yaml
+++ /dev/null
@@ -1,16 +0,0 @@
----
-- name: collect common test cases
-  find:
-    paths: "{{ role_path }}/tests/common"
-    patterns: "{{ testcase }}.yaml"
-  connection: local
-  register: test_cases
-
-- name: set test_items
-  set_fact: test_items="{{ test_cases.files | map(attribute='path') | list }}"
-
-- name: run test cases (ansible_connection=local transport=ssh)
-  include: "{{ test_case_to_run }} ansible_connection=local connection={{ cli }}"
-  with_items: "{{ test_items }}"
-  loop_control:
-    loop_var: test_case_to_run
