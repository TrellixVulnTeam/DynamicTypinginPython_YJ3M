commit 66f90d1401f4a93a114d6f6f5a5bd26ce7ac44dc
Author: Ricardo Carrillo Cruz <ricardo.carrillo.cruz@gmail.com>
Date:   Mon Jul 24 14:13:51 2017 +0200

    Add update_password always and update_password on_create tests to iosxr_user (#27230)
    
    * Add idempotency test to delete aggregate of iosxr users
    
    * Add update_password always and on_create asserts to iosxr_user

diff --git a/test/integration/targets/iosxr_user/tests/cli/basic.yaml b/test/integration/targets/iosxr_user/tests/cli/basic.yaml
index 964518b953..83bae0c251 100644
--- a/test/integration/targets/iosxr_user/tests/cli/basic.yaml
+++ b/test/integration/targets/iosxr_user/tests/cli/basic.yaml
@@ -21,10 +21,26 @@
       - '"username" in result.commands[0]'
       - '"secret" in result.commands[0]'
 
-- name: Add user again (Idempotent)
+- name: Create user with update_password always (not idempotent)
   iosxr_user:
     name: ansibletest1
     password: test
+    update_password: always
+    state: present
+    provider: "{{ cli }}"
+  register: result
+
+- assert:
+    that:
+      - 'result.changed == true'
+      - '"username" in result.commands[0]'
+      - '"secret" in result.commands[0]'
+
+- name: Create user again with update_password on_create (idempotent)
+  iosxr_user:
+    name: ansibletest1
+    password: test
+    update_password: on_create
     state: present
     provider: "{{ cli }}"
   register: result
@@ -49,11 +65,27 @@
       - 'result.changed == true'
       - 'result.commands == ["username ansibletest2 group sysadmin", "username ansibletest3 group sysadmin"]'
 
-- name: Add collection of users again (Idempotent)
+- name: Add collection of users again with update_password always (not idempotent)
+  iosxr_user:
+    users:
+      - name: ansibletest2
+      - name: ansibletest3
+    state: present
+    group: sysadmin
+    provider: "{{ cli }}"
+  register: result
+
+- assert:
+    that:
+      - 'result.changed == true'
+      - 'result.commands == ["username ansibletest2 group sysadmin", "username ansibletest3 group sysadmin"]'
+
+- name: Add collection of users again with update_password on_create (idempotent)
   iosxr_user:
     users:
       - name: ansibletest2
       - name: ansibletest3
+    update_password: on_create
     state: present
     group: sysadmin
     provider: "{{ cli }}"
