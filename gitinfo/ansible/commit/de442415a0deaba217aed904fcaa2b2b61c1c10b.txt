commit de442415a0deaba217aed904fcaa2b2b61c1c10b
Author: Julien Pepy <komuta@gmail.com>
Date:   Mon Jul 28 08:26:38 2014 +0200

    Fix composer module checkmode and change detection

diff --git a/lib/ansible/modules/extras/packaging/language/composer.py b/lib/ansible/modules/extras/packaging/language/composer.py
index 5d8ba563c8..f788f53dd5 100644
--- a/lib/ansible/modules/extras/packaging/language/composer.py
+++ b/lib/ansible/modules/extras/packaging/language/composer.py
@@ -138,6 +138,7 @@ def main():
 
     if module.check_mode:
         options.add("--dry-run")
+        del module.params['CHECKMODE']
 
     # Get composer command with fallback to default  
     command = module.params['command']
