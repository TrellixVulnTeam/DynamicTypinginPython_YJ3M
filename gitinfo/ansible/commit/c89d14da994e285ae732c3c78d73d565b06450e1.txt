commit c89d14da994e285ae732c3c78d73d565b06450e1
Author: Felix Fontein <felix@fontein.de>
Date:   Wed Jan 9 20:59:23 2019 +0100

    Add delay to fix spurious test breaks.

diff --git a/test/integration/targets/ufw/tasks/main.yml b/test/integration/targets/ufw/tasks/main.yml
index d792791d2b..21d3011021 100644
--- a/test/integration/targets/ufw/tasks/main.yml
+++ b/test/integration/targets/ufw/tasks/main.yml
@@ -21,6 +21,12 @@
 
   # Cleanup
   always:
+  - pause:
+      # ufw creates backups of the rule files with a timestamp; if reset is called
+      # twice in a row fast enough (so that both timestamps are taken in the same second),
+      # the second call will notice that the backup files are already there and fail.
+      # Waiting one second fixes this problem.
+      seconds: 1
   - name: Reset ufw to factory defaults and disable
     ufw:
       state: reset
diff --git a/test/integration/targets/ufw/tasks/run-test.yml b/test/integration/targets/ufw/tasks/run-test.yml
index e89e8921c1..469336e078 100644
--- a/test/integration/targets/ufw/tasks/run-test.yml
+++ b/test/integration/targets/ufw/tasks/run-test.yml
@@ -1,4 +1,10 @@
 ---
+- pause:
+    # ufw creates backups of the rule files with a timestamp; if reset is called
+    # twice in a row fast enough (so that both timestamps are taken in the same second),
+    # the second call will notice that the backup files are already there and fail.
+    # Waiting one second fixes this problem.
+    seconds: 1
 - name: Reset ufw to factory defaults
   ufw:
     state: reset
