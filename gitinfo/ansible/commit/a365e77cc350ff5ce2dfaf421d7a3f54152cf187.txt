commit a365e77cc350ff5ce2dfaf421d7a3f54152cf187
Author: Nathaniel Case <ncase@redhat.com>
Date:   Thu Sep 5 14:48:16 2019 -0400

    Connect before reading the prompt? (#61797)

diff --git a/lib/ansible/plugins/connection/network_cli.py b/lib/ansible/plugins/connection/network_cli.py
index 3e2e796d97..6611d91be5 100644
--- a/lib/ansible/plugins/connection/network_cli.py
+++ b/lib/ansible/plugins/connection/network_cli.py
@@ -346,6 +346,7 @@ class Connection(NetworkConnectionBase):
         name += "paramiko [%s]" % self._play_context.remote_addr
         return name
 
+    @ensure_connect
     def get_prompt(self):
         """Returns the current prompt from the device"""
         return self._matched_prompt
