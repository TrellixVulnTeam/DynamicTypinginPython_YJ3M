commit 0a730671539b7f3ba20ae4f5b156a893606eb78b
Author: rpe-github <robert.peichaer@gmail.com>
Date:   Sun Jan 25 23:13:54 2015 +0100

    Use basename -- $0 in case $0 starts with a dash.
    
    For example, pdksh $0 contains '-ksh'.

diff --git a/hacking/env-setup b/hacking/env-setup
index d81ed3b65d..10adad5099 100644
--- a/hacking/env-setup
+++ b/hacking/env-setup
@@ -14,7 +14,7 @@ fi
 # When run using source as directed, $0 gets set to bash, so we must use $BASH_SOURCE
 if [ -n "$BASH_SOURCE" ] ; then
     HACKING_DIR=$(dirname "$BASH_SOURCE")
-elif [ $(basename "$0") = "env-setup" ]; then
+elif [ $(basename -- "$0") = "env-setup" ]; then
     HACKING_DIR=$(dirname "$0")
 else
     HACKING_DIR="$PWD/hacking"
