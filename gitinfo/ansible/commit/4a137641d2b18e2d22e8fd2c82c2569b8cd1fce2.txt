commit 4a137641d2b18e2d22e8fd2c82c2569b8cd1fce2
Author: Daniel Hokka Zakrisson <daniel@hozac.com>
Date:   Mon Feb 18 13:23:20 2013 +0100

    check_mode is a module property

diff --git a/library/user b/library/user
index cb1b1aafd2..93aae6ccbe 100644
--- a/library/user
+++ b/library/user
@@ -351,7 +351,7 @@ class User(object):
         # skip if no changes to be made
         if len(cmd) == 1:
             return (None, '', '')
-        elif self.check_mode:
+        elif self.module.check_mode:
             return (True, '', '')
 
         cmd.append(self.name)
@@ -959,7 +959,7 @@ class AIX(User):
         # skip if no changes to be made
         if len(cmd) == 1:
             (rc, out, err) = (None, '', '')
-        elif self.check_mode:
+        elif self.module.check_mode:
             return (True, '', '')
         else:
             cmd.append(self.name)
