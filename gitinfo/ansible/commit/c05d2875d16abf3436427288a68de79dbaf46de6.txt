commit c05d2875d16abf3436427288a68de79dbaf46de6
Author: Otto Kekäläinen <otto@seravo.fi>
Date:   Fri May 15 17:40:30 2015 +0300

    gluster_volume: Improved parsing of cluster parameter list

diff --git a/lib/ansible/modules/extras/system/gluster_volume.py b/lib/ansible/modules/extras/system/gluster_volume.py
index 2ea6b974ad..c5d852731c 100644
--- a/lib/ansible/modules/extras/system/gluster_volume.py
+++ b/lib/ansible/modules/extras/system/gluster_volume.py
@@ -256,6 +256,7 @@ def probe(host, myhostname):
 
 def probe_all_peers(hosts, peers, myhostname):
     for host in hosts:
+        host = host.strip() # Clean up any extra space for exact comparison
         if host not in peers:
             # dont probe ourselves
             if myhostname != host:
@@ -347,6 +348,11 @@ def main():
     if not myhostname:
         myhostname = socket.gethostname()
 
+    # Clean up if last element is empty. Consider that yml can look like this:
+    #   cluster="{% for host in groups['glusterfs'] %}{{ hostvars[host]['private_ip'] }},{% endfor %}"
+    if cluster != None and cluster[-1] == '':
+        cluster = cluster[0:-1]
+
     if brick_paths != None and "," in brick_paths:
         brick_paths = brick_paths.split(",")
     else:
