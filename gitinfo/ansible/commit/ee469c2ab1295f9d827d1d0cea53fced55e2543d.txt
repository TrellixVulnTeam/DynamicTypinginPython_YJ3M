commit ee469c2ab1295f9d827d1d0cea53fced55e2543d
Author: Toshio Kuratomi <a.badger@gmail.com>
Date:   Wed Jan 14 13:03:21 2015 -0800

    Add a check that unarchive works with complex_args

diff --git a/test/integration/roles/test_unarchive/tasks/main.yml b/test/integration/roles/test_unarchive/tasks/main.yml
index 7caa68e65c..f9e8fac120 100644
--- a/test/integration/roles/test_unarchive/tasks/main.yml
+++ b/test/integration/roles/test_unarchive/tasks/main.yml
@@ -89,6 +89,20 @@
       - "unarchive02c.changed == false"
       - "unarchive02c.skipped == true"
 
+- name: unarchive a tar.gz file with creates over an existing file using complex_args
+  unarchive:
+    src: "{{output_dir}}/test-unarchive.tar.gz"
+    dest: "{{output_dir | expanduser}}/test-unarchive-tar-gz"
+    copy: no
+    creates: "{{output_dir}}/test-unarchive-tar-gz/foo-unarchive.txt"
+  register: unarchive02c
+
+- name: verify that the file was not marked as changed
+  assert:
+    that:
+      - "unarchive02c.changed == false"
+      - "unarchive02c.skipped == true"
+
 - name: remove our tar.gz unarchive destination
   file: path={{output_dir}}/test-unarchive-tar-gz state=absent
 
