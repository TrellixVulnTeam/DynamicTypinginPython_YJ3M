commit 0effd158ae1e6403c6048410f79b779bdf344d7d
Author: Sai Ganesh Bandiatmakuri <saiganesh@google.com>
Date:   Wed Nov 27 17:12:24 2019 -0800

    Internal change
    
    PiperOrigin-RevId: 282857541

diff --git a/official/staging/shakespeare/shakespeare_benchmark.py b/official/staging/shakespeare/shakespeare_benchmark.py
index e6706858..d20ab54e 100644
--- a/official/staging/shakespeare/shakespeare_benchmark.py
+++ b/official/staging/shakespeare/shakespeare_benchmark.py
@@ -88,9 +88,10 @@ class ShakespeareBenchmarkBase(PerfZeroBenchmark):
       elapsed = time_log[-1].timestamp - time_log[warmup].timestamp
       num_examples = (
           total_batch_size * log_steps * (len(time_log) - warmup - 1))
-      examples_per_sec = num_examples / elapsed
-      metrics.append({'name': 'exp_per_second',
-                      'value': examples_per_sec})
+      if elapsed > 0:
+        examples_per_sec = num_examples / elapsed
+        metrics.append({'name': 'exp_per_second',
+                        'value': examples_per_sec})
 
     flags_str = flags_core.get_nondefault_flags_as_str()
     self.report_benchmark(iters=-1, wall_time=wall_time_sec,
