commit bae940dcf0c50087029c624c7d47e396ceb34dc2
Author: Haoyu Zhang <haoyuzhang@google.com>
Date:   Fri May 10 07:57:09 2019 -0700

    Fix broken test in V2 (#6755)

diff --git a/official/resnet/keras/keras_common.py b/official/resnet/keras/keras_common.py
index 3124e041..cd114e9d 100644
--- a/official/resnet/keras/keras_common.py
+++ b/official/resnet/keras/keras_common.py
@@ -120,9 +120,10 @@ class PiecewiseConstantDecayWithWarmup(
 
   def _get_learning_rate(self, step):
     """Compute learning rate at given step."""
-    with tf.name_scope(self.name, 'PiecewiseConstantDecayWithWarmup', [
-        self.rescaled_lr, self.step_boundaries, self.lr_values,
-        self.warmup_steps, self.compute_lr_on_cpu]):
+    with tf.compat.v1.name_scope(self.name, 'PiecewiseConstantDecayWithWarmup',
+                                 [self.rescaled_lr, self.step_boundaries,
+                                  self.lr_values, self.warmup_steps,
+                                  self.compute_lr_on_cpu]):
       def warmup_lr(step):
         return self.rescaled_lr * (
             tf.cast(step, tf.float32) / tf.cast(self.warmup_steps, tf.float32))
