commit 399b778fe49f82374080cd949241a061b7d46e9d
Author: Hongkun Yu <hongkuny@google.com>
Date:   Thu Oct 10 12:32:28 2019 -0700

    experimental_allow_stateful is not necessary with make dataset fn
    
    PiperOrigin-RevId: 274015143

diff --git a/official/vision/image_classification/imagenet_preprocessing.py b/official/vision/image_classification/imagenet_preprocessing.py
index 01612cf2..ea75d91c 100644
--- a/official/vision/image_classification/imagenet_preprocessing.py
+++ b/official/vision/image_classification/imagenet_preprocessing.py
@@ -135,6 +135,7 @@ def process_record_dataset(dataset,
 
   options = tf.data.Options()
   options.experimental_slack = tf_data_experimental_slack
+  options.experimental_allow_stateful = True
   dataset = dataset.with_options(options)
 
   return dataset
