commit 3470b58a0fba3d6c0c6082bbd22b290c0b6698e3
Author: chsin <chsin@users.noreply.github.com>
Date:   Wed Apr 10 11:06:41 2019 -0400

    Support for non-TYPE_3BYTE_BGR images

diff --git a/samples/languages/java/object_detection/src/main/java/DetectObjects.java b/samples/languages/java/object_detection/src/main/java/DetectObjects.java
index bf865e93..ad1fb659 100644
--- a/samples/languages/java/object_detection/src/main/java/DetectObjects.java
+++ b/samples/languages/java/object_detection/src/main/java/DetectObjects.java
@@ -147,11 +147,12 @@ public class DetectObjects {
   private static Tensor<UInt8> makeImageTensor(String filename) throws IOException {
     BufferedImage img = ImageIO.read(new File(filename));
     if (img.getType() != BufferedImage.TYPE_3BYTE_BGR) {
-      throw new IOException(
-          String.format(
-              "Expected 3-byte BGR encoding in BufferedImage, found %d (file: %s). This code could be made more robust",
-              img.getType(), filename));
+      BufferedImage newImage = new BufferedImage(
+          img.getWidth(), img.getHeight(), BufferedImage.TYPE_3BYTE_BGR);
+      newImage.createGraphics().drawImage(img, 0, 0, img.getWidth(), img.getHeight(), null);
+      img = newImage;
     }
+      
     byte[] data = ((DataBufferByte) img.getData().getDataBuffer()).getData();
     // ImageIO.read seems to produce BGR-encoded images, but the model expects RGB.
     bgr2rgb(data);
