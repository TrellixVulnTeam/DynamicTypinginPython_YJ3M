commit 6f64dcb5e2de2e58e6f31f2f8b8d82247b4b64a9
Author: Haoyu Zhang <haoyuzhang@google.com>
Date:   Thu Dec 5 16:23:30 2019 -0800

    Remove code that disables pin-to-host optimization. It's disabled by default and we already have XLA presubmit that will catch any issues when the optimization is reenabled.
    
    PiperOrigin-RevId: 284078252

diff --git a/official/utils/misc/keras_utils.py b/official/utils/misc/keras_utils.py
index f7feafcf..90e366b0 100644
--- a/official/utils/misc/keras_utils.py
+++ b/official/utils/misc/keras_utils.py
@@ -179,10 +179,6 @@ def get_config_proto_v1(enable_xla=False):
     config = tf.compat.v1.ConfigProto()
     config.graph_options.optimizer_options.global_jit_level = (
         tf.OptimizerOptions.ON_2)
-    # Disable PinToHostOptimizer in grappler when enabling XLA because it causes
-    # OOM and performance regression.
-    config.graph_options.rewrite_options.pin_to_host_optimization = (
-        rewriter_config_pb2.RewriterConfig.OFF)
   return config
 
 
@@ -190,11 +186,6 @@ def set_config_v2(enable_xla=False):
   """Config eager context according to flag values using TF 2.0 API."""
   if enable_xla:
     tf.config.optimizer.set_jit(True)
-    # Disable PinToHostOptimizer in grappler when enabling XLA because it
-    # causes OOM and performance regression.
-    tf.config.optimizer.set_experimental_options(
-        {'pin_to_host_optimization': False}
-    )
 
 
 def is_v2_0():
