commit 6ab25864f01cbcc6ef50802fca5d401ee04240a6
Author: Yuxin Wu <ppwwyyxxc@gmail.com>
Date:   Tue Jan 30 10:08:43 2018 -0800

    Update build_imagenet_data.py (#3112)

diff --git a/research/inception/inception/data/build_imagenet_data.py b/research/inception/inception/data/build_imagenet_data.py
index 2c863900..67a3e8ae 100644
--- a/research/inception/inception/data/build_imagenet_data.py
+++ b/research/inception/inception/data/build_imagenet_data.py
@@ -170,6 +170,8 @@ def _float_feature(value):
 
 def _bytes_feature(value):
   """Wrapper for inserting bytes features into Example proto."""
+  if isinstance(value, six.string_types):           
+    value = six.binary_type(value, encoding='utf-8') 
   return tf.train.Feature(bytes_list=tf.train.BytesList(value=[value]))
 
 
@@ -312,7 +314,7 @@ def _process_image(filename, coder):
     width: integer, image width in pixels.
   """
   # Read the image file.
-  with tf.gfile.FastGFile(filename, 'r') as f:
+  with tf.gfile.FastGFile(filename, 'rb') as f:
     image_data = f.read()
 
   # Clean the dirty data.
