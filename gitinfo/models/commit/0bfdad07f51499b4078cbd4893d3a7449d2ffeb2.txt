commit 0bfdad07f51499b4078cbd4893d3a7449d2ffeb2
Author: Hongkun Yu <hongkuny@google.com>
Date:   Tue Apr 14 09:24:21 2020 -0700

    Makes the default batch_size=99000.
    
    PiperOrigin-RevId: 306453144

diff --git a/official/recommendation/data_pipeline.py b/official/recommendation/data_pipeline.py
index 6abc8747..1b4dd33a 100644
--- a/official/recommendation/data_pipeline.py
+++ b/official/recommendation/data_pipeline.py
@@ -331,7 +331,7 @@ class DatasetManager(object):
       """Returns batches for training."""
 
       # Estimator passes batch_size during training and eval_batch_size during
-      # eval. TPUEstimator only passes batch_size.
+      # eval.
       param_batch_size = (params["batch_size"] if self._is_training else
                           params.get("eval_batch_size") or params["batch_size"])
       if batch_size != param_batch_size:
@@ -713,7 +713,7 @@ class DummyConstructor(threading.Thread):
       """Returns dummy input batches for training."""
 
       # Estimator passes batch_size during training and eval_batch_size during
-      # eval. TPUEstimator only passes batch_size.
+      # eval.
       batch_size = (params["batch_size"] if is_training else
                     params.get("eval_batch_size") or params["batch_size"])
       num_users = params["num_users"]
diff --git a/official/recommendation/ncf_common.py b/official/recommendation/ncf_common.py
index e8a53eb5..0819a518 100644
--- a/official/recommendation/ncf_common.py
+++ b/official/recommendation/ncf_common.py
@@ -167,7 +167,7 @@ def define_ncf_flags():
       model_dir="/tmp/ncf/",
       data_dir="/tmp/movielens-data/",
       train_epochs=2,
-      batch_size=256,
+      batch_size=99000,
       hooks="ProfilerHook",
       tpu=None
   )
diff --git a/official/recommendation/run_tpu.sh b/official/recommendation/run_tpu.sh
deleted file mode 100755
index bcbb1929..00000000
--- a/official/recommendation/run_tpu.sh
+++ /dev/null
@@ -1,22 +0,0 @@
-#!/bin/bash
-set -e
-
-# Example settings:
-# export TPU="taylorrobie-tpu-0"
-# export BUCKET="gs://taylorrobie-tpu-test-bucket-2"
-
-# Remove IDE "not assigned" warning highlights.
-TPU=${TPU:-""}
-BUCKET=${BUCKET:-""}
-
-if [[ -z ${TPU} ]]; then
-  echo "Please set 'TPU' to the name of the TPU to be used."
-  exit 1
-fi
-
-if [[ -z ${BUCKET} ]]; then
-  echo "Please set 'BUCKET' to the GCS bucket to be used."
-  exit 1
-fi
-
-./run.sh
