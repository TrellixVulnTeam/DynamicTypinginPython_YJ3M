commit bc6bf2f48c6659848cf3ce517b7878eea44d97dd
Author: Andr√© Susano Pinto <andresp@google.com>
Date:   Sun Apr 26 12:52:31 2020 -0700

    Create output directories for finetuning data preparation if they don't exist.
    
    This time also cover squad type tasks.
    
    PiperOrigin-RevId: 308519331

diff --git a/official/nlp/data/squad_lib.py b/official/nlp/data/squad_lib.py
index 54f75a66..20587814 100644
--- a/official/nlp/data/squad_lib.py
+++ b/official/nlp/data/squad_lib.py
@@ -23,6 +23,7 @@ import collections
 import copy
 import json
 import math
+import os
 import six
 
 from absl import logging
@@ -108,6 +109,7 @@ class FeatureWriter(object):
     self.filename = filename
     self.is_training = is_training
     self.num_features = 0
+    tf.io.gfile.makedirs(os.path.dirname(filename))
     self._writer = tf.io.TFRecordWriter(filename)
 
   def process_feature(self, feature):
diff --git a/official/nlp/data/squad_lib_sp.py b/official/nlp/data/squad_lib_sp.py
index 6caa6e18..c65f713f 100644
--- a/official/nlp/data/squad_lib_sp.py
+++ b/official/nlp/data/squad_lib_sp.py
@@ -26,6 +26,7 @@ import collections
 import copy
 import json
 import math
+import os
 from absl import logging
 import numpy as np
 import tensorflow as tf
@@ -819,6 +820,7 @@ class FeatureWriter(object):
     self.filename = filename
     self.is_training = is_training
     self.num_features = 0
+    tf.io.gfile.makedirs(os.path.dirname(filename))
     self._writer = tf.io.TFRecordWriter(filename)
 
   def process_feature(self, feature):
