commit 5ef68f5731a67c510d966b2114e6a4b5cc69d245
Author: Taylor Robie <taylorrobie@google.com>
Date:   Tue Mar 20 13:32:12 2018 -0700

    Set correct number of train_epochs for resnet on imagenet, and fix help interception caused by moving arg parsing into main functions for resnet. (#3653)

diff --git a/official/resnet/cifar10_main.py b/official/resnet/cifar10_main.py
index b1ebbfbe..98e6c131 100644
--- a/official/resnet/cifar10_main.py
+++ b/official/resnet/cifar10_main.py
@@ -233,4 +233,4 @@ def main(argv):
 
 if __name__ == '__main__':
   tf.logging.set_verbosity(tf.logging.INFO)
-  tf.app.run(argv=sys.argv)
+  main(argv=sys.argv)
diff --git a/official/resnet/imagenet_main.py b/official/resnet/imagenet_main.py
index 99ad4679..50b283ea 100644
--- a/official/resnet/imagenet_main.py
+++ b/official/resnet/imagenet_main.py
@@ -297,6 +297,11 @@ def imagenet_model_fn(features, labels, mode, params):
 def main(argv):
   parser = resnet_run_loop.ResnetArgParser(
       resnet_size_choices=[18, 34, 50, 101, 152, 200])
+
+  parser.set_defaults(
+      train_epochs=100
+  )
+
   flags = parser.parse_args(args=argv[1:])
 
   input_function = flags.use_synthetic_data and get_synth_input_fn() or input_fn
@@ -305,4 +310,4 @@ def main(argv):
 
 if __name__ == '__main__':
   tf.logging.set_verbosity(tf.logging.INFO)
-  tf.app.run(argv=sys.argv)
+  main(argv=sys.argv)
