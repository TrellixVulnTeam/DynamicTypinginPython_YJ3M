commit e5de97b4a1fc533d765cb1e63c34c4e7f15e5edf
Author: Derek Chow <derekjchow@gmail.com>
Date:   Tue Jul 18 13:52:05 2017 -0700

    Do not optimize graph by default.

diff --git a/object_detection/export_inference_graph.py b/object_detection/export_inference_graph.py
index 699229be..bd6ac990 100644
--- a/object_detection/export_inference_graph.py
+++ b/object_detection/export_inference_graph.py
@@ -85,13 +85,15 @@ flags.DEFINE_string('trained_checkpoint_prefix', None,
                     'path/to/model.ckpt')
 flags.DEFINE_string('output_directory', None, 'Path to write outputs.')
 
-tf.app.flags.MarkFlagAsRequired('pipeline_config_path')
-tf.app.flags.MarkFlagAsRequired('trained_checkpoint_prefix')
-tf.app.flags.MarkFlagAsRequired('output_directory')
 FLAGS = flags.FLAGS
 
 
 def main(_):
+  assert FLAGS.pipeline_config_path, '`pipeline_config_path` is missing'
+  assert FLAGS.trained_checkpoint_prefix, (
+         '`trained_checkpoint_prefix` is missing')
+  assert FLAGS.output_directory, '`output_directory` is missing'
+
   pipeline_config = pipeline_pb2.TrainEvalPipelineConfig()
   with tf.gfile.GFile(FLAGS.pipeline_config_path, 'r') as f:
     text_format.Merge(f.read(), pipeline_config)
diff --git a/object_detection/exporter.py b/object_detection/exporter.py
index 943f408d..0b5d6d89 100644
--- a/object_detection/exporter.py
+++ b/object_detection/exporter.py
@@ -43,7 +43,7 @@ def freeze_graph_with_def_protos(
     filename_tensor_name,
     clear_devices,
     initializer_nodes,
-    optimize_graph=True,
+    optimize_graph=False,
     variable_names_blacklist=''):
   """Converts all variables in a graph and checkpoint into constants."""
   del restore_op_name, filename_tensor_name  # Unused by updated loading code.
@@ -289,7 +289,7 @@ def _export_inference_graph(input_type,
                             use_moving_averages,
                             trained_checkpoint_prefix,
                             output_directory,
-                            optimize_graph=True,
+                            optimize_graph=False,
                             output_collection_name='inference_op'):
   """Export helper."""
   tf.gfile.MakeDirs(output_directory)
@@ -340,7 +340,7 @@ def export_inference_graph(input_type,
                            pipeline_config,
                            trained_checkpoint_prefix,
                            output_directory,
-                           optimize_graph=True,
+                           optimize_graph=False,
                            output_collection_name='inference_op'):
   """Exports inference graph for the model specified in the pipeline config.
 
