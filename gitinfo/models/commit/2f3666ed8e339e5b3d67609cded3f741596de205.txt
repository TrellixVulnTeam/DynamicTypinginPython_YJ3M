commit 2f3666ed8e339e5b3d67609cded3f741596de205
Author: Duc Nguyen <justanhduc@users.noreply.github.com>
Date:   Tue Jun 27 10:57:15 2017 +0900

    Change key of type 'tuple' to 'str'
    
    dictionary having both 'tuple' and 'str' keys cannot be 'sorted'

diff --git a/object_detection/core/batcher.py b/object_detection/core/batcher.py
index 7b9d040a..4c816457 100644
--- a/object_detection/core/batcher.py
+++ b/object_detection/core/batcher.py
@@ -20,6 +20,8 @@ import tensorflow as tf
 
 from object_detection.core import prefetcher
 
+rt_shape_str = '_runtime_shapes'
+
 
 class BatchQueue(object):
   """BatchQueue class.
@@ -81,7 +83,7 @@ class BatchQueue(object):
         {key: tensor.get_shape() for key, tensor in tensor_dict.iteritems()})
     # Remember runtime shapes to unpad tensors after batching.
     runtime_shapes = collections.OrderedDict(
-        {(key + '_runtime_shapes'): tf.shape(tensor)
+        {(key + rt_shape_str): tf.shape(tensor)
          for key, tensor in tensor_dict.iteritems()})
     all_tensors = tensor_dict
     all_tensors.update(runtime_shapes)
@@ -112,8 +114,8 @@ class BatchQueue(object):
     for key, batched_tensor in batched_tensors.iteritems():
       unbatched_tensor_list = tf.unstack(batched_tensor)
       for i, unbatched_tensor in enumerate(unbatched_tensor_list):
-        if '_runtime_shapes' in key:
-          shapes[(key[:-15], i)] = unbatched_tensor
+        if rt_shape_str in key:
+          shapes[(key[:-len(rt_shape_str)], i)] = unbatched_tensor
         else:
           tensors[(key, i)] = unbatched_tensor
 
