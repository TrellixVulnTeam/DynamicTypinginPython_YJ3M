commit d9823dae702b02a8454f9aab70470aa22e1d6aac
Author: Haoyu Zhang <haoyuzhang@google.com>
Date:   Mon Apr 1 16:39:38 2019 -0700

    Add synthetic data monkey patch to OneDeviceStrategy as well (#6505)

diff --git a/official/utils/misc/distribution_utils.py b/official/utils/misc/distribution_utils.py
index f27ae721..c3a180eb 100644
--- a/official/utils/misc/distribution_utils.py
+++ b/official/utils/misc/distribution_utils.py
@@ -198,6 +198,7 @@ def _undo_monkey_patch_dataset_method(strategy):
 
 
 def set_up_synthetic_data():
+  _monkey_patch_dataset_method(tf.distribute.OneDeviceStrategy)
   _monkey_patch_dataset_method(tf.distribute.MirroredStrategy)
   # TODO(tobyboyd): Remove when contrib.distribute is all in core.
   if hasattr(tf, 'contrib'):
@@ -208,6 +209,7 @@ def set_up_synthetic_data():
 
 
 def undo_set_up_synthetic_data():
+  _undo_monkey_patch_dataset_method(tf.distribute.OneDeviceStrategy)
   _undo_monkey_patch_dataset_method(tf.distribute.MirroredStrategy)
   # TODO(tobyboyd): Remove when contrib.distribute is all in core.
   if hasattr(tf, 'contrib'):
