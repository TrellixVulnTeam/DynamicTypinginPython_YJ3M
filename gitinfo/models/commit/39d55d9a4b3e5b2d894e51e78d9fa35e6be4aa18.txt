commit 39d55d9a4b3e5b2d894e51e78d9fa35e6be4aa18
Author: Dan Ellis <dpwe@ee.columbia.edu>
Date:   Mon Jan 13 17:02:20 2020 -0500

    Tolerate missing soundfile module. (#8039)
    
    * Update slim include.
    
    * Force installation of tensorflow 1.14 (not tf2).
    
    * Code will run without soundfile (but die if you attempt to read a sound file).

diff --git a/research/audioset/vggish/vggish_input.py b/research/audioset/vggish/vggish_input.py
index 84790271..12a19a2d 100644
--- a/research/audioset/vggish/vggish_input.py
+++ b/research/audioset/vggish/vggish_input.py
@@ -21,7 +21,17 @@ import resampy
 import mel_features
 import vggish_params
 
-import soundfile as sf
+try:
+  import soundfile as sf
+
+  def wav_read(wav_file):
+    wav_data, sr = sf.read(wav_file, dtype='int16')
+    return wav_data, sr
+    
+except ImportError:
+
+  def wav_read(wav_file):
+    raise NotImplementedError('WAV file reading requires soundfile package.')
 
 
 def waveform_to_examples(data, sample_rate):
@@ -81,7 +91,7 @@ def wavfile_to_examples(wav_file):
   Returns:
     See waveform_to_examples.
   """
-  wav_data, sr = sf.read(wav_file, dtype='int16')
+  wav_data, sr = wav_read(wav_file)
   assert wav_data.dtype == np.int16, 'Bad sample type: %r' % wav_data.dtype
   samples = wav_data / 32768.0  # Convert to [-1.0, +1.0]
   return waveform_to_examples(samples, sr)
