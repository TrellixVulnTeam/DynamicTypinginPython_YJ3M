commit 9511801a46d8d17d7716afd32d1832ab1a0a4782
Author: guptapriya <priyag@google.com>
Date:   Mon Jun 3 04:50:38 2019 +0000

    remove cloning flag

diff --git a/official/recommendation/ncf_common.py b/official/recommendation/ncf_common.py
index 42276631..f59c185c 100644
--- a/official/recommendation/ncf_common.py
+++ b/official/recommendation/ncf_common.py
@@ -104,8 +104,6 @@ def parse_flags(flags_obj):
       "epsilon": flags_obj.epsilon,
       "match_mlperf": flags_obj.ml_perf,
       "use_xla_for_gpu": flags_obj.use_xla_for_gpu,
-      "clone_model_in_keras_dist_strat":
-          flags_obj.clone_model_in_keras_dist_strat,
       "epochs_between_evals": FLAGS.epochs_between_evals,
       "turn_off_distribution_strategy": FLAGS.turn_off_distribution_strategy,
       "keras_use_ctl": flags_obj.keras_use_ctl,
@@ -316,13 +314,6 @@ def define_ncf_flags():
   def xla_validator(flag_dict):
     return not flag_dict["use_xla_for_gpu"] or not flag_dict["tpu"]
 
-  flags.DEFINE_bool(
-      name="clone_model_in_keras_dist_strat",
-      default=True,
-      help=flags_core.help_wrap(
-          "If False, then the experimental code path is used that does not "
-          "clone models for distribution."))
-
   flags.DEFINE_bool(
       name="early_stopping",
       default=False,
diff --git a/official/recommendation/ncf_keras_main.py b/official/recommendation/ncf_keras_main.py
index 6a2d47a5..22b12bb6 100644
--- a/official/recommendation/ncf_keras_main.py
+++ b/official/recommendation/ncf_keras_main.py
@@ -385,9 +385,7 @@ def run_ncf(_):
   else:
     with distribution_utils.get_strategy_scope(strategy):
 
-      keras_model.compile(
-          optimizer=optimizer,
-          cloning=params["clone_model_in_keras_dist_strat"])
+      keras_model.compile(optimizer=optimizer)
 
       history = keras_model.fit(train_input_dataset,
                                 steps_per_epoch=num_train_steps,
