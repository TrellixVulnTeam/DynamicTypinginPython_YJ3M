commit 32533a06e0967e791f7de5b2b11aa61b71b65d14
Author: Marianne Linhares Monteiro <monteirom@google.com>
Date:   Mon Jul 31 20:05:34 2017 -0400

    Creating convert_to_tfrecord function
    
    Changing file to follow examples/how_tos/reading_data/convert_to_records.py

diff --git a/tutorials/image/cifar10_estimator/generate_cifar10_tfrecords.py b/tutorials/image/cifar10_estimator/generate_cifar10_tfrecords.py
index de3c2c91..b1994cec 100644
--- a/tutorials/image/cifar10_estimator/generate_cifar10_tfrecords.py
+++ b/tutorials/image/cifar10_estimator/generate_cifar10_tfrecords.py
@@ -58,6 +58,25 @@ def read_pickle_from_file(filename):
   return data_dict
 
 
+def convert_to_tfrecord(input_file, name):
+  """Converts a file to tfrecords."""
+  print('Generating %s' % output_file)
+  record_writer = tf.python_io.TFRecordWriter(output_file)
+
+  data_dict = read_pickle_from_file(input_file)
+  data = data_dict['data']
+  labels = data_dict['labels']
+
+  num_entries_in_batch = len(labels)
+  for i in range(num_entries_in_batch):
+    example = tf.train.Example(
+        features=tf.train.Features(feature={
+            'image': _bytes_feature(data[i].tobytes()),
+            'label': _int64_feature(labels[i])
+        }))
+    record_writer.write(example.SerializeToString())
+  record_writer.close()
+
 def main(argv):
   del argv  # Unused.
 
@@ -65,24 +84,8 @@ def main(argv):
   for file_name in file_names:
     input_file = os.path.join(FLAGS.input_dir, file_name)
     output_file = os.path.join(FLAGS.output_dir, file_name + '.tfrecords')
-
-    print('Generating %s' % output_file)
-
-    record_writer = tf.python_io.TFRecordWriter(output_file)
-
-    data_dict = read_pickle_from_file(input_file)
-    data = data_dict['data']
-    labels = data_dict['labels']
-
-    num_entries_in_batch = len(labels)
-    for i in range(num_entries_in_batch):
-      example = tf.train.Example(
-          features=tf.train.Features(feature={
-              'image': _bytes_feature(data[i].tobytes()),
-              'label': _int64_feature(labels[i])
-          }))
-      record_writer.write(example.SerializeToString())
-    record_writer.close()
+    # Convert to Examples and write the result to TFRecords.
+    convert_to_tfrecord(input_file, output_file)
 
   print('Done!')
 
