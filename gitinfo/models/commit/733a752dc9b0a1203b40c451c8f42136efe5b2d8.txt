commit 733a752dc9b0a1203b40c451c8f42136efe5b2d8
Author: guptapriya <14104855+guptapriya@users.noreply.github.com>
Date:   Tue May 28 12:44:59 2019 -0700

    Add shuffle to dataset records
    
    This shuffling should help in getting shuffling each epoch.

diff --git a/official/transformer/v2/data_pipeline.py b/official/transformer/v2/data_pipeline.py
index c38780de..2dff4601 100644
--- a/official/transformer/v2/data_pipeline.py
+++ b/official/transformer/v2/data_pipeline.py
@@ -235,7 +235,10 @@ def _read_and_batch_from_files(
 
   # Remove examples where the input or target length exceeds the maximum length,
   dataset = dataset.filter(lambda x, y: _filter_max_length((x, y), max_length))
-
+  
+  if shuffle:
+    dataset = dataset.shuffle(20000)
+   
   if static_batch:
     dataset = dataset.padded_batch(
         batch_size // max_length, ([max_length], [max_length]),
