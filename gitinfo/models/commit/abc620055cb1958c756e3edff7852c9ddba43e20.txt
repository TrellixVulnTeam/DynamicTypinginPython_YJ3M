commit abc620055cb1958c756e3edff7852c9ddba43e20
Author: Reed <reedwm@google.com>
Date:   Tue Jul 31 13:13:37 2018 -0700

    Fix crash on single-core systems. (#4957)

diff --git a/official/recommendation/data_preprocessing.py b/official/recommendation/data_preprocessing.py
index 90d37e8b..ec11454d 100644
--- a/official/recommendation/data_preprocessing.py
+++ b/official/recommendation/data_preprocessing.py
@@ -327,7 +327,8 @@ def construct_cache(dataset, data_dir, num_data_readers):
       data during training.
   """
   cache_paths = rconst.Paths(data_dir=data_dir)
-  num_data_readers = num_data_readers or int(multiprocessing.cpu_count() / 2)
+  num_data_readers = (num_data_readers or int(multiprocessing.cpu_count() / 2)
+                      or 1)
   approx_num_shards = int(movielens.NUM_RATINGS[dataset]
                           // rconst.APPROX_PTS_PER_TRAIN_SHARD) or 1
 
