commit 2c9a1100d10e6db7666562f424adfc39e6f2af50
Author: Dan O'Shea <dan@djoshea.com>
Date:   Fri Feb 2 18:28:24 2018 -0800

    Restoring old do_bias=False logic, keeping trainable option

diff --git a/research/lfads/utils.py b/research/lfads/utils.py
index be473a5d..1617ff35 100644
--- a/research/lfads/utils.py
+++ b/research/lfads/utils.py
@@ -148,24 +148,21 @@ def init_linear(in_size, out_size, do_bias=True, mat_init_value=None,
     else:
       w = tf.get_variable(wname, [in_size, out_size], initializer=mat_init,
                           collections=w_collections, trainable=trainable)
-
-  b_collections = [tf.GraphKeys.GLOBAL_VARIABLES]
-  if collections:
-    b_collections += collections
-  bname = (name + "/b") if name else "/b"
+  b = None
   if do_bias:
+    b_collections = [tf.GraphKeys.GLOBAL_VARIABLES]
+    if collections:
+      b_collections += collections
+    bname = (name + "/b") if name else "/b"
     if bias_init_value is None:
       b = tf.get_variable(bname, [1, out_size],
                           initializer=tf.zeros_initializer(),
-                          collections=b_collections, trainable=trainable)
+                          collections=b_collections,
+                          trainable=trainable)
     else:
       b = tf.Variable(bias_init_value, name=bname,
-                      collections=b_collections, trainable=trainable)
-  else:
-      # construct a non-learnable vector of zeros as the bias
-      b = tf.get_variable(bname, [1, out_size],
-                          initializer=tf.zeros_initializer(),
-                          collections=b_collections, trainable=False)
+                      collections=b_collections,
+                      trainable=trainable)
 
   return (w, b)
 
