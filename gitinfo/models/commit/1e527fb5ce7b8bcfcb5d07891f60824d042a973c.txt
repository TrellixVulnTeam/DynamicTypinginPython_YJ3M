commit 1e527fb5ce7b8bcfcb5d07891f60824d042a973c
Author: anj-s <32556631+anj-s@users.noreply.github.com>
Date:   Wed Jun 19 13:14:59 2019 -0700

    Add flags info when reporting benchmarks (#7056)
    
    * first version of ctl
    
    * fix indent
    
    * remove monkey patching for core
    
    * add dtype arg
    
    * fix dtype arg
    
    * add logging lib
    
    * remove compat.v1.logging
    
    * add datetime import
    
    * fix FLAGS import
    
    * add constant vals
    
    * move to using as tf import
    
    * move to using as tf import
    
    * remove steps per epoch = 1
    
    * test train and test for one step
    
    * test train and test for one step
    
    * test train and test for one step
    
    * test train and test for the entire dataset
    
    * use an iterator for test
    
    * pass tensors instead of an iterator
    
    * add stats dict
    
    * fix list declaration
    
    * fix list declaration
    
    * fix elapsed time calc
    
    * print lr at epoch boundary alone
    
    * Use regular tf import instead of compat
    
    * remove tensorboard chkpts
    
    * add correct logging import
    
    * add correct logging import
    
    * add benchmark configs
    
    * add tests and configs
    
    * add tests and configs
    
    * add keras flags import
    
    * add keras flags import
    
    * fix eval ds creation cond
    
    * return numpy value of train_loss
    
    * return numpy value of loss and acc values
    
    * add option for full eager mode
    
    * fix lint errors
    
    * add ctl flags
    
    * add ctl import
    
    * add the xla flag
    
    * enable v2 behavior in unit tests
    
    * rename dataset var
    
    * add synthetic dataset without monkey patching
    
    * add ctl local constants
    
    * add ctl local constants
    
    * change to using v2 imports
    
    * change to using v2 imports
    
    * change to using v2 imports
    
    * change to using keras synthetic input fn
    
    * remove enable_eager flag from benchmarks
    
    * remove enable_eager flag from benchmarks
    
    * remove enable_eager flag from benchmarks
    
    * add option for no distrat
    
    * add lambda for flags
    
    * remove no_func benchmarks due to OOM error
    
    * remove README
    
    * remove unused comments
    
    * remove unchanged file
    
    * remove unchanged file
    
    * remove unused drop_remainder_arg
    
    * use keras.common lr function
    
    * address PR comments
    
    * remove reference to deleted file
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * .
    
    * fix lint errors
    
    * .
    
    * add flags info

diff --git a/official/resnet/ctl/ctl_imagenet_benchmark.py b/official/resnet/ctl/ctl_imagenet_benchmark.py
index fcd60c34..c6aad7bf 100644
--- a/official/resnet/ctl/ctl_imagenet_benchmark.py
+++ b/official/resnet/ctl/ctl_imagenet_benchmark.py
@@ -26,6 +26,7 @@ from official.resnet import imagenet_main
 from official.resnet.ctl import ctl_imagenet_main
 from official.resnet.ctl import ctl_common
 from official.utils.testing.perfzero_benchmark import PerfZeroBenchmark
+from official.utils.flags import core as flags_core
 
 
 MIN_TOP_1_ACCURACY = 0.76
@@ -96,7 +97,9 @@ class CtlBenchmark(PerfZeroBenchmark):
       metrics.append({'name': 'avg_exp_per_second',
                       'value': stats['avg_exp_per_second']})
 
-    self.report_benchmark(iters=-1, wall_time=wall_time_sec, metrics=metrics)
+    flags_str = flags_core.get_nondefault_flags_as_str()
+    self.report_benchmark(iters=-1, wall_time=wall_time_sec, metrics=metrics,
+                          extras={'flags': flags_str})
 
 
 class Resnet50CtlAccuracy(CtlBenchmark):
