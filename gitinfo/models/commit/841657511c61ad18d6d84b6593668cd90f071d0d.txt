commit 841657511c61ad18d6d84b6593668cd90f071d0d
Author: A. Unique TensorFlower <gardener@tensorflow.org>
Date:   Thu Apr 9 09:54:01 2020 -0700

    Create output directories for finetuning data preparation if they don't exist.
    
    PiperOrigin-RevId: 305703696

diff --git a/official/nlp/data/classifier_data_lib.py b/official/nlp/data/classifier_data_lib.py
index 2bed942d..b143b5d5 100644
--- a/official/nlp/data/classifier_data_lib.py
+++ b/official/nlp/data/classifier_data_lib.py
@@ -578,6 +578,7 @@ def file_based_convert_examples_to_features(examples, label_list,
                                             output_file):
   """Convert a set of `InputExample`s to a TFRecord file."""
 
+  tf.io.gfile.makedirs(os.path.dirname(output_file))
   writer = tf.io.TFRecordWriter(output_file)
 
   for (ex_index, example) in enumerate(examples):
diff --git a/official/nlp/data/create_finetuning_data.py b/official/nlp/data/create_finetuning_data.py
index 939286e1..92b8abe9 100644
--- a/official/nlp/data/create_finetuning_data.py
+++ b/official/nlp/data/create_finetuning_data.py
@@ -20,6 +20,7 @@ from __future__ import print_function
 
 import functools
 import json
+import os
 
 from absl import app
 from absl import flags
@@ -191,6 +192,7 @@ def main(_):
   else:
     input_meta_data = generate_squad_dataset()
 
+  tf.io.gfile.makedirs(os.path.dirname(FLAGS.meta_data_file_path))
   with tf.io.gfile.GFile(FLAGS.meta_data_file_path, "w") as writer:
     writer.write(json.dumps(input_meta_data, indent=4) + "\n")
 
