commit 32b96851ba525b2999792e0791404b01b0721770
Author: newcoder <ray.ni@outlook.com>
Date:   Wed Feb 7 16:22:57 2018 +0800

    Update generate_cifar10_tfrecords.py
    
    change cPickle to pickle for python3
    specify  encoding='latin1' when call pickle.load()

diff --git a/tutorials/image/cifar10_estimator/generate_cifar10_tfrecords.py b/tutorials/image/cifar10_estimator/generate_cifar10_tfrecords.py
index 24a4fbba..64f0af08 100644
--- a/tutorials/image/cifar10_estimator/generate_cifar10_tfrecords.py
+++ b/tutorials/image/cifar10_estimator/generate_cifar10_tfrecords.py
@@ -24,7 +24,7 @@ from __future__ import division
 from __future__ import print_function
 
 import argparse
-import cPickle
+import pickle
 import os
 
 import tarfile
@@ -49,7 +49,7 @@ def _int64_feature(value):
 
 
 def _bytes_feature(value):
-  return tf.train.Feature(bytes_list=tf.train.BytesList(value=[str(value)]))
+  return tf.train.Feature(bytes_list=tf.train.BytesList(value=[value]))
 
 
 def _get_file_names():
@@ -62,8 +62,8 @@ def _get_file_names():
 
 
 def read_pickle_from_file(filename):
-  with tf.gfile.Open(filename, 'r') as f:
-    data_dict = cPickle.load(f)
+  with tf.gfile.Open(filename, 'rb') as f:
+    data_dict = pickle.load(f, encoding='latin1')
   return data_dict
 
 
