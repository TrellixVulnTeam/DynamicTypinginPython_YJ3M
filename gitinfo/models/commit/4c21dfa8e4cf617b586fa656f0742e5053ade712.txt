commit 4c21dfa8e4cf617b586fa656f0742e5053ade712
Author: Andrew M. Dai <adai@google.com>
Date:   Mon Feb 19 23:10:24 2018 -0800

    Fix github issue #3269 where the accuracy is wrongly underestimated for binary classification.
    
    PiperOrigin-RevId: 186265033

diff --git a/research/adversarial_text/layers.py b/research/adversarial_text/layers.py
index 5648e632..4c282177 100644
--- a/research/adversarial_text/layers.py
+++ b/research/adversarial_text/layers.py
@@ -254,7 +254,7 @@ def predictions(logits):
   with tf.name_scope('predictions'):
     # For binary classification
     if inner_dim == 1:
-      pred = tf.cast(tf.greater(tf.squeeze(logits, -1), 0.5), tf.int64)
+      pred = tf.cast(tf.greater(tf.squeeze(logits, -1), 0.), tf.int64)
     # For multi-class classification
     else:
       pred = tf.argmax(logits, 2)
