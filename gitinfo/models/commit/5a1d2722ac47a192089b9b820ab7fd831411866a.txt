commit 5a1d2722ac47a192089b9b820ab7fd831411866a
Author: Yaroslav Bulatov <yaroslavvb@gmail.com>
Date:   Wed Jan 10 10:53:18 2018 -0800

    assert fails on requesting gpus when not available

diff --git a/tutorials/image/cifar10_estimator/cifar10_main.py b/tutorials/image/cifar10_estimator/cifar10_main.py
index 8bd94e20..c7d3833d 100644
--- a/tutorials/image/cifar10_estimator/cifar10_main.py
+++ b/tutorials/image/cifar10_estimator/cifar10_main.py
@@ -503,6 +503,8 @@ if __name__ == '__main__':
       help='Epsilon for batch norm.')
   args = parser.parse_args()
 
+  if args.num_gpus>0:
+    assert tf.test.is_gpu_available(), "Requested GPUs but none found."
   if args.num_gpus < 0:
     raise ValueError(
         'Invalid GPU count: \"--num-gpus\" must be 0 or a positive integer.')
