commit 45ecc0f9e97cee28ae98d1f157c0e4736b76d586
Author: Zhichao Lu <lzc@google.com>
Date:   Thu Apr 5 08:06:14 2018 -0700

    Adding an attribute to SSD model to indicate which fields in prediction dictionary have a batch dimension. This will be useful for future video models.
    
    PiperOrigin-RevId: 191743097

diff --git a/research/object_detection/meta_architectures/ssd_meta_arch.py b/research/object_detection/meta_architectures/ssd_meta_arch.py
index 0fd7d409..4e6d52c2 100644
--- a/research/object_detection/meta_architectures/ssd_meta_arch.py
+++ b/research/object_detection/meta_architectures/ssd_meta_arch.py
@@ -235,6 +235,7 @@ class SSDMetaArch(model.DetectionModel):
 
     self._anchors = None
     self._add_summaries = add_summaries
+    self._batched_prediction_tensor_names = []
 
   @property
   def anchors(self):
@@ -244,6 +245,13 @@ class SSDMetaArch(model.DetectionModel):
       raise RuntimeError('anchors should be a BoxList object, but is not.')
     return self._anchors
 
+  @property
+  def batched_prediction_tensor_names(self):
+    if not self._batched_prediction_tensor_names:
+      raise RuntimeError('Must call predict() method to get batched prediction '
+                         'tensor names.')
+    return self._batched_prediction_tensor_names
+
   def preprocess(self, inputs):
     """Feature-extractor specific preprocessing.
 
@@ -385,6 +393,8 @@ class SSDMetaArch(model.DetectionModel):
           'feature_maps': feature_maps,
           'anchors': self._anchors.get()
       }
+      self._batched_prediction_tensor_names = [x for x in predictions_dict
+                                               if x != 'anchors']
       return predictions_dict
 
   def _get_feature_map_spatial_dims(self, feature_maps):
