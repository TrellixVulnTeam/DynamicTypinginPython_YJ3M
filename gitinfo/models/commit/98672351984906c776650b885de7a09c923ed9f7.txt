commit 98672351984906c776650b885de7a09c923ed9f7
Author: Yuefeng Zhou <yuefengz@google.com>
Date:   Wed Apr 24 10:41:37 2019 -0700

    Update distribution_utils.py (#6615)

diff --git a/official/utils/misc/distribution_utils.py b/official/utils/misc/distribution_utils.py
index 1901fb14..35027697 100644
--- a/official/utils/misc/distribution_utils.py
+++ b/official/utils/misc/distribution_utils.py
@@ -230,9 +230,8 @@ def configure_cluster(worker_hosts=None, task_index=-1):
   """
   tf_config = json.loads(os.environ.get('TF_CONFIG', '{}'))
   if tf_config:
-    num_workers = len(tf_config['cluster']['worker'])
-    if tf_config['cluster'].get('chief', None):
-      num_workers += 1
+    num_workers = (len(tf_config['cluster'].get('chief', [])) +
+                   len(tf_config['cluster'].get('worker', [])))
   elif worker_hosts:
     workers = worker_hosts.split(',')
     num_workers = len(workers)
