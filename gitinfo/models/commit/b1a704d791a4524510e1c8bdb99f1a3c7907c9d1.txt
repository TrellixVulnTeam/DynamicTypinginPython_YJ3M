commit b1a704d791a4524510e1c8bdb99f1a3c7907c9d1
Author: Katherine Wu <31663267+k-w-w@users.noreply.github.com>
Date:   Fri Jun 22 12:54:57 2018 -0700

    Fix transformer test (#4606)

diff --git a/official/transformer/model/beam_search_test.py b/official/transformer/model/beam_search_test.py
index 14e46637..17cbfa1f 100644
--- a/official/transformer/model/beam_search_test.py
+++ b/official/transformer/model/beam_search_test.py
@@ -33,8 +33,8 @@ class BeamSearchHelperTests(tf.test.TestCase):
     self.assertAllEqual([7, 3, 4, 2, 5], shape)
 
   def test_shape_list(self):
-    y = tf.constant(4.0)
-    x = tf.ones([7, tf.to_int32(tf.sqrt(y)), 2, 5])
+    y = tf.placeholder(dtype=tf.int32, shape=[])
+    x = tf.ones([7, y, 2, 5])
     shape = beam_search._shape_list(x)
     self.assertIsInstance(shape[0], int)
     self.assertIsInstance(shape[1], tf.Tensor)
