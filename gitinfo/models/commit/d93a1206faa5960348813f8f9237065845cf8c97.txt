commit d93a1206faa5960348813f8f9237065845cf8c97
Author: Hongkun Yu <hongkuny@google.com>
Date:   Mon May 4 11:04:02 2020 -0700

    Move gin flags to hyperparams_flags are they are in the same category and we will use them more widely.
    
    PiperOrigin-RevId: 309779408

diff --git a/official/nlp/bert/common_flags.py b/official/nlp/bert/common_flags.py
index c14a2763..166ce341 100644
--- a/official/nlp/bert/common_flags.py
+++ b/official/nlp/bert/common_flags.py
@@ -17,17 +17,10 @@
 from absl import flags
 import tensorflow as tf
 
+from official.utils import hyperparams_flags
 from official.utils.flags import core as flags_core
 
 
-def define_gin_flags():
-  """Define common gin configurable flags."""
-  flags.DEFINE_multi_string('gin_file', None,
-                            'List of paths to the config files.')
-  flags.DEFINE_multi_string(
-      'gin_param', None, 'Newline separated list of Gin parameter bindings.')
-
-
 def define_common_bert_flags():
   """Define common flags for BERT tasks."""
   flags_core.define_base(
@@ -100,6 +93,9 @@ def define_common_bert_flags():
       fp16_implementation=True,
   )
 
+  # Adds gin configuration flags.
+  hyperparams_flags.define_gin_flags()
+
 
 def dtype():
   return flags_core.get_tf_dtype(flags.FLAGS)
diff --git a/official/nlp/bert/run_classifier.py b/official/nlp/bert/run_classifier.py
index fa17864e..6f197ef9 100644
--- a/official/nlp/bert/run_classifier.py
+++ b/official/nlp/bert/run_classifier.py
@@ -57,7 +57,6 @@ flags.DEFINE_integer('train_batch_size', 32, 'Batch size for training.')
 flags.DEFINE_integer('eval_batch_size', 32, 'Batch size for evaluation.')
 
 common_flags.define_common_bert_flags()
-common_flags.define_gin_flags()
 
 FLAGS = flags.FLAGS
 
diff --git a/official/nlp/bert/run_pretraining.py b/official/nlp/bert/run_pretraining.py
index dfec2989..269c9f1d 100644
--- a/official/nlp/bert/run_pretraining.py
+++ b/official/nlp/bert/run_pretraining.py
@@ -51,7 +51,6 @@ flags.DEFINE_bool('use_next_sentence_label', True,
                   'Whether to use next sentence label to compute final loss.')
 
 common_flags.define_common_bert_flags()
-common_flags.define_gin_flags()
 
 FLAGS = flags.FLAGS
 
diff --git a/official/nlp/bert/run_squad_helper.py b/official/nlp/bert/run_squad_helper.py
index 153f6b76..07c22ed3 100644
--- a/official/nlp/bert/run_squad_helper.py
+++ b/official/nlp/bert/run_squad_helper.py
@@ -88,7 +88,6 @@ def define_common_squad_flags():
       'another.')
 
   common_flags.define_common_bert_flags()
-  common_flags.define_gin_flags()
 
 
 FLAGS = flags.FLAGS
diff --git a/official/utils/hyperparams_flags.py b/official/utils/hyperparams_flags.py
index 3f51b088..4b815067 100644
--- a/official/utils/hyperparams_flags.py
+++ b/official/utils/hyperparams_flags.py
@@ -25,6 +25,14 @@ from official.utils.flags import core as flags_core
 FLAGS = flags.FLAGS
 
 
+def define_gin_flags():
+  """Define common gin configurable flags."""
+  flags.DEFINE_multi_string('gin_file', None,
+                            'List of paths to the config files.')
+  flags.DEFINE_multi_string(
+      'gin_param', None, 'Newline separated list of Gin parameter bindings.')
+
+
 def define_common_hparams_flags():
   """Define the common flags across models."""
 
