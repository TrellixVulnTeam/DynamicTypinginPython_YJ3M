commit f4147e22c60df88c3627c0623e5e324099973d2a
Author: Zongwei Zhou <zongweiz@google.com>
Date:   Fri Jan 31 22:08:33 2020 -0800

    Enable Resnet50 and BERT 1GPU pure eager throughput test
    
    PiperOrigin-RevId: 292671694

diff --git a/official/benchmark/bert_squad_benchmark.py b/official/benchmark/bert_squad_benchmark.py
index b3060796..765e06bb 100644
--- a/official/benchmark/bert_squad_benchmark.py
+++ b/official/benchmark/bert_squad_benchmark.py
@@ -185,6 +185,17 @@ class BertSquadBenchmarkReal(BertSquadBenchmarkBase):
 
     self._run_and_report_benchmark()
 
+  def benchmark_1_gpu_eager(self):
+    """Tests BERT SQuAD model performance with 1 GPU."""
+
+    self._setup()
+    self.num_gpus = 1
+    FLAGS.run_eagerly = True
+    FLAGS.model_dir = self._get_model_dir('benchmark_1_gpu_squad_eager')
+    FLAGS.train_batch_size = 2
+
+    self._run_and_report_benchmark()
+
   def benchmark_1_gpu_xla(self):
     """Tests BERT SQuAD model performance with 1 GPU with XLA."""
 
@@ -249,6 +260,19 @@ class BertSquadBenchmarkReal(BertSquadBenchmarkBase):
 
     self._run_and_report_benchmark()
 
+  def benchmark_1_gpu_fp16_eager(self):
+    """Tests BERT SQuAD model performance with 1 GPU and FP16."""
+
+    self._setup()
+    self.num_gpus = 1
+    FLAGS.run_eagerly = True
+    FLAGS.model_dir = self._get_model_dir('benchmark_1_gpu_squad_fp16_eager')
+    FLAGS.train_batch_size = 4
+    FLAGS.dtype = 'fp16'
+    FLAGS.loss_scale = 'dynamic'
+
+    self._run_and_report_benchmark()
+
   def benchmark_1_gpu_fp16(self):
     """Tests BERT SQuAD model performance with 1 GPU and FP16."""
 
diff --git a/official/benchmark/resnet_ctl_imagenet_benchmark.py b/official/benchmark/resnet_ctl_imagenet_benchmark.py
index c9a2b926..aac26b6c 100644
--- a/official/benchmark/resnet_ctl_imagenet_benchmark.py
+++ b/official/benchmark/resnet_ctl_imagenet_benchmark.py
@@ -279,7 +279,7 @@ class Resnet50CtlBenchmarkBase(CtlBenchmark):
     FLAGS.num_gpus = 1
     FLAGS.distribution_strategy = 'one_device'
     FLAGS.model_dir = self._get_model_dir('benchmark_1_gpu_eager')
-    FLAGS.batch_size = 64
+    FLAGS.batch_size = 108
     FLAGS.use_tf_function = False
     FLAGS.single_l2_loss_op = True
     self._run_and_report_benchmark()
@@ -291,7 +291,7 @@ class Resnet50CtlBenchmarkBase(CtlBenchmark):
     FLAGS.num_gpus = 1
     FLAGS.distribution_strategy = 'one_device'
     FLAGS.model_dir = self._get_model_dir('benchmark_1_gpu_fp16_eager')
-    FLAGS.batch_size = 128
+    FLAGS.batch_size = 216
     FLAGS.dtype = 'fp16'
     FLAGS.use_tf_function = False
     FLAGS.single_l2_loss_op = True
