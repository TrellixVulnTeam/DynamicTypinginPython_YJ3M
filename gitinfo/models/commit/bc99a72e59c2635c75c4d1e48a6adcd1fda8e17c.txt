commit bc99a72e59c2635c75c4d1e48a6adcd1fda8e17c
Author: Zhichao Lu <lzc@google.com>
Date:   Fri Mar 30 13:59:21 2018 -0700

    Identity context manager to help setting up conditional with statements.
    
    PiperOrigin-RevId: 191112757

diff --git a/research/object_detection/utils/context_manager.py b/research/object_detection/utils/context_manager.py
new file mode 100644
index 00000000..0ee8723d
--- /dev/null
+++ b/research/object_detection/utils/context_manager.py
@@ -0,0 +1,40 @@
+# Copyright 2018 The TensorFlow Authors. All Rights Reserved.
+#
+# Licensed under the Apache License, Version 2.0 (the "License");
+# you may not use this file except in compliance with the License.
+# You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+# ==============================================================================
+"""Python context management helper."""
+
+from __future__ import absolute_import
+from __future__ import division
+from __future__ import print_function
+
+
+class IdentityContextManager(object):
+  """Returns an identity context manager that does nothing.
+
+  This is helpful in setting up conditional `with` statement as below:
+
+  with slim.arg_scope(x) if use_slim_scope else IdentityContextManager():
+    do_stuff()
+
+  """
+
+  def __enter__(self):
+    return None
+
+  def __exit__(self, exec_type, exec_value, traceback):
+    del exec_type
+    del exec_value
+    del traceback
+    return False
+
diff --git a/research/object_detection/utils/context_manager_test.py b/research/object_detection/utils/context_manager_test.py
new file mode 100644
index 00000000..b8da6b10
--- /dev/null
+++ b/research/object_detection/utils/context_manager_test.py
@@ -0,0 +1,33 @@
+# Copyright 2018 The TensorFlow Authors. All Rights Reserved.
+#
+# Licensed under the Apache License, Version 2.0 (the "License");
+# you may not use this file except in compliance with the License.
+# You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+# ==============================================================================
+"""Tests for tensorflow_models.object_detection.utils.context_manager."""
+
+from __future__ import absolute_import
+from __future__ import division
+from __future__ import print_function
+
+import tensorflow as tf
+from object_detection.utils import context_manager
+
+
+class ContextManagerTest(tf.test.TestCase):
+
+  def test_identity_context_manager(self):
+    with context_manager.IdentityContextManager() as identity_context:
+      self.assertIsNone(identity_context)
+
+
+if __name__ == '__main__':
+  tf.test.main()
