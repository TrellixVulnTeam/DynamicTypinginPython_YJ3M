commit 2af9696b57aea8637a6e1e703a7e4157449001e5
Author: A. Unique TensorFlower <gardener@tensorflow.org>
Date:   Tue Jun 2 14:32:29 2020 -0700

    Fix total block num bug in tf2 efficientnet.
    
    PiperOrigin-RevId: 314405729

diff --git a/official/vision/image_classification/efficientnet/efficientnet_model.py b/official/vision/image_classification/efficientnet/efficientnet_model.py
index 955b5ff7..ab81fc25 100644
--- a/official/vision/image_classification/efficientnet/efficientnet_model.py
+++ b/official/vision/image_classification/efficientnet/efficientnet_model.py
@@ -372,7 +372,8 @@ def efficientnet(image_input: tf.keras.layers.Input,
                    name='stem')
 
   # Build blocks
-  num_blocks_total = sum(block.num_repeat for block in blocks)
+  num_blocks_total = sum(
+      round_repeats(block.num_repeat, depth_coefficient) for block in blocks)
   block_num = 0
 
   for stack_idx, block in enumerate(blocks):
