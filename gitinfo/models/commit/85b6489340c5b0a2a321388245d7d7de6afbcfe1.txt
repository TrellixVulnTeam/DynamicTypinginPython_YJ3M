commit 85b6489340c5b0a2a321388245d7d7de6afbcfe1
Author: Mikhail Erofeev <merofeev@graphics.cs.msu.ru>
Date:   Thu May 16 22:19:47 2019 +0300

    Fix DeepLab Python 3 compatibility issue #6797. (#6799)

diff --git a/research/deeplab/eval.py b/research/deeplab/eval.py
index 312550df..cef03ffb 100644
--- a/research/deeplab/eval.py
+++ b/research/deeplab/eval.py
@@ -88,7 +88,7 @@ def main(unused_argv):
       split_name=FLAGS.eval_split,
       dataset_dir=FLAGS.dataset_dir,
       batch_size=FLAGS.eval_batch_size,
-      crop_size=map(int, FLAGS.eval_crop_size),
+      crop_size=[int(sz) for sz in FLAGS.eval_crop_size],
       min_resize_value=FLAGS.min_resize_value,
       max_resize_value=FLAGS.max_resize_value,
       resize_factor=FLAGS.resize_factor,
@@ -106,7 +106,7 @@ def main(unused_argv):
 
     model_options = common.ModelOptions(
         outputs_to_num_classes={common.OUTPUT_TYPE: dataset.num_of_classes},
-        crop_size=map(int, FLAGS.eval_crop_size),
+        crop_size=[int(sz) for sz in FLAGS.eval_crop_size],
         atrous_rates=FLAGS.atrous_rates,
         output_stride=FLAGS.output_stride)
 
diff --git a/research/deeplab/train.py b/research/deeplab/train.py
index 4ee60f71..82304727 100644
--- a/research/deeplab/train.py
+++ b/research/deeplab/train.py
@@ -213,7 +213,7 @@ def _build_deeplab(iterator, outputs_to_num_classes, ignore_label):
 
   model_options = common.ModelOptions(
       outputs_to_num_classes=outputs_to_num_classes,
-      crop_size=map(int, FLAGS.train_crop_size),
+      crop_size=[int(sz) for sz in FLAGS.train_crop_size],
       atrous_rates=FLAGS.atrous_rates,
       output_stride=FLAGS.output_stride)
 
@@ -446,7 +446,7 @@ def main(unused_argv):
           split_name=FLAGS.train_split,
           dataset_dir=FLAGS.dataset_dir,
           batch_size=clone_batch_size,
-          crop_size=map(int, FLAGS.train_crop_size),
+          crop_size=[int(sz) for sz in FLAGS.train_crop_size],
           min_resize_value=FLAGS.min_resize_value,
           max_resize_value=FLAGS.max_resize_value,
           resize_factor=FLAGS.resize_factor,
diff --git a/research/deeplab/vis.py b/research/deeplab/vis.py
index 40bd2f29..efcf828c 100644
--- a/research/deeplab/vis.py
+++ b/research/deeplab/vis.py
@@ -193,7 +193,7 @@ def main(unused_argv):
       split_name=FLAGS.vis_split,
       dataset_dir=FLAGS.dataset_dir,
       batch_size=FLAGS.vis_batch_size,
-      crop_size=map(int, FLAGS.vis_crop_size),
+      crop_size=[int(sz) for sz in FLAGS.vis_crop_size],
       min_resize_value=FLAGS.min_resize_value,
       max_resize_value=FLAGS.max_resize_value,
       resize_factor=FLAGS.resize_factor,
@@ -222,7 +222,7 @@ def main(unused_argv):
 
     model_options = common.ModelOptions(
         outputs_to_num_classes={common.OUTPUT_TYPE: dataset.num_of_classes},
-        crop_size=map(int, FLAGS.vis_crop_size),
+        crop_size=[int(sz) for sz in FLAGS.vis_crop_size],
         atrous_rates=FLAGS.atrous_rates,
         output_stride=FLAGS.output_stride)
 
