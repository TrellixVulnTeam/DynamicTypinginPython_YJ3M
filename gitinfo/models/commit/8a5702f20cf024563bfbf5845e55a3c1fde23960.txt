commit 8a5702f20cf024563bfbf5845e55a3c1fde23960
Author: Ruoxin Sang <rxsang@google.com>
Date:   Tue Oct 22 11:10:58 2019 -0700

    Internal change
    
    PiperOrigin-RevId: 276103495

diff --git a/official/vision/image_classification/imagenet_preprocessing.py b/official/vision/image_classification/imagenet_preprocessing.py
index f3cc8ddc..35492614 100644
--- a/official/vision/image_classification/imagenet_preprocessing.py
+++ b/official/vision/image_classification/imagenet_preprocessing.py
@@ -104,21 +104,12 @@ def process_record_dataset(dataset,
     logging.info(
         'datasets_num_private_threads: %s', datasets_num_private_threads)
 
-  # Disable intra-op parallelism to optimize for throughput instead of latency.
-  options = tf.data.Options()
-  options.experimental_threading.max_intra_op_parallelism = 1
-  dataset = dataset.with_options(options)
-
-  # Prefetches a batch at a time to smooth out the time taken to load input
-  # files for shuffling and processing.
-  dataset = dataset.prefetch(buffer_size=batch_size)
   if is_training:
     # Shuffles records before repeating to respect epoch boundaries.
     dataset = dataset.shuffle(buffer_size=shuffle_buffer)
     # Repeats the dataset for the number of epochs to train.
     dataset = dataset.repeat()
 
-
   # Parses the raw records into images and labels.
   dataset = dataset.map(
       lambda value: parse_record_fn(value, is_training, dtype),
