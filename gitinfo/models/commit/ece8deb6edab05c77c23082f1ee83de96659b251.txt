commit ece8deb6edab05c77c23082f1ee83de96659b251
Author: Haoyu Zhang <haoyuzhang@google.com>
Date:   Thu Apr 4 10:13:12 2019 -0700

    Set default GPU private threads to 2 per device (#6524)
    
    This should give better performance in tweaked benchmarks.

diff --git a/official/resnet/keras/keras_common.py b/official/resnet/keras/keras_common.py
index ffb8044e..4a6f10e2 100644
--- a/official/resnet/keras/keras_common.py
+++ b/official/resnet/keras/keras_common.py
@@ -115,7 +115,7 @@ def set_gpu_thread_mode_and_count(flags_obj):
   tf.compat.v1.logging.info('Logical CPU cores: %s', cpu_count)
 
   # Allocate private thread pool for each GPU to schedule and launch kernels
-  per_gpu_thread_count = flags_obj.per_gpu_thread_count or 1
+  per_gpu_thread_count = flags_obj.per_gpu_thread_count or 2
   os.environ['TF_GPU_THREAD_MODE'] = flags_obj.tf_gpu_thread_mode
   os.environ['TF_GPU_THREAD_COUNT'] = str(per_gpu_thread_count)
   tf.compat.v1.logging.info('TF_GPU_THREAD_COUNT: %s',
