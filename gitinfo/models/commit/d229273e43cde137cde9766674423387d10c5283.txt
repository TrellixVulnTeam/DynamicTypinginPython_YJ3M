commit d229273e43cde137cde9766674423387d10c5283
Author: Hiroki Teranishi <teranishihiroki@gmail.com>
Date:   Wed May 17 20:27:54 2017 +0900

    improved ArcStandardTransitionSystem.PerformRightArc()

diff --git a/syntaxnet/syntaxnet/arc_standard_transitions.cc b/syntaxnet/syntaxnet/arc_standard_transitions.cc
index 8feebe1a..24b94dbf 100644
--- a/syntaxnet/syntaxnet/arc_standard_transitions.cc
+++ b/syntaxnet/syntaxnet/arc_standard_transitions.cc
@@ -269,9 +269,7 @@ class ArcStandardTransitionSystem : public ParserTransitionSystem {
   void PerformRightArc(ParserState *state, int label) const {
     DCHECK(IsAllowedRightArc(*state));
     int s0 = state->Pop();
-    int s1 = state->Pop();
-    state->AddArc(s0, s1, label);
-    state->Push(s1);
+    state->AddArc(s0, state->Top(), label);
   }
 
   // We are in a deterministic state when we either reached the end of the input
