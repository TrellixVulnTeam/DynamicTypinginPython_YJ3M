commit e334f3e293861517ab30762d0c7fc58f81aae583
Author: Toby Boyd <tobyboyd@google.com>
Date:   Wed Feb 13 15:45:20 2019 -0800

    Do not toggle eager if tf 2.0 is used. (#6188)

diff --git a/official/resnet/keras/keras_cifar_main.py b/official/resnet/keras/keras_cifar_main.py
index 23b455bc..efd00dc0 100644
--- a/official/resnet/keras/keras_cifar_main.py
+++ b/official/resnet/keras/keras_cifar_main.py
@@ -97,7 +97,9 @@ def run(flags_obj):
   Returns:
     Dictionary of training and eval stats.
   """
-  if flags_obj.enable_eager:
+  # TODO(tobyboyd): Remove eager flag when tf 1.0 testing ends.
+  # Eager is default in tf 2.0 and should not be toggled
+  if flags_obj.enable_eager and not keras_common.is_v2_0():
     tf.compat.v1.enable_eager_execution()
 
   dtype = flags_core.get_tf_dtype(flags_obj)
diff --git a/official/resnet/keras/keras_common.py b/official/resnet/keras/keras_common.py
index 0aabd081..120dcf31 100644
--- a/official/resnet/keras/keras_common.py
+++ b/official/resnet/keras/keras_common.py
@@ -252,6 +252,11 @@ def get_synth_input_fn(height, width, num_channels, num_classes,
   return input_fn
 
 
+def is_v2_0():
+  """Returns true if using tf 2.0."""
+  return tf.__version__.startswith('2')
+
+
 def get_strategy_scope(strategy):
   if strategy:
     strategy_scope = strategy.scope()
diff --git a/official/resnet/keras/keras_imagenet_main.py b/official/resnet/keras/keras_imagenet_main.py
index f7965cef..bc161a81 100644
--- a/official/resnet/keras/keras_imagenet_main.py
+++ b/official/resnet/keras/keras_imagenet_main.py
@@ -87,7 +87,9 @@ def run(flags_obj):
   Raises:
     ValueError: If fp16 is passed as it is not currently supported.
   """
-  if flags_obj.enable_eager:
+  # TODO(tobyboyd): Remove eager flag when tf 1.0 testing ends.
+  # Eager is default in tf 2.0 and should not be toggled
+  if flags_obj.enable_eager and not keras_common.is_v2_0():
     tf.compat.v1.enable_eager_execution()
 
   dtype = flags_core.get_tf_dtype(flags_obj)
