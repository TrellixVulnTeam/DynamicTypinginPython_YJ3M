commit a2d0168e1494c412ee658bd9d379ddc50fd23be5
Author: Jin Dong <jin.dong@mail.mcgill.ca>
Date:   Tue Jun 2 22:59:29 2020 -0400

    Revert "repeated cast"
    
    This reverts commit f0505d26d59ab6d89d6ccc1aef62a48f31120afa.

diff --git a/official/vision/image_classification/dataset_factory.py b/official/vision/image_classification/dataset_factory.py
index 24986c0e..3e919584 100644
--- a/official/vision/image_classification/dataset_factory.py
+++ b/official/vision/image_classification/dataset_factory.py
@@ -477,7 +477,7 @@ class DatasetBuilder:
     parsed = tf.io.parse_single_example(record, keys_to_features)
 
     label = tf.reshape(parsed['image/class/label'], shape=[1])
-    label = tf.cast(label, tf.int32)
+    label = tf.cast(label, dtype=tf.int32)
 
     # Subtract one so that labels are in [0, 1000)
     label -= 1
@@ -507,6 +507,7 @@ class DatasetBuilder:
           standardize=self.config.standardize,
           dtype=self.dtype)
 
+    label = tf.cast(label, tf.int32)
     if self.config.one_hot:
       label = tf.one_hot(label, self.num_classes)
       label = tf.reshape(label, [self.num_classes])
