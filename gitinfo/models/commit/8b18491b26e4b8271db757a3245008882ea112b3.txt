commit 8b18491b26e4b8271db757a3245008882ea112b3
Author: guptapriya <14104855+guptapriya@users.noreply.github.com>
Date:   Wed Jun 5 22:30:53 2019 -0700

    transformer v2: fix gfile reading

diff --git a/official/transformer/compute_bleu.py b/official/transformer/compute_bleu.py
index 00119352..0d9bf4fe 100644
--- a/official/transformer/compute_bleu.py
+++ b/official/transformer/compute_bleu.py
@@ -88,9 +88,9 @@ def bleu_tokenize(string):
 def bleu_wrapper(ref_filename, hyp_filename, case_sensitive=False):
   """Compute BLEU for two files (reference and hypothesis translation)."""
   ref_lines = tokenizer.native_to_unicode(
-      tf.gfile.Open(ref_filename, "r").read()).split("\n")
+      tf.io.gfile.GFile(ref_filename).read()).strip().splitlines()
   hyp_lines = tokenizer.native_to_unicode(
-      tf.gfile.Open(hyp_filename, "r").read()).split("\n")
+      tf.io.gfile.GFile(hyp_filename).read()).strip().splitlines()
 
   if len(ref_lines) != len(hyp_lines):
     raise ValueError("Reference and translation files have different number of "
