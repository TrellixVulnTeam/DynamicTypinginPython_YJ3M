commit c242705bc56693f8343731e2d78efe79896a43ea
Author: Reed <reedwm@google.com>
Date:   Tue Jul 31 15:34:40 2018 -0700

    Fix another crash on single-core systems. (#4962)

diff --git a/official/recommendation/data_preprocessing.py b/official/recommendation/data_preprocessing.py
index 7c98b017..be0c8bd2 100644
--- a/official/recommendation/data_preprocessing.py
+++ b/official/recommendation/data_preprocessing.py
@@ -395,7 +395,7 @@ def instantiate_pipeline(dataset, data_dir, batch_size, eval_batch_size,
 
   # By limiting the number of workers we guarantee that the worker
   # pool underlying the training generation doesn't starve other processes.
-  num_workers = int(multiprocessing.cpu_count() * 0.75)
+  num_workers = int(multiprocessing.cpu_count() * 0.75) or 1
 
   subproc_args = popen_helper.INVOCATION + [
       "--data_dir", data_dir,
