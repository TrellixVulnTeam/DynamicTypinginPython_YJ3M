commit b478430d89f0b40fe3caf281f4e24cefda825412
Author: A. Unique TensorFlower <gardener@tensorflow.org>
Date:   Mon Dec 2 17:08:07 2019 -0800

    Internal change
    
    PiperOrigin-RevId: 283449673

diff --git a/official/recommendation/ncf_keras_benchmark.py b/official/recommendation/ncf_keras_benchmark.py
index 4e826974..dd62cdf6 100644
--- a/official/recommendation/ncf_keras_benchmark.py
+++ b/official/recommendation/ncf_keras_benchmark.py
@@ -45,6 +45,8 @@ class NCFKerasBenchmarkBase(tf.test.Benchmark):
                **kwargs):
     self.output_dir = output_dir
     self.default_flags = default_flags or {}
+    # Run all benchmarks with ml_perf flag.
+    self.default_flags['ml_perf'] = True
 
   def _setup(self):
     """Sets up and resets flags before each test."""
diff --git a/official/recommendation/ncf_keras_main.py b/official/recommendation/ncf_keras_main.py
index a8228e0a..3810069a 100644
--- a/official/recommendation/ncf_keras_main.py
+++ b/official/recommendation/ncf_keras_main.py
@@ -480,8 +480,8 @@ def run_ncf_custom_training(params,
 
       train_loss += train_step(train_input_iterator)
 
-      # Write train loss once in every 100 steps.
-      if train_summary_writer and step % 100 == 0:
+      # Write train loss once in every 1000 steps.
+      if train_summary_writer and step % 1000 == 0:
         with train_summary_writer.as_default():
           tf.summary.scalar("training_loss", train_loss/(step + 1),
                             step=current_step)
