commit 68650c42a844623d6ed2803824b5f5182953753c
Author: rxsang <rxsang@google.com>
Date:   Thu May 23 13:48:31 2019 -0700

    Fix non dist strat case. (#6867)

diff --git a/official/resnet/keras/keras_imagenet_main.py b/official/resnet/keras/keras_imagenet_main.py
index d7717445..2bf17a76 100644
--- a/official/resnet/keras/keras_imagenet_main.py
+++ b/official/resnet/keras/keras_imagenet_main.py
@@ -129,12 +129,13 @@ def run(flags_obj):
       all_reduce_alg=flags_obj.all_reduce_alg,
       num_packs=flags_obj.num_packs)
 
-  # flags_obj.enable_get_next_as_optional controls whether enabling
-  # get_next_as_optional behavior in DistributedIterator. If true, last partial
-  # batch can be supported.
-  strategy.extended.experimental_enable_get_next_as_optional = (
-      flags_obj.enable_get_next_as_optional
-  )
+  if strategy:
+    # flags_obj.enable_get_next_as_optional controls whether enabling
+    # get_next_as_optional behavior in DistributedIterator. If true, last
+    # partial batch can be supported.
+    strategy.extended.experimental_enable_get_next_as_optional = (
+        flags_obj.enable_get_next_as_optional
+    )
 
   strategy_scope = distribution_utils.get_strategy_scope(strategy)
 
