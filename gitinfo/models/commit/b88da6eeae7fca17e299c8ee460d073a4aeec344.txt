commit b88da6eeae7fca17e299c8ee460d073a4aeec344
Author: shizhiw <34991981+shizhiw@users.noreply.github.com>
Date:   Thu Oct 11 16:52:23 2018 -0700

     Use data_dir instead of flags.FLAGS.data_dir in data_preprocessing.py. (#5506)
    
    * Use data_dir instead of flags.FLAGS.data_dir in data_preprocessing.py.
    
    * Use data_dir instead of flags.FLAGS.data_dir in data_preprocessing.py.

diff --git a/official/recommendation/data_preprocessing.py b/official/recommendation/data_preprocessing.py
index 4bab909f..84cbeaf6 100644
--- a/official/recommendation/data_preprocessing.py
+++ b/official/recommendation/data_preprocessing.py
@@ -470,11 +470,11 @@ def instantiate_pipeline(dataset, data_dir, batch_size, eval_batch_size,
   }
   if ncf_dataset.deterministic:
     flags_["seed"] = stat_utils.random_int32()
-  tf.gfile.MakeDirs(flags.FLAGS.data_dir)
+  tf.gfile.MakeDirs(data_dir)
   # We write to a temp file then atomically rename it to the final file,
   # because writing directly to the final file can cause the data generation
   # async process to read a partially written JSON file.
-  flagfile_temp = os.path.join(flags.FLAGS.data_dir, rconst.FLAGFILE_TEMP)
+  flagfile_temp = os.path.join(data_dir, rconst.FLAGFILE_TEMP)
   tf.logging.info("Preparing flagfile for async data generation in {} ..."
                   .format(flagfile_temp))
   with tf.gfile.Open(flagfile_temp, "w") as f:
