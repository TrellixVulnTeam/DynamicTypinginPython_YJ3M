commit 9b17d796234b72c93f1d23aa3026657000894a1d
Author: Gaurav Jain <84372+jaingaurav@users.noreply.github.com>
Date:   Thu Apr 25 19:50:55 2019 -0700

    Do not query GPU compatibility before app main (#6679)
    
    tf.test.is_gpu_available() should not be called in flags since this is
    called before app.main() and the runtime has not yet been initialized.

diff --git a/official/utils/flags/_base.py b/official/utils/flags/_base.py
index 80c55fd3..f3e9c625 100644
--- a/official/utils/flags/_base.py
+++ b/official/utils/flags/_base.py
@@ -101,11 +101,10 @@ def define_base(data_dir=True, model_dir=True, clean=True, train_epochs=True,
   if num_gpu:
     flags.DEFINE_integer(
         name="num_gpus", short_name="ng",
-        default=1 if tf.test.is_gpu_available() else 0,
+        default=1,
         help=help_wrap(
             "How many GPUs to use at each worker with the "
-            "DistributionStrategies API. The default is 1 if TensorFlow can "
-            "detect a GPU, and 0 otherwise."))
+            "DistributionStrategies API. The default is 1."))
 
   if hooks:
     # Construct a pretty summary of hooks.
