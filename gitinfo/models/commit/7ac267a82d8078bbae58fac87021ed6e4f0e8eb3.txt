commit 7ac267a82d8078bbae58fac87021ed6e4f0e8eb3
Author: Ayush Dubey <ayushd@google.com>
Date:   Mon May 20 13:36:47 2019 -0700

    Handle empty eval results in estimator_benchmark. (#6827)
    
    * Delete accuracy if exists in eval results.
    
    * get global_step only if it exists in eval results

diff --git a/official/resnet/estimator_benchmark.py b/official/resnet/estimator_benchmark.py
index 7e59f1b3..85677ec0 100644
--- a/official/resnet/estimator_benchmark.py
+++ b/official/resnet/estimator_benchmark.py
@@ -109,7 +109,7 @@ class EstimatorBenchmark(tf.test.Benchmark):
                       'value': exp_per_sec})
     flags_str = flags_core.get_nondefault_flags_as_str()
     self.report_benchmark(
-        iters=eval_results['global_step'],
+        iters=eval_results.get('global_step', None),
         wall_time=wall_time_sec,
         metrics=metrics,
         extras={'flags': flags_str})
@@ -309,8 +309,8 @@ class Resnet50EstimatorBenchmark(EstimatorBenchmark):
     wall_time_sec = time.time() - start_time_sec
     print(stats)
     # Remove values to skip triggering accuracy check.
-    del stats['eval_results']['accuracy']
-    del stats['eval_results']['accuracy_top_5']
+    stats['eval_results'].pop('accuracy', None)
+    stats['eval_results'].pop('accuracy_top_5', None)
 
     self._report_benchmark(stats,
                            wall_time_sec)
