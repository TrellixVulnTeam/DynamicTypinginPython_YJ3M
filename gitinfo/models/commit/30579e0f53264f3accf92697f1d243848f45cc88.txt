commit 30579e0f53264f3accf92697f1d243848f45cc88
Author: Sergey Mironov <grrwlf@gmail.com>
Date:   Sat Mar 7 18:50:12 2020 +0300

    Update tokenizer: do the safety check before inserting EOL

diff --git a/official/nlp/transformer/utils/tokenizer.py b/official/nlp/transformer/utils/tokenizer.py
index b40970a0..a2b88047 100644
--- a/official/nlp/transformer/utils/tokenizer.py
+++ b/official/nlp/transformer/utils/tokenizer.py
@@ -140,6 +140,8 @@ class Subtokenizer(object):
     for token in tokens:
       ret.extend(self._token_to_subtoken_ids(token))
     if add_eos:
+      assert EOS in self.subtoken_list, \
+          "Can't append 'EOS' because it is not in list of known subtokens."
       ret.append(EOS_ID)
     return ret
 
