commit 3fff4b863281f433ab64b504c6b76f6f90c11ef2
Author: Zhichao Lu <lzc@google.com>
Date:   Fri Mar 2 13:56:09 2018 -0800

    Replace the kernel error message with op error message. https://github.com/tensorflow/tensorflow/pull/16890 added a new check in the op.
    
    PiperOrigin-RevId: 187665000

diff --git a/research/object_detection/core/box_list_ops_test.py b/research/object_detection/core/box_list_ops_test.py
index fd251189..87f15f7e 100644
--- a/research/object_detection/core/box_list_ops_test.py
+++ b/research/object_detection/core/box_list_ops_test.py
@@ -738,12 +738,9 @@ class NonMaxSuppressionTest(tf.test.TestCase):
     boxes.add_field('scores', tf.constant([.9, .75, .6, .95, .5]))
     iou_thresh = .5
     max_output_size = 3
-    nms = box_list_ops.non_max_suppression(
-        boxes, iou_thresh, max_output_size)
-    with self.test_session() as sess:
-      with self.assertRaisesWithPredicateMatch(
-          errors.InvalidArgumentError, 'scores has incompatible shape'):
-        sess.run(nms.get())
+    with self.assertRaisesWithPredicateMatch(ValueError,
+                                             'Dimensions must be equal'):
+      box_list_ops.non_max_suppression(boxes, iou_thresh, max_output_size)
 
   def test_select_from_three_clusters(self):
     corners = tf.constant([[0, 0, 1, 1],
