commit f24c44d5b94c516ac630110ca6f32eb8a3f023f9
Author: Marianne Linhares Monteiro <monteirom@google.com>
Date:   Thu Jul 27 13:54:18 2017 -0400

    Fixing learning_rate to consider all workers

diff --git a/tutorials/image/cifar10_estimator/cifar10_main.py b/tutorials/image/cifar10_estimator/cifar10_main.py
index 84e1c169..a160edea 100644
--- a/tutorials/image/cifar10_estimator/cifar10_main.py
+++ b/tutorials/image/cifar10_estimator/cifar10_main.py
@@ -226,7 +226,7 @@ def _resnet_model_fn(features, labels, mode):
     # https://github.com/ppwwyyxx/tensorpack/blob/master/examples/ResNet/cifar10-resnet.py#L155
     # users could apply other scheduling.
     num_batches_per_epoch = cifar10.Cifar10DataSet.num_examples_per_epoch(
-        'train') // FLAGS.train_batch_size
+        'train') // (FLAGS.train_batch_size * FLAGS.num_workers)
     boundaries = [
         num_batches_per_epoch * x
         for x in np.array([82, 123, 300], dtype=np.int64)
