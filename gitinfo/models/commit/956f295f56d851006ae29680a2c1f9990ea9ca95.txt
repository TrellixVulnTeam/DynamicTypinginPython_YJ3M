commit 956f295f56d851006ae29680a2c1f9990ea9ca95
Author: Ayush Dubey <ayushd@google.com>
Date:   Thu Sep 12 22:13:55 2019 -0700

    Set `datasets_num_private_threads` flag for multi-worker tuned benchmarks.
    
    PiperOrigin-RevId: 268836696

diff --git a/official/benchmark/keras_imagenet_benchmark.py b/official/benchmark/keras_imagenet_benchmark.py
index 1431a43b..17335edd 100644
--- a/official/benchmark/keras_imagenet_benchmark.py
+++ b/official/benchmark/keras_imagenet_benchmark.py
@@ -990,6 +990,7 @@ class Resnet50MultiWorkerKerasAccuracy(keras_benchmark.KerasBenchmark):
     FLAGS.distribution_strategy = 'multi_worker_mirrored'
     FLAGS.use_tensor_lr = True
     FLAGS.tf_gpu_thread_mode = 'gpu_private'
+    FLAGS.datasets_num_private_threads = 32
     FLAGS.model_dir = self._get_model_dir(
         'benchmark_{}_8_gpu_{}_worker_fp16_{}_tweaked'.format(
             'eager' if eager else 'graph', num_workers, all_reduce_alg))
@@ -1068,6 +1069,7 @@ class Resnet50MultiWorkerKerasBenchmark(Resnet50KerasBenchmarkBase):
     FLAGS.distribution_strategy = 'multi_worker_mirrored'
     FLAGS.use_tensor_lr = True
     FLAGS.tf_gpu_thread_mode = 'gpu_private'
+    FLAGS.datasets_num_private_threads = 32
     FLAGS.model_dir = self._get_model_dir(
         'benchmark_{}_8_gpu_{}_worker_fp16_{}_tweaked'.format(
             'eager' if eager else 'graph', num_workers, all_reduce_alg))
