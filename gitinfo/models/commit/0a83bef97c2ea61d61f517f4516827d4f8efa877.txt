commit 0a83bef97c2ea61d61f517f4516827d4f8efa877
Author: Reed <reedwm@google.com>
Date:   Thu Jun 6 16:43:38 2019 -0700

    Include flags when reporting transformer benchmark (#6957)

diff --git a/official/transformer/v2/transformer_benchmark.py b/official/transformer/v2/transformer_benchmark.py
index 19547b78..16d085a1 100644
--- a/official/transformer/v2/transformer_benchmark.py
+++ b/official/transformer/v2/transformer_benchmark.py
@@ -24,6 +24,7 @@ from absl import flags
 
 from official.transformer.v2 import misc
 from official.transformer.v2 import transformer_main as transformer_main
+from official.utils.flags import core as flags_core
 from official.utils.testing.perfzero_benchmark import PerfZeroBenchmark
 
 TRANSFORMER_EN2DE_DATA_DIR_NAME = 'wmt32k-en2de-official'
@@ -103,7 +104,9 @@ class TransformerBenchmark(PerfZeroBenchmark):
       metrics.append({'name': 'avg_exp_per_second',
                       'value': stats['avg_exp_per_second']})
 
-    self.report_benchmark(iters=-1, wall_time=wall_time_sec, metrics=metrics)
+    flags_str = flags_core.get_nondefault_flags_as_str()
+    self.report_benchmark(iters=-1, wall_time=wall_time_sec, metrics=metrics,
+                          extras={'flags': flags_str})
 
 
 class TransformerBaseKerasAccuracy(TransformerBenchmark):
