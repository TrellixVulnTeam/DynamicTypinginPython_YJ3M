commit 7b57b6d7833bac583bf5c4122d1f7db2e302b3eb
Author: Reed Wanderman-Milne <reedwm@google.com>
Date:   Fri Aug 16 11:31:36 2019 -0700

    Fix transformer fp16 test
    
    PiperOrigin-RevId: 263812316

diff --git a/official/transformer/v2/transformer_main_test.py b/official/transformer/v2/transformer_main_test.py
index 83a00720..f66be608 100644
--- a/official/transformer/v2/transformer_main_test.py
+++ b/official/transformer/v2/transformer_main_test.py
@@ -103,9 +103,9 @@ class TransformerTaskTest(tf.test.TestCase):
     t = tm.TransformerTask(FLAGS)
     t.train()
 
-  @unittest.skipIf(tf.test.is_built_with_cuda(), 'TODO(b/139497127): '
-     'Test is skipped because tf.pad doesn\'t work with GPU.')
+  @unittest.skipUnless(tf.test.is_built_with_cuda(), 'requires GPU')
   def test_train_fp16(self):
+    FLAGS.distribution_strategy = 'one_device'
     FLAGS.dtype = 'fp16'
     t = tm.TransformerTask(FLAGS)
     t.train()
