commit c4e7318b490d803937fe817694e1781534038e97
Author: Toby Boyd <tobyboyd@google.com>
Date:   Fri Oct 5 21:27:13 2018 -0700

    roll back AUTOTUNE

diff --git a/official/resnet/resnet_run_loop.py b/official/resnet/resnet_run_loop.py
index f2993482..70aec7e9 100644
--- a/official/resnet/resnet_run_loop.py
+++ b/official/resnet/resnet_run_loop.py
@@ -68,11 +68,6 @@ def process_record_dataset(dataset, is_training, batch_size, shuffle_buffer,
     Dataset of (image, label) pairs ready for iteration.
   """
 
-  # Sets tf.data to AUTOTUNE, e.g. num_parallel_batches in map_and_batch.
-  options = tf.data.Options()
-  options.experimental_autotune = True
-  dataset = dataset.with_options(options)
-
   # Prefetches a batch at a time to smooth out the time taken to load input
   # files for shuffling and processing.
   dataset = dataset.prefetch(buffer_size=batch_size)
@@ -88,6 +83,7 @@ def process_record_dataset(dataset, is_training, batch_size, shuffle_buffer,
       tf.contrib.data.map_and_batch(
           lambda value: parse_record_fn(value, is_training, dtype),
           batch_size=batch_size,
+          num_parallel_calls=1,
           drop_remainder=False))
 
   # Operations between the final prefetch and the get_next call to the iterator
