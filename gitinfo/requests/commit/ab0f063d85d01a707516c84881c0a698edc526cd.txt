commit ab0f063d85d01a707516c84881c0a698edc526cd
Author: Braulio Valdivielso Mart√≠nez <brlvldvlsmrtnz@gmail.com>
Date:   Wed Nov 25 14:15:51 2015 +0100

    Made TestServer.Server listen on an arbitrary open port by default

diff --git a/testserver/.server.py.swo b/testserver/.server.py.swo
deleted file mode 100644
index eb2d89d9..00000000
Binary files a/testserver/.server.py.swo and /dev/null differ
diff --git a/testserver/server.py b/testserver/server.py
index 14349fb9..689aaaf8 100644
--- a/testserver/server.py
+++ b/testserver/server.py
@@ -3,9 +3,9 @@
 import threading, socket
 
 class Server(threading.Thread):
-    """ Basic socket server used for unit testing """
+    """ Dummy server using for unit testing """
 
-    def __init__(self, handler, host='localhost', port=8021):
+    def __init__(self, handler, host='localhost', port=0):
         threading.Thread.__init__(self)
         self.handler = handler
         self.host = host
@@ -16,6 +16,9 @@ class Server(threading.Thread):
     def run(self):
         sock = socket.socket()
         sock.bind((self.host, self.port))
+        
+        # update port in case self.port = 0
+        self.port = sock.getsockname()[1]
         sock.listen(0)
         self.ready_event.set()
         self.handler(sock)
