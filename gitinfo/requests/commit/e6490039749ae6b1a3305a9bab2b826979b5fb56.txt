commit e6490039749ae6b1a3305a9bab2b826979b5fb56
Author: Kenneth Reitz <me@kennethreitz.com>
Date:   Wed Nov 9 15:02:53 2011 -0800

    test the cookies!

diff --git a/test_requests.py b/test_requests.py
index 266c20a2..a3e64ec7 100755
--- a/test_requests.py
+++ b/test_requests.py
@@ -59,7 +59,6 @@ class RequestsTestSuite(unittest.TestCase):
         # self.httpbin.kill()
 
     def test_entry_points(self):
-        import requests
 
         requests.session
         requests.session().get
@@ -482,6 +481,30 @@ class RequestsTestSuite(unittest.TestCase):
 
         self.assertEqual(r2.status_code, 200)
 
+    def test_session_persistent_cookies(self):
+
+        s = requests.session()
+
+        # Internally dispatched cookies are sent.
+        _c = {'kenneth': 'reitz', 'bessie': 'monke'}
+        r = s.get(httpbin('cookies'), cookies=_c)
+        r = s.get(httpbin('cookies'))
+
+        # Those cookies persist transparently.
+        c = json.loads(r.content).get('cookies')
+        assert c == _c
+
+        # Double check.
+        r = s.get(httpbin('cookies'), cookies={})
+        c = json.loads(r.content).get('cookies')
+        assert c == _c
+
+        # Remove a cookie by setting it's value to None.
+        r = s.get(httpbin('cookies'), cookies={'bessie': None})
+        c = json.loads(r.content).get('cookies')
+        del _c['bessie']
+        assert c == _c
+
 
     def test_session_persistent_params(self):
 
