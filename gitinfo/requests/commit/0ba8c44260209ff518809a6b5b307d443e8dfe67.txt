commit 0ba8c44260209ff518809a6b5b307d443e8dfe67
Author: Rohan Jain <crodjer@gmail.com>
Date:   Fri May 4 10:41:57 2012 +0530

    A utility function to fetch environment proxies
    
    This adds support for lowercase environment proxy variables (which are
    quite popular too). It returns proxies in a format compatible with
    request's proxy parameter.
    Moreover, it can be used in the request models for proxy defaults.
    
    Signed-off-by: Rohan Jain <crodjer@gmail.com>

diff --git a/requests/utils.py b/requests/utils.py
index ecfee47b..8365cc36 100644
--- a/requests/utils.py
+++ b/requests/utils.py
@@ -446,3 +446,19 @@ def requote_uri(uri):
     # Then quote only illegal characters (do not quote reserved, unreserved,
     # or '%')
     return quote(unquote_unreserved(uri), safe="!#$%&'()*+,/:;=?@[]~")
+
+def get_environ_proxies():
+    """Return a dict of environment proxies."""
+
+    proxy_keys = [
+        'all',
+        'http',
+        'https',
+        'ftp',
+        'socks',
+        'no'
+    ]
+
+    get_proxy = lambda k: os.environ.get(k) or os.environ.get(k.upper())
+    proxies = [(key, get_proxy(key + '_proxy')) for key in proxy_keys]
+    return dict([(key, val) for (key, val) in proxies if val])
