commit 34268b16c397682be38f4147aa181f3ebf112e42
Author: Andrew Jesaitis <andrew@andrewjesaitis.com>
Date:   Wed Jan 23 10:32:56 2013 -0700

    Moves num_401_calls counter to HTTPDigestAuth

diff --git a/requests/auth.py b/requests/auth.py
index 297a08db..ca0ce0d8 100644
--- a/requests/auth.py
+++ b/requests/auth.py
@@ -139,25 +139,27 @@ class HTTPDigestAuth(AuthBase):
 
     def handle_401(self, r):
         """Takes the given response and tries digest-auth, if needed."""
-        num_401_calls = getattr(r.request, 'num_401_calls', 1)  
+
+        num_401_calls =  getattr(self, 'num_401_calls', 1)
         s_auth = r.headers.get('www-authenticate', '')
 
         if 'digest' in s_auth.lower() and num_401_calls < 2:
 
+            setattr(self, 'num_401_calls', num_401_calls + 1)
             self.chal = parse_dict_header(s_auth.replace('Digest ', ''))
 
             # Consume content and release the original connection
             # to allow our new request to reuse the same one.
             r.content
             r.raw.release_conn()
-
+            
             r.request.headers['Authorization'] = self.build_digest_header(r.request.method, r.request.url)
-            r.request.num_401_calls = num_401_calls + 1
             _r = r.connection.send(r.request)
             _r.history.append(r)
 
             return _r
 
+        setattr(self, 'num_401_calls', 1)  
         return r
 
     def __call__(self, r):
