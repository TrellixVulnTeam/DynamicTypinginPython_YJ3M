commit 9bf53676b87fa4951e23f67d2251f5dfae4e5206
Author: Shivaram Lingamneni <slingamn@cs.stanford.edu>
Date:   Thu May 3 01:28:59 2012 -0700

    fix crash in safe mode when response.cookies is None

diff --git a/requests/sessions.py b/requests/sessions.py
index b6fb5bb4..8d517ab5 100644
--- a/requests/sessions.py
+++ b/requests/sessions.py
@@ -229,8 +229,10 @@ class Session(object):
         r.send(prefetch=prefetch)
 
         # Send any cookies back up the to the session.
-        for cookie in r.response.cookies:
-            self.cookies.set_cookie(cookie)
+        # (in safe mode, cookies may be None if the request didn't succeed)
+        if r.response.cookies is not None:
+            for cookie in r.response.cookies:
+                self.cookies.set_cookie(cookie)
 
         # Return the response.
         return r.response
