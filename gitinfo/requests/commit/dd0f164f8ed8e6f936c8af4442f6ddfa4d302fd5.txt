commit dd0f164f8ed8e6f936c8af4442f6ddfa4d302fd5
Author: latyas(æ‡’) <latyas@gmail.com>
Date:   Fri May 15 10:28:22 2015 +0800

    Update cookies.py

diff --git a/requests/cookies.py b/requests/cookies.py
index c0865106..88b478c7 100644
--- a/requests/cookies.py
+++ b/requests/cookies.py
@@ -416,13 +416,13 @@ def morsel_to_cookie(morsel):
     expires = None
     if morsel['max-age']:
         try:
-            expires = time.time() + float(morsel['max-age'])
+            expires = int(time.time() + int(morsel['max-age']))
         except ValueError:
-            pass
+            raise TypeError('max-age: %s must be integer' % morsel['max-age'])
     elif morsel['expires']:
         time_template = '%a, %d-%b-%Y %H:%M:%S GMT'
-        expires = time.mktime(
-            time.strptime(morsel['expires'], time_template)) - time.timezone
+        expires = int(time.mktime(
+            time.strptime(morsel['expires'], time_template)) - time.timezone)
     return create_cookie(
         comment=morsel['comment'],
         comment_url=bool(morsel['comment']),
