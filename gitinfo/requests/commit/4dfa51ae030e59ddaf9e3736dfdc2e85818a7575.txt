commit 4dfa51ae030e59ddaf9e3736dfdc2e85818a7575
Author: mmartin <mmartin@mezeo.com>
Date:   Fri Oct 19 14:17:32 2012 -0500

    Issue 901:
    Make value of Contents-Encoding header case insensitive per RFC 2616.

diff --git a/requests/utils.py b/requests/utils.py
index 7c895c4b..f80e7782 100644
--- a/requests/utils.py
+++ b/requests/utils.py
@@ -454,9 +454,10 @@ def stream_decompress(iterator, mode='gzip'):
 
 
 def stream_untransfer(gen, resp):
-    if 'gzip' in resp.headers.get('content-encoding', ''):
+    ce = resp.headers.get('content-encoding', '').lower()
+    if 'gzip' in ce:
         gen = stream_decompress(gen, mode='gzip')
-    elif 'deflate' in resp.headers.get('content-encoding', ''):
+    elif 'deflate' in ce:
         gen = stream_decompress(gen, mode='deflate')
 
     return gen
