commit 4f786e4f6240d3518d1add2faf49166301580732
Author: Cory Benfield <lukasaoz@gmail.com>
Date:   Sun Dec 1 10:23:09 2013 +0000

    Tests for #1767.

diff --git a/test_requests.py b/test_requests.py
index 3b673956..8cb548b5 100755
--- a/test_requests.py
+++ b/test_requests.py
@@ -563,6 +563,18 @@ class RequestsTestCase(unittest.TestCase):
         url = 'http://user:pass@complex.url.com/path?query=yes'
         assert ('user', 'pass') == requests.utils.get_auth_from_url(url)
 
+    def test_get_auth_from_url_encoded_spaces(self):
+        url = 'http://user:pass%20pass@complex.url.com/path?query=yes'
+        assert ('user', 'pass pass') == requests.utils.get_auth_from_url(url)
+
+    def test_get_auth_from_url_not_encoded_spaces(self):
+        url = 'http://user:pass pass@complex.url.com/path?query=yes'
+        assert ('user', 'pass pass') == requests.utils.get_auth_from_url(url)
+
+    def test_get_auth_from_url_percent_chars(self):
+        url = 'http://user%user:pass@complex.url.com/path?query=yes'
+        assert ('user%user', 'pass') == requests.utils.get_auth_from_url(url)
+
     def test_cannot_send_unprepared_requests(self):
         r = requests.Request(url=HTTPBIN)
         with pytest.raises(ValueError):
