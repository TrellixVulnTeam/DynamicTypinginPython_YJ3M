commit a02f3dec02897bc4ab11329640aa79efbb4969f6
Author: Pavel Dmitriev <p.dmitriev@nimble.com>
Date:   Tue Nov 13 17:40:13 2012 +0200

    Fix for user-agent setting

diff --git a/requests/utils.py b/requests/utils.py
index ec9f4d2c..b3d33f4f 100644
--- a/requests/utils.py
+++ b/requests/utils.py
@@ -539,11 +539,18 @@ def default_user_agent():
         _implementation_version = platform.python_version()  # Complete Guess
     else:
         _implementation_version = 'Unknown'
+        
+    try:
+        p_system = platform.system()
+        p_release = platform.release()
+    except IOError:
+        p_system = 'Unknown'
+        p_release = 'Unknown'
 
     return " ".join([
             'python-requests/%s' % __version__,
             '%s/%s' % (_implementation, _implementation_version),
-            '%s/%s' % (platform.system(), platform.release()),
+            '%s/%s' % (p_system, p_release),
         ])
 
 
