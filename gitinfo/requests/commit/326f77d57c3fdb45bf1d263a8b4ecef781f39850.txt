commit 326f77d57c3fdb45bf1d263a8b4ecef781f39850
Author: Rasmus Scholer (TimelineX) <rasmusscholer@gmail.com>
Date:   Tue Mar 3 03:41:00 2015 +0100

    Created test case for using bytes and bytearray objects with files argument to Request.

diff --git a/test_requests.py b/test_requests.py
index 6e527848..4f38b042 100755
--- a/test_requests.py
+++ b/test_requests.py
@@ -935,6 +935,19 @@ class RequestsTestCase(unittest.TestCase):
 
         assert 'multipart/form-data' in p.headers['Content-Type']
 
+    def test_can_send_bytes_bytearray_objects_with_files(self):
+        # Test bytes:
+        data = {'a': 0.0}
+        files = {'b': b'foo'}
+        r = requests.Request('POST', httpbin('post'), data=data, files=files)
+        p = r.prepare()
+        assert 'multipart/form-data' in p.headers['Content-Type']
+        # Test bytearrays:
+        files = {'b': bytearray(b'foo')}
+        r = requests.Request('POST', httpbin('post'), data=data, files=files)
+        p = r.prepare()
+        assert 'multipart/form-data' in p.headers['Content-Type']
+
     def test_can_send_file_object_with_non_string_filename(self):
         f = io.BytesIO()
         f.name = 2
