commit 0d6773c68ca04cc90c004cb3a98313dd035c5e22
Author: Armin Ronacher <armin.ronacher@active-4.com>
Date:   Sat Sep 3 18:04:51 2011 +0200

    Fail silently if encoding header is missing

diff --git a/requests/utils.py b/requests/utils.py
index a9b4c75a..2e16163b 100644
--- a/requests/utils.py
+++ b/requests/utils.py
@@ -181,6 +181,11 @@ def unicode_from_html(content):
 def stream_decode_response_unicode(iterator, r):
     """Stream decodes a iterator."""
     encoding = get_encoding_from_headers(r.headers)
+    if encoding is None:
+        for item in iterator:
+            yield item
+        return
+
     decoder = codecs.getincrementaldecoder(encoding)(errors='replace')
     for chunk in iterator:
         rv = decoder.decode(chunk)
diff --git a/test_requests.py b/test_requests.py
index e3db01d8..2b2d50b7 100755
--- a/test_requests.py
+++ b/test_requests.py
@@ -477,6 +477,5 @@ class RequestsTestSuite(unittest.TestCase):
         self.assertEqual(r2.status_code, 200)
 
 
-
 if __name__ == '__main__':
     unittest.main()
