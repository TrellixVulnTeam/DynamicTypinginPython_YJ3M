commit 4c6540898c101a606e1a50e539f01a82163bdae0
Author: Jason Grout <jgrout6@bloomberg.net>
Date:   Fri Aug 28 20:20:07 2015 +0000

    don't lowercase a url before urlparsing it
    
    urlparse automatically lowercases the scheme and hostname

diff --git a/requests/adapters.py b/requests/adapters.py
index 96d64327..f911fc57 100644
--- a/requests/adapters.py
+++ b/requests/adapters.py
@@ -275,7 +275,7 @@ class HTTPAdapter(BaseAdapter):
         :param proxies: A dictionary of schemes or schemes and hosts to proxy URLs.
         """
         proxy = select_proxy(request.url, proxies)
-        scheme = urlparse(request.url.lower()).scheme
+        scheme = urlparse(request.url).scheme
         if proxy and scheme != 'https':
             url = urldefragauth(request.url)
         else:
diff --git a/requests/utils.py b/requests/utils.py
index 95bf6b5f..3d4c7945 100644
--- a/requests/utils.py
+++ b/requests/utils.py
@@ -544,7 +544,7 @@ def select_proxy(url, proxies):
     :param proxies: A dictionary of schemes or schemes and hosts to proxy URLs
     """
     proxies = proxies or {}
-    urlparts = urlparse(url.lower())
+    urlparts = urlparse(url)
     proxy = proxies.get(urlparts.scheme+'://'+urlparts.hostname)
     if proxy is None:
         proxy = proxies.get(urlparts.scheme)
