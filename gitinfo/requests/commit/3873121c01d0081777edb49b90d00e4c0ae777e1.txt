commit 3873121c01d0081777edb49b90d00e4c0ae777e1
Author: Piotr Dobrogost <pd@dev.dobrogost.net>
Date:   Fri Jan 20 21:42:25 2012 +0100

    tiny map() refactoring

diff --git a/requests/async.py b/requests/async.py
index fafcb9ed..94884478 100644
--- a/requests/async.py
+++ b/requests/async.py
@@ -78,12 +78,8 @@ def map(requests, prefetch=True, size=None):
 
     requests = list(requests)
 
-    if size:
-        pool = Pool(size)
-        jobs = [pool.spawn(r.send) for r in requests]
-    else:
-        jobs = [gevent.spawn(r.send) for r in requests]
-    
+    pool = Pool(size) if size else None
+    jobs = [send(r, pool) for r in requests]
     gevent.joinall(jobs)
 
     if prefetch:
