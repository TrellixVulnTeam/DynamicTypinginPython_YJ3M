commit 578b03255594d446b4fc8c6e00ec67dd3c8b440f
Author: Braulio Valdivielso Mart√≠nez <brlvldvlsmrtnz@gmail.com>
Date:   Tue Dec 8 16:37:03 2015 +0100

    Tested TestServer multiple request handling

diff --git a/test_requests.py b/test_requests.py
index 29773bda..aa591ef5 100755
--- a/test_requests.py
+++ b/test_requests.py
@@ -1817,5 +1817,22 @@ class TestTestServer(unittest.TestCase):
             sock.send(b'still alive')
             block_server.set() # release server block
 
+    def test_multiple_requests(self):
+        requests_to_handle = 5
+        
+        server = Server.basic_response_server(requests_to_handle=requests_to_handle)
+
+        with server as (host, port):
+            server_url = 'http://{}:{}'.format(host, port)
+            for _ in range(requests_to_handle):
+                r = requests.get(server_url)
+                assert r.status_code == 200
+
+            # the (n+1)th request fails
+            with pytest.raises(requests.exceptions.ConnectionError):
+                r = requests.get(server_url)
+
+
+
 if __name__ == '__main__':
     unittest.main()
