commit dc75b3ca0b4c95648eb07b92cb414394d99c13a0
Author: Miro Hronƒçok <miro@hroncok.cz>
Date:   Mon Apr 8 18:04:22 2019 +0200

    Support pytest 4
    
    Fixes https://github.com/kennethreitz/requests/issues/5048
    
    See https://docs.pytest.org/en/latest/deprecations.html#marks-in-pytest-mark-parametrize

diff --git a/setup.py b/setup.py
index 3dce2965..91e70139 100755
--- a/setup.py
+++ b/setup.py
@@ -54,7 +54,7 @@ test_requirements = [
     'pytest-mock',
     'pytest-xdist',
     'PySocks>=1.5.6, !=1.5.7',
-    'pytest>=2.8.0'
+    'pytest>=3'
 ]
 
 about = {}
diff --git a/tests/test_utils.py b/tests/test_utils.py
index 59b0b0ef..62c51494 100644
--- a/tests/test_utils.py
+++ b/tests/test_utils.py
@@ -33,7 +33,8 @@ class TestSuperLen:
         'stream, value', (
             (StringIO.StringIO, 'Test'),
             (BytesIO, b'Test'),
-            pytest.mark.skipif('cStringIO is None')((cStringIO, 'Test')),
+            pytest.param(cStringIO, 'Test',
+                         marks=pytest.mark.skipif('cStringIO is None')),
         ))
     def test_io_streams(self, stream, value):
         """Ensures that we properly deal with different kinds of IO streams."""
