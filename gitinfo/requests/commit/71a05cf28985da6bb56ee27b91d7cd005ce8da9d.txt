commit 71a05cf28985da6bb56ee27b91d7cd005ce8da9d
Author: David Black <dblack@atlassian.com>
Date:   Tue Jun 16 20:53:07 2020 +1000

    Avoid an unnecessary computation of the length of data for non-stream requests (which determines content-length based upon body content).

diff --git a/requests/models.py b/requests/models.py
index 6e20ac4d..ae6eb708 100644
--- a/requests/models.py
+++ b/requests/models.py
@@ -473,12 +473,12 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):
             not isinstance(data, (basestring, list, tuple, Mapping))
         ])
 
-        try:
-            length = super_len(data)
-        except (TypeError, AttributeError, UnsupportedOperation):
-            length = None
-
         if is_stream:
+            try:
+                length = super_len(data)
+            except (TypeError, AttributeError, UnsupportedOperation):
+                length = None
+
             body = data
 
             if getattr(body, 'tell', None) is not None:
