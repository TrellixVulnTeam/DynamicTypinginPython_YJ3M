commit 6f6b2fd1d5ca6b281a841e8a31e32eb6c34c429b
Author: Braulio Valdivielso Mart√≠nez <brlvldvlsmrtnz@gmail.com>
Date:   Mon Nov 23 20:52:06 2015 +0100

    Set 'Transfer-Encoding: chunked' if data file length equals 0

diff --git a/requests/models.py b/requests/models.py
index 639565cf..43a297e6 100644
--- a/requests/models.py
+++ b/requests/models.py
@@ -446,6 +446,8 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):
                 if data:
                     body = self._encode_params(data)
                     if isinstance(data, basestring) or hasattr(data, 'read'):
+                        if hasattr(data, 'fileno') and length == 0:
+                            self.headers['Transfer-Encoding'] = 'chunked'
                         content_type = None
                     else:
                         content_type = 'application/x-www-form-urlencoded'
