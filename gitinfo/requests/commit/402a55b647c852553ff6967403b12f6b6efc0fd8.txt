commit 402a55b647c852553ff6967403b12f6b6efc0fd8
Author: Cory Benfield <lukasaoz@gmail.com>
Date:   Wed Nov 30 21:19:31 2016 +0000

    Revert "Restrict URL preparation to HTTP/HTTPS"
    
    This reverts commit 34af72c87d79bd8852e8564c050dd7711c6a08d6.

diff --git a/requests/models.py b/requests/models.py
index cb44eddd..91555b58 100644
--- a/requests/models.py
+++ b/requests/models.py
@@ -347,9 +347,9 @@ class PreparedRequest(RequestEncodingMixin, RequestHooksMixin):
         url = url.lstrip()
 
         # Don't do any URL preparation for non-HTTP schemes like `mailto`,
-        # `data`, `http+unix` etc to work around exceptions from `url_parse`,
-        # which handles RFC 3986 only.
-        if ':' in url and not url.lower().startswith(('http://', 'https://')):
+        # `data` etc to work around exceptions from `url_parse`, which
+        # handles RFC 3986 only.
+        if ':' in url and not url.lower().startswith('http'):
             self.url = url
             return
 
diff --git a/tests/test_requests.py b/tests/test_requests.py
index ca90297e..3a5a3256 100755
--- a/tests/test_requests.py
+++ b/tests/test_requests.py
@@ -2175,20 +2175,3 @@ class TestPreparingURLs(object):
         r = requests.Request('GET', url=url)
         with pytest.raises(requests.exceptions.InvalidURL):
             r.prepare()
-
-    @pytest.mark.parametrize(
-        'protocol, url',
-        (
-            ("http+unix://", b"http+unix://%2Fvar%2Frun%2Fsocket/path"),
-            ("http+unix://", u"http+unix://%2Fvar%2Frun%2Fsocket/path"),
-            ("mailto", b"mailto:user@example.org"),
-            ("mailto", u"mailto:user@example.org"),
-            ("data", b"data:SSDimaUgUHl0aG9uIQ=="),
-        )
-    )
-    def test_url_passthrough(self, protocol, url):
-        session = requests.Session()
-        session.mount(protocol, HTTPAdapter())
-        p = requests.Request('GET', url=url)
-        p.prepare()
-        assert p.url == url
