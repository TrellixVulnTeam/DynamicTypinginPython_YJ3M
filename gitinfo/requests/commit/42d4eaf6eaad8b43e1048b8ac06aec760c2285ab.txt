commit 42d4eaf6eaad8b43e1048b8ac06aec760c2285ab
Author: Ian Cordasco <graffatcolmingov@gmail.com>
Date:   Tue Sep 6 09:55:37 2016 -0500

    Fix how we test fallback to latin-1 reason encoding
    
    This was terribly broken and found while merging master into proposed/3.0.0

diff --git a/tests/test_requests.py b/tests/test_requests.py
index f85510f3..e77e024a 100755
--- a/tests/test_requests.py
+++ b/tests/test_requests.py
@@ -1026,13 +1026,13 @@ class TestRequests:
         # check raise_status falls back to ISO-8859-1
         r = requests.Response()
         r.url = 'some url'
-        reason = u'Komponenttia ei l√∂ydy'
-        r.reason = reason.encode('latin-1')
+        reason = b'Komponenttia ei l\xf6ydy'
+        r.reason = reason
         r.status_code = 500
         r.encoding = None
         with pytest.raises(requests.exceptions.HTTPError) as e:
             r.raise_for_status()
-        assert reason in str(e)
+        assert reason.decode('latin-1') in str(e)
 
     def test_response_chunk_size_type(self):
         """Ensure that chunk_size is passed as None or an integer, otherwise
