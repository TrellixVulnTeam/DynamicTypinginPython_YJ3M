commit c333bd144e72d82a44dba03b6020e9e77e985e6a
Author: Antony Chazapis <chazapis@gmail.com>
Date:   Wed May 2 16:51:19 2012 +0300

    Fix out-of-range issue with iter_lines (#515).

diff --git a/requests/models.py b/requests/models.py
index ff0ef019..0143b877 100644
--- a/requests/models.py
+++ b/requests/models.py
@@ -751,7 +751,7 @@ class Response(object):
                 chunk = pending + chunk
             lines = chunk.splitlines()
 
-            if lines[-1][-1] == chunk[-1]:
+            if lines and lines[-1] and chunk and lines[-1][-1] == chunk[-1]:
                 pending = lines.pop()
             else:
                 pending = None
