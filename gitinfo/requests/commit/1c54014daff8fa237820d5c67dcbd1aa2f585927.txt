commit 1c54014daff8fa237820d5c67dcbd1aa2f585927
Author: Cory Benfield <lukasaoz@gmail.com>
Date:   Wed Dec 30 10:48:29 2015 +0000

    Don't parse nonexistent URLs.

diff --git a/requests/adapters.py b/requests/adapters.py
index 521489a5..7ca71775 100644
--- a/requests/adapters.py
+++ b/requests/adapters.py
@@ -302,7 +302,8 @@ class HTTPAdapter(BaseAdapter):
         """
         proxy = select_proxy(request.url, proxies)
         scheme = urlparse(request.url).scheme
-        proxy_scheme = urlparse(proxy).scheme
+        if proxy:
+            proxy_scheme = urlparse(proxy).scheme
 
         if proxy and proxy_scheme.lower().startswith('socks'):
             # Socks proxies behave like the proxy isn't there at all.
