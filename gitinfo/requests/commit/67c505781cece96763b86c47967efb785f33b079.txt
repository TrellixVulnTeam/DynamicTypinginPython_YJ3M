commit 67c505781cece96763b86c47967efb785f33b079
Author: Akira Kitada <akitada@gmail.com>
Date:   Wed Nov 12 23:46:22 2014 +0900

    Fix HTTPDigestAuth not to treat non-file as a file
    
    Ensure pos is set to None when the body is not a file
    so that HTTPDigestAuth detects the type of the body correctly.

diff --git a/requests/auth.py b/requests/auth.py
index 010919f3..618a902a 100644
--- a/requests/auth.py
+++ b/requests/auth.py
@@ -198,7 +198,11 @@ class HTTPDigestAuth(AuthBase):
         try:
             self.pos = r.body.tell()
         except AttributeError:
-            pass
+            # In the case of HTTPDigestAuth being reused and the body of
+            # the previous request was a file-like object, pos has the
+            # file position of the previous body. Ensure it's set to
+            # None.
+            self.pos = None
         r.register_hook('response', self.handle_401)
         r.register_hook('response', self.handle_redirect)
         return r
