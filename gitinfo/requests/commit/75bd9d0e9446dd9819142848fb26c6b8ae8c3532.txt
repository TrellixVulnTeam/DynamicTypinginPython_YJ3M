commit 75bd9d0e9446dd9819142848fb26c6b8ae8c3532
Author: Matt Giuca <matt.giuca@gmail.com>
Date:   Tue Feb 14 12:20:48 2012 +1100

    Added test case testing URI normalisation.
    
    Tests that percent-encoded unreserved characters get de-encoded.

diff --git a/test_requests.py b/test_requests.py
index 1168d3bd..00cc3c10 100644
--- a/test_requests.py
+++ b/test_requests.py
@@ -152,6 +152,14 @@ class RequestsTestSuite(TestSetup, unittest.TestCase):
         response = get(url)
         self.assertEqual(response.url, httpbin('get/' + path_reserved))
 
+        # Test that percent-encoded unreserved characters in a path get
+        # normalised to their un-encoded forms.
+        path_unreserved = 'ABCDwxyz1234-._~'
+        path_unreserved_escaped = '%41%42%43%44%77%78%79%7A%31%32%33%34%2D%2E%5F%7E'
+        url = httpbin('get/' + path_unreserved_escaped)
+        response = get(url)
+        self.assertEqual(response.url, httpbin('get/' + path_unreserved))
+
 
     def test_user_agent_transfers(self):
         """Issue XX"""
