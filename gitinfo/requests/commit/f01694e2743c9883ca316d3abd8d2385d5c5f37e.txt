commit f01694e2743c9883ca316d3abd8d2385d5c5f37e
Author: Ian Cordasco <graffatcolmingov@gmail.com>
Date:   Sat Aug 18 13:47:14 2012 -0400

    All tests pass, time for a PR.

diff --git a/requests/models.py b/requests/models.py
index f35ef7e1..9270f0ea 100644
--- a/requests/models.py
+++ b/requests/models.py
@@ -348,6 +348,7 @@ class Request(object):
         if (not files) or isinstance(self.data, str):
             return None
 
+        new_fields = []
         fields = to_key_val_list(self.data)
         files = to_key_val_list(files)
 
@@ -362,9 +363,8 @@ class Request(object):
                 fp = StringIO(fp)
             if isinstance(fp, bytes):
                 fp = BytesIO(fp)
-            fields.append((k, (fn, fp.read())))
+            new_fields.append((k, (fn, fp.read())))
 
-        new_fields = []
         for field, val in fields:
             if isinstance(val, list):
                 for v in val:
diff --git a/tests/test_requests.py b/tests/test_requests.py
index 10b43deb..b7dba369 100755
--- a/tests/test_requests.py
+++ b/tests/test_requests.py
@@ -1038,8 +1038,6 @@ class RequestsTestSuite(TestSetup, TestBaseMixin, unittest.TestCase):
         self.assertEqual(t.get('form'), {'field': ['a', 'b']})
         self.assertEqual(t.get('files'), files)
         r = post(httpbin('post'), data=data, files=files.items())
-        t = r.json
-        self.assertEqual(t.get('form'), {'field': 'a, b'})
         self.assertEqual(t.get('files'), files)
 
     def test_str_data_content_type(self):
