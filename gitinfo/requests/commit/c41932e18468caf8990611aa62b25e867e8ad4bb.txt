commit c41932e18468caf8990611aa62b25e867e8ad4bb
Author: Florian Mueller <florian.mueller@hostpoint.ch>
Date:   Tue Mar 12 16:04:19 2013 +0100

    Fixed some pickeling issues with HTTPAdapter and Session
    
    Added trust_env and stream to Session.__attrs__. Initialize
    self._pool_connections and self._pool_maxsize in HTTPAdapter.

diff --git a/requests/adapters.py b/requests/adapters.py
index 1472749b..5666e66a 100644
--- a/requests/adapters.py
+++ b/requests/adapters.py
@@ -52,6 +52,9 @@ class HTTPAdapter(BaseAdapter):
 
         super(HTTPAdapter, self).__init__()
 
+        self._pool_connections = pool_connections
+        self._pool_maxsize = pool_maxsize
+
         self.init_poolmanager(pool_connections, pool_maxsize)
 
     def __getstate__(self):
@@ -62,9 +65,7 @@ class HTTPAdapter(BaseAdapter):
         for attr, value in state.items():
             setattr(self, attr, value)
 
-        # setup a new poolmanager after unpickling
-        if self._pool_connections is not None:
-            self.init_poolmanager(self._pool_connections, self._pool_maxsize)
+        self.init_poolmanager(self._pool_connections, self._pool_maxsize)
 
     def init_poolmanager(self, connections, maxsize):
         # save these values for pickling
diff --git a/requests/sessions.py b/requests/sessions.py
index 36d90a1d..979c0034 100644
--- a/requests/sessions.py
+++ b/requests/sessions.py
@@ -178,7 +178,8 @@ class Session(SessionRedirectMixin):
 
     __attrs__ = [
         'headers', 'cookies', 'auth', 'timeout', 'proxies', 'hooks',
-        'params', 'verify', 'cert', 'prefetch', 'adapters']
+        'params', 'verify', 'cert', 'prefetch', 'adapters', 'stream',
+        'trust_env']
 
     def __init__(self):
 
