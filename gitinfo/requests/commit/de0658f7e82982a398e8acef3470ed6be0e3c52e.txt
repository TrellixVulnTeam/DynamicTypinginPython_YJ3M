commit de0658f7e82982a398e8acef3470ed6be0e3c52e
Author: Kenneth Reitz <me@kennethreitz.com>
Date:   Mon Feb 20 15:43:38 2012 -0500

    stick .netrc auth in pipeline

diff --git a/requests/models.py b/requests/models.py
index 2c0b2e08..a238214a 100644
--- a/requests/models.py
+++ b/requests/models.py
@@ -27,7 +27,7 @@ from .exceptions import (
     URLRequired, SSLError)
 from .utils import (
     get_encoding_from_headers, stream_untransfer, guess_filename, requote_uri,
-    dict_from_string, stream_decode_response_unicode)
+    dict_from_string, stream_decode_response_unicode, get_netrc_auth)
 from .compat import (
     urlparse, urlunparse, urljoin, urlsplit, urlencode, str, bytes,
     SimpleCookie, is_py2)
@@ -435,6 +435,10 @@ class Request(object):
         if (content_type) and (not 'content-type' in self.headers):
             self.headers['Content-Type'] = content_type
 
+        # Use .netrc auth if none was provided.
+        if not self.auth:
+            self.auth = get_netrc_auth(url)
+
         if self.auth:
             if isinstance(self.auth, tuple) and len(self.auth) == 2:
                 # special-case basic HTTP auth
