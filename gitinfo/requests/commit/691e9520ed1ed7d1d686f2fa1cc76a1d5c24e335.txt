commit 691e9520ed1ed7d1d686f2fa1cc76a1d5c24e335
Author: Antti Kaihola <antti.kaihola@eniram.fi>
Date:   Wed Jun 20 22:12:10 2018 +0300

    Add test for multivalued form-encoded element as a list (#4700)

diff --git a/tests/test_requests.py b/tests/test_requests.py
index dea411bf..fd04ad27 100644
--- a/tests/test_requests.py
+++ b/tests/test_requests.py
@@ -868,6 +868,12 @@ class TestRequests:
         assert r.status_code == 200
         assert r.url == httpbin('get?test=foo&test=baz')
 
+    def test_form_encoded_post_query_multivalued_element(self, httpbin):
+        r = requests.Request(method='POST', url=httpbin('post'),
+                             data=dict(test=['foo', 'baz']))
+        prep = r.prepare()
+        assert prep.body == 'test=foo&test=baz'
+
     def test_different_encodings_dont_break_post(self, httpbin):
         r = requests.post(httpbin('post'),
             data={'stuff': json.dumps({'a': 123})},
