commit 00b4ca3b744fa25d3c4aabf49774eaa40caf9f33
Author: Cory Benfield <lukasaoz@gmail.com>
Date:   Wed Aug 15 18:16:27 2012 +0100

    Don't get hung up on ports in proxies.

diff --git a/requests/models.py b/requests/models.py
index ae3c1be1..b45e99cd 100644
--- a/requests/models.py
+++ b/requests/models.py
@@ -556,7 +556,7 @@ class Request(object):
         no_proxy = filter(lambda x:x.strip(), self.proxies.get('no', '').split(','))
         proxy = self.proxies.get(_p.scheme)
 
-        if proxy and not any(map(_p.netloc.endswith, no_proxy)):
+        if proxy and not any(map(_p.hostname.endswith, no_proxy)):
             conn = poolmanager.proxy_from_url(proxy)
             _proxy = urlparse(proxy)
             if '@' in _proxy.netloc:
