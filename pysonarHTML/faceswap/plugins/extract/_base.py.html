<html>
<head>
<meta charset="utf-8">
<title>/home/xxm/Desktop/EMSE/dataset/faceswap/plugins/extract/_base.py</title>
<style type='text/css'>
body { color: #666666; }
a {
    text-decoration: none; color: #5AA2A7;
    border: solid 1px rgba(255,255,255,0);
}
a.active {
    background: -webkit-linear-gradient(top,rgba(255, 255, 200, 0.35) 0,rgba(255, 255, 200, 0.55) 100%);
    border: solid 1px #E5E600;
}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #cccccc;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px solid orange; padding-bottom: 1px}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted;

function highlight(xid)
{
    var elms = document.querySelectorAll('[xid="' + xid + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "active";
    }
    highlighted = xid;
}

function clearHighlight() {
    var elms = document.querySelectorAll('[xid="' + highlighted + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "";
    }
}

window.onload =
    function (e) {
        var tags = document.getElementsByTagName("A")
        for (var i = 0; i < tags.length; i++) {
            tags[i].onmouseover =
                function (e) {
                    clearHighlight();
                    var xid = e.toElement.getAttribute('xid');
                    highlight(xid);
                }
        }
    }</script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger'>logger</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config'>_get_config</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor'>Extractor</a><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__'>__init__</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.init_model', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.init_model'>init_model</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_input', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_input'>process_input</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.predict', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.predict'>predict</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_output', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_output'>process_output</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._predict', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._predict'>_predict</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.finalize', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.finalize'>finalize</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.get_batch', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.get_batch'>get_batch</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start'>start</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join'>join</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error'>check_and_raise_error</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model'>_get_model</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize'>initialize</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues'>_add_queues</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads'>_compile_threads</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread'>_add_thread</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process'>_thread_process</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item'>_get_item</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts'>_dict_lists_to_list_dicts</a></li></ul>
</li></ul>
</td><td><pre><span class='lineno'>   1</span> #!/usr/bin/env python3
<span class='lineno'>   2</span> &quot;&quot;&quot; Base class for Faceswap :mod:`~plugins.extract.detect`, :mod:`~plugins.extract.align` and
<span class='lineno'>   3</span> :mod:`~plugins.extract.mask` Plugins
<span class='lineno'>   4</span> &quot;&quot;&quot;
<span class='lineno'>   5</span> import logging
<span class='lineno'>   6</span> import os
<span class='lineno'>   7</span> import sys
<span class='lineno'>   8</span> 
<span class='lineno'>   9</span> from tensorflow.python import errors_impl as tf_errors  # pylint:disable=no-name-in-module
<span class='lineno'>  10</span> 
<span class='lineno'>  11</span> from <a href='../../lib/__init__.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib', title='lib'>lib</a>.<a href='../../lib/multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading', title='multithreading'>multithreading</a> import <a href='../../lib/multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread', title='<MultiThread>'>MultiThread</a>
<span class='lineno'>  12</span> from <a href='../../lib/__init__.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib', title='lib'>lib</a>.<a href='../../lib/queue_manager.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager', title='{QueueManager | queue_manager}'>queue_manager</a> import queue_manager
<span class='lineno'>  13</span> from <a href='../../lib/__init__.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib', title='lib'>lib</a>.<a href='../../lib/utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils', title='utils'>utils</a> import <a href='../../lib/utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.GetModel', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.GetModel', title='<GetModel>'>GetModel</a>, <a href='../../lib/utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.FaceswapError', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.FaceswapError', title='<FaceswapError>'>FaceswapError</a>
<span class='lineno'>  14</span> from .<a href='_config.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._config', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._config', title='_config'>_config</a> import <a href='_config.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._config.Config', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._config.Config', title='<Config>'>Config</a>
<span class='lineno'>  15</span> from .<a href='pipeline.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline', title='pipeline'>pipeline</a> import <a href='pipeline.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia', title='<ExtractMedia>'>ExtractMedia</a>
<span class='lineno'>  16</span> 
<span class='lineno'>  17</span> <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a> = logging.getLogger(__name__)  # pylint: disable=invalid-name
<span class='lineno'>  18</span> 
<span class='lineno'>  19</span> # TODO CPU mode
<span class='lineno'>  20</span> # TODO Run with warnings mode
<span class='lineno'>  21</span> 
<span class='lineno'>  22</span> 
<span class='lineno'>  23</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config', title='(?, None) -> FaceswapConfig -> dict / (str, None) -> FaceswapConfig -> dict'>_get_config</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config.plugin_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config.plugin_name', title='str'>plu</a>gin_name, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config.configfile', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config.configfile', title='None'>con</a>figfile=None):
<span class='lineno'>  24</span>     &quot;&quot;&quot; Return the configuration for the requested model
<span class='lineno'>  25</span> 
<span class='lineno'>  26</span>     Parameters
<span class='lineno'>  27</span>     ----------
<span class='lineno'>  28</span>     plugin_name: str
<span class='lineno'>  29</span>         The module name of the child plugin.
<span class='lineno'>  30</span>     configfile: str, optional
<span class='lineno'>  31</span>         Path to a :file:`./config/&lt;plugin_type&gt;.ini` file for this plugin. Default: use system
<span class='lineno'>  32</span>         configuration.
<span class='lineno'>  33</span> 
<span class='lineno'>  34</span>     Returns
<span class='lineno'>  35</span>     -------
<span class='lineno'>  36</span>     config_dict, dict
<span class='lineno'>  37</span>        A dictionary of configuration items from the configuration file
<span class='lineno'>  38</span>     &quot;&quot;&quot;
<span class='lineno'>  39</span>     return <a href='_config.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._config.Config', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._config.Config', title='<Config>'>Config</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config.plugin_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config.plugin_name', title='str'>plugin_name</a>, configfile=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config.configfile', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config.configfile', title='None'>configfile</a>).<a href='../../lib/config.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.config.FaceswapConfig.config_dict', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.config.FaceswapConfig.config_dict', title='FaceswapConfig -> dict'>config_dict</a>
<span class='lineno'>  40</span> 
<span class='lineno'>  41</span> 
<span class='lineno'>  42</span> class <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor', title='<Extractor>'>Extractor</a>():
<span class='lineno'>  43</span>     &quot;&quot;&quot; Extractor Plugin Object
<span class='lineno'>  44</span> 
<span class='lineno'>  45</span>     All ``_base`` classes for Aligners, Detectors and Maskers inherit from this class.
<span class='lineno'>  46</span> 
<span class='lineno'>  47</span>     This class sets up a pipeline for working with ML plugins.
<span class='lineno'>  48</span> 
<span class='lineno'>  49</span>     Plugins are split into 3 threads, to utilize Numpy and CV2s parallel processing, as well as
<span class='lineno'>  50</span>     allow the predict function of the model to sit in a dedicated thread.
<span class='lineno'>  51</span>     A plugin is expected to have 3 core functions, each in their own thread:
<span class='lineno'>  52</span>     - :func:`process_input()` - Prepare the data for feeding into a model
<span class='lineno'>  53</span>     - :func:`predict` - Feed the data through the model
<span class='lineno'>  54</span>     - :func:`process_output()` - Perform any data post-processing
<span class='lineno'>  55</span> 
<span class='lineno'>  56</span>     Parameters
<span class='lineno'>  57</span>     ----------
<span class='lineno'>  58</span>     git_model_id: int
<span class='lineno'>  59</span>         The second digit in the github tag that identifies this model. See
<span class='lineno'>  60</span>         https://github.com/deepfakes-models/faceswap-models for more information
<span class='lineno'>  61</span>     model_filename: str
<span class='lineno'>  62</span>         The name of the model file to be loaded
<span class='lineno'>  63</span> 
<span class='lineno'>  64</span>     Other Parameters
<span class='lineno'>  65</span>     ----------------
<span class='lineno'>  66</span>     configfile: str, optional
<span class='lineno'>  67</span>         Path to a custom configuration ``ini`` file. Default: Use system configfile
<span class='lineno'>  68</span>     instance: int, optional
<span class='lineno'>  69</span>         If this plugin is being executed multiple times (i.e. multiple pipelines have been
<span class='lineno'>  70</span>         launched), the instance of the plugin must be passed in for naming convention reasons.
<span class='lineno'>  71</span>         Default: 0
<span class='lineno'>  72</span> 
<span class='lineno'>  73</span>     The following attributes should be set in the plugin&#39;s :func:`__init__` method after
<span class='lineno'>  74</span>     initializing the parent.
<span class='lineno'>  75</span> 
<span class='lineno'>  76</span>     Attributes
<span class='lineno'>  77</span>     ----------
<span class='lineno'>  78</span>     name: str
<span class='lineno'>  79</span>         Name of this plugin. Used for display purposes.
<span class='lineno'>  80</span>     input_size: int
<span class='lineno'>  81</span>         The input size to the model in pixels across one edge. The input size should always be
<span class='lineno'>  82</span>         square.
<span class='lineno'>  83</span>     color_format: str
<span class='lineno'>  84</span>         Color format for model. Must be ``&#39;BGR&#39;``, ``&#39;RGB&#39;`` or ``&#39;GRAY&#39;``. Defaults to ``&#39;BGR&#39;``
<span class='lineno'>  85</span>         if not explicitly set.
<span class='lineno'>  86</span>     vram: int
<span class='lineno'>  87</span>         Approximate VRAM used by the model at :attr:`input_size`. Used to calculate the
<span class='lineno'>  88</span>         :attr:`batchsize`. Be conservative to avoid OOM.
<span class='lineno'>  89</span>     vram_warnings: int
<span class='lineno'>  90</span>         Approximate VRAM used by the model at :attr:`input_size` that will still run, but generates
<span class='lineno'>  91</span>         warnings. Used to calculate the :attr:`batchsize`. Be conservative to avoid OOM.
<span class='lineno'>  92</span>     vram_per_batch: int
<span class='lineno'>  93</span>         Approximate additional VRAM used by the model for each additional batch. Used to calculate
<span class='lineno'>  94</span>         the :attr:`batchsize`. Be conservative to avoid OOM.
<span class='lineno'>  95</span> 
<span class='lineno'>  96</span>     See Also
<span class='lineno'>  97</span>     --------
<span class='lineno'>  98</span>     plugins.extract.detect._base : Detector parent class for extraction plugins.
<span class='lineno'>  99</span>     plugins.extract.align._base : Aligner parent class for extraction plugins.
<span class='lineno'> 100</span>     plugins.extract.mask._base : Masker parent class for extraction plugins.
<span class='lineno'> 101</span>     plugins.extract.pipeline : The extract pipeline that configures and calls all plugins
<span class='lineno'> 102</span> 
<span class='lineno'> 103</span>     &quot;&quot;&quot;
<span class='lineno'> 104</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__', title='? -> ?'>__init__</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.git_model_id', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.git_model_id', title='None'>git</a>_model_id=None, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.model_filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.model_filename', title='None'>mod</a>el_filename=None, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.configfile', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.configfile', title='None'>con</a>figfile=None, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.instance', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.instance', title='int'>ins</a>tance=0):
<span class='lineno'> 105</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;Initializing %s: (git_model_id: %s, model_filename: %s, instance: %s, &quot;
<span class='lineno'> 106</span>                      &quot;configfile: %s, )&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.__class__.__name__, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.git_model_id', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.git_model_id', title='None'>git_model_id</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.model_filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.model_filename', title='None'>model_filename</a>,
<span class='lineno'> 107</span>                      <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.instance', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.instance', title='int'>instance</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.configfile', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.configfile', title='None'>configfile</a>)
<span class='lineno'> 108</span> 
<span class='lineno'> 109</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._instance', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._instance', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._instance', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._instance', title='int'>_instance</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.instance', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.instance', title='int'>instance</a>
<span class='lineno'> 110</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.config', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.config', title='FaceswapConfig -> dict'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.config', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.config', title='FaceswapConfig -> dict'>config</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base._get_config', title='(?, None) -> FaceswapConfig -> dict / (str, None) -> FaceswapConfig -> dict'>_get_config</a>(&quot;.&quot;.join(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.__module__.split(&quot;.&quot;)[-2:]), configfile=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.configfile', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.configfile', title='None'>configfile</a>)
<span class='lineno'> 111</span>         &quot;&quot;&quot; dict: Config for this plugin, loaded from ``extract.ini`` configfile &quot;&quot;&quot;
<span class='lineno'> 112</span> 
<span class='lineno'> 113</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.model_path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.model_path', title='GetModel -> {[str] | str}'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.model_path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.model_path', title='GetModel -> {[str] | str}'>model_path</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model', title='(Extractor, ?, ?) -> GetModel -> {[str] | str} / (Extractor, None, None) -> GetModel -> {[str] | str}'>_get_model</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.git_model_id', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.git_model_id', title='None'>git_model_id</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.model_filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.model_filename', title='None'>model_filename</a>)
<span class='lineno'> 114</span>         &quot;&quot;&quot; str or list: Path to the model file(s) (if required). Multiple model files should
<span class='lineno'> 115</span>         be a list of strings &quot;&quot;&quot;
<span class='lineno'> 116</span> 
<span class='lineno'> 117</span>         # &lt;&lt; SET THE FOLLOWING IN PLUGINS __init__ IF DIFFERENT FROM DEFAULT &gt;&gt; #
<span class='lineno'> 118</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', title='None'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', title='None'>name</a></a> = None
<span class='lineno'> 119</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.input_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.input_size', title='None'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.input_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.input_size', title='None'>input_size</a></a> = None
<span class='lineno'> 120</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.color_format', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.color_format', title='str'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.color_format', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.color_format', title='str'>color_format</a></a> = &quot;BGR&quot;
<span class='lineno'> 121</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram', title='None'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram', title='None'>vram</a></a> = None
<span class='lineno'> 122</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram_warnings', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram_warnings', title='None'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram_warnings', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram_warnings', title='None'>vram_warnings</a></a> = None  # Will run at this with warnings
<span class='lineno'> 123</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram_per_batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram_per_batch', title='None'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram_per_batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.vram_per_batch', title='None'>vram_per_batch</a></a> = None
<span class='lineno'> 124</span> 
<span class='lineno'> 125</span>         # &lt;&lt; THE FOLLOWING ARE SET IN self.initialize METHOD &gt;&gt; #
<span class='lineno'> 126</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.queue_size', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.queue_size', title='int'>queue_size</a></a> = 1
<span class='lineno'> 127</span>         &quot;&quot;&quot; int: Queue size for all internal queues. Set in :func:`initialize()` &quot;&quot;&quot;
<span class='lineno'> 128</span> 
<span class='lineno'> 129</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.model', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.model', title='None'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.model', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.model', title='None'>model</a></a> = None
<span class='lineno'> 130</span>         &quot;&quot;&quot;varies: The model for this plugin.
<span class='lineno'> 131</span>         Set in the plugin&#39;s :func:`init_model()` method &quot;&quot;&quot;
<span class='lineno'> 132</span> 
<span class='lineno'> 133</span>         # For detectors that support batching, this should be set to  the calculated batch size
<span class='lineno'> 134</span>         # that the amount of available VRAM will support.
<span class='lineno'> 135</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.batchsize', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.batchsize', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.batchsize', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.batchsize', title='int'>batchsize</a></a> = 1
<span class='lineno'> 136</span>         &quot;&quot;&quot; int: Batchsize for feeding this model. The number of images the model should
<span class='lineno'> 137</span>         feed through at once. &quot;&quot;&quot;
<span class='lineno'> 138</span> 
<span class='lineno'> 139</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', title='dict'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', title='dict'>_queues</a></a> = dict()
<span class='lineno'> 140</span>         &quot;&quot;&quot; dict: in + out queues and internal queues for this plugin, &quot;&quot;&quot;
<span class='lineno'> 141</span> 
<span class='lineno'> 142</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', title='{[?] | [MultiThread]}'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', title='{[?] | [MultiThread]}'>_threads</a></a> = []
<span class='lineno'> 143</span>         &quot;&quot;&quot; list: Internal threads for this plugin &quot;&quot;&quot;
<span class='lineno'> 144</span> 
<span class='lineno'> 145</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._extract_media', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._extract_media', title='dict'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._extract_media', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._extract_media', title='dict'>_extract_media</a></a> = dict()
<span class='lineno'> 146</span>         &quot;&quot;&quot; dict: The :class:`plugins.extract.pipeline.ExtractMedia` objects currently being
<span class='lineno'> 147</span>         processed. Stored at input for pairing back up on output of extractor process &quot;&quot;&quot;
<span class='lineno'> 148</span> 
<span class='lineno'> 149</span>         # &lt;&lt; THE FOLLOWING PROTECTED ATTRIBUTES ARE SET IN PLUGIN TYPE _base.py &gt;&gt;&gt; #
<span class='lineno'> 150</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', title='None'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', title='None'>_plugin_type</a></a> = None
<span class='lineno'> 151</span>         &quot;&quot;&quot; str: Plugin type. ``detect`` or ``align``
<span class='lineno'> 152</span>         set in ``&lt;plugin_type&gt;._base`` &quot;&quot;&quot;
<span class='lineno'> 153</span> 
<span class='lineno'> 154</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;Initialized _base %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.__init__.self', title='Extractor'>self</a>.__class__.__name__)
<span class='lineno'> 155</span> 
<span class='lineno'> 156</span>     # &lt;&lt;&lt; OVERIDABLE METHODS &gt;&gt;&gt; #
<span class='lineno'> 157</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.init_model', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.init_model', title='Extractor -> None'>init_model</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.init_model.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.init_model.self', title='Extractor'>sel</a>f):
<span class='lineno'> 158</span>         &quot;&quot;&quot; **Override method**
<span class='lineno'> 159</span> 
<span class='lineno'> 160</span>         Override this method to execute the specific model initialization method &quot;&quot;&quot;
<span class='lineno'> 161</span>         raise NotImplementedError
<span class='lineno'> 162</span> 
<span class='lineno'> 163</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_input', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_input', title='(Extractor, ?) -> None'>process_input</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_input.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_input.self', title='Extractor'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_input.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_input.batch', title='?'>bat</a>ch):
<span class='lineno'> 164</span>         &quot;&quot;&quot; **Override method**
<span class='lineno'> 165</span> 
<span class='lineno'> 166</span>         Override this method for specific extractor pre-processing of image
<span class='lineno'> 167</span> 
<span class='lineno'> 168</span>         Parameters
<span class='lineno'> 169</span>         ----------
<span class='lineno'> 170</span>         batch : dict
<span class='lineno'> 171</span>             Contains the batch that is currently being passed through the plugin process
<span class='lineno'> 172</span> 
<span class='lineno'> 173</span>         Notes
<span class='lineno'> 174</span>         -----
<span class='lineno'> 175</span>         When preparing an input to the model a key ``feed`` must be added
<span class='lineno'> 176</span>         to the :attr:`batch` ``dict`` which contains this input.
<span class='lineno'> 177</span>         &quot;&quot;&quot;
<span class='lineno'> 178</span>         raise NotImplementedError
<span class='lineno'> 179</span> 
<span class='lineno'> 180</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.predict', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.predict', title='(Aligner, ?) -> None / (Detector, None) -> None / (Extractor, ?) -> None / (Masker, ?) -> None / (Detector, ?) -> None'>predict</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.predict.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.predict.self', title='{Aligner | Detector | Extractor | Masker}'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.predict.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.predict.batch', title='None'>bat</a>ch):
<span class='lineno'> 181</span>         &quot;&quot;&quot; **Override method**
<span class='lineno'> 182</span> 
<span class='lineno'> 183</span>         Override this method for specific extractor model prediction function
<span class='lineno'> 184</span> 
<span class='lineno'> 185</span>         Parameters
<span class='lineno'> 186</span>         ----------
<span class='lineno'> 187</span>         batch : dict
<span class='lineno'> 188</span>             Contains the batch that is currently being passed through the plugin process
<span class='lineno'> 189</span> 
<span class='lineno'> 190</span>         Notes
<span class='lineno'> 191</span>         -----
<span class='lineno'> 192</span>         Input for :func:`predict` should have been set in :func:`process_input` with the addition
<span class='lineno'> 193</span>         of a ``feed`` key to the :attr:`batch` ``dict``.
<span class='lineno'> 194</span> 
<span class='lineno'> 195</span>         Output from the model should add the key ``prediction`` to the :attr:`batch` ``dict``.
<span class='lineno'> 196</span> 
<span class='lineno'> 197</span>         For Detect:
<span class='lineno'> 198</span>             the expected output for the ``prediction`` key of the :attr:`batch` dict should be a
<span class='lineno'> 199</span>             ``list`` of :attr:`batchsize` of detected face points. These points should be either
<span class='lineno'> 200</span>             a ``list``, ``tuple`` or ``numpy.ndarray`` with the first 4 items being the `left`,
<span class='lineno'> 201</span>             `top`, `right`, `bottom` points, in that order
<span class='lineno'> 202</span>         &quot;&quot;&quot;
<span class='lineno'> 203</span>         raise NotImplementedError
<span class='lineno'> 204</span> 
<span class='lineno'> 205</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_output', title='(Extractor, ?) -> None'>process_output</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_output.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_output.self', title='Extractor'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_output.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_output.batch', title='?'>bat</a>ch):
<span class='lineno'> 206</span>         &quot;&quot;&quot; **Override method**
<span class='lineno'> 207</span> 
<span class='lineno'> 208</span>         Override this method for specific extractor model post predict function
<span class='lineno'> 209</span> 
<span class='lineno'> 210</span>         Parameters
<span class='lineno'> 211</span>         ----------
<span class='lineno'> 212</span>         batch : dict
<span class='lineno'> 213</span>             Contains the batch that is currently being passed through the plugin process
<span class='lineno'> 214</span> 
<span class='lineno'> 215</span>         Notes
<span class='lineno'> 216</span>         -----
<span class='lineno'> 217</span>         For Align:
<span class='lineno'> 218</span>             The key ``landmarks`` must be returned in the :attr:`batch` ``dict`` from this method.
<span class='lineno'> 219</span>             This should be a ``list`` or ``numpy.ndarray`` of :attr:`batchsize` containing a
<span class='lineno'> 220</span>             ``list``, ``tuple`` or ``numpy.ndarray`` of `(x, y)` coordinates of the 68 point
<span class='lineno'> 221</span>             landmarks as calculated from the :attr:`model`.
<span class='lineno'> 222</span>         &quot;&quot;&quot;
<span class='lineno'> 223</span>         raise NotImplementedError
<span class='lineno'> 224</span> 
<span class='lineno'> 225</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._predict', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._predict', title='(Extractor, ?) -> None'>_predict</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._predict.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._predict.self', title='Extractor'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._predict.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._predict.batch', title='?'>bat</a>ch):
<span class='lineno'> 226</span>         &quot;&quot;&quot; **Override method** (at `&lt;plugin_type&gt;` level)
<span class='lineno'> 227</span> 
<span class='lineno'> 228</span>         This method should be overridden at the `&lt;plugin_type&gt;` level (IE.
<span class='lineno'> 229</span>         ``plugins.extract.detect._base`` or ``plugins.extract.align._base``) and should not
<span class='lineno'> 230</span>         be overridden within plugins themselves.
<span class='lineno'> 231</span> 
<span class='lineno'> 232</span>         It acts as a wrapper for the plugin&#39;s ``self.predict`` method and handles any
<span class='lineno'> 233</span>         predict processing that is consistent for all plugins within the `plugin_type`
<span class='lineno'> 234</span> 
<span class='lineno'> 235</span>         Parameters
<span class='lineno'> 236</span>         ----------
<span class='lineno'> 237</span>         batch : dict
<span class='lineno'> 238</span>             Contains the batch that is currently being passed through the plugin process
<span class='lineno'> 239</span>         &quot;&quot;&quot;
<span class='lineno'> 240</span>         raise NotImplementedError
<span class='lineno'> 241</span> 
<span class='lineno'> 242</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.finalize', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.finalize', title='(Extractor, ?) -> None'>finalize</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.finalize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.finalize.self', title='Extractor'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.finalize.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.finalize.batch', title='?'>bat</a>ch):
<span class='lineno'> 243</span>         &quot;&quot;&quot; **Override method** (at `&lt;plugin_type&gt;` level)
<span class='lineno'> 244</span> 
<span class='lineno'> 245</span>         This method should be overridden at the `&lt;plugin_type&gt;` level (IE.
<span class='lineno'> 246</span>         :mod:`plugins.extract.detect._base`, :mod:`plugins.extract.align._base` or
<span class='lineno'> 247</span>         :mod:`plugins.extract.mask._base`) and should not be overridden within plugins themselves.
<span class='lineno'> 248</span> 
<span class='lineno'> 249</span>         Handles consistent finalization for all plugins that exist within that plugin type. Its
<span class='lineno'> 250</span>         input is always the output from :func:`process_output()`
<span class='lineno'> 251</span> 
<span class='lineno'> 252</span>         Parameters
<span class='lineno'> 253</span>         ----------
<span class='lineno'> 254</span>         batch : dict
<span class='lineno'> 255</span>             Contains the batch that is currently being passed through the plugin process
<span class='lineno'> 256</span> 
<span class='lineno'> 257</span>         &quot;&quot;&quot;
<span class='lineno'> 258</span> 
<span class='lineno'> 259</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.get_batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.get_batch', title='(Extractor, ?) -> None'>get_batch</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.get_batch.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.get_batch.self', title='Extractor'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.get_batch.queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.get_batch.queue', title='?'>que</a>ue):
<span class='lineno'> 260</span>         &quot;&quot;&quot; **Override method** (at `&lt;plugin_type&gt;` level)
<span class='lineno'> 261</span> 
<span class='lineno'> 262</span>         This method should be overridden at the `&lt;plugin_type&gt;` level (IE.
<span class='lineno'> 263</span>         :mod:`plugins.extract.detect._base`, :mod:`plugins.extract.align._base` or
<span class='lineno'> 264</span>         :mod:`plugins.extract.mask._base`) and should not be overridden within plugins themselves.
<span class='lineno'> 265</span> 
<span class='lineno'> 266</span>         Get :class:`~plugins.extract.pipeline.ExtractMedia` items from the queue in batches of
<span class='lineno'> 267</span>         :attr:`batchsize`
<span class='lineno'> 268</span> 
<span class='lineno'> 269</span>         Parameters
<span class='lineno'> 270</span>         ----------
<span class='lineno'> 271</span>         queue : queue.Queue()
<span class='lineno'> 272</span>             The ``queue`` that the batch will be fed from. This will be the input to the plugin.
<span class='lineno'> 273</span>         &quot;&quot;&quot;
<span class='lineno'> 274</span>         raise NotImplementedError
<span class='lineno'> 275</span> 
<span class='lineno'> 276</span>     # &lt;&lt;&lt; THREADING METHODS &gt;&gt;&gt; #
<span class='lineno'> 277</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start', title='Extractor -> None'>start</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start.self', title='Extractor'>sel</a>f):
<span class='lineno'> 278</span>         &quot;&quot;&quot; Start all threads
<span class='lineno'> 279</span> 
<span class='lineno'> 280</span>         Exposed for :mod:`~plugins.extract.pipeline` to start plugin&#39;s threads
<span class='lineno'> 281</span>         &quot;&quot;&quot;
<span class='lineno'> 282</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start.thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start.thread', title='MultiThread'>thread</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', title='{[?] | [MultiThread]}'>_threads</a>:
<span class='lineno'> 283</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start.thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.start.thread', title='MultiThread'>thread</a>.<a href='../../lib/multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.start', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.start', title='BackgroundGenerator -> None / MultiThread -> None'>start</a>()
<span class='lineno'> 284</span> 
<span class='lineno'> 285</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join', title='Extractor -> None'>join</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join.self', title='Extractor'>sel</a>f):
<span class='lineno'> 286</span>         &quot;&quot;&quot; Join all threads
<span class='lineno'> 287</span> 
<span class='lineno'> 288</span>         Exposed for :mod:`~plugins.extract.pipeline` to join plugin&#39;s threads
<span class='lineno'> 289</span>         &quot;&quot;&quot;
<span class='lineno'> 290</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join.thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join.thread', title='MultiThread'>thread</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', title='{[?] | [MultiThread]}'>_threads</a>:
<span class='lineno'> 291</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join.thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join.thread', title='MultiThread'>thread</a>.<a href='../../lib/multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.join', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.join', title='MultiThread -> None'>join</a>()
<span class='lineno'> 292</span>             del <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join.thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.join.thread', title='MultiThread'>thread</a>
<span class='lineno'> 293</span> 
<span class='lineno'> 294</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error', title='Extractor -> None'>check_and_raise_error</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.self', title='Extractor'>sel</a>f):
<span class='lineno'> 295</span>         &quot;&quot;&quot; Check all threads for errors
<span class='lineno'> 296</span> 
<span class='lineno'> 297</span>         Exposed for :mod:`~plugins.extract.pipeline` to check plugin&#39;s threads for errors
<span class='lineno'> 298</span>         &quot;&quot;&quot;
<span class='lineno'> 299</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.thread', title='MultiThread'>thread</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', title='{[?] | [MultiThread]}'>_threads</a>:
<span class='lineno'> 300</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.err', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.err', title='None'>err</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.thread', title='MultiThread'>thread</a>.<a href='../../lib/multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.check_and_raise_error', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.check_and_raise_error', title='MultiThread -> None / BackgroundGenerator -> None'>check_and_raise_error</a>()
<span class='lineno'> 301</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.err', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.check_and_raise_error.err', title='None'>err</a> is not None:
<span class='lineno'> 302</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;thread_error_detected&quot;)
<span class='lineno'> 303</span>                 return True
<span class='lineno'> 304</span>         return False
<span class='lineno'> 305</span> 
<span class='lineno'> 306</span>     # &lt;&lt;&lt; PROTECTED ACCESS METHODS &gt;&gt;&gt; #
<span class='lineno'> 307</span>     # &lt;&lt;&lt; INIT METHODS &gt;&gt;&gt; #
<span class='lineno'> 308</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model', title='(Extractor, ?, ?) -> GetModel -> {[str] | str} / (Extractor, None, None) -> GetModel -> {[str] | str}'>_get_model</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.self', title='Extractor'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.git_model_id', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.git_model_id', title='None'>git</a>_model_id, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.model_filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.model_filename', title='None'>mod</a>el_filename):
<span class='lineno'> 309</span>         &quot;&quot;&quot; Check if model is available, if not, download and unzip it &quot;&quot;&quot;
<span class='lineno'> 310</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.model_filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.model_filename', title='None'>model_filename</a> is None:
<span class='lineno'> 311</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;No model_filename specified. Returning None&quot;)
<span class='lineno'> 312</span>             return None
<span class='lineno'> 313</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.git_model_id', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.git_model_id', title='None'>git_model_id</a> is None:
<span class='lineno'> 314</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;No git_model_id specified. Returning None&quot;)
<span class='lineno'> 315</span>             return None
<span class='lineno'> 316</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.plugin_path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.plugin_path', title='str'>plugin_path</a> = os.path.join(*<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.self', title='Extractor'>self</a>.__module__.split(&quot;.&quot;)[:-1])
<span class='lineno'> 317</span>         if os.path.basename(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.plugin_path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.plugin_path', title='str'>plugin_path</a>) in (&quot;detect&quot;, &quot;align&quot;, &quot;mask&quot;, &quot;recognition&quot;):
<span class='lineno'> 318</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.base_path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.base_path', title='str'>base_path</a> = os.path.dirname(os.path.realpath(sys.argv[0]))
<span class='lineno'> 319</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.cache_path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.cache_path', title='str'>cache_path</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.base_path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.base_path', title='str'>base_path</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.plugin_path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.plugin_path', title='str'>plugin_path</a>, &quot;.cache&quot;)
<span class='lineno'> 320</span>         else:
<span class='lineno'> 321</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.cache_path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.cache_path', title='str'>cache_path</a> = os.path.join(os.path.dirname(__file__), &quot;.cache&quot;)
<span class='lineno'> 322</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.model', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.model', title='GetModel'>model</a> = <a href='../../lib/utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.GetModel', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.GetModel', title='<GetModel>'>GetModel</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.model_filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.model_filename', title='None'>model_filename</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.cache_path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.cache_path', title='str'>cache_path</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.git_model_id', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.git_model_id', title='None'>git_model_id</a>)
<span class='lineno'> 323</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.model', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_model.model', title='GetModel'>model</a>.<a href='../../lib/utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.GetModel.model_path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.GetModel.model_path', title='GetModel -> {[str] | str}'>model_path</a>
<span class='lineno'> 324</span> 
<span class='lineno'> 325</span>     # &lt;&lt;&lt; PLUGIN INITIALIZATION &gt;&gt;&gt; #
<span class='lineno'> 326</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize', title='Extractor -> ?'>initialize</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>sel</a>f, *args, **kwargs):
<span class='lineno'> 327</span>         &quot;&quot;&quot; Initialize the extractor plugin
<span class='lineno'> 328</span> 
<span class='lineno'> 329</span>             Should be called from :mod:`~plugins.extract.pipeline`
<span class='lineno'> 330</span>         &quot;&quot;&quot;
<span class='lineno'> 331</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;initialize %s: (args: %s, kwargs: %s)&quot;,
<span class='lineno'> 332</span>                      <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>self</a>.__class__.__name__, args, kwargs)
<span class='lineno'> 333</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.info(&quot;Initializing %s (%s)...&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', title='None'>name</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', title='None'>_plugin_type</a>.title())
<span class='lineno'> 334</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.queue_size', title='int'>queue_size</a> = 1
<span class='lineno'> 335</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.name', title='?'>name</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', title='None'>name</a>.replace(&quot; &quot;, &quot;_&quot;).lower()
<span class='lineno'> 336</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues', title='(Extractor, ?, ?, ?) -> None / (Extractor, ?, ?, [str]) -> None'>_add_queues</a>(kwargs[&quot;in_queue&quot;],
<span class='lineno'> 337</span>                          kwargs[&quot;out_queue&quot;],
<span class='lineno'> 338</span>                          [&quot;predict_{}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.name', title='?'>name</a>), &quot;post_{}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.name', title='?'>name</a>)])
<span class='lineno'> 339</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads', title='Extractor -> None'>_compile_threads</a>()
<span class='lineno'> 340</span>         try:
<span class='lineno'> 341</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.init_model', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.init_model', title='Extractor -> None'>init_model</a>()
<span class='lineno'> 342</span>         except tf_errors.UnknownError as err:
<span class='lineno'> 343</span>             if &quot;failed to get convolution algorithm&quot; in str(err).lower():
<span class='lineno'> 344</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.msg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.msg', title='str'>msg</a> = (&quot;Tensorflow raised an unknown error. This is most likely caused by a &quot;
<span class='lineno'> 345</span>                        &quot;failure to launch cuDNN which can occur for some GPU/Tensorflow &quot;
<span class='lineno'> 346</span>                        &quot;combinations. You should enable `allow_growth` to attempt to resolve this &quot;
<span class='lineno'> 347</span>                        &quot;issue:&quot;
<span class='lineno'> 348</span>                        &quot;\nGUI: Go to Settings &gt; Extract Plugins &gt; Global and enable the &quot;
<span class='lineno'> 349</span>                        &quot;`allow_growth` option.&quot;
<span class='lineno'> 350</span>                        &quot;\nCLI: Go to `faceswap/config/extract.ini` and change the `allow_growth &quot;
<span class='lineno'> 351</span>                        &quot;option to `True`.&quot;)
<span class='lineno'> 352</span>                 raise FaceswapError(msg) from err
<span class='lineno'> 353</span>             raise err
<span class='lineno'> 354</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.info(&quot;Initialized %s (%s) with batchsize of %s&quot;,
<span class='lineno'> 355</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', title='None'>name</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', title='None'>_plugin_type</a>.title(), <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.initialize.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.batchsize', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.batchsize', title='int'>batchsize</a>)
<span class='lineno'> 356</span> 
<span class='lineno'> 357</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues', title='(Extractor, ?, ?, ?) -> None / (Extractor, ?, ?, [str]) -> None'>_add_queues</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', title='Extractor'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.in_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.in_queue', title='?'>in_</a>queue, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.out_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.out_queue', title='?'>out</a>_queue, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.queues', title='[str]'>que</a>ues):
<span class='lineno'> 358</span>         &quot;&quot;&quot; Add the queues
<span class='lineno'> 359</span>             in_queue and out_queue should be previously created queue manager queues.
<span class='lineno'> 360</span>             queues should be a list of queue names &quot;&quot;&quot;
<span class='lineno'> 361</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', title='dict'>_queues</a>[&quot;in&quot;] = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.in_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.in_queue', title='?'>in_queue</a>
<span class='lineno'> 362</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', title='dict'>_queues</a>[&quot;out&quot;] = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.out_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.out_queue', title='?'>out_queue</a>
<span class='lineno'> 363</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.q_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.q_name', title='str'>q_name</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.queues', title='[str]'>queues</a>:
<span class='lineno'> 364</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', title='dict'>_queues</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.q_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.q_name', title='str'>q_name</a>] = <a href='../../lib/queue_manager.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager.queue_manager', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager.queue_manager', title='QueueManager'>queue_manager</a>.<a href='../../lib/queue_manager.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager.QueueManager.get_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager.QueueManager.get_queue', title='(QueueManager, ?, int) -> None / (QueueManager, str, int) -> None'>get_queue</a>(
<span class='lineno'> 365</span>                 name=&quot;{}{}_{}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', title='None'>_plugin_type</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._instance', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._instance', title='int'>_instance</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.q_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.q_name', title='str'>q_name</a>),
<span class='lineno'> 366</span>                 maxsize=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_queues.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.queue_size', title='int'>queue_size</a>)
<span class='lineno'> 367</span> 
<span class='lineno'> 368</span>     # &lt;&lt;&lt; THREAD METHODS &gt;&gt;&gt; #
<span class='lineno'> 369</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads', title='Extractor -> None'>_compile_threads</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>sel</a>f):
<span class='lineno'> 370</span>         &quot;&quot;&quot; Compile the threads into self._threads list &quot;&quot;&quot;
<span class='lineno'> 371</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;Compiling %s threads&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', title='None'>_plugin_type</a>)
<span class='lineno'> 372</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', title='?'>name</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.name', title='None'>name</a>.replace(&quot; &quot;, &quot;_&quot;).lower()
<span class='lineno'> 373</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.base_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.base_name', title='str'>base_name</a> = &quot;{}_{}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', title='None'>_plugin_type</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', title='?'>name</a>)
<span class='lineno'> 374</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread', title='(Extractor, ?, ?, ?, ?) -> None / (Extractor, str, (Extractor, ?) -> None, ?, ?) -> None'>_add_thread</a>(&quot;{}_input&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.base_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.base_name', title='str'>base_name</a>),
<span class='lineno'> 375</span>                          <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_input', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_input', title='(Extractor, ?) -> None'>process_input</a>,
<span class='lineno'> 376</span>                          <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', title='dict'>_queues</a>[&quot;in&quot;],
<span class='lineno'> 377</span>                          <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', title='dict'>_queues</a>[&quot;predict_{}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', title='?'>name</a>)])
<span class='lineno'> 378</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread', title='(Extractor, ?, ?, ?, ?) -> None / (Extractor, str, (Extractor, ?) -> None, ?, ?) -> None'>_add_thread</a>(&quot;{}_predict&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.base_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.base_name', title='str'>base_name</a>),
<span class='lineno'> 379</span>                          <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._predict', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._predict', title='(Extractor, ?) -> None'>_predict</a>,
<span class='lineno'> 380</span>                          <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', title='dict'>_queues</a>[&quot;predict_{}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', title='?'>name</a>)],
<span class='lineno'> 381</span>                          <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', title='dict'>_queues</a>[&quot;post_{}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', title='?'>name</a>)])
<span class='lineno'> 382</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread', title='(Extractor, ?, ?, ?, ?) -> None / (Extractor, str, (Extractor, ?) -> None, ?, ?) -> None'>_add_thread</a>(&quot;{}_output&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.base_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.base_name', title='str'>base_name</a>),
<span class='lineno'> 383</span>                          <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.process_output', title='(Extractor, ?) -> None'>process_output</a>,
<span class='lineno'> 384</span>                          <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', title='dict'>_queues</a>[&quot;post_{}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.name', title='?'>name</a>)],
<span class='lineno'> 385</span>                          <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._queues', title='dict'>_queues</a>[&quot;out&quot;])
<span class='lineno'> 386</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;Compiled %s threads: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._plugin_type', title='None'>_plugin_type</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._compile_threads.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', title='{[?] | [MultiThread]}'>_threads</a>)
<span class='lineno'> 387</span> 
<span class='lineno'> 388</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread', title='(Extractor, ?, ?, ?, ?) -> None / (Extractor, str, (Extractor, ?) -> None, ?, ?) -> None'>_add_thread</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.self', title='Extractor'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.name', title='str'>nam</a>e, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.function', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.function', title='{(Extractor, ?) -> None | (Extractor, ?) -> None | (Extractor, ?) -> None}'>fun</a>ction, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.in_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.in_queue', title='?'>in_</a>queue, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.out_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.out_queue', title='?'>out</a>_queue):
<span class='lineno'> 389</span>         &quot;&quot;&quot; Add a MultiThread thread to self._threads &quot;&quot;&quot;
<span class='lineno'> 390</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;Adding thread: (name: %s, function: %s, in_queue: %s, out_queue: %s)&quot;,
<span class='lineno'> 391</span>                      <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.name', title='str'>name</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.function', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.function', title='{(Extractor, ?) -> None | (Extractor, ?) -> None | (Extractor, ?) -> None}'>function</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.in_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.in_queue', title='?'>in_queue</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.out_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.out_queue', title='?'>out_queue</a>)
<span class='lineno'> 392</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._threads', title='{[?] | [MultiThread]}'>_threads</a>.append(<a href='../../lib/multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread', title='<MultiThread>'>MultiThread</a>(target=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process', title='(Extractor, ?, ?, ?) -> ?'>_thread_process</a>,
<span class='lineno'> 393</span>                                          name=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.name', title='str'>name</a>,
<span class='lineno'> 394</span>                                          function=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.function', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.function', title='{(Extractor, ?) -> None | (Extractor, ?) -> None | (Extractor, ?) -> None}'>function</a>,
<span class='lineno'> 395</span>                                          in_queue=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.in_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.in_queue', title='?'>in_queue</a>,
<span class='lineno'> 396</span>                                          out_queue=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.out_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.out_queue', title='?'>out_queue</a>))
<span class='lineno'> 397</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;Added thread: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._add_thread.name', title='str'>name</a>)
<span class='lineno'> 398</span> 
<span class='lineno'> 399</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process', title='(Extractor, ?, ?, ?) -> ?'>_thread_process</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.self', title='Extractor'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.function', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.function', title='?'>fun</a>ction, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.in_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.in_queue', title='?'>in_</a>queue, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.out_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.out_queue', title='?'>out</a>_queue):
<span class='lineno'> 400</span>         &quot;&quot;&quot; Perform a plugin function in a thread &quot;&quot;&quot;
<span class='lineno'> 401</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.func_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.func_name', title='?'>func_name</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.function', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.function', title='?'>function</a>.__name__
<span class='lineno'> 402</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;threading: (function: &#39;%s&#39;)&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.func_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.func_name', title='?'>func_name</a>)
<span class='lineno'> 403</span>         while True:
<span class='lineno'> 404</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.func_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.func_name', title='?'>func_name</a> == &quot;process_input&quot;:
<span class='lineno'> 405</span>                 # Process input items to batches
<span class='lineno'> 406</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.exhausted', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.exhausted', title='?'>exhausted</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', title='?'>batch</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.get_batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.get_batch', title='(Extractor, ?) -> None'>get_batch</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.in_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.in_queue', title='?'>in_queue</a>)
<span class='lineno'> 407</span>                 if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.exhausted', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.exhausted', title='?'>exhausted</a>:
<span class='lineno'> 408</span>                     if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', title='?'>batch</a>:
<span class='lineno'> 409</span>                         # Put the final batch
<span class='lineno'> 410</span>                         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', title='?'>batch</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.function', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.function', title='?'>function</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', title='?'>batch</a>)
<span class='lineno'> 411</span>                         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.out_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.out_queue', title='?'>out_queue</a>.put(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', title='?'>batch</a>)
<span class='lineno'> 412</span>                     break
<span class='lineno'> 413</span>             else:
<span class='lineno'> 414</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', title='ExtractMedia'>batch</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item', title='(Detector, ?) -> ExtractMedia / (Extractor, ?) -> ExtractMedia / (Aligner, ?) -> ExtractMedia / (Masker, ?) -> ExtractMedia'>_get_item</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.in_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.in_queue', title='?'>in_queue</a>)
<span class='lineno'> 415</span>                 if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', title='ExtractMedia'>batch</a> == &quot;EOF&quot;:
<span class='lineno'> 416</span>                     break
<span class='lineno'> 417</span>             try:
<span class='lineno'> 418</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', title='?'>batch</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.function', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.function', title='?'>function</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', title='ExtractMedia'>batch</a>)
<span class='lineno'> 419</span>             except tf_errors.UnknownError as err:
<span class='lineno'> 420</span>                 if &quot;failed to get convolution algorithm&quot; in str(err).lower():
<span class='lineno'> 421</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.msg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.msg', title='str'>msg</a> = (&quot;Tensorflow raised an unknown error. This is most likely caused by a &quot;
<span class='lineno'> 422</span>                            &quot;failure to launch cuDNN which can occur for some GPU/Tensorflow &quot;
<span class='lineno'> 423</span>                            &quot;combinations. You should enable `allow_growth` to attempt to resolve &quot;
<span class='lineno'> 424</span>                            &quot;this issue:&quot;
<span class='lineno'> 425</span>                            &quot;\nGUI: Go to Settings &gt; Extract Plugins &gt; Global and enable the &quot;
<span class='lineno'> 426</span>                            &quot;`allow_growth` option.&quot;
<span class='lineno'> 427</span>                            &quot;\nCLI: Go to `faceswap/config/extract.ini` and change the &quot;
<span class='lineno'> 428</span>                            &quot;`allow_growth option to `True`.&quot;)
<span class='lineno'> 429</span>                     raise FaceswapError(msg) from err
<span class='lineno'> 430</span>                 raise err
<span class='lineno'> 431</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.func_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.func_name', title='?'>func_name</a> == &quot;process_output&quot;:
<span class='lineno'> 432</span>                 # Process output items to individual items from batch
<span class='lineno'> 433</span>                 for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.item', title='?'>item</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.self', title='Extractor'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.finalize', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor.finalize', title='(Extractor, ?) -> None'>finalize</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', title='?'>batch</a>):
<span class='lineno'> 434</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.out_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.out_queue', title='?'>out_queue</a>.put(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.item', title='?'>item</a>)
<span class='lineno'> 435</span>             else:
<span class='lineno'> 436</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.out_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.out_queue', title='?'>out_queue</a>.put(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.batch', title='?'>batch</a>)
<span class='lineno'> 437</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.debug(&quot;Putting EOF&quot;)
<span class='lineno'> 438</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.out_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._thread_process.out_queue', title='?'>out_queue</a>.put(&quot;EOF&quot;)
<span class='lineno'> 439</span> 
<span class='lineno'> 440</span>     # &lt;&lt;&lt; QUEUE METHODS &gt;&gt;&gt; #
<span class='lineno'> 441</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item', title='(Detector, ?) -> ExtractMedia / (Extractor, ?) -> ExtractMedia / (Aligner, ?) -> ExtractMedia / (Masker, ?) -> ExtractMedia'>_get_item</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.self', title='{Aligner | Detector | Extractor | Masker}'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.queue', title='?'>que</a>ue):
<span class='lineno'> 442</span>         &quot;&quot;&quot; Yield one item from a queue &quot;&quot;&quot;
<span class='lineno'> 443</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', title='?'>item</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.queue', title='?'>queue</a>.get()
<span class='lineno'> 444</span>         if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', title='ExtractMedia'>item</a></a>, <a href='pipeline.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia', title='<ExtractMedia>'>ExtractMedia</a>):
<span class='lineno'> 445</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.trace(&quot;filename: &#39;%s&#39;, image shape: %s, detected_faces: %s, queue: %s, &quot;
<span class='lineno'> 446</span>                          &quot;item: %s&quot;,
<span class='lineno'> 447</span>                          <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', title='ExtractMedia'>item</a>.<a href='pipeline.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia.filename', title='ExtractMedia -> None'>filename</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', title='ExtractMedia'>item</a>.<a href='pipeline.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia.image_shape', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia.image_shape', title='ExtractMedia -> None'>image_shape</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', title='ExtractMedia'>item</a>.<a href='pipeline.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia.detected_faces', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia.detected_faces', title='ExtractMedia -> None'>detected_faces</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.queue', title='?'>queue</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', title='ExtractMedia'>item</a>)
<span class='lineno'> 448</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.self', title='{Aligner | Detector | Extractor | Masker}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._extract_media', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._extract_media', title='dict'>_extract_media</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', title='ExtractMedia'>item</a>.<a href='pipeline.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract.pipeline.ExtractMedia.filename', title='ExtractMedia -> None'>filename</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', title='ExtractMedia'>item</a>
<span class='lineno'> 449</span>         else:
<span class='lineno'> 450</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.logger', title='?'>logger</a>.trace(&quot;item: %s, queue: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', title='?'>item</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.queue', title='?'>queue</a>)
<span class='lineno'> 451</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._get_item.item', title='ExtractMedia'>item</a>
<span class='lineno'> 452</span> 
<span class='lineno'> 453</span>     @staticmethod
<span class='lineno'> 454</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts', title='? -> [dict]'>_dict_lists_to_list_dicts</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.dictionary', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.dictionary', title='?'>dic</a>tionary):
<span class='lineno'> 455</span>         &quot;&quot;&quot; Convert a dictionary of lists to a list of dictionaries &quot;&quot;&quot;
<span class='lineno'> 456</span>         return [dict(zip(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.dictionary', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.dictionary', title='?'>dictionary</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.val', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.val', title='?'>val</a>)) for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.val', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.val', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.val', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.val', title='?'>val</a></a> in zip(*<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.dictionary', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.plugins.extract._base.Extractor._dict_lists_to_list_dicts.dictionary', title='?'>dictionary</a>.values())]
</pre></td></tr></table></body></html>