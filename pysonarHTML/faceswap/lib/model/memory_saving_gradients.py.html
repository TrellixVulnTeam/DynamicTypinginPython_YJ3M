<html>
<head>
<meta charset="utf-8">
<title>/home/xxm/Desktop/EMSE/dataset/faceswap/lib/model/memory_saving_gradients.py</title>
<style type='text/css'>
body { color: #666666; }
a {
    text-decoration: none; color: #5AA2A7;
    border: solid 1px rgba(255,255,255,0);
}
a.active {
    background: -webkit-linear-gradient(top,rgba(255, 255, 200, 0.35) 0,rgba(255, 255, 200, 0.55) 100%);
    border: solid 1px #E5E600;
}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #cccccc;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px solid orange; padding-bottom: 1px}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted;

function highlight(xid)
{
    var elms = document.querySelectorAll('[xid="' + xid + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "active";
    }
    highlighted = xid;
}

function clearHighlight() {
    var elms = document.querySelectorAll('[xid="' + highlighted + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "";
    }
}

window.onload =
    function (e) {
        var tags = document.getElementsByTagName("A")
        for (var i = 0; i < tags.length; i++) {
            tags[i].onmouseover =
                function (e) {
                    clearHighlight();
                    var xid = e.toElement.getAttribute('xid');
                    highlight(xid);
                }
        }
    }</script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.logger', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.logger'>logger</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.util', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.util'>util</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_gradients', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_gradients'>tf_gradients</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.MIN_CHECKPOINT_NODE_SIZE', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.MIN_CHECKPOINT_NODE_SIZE'>MIN_CHECKPOINT_NODE_SIZE</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed'>gradients_speed</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory'>gradients_memory</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection'>gradients_collection</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients'>gradients</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort'>tf_toposort</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops'>fast_backward_ops</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops'>capture_ops</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op'>_to_op</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops'>_to_ops</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable'>_is_iterable</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print'>debug_print</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops'>format_ops</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs'>my_add_control_inputs</a></li></ul>
</td><td><pre><span class='lineno'>   1</span> #!/usr/bin/env python3
<span class='lineno'>   2</span> &quot;&quot;&quot; Memory saving gradients.
<span class='lineno'>   3</span> Adapted from: https://github.com/openai/gradient-checkpointing
<span class='lineno'>   4</span> 
<span class='lineno'>   5</span> The MIT License
<span class='lineno'>   6</span> 
<span class='lineno'>   7</span> Copyright (c) 2018 OpenAI (http://openai.com)
<span class='lineno'>   8</span> 
<span class='lineno'>   9</span> Permission is hereby granted, free of charge, to any person obtaining a copy
<span class='lineno'>  10</span> of this software and associated documentation files (the &quot;Software&quot;), to deal
<span class='lineno'>  11</span> in the Software without restriction, including without limitation the rights
<span class='lineno'>  12</span> to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
<span class='lineno'>  13</span> copies of the Software, and to permit persons to whom the Software is
<span class='lineno'>  14</span> furnished to do so, subject to the following conditions:
<span class='lineno'>  15</span> 
<span class='lineno'>  16</span> The above copyright notice and this permission notice shall be included in
<span class='lineno'>  17</span> all copies or substantial portions of the Software.
<span class='lineno'>  18</span> 
<span class='lineno'>  19</span> THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
<span class='lineno'>  20</span> IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
<span class='lineno'>  21</span> FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
<span class='lineno'>  22</span> AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
<span class='lineno'>  23</span> LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
<span class='lineno'>  24</span> OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
<span class='lineno'>  25</span> THE SOFTWARE.
<span class='lineno'>  26</span> &quot;&quot;&quot;
<span class='lineno'>  27</span> 
<span class='lineno'>  28</span> import contextlib
<span class='lineno'>  29</span> import logging
<span class='lineno'>  30</span> import time
<span class='lineno'>  31</span> import sys
<span class='lineno'>  32</span> 
<span class='lineno'>  33</span> import numpy as np
<span class='lineno'>  34</span> import tensorflow as tf
<span class='lineno'>  35</span> import tensorflow.contrib.graph_editor as ge  # pylint: disable=no-name-in-module
<span class='lineno'>  36</span> from toposort import toposort
<span class='lineno'>  37</span> 
<span class='lineno'>  38</span> 
<span class='lineno'>  39</span> <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.logger', title='?'>logger</a> = logging.getLogger(__name__)  # pylint: disable=invalid-name
<span class='lineno'>  40</span> sys.setrecursionlimit(10000)
<span class='lineno'>  41</span> # refers back to current module if we decide to split helpers out
<span class='lineno'>  42</span> <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.util', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.util', title='?'>util</a> = sys.modules[__name__]
<span class='lineno'>  43</span> 
<span class='lineno'>  44</span> # getting rid of &quot;WARNING:tensorflow:VARIABLES collection name is deprecated&quot;
<span class='lineno'>  45</span> setattr(tf.GraphKeys, &quot;VARIABLES&quot;, &quot;variables&quot;)
<span class='lineno'>  46</span> 
<span class='lineno'>  47</span> # save original gradients since tf.gradient could be monkey-patched to point
<span class='lineno'>  48</span> # to our version
<span class='lineno'>  49</span> from tensorflow.python.ops import gradients as tf_grads_lib  # pylint: disable=no-name-in-module
<span class='lineno'>  50</span> <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_gradients', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_gradients', title='?'>tf_gradients</a> = tf_grads_lib.gradients
<span class='lineno'>  51</span> 
<span class='lineno'>  52</span> <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.MIN_CHECKPOINT_NODE_SIZE', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.MIN_CHECKPOINT_NODE_SIZE', title='int'>MIN_CHECKPOINT_NODE_SIZE</a> = 1024    # use lower value during testing
<span class='lineno'>  53</span> 
<span class='lineno'>  54</span> 
<span class='lineno'>  55</span> # specific versions we can use to do process-wide replacement of tf.gradients
<span class='lineno'>  56</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed', title='(?, ?, None) -> None'>gradients_speed</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.ys', title='?'>ys</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.xs', title='?'>xs</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.grad_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.grad_ys', title='None'>grad_ys</a>=None, **kwargs):
<span class='lineno'>  57</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients', title='(?, ?, None, str) -> None'>gradients</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.ys', title='?'>ys</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.xs', title='?'>xs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.grad_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_speed.grad_ys', title='None'>grad_ys</a>, checkpoints=&#39;speed&#39;, **kwargs)
<span class='lineno'>  58</span> 
<span class='lineno'>  59</span> 
<span class='lineno'>  60</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory', title='(?, ?, None) -> None'>gradients_memory</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.ys', title='?'>ys</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.xs', title='?'>xs</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.grad_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.grad_ys', title='None'>grad_ys</a>=None, **kwargs):
<span class='lineno'>  61</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients', title='(?, ?, None, str) -> None'>gradients</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.ys', title='?'>ys</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.xs', title='?'>xs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.grad_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_memory.grad_ys', title='None'>grad_ys</a>, checkpoints=&#39;memory&#39;, **kwargs)
<span class='lineno'>  62</span> 
<span class='lineno'>  63</span> 
<span class='lineno'>  64</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection', title='(?, ?, None) -> None'>gradients_collection</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.ys', title='?'>ys</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.xs', title='?'>xs</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.grad_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.grad_ys', title='None'>grad_ys</a>=None, **kwargs):
<span class='lineno'>  65</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients', title='(?, ?, None, str) -> None'>gradients</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.ys', title='?'>ys</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.xs', title='?'>xs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.grad_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients_collection.grad_ys', title='None'>grad_ys</a>, checkpoints=&#39;collection&#39;, **kwargs)
<span class='lineno'>  66</span> 
<span class='lineno'>  67</span> 
<span class='lineno'>  68</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients', title='(?, ?, None, str) -> None'>gradients</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='?'>ys</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='?'>xs</a>,   # pylint: disable: too-many-statements, too-many-branches
<span class='lineno'>  69</span>               <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_ys', title='None'>grad_ys</a>=None, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='str'>checkpoints</a>=&#39;collection&#39;, **kwargs):
<span class='lineno'>  70</span>     &#39;&#39;&#39;
<span class='lineno'>  71</span>     Authors: Tim Salimans &amp; Yaroslav Bulatov
<span class='lineno'>  72</span> 
<span class='lineno'>  73</span>     memory efficient gradient implementation inspired by &quot;Training Deep Nets with Sublinear Memory
<span class='lineno'>  74</span>     Cost&quot; by Chen et al. 2016 (https://arxiv.org/abs/1604.06174)
<span class='lineno'>  75</span> 
<span class='lineno'>  76</span>     ys,xs,grad_ys,kwargs are the arguments to standard tensorflow tf.gradients
<span class='lineno'>  77</span>     (https://www.tensorflow.org/versions/r0.12/api_docs/python/train.html#gradients)
<span class='lineno'>  78</span> 
<span class='lineno'>  79</span>     &#39;checkpoints&#39; can either be
<span class='lineno'>  80</span>         - a list consisting of tensors from the forward pass of the neural net
<span class='lineno'>  81</span>           that we should re-use when calculating the gradients in the backward pass
<span class='lineno'>  82</span>           all other tensors that do not appear in this list will be re-computed
<span class='lineno'>  83</span>         - a string specifying how this list should be determined. currently we support
<span class='lineno'>  84</span>             - &#39;speed&#39;:  checkpoint all outputs of convolutions and matmuls. these ops are usually
<span class='lineno'>  85</span>                         the most expensive, so checkpointing them maximizes the running speed
<span class='lineno'>  86</span>                         (this is a good option if nonlinearities, concats, batchnorms, etc are
<span class='lineno'>  87</span>                         taking up a lot of memory)
<span class='lineno'>  88</span>             - &#39;memory&#39;: try to minimize the memory usage
<span class='lineno'>  89</span>                         (currently using a very simple strategy that identifies a number of
<span class='lineno'>  90</span>                         bottleneck tensors in the graph to checkpoint)
<span class='lineno'>  91</span>             - &#39;collection&#39;: look for a tensorflow collection named &#39;checkpoints&#39;, which holds the
<span class='lineno'>  92</span>                             tensors to checkpoint
<span class='lineno'>  93</span>     &#39;&#39;&#39;
<span class='lineno'>  94</span> 
<span class='lineno'>  95</span>     #    print(&quot;Calling memsaving gradients with&quot;, checkpoints)
<span class='lineno'>  96</span>     if not isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='?'>ys</a>, list):
<span class='lineno'>  97</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='?'>ys</a>]
<span class='lineno'>  98</span>     if not isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='?'>xs</a>, list):
<span class='lineno'>  99</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='?'>xs</a>]
<span class='lineno'> 100</span> 
<span class='lineno'> 101</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_ops', title='?'>bwd_ops</a> = ge.get_backward_walk_ops([<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'>y</a>.op for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'>y</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a>],
<span class='lineno'> 102</span>                                        inclusive=True)
<span class='lineno'> 103</span> 
<span class='lineno'> 104</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;bwd_ops: {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_ops', title='?'>bwd_ops</a>))
<span class='lineno'> 105</span> 
<span class='lineno'> 106</span>     # forward ops are all ops that are candidates for recomputation
<span class='lineno'> 107</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='?'>fwd_ops</a> = ge.get_forward_walk_ops([<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', title='?'>x</a>.op for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', title='?'>x</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a>],
<span class='lineno'> 108</span>                                       inclusive=True,
<span class='lineno'> 109</span>                                       within_ops=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_ops', title='?'>bwd_ops</a>)
<span class='lineno'> 110</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;fwd_ops: {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='?'>fwd_ops</a>))
<span class='lineno'> 111</span> 
<span class='lineno'> 112</span>     # exclude ops with no inputs
<span class='lineno'> 113</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='?'>fwd_ops</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a>.inputs]
<span class='lineno'> 114</span> 
<span class='lineno'> 115</span>     # don&#39;t recompute xs, remove variables
<span class='lineno'> 116</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs_ops', title='{[?] | [None]}'>xs_ops</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops', title='[?] -> {[?] | [None]} / ? -> [None]'>_to_ops</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a>)
<span class='lineno'> 117</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a> not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs_ops', title='{[?] | [None]}'>xs_ops</a>]
<span class='lineno'> 118</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a> if &#39;/assign&#39; not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a>.name]
<span class='lineno'> 119</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a> if &#39;/Assign&#39; not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a>.name]
<span class='lineno'> 120</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a> if &#39;/read&#39; not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a>.name]
<span class='lineno'> 121</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='?'>ts_all</a> = ge.filter_ts(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a>, True)  # get the tensors
<span class='lineno'> 122</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='?'>ts_all</a> if &#39;/read&#39; not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>.name]
<span class='lineno'> 123</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='?'>ts_all</a> = set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a>) - set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a>) - set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a>)
<span class='lineno'> 124</span> 
<span class='lineno'> 125</span>     # construct list of tensors to checkpoint during forward pass, if not
<span class='lineno'> 126</span>     # given as input
<span class='lineno'> 127</span>     if type(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='str'>checkpoints</a>) is not list:
<span class='lineno'> 128</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='str'>checkpoints</a> == &#39;collection&#39;:
<span class='lineno'> 129</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='?'>checkpoints</a> = tf.get_collection(&#39;checkpoints&#39;)
<span class='lineno'> 130</span> 
<span class='lineno'> 131</span>         elif <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='str'>checkpoints</a> == &#39;speed&#39;:
<span class='lineno'> 132</span>             # checkpoint all expensive ops to maximize running speed
<span class='lineno'> 133</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='?'>checkpoints</a> = ge.filter_ts_from_regex(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a>, &#39;conv2d|Conv|MatMul&#39;)
<span class='lineno'> 134</span> 
<span class='lineno'> 135</span>         elif <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='str'>checkpoints</a> == &#39;memory&#39;:
<span class='lineno'> 136</span> 
<span class='lineno'> 137</span>             # remove very small tensors and some weird ops
<span class='lineno'> 138</span>             def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims', title='? -> [int]'>fixdims</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.t', title='?'>t</a>):  # tf.Dimension values are not compatible with int, convert manually
<span class='lineno'> 139</span>                 try:
<span class='lineno'> 140</span>                     return [int(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.e', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.e', title='?'>e</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.e', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.e', title='?'>e</a>.value is not None else 64) for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.e', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.e', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.e', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.e', title='?'>e</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims.t', title='?'>t</a>]
<span class='lineno'> 141</span>                 except:
<span class='lineno'> 142</span>                     return [0]  # unknown shape
<span class='lineno'> 143</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='?'>ts_all</a> if np.prod(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fixdims', title='? -> [int]'>fixdims</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>.shape)) &gt; <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.MIN_CHECKPOINT_NODE_SIZE', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.MIN_CHECKPOINT_NODE_SIZE', title='int'>MIN_CHECKPOINT_NODE_SIZE</a>]
<span class='lineno'> 144</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> if &#39;L2Loss&#39; not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>.name]
<span class='lineno'> 145</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> if &#39;entropy&#39; not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>.name]
<span class='lineno'> 146</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> if &#39;FusedBatchNorm&#39; not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>.name]
<span class='lineno'> 147</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> if &#39;Switch&#39; not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>.name]
<span class='lineno'> 148</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> if &#39;dropout&#39; not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>.name]
<span class='lineno'> 149</span>             # DV: FP16_FIX - need to add &#39;Cast&#39; layer here to make it work for FP16
<span class='lineno'> 150</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a> if &#39;Cast&#39; not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>.name]
<span class='lineno'> 151</span> 
<span class='lineno'> 152</span>             # filter out all tensors that are inputs of the backward graph
<span class='lineno'> 153</span>             with <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.util', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.util', title='?'>util</a>.capture_ops() as <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_ops', title='?'>bwd_ops</a>:
<span class='lineno'> 154</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_gradients', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_gradients', title='?'>tf_gradients</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_ys', title='None'>grad_ys</a>, **kwargs)
<span class='lineno'> 155</span> 
<span class='lineno'> 156</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_inputs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_inputs', title='[?]'>bwd_inputs</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_ops', title='?'>bwd_ops</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a>.inputs]
<span class='lineno'> 157</span>             # list of tensors in forward graph that is in input to bwd graph
<span class='lineno'> 158</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_filtered', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_filtered', title='list'>ts_filtered</a> = list(set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_inputs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bwd_inputs', title='[?]'>bwd_inputs</a>).intersection(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a>))
<span class='lineno'> 159</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Using tensors {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_filtered', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_filtered', title='list'>ts_filtered</a>))
<span class='lineno'> 160</span> 
<span class='lineno'> 161</span>             # try two slightly different ways of getting bottlenecks tensors
<span class='lineno'> 162</span>             # to checkpoint
<span class='lineno'> 163</span>             for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='{[?] | list}'>ts</a> in [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_filtered', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_filtered', title='list'>ts_filtered</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a>]:
<span class='lineno'> 164</span> 
<span class='lineno'> 165</span>                 # get all bottlenecks in the graph
<span class='lineno'> 166</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', title='[?]'>bottleneck_ts</a> = []
<span class='lineno'> 167</span>                 for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='{[?] | list}'>ts</a>:
<span class='lineno'> 168</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b', title='?'>b</a> = set(ge.get_backward_walk_ops(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>.op, inclusive=True, within_ops=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a>))
<span class='lineno'> 169</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f', title='?'>f</a> = set(ge.get_forward_walk_ops(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>.op, inclusive=False, within_ops=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a>))
<span class='lineno'> 170</span>                     # check that there are not shortcuts
<span class='lineno'> 171</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b_inp', title='?'>b_inp</a> = set([<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', title='?'>inp</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b', title='?'>b</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', title='?'>inp</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a>.inputs]).intersection(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a>)
<span class='lineno'> 172</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f_inp', title='?'>f_inp</a> = set([<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', title='?'>inp</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f', title='?'>f</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inp', title='?'>inp</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a>.inputs]).intersection(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a>)
<span class='lineno'> 173</span>                     if not set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b_inp', title='?'>b_inp</a>).intersection(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f_inp', title='?'>f_inp</a>) and len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b_inp', title='?'>b_inp</a>)+len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f_inp', title='?'>f_inp</a>) &gt;= len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a>):
<span class='lineno'> 174</span>                         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', title='[?]'>bottleneck_ts</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>)  # we have a bottleneck!
<span class='lineno'> 175</span>                     else:
<span class='lineno'> 176</span>                         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Rejected bottleneck candidate and ops {}&quot;.format(
<span class='lineno'> 177</span>                             [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='?'>t</a>] + list(set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a>) - set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.b_inp', title='?'>b_inp</a>) - set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.f_inp', title='?'>f_inp</a>))))
<span class='lineno'> 178</span> 
<span class='lineno'> 179</span>                 # success? or try again without filtering?
<span class='lineno'> 180</span>                 if len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', title='[?]'>bottleneck_ts</a>) &gt;= np.sqrt(len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_filtered', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_filtered', title='list'>ts_filtered</a>)):  # enough bottlenecks found!
<span class='lineno'> 181</span>                     break
<span class='lineno'> 182</span> 
<span class='lineno'> 183</span>             if not <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', title='[?]'>bottleneck_ts</a>:
<span class='lineno'> 184</span>                 raise Exception(&#39;unable to find bottleneck tensors! please provide checkpoint &#39;
<span class='lineno'> 185</span>                                 &#39;nodes manually, or use checkpoints=&quot;speed&quot;.&#39;)
<span class='lineno'> 186</span> 
<span class='lineno'> 187</span>             # sort the bottlenecks
<span class='lineno'> 188</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottlenecks_sorted_lists', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottlenecks_sorted_lists', title='[list]'>bottlenecks_sorted_lists</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort', title='(list, None) -> [list] / (?, None) -> [list] / ([?], None) -> [list]'>tf_toposort</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', title='[?]'>bottleneck_ts</a>, within_ops=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a>)
<span class='lineno'> 189</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.sorted_bottlenecks', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.sorted_bottlenecks', title='[<list>]'>sorted_bottlenecks</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='<list>'>t</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='list'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='list'>ts</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottlenecks_sorted_lists', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottlenecks_sorted_lists', title='[list]'>bottlenecks_sorted_lists</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='<list>'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.t', title='<list>'>t</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='list'>ts</a>]
<span class='lineno'> 190</span> 
<span class='lineno'> 191</span>             # save an approximately optimal number ~ sqrt(N)
<span class='lineno'> 192</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.N', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.N', title='int'>N</a> = len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_filtered', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_filtered', title='list'>ts_filtered</a>)
<span class='lineno'> 193</span>             if len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', title='[?]'>bottleneck_ts</a>) &lt;= np.ceil(np.sqrt(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.N', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.N', title='int'>N</a>)):
<span class='lineno'> 194</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='[<list>]'>checkpoints</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.sorted_bottlenecks', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.sorted_bottlenecks', title='[<list>]'>sorted_bottlenecks</a>
<span class='lineno'> 195</span>             else:
<span class='lineno'> 196</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.step', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.step', title='int'>step</a> = int(np.ceil(len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.bottleneck_ts', title='[?]'>bottleneck_ts</a>) / np.sqrt(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.N', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.N', title='int'>N</a>)))
<span class='lineno'> 197</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='[<list>]'>checkpoints</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.sorted_bottlenecks', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.sorted_bottlenecks', title='[<list>]'>sorted_bottlenecks</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.step', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.step', title='int'>step</a>::<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.step', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.step', title='int'>step</a>]
<span class='lineno'> 198</span> 
<span class='lineno'> 199</span>         else:
<span class='lineno'> 200</span>             raise Exception(&#39;%s is unsupported input for &quot;checkpoints&quot;&#39; % (checkpoints,))
<span class='lineno'> 201</span> 
<span class='lineno'> 202</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a> = list(set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='{[<list>] | str}'>checkpoints</a>).intersection(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts_all', title='[?]'>ts_all</a>))
<span class='lineno'> 203</span> 
<span class='lineno'> 204</span>     # at this point automatic selection happened and checkpoints is list of nodes
<span class='lineno'> 205</span>     assert isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a>, list)
<span class='lineno'> 206</span> 
<span class='lineno'> 207</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Checkpoint nodes used: {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a>))
<span class='lineno'> 208</span>     # better error handling of special cases
<span class='lineno'> 209</span>     # xs are already handled as checkpoint nodes, so no need to include them
<span class='lineno'> 210</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs_intersect_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs_intersect_checkpoints', title='?'>xs_intersect_checkpoints</a> = set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a>).intersection(set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a>))
<span class='lineno'> 211</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs_intersect_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs_intersect_checkpoints', title='?'>xs_intersect_checkpoints</a>:
<span class='lineno'> 212</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Warning, some input nodes are also checkpoint nodes: {}&quot;.format(
<span class='lineno'> 213</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs_intersect_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs_intersect_checkpoints', title='?'>xs_intersect_checkpoints</a>))
<span class='lineno'> 214</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys_intersect_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys_intersect_checkpoints', title='?'>ys_intersect_checkpoints</a> = set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a>).intersection(set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a>))
<span class='lineno'> 215</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;ys: {}, checkpoints:{}, intersect: {}&quot;.format(
<span class='lineno'> 216</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys_intersect_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys_intersect_checkpoints', title='?'>ys_intersect_checkpoints</a>))
<span class='lineno'> 217</span>     # saving an output node (ys) gives no benefit in memory while creating
<span class='lineno'> 218</span>     # new edge cases, exclude them
<span class='lineno'> 219</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys_intersect_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys_intersect_checkpoints', title='?'>ys_intersect_checkpoints</a>:
<span class='lineno'> 220</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Warning, some output nodes are also checkpoints nodes: {}&quot;.format(
<span class='lineno'> 221</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops', title='(?, bool) -> {[str] | str}'>format_ops</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys_intersect_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys_intersect_checkpoints', title='?'>ys_intersect_checkpoints</a>)))
<span class='lineno'> 222</span> 
<span class='lineno'> 223</span>     # remove initial and terminal nodes from checkpoints list if present
<span class='lineno'> 224</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a> = list(set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a>) - set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a>) - set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a>))
<span class='lineno'> 225</span> 
<span class='lineno'> 226</span>     # check that we have some nodes to checkpoint
<span class='lineno'> 227</span>     if not <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a>:
<span class='lineno'> 228</span>         raise Exception(&#39;no checkpoints nodes found or given as input! &#39;)
<span class='lineno'> 229</span> 
<span class='lineno'> 230</span>     # disconnect dependencies between checkpointed tensors
<span class='lineno'> 231</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', title='dict'>checkpoints_disconnected</a> = {}
<span class='lineno'> 232</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', title='<list>'>x</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a>:
<span class='lineno'> 233</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', title='<list>'>x</a>.op and <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', title='<list>'>x</a>.op.name is not None:
<span class='lineno'> 234</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_node', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_node', title='?'>grad_node</a> = tf.stop_gradient(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', title='<list>'>x</a>, name=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', title='<list>'>x</a>.op.name+&quot;_sg&quot;)
<span class='lineno'> 235</span>         else:
<span class='lineno'> 236</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_node', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_node', title='?'>grad_node</a> = tf.stop_gradient(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', title='<list>'>x</a>)
<span class='lineno'> 237</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', title='dict'>checkpoints_disconnected</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.x', title='<list>'>x</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_node', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_node', title='?'>grad_node</a>
<span class='lineno'> 238</span> 
<span class='lineno'> 239</span>     # partial derivatives to the checkpointed tensors and xs
<span class='lineno'> 240</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', title='list'>ops_to_copy</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops', title='(?, ?, ?) -> list / ([?], [?], list) -> list / ([?], [?], [<list>]) -> list'>fast_backward_ops</a>(seed_ops=[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'>y</a>.op for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'>y</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a>],
<span class='lineno'> 241</span>                                     stop_at_ts=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a>, within_ops=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a>)
<span class='lineno'> 242</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Found {} ops to copy within fwd_ops {}, seed {}, stop_at {}&quot;.format(
<span class='lineno'> 243</span>         len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', title='list'>ops_to_copy</a>), <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='?'>r</a>.op for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='?'>r</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a>], <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a>))
<span class='lineno'> 244</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;ops_to_copy = {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', title='list'>ops_to_copy</a>))
<span class='lineno'> 245</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Processing list {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a>))
<span class='lineno'> 246</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._', title='?'>_</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', title='?'>info</a> = ge.copy_with_input_replacements(ge.sgv(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', title='list'>ops_to_copy</a>), {})
<span class='lineno'> 247</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.origin_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.origin_op', title='?'>origin_op</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', title='?'>info</a>._transformed_ops.items():
<span class='lineno'> 248</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a>._set_device(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.origin_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.origin_op', title='?'>origin_op</a>.node_def.device)
<span class='lineno'> 249</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', title='?'>copied_ops</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', title='?'>info</a>._transformed_ops.values()
<span class='lineno'> 250</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Copied {} to {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', title='list'>ops_to_copy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', title='?'>copied_ops</a>))
<span class='lineno'> 251</span>     ge.reroute_ts(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', title='dict'>checkpoints_disconnected</a>.values(),
<span class='lineno'> 252</span>                   <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', title='dict'>checkpoints_disconnected</a>.keys(),
<span class='lineno'> 253</span>                   can_modify=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', title='?'>copied_ops</a>)
<span class='lineno'> 254</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Rewired {} in place of {} restricted to {}&quot;.format(
<span class='lineno'> 255</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', title='dict'>checkpoints_disconnected</a>.values(), <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', title='dict'>checkpoints_disconnected</a>.keys(), <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', title='?'>copied_ops</a>))
<span class='lineno'> 256</span> 
<span class='lineno'> 257</span>     # get gradients with respect to current boundary + original x&#39;s
<span class='lineno'> 258</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ys', title='[?]'>copied_ys</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', title='?'>info</a>._transformed_ops[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'>y</a>.op]._outputs[0] for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'>y</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a>]
<span class='lineno'> 259</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', title='list'>boundary</a> = list(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', title='dict'>checkpoints_disconnected</a>.values())
<span class='lineno'> 260</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', title='?'>dv</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_gradients', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_gradients', title='?'>tf_gradients</a>(ys=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ys', title='[?]'>copied_ys</a>, xs=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', title='list'>boundary</a>+<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a>, grad_ys=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_ys', title='None'>grad_ys</a>, **kwargs)
<span class='lineno'> 261</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Got gradients {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', title='?'>dv</a>))
<span class='lineno'> 262</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;for %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ys', title='[?]'>copied_ys</a>)
<span class='lineno'> 263</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;with respect to {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', title='list'>boundary</a>+<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a>))
<span class='lineno'> 264</span> 
<span class='lineno'> 265</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', title='[?]'>inputs_to_do_before</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'>y</a>.op for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.y', title='?'>y</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ys', title='[?]'>ys</a>]
<span class='lineno'> 266</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_ys', title='None'>grad_ys</a> is not None:
<span class='lineno'> 267</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', title='[?]'>inputs_to_do_before</a></a> += <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_ys', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.grad_ys', title='None'>grad_ys</a>
<span class='lineno'> 268</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.wait_to_do_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.wait_to_do_ops', title='?'>wait_to_do_ops</a> = list(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', title='?'>copied_ops</a>) + [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', title='?'>g</a>.op for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', title='?'>g</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', title='?'>dv</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', title='?'>g</a> is not None]
<span class='lineno'> 269</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs', title='(?, [?]) -> None / (?, ?) -> None'>my_add_control_inputs</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.wait_to_do_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.wait_to_do_ops', title='?'>wait_to_do_ops</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', title='[?]'>inputs_to_do_before</a>)
<span class='lineno'> 270</span> 
<span class='lineno'> 271</span>     # partial derivatives to the checkpointed nodes
<span class='lineno'> 272</span>     # dictionary of &quot;node: backprop&quot; for nodes in the boundary
<span class='lineno'> 273</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', title='dict'>d_checkpoints</a> = {<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='?'>r</a>: dr for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='?'>r</a>, dr in zip(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', title='dict'>checkpoints_disconnected</a>.keys(),
<span class='lineno'> 274</span>                                             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', title='?'>dv</a>[:len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', title='dict'>checkpoints_disconnected</a>)])}
<span class='lineno'> 275</span>     # partial derivatives to xs (usually the params of the neural net)
<span class='lineno'> 276</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs', title='?'>d_xs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', title='?'>dv</a>[len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', title='dict'>checkpoints_disconnected</a>):]
<span class='lineno'> 277</span> 
<span class='lineno'> 278</span>     # incorporate derivatives flowing through the checkpointed nodes
<span class='lineno'> 279</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_sorted_lists', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_sorted_lists', title='[list]'>checkpoints_sorted_lists</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort', title='(list, None) -> [list] / (?, None) -> [list] / ([?], None) -> [list]'>tf_toposort</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a>, within_ops=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a>)
<span class='lineno'> 280</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='list'>ts</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_sorted_lists', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_sorted_lists', title='[list]'>checkpoints_sorted_lists</a>[::-1]:
<span class='lineno'> 281</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Processing list {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='list'>ts</a>))
<span class='lineno'> 282</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', title='[<list>]'>checkpoints_other</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a> for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints', title='list'>checkpoints</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a> not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='list'>ts</a>]
<span class='lineno'> 283</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected_other', title='[?]'>checkpoints_disconnected_other</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected', title='dict'>checkpoints_disconnected</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a>] for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', title='[<list>]'>checkpoints_other</a>]
<span class='lineno'> 284</span> 
<span class='lineno'> 285</span>         # copy part of the graph below current checkpoint node, stopping at
<span class='lineno'> 286</span>         # other checkpoints nodes
<span class='lineno'> 287</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', title='list'>ops_to_copy</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops', title='(?, ?, ?) -> list / ([?], [?], list) -> list / ([?], [?], [<list>]) -> list'>fast_backward_ops</a>(within_ops=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a>,
<span class='lineno'> 288</span>                                         seed_ops=[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a>.op for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='list'>ts</a>],
<span class='lineno'> 289</span>                                         stop_at_ts=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', title='[<list>]'>checkpoints_other</a>)
<span class='lineno'> 290</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Found {} ops to copy within {}, seed {}, stop_at {}&quot;.format(
<span class='lineno'> 291</span>             len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', title='list'>ops_to_copy</a>), <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.fwd_ops', title='[?]'>fwd_ops</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a>.op for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='list'>ts</a>], <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', title='[<list>]'>checkpoints_other</a>))
<span class='lineno'> 292</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;ops_to_copy = {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', title='list'>ops_to_copy</a>))
<span class='lineno'> 293</span>         if not <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', title='list'>ops_to_copy</a>:  # we&#39;re done!
<span class='lineno'> 294</span>             break
<span class='lineno'> 295</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._', title='?'>_</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', title='?'>info</a> = ge.copy_with_input_replacements(ge.sgv(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', title='list'>ops_to_copy</a>), {})
<span class='lineno'> 296</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.origin_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.origin_op', title='?'>origin_op</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', title='?'>info</a>._transformed_ops.items():
<span class='lineno'> 297</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.op', title='?'>op</a>._set_device(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.origin_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.origin_op', title='?'>origin_op</a>.node_def.device)
<span class='lineno'> 298</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', title='?'>copied_ops</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', title='?'>info</a>._transformed_ops.values()
<span class='lineno'> 299</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Copied {} to {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ops_to_copy', title='list'>ops_to_copy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', title='?'>copied_ops</a>))
<span class='lineno'> 300</span>         ge.reroute_ts(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected_other', title='[?]'>checkpoints_disconnected_other</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', title='[<list>]'>checkpoints_other</a>, can_modify=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', title='?'>copied_ops</a>)
<span class='lineno'> 301</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Rewired %s in place of %s restricted to %s&quot;,
<span class='lineno'> 302</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected_other', title='[?]'>checkpoints_disconnected_other</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', title='[<list>]'>checkpoints_other</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', title='?'>copied_ops</a>)
<span class='lineno'> 303</span> 
<span class='lineno'> 304</span>         # gradient flowing through the checkpointed node
<span class='lineno'> 305</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', title='[?]'>boundary</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.info', title='?'>info</a>._transformed_ops[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a>.op]._outputs[0] for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='list'>ts</a>]
<span class='lineno'> 306</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.substitute_backprops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.substitute_backprops', title='[?]'>substitute_backprops</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', title='dict'>d_checkpoints</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a>] for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='list'>ts</a>]
<span class='lineno'> 307</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', title='?'>dv</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_gradients', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_gradients', title='?'>tf_gradients</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', title='[?]'>boundary</a>,
<span class='lineno'> 308</span>                           <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected_other', title='[?]'>checkpoints_disconnected_other</a>+<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a>,
<span class='lineno'> 309</span>                           grad_ys=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.substitute_backprops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.substitute_backprops', title='[?]'>substitute_backprops</a>, **kwargs)
<span class='lineno'> 310</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;Got gradients {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', title='?'>dv</a>))
<span class='lineno'> 311</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;for {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.boundary', title='[?]'>boundary</a>))
<span class='lineno'> 312</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;with respect to {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_disconnected_other', title='[?]'>checkpoints_disconnected_other</a>+<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a>))
<span class='lineno'> 313</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(&quot;with boundary backprop substitutions {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.substitute_backprops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.substitute_backprops', title='[?]'>substitute_backprops</a>))
<span class='lineno'> 314</span> 
<span class='lineno'> 315</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', title='[?]'>inputs_to_do_before</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', title='dict'>d_checkpoints</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a>].op for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.ts', title='list'>ts</a>]
<span class='lineno'> 316</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.wait_to_do_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.wait_to_do_ops', title='?'>wait_to_do_ops</a> = list(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.copied_ops', title='?'>copied_ops</a>) + [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', title='?'>g</a>.op for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', title='?'>g</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', title='?'>dv</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.g', title='?'>g</a> is not None]
<span class='lineno'> 317</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs', title='(?, [?]) -> None / (?, ?) -> None'>my_add_control_inputs</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.wait_to_do_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.wait_to_do_ops', title='?'>wait_to_do_ops</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.inputs_to_do_before', title='[?]'>inputs_to_do_before</a>)
<span class='lineno'> 318</span> 
<span class='lineno'> 319</span>         # partial derivatives to the checkpointed nodes
<span class='lineno'> 320</span>         for r, dr in zip(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', title='[<list>]'>checkpoints_other</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', title='?'>dv</a>[:len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', title='[<list>]'>checkpoints_other</a>)]):
<span class='lineno'> 321</span>             if dr is not None:
<span class='lineno'> 322</span>                 if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', title='dict'>d_checkpoints</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a>] is None:
<span class='lineno'> 323</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', title='dict'>d_checkpoints</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a>] = dr
<span class='lineno'> 324</span>                 else:
<span class='lineno'> 325</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_checkpoints', title='dict'>d_checkpoints</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.r', title='<list>'>r</a>] += dr
<span class='lineno'> 326</span> 
<span class='lineno'> 327</span>         def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify', title='? -> None'>_unsparsify</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', title='?'>var_x</a>):
<span class='lineno'> 328</span>             if not isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', title='?'>var_x</a>, tf.IndexedSlices):
<span class='lineno'> 329</span>                 return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', title='?'>var_x</a>
<span class='lineno'> 330</span>             assert <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', title='?'>var_x</a>.dense_shape is not None, \
<span class='lineno'> 331</span>                 &quot;memory_saving_gradients encountered sparse gradients of unknown shape&quot;
<span class='lineno'> 332</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.indices', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.indices', title='?'>indices</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', title='?'>var_x</a>.indices
<span class='lineno'> 333</span>             while <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.indices', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.indices', title='?'>indices</a>.shape.ndims &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', title='?'>var_x</a>.values.shape.ndims:
<span class='lineno'> 334</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.indices', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.indices', title='?'>indices</a> = tf.expand_dims(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.indices', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.indices', title='?'>indices</a>, -1)
<span class='lineno'> 335</span>             return tf.scatter_nd(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.indices', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.indices', title='?'>indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', title='?'>var_x</a>.values, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify.var_x', title='?'>var_x</a>.dense_shape)
<span class='lineno'> 336</span> 
<span class='lineno'> 337</span>         # partial derivatives to xs (usually the params of the neural net)
<span class='lineno'> 338</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs_new', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs_new', title='?'>d_xs_new</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.dv', title='?'>dv</a>[len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.checkpoints_other', title='[<list>]'>checkpoints_other</a>):]
<span class='lineno'> 339</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', title='int'>j</a> in range(len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.xs', title='[?]'>xs</a>)):
<span class='lineno'> 340</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs_new', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs_new', title='?'>d_xs_new</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', title='int'>j</a>] is not None:
<span class='lineno'> 341</span>                 if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs', title='?'>d_xs</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', title='int'>j</a>] is None:
<span class='lineno'> 342</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs', title='?'>d_xs</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', title='int'>j</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify', title='? -> None'>_unsparsify</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs_new', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs_new', title='?'>d_xs_new</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', title='int'>j</a>])
<span class='lineno'> 343</span>                 else:
<span class='lineno'> 344</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs', title='?'>d_xs</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', title='int'>j</a>] += <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients._unsparsify', title='? -> None'>_unsparsify</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs_new', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs_new', title='?'>d_xs_new</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.j', title='int'>j</a>])
<span class='lineno'> 345</span> 
<span class='lineno'> 346</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.gradients.d_xs', title='?'>d_xs</a>
<span class='lineno'> 347</span> 
<span class='lineno'> 348</span> 
<span class='lineno'> 349</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort', title='(list, None) -> [list] / (?, None) -> [list] / ([?], None) -> [list]'>tf_toposort</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_inp', title='{[?] | list}'>ts_inp</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.within_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.within_ops', title='None'>within_ops</a>=None):
<span class='lineno'> 350</span>     &quot;&quot;&quot; Tensorflow topological sort &quot;&quot;&quot;
<span class='lineno'> 351</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.all_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.all_ops', title='?'>all_ops</a> = ge.get_forward_walk_ops([<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.x', title='<list>'>x</a>.op for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.x', title='<list>'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.x', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.x', title='<list>'>x</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_inp', title='{[?] | list}'>ts_inp</a>], within_ops=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.within_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.within_ops', title='None'>within_ops</a>)
<span class='lineno'> 352</span> 
<span class='lineno'> 353</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.deps', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.deps', title='dict'>deps</a> = {}
<span class='lineno'> 354</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.tf_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.tf_op', title='?'>tf_op</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.all_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.all_ops', title='?'>all_ops</a>:
<span class='lineno'> 355</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.outp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.outp', title='?'>outp</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.tf_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.tf_op', title='?'>tf_op</a>.outputs:
<span class='lineno'> 356</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.deps', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.deps', title='dict'>deps</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.outp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.outp', title='?'>outp</a>] = set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.tf_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.tf_op', title='?'>tf_op</a>.inputs)
<span class='lineno'> 357</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.sorted_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.sorted_ts', title='?'>sorted_ts</a> = toposort(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.deps', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.deps', title='dict'>deps</a>)
<span class='lineno'> 358</span> 
<span class='lineno'> 359</span>     # only keep the tensors from our original list
<span class='lineno'> 360</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_sorted_lists', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_sorted_lists', title='[list]'>ts_sorted_lists</a> = []
<span class='lineno'> 361</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.lst', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.lst', title='?'>lst</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.sorted_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.sorted_ts', title='?'>sorted_ts</a>:
<span class='lineno'> 362</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.keep', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.keep', title='list'>keep</a> = list(set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.lst', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.lst', title='?'>lst</a>).intersection(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_inp', title='{[?] | list}'>ts_inp</a>))
<span class='lineno'> 363</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.keep', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.keep', title='list'>keep</a>:
<span class='lineno'> 364</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_sorted_lists', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_sorted_lists', title='[list]'>ts_sorted_lists</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.keep', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.keep', title='list'>keep</a>)
<span class='lineno'> 365</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_sorted_lists', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.tf_toposort.ts_sorted_lists', title='[list]'>ts_sorted_lists</a>
<span class='lineno'> 366</span> 
<span class='lineno'> 367</span> 
<span class='lineno'> 368</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops', title='(?, ?, ?) -> list / ([?], [?], list) -> list / ([?], [?], [<list>]) -> list'>fast_backward_ops</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.within_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.within_ops', title='[?]'>within_ops</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.seed_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.seed_ops', title='[?]'>seed_ops</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.stop_at_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.stop_at_ts', title='{[<list>] | list}'>stop_at_ts</a>):
<span class='lineno'> 369</span>     &quot;&quot;&quot; Fast backward ops &quot;&quot;&quot;
<span class='lineno'> 370</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.bwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.bwd_ops', title='?'>bwd_ops</a> = set(ge.get_backward_walk_ops(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.seed_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.seed_ops', title='[?]'>seed_ops</a>, stop_at_ts=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.stop_at_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.stop_at_ts', title='{[<list>] | list}'>stop_at_ts</a>))
<span class='lineno'> 371</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.ops', title='?'>ops</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.bwd_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.bwd_ops', title='?'>bwd_ops</a>.intersection(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.within_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.within_ops', title='[?]'>within_ops</a>).difference([<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.t', title='<list>'>t</a>.op for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.t', title='<list>'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.t', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.t', title='<list>'>t</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.stop_at_ts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.stop_at_ts', title='{[<list>] | list}'>stop_at_ts</a>])
<span class='lineno'> 372</span>     return list(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.fast_backward_ops.ops', title='?'>ops</a>)
<span class='lineno'> 373</span> 
<span class='lineno'> 374</span> 
<span class='lineno'> 375</span> @contextlib.contextmanager
<span class='lineno'> 376</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops', title='() -> None'>capture_ops</a>():
<span class='lineno'> 377</span>     &quot;&quot;&quot;Decorator to capture ops created in the block.
<span class='lineno'> 378</span>     with capture_ops() as ops:
<span class='lineno'> 379</span>         # create some ops
<span class='lineno'> 380</span>     print(ops) # =&gt; prints ops created.
<span class='lineno'> 381</span>     &quot;&quot;&quot;
<span class='lineno'> 382</span> 
<span class='lineno'> 383</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.micros', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.micros', title='int'>micros</a> = int(time.time()*10**6)
<span class='lineno'> 384</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.scope_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.scope_name', title='str'>scope_name</a> = str(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.micros', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.micros', title='int'>micros</a>)
<span class='lineno'> 385</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.op_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.op_list', title='[?]'>op_list</a> = []
<span class='lineno'> 386</span>     with tf.name_scope(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.scope_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.scope_name', title='str'>scope_name</a>):
<span class='lineno'> 387</span>         yield <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.op_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.op_list', title='[?]'>op_list</a>
<span class='lineno'> 388</span> 
<span class='lineno'> 389</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.graph', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.graph', title='?'>graph</a> = tf.get_default_graph()
<span class='lineno'> 390</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.op_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.op_list', title='[?]'>op_list</a>.extend(ge.select_ops(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.scope_name', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.scope_name', title='str'>scope_name</a>+&quot;/.*&quot;, graph=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.graph', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.capture_ops.graph', title='?'>graph</a>))
<span class='lineno'> 391</span> 
<span class='lineno'> 392</span> 
<span class='lineno'> 393</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op', title='? -> None'>_to_op</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op.tensor_or_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op.tensor_or_op', title='?'>tensor_or_op</a>):
<span class='lineno'> 394</span>     &quot;&quot;&quot; Convert to op &quot;&quot;&quot;
<span class='lineno'> 395</span>     if hasattr(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op.tensor_or_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op.tensor_or_op', title='?'>tensor_or_op</a>, &quot;op&quot;):
<span class='lineno'> 396</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op.tensor_or_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op.tensor_or_op', title='?'>tensor_or_op</a>.op
<span class='lineno'> 397</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op.tensor_or_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op.tensor_or_op', title='?'>tensor_or_op</a>
<span class='lineno'> 398</span> 
<span class='lineno'> 399</span> 
<span class='lineno'> 400</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops', title='[?] -> {[?] | [None]} / ? -> [None]'>_to_ops</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.iterable', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.iterable', title='[?]'>iterable</a>):
<span class='lineno'> 401</span>     &quot;&quot;&quot; Convert to ops &quot;&quot;&quot;
<span class='lineno'> 402</span>     if not <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable', title='[?] -> bool / ? -> bool'>_is_iterable</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.iterable', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.iterable', title='[?]'>iterable</a>):
<span class='lineno'> 403</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.iterable', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.iterable', title='[?]'>iterable</a>
<span class='lineno'> 404</span>     return [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_op', title='? -> None'>_to_op</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.i', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.i', title='?'>i</a>) for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.i', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.i', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.i', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.i', title='?'>i</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.iterable', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._to_ops.iterable', title='[?]'>iterable</a>]
<span class='lineno'> 405</span> 
<span class='lineno'> 406</span> 
<span class='lineno'> 407</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable', title='[?] -> bool / ? -> bool'>_is_iterable</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable.obj', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable.obj', title='[?]'>obj</a>):
<span class='lineno'> 408</span>     &quot;&quot;&quot; Check if object is iterable &quot;&quot;&quot;
<span class='lineno'> 409</span>     try:
<span class='lineno'> 410</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable._', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable._', title='?'>_</a> = iter(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable.obj', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients._is_iterable.obj', title='[?]'>obj</a>)
<span class='lineno'> 411</span>     except Exception:  # pylint: disable=broad-except
<span class='lineno'> 412</span>         return False
<span class='lineno'> 413</span>     return True
<span class='lineno'> 414</span> 
<span class='lineno'> 415</span> 
<span class='lineno'> 416</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print', title='? -> None / str -> None'>debug_print</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.msg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.msg', title='str'>msg</a>, *args):
<span class='lineno'> 417</span>     &quot;&quot;&quot; Debug logging &quot;&quot;&quot;
<span class='lineno'> 418</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.formatted_args', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.formatted_args', title='[{[str] | str}]'>formatted_args</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops', title='(?, bool) -> {[str] | str}'>format_ops</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.arg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.arg', title='?'>arg</a>) for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.arg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.arg', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.arg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.arg', title='?'>arg</a></a> in args]
<span class='lineno'> 419</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.logger', title='?'>logger</a>.debug(&quot;%s: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.msg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.msg', title='str'>msg</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.formatted_args', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.debug_print.formatted_args', title='[{[str] | str}]'>formatted_args</a>)
<span class='lineno'> 420</span> 
<span class='lineno'> 421</span> 
<span class='lineno'> 422</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops', title='(?, bool) -> {[str] | str}'>format_ops</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', title='?'>ops</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.sort_outputs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.sort_outputs', title='bool'>sort_outputs</a>=True):
<span class='lineno'> 423</span>     &quot;&quot;&quot;Helper method for printing ops. Converts Tensor/Operation op to op.name,
<span class='lineno'> 424</span>        rest to str(op).&quot;&quot;&quot;
<span class='lineno'> 425</span> 
<span class='lineno'> 426</span>     if hasattr(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', title='?'>ops</a>, &#39;__iter__&#39;) and not isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', title='?'>ops</a>, str):
<span class='lineno'> 427</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.lst', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.lst', title='[str]'>lst</a> = [(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.op', title='?'>op</a>.name if hasattr(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.op', title='?'>op</a>, &quot;name&quot;) else str(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.op', title='?'>op</a>)) for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.op', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.op', title='?'>op</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', title='?'>ops</a>]
<span class='lineno'> 428</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.sort_outputs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.sort_outputs', title='bool'>sort_outputs</a>:
<span class='lineno'> 429</span>             return sorted(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.lst', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.lst', title='[str]'>lst</a>)
<span class='lineno'> 430</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.lst', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.lst', title='[str]'>lst</a>
<span class='lineno'> 431</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', title='?'>ops</a>.name if hasattr(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', title='?'>ops</a>, &quot;name&quot;) else str(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.format_ops.ops', title='?'>ops</a>)
<span class='lineno'> 432</span> 
<span class='lineno'> 433</span> 
<span class='lineno'> 434</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs', title='(?, [?]) -> None / (?, ?) -> None'>my_add_control_inputs</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.wait_to_do_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.wait_to_do_ops', title='?'>wait_to_do_ops</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.inputs_to_do_before', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.inputs_to_do_before', title='[?]'>inputs_to_do_before</a>):
<span class='lineno'> 435</span>     &quot;&quot;&quot; Add control inputs &quot;&quot;&quot;
<span class='lineno'> 436</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.tf_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.tf_op', title='?'>tf_op</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.wait_to_do_ops', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.wait_to_do_ops', title='?'>wait_to_do_ops</a>:
<span class='lineno'> 437</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.ctl_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.ctl_inp', title='[?]'>ctl_inp</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.i', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.i', title='?'>i</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.i', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.i', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.i', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.i', title='?'>i</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.inputs_to_do_before', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.inputs_to_do_before', title='[?]'>inputs_to_do_before</a>
<span class='lineno'> 438</span>                    if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.tf_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.tf_op', title='?'>tf_op</a>.control_inputs is None or <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.i', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.i', title='?'>i</a> not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.tf_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.tf_op', title='?'>tf_op</a>.control_inputs]
<span class='lineno'> 439</span>         ge.add_control_inputs(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.tf_op', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.tf_op', title='?'>tf_op</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.ctl_inp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.model.memory_saving_gradients.my_add_control_inputs.ctl_inp', title='[?]'>ctl_inp</a>)
</pre></td></tr></table></body></html>