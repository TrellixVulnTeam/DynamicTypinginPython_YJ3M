<html>
<head>
<meta charset="utf-8">
<title>/home/xxm/Desktop/EMSE/dataset/faceswap/lib/image.py</title>
<style type='text/css'>
body { color: #666666; }
a {
    text-decoration: none; color: #5AA2A7;
    border: solid 1px rgba(255,255,255,0);
}
a.active {
    background: -webkit-linear-gradient(top,rgba(255, 255, 200, 0.35) 0,rgba(255, 255, 200, 0.55) 100%);
    border: solid 1px #E5E600;
}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #cccccc;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px solid orange; padding-bottom: 1px}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted;

function highlight(xid)
{
    var elms = document.querySelectorAll('[xid="' + xid + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "active";
    }
    highlighted = xid;
}

function clearHighlight() {
    var elms = document.querySelectorAll('[xid="' + highlighted + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "";
    }
}

window.onload =
    function (e) {
        var tags = document.getElementsByTagName("A")
        for (var i = 0; i < tags.length; i++) {
            tags[i].onmouseover =
                function (e) {
                    clearHighlight();
                    var xid = e.toElement.getAttribute('xid');
                    highlight(xid);
                }
        }
    }</script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger'>logger</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader'>FfmpegReader</a><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__'>__init__</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info'>get_frame_info</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info'>_previous_keyframe_info</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize'>_initialize</a></li></ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image'>read_image</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch'>read_image_batch</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash'>read_image_hash</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch'>read_image_hash_batch</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash'>encode_image_with_hash</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color'>batch_convert_color</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames'>count_frames</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO'>ImageIO</a><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__'>__init__</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location'>location</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists'>_check_location_exists</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread'>_set_thread</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._process', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._process'>_process</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close'>close</a></li></ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader'>ImagesLoader</a><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__'>__init__</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count'>count</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.process_count', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.process_count'>process_count</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.is_video', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.is_video'>is_video</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.fps', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.fps'>fps</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list'>file_list</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list'>add_skip_list</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video'>_check_for_video</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps'>_get_fps</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist'>_get_count_and_filelist</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process'>_process</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video'>_from_video</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename'>_dummy_video_framename</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder'>_from_folder</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load'>load</a></li></ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader'>FacesLoader</a><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__'>__init__</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder'>_from_folder</a></li></ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader'>SingleFrameLoader</a><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__'>__init__</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.video_meta_data', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.video_meta_data'>video_meta_data</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist'>_get_count_and_filelist</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index'>image_from_index</a></li></ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver'>ImagesSaver</a><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__'>__init__</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._check_location_exists', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._check_location_exists'>_check_location_exists</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process'>_process</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save'>_save</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save'>save</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.close', xid='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.close'>close</a></li></ul>
</li></ul>
</td><td><pre><span class='lineno'>   1</span> #!/usr/bin python3
<span class='lineno'>   2</span> &quot;&quot;&quot; Utilities for working with images and videos &quot;&quot;&quot;
<span class='lineno'>   3</span> 
<span class='lineno'>   4</span> import logging
<span class='lineno'>   5</span> import re
<span class='lineno'>   6</span> import subprocess
<span class='lineno'>   7</span> import os
<span class='lineno'>   8</span> import sys
<span class='lineno'>   9</span> 
<span class='lineno'>  10</span> from bisect import bisect
<span class='lineno'>  11</span> from concurrent import futures
<span class='lineno'>  12</span> from hashlib import sha1
<span class='lineno'>  13</span> 
<span class='lineno'>  14</span> import cv2
<span class='lineno'>  15</span> import imageio
<span class='lineno'>  16</span> import imageio_ffmpeg as im_ffm
<span class='lineno'>  17</span> import numpy as np
<span class='lineno'>  18</span> from tqdm import tqdm
<span class='lineno'>  19</span> 
<span class='lineno'>  20</span> from <a href='__init__.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib', title='lib'>lib</a>.<a href='multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading', title='multithreading'>multithreading</a> import <a href='multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread', title='<MultiThread>'>MultiThread</a>
<span class='lineno'>  21</span> from <a href='__init__.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib', title='lib'>lib</a>.<a href='queue_manager.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager', title='{QueueManager | queue_manager}'>queue_manager</a> import queue_manager, QueueEmpty
<span class='lineno'>  22</span> from <a href='__init__.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib', title='lib'>lib</a>.<a href='utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils', title='utils'>utils</a> import <a href='utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.convert_to_secs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.convert_to_secs', title='() -> {float | int}'>convert_to_secs</a>, <a href='utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.FaceswapError', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.FaceswapError', title='<FaceswapError>'>FaceswapError</a>, <a href='utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils._video_extensions', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils._video_extensions', title='[str]'>_video_extensions</a>, <a href='utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.get_image_paths', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.get_image_paths', title='None -> list / ? -> list / ImageIO -> None -> list'>get_image_paths</a>
<span class='lineno'>  23</span> 
<span class='lineno'>  24</span> <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a> = logging.getLogger(__name__)  # pylint:disable=invalid-name
<span class='lineno'>  25</span> 
<span class='lineno'>  26</span> # ################### #
<span class='lineno'>  27</span> # &lt;&lt;&lt; IMAGE UTILS &gt;&gt;&gt; #
<span class='lineno'>  28</span> # ################### #
<span class='lineno'>  29</span> 
<span class='lineno'>  30</span> 
<span class='lineno'>  31</span> # &lt;&lt;&lt; IMAGE IO &gt;&gt;&gt; #
<span class='lineno'>  32</span> 
<span class='lineno'>  33</span> class <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader', title='<FfmpegReader>'>FfmpegReader</a>(imageio.plugins.ffmpeg.FfmpegFormat.Reader):
<span class='lineno'>  34</span>     &quot;&quot;&quot; Monkey patch imageio ffmpeg to use keyframes whilst seeking &quot;&quot;&quot;
<span class='lineno'>  35</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__', title='? -> ?'>__init__</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.self', title='FfmpegReader'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.format', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.format', title='?'>for</a>mat, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.request', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.request', title='?'>req</a>uest):
<span class='lineno'>  36</span>         super().__init__(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.format', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.format', title='?'>format</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.request', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.request', title='?'>request</a>)
<span class='lineno'>  37</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', title='[float]'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', title='[float]'>_frame_pts</a></a> = None
<span class='lineno'>  38</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.self', title='FfmpegReader'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', title='[int]'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', title='[int]'>_keyframes</a></a> = None
<span class='lineno'>  39</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.__init__.self', title='FfmpegReader'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', title='?'>use_patch</a></a> = False
<span class='lineno'>  40</span> 
<span class='lineno'>  41</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info', title='(FfmpegReader, None, None) -> (int, dict)'>get_frame_info</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', title='None'>fra</a>me_pts=None, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.keyframes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.keyframes', title='None'>key</a>frames=None):
<span class='lineno'>  42</span>         &quot;&quot;&quot; Store the source video&#39;s keyframes in :attr:`_frame_info&quot; for the current video for use
<span class='lineno'>  43</span>         in :func:`initialize`.
<span class='lineno'>  44</span> 
<span class='lineno'>  45</span>         Parameters
<span class='lineno'>  46</span>         ----------
<span class='lineno'>  47</span>         frame_pts: list, optional
<span class='lineno'>  48</span>             A list corresponding to the video frame count of the pts_time per frame. If this and
<span class='lineno'>  49</span>             `keyframes` are provided, then analyzing the video is skipped and the values from the
<span class='lineno'>  50</span>             given lists are used. Default: ``None``
<span class='lineno'>  51</span>         keyframes: list, optional
<span class='lineno'>  52</span>             A list containing the frame numbers of each key frame. if this and `frame_pts` are
<span class='lineno'>  53</span>             provided, then analyzing the video is skipped and the values from the given lists are
<span class='lineno'>  54</span>             used. Default: ``None``
<span class='lineno'>  55</span>         &quot;&quot;&quot;
<span class='lineno'>  56</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', title='None'>frame_pts</a> is not None and <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.keyframes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.keyframes', title='None'>keyframes</a> is not None:
<span class='lineno'>  57</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Video meta information provided. Not analyzing video&quot;)
<span class='lineno'>  58</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', title='[float]'>_frame_pts</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', title='None'>frame_pts</a>
<span class='lineno'>  59</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', title='[int]'>_keyframes</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.keyframes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.keyframes', title='None'>keyframes</a>
<span class='lineno'>  60</span>             return len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', title='None'>frame_pts</a>), dict(pts_time=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', title='[float]'>_frame_pts</a>, keyframes=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', title='[int]'>_keyframes</a>)
<span class='lineno'>  61</span> 
<span class='lineno'>  62</span>         assert isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>self</a>._filename, str), &quot;Video path must be a string&quot;
<span class='lineno'>  63</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.cmd', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.cmd', title='[str]'>cmd</a> = [im_ffm.get_ffmpeg_exe(),
<span class='lineno'>  64</span>                &quot;-hide_banner&quot;,
<span class='lineno'>  65</span>                &quot;-copyts&quot;,
<span class='lineno'>  66</span>                &quot;-i&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>self</a>._filename,
<span class='lineno'>  67</span>                &quot;-vf&quot;, &quot;showinfo&quot;,
<span class='lineno'>  68</span>                &quot;-start_number&quot;, &quot;0&quot;,
<span class='lineno'>  69</span>                &quot;-an&quot;,
<span class='lineno'>  70</span>                &quot;-f&quot;, &quot;null&quot;,
<span class='lineno'>  71</span>                &quot;-&quot;]
<span class='lineno'>  72</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;FFMPEG Command: &#39;%s&#39;&quot;, &quot; &quot;.join(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.cmd', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.cmd', title='[str]'>cmd</a>))
<span class='lineno'>  73</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.process', title='?'>process</a> = subprocess.Popen(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.cmd', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.cmd', title='[str]'>cmd</a>,
<span class='lineno'>  74</span>                                    stderr=subprocess.STDOUT,
<span class='lineno'>  75</span>                                    stdout=subprocess.PIPE,
<span class='lineno'>  76</span>                                    universal_newlines=True)
<span class='lineno'>  77</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', title='[float]'>frame_pts</a> = []
<span class='lineno'>  78</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.key_frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.key_frames', title='[int]'>key_frames</a> = []
<span class='lineno'>  79</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.last_update', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.last_update', title='int'>last_update</a> = 0
<span class='lineno'>  80</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pbar', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pbar', title='?'>pbar</a> = tqdm(desc=&quot;Analyzing Video&quot;,
<span class='lineno'>  81</span>                     leave=False,
<span class='lineno'>  82</span>                     total=int(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>self</a>._meta[&quot;duration&quot;]),
<span class='lineno'>  83</span>                     unit=&quot;secs&quot;)
<span class='lineno'>  84</span>         while True:
<span class='lineno'>  85</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', title='?'>output</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.process', title='?'>process</a>.stdout.readline().strip()
<span class='lineno'>  86</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', title='?'>output</a> == &quot;&quot; and <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.process', title='?'>process</a>.poll() is not None:
<span class='lineno'>  87</span>                 break
<span class='lineno'>  88</span>             if &quot;iskey&quot; not in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', title='?'>output</a>:
<span class='lineno'>  89</span>                 continue
<span class='lineno'>  90</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Keyframe line: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', title='?'>output</a>)
<span class='lineno'>  91</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.line', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.line', title='?'>line</a> = re.split(r&quot;\s+|:\s*&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', title='?'>output</a>)
<span class='lineno'>  92</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', title='float'>pts_time</a> = float(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.line', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.line', title='?'>line</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.line', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.line', title='?'>line</a>.index(&quot;pts_time&quot;) + 1])
<span class='lineno'>  93</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_no', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_no', title='int'>frame_no</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.line', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.line', title='?'>line</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.line', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.line', title='?'>line</a>.index(&quot;n&quot;) + 1])
<span class='lineno'>  94</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', title='[float]'>frame_pts</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', title='float'>pts_time</a>)
<span class='lineno'>  95</span>             if &quot;iskey:1&quot; in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.output', title='?'>output</a>:
<span class='lineno'>  96</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.key_frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.key_frames', title='[int]'>key_frames</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_no', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_no', title='int'>frame_no</a>)
<span class='lineno'>  97</span> 
<span class='lineno'>  98</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;pts_time: %s, frame_no: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', title='float'>pts_time</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_no', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_no', title='int'>frame_no</a>)
<span class='lineno'>  99</span>             if int(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', title='float'>pts_time</a>) == <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.last_update', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.last_update', title='int'>last_update</a>:
<span class='lineno'> 100</span>                 # Floating points make TQDM display poorly, so only update on full
<span class='lineno'> 101</span>                 # second increments
<span class='lineno'> 102</span>                 continue
<span class='lineno'> 103</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pbar', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pbar', title='?'>pbar</a>.update(int(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', title='float'>pts_time</a>) - <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.last_update', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.last_update', title='int'>last_update</a>)
<span class='lineno'> 104</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.last_update', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.last_update', title='int'>last_update</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pts_time', title='float'>pts_time</a>)
<span class='lineno'> 105</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pbar', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.pbar', title='?'>pbar</a>.close()
<span class='lineno'> 106</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.return_code', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.return_code', title='?'>return_code</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.process', title='?'>process</a>.poll()
<span class='lineno'> 107</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_count', title='int'>frame_count</a> = len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', title='[float]'>frame_pts</a>)
<span class='lineno'> 108</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Return code: %s, frame_pts: %s, keyframes: %s, frame_count: %s&quot;,
<span class='lineno'> 109</span>                      <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.return_code', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.return_code', title='?'>return_code</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', title='[float]'>frame_pts</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.key_frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.key_frames', title='[int]'>key_frames</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_count', title='int'>frame_count</a>)
<span class='lineno'> 110</span> 
<span class='lineno'> 111</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', title='[float]'>_frame_pts</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_pts', title='[float]'>frame_pts</a>
<span class='lineno'> 112</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', title='[int]'>_keyframes</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.key_frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.key_frames', title='[int]'>key_frames</a>
<span class='lineno'> 113</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.frame_count', title='int'>frame_count</a>, dict(pts_time=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', title='[float]'>_frame_pts</a>, keyframes=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', title='[int]'>_keyframes</a>)
<span class='lineno'> 114</span> 
<span class='lineno'> 115</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info', title='(FfmpegReader, int) -> (list, int)'>_previous_keyframe_info</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.self', title='FfmpegReader'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.index', title='int'>ind</a>ex=0):
<span class='lineno'> 116</span>         &quot;&quot;&quot; Return the previous keyframe&#39;s pts_time and frame number &quot;&quot;&quot;
<span class='lineno'> 117</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe_idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe_idx', title='int'>prev_keyframe_idx</a> = bisect(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', title='[int]'>_keyframes</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.index', title='int'>index</a>) - 1
<span class='lineno'> 118</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe', title='int'>prev_keyframe</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._keyframes', title='[int]'>_keyframes</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe_idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe_idx', title='int'>prev_keyframe_idx</a>]
<span class='lineno'> 119</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_pts_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_pts_time', title='list'>prev_pts_time</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', title='[float]'>_frame_pts</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe', title='int'>prev_keyframe</a>]
<span class='lineno'> 120</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;keyframe pts_time: %s, keyframe: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_pts_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_pts_time', title='list'>prev_pts_time</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe', title='int'>prev_keyframe</a>)
<span class='lineno'> 121</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_pts_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_pts_time', title='list'>prev_pts_time</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info.prev_keyframe', title='int'>prev_keyframe</a>
<span class='lineno'> 122</span> 
<span class='lineno'> 123</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize', title='(FfmpegReader, int) -> ?'>_initialize</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', title='int'>ind</a>ex=0):
<span class='lineno'> 124</span>         &quot;&quot;&quot; Replace ImageIO _initialize with a version that explictly uses keyframes.
<span class='lineno'> 125</span> 
<span class='lineno'> 126</span>         Notes
<span class='lineno'> 127</span>         -----
<span class='lineno'> 128</span>         This introduces a minor change by seeking fast to the previous keyframe and then discarding
<span class='lineno'> 129</span>         subsequent frames until the desired frame is reached. In testing, setting -ss flag either
<span class='lineno'> 130</span>         prior to input, or both prior (fast) and after (slow) would not always bring back the
<span class='lineno'> 131</span>         correct frame for all videos. Navigating to the previous keyframe then discarding frames
<span class='lineno'> 132</span>         until the correct frame is reached appears to work well.
<span class='lineno'> 133</span>         &quot;&quot;&quot;
<span class='lineno'> 134</span>         # pylint: disable-all
<span class='lineno'> 135</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._read_gen is not None:
<span class='lineno'> 136</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._read_gen.close()
<span class='lineno'> 137</span> 
<span class='lineno'> 138</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='[?]'>iargs</a> = []
<span class='lineno'> 139</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', title='[?]'>oargs</a> = []
<span class='lineno'> 140</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.skip_frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.skip_frames', title='int'>skip_frames</a> = 0
<span class='lineno'> 141</span> 
<span class='lineno'> 142</span>         # Create input args
<span class='lineno'> 143</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='[?]'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='[?]'>iargs</a></a> += <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._arg_input_params
<span class='lineno'> 144</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.request._video:
<span class='lineno'> 145</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='[?]'>iargs</a></a> += [&quot;-f&quot;, CAM_FORMAT]  # noqa
<span class='lineno'> 146</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._arg_pixelformat:
<span class='lineno'> 147</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='[str]'>iargs</a></a> += [&quot;-pix_fmt&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._arg_pixelformat]
<span class='lineno'> 148</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._arg_size:
<span class='lineno'> 149</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='[str]'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='[str]'>iargs</a></a> += [&quot;-s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._arg_size]
<span class='lineno'> 150</span>         elif <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', title='int'>index</a> &gt; 0:  # re-initialize  / seek
<span class='lineno'> 151</span>             # Note: only works if we initialized earlier, and now have meta. Some info here:
<span class='lineno'> 152</span>             # https://trac.ffmpeg.org/wiki/Seeking
<span class='lineno'> 153</span>             # There are two ways to seek, one before -i (input_params) and after (output_params).
<span class='lineno'> 154</span>             # The former is fast, because it uses keyframes, the latter is slow but accurate.
<span class='lineno'> 155</span>             # According to the article above, the fast method should also be accurate from ffmpeg
<span class='lineno'> 156</span>             # version 2.1, however in version 4.1 our tests start failing again. Not sure why, but
<span class='lineno'> 157</span>             # we can solve this by combining slow and fast.
<span class='lineno'> 158</span>             # Further note: The old method would go back 10 seconds and then seek slow. This was
<span class='lineno'> 159</span>             # still somewhat unresponsive and did not always land on the correct frame. This monkey
<span class='lineno'> 160</span>             # patched version goes to the previous keyframe then discards frames until the correct
<span class='lineno'> 161</span>             # frame is landed on.
<span class='lineno'> 162</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', title='?'>use_patch</a> and <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._frame_pts', title='[float]'>_frame_pts</a> is None:
<span class='lineno'> 163</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.get_frame_info', title='(FfmpegReader, None, None) -> (int, dict)'>get_frame_info</a>()
<span class='lineno'> 164</span> 
<span class='lineno'> 165</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', title='?'>use_patch</a>:
<span class='lineno'> 166</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.keyframe_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.keyframe_pts', title='list'>keyframe_pts</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.keyframe', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.keyframe', title='int'>keyframe</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._previous_keyframe_info', title='(FfmpegReader, int) -> (list, int)'>_previous_keyframe_info</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', title='int'>index</a>)
<span class='lineno'> 167</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_fast', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_fast', title='list'>seek_fast</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.keyframe_pts', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.keyframe_pts', title='list'>keyframe_pts</a>
<span class='lineno'> 168</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.skip_frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.skip_frames', title='int'>skip_frames</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', title='int'>index</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.keyframe', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.keyframe', title='int'>keyframe</a>
<span class='lineno'> 169</span>             else:
<span class='lineno'> 170</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.starttime', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.starttime', title='int'>starttime</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', title='int'>index</a> / <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._meta[&quot;fps&quot;]
<span class='lineno'> 171</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_slow', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_slow', title='int'>seek_slow</a> = min(10, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.starttime', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.starttime', title='int'>starttime</a>)
<span class='lineno'> 172</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_fast', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_fast', title='int'>seek_fast</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.starttime', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.starttime', title='int'>starttime</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_slow', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_slow', title='int'>seek_slow</a>
<span class='lineno'> 173</span> 
<span class='lineno'> 174</span>             # We used to have this epsilon earlier, when we did not use
<span class='lineno'> 175</span>             # the slow seek. I don&#39;t think we need it anymore.
<span class='lineno'> 176</span>             # epsilon = -1 / self._meta[&quot;fps&quot;] * 0.1
<span class='lineno'> 177</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='[?]'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='?'>iargs</a></a> += [&quot;-ss&quot;, &quot;%.06f&quot; % (<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_fast', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_fast', title='{int | list}'>seek_fast</a>)]
<span class='lineno'> 178</span>             if not <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', title='?'>use_patch</a>:
<span class='lineno'> 179</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', title='[?]'>oargs</a></a> += [&quot;-ss&quot;, &quot;%.06f&quot; % (<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_slow', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.seek_slow', title='int'>seek_slow</a>)]
<span class='lineno'> 180</span> 
<span class='lineno'> 181</span>         # Output args, for writing to pipe
<span class='lineno'> 182</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._arg_size:
<span class='lineno'> 183</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', title='[?]'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', title='?'>oargs</a></a> += [&quot;-s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._arg_size]
<span class='lineno'> 184</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.request.kwargs.get(&quot;fps&quot;, None):
<span class='lineno'> 185</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.fps', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.fps', title='float'>fps</a> = float(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.request.kwargs[&quot;fps&quot;])
<span class='lineno'> 186</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', title='[?]'>oargs</a></a> += [&quot;-r&quot;, &quot;%.02f&quot; % <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.fps', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.fps', title='float'>fps</a>]
<span class='lineno'> 187</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', title='[?]'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', title='[?]'>oargs</a></a> += <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._arg_output_params
<span class='lineno'> 188</span> 
<span class='lineno'> 189</span>         # Get pixelformat and bytes per pixel
<span class='lineno'> 190</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.pix_fmt', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.pix_fmt', title='?'>pix_fmt</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._pix_fmt
<span class='lineno'> 191</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.bpp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.bpp', title='?'>bpp</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._depth * <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._bytes_per_channel
<span class='lineno'> 192</span> 
<span class='lineno'> 193</span>         # Create generator
<span class='lineno'> 194</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.rf', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.rf', title='?'>rf</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._ffmpeg_api.read_frames
<span class='lineno'> 195</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._read_gen', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._read_gen', title='?'>_read_gen</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.rf', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.rf', title='?'>rf</a>(
<span class='lineno'> 196</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._filename, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.pix_fmt', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.pix_fmt', title='?'>pix_fmt</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.bpp', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.bpp', title='?'>bpp</a>, input_params=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.iargs', title='{[?] | [str]}'>iargs</a>, output_params=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.oargs', title='[?]'>oargs</a>
<span class='lineno'> 197</span>         )
<span class='lineno'> 198</span> 
<span class='lineno'> 199</span>         # Read meta data. This start the generator (and ffmpeg subprocess)
<span class='lineno'> 200</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.request._video:
<span class='lineno'> 201</span>             # With cameras, catch error and turn into IndexError
<span class='lineno'> 202</span>             try:
<span class='lineno'> 203</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.meta', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.meta', title='?'>meta</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._read_gen', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._read_gen', title='?'>_read_gen</a>.__next__()
<span class='lineno'> 204</span>             except IOError as err:
<span class='lineno'> 205</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.err_text', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.err_text', title='str'>err_text</a> = str(err)
<span class='lineno'> 206</span>                 if &quot;darwin&quot; in sys.platform:
<span class='lineno'> 207</span>                     if &quot;Unknown input format: &#39;avfoundation&#39;&quot; in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.err_text', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.err_text', title='str'>err_text</a>:
<span class='lineno'> 208</span>                         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.err_text', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.err_text', title='str'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.err_text', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.err_text', title='str'>err_text</a></a> += (
<span class='lineno'> 209</span>                             &quot;Try installing FFMPEG using &quot;
<span class='lineno'> 210</span>                             &quot;home brew to get a version with &quot;
<span class='lineno'> 211</span>                             &quot;support for cameras.&quot;
<span class='lineno'> 212</span>                         )
<span class='lineno'> 213</span>                 raise IndexError(
<span class='lineno'> 214</span>                     &quot;No camera at {}.\n\n{}&quot;.format(self.request._video, err_text)
<span class='lineno'> 215</span>                 )
<span class='lineno'> 216</span>             else:
<span class='lineno'> 217</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._meta.update(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.meta', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.meta', title='?'>meta</a>)
<span class='lineno'> 218</span>         elif <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.index', title='int'>index</a> == 0:
<span class='lineno'> 219</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>._meta.update(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._read_gen', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._read_gen', title='?'>_read_gen</a>.__next__())
<span class='lineno'> 220</span>         else:
<span class='lineno'> 221</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader.use_patch', title='?'>use_patch</a>:
<span class='lineno'> 222</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.frames_skipped', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.frames_skipped', title='int'>frames_skipped</a> = 0
<span class='lineno'> 223</span>                 while <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.skip_frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.skip_frames', title='int'>skip_frames</a> != <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.frames_skipped', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.frames_skipped', title='int'>frames_skipped</a>:
<span class='lineno'> 224</span>                     # Skip frames that are not the desired frame
<span class='lineno'> 225</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize._', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize._', title='?'>_</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._read_gen', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._read_gen', title='?'>_read_gen</a>.__next__()
<span class='lineno'> 226</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.frames_skipped', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.frames_skipped', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.frames_skipped', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.frames_skipped', title='int'>frames_skipped</a></a> += 1
<span class='lineno'> 227</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._initialize.self', title='FfmpegReader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._read_gen', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader._read_gen', title='?'>_read_gen</a>.__next__()  # we already have meta data
<span class='lineno'> 228</span> 
<span class='lineno'> 229</span> 
<span class='lineno'> 230</span> imageio.plugins.ffmpeg.FfmpegFormat.Reader = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FfmpegReader', title='<FfmpegReader>'>FfmpegReader</a>
<span class='lineno'> 231</span> 
<span class='lineno'> 232</span> 
<span class='lineno'> 233</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', title='(str, ?, ?) -> (?, ?) / (<list>, ?, ?) -> (?, ?) / (list, ?, ?) -> (?, ?) / (?, ?, ?) -> (?, ?)'>read_image</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', title='{<list> | list | str}'>fil</a>ename, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.raise_error', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.raise_error', title='?'>rai</a>se_error=False, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.with_hash', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.with_hash', title='?'>wit</a>h_hash=False):
<span class='lineno'> 234</span>     &quot;&quot;&quot; Read an image file from a file location.
<span class='lineno'> 235</span> 
<span class='lineno'> 236</span>     Extends the functionality of :func:`cv2.imread()` by ensuring that an image was actually
<span class='lineno'> 237</span>     loaded. Errors can be logged and ignored so that the process can continue on an image load
<span class='lineno'> 238</span>     failure.
<span class='lineno'> 239</span> 
<span class='lineno'> 240</span>     Parameters
<span class='lineno'> 241</span>     ----------
<span class='lineno'> 242</span>     filename: str
<span class='lineno'> 243</span>         Full path to the image to be loaded.
<span class='lineno'> 244</span>     raise_error: bool, optional
<span class='lineno'> 245</span>         If ``True`` then any failures (including the returned image being ``None``) will be
<span class='lineno'> 246</span>         raised. If ``False`` then an error message will be logged, but the error will not be
<span class='lineno'> 247</span>         raised. Default: ``False``
<span class='lineno'> 248</span>     with_hash: bool, optional
<span class='lineno'> 249</span>         If ``True`` then returns the image&#39;s sha1 hash with the image. Default: ``False``
<span class='lineno'> 250</span> 
<span class='lineno'> 251</span>     Returns
<span class='lineno'> 252</span>     -------
<span class='lineno'> 253</span>     numpy.ndarray or tuple
<span class='lineno'> 254</span>         If :attr:`with_hash` is ``False`` then returns a `numpy.ndarray` of the image in `BGR`
<span class='lineno'> 255</span>         channel order. If :attr:`with_hash` is ``True`` then returns a `tuple` of (`numpy.ndarray`&quot;
<span class='lineno'> 256</span>         of the image in `BGR`, `str` of sha` hash of image)
<span class='lineno'> 257</span>     Example
<span class='lineno'> 258</span>     -------
<span class='lineno'> 259</span>     &gt;&gt;&gt; image_file = &quot;/path/to/image.png&quot;
<span class='lineno'> 260</span>     &gt;&gt;&gt; try:
<span class='lineno'> 261</span>     &gt;&gt;&gt;    image = read_image(image_file, raise_error=True, with_hash=False)
<span class='lineno'> 262</span>     &gt;&gt;&gt; except:
<span class='lineno'> 263</span>     &gt;&gt;&gt;     raise ValueError(&quot;There was an error&quot;)
<span class='lineno'> 264</span>     &quot;&quot;&quot;
<span class='lineno'> 265</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Requested image: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', title='{<list> | list | str}'>filename</a>)
<span class='lineno'> 266</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.success', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.success', title='?'>success</a> = True
<span class='lineno'> 267</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', title='None'>image</a> = None
<span class='lineno'> 268</span>     try:
<span class='lineno'> 269</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', title='?'>image</a> = cv2.imread(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', title='{<list> | list | str}'>filename</a>)
<span class='lineno'> 270</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', title='?'>image</a> is None:
<span class='lineno'> 271</span>             raise ValueError
<span class='lineno'> 272</span>     except TypeError:
<span class='lineno'> 273</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.success', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.success', title='?'>success</a> = False
<span class='lineno'> 274</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', title='str'>msg</a> = &quot;Error while reading image (TypeError): &#39;{}&#39;&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', title='{<list> | list | str}'>filename</a>)
<span class='lineno'> 275</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.error(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', title='str'>msg</a>)
<span class='lineno'> 276</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.raise_error', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.raise_error', title='?'>raise_error</a>:
<span class='lineno'> 277</span>             raise Exception(msg)
<span class='lineno'> 278</span>     except ValueError:
<span class='lineno'> 279</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.success', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.success', title='?'>success</a> = False
<span class='lineno'> 280</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', title='?'>msg</a> = (&quot;Error while reading image. This is most likely caused by special characters in &quot;
<span class='lineno'> 281</span>                &quot;the filename: &#39;{}&#39;&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', title='{<list> | list | str}'>filename</a>))
<span class='lineno'> 282</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.error(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', title='?'>msg</a>)
<span class='lineno'> 283</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.raise_error', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.raise_error', title='?'>raise_error</a>:
<span class='lineno'> 284</span>             raise Exception(msg)
<span class='lineno'> 285</span>     except Exception as err:  # pylint:disable=broad-except
<span class='lineno'> 286</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.success', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.success', title='?'>success</a> = False
<span class='lineno'> 287</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', title='str'>msg</a> = &quot;Failed to load image &#39;{}&#39;. Original Error: {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', title='{<list> | list | str}'>filename</a>, str(err))
<span class='lineno'> 288</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.error(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.msg', title='str'>msg</a>)
<span class='lineno'> 289</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.raise_error', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.raise_error', title='?'>raise_error</a>:
<span class='lineno'> 290</span>             raise Exception(msg)
<span class='lineno'> 291</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Loaded image: &#39;%s&#39;. Success: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.filename', title='{<list> | list | str}'>filename</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.success', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.success', title='?'>success</a>)
<span class='lineno'> 292</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.retval', title='(?, ?)'>retval</a> = (<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', title='?'>image</a>, sha1(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', title='?'>image</a>).hexdigest()) if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.with_hash', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.with_hash', title='?'>with_hash</a> else <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.image', title='?'>image</a>
<span class='lineno'> 293</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image.retval', title='(?, ?)'>retval</a>
<span class='lineno'> 294</span> 
<span class='lineno'> 295</span> 
<span class='lineno'> 296</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch', title='? -> None / [?] -> None'>read_image_batch</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', title='[?]'>fil</a>enames):
<span class='lineno'> 297</span>     &quot;&quot;&quot; Load a batch of images from the given file locations.
<span class='lineno'> 298</span> 
<span class='lineno'> 299</span>     Leverages multi-threading to load multiple images from disk at the same time leading to vastly
<span class='lineno'> 300</span>     reduced image read times.
<span class='lineno'> 301</span> 
<span class='lineno'> 302</span>     Parameters
<span class='lineno'> 303</span>     ----------
<span class='lineno'> 304</span>     filenames: list
<span class='lineno'> 305</span>         A list of ``str`` full paths to the images to be loaded.
<span class='lineno'> 306</span> 
<span class='lineno'> 307</span>     Returns
<span class='lineno'> 308</span>     -------
<span class='lineno'> 309</span>     numpy.ndarray
<span class='lineno'> 310</span>         The batch of images in `BGR` channel order returned in the order of :attr:`filenames`
<span class='lineno'> 311</span> 
<span class='lineno'> 312</span>     Notes
<span class='lineno'> 313</span>     -----
<span class='lineno'> 314</span>     As the images are compiled into a batch, they must be all of the same dimensions.
<span class='lineno'> 315</span> 
<span class='lineno'> 316</span>     Example
<span class='lineno'> 317</span>     -------
<span class='lineno'> 318</span>     &gt;&gt;&gt; image_filenames = [&quot;/path/to/image_1.png&quot;, &quot;/path/to/image_2.png&quot;, &quot;/path/to/image_3.png&quot;]
<span class='lineno'> 319</span>     &gt;&gt;&gt; images = read_image_batch(image_filenames)
<span class='lineno'> 320</span>     &quot;&quot;&quot;
<span class='lineno'> 321</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Requested batch: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', title='[?]'>filenames</a>)
<span class='lineno'> 322</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.executor', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.executor', title='?'>executor</a> = futures.ThreadPoolExecutor()
<span class='lineno'> 323</span>     with <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.executor', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.executor', title='?'>executor</a>:
<span class='lineno'> 324</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.images', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.images', title='dict'>images</a> = {<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.executor', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.executor', title='?'>executor</a>.submit(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', title='(str, ?, ?) -> (?, ?) / (<list>, ?, ?) -> (?, ?) / (list, ?, ?) -> (?, ?) / (?, ?, ?) -> (?, ?)'>read_image</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', title='?'>filename</a>, raise_error=True): <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', title='?'>filename</a>
<span class='lineno'> 325</span>                   for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', title='?'>filename</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', title='[?]'>filenames</a>}
<span class='lineno'> 326</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', title='[None]'>batch</a> = [None for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch._', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch._', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch._', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch._', title='int'>_</a></a> in range(len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', title='[?]'>filenames</a>))]
<span class='lineno'> 327</span>         # There is no guarantee that the same filename will not be passed through multiple times
<span class='lineno'> 328</span>         # (and when shuffle is true this can definitely happen), so we can&#39;t just call
<span class='lineno'> 329</span>         # filenames.index().
<span class='lineno'> 330</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.return_indices', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.return_indices', title='dict'>return_indices</a> = {<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', title='?'>filename</a>: [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.idx', title='?'>idx</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.idx', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.idx', title='?'>idx</a></a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.fname', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.fname', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.fname', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.fname', title='?'>fname</a></a> in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', title='[?]'>filenames</a>)
<span class='lineno'> 331</span>                                      if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.fname', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.fname', title='?'>fname</a> == <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', title='?'>filename</a>]
<span class='lineno'> 332</span>                           for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filename', title='?'>filename</a></a> in set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', title='[?]'>filenames</a>)}
<span class='lineno'> 333</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.future', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.future', title='?'>future</a> in futures.as_completed(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.images', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.images', title='dict'>images</a>):
<span class='lineno'> 334</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', title='[None]'>batch</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.return_indices', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.return_indices', title='dict'>return_indices</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.images', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.images', title='dict'>images</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.future', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.future', title='?'>future</a>]].pop()] = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.future', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.future', title='?'>future</a>.result()
<span class='lineno'> 335</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', title='?'>batch</a> = np.array(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', title='[None]'>batch</a>)
<span class='lineno'> 336</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Returning images: (filenames: %s, batch shape: %s)&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.filenames', title='[?]'>filenames</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', title='?'>batch</a>.shape)
<span class='lineno'> 337</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_batch.batch', title='?'>batch</a>
<span class='lineno'> 338</span> 
<span class='lineno'> 339</span> 
<span class='lineno'> 340</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash', title='? -> None'>read_image_hash</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.filename', title='?'>fil</a>ename):
<span class='lineno'> 341</span>     &quot;&quot;&quot; Return the `sha1` hash of an image saved on disk.
<span class='lineno'> 342</span> 
<span class='lineno'> 343</span>     Parameters
<span class='lineno'> 344</span>     ----------
<span class='lineno'> 345</span>     filename: str
<span class='lineno'> 346</span>         Full path to the image to be loaded.
<span class='lineno'> 347</span> 
<span class='lineno'> 348</span>     Returns
<span class='lineno'> 349</span>     -------
<span class='lineno'> 350</span>     str
<span class='lineno'> 351</span>         The :func:`hashlib.hexdigest()` representation of the `sha1` hash of the given image.
<span class='lineno'> 352</span>     Example
<span class='lineno'> 353</span>     -------
<span class='lineno'> 354</span>     &gt;&gt;&gt; image_file = &quot;/path/to/image.png&quot;
<span class='lineno'> 355</span>     &gt;&gt;&gt; image_hash = read_image_hash(image_file)
<span class='lineno'> 356</span>     &quot;&quot;&quot;
<span class='lineno'> 357</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.img', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.img', title='(?, ?)'>img</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', title='(str, ?, ?) -> (?, ?) / (<list>, ?, ?) -> (?, ?) / (list, ?, ?) -> (?, ?) / (?, ?, ?) -> (?, ?)'>read_image</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.filename', title='?'>filename</a>, raise_error=True)
<span class='lineno'> 358</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.image_hash', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.image_hash', title='?'>image_hash</a> = sha1(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.img', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.img', title='(?, ?)'>img</a>).hexdigest()
<span class='lineno'> 359</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;filename: &#39;%s&#39;, hash: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.filename', title='?'>filename</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.image_hash', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.image_hash', title='?'>image_hash</a>)
<span class='lineno'> 360</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.image_hash', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash.image_hash', title='?'>image_hash</a>
<span class='lineno'> 361</span> 
<span class='lineno'> 362</span> 
<span class='lineno'> 363</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch', title='? -> None / [str] -> None'>read_image_hash_batch</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filenames', title='[str]'>fil</a>enames):
<span class='lineno'> 364</span>     &quot;&quot;&quot; Return the `sha` hash of a batch of images
<span class='lineno'> 365</span> 
<span class='lineno'> 366</span>     Leverages multi-threading to load multiple images from disk at the same time
<span class='lineno'> 367</span>     leading to vastly reduced image read times. Creates a generator to retrieve filenames
<span class='lineno'> 368</span>     with their hashes as they are calculated.
<span class='lineno'> 369</span> 
<span class='lineno'> 370</span>     Notes
<span class='lineno'> 371</span>     -----
<span class='lineno'> 372</span>     The order of returned values is non-deterministic so will most likely not be returned in the
<span class='lineno'> 373</span>     same order as the filenames
<span class='lineno'> 374</span> 
<span class='lineno'> 375</span>     Parameters
<span class='lineno'> 376</span>     ----------
<span class='lineno'> 377</span>     filenames: list
<span class='lineno'> 378</span>         A list of ``str`` full paths to the images to be loaded.
<span class='lineno'> 379</span> 
<span class='lineno'> 380</span>     Yields
<span class='lineno'> 381</span>     -------
<span class='lineno'> 382</span>     tuple: (`filename`, :func:`hashlib.hexdigest()` representation of the `sha1` hash of the image)
<span class='lineno'> 383</span>     Example
<span class='lineno'> 384</span>     -------
<span class='lineno'> 385</span>     &gt;&gt;&gt; image_filenames = [&quot;/path/to/image_1.png&quot;, &quot;/path/to/image_2.png&quot;, &quot;/path/to/image_3.png&quot;]
<span class='lineno'> 386</span>     &gt;&gt;&gt; for filename, hash in read_image_hash_batch(image_filenames):
<span class='lineno'> 387</span>     &gt;&gt;&gt;         &lt;do something&gt;
<span class='lineno'> 388</span>     &quot;&quot;&quot;
<span class='lineno'> 389</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Requested batch: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filenames', title='[str]'>filenames</a>)
<span class='lineno'> 390</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.executor', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.executor', title='?'>executor</a> = futures.ThreadPoolExecutor()
<span class='lineno'> 391</span>     with <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.executor', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.executor', title='?'>executor</a>:
<span class='lineno'> 392</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Submitting %s items to executor&quot;, len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filenames', title='[str]'>filenames</a>))
<span class='lineno'> 393</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.read_hashes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.read_hashes', title='{dict | dict}'>read_hashes</a> = {<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.executor', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.executor', title='?'>executor</a>.submit(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash', title='? -> None'>read_image_hash</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filename', title='str'>filename</a>): <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filename', title='str'>filename</a>
<span class='lineno'> 394</span>                        for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filename', title='str'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filename', title='str'>filename</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filenames', title='[str]'>filenames</a>}
<span class='lineno'> 395</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Succesfully submitted %s items to executor&quot;, len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.filenames', title='[str]'>filenames</a>))
<span class='lineno'> 396</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.future', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.future', title='?'>future</a> in futures.as_completed(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.read_hashes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.read_hashes', title='{dict | dict}'>read_hashes</a>):
<span class='lineno'> 397</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.retval', title='(str, ?)'>retval</a> = (<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.read_hashes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.read_hashes', title='{dict | dict}'>read_hashes</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.future', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.future', title='?'>future</a>], <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.future', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.future', title='?'>future</a>.result())
<span class='lineno'> 398</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Yielding: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.retval', title='(str, ?)'>retval</a>)
<span class='lineno'> 399</span>             yield <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image_hash_batch.retval', title='(str, ?)'>retval</a>
<span class='lineno'> 400</span> 
<span class='lineno'> 401</span> 
<span class='lineno'> 402</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash', title='(?, ?) -> (?, ?) / (?, str) -> (?, ?)'>encode_image_with_hash</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.image', title='?'>ima</a>ge, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.extension', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.extension', title='str'>ext</a>ension):
<span class='lineno'> 403</span>     &quot;&quot;&quot; Encode an image, and get the encoded image back with its `sha1` hash.
<span class='lineno'> 404</span> 
<span class='lineno'> 405</span>     Parameters
<span class='lineno'> 406</span>     ----------
<span class='lineno'> 407</span>     image: numpy.ndarray
<span class='lineno'> 408</span>         The image to be encoded in `BGR` channel order.
<span class='lineno'> 409</span>     extension: str
<span class='lineno'> 410</span>         A compatible `cv2` image file extension that the final image is to be saved to.
<span class='lineno'> 411</span> 
<span class='lineno'> 412</span>     Returns
<span class='lineno'> 413</span>     -------
<span class='lineno'> 414</span>     image_hash: str
<span class='lineno'> 415</span>         The :func:`hashlib.hexdigest()` representation of the `sha1` hash of the encoded image
<span class='lineno'> 416</span>     encoded_image: bytes
<span class='lineno'> 417</span>         The image encoded into the correct file format
<span class='lineno'> 418</span> 
<span class='lineno'> 419</span>     Example
<span class='lineno'> 420</span>     -------
<span class='lineno'> 421</span>     &gt;&gt;&gt; image_file = &quot;/path/to/image.png&quot;
<span class='lineno'> 422</span>     &gt;&gt;&gt; image = read_image(image_file)
<span class='lineno'> 423</span>     &gt;&gt;&gt; image_hash, encoded_image = encode_image_with_hash(image, &quot;.jpg&quot;)
<span class='lineno'> 424</span>     &quot;&quot;&quot;
<span class='lineno'> 425</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.encoded_image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.encoded_image', title='?'>encoded_image</a> = cv2.imencode(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.extension', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.extension', title='str'>extension</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.image', title='?'>image</a>)[1]
<span class='lineno'> 426</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.image_hash', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.image_hash', title='?'>image_hash</a> = sha1(cv2.imdecode(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.encoded_image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.encoded_image', title='?'>encoded_image</a>, cv2.IMREAD_UNCHANGED)).hexdigest()
<span class='lineno'> 427</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.image_hash', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.image_hash', title='?'>image_hash</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.encoded_image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.encode_image_with_hash.encoded_image', title='?'>encoded_image</a>
<span class='lineno'> 428</span> 
<span class='lineno'> 429</span> 
<span class='lineno'> 430</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color', title='(?, ?) -> None / (?, str) -> None / (None, str) -> None'>batch_convert_color</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', title='None'>bat</a>ch, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.colorspace', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.colorspace', title='str'>col</a>orspace):
<span class='lineno'> 431</span>     &quot;&quot;&quot; Convert a batch of images from one color space to another.
<span class='lineno'> 432</span> 
<span class='lineno'> 433</span>     Converts a batch of images by reshaping the batch prior to conversion rather than iterating
<span class='lineno'> 434</span>     over the images. This leads to a significant speed up in the convert process.
<span class='lineno'> 435</span> 
<span class='lineno'> 436</span>     Parameters
<span class='lineno'> 437</span>     ----------
<span class='lineno'> 438</span>     batch: numpy.ndarray
<span class='lineno'> 439</span>         A batch of images.
<span class='lineno'> 440</span>     colorspace: str
<span class='lineno'> 441</span>         The OpenCV Color Conversion Code suffix. For example for BGR to LAB this would be
<span class='lineno'> 442</span>         ``&#39;BGR2LAB&#39;``.
<span class='lineno'> 443</span>         See https://docs.opencv.org/4.1.1/d8/d01/group__imgproc__color__conversions.html for a full
<span class='lineno'> 444</span>         list of color codes.
<span class='lineno'> 445</span> 
<span class='lineno'> 446</span>     Returns
<span class='lineno'> 447</span>     -------
<span class='lineno'> 448</span>     numpy.ndarray
<span class='lineno'> 449</span>         The batch converted to the requested color space.
<span class='lineno'> 450</span> 
<span class='lineno'> 451</span>     Example
<span class='lineno'> 452</span>     -------
<span class='lineno'> 453</span>     &gt;&gt;&gt; images_bgr = numpy.array([image1, image2, image3])
<span class='lineno'> 454</span>     &gt;&gt;&gt; images_lab = batch_convert_color(images_bgr, &quot;BGR2LAB&quot;)
<span class='lineno'> 455</span> 
<span class='lineno'> 456</span>     Notes
<span class='lineno'> 457</span>     -----
<span class='lineno'> 458</span>     This function is only compatible for color space conversions that have the same image shape
<span class='lineno'> 459</span>     for source and destination color spaces.
<span class='lineno'> 460</span> 
<span class='lineno'> 461</span>     If you use :func:`batch_convert_color` with 8-bit images, the conversion will have some
<span class='lineno'> 462</span>     information lost. For many cases, this will not be noticeable but it is recommended
<span class='lineno'> 463</span>     to use 32-bit images in cases that need the full range of colors or that convert an image
<span class='lineno'> 464</span>     before an operation and then convert back.
<span class='lineno'> 465</span>     &quot;&quot;&quot;
<span class='lineno'> 466</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Batch converting: (batch shape: %s, colorspace: %s)&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', title='None'>batch</a>.shape, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.colorspace', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.colorspace', title='str'>colorspace</a>)
<span class='lineno'> 467</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.original_shape', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.original_shape', title='?'>original_shape</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', title='None'>batch</a>.shape
<span class='lineno'> 468</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', title='?'>batch</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', title='None'>batch</a>.reshape((<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.original_shape', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.original_shape', title='?'>original_shape</a>[0] * <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.original_shape', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.original_shape', title='?'>original_shape</a>[1], *<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.original_shape', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.original_shape', title='?'>original_shape</a>[2:]))
<span class='lineno'> 469</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', title='?'>batch</a> = cv2.cvtColor(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', title='?'>batch</a>, getattr(cv2, &quot;COLOR_{}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.colorspace', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.colorspace', title='str'>colorspace</a>)))
<span class='lineno'> 470</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.batch', title='?'>batch</a>.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.original_shape', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.batch_convert_color.original_shape', title='?'>original_shape</a>)
<span class='lineno'> 471</span> 
<span class='lineno'> 472</span> 
<span class='lineno'> 473</span> # ################### #
<span class='lineno'> 474</span> # &lt;&lt;&lt; VIDEO UTILS &gt;&gt;&gt; #
<span class='lineno'> 475</span> # ################### #
<span class='lineno'> 476</span> 
<span class='lineno'> 477</span> def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames', title='(ImageIO -> None, ?) -> int / (?, ?) -> int'>count_frames</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.filename', title='ImageIO -> None'>fil</a>ename, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.fast', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.fast', title='?'>fas</a>t=False):
<span class='lineno'> 478</span>     &quot;&quot;&quot; Count the number of frames in a video file
<span class='lineno'> 479</span> 
<span class='lineno'> 480</span>     There is no guaranteed accurate way to get a count of video frames without iterating through
<span class='lineno'> 481</span>     a video and decoding every frame.
<span class='lineno'> 482</span> 
<span class='lineno'> 483</span>     :func:`count_frames` can return an accurate count (albeit fairly slowly) or a possibly less
<span class='lineno'> 484</span>     accurate count, depending on the :attr:`fast` parameter. A progress bar is displayed.
<span class='lineno'> 485</span> 
<span class='lineno'> 486</span>     Parameters
<span class='lineno'> 487</span>     ----------
<span class='lineno'> 488</span>     filename: str
<span class='lineno'> 489</span>         Full path to the video to return the frame count from.
<span class='lineno'> 490</span>     fast: bool, optional
<span class='lineno'> 491</span>         Whether to count the frames without decoding them. This is significantly faster but
<span class='lineno'> 492</span>         accuracy is not guaranteed. Default: ``False``.
<span class='lineno'> 493</span> 
<span class='lineno'> 494</span>     Returns
<span class='lineno'> 495</span>     -------
<span class='lineno'> 496</span>     int:
<span class='lineno'> 497</span>         The number of frames in the given video file.
<span class='lineno'> 498</span> 
<span class='lineno'> 499</span>     Example
<span class='lineno'> 500</span>     -------
<span class='lineno'> 501</span>     &gt;&gt;&gt; filename = &quot;/path/to/video.mp4&quot;
<span class='lineno'> 502</span>     &gt;&gt;&gt; frame_count = count_frames(filename)
<span class='lineno'> 503</span>     &quot;&quot;&quot;
<span class='lineno'> 504</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;filename: %s, fast: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.filename', title='ImageIO -> None'>filename</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.fast', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.fast', title='?'>fast</a>)
<span class='lineno'> 505</span>     assert isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.filename', title='ImageIO -> None'>filename</a>, str), &quot;Video path must be a string&quot;
<span class='lineno'> 506</span> 
<span class='lineno'> 507</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.cmd', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.cmd', title='{[str] | [{ImageIO -> None | str}]}'>cmd</a> = [im_ffm.get_ffmpeg_exe(), &quot;-i&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.filename', title='ImageIO -> None'>filename</a>, &quot;-map&quot;, &quot;0:v:0&quot;]
<span class='lineno'> 508</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.fast', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.fast', title='?'>fast</a>:
<span class='lineno'> 509</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.cmd', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.cmd', title='{[str] | [{ImageIO -> None | str}]}'>cmd</a>.extend([&quot;-c&quot;, &quot;copy&quot;])
<span class='lineno'> 510</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.cmd', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.cmd', title='{[str] | [{ImageIO -> None | str}]}'>cmd</a>.extend([&quot;-f&quot;, &quot;null&quot;, &quot;-&quot;])
<span class='lineno'> 511</span> 
<span class='lineno'> 512</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;FFMPEG Command: &#39;%s&#39;&quot;, &quot; &quot;.join(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.cmd', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.cmd', title='{[str] | [{ImageIO -> None | str}]}'>cmd</a>))
<span class='lineno'> 513</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.process', title='?'>process</a> = subprocess.Popen(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.cmd', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.cmd', title='{[str] | [{ImageIO -> None | str}]}'>cmd</a>,
<span class='lineno'> 514</span>                                stderr=subprocess.STDOUT,
<span class='lineno'> 515</span>                                stdout=subprocess.PIPE,
<span class='lineno'> 516</span>                                universal_newlines=True)
<span class='lineno'> 517</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.pbar', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.pbar', title='None'>pbar</a> = None
<span class='lineno'> 518</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.duration', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.duration', title='None'>duration</a> = None
<span class='lineno'> 519</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.init_tqdm', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.init_tqdm', title='?'>init_tqdm</a> = False
<span class='lineno'> 520</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.update', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.update', title='int'>update</a> = 0
<span class='lineno'> 521</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frames', title='int'>frames</a> = 0
<span class='lineno'> 522</span>     while True:
<span class='lineno'> 523</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.process', title='?'>process</a>.stdout.readline().strip()
<span class='lineno'> 524</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a> == &quot;&quot; and <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.process', title='?'>process</a>.poll() is not None:
<span class='lineno'> 525</span>             break
<span class='lineno'> 526</span> 
<span class='lineno'> 527</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a>.startswith(&quot;Duration:&quot;):
<span class='lineno'> 528</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Duration line: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a>)
<span class='lineno'> 529</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.idx', title='int'>idx</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a>.find(&quot;Duration:&quot;) + len(&quot;Duration:&quot;)
<span class='lineno'> 530</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.duration', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.duration', title='int'>duration</a> = int(<a href='utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.convert_to_secs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.convert_to_secs', title='() -> {float | int}'>convert_to_secs</a>(*<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.idx', title='int'>idx</a>:].split(&quot;,&quot;, 1)[0].strip().split(&quot;:&quot;)))
<span class='lineno'> 531</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;duration: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.duration', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.duration', title='int'>duration</a>)
<span class='lineno'> 532</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a>.startswith(&quot;frame=&quot;):
<span class='lineno'> 533</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;frame line: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a>)
<span class='lineno'> 534</span>             if not <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.init_tqdm', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.init_tqdm', title='?'>init_tqdm</a>:
<span class='lineno'> 535</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Initializing tqdm&quot;)
<span class='lineno'> 536</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.pbar', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.pbar', title='?'>pbar</a> = tqdm(desc=&quot;Analyzing Video&quot;, leave=False, total=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.duration', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.duration', title='int'>duration</a>, unit=&quot;secs&quot;)
<span class='lineno'> 537</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.init_tqdm', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.init_tqdm', title='?'>init_tqdm</a> = True
<span class='lineno'> 538</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.time_idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.time_idx', title='int'>time_idx</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a>.find(&quot;time=&quot;) + len(&quot;time=&quot;)
<span class='lineno'> 539</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frame_idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frame_idx', title='int'>frame_idx</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a>.find(&quot;frame=&quot;) + len(&quot;frame=&quot;)
<span class='lineno'> 540</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frames', title='int'>frames</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frame_idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frame_idx', title='int'>frame_idx</a>:].strip().split(&quot; &quot;)[0].strip())
<span class='lineno'> 541</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.vid_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.vid_time', title='int'>vid_time</a> = int(<a href='utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.convert_to_secs', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.convert_to_secs', title='() -> {float | int}'>convert_to_secs</a>(*<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.output', title='?'>output</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.time_idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.time_idx', title='int'>time_idx</a>:].split(&quot; &quot;)[0].strip().split(&quot;:&quot;)))
<span class='lineno'> 542</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;frames: %s, vid_time: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frames', title='int'>frames</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.vid_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.vid_time', title='int'>vid_time</a>)
<span class='lineno'> 543</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.prev_update', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.prev_update', title='int'>prev_update</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.update', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.update', title='int'>update</a>
<span class='lineno'> 544</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.update', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.update', title='int'>update</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.vid_time', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.vid_time', title='int'>vid_time</a>
<span class='lineno'> 545</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.pbar', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.pbar', title='None'>pbar</a>.update(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.update', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.update', title='int'>update</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.prev_update', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.prev_update', title='int'>prev_update</a>)
<span class='lineno'> 546</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.pbar', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.pbar', title='None'>pbar</a> is not None:
<span class='lineno'> 547</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.pbar', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.pbar', title='None'>pbar</a>.close()
<span class='lineno'> 548</span>     <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.return_code', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.return_code', title='?'>return_code</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.process', title='?'>process</a>.poll()
<span class='lineno'> 549</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Return code: %s, frames: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.return_code', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.return_code', title='?'>return_code</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frames', title='int'>frames</a>)
<span class='lineno'> 550</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames.frames', title='int'>frames</a>
<span class='lineno'> 551</span> 
<span class='lineno'> 552</span> 
<span class='lineno'> 553</span> class <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO', title='<ImageIO>'>ImageIO</a>():
<span class='lineno'> 554</span>     &quot;&quot;&quot; Perform disk IO for images or videos in a background thread.
<span class='lineno'> 555</span> 
<span class='lineno'> 556</span>     This is the parent thread for :class:`ImagesLoader` and :class:`ImagesSaver` and should not
<span class='lineno'> 557</span>     be called directly.
<span class='lineno'> 558</span> 
<span class='lineno'> 559</span>     Parameters
<span class='lineno'> 560</span>     ----------
<span class='lineno'> 561</span>     path: str or list
<span class='lineno'> 562</span>         The path to load or save images to/from. For loading this can be a folder which contains
<span class='lineno'> 563</span>         images, video file or a list of image files. For saving this must be an existing folder.
<span class='lineno'> 564</span>     queue_size: int
<span class='lineno'> 565</span>         The amount of images to hold in the internal buffer.
<span class='lineno'> 566</span>     args: tuple, optional
<span class='lineno'> 567</span>         The arguments to be passed to the loader or saver thread. Default: ``None``
<span class='lineno'> 568</span> 
<span class='lineno'> 569</span>     See Also
<span class='lineno'> 570</span>     --------
<span class='lineno'> 571</span>     lib.image.ImagesLoader : Background Image Loader inheriting from this class.
<span class='lineno'> 572</span>     lib.image.ImagesSaver : Background Image Saver inheriting from this class.
<span class='lineno'> 573</span>     &quot;&quot;&quot;
<span class='lineno'> 574</span> 
<span class='lineno'> 575</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__', title='? -> ?'>__init__</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', title='ImageIO'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.path', title='?'>pat</a>h, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.queue_size', title='?'>que</a>ue_size, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.args', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.args', title='None'>arg</a>s=None):
<span class='lineno'> 576</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Initializing %s: (path: %s, queue_size: %s, args: %s)&quot;,
<span class='lineno'> 577</span>                      <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', title='ImageIO'>self</a>.__class__.__name__, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.path', title='?'>path</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.queue_size', title='?'>queue_size</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.args', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.args', title='None'>args</a>)
<span class='lineno'> 578</span> 
<span class='lineno'> 579</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', title='ImageIO'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._args', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._args', title='tuple'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._args', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._args', title='tuple'>_args</a></a> = tuple() if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.args', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.args', title='None'>args</a> is None else <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.args', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.args', title='None'>args</a>
<span class='lineno'> 580</span> 
<span class='lineno'> 581</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', title='ImageIO'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._location', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._location', title='?'>_location</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.path', title='?'>path</a>
<span class='lineno'> 582</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', title='ImageIO'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists', title='ImageIO -> None'>_check_location_exists</a>()
<span class='lineno'> 583</span> 
<span class='lineno'> 584</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', title='ImageIO'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._queue', title='None'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._queue', title='None'>_queue</a></a> = <a href='queue_manager.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager.queue_manager', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager.queue_manager', title='QueueManager'>queue_manager</a>.<a href='queue_manager.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager.QueueManager.get_queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.queue_manager.QueueManager.get_queue', title='(QueueManager, ?, int) -> None / (QueueManager, str, int) -> None'>get_queue</a>(name=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', title='ImageIO'>self</a>.__class__.__name__, maxsize=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.queue_size', title='?'>queue_size</a>)
<span class='lineno'> 585</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.__init__.self', title='ImageIO'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', title='MultiThread'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', title='MultiThread'>_thread</a></a> = None
<span class='lineno'> 586</span> 
<span class='lineno'> 587</span>     @property
<span class='lineno'> 588</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location.self', title='ImageIO'>sel</a>f):
<span class='lineno'> 589</span>         &quot;&quot;&quot; str: The folder or video that was passed in as the :attr:`path` parameter. &quot;&quot;&quot;
<span class='lineno'> 590</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location.self', title='ImageIO'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._location', title='?'>_location</a>
<span class='lineno'> 591</span> 
<span class='lineno'> 592</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists', title='ImageIO -> None'>_check_location_exists</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.self', title='ImageIO'>sel</a>f):
<span class='lineno'> 593</span>         &quot;&quot;&quot; Check whether the input location exists.
<span class='lineno'> 594</span> 
<span class='lineno'> 595</span>         Raises
<span class='lineno'> 596</span>         ------
<span class='lineno'> 597</span>         FaceswapError
<span class='lineno'> 598</span>             If the given location does not exist
<span class='lineno'> 599</span>         &quot;&quot;&quot;
<span class='lineno'> 600</span>         if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.self', title='ImageIO'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>, str) and not os.path.exists(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.self', title='ImageIO'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>):
<span class='lineno'> 601</span>             raise FaceswapError(&quot;The location &#39;{}&#39; does not exist&quot;.format(self.location))
<span class='lineno'> 602</span>         if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.self', title='ImageIO'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>, (list, tuple)) and not all(os.path.exists(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.location', title='?'>location</a>)
<span class='lineno'> 603</span>                                                                 for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.location', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.location', title='?'>location</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._check_location_exists.self', title='ImageIO'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>):
<span class='lineno'> 604</span>             raise FaceswapError(&quot;Not all locations in the input list exist&quot;)
<span class='lineno'> 605</span> 
<span class='lineno'> 606</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread', title='ImageIO -> None / ImagesSaver -> None / ImagesLoader -> None'>_set_thread</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', title='{ImageIO | ImagesLoader | ImagesSaver}'>sel</a>f):
<span class='lineno'> 607</span>         &quot;&quot;&quot; Set the background thread for the load and save iterators and launch it. &quot;&quot;&quot;
<span class='lineno'> 608</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Setting thread&quot;)
<span class='lineno'> 609</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', title='{ImageIO | ImagesLoader | ImagesSaver}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', title='MultiThread'>_thread</a> is not None and <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', title='{ImageIO | ImagesLoader | ImagesSaver}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', title='MultiThread'>_thread</a>.is_alive():
<span class='lineno'> 610</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Thread pre-exists and is alive: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', title='{ImageIO | ImagesLoader | ImagesSaver}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', title='MultiThread'>_thread</a>)
<span class='lineno'> 611</span>             return
<span class='lineno'> 612</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', title='{ImageIO | ImagesLoader | ImagesSaver}'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._thread', title='MultiThread'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._thread', title='MultiThread'>_thread</a></a> = <a href='multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread', title='<MultiThread>'>MultiThread</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', title='{ImageIO | ImagesLoader | ImagesSaver}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process', title='{(ImageIO, ?) -> None | (ImagesLoader, ?) -> None | (ImagesSaver, ?) -> None}'>_process</a>,
<span class='lineno'> 613</span>                                    <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', title='{ImageIO | ImagesLoader | ImagesSaver}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._queue', title='None'>_queue</a>,
<span class='lineno'> 614</span>                                    name=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', title='{ImageIO | ImagesLoader | ImagesSaver}'>self</a>.__class__.__name__,
<span class='lineno'> 615</span>                                    thread_count=1)
<span class='lineno'> 616</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Set thread: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', title='{ImageIO | ImagesLoader | ImagesSaver}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._thread', title='MultiThread'>_thread</a>)
<span class='lineno'> 617</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread.self', title='{ImageIO | ImagesLoader | ImagesSaver}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._thread', title='MultiThread'>_thread</a>.<a href='multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.start', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.start', title='BackgroundGenerator -> None / MultiThread -> None'>start</a>()
<span class='lineno'> 618</span> 
<span class='lineno'> 619</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._process', title='(ImageIO, ?) -> None'>_process</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._process.self', title='ImageIO'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._process.queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._process.queue', title='?'>que</a>ue):
<span class='lineno'> 620</span>         &quot;&quot;&quot; Image IO process to be run in a thread. Override for loader/saver process.
<span class='lineno'> 621</span> 
<span class='lineno'> 622</span>         Parameters
<span class='lineno'> 623</span>         ----------
<span class='lineno'> 624</span>         queue: queue.Queue()
<span class='lineno'> 625</span>             The ImageIO Queue
<span class='lineno'> 626</span>         &quot;&quot;&quot;
<span class='lineno'> 627</span>         raise NotImplementedError
<span class='lineno'> 628</span> 
<span class='lineno'> 629</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close', title='ImageIO -> None / ImagesLoader -> None'>close</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close.self', title='{ImageIO | ImagesLoader}'>sel</a>f):
<span class='lineno'> 630</span>         &quot;&quot;&quot; Closes down and joins the internal threads &quot;&quot;&quot;
<span class='lineno'> 631</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Received Close&quot;)
<span class='lineno'> 632</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close.self', title='{ImageIO | ImagesLoader}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._thread', title='MultiThread'>_thread</a> is not None:
<span class='lineno'> 633</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close.self', title='{ImageIO | ImagesLoader}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._thread', title='MultiThread'>_thread</a>.<a href='multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.join', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.join', title='MultiThread -> None'>join</a>()
<span class='lineno'> 634</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close.self', title='{ImageIO | ImagesLoader}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._thread', title='MultiThread'>_thread</a> = None
<span class='lineno'> 635</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Closed&quot;)
<span class='lineno'> 636</span> 
<span class='lineno'> 637</span> 
<span class='lineno'> 638</span> class <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader', title='<ImagesLoader>'>ImagesLoader</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO', title='<ImageIO>'>ImageIO</a>):
<span class='lineno'> 639</span>     &quot;&quot;&quot; Perform image loading from a folder of images or a video.
<span class='lineno'> 640</span> 
<span class='lineno'> 641</span>     Images will be loaded and returned in the order that they appear in the folder, or in the video
<span class='lineno'> 642</span>     to ensure deterministic ordering. Loading occurs in a background thread, caching 8 images at a
<span class='lineno'> 643</span>     time so that other processes do not need to wait on disk reads.
<span class='lineno'> 644</span> 
<span class='lineno'> 645</span>     See also :class:`ImageIO` for additional attributes.
<span class='lineno'> 646</span> 
<span class='lineno'> 647</span>     Parameters
<span class='lineno'> 648</span>     ----------
<span class='lineno'> 649</span>     path: str or list
<span class='lineno'> 650</span>         The path to load images from. This can be a folder which contains images a video file or a
<span class='lineno'> 651</span>         list of image files.
<span class='lineno'> 652</span>     queue_size: int, optional
<span class='lineno'> 653</span>         The amount of images to hold in the internal buffer. Default: 8.
<span class='lineno'> 654</span>     fast_count: bool, optional
<span class='lineno'> 655</span>         When loading from video, the video needs to be parsed frame by frame to get an accurate
<span class='lineno'> 656</span>         count. This can be done quite quickly without guaranteed accuracy, or slower with
<span class='lineno'> 657</span>         guaranteed accuracy. Set to ``True`` to count quickly, or ``False`` to count slower
<span class='lineno'> 658</span>         but accurately. Default: ``True``.
<span class='lineno'> 659</span>     skip_list: list, optional
<span class='lineno'> 660</span>         Optional list of frame/image indices to not load. Any indices provided here will be skipped
<span class='lineno'> 661</span>         when executing the :func:`load` function from the given location. Default: ``None``
<span class='lineno'> 662</span>     count: int, optional
<span class='lineno'> 663</span>         If the number of images that the loader will encounter is already known, it can be passed
<span class='lineno'> 664</span>         in here to skip the image counting step, which can save time at launch. Set to ``None`` if
<span class='lineno'> 665</span>         the count is not already known. Default: ``None``
<span class='lineno'> 666</span> 
<span class='lineno'> 667</span>     Examples
<span class='lineno'> 668</span>     --------
<span class='lineno'> 669</span>     Loading from a video file:
<span class='lineno'> 670</span> 
<span class='lineno'> 671</span>     &gt;&gt;&gt; loader = ImagesLoader(&#39;/path/to/video.mp4&#39;)
<span class='lineno'> 672</span>     &gt;&gt;&gt; for filename, image in loader.load():
<span class='lineno'> 673</span>     &gt;&gt;&gt;     &lt;do processing&gt;
<span class='lineno'> 674</span>     &quot;&quot;&quot;
<span class='lineno'> 675</span> 
<span class='lineno'> 676</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__', title='? -> ?'>__init__</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', title='ImagesLoader'>sel</a>f,
<span class='lineno'> 677</span>                  <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.path', title='?'>pat</a>h,
<span class='lineno'> 678</span>                  <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.queue_size', title='int'>que</a>ue_size=8,
<span class='lineno'> 679</span>                  <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.fast_count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.fast_count', title='?'>fas</a>t_count=True,
<span class='lineno'> 680</span>                  <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.skip_list', title='None'>ski</a>p_list=None,
<span class='lineno'> 681</span>                  <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.count', title='None'>cou</a>nt=None):
<span class='lineno'> 682</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Initializing %s: (path: %s, queue_size: %s, fast_count: %s, skip_list: %s, &quot;
<span class='lineno'> 683</span>                      &quot;count: %s)&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', title='ImagesLoader'>self</a>.__class__.__name__, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.path', title='?'>path</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.queue_size', title='int'>queue_size</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.fast_count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.fast_count', title='?'>fast_count</a>,
<span class='lineno'> 684</span>                      <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.skip_list', title='None'>skip_list</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.count', title='None'>count</a>)
<span class='lineno'> 685</span> 
<span class='lineno'> 686</span>         super().__init__(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.path', title='?'>path</a>, queue_size=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.queue_size', title='int'>queue_size</a>)
<span class='lineno'> 687</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', title='ImagesLoader'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', title='?'>_skip_list</a></a> = set() if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.skip_list', title='None'>skip_list</a> is None else set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.skip_list', title='None'>skip_list</a>)
<span class='lineno'> 688</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', title='None'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', title='None'>_is_video</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video', title='ImagesLoader -> None'>_check_for_video</a>()
<span class='lineno'> 689</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._fps', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._fps', title='float'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._fps', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._fps', title='float'>_fps</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps', title='ImagesLoader -> float'>_get_fps</a>()
<span class='lineno'> 690</span> 
<span class='lineno'> 691</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', title='ImagesLoader'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', title='None'>_count</a></a> = None
<span class='lineno'> 692</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', title='ImagesLoader'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', title='{ImageIO -> None | [str] | list}'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', title='None'>_file_list</a></a> = None
<span class='lineno'> 693</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist', title='(ImagesLoader, ?, ?) -> None / (ImagesLoader, ?, None) -> None'>_get_count_and_filelist</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.fast_count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.fast_count', title='?'>fast_count</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.__init__.count', title='None'>count</a>)
<span class='lineno'> 694</span> 
<span class='lineno'> 695</span>     @property
<span class='lineno'> 696</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count', title='ImagesLoader -> int'>count</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count.self', title='ImagesLoader'>sel</a>f):
<span class='lineno'> 697</span>         &quot;&quot;&quot; int: The number of images or video frames in the source location. This count includes
<span class='lineno'> 698</span>         any files that will ultimately be skipped if a :attr:`skip_list` has been provided. See
<span class='lineno'> 699</span>         also: :attr:`process_count`&quot;&quot;&quot;
<span class='lineno'> 700</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', title='int'>_count</a>
<span class='lineno'> 701</span> 
<span class='lineno'> 702</span>     @property
<span class='lineno'> 703</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.process_count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.process_count', title='ImagesLoader -> None'>process_count</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.process_count.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.process_count.self', title='ImagesLoader'>sel</a>f):
<span class='lineno'> 704</span>         &quot;&quot;&quot; int: The number of images or video frames to be processed (IE the total count less
<span class='lineno'> 705</span>         items that are to be skipped from the :attr:`skip_list`)&quot;&quot;&quot;
<span class='lineno'> 706</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.process_count.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.process_count.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', title='None'>_count</a> - len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.process_count.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.process_count.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', title='?'>_skip_list</a>)
<span class='lineno'> 707</span> 
<span class='lineno'> 708</span>     @property
<span class='lineno'> 709</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.is_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.is_video', title='ImagesLoader -> None'>is_video</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.is_video.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.is_video.self', title='ImagesLoader'>sel</a>f):
<span class='lineno'> 710</span>         &quot;&quot;&quot; bool: ``True`` if the input is a video, ``False`` if it is not &quot;&quot;&quot;
<span class='lineno'> 711</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.is_video.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.is_video.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', title='None'>_is_video</a>
<span class='lineno'> 712</span> 
<span class='lineno'> 713</span>     @property
<span class='lineno'> 714</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.fps', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.fps', title='ImagesLoader -> float'>fps</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.fps.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.fps.self', title='ImagesLoader'>sel</a>f):
<span class='lineno'> 715</span>         &quot;&quot;&quot; float: For an input folder of images, this will always return 25fps. If the input is a
<span class='lineno'> 716</span>         video, then the fps of the video will be returned. &quot;&quot;&quot;
<span class='lineno'> 717</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.fps.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.fps.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._fps', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._fps', title='float'>_fps</a>
<span class='lineno'> 718</span> 
<span class='lineno'> 719</span>     @property
<span class='lineno'> 720</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', title='ImagesLoader -> None'>file_list</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list.self', title='ImagesLoader'>sel</a>f):
<span class='lineno'> 721</span>         &quot;&quot;&quot; list: A full list of files in the source location. This includes any files that will
<span class='lineno'> 722</span>         ultimately be skipped if a :attr:`skip_list` has been provided. If the input is a video
<span class='lineno'> 723</span>         then this is a list of dummy filenames as corresponding to an alignments file &quot;&quot;&quot;
<span class='lineno'> 724</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', title='None'>_file_list</a>
<span class='lineno'> 725</span> 
<span class='lineno'> 726</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list', title='(ImagesLoader, ?) -> None / (ImagesLoader, [?]) -> None / (ImagesLoader, None) -> None'>add_skip_list</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list.self', title='ImagesLoader'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list.skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list.skip_list', title='[?]'>ski</a>p_list):
<span class='lineno'> 727</span>         &quot;&quot;&quot; Add a skip list to this :class:`ImagesLoader`
<span class='lineno'> 728</span> 
<span class='lineno'> 729</span>         Parameters
<span class='lineno'> 730</span>         ----------
<span class='lineno'> 731</span>         skip_list: list
<span class='lineno'> 732</span>             A list of indices corresponding to the frame indices that should be skipped by the
<span class='lineno'> 733</span>             :func:`load` function.
<span class='lineno'> 734</span>         &quot;&quot;&quot;
<span class='lineno'> 735</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list.skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list.skip_list', title='[?]'>skip_list</a>)
<span class='lineno'> 736</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', title='?'>_skip_list</a> = set(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list.skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.add_skip_list.skip_list', title='[?]'>skip_list</a>)
<span class='lineno'> 737</span> 
<span class='lineno'> 738</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video', title='ImagesLoader -> None'>_check_for_video</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.self', title='ImagesLoader'>sel</a>f):
<span class='lineno'> 739</span>         &quot;&quot;&quot; Check whether the input is a video
<span class='lineno'> 740</span> 
<span class='lineno'> 741</span>         Returns
<span class='lineno'> 742</span>         -------
<span class='lineno'> 743</span>         bool: &#39;True&#39; if input is a video &#39;False&#39; if it is a folder.
<span class='lineno'> 744</span> 
<span class='lineno'> 745</span>         Raises
<span class='lineno'> 746</span>         ------
<span class='lineno'> 747</span>         FaceswapError
<span class='lineno'> 748</span>             If the given location is a file and does not have a valid video extension.
<span class='lineno'> 749</span> 
<span class='lineno'> 750</span>         &quot;&quot;&quot;
<span class='lineno'> 751</span>         if os.path.isdir(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>):
<span class='lineno'> 752</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.retval', title='?'>retval</a> = False
<span class='lineno'> 753</span>         elif os.path.splitext(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>)[1].lower() in <a href='utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils._video_extensions', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils._video_extensions', title='[str]'>_video_extensions</a>:
<span class='lineno'> 754</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.retval', title='?'>retval</a> = True
<span class='lineno'> 755</span>         else:
<span class='lineno'> 756</span>             raise FaceswapError(&quot;The input file &#39;{}&#39; is not a valid video&quot;.format(self.location))
<span class='lineno'> 757</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Input &#39;%s&#39; is_video: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.retval', title='?'>retval</a>)
<span class='lineno'> 758</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._check_for_video.retval', title='?'>retval</a>
<span class='lineno'> 759</span> 
<span class='lineno'> 760</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps', title='ImagesLoader -> float'>_get_fps</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.self', title='ImagesLoader'>sel</a>f):
<span class='lineno'> 761</span>         &quot;&quot;&quot; Get the Frames per Second.
<span class='lineno'> 762</span> 
<span class='lineno'> 763</span>         If the input is a folder of images than 25.0 will be returned, as it is not possible to
<span class='lineno'> 764</span>         calculate the fps just from frames alone. For video files the correct FPS will be returned.
<span class='lineno'> 765</span> 
<span class='lineno'> 766</span>         Returns
<span class='lineno'> 767</span>         -------
<span class='lineno'> 768</span>         float: The Frames per Second of the input sources
<span class='lineno'> 769</span>         &quot;&quot;&quot;
<span class='lineno'> 770</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', title='None'>_is_video</a>:
<span class='lineno'> 771</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.reader', title='?'>reader</a> = imageio.get_reader(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>, &quot;ffmpeg&quot;)
<span class='lineno'> 772</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.retval', title='?'>retval</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.reader', title='?'>reader</a>.get_meta_data()[&quot;fps&quot;]
<span class='lineno'> 773</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.reader', title='?'>reader</a>.close()
<span class='lineno'> 774</span>         else:
<span class='lineno'> 775</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.retval', title='float'>retval</a> = 25.0
<span class='lineno'> 776</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.retval', title='float'>retval</a>)
<span class='lineno'> 777</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_fps.retval', title='float'>retval</a>
<span class='lineno'> 778</span> 
<span class='lineno'> 779</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist', title='(ImagesLoader, ?, ?) -> None / (ImagesLoader, ?, None) -> None'>_get_count_and_filelist</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.fast_count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.fast_count', title='?'>fas</a>t_count, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.count', title='None'>cou</a>nt):
<span class='lineno'> 780</span>         &quot;&quot;&quot; Set the count of images to be processed and set the file list
<span class='lineno'> 781</span> 
<span class='lineno'> 782</span>             If the input is a video, a dummy file list is created for checking against an
<span class='lineno'> 783</span>             alignments file, otherwise it will be a list of full filenames.
<span class='lineno'> 784</span> 
<span class='lineno'> 785</span>         Parameters
<span class='lineno'> 786</span>         ----------
<span class='lineno'> 787</span>         fast_count: bool
<span class='lineno'> 788</span>             When loading from video, the video needs to be parsed frame by frame to get an accurate
<span class='lineno'> 789</span>             count. This can be done quite quickly without guaranteed accuracy, or slower with
<span class='lineno'> 790</span>             guaranteed accuracy. Set to ``True`` to count quickly, or ``False`` to count slower
<span class='lineno'> 791</span>             but accurately.
<span class='lineno'> 792</span>         count: int
<span class='lineno'> 793</span>             The number of images that the loader will encounter if already known, otherwise
<span class='lineno'> 794</span>             ``None``
<span class='lineno'> 795</span>         &quot;&quot;&quot;
<span class='lineno'> 796</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', title='None'>_is_video</a>:
<span class='lineno'> 797</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', title='int'>_count</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.count_frames', title='(ImageIO -> None, ?) -> int / (?, ?) -> int'>count_frames</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>,
<span class='lineno'> 798</span>                                            fast=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.fast_count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.fast_count', title='?'>fast_count</a>)) if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.count', title='None'>count</a> is None else <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.count', title='None'>count</a>
<span class='lineno'> 799</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', title='{ImageIO -> None | [str] | list}'>_file_list</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename', title='(SingleFrameLoader, ?) -> str / (ImagesLoader, int) -> str / (ImagesLoader, ?) -> str'>_dummy_video_framename</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.i', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.i', title='int'>i</a>) for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.i', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.i', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.i', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.i', title='int'>i</a></a> in range(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count', title='ImagesLoader -> int'>count</a>)]
<span class='lineno'> 800</span>         else:
<span class='lineno'> 801</span>             if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>, (list, tuple)):
<span class='lineno'> 802</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', title='{ImageIO -> None | [str] | list}'>_file_list</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>
<span class='lineno'> 803</span>             else:
<span class='lineno'> 804</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._file_list', title='{ImageIO -> None | [str] | list}'>_file_list</a> = <a href='utils.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.get_image_paths', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.utils.get_image_paths', title='None -> list / ? -> list / ImageIO -> None -> list'>get_image_paths</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>)
<span class='lineno'> 805</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._count', title='int'>_count</a> = len(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', title='ImagesLoader -> None'>file_list</a>) if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.count', title='None'>count</a> is None else <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.count', title='None'>count</a>
<span class='lineno'> 806</span> 
<span class='lineno'> 807</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;count: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.count', title='ImagesLoader -> int'>count</a>)
<span class='lineno'> 808</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;filelist: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._get_count_and_filelist.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', title='ImagesLoader -> None'>file_list</a>)
<span class='lineno'> 809</span> 
<span class='lineno'> 810</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process', title='(ImagesLoader, ?) -> None'>_process</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.self', title='ImagesLoader'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.queue', title='?'>que</a>ue):
<span class='lineno'> 811</span>         &quot;&quot;&quot; The load thread.
<span class='lineno'> 812</span> 
<span class='lineno'> 813</span>         Loads from a folder of images or from a video and puts to a queue
<span class='lineno'> 814</span> 
<span class='lineno'> 815</span>         Parameters
<span class='lineno'> 816</span>         ----------
<span class='lineno'> 817</span>         queue: queue.Queue()
<span class='lineno'> 818</span>             The ImageIO Queue
<span class='lineno'> 819</span>         &quot;&quot;&quot;
<span class='lineno'> 820</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.iterator', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.iterator', title='{ImagesLoader -> None | ImagesLoader -> None}'>iterator</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video', title='ImagesLoader -> None'>_from_video</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._is_video', title='None'>_is_video</a> else <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder', title='ImagesLoader -> None'>_from_folder</a>
<span class='lineno'> 821</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Load iterator: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.iterator', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.iterator', title='{ImagesLoader -> None | ImagesLoader -> None}'>iterator</a>)
<span class='lineno'> 822</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.retval', title='?'>retval</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.iterator', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.iterator', title='{ImagesLoader -> None | ImagesLoader -> None}'>iterator</a>():
<span class='lineno'> 823</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.filename', title='?'>filename</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.image', title='?'>image</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.retval', title='?'>retval</a>[:2]
<span class='lineno'> 824</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.image', title='?'>image</a> is None or (not <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.image', title='?'>image</a>.any() and <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.image', title='?'>image</a>.ndim not in (2, 3)):
<span class='lineno'> 825</span>                 # All black frames will return not numpy.any() so check dims too
<span class='lineno'> 826</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.warning(&quot;Unable to open image. Skipping: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.filename', title='?'>filename</a>)
<span class='lineno'> 827</span>                 continue
<span class='lineno'> 828</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Putting to queue: %s&quot;, [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.v', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.v', title='?'>v</a>.shape if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.v', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.v', title='?'>v</a>, np.ndarray) else <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.v', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.v', title='?'>v</a>
<span class='lineno'> 829</span>                                                   for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.v', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.v', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.v', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.v', title='?'>v</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.retval', title='?'>retval</a>])
<span class='lineno'> 830</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.queue', title='?'>queue</a>.put(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.retval', title='?'>retval</a>)
<span class='lineno'> 831</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Putting EOF&quot;)
<span class='lineno'> 832</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._process.queue', title='?'>queue</a>.put(&quot;EOF&quot;)
<span class='lineno'> 833</span> 
<span class='lineno'> 834</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video', title='ImagesLoader -> None'>_from_video</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.self', title='ImagesLoader'>sel</a>f):
<span class='lineno'> 835</span>         &quot;&quot;&quot; Generator for loading frames from a video
<span class='lineno'> 836</span> 
<span class='lineno'> 837</span>         Yields
<span class='lineno'> 838</span>         ------
<span class='lineno'> 839</span>         filename: str
<span class='lineno'> 840</span>             The dummy filename of the loaded video frame.
<span class='lineno'> 841</span>         image: numpy.ndarray
<span class='lineno'> 842</span>             The loaded video frame.
<span class='lineno'> 843</span>         &quot;&quot;&quot;
<span class='lineno'> 844</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Loading frames from video: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>)
<span class='lineno'> 845</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.reader', title='?'>reader</a> = imageio.get_reader(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>, &quot;ffmpeg&quot;)
<span class='lineno'> 846</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.idx', title='?'>idx</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.frame', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.frame', title='?'>frame</a> in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.reader', title='?'>reader</a>):
<span class='lineno'> 847</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.idx', title='?'>idx</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', title='?'>_skip_list</a>:
<span class='lineno'> 848</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Skipping frame %s due to skip list&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.idx', title='?'>idx</a>)
<span class='lineno'> 849</span>                 continue
<span class='lineno'> 850</span>             # Convert to BGR for cv2 compatibility
<span class='lineno'> 851</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.frame', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.frame', title='?'>frame</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.frame', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.frame', title='?'>frame</a>[:, :, ::-1]
<span class='lineno'> 852</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.filename', title='str'>filename</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename', title='(SingleFrameLoader, ?) -> str / (ImagesLoader, int) -> str / (ImagesLoader, ?) -> str'>_dummy_video_framename</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.idx', title='?'>idx</a>)
<span class='lineno'> 853</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Loading video frame: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.filename', title='str'>filename</a>)
<span class='lineno'> 854</span>             yield <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.filename', title='str'>filename</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.frame', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.frame', title='?'>frame</a>
<span class='lineno'> 855</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_video.reader', title='?'>reader</a>.close()
<span class='lineno'> 856</span> 
<span class='lineno'> 857</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename', title='(SingleFrameLoader, ?) -> str / (ImagesLoader, int) -> str / (ImagesLoader, ?) -> str'>_dummy_video_framename</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.self', title='{ImagesLoader | SingleFrameLoader}'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.index', title='int'>ind</a>ex):
<span class='lineno'> 858</span>         &quot;&quot;&quot; Return a dummy filename for video files
<span class='lineno'> 859</span> 
<span class='lineno'> 860</span>         Parameters
<span class='lineno'> 861</span>         ----------
<span class='lineno'> 862</span>         index: int
<span class='lineno'> 863</span>             The index number for the frame in the video file
<span class='lineno'> 864</span> 
<span class='lineno'> 865</span>         Notes
<span class='lineno'> 866</span>         -----
<span class='lineno'> 867</span>         Indexes start at 0, frame numbers start at 1, so index is incremented by 1
<span class='lineno'> 868</span>         when creating the filename
<span class='lineno'> 869</span> 
<span class='lineno'> 870</span>         Returns
<span class='lineno'> 871</span>         -------
<span class='lineno'> 872</span>         str: A dummied filename for a video frame &quot;&quot;&quot;
<span class='lineno'> 873</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.vidname', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.vidname', title='str'>vidname</a> = os.path.splitext(os.path.basename(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.self', title='{ImagesLoader | SingleFrameLoader}'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>))[0]
<span class='lineno'> 874</span>         return &quot;{}_{:06d}.png&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.vidname', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.vidname', title='str'>vidname</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename.index', title='int'>index</a> + 1)
<span class='lineno'> 875</span> 
<span class='lineno'> 876</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder', title='ImagesLoader -> None'>_from_folder</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.self', title='ImagesLoader'>sel</a>f):
<span class='lineno'> 877</span>         &quot;&quot;&quot; Generator for loading images from a folder
<span class='lineno'> 878</span> 
<span class='lineno'> 879</span>         Yields
<span class='lineno'> 880</span>         ------
<span class='lineno'> 881</span>         filename: str
<span class='lineno'> 882</span>             The filename of the loaded image.
<span class='lineno'> 883</span>         image: numpy.ndarray
<span class='lineno'> 884</span>             The loaded image.
<span class='lineno'> 885</span>         &quot;&quot;&quot;
<span class='lineno'> 886</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Loading frames from folder: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>)
<span class='lineno'> 887</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.idx', title='?'>idx</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.filename', title='?'>filename</a> in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', title='ImagesLoader -> None'>file_list</a>):
<span class='lineno'> 888</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.idx', title='?'>idx</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._skip_list', title='?'>_skip_list</a>:
<span class='lineno'> 889</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Skipping frame %s due to skip list&quot;)
<span class='lineno'> 890</span>                 continue
<span class='lineno'> 891</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.image_read', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.image_read', title='(?, ?)'>image_read</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', title='(str, ?, ?) -> (?, ?) / (<list>, ?, ?) -> (?, ?) / (list, ?, ?) -> (?, ?) / (?, ?, ?) -> (?, ?)'>read_image</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.filename', title='?'>filename</a>, raise_error=False, with_hash=False)
<span class='lineno'> 892</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.retval', title='(?, (?, ?))'>retval</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.filename', title='?'>filename</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.image_read', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.image_read', title='(?, ?)'>image_read</a>
<span class='lineno'> 893</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.retval', title='(?, (?, ?))'>retval</a>[1] is None:
<span class='lineno'> 894</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.warning(&quot;Frame not loaded: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.filename', title='?'>filename</a>)
<span class='lineno'> 895</span>                 continue
<span class='lineno'> 896</span>             yield <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._from_folder.retval', title='(?, (?, ?))'>retval</a>
<span class='lineno'> 897</span> 
<span class='lineno'> 898</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load', title='ImagesLoader -> ?'>load</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.self', title='ImagesLoader'>sel</a>f):
<span class='lineno'> 899</span>         &quot;&quot;&quot; Generator for loading images from the given :attr:`location`
<span class='lineno'> 900</span> 
<span class='lineno'> 901</span>         If :class:`FacesLoader` is in use then the sha1 hash of the image is added as the final
<span class='lineno'> 902</span>         item in the output `tuple`.
<span class='lineno'> 903</span> 
<span class='lineno'> 904</span>         Yields
<span class='lineno'> 905</span>         ------
<span class='lineno'> 906</span>         filename: str
<span class='lineno'> 907</span>             The filename of the loaded image.
<span class='lineno'> 908</span>         image: numpy.ndarray
<span class='lineno'> 909</span>             The loaded image.
<span class='lineno'> 910</span>         sha1_hash: str, (:class:`FacesLoader` only)
<span class='lineno'> 911</span>             The sha1 hash of the loaded image. Only yielded if :class:`FacesLoader` is being
<span class='lineno'> 912</span>             executed.
<span class='lineno'> 913</span>         &quot;&quot;&quot;
<span class='lineno'> 914</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Initializing Load Generator&quot;)
<span class='lineno'> 915</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread', title='ImageIO -> None / ImagesSaver -> None / ImagesLoader -> None'>_set_thread</a>()
<span class='lineno'> 916</span>         while True:
<span class='lineno'> 917</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._thread', title='MultiThread'>_thread</a>.<a href='multithreading.py.html#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.check_and_raise_error', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.multithreading.MultiThread.check_and_raise_error', title='MultiThread -> None / BackgroundGenerator -> None'>check_and_raise_error</a>()
<span class='lineno'> 918</span>             try:
<span class='lineno'> 919</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.retval', title='?'>retval</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.self', title='ImagesLoader'>self</a>._queue.get(True, 1)
<span class='lineno'> 920</span>             except QueueEmpty:
<span class='lineno'> 921</span>                 continue
<span class='lineno'> 922</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.retval', title='?'>retval</a> == &quot;EOF&quot;:
<span class='lineno'> 923</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Got EOF&quot;)
<span class='lineno'> 924</span>                 break
<span class='lineno'> 925</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Yielding: %s&quot;, [<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.v', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.v', title='?'>v</a>.shape if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.v', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.v', title='?'>v</a>, np.ndarray) else <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.v', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.v', title='?'>v</a>
<span class='lineno'> 926</span>                                           for <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.v', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.v', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.v', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.v', title='?'>v</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.retval', title='?'>retval</a>])
<span class='lineno'> 927</span>             yield <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.retval', title='?'>retval</a>
<span class='lineno'> 928</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Closing Load Generator&quot;)
<span class='lineno'> 929</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.load.self', title='ImagesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.close', title='ImageIO -> None / ImagesLoader -> None'>close</a>()
<span class='lineno'> 930</span> 
<span class='lineno'> 931</span> 
<span class='lineno'> 932</span> class <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader', title='<FacesLoader>'>FacesLoader</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader', title='<ImagesLoader>'>ImagesLoader</a>):
<span class='lineno'> 933</span>     &quot;&quot;&quot; Loads faces from a faces folder along with the face&#39;s hash.
<span class='lineno'> 934</span> 
<span class='lineno'> 935</span>     Examples
<span class='lineno'> 936</span>     --------
<span class='lineno'> 937</span>     Loading faces with their sha1 hash:
<span class='lineno'> 938</span> 
<span class='lineno'> 939</span>     &gt;&gt;&gt; loader = FacesLoader(&#39;/path/to/faces/folder&#39;)
<span class='lineno'> 940</span>     &gt;&gt;&gt; for filename, face, sha1_hash in loader.load():
<span class='lineno'> 941</span>     &gt;&gt;&gt;     &lt;do processing&gt;
<span class='lineno'> 942</span>     &quot;&quot;&quot;
<span class='lineno'> 943</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__', title='? -> ?'>__init__</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.self', title='FacesLoader'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.path', title='?'>pat</a>h, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.skip_list', title='None'>ski</a>p_list=None, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.count', title='None'>cou</a>nt=None):
<span class='lineno'> 944</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Initializing %s: (path: %s, count: %s)&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.self', title='FacesLoader'>self</a>.__class__.__name__,
<span class='lineno'> 945</span>                      <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.path', title='?'>path</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.count', title='None'>count</a>)
<span class='lineno'> 946</span>         super().__init__(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.path', title='?'>path</a>, queue_size=8, skip_list=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.skip_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.skip_list', title='None'>skip_list</a>, count=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader.__init__.count', title='None'>count</a>)
<span class='lineno'> 947</span> 
<span class='lineno'> 948</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder', title='FacesLoader -> None'>_from_folder</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.self', title='FacesLoader'>sel</a>f):
<span class='lineno'> 949</span>         &quot;&quot;&quot; Generator for loading images from a folder
<span class='lineno'> 950</span>         Faces will only ever be loaded from a folder, so this is the only function requiring
<span class='lineno'> 951</span>         an override
<span class='lineno'> 952</span> 
<span class='lineno'> 953</span>         Yields
<span class='lineno'> 954</span>         ------
<span class='lineno'> 955</span>         filename: str
<span class='lineno'> 956</span>             The filename of the loaded image.
<span class='lineno'> 957</span>         image: numpy.ndarray
<span class='lineno'> 958</span>             The loaded image.
<span class='lineno'> 959</span>         sha1_hash: str
<span class='lineno'> 960</span>             The sha1 hash of the loaded image.
<span class='lineno'> 961</span>         &quot;&quot;&quot;
<span class='lineno'> 962</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Loading images from folder: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.self', title='FacesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>)
<span class='lineno'> 963</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.idx', title='?'>idx</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.filename', title='?'>filename</a> in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.self', title='FacesLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', title='ImagesLoader -> None'>file_list</a>):
<span class='lineno'> 964</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.idx', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.idx', title='?'>idx</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.self', title='FacesLoader'>self</a>._skip_list:
<span class='lineno'> 965</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Skipping face %s due to skip list&quot;)
<span class='lineno'> 966</span>                 continue
<span class='lineno'> 967</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.image_read', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.image_read', title='(?, ?)'>image_read</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', title='(str, ?, ?) -> (?, ?) / (<list>, ?, ?) -> (?, ?) / (list, ?, ?) -> (?, ?) / (?, ?, ?) -> (?, ?)'>read_image</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.filename', title='?'>filename</a>, raise_error=False, with_hash=True)
<span class='lineno'> 968</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.retval', title='(?, (?, ?))'>retval</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.filename', title='?'>filename</a>, *<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.image_read', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.image_read', title='(?, ?)'>image_read</a>
<span class='lineno'> 969</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.retval', title='(?, (?, ?))'>retval</a>[1] is None:
<span class='lineno'> 970</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.warning(&quot;Face not loaded: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.filename', title='?'>filename</a>)
<span class='lineno'> 971</span>                 continue
<span class='lineno'> 972</span>             yield <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.retval', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.FacesLoader._from_folder.retval', title='(?, (?, ?))'>retval</a>
<span class='lineno'> 973</span> 
<span class='lineno'> 974</span> 
<span class='lineno'> 975</span> class <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader', title='<SingleFrameLoader>'>SingleFrameLoader</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader', title='<ImagesLoader>'>ImagesLoader</a>):
<span class='lineno'> 976</span>     &quot;&quot;&quot; Allows direct access to a frame by filename or frame index.
<span class='lineno'> 977</span> 
<span class='lineno'> 978</span>     As we are interested in instant access to frames, there is no requirement to process in a
<span class='lineno'> 979</span>     background thread, as either way we need to wait for the frame to load.
<span class='lineno'> 980</span> 
<span class='lineno'> 981</span>     Parameters
<span class='lineno'> 982</span>     ----------
<span class='lineno'> 983</span>     video_meta_data: dict, optional
<span class='lineno'> 984</span>         Existing video meta information containing the pts_time and iskey flags for the given
<span class='lineno'> 985</span>         video. Used in conjunction with single_frame_reader for faster seeks. Providing this means
<span class='lineno'> 986</span>         that the video does not need to be scanned again. Set to ``None`` if the video is to be
<span class='lineno'> 987</span>         scanned. Default: ``None``
<span class='lineno'> 988</span>      &quot;&quot;&quot;
<span class='lineno'> 989</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__', title='? -> ?'>__init__</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.self', title='SingleFrameLoader'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.path', title='?'>pat</a>h, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.video_meta_data', title='None'>vid</a>eo_meta_data=None):
<span class='lineno'> 990</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Initializing %s: (path: %s, video_meta_data: %s)&quot;,
<span class='lineno'> 991</span>                      <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.self', title='SingleFrameLoader'>self</a>.__class__.__name__, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.path', title='?'>path</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.video_meta_data', title='None'>video_meta_data</a>)
<span class='lineno'> 992</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.self', title='SingleFrameLoader'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', title='dict'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', title='dict'>_video_meta_data</a></a> = dict() if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.video_meta_data', title='None'>video_meta_data</a> is None else <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.video_meta_data', title='None'>video_meta_data</a>
<span class='lineno'> 993</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', title='None'><a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', title='None'>_reader</a></a> = None
<span class='lineno'> 994</span>         super().__init__(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.__init__.path', title='?'>path</a>, queue_size=1, fast_count=False)
<span class='lineno'> 995</span> 
<span class='lineno'> 996</span>     @property
<span class='lineno'> 997</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.video_meta_data', title='SingleFrameLoader -> dict'>video_meta_data</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.video_meta_data.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.video_meta_data.self', title='SingleFrameLoader'>sel</a>f):
<span class='lineno'> 998</span>         &quot;&quot;&quot; dict: For videos contains the keys `frame_pts` holding a list of time stamps for each
<span class='lineno'> 999</span>         frame and `keyframes` holding the frame index of each key frame.
<span class='lineno'>1000</span> 
<span class='lineno'>1001</span>         Notes
<span class='lineno'>1002</span>         -----
<span class='lineno'>1003</span>         Only populated if the input is a video and single frame reader is being used, otherwise
<span class='lineno'>1004</span>         returns ``None``.
<span class='lineno'>1005</span>         &quot;&quot;&quot;
<span class='lineno'>1006</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.video_meta_data.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.video_meta_data.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', title='dict'>_video_meta_data</a>
<span class='lineno'>1007</span> 
<span class='lineno'>1008</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist', title='(SingleFrameLoader, ?, ?) -> None'>_get_count_and_filelist</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', title='SingleFrameLoader'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.fast_count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.fast_count', title='?'>fas</a>t_count, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.count', title='?'>cou</a>nt):
<span class='lineno'>1009</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', title='SingleFrameLoader'>self</a>._is_video:
<span class='lineno'>1010</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', title='None'>_reader</a> = imageio.get_reader(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>, &quot;ffmpeg&quot;)
<span class='lineno'>1011</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', title='None'>_reader</a>.<a name='None.use_patch', xid ='None.use_patch', title='?'>use_patch</a> = True
<span class='lineno'>1012</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.count', title='?'>count</a>, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.video_meta_data', title='?'>video_meta_data</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', title='None'>_reader</a>.get_frame_info(
<span class='lineno'>1013</span>                 frame_pts=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', title='dict'>_video_meta_data</a>.get(&quot;pts_time&quot;, None),
<span class='lineno'>1014</span>                 keyframes=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', title='dict'>_video_meta_data</a>.get(&quot;keyframes&quot;, None))
<span class='lineno'>1015</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._video_meta_data', title='dict'>_video_meta_data</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.video_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.video_meta_data', title='?'>video_meta_data</a>
<span class='lineno'>1016</span>         super()._get_count_and_filelist(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.fast_count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.fast_count', title='?'>fast_count</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.count', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._get_count_and_filelist.count', title='?'>count</a>)
<span class='lineno'>1017</span> 
<span class='lineno'>1018</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index', title='(SingleFrameLoader, ?) -> (str, (?, ?))'>image_from_index</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.self', title='SingleFrameLoader'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.index', title='?'>ind</a>ex):
<span class='lineno'>1019</span>         &quot;&quot;&quot; Return a single image from :attr:`file_list` for the given index.
<span class='lineno'>1020</span> 
<span class='lineno'>1021</span>         Parameters
<span class='lineno'>1022</span>         ----------
<span class='lineno'>1023</span>         index: int
<span class='lineno'>1024</span>             The index number (frame number) of the frame to retrieve. NB: The first frame is
<span class='lineno'>1025</span>             index `0`
<span class='lineno'>1026</span> 
<span class='lineno'>1027</span>         Returns
<span class='lineno'>1028</span>         -------
<span class='lineno'>1029</span>         filename: str
<span class='lineno'>1030</span>             The filename of the returned image
<span class='lineno'>1031</span>         image: :class:`numpy.ndarray`
<span class='lineno'>1032</span>             The image for the given index
<span class='lineno'>1033</span> 
<span class='lineno'>1034</span>         Notes
<span class='lineno'>1035</span>         -----
<span class='lineno'>1036</span>         Retrieving frames from video files can be slow as the whole video file needs to be
<span class='lineno'>1037</span>         iterated to retrieve the requested frame. If a frame has already been retrieved, then
<span class='lineno'>1038</span>         retrieving frames of a higher index will be quicker than retrieving frames of a lower
<span class='lineno'>1039</span>         index, as iteration needs to start from the beginning again when navigating backwards.
<span class='lineno'>1040</span> 
<span class='lineno'>1041</span>         We do not use a background thread for this task, as it is assumed that requesting an image
<span class='lineno'>1042</span>         by index will be done when required.
<span class='lineno'>1043</span>         &quot;&quot;&quot;
<span class='lineno'>1044</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.is_video', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.is_video', title='ImagesLoader -> None'>is_video</a>:
<span class='lineno'>1045</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.image', title='?'>image</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader._reader', title='None'>_reader</a>.get_data(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.index', title='?'>index</a>)[..., ::-1]
<span class='lineno'>1046</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', title='str'>filename</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader._dummy_video_framename', title='(SingleFrameLoader, ?) -> str / (ImagesLoader, int) -> str / (ImagesLoader, ?) -> str'>_dummy_video_framename</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.index', title='?'>index</a>)
<span class='lineno'>1047</span>         else:
<span class='lineno'>1048</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', title='?'>filename</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.self', title='SingleFrameLoader'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesLoader.file_list', title='ImagesLoader -> None'>file_list</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.index', title='?'>index</a>]
<span class='lineno'>1049</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.image', title='(?, ?)'>image</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.read_image', title='(str, ?, ?) -> (?, ?) / (<list>, ?, ?) -> (?, ?) / (list, ?, ?) -> (?, ?) / (?, ?, ?) -> (?, ?)'>read_image</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', title='?'>filename</a>, raise_error=True)
<span class='lineno'>1050</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', title='str'>filename</a> = os.path.basename(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', title='?'>filename</a>)
<span class='lineno'>1051</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;index: %s, filename: %s image shape: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.index', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.index', title='?'>index</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', title='str'>filename</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.image', title='(?, ?)'>image</a>.shape)
<span class='lineno'>1052</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.filename', title='str'>filename</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.SingleFrameLoader.image_from_index.image', title='(?, ?)'>image</a>
<span class='lineno'>1053</span> 
<span class='lineno'>1054</span> 
<span class='lineno'>1055</span> class <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver', title='<ImagesSaver>'>ImagesSaver</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO', title='<ImageIO>'>ImageIO</a>):
<span class='lineno'>1056</span>     &quot;&quot;&quot; Perform image saving to a destination folder.
<span class='lineno'>1057</span> 
<span class='lineno'>1058</span>     Images are saved in a background ThreadPoolExecutor to allow for concurrent saving.
<span class='lineno'>1059</span>     See also :class:`ImageIO` for additional attributes.
<span class='lineno'>1060</span> 
<span class='lineno'>1061</span>     Parameters
<span class='lineno'>1062</span>     ----------
<span class='lineno'>1063</span>     path: str
<span class='lineno'>1064</span>         The folder to save images to. This must be an existing folder.
<span class='lineno'>1065</span>     queue_size: int, optional
<span class='lineno'>1066</span>         The amount of images to hold in the internal buffer. Default: 8.
<span class='lineno'>1067</span>     as_bytes: bool, optional
<span class='lineno'>1068</span>         ``True`` if the image is already encoded to bytes, ``False`` if the image is a
<span class='lineno'>1069</span>         :class:`numpy.ndarray`. Default: ``False``.
<span class='lineno'>1070</span> 
<span class='lineno'>1071</span>     Examples
<span class='lineno'>1072</span>     --------
<span class='lineno'>1073</span> 
<span class='lineno'>1074</span>     &gt;&gt;&gt; saver = ImagesSaver(&#39;/path/to/save/folder&#39;)
<span class='lineno'>1075</span>     &gt;&gt;&gt; for filename, image in &lt;image_iterator&gt;:
<span class='lineno'>1076</span>     &gt;&gt;&gt;     saver.save(filename, image)
<span class='lineno'>1077</span>     &gt;&gt;&gt; saver.close()
<span class='lineno'>1078</span>     &quot;&quot;&quot;
<span class='lineno'>1079</span> 
<span class='lineno'>1080</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__', title='? -> ?'>__init__</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.self', title='ImagesSaver'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.path', title='str'>pat</a>h, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.queue_size', title='int'>que</a>ue_size=8, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.as_bytes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.as_bytes', title='?'>as_</a>bytes=False):
<span class='lineno'>1081</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Initializing %s: (path: %s, queue_size: %s, as_bytes: %s)&quot;,
<span class='lineno'>1082</span>                      <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.self', title='ImagesSaver'>self</a>.__class__.__name__, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.path', title='str'>path</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.queue_size', title='int'>queue_size</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.as_bytes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.as_bytes', title='?'>as_bytes</a>)
<span class='lineno'>1083</span> 
<span class='lineno'>1084</span>         super().__init__(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.path', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.path', title='str'>path</a>, queue_size=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.queue_size', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.queue_size', title='int'>queue_size</a>)
<span class='lineno'>1085</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.self', title='ImagesSaver'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._as_bytes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._as_bytes', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._as_bytes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._as_bytes', title='?'>_as_bytes</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.as_bytes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.__init__.as_bytes', title='?'>as_bytes</a>
<span class='lineno'>1086</span> 
<span class='lineno'>1087</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._check_location_exists', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._check_location_exists', title='ImagesSaver -> None'>_check_location_exists</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._check_location_exists.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._check_location_exists.self', title='ImagesSaver'>sel</a>f):
<span class='lineno'>1088</span>         &quot;&quot;&quot; Check whether the output location exists and is a folder
<span class='lineno'>1089</span> 
<span class='lineno'>1090</span>         Raises
<span class='lineno'>1091</span>         ------
<span class='lineno'>1092</span>         FaceswapError
<span class='lineno'>1093</span>             If the given location does not exist or the location is not a folder
<span class='lineno'>1094</span>         &quot;&quot;&quot;
<span class='lineno'>1095</span>         if not isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._check_location_exists.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._check_location_exists.self', title='ImagesSaver'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>, str):
<span class='lineno'>1096</span>             raise FaceswapError(&quot;The output location must be a string not a &quot;
<span class='lineno'>1097</span>                                 &quot;{}&quot;.format(type(self.location)))
<span class='lineno'>1098</span>         super()._check_location_exists()
<span class='lineno'>1099</span>         if not os.path.isdir(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._check_location_exists.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._check_location_exists.self', title='ImagesSaver'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>):
<span class='lineno'>1100</span>             raise FaceswapError(&quot;The output location &#39;{}&#39; is not a folder&quot;.format(self.location))
<span class='lineno'>1101</span> 
<span class='lineno'>1102</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process', title='(ImagesSaver, ?) -> None'>_process</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.self', title='ImagesSaver'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.queue', title='?'>que</a>ue):
<span class='lineno'>1103</span>         &quot;&quot;&quot; Saves images from the save queue to the given :attr:`location` inside a thread.
<span class='lineno'>1104</span> 
<span class='lineno'>1105</span>         Parameters
<span class='lineno'>1106</span>         ----------
<span class='lineno'>1107</span>         queue: queue.Queue()
<span class='lineno'>1108</span>             The ImageIO Queue
<span class='lineno'>1109</span>         &quot;&quot;&quot;
<span class='lineno'>1110</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.executor', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.executor', title='?'>executor</a> = futures.ThreadPoolExecutor(thread_name_prefix=<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.self', title='ImagesSaver'>self</a>.__class__.__name__)
<span class='lineno'>1111</span>         while True:
<span class='lineno'>1112</span>             <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.item', title='?'>item</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.queue', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.queue', title='?'>queue</a>.get()
<span class='lineno'>1113</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.item', title='?'>item</a> == &quot;EOF&quot;:
<span class='lineno'>1114</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;EOF received&quot;)
<span class='lineno'>1115</span>                 break
<span class='lineno'>1116</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Submitting: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.item', title='?'>item</a>[0])
<span class='lineno'>1117</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.executor', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.executor', title='?'>executor</a>.submit(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.self', title='ImagesSaver'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save', title='(ImagesSaver, ?, ?) -> ?'>_save</a>, *<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.item', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.item', title='?'>item</a>)
<span class='lineno'>1118</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.executor', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._process.executor', title='?'>executor</a>.shutdown()
<span class='lineno'>1119</span> 
<span class='lineno'>1120</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save', title='(ImagesSaver, ?, ?) -> ?'>_save</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.self', title='ImagesSaver'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', title='?'>fil</a>ename, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.image', title='?'>ima</a>ge):
<span class='lineno'>1121</span>         &quot;&quot;&quot; Save a single image inside a ThreadPoolExecutor
<span class='lineno'>1122</span> 
<span class='lineno'>1123</span>         Parameters
<span class='lineno'>1124</span>         ----------
<span class='lineno'>1125</span>         filename: str
<span class='lineno'>1126</span>             The filename of the image to be saved. NB: Any folders passed in with the filename
<span class='lineno'>1127</span>             will be stripped and replaced with :attr:`location`.
<span class='lineno'>1128</span>         image: numpy.ndarray
<span class='lineno'>1129</span>             The image to be saved
<span class='lineno'>1130</span>         &quot;&quot;&quot;
<span class='lineno'>1131</span>         <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', title='str'>filename</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.self', title='ImagesSaver'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO.location', title='ImageIO -> None'>location</a>, os.path.basename(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', title='?'>filename</a>))
<span class='lineno'>1132</span>         try:
<span class='lineno'>1133</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.self', title='ImagesSaver'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._as_bytes', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._as_bytes', title='?'>_as_bytes</a>:
<span class='lineno'>1134</span>                 with open(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', title='str'>filename</a>, &quot;wb&quot;) as <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.out_file', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.out_file', title='file'>out_file</a>:
<span class='lineno'>1135</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.out_file', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.out_file', title='file'>out_file</a>.write(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.image', title='?'>image</a>)
<span class='lineno'>1136</span>             else:
<span class='lineno'>1137</span>                 cv2.imwrite(<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', title='str'>filename</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.image', title='?'>image</a>)
<span class='lineno'>1138</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Saved image: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', title='str'>filename</a>)
<span class='lineno'>1139</span>         except Exception as err:  # pylint: disable=broad-except
<span class='lineno'>1140</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.error(&quot;Failed to save image &#39;%s&#39;. Original Error: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver._save.filename', title='str'>filename</a>, err)
<span class='lineno'>1141</span> 
<span class='lineno'>1142</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save', title='(ImagesSaver, ?, ?) -> None / (ImagesSaver, str, None) -> None / (ImagesSaver, str, ?) -> None'>save</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.self', title='ImagesSaver'>sel</a>f, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.filename', title='str'>fil</a>ename, <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.image', title='None'>ima</a>ge):
<span class='lineno'>1143</span>         &quot;&quot;&quot; Save the given image in the background thread
<span class='lineno'>1144</span> 
<span class='lineno'>1145</span>         Ensure that :func:`close` is called once all save operations are complete.
<span class='lineno'>1146</span> 
<span class='lineno'>1147</span>         Parameters
<span class='lineno'>1148</span>         ----------
<span class='lineno'>1149</span>         filename: str
<span class='lineno'>1150</span>             The filename of the image to be saved
<span class='lineno'>1151</span>         image: numpy.ndarray
<span class='lineno'>1152</span>             The image to be saved
<span class='lineno'>1153</span>         &quot;&quot;&quot;
<span class='lineno'>1154</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.self', title='ImagesSaver'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImageIO._set_thread', title='ImageIO -> None / ImagesSaver -> None / ImagesLoader -> None'>_set_thread</a>()
<span class='lineno'>1155</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.trace(&quot;Putting to save queue: &#39;%s&#39;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.filename', title='str'>filename</a>)
<span class='lineno'>1156</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.self', title='ImagesSaver'>self</a>._queue.put((<a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.filename', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.filename', title='str'>filename</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.image', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.save.image', title='None'>image</a>))
<span class='lineno'>1157</span> 
<span class='lineno'>1158</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.close', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.close', title='ImagesSaver -> None'>close</a>(<a name='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.close.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.close.self', title='ImagesSaver'>sel</a>f):
<span class='lineno'>1159</span>         &quot;&quot;&quot; Signal to the Save Threads that they should be closed and cleanly shutdown
<span class='lineno'>1160</span>         the saver &quot;&quot;&quot;
<span class='lineno'>1161</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.logger', title='?'>logger</a>.debug(&quot;Putting EOF to save queue&quot;)
<span class='lineno'>1162</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.close.self', xid ='.home.xxm.Desktop.EMSE.dataset.faceswap.lib.image.ImagesSaver.close.self', title='ImagesSaver'>self</a>._queue.put(&quot;EOF&quot;)
<span class='lineno'>1163</span>         super().close()
</pre></td></tr></table></body></html>