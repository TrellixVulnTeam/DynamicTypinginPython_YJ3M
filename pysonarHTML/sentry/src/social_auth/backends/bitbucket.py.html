<html>
<head>
<meta charset="utf-8">
<title>/home/xxm/Desktop/EMSE/dataset/sentry/src/social_auth/backends/bitbucket.py</title>
<style type='text/css'>
body { color: #666666; }
a {
    text-decoration: none; color: #5AA2A7;
    border: solid 1px rgba(255,255,255,0);
}
a.active {
    background: -webkit-linear-gradient(top,rgba(255, 255, 200, 0.35) 0,rgba(255, 255, 200, 0.55) 100%);
    border: solid 1px #E5E600;
}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #cccccc;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px solid orange; padding-bottom: 1px}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted;

function highlight(xid)
{
    var elms = document.querySelectorAll('[xid="' + xid + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "active";
    }
    highlighted = xid;
}

function clearHighlight() {
    var elms = document.querySelectorAll('[xid="' + highlighted + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "";
    }
}

window.onload =
    function (e) {
        var tags = document.getElementsByTagName("A")
        for (var i = 0; i < tags.length; i++) {
            tags[i].onmouseover =
                function (e) {
                    clearHighlight();
                    var xid = e.toElement.getAttribute('xid');
                    highlight(xid);
                }
        }
    }</script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER'>BITBUCKET_SERVER</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_REQUEST_TOKEN_URL', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_REQUEST_TOKEN_URL'>BITBUCKET_REQUEST_TOKEN_URL</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_ACCESS_TOKEN_URL', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_ACCESS_TOKEN_URL'>BITBUCKET_ACCESS_TOKEN_URL</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_AUTHORIZATION_URL', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_AUTHORIZATION_URL'>BITBUCKET_AUTHORIZATION_URL</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_EMAIL_DATA_URL', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_EMAIL_DATA_URL'>BITBUCKET_EMAIL_DATA_URL</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_USER_DATA_URL', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_USER_DATA_URL'>BITBUCKET_USER_DATA_URL</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend'>BitbucketBackend</a><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.name', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.name'>name</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.EXTRA_DATA', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.EXTRA_DATA'>EXTRA_DATA</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details'>get_user_details</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id'>get_user_id</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens'>tokens</a></li></ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth'>BitbucketAuth</a><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.AUTHORIZATION_URL', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.AUTHORIZATION_URL'>AUTHORIZATION_URL</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.REQUEST_TOKEN_URL', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.REQUEST_TOKEN_URL'>REQUEST_TOKEN_URL</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.ACCESS_TOKEN_URL', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.ACCESS_TOKEN_URL'>ACCESS_TOKEN_URL</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.AUTH_BACKEND', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.AUTH_BACKEND'>AUTH_BACKEND</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.SETTINGS_KEY_NAME', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.SETTINGS_KEY_NAME'>SETTINGS_KEY_NAME</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.SETTINGS_SECRET_NAME', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.SETTINGS_SECRET_NAME'>SETTINGS_SECRET_NAME</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.DEFAULT_SCOPE', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.DEFAULT_SCOPE'>DEFAULT_SCOPE</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data'>user_data</a></li></ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BACKENDS', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BACKENDS'>BACKENDS</a></li></ul>
</td><td><pre><span class='lineno'>   1</span> &quot;&quot;&quot;
<span class='lineno'>   2</span> Bitbucket OAuth support.
<span class='lineno'>   3</span> 
<span class='lineno'>   4</span> This adds support for Bitbucket OAuth service. An application must
<span class='lineno'>   5</span> be registered first on Bitbucket and the settings BITBUCKET_CONSUMER_KEY
<span class='lineno'>   6</span> and BITBUCKET_CONSUMER_SECRET must be defined with the corresponding
<span class='lineno'>   7</span> values.
<span class='lineno'>   8</span> 
<span class='lineno'>   9</span> By default username, email, token expiration time, first name and last name are
<span class='lineno'>  10</span> stored in extra_data field, check OAuthBackend class for details on how to
<span class='lineno'>  11</span> extend it.
<span class='lineno'>  12</span> &quot;&quot;&quot;
<span class='lineno'>  13</span> from __future__ import absolute_import
<span class='lineno'>  14</span> 
<span class='lineno'>  15</span> import simplejson
<span class='lineno'>  16</span> 
<span class='lineno'>  17</span> from social_auth.backends import BaseOAuth1, OAuthBackend
<span class='lineno'>  18</span> from social_auth.utils import dsa_urlopen
<span class='lineno'>  19</span> 
<span class='lineno'>  20</span> # Bitbucket configuration
<span class='lineno'>  21</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', title='str'>BITBUCKET_SERVER</a> = &quot;bitbucket.org/api/1.0&quot;
<span class='lineno'>  22</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_REQUEST_TOKEN_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_REQUEST_TOKEN_URL', title='str'>BITBUCKET_REQUEST_TOKEN_URL</a> = &quot;https://%s/oauth/request_token&quot; % <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', title='str'>BITBUCKET_SERVER</a>
<span class='lineno'>  23</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_ACCESS_TOKEN_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_ACCESS_TOKEN_URL', title='str'>BITBUCKET_ACCESS_TOKEN_URL</a> = &quot;https://%s/oauth/access_token&quot; % <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', title='str'>BITBUCKET_SERVER</a>
<span class='lineno'>  24</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_AUTHORIZATION_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_AUTHORIZATION_URL', title='str'>BITBUCKET_AUTHORIZATION_URL</a> = &quot;https://%s/oauth/authenticate&quot; % <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', title='str'>BITBUCKET_SERVER</a>
<span class='lineno'>  25</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_EMAIL_DATA_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_EMAIL_DATA_URL', title='str'>BITBUCKET_EMAIL_DATA_URL</a> = &quot;https://%s/emails/&quot; % <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', title='str'>BITBUCKET_SERVER</a>
<span class='lineno'>  26</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_USER_DATA_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_USER_DATA_URL', title='str'>BITBUCKET_USER_DATA_URL</a> = &quot;https://%s/users/&quot; % <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_SERVER', title='str'>BITBUCKET_SERVER</a>
<span class='lineno'>  27</span> 
<span class='lineno'>  28</span> 
<span class='lineno'>  29</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend', title='<BitbucketBackend>'>BitbucketBackend</a>(OAuthBackend):
<span class='lineno'>  30</span>     &quot;&quot;&quot;Bitbucket OAuth authentication backend&quot;&quot;&quot;
<span class='lineno'>  31</span> 
<span class='lineno'>  32</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.name', title='str'>name</a> = &quot;bitbucket&quot;
<span class='lineno'>  33</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.EXTRA_DATA', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.EXTRA_DATA', title='[(str, str)]'>EXTRA_DATA</a> = [
<span class='lineno'>  34</span>         (&quot;username&quot;, &quot;username&quot;),
<span class='lineno'>  35</span>         (&quot;expires&quot;, &quot;expires&quot;),
<span class='lineno'>  36</span>         (&quot;email&quot;, &quot;email&quot;),
<span class='lineno'>  37</span>         (&quot;first_name&quot;, &quot;first_name&quot;),
<span class='lineno'>  38</span>         (&quot;last_name&quot;, &quot;last_name&quot;),
<span class='lineno'>  39</span>     ]
<span class='lineno'>  40</span> 
<span class='lineno'>  41</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details', title='(BitbucketBackend, ?) -> dict'>get_user_details</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.self', title='BitbucketBackend'>self</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', title='?'>response</a>):
<span class='lineno'>  42</span>         &quot;&quot;&quot;Return user details from Bitbucket account&quot;&quot;&quot;
<span class='lineno'>  43</span>         return {
<span class='lineno'>  44</span>             &quot;username&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', title='?'>response</a>.get(&quot;username&quot;),
<span class='lineno'>  45</span>             &quot;email&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', title='?'>response</a>.get(&quot;email&quot;),
<span class='lineno'>  46</span>             &quot;fullname&quot;: &quot; &quot;.join((<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', title='?'>response</a>.get(&quot;first_name&quot;), <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', title='?'>response</a>.get(&quot;last_name&quot;))),
<span class='lineno'>  47</span>             &quot;first_name&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', title='?'>response</a>.get(&quot;first_name&quot;),
<span class='lineno'>  48</span>             &quot;last_name&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_details.response', title='?'>response</a>.get(&quot;last_name&quot;),
<span class='lineno'>  49</span>         }
<span class='lineno'>  50</span> 
<span class='lineno'>  51</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id', title='(BitbucketBackend, ?, ?) -> None'>get_user_id</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id.self', title='BitbucketBackend'>self</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id.details', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id.details', title='?'>details</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id.response', title='?'>response</a>):
<span class='lineno'>  52</span>         &quot;&quot;&quot;Return the user id, Bitbucket only provides username as a unique
<span class='lineno'>  53</span>         identifier&quot;&quot;&quot;
<span class='lineno'>  54</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.get_user_id.response', title='?'>response</a>[&quot;username&quot;]
<span class='lineno'>  55</span> 
<span class='lineno'>  56</span>     @classmethod
<span class='lineno'>  57</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens', title='(<BitbucketBackend>, ?) -> dict'>tokens</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.cls', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.cls', title='<BitbucketBackend>'>cls</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.instance', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.instance', title='?'>instance</a>):
<span class='lineno'>  58</span>         &quot;&quot;&quot;Return the tokens needed to authenticate the access to any API the
<span class='lineno'>  59</span>         service might provide. Bitbucket uses a pair of OAuthToken consisting
<span class='lineno'>  60</span>         on a oauth_token and oauth_token_secret.
<span class='lineno'>  61</span> 
<span class='lineno'>  62</span>         instance must be a UserSocialAuth instance.
<span class='lineno'>  63</span>         &quot;&quot;&quot;
<span class='lineno'>  64</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', title='?'>token</a> = super(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend', title='<BitbucketBackend>'>BitbucketBackend</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.cls', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.cls', title='<BitbucketBackend>'>cls</a>).tokens(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.instance', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.instance', title='?'>instance</a>)
<span class='lineno'>  65</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', title='?'>token</a> and &quot;access_token&quot; in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', title='?'>token</a>:
<span class='lineno'>  66</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', title='dict'>token</a> = dict(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.tok', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.tok', title='?'>tok</a>.split(&quot;=&quot;) for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.tok', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.tok', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.tok', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.tok', title='?'>tok</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', title='?'>token</a>[&quot;access_token&quot;].split(&quot;&amp;&quot;))
<span class='lineno'>  67</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend.tokens.token', title='dict'>token</a>
<span class='lineno'>  68</span> 
<span class='lineno'>  69</span> 
<span class='lineno'>  70</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth', title='<BitbucketAuth>'>BitbucketAuth</a>(BaseOAuth1):
<span class='lineno'>  71</span>     &quot;&quot;&quot;Bitbucket OAuth authentication mechanism&quot;&quot;&quot;
<span class='lineno'>  72</span> 
<span class='lineno'>  73</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.AUTHORIZATION_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.AUTHORIZATION_URL', title='str'>AUTHORIZATION_URL</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_AUTHORIZATION_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_AUTHORIZATION_URL', title='str'>BITBUCKET_AUTHORIZATION_URL</a>
<span class='lineno'>  74</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.REQUEST_TOKEN_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.REQUEST_TOKEN_URL', title='str'>REQUEST_TOKEN_URL</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_REQUEST_TOKEN_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_REQUEST_TOKEN_URL', title='str'>BITBUCKET_REQUEST_TOKEN_URL</a>
<span class='lineno'>  75</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.ACCESS_TOKEN_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.ACCESS_TOKEN_URL', title='str'>ACCESS_TOKEN_URL</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_ACCESS_TOKEN_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_ACCESS_TOKEN_URL', title='str'>BITBUCKET_ACCESS_TOKEN_URL</a>
<span class='lineno'>  76</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.AUTH_BACKEND', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.AUTH_BACKEND', title='<BitbucketBackend>'>AUTH_BACKEND</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketBackend', title='<BitbucketBackend>'>BitbucketBackend</a>
<span class='lineno'>  77</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.SETTINGS_KEY_NAME', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.SETTINGS_KEY_NAME', title='str'>SETTINGS_KEY_NAME</a> = &quot;BITBUCKET_CONSUMER_KEY&quot;
<span class='lineno'>  78</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.SETTINGS_SECRET_NAME', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.SETTINGS_SECRET_NAME', title='str'>SETTINGS_SECRET_NAME</a> = &quot;BITBUCKET_CONSUMER_SECRET&quot;
<span class='lineno'>  79</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.DEFAULT_SCOPE', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.DEFAULT_SCOPE', title='[str]'>DEFAULT_SCOPE</a> = [&quot;webhook&quot;, &quot;repository&quot;, &quot;issue&quot;]
<span class='lineno'>  80</span> 
<span class='lineno'>  81</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data', title='(BitbucketAuth, ?) -> None'>user_data</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.self', title='BitbucketAuth'>self</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.access_token', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.access_token', title='?'>access_token</a>):
<span class='lineno'>  82</span>         &quot;&quot;&quot;Return user data provided&quot;&quot;&quot;
<span class='lineno'>  83</span>         # Bitbucket has a bit of an indirect route to obtain user data from an
<span class='lineno'>  84</span>         # authenticated query: First obtain the user&#39;s email via an
<span class='lineno'>  85</span>         # authenticated GET
<span class='lineno'>  86</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.url', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.url', title='str'>url</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_EMAIL_DATA_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_EMAIL_DATA_URL', title='str'>BITBUCKET_EMAIL_DATA_URL</a>
<span class='lineno'>  87</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.request', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.request', title='?'>request</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.self', title='BitbucketAuth'>self</a>.oauth_request(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.access_token', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.access_token', title='?'>access_token</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.url', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.url', title='str'>url</a>)
<span class='lineno'>  88</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.response', title='?'>response</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.self', title='BitbucketAuth'>self</a>.fetch_response(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.request', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.request', title='?'>request</a>)
<span class='lineno'>  89</span>         try:
<span class='lineno'>  90</span>             # Then retrieve the user&#39;s primary email address or the top email
<span class='lineno'>  91</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_addresses', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_addresses', title='?'>email_addresses</a> = simplejson.loads(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.response', title='?'>response</a>)
<span class='lineno'>  92</span>             for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_address', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_address', title='?'>email_address</a> in reversed(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_addresses', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_addresses', title='?'>email_addresses</a>):
<span class='lineno'>  93</span>                 if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_address', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_address', title='?'>email_address</a>[&quot;active&quot;]:
<span class='lineno'>  94</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email', title='?'>email</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_address', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_address', title='?'>email_address</a>[&quot;email&quot;]
<span class='lineno'>  95</span>                     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_address', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email_address', title='?'>email_address</a>[&quot;primary&quot;]:
<span class='lineno'>  96</span>                         break
<span class='lineno'>  97</span>             # Then return the user data using a normal GET with the
<span class='lineno'>  98</span>             # BITBUCKET_USER_DATA_URL and the user&#39;s email
<span class='lineno'>  99</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.response', title='?'>response</a> = dsa_urlopen(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_USER_DATA_URL', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BITBUCKET_USER_DATA_URL', title='str'>BITBUCKET_USER_DATA_URL</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email', title='?'>email</a>)
<span class='lineno'> 100</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.user_details', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.user_details', title='?'>user_details</a> = simplejson.load(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.response', title='?'>response</a>)[&quot;user&quot;]
<span class='lineno'> 101</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.user_details', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.user_details', title='?'>user_details</a>[&quot;email&quot;] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.email', title='?'>email</a>
<span class='lineno'> 102</span>             return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.user_details', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth.user_data.user_details', title='?'>user_details</a>
<span class='lineno'> 103</span>         except ValueError:
<span class='lineno'> 104</span>             return None
<span class='lineno'> 105</span>         return None
<span class='lineno'> 106</span> 
<span class='lineno'> 107</span> 
<span class='lineno'> 108</span> # Backend definition
<span class='lineno'> 109</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BACKENDS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BACKENDS', title='dict'>BACKENDS</a> = {&quot;bitbucket&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.social_auth.backends.bitbucket.BitbucketAuth', title='<BitbucketAuth>'>BitbucketAuth</a>}
</pre></td></tr></table></body></html>