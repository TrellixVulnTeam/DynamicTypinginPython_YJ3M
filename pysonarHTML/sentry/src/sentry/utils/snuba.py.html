<html>
<head>
<meta charset="utf-8">
<title>/home/xxm/Desktop/EMSE/dataset/sentry/src/sentry/utils/snuba.py</title>
<style type='text/css'>
body { color: #666666; }
a {
    text-decoration: none; color: #5AA2A7;
    border: solid 1px rgba(255,255,255,0);
}
a.active {
    background: -webkit-linear-gradient(top,rgba(255, 255, 200, 0.35) 0,rgba(255, 255, 200, 0.55) 100%);
    border: solid 1px #E5E600;
}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #cccccc;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px solid orange; padding-bottom: 1px}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted;

function highlight(xid)
{
    var elms = document.querySelectorAll('[xid="' + xid + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "active";
    }
    highlighted = xid;
}

function clearHighlight() {
    var elms = document.querySelectorAll('[xid="' + highlighted + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "";
    }
}

window.onload =
    function (e) {
        var tags = document.getElementsByTagName("A")
        for (var i = 0; i < tags.length; i++) {
            tags[i].onmouseover =
                function (e) {
                    clearHighlight();
                    var xid = e.toElement.getAttribute('xid');
                    highlight(xid);
                }
        }
    }</script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_ISSUES', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_ISSUES'>MAX_ISSUES</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_HASHES', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_HASHES'>MAX_HASHES</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_FIELDS', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_FIELDS'>MAX_FIELDS</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SAFE_FUNCTION_RE', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SAFE_FUNCTION_RE'>SAFE_FUNCTION_RE</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QUOTED_LITERAL_RE', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QUOTED_LITERAL_RE'>QUOTED_LITERAL_RE</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS'>OVERRIDE_OPTIONS</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SENTRY_SNUBA_MAP', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SENTRY_SNUBA_MAP'>SENTRY_SNUBA_MAP</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.TRANSACTIONS_SNUBA_MAP', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.TRANSACTIONS_SNUBA_MAP'>TRANSACTIONS_SNUBA_MAP</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DISCOVER_COLUMN_MAP', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DISCOVER_COLUMN_MAP'>DISCOVER_COLUMN_MAP</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col'>col</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASETS', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASETS'>DATASETS</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASET_FIELDS', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASET_FIELDS'>DATASET_FIELDS</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.parse_snuba_datetime', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.parse_snuba_datetime'>parse_snuba_datetime</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError'>SnubaError</a><ul>
</ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.UnqualifiedQueryError', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.UnqualifiedQueryError'>UnqualifiedQueryError</a><ul>
</ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.UnexpectedResponseError', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.UnexpectedResponseError'>UnexpectedResponseError</a><ul>
</ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError'>QueryExecutionError</a><ul>
</ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RateLimitExceeded', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RateLimitExceeded'>RateLimitExceeded</a><ul>
</ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SchemaValidationError', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SchemaValidationError'>SchemaValidationError</a><ul>
</ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryMemoryLimitExceeded', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryMemoryLimitExceeded'>QueryMemoryLimitExceeded</a><ul>
</ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryIllegalTypeOfArgument', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryIllegalTypeOfArgument'>QueryIllegalTypeOfArgument</a><ul>
</ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryTooManySimultaneous', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryTooManySimultaneous'>QueryTooManySimultaneous</a><ul>
</ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.clickhouse_error_codes_map', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.clickhouse_error_codes_map'>clickhouse_error_codes_map</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryOutsideRetentionError', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryOutsideRetentionError'>QueryOutsideRetentionError</a><ul>
</ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryOutsideGroupActivityError', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryOutsideGroupActivityError'>QueryOutsideGroupActivityError</a><ul>
</ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaTSResult', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaTSResult'>SnubaTSResult</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer'>timer</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override'>options_override</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout'>RetrySkipTimeout</a><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment'>increment</a></li></ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._snuba_pool', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._snuba_pool'>_snuba_pool</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._query_thread_pool', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._query_thread_pool'>_query_thread_pool</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.epoch_naive', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.epoch_naive'>epoch_naive</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.to_naive_timestamp', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.to_naive_timestamp'>to_naive_timestamp</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name'>get_snuba_column_name</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index'>get_function_index</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin'>get_arrayjoin</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects'>get_query_params_to_update_for_projects</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations'>get_query_params_to_update_for_organizations</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params'>_prepare_query_params</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams'>SnubaQueryParams</a><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__'>__init__</a></li></ul>
</li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query'>raw_query</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query'>bulk_raw_query</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query'>query</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups'>nest_groups</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column'>resolve_column</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition'>resolve_condition</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.aliased_query', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.aliased_query'>aliased_query</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl'>_aliased_query_impl</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column'>resolve_complex_column</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases'>resolve_snuba_aliases</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.JSON_TYPE_MAP', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.JSON_TYPE_MAP'>JSON_TYPE_MAP</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type'>get_json_type</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators'>get_snuba_translators</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids'>get_related_project_ids</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window'>shrink_time_window</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime'>naiveify_datetime</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time', xid='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time'>quantize_time</a></li></ul>
</td><td><pre><span class='lineno'>   1</span> from __future__ import absolute_import
<span class='lineno'>   2</span> 
<span class='lineno'>   3</span> from collections import namedtuple, OrderedDict
<span class='lineno'>   4</span> from copy import deepcopy
<span class='lineno'>   5</span> from contextlib import contextmanager
<span class='lineno'>   6</span> from datetime import datetime, timedelta
<span class='lineno'>   7</span> from dateutil.parser import parse as parse_datetime
<span class='lineno'>   8</span> import functools
<span class='lineno'>   9</span> import os
<span class='lineno'>  10</span> import pytz
<span class='lineno'>  11</span> import re
<span class='lineno'>  12</span> import six
<span class='lineno'>  13</span> import time
<span class='lineno'>  14</span> import urllib3
<span class='lineno'>  15</span> import sentry_sdk
<span class='lineno'>  16</span> from sentry_sdk import Hub
<span class='lineno'>  17</span> 
<span class='lineno'>  18</span> from concurrent.futures import ThreadPoolExecutor
<span class='lineno'>  19</span> from django.conf import settings
<span class='lineno'>  20</span> from six.moves.urllib.parse import urlparse
<span class='lineno'>  21</span> 
<span class='lineno'>  22</span> from sentry import quotas
<span class='lineno'>  23</span> from sentry.models import (
<span class='lineno'>  24</span>     Environment,
<span class='lineno'>  25</span>     Group,
<span class='lineno'>  26</span>     GroupRelease,
<span class='lineno'>  27</span>     Organization,
<span class='lineno'>  28</span>     Project,
<span class='lineno'>  29</span>     ProjectKey,
<span class='lineno'>  30</span>     Release,
<span class='lineno'>  31</span>     ReleaseProject,
<span class='lineno'>  32</span> )
<span class='lineno'>  33</span> from sentry.net.http import connection_from_url
<span class='lineno'>  34</span> from sentry.utils import metrics, json
<span class='lineno'>  35</span> from sentry.utils.dates import to_timestamp
<span class='lineno'>  36</span> from sentry.snuba.events import Columns
<span class='lineno'>  37</span> from sentry.snuba.dataset import Dataset
<span class='lineno'>  38</span> from sentry.utils.compat import map
<span class='lineno'>  39</span> 
<span class='lineno'>  40</span> # TODO remove this when Snuba accepts more than 500 issues
<span class='lineno'>  41</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_ISSUES', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_ISSUES', title='int'>MAX_ISSUES</a> = 500
<span class='lineno'>  42</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_HASHES', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_HASHES', title='int'>MAX_HASHES</a> = 5000
<span class='lineno'>  43</span> 
<span class='lineno'>  44</span> # We limit the number of fields an user can ask for
<span class='lineno'>  45</span> # in a single query to lessen the load on snuba
<span class='lineno'>  46</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_FIELDS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.MAX_FIELDS', title='int'>MAX_FIELDS</a> = 20
<span class='lineno'>  47</span> 
<span class='lineno'>  48</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SAFE_FUNCTION_RE', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SAFE_FUNCTION_RE', title='?'>SAFE_FUNCTION_RE</a> = re.compile(r&quot;-?[a-zA-Z_][a-zA-Z0-9_]*$&quot;)
<span class='lineno'>  49</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QUOTED_LITERAL_RE', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QUOTED_LITERAL_RE', title='?'>QUOTED_LITERAL_RE</a> = re.compile(r&quot;^&#39;.*&#39;$&quot;)
<span class='lineno'>  50</span> 
<span class='lineno'>  51</span> # Global Snuba request option override dictionary. Only intended
<span class='lineno'>  52</span> # to be used with the `options_override` contextmanager below.
<span class='lineno'>  53</span> # NOT THREAD SAFE!
<span class='lineno'>  54</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', title='dict'>OVERRIDE_OPTIONS</a> = {
<span class='lineno'>  55</span>     &quot;consistent&quot;: os.environ.get(&quot;SENTRY_SNUBA_CONSISTENT&quot;, &quot;false&quot;).lower() in (&quot;true&quot;, &quot;1&quot;)
<span class='lineno'>  56</span> }
<span class='lineno'>  57</span> 
<span class='lineno'>  58</span> # There are several cases here where we support both a top level column name and
<span class='lineno'>  59</span> # a tag with the same name. Existing search patterns expect to refer to the tag,
<span class='lineno'>  60</span> # so we support &lt;real_column_name&gt;.name to refer to the top level column name.
<span class='lineno'>  61</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SENTRY_SNUBA_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SENTRY_SNUBA_MAP', title='dict'>SENTRY_SNUBA_MAP</a> = {
<span class='lineno'>  62</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a>.value.alias: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a>.value.event_name for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a></a> in Columns if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a>.value.event_name is not None
<span class='lineno'>  63</span> }
<span class='lineno'>  64</span> 
<span class='lineno'>  65</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.TRANSACTIONS_SNUBA_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.TRANSACTIONS_SNUBA_MAP', title='dict'>TRANSACTIONS_SNUBA_MAP</a> = {
<span class='lineno'>  66</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a>.value.alias: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a>.value.transaction_name
<span class='lineno'>  67</span>     for <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a></a> in Columns
<span class='lineno'>  68</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a>.value.transaction_name is not None
<span class='lineno'>  69</span> }
<span class='lineno'>  70</span> 
<span class='lineno'>  71</span> # This maps the public column aliases to the discover dataset column names.
<span class='lineno'>  72</span> # Longer term we would like to not expose the transactions dataset directly
<span class='lineno'>  73</span> # to end users and instead have all ad-hoc queries go through the discover
<span class='lineno'>  74</span> # dataset.
<span class='lineno'>  75</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DISCOVER_COLUMN_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DISCOVER_COLUMN_MAP', title='dict'>DISCOVER_COLUMN_MAP</a> = {
<span class='lineno'>  76</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a>.value.alias: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a>.value.discover_name
<span class='lineno'>  77</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a></a> in Columns
<span class='lineno'>  78</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.col', title='?'>col</a>.value.discover_name is not None
<span class='lineno'>  79</span> }
<span class='lineno'>  80</span> 
<span class='lineno'>  81</span> 
<span class='lineno'>  82</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASETS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASETS', title='dict'>DATASETS</a> = {
<span class='lineno'>  83</span>     Dataset.Events: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SENTRY_SNUBA_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SENTRY_SNUBA_MAP', title='dict'>SENTRY_SNUBA_MAP</a>,
<span class='lineno'>  84</span>     Dataset.Transactions: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.TRANSACTIONS_SNUBA_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.TRANSACTIONS_SNUBA_MAP', title='dict'>TRANSACTIONS_SNUBA_MAP</a>,
<span class='lineno'>  85</span>     Dataset.Discover: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DISCOVER_COLUMN_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DISCOVER_COLUMN_MAP', title='dict'>DISCOVER_COLUMN_MAP</a>,
<span class='lineno'>  86</span> }
<span class='lineno'>  87</span> 
<span class='lineno'>  88</span> # Store the internal field names to save work later on.
<span class='lineno'>  89</span> # Add `group_id` to the events dataset list as we don&#39;t want to publically
<span class='lineno'>  90</span> # expose that field, but it is used by eventstore and other internals.
<span class='lineno'>  91</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASET_FIELDS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASET_FIELDS', title='dict'>DATASET_FIELDS</a> = {
<span class='lineno'>  92</span>     Dataset.Events: list(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SENTRY_SNUBA_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SENTRY_SNUBA_MAP', title='dict'>SENTRY_SNUBA_MAP</a>.values()),
<span class='lineno'>  93</span>     Dataset.Transactions: list(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.TRANSACTIONS_SNUBA_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.TRANSACTIONS_SNUBA_MAP', title='dict'>TRANSACTIONS_SNUBA_MAP</a>.values()),
<span class='lineno'>  94</span>     Dataset.Discover: list(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DISCOVER_COLUMN_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DISCOVER_COLUMN_MAP', title='dict'>DISCOVER_COLUMN_MAP</a>.values()),
<span class='lineno'>  95</span> }
<span class='lineno'>  96</span> 
<span class='lineno'>  97</span> 
<span class='lineno'>  98</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.parse_snuba_datetime', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.parse_snuba_datetime', title='? -> None'>parse_snuba_datetime</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.parse_snuba_datetime.value', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.parse_snuba_datetime.value', title='?'>value</a>):
<span class='lineno'>  99</span>     &quot;&quot;&quot;Parses a datetime value from snuba.&quot;&quot;&quot;
<span class='lineno'> 100</span>     return parse_datetime(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.parse_snuba_datetime.value', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.parse_snuba_datetime.value', title='?'>value</a>)
<span class='lineno'> 101</span> 
<span class='lineno'> 102</span> 
<span class='lineno'> 103</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError', title='<SnubaError>'>SnubaError</a>(Exception):
<span class='lineno'> 104</span>     pass
<span class='lineno'> 105</span> 
<span class='lineno'> 106</span> 
<span class='lineno'> 107</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.UnqualifiedQueryError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.UnqualifiedQueryError', title='<UnqualifiedQueryError>'>UnqualifiedQueryError</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError', title='<SnubaError>'>SnubaError</a>):
<span class='lineno'> 108</span>     &quot;&quot;&quot;
<span class='lineno'> 109</span>     Exception raised when a required qualification was not satisfied in the query.
<span class='lineno'> 110</span>     &quot;&quot;&quot;
<span class='lineno'> 111</span> 
<span class='lineno'> 112</span> 
<span class='lineno'> 113</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.UnexpectedResponseError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.UnexpectedResponseError', title='<UnexpectedResponseError>'>UnexpectedResponseError</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError', title='<SnubaError>'>SnubaError</a>):
<span class='lineno'> 114</span>     &quot;&quot;&quot;
<span class='lineno'> 115</span>     Exception raised when the Snuba API server returns an unexpected response
<span class='lineno'> 116</span>     type (e.g. not JSON.)
<span class='lineno'> 117</span>     &quot;&quot;&quot;
<span class='lineno'> 118</span> 
<span class='lineno'> 119</span> 
<span class='lineno'> 120</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError', title='<QueryExecutionError>'>QueryExecutionError</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError', title='<SnubaError>'>SnubaError</a>):
<span class='lineno'> 121</span>     &quot;&quot;&quot;
<span class='lineno'> 122</span>     Exception raised when a query failed to execute.
<span class='lineno'> 123</span>     &quot;&quot;&quot;
<span class='lineno'> 124</span> 
<span class='lineno'> 125</span> 
<span class='lineno'> 126</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RateLimitExceeded', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RateLimitExceeded', title='<RateLimitExceeded>'>RateLimitExceeded</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaError', title='<SnubaError>'>SnubaError</a>):
<span class='lineno'> 127</span>     &quot;&quot;&quot;
<span class='lineno'> 128</span>     Exception raised when a query cannot be executed due to rate limits.
<span class='lineno'> 129</span>     &quot;&quot;&quot;
<span class='lineno'> 130</span> 
<span class='lineno'> 131</span> 
<span class='lineno'> 132</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SchemaValidationError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SchemaValidationError', title='<SchemaValidationError>'>SchemaValidationError</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError', title='<QueryExecutionError>'>QueryExecutionError</a>):
<span class='lineno'> 133</span>     &quot;&quot;&quot;
<span class='lineno'> 134</span>     Exception raised when a query is not valid.
<span class='lineno'> 135</span>     &quot;&quot;&quot;
<span class='lineno'> 136</span> 
<span class='lineno'> 137</span> 
<span class='lineno'> 138</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryMemoryLimitExceeded', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryMemoryLimitExceeded', title='<QueryMemoryLimitExceeded>'>QueryMemoryLimitExceeded</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError', title='<QueryExecutionError>'>QueryExecutionError</a>):
<span class='lineno'> 139</span>     &quot;&quot;&quot;
<span class='lineno'> 140</span>     Exception raised when a query would exceed the memory limit.
<span class='lineno'> 141</span>     &quot;&quot;&quot;
<span class='lineno'> 142</span> 
<span class='lineno'> 143</span> 
<span class='lineno'> 144</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryIllegalTypeOfArgument', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryIllegalTypeOfArgument', title='<QueryIllegalTypeOfArgument>'>QueryIllegalTypeOfArgument</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError', title='<QueryExecutionError>'>QueryExecutionError</a>):
<span class='lineno'> 145</span>     &quot;&quot;&quot;
<span class='lineno'> 146</span>     Exception raised when a function in the query is provided an invalid
<span class='lineno'> 147</span>     argument type.
<span class='lineno'> 148</span>     &quot;&quot;&quot;
<span class='lineno'> 149</span> 
<span class='lineno'> 150</span> 
<span class='lineno'> 151</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryTooManySimultaneous', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryTooManySimultaneous', title='<QueryTooManySimultaneous>'>QueryTooManySimultaneous</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryExecutionError', title='<QueryExecutionError>'>QueryExecutionError</a>):
<span class='lineno'> 152</span>     &quot;&quot;&quot;
<span class='lineno'> 153</span>     Exception raised when a query is rejected due to too many simultaneous
<span class='lineno'> 154</span>     queries being performed on the database.
<span class='lineno'> 155</span>     &quot;&quot;&quot;
<span class='lineno'> 156</span> 
<span class='lineno'> 157</span> 
<span class='lineno'> 158</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.clickhouse_error_codes_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.clickhouse_error_codes_map', title='dict'>clickhouse_error_codes_map</a> = {
<span class='lineno'> 159</span>     43: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryIllegalTypeOfArgument', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryIllegalTypeOfArgument', title='<QueryIllegalTypeOfArgument>'>QueryIllegalTypeOfArgument</a>,
<span class='lineno'> 160</span>     241: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryMemoryLimitExceeded', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryMemoryLimitExceeded', title='<QueryMemoryLimitExceeded>'>QueryMemoryLimitExceeded</a>,
<span class='lineno'> 161</span>     202: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryTooManySimultaneous', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryTooManySimultaneous', title='<QueryTooManySimultaneous>'>QueryTooManySimultaneous</a>,
<span class='lineno'> 162</span> }
<span class='lineno'> 163</span> 
<span class='lineno'> 164</span> 
<span class='lineno'> 165</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryOutsideRetentionError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryOutsideRetentionError', title='<QueryOutsideRetentionError>'>QueryOutsideRetentionError</a>(Exception):
<span class='lineno'> 166</span>     pass
<span class='lineno'> 167</span> 
<span class='lineno'> 168</span> 
<span class='lineno'> 169</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryOutsideGroupActivityError', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QueryOutsideGroupActivityError', title='<QueryOutsideGroupActivityError>'>QueryOutsideGroupActivityError</a>(Exception):
<span class='lineno'> 170</span>     pass
<span class='lineno'> 171</span> 
<span class='lineno'> 172</span> 
<span class='lineno'> 173</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaTSResult', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaTSResult', title='<(namedtuple)>'>SnubaTSResult</a> = namedtuple(&quot;SnubaTSResult&quot;, (&quot;data&quot;, &quot;start&quot;, &quot;end&quot;, &quot;rollup&quot;))
<span class='lineno'> 174</span> 
<span class='lineno'> 175</span> 
<span class='lineno'> 176</span> @contextmanager
<span class='lineno'> 177</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer', title='(?, str) -> ? / (str, str) -> ?'>timer</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.name', title='str'>name</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.prefix', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.prefix', title='str'>prefix</a>=&quot;snuba.client&quot;):
<span class='lineno'> 178</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.t', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.t', title='int'>t</a> = time.time()
<span class='lineno'> 179</span>     try:
<span class='lineno'> 180</span>         yield
<span class='lineno'> 181</span>     finally:
<span class='lineno'> 182</span>         metrics.timing(u&quot;{}.{}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.prefix', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.prefix', title='str'>prefix</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.name', title='str'>name</a>), time.time() - <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.t', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer.t', title='int'>t</a>)
<span class='lineno'> 183</span> 
<span class='lineno'> 184</span> 
<span class='lineno'> 185</span> @contextmanager
<span class='lineno'> 186</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override', title='? -> ?'>options_override</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.overrides', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.overrides', title='?'>overrides</a>):
<span class='lineno'> 187</span>     &quot;&quot;&quot;\
<span class='lineno'> 188</span>     NOT THREAD SAFE!
<span class='lineno'> 189</span> 
<span class='lineno'> 190</span>     Adds to OVERRIDE_OPTIONS, restoring previous values and removing
<span class='lineno'> 191</span>     keys that didn&#39;t previously exist on exit, so that calls to this
<span class='lineno'> 192</span>     can be nested.
<span class='lineno'> 193</span>     &quot;&quot;&quot;
<span class='lineno'> 194</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.previous', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.previous', title='dict'>previous</a> = {}
<span class='lineno'> 195</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.delete', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.delete', title='[?]'>delete</a> = []
<span class='lineno'> 196</span> 
<span class='lineno'> 197</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', title='?'>k</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.v', title='?'>v</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.overrides', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.overrides', title='?'>overrides</a>.items():
<span class='lineno'> 198</span>         try:
<span class='lineno'> 199</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.previous', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.previous', title='dict'>previous</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', title='?'>k</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', title='dict'>OVERRIDE_OPTIONS</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', title='?'>k</a>]
<span class='lineno'> 200</span>         except KeyError:
<span class='lineno'> 201</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.delete', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.delete', title='[?]'>delete</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', title='?'>k</a>)
<span class='lineno'> 202</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', title='dict'>OVERRIDE_OPTIONS</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', title='?'>k</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.v', title='?'>v</a>
<span class='lineno'> 203</span> 
<span class='lineno'> 204</span>     try:
<span class='lineno'> 205</span>         yield
<span class='lineno'> 206</span>     finally:
<span class='lineno'> 207</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', title='?'>k</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.v', title='?'>v</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.previous', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.previous', title='dict'>previous</a>.items():
<span class='lineno'> 208</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', title='dict'>OVERRIDE_OPTIONS</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', title='?'>k</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.v', title='?'>v</a>
<span class='lineno'> 209</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', title='?'>k</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.delete', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.delete', title='[?]'>delete</a>:
<span class='lineno'> 210</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', title='dict'>OVERRIDE_OPTIONS</a>.pop(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.options_override.k', title='?'>k</a>)
<span class='lineno'> 211</span> 
<span class='lineno'> 212</span> 
<span class='lineno'> 213</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout', title='<RetrySkipTimeout>'>RetrySkipTimeout</a>(urllib3.Retry):
<span class='lineno'> 214</span>     &quot;&quot;&quot;
<span class='lineno'> 215</span>     urllib3 Retry class does not allow us to retry on read errors but to exclude
<span class='lineno'> 216</span>     read timeout. Retrying after a timeout adds useless load to Snuba.
<span class='lineno'> 217</span>     &quot;&quot;&quot;
<span class='lineno'> 218</span> 
<span class='lineno'> 219</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment', title='(RetrySkipTimeout, None, None, None, None, None, None) -> None'>increment</a>(
<span class='lineno'> 220</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.self', title='RetrySkipTimeout'>self</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.method', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.method', title='None'>method</a>=None, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.url', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.url', title='None'>url</a>=None, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.response', title='None'>response</a>=None, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.error', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.error', title='None'>error</a>=None, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment._pool', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment._pool', title='None'>_pool</a>=None, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment._stacktrace', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment._stacktrace', title='None'>_stacktrace</a>=None
<span class='lineno'> 221</span>     ):
<span class='lineno'> 222</span>         &quot;&quot;&quot;
<span class='lineno'> 223</span>         Just rely on the parent class unless we have a read timeout. In that case
<span class='lineno'> 224</span>         immediately give up
<span class='lineno'> 225</span>         &quot;&quot;&quot;
<span class='lineno'> 226</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.error', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.error', title='None'>error</a> and isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.error', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.error', title='None'>error</a>, urllib3.exceptions.ReadTimeoutError):
<span class='lineno'> 227</span>             raise six.reraise(type(error), error, _stacktrace)
<span class='lineno'> 228</span> 
<span class='lineno'> 229</span>         metrics.incr(
<span class='lineno'> 230</span>             &quot;snuba.client.retry&quot;,
<span class='lineno'> 231</span>             tags={&quot;method&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.method', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.method', title='None'>method</a>, &quot;path&quot;: urlparse(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.url', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.url', title='None'>url</a>).path if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.url', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.url', title='None'>url</a> else None},
<span class='lineno'> 232</span>         )
<span class='lineno'> 233</span>         return super(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout', title='<RetrySkipTimeout>'>RetrySkipTimeout</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.self', title='RetrySkipTimeout'>self</a>).increment(
<span class='lineno'> 234</span>             method=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.method', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.method', title='None'>method</a>,
<span class='lineno'> 235</span>             url=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.url', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.url', title='None'>url</a>,
<span class='lineno'> 236</span>             response=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.response', title='None'>response</a>,
<span class='lineno'> 237</span>             error=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.error', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment.error', title='None'>error</a>,
<span class='lineno'> 238</span>             _pool=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment._pool', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment._pool', title='None'>_pool</a>,
<span class='lineno'> 239</span>             _stacktrace=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment._stacktrace', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout.increment._stacktrace', title='None'>_stacktrace</a>,
<span class='lineno'> 240</span>         )
<span class='lineno'> 241</span> 
<span class='lineno'> 242</span> 
<span class='lineno'> 243</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._snuba_pool', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._snuba_pool', title='?'>_snuba_pool</a> = connection_from_url(
<span class='lineno'> 244</span>     settings.SENTRY_SNUBA,
<span class='lineno'> 245</span>     retries=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.RetrySkipTimeout', title='<RetrySkipTimeout>'>RetrySkipTimeout</a>(
<span class='lineno'> 246</span>         total=5,
<span class='lineno'> 247</span>         # Our calls to snuba frequently fail due to network issues. We want to
<span class='lineno'> 248</span>         # automatically retry most requests. Some of our POSTs and all of our DELETEs
<span class='lineno'> 249</span>         # do cause mutations, but we have other things in place to handle duplicate
<span class='lineno'> 250</span>         # mutations.
<span class='lineno'> 251</span>         method_whitelist={&quot;GET&quot;, &quot;POST&quot;, &quot;DELETE&quot;},
<span class='lineno'> 252</span>     ),
<span class='lineno'> 253</span>     timeout=30,
<span class='lineno'> 254</span>     maxsize=10,
<span class='lineno'> 255</span> )
<span class='lineno'> 256</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._query_thread_pool', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._query_thread_pool', title='?'>_query_thread_pool</a> = ThreadPoolExecutor(max_workers=10)
<span class='lineno'> 257</span> 
<span class='lineno'> 258</span> 
<span class='lineno'> 259</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.epoch_naive', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.epoch_naive', title='datetime'>epoch_naive</a> = datetime(1970, 1, 1, tzinfo=None)
<span class='lineno'> 260</span> 
<span class='lineno'> 261</span> 
<span class='lineno'> 262</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.to_naive_timestamp', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.to_naive_timestamp', title='? -> None'>to_naive_timestamp</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.to_naive_timestamp.value', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.to_naive_timestamp.value', title='?'>value</a>):
<span class='lineno'> 263</span>     &quot;&quot;&quot;
<span class='lineno'> 264</span>     Convert a time zone aware datetime to a POSIX timestamp (with fractional
<span class='lineno'> 265</span>     component.)
<span class='lineno'> 266</span>     &quot;&quot;&quot;
<span class='lineno'> 267</span>     return (<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.to_naive_timestamp.value', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.to_naive_timestamp.value', title='?'>value</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.epoch_naive', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.epoch_naive', title='datetime'>epoch_naive</a>).total_seconds()
<span class='lineno'> 268</span> 
<span class='lineno'> 269</span> 
<span class='lineno'> 270</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name', title='(?, ?) -> None'>get_snuba_column_name</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', title='?'>name</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.dataset', title='?'>dataset</a>=Dataset.Events):
<span class='lineno'> 271</span>     &quot;&quot;&quot;
<span class='lineno'> 272</span>     Get corresponding Snuba column name from Sentry snuba map, if not found
<span class='lineno'> 273</span>     the column is assumed to be a tag. If name is falsy or name is a quoted literal
<span class='lineno'> 274</span>     (e.g. &quot;&#39;name&#39;&quot;), leave unchanged.
<span class='lineno'> 275</span>     &quot;&quot;&quot;
<span class='lineno'> 276</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.no_conversion', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.no_conversion', title='?'>no_conversion</a> = set([&quot;group_id&quot;, &quot;project_id&quot;, &quot;start&quot;, &quot;end&quot;])
<span class='lineno'> 277</span> 
<span class='lineno'> 278</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', title='?'>name</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.no_conversion', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.no_conversion', title='?'>no_conversion</a>:
<span class='lineno'> 279</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', title='?'>name</a>
<span class='lineno'> 280</span> 
<span class='lineno'> 281</span>     if not <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', title='?'>name</a> or <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', title='?'>name</a>.startswith(&quot;tags[&quot;) or <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QUOTED_LITERAL_RE', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QUOTED_LITERAL_RE', title='?'>QUOTED_LITERAL_RE</a>.match(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', title='?'>name</a>):
<span class='lineno'> 282</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', title='?'>name</a>
<span class='lineno'> 283</span> 
<span class='lineno'> 284</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASETS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASETS', title='dict'>DATASETS</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.dataset', title='?'>dataset</a>].get(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', title='?'>name</a>, u&quot;tags[{}]&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_column_name.name', title='?'>name</a>))
<span class='lineno'> 285</span> 
<span class='lineno'> 286</span> 
<span class='lineno'> 287</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index', title='(? -> list, int) -> int / (?, int) -> int / ((? -> list, ? -> tuple), int) -> int'>get_function_index</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', title='{(? -> list, ? -> tuple) | ? -> list}'>column_expr</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.depth', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.depth', title='int'>depth</a>=0):
<span class='lineno'> 288</span>     &quot;&quot;&quot;
<span class='lineno'> 289</span>     If column_expr list contains a function, returns the index of its function name
<span class='lineno'> 290</span>     within column_expr (and assumption is that index + 1 is the list of arguments),
<span class='lineno'> 291</span>     otherwise None.
<span class='lineno'> 292</span> 
<span class='lineno'> 293</span>      A function expression is of the form:
<span class='lineno'> 294</span>          [func, [arg1, arg2]]  =&gt; func(arg1, arg2)
<span class='lineno'> 295</span>      If a string argument is followed by list arg, the pair of them is assumed
<span class='lineno'> 296</span>     to be a nested function call, with extra args to the outer function afterward.
<span class='lineno'> 297</span>          [func1, [func2, [arg1, arg2], arg3]]  =&gt; func1(func2(arg1, arg2), arg3)
<span class='lineno'> 298</span>      Although at the top level, there is no outer function call, and the optional
<span class='lineno'> 299</span>     3rd argument is interpreted as an alias for the entire expression.
<span class='lineno'> 300</span>          [func, [arg1], alias] =&gt; function(arg1) AS alias
<span class='lineno'> 301</span>      You can also have a function part of an argument list:
<span class='lineno'> 302</span>          [func1, [arg1, func2, [arg2, arg3]]] =&gt; func1(arg1, func2(arg2, arg3))
<span class='lineno'> 303</span>      &quot;&quot;&quot;
<span class='lineno'> 304</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.index', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.index', title='None'>index</a> = None
<span class='lineno'> 305</span>     if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', title='{(? -> list, ? -> tuple) | ? -> list}'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', title='(? -> tuple, ? -> list)'>column_expr</a></a>, (tuple, list)):
<span class='lineno'> 306</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', title='int'>i</a> = 0
<span class='lineno'> 307</span>         while <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', title='int'>i</a> &lt; len(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', title='(? -> tuple, ? -> list)'>column_expr</a>) - 1:
<span class='lineno'> 308</span>             # The assumption here is that a list that follows a string means
<span class='lineno'> 309</span>             # the string is a function name
<span class='lineno'> 310</span>             if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', title='(? -> tuple, ? -> list)'>column_expr</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', title='int'>i</a>], six.string_types) and isinstance(
<span class='lineno'> 311</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', title='(? -> tuple, ? -> list)'>column_expr</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', title='int'>i</a> + 1], (tuple, list)
<span class='lineno'> 312</span>             ):
<span class='lineno'> 313</span>                 assert <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SAFE_FUNCTION_RE', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SAFE_FUNCTION_RE', title='?'>SAFE_FUNCTION_RE</a>.match(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.column_expr', title='(? -> tuple, ? -> list)'>column_expr</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', title='int'>i</a>])
<span class='lineno'> 314</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.index', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.index', title='int'>index</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', title='int'>i</a>
<span class='lineno'> 315</span>                 break
<span class='lineno'> 316</span>             else:
<span class='lineno'> 317</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', title='int'>i</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.i', title='int'>i</a> + 1
<span class='lineno'> 318</span> 
<span class='lineno'> 319</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.index', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index.index', title='int'>index</a>
<span class='lineno'> 320</span>     else:
<span class='lineno'> 321</span>         return None
<span class='lineno'> 322</span> 
<span class='lineno'> 323</span> 
<span class='lineno'> 324</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin', title='? -> None'>get_arrayjoin</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin.column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin.column', title='?'>column</a>):
<span class='lineno'> 325</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin.match', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin.match', title='?'>match</a> = re.match(r&quot;^(exception_stacks|exception_frames|contexts)\..+$&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin.column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin.column', title='?'>column</a>)
<span class='lineno'> 326</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin.match', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin.match', title='?'>match</a>:
<span class='lineno'> 327</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin.match', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_arrayjoin.match', title='?'>match</a>.groups()[0]
<span class='lineno'> 328</span> 
<span class='lineno'> 329</span> 
<span class='lineno'> 330</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects', title='(?, bool) -> (?, dict)'>get_query_params_to_update_for_projects</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', title='?'>query_params</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.with_org', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.with_org', title='bool'>with_org</a>=False):
<span class='lineno'> 331</span>     &quot;&quot;&quot;
<span class='lineno'> 332</span>     Get the project ID and query params that need to be updated for project
<span class='lineno'> 333</span>     based datasets, before we send the query to Snuba.
<span class='lineno'> 334</span>     &quot;&quot;&quot;
<span class='lineno'> 335</span>     if &quot;project_id&quot; in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', title='?'>query_params</a>.filter_keys:
<span class='lineno'> 336</span>         # If we are given a set of project ids, use those directly.
<span class='lineno'> 337</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', title='list'>project_ids</a> = list(set(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', title='?'>query_params</a>.filter_keys[&quot;project_id&quot;]))
<span class='lineno'> 338</span>     elif <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', title='?'>query_params</a>.filter_keys:
<span class='lineno'> 339</span>         # Otherwise infer the project_ids from any related models
<span class='lineno'> 340</span>         with <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer', title='(?, str) -> ? / (str, str) -> ?'>timer</a>(&quot;get_related_project_ids&quot;):
<span class='lineno'> 341</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.ids', title='[[?]]'>ids</a> = [
<span class='lineno'> 342</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids', title='(?, ?) -> [?]'>get_related_project_ids</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.k', title='?'>k</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', title='?'>query_params</a>.filter_keys[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.k', title='?'>k</a>])
<span class='lineno'> 343</span>                 for <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.k', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.k', title='?'>k</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', title='?'>query_params</a>.filter_keys
<span class='lineno'> 344</span>             ]
<span class='lineno'> 345</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', title='list'>project_ids</a> = list(set.union(*map(set, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.ids', title='[[?]]'>ids</a>)))
<span class='lineno'> 346</span>     elif <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', title='?'>query_params</a>.conditions:
<span class='lineno'> 347</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', title='[?]'>project_ids</a> = []
<span class='lineno'> 348</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.cond', title='?'>cond</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.query_params', title='?'>query_params</a>.conditions:
<span class='lineno'> 349</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.cond', title='?'>cond</a>[0] == &quot;project_id&quot;:
<span class='lineno'> 350</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', title='[?]'>project_ids</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.cond', title='?'>cond</a>[2]] if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.cond', title='?'>cond</a>[1] == &quot;=&quot; else <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.cond', title='?'>cond</a>[2]
<span class='lineno'> 351</span>     else:
<span class='lineno'> 352</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', title='[?]'>project_ids</a> = []
<span class='lineno'> 353</span> 
<span class='lineno'> 354</span>     if not <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', title='{[?] | list}'>project_ids</a>:
<span class='lineno'> 355</span>         raise UnqualifiedQueryError(
<span class='lineno'> 356</span>             &quot;No project_id filter, or none could be inferred from other filters.&quot;
<span class='lineno'> 357</span>         )
<span class='lineno'> 358</span> 
<span class='lineno'> 359</span>     # any project will do, as they should all be from the same organization
<span class='lineno'> 360</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.organization_id', title='?'>organization_id</a> = Project.objects.get_from_cache(pk=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', title='{[?] | list}'>project_ids</a>[0]).organization_id
<span class='lineno'> 361</span> 
<span class='lineno'> 362</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.params', title='dict'>params</a> = {&quot;project&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.project_ids', title='{[?] | list}'>project_ids</a>}
<span class='lineno'> 363</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.with_org', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.with_org', title='bool'>with_org</a>:
<span class='lineno'> 364</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.params', title='dict'>params</a>[&quot;organization&quot;] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.organization_id', title='?'>organization_id</a>
<span class='lineno'> 365</span> 
<span class='lineno'> 366</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.organization_id', title='?'>organization_id</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects.params', title='dict'>params</a>
<span class='lineno'> 367</span> 
<span class='lineno'> 368</span> 
<span class='lineno'> 369</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations', title='? -> (None, dict)'>get_query_params_to_update_for_organizations</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', title='?'>query_params</a>):
<span class='lineno'> 370</span>     &quot;&quot;&quot;
<span class='lineno'> 371</span>     Get the organization ID and query params that need to be updated for organization
<span class='lineno'> 372</span>     based datasets, before we send the query to Snuba.
<span class='lineno'> 373</span>     &quot;&quot;&quot;
<span class='lineno'> 374</span>     if &quot;org_id&quot; in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', title='?'>query_params</a>.filter_keys:
<span class='lineno'> 375</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_ids', title='list'>organization_ids</a> = list(set(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', title='?'>query_params</a>.filter_keys[&quot;org_id&quot;]))
<span class='lineno'> 376</span>         if len(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_ids', title='list'>organization_ids</a>) != 1:
<span class='lineno'> 377</span>             raise UnqualifiedQueryError(&quot;Multiple organization_ids found. Only one allowed.&quot;)
<span class='lineno'> 378</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', title='?'>organization_id</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_ids', title='list'>organization_ids</a>[0]
<span class='lineno'> 379</span>     elif &quot;project_id&quot; in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', title='?'>query_params</a>.filter_keys:
<span class='lineno'> 380</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', title='?'>organization_id</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations._', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations._', title='dict'>_</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects', title='(?, bool) -> (?, dict)'>get_query_params_to_update_for_projects</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', title='?'>query_params</a>)
<span class='lineno'> 381</span>     elif &quot;key_id&quot; in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', title='?'>query_params</a>.filter_keys:
<span class='lineno'> 382</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.key_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.key_ids', title='list'>key_ids</a> = list(set(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.query_params', title='?'>query_params</a>.filter_keys[&quot;key_id&quot;]))
<span class='lineno'> 383</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.project_key', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.project_key', title='?'>project_key</a> = ProjectKey.objects.get(pk=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.key_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.key_ids', title='list'>key_ids</a>[0])
<span class='lineno'> 384</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', title='?'>organization_id</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.project_key', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.project_key', title='?'>project_key</a>.project.organization_id
<span class='lineno'> 385</span>     else:
<span class='lineno'> 386</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', title='None'>organization_id</a> = None
<span class='lineno'> 387</span> 
<span class='lineno'> 388</span>     if not <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', title='None'>organization_id</a>:
<span class='lineno'> 389</span>         raise UnqualifiedQueryError(
<span class='lineno'> 390</span>             &quot;No organization_id filter, or none could be inferred from other filters.&quot;
<span class='lineno'> 391</span>         )
<span class='lineno'> 392</span> 
<span class='lineno'> 393</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', title='None'>organization_id</a>, {&quot;organization&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations.organization_id', title='None'>organization_id</a>}
<span class='lineno'> 394</span> 
<span class='lineno'> 395</span> 
<span class='lineno'> 396</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params', title='? -> (dict, {? -> ? | ? -> ?}, ? -> ?)'>_prepare_query_params</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>):
<span class='lineno'> 397</span>     # convert to naive UTC datetimes, as Snuba only deals in UTC
<span class='lineno'> 398</span>     # and this avoids offset-naive and offset-aware issues
<span class='lineno'> 399</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', title='?'>start</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime', title='? -> ?'>naiveify_datetime</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.start)
<span class='lineno'> 400</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.end', title='?'>end</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime', title='? -> ?'>naiveify_datetime</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.end)
<span class='lineno'> 401</span> 
<span class='lineno'> 402</span>     with <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer', title='(?, str) -> ? / (str, str) -> ?'>timer</a>(&quot;get_snuba_map&quot;):
<span class='lineno'> 403</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.forward', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.forward', title='{? -> ? | ? -> ?}'>forward</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.reverse', title='? -> ?'>reverse</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators', title='(?, bool) -> ({? -> ? | ? -> ?}, ? -> ?)'>get_snuba_translators</a>(
<span class='lineno'> 404</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.filter_keys, is_grouprelease=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.is_grouprelease
<span class='lineno'> 405</span>         )
<span class='lineno'> 406</span> 
<span class='lineno'> 407</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.dataset in [
<span class='lineno'> 408</span>         Dataset.Events,
<span class='lineno'> 409</span>         Dataset.Discover,
<span class='lineno'> 410</span>         Dataset.Sessions,
<span class='lineno'> 411</span>         Dataset.Transactions,
<span class='lineno'> 412</span>     ]:
<span class='lineno'> 413</span>         (<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.organization_id', title='?'>organization_id</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.params_to_update', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.params_to_update', title='dict'>params_to_update</a>) = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_projects', title='(?, bool) -> (?, dict)'>get_query_params_to_update_for_projects</a>(
<span class='lineno'> 414</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>, with_org=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.dataset == Dataset.Sessions
<span class='lineno'> 415</span>         )
<span class='lineno'> 416</span>     elif <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.dataset in [Dataset.Outcomes, Dataset.OutcomesRaw]:
<span class='lineno'> 417</span>         (<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.organization_id', title='None'>organization_id</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.params_to_update', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.params_to_update', title='dict'>params_to_update</a>) = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_query_params_to_update_for_organizations', title='? -> (None, dict)'>get_query_params_to_update_for_organizations</a>(
<span class='lineno'> 418</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>
<span class='lineno'> 419</span>         )
<span class='lineno'> 420</span>     else:
<span class='lineno'> 421</span>         raise UnqualifiedQueryError(
<span class='lineno'> 422</span>             &quot;No strategy found for getting an organization for the given dataset.&quot;
<span class='lineno'> 423</span>         )
<span class='lineno'> 424</span> 
<span class='lineno'> 425</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.kwargs.update(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.params_to_update', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.params_to_update', title='{dict | dict}'>params_to_update</a>)
<span class='lineno'> 426</span> 
<span class='lineno'> 427</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.col', title='?'>col</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.keys', title='?'>keys</a> in six.iteritems(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.forward', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.forward', title='{? -> ? | ? -> ?}'>forward</a>(deepcopy(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.filter_keys))):
<span class='lineno'> 428</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.keys', title='?'>keys</a>:
<span class='lineno'> 429</span>             if len(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.keys', title='?'>keys</a>) == 1 and None in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.keys', title='?'>keys</a>:
<span class='lineno'> 430</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.conditions.append((<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.col', title='?'>col</a>, &quot;IS NULL&quot;, None))
<span class='lineno'> 431</span>             else:
<span class='lineno'> 432</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.conditions.append((<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.col', title='?'>col</a>, &quot;IN&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.keys', title='?'>keys</a>))
<span class='lineno'> 433</span> 
<span class='lineno'> 434</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.retention', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.retention', title='?'>retention</a> = quotas.get_event_retention(organization=Organization(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.organization_id', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.organization_id', title='None'>organization_id</a>))
<span class='lineno'> 435</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.retention', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.retention', title='?'>retention</a>:
<span class='lineno'> 436</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', title='int'>start</a> = max(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', title='?'>start</a>, datetime.utcnow() - timedelta(days=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.retention', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.retention', title='?'>retention</a>))
<span class='lineno'> 437</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', title='int'>start</a> &gt; <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.end', title='?'>end</a>:
<span class='lineno'> 438</span>             raise QueryOutsideRetentionError(
<span class='lineno'> 439</span>                 &quot;Invalid date range. Please try a more recent date range.&quot;
<span class='lineno'> 440</span>             )
<span class='lineno'> 441</span> 
<span class='lineno'> 442</span>     # if `shrink_time_window` pushed `start` after `end` it means the user queried
<span class='lineno'> 443</span>     # a Group for T1 to T2 when the group was only active for T3 to T4, so the query
<span class='lineno'> 444</span>     # wouldn&#39;t return any results anyway
<span class='lineno'> 445</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.new_start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.new_start', title='int'>new_start</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window', title='(?, int) -> int / (?, ?) -> int'>shrink_time_window</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.filter_keys.get(&quot;group_id&quot;), <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', title='int'>start</a>)
<span class='lineno'> 446</span> 
<span class='lineno'> 447</span>     # TODO (alexh) this is a quick emergency fix for an occasion where a search
<span class='lineno'> 448</span>     # results in only 1 django candidate, which is then passed to snuba to
<span class='lineno'> 449</span>     # check and we raised because of it. Remove this once we figure out why the
<span class='lineno'> 450</span>     # candidate was returned from django at all if it existed only outside the
<span class='lineno'> 451</span>     # time range of the query
<span class='lineno'> 452</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.new_start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.new_start', title='int'>new_start</a> &lt;= <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.end', title='?'>end</a>:
<span class='lineno'> 453</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', title='int'>start</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.new_start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.new_start', title='int'>new_start</a>
<span class='lineno'> 454</span> 
<span class='lineno'> 455</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', title='int'>start</a> &gt; <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.end', title='?'>end</a>:
<span class='lineno'> 456</span>         raise QueryOutsideGroupActivityError
<span class='lineno'> 457</span> 
<span class='lineno'> 458</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.kwargs.update(
<span class='lineno'> 459</span>         {
<span class='lineno'> 460</span>             &quot;dataset&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.dataset.value,
<span class='lineno'> 461</span>             &quot;from_date&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.start', title='int'>start</a>.isoformat(),
<span class='lineno'> 462</span>             &quot;to_date&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.end', title='?'>end</a>.isoformat(),
<span class='lineno'> 463</span>             &quot;groupby&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.groupby,
<span class='lineno'> 464</span>             &quot;conditions&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.conditions,
<span class='lineno'> 465</span>             &quot;aggregations&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.aggregations,
<span class='lineno'> 466</span>             &quot;granularity&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.rollup,  # TODO name these things the same
<span class='lineno'> 467</span>         }
<span class='lineno'> 468</span>     )
<span class='lineno'> 469</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.kwargs', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.kwargs', title='dict'>kwargs</a> = {<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.k', title='?'>k</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.v', title='?'>v</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.k', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.k', title='?'>k</a></a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.v', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.v', title='?'>v</a></a> in six.iteritems(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.query_params', title='?'>query_params</a>.kwargs) if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.v', title='?'>v</a> is not None}
<span class='lineno'> 470</span> 
<span class='lineno'> 471</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.kwargs', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.kwargs', title='dict'>kwargs</a>.update(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.OVERRIDE_OPTIONS', title='dict'>OVERRIDE_OPTIONS</a>)
<span class='lineno'> 472</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.kwargs', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.kwargs', title='dict'>kwargs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.forward', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.forward', title='{? -> ? | ? -> ?}'>forward</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params.reverse', title='? -> ?'>reverse</a>
<span class='lineno'> 473</span> 
<span class='lineno'> 474</span> 
<span class='lineno'> 475</span> class <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams', title='<SnubaQueryParams>'>SnubaQueryParams</a>(object):
<span class='lineno'> 476</span>     &quot;&quot;&quot;
<span class='lineno'> 477</span>     Represents the information needed to make a query to Snuba.
<span class='lineno'> 478</span> 
<span class='lineno'> 479</span>     `start` and `end`: The beginning and end of the query time window (required)
<span class='lineno'> 480</span> 
<span class='lineno'> 481</span>     `groupby`: A list of column names to group by.
<span class='lineno'> 482</span> 
<span class='lineno'> 483</span>     `conditions`: A list of (column, operator, literal) conditions to be passed
<span class='lineno'> 484</span>     to the query. Conditions that we know will not have to be translated should
<span class='lineno'> 485</span>     be passed this way (eg tag[foo] = bar).
<span class='lineno'> 486</span> 
<span class='lineno'> 487</span>     `filter_keys`: A dictionary of {col: [key, ...]} that will be converted
<span class='lineno'> 488</span>     into &quot;col IN (key, ...)&quot; conditions. These are used to restrict the query to
<span class='lineno'> 489</span>     known sets of project/issue/environment/release etc. Appropriate
<span class='lineno'> 490</span>     translations (eg. from environment model ID to environment name) are
<span class='lineno'> 491</span>     performed on the query, and the inverse translation performed on the
<span class='lineno'> 492</span>     result. The project_id(s) to restrict the query to will also be
<span class='lineno'> 493</span>     automatically inferred from these keys.
<span class='lineno'> 494</span> 
<span class='lineno'> 495</span>     `aggregations` a list of (aggregation_function, column, alias) tuples to be
<span class='lineno'> 496</span>     passed to the query.
<span class='lineno'> 497</span> 
<span class='lineno'> 498</span>     The rest of the args are passed directly into the query JSON unmodified.
<span class='lineno'> 499</span>     See the snuba schema for details.
<span class='lineno'> 500</span>     &quot;&quot;&quot;
<span class='lineno'> 501</span> 
<span class='lineno'> 502</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__', title='? -> ?'>__init__</a>(
<span class='lineno'> 503</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>,
<span class='lineno'> 504</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.dataset', title='None'>dataset</a>=None,
<span class='lineno'> 505</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.start', title='None'>start</a>=None,
<span class='lineno'> 506</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.end', title='None'>end</a>=None,
<span class='lineno'> 507</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.groupby', title='None'>groupby</a>=None,
<span class='lineno'> 508</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.conditions', title='None'>conditions</a>=None,
<span class='lineno'> 509</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.filter_keys', title='None'>filter_keys</a>=None,
<span class='lineno'> 510</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.aggregations', title='None'>aggregations</a>=None,
<span class='lineno'> 511</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.rollup', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.rollup', title='None'>rollup</a>=None,
<span class='lineno'> 512</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.referrer', title='None'>referrer</a>=None,
<span class='lineno'> 513</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.is_grouprelease', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.is_grouprelease', title='bool'>is_grouprelease</a>=False,
<span class='lineno'> 514</span>         **kwargs
<span class='lineno'> 515</span>     ):
<span class='lineno'> 516</span>         # TODO: instead of having events be the default, make dataset required.
<span class='lineno'> 517</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.dataset', title='None'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.dataset', title='None'>dataset</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.dataset', title='None'>dataset</a> or Dataset.Events
<span class='lineno'> 518</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.start', title='<datetime>'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.start', title='<datetime>'>start</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.start', title='None'>start</a> or datetime.utcfromtimestamp(0)  # will be clamped to project retention
<span class='lineno'> 519</span>         # Snuba has end exclusive but our UI wants it generally to be inclusive.
<span class='lineno'> 520</span>         # This shows up in unittests: https://github.com/getsentry/sentry/pull/15939
<span class='lineno'> 521</span>         # We generally however require that the API user is aware of the exclusive
<span class='lineno'> 522</span>         # end.
<span class='lineno'> 523</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.end', title='None'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.end', title='None'>end</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.end', title='None'>end</a> or datetime.utcnow() + timedelta(seconds=1)
<span class='lineno'> 524</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.groupby', title='[?]'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.groupby', title='[?]'>groupby</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.groupby', title='None'>groupby</a> or []
<span class='lineno'> 525</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.conditions', title='[?]'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.conditions', title='[?]'>conditions</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.conditions', title='None'>conditions</a> or []
<span class='lineno'> 526</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.aggregations', title='[?]'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.aggregations', title='[?]'>aggregations</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.aggregations', title='None'>aggregations</a> or []
<span class='lineno'> 527</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.filter_keys', title='dict'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.filter_keys', title='dict'>filter_keys</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.filter_keys', title='None'>filter_keys</a> or {}
<span class='lineno'> 528</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.rollup', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.rollup', title='None'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.rollup', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.rollup', title='None'>rollup</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.rollup', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.rollup', title='None'>rollup</a>
<span class='lineno'> 529</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.referrer', title='None'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.referrer', title='None'>referrer</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.referrer', title='None'>referrer</a>
<span class='lineno'> 530</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>.<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.is_grouprelease', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.is_grouprelease', title='bool'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.is_grouprelease', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.is_grouprelease', title='bool'>is_grouprelease</a></a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.is_grouprelease', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.is_grouprelease', title='bool'>is_grouprelease</a>
<span class='lineno'> 531</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.__init__.self', title='SnubaQueryParams'>self</a>.<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.kwargs', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.kwargs', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.kwargs', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams.kwargs', title='?'>kwargs</a></a> = kwargs
<span class='lineno'> 532</span> 
<span class='lineno'> 533</span> 
<span class='lineno'> 534</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query', title='(None, None, None, None, None, None, None, None, None, bool) -> None'>raw_query</a>(
<span class='lineno'> 535</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.dataset', title='None'>dataset</a>=None,
<span class='lineno'> 536</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.start', title='None'>start</a>=None,
<span class='lineno'> 537</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.end', title='None'>end</a>=None,
<span class='lineno'> 538</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.groupby', title='None'>groupby</a>=None,
<span class='lineno'> 539</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.conditions', title='None'>conditions</a>=None,
<span class='lineno'> 540</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.filter_keys', title='None'>filter_keys</a>=None,
<span class='lineno'> 541</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.aggregations', title='None'>aggregations</a>=None,
<span class='lineno'> 542</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.rollup', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.rollup', title='None'>rollup</a>=None,
<span class='lineno'> 543</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.referrer', title='None'>referrer</a>=None,
<span class='lineno'> 544</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.is_grouprelease', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.is_grouprelease', title='bool'>is_grouprelease</a>=False,
<span class='lineno'> 545</span>     **kwargs
<span class='lineno'> 546</span> ):
<span class='lineno'> 547</span>     &quot;&quot;&quot;
<span class='lineno'> 548</span>     Sends a query to snuba.  See `SnubaQueryParams` docstring for param
<span class='lineno'> 549</span>     descriptions.
<span class='lineno'> 550</span>     &quot;&quot;&quot;
<span class='lineno'> 551</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.snuba_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.snuba_params', title='SnubaQueryParams'>snuba_params</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.SnubaQueryParams', title='<SnubaQueryParams>'>SnubaQueryParams</a>(
<span class='lineno'> 552</span>         dataset=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.dataset', title='None'>dataset</a>,
<span class='lineno'> 553</span>         start=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.start', title='None'>start</a>,
<span class='lineno'> 554</span>         end=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.end', title='None'>end</a>,
<span class='lineno'> 555</span>         groupby=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.groupby', title='None'>groupby</a>,
<span class='lineno'> 556</span>         conditions=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.conditions', title='None'>conditions</a>,
<span class='lineno'> 557</span>         filter_keys=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.filter_keys', title='None'>filter_keys</a>,
<span class='lineno'> 558</span>         aggregations=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.aggregations', title='None'>aggregations</a>,
<span class='lineno'> 559</span>         rollup=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.rollup', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.rollup', title='None'>rollup</a>,
<span class='lineno'> 560</span>         is_grouprelease=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.is_grouprelease', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.is_grouprelease', title='bool'>is_grouprelease</a>,
<span class='lineno'> 561</span>         **kwargs
<span class='lineno'> 562</span>     )
<span class='lineno'> 563</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query', title='(?, None) -> [?] / ([SnubaQueryParams], None) -> [?]'>bulk_raw_query</a>([<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.snuba_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.snuba_params', title='SnubaQueryParams'>snuba_params</a>], referrer=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query.referrer', title='None'>referrer</a>)[0]
<span class='lineno'> 564</span> 
<span class='lineno'> 565</span> 
<span class='lineno'> 566</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query', title='(?, None) -> [?] / ([SnubaQueryParams], None) -> [?]'>bulk_raw_query</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_param_list', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_param_list', title='[SnubaQueryParams]'>snuba_param_list</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.referrer', title='None'>referrer</a>=None):
<span class='lineno'> 567</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.headers', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.headers', title='dict'>headers</a> = {}
<span class='lineno'> 568</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.referrer', title='None'>referrer</a>:
<span class='lineno'> 569</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.headers', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.headers', title='dict'>headers</a>[&quot;referer&quot;] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.referrer', title='None'>referrer</a>
<span class='lineno'> 570</span> 
<span class='lineno'> 571</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_param_list', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_param_list', title='[?]'>query_param_list</a> = map(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._prepare_query_params', title='? -> (dict, {? -> ? | ? -> ?}, ? -> ?)'>_prepare_query_params</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_param_list', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_param_list', title='[SnubaQueryParams]'>snuba_param_list</a>)
<span class='lineno'> 572</span> 
<span class='lineno'> 573</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query', title='? -> (?, ?, ?)'>snuba_query</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.params', title='?'>params</a>):
<span class='lineno'> 574</span>         query_params, forward, reverse, thread_hub = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.params', title='?'>params</a>
<span class='lineno'> 575</span>         try:
<span class='lineno'> 576</span>             with <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer', title='(?, str) -> ? / (str, str) -> ?'>timer</a>(&quot;snuba_query&quot;):
<span class='lineno'> 577</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.body', title='?'>body</a> = json.dumps(query_params)
<span class='lineno'> 578</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.referrer', title='?'>referrer</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.headers', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.headers', title='dict'>headers</a>.get(&quot;referer&quot;, &quot;&lt;unknown&gt;&quot;)
<span class='lineno'> 579</span>                 with thread_hub.start_span(
<span class='lineno'> 580</span>                     op=&quot;snuba&quot;, description=u&quot;query {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.referrer', title='?'>referrer</a>)
<span class='lineno'> 581</span>                 ) as <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.span', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.span', title='?'>span</a>:
<span class='lineno'> 582</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.span', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.span', title='?'>span</a>.set_tag(&quot;referrer&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.referrer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.referrer', title='?'>referrer</a>)
<span class='lineno'> 583</span>                     for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.param_key', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.param_key', title='?'>param_key</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.param_data', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.param_data', title='?'>param_data</a> in six.iteritems(query_params):
<span class='lineno'> 584</span>                         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.span', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.span', title='?'>span</a>.set_data(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.param_key', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.param_key', title='?'>param_key</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.param_data', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.param_data', title='?'>param_data</a>)
<span class='lineno'> 585</span>                     return (
<span class='lineno'> 586</span>                         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._snuba_pool', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._snuba_pool', title='?'>_snuba_pool</a>.urlopen(&quot;POST&quot;, &quot;/query&quot;, body=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.body', title='?'>body</a>, headers=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.headers', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.headers', title='dict'>headers</a>),
<span class='lineno'> 587</span>                         forward,
<span class='lineno'> 588</span>                         reverse,
<span class='lineno'> 589</span>                     )
<span class='lineno'> 590</span>         except urllib3.exceptions.HTTPError as <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.err', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query.err', title='?'>err</a>:
<span class='lineno'> 591</span>             raise SnubaError(err)
<span class='lineno'> 592</span> 
<span class='lineno'> 593</span>     with sentry_sdk.start_span(
<span class='lineno'> 594</span>         op=&quot;start_snuba_query&quot;,
<span class='lineno'> 595</span>         description=u&quot;running {} snuba queries&quot;.format(len(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_param_list', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_param_list', title='[SnubaQueryParams]'>snuba_param_list</a>)),
<span class='lineno'> 596</span>     ) as <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.span', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.span', title='?'>span</a>:
<span class='lineno'> 597</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.span', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.span', title='?'>span</a>.set_tag(&quot;referrer&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.headers', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.headers', title='dict'>headers</a>.get(&quot;referer&quot;, &quot;&lt;unknown&gt;&quot;))
<span class='lineno'> 598</span>         if len(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_param_list', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_param_list', title='[SnubaQueryParams]'>snuba_param_list</a>) &gt; 1:
<span class='lineno'> 599</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_results', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_results', title='list'>query_results</a> = list(
<span class='lineno'> 600</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._query_thread_pool', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._query_thread_pool', title='?'>_query_thread_pool</a>.map(
<span class='lineno'> 601</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query', title='? -> (?, ?, ?)'>snuba_query</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.params', title='?'>params</a> + (Hub(Hub.current),) for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.params', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.params', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.params', title='?'>params</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_param_list', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_param_list', title='[?]'>query_param_list</a>]
<span class='lineno'> 602</span>                 )
<span class='lineno'> 603</span>             )
<span class='lineno'> 604</span>         else:
<span class='lineno'> 605</span>             # No need to submit to the thread pool if we&#39;re just performing a
<span class='lineno'> 606</span>             # single query
<span class='lineno'> 607</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_results', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_results', title='[(?, ?, ?)]'>query_results</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.snuba_query', title='? -> (?, ?, ?)'>snuba_query</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_param_list', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_param_list', title='[?]'>query_param_list</a>[0] + (Hub(Hub.current),))]
<span class='lineno'> 608</span> 
<span class='lineno'> 609</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.results', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.results', title='[?]'>results</a> = []
<span class='lineno'> 610</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.response', title='?'>response</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query._', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query._', title='?'>_</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.reverse', title='?'>reverse</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_results', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.query_results', title='{[(?, ?, ?)] | list}'>query_results</a>:
<span class='lineno'> 611</span>         try:
<span class='lineno'> 612</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', title='?'>body</a> = json.loads(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.response', title='?'>response</a>.data)
<span class='lineno'> 613</span>         except ValueError:
<span class='lineno'> 614</span>             raise UnexpectedResponseError(
<span class='lineno'> 615</span>                 u&quot;Could not decode JSON response: {}&quot;.format(response.data)
<span class='lineno'> 616</span>             )
<span class='lineno'> 617</span> 
<span class='lineno'> 618</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.response', title='?'>response</a>.status != 200:
<span class='lineno'> 619</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', title='?'>body</a>.get(&quot;error&quot;):
<span class='lineno'> 620</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.error', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.error', title='?'>error</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', title='?'>body</a>[&quot;error&quot;]
<span class='lineno'> 621</span>                 if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.response', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.response', title='?'>response</a>.status == 429:
<span class='lineno'> 622</span>                     raise RateLimitExceeded(error[&quot;message&quot;])
<span class='lineno'> 623</span>                 elif <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.error', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.error', title='?'>error</a>[&quot;type&quot;] == &quot;schema&quot;:
<span class='lineno'> 624</span>                     raise SchemaValidationError(error[&quot;message&quot;])
<span class='lineno'> 625</span>                 elif <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.error', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.error', title='?'>error</a>[&quot;type&quot;] == &quot;clickhouse&quot;:
<span class='lineno'> 626</span>                     raise clickhouse_error_codes_map.get(error[&quot;code&quot;], QueryExecutionError)(
<span class='lineno'> 627</span>                         error[&quot;message&quot;]
<span class='lineno'> 628</span>                     )
<span class='lineno'> 629</span>                 else:
<span class='lineno'> 630</span>                     raise SnubaError(error[&quot;message&quot;])
<span class='lineno'> 631</span>             else:
<span class='lineno'> 632</span>                 raise SnubaError(u&quot;HTTP {}&quot;.format(response.status))
<span class='lineno'> 633</span> 
<span class='lineno'> 634</span>         # Forward and reverse translation maps from model ids to snuba keys, per column
<span class='lineno'> 635</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', title='?'>body</a>[&quot;data&quot;] = [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.reverse', title='?'>reverse</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.d', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.d', title='?'>d</a>) for <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.d', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.d', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.d', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.d', title='?'>d</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', title='?'>body</a>[&quot;data&quot;]]
<span class='lineno'> 636</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.results', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.results', title='[?]'>results</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.body', title='?'>body</a>)
<span class='lineno'> 637</span> 
<span class='lineno'> 638</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.results', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.bulk_raw_query.results', title='[?]'>results</a>
<span class='lineno'> 639</span> 
<span class='lineno'> 640</span> 
<span class='lineno'> 641</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query', title='(None, None, None, None, None, None, None, None, None) -> {(dict, dict) | dict}'>query</a>(
<span class='lineno'> 642</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.dataset', title='None'>dataset</a>=None,
<span class='lineno'> 643</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.start', title='None'>start</a>=None,
<span class='lineno'> 644</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.end', title='None'>end</a>=None,
<span class='lineno'> 645</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', title='None'>groupby</a>=None,
<span class='lineno'> 646</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.conditions', title='None'>conditions</a>=None,
<span class='lineno'> 647</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.filter_keys', title='None'>filter_keys</a>=None,
<span class='lineno'> 648</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregations', title='None'>aggregations</a>=None,
<span class='lineno'> 649</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_columns', title='None'>selected_columns</a>=None,
<span class='lineno'> 650</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.totals', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.totals', title='None'>totals</a>=None,
<span class='lineno'> 651</span>     **kwargs
<span class='lineno'> 652</span> ):
<span class='lineno'> 653</span> 
<span class='lineno'> 654</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregations', title='[[str]]'>aggregations</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregations', title='None'>aggregations</a> or [[&quot;count()&quot;, &quot;&quot;, &quot;aggregate&quot;]]
<span class='lineno'> 655</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.filter_keys', title='dict'>filter_keys</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.filter_keys', title='None'>filter_keys</a> or {}
<span class='lineno'> 656</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_columns', title='[?]'>selected_columns</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_columns', title='None'>selected_columns</a> or []
<span class='lineno'> 657</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', title='[?]'>groupby</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', title='None'>groupby</a> or []
<span class='lineno'> 658</span> 
<span class='lineno'> 659</span>     try:
<span class='lineno'> 660</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.body', title='None'>body</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query', title='(None, None, None, None, None, None, None, None, None, bool) -> None'>raw_query</a>(
<span class='lineno'> 661</span>             dataset=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.dataset', title='None'>dataset</a>,
<span class='lineno'> 662</span>             start=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.start', title='None'>start</a>,
<span class='lineno'> 663</span>             end=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.end', title='None'>end</a>,
<span class='lineno'> 664</span>             groupby=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', title='[?]'>groupby</a>,
<span class='lineno'> 665</span>             conditions=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.conditions', title='None'>conditions</a>,
<span class='lineno'> 666</span>             filter_keys=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.filter_keys', title='dict'>filter_keys</a>,
<span class='lineno'> 667</span>             aggregations=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregations', title='[[str]]'>aggregations</a>,
<span class='lineno'> 668</span>             selected_columns=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_columns', title='[?]'>selected_columns</a>,
<span class='lineno'> 669</span>             totals=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.totals', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.totals', title='None'>totals</a>,
<span class='lineno'> 670</span>             **kwargs
<span class='lineno'> 671</span>         )
<span class='lineno'> 672</span>     except (QueryOutsideRetentionError, QueryOutsideGroupActivityError):
<span class='lineno'> 673</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.totals', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.totals', title='None'>totals</a>:
<span class='lineno'> 674</span>             return OrderedDict(), {}
<span class='lineno'> 675</span>         else:
<span class='lineno'> 676</span>             return OrderedDict()
<span class='lineno'> 677</span> 
<span class='lineno'> 678</span>     # Validate and scrub response, and translate snuba keys back to IDs
<span class='lineno'> 679</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregate_names', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregate_names', title='[str]'>aggregate_names</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.a', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.a', title='[str]'>a</a>[2] for <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.a', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.a', title='[str]'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.a', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.a', title='[str]'>a</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregations', title='[[str]]'>aggregations</a>]
<span class='lineno'> 680</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_names', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_names', title='[?]'>selected_names</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', title='?'>c</a>[2] if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', title='?'>c</a>, (list, tuple)) else <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', title='?'>c</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', title='?'>c</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_columns', title='[?]'>selected_columns</a>]
<span class='lineno'> 681</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.expected_cols', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.expected_cols', title='?'>expected_cols</a> = set(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', title='[?]'>groupby</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregate_names', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregate_names', title='[str]'>aggregate_names</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_names', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_names', title='[?]'>selected_names</a>)
<span class='lineno'> 682</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.got_cols', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.got_cols', title='?'>got_cols</a> = set(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', title='?'>c</a>[&quot;name&quot;] for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.c', title='?'>c</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.body', title='None'>body</a>[&quot;meta&quot;])
<span class='lineno'> 683</span> 
<span class='lineno'> 684</span>     assert <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.expected_cols', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.expected_cols', title='?'>expected_cols</a> == <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.got_cols', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.got_cols', title='?'>got_cols</a>, &quot;expected {}, got {}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.expected_cols', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.expected_cols', title='?'>expected_cols</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.got_cols', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.got_cols', title='?'>got_cols</a>)
<span class='lineno'> 685</span> 
<span class='lineno'> 686</span>     with <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.timer', title='(?, str) -> ? / (str, str) -> ?'>timer</a>(&quot;process_result&quot;):
<span class='lineno'> 687</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.totals', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.totals', title='None'>totals</a>:
<span class='lineno'> 688</span>             return (
<span class='lineno'> 689</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups', title='(?, [?], ?) -> dict / (?, ?, ?) -> dict'>nest_groups</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.body', title='None'>body</a>[&quot;data&quot;], <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', title='[?]'>groupby</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregate_names', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregate_names', title='[str]'>aggregate_names</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_names', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_names', title='[?]'>selected_names</a>),
<span class='lineno'> 690</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.body', title='None'>body</a>[&quot;totals&quot;],
<span class='lineno'> 691</span>             )
<span class='lineno'> 692</span>         else:
<span class='lineno'> 693</span>             return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups', title='(?, [?], ?) -> dict / (?, ?, ?) -> dict'>nest_groups</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.body', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.body', title='None'>body</a>[&quot;data&quot;], <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.groupby', title='[?]'>groupby</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregate_names', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.aggregate_names', title='[str]'>aggregate_names</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_names', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.query.selected_names', title='[?]'>selected_names</a>)
<span class='lineno'> 694</span> 
<span class='lineno'> 695</span> 
<span class='lineno'> 696</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups', title='(?, [?], ?) -> dict / (?, ?, ?) -> dict'>nest_groups</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', title='?'>data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.groups', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.groups', title='[?]'>groups</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.aggregate_cols', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.aggregate_cols', title='?'>aggregate_cols</a>):
<span class='lineno'> 697</span>     &quot;&quot;&quot;
<span class='lineno'> 698</span>     Build a nested mapping from query response rows. Each group column
<span class='lineno'> 699</span>     gives a new level of nesting and the leaf result is the aggregate
<span class='lineno'> 700</span>     &quot;&quot;&quot;
<span class='lineno'> 701</span>     if not <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.groups', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.groups', title='[?]'>groups</a>:
<span class='lineno'> 702</span>         # At leaf level, just return the aggregations from the first data row
<span class='lineno'> 703</span>         if len(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.aggregate_cols', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.aggregate_cols', title='?'>aggregate_cols</a>) == 1:
<span class='lineno'> 704</span>             # Special case, if there is only one aggregate, just return the raw value
<span class='lineno'> 705</span>             return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', title='?'>data</a>[0][<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.aggregate_cols', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.aggregate_cols', title='?'>aggregate_cols</a>[0]] if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', title='?'>data</a> else None
<span class='lineno'> 706</span>         else:
<span class='lineno'> 707</span>             return {<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.c', title='?'>c</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', title='?'>data</a>[0][<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.c', title='?'>c</a>] for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.c', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.c', title='?'>c</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.aggregate_cols', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.aggregate_cols', title='?'>aggregate_cols</a>} if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', title='?'>data</a> else None
<span class='lineno'> 708</span>     else:
<span class='lineno'> 709</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.g', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.g', title='?'>g</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.rest', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.rest', title='[?]'>rest</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.groups', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.groups', title='[?]'>groups</a>[0], <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.groups', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.groups', title='[?]'>groups</a>[1:]
<span class='lineno'> 710</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.inter', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.inter', title='?'>inter</a> = OrderedDict()
<span class='lineno'> 711</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.d', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.d', title='?'>d</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.data', title='?'>data</a>:
<span class='lineno'> 712</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.inter', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.inter', title='?'>inter</a>.setdefault(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.d', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.d', title='?'>d</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.g', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.g', title='?'>g</a>], []).append(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.d', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.d', title='?'>d</a>)
<span class='lineno'> 713</span>         return OrderedDict(
<span class='lineno'> 714</span>             (<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.k', title='?'>k</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups', title='(?, [?], ?) -> dict / (?, ?, ?) -> dict'>nest_groups</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.v', title='?'>v</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.rest', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.rest', title='[?]'>rest</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.aggregate_cols', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.aggregate_cols', title='?'>aggregate_cols</a>)) for <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.k', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.k', title='?'>k</a></a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.v', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.v', title='?'>v</a></a> in six.iteritems(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.inter', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.nest_groups.inter', title='?'>inter</a>)
<span class='lineno'> 715</span>         )
<span class='lineno'> 716</span> 
<span class='lineno'> 717</span> 
<span class='lineno'> 718</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column', title='None -> ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str} / ? -> ? -> ?'>resolve_column</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column.dataset', title='None'>dataset</a>):
<span class='lineno'> 719</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column', title='? -> ?'>_resolve_column</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a>):
<span class='lineno'> 720</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a> is None or <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a>.startswith(&quot;tags[&quot;) or <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QUOTED_LITERAL_RE', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.QUOTED_LITERAL_RE', title='?'>QUOTED_LITERAL_RE</a>.match(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a>):
<span class='lineno'> 721</span>             return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a>
<span class='lineno'> 722</span> 
<span class='lineno'> 723</span>         # Some dataset specific logic:
<span class='lineno'> 724</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column.dataset', title='None'>dataset</a> == Dataset.Discover:
<span class='lineno'> 725</span>             if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a>, (list, tuple)) or <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a> == &quot;project_id&quot;:
<span class='lineno'> 726</span>                 return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a>
<span class='lineno'> 727</span>         else:
<span class='lineno'> 728</span>             if (
<span class='lineno'> 729</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASET_FIELDS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASET_FIELDS', title='dict'>DATASET_FIELDS</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column.dataset', title='None'>dataset</a>]
<span class='lineno'> 730</span>             ):  # Discover does not allow internal aliases to be used by customers, so doesn&#39;t get this logic.
<span class='lineno'> 731</span>                 return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a>
<span class='lineno'> 732</span> 
<span class='lineno'> 733</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASETS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASETS', title='dict'>DATASETS</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column.dataset', title='None'>dataset</a>]:
<span class='lineno'> 734</span>             return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASETS', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.DATASETS', title='dict'>DATASETS</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column.dataset', title='None'>dataset</a>][<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a>]
<span class='lineno'> 735</span>         return u&quot;tags[{}]&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column.col', title='{(? -> list, ? -> tuple) | ? -> list}'>col</a>)
<span class='lineno'> 736</span> 
<span class='lineno'> 737</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column._resolve_column', title='? -> ?'>_resolve_column</a>
<span class='lineno'> 738</span> 
<span class='lineno'> 739</span> 
<span class='lineno'> 740</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', title='(? -> list, ?) -> {? -> list | [?]} / ((? -> list, ? -> tuple), ?) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ?) -> [?] / ((? -> list, ? -> tuple), ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> [?] / (? -> list, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {? -> list | [?]}'>resolve_condition</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>column_resolver</a>):
<span class='lineno'> 741</span>     &quot;&quot;&quot;
<span class='lineno'> 742</span>     When conditions have been parsed by the api.event_search module
<span class='lineno'> 743</span>     we can end up with conditions that are not valid on the current dataset
<span class='lineno'> 744</span>     due to how api.event_search checks for valid field names without
<span class='lineno'> 745</span>     being aware of the dataset.
<span class='lineno'> 746</span> 
<span class='lineno'> 747</span>     We have the dataset context here, so we need to re-scope conditions to the
<span class='lineno'> 748</span>     current dataset.
<span class='lineno'> 749</span> 
<span class='lineno'> 750</span>     cond (tuple) Condition to resolve aliases in.
<span class='lineno'> 751</span>     column_resolver (Function[string]) Function to resolve column names for the
<span class='lineno'> 752</span>                                        current dataset.
<span class='lineno'> 753</span>     &quot;&quot;&quot;
<span class='lineno'> 754</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.index', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.index', title='int'>index</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index', title='(? -> list, int) -> int / (?, int) -> int / ((? -> list, ? -> tuple), int) -> int'>get_function_index</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>)
<span class='lineno'> 755</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.index', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.index', title='int'>index</a> is not None:
<span class='lineno'> 756</span>         # IN conditions are detected as a function but aren&#39;t really.
<span class='lineno'> 757</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.index', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.index', title='int'>index</a>] == &quot;IN&quot;:
<span class='lineno'> 758</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[0] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>column_resolver</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[0])
<span class='lineno'> 759</span>             return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>
<span class='lineno'> 760</span> 
<span class='lineno'> 761</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.func_args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.func_args', title='? -> list'>func_args</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.index', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.index', title='int'>index</a> + 1]
<span class='lineno'> 762</span>         for (<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.i', title='?'>i</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.arg', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.arg', title='?'>arg</a>) in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.func_args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.func_args', title='? -> list'>func_args</a>):
<span class='lineno'> 763</span>             # Nested function
<span class='lineno'> 764</span>             if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.arg', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.arg', title='(? -> list, ? -> tuple)'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.arg', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.arg', title='(? -> list, ? -> tuple)'>arg</a></a>, (list, tuple)):
<span class='lineno'> 765</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.func_args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.func_args', title='? -> list'>func_args</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.i', title='?'>i</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', title='(? -> list, ?) -> {? -> list | [?]} / ((? -> list, ? -> tuple), ?) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ?) -> [?] / ((? -> list, ? -> tuple), ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> [?] / (? -> list, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {? -> list | [?]}'>resolve_condition</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.arg', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.arg', title='(? -> list, ? -> tuple)'>arg</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>column_resolver</a>)
<span class='lineno'> 766</span>             else:
<span class='lineno'> 767</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.func_args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.func_args', title='? -> list'>func_args</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.i', title='?'>i</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>column_resolver</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.arg', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.arg', title='(? -> list, ? -> tuple)'>arg</a>)
<span class='lineno'> 768</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.index', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.index', title='int'>index</a> + 1] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.func_args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.func_args', title='? -> list'>func_args</a>
<span class='lineno'> 769</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>
<span class='lineno'> 770</span> 
<span class='lineno'> 771</span>     # No function name found
<span class='lineno'> 772</span>     if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>, (list, tuple)) and len(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>):
<span class='lineno'> 773</span>         # Condition is [col, operator, value]
<span class='lineno'> 774</span>         if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[0], six.string_types) and len(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>) == 3:
<span class='lineno'> 775</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[0] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>column_resolver</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[0])
<span class='lineno'> 776</span>             return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>
<span class='lineno'> 777</span>         if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[0], (list, tuple)):
<span class='lineno'> 778</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_function_index', title='(? -> list, int) -> int / (?, int) -> int / ((? -> list, ? -> tuple), int) -> int'>get_function_index</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[0]) is not None:
<span class='lineno'> 779</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[0] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', title='(? -> list, ?) -> {? -> list | [?]} / ((? -> list, ? -> tuple), ?) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ?) -> [?] / ((? -> list, ? -> tuple), ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> [?] / (? -> list, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {? -> list | [?]}'>resolve_condition</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>[0], <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>column_resolver</a>)
<span class='lineno'> 780</span>                 return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>
<span class='lineno'> 781</span>             else:
<span class='lineno'> 782</span>                 # Nested conditions
<span class='lineno'> 783</span>                 return [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', title='(? -> list, ?) -> {? -> list | [?]} / ((? -> list, ? -> tuple), ?) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ?) -> [?] / ((? -> list, ? -> tuple), ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> [?] / (? -> list, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {? -> list | [?]}'>resolve_condition</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.item', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.item', title='? -> list'>item</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.column_resolver', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>column_resolver</a>) for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.item', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.item', title='? -> list'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.item', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.item', title='? -> list'>item</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition.cond', title='{(? -> list, ? -> tuple) | ? -> list}'>cond</a>]
<span class='lineno'> 784</span>     raise ValueError(&quot;Unexpected condition format %s&quot; % cond)
<span class='lineno'> 785</span> 
<span class='lineno'> 786</span> 
<span class='lineno'> 787</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.aliased_query', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.aliased_query', title='() -> None'>aliased_query</a>(**kwargs):
<span class='lineno'> 788</span>     &quot;&quot;&quot;
<span class='lineno'> 789</span>     Wrapper around raw_query that selects the dataset based on the
<span class='lineno'> 790</span>     selected_columns, conditions and groupby parameters.
<span class='lineno'> 791</span>     Useful for taking arbitrary end user queries and running
<span class='lineno'> 792</span>     them on one of the snuba datasets.
<span class='lineno'> 793</span> 
<span class='lineno'> 794</span>     This function will also resolve column aliases to match the selected dataset
<span class='lineno'> 795</span> 
<span class='lineno'> 796</span>     This method should be used sparingly. Instead prefer to use sentry.eventstore
<span class='lineno'> 797</span>     sentry.tagstore, or sentry.snuba.discover instead when reading data.
<span class='lineno'> 798</span>     &quot;&quot;&quot;
<span class='lineno'> 799</span>     with sentry_sdk.start_span(op=&quot;sentry.snuba.aliased_query&quot;):
<span class='lineno'> 800</span>         return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl', title='(None, None, None, None, None, None, None, None, None, None, None, None) -> None'>_aliased_query_impl</a>(**kwargs)
<span class='lineno'> 801</span> 
<span class='lineno'> 802</span> 
<span class='lineno'> 803</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl', title='(None, None, None, None, None, None, None, None, None, None, None, None) -> None'>_aliased_query_impl</a>(
<span class='lineno'> 804</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.start', title='None'>start</a>=None,
<span class='lineno'> 805</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.end', title='None'>end</a>=None,
<span class='lineno'> 806</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.groupby', title='None'>groupby</a>=None,
<span class='lineno'> 807</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', title='None'>conditions</a>=None,
<span class='lineno'> 808</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.filter_keys', title='None'>filter_keys</a>=None,
<span class='lineno'> 809</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregations', title='None'>aggregations</a>=None,
<span class='lineno'> 810</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', title='None'>selected_columns</a>=None,
<span class='lineno'> 811</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.arrayjoin', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.arrayjoin', title='None'>arrayjoin</a>=None,
<span class='lineno'> 812</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.having', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.having', title='None'>having</a>=None,
<span class='lineno'> 813</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.dataset', title='None'>dataset</a>=None,
<span class='lineno'> 814</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.orderby', title='None'>orderby</a>=None,
<span class='lineno'> 815</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.condition_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.condition_resolver', title='None'>condition_resolver</a>=None,
<span class='lineno'> 816</span>     **kwargs
<span class='lineno'> 817</span> ):
<span class='lineno'> 818</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.dataset', title='None'>dataset</a> is None:
<span class='lineno'> 819</span>         raise ValueError(&quot;A dataset is required, and is no longer automatically detected.&quot;)
<span class='lineno'> 820</span> 
<span class='lineno'> 821</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.derived_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.derived_columns', title='[? -> list]'>derived_columns</a> = []
<span class='lineno'> 822</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.resolve_func', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>resolve_func</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_column', title='None -> ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str} / ? -> ? -> ?'>resolve_column</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.dataset', title='None'>dataset</a>)
<span class='lineno'> 823</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', title='None'>selected_columns</a>:
<span class='lineno'> 824</span>         for (<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.i', title='?'>i</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.col', title='?'>col</a>) in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', title='None'>selected_columns</a>):
<span class='lineno'> 825</span>             if isinstance(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.col', title='(? -> list, ? -> tuple)'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.col', title='(? -> list, ? -> tuple)'>col</a></a>, (list, tuple)):
<span class='lineno'> 826</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.derived_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.derived_columns', title='[? -> list]'>derived_columns</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.col', title='(? -> list, ? -> tuple)'>col</a>[2])
<span class='lineno'> 827</span>             else:
<span class='lineno'> 828</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', title='None'>selected_columns</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.i', title='?'>i</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.resolve_func', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>resolve_func</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.col', title='(? -> list, ? -> tuple)'>col</a>)
<span class='lineno'> 829</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', title='[?]'>selected_columns</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', title='?'>c</a> for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', title='?'>c</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', title='None'>selected_columns</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', title='?'>c</a>]
<span class='lineno'> 830</span> 
<span class='lineno'> 831</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregations', title='None'>aggregations</a>:
<span class='lineno'> 832</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregation', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregation', title='?'>aggregation</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregations', title='None'>aggregations</a>:
<span class='lineno'> 833</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.derived_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.derived_columns', title='[? -> list]'>derived_columns</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregation', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregation', title='?'>aggregation</a>[2])
<span class='lineno'> 834</span> 
<span class='lineno'> 835</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', title='None'>conditions</a>:
<span class='lineno'> 836</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.column_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.column_resolver', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>column_resolver</a> = (
<span class='lineno'> 837</span>             functools.partial(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.condition_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.condition_resolver', title='None'>condition_resolver</a>, dataset=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.dataset', title='None'>dataset</a>)
<span class='lineno'> 838</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.condition_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.condition_resolver', title='None'>condition_resolver</a>
<span class='lineno'> 839</span>             else <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.resolve_func', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>resolve_func</a>
<span class='lineno'> 840</span>         )
<span class='lineno'> 841</span>         for (<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.i', title='?'>i</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.condition', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.condition', title='?'>condition</a>) in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', title='None'>conditions</a>):
<span class='lineno'> 842</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.replacement', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.replacement', title='[?]'>replacement</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', title='(? -> list, ?) -> {? -> list | [?]} / ((? -> list, ? -> tuple), ?) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ?) -> [?] / ((? -> list, ? -> tuple), ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> [?] / (? -> list, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {? -> list | [?]}'>resolve_condition</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.condition', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.condition', title='?'>condition</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.column_resolver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.column_resolver', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>column_resolver</a>)
<span class='lineno'> 843</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', title='None'>conditions</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.i', title='?'>i</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.replacement', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.replacement', title='[?]'>replacement</a>
<span class='lineno'> 844</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', title='[?]'>conditions</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', title='?'>c</a> for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', title='?'>c</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', title='None'>conditions</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.c', title='?'>c</a>]
<span class='lineno'> 845</span> 
<span class='lineno'> 846</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.orderby', title='None'>orderby</a>:
<span class='lineno'> 847</span>         # Don&#39;t mutate in case we have a default order passed.
<span class='lineno'> 848</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.updated_order', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.updated_order', title='[str]'>updated_order</a> = []
<span class='lineno'> 849</span>         for (<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.i', title='?'>i</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order', title='?'>order</a>) in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.orderby', title='None'>orderby</a>):
<span class='lineno'> 850</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order_field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order_field', title='?'>order_field</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order', title='?'>order</a>.lstrip(&quot;-&quot;)
<span class='lineno'> 851</span>             if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order_field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order_field', title='?'>order_field</a> not in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.derived_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.derived_columns', title='[? -> list]'>derived_columns</a>:
<span class='lineno'> 852</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order_field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order_field', title='str'>order_field</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.resolve_func', title='? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}'>resolve_func</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order_field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order_field', title='?'>order_field</a>)
<span class='lineno'> 853</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.updated_order', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.updated_order', title='[str]'>updated_order</a>.append(u&quot;{}{}&quot;.format(&quot;-&quot; if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order', title='?'>order</a>.startswith(&quot;-&quot;) else &quot;&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order_field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.order_field', title='str'>order_field</a>))
<span class='lineno'> 854</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.orderby', title='[str]'>orderby</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.updated_order', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.updated_order', title='[str]'>updated_order</a>
<span class='lineno'> 855</span> 
<span class='lineno'> 856</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.raw_query', title='(None, None, None, None, None, None, None, None, None, bool) -> None'>raw_query</a>(
<span class='lineno'> 857</span>         start=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.start', title='None'>start</a>,
<span class='lineno'> 858</span>         end=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.end', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.end', title='None'>end</a>,
<span class='lineno'> 859</span>         groupby=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.groupby', title='None'>groupby</a>,
<span class='lineno'> 860</span>         conditions=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.conditions', title='[?]'>conditions</a>,
<span class='lineno'> 861</span>         aggregations=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.aggregations', title='None'>aggregations</a>,
<span class='lineno'> 862</span>         selected_columns=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.selected_columns', title='[?]'>selected_columns</a>,
<span class='lineno'> 863</span>         filter_keys=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.filter_keys', title='None'>filter_keys</a>,
<span class='lineno'> 864</span>         arrayjoin=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.arrayjoin', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.arrayjoin', title='None'>arrayjoin</a>,
<span class='lineno'> 865</span>         having=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.having', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.having', title='None'>having</a>,
<span class='lineno'> 866</span>         dataset=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.dataset', title='None'>dataset</a>,
<span class='lineno'> 867</span>         orderby=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba._aliased_query_impl.orderby', title='[str]'>orderby</a>,
<span class='lineno'> 868</span>         **kwargs
<span class='lineno'> 869</span>     )
<span class='lineno'> 870</span> 
<span class='lineno'> 871</span> 
<span class='lineno'> 872</span> # TODO (evanh) Since we are assuming that all string values are columns,
<span class='lineno'> 873</span> # this will get tricky if we ever have complex columns where there are
<span class='lineno'> 874</span> # string arguments to the functions that aren&#39;t columns
<span class='lineno'> 875</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column', title='((? -> list, ? -> tuple), ?) -> None / (?, ?) -> None'>resolve_complex_column</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.col', title='(? -> list, ? -> tuple)'>col</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.resolve_func', title='?'>resolve_func</a>):
<span class='lineno'> 876</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', title='? -> list'>args</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.col', title='(? -> list, ? -> tuple)'>col</a>[1]
<span class='lineno'> 877</span> 
<span class='lineno'> 878</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', title='int'>i</a> in range(len(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', title='? -> list'>args</a>)):
<span class='lineno'> 879</span>         if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', title='? -> list'>args</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', title='int'>i</a>], (list, tuple)):
<span class='lineno'> 880</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column', title='((? -> list, ? -> tuple), ?) -> None / (?, ?) -> None'>resolve_complex_column</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', title='? -> list'>args</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', title='int'>i</a>], <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.resolve_func', title='?'>resolve_func</a>)
<span class='lineno'> 881</span>         elif isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', title='? -> list'>args</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', title='int'>i</a>], six.string_types):
<span class='lineno'> 882</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', title='? -> list'>args</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', title='int'>i</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.resolve_func', title='?'>resolve_func</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.args', title='? -> list'>args</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column.i', title='int'>i</a>])
<span class='lineno'> 883</span> 
<span class='lineno'> 884</span> 
<span class='lineno'> 885</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases', title='(?, ?, None) -> (?, dict)'>resolve_snuba_aliases</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.snuba_filter', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.snuba_filter', title='?'>snuba_filter</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', title='?'>resolve_func</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.function_translations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.function_translations', title='None'>function_translations</a>=None):
<span class='lineno'> 886</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.snuba_filter', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.snuba_filter', title='?'>snuba_filter</a>.clone()
<span class='lineno'> 887</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.translated_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.translated_columns', title='dict'>translated_columns</a> = {}
<span class='lineno'> 888</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.derived_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.derived_columns', title='?'>derived_columns</a> = set()
<span class='lineno'> 889</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.function_translations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.function_translations', title='None'>function_translations</a>:
<span class='lineno'> 890</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.snuba_name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.snuba_name', title='?'>snuba_name</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.sentry_name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.sentry_name', title='?'>sentry_name</a> in six.iteritems(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.function_translations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.function_translations', title='None'>function_translations</a>):
<span class='lineno'> 891</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.derived_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.derived_columns', title='?'>derived_columns</a>.add(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.snuba_name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.snuba_name', title='?'>snuba_name</a>)
<span class='lineno'> 892</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.translated_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.translated_columns', title='dict'>translated_columns</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.snuba_name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.snuba_name', title='?'>snuba_name</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.sentry_name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.sentry_name', title='?'>sentry_name</a>
<span class='lineno'> 893</span> 
<span class='lineno'> 894</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.selected_columns', title='?'>selected_columns</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a>.selected_columns
<span class='lineno'> 895</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.selected_columns', title='?'>selected_columns</a>:
<span class='lineno'> 896</span>         for (<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.idx', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.idx', title='?'>idx</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='?'>col</a>) in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.selected_columns', title='?'>selected_columns</a>):
<span class='lineno'> 897</span>             if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'>col</a></a>, (list, tuple)):
<span class='lineno'> 898</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_complex_column', title='((? -> list, ? -> tuple), ?) -> None / (?, ?) -> None'>resolve_complex_column</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'>col</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', title='?'>resolve_func</a>)
<span class='lineno'> 899</span>             else:
<span class='lineno'> 900</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', title='?'>name</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', title='?'>resolve_func</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'>col</a>)
<span class='lineno'> 901</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.selected_columns', title='?'>selected_columns</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.idx', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.idx', title='?'>idx</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', title='?'>name</a>
<span class='lineno'> 902</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.translated_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.translated_columns', title='dict'>translated_columns</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', title='?'>name</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'>col</a>
<span class='lineno'> 903</span> 
<span class='lineno'> 904</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a>.selected_columns = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.selected_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.selected_columns', title='?'>selected_columns</a>
<span class='lineno'> 905</span> 
<span class='lineno'> 906</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.groupby', title='?'>groupby</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a>.groupby
<span class='lineno'> 907</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.groupby', title='?'>groupby</a>:
<span class='lineno'> 908</span>         for (<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.idx', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.idx', title='?'>idx</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='?'>col</a>) in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.groupby', title='?'>groupby</a>):
<span class='lineno'> 909</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', title='(? -> list, ? -> tuple)'>name</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'>col</a>
<span class='lineno'> 910</span>             if isinstance(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'>col</a></a>, (list, tuple)):
<span class='lineno'> 911</span>                 if len(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'>col</a>) == 3:
<span class='lineno'> 912</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', title='? -> list'>name</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'>col</a>[2]
<span class='lineno'> 913</span>             elif <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'>col</a> not in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.derived_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.derived_columns', title='?'>derived_columns</a>:
<span class='lineno'> 914</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', title='?'>name</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', title='?'>resolve_func</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='(? -> list, ? -> tuple)'>col</a>)
<span class='lineno'> 915</span> 
<span class='lineno'> 916</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.groupby', title='?'>groupby</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.idx', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.idx', title='?'>idx</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.name', title='{(? -> list, ? -> tuple) | ? -> list}'>name</a>
<span class='lineno'> 917</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a>.groupby = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.groupby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.groupby', title='?'>groupby</a>
<span class='lineno'> 918</span> 
<span class='lineno'> 919</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregations', title='?'>aggregations</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a>.aggregations
<span class='lineno'> 920</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', title='?'>aggregation</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregations', title='?'>aggregations</a> or []:
<span class='lineno'> 921</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.derived_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.derived_columns', title='?'>derived_columns</a>.add(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', title='?'>aggregation</a>[2])
<span class='lineno'> 922</span>         if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', title='?'>aggregation</a>[1], six.string_types):
<span class='lineno'> 923</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', title='?'>aggregation</a>[1] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', title='?'>resolve_func</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', title='?'>aggregation</a>[1])
<span class='lineno'> 924</span>         elif isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', title='?'>aggregation</a>[1], (set, tuple, list)):
<span class='lineno'> 925</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', title='?'>aggregation</a>[1] = [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', title='?'>resolve_func</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='?'>col</a>) for <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.col', title='?'>col</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregation', title='?'>aggregation</a>[1]]
<span class='lineno'> 926</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a>.aggregations = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregations', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.aggregations', title='?'>aggregations</a>
<span class='lineno'> 927</span> 
<span class='lineno'> 928</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.conditions', title='?'>conditions</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a>.conditions
<span class='lineno'> 929</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.conditions', title='?'>conditions</a>:
<span class='lineno'> 930</span>         for (<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.i', title='?'>i</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.condition', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.condition', title='?'>condition</a>) in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.conditions', title='?'>conditions</a>):
<span class='lineno'> 931</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.replacement', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.replacement', title='[?]'>replacement</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_condition', title='(? -> list, ?) -> {? -> list | [?]} / ((? -> list, ? -> tuple), ?) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ?) -> [?] / ((? -> list, ? -> tuple), ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {(? -> list, ? -> tuple) | [{? -> list | [?]}]} / (?, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> [?] / (? -> list, ? -> list -> {? -> list | str} / ? -> str / (? -> list, ? -> tuple) -> {(? -> list, ? -> tuple) | str}) -> {? -> list | [?]}'>resolve_condition</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.condition', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.condition', title='?'>condition</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', title='?'>resolve_func</a>)
<span class='lineno'> 932</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.conditions', title='?'>conditions</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.i', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.i', title='?'>i</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.replacement', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.replacement', title='[?]'>replacement</a>
<span class='lineno'> 933</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a>.conditions = [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.c', title='?'>c</a> for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.c', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.c', title='?'>c</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.conditions', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.conditions', title='?'>conditions</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.c', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.c', title='?'>c</a>]
<span class='lineno'> 934</span> 
<span class='lineno'> 935</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', title='?'>orderby</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a>.orderby
<span class='lineno'> 936</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', title='?'>orderby</a>:
<span class='lineno'> 937</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', title='[?]'>orderby</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', title='?'>orderby</a> if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', title='?'>orderby</a>, (list, tuple)) else [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', title='?'>orderby</a>]
<span class='lineno'> 938</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved_orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved_orderby', title='[str]'>resolved_orderby</a> = []
<span class='lineno'> 939</span> 
<span class='lineno'> 940</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field_with_order', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field_with_order', title='?'>field_with_order</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.orderby', title='[?]'>orderby</a>:
<span class='lineno'> 941</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field', title='?'>field</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field_with_order', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field_with_order', title='?'>field_with_order</a>.lstrip(&quot;-&quot;)
<span class='lineno'> 942</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved_orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved_orderby', title='[str]'>resolved_orderby</a>.append(
<span class='lineno'> 943</span>                 u&quot;{}{}&quot;.format(
<span class='lineno'> 944</span>                     &quot;-&quot; if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field_with_order', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field_with_order', title='?'>field_with_order</a>.startswith(&quot;-&quot;) else &quot;&quot;,
<span class='lineno'> 945</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field', title='?'>field</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field', title='?'>field</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.derived_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.derived_columns', title='?'>derived_columns</a> else <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolve_func', title='?'>resolve_func</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.field', title='?'>field</a>),
<span class='lineno'> 946</span>                 )
<span class='lineno'> 947</span>             )
<span class='lineno'> 948</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a>.orderby = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved_orderby', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved_orderby', title='[str]'>resolved_orderby</a>
<span class='lineno'> 949</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.resolved', title='?'>resolved</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.translated_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.resolve_snuba_aliases.translated_columns', title='dict'>translated_columns</a>
<span class='lineno'> 950</span> 
<span class='lineno'> 951</span> 
<span class='lineno'> 952</span> <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.JSON_TYPE_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.JSON_TYPE_MAP', title='dict'>JSON_TYPE_MAP</a> = {
<span class='lineno'> 953</span>     &quot;UInt8&quot;: &quot;boolean&quot;,
<span class='lineno'> 954</span>     &quot;UInt16&quot;: &quot;integer&quot;,
<span class='lineno'> 955</span>     &quot;UInt32&quot;: &quot;integer&quot;,
<span class='lineno'> 956</span>     &quot;UInt64&quot;: &quot;integer&quot;,
<span class='lineno'> 957</span>     &quot;Float32&quot;: &quot;number&quot;,
<span class='lineno'> 958</span>     &quot;Float64&quot;: &quot;number&quot;,
<span class='lineno'> 959</span>     &quot;DateTime&quot;: &quot;date&quot;,
<span class='lineno'> 960</span> }
<span class='lineno'> 961</span> 
<span class='lineno'> 962</span> 
<span class='lineno'> 963</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type', title='? -> str'>get_json_type</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.snuba_type', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.snuba_type', title='?'>snuba_type</a>):
<span class='lineno'> 964</span>     &quot;&quot;&quot;
<span class='lineno'> 965</span>     Convert Snuba/Clickhouse type to JSON type
<span class='lineno'> 966</span>     Default is string
<span class='lineno'> 967</span>     &quot;&quot;&quot;
<span class='lineno'> 968</span>     # Ignore Nullable part
<span class='lineno'> 969</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.nullable_match', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.nullable_match', title='?'>nullable_match</a> = re.search(r&quot;^Nullable\((.+)\)$&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.snuba_type', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.snuba_type', title='?'>snuba_type</a>)
<span class='lineno'> 970</span> 
<span class='lineno'> 971</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.nullable_match', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.nullable_match', title='?'>nullable_match</a>:
<span class='lineno'> 972</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.snuba_type', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.snuba_type', title='?'>snuba_type</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.nullable_match', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.nullable_match', title='?'>nullable_match</a>.group(1)
<span class='lineno'> 973</span> 
<span class='lineno'> 974</span>     # Check for array
<span class='lineno'> 975</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.array_match', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.array_match', title='?'>array_match</a> = re.search(r&quot;^Array\(.+\)$&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.snuba_type', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.snuba_type', title='?'>snuba_type</a>)
<span class='lineno'> 976</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.array_match', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.array_match', title='?'>array_match</a>:
<span class='lineno'> 977</span>         return &quot;array&quot;
<span class='lineno'> 978</span> 
<span class='lineno'> 979</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.JSON_TYPE_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.JSON_TYPE_MAP', title='dict'>JSON_TYPE_MAP</a>.get(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.snuba_type', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_json_type.snuba_type', title='?'>snuba_type</a>, &quot;string&quot;)
<span class='lineno'> 980</span> 
<span class='lineno'> 981</span> 
<span class='lineno'> 982</span> # The following are functions for resolving information from sentry models
<span class='lineno'> 983</span> # about projects, environments, and issues (groups). Having this snuba
<span class='lineno'> 984</span> # implementation have to know about these relationships is not ideal, and
<span class='lineno'> 985</span> # many of these relationships (eg environment id-&gt;name) will have already
<span class='lineno'> 986</span> # been queried and exist somewhere in the call stack, but for now, lookup
<span class='lineno'> 987</span> # is implemented here for simplicity.
<span class='lineno'> 988</span> 
<span class='lineno'> 989</span> 
<span class='lineno'> 990</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators', title='(?, bool) -> ({? -> ? | ? -> ?}, ? -> ?)'>get_snuba_translators</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.filter_keys', title='?'>filter_keys</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.is_grouprelease', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.is_grouprelease', title='bool'>is_grouprelease</a>=False):
<span class='lineno'> 991</span>     &quot;&quot;&quot;
<span class='lineno'> 992</span>     Some models are stored differently in snuba, eg. as the environment
<span class='lineno'> 993</span>     name instead of the the environment ID. Here we create and return forward()
<span class='lineno'> 994</span>     and reverse() translation functions that perform all the required changes.
<span class='lineno'> 995</span> 
<span class='lineno'> 996</span>     forward() is designed to work on the filter_keys and so should be called
<span class='lineno'> 997</span>     with a map of {column: [key1, key2], ...} and should return an updated map
<span class='lineno'> 998</span>     with the filter keys replaced with the ones that Snuba expects.
<span class='lineno'> 999</span> 
<span class='lineno'>1000</span>     reverse() is designed to work on result rows, so should be called with a row
<span class='lineno'>1001</span>     in the form {column: value, ...} and will return a translated result row.
<span class='lineno'>1002</span> 
<span class='lineno'>1003</span>     Because translation can potentially rely on combinations of different parts
<span class='lineno'>1004</span>     of the result row, I decided to implement them as composable functions over the
<span class='lineno'>1005</span>     row to be translated. This should make it simpler to add any other needed
<span class='lineno'>1006</span>     translations as long as you can express them as forward(filters) and reverse(row)
<span class='lineno'>1007</span>     functions.
<span class='lineno'>1008</span>     &quot;&quot;&quot;
<span class='lineno'>1009</span> 
<span class='lineno'>1010</span>     # Helper lambdas to compose translator functions
<span class='lineno'>1011</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.identity', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.identity', title='? -> ?'>identity</a> = lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%80.x', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%80.x', title='?'>x</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%80.x', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%80.x', title='?'>x</a>
<span class='lineno'>1012</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.compose', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.compose', title='(? -> ?, ? -> ?) -> ? -> ? / ({? -> ? | ? -> ?}, ? -> ?) -> ? -> ? / ({? -> ? | ? -> ?}, {? -> ? | ? -> ?}) -> ? -> ? / (? -> ?, {? -> ? | ? -> ?}) -> ? -> ?'>compose</a> = lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.f', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.f', title='{? -> ? | ? -> ?}'>f</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.g', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.g', title='{? -> ? | ? -> ? | ? -> ? | ? -> ? | ? -> ? | ? -> ?}'>g</a>: lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.lambda%81.x', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.lambda%81.x', title='?'>x</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.f', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.f', title='? -> ?'>f</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.g', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.g', title='{? -> ? | ? -> ?}'>g</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.lambda%81.x', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%82.lambda%81.x', title='?'>x</a>))
<span class='lineno'>1013</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', title='(?, str, int) -> ? / (?, ?, [?]) -> ? / (?, ?, ?) -> ?'>replace</a> = lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.d', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.d', title='?'>d</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.key', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.key', title='str'>key</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.val', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.val', title='{[?] | int}'>val</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.d', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.d', title='?'>d</a>.update({<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.key', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.key', title='str'>key</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.val', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.val', title='{[?] | int}'>val</a>}) or <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.d', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%83.d', title='?'>d</a>
<span class='lineno'>1014</span> 
<span class='lineno'>1015</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.forward', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.forward', title='? -> ?'>forward</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.identity', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.identity', title='? -> ?'>identity</a>
<span class='lineno'>1016</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', title='? -> ?'>reverse</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.identity', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.identity', title='? -> ?'>identity</a>
<span class='lineno'>1017</span> 
<span class='lineno'>1018</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.map_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.map_columns', title='dict'>map_columns</a> = {
<span class='lineno'>1019</span>         &quot;environment&quot;: (Environment, &quot;name&quot;, lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%84.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%84.name', title='?'>name</a>: None if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%84.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%84.name', title='?'>name</a> == &quot;&quot; else <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%84.name', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%84.name', title='?'>name</a>),
<span class='lineno'>1020</span>         &quot;tags[sentry:release]&quot;: (Release, &quot;version&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.identity', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.identity', title='? -> ?'>identity</a>),
<span class='lineno'>1021</span>         &quot;release&quot;: (Release, &quot;version&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.identity', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.identity', title='? -> ?'>identity</a>),
<span class='lineno'>1022</span>     }
<span class='lineno'>1023</span> 
<span class='lineno'>1024</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', title='?'>col</a>, (<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.model', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.model', title='?'>model</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.field', title='?'>field</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fmt', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fmt', title='?'>fmt</a>) in six.iteritems(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.map_columns', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.map_columns', title='dict'>map_columns</a>):
<span class='lineno'>1025</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd', title='None'>fwd</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev', title='None'>rev</a> = None, None
<span class='lineno'>1026</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ids', title='?'>ids</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.filter_keys', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.filter_keys', title='?'>filter_keys</a>.get(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', title='?'>col</a>)
<span class='lineno'>1027</span>         if not <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ids', title='?'>ids</a>:
<span class='lineno'>1028</span>             continue
<span class='lineno'>1029</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.is_grouprelease', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.is_grouprelease', title='bool'>is_grouprelease</a> and <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', title='?'>col</a> in (&quot;release&quot;, &quot;tags[sentry:release]&quot;):
<span class='lineno'>1030</span>             # GroupRelease -&gt; Release translation is a special case because the
<span class='lineno'>1031</span>             # translation relies on both the Group and Release value in the result row.
<span class='lineno'>1032</span>             #
<span class='lineno'>1033</span>             # We create a map of {grouprelease_id: (group_id, version), ...} and the corresponding
<span class='lineno'>1034</span>             # reverse map of {(group_id, version): grouprelease_id, ...}
<span class='lineno'>1035</span>             # NB this does depend on `issue` being defined in the query result, and the correct
<span class='lineno'>1036</span>             # set of issues being resolved, which is outside the control of this function.
<span class='lineno'>1037</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr_map', title='?'>gr_map</a> = GroupRelease.objects.filter(id__in=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ids', title='?'>ids</a>).values_list(
<span class='lineno'>1038</span>                 &quot;id&quot;, &quot;group_id&quot;, &quot;release_id&quot;
<span class='lineno'>1039</span>             )
<span class='lineno'>1040</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ver', title='dict'>ver</a> = dict(
<span class='lineno'>1041</span>                 Release.objects.filter(id__in=[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.x', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.x', title='?'>x</a>[2] for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.x', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.x', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.x', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.x', title='?'>x</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr_map', title='?'>gr_map</a>]).values_list(&quot;id&quot;, &quot;version&quot;)
<span class='lineno'>1042</span>             )
<span class='lineno'>1043</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', title='dict'>fwd_map</a> = {<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr', title='?'>gr</a>: (<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.group', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.group', title='?'>group</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ver', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ver', title='dict'>ver</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.release', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.release', title='?'>release</a>]) for (<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr', title='?'>gr</a></a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.group', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.group', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.group', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.group', title='?'>group</a></a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.release', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.release', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.release', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.release', title='?'>release</a></a>) in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.gr_map', title='?'>gr_map</a>}
<span class='lineno'>1044</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev_map', title='dict'>rev_map</a> = dict(reversed(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', title='?'>t</a>) for <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', title='?'>t</a></a> in six.iteritems(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', title='dict'>fwd_map</a>))
<span class='lineno'>1045</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd', title='? -> ?'>fwd</a> = (
<span class='lineno'>1046</span>                 lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.col', title='?'>col</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.trans', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.trans', title='dict'>trans</a>: lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.filters', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.filters', title='?'>filters</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', title='(?, str, int) -> ? / (?, ?, [?]) -> ? / (?, ?, ?) -> ?'>replace</a>(
<span class='lineno'>1047</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.filters', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.filters', title='?'>filters</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.col', title='?'>col</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.trans', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.trans', title='dict'>trans</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.k', title='?'>k</a>][1] for <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.k', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.k', title='?'>k</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.filters', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.lambda%85.filters', title='?'>filters</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%86.col', title='?'>col</a>]]
<span class='lineno'>1048</span>                 )
<span class='lineno'>1049</span>             )(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', title='?'>col</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', title='dict'>fwd_map</a>)
<span class='lineno'>1050</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev', title='? -> ?'>rev</a> = (
<span class='lineno'>1051</span>                 lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.col', title='?'>col</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.trans', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.trans', title='dict'>trans</a>: lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.lambda%87.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.lambda%87.row', title='?'>row</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', title='(?, str, int) -> ? / (?, ?, [?]) -> ? / (?, ?, ?) -> ?'>replace</a>(
<span class='lineno'>1052</span>                     # The translate map may not have every combination of issue/release
<span class='lineno'>1053</span>                     # returned by the query.
<span class='lineno'>1054</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.lambda%87.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.lambda%87.row', title='?'>row</a>,
<span class='lineno'>1055</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.col', title='?'>col</a>,
<span class='lineno'>1056</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.trans', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.trans', title='dict'>trans</a>.get((<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.lambda%87.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.lambda%87.row', title='?'>row</a>[&quot;group_id&quot;], <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.lambda%87.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.lambda%87.row', title='?'>row</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%88.col', title='?'>col</a>])),
<span class='lineno'>1057</span>                 )
<span class='lineno'>1058</span>             )(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', title='?'>col</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev_map', title='dict'>rev_map</a>)
<span class='lineno'>1059</span> 
<span class='lineno'>1060</span>         else:
<span class='lineno'>1061</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', title='dict'>fwd_map</a> = {
<span class='lineno'>1062</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.k', title='?'>k</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fmt', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fmt', title='?'>fmt</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.v', title='?'>v</a>) for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.k', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.k', title='?'>k</a></a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.v', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.v', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.v', title='?'>v</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.model', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.model', title='?'>model</a>.objects.filter(id__in=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.ids', title='?'>ids</a>).values_list(&quot;id&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.field', title='?'>field</a>)
<span class='lineno'>1063</span>             }
<span class='lineno'>1064</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev_map', title='dict'>rev_map</a> = dict(reversed(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', title='?'>t</a>) for <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.t', title='?'>t</a></a> in six.iteritems(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', title='dict'>fwd_map</a>))
<span class='lineno'>1065</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd', title='? -> ?'>fwd</a> = (
<span class='lineno'>1066</span>                 lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.col', title='?'>col</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.trans', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.trans', title='dict'>trans</a>: lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.filters', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.filters', title='?'>filters</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', title='(?, str, int) -> ? / (?, ?, [?]) -> ? / (?, ?, ?) -> ?'>replace</a>(
<span class='lineno'>1067</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.filters', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.filters', title='?'>filters</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.col', title='?'>col</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.trans', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.trans', title='dict'>trans</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.k', title='?'>k</a>] for <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.k', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.k', title='?'>k</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.filters', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.filters', title='?'>filters</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.col', title='?'>col</a>] if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.k', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%90.lambda%89.k', title='?'>k</a>]
<span class='lineno'>1068</span>                 )
<span class='lineno'>1069</span>             )(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', title='?'>col</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd_map', title='dict'>fwd_map</a>)
<span class='lineno'>1070</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev', title='? -> ?'>rev</a> = (
<span class='lineno'>1071</span>                 lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.col', title='?'>col</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.trans', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.trans', title='dict'>trans</a>: lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.lambda%91.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.lambda%91.row', title='?'>row</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', title='(?, str, int) -> ? / (?, ?, [?]) -> ? / (?, ?, ?) -> ?'>replace</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.lambda%91.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.lambda%91.row', title='?'>row</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.col', title='?'>col</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.trans', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.trans', title='dict'>trans</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.lambda%91.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.lambda%91.row', title='?'>row</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.col', title='?'>col</a>]])
<span class='lineno'>1072</span>                 if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.col', title='?'>col</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.lambda%91.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.lambda%91.row', title='?'>row</a>
<span class='lineno'>1073</span>                 else <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.lambda%91.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%92.lambda%91.row', title='?'>row</a>
<span class='lineno'>1074</span>             )(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.col', title='?'>col</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev_map', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev_map', title='dict'>rev_map</a>)
<span class='lineno'>1075</span> 
<span class='lineno'>1076</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd', title='{? -> ? | ? -> ?}'>fwd</a>:
<span class='lineno'>1077</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.forward', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.forward', title='? -> ?'>forward</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.compose', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.compose', title='(? -> ?, ? -> ?) -> ? -> ? / ({? -> ? | ? -> ?}, ? -> ?) -> ? -> ? / ({? -> ? | ? -> ?}, {? -> ? | ? -> ?}) -> ? -> ? / (? -> ?, {? -> ? | ? -> ?}) -> ? -> ?'>compose</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.forward', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.forward', title='{? -> ? | ? -> ?}'>forward</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.fwd', title='{? -> ? | ? -> ?}'>fwd</a>)
<span class='lineno'>1078</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev', title='{? -> ? | ? -> ?}'>rev</a>:
<span class='lineno'>1079</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', title='? -> ?'>reverse</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.compose', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.compose', title='(? -> ?, ? -> ?) -> ? -> ? / ({? -> ? | ? -> ?}, ? -> ?) -> ? -> ? / ({? -> ? | ? -> ?}, {? -> ? | ? -> ?}) -> ? -> ? / (? -> ?, {? -> ? | ? -> ?}) -> ? -> ?'>compose</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', title='{? -> ? | ? -> ?}'>reverse</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.rev', title='{? -> ? | ? -> ?}'>rev</a>)
<span class='lineno'>1080</span> 
<span class='lineno'>1081</span>     # Extra reverse translator for time column.
<span class='lineno'>1082</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', title='? -> ?'>reverse</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.compose', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.compose', title='(? -> ?, ? -> ?) -> ? -> ? / ({? -> ? | ? -> ?}, ? -> ?) -> ? -> ? / ({? -> ? | ? -> ?}, {? -> ? | ? -> ?}) -> ? -> ? / (? -> ?, {? -> ? | ? -> ?}) -> ? -> ?'>compose</a>(
<span class='lineno'>1083</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', title='{? -> ? | ? -> ?}'>reverse</a>,
<span class='lineno'>1084</span>         lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%93.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%93.row', title='?'>row</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', title='(?, str, int) -> ? / (?, ?, [?]) -> ? / (?, ?, ?) -> ?'>replace</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%93.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%93.row', title='?'>row</a>, &quot;time&quot;, int(to_timestamp(parse_datetime(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%93.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%93.row', title='?'>row</a>[&quot;time&quot;]))))
<span class='lineno'>1085</span>         if &quot;time&quot; in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%93.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%93.row', title='?'>row</a>
<span class='lineno'>1086</span>         else <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%93.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%93.row', title='?'>row</a>,
<span class='lineno'>1087</span>     )
<span class='lineno'>1088</span>     # Extra reverse translator for bucketed_end column.
<span class='lineno'>1089</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', title='? -> ?'>reverse</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.compose', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.compose', title='(? -> ?, ? -> ?) -> ? -> ? / ({? -> ? | ? -> ?}, ? -> ?) -> ? -> ? / ({? -> ? | ? -> ?}, {? -> ? | ? -> ?}) -> ? -> ? / (? -> ?, {? -> ? | ? -> ?}) -> ? -> ?'>compose</a>(
<span class='lineno'>1090</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', title='? -> ?'>reverse</a>,
<span class='lineno'>1091</span>         lambda <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%94.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%94.row', title='?'>row</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.replace', title='(?, str, int) -> ? / (?, ?, [?]) -> ? / (?, ?, ?) -> ?'>replace</a>(
<span class='lineno'>1092</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%94.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%94.row', title='?'>row</a>, &quot;bucketed_end&quot;, int(to_timestamp(parse_datetime(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%94.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%94.row', title='?'>row</a>[&quot;bucketed_end&quot;])))
<span class='lineno'>1093</span>         )
<span class='lineno'>1094</span>         if &quot;bucketed_end&quot; in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%94.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%94.row', title='?'>row</a>
<span class='lineno'>1095</span>         else <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%94.row', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.lambda%94.row', title='?'>row</a>,
<span class='lineno'>1096</span>     )
<span class='lineno'>1097</span> 
<span class='lineno'>1098</span>     return (<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.forward', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.forward', title='{? -> ? | ? -> ?}'>forward</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_snuba_translators.reverse', title='? -> ?'>reverse</a>)
<span class='lineno'>1099</span> 
<span class='lineno'>1100</span> 
<span class='lineno'>1101</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids', title='(?, ?) -> [?]'>get_related_project_ids</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.column', title='?'>column</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.ids', title='?'>ids</a>):
<span class='lineno'>1102</span>     &quot;&quot;&quot;
<span class='lineno'>1103</span>     Get the project_ids from a model that has a foreign key to project.
<span class='lineno'>1104</span>     &quot;&quot;&quot;
<span class='lineno'>1105</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.mappings', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.mappings', title='dict'>mappings</a> = {
<span class='lineno'>1106</span>         &quot;group_id&quot;: (Group, &quot;id&quot;, &quot;project_id&quot;),
<span class='lineno'>1107</span>         &quot;tags[sentry:release]&quot;: (ReleaseProject, &quot;release_id&quot;, &quot;project_id&quot;),
<span class='lineno'>1108</span>         &quot;release&quot;: (ReleaseProject, &quot;release_id&quot;, &quot;project_id&quot;),
<span class='lineno'>1109</span>     }
<span class='lineno'>1110</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.ids', title='?'>ids</a>:
<span class='lineno'>1111</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.column', title='?'>column</a> == &quot;project_id&quot;:
<span class='lineno'>1112</span>             return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.ids', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.ids', title='?'>ids</a>
<span class='lineno'>1113</span>         elif <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.column', title='?'>column</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.mappings', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.mappings', title='dict'>mappings</a>:
<span class='lineno'>1114</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.model', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.model', title='?'>model</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.id_field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.id_field', title='str'>id_field</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.project_field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.project_field', title='str'>project_field</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.mappings', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.mappings', title='dict'>mappings</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.column', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.column', title='?'>column</a>]
<span class='lineno'>1115</span>             return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.model', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.model', title='?'>model</a>.objects.filter(
<span class='lineno'>1116</span>                 **{id_field + &quot;__in&quot;: ids, project_field + &quot;__isnull&quot;: False}
<span class='lineno'>1117</span>             ).values_list(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.project_field', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.get_related_project_ids.project_field', title='str'>project_field</a>, flat=True)
<span class='lineno'>1118</span>     return []
<span class='lineno'>1119</span> 
<span class='lineno'>1120</span> 
<span class='lineno'>1121</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window', title='(?, int) -> int / (?, ?) -> int'>shrink_time_window</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.issues', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.issues', title='?'>issues</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.start', title='int'>start</a>):
<span class='lineno'>1122</span>     &quot;&quot;&quot;\
<span class='lineno'>1123</span>     If a single issue is passed in, shrink the `start` parameter to be briefly before
<span class='lineno'>1124</span>     the `first_seen` in order to hopefully eliminate a large percentage of rows scanned.
<span class='lineno'>1125</span> 
<span class='lineno'>1126</span>     Note that we don&#39;t shrink `end` based on `last_seen` because that value is updated
<span class='lineno'>1127</span>     asynchronously by buffers, and will cause queries to skip recently seen data on
<span class='lineno'>1128</span>     stale groups.
<span class='lineno'>1129</span>     &quot;&quot;&quot;
<span class='lineno'>1130</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.issues', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.issues', title='?'>issues</a> and len(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.issues', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.issues', title='?'>issues</a>) == 1:
<span class='lineno'>1131</span>         try:
<span class='lineno'>1132</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.group', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.group', title='?'>group</a> = Group.objects.get(pk=list(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.issues', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.issues', title='?'>issues</a>)[0])
<span class='lineno'>1133</span>             <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.start', title='int'>start</a> = max(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.start', title='int'>start</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime', title='? -> ?'>naiveify_datetime</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.group', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.group', title='?'>group</a>.first_seen) - timedelta(minutes=5))
<span class='lineno'>1134</span>         except Group.DoesNotExist:
<span class='lineno'>1135</span>             return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.start', title='int'>start</a>
<span class='lineno'>1136</span> 
<span class='lineno'>1137</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.shrink_time_window.start', title='int'>start</a>
<span class='lineno'>1138</span> 
<span class='lineno'>1139</span> 
<span class='lineno'>1140</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime', title='? -> ?'>naiveify_datetime</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime.dt', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime.dt', title='?'>dt</a>):
<span class='lineno'>1141</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime.dt', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime.dt', title='?'>dt</a> if not <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime.dt', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime.dt', title='?'>dt</a>.tzinfo else <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime.dt', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.naiveify_datetime.dt', title='?'>dt</a>.astimezone(pytz.utc).replace(tzinfo=None)
<span class='lineno'>1142</span> 
<span class='lineno'>1143</span> 
<span class='lineno'>1144</span> def <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time', title='(?, ?, int) -> timedelta'>quantize_time</a>(<a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time', title='?'>time</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.key_hash', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.key_hash', title='?'>key_hash</a>, <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.duration', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.duration', title='int'>duration</a>=300):
<span class='lineno'>1145</span>     &quot;&quot;&quot; Adds jitter based on the key_hash around start/end times for caching snuba queries
<span class='lineno'>1146</span> 
<span class='lineno'>1147</span>         Given a time and a key_hash this should result in a timestamp that remains the same for a duration
<span class='lineno'>1148</span>         The end of the duration will be different per key_hash which avoids spikes in the number of queries
<span class='lineno'>1149</span>         Must be based on the key_hash so they cache keys are consistent per query
<span class='lineno'>1150</span> 
<span class='lineno'>1151</span>         For example: the time is 17:02:00, there&#39;s two queries query A has a key_hash of 30, query B has a key_hash of
<span class='lineno'>1152</span>         60, we have the default duration of 300 (5 Minutes)
<span class='lineno'>1153</span>         - query A will have the suffix of 17:00:30 for a timewindow from 17:00:30 until 17:05:30
<span class='lineno'>1154</span>             - eg. Even when its 17:05:00 the suffix will still be 17:00:30
<span class='lineno'>1155</span>         - query B will have the suffix of 17:01:00 for a timewindow from 17:01:00 until 17:06:00
<span class='lineno'>1156</span>     &quot;&quot;&quot;
<span class='lineno'>1157</span>     # Use the hash so that seconds past the hour gets rounded differently per query.
<span class='lineno'>1158</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.jitter', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.jitter', title='int'>jitter</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.key_hash', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.key_hash', title='?'>key_hash</a> % <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.duration', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.duration', title='int'>duration</a>
<span class='lineno'>1159</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', title='int'>seconds_past_hour</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time', title='?'>time</a>.minute * 60 + <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time', title='?'>time</a>.second
<span class='lineno'>1160</span>     # Round seconds to a multiple of duration, because this uses &quot;floor&quot; division shouldn&#39;t give us a future window
<span class='lineno'>1161</span>     <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time_window_start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time_window_start', title='int'>time_window_start</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', title='int'>seconds_past_hour</a> // <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.duration', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.duration', title='int'>duration</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.duration', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.duration', title='int'>duration</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.jitter', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.jitter', title='int'>jitter</a>
<span class='lineno'>1162</span>     # If the time is past the rounded seconds then we want our key to be for this timewindow
<span class='lineno'>1163</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time_window_start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time_window_start', title='int'>time_window_start</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', title='int'>seconds_past_hour</a>:
<span class='lineno'>1164</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', title='int'>seconds_past_hour</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time_window_start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time_window_start', title='int'>time_window_start</a>
<span class='lineno'>1165</span>     # Otherwise we&#39;re in the previous time window, subtract duration to give us the previous timewindows start
<span class='lineno'>1166</span>     else:
<span class='lineno'>1167</span>         <a name='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', title='int'>seconds_past_hour</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time_window_start', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time_window_start', title='int'>time_window_start</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.duration', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.duration', title='int'>duration</a>
<span class='lineno'>1168</span>     return (
<span class='lineno'>1169</span>         # Since we&#39;re adding seconds past the hour, we want time but without minutes or seconds
<span class='lineno'>1170</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.time', title='?'>time</a>.replace(minute=0, second=0, microsecond=0)
<span class='lineno'>1171</span>         +
<span class='lineno'>1172</span>         # Use timedelta here so keys are consistent around hour boundaries
<span class='lineno'>1173</span>         timedelta(seconds=<a href='#.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', xid ='.home.xxm.Desktop.EMSE.dataset.sentry.src.sentry.utils.snuba.quantize_time.seconds_past_hour', title='int'>seconds_past_hour</a>)
<span class='lineno'>1174</span>     )
</pre></td></tr></table></body></html>