<html>
<head>
<meta charset="utf-8">
<title>/home/xxm/Desktop/EMSE/dataset/models/research/seq2species/run_training.py</title>
<style type='text/css'>
body { color: #666666; }
a {
    text-decoration: none; color: #5AA2A7;
    border: solid 1px rgba(255,255,255,0);
}
a.active {
    background: -webkit-linear-gradient(top,rgba(255, 255, 200, 0.35) 0,rgba(255, 255, 200, 0.55) 100%);
    border: solid 1px #E5E600;
}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #cccccc;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px solid orange; padding-bottom: 1px}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted;

function highlight(xid)
{
    var elms = document.querySelectorAll('[xid="' + xid + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "active";
    }
    highlighted = xid;
}

function clearHighlight() {
    var elms = document.querySelectorAll('[xid="' + highlighted + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "";
    }
}

window.onload =
    function (e) {
        var tags = document.getElementsByTagName("A")
        for (var i = 0; i < tags.length; i++) {
            tags[i].onmouseover =
                function (e) {
                    clearHighlight();
                    var xid = e.toElement.getAttribute('xid');
                    highlight(xid);
                }
        }
    }</script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input', xid='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input'>input</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS'>FLAGS</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.RANDOM_SEED', xid='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.RANDOM_SEED'>RANDOM_SEED</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.wait_until', xid='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.wait_until'>wait_until</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures', xid='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures'>update_measures</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training', xid='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training'>run_training</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message', xid='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message'>write_message</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures', xid='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures'>write_measures</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main', xid='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main'>main</a></li></ul>
</td><td><pre><span class='lineno'>   1</span> # Copyright 2018 The TensorFlow Authors All Rights Reserved.
<span class='lineno'>   2</span> #
<span class='lineno'>   3</span> # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
<span class='lineno'>   4</span> # you may not use this file except in compliance with the License.
<span class='lineno'>   5</span> # You may obtain a copy of the License at
<span class='lineno'>   6</span> #
<span class='lineno'>   7</span> #     http://www.apache.org/licenses/LICENSE-2.0
<span class='lineno'>   8</span> #
<span class='lineno'>   9</span> # Unless required by applicable law or agreed to in writing, software
<span class='lineno'>  10</span> # distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<span class='lineno'>  11</span> # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<span class='lineno'>  12</span> # See the License for the specific language governing permissions and
<span class='lineno'>  13</span> # limitations under the License.
<span class='lineno'>  14</span> # ==============================================================================
<span class='lineno'>  15</span> 
<span class='lineno'>  16</span> &quot;&quot;&quot;Defines training scheme for neural networks for Seq2Species prediction.
<span class='lineno'>  17</span> 
<span class='lineno'>  18</span> Defines and runs the loop for training a (optionally) depthwise separable
<span class='lineno'>  19</span> convolutional model for predicting taxonomic labels from short reads of DNA.
<span class='lineno'>  20</span> &quot;&quot;&quot;
<span class='lineno'>  21</span> 
<span class='lineno'>  22</span> from __future__ import absolute_import
<span class='lineno'>  23</span> from __future__ import division
<span class='lineno'>  24</span> from __future__ import print_function
<span class='lineno'>  25</span> 
<span class='lineno'>  26</span> import os
<span class='lineno'>  27</span> import time
<span class='lineno'>  28</span> 
<span class='lineno'>  29</span> from absl import flags
<span class='lineno'>  30</span> import numpy as np
<span class='lineno'>  31</span> import tensorflow as tf
<span class='lineno'>  32</span> from google.protobuf import text_format
<span class='lineno'>  33</span> 
<span class='lineno'>  34</span> import <a href='build_model.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model', title='build_model'>build_model</a>
<span class='lineno'>  35</span> import <a href='configuration.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.configuration', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.configuration', title='configuration'>configuration</a>
<span class='lineno'>  36</span> import <a href='input.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input', title='input'>input</a> as <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input', title='input'>seq2species_input</a>
<span class='lineno'>  37</span> from <a href='protos/__init__.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.protos', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.protos', title='protos'>protos</a> import seq2label_pb2
<span class='lineno'>  38</span> import <a href='seq2label_utils.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.seq2label_utils', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.seq2label_utils', title='seq2label_utils'>seq2label_utils</a>
<span class='lineno'>  39</span> 
<span class='lineno'>  40</span> # Define non-tunable parameters.
<span class='lineno'>  41</span> flags.DEFINE_integer(&#39;num_filters&#39;, 1, &#39;Number of filters for conv model&#39;)
<span class='lineno'>  42</span> flags.DEFINE_string(&#39;hparams&#39;, &#39;&#39;,
<span class='lineno'>  43</span>                     &#39;Comma-separated list of name=value hyperparameter &#39;
<span class='lineno'>  44</span>                     &quot;pairs (&#39;hp1=value1,hp2=value2&#39;). Unspecified &quot;
<span class='lineno'>  45</span>                     &#39;hyperparameters will be filled with defaults.&#39;)
<span class='lineno'>  46</span> flags.DEFINE_integer(&#39;batch_size&#39;, 512, &#39;Size of batches during training.&#39;)
<span class='lineno'>  47</span> flags.DEFINE_integer(&#39;min_train_steps&#39;, 1000,
<span class='lineno'>  48</span>                      &#39;Minimum number of training steps to run.&#39;)
<span class='lineno'>  49</span> flags.DEFINE_float(&#39;max_task_loss&#39;, 10.0,
<span class='lineno'>  50</span>                    &quot;Terminate trial if task loss doesn&#39;t fall below this &quot;
<span class='lineno'>  51</span>                    &#39;within --min_train_steps.&#39;)
<span class='lineno'>  52</span> flags.DEFINE_integer(&#39;n_print_progress_every&#39;, 1000,
<span class='lineno'>  53</span>                      &#39;Print training progress every &#39;
<span class='lineno'>  54</span>                      &#39;--n_print_progress_every global steps.&#39;)
<span class='lineno'>  55</span> flags.DEFINE_list(&#39;targets&#39;, [&#39;species&#39;],
<span class='lineno'>  56</span>                   &#39;Names of taxonomic ranks to use as training targets.&#39;)
<span class='lineno'>  57</span> flags.DEFINE_float(
<span class='lineno'>  58</span>     &#39;noise_rate&#39;, 0.0, &#39;Rate [0.0, 1.0] at which to inject &#39;
<span class='lineno'>  59</span>     &#39;base-flipping noise into input read sequences.&#39;)
<span class='lineno'>  60</span> 
<span class='lineno'>  61</span> # Define paths to logs and data.
<span class='lineno'>  62</span> flags.DEFINE_list(
<span class='lineno'>  63</span>     &#39;train_files&#39;, [], &#39;Full paths to the TFRecords containing the &#39;
<span class='lineno'>  64</span>     &#39;training examples.&#39;)
<span class='lineno'>  65</span> flags.DEFINE_string(
<span class='lineno'>  66</span>     &#39;metadata_path&#39;, &#39;&#39;, &#39;Full path of the text proto containing configuration &#39;
<span class='lineno'>  67</span>     &#39;information about the set of training examples.&#39;)
<span class='lineno'>  68</span> flags.DEFINE_string(&#39;logdir&#39;, &#39;/tmp/seq2species&#39;,
<span class='lineno'>  69</span>                     &#39;Directory to which to write logs.&#39;)
<span class='lineno'>  70</span> 
<span class='lineno'>  71</span> # Define supervisor/checkpointing options.
<span class='lineno'>  72</span> flags.DEFINE_integer(&#39;task&#39;, 0, &#39;Task ID of the replica running the training.&#39;)
<span class='lineno'>  73</span> flags.DEFINE_string(&#39;master&#39;, &#39;&#39;, &#39;Name of the TF master to use.&#39;)
<span class='lineno'>  74</span> flags.DEFINE_integer(
<span class='lineno'>  75</span>     &#39;save_model_secs&#39;, 900, &#39;Rate at which to save model parameters. &#39;
<span class='lineno'>  76</span>     &#39;Set to 0 to disable checkpointing.&#39;)
<span class='lineno'>  77</span> flags.DEFINE_integer(&#39;recovery_wait_secs&#39;, 30,
<span class='lineno'>  78</span>                      &#39;Wait to recover model from checkpoint &#39;
<span class='lineno'>  79</span>                      &#39;before timing out.&#39;)
<span class='lineno'>  80</span> flags.DEFINE_integer(&#39;save_summaries_secs&#39;, 900,
<span class='lineno'>  81</span>                      &#39;Rate at which to save Tensorboard summaries.&#39;)
<span class='lineno'>  82</span> flags.DEFINE_integer(&#39;ps_tasks&#39;, 0,
<span class='lineno'>  83</span>                      &#39;Number of tasks in the ps job; 0 if no ps is used.&#39;)
<span class='lineno'>  84</span> 
<span class='lineno'>  85</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a> = flags.FLAGS
<span class='lineno'>  86</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.RANDOM_SEED', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.RANDOM_SEED', title='int'>RANDOM_SEED</a> = 42
<span class='lineno'>  87</span> 
<span class='lineno'>  88</span> 
<span class='lineno'>  89</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.wait_until', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.wait_until', title='int -> None / ? -> None'>wait_until</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.wait_until.time_sec', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.wait_until.time_sec', title='int'>time_sec</a>):
<span class='lineno'>  90</span>   &quot;&quot;&quot;Stalls execution until a given time.
<span class='lineno'>  91</span> 
<span class='lineno'>  92</span>   Args:
<span class='lineno'>  93</span>     time_sec: time, in seconds, until which to loop idly.
<span class='lineno'>  94</span>   &quot;&quot;&quot;
<span class='lineno'>  95</span>   while time.time() &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.wait_until.time_sec', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.wait_until.time_sec', title='int'>time_sec</a>:
<span class='lineno'>  96</span>     pass
<span class='lineno'>  97</span> 
<span class='lineno'>  98</span> 
<span class='lineno'>  99</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures', title='(dict, dict, ?, None) -> None / (?, ?, ?, ?) -> None / (?, ?, ?, None) -> None'>update_measures</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.measures', title='dict'>measures</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.new_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.new_measures', title='dict'>new_measures</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.loss_val', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.loss_val', title='?'>loss_val</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.max_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.max_loss', title='None'>max_loss</a>=None):
<span class='lineno'> 100</span>   &quot;&quot;&quot;Updates tracking of experimental measures and infeasibilty.
<span class='lineno'> 101</span> 
<span class='lineno'> 102</span>   Args:
<span class='lineno'> 103</span>     measures: dict; mapping from measure name to measure value.
<span class='lineno'> 104</span>     new_measures: dict; mapping from measure name to new measure values.
<span class='lineno'> 105</span>     loss_val: float; value of loss metric by which to determine fesibility.
<span class='lineno'> 106</span>     max_loss: float; maximum value at which to consider the loss feasible.
<span class='lineno'> 107</span> 
<span class='lineno'> 108</span>   Side Effects:
<span class='lineno'> 109</span>     Updates the given mapping of measures and values based on the current
<span class='lineno'> 110</span>     experimental metrics stored in new_measures, and determines current
<span class='lineno'> 111</span>     feasibility of the experiment based on the provided loss value.
<span class='lineno'> 112</span>   &quot;&quot;&quot;
<span class='lineno'> 113</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.max_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.max_loss', title='None'>max_loss</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.max_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.max_loss', title='None'>max_loss</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.max_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.max_loss', title='None'>max_loss</a> else np.finfo(&#39;f&#39;).max
<span class='lineno'> 114</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.measures', title='dict'>measures</a>[&#39;is_infeasible&#39;] = (
<span class='lineno'> 115</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.loss_val', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.loss_val', title='?'>loss_val</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.max_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.max_loss', title='None'>max_loss</a> or not np.isfinite(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.loss_val', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.loss_val', title='?'>loss_val</a>))
<span class='lineno'> 116</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.measures', title='dict'>measures</a>.update(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.new_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures.new_measures', title='dict'>new_measures</a>)
<span class='lineno'> 117</span> 
<span class='lineno'> 118</span> 
<span class='lineno'> 119</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training', title='(?, ?, ?, ?, ?) -> None / (ConvolutionalNet, None, InputDataset, ?, ?) -> None'>run_training</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', title='ConvolutionalNet'>model</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.hparams', title='None'>hparams</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.training_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.training_dataset', title='InputDataset'>training_dataset</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.logdir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.logdir', title='?'>logdir</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.batch_size', title='?'>batch_size</a>):
<span class='lineno'> 120</span>   &quot;&quot;&quot;Trains the given model on random mini-batches of reads.
<span class='lineno'> 121</span> 
<span class='lineno'> 122</span>   Args:
<span class='lineno'> 123</span>     model: ConvolutionalNet instance containing the model graph and operations.
<span class='lineno'> 124</span>     hparams: tf.contrib.training.Hparams object containing the model&#39;s
<span class='lineno'> 125</span>       hyperparamters; see configuration.py for hyperparameter definitions.
<span class='lineno'> 126</span>     training_dataset: an `InputDataset` that can feed labelled examples.
<span class='lineno'> 127</span>     logdir: string; full path of directory to which to save checkpoints.
<span class='lineno'> 128</span>     batch_size: integer batch size.
<span class='lineno'> 129</span> 
<span class='lineno'> 130</span>   Yields:
<span class='lineno'> 131</span>     Tuple comprising a dictionary of experimental measures and the save path
<span class='lineno'> 132</span>     for train checkpoints and summaries.
<span class='lineno'> 133</span>   &quot;&quot;&quot;
<span class='lineno'> 134</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.input_params', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.input_params', title='dict'>input_params</a> = dict(batch_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.batch_size', title='?'>batch_size</a>)
<span class='lineno'> 135</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.features', title='?'>features</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.labels', title='?'>labels</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.training_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.training_dataset', title='InputDataset'>training_dataset</a>.<a href='input.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input.InputDataset.input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input.InputDataset.input_fn', title='(InputDataset, ?) -> (?, ?) / (InputDataset, dict) -> (?, ?)'>input_fn</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.input_params', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.input_params', title='dict'>input_params</a>)
<span class='lineno'> 136</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', title='ConvolutionalNet'>model</a>.<a href='build_model.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.build_graph', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.build_graph', title='(ConvolutionalNet, ?, ?, ?, ?) -> None'>build_graph</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.features', title='?'>features</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.labels', title='?'>labels</a>, tf.estimator.ModeKeys.TRAIN, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.batch_size', title='?'>batch_size</a>)
<span class='lineno'> 137</span> 
<span class='lineno'> 138</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.is_chief', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.is_chief', title='bool'>is_chief</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.task == 0
<span class='lineno'> 139</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.scaffold', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.scaffold', title='?'>scaffold</a> = tf.train.Scaffold(
<span class='lineno'> 140</span>       saver=tf.train.Saver(
<span class='lineno'> 141</span>           tf.global_variables(),
<span class='lineno'> 142</span>           max_to_keep=5,
<span class='lineno'> 143</span>           keep_checkpoint_every_n_hours=1.0),
<span class='lineno'> 144</span>       init_op=tf.global_variables_initializer(),
<span class='lineno'> 145</span>       summary_op=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', title='ConvolutionalNet'>model</a>.<a href='build_model.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.summary_op', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.summary_op', title='ConvolutionalNet -> ?'>summary_op</a>)
<span class='lineno'> 146</span>   with tf.train.MonitoredTrainingSession(
<span class='lineno'> 147</span>       master=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.master,
<span class='lineno'> 148</span>       checkpoint_dir=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.logdir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.logdir', title='?'>logdir</a>,
<span class='lineno'> 149</span>       is_chief=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.is_chief', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.is_chief', title='bool'>is_chief</a>,
<span class='lineno'> 150</span>       scaffold=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.scaffold', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.scaffold', title='?'>scaffold</a>,
<span class='lineno'> 151</span>       save_summaries_secs=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.save_summaries_secs,
<span class='lineno'> 152</span>       save_checkpoint_secs=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.save_model_secs,
<span class='lineno'> 153</span>       max_wait_secs=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.recovery_wait_secs) as <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.sess', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.sess', title='?'>sess</a>:
<span class='lineno'> 154</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', title='?'>global_step</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.sess', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.sess', title='?'>sess</a>.run(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', title='ConvolutionalNet'>model</a>.<a href='build_model.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.global_step', title='ConvolutionalNet -> ?'>global_step</a>)
<span class='lineno'> 155</span>     print(&#39;Initialized model at global step &#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', title='?'>global_step</a>)
<span class='lineno'> 156</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.init_time', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.init_time', title='int'>init_time</a> = time.time()
<span class='lineno'> 157</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.measures', title='dict'>measures</a> = {&#39;is_infeasible&#39;: False}
<span class='lineno'> 158</span> 
<span class='lineno'> 159</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.is_chief', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.is_chief', title='bool'>is_chief</a>:
<span class='lineno'> 160</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model_info', title='None'>model_info</a> = <a href='seq2label_utils.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.seq2label_utils', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.seq2label_utils', title='seq2label_utils'>seq2label_utils</a>.<a href='seq2label_utils.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.seq2label_utils.construct_seq2label_model_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.seq2label_utils.construct_seq2label_model_info', title='(?, str, ?, ?, ?, ?, ?) -> None / (?, ?, ?, ?, ?, ?, ?) -> None / (None, str, ?, ?, ?, ?, ?) -> None'>construct_seq2label_model_info</a>(
<span class='lineno'> 161</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.hparams', title='None'>hparams</a>, &#39;conv&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.targets, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.metadata_path, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.batch_size,
<span class='lineno'> 162</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.num_filters, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.noise_rate)
<span class='lineno'> 163</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message', title='(?, ?) -> None / (?, str) -> None / (None, str) -> None'>write_message</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model_info', title='None'>model_info</a>, os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.logdir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.logdir', title='?'>logdir</a>, &#39;model_info.pbtxt&#39;))
<span class='lineno'> 164</span> 
<span class='lineno'> 165</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.ops', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.ops', title='{[?] | [{ConvolutionalNet -> ? | ConvolutionalNet -> ? | ConvolutionalNet -> ? | ConvolutionalNet -> ? | ConvolutionalNet -> dict}]}'>ops</a> = [
<span class='lineno'> 166</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', title='ConvolutionalNet'>model</a>.<a href='build_model.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.accuracy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.accuracy', title='ConvolutionalNet -> ?'>accuracy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', title='ConvolutionalNet'>model</a>.<a href='build_model.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.weighted_accuracy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.weighted_accuracy', title='ConvolutionalNet -> dict'>weighted_accuracy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', title='ConvolutionalNet'>model</a>.<a href='build_model.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.total_loss', title='ConvolutionalNet -> ?'>total_loss</a>,
<span class='lineno'> 167</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', title='ConvolutionalNet'>model</a>.<a href='build_model.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.global_step', title='ConvolutionalNet -> ?'>global_step</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.model', title='ConvolutionalNet'>model</a>.<a href='build_model.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.train_op', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet.train_op', title='ConvolutionalNet -> ?'>train_op</a>
<span class='lineno'> 168</span>     ]
<span class='lineno'> 169</span> 
<span class='lineno'> 170</span>     while not <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.sess', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.sess', title='?'>sess</a>.should_stop() and <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', title='?'>global_step</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.hparams', title='None'>hparams</a>.train_steps:
<span class='lineno'> 171</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.accuracy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.accuracy', title='?'>accuracy</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.weighted_accuracy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.weighted_accuracy', title='?'>weighted_accuracy</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', title='?'>loss</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', title='?'>global_step</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training._', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training._', title='?'>_</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.sess', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.sess', title='?'>sess</a>.run(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.ops', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.ops', title='{[?] | [{ConvolutionalNet -> ? | ConvolutionalNet -> ? | ConvolutionalNet -> ? | ConvolutionalNet -> ? | ConvolutionalNet -> dict}]}'>ops</a>)
<span class='lineno'> 172</span> 
<span class='lineno'> 173</span>       def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures', title='() -> None'>gather_measures</a>():
<span class='lineno'> 174</span>         &quot;&quot;&quot;Updates the measures dictionary from this batch.&quot;&quot;&quot;
<span class='lineno'> 175</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.new_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.new_measures', title='dict'>new_measures</a> = {&#39;train_loss&#39;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', title='?'>loss</a>, &#39;global_step&#39;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', title='?'>global_step</a>}
<span class='lineno'> 176</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.target', title='?'>target</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.targets:
<span class='lineno'> 177</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.new_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.new_measures', title='dict'>new_measures</a>.update({
<span class='lineno'> 178</span>               (&#39;train_accuracy/%s&#39; % <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.target', title='?'>target</a>): <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.accuracy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.accuracy', title='?'>accuracy</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.target', title='?'>target</a>],
<span class='lineno'> 179</span>               (&#39;train_weighted_accuracy/%s&#39; % <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.target', title='?'>target</a>): <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.weighted_accuracy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.weighted_accuracy', title='?'>weighted_accuracy</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.target', title='?'>target</a>]
<span class='lineno'> 180</span>           })
<span class='lineno'> 181</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.update_measures', title='(dict, dict, ?, None) -> None / (?, ?, ?, ?) -> None / (?, ?, ?, None) -> None'>update_measures</a>(
<span class='lineno'> 182</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.measures', title='dict'>measures</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.new_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures.new_measures', title='dict'>new_measures</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', title='?'>loss</a>, max_loss=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.max_task_loss)
<span class='lineno'> 183</span> 
<span class='lineno'> 184</span>       # Periodically track measures according to current mini-batch performance.
<span class='lineno'> 185</span> 
<span class='lineno'> 186</span>       # Log a message.
<span class='lineno'> 187</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', title='?'>global_step</a> % <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.n_print_progress_every == 0:
<span class='lineno'> 188</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', title='?'>log_message</a> = (&#39;\tstep: %d (%d sec), loss: %f&#39; %
<span class='lineno'> 189</span>                        (<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', title='?'>global_step</a>, time.time() - <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.init_time', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.init_time', title='int'>init_time</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', title='?'>loss</a>))
<span class='lineno'> 190</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.target', title='?'>target</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.targets:
<span class='lineno'> 191</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', title='?'>log_message</a></a> += (&#39;, accuracy/%s: %f &#39; % (<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.target', title='?'>target</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.accuracy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.accuracy', title='?'>accuracy</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.target', title='?'>target</a>]))
<span class='lineno'> 192</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', title='?'>log_message</a></a> += (&#39;, weighted_accuracy/%s: %f &#39; %
<span class='lineno'> 193</span>                           (<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.target', title='?'>target</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.weighted_accuracy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.weighted_accuracy', title='?'>weighted_accuracy</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.target', title='?'>target</a>]))
<span class='lineno'> 194</span>         print(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.log_message', title='?'>log_message</a>)
<span class='lineno'> 195</span> 
<span class='lineno'> 196</span>         # Gather new measures and update the measures dictionary.
<span class='lineno'> 197</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures', title='() -> None'>gather_measures</a>()
<span class='lineno'> 198</span>         yield <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.measures', title='dict'>measures</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.scaffold', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.scaffold', title='?'>scaffold</a>.saver.last_checkpoints[-1]
<span class='lineno'> 199</span> 
<span class='lineno'> 200</span>       # Check for additional stopping criteria.
<span class='lineno'> 201</span>       if not np.isfinite(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', title='?'>loss</a>) or (<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.loss', title='?'>loss</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.max_task_loss and
<span class='lineno'> 202</span>                                    <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.global_step', title='?'>global_step</a> &gt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.min_train_steps):
<span class='lineno'> 203</span>         break
<span class='lineno'> 204</span> 
<span class='lineno'> 205</span>     # Always yield once at the end.
<span class='lineno'> 206</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.gather_measures', title='() -> None'>gather_measures</a>()
<span class='lineno'> 207</span>     yield <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.measures', title='dict'>measures</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.scaffold', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training.scaffold', title='?'>scaffold</a>.saver.last_checkpoints[-1]
<span class='lineno'> 208</span> 
<span class='lineno'> 209</span> 
<span class='lineno'> 210</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message', title='(?, ?) -> None / (?, str) -> None / (None, str) -> None'>write_message</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.message', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.message', title='None'>message</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.filename', title='str'>filename</a>):
<span class='lineno'> 211</span>   &quot;&quot;&quot;Writes contents of the given message to the given filename as a text proto.
<span class='lineno'> 212</span> 
<span class='lineno'> 213</span>   Args:
<span class='lineno'> 214</span>     message: the proto message to save.
<span class='lineno'> 215</span>     filename: full path of file to which to save the text proto.
<span class='lineno'> 216</span> 
<span class='lineno'> 217</span>   Side Effects:
<span class='lineno'> 218</span>     Outputs a text proto file to the given filename.
<span class='lineno'> 219</span>   &quot;&quot;&quot;
<span class='lineno'> 220</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.message_string', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.message_string', title='?'>message_string</a> = text_format.MessageToString(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.message', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.message', title='None'>message</a>)
<span class='lineno'> 221</span>   with tf.gfile.GFile(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.filename', title='str'>filename</a>, &#39;w&#39;) as <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.f', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.f', title='?'>f</a>:
<span class='lineno'> 222</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.f', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.f', title='?'>f</a>.write(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.message_string', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message.message_string', title='?'>message_string</a>)
<span class='lineno'> 223</span> 
<span class='lineno'> 224</span> 
<span class='lineno'> 225</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures', title='(None, None, int) -> None / (dict, str, int) -> None / (?, ?, ?) -> None'>write_measures</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures', title='dict'>measures</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.checkpoint_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.checkpoint_file', title='str'>checkpoint_file</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.init_time', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.init_time', title='int'>init_time</a>):
<span class='lineno'> 226</span>   &quot;&quot;&quot;Writes performance measures to file.
<span class='lineno'> 227</span> 
<span class='lineno'> 228</span>   Args:
<span class='lineno'> 229</span>     measures: dict; mapping from measure name to measure value.
<span class='lineno'> 230</span>     checkpoint_file: string; full save path for checkpoints and summaries.
<span class='lineno'> 231</span>     init_time: int; start time for work on the current experiment.
<span class='lineno'> 232</span> 
<span class='lineno'> 233</span>   Side Effects:
<span class='lineno'> 234</span>     Writes given dictionary of performance measures for the current experiment
<span class='lineno'> 235</span>     to a &#39;measures.pbtxt&#39; file in the checkpoint directory.
<span class='lineno'> 236</span>   &quot;&quot;&quot;
<span class='lineno'> 237</span>   # Save experiment measures.
<span class='lineno'> 238</span>   print(&#39;global_step: &#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures', title='dict'>measures</a>[&#39;global_step&#39;])
<span class='lineno'> 239</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.experiment_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.experiment_measures', title='?'>experiment_measures</a> = seq2label_pb2.Seq2LabelExperimentMeasures(
<span class='lineno'> 240</span>       checkpoint_path=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.checkpoint_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.checkpoint_file', title='str'>checkpoint_file</a>,
<span class='lineno'> 241</span>       steps=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures', title='dict'>measures</a>[&#39;global_step&#39;],
<span class='lineno'> 242</span>       experiment_infeasible=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures', title='dict'>measures</a>[&#39;is_infeasible&#39;],
<span class='lineno'> 243</span>       wall_time=time.time() - <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.init_time', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.init_time', title='int'>init_time</a>)  # Inaccurate for restarts.
<span class='lineno'> 244</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.name', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.name', title='?'>name</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.value', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.value', title='?'>value</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures', title='dict'>measures</a>.iteritems():
<span class='lineno'> 245</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.name', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.name', title='?'>name</a> not in [&#39;is_infeasible&#39;, &#39;global_step&#39;]:
<span class='lineno'> 246</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.experiment_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.experiment_measures', title='?'>experiment_measures</a>.measures.add(name=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.name', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.name', title='?'>name</a>, value=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.value', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.value', title='?'>value</a>)
<span class='lineno'> 247</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures_file', title='str'>measures_file</a> = os.path.join(
<span class='lineno'> 248</span>       os.path.dirname(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.checkpoint_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.checkpoint_file', title='str'>checkpoint_file</a>), &#39;measures.pbtxt&#39;)
<span class='lineno'> 249</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_message', title='(?, ?) -> None / (?, str) -> None / (None, str) -> None'>write_message</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.experiment_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.experiment_measures', title='?'>experiment_measures</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures_file', title='str'>measures_file</a>)
<span class='lineno'> 250</span>   print(&#39;Wrote &#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.measures_file', title='str'>measures_file</a>,
<span class='lineno'> 251</span>         &#39; containing the following experiment measures:\n&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.experiment_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures.experiment_measures', title='?'>experiment_measures</a>)
<span class='lineno'> 252</span> 
<span class='lineno'> 253</span> 
<span class='lineno'> 254</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main', title='? -> None'>main</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.unused_argv', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.unused_argv', title='?'>unused_argv</a>):
<span class='lineno'> 255</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.dataset_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.dataset_info', title='None'>dataset_info</a> = <a href='input.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input', title='input'>seq2species_input</a>.<a href='input.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input.load_dataset_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input.load_dataset_info', title='? -> None'>load_dataset_info</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.metadata_path)
<span class='lineno'> 256</span> 
<span class='lineno'> 257</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.init_time', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.init_time', title='int'>init_time</a> = time.time()
<span class='lineno'> 258</span> 
<span class='lineno'> 259</span>   # Determine model hyperparameters.
<span class='lineno'> 260</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hparams', title='None'>hparams</a> = <a href='configuration.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.configuration', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.configuration', title='configuration'>configuration</a>.<a href='configuration.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.configuration.parse_hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.configuration.parse_hparams', title='(?, ?) -> None / (str, int) -> None'>parse_hparams</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.hparams, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.num_filters)
<span class='lineno'> 261</span>   print(&#39;Current Hyperparameters:&#39;)
<span class='lineno'> 262</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hp_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hp_name', title='?'>hp_name</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hp_val', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hp_val', title='?'>hp_val</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hparams', title='None'>hparams</a>.values().items():
<span class='lineno'> 263</span>     print(&#39;\t&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hp_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hp_name', title='?'>hp_name</a>, &#39;: &#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hp_val', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hp_val', title='?'>hp_val</a>)
<span class='lineno'> 264</span> 
<span class='lineno'> 265</span>   # Initialize the model graph.
<span class='lineno'> 266</span>   print(&#39;Constructing TensorFlow Graph.&#39;)
<span class='lineno'> 267</span>   tf.reset_default_graph()
<span class='lineno'> 268</span> 
<span class='lineno'> 269</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.input_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.input_dataset', title='InputDataset'>input_dataset</a> = <a href='input.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input', title='input'>seq2species_input</a>.<a href='input.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input.InputDataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input.InputDataset', title='<InputDataset>'>InputDataset</a>.<a href='input.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input.InputDataset.from_tfrecord_files', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.input.InputDataset.from_tfrecord_files', title='? -> InputDataset'>from_tfrecord_files</a>(
<span class='lineno'> 270</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.train_files,
<span class='lineno'> 271</span>       &#39;train&#39;,
<span class='lineno'> 272</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.targets,
<span class='lineno'> 273</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.dataset_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.dataset_info', title='None'>dataset_info</a>,
<span class='lineno'> 274</span>       noise_rate=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.noise_rate,
<span class='lineno'> 275</span>       random_seed=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.RANDOM_SEED', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.RANDOM_SEED', title='int'>RANDOM_SEED</a>)
<span class='lineno'> 276</span> 
<span class='lineno'> 277</span>   with tf.device(tf.train.replica_device_setter(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.ps_tasks)):
<span class='lineno'> 278</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.model', title='ConvolutionalNet'>model</a> = <a href='build_model.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model', title='build_model'>build_model</a>.<a href='build_model.py.html#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.build_model.ConvolutionalNet', title='<ConvolutionalNet>'>ConvolutionalNet</a>(
<span class='lineno'> 279</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hparams', title='None'>hparams</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.dataset_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.dataset_info', title='None'>dataset_info</a>, targets=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.targets)
<span class='lineno'> 280</span> 
<span class='lineno'> 281</span>   # Run the experiment.
<span class='lineno'> 282</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.measures', title='None'>measures</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.checkpoint_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.checkpoint_file', title='None'>checkpoint_file</a> = None, None
<span class='lineno'> 283</span>   print(&#39;Starting model training.&#39;)
<span class='lineno'> 284</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.cur_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.cur_measures', title='?'>cur_measures</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.cur_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.cur_file', title='?'>cur_file</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.run_training', title='(?, ?, ?, ?, ?) -> None / (ConvolutionalNet, None, InputDataset, ?, ?) -> None'>run_training</a>(
<span class='lineno'> 285</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.model', title='ConvolutionalNet'>model</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.hparams', title='None'>hparams</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.input_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.input_dataset', title='InputDataset'>input_dataset</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.logdir, batch_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.FLAGS', title='?'>FLAGS</a>.batch_size):
<span class='lineno'> 286</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.measures', title='?'>measures</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.checkpoint_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.checkpoint_file', title='?'>checkpoint_file</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.cur_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.cur_measures', title='?'>cur_measures</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.cur_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.cur_file', title='?'>cur_file</a>
<span class='lineno'> 287</span> 
<span class='lineno'> 288</span>   # Save experiment results.
<span class='lineno'> 289</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.write_measures', title='(None, None, int) -> None / (dict, str, int) -> None / (?, ?, ?) -> None'>write_measures</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.measures', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.measures', title='None'>measures</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.checkpoint_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.checkpoint_file', title='None'>checkpoint_file</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.init_time', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main.init_time', title='int'>init_time</a>)
<span class='lineno'> 290</span> 
<span class='lineno'> 291</span> 
<span class='lineno'> 292</span> if __name__ == &#39;__main__&#39;:
<span class='lineno'> 293</span>   tf.app.run(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.seq2species.run_training.main', title='? -> None'>main</a>)
</pre></td></tr></table></body></html>