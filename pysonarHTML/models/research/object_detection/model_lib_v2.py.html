<html>
<head>
<meta charset="utf-8">
<title>/home/xxm/Desktop/EMSE/dataset/models/research/object_detection/model_lib_v2.py</title>
<style type='text/css'>
body { color: #666666; }
a {
    text-decoration: none; color: #5AA2A7;
    border: solid 1px rgba(255,255,255,0);
}
a.active {
    background: -webkit-linear-gradient(top,rgba(255, 255, 200, 0.35) 0,rgba(255, 255, 200, 0.55) 100%);
    border: solid 1px #E5E600;
}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #cccccc;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px solid orange; padding-bottom: 1px}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted;

function highlight(xid)
{
    var elms = document.querySelectorAll('[xid="' + xid + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "active";
    }
    highlighted = xid;
}

function clearHighlight() {
    var elms = document.querySelectorAll('[xid="' + highlighted + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "";
    }
}

window.onload =
    function (e) {
        var tags = document.getElementsByTagName("A")
        for (var i = 0; i < tags.length; i++) {
            tags[i].onmouseover =
                function (e) {
                    clearHighlight();
                    var xid = e.toElement.getAttribute('xid');
                    highlight(xid);
                }
        }
    }</script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', xid='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP'>MODEL_BUILD_UTIL_MAP</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.RESTORE_MAP_ERROR_TEMPLATE', xid='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.RESTORE_MAP_ERROR_TEMPLATE'>RESTORE_MAP_ERROR_TEMPLATE</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts', xid='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts'>_compute_losses_and_predictions_dicts</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step', xid='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step'>eager_train_step</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map', xid='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map'>validate_tf_v2_checkpoint_restore_map</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint', xid='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint'>load_fine_tune_checkpoint</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath', xid='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath'>_get_filepath</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories', xid='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories'>_clean_temporary_directories</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop', xid='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop'>train_loop</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop', xid='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop'>eager_eval_loop</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously', xid='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously'>eval_continuously</a></li></ul>
</td><td><pre><span class='lineno'>   1</span> # Copyright 2019 The TensorFlow Authors. All Rights Reserved.
<span class='lineno'>   2</span> #
<span class='lineno'>   3</span> # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
<span class='lineno'>   4</span> # you may not use this file except in compliance with the License.
<span class='lineno'>   5</span> # You may obtain a copy of the License at
<span class='lineno'>   6</span> #
<span class='lineno'>   7</span> #     http://www.apache.org/licenses/LICENSE-2.0
<span class='lineno'>   8</span> #
<span class='lineno'>   9</span> # Unless required by applicable law or agreed to in writing, software
<span class='lineno'>  10</span> # distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<span class='lineno'>  11</span> # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<span class='lineno'>  12</span> # See the License for the specific language governing permissions and
<span class='lineno'>  13</span> # limitations under the License.
<span class='lineno'>  14</span> # ==============================================================================
<span class='lineno'>  15</span> r&quot;&quot;&quot;Constructs model, inputs, and training environment.&quot;&quot;&quot;
<span class='lineno'>  16</span> 
<span class='lineno'>  17</span> from __future__ import absolute_import
<span class='lineno'>  18</span> from __future__ import division
<span class='lineno'>  19</span> from __future__ import print_function
<span class='lineno'>  20</span> 
<span class='lineno'>  21</span> import copy
<span class='lineno'>  22</span> import os
<span class='lineno'>  23</span> import time
<span class='lineno'>  24</span> 
<span class='lineno'>  25</span> import tensorflow.compat.v1 as tf
<span class='lineno'>  26</span> 
<span class='lineno'>  27</span> from object_detection import eval_util
<span class='lineno'>  28</span> from object_detection import inputs
<span class='lineno'>  29</span> from object_detection import model_lib
<span class='lineno'>  30</span> from object_detection.builders import model_builder
<span class='lineno'>  31</span> from object_detection.builders import optimizer_builder
<span class='lineno'>  32</span> from object_detection.core import standard_fields as fields
<span class='lineno'>  33</span> from object_detection.protos import train_pb2
<span class='lineno'>  34</span> from object_detection.utils import config_util
<span class='lineno'>  35</span> from object_detection.utils import label_map_util
<span class='lineno'>  36</span> from object_detection.utils import ops
<span class='lineno'>  37</span> from object_detection.utils import variables_helper
<span class='lineno'>  38</span> from object_detection.utils import visualization_utils as vutils
<span class='lineno'>  39</span> 
<span class='lineno'>  40</span> # pylint: disable=g-import-not-at-top
<span class='lineno'>  41</span> try:
<span class='lineno'>  42</span>   from tensorflow.contrib import tpu as contrib_tpu
<span class='lineno'>  43</span> except ImportError:
<span class='lineno'>  44</span>   # TF 2.0 doesn&#39;t ship with contrib.
<span class='lineno'>  45</span>   pass
<span class='lineno'>  46</span> # pylint: enable=g-import-not-at-top
<span class='lineno'>  47</span> 
<span class='lineno'>  48</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', title='?'>MODEL_BUILD_UTIL_MAP</a> = model_lib.MODEL_BUILD_UTIL_MAP
<span class='lineno'>  49</span> 
<span class='lineno'>  50</span> ### NOTE: This file is a wip.
<span class='lineno'>  51</span> ### TODO(kaftan): Explore adding unit tests for individual methods
<span class='lineno'>  52</span> ### TODO(kaftan): Add unit test that checks training on a single image w/
<span class='lineno'>  53</span> #### groundtruth, and verfiy that loss goes to zero.
<span class='lineno'>  54</span> #### Possibly have version that takes it as the whole train &amp; eval dataset,
<span class='lineno'>  55</span> #### &amp; verify the loss output from the eval_loop method.
<span class='lineno'>  56</span> ### TODO(kaftan): Make sure the unit tests run in TAP presubmits or Kokoro
<span class='lineno'>  57</span> 
<span class='lineno'>  58</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.RESTORE_MAP_ERROR_TEMPLATE', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.RESTORE_MAP_ERROR_TEMPLATE', title='str'>RESTORE_MAP_ERROR_TEMPLATE</a> = (
<span class='lineno'>  59</span>     &#39;Since we are restoring a v2 style checkpoint&#39;
<span class='lineno'>  60</span>     &#39; restore_map was expected to return a (str -&gt; Model) mapping,&#39;
<span class='lineno'>  61</span>     &#39; but we received a ({} -&gt; {}) mapping instead.&#39;
<span class='lineno'>  62</span> )
<span class='lineno'>  63</span> 
<span class='lineno'>  64</span> 
<span class='lineno'>  65</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts', title='(?, ?, ?, ?) -> (?, ?) / (?, ?, ?, bool) -> (?, ?)'>_compute_losses_and_predictions_dicts</a>(
<span class='lineno'>  66</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.model', title='?'>model</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.features', title='?'>features</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.labels', title='?'>labels</a>,
<span class='lineno'>  67</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.add_regularization_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.add_regularization_loss', title='bool'>add_regularization_loss</a>=True):
<span class='lineno'>  68</span>   &quot;&quot;&quot;Computes the losses dict and predictions dict for a model on inputs.
<span class='lineno'>  69</span> 
<span class='lineno'>  70</span>   Args:
<span class='lineno'>  71</span>     model: a DetectionModel (based on Keras).
<span class='lineno'>  72</span>     features: Dictionary of feature tensors from the input dataset.
<span class='lineno'>  73</span>       Should be in the format output by `inputs.train_input` and
<span class='lineno'>  74</span>       `inputs.eval_input`.
<span class='lineno'>  75</span>         features[fields.InputDataFields.image] is a [batch_size, H, W, C]
<span class='lineno'>  76</span>           float32 tensor with preprocessed images.
<span class='lineno'>  77</span>         features[HASH_KEY] is a [batch_size] int32 tensor representing unique
<span class='lineno'>  78</span>           identifiers for the images.
<span class='lineno'>  79</span>         features[fields.InputDataFields.true_image_shape] is a [batch_size, 3]
<span class='lineno'>  80</span>           int32 tensor representing the true image shapes, as preprocessed
<span class='lineno'>  81</span>           images could be padded.
<span class='lineno'>  82</span>         features[fields.InputDataFields.original_image] (optional) is a
<span class='lineno'>  83</span>           [batch_size, H, W, C] float32 tensor with original images.
<span class='lineno'>  84</span>     labels: A dictionary of groundtruth tensors post-unstacking. The original
<span class='lineno'>  85</span>       labels are of the form returned by `inputs.train_input` and
<span class='lineno'>  86</span>       `inputs.eval_input`. The shapes may have been modified by unstacking with
<span class='lineno'>  87</span>       `model_lib.unstack_batch`. However, the dictionary includes the following
<span class='lineno'>  88</span>       fields.
<span class='lineno'>  89</span>         labels[fields.InputDataFields.num_groundtruth_boxes] is a
<span class='lineno'>  90</span>           int32 tensor indicating the number of valid groundtruth boxes
<span class='lineno'>  91</span>           per image.
<span class='lineno'>  92</span>         labels[fields.InputDataFields.groundtruth_boxes] is a float32 tensor
<span class='lineno'>  93</span>           containing the corners of the groundtruth boxes.
<span class='lineno'>  94</span>         labels[fields.InputDataFields.groundtruth_classes] is a float32
<span class='lineno'>  95</span>           one-hot tensor of classes.
<span class='lineno'>  96</span>         labels[fields.InputDataFields.groundtruth_weights] is a float32 tensor
<span class='lineno'>  97</span>           containing groundtruth weights for the boxes.
<span class='lineno'>  98</span>         -- Optional --
<span class='lineno'>  99</span>         labels[fields.InputDataFields.groundtruth_instance_masks] is a
<span class='lineno'> 100</span>           float32 tensor containing only binary values, which represent
<span class='lineno'> 101</span>           instance masks for objects.
<span class='lineno'> 102</span>         labels[fields.InputDataFields.groundtruth_keypoints] is a
<span class='lineno'> 103</span>           float32 tensor containing keypoints for each box.
<span class='lineno'> 104</span>         labels[fields.InputDataFields.groundtruth_group_of] is a tf.bool tensor
<span class='lineno'> 105</span>           containing group_of annotations.
<span class='lineno'> 106</span>         labels[fields.InputDataFields.groundtruth_labeled_classes] is a float32
<span class='lineno'> 107</span>           k-hot tensor of classes.
<span class='lineno'> 108</span>     add_regularization_loss: Whether or not to include the model&#39;s
<span class='lineno'> 109</span>       regularization loss in the losses dictionary.
<span class='lineno'> 110</span> 
<span class='lineno'> 111</span>   Returns:
<span class='lineno'> 112</span>     A tuple containing the losses dictionary (with the total loss under
<span class='lineno'> 113</span>     the key &#39;Loss/total_loss&#39;), and the predictions dictionary produced by
<span class='lineno'> 114</span>     `model.predict`.
<span class='lineno'> 115</span> 
<span class='lineno'> 116</span>   &quot;&quot;&quot;
<span class='lineno'> 117</span>   model_lib.provide_groundtruth(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.model', title='?'>model</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.labels', title='?'>labels</a>)
<span class='lineno'> 118</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.preprocessed_images', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.preprocessed_images', title='?'>preprocessed_images</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.features', title='?'>features</a>[fields.InputDataFields.image]
<span class='lineno'> 119</span> 
<span class='lineno'> 120</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.prediction_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.prediction_dict', title='?'>prediction_dict</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.model', title='?'>model</a>.predict(
<span class='lineno'> 121</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.preprocessed_images', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.preprocessed_images', title='?'>preprocessed_images</a>,
<span class='lineno'> 122</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.features', title='?'>features</a>[fields.InputDataFields.true_image_shape])
<span class='lineno'> 123</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.prediction_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.prediction_dict', title='?'>prediction_dict</a> = ops.bfloat16_to_float32_nested(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.prediction_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.prediction_dict', title='?'>prediction_dict</a>)
<span class='lineno'> 124</span> 
<span class='lineno'> 125</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses_dict', title='?'>losses_dict</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.model', title='?'>model</a>.loss(
<span class='lineno'> 126</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.prediction_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.prediction_dict', title='?'>prediction_dict</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.features', title='?'>features</a>[fields.InputDataFields.true_image_shape])
<span class='lineno'> 127</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses', title='[?]'>losses</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.loss_tensor', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.loss_tensor', title='?'>loss_tensor</a> for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.loss_tensor', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.loss_tensor', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.loss_tensor', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.loss_tensor', title='?'>loss_tensor</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses_dict', title='?'>losses_dict</a>.values()]
<span class='lineno'> 128</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.add_regularization_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.add_regularization_loss', title='bool'>add_regularization_loss</a>:
<span class='lineno'> 129</span>     # TODO(kaftan): As we figure out mixed precision &amp; bfloat 16, we may
<span class='lineno'> 130</span>     ## need to convert these regularization losses from bfloat16 to float32
<span class='lineno'> 131</span>     ## as well.
<span class='lineno'> 132</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_losses', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_losses', title='?'>regularization_losses</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.model', title='?'>model</a>.regularization_losses()
<span class='lineno'> 133</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_losses', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_losses', title='?'>regularization_losses</a>:
<span class='lineno'> 134</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_losses', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_losses', title='?'>regularization_losses</a> = ops.bfloat16_to_float32_nested(
<span class='lineno'> 135</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_losses', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_losses', title='?'>regularization_losses</a>)
<span class='lineno'> 136</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_loss', title='?'>regularization_loss</a> = tf.add_n(
<span class='lineno'> 137</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_losses', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_losses', title='?'>regularization_losses</a>, name=&#39;regularization_loss&#39;)
<span class='lineno'> 138</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses', title='[?]'>losses</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_loss', title='?'>regularization_loss</a>)
<span class='lineno'> 139</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses_dict', title='?'>losses_dict</a>[&#39;Loss/regularization_loss&#39;] = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.regularization_loss', title='?'>regularization_loss</a>
<span class='lineno'> 140</span> 
<span class='lineno'> 141</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.total_loss', title='?'>total_loss</a> = tf.add_n(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses', title='[?]'>losses</a>, name=&#39;total_loss&#39;)
<span class='lineno'> 142</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses_dict', title='?'>losses_dict</a>[&#39;Loss/total_loss&#39;] = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.total_loss', title='?'>total_loss</a>
<span class='lineno'> 143</span> 
<span class='lineno'> 144</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.losses_dict', title='?'>losses_dict</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.prediction_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts.prediction_dict', title='?'>prediction_dict</a>
<span class='lineno'> 145</span> 
<span class='lineno'> 146</span> 
<span class='lineno'> 147</span> # TODO(kaftan): Explore removing learning_rate from this method &amp; returning
<span class='lineno'> 148</span> ## The full losses dict instead of just total_loss, then doing all summaries
<span class='lineno'> 149</span> ## saving in a utility method called by the outer training loop.
<span class='lineno'> 150</span> # TODO(kaftan): Explore adding gradient summaries
<span class='lineno'> 151</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step', title='(?, ?, ?, ?, ?, ?, bool, None, None, float) -> None'>eager_train_step</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.detection_model', title='?'>detection_model</a>,
<span class='lineno'> 152</span>                      <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.features', title='?'>features</a>,
<span class='lineno'> 153</span>                      <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.labels', title='?'>labels</a>,
<span class='lineno'> 154</span>                      <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.unpad_groundtruth_tensors', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.unpad_groundtruth_tensors', title='?'>unpad_groundtruth_tensors</a>,
<span class='lineno'> 155</span>                      <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.optimizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.optimizer', title='?'>optimizer</a>,
<span class='lineno'> 156</span>                      <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.learning_rate', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.learning_rate', title='?'>learning_rate</a>,
<span class='lineno'> 157</span>                      <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.add_regularization_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.add_regularization_loss', title='bool'>add_regularization_loss</a>=True,
<span class='lineno'> 158</span>                      <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.clip_gradients_value', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.clip_gradients_value', title='None'>clip_gradients_value</a>=None,
<span class='lineno'> 159</span>                      <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.global_step', title='None'>global_step</a>=None,
<span class='lineno'> 160</span>                      <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.num_replicas', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.num_replicas', title='float'>num_replicas</a>=1.0):
<span class='lineno'> 161</span>   &quot;&quot;&quot;Process a single training batch.
<span class='lineno'> 162</span> 
<span class='lineno'> 163</span>   This method computes the loss for the model on a single training batch,
<span class='lineno'> 164</span>   while tracking the gradients with a gradient tape. It then updates the
<span class='lineno'> 165</span>   model variables with the optimizer, clipping the gradients if
<span class='lineno'> 166</span>   clip_gradients_value is present.
<span class='lineno'> 167</span> 
<span class='lineno'> 168</span>   This method can run eagerly or inside a tf.function.
<span class='lineno'> 169</span> 
<span class='lineno'> 170</span>   Args:
<span class='lineno'> 171</span>     detection_model: A DetectionModel (based on Keras) to train.
<span class='lineno'> 172</span>     features: Dictionary of feature tensors from the input dataset.
<span class='lineno'> 173</span>       Should be in the format output by `inputs.train_input.
<span class='lineno'> 174</span>         features[fields.InputDataFields.image] is a [batch_size, H, W, C]
<span class='lineno'> 175</span>           float32 tensor with preprocessed images.
<span class='lineno'> 176</span>         features[HASH_KEY] is a [batch_size] int32 tensor representing unique
<span class='lineno'> 177</span>           identifiers for the images.
<span class='lineno'> 178</span>         features[fields.InputDataFields.true_image_shape] is a [batch_size, 3]
<span class='lineno'> 179</span>           int32 tensor representing the true image shapes, as preprocessed
<span class='lineno'> 180</span>           images could be padded.
<span class='lineno'> 181</span>         features[fields.InputDataFields.original_image] (optional, not used
<span class='lineno'> 182</span>           during training) is a
<span class='lineno'> 183</span>           [batch_size, H, W, C] float32 tensor with original images.
<span class='lineno'> 184</span>     labels: A dictionary of groundtruth tensors. This method unstacks
<span class='lineno'> 185</span>       these labels using model_lib.unstack_batch. The stacked labels are of
<span class='lineno'> 186</span>       the form returned by `inputs.train_input` and `inputs.eval_input`.
<span class='lineno'> 187</span>         labels[fields.InputDataFields.num_groundtruth_boxes] is a [batch_size]
<span class='lineno'> 188</span>           int32 tensor indicating the number of valid groundtruth boxes
<span class='lineno'> 189</span>           per image.
<span class='lineno'> 190</span>         labels[fields.InputDataFields.groundtruth_boxes] is a
<span class='lineno'> 191</span>           [batch_size, num_boxes, 4] float32 tensor containing the corners of
<span class='lineno'> 192</span>           the groundtruth boxes.
<span class='lineno'> 193</span>         labels[fields.InputDataFields.groundtruth_classes] is a
<span class='lineno'> 194</span>           [batch_size, num_boxes, num_classes] float32 one-hot tensor of
<span class='lineno'> 195</span>           classes. num_classes includes the background class.
<span class='lineno'> 196</span>         labels[fields.InputDataFields.groundtruth_weights] is a
<span class='lineno'> 197</span>           [batch_size, num_boxes] float32 tensor containing groundtruth weights
<span class='lineno'> 198</span>           for the boxes.
<span class='lineno'> 199</span>         -- Optional --
<span class='lineno'> 200</span>         labels[fields.InputDataFields.groundtruth_instance_masks] is a
<span class='lineno'> 201</span>           [batch_size, num_boxes, H, W] float32 tensor containing only binary
<span class='lineno'> 202</span>           values, which represent instance masks for objects.
<span class='lineno'> 203</span>         labels[fields.InputDataFields.groundtruth_keypoints] is a
<span class='lineno'> 204</span>           [batch_size, num_boxes, num_keypoints, 2] float32 tensor containing
<span class='lineno'> 205</span>           keypoints for each box.
<span class='lineno'> 206</span>         labels[fields.InputDataFields.groundtruth_labeled_classes] is a float32
<span class='lineno'> 207</span>           k-hot tensor of classes.
<span class='lineno'> 208</span>     unpad_groundtruth_tensors: A parameter passed to unstack_batch.
<span class='lineno'> 209</span>     optimizer: The training optimizer that will update the variables.
<span class='lineno'> 210</span>     learning_rate: The learning rate tensor for the current training step.
<span class='lineno'> 211</span>       This is used only for TensorBoard logging purposes, it does not affect
<span class='lineno'> 212</span>        model training.
<span class='lineno'> 213</span>     add_regularization_loss: Whether or not to include the model&#39;s
<span class='lineno'> 214</span>       regularization loss in the losses dictionary.
<span class='lineno'> 215</span>     clip_gradients_value: If this is present, clip the gradients global norm
<span class='lineno'> 216</span>       at this value using `tf.clip_by_global_norm`.
<span class='lineno'> 217</span>     global_step: The current training step. Used for TensorBoard logging
<span class='lineno'> 218</span>       purposes. This step is not updated by this function and must be
<span class='lineno'> 219</span>       incremented separately.
<span class='lineno'> 220</span>     num_replicas: The number of replicas in the current distribution strategy.
<span class='lineno'> 221</span>       This is used to scale the total loss so that training in a distribution
<span class='lineno'> 222</span>       strategy works correctly.
<span class='lineno'> 223</span> 
<span class='lineno'> 224</span>   Returns:
<span class='lineno'> 225</span>     The total loss observed at this training step
<span class='lineno'> 226</span>   &quot;&quot;&quot;
<span class='lineno'> 227</span>   # &quot;&quot;&quot;Execute a single training step in the TF v2 style loop.&quot;&quot;&quot;
<span class='lineno'> 228</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.is_training', title='bool'>is_training</a> = True
<span class='lineno'> 229</span> 
<span class='lineno'> 230</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.detection_model', title='?'>detection_model</a>._is_training = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.is_training', title='bool'>is_training</a>  # pylint: disable=protected-access
<span class='lineno'> 231</span>   tf.keras.backend.set_learning_phase(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.is_training', title='bool'>is_training</a>)
<span class='lineno'> 232</span> 
<span class='lineno'> 233</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.labels', title='?'>labels</a> = model_lib.unstack_batch(
<span class='lineno'> 234</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.labels', title='?'>labels</a>, unpad_groundtruth_tensors=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.unpad_groundtruth_tensors', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.unpad_groundtruth_tensors', title='?'>unpad_groundtruth_tensors</a>)
<span class='lineno'> 235</span> 
<span class='lineno'> 236</span>   with tf.GradientTape() as <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.tape', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.tape', title='?'>tape</a>:
<span class='lineno'> 237</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.losses_dict', title='?'>losses_dict</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step._', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step._', title='?'>_</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts', title='(?, ?, ?, ?) -> (?, ?) / (?, ?, ?, bool) -> (?, ?)'>_compute_losses_and_predictions_dicts</a>(
<span class='lineno'> 238</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.detection_model', title='?'>detection_model</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.features', title='?'>features</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.labels', title='?'>labels</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.add_regularization_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.add_regularization_loss', title='bool'>add_regularization_loss</a>)
<span class='lineno'> 239</span> 
<span class='lineno'> 240</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', title='?'>total_loss</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.losses_dict', title='?'>losses_dict</a>[&#39;Loss/total_loss&#39;]
<span class='lineno'> 241</span> 
<span class='lineno'> 242</span>     # Normalize loss for num replicas
<span class='lineno'> 243</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', title='?'>total_loss</a> = tf.math.divide(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', title='?'>total_loss</a>,
<span class='lineno'> 244</span>                                 tf.constant(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.num_replicas', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.num_replicas', title='float'>num_replicas</a>, dtype=tf.float32))
<span class='lineno'> 245</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.losses_dict', title='?'>losses_dict</a>[&#39;Loss/normalized_total_loss&#39;] = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', title='?'>total_loss</a>
<span class='lineno'> 246</span> 
<span class='lineno'> 247</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.loss_type', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.loss_type', title='?'>loss_type</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.losses_dict', title='?'>losses_dict</a>:
<span class='lineno'> 248</span>     tf.compat.v2.summary.scalar(
<span class='lineno'> 249</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.loss_type', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.loss_type', title='?'>loss_type</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.losses_dict', title='?'>losses_dict</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.loss_type', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.loss_type', title='?'>loss_type</a>], step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.global_step', title='None'>global_step</a>)
<span class='lineno'> 250</span> 
<span class='lineno'> 251</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.trainable_variables', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.trainable_variables', title='?'>trainable_variables</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.detection_model', title='?'>detection_model</a>.trainable_variables
<span class='lineno'> 252</span> 
<span class='lineno'> 253</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.gradients', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.gradients', title='?'>gradients</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.tape', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.tape', title='?'>tape</a>.gradient(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', title='?'>total_loss</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.trainable_variables', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.trainable_variables', title='?'>trainable_variables</a>)
<span class='lineno'> 254</span> 
<span class='lineno'> 255</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.clip_gradients_value', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.clip_gradients_value', title='None'>clip_gradients_value</a>:
<span class='lineno'> 256</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.gradients', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.gradients', title='?'>gradients</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step._', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step._', title='?'>_</a> = tf.clip_by_global_norm(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.gradients', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.gradients', title='?'>gradients</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.clip_gradients_value', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.clip_gradients_value', title='None'>clip_gradients_value</a>)
<span class='lineno'> 257</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.optimizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.optimizer', title='?'>optimizer</a>.apply_gradients(zip(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.gradients', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.gradients', title='?'>gradients</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.trainable_variables', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.trainable_variables', title='?'>trainable_variables</a>))
<span class='lineno'> 258</span>   tf.compat.v2.summary.scalar(&#39;learning_rate&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.learning_rate', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.learning_rate', title='?'>learning_rate</a>, step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.global_step', title='None'>global_step</a>)
<span class='lineno'> 259</span>   tf.compat.v2.summary.image(
<span class='lineno'> 260</span>       name=&#39;train_input_images&#39;,
<span class='lineno'> 261</span>       step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.global_step', title='None'>global_step</a>,
<span class='lineno'> 262</span>       data=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.features', title='?'>features</a>[fields.InputDataFields.image],
<span class='lineno'> 263</span>       max_outputs=3)
<span class='lineno'> 264</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step.total_loss', title='?'>total_loss</a>
<span class='lineno'> 265</span> 
<span class='lineno'> 266</span> 
<span class='lineno'> 267</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map', title='? -> None'>validate_tf_v2_checkpoint_restore_map</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.checkpoint_restore_map', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.checkpoint_restore_map', title='?'>checkpoint_restore_map</a>):
<span class='lineno'> 268</span>   &quot;&quot;&quot;Ensure that given dict is a valid TF v2 style restore map.
<span class='lineno'> 269</span> 
<span class='lineno'> 270</span>   Args:
<span class='lineno'> 271</span>     checkpoint_restore_map: A dict mapping strings to tf.keras.Model objects.
<span class='lineno'> 272</span> 
<span class='lineno'> 273</span>   Raises:
<span class='lineno'> 274</span>     ValueError: If they keys in checkpoint_restore_map are not strings or if
<span class='lineno'> 275</span>       the values are not keras Model objects.
<span class='lineno'> 276</span> 
<span class='lineno'> 277</span>   &quot;&quot;&quot;
<span class='lineno'> 278</span> 
<span class='lineno'> 279</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.key', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.key', title='?'>key</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.value', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.value', title='?'>value</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.checkpoint_restore_map', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.checkpoint_restore_map', title='?'>checkpoint_restore_map</a>.items():
<span class='lineno'> 280</span>     if not (isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.key', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.key', title='?'>key</a>, str) and isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.value', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map.value', title='?'>value</a>, tf.Module)):
<span class='lineno'> 281</span>       raise TypeError(RESTORE_MAP_ERROR_TEMPLATE.format(
<span class='lineno'> 282</span>           key.__class__.__name__, value.__class__.__name__))
<span class='lineno'> 283</span> 
<span class='lineno'> 284</span> 
<span class='lineno'> 285</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint', title='(?, ?, ?, ?, ?, ?, ?) -> None / (?, None, ?, ?, ?, ?, ?) -> None'>load_fine_tune_checkpoint</a>(
<span class='lineno'> 286</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.model', title='?'>model</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_path', title='None'>checkpoint_path</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_type', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_type', title='?'>checkpoint_type</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_version', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_version', title='?'>checkpoint_version</a>,
<span class='lineno'> 287</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.load_all_detection_checkpoint_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.load_all_detection_checkpoint_vars', title='?'>load_all_detection_checkpoint_vars</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.input_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.input_dataset', title='?'>input_dataset</a>,
<span class='lineno'> 288</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.unpad_groundtruth_tensors', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.unpad_groundtruth_tensors', title='?'>unpad_groundtruth_tensors</a>):
<span class='lineno'> 289</span>   &quot;&quot;&quot;Load a fine tuning classification or detection checkpoint.
<span class='lineno'> 290</span> 
<span class='lineno'> 291</span>   To make sure the model variables are all built, this method first executes
<span class='lineno'> 292</span>   the model by computing a dummy loss. (Models might not have built their
<span class='lineno'> 293</span>   variables before their first execution)
<span class='lineno'> 294</span> 
<span class='lineno'> 295</span>   It then loads a variable-name based classification or detection checkpoint
<span class='lineno'> 296</span>   that comes from converted TF 1.x slim model checkpoints.
<span class='lineno'> 297</span> 
<span class='lineno'> 298</span>   This method updates the model in-place and does not return a value.
<span class='lineno'> 299</span> 
<span class='lineno'> 300</span>   Args:
<span class='lineno'> 301</span>     model: A DetectionModel (based on Keras) to load a fine-tuning
<span class='lineno'> 302</span>       checkpoint for.
<span class='lineno'> 303</span>     checkpoint_path: Directory with checkpoints file or path to checkpoint.
<span class='lineno'> 304</span>     checkpoint_type: Whether to restore from a full detection
<span class='lineno'> 305</span>       checkpoint (with compatible variable names) or to restore from a
<span class='lineno'> 306</span>       classification checkpoint for initialization prior to training.
<span class='lineno'> 307</span>       Valid values: `detection`, `classification`.
<span class='lineno'> 308</span>     checkpoint_version: train_pb2.CheckpointVersion.V1 or V2 enum indicating
<span class='lineno'> 309</span>       whether to load checkpoints in V1 style or V2 style.
<span class='lineno'> 310</span>     load_all_detection_checkpoint_vars: whether to load all variables (when
<span class='lineno'> 311</span>       `fine_tune_checkpoint_type` is `detection`). If False, only variables
<span class='lineno'> 312</span>       within the feature extractor scopes are included. Default False.
<span class='lineno'> 313</span>     input_dataset: The tf.data Dataset the model is being trained on. Needed
<span class='lineno'> 314</span>       to get the shapes for the dummy loss computation.
<span class='lineno'> 315</span>     unpad_groundtruth_tensors: A parameter passed to unstack_batch.
<span class='lineno'> 316</span>   &quot;&quot;&quot;
<span class='lineno'> 317</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.features', title='?'>features</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.labels', title='?'>labels</a> = iter(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.input_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.input_dataset', title='?'>input_dataset</a>).next()
<span class='lineno'> 318</span> 
<span class='lineno'> 319</span>   @tf.function
<span class='lineno'> 320</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn', title='(?, ?) -> (?, ?)'>_dummy_computation_fn</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.features', title='?'>features</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.labels', title='?'>labels</a>):
<span class='lineno'> 321</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.model', title='?'>model</a>._is_training = False  # pylint: disable=protected-access
<span class='lineno'> 322</span>     tf.keras.backend.set_learning_phase(False)
<span class='lineno'> 323</span> 
<span class='lineno'> 324</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.labels', title='?'>labels</a> = model_lib.unstack_batch(
<span class='lineno'> 325</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.labels', title='?'>labels</a>, unpad_groundtruth_tensors=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.unpad_groundtruth_tensors', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.unpad_groundtruth_tensors', title='?'>unpad_groundtruth_tensors</a>)
<span class='lineno'> 326</span> 
<span class='lineno'> 327</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts', title='(?, ?, ?, ?) -> (?, ?) / (?, ?, ?, bool) -> (?, ?)'>_compute_losses_and_predictions_dicts</a>(
<span class='lineno'> 328</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.model', title='?'>model</a>,
<span class='lineno'> 329</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.features', title='?'>features</a>,
<span class='lineno'> 330</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn.labels', title='?'>labels</a>)
<span class='lineno'> 331</span> 
<span class='lineno'> 332</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.strategy', title='?'>strategy</a> = tf.compat.v2.distribute.get_strategy()
<span class='lineno'> 333</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.strategy', title='?'>strategy</a>.run(
<span class='lineno'> 334</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint._dummy_computation_fn', title='(?, ?) -> (?, ?)'>_dummy_computation_fn</a>, args=(
<span class='lineno'> 335</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.features', title='?'>features</a>,
<span class='lineno'> 336</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.labels', title='?'>labels</a>,
<span class='lineno'> 337</span>       ))
<span class='lineno'> 338</span> 
<span class='lineno'> 339</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_version', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_version', title='?'>checkpoint_version</a> == train_pb2.CheckpointVersion.V1:
<span class='lineno'> 340</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.var_map', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.var_map', title='?'>var_map</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.model', title='?'>model</a>.restore_map(
<span class='lineno'> 341</span>         fine_tune_checkpoint_type=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_type', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_type', title='?'>checkpoint_type</a>,
<span class='lineno'> 342</span>         load_all_detection_checkpoint_vars=(
<span class='lineno'> 343</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.load_all_detection_checkpoint_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.load_all_detection_checkpoint_vars', title='?'>load_all_detection_checkpoint_vars</a>))
<span class='lineno'> 344</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.available_var_map', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.available_var_map', title='?'>available_var_map</a> = variables_helper.get_variables_available_in_checkpoint(
<span class='lineno'> 345</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.var_map', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.var_map', title='?'>var_map</a>,
<span class='lineno'> 346</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_path', title='None'>checkpoint_path</a>,
<span class='lineno'> 347</span>         include_global_step=False)
<span class='lineno'> 348</span>     tf.train.init_from_checkpoint(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_path', title='None'>checkpoint_path</a>,
<span class='lineno'> 349</span>                                   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.available_var_map', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.available_var_map', title='?'>available_var_map</a>)
<span class='lineno'> 350</span>   elif <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_version', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_version', title='?'>checkpoint_version</a> == train_pb2.CheckpointVersion.V2:
<span class='lineno'> 351</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.restore_map', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.restore_map', title='?'>restore_map</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.model', title='?'>model</a>.restore_map(
<span class='lineno'> 352</span>         fine_tune_checkpoint_type=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_type', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_type', title='?'>checkpoint_type</a>,
<span class='lineno'> 353</span>         load_all_detection_checkpoint_vars=(
<span class='lineno'> 354</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.load_all_detection_checkpoint_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.load_all_detection_checkpoint_vars', title='?'>load_all_detection_checkpoint_vars</a>))
<span class='lineno'> 355</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.validate_tf_v2_checkpoint_restore_map', title='? -> None'>validate_tf_v2_checkpoint_restore_map</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.restore_map', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.restore_map', title='?'>restore_map</a>)
<span class='lineno'> 356</span> 
<span class='lineno'> 357</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.ckpt', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.ckpt', title='?'>ckpt</a> = tf.train.Checkpoint(**restore_map)
<span class='lineno'> 358</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.ckpt', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.ckpt', title='?'>ckpt</a>.restore(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint.checkpoint_path', title='None'>checkpoint_path</a>).assert_existing_objects_matched()
<span class='lineno'> 359</span> 
<span class='lineno'> 360</span> 
<span class='lineno'> 361</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath', title='(?, ?) -> str / (?, str) -> str'>_get_filepath</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.strategy', title='?'>strategy</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.filepath', title='str'>filepath</a>):
<span class='lineno'> 362</span>   &quot;&quot;&quot;Get appropriate filepath for worker.
<span class='lineno'> 363</span> 
<span class='lineno'> 364</span>   Args:
<span class='lineno'> 365</span>     strategy: A tf.distribute.Strategy object.
<span class='lineno'> 366</span>     filepath: A path to where the Checkpoint object is stored.
<span class='lineno'> 367</span> 
<span class='lineno'> 368</span>   Returns:
<span class='lineno'> 369</span>     A temporary filepath for non-chief workers to use or the original filepath
<span class='lineno'> 370</span>     for the chief.
<span class='lineno'> 371</span>   &quot;&quot;&quot;
<span class='lineno'> 372</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.strategy', title='?'>strategy</a>.extended.should_checkpoint:
<span class='lineno'> 373</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.filepath', title='str'>filepath</a>
<span class='lineno'> 374</span>   else:
<span class='lineno'> 375</span>     # TODO(vighneshb) Replace with the public API when TF exposes it.
<span class='lineno'> 376</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.task_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.task_id', title='?'>task_id</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.strategy', title='?'>strategy</a>.extended._task_id  # pylint:disable=protected-access
<span class='lineno'> 377</span>     return os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.filepath', title='str'>filepath</a>, &#39;temp_worker_{:03d}&#39;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.task_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath.task_id', title='?'>task_id</a>))
<span class='lineno'> 378</span> 
<span class='lineno'> 379</span> 
<span class='lineno'> 380</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories', title='(?, ?) -> None / (?, str) -> None'>_clean_temporary_directories</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.strategy', title='?'>strategy</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.filepath', title='str'>filepath</a>):
<span class='lineno'> 381</span>   &quot;&quot;&quot;Temporary directory clean up for MultiWorker Mirrored Strategy.
<span class='lineno'> 382</span> 
<span class='lineno'> 383</span>   This is needed for all non-chief workers.
<span class='lineno'> 384</span> 
<span class='lineno'> 385</span>   Args:
<span class='lineno'> 386</span>     strategy: A tf.distribute.Strategy object.
<span class='lineno'> 387</span>     filepath: The filepath for the temporary directory.
<span class='lineno'> 388</span>   &quot;&quot;&quot;
<span class='lineno'> 389</span>   if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.strategy', title='?'>strategy</a>.extended.should_checkpoint:
<span class='lineno'> 390</span>     if tf.io.gfile.exists(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.filepath', title='str'>filepath</a>) and tf.io.gfile.isdir(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.filepath', title='str'>filepath</a>):
<span class='lineno'> 391</span>       tf.io.gfile.rmtree(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories.filepath', title='str'>filepath</a>)
<span class='lineno'> 392</span> 
<span class='lineno'> 393</span> 
<span class='lineno'> 394</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop', title='(?, ?, ?, None, None, bool, bool, None, int, int) -> None'>train_loop</a>(
<span class='lineno'> 395</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.hparams', title='?'>hparams</a>,
<span class='lineno'> 396</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.pipeline_config_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.pipeline_config_path', title='?'>pipeline_config_path</a>,
<span class='lineno'> 397</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_dir', title='?'>model_dir</a>,
<span class='lineno'> 398</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.config_override', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.config_override', title='None'>config_override</a>=None,
<span class='lineno'> 399</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_steps', title='None'>train_steps</a>=None,
<span class='lineno'> 400</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.use_tpu', title='bool'>use_tpu</a>=False,
<span class='lineno'> 401</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.save_final_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.save_final_config', title='bool'>save_final_config</a>=False,
<span class='lineno'> 402</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.export_to_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.export_to_tpu', title='None'>export_to_tpu</a>=None,
<span class='lineno'> 403</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpoint_every_n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpoint_every_n', title='int'>checkpoint_every_n</a>=1000,
<span class='lineno'> 404</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpoint_max_to_keep', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpoint_max_to_keep', title='int'>checkpoint_max_to_keep</a>=7,
<span class='lineno'> 405</span>     **kwargs):
<span class='lineno'> 406</span>   &quot;&quot;&quot;Trains a model using eager + functions.
<span class='lineno'> 407</span> 
<span class='lineno'> 408</span>   This method:
<span class='lineno'> 409</span>     1. Processes the pipeline configs
<span class='lineno'> 410</span>     2. (Optionally) saves the as-run config
<span class='lineno'> 411</span>     3. Builds the model &amp; optimizer
<span class='lineno'> 412</span>     4. Gets the training input data
<span class='lineno'> 413</span>     5. Loads a fine-tuning detection or classification checkpoint if requested
<span class='lineno'> 414</span>     6. Loops over the train data, executing distributed training steps inside
<span class='lineno'> 415</span>        tf.functions.
<span class='lineno'> 416</span>     7. Checkpoints the model every `checkpoint_every_n` training steps.
<span class='lineno'> 417</span>     8. Logs the training metrics as TensorBoard summaries.
<span class='lineno'> 418</span> 
<span class='lineno'> 419</span>   Args:
<span class='lineno'> 420</span>     hparams: A `HParams`.
<span class='lineno'> 421</span>     pipeline_config_path: A path to a pipeline config file.
<span class='lineno'> 422</span>     model_dir:
<span class='lineno'> 423</span>       The directory to save checkpoints and summaries to.
<span class='lineno'> 424</span>     config_override: A pipeline_pb2.TrainEvalPipelineConfig text proto to
<span class='lineno'> 425</span>       override the config from `pipeline_config_path`.
<span class='lineno'> 426</span>     train_steps: Number of training steps. If None, the number of training steps
<span class='lineno'> 427</span>       is set from the `TrainConfig` proto.
<span class='lineno'> 428</span>     use_tpu: Boolean, whether training and evaluation should run on TPU.
<span class='lineno'> 429</span>     save_final_config: Whether to save final config (obtained after applying
<span class='lineno'> 430</span>       overrides) to `model_dir`.
<span class='lineno'> 431</span>     export_to_tpu: When use_tpu and export_to_tpu are true,
<span class='lineno'> 432</span>       `export_savedmodel()` exports a metagraph for serving on TPU besides the
<span class='lineno'> 433</span>       one on CPU. If export_to_tpu is not provided, we will look for it in
<span class='lineno'> 434</span>       hparams too.
<span class='lineno'> 435</span>     checkpoint_every_n:
<span class='lineno'> 436</span>       Checkpoint every n training steps.
<span class='lineno'> 437</span>     checkpoint_max_to_keep:
<span class='lineno'> 438</span>       int, the number of most recent checkpoints to keep in the model directory.
<span class='lineno'> 439</span>     **kwargs: Additional keyword arguments for configuration override.
<span class='lineno'> 440</span>   &quot;&quot;&quot;
<span class='lineno'> 441</span>   ## Parse the configs
<span class='lineno'> 442</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.get_configs_from_pipeline_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.get_configs_from_pipeline_file', title='?'>get_configs_from_pipeline_file</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', title='?'>MODEL_BUILD_UTIL_MAP</a>[
<span class='lineno'> 443</span>       &#39;get_configs_from_pipeline_file&#39;]
<span class='lineno'> 444</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.merge_external_params_with_configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.merge_external_params_with_configs', title='?'>merge_external_params_with_configs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', title='?'>MODEL_BUILD_UTIL_MAP</a>[
<span class='lineno'> 445</span>       &#39;merge_external_params_with_configs&#39;]
<span class='lineno'> 446</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.create_pipeline_proto_from_configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.create_pipeline_proto_from_configs', title='?'>create_pipeline_proto_from_configs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', title='?'>MODEL_BUILD_UTIL_MAP</a>[
<span class='lineno'> 447</span>       &#39;create_pipeline_proto_from_configs&#39;]
<span class='lineno'> 448</span> 
<span class='lineno'> 449</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', title='?'>configs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.get_configs_from_pipeline_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.get_configs_from_pipeline_file', title='?'>get_configs_from_pipeline_file</a>(
<span class='lineno'> 450</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.pipeline_config_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.pipeline_config_path', title='?'>pipeline_config_path</a>, config_override=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.config_override', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.config_override', title='None'>config_override</a>)
<span class='lineno'> 451</span>   kwargs.update({
<span class='lineno'> 452</span>       &#39;train_steps&#39;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_steps', title='None'>train_steps</a>,
<span class='lineno'> 453</span>       &#39;use_bfloat16&#39;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', title='?'>configs</a>[&#39;train_config&#39;].use_bfloat16 and <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.use_tpu', title='bool'>use_tpu</a>
<span class='lineno'> 454</span>   })
<span class='lineno'> 455</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', title='?'>configs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.merge_external_params_with_configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.merge_external_params_with_configs', title='?'>merge_external_params_with_configs</a>(
<span class='lineno'> 456</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', title='?'>configs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.hparams', title='?'>hparams</a>, kwargs_dict=kwargs)
<span class='lineno'> 457</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_config', title='?'>model_config</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', title='?'>configs</a>[&#39;model&#39;]
<span class='lineno'> 458</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', title='?'>configs</a>[&#39;train_config&#39;]
<span class='lineno'> 459</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input_config', title='?'>train_input_config</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', title='?'>configs</a>[&#39;train_input_config&#39;]
<span class='lineno'> 460</span> 
<span class='lineno'> 461</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.unpad_groundtruth_tensors', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.unpad_groundtruth_tensors', title='?'>unpad_groundtruth_tensors</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.unpad_groundtruth_tensors
<span class='lineno'> 462</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.add_regularization_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.add_regularization_loss', title='?'>add_regularization_loss</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.add_regularization_loss
<span class='lineno'> 463</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.clip_gradients_value', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.clip_gradients_value', title='None'>clip_gradients_value</a> = None
<span class='lineno'> 464</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.gradient_clipping_by_norm &gt; 0:
<span class='lineno'> 465</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.clip_gradients_value', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.clip_gradients_value', title='?'>clip_gradients_value</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.gradient_clipping_by_norm
<span class='lineno'> 466</span> 
<span class='lineno'> 467</span>   # update train_steps from config but only when non-zero value is provided
<span class='lineno'> 468</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_steps', title='None'>train_steps</a> is None and <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.num_steps != 0:
<span class='lineno'> 469</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_steps', title='?'>train_steps</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.num_steps
<span class='lineno'> 470</span> 
<span class='lineno'> 471</span>   # Read export_to_tpu from hparams if not passed.
<span class='lineno'> 472</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.export_to_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.export_to_tpu', title='None'>export_to_tpu</a> is None:
<span class='lineno'> 473</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.export_to_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.export_to_tpu', title='?'>export_to_tpu</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.hparams', title='?'>hparams</a>.get(&#39;export_to_tpu&#39;, False)
<span class='lineno'> 474</span>   tf.logging.info(
<span class='lineno'> 475</span>       &#39;train_loop: use_tpu %s, export_to_tpu %s&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.use_tpu', title='bool'>use_tpu</a>,
<span class='lineno'> 476</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.export_to_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.export_to_tpu', title='None'>export_to_tpu</a>)
<span class='lineno'> 477</span> 
<span class='lineno'> 478</span>   if kwargs[&#39;use_bfloat16&#39;]:
<span class='lineno'> 479</span>     tf.compat.v2.keras.mixed_precision.experimental.set_policy(&#39;mixed_bfloat16&#39;)
<span class='lineno'> 480</span> 
<span class='lineno'> 481</span>   # Parse the checkpoint fine tuning configs
<span class='lineno'> 482</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.hparams', title='?'>hparams</a>.load_pretrained:
<span class='lineno'> 483</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_path', title='?'>fine_tune_checkpoint_path</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.fine_tune_checkpoint
<span class='lineno'> 484</span>   else:
<span class='lineno'> 485</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_path', title='None'>fine_tune_checkpoint_path</a> = None
<span class='lineno'> 486</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.load_all_detection_checkpoint_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.load_all_detection_checkpoint_vars', title='?'>load_all_detection_checkpoint_vars</a> = (
<span class='lineno'> 487</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.load_all_detection_checkpoint_vars)
<span class='lineno'> 488</span>   # TODO(kaftan) (or anyone else): move this piece of config munging to
<span class='lineno'> 489</span>   ## utils/config_util.py
<span class='lineno'> 490</span>   if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.fine_tune_checkpoint_type:
<span class='lineno'> 491</span>     # train_config.from_detection_checkpoint field is deprecated. For
<span class='lineno'> 492</span>     # backward compatibility, set train_config.fine_tune_checkpoint_type
<span class='lineno'> 493</span>     # based on train_config.from_detection_checkpoint.
<span class='lineno'> 494</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.from_detection_checkpoint:
<span class='lineno'> 495</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.fine_tune_checkpoint_type = &#39;detection&#39;
<span class='lineno'> 496</span>     else:
<span class='lineno'> 497</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.fine_tune_checkpoint_type = &#39;classification&#39;
<span class='lineno'> 498</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_type', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_type', title='?'>fine_tune_checkpoint_type</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.fine_tune_checkpoint_type
<span class='lineno'> 499</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_version', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_version', title='?'>fine_tune_checkpoint_version</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.fine_tune_checkpoint_version
<span class='lineno'> 500</span> 
<span class='lineno'> 501</span>   # Write the as-run pipeline config to disk.
<span class='lineno'> 502</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.save_final_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.save_final_config', title='bool'>save_final_config</a>:
<span class='lineno'> 503</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.pipeline_config_final', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.pipeline_config_final', title='?'>pipeline_config_final</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.create_pipeline_proto_from_configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.create_pipeline_proto_from_configs', title='?'>create_pipeline_proto_from_configs</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.configs', title='?'>configs</a>)
<span class='lineno'> 504</span>     config_util.save_pipeline_config(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.pipeline_config_final', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.pipeline_config_final', title='?'>pipeline_config_final</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_dir', title='?'>model_dir</a>)
<span class='lineno'> 505</span> 
<span class='lineno'> 506</span>   # Build the model, optimizer, and training input
<span class='lineno'> 507</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a> = tf.compat.v2.distribute.get_strategy()
<span class='lineno'> 508</span>   with <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a>.scope():
<span class='lineno'> 509</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.detection_model', title='?'>detection_model</a> = model_builder.build(
<span class='lineno'> 510</span>         model_config=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_config', title='?'>model_config</a>, is_training=True)
<span class='lineno'> 511</span> 
<span class='lineno'> 512</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn', title='? -> None'>train_dataset_fn</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.input_context', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.input_context', title='?'>input_context</a>):
<span class='lineno'> 513</span>       &quot;&quot;&quot;Callable to create train input.&quot;&quot;&quot;
<span class='lineno'> 514</span>       # Create the inputs.
<span class='lineno'> 515</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.train_input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.train_input', title='?'>train_input</a> = inputs.train_input(
<span class='lineno'> 516</span>           train_config=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>,
<span class='lineno'> 517</span>           train_input_config=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input_config', title='?'>train_input_config</a>,
<span class='lineno'> 518</span>           model_config=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_config', title='?'>model_config</a>,
<span class='lineno'> 519</span>           model=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.detection_model', title='?'>detection_model</a>,
<span class='lineno'> 520</span>           input_context=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.input_context', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.input_context', title='?'>input_context</a>)
<span class='lineno'> 521</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.train_input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.train_input', title='?'>train_input</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.train_input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.train_input', title='?'>train_input</a>.repeat()
<span class='lineno'> 522</span>       return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.train_input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn.train_input', title='?'>train_input</a>
<span class='lineno'> 523</span> 
<span class='lineno'> 524</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input', title='?'>train_input</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a>.experimental_distribute_datasets_from_function(
<span class='lineno'> 525</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_dataset_fn', title='? -> None'>train_dataset_fn</a>)
<span class='lineno'> 526</span> 
<span class='lineno'> 527</span> 
<span class='lineno'> 528</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a> = tf.Variable(
<span class='lineno'> 529</span>         0, trainable=False, dtype=tf.compat.v2.dtypes.int64, name=&#39;global_step&#39;,
<span class='lineno'> 530</span>         aggregation=tf.compat.v2.VariableAggregation.ONLY_FIRST_REPLICA)
<span class='lineno'> 531</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.optimizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.optimizer', title='?'>optimizer</a>, (<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate', title='?'>learning_rate</a>,) = optimizer_builder.build(
<span class='lineno'> 532</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_config', title='?'>train_config</a>.optimizer, global_step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>)
<span class='lineno'> 533</span> 
<span class='lineno'> 534</span>     if callable(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate', title='?'>learning_rate</a>):
<span class='lineno'> 535</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate_fn', title='?'>learning_rate_fn</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate', title='?'>learning_rate</a>
<span class='lineno'> 536</span>     else:
<span class='lineno'> 537</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate_fn', title='() -> ?'>learning_rate_fn</a> = lambda: <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate', title='?'>learning_rate</a>
<span class='lineno'> 538</span> 
<span class='lineno'> 539</span>   ## Train the model
<span class='lineno'> 540</span>   # Get the appropriate filepath (temporary or not) based on whether the worker
<span class='lineno'> 541</span>   # is the chief.
<span class='lineno'> 542</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.summary_writer_filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.summary_writer_filepath', title='str'>summary_writer_filepath</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath', title='(?, ?) -> str / (?, str) -> str'>_get_filepath</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a>,
<span class='lineno'> 543</span>                                           os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_dir', title='?'>model_dir</a>, &#39;train&#39;))
<span class='lineno'> 544</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.summary_writer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.summary_writer', title='?'>summary_writer</a> = tf.compat.v2.summary.create_file_writer(
<span class='lineno'> 545</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.summary_writer_filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.summary_writer_filepath', title='str'>summary_writer_filepath</a>)
<span class='lineno'> 546</span> 
<span class='lineno'> 547</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.use_tpu', title='bool'>use_tpu</a>:
<span class='lineno'> 548</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', title='int'>num_steps_per_iteration</a> = 100
<span class='lineno'> 549</span>   else:
<span class='lineno'> 550</span>     # TODO(b/135933080) Explore setting to 100 when GPU performance issues
<span class='lineno'> 551</span>     # are fixed.
<span class='lineno'> 552</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', title='int'>num_steps_per_iteration</a> = 1
<span class='lineno'> 553</span> 
<span class='lineno'> 554</span>   with <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.summary_writer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.summary_writer', title='?'>summary_writer</a>.as_default():
<span class='lineno'> 555</span>     with <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a>.scope():
<span class='lineno'> 556</span>       with tf.compat.v2.summary.record_if(
<span class='lineno'> 557</span>           lambda: <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a> % <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', title='int'>num_steps_per_iteration</a> == 0):
<span class='lineno'> 558</span>         # Load a fine-tuning checkpoint.
<span class='lineno'> 559</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_path', title='None'>fine_tune_checkpoint_path</a>:
<span class='lineno'> 560</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.load_fine_tune_checkpoint', title='(?, ?, ?, ?, ?, ?, ?) -> None / (?, None, ?, ?, ?, ?, ?) -> None'>load_fine_tune_checkpoint</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.detection_model', title='?'>detection_model</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_path', title='None'>fine_tune_checkpoint_path</a>,
<span class='lineno'> 561</span>                                     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_type', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_type', title='?'>fine_tune_checkpoint_type</a>,
<span class='lineno'> 562</span>                                     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_version', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.fine_tune_checkpoint_version', title='?'>fine_tune_checkpoint_version</a>,
<span class='lineno'> 563</span>                                     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.load_all_detection_checkpoint_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.load_all_detection_checkpoint_vars', title='?'>load_all_detection_checkpoint_vars</a>,
<span class='lineno'> 564</span>                                     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input', title='?'>train_input</a>,
<span class='lineno'> 565</span>                                     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.unpad_groundtruth_tensors', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.unpad_groundtruth_tensors', title='?'>unpad_groundtruth_tensors</a>)
<span class='lineno'> 566</span> 
<span class='lineno'> 567</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.ckpt', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.ckpt', title='?'>ckpt</a> = tf.compat.v2.train.Checkpoint(
<span class='lineno'> 568</span>             step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>, model=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.detection_model', title='?'>detection_model</a>, optimizer=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.optimizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.optimizer', title='?'>optimizer</a>)
<span class='lineno'> 569</span> 
<span class='lineno'> 570</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.manager_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.manager_dir', title='str'>manager_dir</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._get_filepath', title='(?, ?) -> str / (?, str) -> str'>_get_filepath</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_dir', title='?'>model_dir</a>)
<span class='lineno'> 571</span>         if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a>.extended.should_checkpoint:
<span class='lineno'> 572</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpoint_max_to_keep', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpoint_max_to_keep', title='int'>checkpoint_max_to_keep</a> = 1
<span class='lineno'> 573</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.manager', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.manager', title='?'>manager</a> = tf.compat.v2.train.CheckpointManager(
<span class='lineno'> 574</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.ckpt', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.ckpt', title='?'>ckpt</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.manager_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.manager_dir', title='str'>manager_dir</a>, max_to_keep=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpoint_max_to_keep', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpoint_max_to_keep', title='int'>checkpoint_max_to_keep</a>)
<span class='lineno'> 575</span> 
<span class='lineno'> 576</span>         # We use the following instead of manager.latest_checkpoint because
<span class='lineno'> 577</span>         # manager_dir does not point to the model directory when we are running
<span class='lineno'> 578</span>         # in a worker.
<span class='lineno'> 579</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.latest_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.latest_checkpoint', title='?'>latest_checkpoint</a> = tf.train.latest_checkpoint(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.model_dir', title='?'>model_dir</a>)
<span class='lineno'> 580</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.ckpt', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.ckpt', title='?'>ckpt</a>.restore(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.latest_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.latest_checkpoint', title='?'>latest_checkpoint</a>)
<span class='lineno'> 581</span> 
<span class='lineno'> 582</span>         def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn', title='(?, ?) -> None'>train_step_fn</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.features', title='?'>features</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.labels', title='?'>labels</a>):
<span class='lineno'> 583</span>           &quot;&quot;&quot;Single train step.&quot;&quot;&quot;
<span class='lineno'> 584</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.loss', title='None'>loss</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_train_step', title='(?, ?, ?, ?, ?, ?, bool, None, None, float) -> None'>eager_train_step</a>(
<span class='lineno'> 585</span>               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.detection_model', title='?'>detection_model</a>,
<span class='lineno'> 586</span>               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.features', title='?'>features</a>,
<span class='lineno'> 587</span>               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.labels', title='?'>labels</a>,
<span class='lineno'> 588</span>               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.unpad_groundtruth_tensors', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.unpad_groundtruth_tensors', title='?'>unpad_groundtruth_tensors</a>,
<span class='lineno'> 589</span>               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.optimizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.optimizer', title='?'>optimizer</a>,
<span class='lineno'> 590</span>               learning_rate=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.learning_rate_fn', title='() -> ?'>learning_rate_fn</a>(),
<span class='lineno'> 591</span>               add_regularization_loss=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.add_regularization_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.add_regularization_loss', title='?'>add_regularization_loss</a>,
<span class='lineno'> 592</span>               clip_gradients_value=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.clip_gradients_value', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.clip_gradients_value', title='None'>clip_gradients_value</a>,
<span class='lineno'> 593</span>               global_step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>,
<span class='lineno'> 594</span>               num_replicas=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a>.num_replicas_in_sync)
<span class='lineno'> 595</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>.assign_add(1)
<span class='lineno'> 596</span>           return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn.loss', title='None'>loss</a>
<span class='lineno'> 597</span> 
<span class='lineno'> 598</span>         def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train', title='(?, (?, ?) -> None, ?) -> None'>_sample_and_train</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.strategy', title='?'>strategy</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.train_step_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.train_step_fn', title='(?, ?) -> None'>train_step_fn</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.data_iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.data_iterator', title='?'>data_iterator</a>):
<span class='lineno'> 599</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.features', title='?'>features</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.labels', title='?'>labels</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.data_iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.data_iterator', title='?'>data_iterator</a>.next()
<span class='lineno'> 600</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.per_replica_losses', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.per_replica_losses', title='?'>per_replica_losses</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.strategy', title='?'>strategy</a>.run(
<span class='lineno'> 601</span>               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.train_step_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.train_step_fn', title='(?, ?) -> None'>train_step_fn</a>, args=(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.features', title='?'>features</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.labels', title='?'>labels</a>))
<span class='lineno'> 602</span>           # TODO(anjalisridhar): explore if it is safe to remove the
<span class='lineno'> 603</span>           ## num_replicas scaling of the loss and switch this to a ReduceOp.Mean
<span class='lineno'> 604</span>           return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.strategy', title='?'>strategy</a>.reduce(tf.distribute.ReduceOp.SUM,
<span class='lineno'> 605</span>                                  <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.per_replica_losses', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train.per_replica_losses', title='?'>per_replica_losses</a>, axis=None)
<span class='lineno'> 606</span> 
<span class='lineno'> 607</span>         @tf.function
<span class='lineno'> 608</span>         def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step', title='? -> None'>_dist_train_step</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step.data_iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step.data_iterator', title='?'>data_iterator</a>):
<span class='lineno'> 609</span>           &quot;&quot;&quot;A distributed train step.&quot;&quot;&quot;
<span class='lineno'> 610</span> 
<span class='lineno'> 611</span>           if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', title='int'>num_steps_per_iteration</a> &gt; 1:
<span class='lineno'> 612</span>             for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step._', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step._', title='?'>_</a> in tf.range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', title='int'>num_steps_per_iteration</a> - 1):
<span class='lineno'> 613</span>               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train', title='(?, (?, ?) -> None, ?) -> None'>_sample_and_train</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn', title='(?, ?) -> None'>train_step_fn</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step.data_iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step.data_iterator', title='?'>data_iterator</a>)
<span class='lineno'> 614</span> 
<span class='lineno'> 615</span>           return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._sample_and_train', title='(?, (?, ?) -> None, ?) -> None'>_sample_and_train</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_step_fn', title='(?, ?) -> None'>train_step_fn</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step.data_iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step.data_iterator', title='?'>data_iterator</a>)
<span class='lineno'> 616</span> 
<span class='lineno'> 617</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input_iter', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input_iter', title='?'>train_input_iter</a> = iter(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input', title='?'>train_input</a>)
<span class='lineno'> 618</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpointed_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpointed_step', title='int'>checkpointed_step</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>.value())
<span class='lineno'> 619</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.logged_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.logged_step', title='?'>logged_step</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>.value()
<span class='lineno'> 620</span> 
<span class='lineno'> 621</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.last_step_time', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.last_step_time', title='int'>last_step_time</a> = time.time()
<span class='lineno'> 622</span>         for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._', title='int'>_</a> in range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>.value(), <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_steps', title='None'>train_steps</a>,
<span class='lineno'> 623</span>                        <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', title='int'>num_steps_per_iteration</a>):
<span class='lineno'> 624</span> 
<span class='lineno'> 625</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.loss', title='None'>loss</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop._dist_train_step', title='? -> None'>_dist_train_step</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input_iter', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.train_input_iter', title='?'>train_input_iter</a>)
<span class='lineno'> 626</span> 
<span class='lineno'> 627</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.time_taken', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.time_taken', title='int'>time_taken</a> = time.time() - <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.last_step_time', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.last_step_time', title='int'>last_step_time</a>
<span class='lineno'> 628</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.last_step_time', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.last_step_time', title='int'>last_step_time</a> = time.time()
<span class='lineno'> 629</span> 
<span class='lineno'> 630</span>           tf.compat.v2.summary.scalar(
<span class='lineno'> 631</span>               &#39;steps_per_sec&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', title='int'>num_steps_per_iteration</a> * 1.0 / <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.time_taken', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.time_taken', title='int'>time_taken</a>,
<span class='lineno'> 632</span>               step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>)
<span class='lineno'> 633</span> 
<span class='lineno'> 634</span>           if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>.value() - <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.logged_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.logged_step', title='?'>logged_step</a> &gt;= 100:
<span class='lineno'> 635</span>             tf.logging.info(
<span class='lineno'> 636</span>                 &#39;Step {} per-step time {:.3f}s loss={:.3f}&#39;.format(
<span class='lineno'> 637</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>.value(), <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.time_taken', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.time_taken', title='int'>time_taken</a> / <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.num_steps_per_iteration', title='int'>num_steps_per_iteration</a>,
<span class='lineno'> 638</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.loss', title='None'>loss</a>))
<span class='lineno'> 639</span>             <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.logged_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.logged_step', title='?'>logged_step</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>.value()
<span class='lineno'> 640</span> 
<span class='lineno'> 641</span>           if ((int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>.value()) - <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpointed_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpointed_step', title='int'>checkpointed_step</a>) &gt;=
<span class='lineno'> 642</span>               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpoint_every_n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpoint_every_n', title='int'>checkpoint_every_n</a>):
<span class='lineno'> 643</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.manager', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.manager', title='?'>manager</a>.save()
<span class='lineno'> 644</span>             <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpointed_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.checkpointed_step', title='int'>checkpointed_step</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.global_step', title='?'>global_step</a>.value())
<span class='lineno'> 645</span> 
<span class='lineno'> 646</span>   # Remove the checkpoint directories of the non-chief workers that
<span class='lineno'> 647</span>   # MultiWorkerMirroredStrategy forces us to save during sync distributed
<span class='lineno'> 648</span>   # training.
<span class='lineno'> 649</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories', title='(?, ?) -> None / (?, str) -> None'>_clean_temporary_directories</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.manager_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.manager_dir', title='str'>manager_dir</a>)
<span class='lineno'> 650</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._clean_temporary_directories', title='(?, ?) -> None / (?, str) -> None'>_clean_temporary_directories</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.strategy', title='?'>strategy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.summary_writer_filepath', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.train_loop.summary_writer_filepath', title='str'>summary_writer_filepath</a>)
<span class='lineno'> 651</span> 
<span class='lineno'> 652</span> 
<span class='lineno'> 653</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop', title='(?, ?, ?, bool, bool, None) -> dict'>eager_eval_loop</a>(
<span class='lineno'> 654</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.detection_model', title='?'>detection_model</a>,
<span class='lineno'> 655</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.configs', title='?'>configs</a>,
<span class='lineno'> 656</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dataset', title='?'>eval_dataset</a>,
<span class='lineno'> 657</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_tpu', title='bool'>use_tpu</a>=False,
<span class='lineno'> 658</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.postprocess_on_cpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.postprocess_on_cpu', title='bool'>postprocess_on_cpu</a>=False,
<span class='lineno'> 659</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.global_step', title='None'>global_step</a>=None):
<span class='lineno'> 660</span>   &quot;&quot;&quot;Evaluate the model eagerly on the evaluation dataset.
<span class='lineno'> 661</span> 
<span class='lineno'> 662</span>   This method will compute the evaluation metrics specified in the configs on
<span class='lineno'> 663</span>   the entire evaluation dataset, then return the metrics. It will also log
<span class='lineno'> 664</span>   the metrics to TensorBoard.
<span class='lineno'> 665</span> 
<span class='lineno'> 666</span>   Args:
<span class='lineno'> 667</span>     detection_model: A DetectionModel (based on Keras) to evaluate.
<span class='lineno'> 668</span>     configs: Object detection configs that specify the evaluators that should
<span class='lineno'> 669</span>       be used, as well as whether regularization loss should be included and
<span class='lineno'> 670</span>       if bfloat16 should be used on TPUs.
<span class='lineno'> 671</span>     eval_dataset: Dataset containing evaluation data.
<span class='lineno'> 672</span>     use_tpu: Whether a TPU is being used to execute the model for evaluation.
<span class='lineno'> 673</span>     postprocess_on_cpu: Whether model postprocessing should happen on
<span class='lineno'> 674</span>       the CPU when using a TPU to execute the model.
<span class='lineno'> 675</span>     global_step: A variable containing the training step this model was trained
<span class='lineno'> 676</span>       to. Used for logging purposes.
<span class='lineno'> 677</span> 
<span class='lineno'> 678</span>   Returns:
<span class='lineno'> 679</span>     A dict of evaluation metrics representing the results of this evaluation.
<span class='lineno'> 680</span>   &quot;&quot;&quot;
<span class='lineno'> 681</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.train_config', title='?'>train_config</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.configs', title='?'>configs</a>[&#39;train_config&#39;]
<span class='lineno'> 682</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_input_config', title='?'>eval_input_config</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.configs', title='?'>configs</a>[&#39;eval_input_config&#39;]
<span class='lineno'> 683</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', title='?'>eval_config</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.configs', title='?'>configs</a>[&#39;eval_config&#39;]
<span class='lineno'> 684</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.add_regularization_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.add_regularization_loss', title='?'>add_regularization_loss</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.train_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.train_config', title='?'>train_config</a>.add_regularization_loss
<span class='lineno'> 685</span> 
<span class='lineno'> 686</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.is_training', title='bool'>is_training</a> = False
<span class='lineno'> 687</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.detection_model', title='?'>detection_model</a>._is_training = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.is_training', title='bool'>is_training</a>  # pylint: disable=protected-access
<span class='lineno'> 688</span>   tf.keras.backend.set_learning_phase(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.is_training', title='bool'>is_training</a>)
<span class='lineno'> 689</span> 
<span class='lineno'> 690</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator_options', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator_options', title='?'>evaluator_options</a> = eval_util.evaluator_options_from_eval_config(
<span class='lineno'> 691</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', title='?'>eval_config</a>)
<span class='lineno'> 692</span> 
<span class='lineno'> 693</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic_category_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic_category_index', title='?'>class_agnostic_category_index</a> = (
<span class='lineno'> 694</span>       label_map_util.create_class_agnostic_category_index())
<span class='lineno'> 695</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic_evaluators', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic_evaluators', title='?'>class_agnostic_evaluators</a> = eval_util.get_evaluators(
<span class='lineno'> 696</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', title='?'>eval_config</a>,
<span class='lineno'> 697</span>       list(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic_category_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic_category_index', title='?'>class_agnostic_category_index</a>.values()),
<span class='lineno'> 698</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator_options', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator_options', title='?'>evaluator_options</a>)
<span class='lineno'> 699</span> 
<span class='lineno'> 700</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_aware_evaluators', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_aware_evaluators', title='None'>class_aware_evaluators</a> = None
<span class='lineno'> 701</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_input_config', title='?'>eval_input_config</a>.label_map_path:
<span class='lineno'> 702</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_aware_category_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_aware_category_index', title='?'>class_aware_category_index</a> = (
<span class='lineno'> 703</span>         label_map_util.create_category_index_from_labelmap(
<span class='lineno'> 704</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_input_config', title='?'>eval_input_config</a>.label_map_path))
<span class='lineno'> 705</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_aware_evaluators', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_aware_evaluators', title='?'>class_aware_evaluators</a> = eval_util.get_evaluators(
<span class='lineno'> 706</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', title='?'>eval_config</a>,
<span class='lineno'> 707</span>         list(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_aware_category_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_aware_category_index', title='?'>class_aware_category_index</a>.values()),
<span class='lineno'> 708</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator_options', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator_options', title='?'>evaluator_options</a>)
<span class='lineno'> 709</span> 
<span class='lineno'> 710</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', title='None'>evaluators</a> = None
<span class='lineno'> 711</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', title='dict'>loss_metrics</a> = {}
<span class='lineno'> 712</span> 
<span class='lineno'> 713</span>   @tf.function
<span class='lineno'> 714</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict', title='(?, ?) -> (?, ?, bool)'>compute_eval_dict</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', title='?'>features</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.labels', title='?'>labels</a>):
<span class='lineno'> 715</span>     &quot;&quot;&quot;Compute the evaluation result on an image.&quot;&quot;&quot;
<span class='lineno'> 716</span>     # For evaling on train data, it is necessary to check whether groundtruth
<span class='lineno'> 717</span>     # must be unpadded.
<span class='lineno'> 718</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.boxes_shape', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.boxes_shape', title='?'>boxes_shape</a> = (
<span class='lineno'> 719</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.labels', title='?'>labels</a>[fields.InputDataFields.groundtruth_boxes].get_shape().as_list())
<span class='lineno'> 720</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.unpad_groundtruth_tensors', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.unpad_groundtruth_tensors', title='bool'>unpad_groundtruth_tensors</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.boxes_shape', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.boxes_shape', title='?'>boxes_shape</a>[1] is not None and not <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_tpu', title='bool'>use_tpu</a>
<span class='lineno'> 721</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.labels', title='?'>labels</a> = model_lib.unstack_batch(
<span class='lineno'> 722</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.labels', title='?'>labels</a>, unpad_groundtruth_tensors=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.unpad_groundtruth_tensors', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.unpad_groundtruth_tensors', title='bool'>unpad_groundtruth_tensors</a>)
<span class='lineno'> 723</span> 
<span class='lineno'> 724</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.losses_dict', title='?'>losses_dict</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.prediction_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.prediction_dict', title='?'>prediction_dict</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2._compute_losses_and_predictions_dicts', title='(?, ?, ?, ?) -> (?, ?) / (?, ?, ?, bool) -> (?, ?)'>_compute_losses_and_predictions_dicts</a>(
<span class='lineno'> 725</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.detection_model', title='?'>detection_model</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', title='?'>features</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.labels', title='?'>labels</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.add_regularization_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.add_regularization_loss', title='?'>add_regularization_loss</a>)
<span class='lineno'> 726</span> 
<span class='lineno'> 727</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper', title='(?, ?) -> ?'>postprocess_wrapper</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper.args', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper.args', title='(?, ?)'>args</a>):
<span class='lineno'> 728</span>       return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.detection_model', title='?'>detection_model</a>.postprocess(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper.args', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper.args', title='(?, ?)'>args</a>[0], <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper.args', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper.args', title='(?, ?)'>args</a>[1])
<span class='lineno'> 729</span> 
<span class='lineno'> 730</span>     # TODO(kaftan): Depending on how postprocessing will work for TPUS w/
<span class='lineno'> 731</span>     ## TPUStrategy, may be good to move wrapping to a utility method
<span class='lineno'> 732</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_tpu', title='bool'>use_tpu</a> and <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.postprocess_on_cpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.postprocess_on_cpu', title='bool'>postprocess_on_cpu</a>:
<span class='lineno'> 733</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.detections', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.detections', title='?'>detections</a> = contrib_tpu.outside_compilation(
<span class='lineno'> 734</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper', title='(?, ?) -> ?'>postprocess_wrapper</a>,
<span class='lineno'> 735</span>           (<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.prediction_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.prediction_dict', title='?'>prediction_dict</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', title='?'>features</a>[fields.InputDataFields.true_image_shape]))
<span class='lineno'> 736</span>     else:
<span class='lineno'> 737</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.detections', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.detections', title='?'>detections</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.postprocess_wrapper', title='(?, ?) -> ?'>postprocess_wrapper</a>(
<span class='lineno'> 738</span>           (<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.prediction_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.prediction_dict', title='?'>prediction_dict</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', title='?'>features</a>[fields.InputDataFields.true_image_shape]))
<span class='lineno'> 739</span> 
<span class='lineno'> 740</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.class_agnostic', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.class_agnostic', title='bool'>class_agnostic</a> = (
<span class='lineno'> 741</span>         fields.DetectionResultFields.detection_classes not in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.detections', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.detections', title='?'>detections</a>)
<span class='lineno'> 742</span>     # TODO(kaftan) (or anyone): move `_prepare_groundtruth_for_eval to eval_util
<span class='lineno'> 743</span>     ## and call this from there.
<span class='lineno'> 744</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.groundtruth', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.groundtruth', title='?'>groundtruth</a> = model_lib._prepare_groundtruth_for_eval(  # pylint: disable=protected-access
<span class='lineno'> 745</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.detection_model', title='?'>detection_model</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.class_agnostic', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.class_agnostic', title='bool'>class_agnostic</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_input_config', title='?'>eval_input_config</a>.max_number_of_boxes)
<span class='lineno'> 746</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.use_original_images', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.use_original_images', title='bool'>use_original_images</a> = fields.InputDataFields.original_image in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', title='?'>features</a>
<span class='lineno'> 747</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.use_original_images', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.use_original_images', title='bool'>use_original_images</a>:
<span class='lineno'> 748</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.eval_images', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.eval_images', title='?'>eval_images</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', title='?'>features</a>[fields.InputDataFields.original_image]
<span class='lineno'> 749</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.true_image_shapes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.true_image_shapes', title='?'>true_image_shapes</a> = tf.slice(
<span class='lineno'> 750</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', title='?'>features</a>[fields.InputDataFields.true_image_shape], [0, 0], [-1, 3])
<span class='lineno'> 751</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.original_image_spatial_shapes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.original_image_spatial_shapes', title='?'>original_image_spatial_shapes</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', title='?'>features</a>[
<span class='lineno'> 752</span>           fields.InputDataFields.original_image_spatial_shape]
<span class='lineno'> 753</span>     else:
<span class='lineno'> 754</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.eval_images', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.eval_images', title='?'>eval_images</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', title='?'>features</a>[fields.InputDataFields.image]
<span class='lineno'> 755</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.true_image_shapes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.true_image_shapes', title='None'>true_image_shapes</a> = None
<span class='lineno'> 756</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.original_image_spatial_shapes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.original_image_spatial_shapes', title='None'>original_image_spatial_shapes</a> = None
<span class='lineno'> 757</span> 
<span class='lineno'> 758</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.eval_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.eval_dict', title='?'>eval_dict</a> = eval_util.result_dict_for_batched_example(
<span class='lineno'> 759</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.eval_images', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.eval_images', title='?'>eval_images</a>,
<span class='lineno'> 760</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.features', title='?'>features</a>[inputs.HASH_KEY],
<span class='lineno'> 761</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.detections', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.detections', title='?'>detections</a>,
<span class='lineno'> 762</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.groundtruth', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.groundtruth', title='?'>groundtruth</a>,
<span class='lineno'> 763</span>         class_agnostic=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.class_agnostic', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.class_agnostic', title='bool'>class_agnostic</a>,
<span class='lineno'> 764</span>         scale_to_absolute=True,
<span class='lineno'> 765</span>         original_image_spatial_shapes=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.original_image_spatial_shapes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.original_image_spatial_shapes', title='None'>original_image_spatial_shapes</a>,
<span class='lineno'> 766</span>         true_image_shapes=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.true_image_shapes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.true_image_shapes', title='None'>true_image_shapes</a>)
<span class='lineno'> 767</span> 
<span class='lineno'> 768</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.eval_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.eval_dict', title='?'>eval_dict</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.losses_dict', title='?'>losses_dict</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.class_agnostic', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict.class_agnostic', title='bool'>class_agnostic</a>
<span class='lineno'> 769</span> 
<span class='lineno'> 770</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.i', title='?'>i</a>, (<a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.features', title='?'>features</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.labels', title='?'>labels</a>) in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dataset', title='?'>eval_dataset</a>):
<span class='lineno'> 771</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dict', title='?'>eval_dict</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.losses_dict', title='?'>losses_dict</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic', title='bool'>class_agnostic</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.compute_eval_dict', title='(?, ?) -> (?, ?, bool)'>compute_eval_dict</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.features', title='?'>features</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.labels', title='?'>labels</a>)
<span class='lineno'> 772</span> 
<span class='lineno'> 773</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.i', title='?'>i</a> % 100 == 0:
<span class='lineno'> 774</span>       tf.logging.info(&#39;Finished eval step %d&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.i', title='?'>i</a>)
<span class='lineno'> 775</span> 
<span class='lineno'> 776</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_original_images', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_original_images', title='bool'>use_original_images</a> = fields.InputDataFields.original_image in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.features', title='?'>features</a>
<span class='lineno'> 777</span>     if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_tpu', title='bool'>use_tpu</a> and <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_original_images', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.use_original_images', title='bool'>use_original_images</a>:
<span class='lineno'> 778</span>       # Summary for input images.
<span class='lineno'> 779</span>       tf.compat.v2.summary.image(
<span class='lineno'> 780</span>           name=&#39;eval_input_images&#39;,
<span class='lineno'> 781</span>           step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.global_step', title='None'>global_step</a>,
<span class='lineno'> 782</span>           data=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dict', title='?'>eval_dict</a>[&#39;original_image&#39;],
<span class='lineno'> 783</span>           max_outputs=1)
<span class='lineno'> 784</span>       # Summary for prediction/groundtruth side-by-side images.
<span class='lineno'> 785</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic', title='bool'>class_agnostic</a>:
<span class='lineno'> 786</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.category_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.category_index', title='?'>category_index</a> = label_map_util.create_class_agnostic_category_index()
<span class='lineno'> 787</span>       else:
<span class='lineno'> 788</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.category_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.category_index', title='?'>category_index</a> = label_map_util.create_category_index_from_labelmap(
<span class='lineno'> 789</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_input_config', title='?'>eval_input_config</a>.label_map_path)
<span class='lineno'> 790</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.keypoint_edges', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.keypoint_edges', title='[(?, ?)]'>keypoint_edges</a> = [
<span class='lineno'> 791</span>           (<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.kp', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.kp', title='?'>kp</a>.start, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.kp', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.kp', title='?'>kp</a>.end) for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.kp', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.kp', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.kp', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.kp', title='?'>kp</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', title='?'>eval_config</a>.keypoint_edge]
<span class='lineno'> 792</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.sbys_image_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.sbys_image_list', title='?'>sbys_image_list</a> = vutils.draw_side_by_side_evaluation_image(
<span class='lineno'> 793</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dict', title='?'>eval_dict</a>,
<span class='lineno'> 794</span>           category_index=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.category_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.category_index', title='?'>category_index</a>,
<span class='lineno'> 795</span>           max_boxes_to_draw=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', title='?'>eval_config</a>.max_num_boxes_to_visualize,
<span class='lineno'> 796</span>           min_score_thresh=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', title='?'>eval_config</a>.min_score_threshold,
<span class='lineno'> 797</span>           use_normalized_coordinates=False,
<span class='lineno'> 798</span>           keypoint_edges=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.keypoint_edges', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.keypoint_edges', title='[(?, ?)]'>keypoint_edges</a> or None)
<span class='lineno'> 799</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.sbys_images', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.sbys_images', title='?'>sbys_images</a> = tf.concat(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.sbys_image_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.sbys_image_list', title='?'>sbys_image_list</a>, axis=0)
<span class='lineno'> 800</span>       tf.compat.v2.summary.image(
<span class='lineno'> 801</span>           name=&#39;eval_side_by_side&#39;,
<span class='lineno'> 802</span>           step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.global_step', title='None'>global_step</a>,
<span class='lineno'> 803</span>           data=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.sbys_images', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.sbys_images', title='?'>sbys_images</a>,
<span class='lineno'> 804</span>           max_outputs=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_config', title='?'>eval_config</a>.num_visualizations)
<span class='lineno'> 805</span> 
<span class='lineno'> 806</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', title='None'>evaluators</a> is None:
<span class='lineno'> 807</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic', title='bool'>class_agnostic</a>:
<span class='lineno'> 808</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', title='?'>evaluators</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic_evaluators', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_agnostic_evaluators', title='?'>class_agnostic_evaluators</a>
<span class='lineno'> 809</span>       else:
<span class='lineno'> 810</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', title='None'>evaluators</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_aware_evaluators', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.class_aware_evaluators', title='None'>class_aware_evaluators</a>
<span class='lineno'> 811</span> 
<span class='lineno'> 812</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator', title='?'>evaluator</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', title='None'>evaluators</a>:
<span class='lineno'> 813</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator', title='?'>evaluator</a>.add_eval_dict(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_dict', title='?'>eval_dict</a>)
<span class='lineno'> 814</span> 
<span class='lineno'> 815</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', title='?'>loss_key</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_tensor', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_tensor', title='?'>loss_tensor</a> in iter(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.losses_dict', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.losses_dict', title='?'>losses_dict</a>.items()):
<span class='lineno'> 816</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', title='?'>loss_key</a> not in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', title='dict'>loss_metrics</a>:
<span class='lineno'> 817</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', title='dict'>loss_metrics</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', title='?'>loss_key</a>] = tf.keras.metrics.Mean()
<span class='lineno'> 818</span>       # Skip the loss with value equal or lower than 0.0 when calculating the
<span class='lineno'> 819</span>       # average loss since they don&#39;t usually reflect the normal loss values
<span class='lineno'> 820</span>       # causing spurious average loss value.
<span class='lineno'> 821</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_tensor', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_tensor', title='?'>loss_tensor</a> &lt;= 0.0:
<span class='lineno'> 822</span>         continue
<span class='lineno'> 823</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', title='dict'>loss_metrics</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', title='?'>loss_key</a>].update_state(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_tensor', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_tensor', title='?'>loss_tensor</a>)
<span class='lineno'> 824</span> 
<span class='lineno'> 825</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', title='dict'>eval_metrics</a> = {}
<span class='lineno'> 826</span> 
<span class='lineno'> 827</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator', title='?'>evaluator</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluators', title='None'>evaluators</a>:
<span class='lineno'> 828</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', title='dict'>eval_metrics</a>.update(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.evaluator', title='?'>evaluator</a>.evaluate())
<span class='lineno'> 829</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', title='?'>loss_key</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', title='dict'>loss_metrics</a>:
<span class='lineno'> 830</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', title='dict'>eval_metrics</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', title='?'>loss_key</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_metrics', title='dict'>loss_metrics</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.loss_key', title='?'>loss_key</a>].result()
<span class='lineno'> 831</span> 
<span class='lineno'> 832</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', title='dict'>eval_metrics</a> = {str(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', title='?'>k</a>): <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.v', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.v', title='?'>v</a> for <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', title='?'>k</a></a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.v', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.v', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.v', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.v', title='?'>v</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', title='dict'>eval_metrics</a>.items()}
<span class='lineno'> 833</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', title='?'>k</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', title='dict'>eval_metrics</a>:
<span class='lineno'> 834</span>     tf.compat.v2.summary.scalar(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', title='?'>k</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', title='dict'>eval_metrics</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.k', title='?'>k</a>], step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.global_step', title='None'>global_step</a>)
<span class='lineno'> 835</span> 
<span class='lineno'> 836</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop.eval_metrics', title='dict'>eval_metrics</a>
<span class='lineno'> 837</span> 
<span class='lineno'> 838</span> 
<span class='lineno'> 839</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously', title='(?, ?, None, None, int, int, bool, bool, bool, None, None, None, int, int) -> None'>eval_continuously</a>(
<span class='lineno'> 840</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.hparams', title='?'>hparams</a>,
<span class='lineno'> 841</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.pipeline_config_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.pipeline_config_path', title='?'>pipeline_config_path</a>,
<span class='lineno'> 842</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.config_override', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.config_override', title='None'>config_override</a>=None,
<span class='lineno'> 843</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.train_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.train_steps', title='None'>train_steps</a>=None,
<span class='lineno'> 844</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.sample_1_of_n_eval_examples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.sample_1_of_n_eval_examples', title='int'>sample_1_of_n_eval_examples</a>=1,
<span class='lineno'> 845</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.sample_1_of_n_eval_on_train_examples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.sample_1_of_n_eval_on_train_examples', title='int'>sample_1_of_n_eval_on_train_examples</a>=1,
<span class='lineno'> 846</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.use_tpu', title='bool'>use_tpu</a>=False,
<span class='lineno'> 847</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.override_eval_num_epochs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.override_eval_num_epochs', title='bool'>override_eval_num_epochs</a>=True,
<span class='lineno'> 848</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.postprocess_on_cpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.postprocess_on_cpu', title='bool'>postprocess_on_cpu</a>=False,
<span class='lineno'> 849</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.export_to_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.export_to_tpu', title='None'>export_to_tpu</a>=None,
<span class='lineno'> 850</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.model_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.model_dir', title='None'>model_dir</a>=None,
<span class='lineno'> 851</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.checkpoint_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.checkpoint_dir', title='None'>checkpoint_dir</a>=None,
<span class='lineno'> 852</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.wait_interval', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.wait_interval', title='int'>wait_interval</a>=180,
<span class='lineno'> 853</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.timeout', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.timeout', title='int'>timeout</a>=3600,
<span class='lineno'> 854</span>     **kwargs):
<span class='lineno'> 855</span>   &quot;&quot;&quot;Run continuous evaluation of a detection model eagerly.
<span class='lineno'> 856</span> 
<span class='lineno'> 857</span>   This method builds the model, and continously restores it from the most
<span class='lineno'> 858</span>   recent training checkpoint in the checkpoint directory &amp; evaluates it
<span class='lineno'> 859</span>   on the evaluation data.
<span class='lineno'> 860</span> 
<span class='lineno'> 861</span>   Args:
<span class='lineno'> 862</span>     hparams: A `HParams`.
<span class='lineno'> 863</span>     pipeline_config_path: A path to a pipeline config file.
<span class='lineno'> 864</span>     config_override: A pipeline_pb2.TrainEvalPipelineConfig text proto to
<span class='lineno'> 865</span>       override the config from `pipeline_config_path`.
<span class='lineno'> 866</span>     train_steps: Number of training steps. If None, the number of training steps
<span class='lineno'> 867</span>       is set from the `TrainConfig` proto.
<span class='lineno'> 868</span>     sample_1_of_n_eval_examples: Integer representing how often an eval example
<span class='lineno'> 869</span>       should be sampled. If 1, will sample all examples.
<span class='lineno'> 870</span>     sample_1_of_n_eval_on_train_examples: Similar to
<span class='lineno'> 871</span>       `sample_1_of_n_eval_examples`, except controls the sampling of training
<span class='lineno'> 872</span>       data for evaluation.
<span class='lineno'> 873</span>     use_tpu: Boolean, whether training and evaluation should run on TPU.
<span class='lineno'> 874</span>     override_eval_num_epochs: Whether to overwrite the number of epochs to 1 for
<span class='lineno'> 875</span>       eval_input.
<span class='lineno'> 876</span>     postprocess_on_cpu: When use_tpu and postprocess_on_cpu are true,
<span class='lineno'> 877</span>       postprocess is scheduled on the host cpu.
<span class='lineno'> 878</span>     export_to_tpu: When use_tpu and export_to_tpu are true,
<span class='lineno'> 879</span>       `export_savedmodel()` exports a metagraph for serving on TPU besides the
<span class='lineno'> 880</span>       one on CPU. If export_to_tpu is not provided, we will look for it in
<span class='lineno'> 881</span>       hparams too.
<span class='lineno'> 882</span>     model_dir: Directory to output resulting evaluation summaries to.
<span class='lineno'> 883</span>     checkpoint_dir: Directory that contains the training checkpoints.
<span class='lineno'> 884</span>     wait_interval: The mimmum number of seconds to wait before checking for a
<span class='lineno'> 885</span>       new checkpoint.
<span class='lineno'> 886</span>     timeout: The maximum number of seconds to wait for a checkpoint. Execution
<span class='lineno'> 887</span>       will terminate if no new checkpoints are found after these many seconds.
<span class='lineno'> 888</span> 
<span class='lineno'> 889</span>     **kwargs: Additional keyword arguments for configuration override.
<span class='lineno'> 890</span>   &quot;&quot;&quot;
<span class='lineno'> 891</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.get_configs_from_pipeline_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.get_configs_from_pipeline_file', title='?'>get_configs_from_pipeline_file</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', title='?'>MODEL_BUILD_UTIL_MAP</a>[
<span class='lineno'> 892</span>       &#39;get_configs_from_pipeline_file&#39;]
<span class='lineno'> 893</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.merge_external_params_with_configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.merge_external_params_with_configs', title='?'>merge_external_params_with_configs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.MODEL_BUILD_UTIL_MAP', title='?'>MODEL_BUILD_UTIL_MAP</a>[
<span class='lineno'> 894</span>       &#39;merge_external_params_with_configs&#39;]
<span class='lineno'> 895</span> 
<span class='lineno'> 896</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', title='?'>configs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.get_configs_from_pipeline_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.get_configs_from_pipeline_file', title='?'>get_configs_from_pipeline_file</a>(
<span class='lineno'> 897</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.pipeline_config_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.pipeline_config_path', title='?'>pipeline_config_path</a>, config_override=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.config_override', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.config_override', title='None'>config_override</a>)
<span class='lineno'> 898</span>   kwargs.update({
<span class='lineno'> 899</span>       &#39;sample_1_of_n_eval_examples&#39;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.sample_1_of_n_eval_examples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.sample_1_of_n_eval_examples', title='int'>sample_1_of_n_eval_examples</a>,
<span class='lineno'> 900</span>       &#39;use_bfloat16&#39;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', title='?'>configs</a>[&#39;train_config&#39;].use_bfloat16 and <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.use_tpu', title='bool'>use_tpu</a>
<span class='lineno'> 901</span>   })
<span class='lineno'> 902</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.train_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.train_steps', title='None'>train_steps</a> is not None:
<span class='lineno'> 903</span>     kwargs[&#39;train_steps&#39;] = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.train_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.train_steps', title='None'>train_steps</a>
<span class='lineno'> 904</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.override_eval_num_epochs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.override_eval_num_epochs', title='bool'>override_eval_num_epochs</a>:
<span class='lineno'> 905</span>     kwargs.update({&#39;eval_num_epochs&#39;: 1})
<span class='lineno'> 906</span>     tf.logging.warning(
<span class='lineno'> 907</span>         &#39;Forced number of epochs for all eval validations to be 1.&#39;)
<span class='lineno'> 908</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', title='?'>configs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.merge_external_params_with_configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.merge_external_params_with_configs', title='?'>merge_external_params_with_configs</a>(
<span class='lineno'> 909</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', title='?'>configs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.hparams', title='?'>hparams</a>, kwargs_dict=kwargs)
<span class='lineno'> 910</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.model_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.model_config', title='?'>model_config</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', title='?'>configs</a>[&#39;model&#39;]
<span class='lineno'> 911</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.train_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.train_input_config', title='?'>train_input_config</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', title='?'>configs</a>[&#39;train_input_config&#39;]
<span class='lineno'> 912</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_config', title='?'>eval_config</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', title='?'>configs</a>[&#39;eval_config&#39;]
<span class='lineno'> 913</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input_configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input_configs', title='?'>eval_input_configs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', title='?'>configs</a>[&#39;eval_input_configs&#39;]
<span class='lineno'> 914</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_on_train_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_on_train_input_config', title='?'>eval_on_train_input_config</a> = copy.deepcopy(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.train_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.train_input_config', title='?'>train_input_config</a>)
<span class='lineno'> 915</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_on_train_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_on_train_input_config', title='?'>eval_on_train_input_config</a>.sample_1_of_n_examples = (
<span class='lineno'> 916</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.sample_1_of_n_eval_on_train_examples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.sample_1_of_n_eval_on_train_examples', title='int'>sample_1_of_n_eval_on_train_examples</a>)
<span class='lineno'> 917</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.override_eval_num_epochs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.override_eval_num_epochs', title='bool'>override_eval_num_epochs</a> and <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_on_train_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_on_train_input_config', title='?'>eval_on_train_input_config</a>.num_epochs != 1:
<span class='lineno'> 918</span>     tf.logging.warning(&#39;Expected number of evaluation epochs is 1, but &#39;
<span class='lineno'> 919</span>                        &#39;instead encountered `eval_on_train_input_config&#39;
<span class='lineno'> 920</span>                        &#39;.num_epochs` = &#39;
<span class='lineno'> 921</span>                        &#39;{}. Overwriting `num_epochs` to 1.&#39;.format(
<span class='lineno'> 922</span>                            <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_on_train_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_on_train_input_config', title='?'>eval_on_train_input_config</a>.num_epochs))
<span class='lineno'> 923</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_on_train_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_on_train_input_config', title='?'>eval_on_train_input_config</a>.num_epochs = 1
<span class='lineno'> 924</span> 
<span class='lineno'> 925</span>   if kwargs[&#39;use_bfloat16&#39;]:
<span class='lineno'> 926</span>     tf.compat.v2.keras.mixed_precision.experimental.set_policy(&#39;mixed_bfloat16&#39;)
<span class='lineno'> 927</span> 
<span class='lineno'> 928</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.detection_model', title='?'>detection_model</a> = model_builder.build(
<span class='lineno'> 929</span>       model_config=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.model_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.model_config', title='?'>model_config</a>, is_training=True)
<span class='lineno'> 930</span> 
<span class='lineno'> 931</span>   # Create the inputs.
<span class='lineno'> 932</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_inputs', title='[(?, ?)]'>eval_inputs</a> = []
<span class='lineno'> 933</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input_config', title='?'>eval_input_config</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input_configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input_configs', title='?'>eval_input_configs</a>:
<span class='lineno'> 934</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.next_eval_input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.next_eval_input', title='?'>next_eval_input</a> = inputs.eval_input(
<span class='lineno'> 935</span>         eval_config=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_config', title='?'>eval_config</a>,
<span class='lineno'> 936</span>         eval_input_config=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input_config', title='?'>eval_input_config</a>,
<span class='lineno'> 937</span>         model_config=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.model_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.model_config', title='?'>model_config</a>,
<span class='lineno'> 938</span>         model=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.detection_model', title='?'>detection_model</a>)
<span class='lineno'> 939</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_inputs', title='[(?, ?)]'>eval_inputs</a>.append((<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input_config', title='?'>eval_input_config</a>.name, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.next_eval_input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.next_eval_input', title='?'>next_eval_input</a>))
<span class='lineno'> 940</span> 
<span class='lineno'> 941</span>   # Read export_to_tpu from hparams if not passed.
<span class='lineno'> 942</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.export_to_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.export_to_tpu', title='None'>export_to_tpu</a> is None:
<span class='lineno'> 943</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.export_to_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.export_to_tpu', title='?'>export_to_tpu</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.hparams', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.hparams', title='?'>hparams</a>.get(&#39;export_to_tpu&#39;, False)
<span class='lineno'> 944</span>   tf.logging.info(&#39;eval_continuously: use_tpu %s, export_to_tpu %s&#39;,
<span class='lineno'> 945</span>                   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.use_tpu', title='bool'>use_tpu</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.export_to_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.export_to_tpu', title='None'>export_to_tpu</a>)
<span class='lineno'> 946</span> 
<span class='lineno'> 947</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.global_step', title='?'>global_step</a> = tf.compat.v2.Variable(
<span class='lineno'> 948</span>       0, trainable=False, dtype=tf.compat.v2.dtypes.int64)
<span class='lineno'> 949</span> 
<span class='lineno'> 950</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.latest_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.latest_checkpoint', title='?'>latest_checkpoint</a> in tf.train.checkpoints_iterator(
<span class='lineno'> 951</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.checkpoint_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.checkpoint_dir', title='None'>checkpoint_dir</a>, timeout=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.timeout', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.timeout', title='int'>timeout</a>, min_interval_secs=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.wait_interval', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.wait_interval', title='int'>wait_interval</a>):
<span class='lineno'> 952</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.ckpt', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.ckpt', title='?'>ckpt</a> = tf.compat.v2.train.Checkpoint(
<span class='lineno'> 953</span>         step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.global_step', title='?'>global_step</a>, model=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.detection_model', title='?'>detection_model</a>)
<span class='lineno'> 954</span> 
<span class='lineno'> 955</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.ckpt', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.ckpt', title='?'>ckpt</a>.restore(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.latest_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.latest_checkpoint', title='?'>latest_checkpoint</a>).expect_partial()
<span class='lineno'> 956</span> 
<span class='lineno'> 957</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_name', title='?'>eval_name</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input', title='?'>eval_input</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_inputs', title='[(?, ?)]'>eval_inputs</a>:
<span class='lineno'> 958</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.summary_writer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.summary_writer', title='?'>summary_writer</a> = tf.compat.v2.summary.create_file_writer(
<span class='lineno'> 959</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.model_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.model_dir', title='None'>model_dir</a> + &#39;/eval&#39; + <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_name', title='?'>eval_name</a>)
<span class='lineno'> 960</span>       with <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.summary_writer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.summary_writer', title='?'>summary_writer</a>.as_default():
<span class='lineno'> 961</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eager_eval_loop', title='(?, ?, ?, bool, bool, None) -> dict'>eager_eval_loop</a>(
<span class='lineno'> 962</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.detection_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.detection_model', title='?'>detection_model</a>,
<span class='lineno'> 963</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.configs', title='?'>configs</a>,
<span class='lineno'> 964</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.eval_input', title='?'>eval_input</a>,
<span class='lineno'> 965</span>             use_tpu=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.use_tpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.use_tpu', title='bool'>use_tpu</a>,
<span class='lineno'> 966</span>             postprocess_on_cpu=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.postprocess_on_cpu', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.postprocess_on_cpu', title='bool'>postprocess_on_cpu</a>,
<span class='lineno'> 967</span>             global_step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.object_detection.model_lib_v2.eval_continuously.global_step', title='?'>global_step</a>)
</pre></td></tr></table></body></html>