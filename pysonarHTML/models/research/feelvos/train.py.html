<html>
<head>
<meta charset="utf-8">
<title>/home/xxm/Desktop/EMSE/dataset/models/research/feelvos/train.py</title>
<style type='text/css'>
body { color: #666666; }
a {
    text-decoration: none; color: #5AA2A7;
    border: solid 1px rgba(255,255,255,0);
}
a.active {
    background: -webkit-linear-gradient(top,rgba(255, 255, 200, 0.35) 0,rgba(255, 255, 200, 0.55) 100%);
    border: solid 1px #E5E600;
}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #cccccc;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px solid orange; padding-bottom: 1px}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted;

function highlight(xid)
{
    var elms = document.querySelectorAll('[xid="' + xid + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "active";
    }
    highlighted = xid;
}

function clearHighlight() {
    var elms = document.querySelectorAll('[xid="' + highlighted + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "";
    }
}

window.onload =
    function (e) {
        var tags = document.getElementsByTagName("A")
        for (var i = 0; i < tags.length; i++) {
            tags[i].onmouseover =
                function (e) {
                    clearHighlight();
                    var xid = e.toElement.getAttribute('xid');
                    highlight(xid);
                }
        }
    }</script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim', xid='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim'>slim</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.prefetch_queue', xid='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.prefetch_queue'>prefetch_queue</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags'>flags</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS'>FLAGS</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab', xid='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab'>_build_deeplab</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main', xid='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main'>main</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples', xid='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples'>_get_dataset_and_samples</a></li></ul>
</td><td><pre><span class='lineno'>   1</span> # Copyright 2018 The TensorFlow Authors All Rights Reserved.
<span class='lineno'>   2</span> #
<span class='lineno'>   3</span> # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
<span class='lineno'>   4</span> # you may not use this file except in compliance with the License.
<span class='lineno'>   5</span> # You may obtain a copy of the License at
<span class='lineno'>   6</span> #
<span class='lineno'>   7</span> #     http://www.apache.org/licenses/LICENSE-2.0
<span class='lineno'>   8</span> #
<span class='lineno'>   9</span> # Unless required by applicable law or agreed to in writing, software
<span class='lineno'>  10</span> # distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<span class='lineno'>  11</span> # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<span class='lineno'>  12</span> # See the License for the specific language governing permissions and
<span class='lineno'>  13</span> # limitations under the License.
<span class='lineno'>  14</span> # ==============================================================================
<span class='lineno'>  15</span> 
<span class='lineno'>  16</span> &quot;&quot;&quot;Training script for the FEELVOS model.
<span class='lineno'>  17</span> 
<span class='lineno'>  18</span> See model.py for more details and usage.
<span class='lineno'>  19</span> &quot;&quot;&quot;
<span class='lineno'>  20</span> import six
<span class='lineno'>  21</span> import tensorflow as tf
<span class='lineno'>  22</span> 
<span class='lineno'>  23</span> from feelvos import common
<span class='lineno'>  24</span> from feelvos import model
<span class='lineno'>  25</span> from feelvos.datasets import video_dataset
<span class='lineno'>  26</span> from feelvos.utils import embedding_utils
<span class='lineno'>  27</span> from feelvos.utils import train_utils
<span class='lineno'>  28</span> from feelvos.utils import video_input_generator
<span class='lineno'>  29</span> from deployment import model_deploy
<span class='lineno'>  30</span> 
<span class='lineno'>  31</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim', title='?'>slim</a> = tf.contrib.slim
<span class='lineno'>  32</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.prefetch_queue', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.prefetch_queue', title='?'>prefetch_queue</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim', title='?'>slim</a>.prefetch_queue
<span class='lineno'>  33</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a> = tf.app.flags
<span class='lineno'>  34</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.FLAGS
<span class='lineno'>  35</span> 
<span class='lineno'>  36</span> # Settings for multi-GPUs/multi-replicas training.
<span class='lineno'>  37</span> 
<span class='lineno'>  38</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;num_clones&#39;, 1, &#39;Number of clones to deploy.&#39;)
<span class='lineno'>  39</span> 
<span class='lineno'>  40</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_boolean(&#39;clone_on_cpu&#39;, False, &#39;Use CPUs to deploy clones.&#39;)
<span class='lineno'>  41</span> 
<span class='lineno'>  42</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;num_replicas&#39;, 1, &#39;Number of worker replicas.&#39;)
<span class='lineno'>  43</span> 
<span class='lineno'>  44</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;startup_delay_steps&#39;, 15,
<span class='lineno'>  45</span>                      &#39;Number of training steps between replicas startup.&#39;)
<span class='lineno'>  46</span> 
<span class='lineno'>  47</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;num_ps_tasks&#39;, 0,
<span class='lineno'>  48</span>                      &#39;The number of parameter servers. If the value is 0, then &#39;
<span class='lineno'>  49</span>                      &#39;the parameters are handled locally by the worker.&#39;)
<span class='lineno'>  50</span> 
<span class='lineno'>  51</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_string(&#39;master&#39;, &#39;&#39;, &#39;BNS name of the tensorflow server&#39;)
<span class='lineno'>  52</span> 
<span class='lineno'>  53</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;task&#39;, 0, &#39;The task ID.&#39;)
<span class='lineno'>  54</span> 
<span class='lineno'>  55</span> # Settings for logging.
<span class='lineno'>  56</span> 
<span class='lineno'>  57</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_string(&#39;train_logdir&#39;, None,
<span class='lineno'>  58</span>                     &#39;Where the checkpoint and logs are stored.&#39;)
<span class='lineno'>  59</span> 
<span class='lineno'>  60</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;log_steps&#39;, 10,
<span class='lineno'>  61</span>                      &#39;Display logging information at every log_steps.&#39;)
<span class='lineno'>  62</span> 
<span class='lineno'>  63</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;save_interval_secs&#39;, 1200,
<span class='lineno'>  64</span>                      &#39;How often, in seconds, we save the model to disk.&#39;)
<span class='lineno'>  65</span> 
<span class='lineno'>  66</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;save_summaries_secs&#39;, 600,
<span class='lineno'>  67</span>                      &#39;How often, in seconds, we compute the summaries.&#39;)
<span class='lineno'>  68</span> 
<span class='lineno'>  69</span> # Settings for training strategy.
<span class='lineno'>  70</span> 
<span class='lineno'>  71</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_enum(&#39;learning_policy&#39;, &#39;poly&#39;, [&#39;poly&#39;, &#39;step&#39;],
<span class='lineno'>  72</span>                   &#39;Learning rate policy for training.&#39;)
<span class='lineno'>  73</span> 
<span class='lineno'>  74</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_float(&#39;base_learning_rate&#39;, 0.0007,
<span class='lineno'>  75</span>                    &#39;The base learning rate for model training.&#39;)
<span class='lineno'>  76</span> 
<span class='lineno'>  77</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_float(&#39;learning_rate_decay_factor&#39;, 0.1,
<span class='lineno'>  78</span>                    &#39;The rate to decay the base learning rate.&#39;)
<span class='lineno'>  79</span> 
<span class='lineno'>  80</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;learning_rate_decay_step&#39;, 2000,
<span class='lineno'>  81</span>                      &#39;Decay the base learning rate at a fixed step.&#39;)
<span class='lineno'>  82</span> 
<span class='lineno'>  83</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_float(&#39;learning_power&#39;, 0.9,
<span class='lineno'>  84</span>                    &#39;The power value used in the poly learning policy.&#39;)
<span class='lineno'>  85</span> 
<span class='lineno'>  86</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;training_number_of_steps&#39;, 200000,
<span class='lineno'>  87</span>                      &#39;The number of steps used for training&#39;)
<span class='lineno'>  88</span> 
<span class='lineno'>  89</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_float(&#39;momentum&#39;, 0.9, &#39;The momentum value to use&#39;)
<span class='lineno'>  90</span> 
<span class='lineno'>  91</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;train_batch_size&#39;, 6,
<span class='lineno'>  92</span>                      &#39;The number of images in each batch during training.&#39;)
<span class='lineno'>  93</span> 
<span class='lineno'>  94</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;train_num_frames_per_video&#39;, 3,
<span class='lineno'>  95</span>                      &#39;The number of frames used per video during training&#39;)
<span class='lineno'>  96</span> 
<span class='lineno'>  97</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_float(&#39;weight_decay&#39;, 0.00004,
<span class='lineno'>  98</span>                    &#39;The value of the weight decay for training.&#39;)
<span class='lineno'>  99</span> 
<span class='lineno'> 100</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_multi_integer(&#39;train_crop_size&#39;, [465, 465],
<span class='lineno'> 101</span>                            &#39;Image crop size [height, width] during training.&#39;)
<span class='lineno'> 102</span> 
<span class='lineno'> 103</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_float(&#39;last_layer_gradient_multiplier&#39;, 1.0,
<span class='lineno'> 104</span>                    &#39;The gradient multiplier for last layers, which is used to &#39;
<span class='lineno'> 105</span>                    &#39;boost the gradient of last layers if the value &gt; 1.&#39;)
<span class='lineno'> 106</span> 
<span class='lineno'> 107</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_boolean(&#39;upsample_logits&#39;, True,
<span class='lineno'> 108</span>                      &#39;Upsample logits during training.&#39;)
<span class='lineno'> 109</span> 
<span class='lineno'> 110</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;batch_capacity_factor&#39;, 16, &#39;Batch capacity factor.&#39;)
<span class='lineno'> 111</span> 
<span class='lineno'> 112</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;num_readers&#39;, 1, &#39;Number of readers for data provider.&#39;)
<span class='lineno'> 113</span> 
<span class='lineno'> 114</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;batch_num_threads&#39;, 1, &#39;Batch number of threads.&#39;)
<span class='lineno'> 115</span> 
<span class='lineno'> 116</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;prefetch_queue_capacity_factor&#39;, 32,
<span class='lineno'> 117</span>                      &#39;Prefetch queue capacity factor.&#39;)
<span class='lineno'> 118</span> 
<span class='lineno'> 119</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;prefetch_queue_num_threads&#39;, 1,
<span class='lineno'> 120</span>                      &#39;Prefetch queue number of threads.&#39;)
<span class='lineno'> 121</span> 
<span class='lineno'> 122</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;train_max_neighbors_per_object&#39;, 1024,
<span class='lineno'> 123</span>                      &#39;The maximum number of candidates for the nearest &#39;
<span class='lineno'> 124</span>                      &#39;neighbor query per object after subsampling&#39;)
<span class='lineno'> 125</span> 
<span class='lineno'> 126</span> # Settings for fine-tuning the network.
<span class='lineno'> 127</span> 
<span class='lineno'> 128</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_string(&#39;tf_initial_checkpoint&#39;, None,
<span class='lineno'> 129</span>                     &#39;The initial checkpoint in tensorflow format.&#39;)
<span class='lineno'> 130</span> 
<span class='lineno'> 131</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_boolean(&#39;initialize_last_layer&#39;, False,
<span class='lineno'> 132</span>                      &#39;Initialize the last layer.&#39;)
<span class='lineno'> 133</span> 
<span class='lineno'> 134</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_boolean(&#39;last_layers_contain_logits_only&#39;, False,
<span class='lineno'> 135</span>                      &#39;Only consider logits as last layers or not.&#39;)
<span class='lineno'> 136</span> 
<span class='lineno'> 137</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;slow_start_step&#39;, 0,
<span class='lineno'> 138</span>                      &#39;Training model with small learning rate for few steps.&#39;)
<span class='lineno'> 139</span> 
<span class='lineno'> 140</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_float(&#39;slow_start_learning_rate&#39;, 1e-4,
<span class='lineno'> 141</span>                    &#39;Learning rate employed during slow start.&#39;)
<span class='lineno'> 142</span> 
<span class='lineno'> 143</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_boolean(&#39;fine_tune_batch_norm&#39;, False,
<span class='lineno'> 144</span>                      &#39;Fine tune the batch norm parameters or not.&#39;)
<span class='lineno'> 145</span> 
<span class='lineno'> 146</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_float(&#39;min_scale_factor&#39;, 1.,
<span class='lineno'> 147</span>                    &#39;Mininum scale factor for data augmentation.&#39;)
<span class='lineno'> 148</span> 
<span class='lineno'> 149</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_float(&#39;max_scale_factor&#39;, 1.3,
<span class='lineno'> 150</span>                    &#39;Maximum scale factor for data augmentation.&#39;)
<span class='lineno'> 151</span> 
<span class='lineno'> 152</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_float(&#39;scale_factor_step_size&#39;, 0,
<span class='lineno'> 153</span>                    &#39;Scale factor step size for data augmentation.&#39;)
<span class='lineno'> 154</span> 
<span class='lineno'> 155</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_multi_integer(&#39;atrous_rates&#39;, None,
<span class='lineno'> 156</span>                            &#39;Atrous rates for atrous spatial pyramid pooling.&#39;)
<span class='lineno'> 157</span> 
<span class='lineno'> 158</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;output_stride&#39;, 8,
<span class='lineno'> 159</span>                      &#39;The ratio of input to output spatial resolution.&#39;)
<span class='lineno'> 160</span> 
<span class='lineno'> 161</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_boolean(&#39;sample_only_first_frame_for_finetuning&#39;, False,
<span class='lineno'> 162</span>                      &#39;Whether to only sample the first frame during &#39;
<span class='lineno'> 163</span>                      &#39;fine-tuning. This should be False when using lucid data, &#39;
<span class='lineno'> 164</span>                      &#39;but True when fine-tuning on the first frame only. Only &#39;
<span class='lineno'> 165</span>                      &#39;has an effect if first_frame_finetuning is True.&#39;)
<span class='lineno'> 166</span> 
<span class='lineno'> 167</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_multi_integer(&#39;first_frame_finetuning&#39;, [0],
<span class='lineno'> 168</span>                            &#39;Whether to only sample the first frame for &#39;
<span class='lineno'> 169</span>                            &#39;fine-tuning.&#39;)
<span class='lineno'> 170</span> 
<span class='lineno'> 171</span> # Dataset settings.
<span class='lineno'> 172</span> 
<span class='lineno'> 173</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_multi_string(&#39;dataset&#39;, [], &#39;Name of the segmentation datasets.&#39;)
<span class='lineno'> 174</span> 
<span class='lineno'> 175</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_multi_float(&#39;dataset_sampling_probabilities&#39;, [],
<span class='lineno'> 176</span>                          &#39;A list of probabilities to sample each of the &#39;
<span class='lineno'> 177</span>                          &#39;datasets.&#39;)
<span class='lineno'> 178</span> 
<span class='lineno'> 179</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_string(&#39;train_split&#39;, &#39;train&#39;,
<span class='lineno'> 180</span>                     &#39;Which split of the dataset to be used for training&#39;)
<span class='lineno'> 181</span> 
<span class='lineno'> 182</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_multi_string(&#39;dataset_dir&#39;, [], &#39;Where the datasets reside.&#39;)
<span class='lineno'> 183</span> 
<span class='lineno'> 184</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_multi_integer(&#39;three_frame_dataset&#39;, [0],
<span class='lineno'> 185</span>                            &#39;Whether the dataset has exactly three frames per &#39;
<span class='lineno'> 186</span>                            &#39;video of which the first is to be used as reference&#39;
<span class='lineno'> 187</span>                            &#39; and the two others are consecutive frames to be &#39;
<span class='lineno'> 188</span>                            &#39;used as query  frames.&#39;
<span class='lineno'> 189</span>                            &#39;Set true for pascal lucid data.&#39;)
<span class='lineno'> 190</span> 
<span class='lineno'> 191</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_boolean(&#39;damage_initial_previous_frame_mask&#39;, False,
<span class='lineno'> 192</span>                      &#39;Whether to artificially damage the initial previous &#39;
<span class='lineno'> 193</span>                      &#39;frame mask. Only has an effect if &#39;
<span class='lineno'> 194</span>                      &#39;also_attend_to_previous_frame is True.&#39;)
<span class='lineno'> 195</span> 
<span class='lineno'> 196</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_float(&#39;top_k_percent_pixels&#39;, 0.15, &#39;Float in [0.0, 1.0].&#39;
<span class='lineno'> 197</span>                    &#39;When its value &lt; 1.0, only compute the loss for the top k&#39;
<span class='lineno'> 198</span>                    &#39;percent pixels (e.g., the top 20% pixels). This is useful&#39;
<span class='lineno'> 199</span>                    &#39;for hard pixel mining.&#39;)
<span class='lineno'> 200</span> 
<span class='lineno'> 201</span> <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.DEFINE_integer(&#39;hard_example_mining_step&#39;, 100000,
<span class='lineno'> 202</span>                      &#39;The training step in which the hard exampling mining &#39;
<span class='lineno'> 203</span>                      &#39;kicks off. Note that we gradually reduce the mining &#39;
<span class='lineno'> 204</span>                      &#39;percent to the top_k_percent_pixels. For example, if &#39;
<span class='lineno'> 205</span>                      &#39;hard_example_mining_step=100K and &#39;
<span class='lineno'> 206</span>                      &#39;top_k_percent_pixels=0.25, then mining percent will &#39;
<span class='lineno'> 207</span>                      &#39;gradually reduce from 100% to 25% until 100K steps &#39;
<span class='lineno'> 208</span>                      &#39;after which we only mine top 25% pixels. Only has an &#39;
<span class='lineno'> 209</span>                      &#39;effect if top_k_percent_pixels &lt; 1.0&#39;)
<span class='lineno'> 210</span> 
<span class='lineno'> 211</span> 
<span class='lineno'> 212</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab', title='(?, ?, ?) -> None'>_build_deeplab</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.inputs_queue_or_samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.inputs_queue_or_samples', title='?'>inputs_queue_or_samples</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_num_classes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_num_classes', title='?'>outputs_to_num_classes</a>,
<span class='lineno'> 213</span>                    <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.ignore_label', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.ignore_label', title='?'>ignore_label</a>):
<span class='lineno'> 214</span>   &quot;&quot;&quot;Builds a clone of DeepLab.
<span class='lineno'> 215</span> 
<span class='lineno'> 216</span>   Args:
<span class='lineno'> 217</span>     inputs_queue_or_samples: A prefetch queue for images and labels, or
<span class='lineno'> 218</span>       directly a dict of the samples.
<span class='lineno'> 219</span>     outputs_to_num_classes: A map from output type to the number of classes.
<span class='lineno'> 220</span>       For example, for the task of semantic segmentation with 21 semantic
<span class='lineno'> 221</span>       classes, we would have outputs_to_num_classes[&#39;semantic&#39;] = 21.
<span class='lineno'> 222</span>     ignore_label: Ignore label.
<span class='lineno'> 223</span> 
<span class='lineno'> 224</span>   Returns:
<span class='lineno'> 225</span>     A map of maps from output_type (e.g., semantic prediction) to a
<span class='lineno'> 226</span>       dictionary of multi-scale logits names to logits. For each output_type,
<span class='lineno'> 227</span>       the dictionary has keys which correspond to the scales and values which
<span class='lineno'> 228</span>       correspond to the logits. For example, if `scales` equals [1.0, 1.5],
<span class='lineno'> 229</span>       then the keys would include &#39;merged_logits&#39;, &#39;logits_1.00&#39; and
<span class='lineno'> 230</span>       &#39;logits_1.50&#39;.
<span class='lineno'> 231</span> 
<span class='lineno'> 232</span>   Raises:
<span class='lineno'> 233</span>     ValueError: If classification_loss is not softmax, softmax_with_attention,
<span class='lineno'> 234</span>       or triplet.
<span class='lineno'> 235</span>   &quot;&quot;&quot;
<span class='lineno'> 236</span>   if hasattr(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.inputs_queue_or_samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.inputs_queue_or_samples', title='?'>inputs_queue_or_samples</a>, &#39;dequeue&#39;):
<span class='lineno'> 237</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.inputs_queue_or_samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.inputs_queue_or_samples', title='?'>inputs_queue_or_samples</a>.dequeue()
<span class='lineno'> 238</span>   else:
<span class='lineno'> 239</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.inputs_queue_or_samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.inputs_queue_or_samples', title='?'>inputs_queue_or_samples</a>
<span class='lineno'> 240</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.train_crop_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.train_crop_size', title='None'>train_crop_size</a> = (None if 0 in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_crop_size else
<span class='lineno'> 241</span>                      <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_crop_size)
<span class='lineno'> 242</span> 
<span class='lineno'> 243</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', title='?'>model_options</a> = common.VideoModelOptions(
<span class='lineno'> 244</span>       outputs_to_num_classes=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_num_classes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_num_classes', title='?'>outputs_to_num_classes</a>,
<span class='lineno'> 245</span>       crop_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.train_crop_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.train_crop_size', title='None'>train_crop_size</a>,
<span class='lineno'> 246</span>       atrous_rates=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.atrous_rates,
<span class='lineno'> 247</span>       output_stride=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.output_stride)
<span class='lineno'> 248</span> 
<span class='lineno'> 249</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', title='?'>model_options</a>.classification_loss == &#39;softmax_with_attention&#39;:
<span class='lineno'> 250</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.clone_batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.clone_batch_size', title='?'>clone_batch_size</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_batch_size // <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.num_clones
<span class='lineno'> 251</span> 
<span class='lineno'> 252</span>     # Create summaries of ground truth labels.
<span class='lineno'> 253</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', title='int'>n</a> in range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.clone_batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.clone_batch_size', title='?'>clone_batch_size</a>):
<span class='lineno'> 254</span>       tf.summary.image(
<span class='lineno'> 255</span>           &#39;gt_label_%d&#39; % <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', title='int'>n</a>,
<span class='lineno'> 256</span>           tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a>[common.LABEL][
<span class='lineno'> 257</span>               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', title='int'>n</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_num_frames_per_video:
<span class='lineno'> 258</span>               (<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', title='int'>n</a> + 1) * <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_num_frames_per_video],
<span class='lineno'> 259</span>                   tf.uint8) * 32, max_outputs=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_num_frames_per_video)
<span class='lineno'> 260</span> 
<span class='lineno'> 261</span>     if common.PRECEDING_FRAME_LABEL in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a>:
<span class='lineno'> 262</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.preceding_frame_label', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.preceding_frame_label', title='?'>preceding_frame_label</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a>[common.PRECEDING_FRAME_LABEL]
<span class='lineno'> 263</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax', title='[?]'>init_softmax</a> = []
<span class='lineno'> 264</span>       for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', title='int'>n</a> in range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.clone_batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.clone_batch_size', title='?'>clone_batch_size</a>):
<span class='lineno'> 265</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax_n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax_n', title='?'>init_softmax_n</a> = embedding_utils.create_initial_softmax_from_labels(
<span class='lineno'> 266</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.preceding_frame_label', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.preceding_frame_label', title='?'>preceding_frame_label</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', title='int'>n</a>, tf.newaxis],
<span class='lineno'> 267</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a>[common.LABEL][<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', title='int'>n</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_num_frames_per_video,
<span class='lineno'> 268</span>                                   tf.newaxis],
<span class='lineno'> 269</span>             common.parse_decoder_output_stride(),
<span class='lineno'> 270</span>             reduce_labels=True)
<span class='lineno'> 271</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax_n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax_n', title='?'>init_softmax_n</a> = tf.squeeze(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax_n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax_n', title='?'>init_softmax_n</a>, axis=0)
<span class='lineno'> 272</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax', title='[?]'>init_softmax</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax_n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax_n', title='?'>init_softmax_n</a>)
<span class='lineno'> 273</span>         tf.summary.image(&#39;preceding_frame_label&#39;,
<span class='lineno'> 274</span>                          tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.preceding_frame_label', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.preceding_frame_label', title='?'>preceding_frame_label</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n', title='int'>n</a>, tf.newaxis],
<span class='lineno'> 275</span>                                  tf.uint8) * 32)
<span class='lineno'> 276</span>     else:
<span class='lineno'> 277</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax', title='None'>init_softmax</a> = None
<span class='lineno'> 278</span> 
<span class='lineno'> 279</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', title='?'>outputs_to_scales_to_logits</a> = (
<span class='lineno'> 280</span>         model.multi_scale_logits_with_nearest_neighbor_matching(
<span class='lineno'> 281</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a>[common.IMAGE],
<span class='lineno'> 282</span>             model_options=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', title='?'>model_options</a>,
<span class='lineno'> 283</span>             image_pyramid=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.image_pyramid,
<span class='lineno'> 284</span>             weight_decay=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.weight_decay,
<span class='lineno'> 285</span>             is_training=True,
<span class='lineno'> 286</span>             fine_tune_batch_norm=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.fine_tune_batch_norm,
<span class='lineno'> 287</span>             reference_labels=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a>[common.LABEL],
<span class='lineno'> 288</span>             clone_batch_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_batch_size // <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.num_clones,
<span class='lineno'> 289</span>             num_frames_per_video=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_num_frames_per_video,
<span class='lineno'> 290</span>             embedding_dimension=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.embedding_dimension,
<span class='lineno'> 291</span>             max_neighbors_per_object=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_max_neighbors_per_object,
<span class='lineno'> 292</span>             k_nearest_neighbors=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.k_nearest_neighbors,
<span class='lineno'> 293</span>             use_softmax_feedback=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.use_softmax_feedback,
<span class='lineno'> 294</span>             initial_softmax_feedback=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.init_softmax', title='[?]'>init_softmax</a>,
<span class='lineno'> 295</span>             embedding_seg_feature_dimension=
<span class='lineno'> 296</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.embedding_seg_feature_dimension,
<span class='lineno'> 297</span>             embedding_seg_n_layers=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.embedding_seg_n_layers,
<span class='lineno'> 298</span>             embedding_seg_kernel_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.embedding_seg_kernel_size,
<span class='lineno'> 299</span>             embedding_seg_atrous_rates=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.embedding_seg_atrous_rates,
<span class='lineno'> 300</span>             normalize_nearest_neighbor_distances=
<span class='lineno'> 301</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.normalize_nearest_neighbor_distances,
<span class='lineno'> 302</span>             also_attend_to_previous_frame=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.also_attend_to_previous_frame,
<span class='lineno'> 303</span>             damage_initial_previous_frame_mask=
<span class='lineno'> 304</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.damage_initial_previous_frame_mask,
<span class='lineno'> 305</span>             use_local_previous_frame_attention=
<span class='lineno'> 306</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.use_local_previous_frame_attention,
<span class='lineno'> 307</span>             previous_frame_attention_window_size=
<span class='lineno'> 308</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.previous_frame_attention_window_size,
<span class='lineno'> 309</span>             use_first_frame_matching=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.use_first_frame_matching
<span class='lineno'> 310</span>         ))
<span class='lineno'> 311</span>   else:
<span class='lineno'> 312</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', title='?'>outputs_to_scales_to_logits</a> = model.multi_scale_logits_v2(
<span class='lineno'> 313</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a>[common.IMAGE],
<span class='lineno'> 314</span>         model_options=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', title='?'>model_options</a>,
<span class='lineno'> 315</span>         image_pyramid=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.image_pyramid,
<span class='lineno'> 316</span>         weight_decay=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.weight_decay,
<span class='lineno'> 317</span>         is_training=True,
<span class='lineno'> 318</span>         fine_tune_batch_norm=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.fine_tune_batch_norm)
<span class='lineno'> 319</span> 
<span class='lineno'> 320</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', title='?'>model_options</a>.classification_loss == &#39;softmax&#39;:
<span class='lineno'> 321</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', title='?'>output</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_classes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_classes', title='?'>num_classes</a> in six.iteritems(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_num_classes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_num_classes', title='?'>outputs_to_num_classes</a>):
<span class='lineno'> 322</span>       train_utils.add_softmax_cross_entropy_loss_for_each_scale(
<span class='lineno'> 323</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', title='?'>outputs_to_scales_to_logits</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', title='?'>output</a>],
<span class='lineno'> 324</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a>[common.LABEL],
<span class='lineno'> 325</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_classes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_classes', title='?'>num_classes</a>,
<span class='lineno'> 326</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.ignore_label', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.ignore_label', title='?'>ignore_label</a>,
<span class='lineno'> 327</span>           loss_weight=1.0,
<span class='lineno'> 328</span>           upsample_logits=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.upsample_logits,
<span class='lineno'> 329</span>           scope=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', title='?'>output</a>)
<span class='lineno'> 330</span>   elif <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', title='?'>model_options</a>.classification_loss == &#39;triplet&#39;:
<span class='lineno'> 331</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', title='?'>output</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab._', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab._', title='?'>_</a> in six.iteritems(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_num_classes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_num_classes', title='?'>outputs_to_num_classes</a>):
<span class='lineno'> 332</span>       train_utils.add_triplet_loss_for_each_scale(
<span class='lineno'> 333</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_batch_size // <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.num_clones,
<span class='lineno'> 334</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_num_frames_per_video,
<span class='lineno'> 335</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.embedding_dimension, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', title='?'>outputs_to_scales_to_logits</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', title='?'>output</a>],
<span class='lineno'> 336</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a>[common.LABEL], scope=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', title='?'>output</a>)
<span class='lineno'> 337</span>   elif <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.model_options', title='?'>model_options</a>.classification_loss == &#39;softmax_with_attention&#39;:
<span class='lineno'> 338</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', title='?'>labels</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.samples', title='?'>samples</a>[common.LABEL]
<span class='lineno'> 339</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.batch_size', title='?'>batch_size</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_batch_size // <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.num_clones
<span class='lineno'> 340</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_frames_per_video', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_frames_per_video', title='?'>num_frames_per_video</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_num_frames_per_video
<span class='lineno'> 341</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.h', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.h', title='?'>h</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.w', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.w', title='?'>w</a> = train_utils.resolve_shape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', title='?'>labels</a>)[1:3]
<span class='lineno'> 342</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', title='?'>labels</a> = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', title='?'>labels</a>, tf.stack(
<span class='lineno'> 343</span>         [<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.batch_size', title='?'>batch_size</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_frames_per_video', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_frames_per_video', title='?'>num_frames_per_video</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.h', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.h', title='?'>h</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.w', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.w', title='?'>w</a>, 1]))
<span class='lineno'> 344</span>     # Strip the reference labels off.
<span class='lineno'> 345</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.also_attend_to_previous_frame or <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.use_softmax_feedback:
<span class='lineno'> 346</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n_ref_frames', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n_ref_frames', title='int'>n_ref_frames</a> = 2
<span class='lineno'> 347</span>     else:
<span class='lineno'> 348</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n_ref_frames', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n_ref_frames', title='int'>n_ref_frames</a> = 1
<span class='lineno'> 349</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', title='?'>labels</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', title='?'>labels</a>[:, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n_ref_frames', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n_ref_frames', title='int'>n_ref_frames</a>:]
<span class='lineno'> 350</span>     # Merge batch and time dimensions.
<span class='lineno'> 351</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', title='?'>labels</a> = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', title='?'>labels</a>, tf.stack(
<span class='lineno'> 352</span>         [<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.batch_size', title='?'>batch_size</a> * (<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_frames_per_video', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_frames_per_video', title='?'>num_frames_per_video</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n_ref_frames', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.n_ref_frames', title='int'>n_ref_frames</a>), <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.h', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.h', title='?'>h</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.w', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.w', title='?'>w</a>, 1]))
<span class='lineno'> 353</span> 
<span class='lineno'> 354</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', title='?'>output</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_classes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.num_classes', title='?'>num_classes</a> in six.iteritems(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_num_classes', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_num_classes', title='?'>outputs_to_num_classes</a>):
<span class='lineno'> 355</span>       train_utils.add_dynamic_softmax_cross_entropy_loss_for_each_scale(
<span class='lineno'> 356</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', title='?'>outputs_to_scales_to_logits</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', title='?'>output</a>],
<span class='lineno'> 357</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.labels', title='?'>labels</a>,
<span class='lineno'> 358</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.ignore_label', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.ignore_label', title='?'>ignore_label</a>,
<span class='lineno'> 359</span>           loss_weight=1.0,
<span class='lineno'> 360</span>           upsample_logits=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.upsample_logits,
<span class='lineno'> 361</span>           scope=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.output', title='?'>output</a>,
<span class='lineno'> 362</span>           top_k_percent_pixels=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.top_k_percent_pixels,
<span class='lineno'> 363</span>           hard_example_mining_step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.hard_example_mining_step)
<span class='lineno'> 364</span>   else:
<span class='lineno'> 365</span>     raise ValueError(&#39;Only support softmax, softmax_with_attention&#39;
<span class='lineno'> 366</span>                      &#39; or triplet for classification_loss.&#39;)
<span class='lineno'> 367</span> 
<span class='lineno'> 368</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab.outputs_to_scales_to_logits', title='?'>outputs_to_scales_to_logits</a>
<span class='lineno'> 369</span> 
<span class='lineno'> 370</span> 
<span class='lineno'> 371</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main', title='? -> None'>main</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.unused_argv', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.unused_argv', title='?'>unused_argv</a>):
<span class='lineno'> 372</span>   # Set up deployment (i.e., multi-GPUs and/or multi-replicas).
<span class='lineno'> 373</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', title='?'>config</a> = model_deploy.DeploymentConfig(
<span class='lineno'> 374</span>       num_clones=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.num_clones,
<span class='lineno'> 375</span>       clone_on_cpu=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.clone_on_cpu,
<span class='lineno'> 376</span>       replica_id=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.task,
<span class='lineno'> 377</span>       num_replicas=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.num_replicas,
<span class='lineno'> 378</span>       num_ps_tasks=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.num_ps_tasks)
<span class='lineno'> 379</span> 
<span class='lineno'> 380</span>   with tf.Graph().as_default():
<span class='lineno'> 381</span>     with tf.device(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', title='?'>config</a>.inputs_device()):
<span class='lineno'> 382</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.train_crop_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.train_crop_size', title='None'>train_crop_size</a> = (None if 0 in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_crop_size else
<span class='lineno'> 383</span>                          <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_crop_size)
<span class='lineno'> 384</span>       assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.dataset
<span class='lineno'> 385</span>       assert len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.dataset) == len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.dataset_dir)
<span class='lineno'> 386</span>       if len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.first_frame_finetuning) == 1:
<span class='lineno'> 387</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_frame_finetuning', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_frame_finetuning', title='?'>first_frame_finetuning</a> = (list(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.first_frame_finetuning)
<span class='lineno'> 388</span>                                   * len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.dataset))
<span class='lineno'> 389</span>       else:
<span class='lineno'> 390</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_frame_finetuning', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_frame_finetuning', title='?'>first_frame_finetuning</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.first_frame_finetuning
<span class='lineno'> 391</span>       if len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.three_frame_dataset) == 1:
<span class='lineno'> 392</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.three_frame_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.three_frame_dataset', title='?'>three_frame_dataset</a> = (list(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.three_frame_dataset)
<span class='lineno'> 393</span>                                * len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.dataset))
<span class='lineno'> 394</span>       else:
<span class='lineno'> 395</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.three_frame_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.three_frame_dataset', title='?'>three_frame_dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.three_frame_dataset
<span class='lineno'> 396</span>       assert len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.dataset) == len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_frame_finetuning', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_frame_finetuning', title='?'>first_frame_finetuning</a>)
<span class='lineno'> 397</span>       assert len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.dataset) == len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.three_frame_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.three_frame_dataset', title='?'>three_frame_dataset</a>)
<span class='lineno'> 398</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.datasets', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.datasets', title='?'>datasets</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', title='?'>samples_list</a> = zip(
<span class='lineno'> 399</span>           *[<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples', title='(?, None, ?, ?, bool, bool) -> (?, ?) / (?, ?, ?, ?, ?, ?) -> (?, ?)'>_get_dataset_and_samples</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', title='?'>config</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.train_crop_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.train_crop_size', title='None'>train_crop_size</a>, dataset,
<span class='lineno'> 400</span>                                      dataset_dir, bool(first_frame_finetuning_),
<span class='lineno'> 401</span>                                      bool(three_frame_dataset_))
<span class='lineno'> 402</span>             for dataset, dataset_dir, first_frame_finetuning_,
<span class='lineno'> 403</span>             three_frame_dataset_ in zip(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.dataset, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.dataset_dir,
<span class='lineno'> 404</span>                                         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_frame_finetuning', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_frame_finetuning', title='?'>first_frame_finetuning</a>,
<span class='lineno'> 405</span>                                         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.three_frame_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.three_frame_dataset', title='?'>three_frame_dataset</a>)])
<span class='lineno'> 406</span>       # Note that this way of doing things is wasteful since it will evaluate
<span class='lineno'> 407</span>       # all branches but just use one of them. But let&#39;s do it anyway for now,
<span class='lineno'> 408</span>       # since it&#39;s easy and will probably be fast enough.
<span class='lineno'> 409</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.datasets', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.datasets', title='?'>datasets</a>[0]
<span class='lineno'> 410</span>       if len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', title='?'>samples_list</a>) == 1:
<span class='lineno'> 411</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples', title='?'>samples</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', title='?'>samples_list</a>[0]
<span class='lineno'> 412</span>       else:
<span class='lineno'> 413</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', title='?'>probabilities</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.dataset_sampling_probabilities
<span class='lineno'> 414</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', title='?'>probabilities</a>:
<span class='lineno'> 415</span>           assert len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', title='?'>probabilities</a>) == len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', title='?'>samples_list</a>)
<span class='lineno'> 416</span>         else:
<span class='lineno'> 417</span>           # Default to uniform probabilities.
<span class='lineno'> 418</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', title='[float]'>probabilities</a> = [1.0 / len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', title='?'>samples_list</a>) for <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main._', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main._', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main._', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main._', title='?'>_</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', title='?'>samples_list</a>]
<span class='lineno'> 419</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', title='?'>probabilities</a> = tf.constant(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', title='[float]'>probabilities</a>)
<span class='lineno'> 420</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.logits', title='?'>logits</a> = tf.log(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.probabilities', title='?'>probabilities</a>[tf.newaxis])
<span class='lineno'> 421</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.rand_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.rand_idx', title='?'>rand_idx</a> = tf.squeeze(tf.multinomial(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.logits', title='?'>logits</a>, 1, output_dtype=tf.int32),
<span class='lineno'> 422</span>                               axis=[0, 1])
<span class='lineno'> 423</span> 
<span class='lineno'> 424</span>         def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap', title='? -> () -> ?'>wrap</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap.x', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap.x', title='?'>x</a>):
<span class='lineno'> 425</span>           def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap.f', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap.f', title='() -> ?'>f</a>():
<span class='lineno'> 426</span>             return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap.x', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap.x', title='?'>x</a>
<span class='lineno'> 427</span>           return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap.f', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap.f', title='() -> ?'>f</a>
<span class='lineno'> 428</span> 
<span class='lineno'> 429</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples', title='?'>samples</a> = tf.case({tf.equal(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.rand_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.rand_idx', title='?'>rand_idx</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.idx', title='?'>idx</a>): <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.wrap', title='? -> () -> ?'>wrap</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.s', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.s', title='?'>s</a>)
<span class='lineno'> 430</span>                            for <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.idx', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.idx', title='?'>idx</a></a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.s', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.s', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.s', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.s', title='?'>s</a></a> in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples_list', title='?'>samples_list</a>)},
<span class='lineno'> 431</span>                           exclusive=True)
<span class='lineno'> 432</span> 
<span class='lineno'> 433</span>       # Prefetch_queue requires the shape to be known at graph creation time.
<span class='lineno'> 434</span>       # So we only use it if we crop to a fixed size.
<span class='lineno'> 435</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.train_crop_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.train_crop_size', title='None'>train_crop_size</a> is None:
<span class='lineno'> 436</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.inputs_queue', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.inputs_queue', title='?'>inputs_queue</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples', title='?'>samples</a>
<span class='lineno'> 437</span>       else:
<span class='lineno'> 438</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.inputs_queue', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.inputs_queue', title='?'>inputs_queue</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.prefetch_queue', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.prefetch_queue', title='?'>prefetch_queue</a>.prefetch_queue(
<span class='lineno'> 439</span>             <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.samples', title='?'>samples</a>,
<span class='lineno'> 440</span>             capacity=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.prefetch_queue_capacity_factor*<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', title='?'>config</a>.num_clones,
<span class='lineno'> 441</span>             num_threads=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.prefetch_queue_num_threads)
<span class='lineno'> 442</span> 
<span class='lineno'> 443</span>     # Create the global step on the device storing the variables.
<span class='lineno'> 444</span>     with tf.device(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', title='?'>config</a>.variables_device()):
<span class='lineno'> 445</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.global_step', title='?'>global_step</a> = tf.train.get_or_create_global_step()
<span class='lineno'> 446</span> 
<span class='lineno'> 447</span>       # Define the model and create clones.
<span class='lineno'> 448</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_fn', title='(?, ?, ?) -> None'>model_fn</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._build_deeplab', title='(?, ?, ?) -> None'>_build_deeplab</a>
<span class='lineno'> 449</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.classification_loss == &#39;triplet&#39;:
<span class='lineno'> 450</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.embedding_dim', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.embedding_dim', title='?'>embedding_dim</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.embedding_dimension
<span class='lineno'> 451</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.output_type_to_dim', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.output_type_to_dim', title='dict'>output_type_to_dim</a> = {&#39;embedding&#39;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.embedding_dim', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.embedding_dim', title='?'>embedding_dim</a>}
<span class='lineno'> 452</span>       else:
<span class='lineno'> 453</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.output_type_to_dim', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.output_type_to_dim', title='dict'>output_type_to_dim</a> = {common.OUTPUT_TYPE: <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.dataset', title='?'>dataset</a>.num_classes}
<span class='lineno'> 454</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_args', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_args', title='(?, {dict | dict}, ?)'>model_args</a> = (<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.inputs_queue', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.inputs_queue', title='?'>inputs_queue</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.output_type_to_dim', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.output_type_to_dim', title='{dict | dict}'>output_type_to_dim</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.dataset', title='?'>dataset</a>.ignore_label)
<span class='lineno'> 455</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.clones', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.clones', title='?'>clones</a> = model_deploy.create_clones(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', title='?'>config</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_fn', title='(?, ?, ?) -> None'>model_fn</a>, args=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_args', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_args', title='(?, {dict | dict}, ?)'>model_args</a>)
<span class='lineno'> 456</span> 
<span class='lineno'> 457</span>       # Gather update_ops from the first clone. These contain, for example,
<span class='lineno'> 458</span>       # the updates for the batch_norm variables created by model_fn.
<span class='lineno'> 459</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_clone_scope', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_clone_scope', title='?'>first_clone_scope</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', title='?'>config</a>.clone_scope(0)
<span class='lineno'> 460</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.update_ops', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.update_ops', title='?'>update_ops</a> = tf.get_collection(tf.GraphKeys.UPDATE_OPS, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_clone_scope', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_clone_scope', title='?'>first_clone_scope</a>)
<span class='lineno'> 461</span> 
<span class='lineno'> 462</span>     # Gather initial summaries.
<span class='lineno'> 463</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', title='?'>summaries</a> = set(tf.get_collection(tf.GraphKeys.SUMMARIES))
<span class='lineno'> 464</span> 
<span class='lineno'> 465</span>     # Add summaries for model variables.
<span class='lineno'> 466</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_var', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_var', title='?'>model_var</a> in tf.contrib.framework.get_model_variables():
<span class='lineno'> 467</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', title='?'>summaries</a>.add(tf.summary.histogram(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_var', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_var', title='?'>model_var</a>.op.name, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_var', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.model_var', title='?'>model_var</a>))
<span class='lineno'> 468</span> 
<span class='lineno'> 469</span>     # Add summaries for losses.
<span class='lineno'> 470</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.loss', title='?'>loss</a> in tf.get_collection(tf.GraphKeys.LOSSES, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_clone_scope', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_clone_scope', title='?'>first_clone_scope</a>):
<span class='lineno'> 471</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', title='?'>summaries</a>.add(tf.summary.scalar(&#39;losses/%s&#39; % <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.loss', title='?'>loss</a>.op.name, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.loss', title='?'>loss</a>))
<span class='lineno'> 472</span> 
<span class='lineno'> 473</span>     # Build the optimizer based on the device specification.
<span class='lineno'> 474</span>     with tf.device(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', title='?'>config</a>.optimizer_device()):
<span class='lineno'> 475</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.learning_rate', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.learning_rate', title='?'>learning_rate</a> = train_utils.get_model_learning_rate(
<span class='lineno'> 476</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.learning_policy,
<span class='lineno'> 477</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.base_learning_rate,
<span class='lineno'> 478</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.learning_rate_decay_step,
<span class='lineno'> 479</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.learning_rate_decay_factor,
<span class='lineno'> 480</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.training_number_of_steps,
<span class='lineno'> 481</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.learning_power,
<span class='lineno'> 482</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.slow_start_step,
<span class='lineno'> 483</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.slow_start_learning_rate)
<span class='lineno'> 484</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.optimizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.optimizer', title='?'>optimizer</a> = tf.train.MomentumOptimizer(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.learning_rate', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.learning_rate', title='?'>learning_rate</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.momentum)
<span class='lineno'> 485</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', title='?'>summaries</a>.add(tf.summary.scalar(&#39;learning_rate&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.learning_rate', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.learning_rate', title='?'>learning_rate</a>))
<span class='lineno'> 486</span> 
<span class='lineno'> 487</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.startup_delay_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.startup_delay_steps', title='?'>startup_delay_steps</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.task * <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.startup_delay_steps
<span class='lineno'> 488</span> 
<span class='lineno'> 489</span>     with tf.device(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.config', title='?'>config</a>.variables_device()):
<span class='lineno'> 490</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.total_loss', title='?'>total_loss</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', title='?'>grads_and_vars</a> = model_deploy.optimize_clones(
<span class='lineno'> 491</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.clones', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.clones', title='?'>clones</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.optimizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.optimizer', title='?'>optimizer</a>)
<span class='lineno'> 492</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.total_loss', title='?'>total_loss</a> = tf.check_numerics(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.total_loss', title='?'>total_loss</a>, &#39;Loss is inf or nan.&#39;)
<span class='lineno'> 493</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', title='?'>summaries</a>.add(tf.summary.scalar(&#39;total_loss&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.total_loss', title='?'>total_loss</a>))
<span class='lineno'> 494</span> 
<span class='lineno'> 495</span>       # Modify the gradients for biases and last layer variables.
<span class='lineno'> 496</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.last_layers', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.last_layers', title='?'>last_layers</a> = model.get_extra_layer_scopes(
<span class='lineno'> 497</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.last_layers_contain_logits_only)
<span class='lineno'> 498</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grad_mult', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grad_mult', title='?'>grad_mult</a> = train_utils.get_model_gradient_multipliers(
<span class='lineno'> 499</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.last_layers', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.last_layers', title='?'>last_layers</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.last_layer_gradient_multiplier)
<span class='lineno'> 500</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grad_mult', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grad_mult', title='?'>grad_mult</a>:
<span class='lineno'> 501</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', title='?'>grads_and_vars</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim', title='?'>slim</a>.learning.multiply_gradients(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', title='?'>grads_and_vars</a>,
<span class='lineno'> 502</span>                                                           <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grad_mult', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grad_mult', title='?'>grad_mult</a>)
<span class='lineno'> 503</span> 
<span class='lineno'> 504</span>       with tf.name_scope(&#39;grad_clipping&#39;):
<span class='lineno'> 505</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', title='?'>grads_and_vars</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim', title='?'>slim</a>.learning.clip_gradient_norms(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', title='?'>grads_and_vars</a>, 5.0)
<span class='lineno'> 506</span> 
<span class='lineno'> 507</span>       # Create histogram summaries for the gradients.
<span class='lineno'> 508</span>       # We have too many summaries for mldash, so disable this one for now.
<span class='lineno'> 509</span>       # for grad, var in grads_and_vars:
<span class='lineno'> 510</span>       #   summaries.add(tf.summary.histogram(
<span class='lineno'> 511</span>       #       var.name.replace(&#39;:0&#39;, &#39;_0&#39;) + &#39;/gradient&#39;, grad))
<span class='lineno'> 512</span> 
<span class='lineno'> 513</span>       # Create gradient update op.
<span class='lineno'> 514</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grad_updates', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grad_updates', title='?'>grad_updates</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.optimizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.optimizer', title='?'>optimizer</a>.apply_gradients(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grads_and_vars', title='?'>grads_and_vars</a>,
<span class='lineno'> 515</span>                                                global_step=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.global_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.global_step', title='?'>global_step</a>)
<span class='lineno'> 516</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.update_ops', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.update_ops', title='?'>update_ops</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grad_updates', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.grad_updates', title='?'>grad_updates</a>)
<span class='lineno'> 517</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.update_op', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.update_op', title='?'>update_op</a> = tf.group(*<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.update_ops', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.update_ops', title='?'>update_ops</a>)
<span class='lineno'> 518</span>       with tf.control_dependencies([<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.update_op', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.update_op', title='?'>update_op</a>]):
<span class='lineno'> 519</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.train_tensor', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.train_tensor', title='?'>train_tensor</a> = tf.identity(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.total_loss', title='?'>total_loss</a>, name=&#39;train_op&#39;)
<span class='lineno'> 520</span> 
<span class='lineno'> 521</span>     # Add the summaries from the first clone. These contain the summaries
<span class='lineno'> 522</span>     # created by model_fn and either optimize_clones() or _gather_clone_loss().
<span class='lineno'> 523</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', title='?'>summaries</a></a> |= set(tf.get_collection(tf.GraphKeys.SUMMARIES,
<span class='lineno'> 524</span>                                        <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_clone_scope', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.first_clone_scope', title='?'>first_clone_scope</a>))
<span class='lineno'> 525</span> 
<span class='lineno'> 526</span>     # Merge all summaries together.
<span class='lineno'> 527</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summary_op', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summary_op', title='?'>summary_op</a> = tf.summary.merge(list(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summaries', title='?'>summaries</a>))
<span class='lineno'> 528</span> 
<span class='lineno'> 529</span>     # Soft placement allows placing on CPU ops without GPU implementation.
<span class='lineno'> 530</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.session_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.session_config', title='?'>session_config</a> = tf.ConfigProto(allow_soft_placement=True,
<span class='lineno'> 531</span>                                     log_device_placement=False)
<span class='lineno'> 532</span> 
<span class='lineno'> 533</span>     # Start the training.
<span class='lineno'> 534</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.slim', title='?'>slim</a>.learning.train(
<span class='lineno'> 535</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.train_tensor', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.train_tensor', title='?'>train_tensor</a>,
<span class='lineno'> 536</span>         logdir=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_logdir,
<span class='lineno'> 537</span>         log_every_n_steps=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.log_steps,
<span class='lineno'> 538</span>         master=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.master,
<span class='lineno'> 539</span>         number_of_steps=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.training_number_of_steps,
<span class='lineno'> 540</span>         is_chief=(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.task == 0),
<span class='lineno'> 541</span>         session_config=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.session_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.session_config', title='?'>session_config</a>,
<span class='lineno'> 542</span>         startup_delay_steps=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.startup_delay_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.startup_delay_steps', title='?'>startup_delay_steps</a>,
<span class='lineno'> 543</span>         init_fn=train_utils.get_model_init_fn(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_logdir,
<span class='lineno'> 544</span>                                               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.tf_initial_checkpoint,
<span class='lineno'> 545</span>                                               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.initialize_last_layer,
<span class='lineno'> 546</span>                                               <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.last_layers', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.last_layers', title='?'>last_layers</a>,
<span class='lineno'> 547</span>                                               ignore_missing_vars=True),
<span class='lineno'> 548</span>         summary_op=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summary_op', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.main.summary_op', title='?'>summary_op</a>,
<span class='lineno'> 549</span>         save_summaries_secs=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.save_summaries_secs,
<span class='lineno'> 550</span>         save_interval_secs=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.save_interval_secs)
<span class='lineno'> 551</span> 
<span class='lineno'> 552</span> 
<span class='lineno'> 553</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples', title='(?, None, ?, ?, bool, bool) -> (?, ?) / (?, ?, ?, ?, ?, ?) -> (?, ?)'>_get_dataset_and_samples</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.config', title='?'>config</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_crop_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_crop_size', title='None'>train_crop_size</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset_name', title='?'>dataset_name</a>,
<span class='lineno'> 554</span>                              <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset_dir', title='?'>dataset_dir</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.first_frame_finetuning', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.first_frame_finetuning', title='bool'>first_frame_finetuning</a>,
<span class='lineno'> 555</span>                              <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.three_frame_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.three_frame_dataset', title='bool'>three_frame_dataset</a>):
<span class='lineno'> 556</span>   &quot;&quot;&quot;Creates dataset object and samples dict of tensor.
<span class='lineno'> 557</span> 
<span class='lineno'> 558</span>   Args:
<span class='lineno'> 559</span>     config: A DeploymentConfig.
<span class='lineno'> 560</span>     train_crop_size: Integer, the crop size used for training.
<span class='lineno'> 561</span>     dataset_name: String, the name of the dataset.
<span class='lineno'> 562</span>     dataset_dir: String, the directory of the dataset.
<span class='lineno'> 563</span>     first_frame_finetuning: Boolean, whether the used dataset is a dataset
<span class='lineno'> 564</span>       for first frame fine-tuning.
<span class='lineno'> 565</span>     three_frame_dataset: Boolean, whether the dataset has exactly three frames
<span class='lineno'> 566</span>       per video of which the first is to be used as reference and the two
<span class='lineno'> 567</span>       others are consecutive frames to be used as query frames.
<span class='lineno'> 568</span> 
<span class='lineno'> 569</span>   Returns:
<span class='lineno'> 570</span>     dataset: An instance of slim Dataset.
<span class='lineno'> 571</span>     samples: A dictionary of tensors for semantic segmentation.
<span class='lineno'> 572</span>   &quot;&quot;&quot;
<span class='lineno'> 573</span> 
<span class='lineno'> 574</span>   # Split the batch across GPUs.
<span class='lineno'> 575</span>   assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_batch_size % <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.config', title='?'>config</a>.num_clones == 0, (
<span class='lineno'> 576</span>       &#39;Training batch size not divisble by number of clones (GPUs).&#39;)
<span class='lineno'> 577</span> 
<span class='lineno'> 578</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.clone_batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.clone_batch_size', title='?'>clone_batch_size</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_batch_size / <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.config', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.config', title='?'>config</a>.num_clones
<span class='lineno'> 579</span> 
<span class='lineno'> 580</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.first_frame_finetuning', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.first_frame_finetuning', title='bool'>first_frame_finetuning</a>:
<span class='lineno'> 581</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_split', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_split', title='str'>train_split</a> = &#39;val&#39;
<span class='lineno'> 582</span>   else:
<span class='lineno'> 583</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_split', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_split', title='?'>train_split</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_split
<span class='lineno'> 584</span> 
<span class='lineno'> 585</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.data_type', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.data_type', title='str'>data_type</a> = &#39;tf_sequence_example&#39;
<span class='lineno'> 586</span>   # Get dataset-dependent information.
<span class='lineno'> 587</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset', title='?'>dataset</a> = video_dataset.get_dataset(
<span class='lineno'> 588</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset_name', title='?'>dataset_name</a>,
<span class='lineno'> 589</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_split', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_split', title='str'>train_split</a>,
<span class='lineno'> 590</span>       dataset_dir=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset_dir', title='?'>dataset_dir</a>,
<span class='lineno'> 591</span>       data_type=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.data_type', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.data_type', title='str'>data_type</a>)
<span class='lineno'> 592</span> 
<span class='lineno'> 593</span>   tf.gfile.MakeDirs(<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_logdir)
<span class='lineno'> 594</span>   tf.logging.info(&#39;Training on %s set&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_split', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_split', title='str'>train_split</a>)
<span class='lineno'> 595</span> 
<span class='lineno'> 596</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.samples', title='?'>samples</a> = video_input_generator.get(
<span class='lineno'> 597</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset', title='?'>dataset</a>,
<span class='lineno'> 598</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_num_frames_per_video,
<span class='lineno'> 599</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_crop_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.train_crop_size', title='None'>train_crop_size</a>,
<span class='lineno'> 600</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.clone_batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.clone_batch_size', title='?'>clone_batch_size</a>,
<span class='lineno'> 601</span>       num_readers=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.num_readers,
<span class='lineno'> 602</span>       num_threads=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.batch_num_threads,
<span class='lineno'> 603</span>       min_resize_value=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.min_resize_value,
<span class='lineno'> 604</span>       max_resize_value=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.max_resize_value,
<span class='lineno'> 605</span>       resize_factor=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.resize_factor,
<span class='lineno'> 606</span>       min_scale_factor=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.min_scale_factor,
<span class='lineno'> 607</span>       max_scale_factor=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.max_scale_factor,
<span class='lineno'> 608</span>       scale_factor_step_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.scale_factor_step_size,
<span class='lineno'> 609</span>       dataset_split=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.train_split,
<span class='lineno'> 610</span>       is_training=True,
<span class='lineno'> 611</span>       model_variant=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.model_variant,
<span class='lineno'> 612</span>       batch_capacity_factor=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.batch_capacity_factor,
<span class='lineno'> 613</span>       decoder_output_stride=common.parse_decoder_output_stride(),
<span class='lineno'> 614</span>       first_frame_finetuning=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.first_frame_finetuning', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.first_frame_finetuning', title='bool'>first_frame_finetuning</a>,
<span class='lineno'> 615</span>       sample_only_first_frame_for_finetuning=
<span class='lineno'> 616</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.sample_only_first_frame_for_finetuning,
<span class='lineno'> 617</span>       sample_adjacent_and_consistent_query_frames=
<span class='lineno'> 618</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.sample_adjacent_and_consistent_query_frames or
<span class='lineno'> 619</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.use_softmax_feedback,
<span class='lineno'> 620</span>       remap_labels_to_reference_frame=True,
<span class='lineno'> 621</span>       three_frame_dataset=<a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.three_frame_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.three_frame_dataset', title='bool'>three_frame_dataset</a>,
<span class='lineno'> 622</span>       add_prev_frame_label=not <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.FLAGS', title='?'>FLAGS</a>.also_attend_to_previous_frame
<span class='lineno'> 623</span>   )
<span class='lineno'> 624</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.dataset', title='?'>dataset</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.samples', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train._get_dataset_and_samples.samples', title='?'>samples</a>
<span class='lineno'> 625</span> 
<span class='lineno'> 626</span> 
<span class='lineno'> 627</span> if __name__ == &#39;__main__&#39;:
<span class='lineno'> 628</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.research.feelvos.train.flags', title='?'>flags</a>.mark_flag_as_required(&#39;train_logdir&#39;)
<span class='lineno'> 629</span>   tf.logging.set_verbosity(tf.logging.INFO)
<span class='lineno'> 630</span>   tf.app.run()
</pre></td></tr></table></body></html>