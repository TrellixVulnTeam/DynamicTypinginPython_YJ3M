<html>
<head>
<meta charset="utf-8">
<title>/home/xxm/Desktop/EMSE/dataset/models/official/nlp/bert/run_squad_helper.py</title>
<style type='text/css'>
body { color: #666666; }
a {
    text-decoration: none; color: #5AA2A7;
    border: solid 1px rgba(255,255,255,0);
}
a.active {
    background: -webkit-linear-gradient(top,rgba(255, 255, 200, 0.35) 0,rgba(255, 255, 200, 0.55) 100%);
    border: solid 1px #E5E600;
}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #cccccc;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px solid orange; padding-bottom: 1px}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted;

function highlight(xid)
{
    var elms = document.querySelectorAll('[xid="' + xid + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "active";
    }
    highlighted = xid;
}

function clearHighlight() {
    var elms = document.querySelectorAll('[xid="' + highlighted + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "";
    }
}

window.onload =
    function (e) {
        var tags = document.getElementsByTagName("A")
        for (var i = 0; i < tags.length; i++) {
            tags[i].onmouseover =
                function (e) {
                    clearHighlight();
                    var xid = e.toElement.getAttribute('xid');
                    highlight(xid);
                }
        }
    }</script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.define_common_squad_flags', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.define_common_squad_flags'>define_common_squad_flags</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS'>FLAGS</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn'>squad_loss_fn</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn'>get_loss_fn</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.RawResult', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.RawResult'>RawResult</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results'>get_raw_results</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn'>get_dataset_fn</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized'>predict_squad_customized</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad'>train_squad</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad'>prediction_output_squad</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files'>dump_to_files</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad'>predict_squad</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad'>eval_squad</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad'>export_squad</a></li></ul>
</td><td><pre><span class='lineno'>   1</span> # Copyright 2019 The TensorFlow Authors. All Rights Reserved.
<span class='lineno'>   2</span> #
<span class='lineno'>   3</span> # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
<span class='lineno'>   4</span> # you may not use this file except in compliance with the License.
<span class='lineno'>   5</span> # You may obtain a copy of the License at
<span class='lineno'>   6</span> #
<span class='lineno'>   7</span> #     http://www.apache.org/licenses/LICENSE-2.0
<span class='lineno'>   8</span> #
<span class='lineno'>   9</span> # Unless required by applicable law or agreed to in writing, software
<span class='lineno'>  10</span> # distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<span class='lineno'>  11</span> # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<span class='lineno'>  12</span> # See the License for the specific language governing permissions and
<span class='lineno'>  13</span> # limitations under the License.
<span class='lineno'>  14</span> # ==============================================================================
<span class='lineno'>  15</span> &quot;&quot;&quot;Library for running BERT family models on SQuAD 1.1/2.0 in TF 2.x.&quot;&quot;&quot;
<span class='lineno'>  16</span> from __future__ import absolute_import
<span class='lineno'>  17</span> from __future__ import division
<span class='lineno'>  18</span> from __future__ import print_function
<span class='lineno'>  19</span> 
<span class='lineno'>  20</span> import collections
<span class='lineno'>  21</span> import json
<span class='lineno'>  22</span> import os
<span class='lineno'>  23</span> from absl import flags
<span class='lineno'>  24</span> from absl import logging
<span class='lineno'>  25</span> import tensorflow as tf
<span class='lineno'>  26</span> from official.modeling import performance
<span class='lineno'>  27</span> from official.nlp import optimization
<span class='lineno'>  28</span> from official.nlp.bert import bert_models
<span class='lineno'>  29</span> from official.nlp.bert import common_flags
<span class='lineno'>  30</span> from official.nlp.bert import input_pipeline
<span class='lineno'>  31</span> from official.nlp.bert import model_saving_utils
<span class='lineno'>  32</span> from official.nlp.bert import model_training_utils
<span class='lineno'>  33</span> from official.nlp.bert import squad_evaluate_v1_1
<span class='lineno'>  34</span> from official.nlp.bert import squad_evaluate_v2_0
<span class='lineno'>  35</span> from official.nlp.data import squad_lib_sp
<span class='lineno'>  36</span> from official.utils.misc import keras_utils
<span class='lineno'>  37</span> 
<span class='lineno'>  38</span> 
<span class='lineno'>  39</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.define_common_squad_flags', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.define_common_squad_flags', title='() -> None'>define_common_squad_flags</a>():
<span class='lineno'>  40</span>   &quot;&quot;&quot;Defines common flags used by SQuAD tasks.&quot;&quot;&quot;
<span class='lineno'>  41</span>   flags.DEFINE_enum(
<span class='lineno'>  42</span>       &#39;mode&#39;, &#39;train_and_eval&#39;,
<span class='lineno'>  43</span>       [&#39;train_and_eval&#39;, &#39;train_and_predict&#39;,
<span class='lineno'>  44</span>        &#39;train&#39;, &#39;eval&#39;, &#39;predict&#39;, &#39;export_only&#39;],
<span class='lineno'>  45</span>       &#39;One of {&quot;train_and_eval&quot;, &quot;train_and_predict&quot;, &#39;
<span class='lineno'>  46</span>       &#39;&quot;train&quot;, &quot;eval&quot;, &quot;predict&quot;, &quot;export_only&quot;}. &#39;
<span class='lineno'>  47</span>       &#39;`train_and_eval`: train &amp; predict to json files &amp; compute eval metrics. &#39;
<span class='lineno'>  48</span>       &#39;`train_and_predict`: train &amp; predict to json files. &#39;
<span class='lineno'>  49</span>       &#39;`train`: only trains the model. &#39;
<span class='lineno'>  50</span>       &#39;`eval`: predict answers from squad json file &amp; compute eval metrics. &#39;
<span class='lineno'>  51</span>       &#39;`predict`: predict answers from the squad json file. &#39;
<span class='lineno'>  52</span>       &#39;`export_only`: will take the latest checkpoint inside &#39;
<span class='lineno'>  53</span>       &#39;model_dir and export a `SavedModel`.&#39;)
<span class='lineno'>  54</span>   flags.DEFINE_string(&#39;train_data_path&#39;, &#39;&#39;,
<span class='lineno'>  55</span>                       &#39;Training data path with train tfrecords.&#39;)
<span class='lineno'>  56</span>   flags.DEFINE_string(
<span class='lineno'>  57</span>       &#39;input_meta_data_path&#39;, None,
<span class='lineno'>  58</span>       &#39;Path to file that contains meta data about input &#39;
<span class='lineno'>  59</span>       &#39;to be used for training and evaluation.&#39;)
<span class='lineno'>  60</span>   # Model training specific flags.
<span class='lineno'>  61</span>   flags.DEFINE_integer(&#39;train_batch_size&#39;, 32, &#39;Total batch size for training.&#39;)
<span class='lineno'>  62</span>   # Predict processing related.
<span class='lineno'>  63</span>   flags.DEFINE_string(&#39;predict_file&#39;, None,
<span class='lineno'>  64</span>                       &#39;Prediction data path with train tfrecords.&#39;)
<span class='lineno'>  65</span>   flags.DEFINE_bool(
<span class='lineno'>  66</span>       &#39;do_lower_case&#39;, True,
<span class='lineno'>  67</span>       &#39;Whether to lower case the input text. Should be True for uncased &#39;
<span class='lineno'>  68</span>       &#39;models and False for cased models.&#39;)
<span class='lineno'>  69</span>   flags.DEFINE_float(
<span class='lineno'>  70</span>       &#39;null_score_diff_threshold&#39;, 0.0,
<span class='lineno'>  71</span>       &#39;If null_score - best_non_null is greater than the threshold, &#39;
<span class='lineno'>  72</span>       &#39;predict null. This is only used for SQuAD v2.&#39;)
<span class='lineno'>  73</span>   flags.DEFINE_bool(
<span class='lineno'>  74</span>       &#39;verbose_logging&#39;, False,
<span class='lineno'>  75</span>       &#39;If true, all of the warnings related to data processing will be &#39;
<span class='lineno'>  76</span>       &#39;printed. A number of warnings are expected for a normal SQuAD &#39;
<span class='lineno'>  77</span>       &#39;evaluation.&#39;)
<span class='lineno'>  78</span>   flags.DEFINE_integer(&#39;predict_batch_size&#39;, 8,
<span class='lineno'>  79</span>                        &#39;Total batch size for prediction.&#39;)
<span class='lineno'>  80</span>   flags.DEFINE_integer(
<span class='lineno'>  81</span>       &#39;n_best_size&#39;, 20,
<span class='lineno'>  82</span>       &#39;The total number of n-best predictions to generate in the &#39;
<span class='lineno'>  83</span>       &#39;nbest_predictions.json output file.&#39;)
<span class='lineno'>  84</span>   flags.DEFINE_integer(
<span class='lineno'>  85</span>       &#39;max_answer_length&#39;, 30,
<span class='lineno'>  86</span>       &#39;The maximum length of an answer that can be generated. This is needed &#39;
<span class='lineno'>  87</span>       &#39;because the start and end predictions are not conditioned on one &#39;
<span class='lineno'>  88</span>       &#39;another.&#39;)
<span class='lineno'>  89</span> 
<span class='lineno'>  90</span>   common_flags.define_common_bert_flags()
<span class='lineno'>  91</span> 
<span class='lineno'>  92</span> 
<span class='lineno'>  93</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a> = flags.FLAGS
<span class='lineno'>  94</span> 
<span class='lineno'>  95</span> 
<span class='lineno'>  96</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn', title='(?, ?, ?, ?) -> int'>squad_loss_fn</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_positions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_positions', title='?'>start_positions</a>,
<span class='lineno'>  97</span>                   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_positions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_positions', title='?'>end_positions</a>,
<span class='lineno'>  98</span>                   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_logits', title='?'>start_logits</a>,
<span class='lineno'>  99</span>                   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_logits', title='?'>end_logits</a>):
<span class='lineno'> 100</span>   &quot;&quot;&quot;Returns sparse categorical crossentropy for start/end logits.&quot;&quot;&quot;
<span class='lineno'> 101</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_loss', title='?'>start_loss</a> = tf.keras.losses.sparse_categorical_crossentropy(
<span class='lineno'> 102</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_positions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_positions', title='?'>start_positions</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_logits', title='?'>start_logits</a>, from_logits=True)
<span class='lineno'> 103</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_loss', title='?'>end_loss</a> = tf.keras.losses.sparse_categorical_crossentropy(
<span class='lineno'> 104</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_positions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_positions', title='?'>end_positions</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_logits', title='?'>end_logits</a>, from_logits=True)
<span class='lineno'> 105</span> 
<span class='lineno'> 106</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.total_loss', title='int'>total_loss</a> = (tf.reduce_mean(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.start_loss', title='?'>start_loss</a>) + tf.reduce_mean(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.end_loss', title='?'>end_loss</a>)) / 2
<span class='lineno'> 107</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.total_loss', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn.total_loss', title='int'>total_loss</a>
<span class='lineno'> 108</span> 
<span class='lineno'> 109</span> 
<span class='lineno'> 110</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn', title='() -> (?, ?) -> int'>get_loss_fn</a>():
<span class='lineno'> 111</span>   &quot;&quot;&quot;Gets a loss function for squad task.&quot;&quot;&quot;
<span class='lineno'> 112</span> 
<span class='lineno'> 113</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn', title='(?, ?) -> int'>_loss_fn</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.labels', title='?'>labels</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.model_outputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.model_outputs', title='?'>model_outputs</a>):
<span class='lineno'> 114</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.start_positions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.start_positions', title='?'>start_positions</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.labels', title='?'>labels</a>[&#39;start_positions&#39;]
<span class='lineno'> 115</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.end_positions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.end_positions', title='?'>end_positions</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.labels', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.labels', title='?'>labels</a>[&#39;end_positions&#39;]
<span class='lineno'> 116</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.start_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.start_logits', title='?'>start_logits</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.end_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.end_logits', title='?'>end_logits</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.model_outputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.model_outputs', title='?'>model_outputs</a>
<span class='lineno'> 117</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.squad_loss_fn', title='(?, ?, ?, ?) -> int'>squad_loss_fn</a>(
<span class='lineno'> 118</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.start_positions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.start_positions', title='?'>start_positions</a>,
<span class='lineno'> 119</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.end_positions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.end_positions', title='?'>end_positions</a>,
<span class='lineno'> 120</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.start_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.start_logits', title='?'>start_logits</a>,
<span class='lineno'> 121</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.end_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn.end_logits', title='?'>end_logits</a>)
<span class='lineno'> 122</span> 
<span class='lineno'> 123</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn._loss_fn', title='(?, ?) -> int'>_loss_fn</a>
<span class='lineno'> 124</span> 
<span class='lineno'> 125</span> 
<span class='lineno'> 126</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.RawResult', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.RawResult', title='<(namedtuple)>'>RawResult</a> = collections.namedtuple(&#39;RawResult&#39;,
<span class='lineno'> 127</span>                                    [&#39;unique_id&#39;, &#39;start_logits&#39;, &#39;end_logits&#39;])
<span class='lineno'> 128</span> 
<span class='lineno'> 129</span> 
<span class='lineno'> 130</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results', title='None -> None / ? -> None'>get_raw_results</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.predictions', title='None'>predictions</a>):
<span class='lineno'> 131</span>   &quot;&quot;&quot;Converts multi-replica predictions to RawResult.&quot;&quot;&quot;
<span class='lineno'> 132</span>   for unique_ids, start_logits, end_logits in zip(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.predictions', title='None'>predictions</a>[&#39;unique_ids&#39;],
<span class='lineno'> 133</span>                                                   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.predictions', title='None'>predictions</a>[&#39;start_logits&#39;],
<span class='lineno'> 134</span>                                                   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.predictions', title='None'>predictions</a>[&#39;end_logits&#39;]):
<span class='lineno'> 135</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.values', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.values', title='?'>values</a> in zip(unique_ids.numpy(), start_logits.numpy(),
<span class='lineno'> 136</span>                       end_logits.numpy()):
<span class='lineno'> 137</span>       yield <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.RawResult', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.RawResult', title='<(namedtuple)>'>RawResult</a>(
<span class='lineno'> 138</span>           unique_id=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.values', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.values', title='?'>values</a>[0],
<span class='lineno'> 139</span>           start_logits=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.values', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.values', title='?'>values</a>[1].tolist(),
<span class='lineno'> 140</span>           end_logits=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.values', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results.values', title='?'>values</a>[2].tolist())
<span class='lineno'> 141</span> 
<span class='lineno'> 142</span> 
<span class='lineno'> 143</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn', title='(?, ?, ?, ?) -> ? -> ? / (?, ?, ?, bool) -> None -> None'>get_dataset_fn</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.input_file_pattern', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.input_file_pattern', title='?'>input_file_pattern</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.max_seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.max_seq_length', title='?'>max_seq_length</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.global_batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.global_batch_size', title='?'>global_batch_size</a>,
<span class='lineno'> 144</span>                    <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.is_training', title='bool'>is_training</a>):
<span class='lineno'> 145</span>   &quot;&quot;&quot;Gets a closure to create a dataset..&quot;&quot;&quot;
<span class='lineno'> 146</span> 
<span class='lineno'> 147</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn', title='None -> None'>_dataset_fn</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.ctx', title='None'>ctx</a>=None):
<span class='lineno'> 148</span>     &quot;&quot;&quot;Returns tf.data.Dataset for distributed BERT pretraining.&quot;&quot;&quot;
<span class='lineno'> 149</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.batch_size', title='?'>batch_size</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.ctx', title='None'>ctx</a>.get_per_replica_batch_size(
<span class='lineno'> 150</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.global_batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.global_batch_size', title='?'>global_batch_size</a>) if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.ctx', title='None'>ctx</a> else <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.global_batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.global_batch_size', title='?'>global_batch_size</a>
<span class='lineno'> 151</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.dataset', title='?'>dataset</a> = input_pipeline.create_squad_dataset(
<span class='lineno'> 152</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.input_file_pattern', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.input_file_pattern', title='?'>input_file_pattern</a>,
<span class='lineno'> 153</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.max_seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.max_seq_length', title='?'>max_seq_length</a>,
<span class='lineno'> 154</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.batch_size', title='?'>batch_size</a>,
<span class='lineno'> 155</span>         is_training=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn.is_training', title='bool'>is_training</a>,
<span class='lineno'> 156</span>         input_pipeline_context=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.ctx', title='None'>ctx</a>)
<span class='lineno'> 157</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn.dataset', title='?'>dataset</a>
<span class='lineno'> 158</span> 
<span class='lineno'> 159</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn._dataset_fn', title='None -> None'>_dataset_fn</a>
<span class='lineno'> 160</span> 
<span class='lineno'> 161</span> 
<span class='lineno'> 162</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized', title='(?, ?, ?, ?, ?, ?) -> [?] / (?, ?, ?, None, ?, int) -> [?] / (?, ?, ?, ?, ?, int) -> [?]'>predict_squad_customized</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.strategy', title='?'>strategy</a>,
<span class='lineno'> 163</span>                              <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.input_meta_data', title='?'>input_meta_data</a>,
<span class='lineno'> 164</span>                              <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.bert_config', title='?'>bert_config</a>,
<span class='lineno'> 165</span>                              <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint_path', title='None'>checkpoint_path</a>,
<span class='lineno'> 166</span>                              <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_tfrecord_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_tfrecord_path', title='?'>predict_tfrecord_path</a>,
<span class='lineno'> 167</span>                              <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.num_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.num_steps', title='int'>num_steps</a>):
<span class='lineno'> 168</span>   &quot;&quot;&quot;Make predictions using a Bert-based squad model.&quot;&quot;&quot;
<span class='lineno'> 169</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_dataset_fn', title='None -> None'>predict_dataset_fn</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn', title='(?, ?, ?, ?) -> ? -> ? / (?, ?, ?, bool) -> None -> None'>get_dataset_fn</a>(
<span class='lineno'> 170</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_tfrecord_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_tfrecord_path', title='?'>predict_tfrecord_path</a>,
<span class='lineno'> 171</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.input_meta_data', title='?'>input_meta_data</a>[&#39;max_seq_length&#39;],
<span class='lineno'> 172</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.predict_batch_size,
<span class='lineno'> 173</span>       is_training=False)
<span class='lineno'> 174</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_iterator', title='?'>predict_iterator</a> = iter(
<span class='lineno'> 175</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.strategy', title='?'>strategy</a>.experimental_distribute_datasets_from_function(
<span class='lineno'> 176</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_dataset_fn', title='None -> None'>predict_dataset_fn</a>))
<span class='lineno'> 177</span> 
<span class='lineno'> 178</span>   with <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.strategy', title='?'>strategy</a>.scope():
<span class='lineno'> 179</span>     # Prediction always uses float32, even if training uses mixed precision.
<span class='lineno'> 180</span>     tf.keras.mixed_precision.experimental.set_policy(&#39;float32&#39;)
<span class='lineno'> 181</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.squad_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.squad_model', title='?'>squad_model</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized._', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized._', title='?'>_</a> = bert_models.squad_model(
<span class='lineno'> 182</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.bert_config', title='?'>bert_config</a>,
<span class='lineno'> 183</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.input_meta_data', title='?'>input_meta_data</a>[&#39;max_seq_length&#39;],
<span class='lineno'> 184</span>         hub_module_url=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.hub_module_url)
<span class='lineno'> 185</span> 
<span class='lineno'> 186</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint_path', title='None'>checkpoint_path</a> is None:
<span class='lineno'> 187</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint_path', title='?'>checkpoint_path</a> = tf.train.latest_checkpoint(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.model_dir)
<span class='lineno'> 188</span>   logging.info(&#39;Restoring checkpoints from %s&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint_path', title='None'>checkpoint_path</a>)
<span class='lineno'> 189</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint', title='?'>checkpoint</a> = tf.train.Checkpoint(model=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.squad_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.squad_model', title='?'>squad_model</a>)
<span class='lineno'> 190</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint', title='?'>checkpoint</a>.restore(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.checkpoint_path', title='None'>checkpoint_path</a>).expect_partial()
<span class='lineno'> 191</span> 
<span class='lineno'> 192</span>   @tf.function
<span class='lineno'> 193</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step', title='? -> None'>predict_step</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step.iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step.iterator', title='?'>iterator</a>):
<span class='lineno'> 194</span>     &quot;&quot;&quot;Predicts on distributed devices.&quot;&quot;&quot;
<span class='lineno'> 195</span> 
<span class='lineno'> 196</span>     def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step', title='? -> dict'>_replicated_step</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.inputs', title='?'>inputs</a>):
<span class='lineno'> 197</span>       &quot;&quot;&quot;Replicated prediction calculation.&quot;&quot;&quot;
<span class='lineno'> 198</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.x', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.x', title='?'>x</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step._', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step._', title='?'>_</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.inputs', title='?'>inputs</a>
<span class='lineno'> 199</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.unique_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.unique_ids', title='?'>unique_ids</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.x', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.x', title='?'>x</a>.pop(&#39;unique_ids&#39;)
<span class='lineno'> 200</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.start_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.start_logits', title='?'>start_logits</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.end_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.end_logits', title='?'>end_logits</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.squad_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.squad_model', title='?'>squad_model</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.x', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.x', title='?'>x</a>, training=False)
<span class='lineno'> 201</span>       return dict(
<span class='lineno'> 202</span>           unique_ids=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.unique_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.unique_ids', title='?'>unique_ids</a>,
<span class='lineno'> 203</span>           start_logits=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.start_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.start_logits', title='?'>start_logits</a>,
<span class='lineno'> 204</span>           end_logits=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.end_logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step.end_logits', title='?'>end_logits</a>)
<span class='lineno'> 205</span> 
<span class='lineno'> 206</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step.outputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step.outputs', title='?'>outputs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.strategy', title='?'>strategy</a>.run(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step._replicated_step', title='? -> dict'>_replicated_step</a>, args=(next(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step.iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step.iterator', title='?'>iterator</a>),))
<span class='lineno'> 207</span>     return tf.nest.map_structure(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.strategy', title='?'>strategy</a>.experimental_local_results, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step.outputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step.outputs', title='?'>outputs</a>)
<span class='lineno'> 208</span> 
<span class='lineno'> 209</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.all_results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.all_results', title='[?]'>all_results</a> = []
<span class='lineno'> 210</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized._', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized._', title='int'>_</a> in range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.num_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.num_steps', title='int'>num_steps</a>):
<span class='lineno'> 211</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predictions', title='None'>predictions</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_step', title='? -> None'>predict_step</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predict_iterator', title='?'>predict_iterator</a>)
<span class='lineno'> 212</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.result', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.result', title='?'>result</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_raw_results', title='None -> None / ? -> None'>get_raw_results</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.predictions', title='None'>predictions</a>):
<span class='lineno'> 213</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.all_results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.all_results', title='[?]'>all_results</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.result', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.result', title='?'>result</a>)
<span class='lineno'> 214</span>     if len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.all_results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.all_results', title='[?]'>all_results</a>) % 100 == 0:
<span class='lineno'> 215</span>       logging.info(&#39;Made predictions for %d records.&#39;, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.all_results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.all_results', title='[?]'>all_results</a>))
<span class='lineno'> 216</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.all_results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized.all_results', title='[?]'>all_results</a>
<span class='lineno'> 217</span> 
<span class='lineno'> 218</span> 
<span class='lineno'> 219</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad', title='(?, ?, ?, None, bool, None, None) -> None'>train_squad</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.strategy', title='?'>strategy</a>,
<span class='lineno'> 220</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.input_meta_data', title='?'>input_meta_data</a>,
<span class='lineno'> 221</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.bert_config', title='?'>bert_config</a>,
<span class='lineno'> 222</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.custom_callbacks', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.custom_callbacks', title='None'>custom_callbacks</a>=None,
<span class='lineno'> 223</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.run_eagerly', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.run_eagerly', title='bool'>run_eagerly</a>=False,
<span class='lineno'> 224</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.init_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.init_checkpoint', title='None'>init_checkpoint</a>=None,
<span class='lineno'> 225</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.sub_model_export_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.sub_model_export_name', title='None'>sub_model_export_name</a>=None):
<span class='lineno'> 226</span>   &quot;&quot;&quot;Run bert squad training.&quot;&quot;&quot;
<span class='lineno'> 227</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.strategy', title='?'>strategy</a>:
<span class='lineno'> 228</span>     logging.info(&#39;Training using customized training loop with distribution&#39;
<span class='lineno'> 229</span>                  &#39; strategy.&#39;)
<span class='lineno'> 230</span>   # Enables XLA in Session Config. Should not be set for TPU.
<span class='lineno'> 231</span>   keras_utils.set_session_config(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.enable_xla)
<span class='lineno'> 232</span>   performance.set_mixed_precision_policy(common_flags.dtype())
<span class='lineno'> 233</span> 
<span class='lineno'> 234</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.epochs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.epochs', title='?'>epochs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.num_train_epochs
<span class='lineno'> 235</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.num_train_examples', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.num_train_examples', title='?'>num_train_examples</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.input_meta_data', title='?'>input_meta_data</a>[&#39;train_data_size&#39;]
<span class='lineno'> 236</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.max_seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.max_seq_length', title='?'>max_seq_length</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.input_meta_data', title='?'>input_meta_data</a>[&#39;max_seq_length&#39;]
<span class='lineno'> 237</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.steps_per_epoch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.steps_per_epoch', title='int'>steps_per_epoch</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.num_train_examples', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.num_train_examples', title='?'>num_train_examples</a> / <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.train_batch_size)
<span class='lineno'> 238</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.warmup_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.warmup_steps', title='int'>warmup_steps</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.epochs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.epochs', title='?'>epochs</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.num_train_examples', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.num_train_examples', title='?'>num_train_examples</a> * 0.1 / <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.train_batch_size)
<span class='lineno'> 239</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.train_input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.train_input_fn', title='None -> None'>train_input_fn</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_dataset_fn', title='(?, ?, ?, ?) -> ? -> ? / (?, ?, ?, bool) -> None -> None'>get_dataset_fn</a>(
<span class='lineno'> 240</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.train_data_path,
<span class='lineno'> 241</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.max_seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.max_seq_length', title='?'>max_seq_length</a>,
<span class='lineno'> 242</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.train_batch_size,
<span class='lineno'> 243</span>       is_training=True)
<span class='lineno'> 244</span> 
<span class='lineno'> 245</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model', title='() -> (?, ?)'>_get_squad_model</a>():
<span class='lineno'> 246</span>     &quot;&quot;&quot;Get Squad model and optimizer.&quot;&quot;&quot;
<span class='lineno'> 247</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.squad_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.squad_model', title='?'>squad_model</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.core_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.core_model', title='?'>core_model</a> = bert_models.squad_model(
<span class='lineno'> 248</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.bert_config', title='?'>bert_config</a>,
<span class='lineno'> 249</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.max_seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.max_seq_length', title='?'>max_seq_length</a>,
<span class='lineno'> 250</span>         hub_module_url=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.hub_module_url,
<span class='lineno'> 251</span>         hub_module_trainable=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.hub_module_trainable)
<span class='lineno'> 252</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.optimizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.optimizer', title='?'>optimizer</a> = optimization.create_optimizer(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.learning_rate,
<span class='lineno'> 253</span>                                               <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.steps_per_epoch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.steps_per_epoch', title='int'>steps_per_epoch</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.epochs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.epochs', title='?'>epochs</a>,
<span class='lineno'> 254</span>                                               <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.warmup_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.warmup_steps', title='int'>warmup_steps</a>,
<span class='lineno'> 255</span>                                               <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.end_lr,
<span class='lineno'> 256</span>                                               <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.optimizer_type)
<span class='lineno'> 257</span> 
<span class='lineno'> 258</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.squad_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.squad_model', title='?'>squad_model</a>.optimizer = performance.configure_optimizer(
<span class='lineno'> 259</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.optimizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.optimizer', title='?'>optimizer</a>,
<span class='lineno'> 260</span>         use_float16=common_flags.use_float16(),
<span class='lineno'> 261</span>         use_graph_rewrite=common_flags.use_graph_rewrite())
<span class='lineno'> 262</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.squad_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.squad_model', title='?'>squad_model</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.core_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model.core_model', title='?'>core_model</a>
<span class='lineno'> 263</span> 
<span class='lineno'> 264</span>   # If explicit_allreduce = True, apply_gradients() no longer implicitly
<span class='lineno'> 265</span>   # allreduce gradients, users manually allreduce gradient and pass the
<span class='lineno'> 266</span>   # allreduced grads_and_vars to apply_gradients(). clip_by_global_norm will be
<span class='lineno'> 267</span>   # applied to allreduced gradients.
<span class='lineno'> 268</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback', title='? -> [?]'>clip_by_global_norm_callback</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.grads_and_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.grads_and_vars', title='?'>grads_and_vars</a>):
<span class='lineno'> 269</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.grads', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.grads', title='?'>grads</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.variables', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.variables', title='?'>variables</a> = zip(*<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.grads_and_vars', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.grads_and_vars', title='?'>grads_and_vars</a>)
<span class='lineno'> 270</span>     (<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.clipped_grads', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.clipped_grads', title='?'>clipped_grads</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback._', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback._', title='?'>_</a>) = tf.clip_by_global_norm(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.grads', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.grads', title='?'>grads</a>, clip_norm=1.0)
<span class='lineno'> 271</span>     return zip(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.clipped_grads', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.clipped_grads', title='?'>clipped_grads</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.variables', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback.variables', title='?'>variables</a>)
<span class='lineno'> 272</span> 
<span class='lineno'> 273</span>   model_training_utils.run_customized_training_loop(
<span class='lineno'> 274</span>       strategy=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.strategy', title='?'>strategy</a>,
<span class='lineno'> 275</span>       model_fn=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad._get_squad_model', title='() -> (?, ?)'>_get_squad_model</a>,
<span class='lineno'> 276</span>       loss_fn=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.get_loss_fn', title='() -> (?, ?) -> int'>get_loss_fn</a>(),
<span class='lineno'> 277</span>       model_dir=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.model_dir,
<span class='lineno'> 278</span>       steps_per_epoch=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.steps_per_epoch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.steps_per_epoch', title='int'>steps_per_epoch</a>,
<span class='lineno'> 279</span>       steps_per_loop=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.steps_per_loop,
<span class='lineno'> 280</span>       epochs=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.epochs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.epochs', title='?'>epochs</a>,
<span class='lineno'> 281</span>       train_input_fn=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.train_input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.train_input_fn', title='None -> None'>train_input_fn</a>,
<span class='lineno'> 282</span>       init_checkpoint=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.init_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.init_checkpoint', title='None'>init_checkpoint</a> or <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.init_checkpoint,
<span class='lineno'> 283</span>       sub_model_export_name=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.sub_model_export_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.sub_model_export_name', title='None'>sub_model_export_name</a>,
<span class='lineno'> 284</span>       run_eagerly=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.run_eagerly', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.run_eagerly', title='bool'>run_eagerly</a>,
<span class='lineno'> 285</span>       custom_callbacks=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.custom_callbacks', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.custom_callbacks', title='None'>custom_callbacks</a>,
<span class='lineno'> 286</span>       explicit_allreduce=False,
<span class='lineno'> 287</span>       post_allreduce_callbacks=[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.train_squad.clip_by_global_norm_callback', title='? -> [?]'>clip_by_global_norm_callback</a>])
<span class='lineno'> 288</span> 
<span class='lineno'> 289</span> 
<span class='lineno'> 290</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad', title='(?, ?, ?, ?, ?, ?) -> (?, ?, ?) / (?, ?, ?, ?, ?, None) -> (?, ?, ?)'>prediction_output_squad</a>(
<span class='lineno'> 291</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.strategy', title='?'>strategy</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', title='?'>input_meta_data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.tokenizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.tokenizer', title='?'>tokenizer</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.bert_config', title='?'>bert_config</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', title='?'>squad_lib</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.checkpoint', title='None'>checkpoint</a>):
<span class='lineno'> 292</span>   &quot;&quot;&quot;Makes predictions for a squad dataset.&quot;&quot;&quot;
<span class='lineno'> 293</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.doc_stride', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.doc_stride', title='?'>doc_stride</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', title='?'>input_meta_data</a>[&#39;doc_stride&#39;]
<span class='lineno'> 294</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.max_query_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.max_query_length', title='?'>max_query_length</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', title='?'>input_meta_data</a>[&#39;max_query_length&#39;]
<span class='lineno'> 295</span>   # Whether data should be in Ver 2.0 format.
<span class='lineno'> 296</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.version_2_with_negative', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.version_2_with_negative', title='?'>version_2_with_negative</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', title='?'>input_meta_data</a>.get(&#39;version_2_with_negative&#39;,
<span class='lineno'> 297</span>                                                 False)
<span class='lineno'> 298</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_examples', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_examples', title='?'>eval_examples</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', title='?'>squad_lib</a>.read_squad_examples(
<span class='lineno'> 299</span>       input_file=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.predict_file,
<span class='lineno'> 300</span>       is_training=False,
<span class='lineno'> 301</span>       version_2_with_negative=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.version_2_with_negative', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.version_2_with_negative', title='?'>version_2_with_negative</a>)
<span class='lineno'> 302</span> 
<span class='lineno'> 303</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_writer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_writer', title='?'>eval_writer</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', title='?'>squad_lib</a>.FeatureWriter(
<span class='lineno'> 304</span>       filename=os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.model_dir, &#39;eval.tf_record&#39;),
<span class='lineno'> 305</span>       is_training=False)
<span class='lineno'> 306</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_features', title='[?]'>eval_features</a> = []
<span class='lineno'> 307</span> 
<span class='lineno'> 308</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature', title='(?, ?) -> None'>_append_feature</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature.feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature.feature', title='?'>feature</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature.is_padding', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature.is_padding', title='?'>is_padding</a>):
<span class='lineno'> 309</span>     if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature.is_padding', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature.is_padding', title='?'>is_padding</a>:
<span class='lineno'> 310</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_features', title='[?]'>eval_features</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature.feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature.feature', title='?'>feature</a>)
<span class='lineno'> 311</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_writer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_writer', title='?'>eval_writer</a>.process_feature(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature.feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature.feature', title='?'>feature</a>)
<span class='lineno'> 312</span> 
<span class='lineno'> 313</span>   # TPU requires a fixed batch size for all batches, therefore the number
<span class='lineno'> 314</span>   # of examples must be a multiple of the batch size, or else examples
<span class='lineno'> 315</span>   # will get dropped. So we pad with fake examples which are ignored
<span class='lineno'> 316</span>   # later on.
<span class='lineno'> 317</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.kwargs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.kwargs', title='dict'>kwargs</a> = dict(
<span class='lineno'> 318</span>       examples=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_examples', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_examples', title='?'>eval_examples</a>,
<span class='lineno'> 319</span>       tokenizer=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.tokenizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.tokenizer', title='?'>tokenizer</a>,
<span class='lineno'> 320</span>       max_seq_length=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', title='?'>input_meta_data</a>[&#39;max_seq_length&#39;],
<span class='lineno'> 321</span>       doc_stride=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.doc_stride', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.doc_stride', title='?'>doc_stride</a>,
<span class='lineno'> 322</span>       max_query_length=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.max_query_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.max_query_length', title='?'>max_query_length</a>,
<span class='lineno'> 323</span>       is_training=False,
<span class='lineno'> 324</span>       output_fn=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad._append_feature', title='(?, ?) -> None'>_append_feature</a>,
<span class='lineno'> 325</span>       batch_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.predict_batch_size)
<span class='lineno'> 326</span> 
<span class='lineno'> 327</span>   # squad_lib_sp requires one more argument &#39;do_lower_case&#39;.
<span class='lineno'> 328</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', title='?'>squad_lib</a> == squad_lib_sp:
<span class='lineno'> 329</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.kwargs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.kwargs', title='dict'>kwargs</a>[&#39;do_lower_case&#39;] = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.do_lower_case
<span class='lineno'> 330</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.dataset_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.dataset_size', title='?'>dataset_size</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', title='?'>squad_lib</a>.convert_examples_to_features(**kwargs)
<span class='lineno'> 331</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_writer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_writer', title='?'>eval_writer</a>.close()
<span class='lineno'> 332</span> 
<span class='lineno'> 333</span>   logging.info(&#39;***** Running predictions *****&#39;)
<span class='lineno'> 334</span>   logging.info(&#39;  Num orig examples = %d&#39;, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_examples', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_examples', title='?'>eval_examples</a>))
<span class='lineno'> 335</span>   logging.info(&#39;  Num split examples = %d&#39;, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_features', title='[?]'>eval_features</a>))
<span class='lineno'> 336</span>   logging.info(&#39;  Batch size = %d&#39;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.predict_batch_size)
<span class='lineno'> 337</span> 
<span class='lineno'> 338</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.num_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.num_steps', title='int'>num_steps</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.dataset_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.dataset_size', title='?'>dataset_size</a> / <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.predict_batch_size)
<span class='lineno'> 339</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_results', title='[?]'>all_results</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad_customized', title='(?, ?, ?, ?, ?, ?) -> [?] / (?, ?, ?, None, ?, int) -> [?] / (?, ?, ?, ?, ?, int) -> [?]'>predict_squad_customized</a>(
<span class='lineno'> 340</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.strategy', title='?'>strategy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.input_meta_data', title='?'>input_meta_data</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.bert_config', title='?'>bert_config</a>,
<span class='lineno'> 341</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.checkpoint', title='None'>checkpoint</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_writer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_writer', title='?'>eval_writer</a>.filename, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.num_steps', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.num_steps', title='int'>num_steps</a>)
<span class='lineno'> 342</span> 
<span class='lineno'> 343</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_predictions', title='?'>all_predictions</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_nbest_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_nbest_json', title='?'>all_nbest_json</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.scores_diff_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.scores_diff_json', title='?'>scores_diff_json</a> = (
<span class='lineno'> 344</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.squad_lib', title='?'>squad_lib</a>.postprocess_output(
<span class='lineno'> 345</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_examples', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_examples', title='?'>eval_examples</a>,
<span class='lineno'> 346</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.eval_features', title='[?]'>eval_features</a>,
<span class='lineno'> 347</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_results', title='[?]'>all_results</a>,
<span class='lineno'> 348</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.n_best_size,
<span class='lineno'> 349</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.max_answer_length,
<span class='lineno'> 350</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.do_lower_case,
<span class='lineno'> 351</span>           version_2_with_negative=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.version_2_with_negative', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.version_2_with_negative', title='?'>version_2_with_negative</a>,
<span class='lineno'> 352</span>           null_score_diff_threshold=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.null_score_diff_threshold,
<span class='lineno'> 353</span>           verbose=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.verbose_logging))
<span class='lineno'> 354</span> 
<span class='lineno'> 355</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_predictions', title='?'>all_predictions</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_nbest_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.all_nbest_json', title='?'>all_nbest_json</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.scores_diff_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad.scores_diff_json', title='?'>scores_diff_json</a>
<span class='lineno'> 356</span> 
<span class='lineno'> 357</span> 
<span class='lineno'> 358</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files', title='(?, ?, ?, ?, ?) -> None'>dump_to_files</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.all_predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.all_predictions', title='?'>all_predictions</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.all_nbest_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.all_nbest_json', title='?'>all_nbest_json</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.scores_diff_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.scores_diff_json', title='?'>scores_diff_json</a>,
<span class='lineno'> 359</span>                   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.squad_lib', title='?'>squad_lib</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.version_2_with_negative', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.version_2_with_negative', title='?'>version_2_with_negative</a>):
<span class='lineno'> 360</span>   &quot;&quot;&quot;Save output to json files.&quot;&quot;&quot;
<span class='lineno'> 361</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_prediction_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_prediction_file', title='str'>output_prediction_file</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.model_dir, &#39;predictions.json&#39;)
<span class='lineno'> 362</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_nbest_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_nbest_file', title='str'>output_nbest_file</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.model_dir, &#39;nbest_predictions.json&#39;)
<span class='lineno'> 363</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_null_log_odds_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_null_log_odds_file', title='str'>output_null_log_odds_file</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.model_dir, &#39;null_odds.json&#39;)
<span class='lineno'> 364</span>   logging.info(&#39;Writing predictions to: %s&#39;, (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_prediction_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_prediction_file', title='str'>output_prediction_file</a>))
<span class='lineno'> 365</span>   logging.info(&#39;Writing nbest to: %s&#39;, (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_nbest_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_nbest_file', title='str'>output_nbest_file</a>))
<span class='lineno'> 366</span> 
<span class='lineno'> 367</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.squad_lib', title='?'>squad_lib</a>.write_to_json_files(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.all_predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.all_predictions', title='?'>all_predictions</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_prediction_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_prediction_file', title='str'>output_prediction_file</a>)
<span class='lineno'> 368</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.squad_lib', title='?'>squad_lib</a>.write_to_json_files(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.all_nbest_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.all_nbest_json', title='?'>all_nbest_json</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_nbest_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_nbest_file', title='str'>output_nbest_file</a>)
<span class='lineno'> 369</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.version_2_with_negative', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.version_2_with_negative', title='?'>version_2_with_negative</a>:
<span class='lineno'> 370</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.squad_lib', title='?'>squad_lib</a>.write_to_json_files(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.scores_diff_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.scores_diff_json', title='?'>scores_diff_json</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_null_log_odds_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files.output_null_log_odds_file', title='str'>output_null_log_odds_file</a>)
<span class='lineno'> 371</span> 
<span class='lineno'> 372</span> 
<span class='lineno'> 373</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad', title='(?, ?, ?, ?, ?, None) -> None'>predict_squad</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.strategy', title='?'>strategy</a>,
<span class='lineno'> 374</span>                   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.input_meta_data', title='?'>input_meta_data</a>,
<span class='lineno'> 375</span>                   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.tokenizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.tokenizer', title='?'>tokenizer</a>,
<span class='lineno'> 376</span>                   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.bert_config', title='?'>bert_config</a>,
<span class='lineno'> 377</span>                   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.squad_lib', title='?'>squad_lib</a>,
<span class='lineno'> 378</span>                   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.init_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.init_checkpoint', title='None'>init_checkpoint</a>=None):
<span class='lineno'> 379</span>   &quot;&quot;&quot;Get prediction results and evaluate them to hard drive.&quot;&quot;&quot;
<span class='lineno'> 380</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.init_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.init_checkpoint', title='None'>init_checkpoint</a> is None:
<span class='lineno'> 381</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.init_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.init_checkpoint', title='?'>init_checkpoint</a> = tf.train.latest_checkpoint(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.model_dir)
<span class='lineno'> 382</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.all_predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.all_predictions', title='?'>all_predictions</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.all_nbest_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.all_nbest_json', title='?'>all_nbest_json</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.scores_diff_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.scores_diff_json', title='?'>scores_diff_json</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad', title='(?, ?, ?, ?, ?, ?) -> (?, ?, ?) / (?, ?, ?, ?, ?, None) -> (?, ?, ?)'>prediction_output_squad</a>(
<span class='lineno'> 383</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.strategy', title='?'>strategy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.input_meta_data', title='?'>input_meta_data</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.tokenizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.tokenizer', title='?'>tokenizer</a>,
<span class='lineno'> 384</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.bert_config', title='?'>bert_config</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.squad_lib', title='?'>squad_lib</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.init_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.init_checkpoint', title='None'>init_checkpoint</a>)
<span class='lineno'> 385</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files', title='(?, ?, ?, ?, ?) -> None'>dump_to_files</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.all_predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.all_predictions', title='?'>all_predictions</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.all_nbest_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.all_nbest_json', title='?'>all_nbest_json</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.scores_diff_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.scores_diff_json', title='?'>scores_diff_json</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.squad_lib', title='?'>squad_lib</a>,
<span class='lineno'> 386</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.predict_squad.input_meta_data', title='?'>input_meta_data</a>.get(&#39;version_2_with_negative&#39;, False))
<span class='lineno'> 387</span> 
<span class='lineno'> 388</span> 
<span class='lineno'> 389</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad', title='(?, ?, ?, ?, ?, None) -> None'>eval_squad</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.strategy', title='?'>strategy</a>,
<span class='lineno'> 390</span>                <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.input_meta_data', title='?'>input_meta_data</a>,
<span class='lineno'> 391</span>                <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.tokenizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.tokenizer', title='?'>tokenizer</a>,
<span class='lineno'> 392</span>                <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.bert_config', title='?'>bert_config</a>,
<span class='lineno'> 393</span>                <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.squad_lib', title='?'>squad_lib</a>,
<span class='lineno'> 394</span>                <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.init_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.init_checkpoint', title='None'>init_checkpoint</a>=None):
<span class='lineno'> 395</span>   &quot;&quot;&quot;Get prediction results and evaluate them against ground truth.&quot;&quot;&quot;
<span class='lineno'> 396</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.init_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.init_checkpoint', title='None'>init_checkpoint</a> is None:
<span class='lineno'> 397</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.init_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.init_checkpoint', title='?'>init_checkpoint</a> = tf.train.latest_checkpoint(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.model_dir)
<span class='lineno'> 398</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_predictions', title='?'>all_predictions</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_nbest_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_nbest_json', title='?'>all_nbest_json</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.scores_diff_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.scores_diff_json', title='?'>scores_diff_json</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.prediction_output_squad', title='(?, ?, ?, ?, ?, ?) -> (?, ?, ?) / (?, ?, ?, ?, ?, None) -> (?, ?, ?)'>prediction_output_squad</a>(
<span class='lineno'> 399</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.strategy', title='?'>strategy</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.input_meta_data', title='?'>input_meta_data</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.tokenizer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.tokenizer', title='?'>tokenizer</a>,
<span class='lineno'> 400</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.bert_config', title='?'>bert_config</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.squad_lib', title='?'>squad_lib</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.init_checkpoint', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.init_checkpoint', title='None'>init_checkpoint</a>)
<span class='lineno'> 401</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.dump_to_files', title='(?, ?, ?, ?, ?) -> None'>dump_to_files</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_predictions', title='?'>all_predictions</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_nbest_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_nbest_json', title='?'>all_nbest_json</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.scores_diff_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.scores_diff_json', title='?'>scores_diff_json</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.squad_lib', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.squad_lib', title='?'>squad_lib</a>,
<span class='lineno'> 402</span>                 <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.input_meta_data', title='?'>input_meta_data</a>.get(&#39;version_2_with_negative&#39;, False))
<span class='lineno'> 403</span> 
<span class='lineno'> 404</span>   with tf.io.gfile.GFile(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.predict_file, &#39;r&#39;) as <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.reader', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.reader', title='?'>reader</a>:
<span class='lineno'> 405</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.dataset_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.dataset_json', title='?'>dataset_json</a> = json.load(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.reader', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.reader', title='?'>reader</a>)
<span class='lineno'> 406</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.pred_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.pred_dataset', title='?'>pred_dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.dataset_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.dataset_json', title='?'>dataset_json</a>[&#39;data&#39;]
<span class='lineno'> 407</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.input_meta_data', title='?'>input_meta_data</a>.get(&#39;version_2_with_negative&#39;, False):
<span class='lineno'> 408</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.eval_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.eval_metrics', title='?'>eval_metrics</a> = squad_evaluate_v2_0.evaluate(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.pred_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.pred_dataset', title='?'>pred_dataset</a>,
<span class='lineno'> 409</span>                                                 <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_predictions', title='?'>all_predictions</a>,
<span class='lineno'> 410</span>                                                 <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.scores_diff_json', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.scores_diff_json', title='?'>scores_diff_json</a>)
<span class='lineno'> 411</span>   else:
<span class='lineno'> 412</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.eval_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.eval_metrics', title='?'>eval_metrics</a> = squad_evaluate_v1_1.evaluate(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.pred_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.pred_dataset', title='?'>pred_dataset</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_predictions', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.all_predictions', title='?'>all_predictions</a>)
<span class='lineno'> 413</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.eval_metrics', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.eval_squad.eval_metrics', title='?'>eval_metrics</a>
<span class='lineno'> 414</span> 
<span class='lineno'> 415</span> 
<span class='lineno'> 416</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad', title='(?, ?, ?) -> None'>export_squad</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.model_export_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.model_export_path', title='?'>model_export_path</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.input_meta_data', title='?'>input_meta_data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.bert_config', title='?'>bert_config</a>):
<span class='lineno'> 417</span>   &quot;&quot;&quot;Exports a trained model as a `SavedModel` for inference.
<span class='lineno'> 418</span> 
<span class='lineno'> 419</span>   Args:
<span class='lineno'> 420</span>     model_export_path: a string specifying the path to the SavedModel directory.
<span class='lineno'> 421</span>     input_meta_data: dictionary containing meta data about input and model.
<span class='lineno'> 422</span>     bert_config: Bert configuration file to define core bert layers.
<span class='lineno'> 423</span> 
<span class='lineno'> 424</span>   Raises:
<span class='lineno'> 425</span>     Export path is not specified, got an empty string or None.
<span class='lineno'> 426</span>   &quot;&quot;&quot;
<span class='lineno'> 427</span>   if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.model_export_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.model_export_path', title='?'>model_export_path</a>:
<span class='lineno'> 428</span>     raise ValueError(&#39;Export path is not specified: %s&#39; % model_export_path)
<span class='lineno'> 429</span>   # Export uses float32 for now, even if training uses mixed precision.
<span class='lineno'> 430</span>   tf.keras.mixed_precision.experimental.set_policy(&#39;float32&#39;)
<span class='lineno'> 431</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.squad_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.squad_model', title='?'>squad_model</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad._', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad._', title='?'>_</a> = bert_models.squad_model(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.bert_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.bert_config', title='?'>bert_config</a>,
<span class='lineno'> 432</span>                                            <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.input_meta_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.input_meta_data', title='?'>input_meta_data</a>[&#39;max_seq_length&#39;])
<span class='lineno'> 433</span>   model_saving_utils.export_bert_model(
<span class='lineno'> 434</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.model_export_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.model_export_path', title='?'>model_export_path</a>, model=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.squad_model', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.export_squad.squad_model', title='?'>squad_model</a>, checkpoint_dir=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.bert.run_squad_helper.FLAGS', title='?'>FLAGS</a>.model_dir)
</pre></td></tr></table></body></html>