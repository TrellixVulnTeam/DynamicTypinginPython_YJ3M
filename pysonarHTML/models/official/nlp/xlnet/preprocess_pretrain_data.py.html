<html>
<head>
<meta charset="utf-8">
<title>/home/xxm/Desktop/EMSE/dataset/models/official/nlp/xlnet/preprocess_pretrain_data.py</title>
<style type='text/css'>
body { color: #666666; }
a {
    text-decoration: none; color: #5AA2A7;
    border: solid 1px rgba(255,255,255,0);
}
a.active {
    background: -webkit-linear-gradient(top,rgba(255, 255, 200, 0.35) 0,rgba(255, 255, 200, 0.55) 100%);
    border: solid 1px #E5E600;
}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #cccccc;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px solid orange; padding-bottom: 1px}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted;

function highlight(xid)
{
    var elms = document.querySelectorAll('[xid="' + xid + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "active";
    }
    highlighted = xid;
}

function clearHighlight() {
    var elms = document.querySelectorAll('[xid="' + highlighted + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "";
    }
}

window.onload =
    function (e) {
        var tags = document.getElementsByTagName("A")
        for (var i = 0; i < tags.length; i++) {
            tags[i].onmouseover =
                function (e) {
                    clearHighlight();
                    var xid = e.toElement.getAttribute('xid');
                    highlight(xid);
                }
        }
    }</script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols'>special_symbols</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.VOCAB_SIZE', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.VOCAB_SIZE'>VOCAB_SIZE</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.UNK_ID', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.UNK_ID'>UNK_ID</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.CLS_ID', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.CLS_ID'>CLS_ID</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.SEP_ID', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.SEP_ID'>SEP_ID</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.MASK_ID', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.MASK_ID'>MASK_ID</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.EOD_ID', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.EOD_ID'>EOD_ID</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature'>_int64_feature</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._float_feature', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._float_feature'>_float_feature</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename'>format_filename</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data'>_create_data</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data'>create_data</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify'>batchify</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b'>_split_a_and_b</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece'>_is_start_piece</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask'>_sample_mask</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram'>_sample_mask_ngram</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords'>create_tfrecords</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example'>_convert_example</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset'>parse_files_to_dataset</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm'>_local_perm</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset'>get_dataset</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn'>get_input_fn</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS'>FLAGS</a></li></ul>
</td><td><pre><span class='lineno'>   1</span> # -*- coding: utf-8 -*-
<span class='lineno'>   2</span> # Copyright 2019 The TensorFlow Authors. All Rights Reserved.
<span class='lineno'>   3</span> #
<span class='lineno'>   4</span> # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
<span class='lineno'>   5</span> # you may not use this file except in compliance with the License.
<span class='lineno'>   6</span> # You may obtain a copy of the License at
<span class='lineno'>   7</span> #
<span class='lineno'>   8</span> #     http://www.apache.org/licenses/LICENSE-2.0
<span class='lineno'>   9</span> #
<span class='lineno'>  10</span> # Unless required by applicable law or agreed to in writing, software
<span class='lineno'>  11</span> # distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<span class='lineno'>  12</span> # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<span class='lineno'>  13</span> # See the License for the specific language governing permissions and
<span class='lineno'>  14</span> # limitations under the License.
<span class='lineno'>  15</span> # ==============================================================================
<span class='lineno'>  16</span> &quot;&quot;&quot;Script to pre-process pre-training data into tfrecords.&quot;&quot;&quot;
<span class='lineno'>  17</span> 
<span class='lineno'>  18</span> from __future__ import absolute_import
<span class='lineno'>  19</span> from __future__ import division
<span class='lineno'>  20</span> from __future__ import print_function
<span class='lineno'>  21</span> 
<span class='lineno'>  22</span> import json
<span class='lineno'>  23</span> import os
<span class='lineno'>  24</span> import random
<span class='lineno'>  25</span> 
<span class='lineno'>  26</span> from absl import app
<span class='lineno'>  27</span> from absl import flags
<span class='lineno'>  28</span> import absl.logging as _logging  # pylint: disable=unused-import
<span class='lineno'>  29</span> 
<span class='lineno'>  30</span> import numpy as np
<span class='lineno'>  31</span> 
<span class='lineno'>  32</span> 
<span class='lineno'>  33</span> import tensorflow.google as tf
<span class='lineno'>  34</span> from official.nlp.xlnet import preprocess_utils
<span class='lineno'>  35</span> import sentencepiece as spm
<span class='lineno'>  36</span> 
<span class='lineno'>  37</span> 
<span class='lineno'>  38</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', title='dict'>special_symbols</a> = {
<span class='lineno'>  39</span>     &quot;&lt;unk&gt;&quot;  : 0,
<span class='lineno'>  40</span>     &quot;&lt;s&gt;&quot;    : 1,
<span class='lineno'>  41</span>     &quot;&lt;/s&gt;&quot;   : 2,
<span class='lineno'>  42</span>     &quot;&lt;cls&gt;&quot;  : 3,
<span class='lineno'>  43</span>     &quot;&lt;sep&gt;&quot;  : 4,
<span class='lineno'>  44</span>     &quot;&lt;pad&gt;&quot;  : 5,
<span class='lineno'>  45</span>     &quot;&lt;mask&gt;&quot; : 6,
<span class='lineno'>  46</span>     &quot;&lt;eod&gt;&quot;  : 7,
<span class='lineno'>  47</span>     &quot;&lt;eop&gt;&quot;  : 8,
<span class='lineno'>  48</span> }
<span class='lineno'>  49</span> 
<span class='lineno'>  50</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.VOCAB_SIZE', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.VOCAB_SIZE', title='int'>VOCAB_SIZE</a> = 32000
<span class='lineno'>  51</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.UNK_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.UNK_ID', title='int'>UNK_ID</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', title='dict'>special_symbols</a>[&quot;&lt;unk&gt;&quot;]
<span class='lineno'>  52</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.CLS_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.CLS_ID', title='int'>CLS_ID</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', title='dict'>special_symbols</a>[&quot;&lt;cls&gt;&quot;]
<span class='lineno'>  53</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.SEP_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.SEP_ID', title='int'>SEP_ID</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', title='dict'>special_symbols</a>[&quot;&lt;sep&gt;&quot;]
<span class='lineno'>  54</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.MASK_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.MASK_ID', title='int'>MASK_ID</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', title='dict'>special_symbols</a>[&quot;&lt;mask&gt;&quot;]
<span class='lineno'>  55</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.EOD_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.EOD_ID', title='int'>EOD_ID</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.special_symbols', title='dict'>special_symbols</a>[&quot;&lt;eod&gt;&quot;]
<span class='lineno'>  56</span> 
<span class='lineno'>  57</span> 
<span class='lineno'>  58</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', title='[?] -> ? / ? -> ? / [int] -> ?'>_int64_feature</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature.values', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature.values', title='{[?] | [int]}'>values</a>):
<span class='lineno'>  59</span>   return tf.train.Feature(int64_list=tf.train.Int64List(value=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature.values', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature.values', title='{[?] | [int]}'>values</a>))
<span class='lineno'>  60</span> 
<span class='lineno'>  61</span> 
<span class='lineno'>  62</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._float_feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._float_feature', title='? -> ?'>_float_feature</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._float_feature.values', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._float_feature.values', title='?'>values</a>):
<span class='lineno'>  63</span>   return tf.train.Feature(float_list=tf.train.FloatList(value=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._float_feature.values', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._float_feature.values', title='?'>values</a>))
<span class='lineno'>  64</span> 
<span class='lineno'>  65</span> 
<span class='lineno'>  66</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename', title='(?, ?, ?, ?, str, int, int, None, bool, None) -> str / (str, ?, ?, ?, str, int, int, None, bool, None) -> str / (?, ?, ?, ?, ?, int, int, None, bool, None) -> str'>format_filename</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.prefix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.prefix', title='str'>prefix</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bsz_per_host', title='?'>bsz_per_host</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.seq_len', title='?'>seq_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bi_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bi_data', title='?'>bi_data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.suffix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.suffix', title='str'>suffix</a>,
<span class='lineno'>  67</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.mask_alpha', title='int'>mask_alpha</a>=5, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.mask_beta', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.mask_beta', title='int'>mask_beta</a>=1, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len', title='None'>reuse_len</a>=None, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.uncased', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.uncased', title='bool'>uncased</a>=False,
<span class='lineno'>  68</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fixed_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fixed_num_predict', title='None'>fixed_num_predict</a>=None):
<span class='lineno'>  69</span>   &quot;&quot;&quot;docs.&quot;&quot;&quot;
<span class='lineno'>  70</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len', title='None'>reuse_len</a> is None:
<span class='lineno'>  71</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len_str', title='str'>reuse_len_str</a> = &quot;&quot;
<span class='lineno'>  72</span>   else:
<span class='lineno'>  73</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len_str', title='str'>reuse_len_str</a> = &quot;reuse-{}.&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len', title='None'>reuse_len</a>)
<span class='lineno'>  74</span>   if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.uncased', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.uncased', title='bool'>uncased</a>:
<span class='lineno'>  75</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.uncased_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.uncased_str', title='str'>uncased_str</a> = &quot;&quot;
<span class='lineno'>  76</span>   else:
<span class='lineno'>  77</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.uncased_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.uncased_str', title='str'>uncased_str</a> = &quot;uncased.&quot;
<span class='lineno'>  78</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bi_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bi_data', title='?'>bi_data</a>:
<span class='lineno'>  79</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bi_data_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bi_data_str', title='str'>bi_data_str</a> = &quot;bi&quot;
<span class='lineno'>  80</span>   else:
<span class='lineno'>  81</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bi_data_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bi_data_str', title='str'>bi_data_str</a> = &quot;uni&quot;
<span class='lineno'>  82</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fixed_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fixed_num_predict', title='None'>fixed_num_predict</a> is not None:
<span class='lineno'>  83</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fnp_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fnp_str', title='str'>fnp_str</a> = &quot;fnp-{}.&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fixed_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fixed_num_predict', title='None'>fixed_num_predict</a>)
<span class='lineno'>  84</span>   else:
<span class='lineno'>  85</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fnp_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fnp_str', title='str'>fnp_str</a> = &quot;&quot;
<span class='lineno'>  86</span> 
<span class='lineno'>  87</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.file_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.file_name', title='str'>file_name</a> = &quot;{}.bsz-{}.seqlen-{}.{}{}{}.alpha-{}.beta-{}.{}{}&quot;.format(
<span class='lineno'>  88</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.prefix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.prefix', title='str'>prefix</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bsz_per_host', title='?'>bsz_per_host</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.seq_len', title='?'>seq_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.reuse_len_str', title='str'>reuse_len_str</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.uncased_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.uncased_str', title='str'>uncased_str</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bi_data_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.bi_data_str', title='str'>bi_data_str</a>,
<span class='lineno'>  89</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.mask_alpha', title='int'>mask_alpha</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.mask_beta', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.mask_beta', title='int'>mask_beta</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fnp_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.fnp_str', title='str'>fnp_str</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.suffix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.suffix', title='str'>suffix</a>)
<span class='lineno'>  90</span> 
<span class='lineno'>  91</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.file_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename.file_name', title='str'>file_name</a>
<span class='lineno'>  92</span> 
<span class='lineno'>  93</span> 
<span class='lineno'>  94</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data', title='(?, ?) -> dict'>_create_data</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.idx', title='?'>idx</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_paths', title='?'>input_paths</a>):
<span class='lineno'>  95</span>   # Load sentence-piece model
<span class='lineno'>  96</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sp', title='?'>sp</a> = spm.SentencePieceProcessor()
<span class='lineno'>  97</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sp', title='?'>sp</a>.Load(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.sp_path)
<span class='lineno'>  98</span> 
<span class='lineno'>  99</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_shards', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_shards', title='[(?, ?)]'>input_shards</a> = []
<span class='lineno'> 100</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.total_line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.total_line_cnt', title='int'>total_line_cnt</a> = 0
<span class='lineno'> 101</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_path', title='?'>input_path</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_paths', title='?'>input_paths</a>:
<span class='lineno'> 102</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', title='[?]'>input_data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='[?]'>sent_ids</a> = [], []
<span class='lineno'> 103</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', title='bool'>sent_id</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', title='int'>line_cnt</a> = True, 0
<span class='lineno'> 104</span>     tf.logging.info(&quot;Processing %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_path', title='?'>input_path</a>)
<span class='lineno'> 105</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line', title='?'>line</a> in tf.gfile.Open(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_path', title='?'>input_path</a>):
<span class='lineno'> 106</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', title='int'>line_cnt</a> % 100000 == 0:
<span class='lineno'> 107</span>         tf.logging.info(&quot;Loading line %d&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', title='int'>line_cnt</a>)
<span class='lineno'> 108</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', title='int'>line_cnt</a></a> += 1
<span class='lineno'> 109</span> 
<span class='lineno'> 110</span>       if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line', title='?'>line</a>.strip():
<span class='lineno'> 111</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.use_eod:
<span class='lineno'> 112</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', title='bool'>sent_id</a> = not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', title='bool'>sent_id</a>
<span class='lineno'> 113</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', title='[int]'>cur_sent</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.EOD_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.EOD_ID', title='int'>EOD_ID</a>]
<span class='lineno'> 114</span>         else:
<span class='lineno'> 115</span>           continue
<span class='lineno'> 116</span>       else:
<span class='lineno'> 117</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.from_raw_text:
<span class='lineno'> 118</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', title='?'>cur_sent</a> = preprocess_utils.preprocess_text(
<span class='lineno'> 119</span>               <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line', title='?'>line</a>.strip(), lower=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.uncased)
<span class='lineno'> 120</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', title='?'>cur_sent</a> = preprocess_utils.encode_ids(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sp', title='?'>sp</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', title='?'>cur_sent</a>)
<span class='lineno'> 121</span>         else:
<span class='lineno'> 122</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', title='list'>cur_sent</a> = list(map(int, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line', title='?'>line</a>.strip().split()))
<span class='lineno'> 123</span> 
<span class='lineno'> 124</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', title='[?]'>input_data</a>.extend(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', title='{[int] | list}'>cur_sent</a>)
<span class='lineno'> 125</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='[?]'>sent_ids</a>.extend([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', title='bool'>sent_id</a>] * len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_sent', title='{[int] | list}'>cur_sent</a>))
<span class='lineno'> 126</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', title='bool'>sent_id</a> = not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_id', title='bool'>sent_id</a>
<span class='lineno'> 127</span> 
<span class='lineno'> 128</span>     tf.logging.info(&quot;Finish with line %d&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', title='int'>line_cnt</a>)
<span class='lineno'> 129</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', title='int'>line_cnt</a> == 0:
<span class='lineno'> 130</span>       continue
<span class='lineno'> 131</span> 
<span class='lineno'> 132</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', title='?'>input_data</a> = np.array(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', title='[?]'>input_data</a>, dtype=np.int64)
<span class='lineno'> 133</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='?'>sent_ids</a> = np.array(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='[?]'>sent_ids</a>, dtype=np.bool)
<span class='lineno'> 134</span> 
<span class='lineno'> 135</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.total_line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.total_line_cnt', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.total_line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.total_line_cnt', title='int'>total_line_cnt</a></a> += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.line_cnt', title='int'>line_cnt</a>
<span class='lineno'> 136</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_shards', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_shards', title='[(?, ?)]'>input_shards</a>.append((<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', title='?'>input_data</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='?'>sent_ids</a>))
<span class='lineno'> 137</span> 
<span class='lineno'> 138</span>   tf.logging.info(&quot;[Task %d] Total number line: %d&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.idx', title='?'>idx</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.total_line_cnt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.total_line_cnt', title='int'>total_line_cnt</a>)
<span class='lineno'> 139</span> 
<span class='lineno'> 140</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.tfrecord_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.tfrecord_dir', title='str'>tfrecord_dir</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.save_dir, &quot;tfrecords&quot;)
<span class='lineno'> 141</span> 
<span class='lineno'> 142</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.filenames', title='[str]'>filenames</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.num_batch', title='int'>num_batch</a> = [], 0
<span class='lineno'> 143</span> 
<span class='lineno'> 144</span>   # Randomly shuffle input shards (with a fixed but distinct random seed)
<span class='lineno'> 145</span>   np.random.seed(100 * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.task + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.pass_id)
<span class='lineno'> 146</span> 
<span class='lineno'> 147</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.perm_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.perm_indices', title='?'>perm_indices</a> = np.random.permutation(len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_shards', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_shards', title='[(?, ?)]'>input_shards</a>))
<span class='lineno'> 148</span>   tf.logging.info(&quot;Using perm indices %s for pass %d&quot;,
<span class='lineno'> 149</span>                   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.perm_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.perm_indices', title='?'>perm_indices</a>.tolist(), <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.pass_id)
<span class='lineno'> 150</span> 
<span class='lineno'> 151</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data_list', title='[?]'>input_data_list</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids_list', title='[?]'>sent_ids_list</a> = [], []
<span class='lineno'> 152</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.prev_sent_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.prev_sent_id', title='None'>prev_sent_id</a> = None
<span class='lineno'> 153</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.perm_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.perm_idx', title='?'>perm_idx</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.perm_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.perm_indices', title='?'>perm_indices</a>:
<span class='lineno'> 154</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', title='?'>input_data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='?'>sent_ids</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_shards', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_shards', title='[(?, ?)]'>input_shards</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.perm_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.perm_idx', title='?'>perm_idx</a>]
<span class='lineno'> 155</span>     # make sure the `send_ids[0] == not prev_sent_id`
<span class='lineno'> 156</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.prev_sent_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.prev_sent_id', title='None'>prev_sent_id</a> is not None and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='?'>sent_ids</a>[0] == <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.prev_sent_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.prev_sent_id', title='None'>prev_sent_id</a>:
<span class='lineno'> 157</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='?'>sent_ids</a> = np.logical_not(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='?'>sent_ids</a>)
<span class='lineno'> 158</span> 
<span class='lineno'> 159</span>     # append to temporary list
<span class='lineno'> 160</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data_list', title='[?]'>input_data_list</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', title='?'>input_data</a>)
<span class='lineno'> 161</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids_list', title='[?]'>sent_ids_list</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='?'>sent_ids</a>)
<span class='lineno'> 162</span> 
<span class='lineno'> 163</span>     # update `prev_sent_id`
<span class='lineno'> 164</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.prev_sent_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.prev_sent_id', title='?'>prev_sent_id</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='?'>sent_ids</a>[-1]
<span class='lineno'> 165</span> 
<span class='lineno'> 166</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', title='?'>input_data</a> = np.concatenate(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data_list', title='[?]'>input_data_list</a>)
<span class='lineno'> 167</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='?'>sent_ids</a> = np.concatenate(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids_list', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids_list', title='[?]'>sent_ids_list</a>)
<span class='lineno'> 168</span> 
<span class='lineno'> 169</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.file_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.file_name', title='str'>file_name</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_num_batch', title='int'>cur_num_batch</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords', title='(?, ?, ?, ?, ?, ?, ?) -> (str, int) / (str, str, [?], ?, ?, ?, ?) -> (str, int)'>create_tfrecords</a>(
<span class='lineno'> 170</span>       save_dir=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.tfrecord_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.tfrecord_dir', title='str'>tfrecord_dir</a>,
<span class='lineno'> 171</span>       basename=&quot;{}-{}-{}&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.split, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.idx', title='?'>idx</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.pass_id),
<span class='lineno'> 172</span>       data=[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.input_data', title='?'>input_data</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sent_ids', title='?'>sent_ids</a>],
<span class='lineno'> 173</span>       bsz_per_host=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.bsz_per_host,
<span class='lineno'> 174</span>       seq_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.seq_len,
<span class='lineno'> 175</span>       bi_data=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.bi_data,
<span class='lineno'> 176</span>       sp=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.sp', title='?'>sp</a>,
<span class='lineno'> 177</span>   )
<span class='lineno'> 178</span> 
<span class='lineno'> 179</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.filenames', title='[str]'>filenames</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.file_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.file_name', title='str'>file_name</a>)
<span class='lineno'> 180</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.num_batch', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.num_batch', title='int'>num_batch</a></a> += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.cur_num_batch', title='int'>cur_num_batch</a>
<span class='lineno'> 181</span> 
<span class='lineno'> 182</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.record_info', title='dict'>record_info</a> = {
<span class='lineno'> 183</span>       &quot;filenames&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.filenames', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.filenames', title='[str]'>filenames</a>,
<span class='lineno'> 184</span>       &quot;num_batch&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.num_batch', title='int'>num_batch</a>
<span class='lineno'> 185</span>   }
<span class='lineno'> 186</span> 
<span class='lineno'> 187</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data.record_info', title='dict'>record_info</a>
<span class='lineno'> 188</span> 
<span class='lineno'> 189</span> 
<span class='lineno'> 190</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data', title='? -> None'>create_data</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data._', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data._', title='?'>_</a>):
<span class='lineno'> 191</span>   # Validate FLAGS
<span class='lineno'> 192</span>   assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.bsz_per_host % <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_core_per_host == 0
<span class='lineno'> 193</span>   if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.use_tpu:
<span class='lineno'> 194</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_core_per_host = 1  # forced to be one
<span class='lineno'> 195</span> 
<span class='lineno'> 196</span>   # Make workdirs
<span class='lineno'> 197</span>   if not tf.gfile.Exists(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.save_dir):
<span class='lineno'> 198</span>     tf.gfile.MakeDirs(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.save_dir)
<span class='lineno'> 199</span> 
<span class='lineno'> 200</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.tfrecord_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.tfrecord_dir', title='str'>tfrecord_dir</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.save_dir, &quot;tfrecords&quot;)
<span class='lineno'> 201</span>   if not tf.gfile.Exists(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.tfrecord_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.tfrecord_dir', title='str'>tfrecord_dir</a>):
<span class='lineno'> 202</span>     tf.gfile.MakeDirs(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.tfrecord_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.tfrecord_dir', title='str'>tfrecord_dir</a>)
<span class='lineno'> 203</span> 
<span class='lineno'> 204</span>   # Create and dump corpus_info from task 0
<span class='lineno'> 205</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.task == 0 and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.pass_id == 0:
<span class='lineno'> 206</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.corpus_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.corpus_info', title='dict'>corpus_info</a> = {
<span class='lineno'> 207</span>         &quot;vocab_size&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.VOCAB_SIZE', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.VOCAB_SIZE', title='int'>VOCAB_SIZE</a>,
<span class='lineno'> 208</span>         &quot;bsz_per_host&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.bsz_per_host,
<span class='lineno'> 209</span>         &quot;num_core_per_host&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_core_per_host,
<span class='lineno'> 210</span>         &quot;seq_len&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.seq_len,
<span class='lineno'> 211</span>         &quot;reuse_len&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.reuse_len,
<span class='lineno'> 212</span>         &quot;uncased&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.uncased,
<span class='lineno'> 213</span>         &quot;bi_data&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.bi_data,
<span class='lineno'> 214</span>         &quot;mask_alpha&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.mask_alpha,
<span class='lineno'> 215</span>         &quot;mask_beta&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.mask_beta,
<span class='lineno'> 216</span>         &quot;num_predict&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_predict,
<span class='lineno'> 217</span>         &quot;use_eod&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.use_eod,
<span class='lineno'> 218</span>         &quot;sp_path&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.sp_path,
<span class='lineno'> 219</span>         &quot;input_glob&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.input_glob,
<span class='lineno'> 220</span>     }
<span class='lineno'> 221</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.corpus_info_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.corpus_info_path', title='str'>corpus_info_path</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.save_dir, &quot;corpus_info.json&quot;)
<span class='lineno'> 222</span>     with tf.gfile.Open(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.corpus_info_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.corpus_info_path', title='str'>corpus_info_path</a>, &quot;w&quot;) as <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.fp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.fp', title='?'>fp</a>:
<span class='lineno'> 223</span>       json.dump(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.corpus_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.corpus_info', title='dict'>corpus_info</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.fp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.fp', title='?'>fp</a>)
<span class='lineno'> 224</span> 
<span class='lineno'> 225</span>   # Interleavely split the work into FLAGS.num_task splits
<span class='lineno'> 226</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.file_paths', title='?'>file_paths</a> = sorted(tf.gfile.Glob(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.input_glob))
<span class='lineno'> 227</span>   tf.logging.info(&quot;Use glob: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.input_glob)
<span class='lineno'> 228</span>   tf.logging.info(&quot;Find %d files: %s&quot;, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.file_paths', title='?'>file_paths</a>), <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.file_paths', title='?'>file_paths</a>)
<span class='lineno'> 229</span> 
<span class='lineno'> 230</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.task_file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.task_file_paths', title='?'>task_file_paths</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.file_paths', title='?'>file_paths</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.task::<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_task]
<span class='lineno'> 231</span>   if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.task_file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.task_file_paths', title='?'>task_file_paths</a>:
<span class='lineno'> 232</span>     tf.logging.info(&quot;Exit: task %d has no file to process.&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.task)
<span class='lineno'> 233</span>     return
<span class='lineno'> 234</span> 
<span class='lineno'> 235</span>   tf.logging.info(&quot;Task %d process %d files: %s&quot;,
<span class='lineno'> 236</span>                   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.task, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.task_file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.task_file_paths', title='?'>task_file_paths</a>), <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.task_file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.task_file_paths', title='?'>task_file_paths</a>)
<span class='lineno'> 237</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_info', title='dict'>record_info</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._create_data', title='(?, ?) -> dict'>_create_data</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.task, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.task_file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.task_file_paths', title='?'>task_file_paths</a>)
<span class='lineno'> 238</span> 
<span class='lineno'> 239</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_prefix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_prefix', title='str'>record_prefix</a> = &quot;record_info-{}-{}-{}&quot;.format(
<span class='lineno'> 240</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.split, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.task, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.pass_id)
<span class='lineno'> 241</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_name', title='str'>record_name</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename', title='(?, ?, ?, ?, str, int, int, None, bool, None) -> str / (str, ?, ?, ?, str, int, int, None, bool, None) -> str / (?, ?, ?, ?, ?, int, int, None, bool, None) -> str'>format_filename</a>(
<span class='lineno'> 242</span>       prefix=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_prefix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_prefix', title='str'>record_prefix</a>,
<span class='lineno'> 243</span>       bsz_per_host=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.bsz_per_host,
<span class='lineno'> 244</span>       seq_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.seq_len,
<span class='lineno'> 245</span>       mask_alpha=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.mask_alpha,
<span class='lineno'> 246</span>       mask_beta=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.mask_beta,
<span class='lineno'> 247</span>       reuse_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.reuse_len,
<span class='lineno'> 248</span>       bi_data=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.bi_data,
<span class='lineno'> 249</span>       suffix=&quot;json&quot;,
<span class='lineno'> 250</span>       uncased=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.uncased,
<span class='lineno'> 251</span>       fixed_num_predict=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_predict)
<span class='lineno'> 252</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_info_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_info_path', title='str'>record_info_path</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.tfrecord_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.tfrecord_dir', title='str'>tfrecord_dir</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_name', title='str'>record_name</a>)
<span class='lineno'> 253</span> 
<span class='lineno'> 254</span>   with tf.gfile.Open(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_info_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_info_path', title='str'>record_info_path</a>, &quot;w&quot;) as <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.fp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.fp', title='?'>fp</a>:
<span class='lineno'> 255</span>     json.dump(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.record_info', title='dict'>record_info</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.fp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data.fp', title='?'>fp</a>)
<span class='lineno'> 256</span> 
<span class='lineno'> 257</span> 
<span class='lineno'> 258</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify', title='(?, ?, None) -> (?, None) / (?, int, ?) -> (?, ?) / (?, ?, ?) -> (?, ?)'>batchify</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', title='?'>data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', title='int'>bsz_per_host</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', title='None'>sent_ids</a>=None):
<span class='lineno'> 259</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.num_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.num_step', title='int'>num_step</a> = len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', title='?'>data</a>) // <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', title='int'>bsz_per_host</a>
<span class='lineno'> 260</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', title='?'>data</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', title='?'>data</a>[:<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', title='int'>bsz_per_host</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.num_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.num_step', title='int'>num_step</a>]
<span class='lineno'> 261</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', title='?'>data</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', title='?'>data</a>.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', title='int'>bsz_per_host</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.num_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.num_step', title='int'>num_step</a>)
<span class='lineno'> 262</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', title='None'>sent_ids</a> is not None:
<span class='lineno'> 263</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', title='?'>sent_ids</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', title='None'>sent_ids</a>[:<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', title='int'>bsz_per_host</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.num_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.num_step', title='int'>num_step</a>]
<span class='lineno'> 264</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', title='?'>sent_ids</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', title='?'>sent_ids</a>.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.bsz_per_host', title='int'>bsz_per_host</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.num_step', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.num_step', title='int'>num_step</a>)
<span class='lineno'> 265</span> 
<span class='lineno'> 266</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', title='None'>sent_ids</a> is not None:
<span class='lineno'> 267</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', title='?'>data</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.sent_ids', title='None'>sent_ids</a>
<span class='lineno'> 268</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify.data', title='?'>data</a>
<span class='lineno'> 269</span> 
<span class='lineno'> 270</span> 
<span class='lineno'> 271</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b', title='(?, ?, ?, ?, bool) -> [int] / (?, ?, int, int, bool) -> [int]'>_split_a_and_b</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', title='?'>data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', title='?'>sent_ids</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', title='int'>begin_idx</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', title='int'>tot_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.extend_target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.extend_target', title='bool'>extend_target</a>=False):
<span class='lineno'> 272</span>   &quot;&quot;&quot;Split two segments from `data` starting from the index `begin_idx`.&quot;&quot;&quot;
<span class='lineno'> 273</span> 
<span class='lineno'> 274</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', title='?'>data_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', title='?'>data</a>.shape[0]
<span class='lineno'> 275</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', title='int'>begin_idx</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', title='int'>tot_len</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', title='?'>data_len</a>:
<span class='lineno'> 276</span>     tf.logging.info(&quot;[_split_a_and_b] returns None: &quot;
<span class='lineno'> 277</span>                     &quot;begin_idx %d + tot_len %d &gt;= data_len %d&quot;,
<span class='lineno'> 278</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', title='int'>begin_idx</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', title='int'>tot_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', title='?'>data_len</a>)
<span class='lineno'> 279</span>     return None
<span class='lineno'> 280</span> 
<span class='lineno'> 281</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', title='int'>end_idx</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', title='int'>begin_idx</a> + 1
<span class='lineno'> 282</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', title='[int]'>cut_points</a> = []
<span class='lineno'> 283</span>   while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', title='int'>end_idx</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', title='?'>data_len</a>:
<span class='lineno'> 284</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', title='?'>sent_ids</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', title='int'>end_idx</a>] != <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', title='?'>sent_ids</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', title='int'>end_idx</a> - 1]:
<span class='lineno'> 285</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', title='int'>end_idx</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', title='int'>begin_idx</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', title='int'>tot_len</a>: break
<span class='lineno'> 286</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', title='[int]'>cut_points</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', title='int'>end_idx</a>)
<span class='lineno'> 287</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', title='int'>end_idx</a></a> += 1
<span class='lineno'> 288</span> 
<span class='lineno'> 289</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', title='int'>a_begin</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.begin_idx', title='int'>begin_idx</a>
<span class='lineno'> 290</span>   if len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', title='[int]'>cut_points</a>) == 0 or random.random() &lt; 0.5:
<span class='lineno'> 291</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.label', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.label', title='int'>label</a> = 0
<span class='lineno'> 292</span>     if len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', title='[int]'>cut_points</a>) == 0:
<span class='lineno'> 293</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='int'>a_end</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', title='int'>end_idx</a>
<span class='lineno'> 294</span>     else:
<span class='lineno'> 295</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='?'>a_end</a> = random.choice(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', title='[int]'>cut_points</a>)
<span class='lineno'> 296</span> 
<span class='lineno'> 297</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_len', title='int'>b_len</a> = max(1, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', title='int'>tot_len</a> - (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='int'>a_end</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', title='int'>a_begin</a>))
<span class='lineno'> 298</span>     # (zihangd): `data_len - 1` to account for extend_target
<span class='lineno'> 299</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='?'>b_begin</a> = random.randint(0, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', title='?'>data_len</a> - 1 - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_len', title='int'>b_len</a>)
<span class='lineno'> 300</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='?'>b_begin</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_len', title='int'>b_len</a>
<span class='lineno'> 301</span>     while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='?'>b_begin</a> &gt; 0 and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', title='?'>sent_ids</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='?'>b_begin</a> - 1] == <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', title='?'>sent_ids</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='?'>b_begin</a>]:
<span class='lineno'> 302</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='int'>b_begin</a></a> -= 1
<span class='lineno'> 303</span>     # (zihangd): `data_len - 1` to account for extend_target
<span class='lineno'> 304</span>     while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', title='?'>data_len</a> - 1 and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', title='?'>sent_ids</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a> - 1] == <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.sent_ids', title='?'>sent_ids</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a>]:
<span class='lineno'> 305</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a></a> += 1
<span class='lineno'> 306</span> 
<span class='lineno'> 307</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.new_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.new_begin', title='int'>new_begin</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='int'>a_end</a>
<span class='lineno'> 308</span>   else:
<span class='lineno'> 309</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.label', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.label', title='int'>label</a> = 1
<span class='lineno'> 310</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='?'>a_end</a> = random.choice(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.cut_points', title='[int]'>cut_points</a>)
<span class='lineno'> 311</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='?'>b_begin</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='?'>a_end</a>
<span class='lineno'> 312</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.end_idx', title='int'>end_idx</a>
<span class='lineno'> 313</span> 
<span class='lineno'> 314</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.new_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.new_begin', title='int'>new_begin</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a>
<span class='lineno'> 315</span> 
<span class='lineno'> 316</span>   while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='int'>a_end</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', title='int'>a_begin</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='int'>b_begin</a> &gt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.tot_len', title='int'>tot_len</a>:
<span class='lineno'> 317</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='int'>a_end</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', title='int'>a_begin</a> &gt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='int'>b_begin</a>:
<span class='lineno'> 318</span>       # delete the right side only for the LM objective
<span class='lineno'> 319</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='int'>a_end</a></a> -= 1
<span class='lineno'> 320</span>     else:
<span class='lineno'> 321</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a></a> -= 1
<span class='lineno'> 322</span> 
<span class='lineno'> 323</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.ret', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.ret', title='[int]'>ret</a> = [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', title='?'>data</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', title='int'>a_begin</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='int'>a_end</a>], <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', title='?'>data</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='int'>b_begin</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a>], <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.label', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.label', title='int'>label</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.new_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.new_begin', title='int'>new_begin</a>]
<span class='lineno'> 324</span> 
<span class='lineno'> 325</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.extend_target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.extend_target', title='bool'>extend_target</a>:
<span class='lineno'> 326</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='int'>a_end</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', title='?'>data_len</a> or <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', title='?'>data_len</a>:
<span class='lineno'> 327</span>       tf.logging.info(&quot;[_split_a_and_b] returns None: &quot;
<span class='lineno'> 328</span>                       &quot;a_end %d or b_end %d &gt;= data_len %d&quot;,
<span class='lineno'> 329</span>                       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='int'>a_end</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data_len', title='?'>data_len</a>)
<span class='lineno'> 330</span>       return None
<span class='lineno'> 331</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_target', title='?'>a_target</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', title='?'>data</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_begin', title='int'>a_begin</a> + 1: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_end', title='int'>a_end</a> + 1]
<span class='lineno'> 332</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_target', title='?'>b_target</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.data', title='?'>data</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_begin', title='int'>b_begin</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_end', title='int'>b_end</a> + 1]
<span class='lineno'> 333</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.ret', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.ret', title='[int]'>ret</a>.extend([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.a_target', title='?'>a_target</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.b_target', title='?'>b_target</a>])
<span class='lineno'> 334</span> 
<span class='lineno'> 335</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.ret', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b.ret', title='[int]'>ret</a>
<span class='lineno'> 336</span> 
<span class='lineno'> 337</span> 
<span class='lineno'> 338</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece', title='? -> bool'>_is_start_piece</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.piece', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.piece', title='?'>piece</a>):
<span class='lineno'> 339</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.special_pieces', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.special_pieces', title='?'>special_pieces</a> = set(list(&#39;!&quot;#$%&amp;\&quot;()*+,-./:;?@[\\]^_`{|}~&#39;))
<span class='lineno'> 340</span>   if (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.piece', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.piece', title='?'>piece</a>.startswith(&quot;▁&quot;) or pi<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.piece', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.piece', title='?'>ece.s</a>tartswith(&quot;&lt;&quot;)
<span class='lineno'> 341</span>       or <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.piece', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.piece', title='?'>piece</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.special_pieces', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece.special_pieces', title='?'>special_pieces</a>):
<span class='lineno'> 342</span>     return True
<span class='lineno'> 343</span>   else:
<span class='lineno'> 344</span>     return False
<span class='lineno'> 345</span> 
<span class='lineno'> 346</span> 
<span class='lineno'> 347</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask', title='(?, ?, bool, int, None) -> None'>_sample_mask</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.sp', title='?'>sp</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg', title='?'>seg</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.reverse', title='bool'>reverse</a>=False, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.max_gram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.max_gram', title='int'>max_gram</a>=5, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', title='None'>goal_num_predict</a>=None):
<span class='lineno'> 348</span>   &quot;&quot;&quot;Sample `goal_num_predict` tokens for partial prediction.
<span class='lineno'> 349</span>   About `mask_beta` tokens are chosen in a context of `mask_alpha` tokens.&quot;&quot;&quot;
<span class='lineno'> 350</span> 
<span class='lineno'> 351</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', title='int'>seg_len</a> = len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg', title='?'>seg</a>)
<span class='lineno'> 352</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', title='?'>mask</a> = np.array([False] * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', title='int'>seg_len</a>, dtype=np.bool)
<span class='lineno'> 353</span> 
<span class='lineno'> 354</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', title='int'>num_predict</a> = 0
<span class='lineno'> 355</span> 
<span class='lineno'> 356</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.ngrams', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.ngrams', title='?'>ngrams</a> = np.arange(1, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.max_gram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.max_gram', title='int'>max_gram</a> + 1, dtype=np.int64)
<span class='lineno'> 357</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.pvals', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.pvals', title='float'>pvals</a> = 1. / np.arange(1, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.max_gram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.max_gram', title='int'>max_gram</a> + 1)
<span class='lineno'> 358</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.pvals', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.pvals', title='float'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.pvals', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.pvals', title='float'>pvals</a></a> /= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.pvals', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.pvals', title='float'>pvals</a>.sum(keepdims=True)
<span class='lineno'> 359</span> 
<span class='lineno'> 360</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.reverse', title='bool'>reverse</a>:
<span class='lineno'> 361</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg', title='?'>seg</a> = np.flip(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg', title='?'>seg</a>, 0)
<span class='lineno'> 362</span> 
<span class='lineno'> 363</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cur_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cur_len', title='int'>cur_len</a> = 0
<span class='lineno'> 364</span>   while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cur_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cur_len', title='int'>cur_len</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', title='int'>seg_len</a>:
<span class='lineno'> 365</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', title='None'>goal_num_predict</a> is not None and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', title='int'>num_predict</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', title='None'>goal_num_predict</a>: break
<span class='lineno'> 366</span> 
<span class='lineno'> 367</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.n', title='?'>n</a> = np.random.choice(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.ngrams', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.ngrams', title='?'>ngrams</a>, p=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.pvals', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.pvals', title='float'>pvals</a>)
<span class='lineno'> 368</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', title='None'>goal_num_predict</a> is not None:
<span class='lineno'> 369</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.n', title='int'>n</a> = min(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.n', title='?'>n</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', title='None'>goal_num_predict</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', title='int'>num_predict</a>)
<span class='lineno'> 370</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.ctx_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.ctx_size', title='int'>ctx_size</a> = (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.n', title='int'>n</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.mask_alpha) // <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.mask_beta
<span class='lineno'> 371</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.l_ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.l_ctx', title='?'>l_ctx</a> = np.random.choice(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.ctx_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.ctx_size', title='int'>ctx_size</a>)
<span class='lineno'> 372</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.r_ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.r_ctx', title='int'>r_ctx</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.ctx_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.ctx_size', title='int'>ctx_size</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.l_ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.l_ctx', title='?'>l_ctx</a>
<span class='lineno'> 373</span> 
<span class='lineno'> 374</span>     # Find the start position of a complete token
<span class='lineno'> 375</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', title='int'>beg</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cur_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cur_len', title='int'>cur_len</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.l_ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.l_ctx', title='?'>l_ctx</a>
<span class='lineno'> 376</span>     while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', title='int'>beg</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', title='int'>seg_len</a> and not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece', title='? -> bool'>_is_start_piece</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.sp', title='?'>sp</a>.IdToPiece(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg', title='?'>seg</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', title='int'>beg</a>].item())):
<span class='lineno'> 377</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', title='int'>beg</a></a> += 1
<span class='lineno'> 378</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', title='int'>beg</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', title='int'>seg_len</a>:
<span class='lineno'> 379</span>       break
<span class='lineno'> 380</span> 
<span class='lineno'> 381</span>     # Find the end position of the n-gram (start pos of the n+1-th gram)
<span class='lineno'> 382</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', title='int'>end</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', title='int'>beg</a> + 1
<span class='lineno'> 383</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cnt_ngram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cnt_ngram', title='int'>cnt_ngram</a> = 1
<span class='lineno'> 384</span>     while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', title='int'>end</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', title='int'>seg_len</a>:
<span class='lineno'> 385</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cnt_ngram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cnt_ngram', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cnt_ngram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cnt_ngram', title='int'>cnt_ngram</a></a> += 1
<span class='lineno'> 386</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cnt_ngram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cnt_ngram', title='int'>cnt_ngram</a> &gt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.n', title='int'>n</a>:
<span class='lineno'> 387</span>         break
<span class='lineno'> 388</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', title='int'>end</a></a> += 1
<span class='lineno'> 389</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', title='int'>end</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', title='int'>seg_len</a>:
<span class='lineno'> 390</span>       break
<span class='lineno'> 391</span> 
<span class='lineno'> 392</span>     # Update
<span class='lineno'> 393</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', title='?'>mask</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', title='int'>beg</a>:<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', title='int'>end</a>] = True
<span class='lineno'> 394</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', title='int'>num_predict</a></a> += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', title='int'>end</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.beg', title='int'>beg</a>
<span class='lineno'> 395</span> 
<span class='lineno'> 396</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cur_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.cur_len', title='int'>cur_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.end', title='int'>end</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.r_ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.r_ctx', title='int'>r_ctx</a>
<span class='lineno'> 397</span> 
<span class='lineno'> 398</span>   while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', title='None'>goal_num_predict</a> is not None and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', title='int'>num_predict</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.goal_num_predict', title='None'>goal_num_predict</a>:
<span class='lineno'> 399</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.i', title='?'>i</a> = np.random.randint(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.seg_len', title='int'>seg_len</a>)
<span class='lineno'> 400</span>     if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', title='?'>mask</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.i', title='?'>i</a>]:
<span class='lineno'> 401</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', title='?'>mask</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.i', title='?'>i</a>] = True
<span class='lineno'> 402</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.num_predict', title='int'>num_predict</a></a> += 1
<span class='lineno'> 403</span> 
<span class='lineno'> 404</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.reverse', title='bool'>reverse</a>:
<span class='lineno'> 405</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', title='?'>mask</a> = np.flip(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', title='?'>mask</a>, 0)
<span class='lineno'> 406</span> 
<span class='lineno'> 407</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask.mask', title='?'>mask</a>
<span class='lineno'> 408</span> 
<span class='lineno'> 409</span> 
<span class='lineno'> 410</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram', title='(?, ?, bool, int, None) -> None'>_sample_mask_ngram</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.sp', title='?'>sp</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', title='?'>seg</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.reverse', title='bool'>reverse</a>=False, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.max_gram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.max_gram', title='int'>max_gram</a>=5,
<span class='lineno'> 411</span>                        <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', title='None'>goal_num_predict</a>=None):
<span class='lineno'> 412</span>   &quot;&quot;&quot;Sample `goal_num_predict` tokens for partial prediction.
<span class='lineno'> 413</span>   About `mask_beta` tokens are chosen in a context of `mask_alpha` tokens.&quot;&quot;&quot;
<span class='lineno'> 414</span> 
<span class='lineno'> 415</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', title='int'>seg_len</a> = len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', title='?'>seg</a>)
<span class='lineno'> 416</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', title='?'>mask</a> = np.array([False] * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', title='int'>seg_len</a>, dtype=np.bool)
<span class='lineno'> 417</span> 
<span class='lineno'> 418</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', title='int'>num_predict</a> = 0
<span class='lineno'> 419</span> 
<span class='lineno'> 420</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.ngrams', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.ngrams', title='?'>ngrams</a> = np.arange(1, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.max_gram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.max_gram', title='int'>max_gram</a> + 1, dtype=np.int64)
<span class='lineno'> 421</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.pvals', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.pvals', title='float'>pvals</a> = 1. / np.arange(1, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.max_gram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.max_gram', title='int'>max_gram</a> + 1)
<span class='lineno'> 422</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.pvals', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.pvals', title='float'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.pvals', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.pvals', title='float'>pvals</a></a> /= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.pvals', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.pvals', title='float'>pvals</a>.sum(keepdims=True)
<span class='lineno'> 423</span> 
<span class='lineno'> 424</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.reverse', title='bool'>reverse</a>:
<span class='lineno'> 425</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', title='?'>seg</a> = np.flip(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', title='?'>seg</a>, 0)
<span class='lineno'> 426</span> 
<span class='lineno'> 427</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cur_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cur_len', title='int'>cur_len</a> = 0
<span class='lineno'> 428</span>   while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cur_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cur_len', title='int'>cur_len</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', title='int'>seg_len</a>:
<span class='lineno'> 429</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', title='None'>goal_num_predict</a> is not None and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', title='int'>num_predict</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', title='None'>goal_num_predict</a>: break
<span class='lineno'> 430</span> 
<span class='lineno'> 431</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.n', title='?'>n</a> = np.random.choice(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.ngrams', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.ngrams', title='?'>ngrams</a>, p=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.pvals', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.pvals', title='float'>pvals</a>)
<span class='lineno'> 432</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', title='None'>goal_num_predict</a> is not None:
<span class='lineno'> 433</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.n', title='int'>n</a> = min(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.n', title='?'>n</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', title='None'>goal_num_predict</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', title='int'>num_predict</a>)
<span class='lineno'> 434</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.ctx_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.ctx_size', title='int'>ctx_size</a> = (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.n', title='int'>n</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.mask_alpha) // <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.mask_beta
<span class='lineno'> 435</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.l_ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.l_ctx', title='?'>l_ctx</a> = np.random.choice(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.ctx_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.ctx_size', title='int'>ctx_size</a>)
<span class='lineno'> 436</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.r_ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.r_ctx', title='int'>r_ctx</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.ctx_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.ctx_size', title='int'>ctx_size</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.l_ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.l_ctx', title='?'>l_ctx</a>
<span class='lineno'> 437</span> 
<span class='lineno'> 438</span>     # Find the start position of a complete token
<span class='lineno'> 439</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', title='int'>beg</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cur_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cur_len', title='int'>cur_len</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.l_ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.l_ctx', title='?'>l_ctx</a>
<span class='lineno'> 440</span>     while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', title='int'>beg</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', title='int'>seg_len</a> and not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece', title='? -> bool'>_is_start_piece</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.sp', title='?'>sp</a>.IdToPiece(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', title='?'>seg</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', title='int'>beg</a>].item())):
<span class='lineno'> 441</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', title='int'>beg</a></a> += 1
<span class='lineno'> 442</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', title='int'>beg</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', title='int'>seg_len</a>:
<span class='lineno'> 443</span>       break
<span class='lineno'> 444</span> 
<span class='lineno'> 445</span>     # Find the end position of the n-gram (start pos of the n+1-th gram)
<span class='lineno'> 446</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', title='int'>end</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.beg', title='int'>beg</a>
<span class='lineno'> 447</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cnt_ngram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cnt_ngram', title='int'>cnt_ngram</a> = 0
<span class='lineno'> 448</span>     while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', title='int'>end</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', title='int'>seg_len</a>:
<span class='lineno'> 449</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._is_start_piece', title='? -> bool'>_is_start_piece</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.sp', title='?'>sp</a>.IdToPiece(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg', title='?'>seg</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', title='int'>end</a>].item())):
<span class='lineno'> 450</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cnt_ngram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cnt_ngram', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cnt_ngram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cnt_ngram', title='int'>cnt_ngram</a></a> += 1
<span class='lineno'> 451</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cnt_ngram', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cnt_ngram', title='int'>cnt_ngram</a> &gt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.n', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.n', title='int'>n</a>:
<span class='lineno'> 452</span>           break
<span class='lineno'> 453</span> 
<span class='lineno'> 454</span>       # select current piece
<span class='lineno'> 455</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', title='?'>mask</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', title='int'>end</a>] = True
<span class='lineno'> 456</span> 
<span class='lineno'> 457</span>       # update the end pointer and increment num_predict
<span class='lineno'> 458</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', title='int'>end</a></a> += 1
<span class='lineno'> 459</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', title='int'>num_predict</a></a> += 1
<span class='lineno'> 460</span> 
<span class='lineno'> 461</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', title='None'>goal_num_predict</a> is not None and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', title='int'>num_predict</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', title='None'>goal_num_predict</a>:
<span class='lineno'> 462</span>         break
<span class='lineno'> 463</span> 
<span class='lineno'> 464</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cur_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.cur_len', title='int'>cur_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.end', title='int'>end</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.r_ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.r_ctx', title='int'>r_ctx</a>
<span class='lineno'> 465</span> 
<span class='lineno'> 466</span>   while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', title='None'>goal_num_predict</a> is not None and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', title='int'>num_predict</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.goal_num_predict', title='None'>goal_num_predict</a>:
<span class='lineno'> 467</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.i', title='?'>i</a> = np.random.randint(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.seg_len', title='int'>seg_len</a>)
<span class='lineno'> 468</span>     if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', title='?'>mask</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.i', title='?'>i</a>]:
<span class='lineno'> 469</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', title='?'>mask</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.i', title='?'>i</a>] = True
<span class='lineno'> 470</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.num_predict', title='int'>num_predict</a></a> += 1
<span class='lineno'> 471</span> 
<span class='lineno'> 472</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.reverse', title='bool'>reverse</a>:
<span class='lineno'> 473</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', title='?'>mask</a> = np.flip(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', title='?'>mask</a>, 0)
<span class='lineno'> 474</span> 
<span class='lineno'> 475</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask_ngram.mask', title='?'>mask</a>
<span class='lineno'> 476</span> 
<span class='lineno'> 477</span> 
<span class='lineno'> 478</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords', title='(?, ?, ?, ?, ?, ?, ?) -> (str, int) / (str, str, [?], ?, ?, ?, ?) -> (str, int)'>create_tfrecords</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_dir', title='str'>save_dir</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.basename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.basename', title='str'>basename</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='[?]'>data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', title='?'>bsz_per_host</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', title='?'>seq_len</a>,
<span class='lineno'> 479</span>                      <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bi_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bi_data', title='?'>bi_data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sp', title='?'>sp</a>):
<span class='lineno'> 480</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='?'>data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', title='?'>sent_ids</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='[?]'>data</a>[0], <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='[?]'>data</a>[1]
<span class='lineno'> 481</span> 
<span class='lineno'> 482</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_core', title='?'>num_core</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_core_per_host
<span class='lineno'> 483</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_core', title='?'>bsz_per_core</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', title='?'>bsz_per_host</a> // <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_core', title='?'>num_core</a>
<span class='lineno'> 484</span> 
<span class='lineno'> 485</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bi_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bi_data', title='?'>bi_data</a>:
<span class='lineno'> 486</span>     assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', title='?'>bsz_per_host</a> % (2 * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_core_per_host) == 0
<span class='lineno'> 487</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_data', title='?'>fwd_data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_sent_ids', title='?'>fwd_sent_ids</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify', title='(?, ?, None) -> (?, None) / (?, int, ?) -> (?, ?) / (?, ?, ?) -> (?, ?)'>batchify</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='?'>data</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', title='?'>bsz_per_host</a> // 2, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', title='?'>sent_ids</a>)
<span class='lineno'> 488</span> 
<span class='lineno'> 489</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_data', title='?'>fwd_data</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_data', title='?'>fwd_data</a>.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_core', title='?'>num_core</a>, 1, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_core', title='?'>bsz_per_core</a> // 2, -1)
<span class='lineno'> 490</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_sent_ids', title='?'>fwd_sent_ids</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_sent_ids', title='?'>fwd_sent_ids</a>.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_core', title='?'>num_core</a>, 1, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_core', title='?'>bsz_per_core</a> // 2, -1)
<span class='lineno'> 491</span> 
<span class='lineno'> 492</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bwd_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bwd_data', title='?'>bwd_data</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_data', title='?'>fwd_data</a>[:, :, :, ::-1]
<span class='lineno'> 493</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bwd_sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bwd_sent_ids', title='?'>bwd_sent_ids</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_sent_ids', title='?'>fwd_sent_ids</a>[:, :, :, ::-1]
<span class='lineno'> 494</span> 
<span class='lineno'> 495</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='?'>data</a> = np.concatenate(
<span class='lineno'> 496</span>         [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_data', title='?'>fwd_data</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bwd_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bwd_data', title='?'>bwd_data</a>], 1).reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', title='?'>bsz_per_host</a>, -1)
<span class='lineno'> 497</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', title='?'>sent_ids</a> = np.concatenate(
<span class='lineno'> 498</span>         [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.fwd_sent_ids', title='?'>fwd_sent_ids</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bwd_sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bwd_sent_ids', title='?'>bwd_sent_ids</a>], 1).reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', title='?'>bsz_per_host</a>, -1)
<span class='lineno'> 499</span>   else:
<span class='lineno'> 500</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='?'>data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', title='?'>sent_ids</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.batchify', title='(?, ?, None) -> (?, None) / (?, int, ?) -> (?, ?) / (?, ?, ?) -> (?, ?)'>batchify</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='?'>data</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', title='?'>bsz_per_host</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', title='?'>sent_ids</a>)
<span class='lineno'> 501</span> 
<span class='lineno'> 502</span>   tf.logging.info(&quot;Raw data shape %s.&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='?'>data</a>.shape)
<span class='lineno'> 503</span> 
<span class='lineno'> 504</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.file_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.file_name', title='str'>file_name</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename', title='(?, ?, ?, ?, str, int, int, None, bool, None) -> str / (str, ?, ?, ?, str, int, int, None, bool, None) -> str / (?, ?, ?, ?, ?, int, int, None, bool, None) -> str'>format_filename</a>(
<span class='lineno'> 505</span>       prefix=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.basename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.basename', title='str'>basename</a>,
<span class='lineno'> 506</span>       bsz_per_host=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', title='?'>bsz_per_host</a>,
<span class='lineno'> 507</span>       seq_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', title='?'>seq_len</a>,
<span class='lineno'> 508</span>       bi_data=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bi_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bi_data', title='?'>bi_data</a>,
<span class='lineno'> 509</span>       suffix=&quot;tfrecords&quot;,
<span class='lineno'> 510</span>       mask_alpha=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.mask_alpha,
<span class='lineno'> 511</span>       mask_beta=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.mask_beta,
<span class='lineno'> 512</span>       reuse_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.reuse_len,
<span class='lineno'> 513</span>       uncased=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.uncased,
<span class='lineno'> 514</span>       fixed_num_predict=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_predict
<span class='lineno'> 515</span>   )
<span class='lineno'> 516</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_path', title='str'>save_path</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_dir', title='str'>save_dir</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.file_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.file_name', title='str'>file_name</a>)
<span class='lineno'> 517</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.record_writer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.record_writer', title='?'>record_writer</a> = tf.python_io.TFRecordWriter(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_path', title='str'>save_path</a>)
<span class='lineno'> 518</span>   tf.logging.info(&quot;Start writing %s.&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_path', title='str'>save_path</a>)
<span class='lineno'> 519</span> 
<span class='lineno'> 520</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', title='int'>num_batch</a> = 0
<span class='lineno'> 521</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', title='?'>reuse_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.reuse_len
<span class='lineno'> 522</span> 
<span class='lineno'> 523</span>   # [sep] x 2 + [cls]
<span class='lineno'> 524</span>   assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', title='?'>reuse_len</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', title='?'>seq_len</a> - 3
<span class='lineno'> 525</span> 
<span class='lineno'> 526</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data_len', title='?'>data_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='?'>data</a>.shape[1]
<span class='lineno'> 527</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sep_array', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sep_array', title='?'>sep_array</a> = np.array([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.SEP_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.SEP_ID', title='int'>SEP_ID</a>], dtype=np.int64)
<span class='lineno'> 528</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cls_array', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cls_array', title='?'>cls_array</a> = np.array([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.CLS_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.CLS_ID', title='int'>CLS_ID</a>], dtype=np.int64)
<span class='lineno'> 529</span> 
<span class='lineno'> 530</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', title='int'>i</a> = 0
<span class='lineno'> 531</span>   while <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', title='int'>i</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', title='?'>seq_len</a> &lt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data_len', title='?'>data_len</a>:
<span class='lineno'> 532</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', title='int'>num_batch</a> % 500 == 0:
<span class='lineno'> 533</span>       tf.logging.info(&quot;Processing batch %d&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', title='int'>num_batch</a>)
<span class='lineno'> 534</span> 
<span class='lineno'> 535</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.all_ok', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.all_ok', title='bool'>all_ok</a> = True
<span class='lineno'> 536</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.features', title='[dict]'>features</a> = []
<span class='lineno'> 537</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', title='int'>idx</a> in range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', title='?'>bsz_per_host</a>):
<span class='lineno'> 538</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.inp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.inp', title='?'>inp</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='?'>data</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', title='int'>idx</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', title='int'>i</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', title='int'>i</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', title='?'>reuse_len</a>]
<span class='lineno'> 539</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.tgt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.tgt', title='?'>tgt</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='?'>data</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', title='int'>idx</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', title='int'>i</a> + 1: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', title='int'>i</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', title='?'>reuse_len</a> + 1]
<span class='lineno'> 540</span> 
<span class='lineno'> 541</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.results', title='[int]'>results</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._split_a_and_b', title='(?, ?, ?, ?, bool) -> [int] / (?, ?, int, int, bool) -> [int]'>_split_a_and_b</a>(
<span class='lineno'> 542</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.data', title='?'>data</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', title='int'>idx</a>],
<span class='lineno'> 543</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sent_ids', title='?'>sent_ids</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', title='int'>idx</a>],
<span class='lineno'> 544</span>           begin_idx=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', title='int'>i</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', title='?'>reuse_len</a>,
<span class='lineno'> 545</span>           tot_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', title='?'>seq_len</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', title='?'>reuse_len</a> - 3,
<span class='lineno'> 546</span>           extend_target=True)
<span class='lineno'> 547</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.results', title='[int]'>results</a> is None:
<span class='lineno'> 548</span>         tf.logging.info(&quot;Break out with seq idx %d&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', title='int'>i</a>)
<span class='lineno'> 549</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.all_ok', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.all_ok', title='bool'>all_ok</a> = False
<span class='lineno'> 550</span>         break
<span class='lineno'> 551</span> 
<span class='lineno'> 552</span>       # unpack the results
<span class='lineno'> 553</span>       (<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_data', title='?'>a_data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_data', title='?'>b_data</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.label', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.label', title='?'>label</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords._', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords._', title='?'>_</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_target', title='?'>a_target</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_target', title='?'>b_target</a>) = tuple(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.results', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.results', title='[int]'>results</a>)
<span class='lineno'> 554</span> 
<span class='lineno'> 555</span>       # sample ngram spans to predict
<span class='lineno'> 556</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reverse', title='bool'>reverse</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bi_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bi_data', title='?'>bi_data</a> and (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.idx', title='int'>idx</a> // (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_core', title='?'>bsz_per_core</a> // 2)) % 2 == 1
<span class='lineno'> 557</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_predict is None:
<span class='lineno'> 558</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_0', title='None'>num_predict_0</a> = <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_1', title='None'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_1', title='None'>num_predict_1</a></a> = None
<span class='lineno'> 559</span>       else:
<span class='lineno'> 560</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_1', title='int'>num_predict_1</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_predict // 2
<span class='lineno'> 561</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_0', title='int'>num_predict_0</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_predict - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_1', title='int'>num_predict_1</a>
<span class='lineno'> 562</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_0', title='None'>mask_0</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask', title='(?, ?, bool, int, None) -> None'>_sample_mask</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sp', title='?'>sp</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.inp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.inp', title='?'>inp</a>, reverse=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reverse', title='bool'>reverse</a>,
<span class='lineno'> 563</span>                             goal_num_predict=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_0', title='int'>num_predict_0</a>)
<span class='lineno'> 564</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_1', title='None'>mask_1</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._sample_mask', title='(?, ?, bool, int, None) -> None'>_sample_mask</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sp', title='?'>sp</a>, np.concatenate([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_data', title='?'>a_data</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sep_array', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sep_array', title='?'>sep_array</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_data', title='?'>b_data</a>,
<span class='lineno'> 565</span>                                                 <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sep_array', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sep_array', title='?'>sep_array</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cls_array', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cls_array', title='?'>cls_array</a>]),
<span class='lineno'> 566</span>                             reverse=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reverse', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reverse', title='bool'>reverse</a>, goal_num_predict=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_predict_1', title='int'>num_predict_1</a>)
<span class='lineno'> 567</span> 
<span class='lineno'> 568</span>       # concatenate data
<span class='lineno'> 569</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cat_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cat_data', title='?'>cat_data</a> = np.concatenate([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.inp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.inp', title='?'>inp</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_data', title='?'>a_data</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sep_array', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sep_array', title='?'>sep_array</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_data', title='?'>b_data</a>,
<span class='lineno'> 570</span>                                  <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sep_array', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.sep_array', title='?'>sep_array</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cls_array', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cls_array', title='?'>cls_array</a>])
<span class='lineno'> 571</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seg_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seg_id', title='[int]'>seg_id</a> = ([0] * (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', title='?'>reuse_len</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_data', title='?'>a_data</a>.shape[0]) + [0] +
<span class='lineno'> 572</span>                 [1] * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_data', title='?'>b_data</a>.shape[0] + [1] + [2])
<span class='lineno'> 573</span>       assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cat_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cat_data', title='?'>cat_data</a>.shape[0] == <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', title='?'>seq_len</a>
<span class='lineno'> 574</span>       assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_0', title='None'>mask_0</a>.shape[0] == <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', title='?'>seq_len</a> // 2
<span class='lineno'> 575</span>       assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_1', title='None'>mask_1</a>.shape[0] == <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', title='?'>seq_len</a> // 2
<span class='lineno'> 576</span> 
<span class='lineno'> 577</span>       # the last two CLS&#39;s are not used, just for padding purposes
<span class='lineno'> 578</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.tgt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.tgt', title='?'>tgt</a> = np.concatenate([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.tgt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.tgt', title='?'>tgt</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.a_target', title='?'>a_target</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.b_target', title='?'>b_target</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cls_array', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cls_array', title='?'>cls_array</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cls_array', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cls_array', title='?'>cls_array</a>])
<span class='lineno'> 579</span>       assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.tgt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.tgt', title='?'>tgt</a>.shape[0] == <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seq_len', title='?'>seq_len</a>
<span class='lineno'> 580</span> 
<span class='lineno'> 581</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.is_masked', title='?'>is_masked</a> = np.concatenate([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_0', title='None'>mask_0</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.mask_1', title='None'>mask_1</a>], 0)
<span class='lineno'> 582</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_predict is not None:
<span class='lineno'> 583</span>         assert np.sum(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.is_masked', title='?'>is_masked</a>) == <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a>.num_predict
<span class='lineno'> 584</span> 
<span class='lineno'> 585</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.feature', title='dict'>feature</a> = {
<span class='lineno'> 586</span>           &quot;input&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', title='[?] -> ? / ? -> ? / [int] -> ?'>_int64_feature</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cat_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.cat_data', title='?'>cat_data</a>),
<span class='lineno'> 587</span>           &quot;is_masked&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', title='[?] -> ? / ? -> ? / [int] -> ?'>_int64_feature</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.is_masked', title='?'>is_masked</a>),
<span class='lineno'> 588</span>           &quot;target&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', title='[?] -> ? / ? -> ? / [int] -> ?'>_int64_feature</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.tgt', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.tgt', title='?'>tgt</a>),
<span class='lineno'> 589</span>           &quot;seg_id&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', title='[?] -> ? / ? -> ? / [int] -> ?'>_int64_feature</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seg_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.seg_id', title='[int]'>seg_id</a>),
<span class='lineno'> 590</span>           &quot;label&quot;: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._int64_feature', title='[?] -> ? / ? -> ? / [int] -> ?'>_int64_feature</a>([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.label', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.label', title='?'>label</a>]),
<span class='lineno'> 591</span>       }
<span class='lineno'> 592</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.features', title='[dict]'>features</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.feature', title='dict'>feature</a>)
<span class='lineno'> 593</span> 
<span class='lineno'> 594</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.all_ok', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.all_ok', title='bool'>all_ok</a>:
<span class='lineno'> 595</span>       assert len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.features', title='[dict]'>features</a>) == <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.bsz_per_host', title='?'>bsz_per_host</a>
<span class='lineno'> 596</span>       for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.feature', title='dict'>feature</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.features', title='[dict]'>features</a>:
<span class='lineno'> 597</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.example', title='?'>example</a> = tf.train.Example(features=tf.train.Features(feature=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.feature', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.feature', title='dict'>feature</a>))
<span class='lineno'> 598</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.record_writer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.record_writer', title='?'>record_writer</a>.write(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.example', title='?'>example</a>.SerializeToString())
<span class='lineno'> 599</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', title='int'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', title='int'>num_batch</a></a> += 1
<span class='lineno'> 600</span>     else:
<span class='lineno'> 601</span>       break
<span class='lineno'> 602</span> 
<span class='lineno'> 603</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', title='int'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.i', title='int'>i</a></a> += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.reuse_len', title='?'>reuse_len</a>
<span class='lineno'> 604</span> 
<span class='lineno'> 605</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.record_writer', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.record_writer', title='?'>record_writer</a>.close()
<span class='lineno'> 606</span>   tf.logging.info(&quot;Done writing %s. Num of batches: %d&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_path', title='str'>save_path</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', title='int'>num_batch</a>)
<span class='lineno'> 607</span> 
<span class='lineno'> 608</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.save_path', title='str'>save_path</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_tfrecords.num_batch', title='int'>num_batch</a>
<span class='lineno'> 609</span> 
<span class='lineno'> 610</span> 
<span class='lineno'> 611</span> ################
<span class='lineno'> 612</span> # get_input_fn #
<span class='lineno'> 613</span> ################
<span class='lineno'> 614</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example', title='(?, bool) -> None / (?, ?) -> None'>_convert_example</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.example', title='?'>example</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.use_bfloat16', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.use_bfloat16', title='bool'>use_bfloat16</a>):
<span class='lineno'> 615</span>   &quot;&quot;&quot;Cast int64 into int32 and float32 to bfloat16 if use_bfloat16.&quot;&quot;&quot;
<span class='lineno'> 616</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.key', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.key', title='<list>'>key</a> in list(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.example', title='?'>example</a>.keys()):
<span class='lineno'> 617</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', title='?'>val</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.example', title='?'>example</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.key', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.key', title='<list>'>key</a>]
<span class='lineno'> 618</span>     if tf.keras.backend.is_sparse(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', title='?'>val</a>):
<span class='lineno'> 619</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', title='?'>val</a> = tf.sparse.to_dense(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', title='?'>val</a>)
<span class='lineno'> 620</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', title='?'>val</a>.dtype == tf.int64:
<span class='lineno'> 621</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', title='?'>val</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', title='?'>val</a>, tf.int32)
<span class='lineno'> 622</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.use_bfloat16', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.use_bfloat16', title='bool'>use_bfloat16</a> and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', title='?'>val</a>.dtype == tf.float32:
<span class='lineno'> 623</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', title='?'>val</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', title='?'>val</a>, tf.bfloat16)
<span class='lineno'> 624</span> 
<span class='lineno'> 625</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.example', title='?'>example</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.key', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.key', title='<list>'>key</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example.val', title='?'>val</a>
<span class='lineno'> 626</span> 
<span class='lineno'> 627</span> 
<span class='lineno'> 628</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset', title='(? -> ?, {[?] | int}, ?, {[?] | int}, int, int, int, ?) -> None / (? -> None, ?, ?, ?, ?, int, ?, ?) -> None / (?, ?, ?, ?, ?, ?, ?, ?) -> None'>parse_files_to_dataset</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.parser', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.parser', title='? -> None'>parser</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_names', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_names', title='{[?] | int}'>file_names</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.split', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.split', title='?'>split</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_batch', title='{[?] | int}'>num_batch</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_hosts', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_hosts', title='int'>num_hosts</a>,
<span class='lineno'> 629</span>                            <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.host_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.host_id', title='int'>host_id</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_core_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_core_per_host', title='int'>num_core_per_host</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.bsz_per_core', title='?'>bsz_per_core</a>):
<span class='lineno'> 630</span>   # list of file pathes
<span class='lineno'> 631</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files', title='int'>num_files</a> = len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_names', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_names', title='{[?] | int}'>file_names</a>)
<span class='lineno'> 632</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files_per_host', title='int'>num_files_per_host</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files', title='int'>num_files</a> // <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_hosts', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_hosts', title='int'>num_hosts</a>
<span class='lineno'> 633</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.my_start_file_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.my_start_file_id', title='int'>my_start_file_id</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.host_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.host_id', title='int'>host_id</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files_per_host', title='int'>num_files_per_host</a>
<span class='lineno'> 634</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.my_end_file_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.my_end_file_id', title='int'>my_end_file_id</a> = (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.host_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.host_id', title='int'>host_id</a> + 1) * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files_per_host', title='int'>num_files_per_host</a>
<span class='lineno'> 635</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.host_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.host_id', title='int'>host_id</a> == <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_hosts', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_hosts', title='int'>num_hosts</a> - 1:
<span class='lineno'> 636</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.my_end_file_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.my_end_file_id', title='int'>my_end_file_id</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_files', title='int'>num_files</a>
<span class='lineno'> 637</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_paths', title='[?]'>file_paths</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_names', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_names', title='{[?] | int}'>file_names</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.my_start_file_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.my_start_file_id', title='int'>my_start_file_id</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.my_end_file_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.my_end_file_id', title='int'>my_end_file_id</a>]
<span class='lineno'> 638</span>   tf.logging.info(&quot;Host %d handles %d files&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.host_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.host_id', title='int'>host_id</a>, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_paths', title='[?]'>file_paths</a>))
<span class='lineno'> 639</span> 
<span class='lineno'> 640</span>   assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.split', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.split', title='?'>split</a> == &quot;train&quot;
<span class='lineno'> 641</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a> = tf.data.Dataset.from_tensor_slices(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_paths', title='[?]'>file_paths</a>)
<span class='lineno'> 642</span> 
<span class='lineno'> 643</span>   # file-level shuffle
<span class='lineno'> 644</span>   if len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_paths', title='[?]'>file_paths</a>) &gt; 1:
<span class='lineno'> 645</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a>.shuffle(len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.file_paths', title='[?]'>file_paths</a>))
<span class='lineno'> 646</span> 
<span class='lineno'> 647</span>   # Note: we cannot perform sample-level shuffle here because this will violate
<span class='lineno'> 648</span>   # the consecutive requirement of data stream.
<span class='lineno'> 649</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a> = tf.data.TFRecordDataset(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a>)
<span class='lineno'> 650</span> 
<span class='lineno'> 651</span>   # Note: since we are doing online preprocessing, the parsed result of
<span class='lineno'> 652</span>   # the same input at each time will be different. Thus, cache processed data
<span class='lineno'> 653</span>   # is not helpful. It will use a lot of memory and lead to contrainer OOM.
<span class='lineno'> 654</span>   # So, change to cache non-parsed raw data instead.
<span class='lineno'> 655</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a>.cache().map(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.parser', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.parser', title='? -> None'>parser</a>).repeat()
<span class='lineno'> 656</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a>.batch(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.bsz_per_core', title='?'>bsz_per_core</a>, drop_remainder=True)
<span class='lineno'> 657</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a>.prefetch(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_core_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.num_core_per_host', title='int'>num_core_per_host</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.bsz_per_core', title='?'>bsz_per_core</a>)
<span class='lineno'> 658</span> 
<span class='lineno'> 659</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset.dataset', title='?'>dataset</a>
<span class='lineno'> 660</span> 
<span class='lineno'> 661</span> 
<span class='lineno'> 662</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm', title='(?, ?, ?, ?, ?) -> (?, ?, ?, ?, ?)'>_local_perm</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs', title='?'>inputs</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.targets', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.targets', title='?'>targets</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.is_masked', title='?'>is_masked</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_size', title='?'>perm_size</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.seq_len', title='?'>seq_len</a>):
<span class='lineno'> 663</span>   &quot;&quot;&quot;
<span class='lineno'> 664</span>   Sample a permutation of the factorization order, and create an
<span class='lineno'> 665</span>   attention mask accordingly.
<span class='lineno'> 666</span> 
<span class='lineno'> 667</span>   Args:
<span class='lineno'> 668</span>     inputs: int64 Tensor in shape [seq_len], input ids.
<span class='lineno'> 669</span>     targets: int64 Tensor in shape [seq_len], target ids.
<span class='lineno'> 670</span>     is_masked: bool Tensor in shape [seq_len]. True means being selected
<span class='lineno'> 671</span>       for partial prediction.
<span class='lineno'> 672</span>     perm_size: the length of longest permutation. Could be set to be reuse_len.
<span class='lineno'> 673</span>       Should not be larger than reuse_len or there will be data leaks.
<span class='lineno'> 674</span>     seq_len: int, sequence length.
<span class='lineno'> 675</span>   &quot;&quot;&quot;
<span class='lineno'> 676</span> 
<span class='lineno'> 677</span>   # Generate permutation indices
<span class='lineno'> 678</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', title='?'>index</a> = tf.range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.seq_len', title='?'>seq_len</a>, dtype=tf.int64)
<span class='lineno'> 679</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', title='?'>index</a> = tf.transpose(tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', title='?'>index</a>, [-1, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_size', title='?'>perm_size</a>]))
<span class='lineno'> 680</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', title='?'>index</a> = tf.random_shuffle(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', title='?'>index</a>)
<span class='lineno'> 681</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', title='?'>index</a> = tf.reshape(tf.transpose(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', title='?'>index</a>), [-1])
<span class='lineno'> 682</span> 
<span class='lineno'> 683</span>   # `perm_mask` and `target_mask`
<span class='lineno'> 684</span>   # non-functional tokens
<span class='lineno'> 685</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_func_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_func_tokens', title='?'>non_func_tokens</a> = tf.logical_not(tf.logical_or(
<span class='lineno'> 686</span>       tf.equal(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.SEP_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.SEP_ID', title='int'>SEP_ID</a>),
<span class='lineno'> 687</span>       tf.equal(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.CLS_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.CLS_ID', title='int'>CLS_ID</a>)))
<span class='lineno'> 688</span> 
<span class='lineno'> 689</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_mask_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_mask_tokens', title='?'>non_mask_tokens</a> = tf.logical_and(tf.logical_not(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.is_masked', title='?'>is_masked</a>), <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_func_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_func_tokens', title='?'>non_func_tokens</a>)
<span class='lineno'> 690</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.masked_or_func_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.masked_or_func_tokens', title='?'>masked_or_func_tokens</a> = tf.logical_not(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_mask_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_mask_tokens', title='?'>non_mask_tokens</a>)
<span class='lineno'> 691</span> 
<span class='lineno'> 692</span>   # Set the permutation indices of non-masked (&amp; non-funcional) tokens to the
<span class='lineno'> 693</span>   # smallest index (-1):
<span class='lineno'> 694</span>   # (1) they can be seen by all other positions
<span class='lineno'> 695</span>   # (2) they cannot see masked positions, so there won&quot;t be information leak
<span class='lineno'> 696</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.smallest_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.smallest_index', title='?'>smallest_index</a> = -tf.ones([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.seq_len', title='?'>seq_len</a>], dtype=tf.int64)
<span class='lineno'> 697</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.rev_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.rev_index', title='?'>rev_index</a> = tf.where(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_mask_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_mask_tokens', title='?'>non_mask_tokens</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.smallest_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.smallest_index', title='?'>smallest_index</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.index', title='?'>index</a>)
<span class='lineno'> 698</span> 
<span class='lineno'> 699</span>   # Create `target_mask`: non-funcional and maksed tokens
<span class='lineno'> 700</span>   # 1: use mask as input and have loss
<span class='lineno'> 701</span>   # 0: use token (or [SEP], [CLS]) as input and do not have loss
<span class='lineno'> 702</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_tokens', title='?'>target_tokens</a> = tf.logical_and(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.masked_or_func_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.masked_or_func_tokens', title='?'>masked_or_func_tokens</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_func_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.non_func_tokens', title='?'>non_func_tokens</a>)
<span class='lineno'> 703</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_mask', title='?'>target_mask</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_tokens', title='?'>target_tokens</a>, tf.float32)
<span class='lineno'> 704</span> 
<span class='lineno'> 705</span>   # Create `perm_mask`
<span class='lineno'> 706</span>   # `target_tokens` cannot see themselves
<span class='lineno'> 707</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.self_rev_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.self_rev_index', title='?'>self_rev_index</a> = tf.where(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_tokens', title='?'>target_tokens</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.rev_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.rev_index', title='?'>rev_index</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.rev_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.rev_index', title='?'>rev_index</a> + 1)
<span class='lineno'> 708</span> 
<span class='lineno'> 709</span>   # 1: cannot attend if i &lt;= j and j is not non-masked (masked_or_func_tokens)
<span class='lineno'> 710</span>   # 0: can attend if i &gt; j or j is non-masked
<span class='lineno'> 711</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_mask', title='?'>perm_mask</a> = tf.logical_and(
<span class='lineno'> 712</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.self_rev_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.self_rev_index', title='?'>self_rev_index</a>[:, None] &lt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.rev_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.rev_index', title='?'>rev_index</a>[None, :],
<span class='lineno'> 713</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.masked_or_func_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.masked_or_func_tokens', title='?'>masked_or_func_tokens</a>)
<span class='lineno'> 714</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_mask', title='?'>perm_mask</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_mask', title='?'>perm_mask</a>, tf.float32)
<span class='lineno'> 715</span> 
<span class='lineno'> 716</span>   # new target: [next token] for LM and [curr token] (self) for PLM
<span class='lineno'> 717</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.new_targets', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.new_targets', title='?'>new_targets</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs', title='?'>inputs</a>[0: 1], <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.targets', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.targets', title='?'>targets</a>[: -1]],
<span class='lineno'> 718</span>                           axis=0)
<span class='lineno'> 719</span> 
<span class='lineno'> 720</span>   # construct inputs_k
<span class='lineno'> 721</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs_k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs_k', title='?'>inputs_k</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs', title='?'>inputs</a>
<span class='lineno'> 722</span> 
<span class='lineno'> 723</span>   # construct inputs_q
<span class='lineno'> 724</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs_q', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs_q', title='?'>inputs_q</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_mask', title='?'>target_mask</a>
<span class='lineno'> 725</span> 
<span class='lineno'> 726</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.perm_mask', title='?'>perm_mask</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.new_targets', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.new_targets', title='?'>new_targets</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.target_mask', title='?'>target_mask</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs_k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs_k', title='?'>inputs_k</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs_q', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm.inputs_q', title='?'>inputs_q</a>
<span class='lineno'> 727</span> 
<span class='lineno'> 728</span> 
<span class='lineno'> 729</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset', title='(?, int, int, ?, {[?] | int}, {[?] | int}, ?, ?, None, None, None, bool, None) -> None / (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, bool, None) -> None'>get_dataset</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.params', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.params', title='?'>params</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_hosts', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_hosts', title='int'>num_hosts</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_core_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_core_per_host', title='int'>num_core_per_host</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.split', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.split', title='?'>split</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.file_names', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.file_names', title='{[?] | int}'>file_names</a>,
<span class='lineno'> 730</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_batch', title='{[?] | int}'>num_batch</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.perm_size', title='None'>perm_size</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.mask_alpha', title='None'>mask_alpha</a>,
<span class='lineno'> 731</span>                 <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.mask_beta', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.mask_beta', title='None'>mask_beta</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.use_bfloat16', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.use_bfloat16', title='bool'>use_bfloat16</a>=False, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', title='None'>num_predict</a>=None):
<span class='lineno'> 732</span> 
<span class='lineno'> 733</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.bsz_per_core', title='?'>bsz_per_core</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.params', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.params', title='?'>params</a>[&quot;batch_size&quot;]
<span class='lineno'> 734</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_hosts', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_hosts', title='int'>num_hosts</a> &gt; 1:
<span class='lineno'> 735</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.host_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.host_id', title='?'>host_id</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.params', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.params', title='?'>params</a>[&quot;context&quot;].current_host
<span class='lineno'> 736</span>   else:
<span class='lineno'> 737</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.host_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.host_id', title='int'>host_id</a> = 0
<span class='lineno'> 738</span> 
<span class='lineno'> 739</span>     #### Function used to parse tfrecord
<span class='lineno'> 740</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser', title='? -> None'>parser</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.record', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.record', title='?'>record</a>):
<span class='lineno'> 741</span>     &quot;&quot;&quot;function used to parse tfrecord.&quot;&quot;&quot;
<span class='lineno'> 742</span> 
<span class='lineno'> 743</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.record_spec', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.record_spec', title='dict'>record_spec</a> = {
<span class='lineno'> 744</span>         &quot;input&quot;: tf.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>], tf.int64),
<span class='lineno'> 745</span>         &quot;target&quot;: tf.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>], tf.int64),
<span class='lineno'> 746</span>         &quot;seg_id&quot;: tf.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>], tf.int64),
<span class='lineno'> 747</span>         &quot;label&quot;: tf.FixedLenFeature([1], tf.int64),
<span class='lineno'> 748</span>         &quot;is_masked&quot;: tf.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>], tf.int64),
<span class='lineno'> 749</span>     }
<span class='lineno'> 750</span> 
<span class='lineno'> 751</span>     # retrieve serialized example
<span class='lineno'> 752</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a> = tf.parse_single_example(
<span class='lineno'> 753</span>         serialized=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.record', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.record', title='?'>record</a>,
<span class='lineno'> 754</span>         features=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.record_spec', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.record_spec', title='dict'>record_spec</a>)
<span class='lineno'> 755</span> 
<span class='lineno'> 756</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.inputs', title='?'>inputs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>.pop(&quot;input&quot;)
<span class='lineno'> 757</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', title='?'>target</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>.pop(&quot;target&quot;)
<span class='lineno'> 758</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.is_masked', title='?'>is_masked</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>.pop(&quot;is_masked&quot;), tf.bool)
<span class='lineno'> 759</span> 
<span class='lineno'> 760</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.non_reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.non_reuse_len', title='?'>non_reuse_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a>
<span class='lineno'> 761</span>     assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.perm_size', title='?'>perm_size</a> &lt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a> and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.perm_size', title='?'>perm_size</a> &lt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.non_reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.non_reuse_len', title='?'>non_reuse_len</a>
<span class='lineno'> 762</span> 
<span class='lineno'> 763</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_0', title='?'>perm_mask_0</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_0', title='?'>target_0</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask_0', title='?'>target_mask_0</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k_0', title='?'>input_k_0</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q_0', title='?'>input_q_0</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm', title='(?, ?, ?, ?, ?) -> (?, ?, ?, ?, ?)'>_local_perm</a>(
<span class='lineno'> 764</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.inputs', title='?'>inputs</a>[:<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a>],
<span class='lineno'> 765</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', title='?'>target</a>[:<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a>],
<span class='lineno'> 766</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.is_masked', title='?'>is_masked</a>[:<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a>],
<span class='lineno'> 767</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.perm_size', title='?'>perm_size</a>,
<span class='lineno'> 768</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a>)
<span class='lineno'> 769</span> 
<span class='lineno'> 770</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_1', title='?'>perm_mask_1</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_1', title='?'>target_1</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask_1', title='?'>target_mask_1</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k_1', title='?'>input_k_1</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q_1', title='?'>input_q_1</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._local_perm', title='(?, ?, ?, ?, ?) -> (?, ?, ?, ?, ?)'>_local_perm</a>(
<span class='lineno'> 771</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.inputs', title='?'>inputs</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a>:],
<span class='lineno'> 772</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', title='?'>target</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a>:],
<span class='lineno'> 773</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.is_masked', title='?'>is_masked</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a>:],
<span class='lineno'> 774</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.perm_size', title='?'>perm_size</a>,
<span class='lineno'> 775</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.non_reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.non_reuse_len', title='?'>non_reuse_len</a>)
<span class='lineno'> 776</span> 
<span class='lineno'> 777</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_0', title='?'>perm_mask_0</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_0', title='?'>perm_mask_0</a>, tf.ones([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.non_reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.non_reuse_len', title='?'>non_reuse_len</a>])],
<span class='lineno'> 778</span>                             axis=1)
<span class='lineno'> 779</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_1', title='?'>perm_mask_1</a> = tf.concat([tf.zeros([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.non_reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.non_reuse_len', title='?'>non_reuse_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.reuse_len', title='?'>reuse_len</a>]), <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_1', title='?'>perm_mask_1</a>],
<span class='lineno'> 780</span>                             axis=1)
<span class='lineno'> 781</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask', title='?'>perm_mask</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_0', title='?'>perm_mask_0</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask_1', title='?'>perm_mask_1</a>], axis=0)
<span class='lineno'> 782</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', title='?'>target</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_0', title='?'>target_0</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_1', title='?'>target_1</a>], axis=0)
<span class='lineno'> 783</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask', title='?'>target_mask</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask_0', title='?'>target_mask_0</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask_1', title='?'>target_mask_1</a>], axis=0)
<span class='lineno'> 784</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k', title='?'>input_k</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k_0', title='?'>input_k_0</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k_1', title='?'>input_k_1</a>], axis=0)
<span class='lineno'> 785</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q', title='?'>input_q</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q_0', title='?'>input_q_0</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q_1', title='?'>input_q_1</a>], axis=0)
<span class='lineno'> 786</span> 
<span class='lineno'> 787</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', title='None'>num_predict</a> is not None:
<span class='lineno'> 788</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.indices', title='?'>indices</a> = tf.range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>, dtype=tf.int64)
<span class='lineno'> 789</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.bool_target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.bool_target_mask', title='?'>bool_target_mask</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask', title='?'>target_mask</a>, tf.bool)
<span class='lineno'> 790</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.indices', title='?'>indices</a> = tf.boolean_mask(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.indices', title='?'>indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.bool_target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.bool_target_mask', title='?'>bool_target_mask</a>)
<span class='lineno'> 791</span> 
<span class='lineno'> 792</span>       ##### extra padding due to CLS/SEP introduced after prepro
<span class='lineno'> 793</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.actual_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.actual_num_predict', title='?'>actual_num_predict</a> = tf.shape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.indices', title='?'>indices</a>)[0]
<span class='lineno'> 794</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.pad_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.pad_len', title='None'>pad_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', title='None'>num_predict</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.actual_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.actual_num_predict', title='?'>actual_num_predict</a>
<span class='lineno'> 795</span> 
<span class='lineno'> 796</span>       ##### target_mapping
<span class='lineno'> 797</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mapping', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mapping', title='?'>target_mapping</a> = tf.one_hot(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.indices', title='?'>indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>, dtype=tf.float32)
<span class='lineno'> 798</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.paddings', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.paddings', title='?'>paddings</a> = tf.zeros([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.pad_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.pad_len', title='None'>pad_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>], dtype=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mapping', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mapping', title='?'>target_mapping</a>.dtype)
<span class='lineno'> 799</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mapping', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mapping', title='?'>target_mapping</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mapping', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mapping', title='?'>target_mapping</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.paddings', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.paddings', title='?'>paddings</a>], axis=0)
<span class='lineno'> 800</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>[&quot;target_mapping&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mapping', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mapping', title='?'>target_mapping</a>,
<span class='lineno'> 801</span>                                              [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', title='None'>num_predict</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 802</span> 
<span class='lineno'> 803</span>       ##### target
<span class='lineno'> 804</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', title='?'>target</a> = tf.boolean_mask(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', title='?'>target</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.bool_target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.bool_target_mask', title='?'>bool_target_mask</a>)
<span class='lineno'> 805</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.paddings', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.paddings', title='?'>paddings</a> = tf.zeros([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.pad_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.pad_len', title='None'>pad_len</a>], dtype=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', title='?'>target</a>.dtype)
<span class='lineno'> 806</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', title='?'>target</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', title='?'>target</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.paddings', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.paddings', title='?'>paddings</a>], axis=0)
<span class='lineno'> 807</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>[&quot;target&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', title='?'>target</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', title='None'>num_predict</a>])
<span class='lineno'> 808</span> 
<span class='lineno'> 809</span>       ##### target mask
<span class='lineno'> 810</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask', title='?'>target_mask</a> = tf.concat(
<span class='lineno'> 811</span>           [tf.ones([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.actual_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.actual_num_predict', title='?'>actual_num_predict</a>], dtype=tf.float32),
<span class='lineno'> 812</span>            tf.zeros([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.pad_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.pad_len', title='None'>pad_len</a>], dtype=tf.float32)],
<span class='lineno'> 813</span>           axis=0)
<span class='lineno'> 814</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>[&quot;target_mask&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask', title='?'>target_mask</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_predict', title='None'>num_predict</a>])
<span class='lineno'> 815</span>     else:
<span class='lineno'> 816</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>[&quot;target&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target', title='?'>target</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 817</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>[&quot;target_mask&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.target_mask', title='?'>target_mask</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 818</span> 
<span class='lineno'> 819</span>     # reshape back to fixed shape
<span class='lineno'> 820</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>[&quot;perm_mask&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.perm_mask', title='?'>perm_mask</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 821</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>[&quot;input_k&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_k', title='?'>input_k</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 822</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>[&quot;input_q&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.input_q', title='?'>input_q</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 823</span> 
<span class='lineno'> 824</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data._convert_example', title='(?, bool) -> None / (?, ?) -> None'>_convert_example</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.use_bfloat16', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.use_bfloat16', title='bool'>use_bfloat16</a>)
<span class='lineno'> 825</span> 
<span class='lineno'> 826</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.k', title='?'>k</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.v', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.v', title='?'>v</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>.items():
<span class='lineno'> 827</span>       tf.logging.info(&quot;%s: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.k', title='?'>k</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.v', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.v', title='?'>v</a>)
<span class='lineno'> 828</span> 
<span class='lineno'> 829</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser.example', title='?'>example</a>
<span class='lineno'> 830</span> 
<span class='lineno'> 831</span>   # Get dataset
<span class='lineno'> 832</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.dataset', title='None'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.parse_files_to_dataset', title='(? -> ?, {[?] | int}, ?, {[?] | int}, int, int, int, ?) -> None / (? -> None, ?, ?, ?, ?, int, ?, ?) -> None / (?, ?, ?, ?, ?, ?, ?, ?) -> None'>parse_files_to_dataset</a>(
<span class='lineno'> 833</span>       parser=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.parser', title='? -> None'>parser</a>,
<span class='lineno'> 834</span>       file_names=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.file_names', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.file_names', title='{[?] | int}'>file_names</a>,
<span class='lineno'> 835</span>       split=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.split', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.split', title='?'>split</a>,
<span class='lineno'> 836</span>       num_batch=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_batch', title='{[?] | int}'>num_batch</a>,
<span class='lineno'> 837</span>       num_hosts=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_hosts', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_hosts', title='int'>num_hosts</a>,
<span class='lineno'> 838</span>       host_id=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.host_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.host_id', title='int'>host_id</a>,
<span class='lineno'> 839</span>       num_core_per_host=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_core_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.num_core_per_host', title='int'>num_core_per_host</a>,
<span class='lineno'> 840</span>       bsz_per_core=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.bsz_per_core', title='?'>bsz_per_core</a>)
<span class='lineno'> 841</span> 
<span class='lineno'> 842</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset.dataset', title='None'>dataset</a>
<span class='lineno'> 843</span> 
<span class='lineno'> 844</span> 
<span class='lineno'> 845</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn', title='(?, ?, ?, ?, ?, ?, int, int, None, None, None, bool, None, bool, None) -> (? -> None, dict)'>get_input_fn</a>(
<span class='lineno'> 846</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.tfrecord_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.tfrecord_dir', title='?'>tfrecord_dir</a>,
<span class='lineno'> 847</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.split', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.split', title='?'>split</a>,
<span class='lineno'> 848</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.bsz_per_host', title='?'>bsz_per_host</a>,
<span class='lineno'> 849</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.seq_len', title='?'>seq_len</a>,
<span class='lineno'> 850</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.reuse_len', title='?'>reuse_len</a>,
<span class='lineno'> 851</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.bi_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.bi_data', title='?'>bi_data</a>,
<span class='lineno'> 852</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_hosts', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_hosts', title='int'>num_hosts</a>=1,
<span class='lineno'> 853</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_core_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_core_per_host', title='int'>num_core_per_host</a>=1,
<span class='lineno'> 854</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.perm_size', title='None'>perm_size</a>=None,
<span class='lineno'> 855</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_alpha', title='None'>mask_alpha</a>=None,
<span class='lineno'> 856</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_beta', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_beta', title='None'>mask_beta</a>=None,
<span class='lineno'> 857</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.uncased', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.uncased', title='bool'>uncased</a>=False,
<span class='lineno'> 858</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_passes', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_passes', title='None'>num_passes</a>=None,
<span class='lineno'> 859</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.use_bfloat16', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.use_bfloat16', title='bool'>use_bfloat16</a>=False,
<span class='lineno'> 860</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_predict', title='None'>num_predict</a>=None):
<span class='lineno'> 861</span> 
<span class='lineno'> 862</span>   # Merge all record infos into a single one
<span class='lineno'> 863</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_glob_base', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_glob_base', title='str'>record_glob_base</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.format_filename', title='(?, ?, ?, ?, str, int, int, None, bool, None) -> str / (str, ?, ?, ?, str, int, int, None, bool, None) -> str / (?, ?, ?, ?, ?, int, int, None, bool, None) -> str'>format_filename</a>(
<span class='lineno'> 864</span>       prefix=&quot;record_info-{}-*&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.split', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.split', title='?'>split</a>),
<span class='lineno'> 865</span>       bsz_per_host=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.bsz_per_host', title='?'>bsz_per_host</a>,
<span class='lineno'> 866</span>       seq_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.seq_len', title='?'>seq_len</a>,
<span class='lineno'> 867</span>       bi_data=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.bi_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.bi_data', title='?'>bi_data</a>,
<span class='lineno'> 868</span>       suffix=&quot;json&quot;,
<span class='lineno'> 869</span>       mask_alpha=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_alpha', title='None'>mask_alpha</a>,
<span class='lineno'> 870</span>       mask_beta=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_beta', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_beta', title='None'>mask_beta</a>,
<span class='lineno'> 871</span>       reuse_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.reuse_len', title='?'>reuse_len</a>,
<span class='lineno'> 872</span>       uncased=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.uncased', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.uncased', title='bool'>uncased</a>,
<span class='lineno'> 873</span>       fixed_num_predict=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_predict', title='None'>num_predict</a>)
<span class='lineno'> 874</span> 
<span class='lineno'> 875</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', title='dict'>record_info</a> = {&quot;num_batch&quot;: 0, &quot;filenames&quot;: []}
<span class='lineno'> 876</span> 
<span class='lineno'> 877</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.tfrecord_dirs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.tfrecord_dirs', title='?'>tfrecord_dirs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.tfrecord_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.tfrecord_dir', title='?'>tfrecord_dir</a>.split(&quot;,&quot;)
<span class='lineno'> 878</span>   tf.logging.info(&quot;Use the following tfrecord dirs: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.tfrecord_dirs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.tfrecord_dirs', title='?'>tfrecord_dirs</a>)
<span class='lineno'> 879</span> 
<span class='lineno'> 880</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.idx', title='?'>idx</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_dir', title='?'>record_dir</a> in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.tfrecord_dirs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.tfrecord_dirs', title='?'>tfrecord_dirs</a>):
<span class='lineno'> 881</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_glob', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_glob', title='str'>record_glob</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_dir', title='?'>record_dir</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_glob_base', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_glob_base', title='str'>record_glob_base</a>)
<span class='lineno'> 882</span>     tf.logging.info(&quot;[%d] Record glob: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.idx', title='?'>idx</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_glob', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_glob', title='str'>record_glob</a>)
<span class='lineno'> 883</span> 
<span class='lineno'> 884</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_paths', title='?'>record_paths</a> = sorted(tf.gfile.Glob(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_glob', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_glob', title='str'>record_glob</a>))
<span class='lineno'> 885</span>     tf.logging.info(&quot;[%d] Num of record info path: %d&quot;,
<span class='lineno'> 886</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.idx', title='?'>idx</a>, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_paths', title='?'>record_paths</a>))
<span class='lineno'> 887</span> 
<span class='lineno'> 888</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a> = {&quot;num_batch&quot;: 0, &quot;filenames&quot;: []}
<span class='lineno'> 889</span> 
<span class='lineno'> 890</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_path', title='?'>record_info_path</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_paths', title='?'>record_paths</a>:
<span class='lineno'> 891</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_passes', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_passes', title='None'>num_passes</a> is not None:
<span class='lineno'> 892</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_name', title='str'>record_info_name</a> = os.path.basename(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_path', title='?'>record_info_path</a>)
<span class='lineno'> 893</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.fields', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.fields', title='[str]'>fields</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_name', title='str'>record_info_name</a>.split(&quot;.&quot;)[0].split(&quot;-&quot;)
<span class='lineno'> 894</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.pass_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.pass_id', title='int'>pass_id</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.fields', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.fields', title='[str]'>fields</a>[-1])
<span class='lineno'> 895</span>         if len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.fields', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.fields', title='[str]'>fields</a>) == 5 and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.pass_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.pass_id', title='int'>pass_id</a> &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_passes', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_passes', title='None'>num_passes</a>:
<span class='lineno'> 896</span>           tf.logging.info(&quot;Skip pass %d: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.pass_id', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.pass_id', title='int'>pass_id</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_name', title='str'>record_info_name</a>)
<span class='lineno'> 897</span>           continue
<span class='lineno'> 898</span> 
<span class='lineno'> 899</span>       with tf.gfile.Open(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info_path', title='?'>record_info_path</a>, &quot;r&quot;) as <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.fp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.fp', title='?'>fp</a>:
<span class='lineno'> 900</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', title='?'>info</a> = json.load(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.fp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.fp', title='?'>fp</a>)
<span class='lineno'> 901</span>         if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_passes', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_passes', title='None'>num_passes</a> is not None:
<span class='lineno'> 902</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.eff_num_passes', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.eff_num_passes', title='int'>eff_num_passes</a> = min(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_passes', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_passes', title='None'>num_passes</a>, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', title='?'>info</a>[&quot;filenames&quot;]))
<span class='lineno'> 903</span>           <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.ratio', title='int'>ratio</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.eff_num_passes', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.eff_num_passes', title='int'>eff_num_passes</a> / len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', title='?'>info</a>[&quot;filenames&quot;])
<span class='lineno'> 904</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a>[&quot;num_batch&quot;] += int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', title='?'>info</a>[&quot;num_batch&quot;] * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.ratio', title='int'>ratio</a>)
<span class='lineno'> 905</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;] += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', title='?'>info</a>[&quot;filenames&quot;][:<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.eff_num_passes', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.eff_num_passes', title='int'>eff_num_passes</a>]
<span class='lineno'> 906</span>         else:
<span class='lineno'> 907</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a>[&quot;num_batch&quot;] += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', title='?'>info</a>[&quot;num_batch&quot;]
<span class='lineno'> 908</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;] += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.info', title='?'>info</a>[&quot;filenames&quot;]
<span class='lineno'> 909</span> 
<span class='lineno'> 910</span>     # overwrite directory for `cur_record_info`
<span class='lineno'> 911</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.new_filenames', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.new_filenames', title='[str]'>new_filenames</a> = []
<span class='lineno'> 912</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.filename', title='?'>filename</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;]:
<span class='lineno'> 913</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.basename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.basename', title='str'>basename</a> = os.path.basename(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.filename', title='?'>filename</a>)
<span class='lineno'> 914</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.new_filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.new_filename', title='str'>new_filename</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_dir', title='?'>record_dir</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.basename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.basename', title='str'>basename</a>)
<span class='lineno'> 915</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.new_filenames', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.new_filenames', title='[str]'>new_filenames</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.new_filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.new_filename', title='str'>new_filename</a>)
<span class='lineno'> 916</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;] = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.new_filenames', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.new_filenames', title='[str]'>new_filenames</a>
<span class='lineno'> 917</span> 
<span class='lineno'> 918</span>     tf.logging.info(&quot;[Dir %d] Number of chosen batches: %s&quot;,
<span class='lineno'> 919</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.idx', title='?'>idx</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a>[&quot;num_batch&quot;])
<span class='lineno'> 920</span>     tf.logging.info(&quot;[Dir %d] Number of chosen files: %s&quot;,
<span class='lineno'> 921</span>                     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.idx', title='?'>idx</a>, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;]))
<span class='lineno'> 922</span>     tf.logging.info(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;])
<span class='lineno'> 923</span> 
<span class='lineno'> 924</span>     # add `cur_record_info` to global `record_info`
<span class='lineno'> 925</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', title='dict'>record_info</a>[&quot;num_batch&quot;] += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a>[&quot;num_batch&quot;]
<span class='lineno'> 926</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', title='dict'>record_info</a>[&quot;filenames&quot;] += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;]
<span class='lineno'> 927</span> 
<span class='lineno'> 928</span>   tf.logging.info(&quot;Total number of batches: %d&quot;,
<span class='lineno'> 929</span>                   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', title='dict'>record_info</a>[&quot;num_batch&quot;])
<span class='lineno'> 930</span>   tf.logging.info(&quot;Total number of files: %d&quot;,
<span class='lineno'> 931</span>                   len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', title='dict'>record_info</a>[&quot;filenames&quot;]))
<span class='lineno'> 932</span>   tf.logging.info(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', title='dict'>record_info</a>[&quot;filenames&quot;])
<span class='lineno'> 933</span> 
<span class='lineno'> 934</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn', title='? -> None'>input_fn</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn.params', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn.params', title='?'>params</a>):
<span class='lineno'> 935</span>     &quot;&quot;&quot;docs.&quot;&quot;&quot;
<span class='lineno'> 936</span>     assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn.params', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn.params', title='?'>params</a>[&quot;batch_size&quot;] * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_core_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_core_per_host', title='int'>num_core_per_host</a> == <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.bsz_per_host', title='?'>bsz_per_host</a>
<span class='lineno'> 937</span> 
<span class='lineno'> 938</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn.dataset', title='None'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_dataset', title='(?, int, int, ?, {[?] | int}, {[?] | int}, ?, ?, None, None, None, bool, None) -> None / (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, bool, None) -> None'>get_dataset</a>(
<span class='lineno'> 939</span>         params=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn.params', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn.params', title='?'>params</a>,
<span class='lineno'> 940</span>         num_hosts=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_hosts', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_hosts', title='int'>num_hosts</a>,
<span class='lineno'> 941</span>         num_core_per_host=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_core_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_core_per_host', title='int'>num_core_per_host</a>,
<span class='lineno'> 942</span>         split=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.split', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.split', title='?'>split</a>,
<span class='lineno'> 943</span>         file_names=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', title='dict'>record_info</a>[&quot;filenames&quot;],
<span class='lineno'> 944</span>         num_batch=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', title='dict'>record_info</a>[&quot;num_batch&quot;],
<span class='lineno'> 945</span>         seq_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.seq_len', title='?'>seq_len</a>,
<span class='lineno'> 946</span>         reuse_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.reuse_len', title='?'>reuse_len</a>,
<span class='lineno'> 947</span>         perm_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.perm_size', title='None'>perm_size</a>,
<span class='lineno'> 948</span>         mask_alpha=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_alpha', title='None'>mask_alpha</a>,
<span class='lineno'> 949</span>         mask_beta=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_beta', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.mask_beta', title='None'>mask_beta</a>,
<span class='lineno'> 950</span>         use_bfloat16=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.use_bfloat16', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.use_bfloat16', title='bool'>use_bfloat16</a>,
<span class='lineno'> 951</span>         num_predict=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.num_predict', title='None'>num_predict</a>)
<span class='lineno'> 952</span> 
<span class='lineno'> 953</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn.dataset', title='None'>dataset</a>
<span class='lineno'> 954</span> 
<span class='lineno'> 955</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.input_fn', title='? -> None'>input_fn</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.get_input_fn.record_info', title='dict'>record_info</a>
<span class='lineno'> 956</span> 
<span class='lineno'> 957</span> 
<span class='lineno'> 958</span> if __name__ == &quot;__main__&quot;:
<span class='lineno'> 959</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.FLAGS', title='?'>FLAGS</a> = flags.FLAGS
<span class='lineno'> 960</span>   flags.DEFINE_bool(&quot;use_tpu&quot;, True, help=&quot;whether to use TPUs&quot;)
<span class='lineno'> 961</span>   flags.DEFINE_integer(&quot;bsz_per_host&quot;, 32, help=&quot;batch size per host.&quot;)
<span class='lineno'> 962</span>   flags.DEFINE_integer(&quot;num_core_per_host&quot;, 8, help=&quot;num TPU cores per host.&quot;)
<span class='lineno'> 963</span> 
<span class='lineno'> 964</span>   flags.DEFINE_integer(&quot;seq_len&quot;, 512,
<span class='lineno'> 965</span>                        help=&quot;Sequence length.&quot;)
<span class='lineno'> 966</span>   flags.DEFINE_integer(&quot;reuse_len&quot;, 256,
<span class='lineno'> 967</span>                        help=&quot;Number of token that can be reused as memory. &quot;
<span class='lineno'> 968</span>                        &quot;Could be half of `seq_len`.&quot;)
<span class='lineno'> 969</span>   flags.DEFINE_bool(&quot;uncased&quot;, False, help=&quot;Use uncased inputs or not.&quot;)
<span class='lineno'> 970</span>   flags.DEFINE_bool(&quot;bi_data&quot;, True,
<span class='lineno'> 971</span>                     help=&quot;whether to create bidirectional data&quot;)
<span class='lineno'> 972</span>   flags.DEFINE_integer(&quot;mask_alpha&quot;, default=6,
<span class='lineno'> 973</span>                        help=&quot;How many tokens to form a group.&quot;)
<span class='lineno'> 974</span>   flags.DEFINE_integer(&quot;mask_beta&quot;, default=1,
<span class='lineno'> 975</span>                        help=&quot;How many tokens to mask within each group.&quot;)
<span class='lineno'> 976</span>   flags.DEFINE_bool(&quot;use_eod&quot;, True,
<span class='lineno'> 977</span>                     help=&quot;whether to append EOD at the end of a doc.&quot;)
<span class='lineno'> 978</span>   flags.DEFINE_bool(&quot;from_raw_text&quot;, True,
<span class='lineno'> 979</span>                     help=&quot;Whether the input is raw text or encoded ids.&quot;)
<span class='lineno'> 980</span>   flags.DEFINE_integer(&quot;num_predict&quot;, default=85,
<span class='lineno'> 981</span>                        help=&quot;Num of tokens to predict.&quot;)
<span class='lineno'> 982</span> 
<span class='lineno'> 983</span>   flags.DEFINE_string(&quot;input_glob&quot;, &quot;data/example/*.txt&quot;,
<span class='lineno'> 984</span>                       help=&quot;Input file glob.&quot;)
<span class='lineno'> 985</span>   flags.DEFINE_string(&quot;sp_path&quot;, &quot;&quot;, help=&quot;Path to the sentence piece model.&quot;)
<span class='lineno'> 986</span>   flags.DEFINE_string(&quot;save_dir&quot;, &quot;proc_data/example&quot;,
<span class='lineno'> 987</span>                       help=&quot;Directory for saving the processed data.&quot;)
<span class='lineno'> 988</span>   flags.DEFINE_enum(&quot;split&quot;, &quot;train&quot;, [&quot;train&quot;, &quot;dev&quot;, &quot;test&quot;],
<span class='lineno'> 989</span>                     help=&quot;Save the data as which split.&quot;)
<span class='lineno'> 990</span> 
<span class='lineno'> 991</span>   flags.DEFINE_integer(&quot;pass_id&quot;, 0, help=&quot;ID of the current pass.&quot;
<span class='lineno'> 992</span>                        &quot;Different passes sample different negative segment.&quot;)
<span class='lineno'> 993</span>   flags.DEFINE_integer(&quot;num_task&quot;, 1, help=&quot;Number of total tasks.&quot;)
<span class='lineno'> 994</span>   flags.DEFINE_integer(&quot;task&quot;, 0, help=&quot;The Task ID. This value is used when &quot;
<span class='lineno'> 995</span>                        &quot;using multiple workers to identify each worker.&quot;)
<span class='lineno'> 996</span> 
<span class='lineno'> 997</span>   tf.logging.set_verbosity(tf.logging.INFO)
<span class='lineno'> 998</span>   app.run(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.preprocess_pretrain_data.create_data', title='? -> None'>create_data</a>)
</pre></td></tr></table></body></html>