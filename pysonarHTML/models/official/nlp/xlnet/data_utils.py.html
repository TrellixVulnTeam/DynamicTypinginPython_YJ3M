<html>
<head>
<meta charset="utf-8">
<title>/home/xxm/Desktop/EMSE/dataset/models/official/nlp/xlnet/data_utils.py</title>
<style type='text/css'>
body { color: #666666; }
a {
    text-decoration: none; color: #5AA2A7;
    border: solid 1px rgba(255,255,255,0);
}
a.active {
    background: -webkit-linear-gradient(top,rgba(255, 255, 200, 0.35) 0,rgba(255, 255, 200, 0.55) 100%);
    border: solid 1px #E5E600;
}
table, th, td { border: 1px solid lightgrey; padding: 5px; corner: rounded; }
.builtin {color: #B17E41;}
.comment, .block-comment {color: #aaaaaa; font-style: italic;}
.constant {color: #888888;}
.decorator {color: #778899;}
.doc-string {color: #aaaaaa;}
.error {border-bottom: 1px solid red;}
.field-name {color: #2e8b57;}
.function {color: #4682b4;}
.identifier {color: #8b7765;}
.info {border-bottom: 1px dotted RoyalBlue;}
.keyword {color: #0000cd;}
.lineno {color: #cccccc;}
.number {color: #483d8b;}
.parameter {color: #777777;}
.string {color: #999999;}
.type-name {color: #4682b4;}
.warning {border-bottom: 1px solid orange; padding-bottom: 1px}
</style>
<script language="JavaScript" type="text/javascript">
var highlighted;

function highlight(xid)
{
    var elms = document.querySelectorAll('[xid="' + xid + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "active";
    }
    highlighted = xid;
}

function clearHighlight() {
    var elms = document.querySelectorAll('[xid="' + highlighted + '"]');
    for (k in elms) {
        v = elms[k]
        v.className = "";
    }
}

window.onload =
    function (e) {
        var tags = document.getElementsByTagName("A")
        for (var i = 0; i < tags.length; i++) {
            tags[i].onmouseover =
                function (e) {
                    clearHighlight();
                    var xid = e.toElement.getAttribute('xid');
                    highlight(xid);
                }
        }
    }</script>
</head>
<body>
<table width=100% border='1px solid gray'><tr><td valign='top'><ul>
<li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols'>special_symbols</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.VOCAB_SIZE', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.VOCAB_SIZE'>VOCAB_SIZE</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.UNK_ID', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.UNK_ID'>UNK_ID</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.CLS_ID', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.CLS_ID'>CLS_ID</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEP_ID', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEP_ID'>SEP_ID</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.MASK_ID', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.MASK_ID'>MASK_ID</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.EOD_ID', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.EOD_ID'>EOD_ID</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_P', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_P'>SEG_ID_P</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_Q', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_Q'>SEG_ID_Q</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_CLS', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_CLS'>SEG_ID_CLS</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_PAD', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_PAD'>SEG_ID_PAD</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.OnlineMaskingConfig', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.OnlineMaskingConfig'>OnlineMaskingConfig</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder'>file_based_input_fn_builder</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset'>create_classification_dataset</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset'>create_squad_dataset</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator'>get_input_iterator</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data'>get_classification_input_data</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data'>get_squad_input_data</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask'>_idx_pair_to_mask</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask'>_word_span_mask</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask'>_token_span_mask</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask'>_whole_word_mask</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask'>_single_token_mask</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks'>_online_sample_masks</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset'>create_pretrain_dataset</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename'>format_filename</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data'>get_pretrain_input_data</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset'>parse_files_to_dataset</a></li><li><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm', xid='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm'>_local_perm</a></li></ul>
</td><td><pre><span class='lineno'>   1</span> # Copyright 2019 The TensorFlow Authors. All Rights Reserved.
<span class='lineno'>   2</span> #
<span class='lineno'>   3</span> # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
<span class='lineno'>   4</span> # you may not use this file except in compliance with the License.
<span class='lineno'>   5</span> # You may obtain a copy of the License at
<span class='lineno'>   6</span> #
<span class='lineno'>   7</span> #     http://www.apache.org/licenses/LICENSE-2.0
<span class='lineno'>   8</span> #
<span class='lineno'>   9</span> # Unless required by applicable law or agreed to in writing, software
<span class='lineno'>  10</span> # distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<span class='lineno'>  11</span> # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<span class='lineno'>  12</span> # See the License for the specific language governing permissions and
<span class='lineno'>  13</span> # limitations under the License.
<span class='lineno'>  14</span> # ==============================================================================
<span class='lineno'>  15</span> &quot;&quot;&quot;Utilities used for data preparation.&quot;&quot;&quot;
<span class='lineno'>  16</span> 
<span class='lineno'>  17</span> from __future__ import absolute_import
<span class='lineno'>  18</span> from __future__ import division
<span class='lineno'>  19</span> # from __future__ import google_type_annotations
<span class='lineno'>  20</span> from __future__ import print_function
<span class='lineno'>  21</span> 
<span class='lineno'>  22</span> import collections
<span class='lineno'>  23</span> import json
<span class='lineno'>  24</span> import os
<span class='lineno'>  25</span> from absl import logging
<span class='lineno'>  26</span> 
<span class='lineno'>  27</span> import numpy as np
<span class='lineno'>  28</span> import tensorflow as tf
<span class='lineno'>  29</span> 
<span class='lineno'>  30</span> 
<span class='lineno'>  31</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', title='dict'>special_symbols</a> = {
<span class='lineno'>  32</span>     &quot;&lt;unk&gt;&quot;: 0,
<span class='lineno'>  33</span>     &quot;&lt;s&gt;&quot;: 1,
<span class='lineno'>  34</span>     &quot;&lt;/s&gt;&quot;: 2,
<span class='lineno'>  35</span>     &quot;&lt;cls&gt;&quot;: 3,
<span class='lineno'>  36</span>     &quot;&lt;sep&gt;&quot;: 4,
<span class='lineno'>  37</span>     &quot;&lt;pad&gt;&quot;: 5,
<span class='lineno'>  38</span>     &quot;&lt;mask&gt;&quot;: 6,
<span class='lineno'>  39</span>     &quot;&lt;eod&gt;&quot;: 7,
<span class='lineno'>  40</span>     &quot;&lt;eop&gt;&quot;: 8,
<span class='lineno'>  41</span> }
<span class='lineno'>  42</span> 
<span class='lineno'>  43</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.VOCAB_SIZE', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.VOCAB_SIZE', title='int'>VOCAB_SIZE</a> = 32000
<span class='lineno'>  44</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.UNK_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.UNK_ID', title='int'>UNK_ID</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', title='dict'>special_symbols</a>[&quot;&lt;unk&gt;&quot;]
<span class='lineno'>  45</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.CLS_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.CLS_ID', title='int'>CLS_ID</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', title='dict'>special_symbols</a>[&quot;&lt;cls&gt;&quot;]
<span class='lineno'>  46</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEP_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEP_ID', title='int'>SEP_ID</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', title='dict'>special_symbols</a>[&quot;&lt;sep&gt;&quot;]
<span class='lineno'>  47</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.MASK_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.MASK_ID', title='int'>MASK_ID</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', title='dict'>special_symbols</a>[&quot;&lt;mask&gt;&quot;]
<span class='lineno'>  48</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.EOD_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.EOD_ID', title='int'>EOD_ID</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.special_symbols', title='dict'>special_symbols</a>[&quot;&lt;eod&gt;&quot;]
<span class='lineno'>  49</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_P', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_P', title='int'>SEG_ID_P</a> = 0
<span class='lineno'>  50</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_Q', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_Q', title='int'>SEG_ID_Q</a> = 1
<span class='lineno'>  51</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_CLS', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_CLS', title='int'>SEG_ID_CLS</a> = 2
<span class='lineno'>  52</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_PAD', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEG_ID_PAD', title='int'>SEG_ID_PAD</a> = 3
<span class='lineno'>  53</span> 
<span class='lineno'>  54</span> 
<span class='lineno'>  55</span> <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.OnlineMaskingConfig', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.OnlineMaskingConfig', title='<(namedtuple)>'>OnlineMaskingConfig</a> = collections.namedtuple(&quot;OnlineMaskingConfig&quot;, [
<span class='lineno'>  56</span>     &quot;sample_strategy&quot;, &quot;max_num_tokens&quot;, &quot;min_num_tokens&quot;, &quot;max_num_words&quot;,
<span class='lineno'>  57</span>     &quot;min_num_words&quot;])
<span class='lineno'>  58</span> 
<span class='lineno'>  59</span> 
<span class='lineno'>  60</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder', title='(?, ?, ?, ?) -> ? -> ? / (?, dict, int, ?) -> () -> None / (?, dict, ?, ?) -> () -> None'>file_based_input_fn_builder</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', title='?'>input_file</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.name_to_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.name_to_features', title='dict'>name_to_features</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.batch_size', title='int'>batch_size</a>,
<span class='lineno'>  61</span>                                 <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.is_training', title='?'>is_training</a>):
<span class='lineno'>  62</span>   &quot;&quot;&quot;Creates an `input_fn` closure.&quot;&quot;&quot;
<span class='lineno'>  63</span> 
<span class='lineno'>  64</span>   logging.info(&quot;Input tfrecord file %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', title='?'>input_file</a>)
<span class='lineno'>  65</span> 
<span class='lineno'>  66</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record', title='(?, ?) -> None / (?, dict) -> None'>_decode_record</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.record', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.record', title='?'>record</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.name_to_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.name_to_features', title='dict'>name_to_features</a>):
<span class='lineno'>  67</span>     &quot;&quot;&quot;Decodes a record to a TensorFlow example.&quot;&quot;&quot;
<span class='lineno'>  68</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.example', title='?'>example</a> = tf.io.parse_single_example(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.record', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.record', title='?'>record</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.name_to_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.name_to_features', title='dict'>name_to_features</a>)
<span class='lineno'>  69</span> 
<span class='lineno'>  70</span>     # tf.Example only supports tf.int64, but the TPU only supports tf.int32.
<span class='lineno'>  71</span>     # So cast all int64 to int32.
<span class='lineno'>  72</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.name', title='<list>'>name</a> in list(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.example', title='?'>example</a>.keys()):
<span class='lineno'>  73</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.t', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.t', title='?'>t</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.example', title='?'>example</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.name', title='<list>'>name</a>]
<span class='lineno'>  74</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.t', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.t', title='?'>t</a>.dtype == tf.int64:
<span class='lineno'>  75</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.t', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.t', title='?'>t</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.t', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.t', title='?'>t</a>, tf.int32)
<span class='lineno'>  76</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.example', title='?'>example</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.name', title='<list>'>name</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.t', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.t', title='?'>t</a>
<span class='lineno'>  77</span> 
<span class='lineno'>  78</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record.example', title='?'>example</a>
<span class='lineno'>  79</span> 
<span class='lineno'>  80</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn', title='() -> None'>input_fn</a>():
<span class='lineno'>  81</span>     &quot;&quot;&quot;Returns dataset for training/evaluation.&quot;&quot;&quot;
<span class='lineno'>  82</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.num_threads', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.num_threads', title='int'>num_threads</a> = 8
<span class='lineno'>  83</span>     if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.input_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.input_file', title='str'>input_file</a></a>, str):
<span class='lineno'>  84</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a> = tf.data.TFRecordDataset(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.input_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.input_file', title='str'>input_file</a>)
<span class='lineno'>  85</span>       # For training, we want a lot of parallel reading and shuffling.
<span class='lineno'>  86</span>       # For eval, we want no shuffling and parallel reading doesn&#39;t matter.
<span class='lineno'>  87</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.is_training', title='?'>is_training</a>:
<span class='lineno'>  88</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a>.shuffle(2048)
<span class='lineno'>  89</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a>.repeat()
<span class='lineno'>  90</span>     else:
<span class='lineno'>  91</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.cycle_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.cycle_length', title='int'>cycle_length</a> = min(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.num_threads', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.num_threads', title='int'>num_threads</a>, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', title='?'>input_file</a>))
<span class='lineno'>  92</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a> = tf.data.Dataset.from_tensor_slices(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', title='?'>input_file</a>)
<span class='lineno'>  93</span>       # file level shuffle
<span class='lineno'>  94</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a>.shuffle(len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_file', title='?'>input_file</a>)).repeat()
<span class='lineno'>  95</span> 
<span class='lineno'>  96</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a>.interleave(
<span class='lineno'>  97</span>           tf.data.TFRecordDataset,
<span class='lineno'>  98</span>           sloppy=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.is_training', title='?'>is_training</a>,
<span class='lineno'>  99</span>           cycle_length=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.cycle_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.cycle_length', title='int'>cycle_length</a>)
<span class='lineno'> 100</span> 
<span class='lineno'> 101</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.is_training', title='?'>is_training</a>:
<span class='lineno'> 102</span>         # sample level shuffle
<span class='lineno'> 103</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a>.shuffle(buffer_size=2048)
<span class='lineno'> 104</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a>.map(
<span class='lineno'> 105</span>         lambda <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.lambda%97.record', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.lambda%97.record', title='?'>record</a>: <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder._decode_record', title='(?, ?) -> None / (?, dict) -> None'>_decode_record</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.lambda%97.record', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.lambda%97.record', title='?'>record</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.name_to_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.name_to_features', title='dict'>name_to_features</a>),
<span class='lineno'> 106</span>         num_parallel_calls=tf.data.experimental.AUTOTUNE)
<span class='lineno'> 107</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a>.batch(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.batch_size', title='int'>batch_size</a>, drop_remainder=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.is_training', title='?'>is_training</a>)
<span class='lineno'> 108</span> 
<span class='lineno'> 109</span>     # When `input_file` is a path to a single file or a list
<span class='lineno'> 110</span>     # containing a single path, disable auto sharding so that
<span class='lineno'> 111</span>     # same input file is sent to all workers.
<span class='lineno'> 112</span>     if isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.input_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.input_file', title='str'>input_file</a>, str) or len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.input_file', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.input_file', title='str'>input_file</a>) == 1:
<span class='lineno'> 113</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.options', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.options', title='?'>options</a> = tf.data.Options()
<span class='lineno'> 114</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.options', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.options', title='?'>options</a>.experimental_distribute.auto_shard_policy = (
<span class='lineno'> 115</span>           tf.data.experimental.AutoShardPolicy.OFF)
<span class='lineno'> 116</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a>.with_options(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.options', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.options', title='?'>options</a>)
<span class='lineno'> 117</span> 
<span class='lineno'> 118</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a>.prefetch(tf.data.experimental.AUTOTUNE)
<span class='lineno'> 119</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn.d', title='?'>d</a>
<span class='lineno'> 120</span> 
<span class='lineno'> 121</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder.input_fn', title='() -> None'>input_fn</a>
<span class='lineno'> 122</span> 
<span class='lineno'> 123</span> 
<span class='lineno'> 124</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset', title='(?, ?, int, ?) -> None / (?, ?, ?, ?) -> None'>create_classification_dataset</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.file_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.file_path', title='?'>file_path</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.seq_length', title='?'>seq_length</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.batch_size', title='int'>batch_size</a>,
<span class='lineno'> 125</span>                                   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.is_training', title='?'>is_training</a>):
<span class='lineno'> 126</span>   &quot;&quot;&quot;Creates input dataset from (tf)records files for pretraining.&quot;&quot;&quot;
<span class='lineno'> 127</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.name_to_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.name_to_features', title='dict'>name_to_features</a> = {
<span class='lineno'> 128</span>       &quot;input_ids&quot;: tf.io.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.seq_length', title='?'>seq_length</a>], tf.int64),
<span class='lineno'> 129</span>       &quot;input_mask&quot;: tf.io.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.seq_length', title='?'>seq_length</a>], tf.float32),
<span class='lineno'> 130</span>       &quot;segment_ids&quot;: tf.io.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.seq_length', title='?'>seq_length</a>], tf.int64),
<span class='lineno'> 131</span>       &quot;label_ids&quot;: tf.io.FixedLenFeature([], tf.int64),
<span class='lineno'> 132</span>       &quot;is_real_example&quot;: tf.io.FixedLenFeature([], tf.int64),
<span class='lineno'> 133</span>   }
<span class='lineno'> 134</span> 
<span class='lineno'> 135</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.input_fn', title='() -> None'>input_fn</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder', title='(?, ?, ?, ?) -> ? -> ? / (?, dict, int, ?) -> () -> None / (?, dict, ?, ?) -> () -> None'>file_based_input_fn_builder</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.file_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.file_path', title='?'>file_path</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.name_to_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.name_to_features', title='dict'>name_to_features</a>,
<span class='lineno'> 136</span>                                          <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.batch_size', title='int'>batch_size</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.is_training', title='?'>is_training</a>)
<span class='lineno'> 137</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.dataset', title='None'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.input_fn', title='() -> None'>input_fn</a>()
<span class='lineno'> 138</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset.dataset', title='None'>dataset</a>
<span class='lineno'> 139</span> 
<span class='lineno'> 140</span> 
<span class='lineno'> 141</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset', title='(?, ?, ?, ?) -> None / (?, ?, int, ?) -> None'>create_squad_dataset</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.file_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.file_path', title='?'>file_path</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.seq_length', title='?'>seq_length</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.batch_size', title='int'>batch_size</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.is_training', title='?'>is_training</a>):
<span class='lineno'> 142</span>   &quot;&quot;&quot;Creates input dataset from (tf)records files for pretraining.&quot;&quot;&quot;
<span class='lineno'> 143</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.name_to_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.name_to_features', title='dict'>name_to_features</a> = {
<span class='lineno'> 144</span>       &quot;unique_ids&quot;: tf.io.FixedLenFeature([], tf.int64),
<span class='lineno'> 145</span>       &quot;input_ids&quot;: tf.io.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.seq_length', title='?'>seq_length</a>], tf.int64),
<span class='lineno'> 146</span>       &quot;input_mask&quot;: tf.io.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.seq_length', title='?'>seq_length</a>], tf.float32),
<span class='lineno'> 147</span>       &quot;segment_ids&quot;: tf.io.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.seq_length', title='?'>seq_length</a>], tf.int64),
<span class='lineno'> 148</span>       &quot;cls_index&quot;: tf.io.FixedLenFeature([], tf.int64),
<span class='lineno'> 149</span>       &quot;p_mask&quot;: tf.io.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.seq_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.seq_length', title='?'>seq_length</a>], tf.float32)
<span class='lineno'> 150</span>   }
<span class='lineno'> 151</span> 
<span class='lineno'> 152</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.is_training', title='?'>is_training</a>:
<span class='lineno'> 153</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.name_to_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.name_to_features', title='dict'>name_to_features</a>[&quot;start_positions&quot;] = tf.io.FixedLenFeature([], tf.int64)
<span class='lineno'> 154</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.name_to_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.name_to_features', title='dict'>name_to_features</a>[&quot;end_positions&quot;] = tf.io.FixedLenFeature([], tf.int64)
<span class='lineno'> 155</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.name_to_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.name_to_features', title='dict'>name_to_features</a>[&quot;is_impossible&quot;] = tf.io.FixedLenFeature([], tf.float32)
<span class='lineno'> 156</span> 
<span class='lineno'> 157</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.input_fn', title='() -> None'>input_fn</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.file_based_input_fn_builder', title='(?, ?, ?, ?) -> ? -> ? / (?, dict, int, ?) -> () -> None / (?, dict, ?, ?) -> () -> None'>file_based_input_fn_builder</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.file_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.file_path', title='?'>file_path</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.name_to_features', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.name_to_features', title='dict'>name_to_features</a>,
<span class='lineno'> 158</span>                                          <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.batch_size', title='int'>batch_size</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.is_training', title='?'>is_training</a>)
<span class='lineno'> 159</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.dataset', title='None'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.input_fn', title='() -> None'>input_fn</a>()
<span class='lineno'> 160</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset.dataset', title='None'>dataset</a>
<span class='lineno'> 161</span> 
<span class='lineno'> 162</span> 
<span class='lineno'> 163</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator', title='(?, ?) -> None'>get_input_iterator</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_fn', title='?'>input_fn</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.strategy', title='?'>strategy</a>):
<span class='lineno'> 164</span>   &quot;&quot;&quot;Returns distributed dataset iterator.&quot;&quot;&quot;
<span class='lineno'> 165</span> 
<span class='lineno'> 166</span>   # When training with TPU pods, datasets needs to be cloned across
<span class='lineno'> 167</span>   # workers. Since Dataset instance cannot be cloned in eager mode, we instead
<span class='lineno'> 168</span>   # pass callable that returns a dataset.
<span class='lineno'> 169</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_data', title='?'>input_data</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_fn', title='?'>input_fn</a>()
<span class='lineno'> 170</span>   if callable(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_data', title='?'>input_data</a>):
<span class='lineno'> 171</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.iterator', title='?'>iterator</a> = iter(
<span class='lineno'> 172</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.strategy', title='?'>strategy</a>.experimental_distribute_datasets_from_function(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_data', title='?'>input_data</a>))
<span class='lineno'> 173</span>   else:
<span class='lineno'> 174</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.iterator', title='?'>iterator</a> = iter(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.strategy', title='?'>strategy</a>.experimental_distribute_dataset(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.input_data', title='?'>input_data</a>))
<span class='lineno'> 175</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.iterator', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_input_iterator.iterator', title='?'>iterator</a>
<span class='lineno'> 176</span> 
<span class='lineno'> 177</span> 
<span class='lineno'> 178</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data', title='(?, ?, ?, ?, ?) -> None -> None'>get_classification_input_data</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.batch_size', title='?'>batch_size</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.seq_len', title='?'>seq_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.strategy', title='?'>strategy</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.is_training', title='?'>is_training</a>,
<span class='lineno'> 179</span>                                   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.file_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.file_path', title='?'>file_path</a>):
<span class='lineno'> 180</span>   &quot;&quot;&quot;Returns input dataset from input file string.&quot;&quot;&quot;
<span class='lineno'> 181</span> 
<span class='lineno'> 182</span>   # When using TPU pods, we need to clone dataset across
<span class='lineno'> 183</span>   # workers and need to pass in function that returns the dataset rather
<span class='lineno'> 184</span>   # than passing dataset instance itself.
<span class='lineno'> 185</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.use_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.use_dataset_fn', title='int'>use_dataset_fn</a> = isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.strategy', title='?'>strategy</a>, tf.distribute.experimental.TPUStrategy)
<span class='lineno'> 186</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.use_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.use_dataset_fn', title='int'>use_dataset_fn</a>:
<span class='lineno'> 187</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.batch_size', title='?'>batch_size</a> % <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.strategy', title='?'>strategy</a>.num_replicas_in_sync != 0:
<span class='lineno'> 188</span>       raise ValueError(
<span class='lineno'> 189</span>           &quot;Batch size must be divisible by number of replicas : {}&quot;.format(
<span class='lineno'> 190</span>               strategy.num_replicas_in_sync))
<span class='lineno'> 191</span> 
<span class='lineno'> 192</span>     # As auto rebatching is not supported in
<span class='lineno'> 193</span>     # `experimental_distribute_datasets_from_function()` API, which is
<span class='lineno'> 194</span>     # required when cloning dataset to multiple workers in eager mode,
<span class='lineno'> 195</span>     # we use per-replica batch size.
<span class='lineno'> 196</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.batch_size', title='int'>batch_size</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.batch_size', title='?'>batch_size</a> / <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.strategy', title='?'>strategy</a>.num_replicas_in_sync)
<span class='lineno'> 197</span> 
<span class='lineno'> 198</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn', title='None -> None'>_dataset_fn</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn.ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn.ctx', title='None'>ctx</a>=None):
<span class='lineno'> 199</span>     del <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn.ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn.ctx', title='None'>ctx</a>
<span class='lineno'> 200</span> 
<span class='lineno'> 201</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn.train_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn.train_dataset', title='None'>train_dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_classification_dataset', title='(?, ?, int, ?) -> None / (?, ?, ?, ?) -> None'>create_classification_dataset</a>(
<span class='lineno'> 202</span>         file_path=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.file_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.file_path', title='?'>file_path</a>,
<span class='lineno'> 203</span>         seq_length=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.seq_len', title='?'>seq_len</a>,
<span class='lineno'> 204</span>         batch_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.batch_size', title='int'>batch_size</a>,
<span class='lineno'> 205</span>         is_training=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.is_training', title='?'>is_training</a>)
<span class='lineno'> 206</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn.train_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn.train_dataset', title='None'>train_dataset</a>
<span class='lineno'> 207</span> 
<span class='lineno'> 208</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn', title='None -> None'>_dataset_fn</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.use_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data.use_dataset_fn', title='int'>use_dataset_fn</a> else <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_classification_input_data._dataset_fn', title='None -> None'>_dataset_fn</a>()
<span class='lineno'> 209</span> 
<span class='lineno'> 210</span> 
<span class='lineno'> 211</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data', title='(?, ?, ?, ?, ?, ?) -> None -> None'>get_squad_input_data</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.batch_size', title='?'>batch_size</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.seq_len', title='?'>seq_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.q_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.q_len', title='?'>q_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.strategy', title='?'>strategy</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.is_training', title='?'>is_training</a>,
<span class='lineno'> 212</span>                          <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.file_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.file_path', title='?'>file_path</a>):
<span class='lineno'> 213</span>   &quot;&quot;&quot;Returns input dataset from input file string.&quot;&quot;&quot;
<span class='lineno'> 214</span> 
<span class='lineno'> 215</span>   # When using TPU pods, we need to clone dataset across
<span class='lineno'> 216</span>   # workers and need to pass in function that returns the dataset rather
<span class='lineno'> 217</span>   # than passing dataset instance itself.
<span class='lineno'> 218</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.use_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.use_dataset_fn', title='int'>use_dataset_fn</a> = isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.strategy', title='?'>strategy</a>, tf.distribute.experimental.TPUStrategy)
<span class='lineno'> 219</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.use_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.use_dataset_fn', title='int'>use_dataset_fn</a>:
<span class='lineno'> 220</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.batch_size', title='?'>batch_size</a> % <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.strategy', title='?'>strategy</a>.num_replicas_in_sync != 0:
<span class='lineno'> 221</span>       raise ValueError(
<span class='lineno'> 222</span>           &quot;Batch size must be divisible by number of replicas : {}&quot;.format(
<span class='lineno'> 223</span>               strategy.num_replicas_in_sync))
<span class='lineno'> 224</span> 
<span class='lineno'> 225</span>     # As auto rebatching is not supported in
<span class='lineno'> 226</span>     # `experimental_distribute_datasets_from_function()` API, which is
<span class='lineno'> 227</span>     # required when cloning dataset to multiple workers in eager mode,
<span class='lineno'> 228</span>     # we use per-replica batch size.
<span class='lineno'> 229</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.batch_size', title='int'>batch_size</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.batch_size', title='?'>batch_size</a> / <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.strategy', title='?'>strategy</a>.num_replicas_in_sync)
<span class='lineno'> 230</span> 
<span class='lineno'> 231</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.is_training', title='?'>is_training</a>:
<span class='lineno'> 232</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.input_glob', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.input_glob', title='str'>input_glob</a> = os.path.join(
<span class='lineno'> 233</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.file_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.file_path', title='?'>file_path</a>,
<span class='lineno'> 234</span>         &quot;spiece.model.*.slen-{}.qlen-{}.train.tf_record&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.seq_len', title='?'>seq_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.q_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.q_len', title='?'>q_len</a>))
<span class='lineno'> 235</span> 
<span class='lineno'> 236</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.global_input_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.global_input_paths', title='?'>global_input_paths</a> = tf.io.gfile.glob(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.input_glob', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.input_glob', title='str'>input_glob</a>)
<span class='lineno'> 237</span>   else:
<span class='lineno'> 238</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.global_input_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.global_input_paths', title='?'>global_input_paths</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.file_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.file_path', title='?'>file_path</a>
<span class='lineno'> 239</span> 
<span class='lineno'> 240</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn', title='None -> None'>_dataset_fn</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn.ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn.ctx', title='None'>ctx</a>=None):
<span class='lineno'> 241</span>     del <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn.ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn.ctx', title='None'>ctx</a>
<span class='lineno'> 242</span> 
<span class='lineno'> 243</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn.train_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn.train_dataset', title='None'>train_dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_squad_dataset', title='(?, ?, ?, ?) -> None / (?, ?, int, ?) -> None'>create_squad_dataset</a>(
<span class='lineno'> 244</span>         file_path=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.global_input_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.global_input_paths', title='?'>global_input_paths</a>,
<span class='lineno'> 245</span>         seq_length=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.seq_len', title='?'>seq_len</a>,
<span class='lineno'> 246</span>         batch_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.batch_size', title='int'>batch_size</a>,
<span class='lineno'> 247</span>         is_training=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.is_training', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.is_training', title='?'>is_training</a>)
<span class='lineno'> 248</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn.train_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn.train_dataset', title='None'>train_dataset</a>
<span class='lineno'> 249</span> 
<span class='lineno'> 250</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn', title='None -> None'>_dataset_fn</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.use_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data.use_dataset_fn', title='int'>use_dataset_fn</a> else <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_squad_input_data._dataset_fn', title='None -> None'>_dataset_fn</a>()
<span class='lineno'> 251</span> 
<span class='lineno'> 252</span> 
<span class='lineno'> 253</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask', title='(?, ?, ?, ?, None) -> (?, ?) / (?, ?, ?, ?, ?) -> (?, ?)'>_idx_pair_to_mask</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.beg_indices', title='?'>beg_indices</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.end_indices', title='?'>end_indices</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.inputs', title='?'>inputs</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.tgt_len', title='?'>tgt_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.num_predict', title='None'>num_predict</a>):
<span class='lineno'> 254</span>   &quot;&quot;&quot;Turn beg and end indices into actual mask.&quot;&quot;&quot;
<span class='lineno'> 255</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.non_func_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.non_func_mask', title='?'>non_func_mask</a> = tf.logical_and(
<span class='lineno'> 256</span>       tf.not_equal(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEP_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEP_ID', title='int'>SEP_ID</a>),
<span class='lineno'> 257</span>       tf.not_equal(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.CLS_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.CLS_ID', title='int'>CLS_ID</a>))
<span class='lineno'> 258</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.all_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.all_indices', title='?'>all_indices</a> = tf.where(
<span class='lineno'> 259</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.non_func_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.non_func_mask', title='?'>non_func_mask</a>,
<span class='lineno'> 260</span>       tf.range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.tgt_len', title='?'>tgt_len</a>, dtype=tf.int64),
<span class='lineno'> 261</span>       tf.constant(-1, shape=[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.tgt_len', title='?'>tgt_len</a>], dtype=tf.int64))
<span class='lineno'> 262</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.candidate_matrix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.candidate_matrix', title='?'>candidate_matrix</a> = tf.cast(
<span class='lineno'> 263</span>       tf.logical_and(
<span class='lineno'> 264</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.all_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.all_indices', title='?'>all_indices</a>[None, :] &gt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.beg_indices', title='?'>beg_indices</a>[:, None],
<span class='lineno'> 265</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.all_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.all_indices', title='?'>all_indices</a>[None, :] &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.end_indices', title='?'>end_indices</a>[:, None]),
<span class='lineno'> 266</span>       tf.float32)
<span class='lineno'> 267</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.cumsum_matrix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.cumsum_matrix', title='?'>cumsum_matrix</a> = tf.reshape(
<span class='lineno'> 268</span>       tf.cumsum(tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.candidate_matrix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.candidate_matrix', title='?'>candidate_matrix</a>, [-1])),
<span class='lineno'> 269</span>       [-1, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.tgt_len', title='?'>tgt_len</a>])
<span class='lineno'> 270</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.masked_matrix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.masked_matrix', title='?'>masked_matrix</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.cumsum_matrix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.cumsum_matrix', title='?'>cumsum_matrix</a> &lt;= <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.num_predict', title='None'>num_predict</a>, tf.float32)
<span class='lineno'> 271</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.target_mask', title='?'>target_mask</a> = tf.reduce_sum(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.candidate_matrix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.candidate_matrix', title='?'>candidate_matrix</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.masked_matrix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.masked_matrix', title='?'>masked_matrix</a>, axis=0)
<span class='lineno'> 272</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.is_masked', title='?'>is_masked</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.target_mask', title='?'>target_mask</a>, tf.bool)
<span class='lineno'> 273</span> 
<span class='lineno'> 274</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.is_masked', title='?'>is_masked</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask.target_mask', title='?'>target_mask</a>
<span class='lineno'> 275</span> 
<span class='lineno'> 276</span> 
<span class='lineno'> 277</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask', title='(?, ?, None, ?, ?, None) -> (?, ?) / (?, ?, ?, ?, ?, ?) -> (?, ?) / (?, ?, ?, ?, ?, None) -> (?, ?)'>_word_span_mask</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.inputs', title='?'>inputs</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.tgt_len', title='?'>tgt_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_predict', title='None'>num_predict</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.min_num_words', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.min_num_words', title='?'>min_num_words</a>,
<span class='lineno'> 278</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.max_num_words', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.max_num_words', title='?'>max_num_words</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.boundary', title='None'>boundary</a>):
<span class='lineno'> 279</span>   &quot;&quot;&quot;Sample whole word spans as prediction targets.&quot;&quot;&quot;
<span class='lineno'> 280</span>   # Note: 1.2 is the token-to-word ratio
<span class='lineno'> 281</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.mask_alpha', title='float'>mask_alpha</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.tgt_len', title='?'>tgt_len</a> / <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_predict', title='None'>num_predict</a> / 1.2
<span class='lineno'> 282</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.round_to_int', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.round_to_int', title='float -> ?'>round_to_int</a> = lambda <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.lambda%98.x', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.lambda%98.x', title='{float | int}'>x</a>: tf.cast(tf.round(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.lambda%98.x', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.lambda%98.x', title='{float | int}'>x</a>), tf.int64)
<span class='lineno'> 283</span> 
<span class='lineno'> 284</span>   # Sample span lengths from a zipf distribution
<span class='lineno'> 285</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_len_seq', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_len_seq', title='?'>span_len_seq</a> = np.arange(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.min_num_words', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.min_num_words', title='?'>min_num_words</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.max_num_words', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.max_num_words', title='?'>max_num_words</a> + 1)
<span class='lineno'> 286</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.probs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.probs', title='?'>probs</a> = np.array([1.0 /  (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.i', title='?'>i</a> + 1) for <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.i', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.i', title='?'>i</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_len_seq', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_len_seq', title='?'>span_len_seq</a>])
<span class='lineno'> 287</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.probs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.probs', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.probs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.probs', title='?'>probs</a></a> /= np.sum(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.probs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.probs', title='?'>probs</a>)
<span class='lineno'> 288</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.logits', title='?'>logits</a> = tf.constant(np.log(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.probs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.probs', title='?'>probs</a>), dtype=tf.float32)
<span class='lineno'> 289</span> 
<span class='lineno'> 290</span>   # Sample `num_predict` words here: note that this is over sampling
<span class='lineno'> 291</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens', title='?'>span_lens</a> = tf.random.categorical(
<span class='lineno'> 292</span>       logits=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.logits', title='?'>logits</a>[None],
<span class='lineno'> 293</span>       num_samples=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_predict', title='None'>num_predict</a>,
<span class='lineno'> 294</span>       dtype=tf.int64,
<span class='lineno'> 295</span>   )[0] + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.min_num_words', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.min_num_words', title='?'>min_num_words</a>
<span class='lineno'> 296</span> 
<span class='lineno'> 297</span>   # Sample the ratio [0.0, 1.0) of left context lengths
<span class='lineno'> 298</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens_float', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens_float', title='?'>span_lens_float</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens', title='?'>span_lens</a>, tf.float32)
<span class='lineno'> 299</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ratio', title='?'>left_ratio</a> = tf.random.uniform(shape=[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_predict', title='None'>num_predict</a>], minval=0.0, maxval=1.0)
<span class='lineno'> 300</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ctx_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ctx_len', title='{float | int}'>left_ctx_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ratio', title='?'>left_ratio</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens_float', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens_float', title='?'>span_lens_float</a> * (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.mask_alpha', title='float'>mask_alpha</a> - 1)
<span class='lineno'> 301</span> 
<span class='lineno'> 302</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ctx_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ctx_len', title='?'>left_ctx_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.round_to_int', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.round_to_int', title='float -> ?'>round_to_int</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ctx_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ctx_len', title='{float | int}'>left_ctx_len</a>)
<span class='lineno'> 303</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.right_offset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.right_offset', title='?'>right_offset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.round_to_int', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.round_to_int', title='float -> ?'>round_to_int</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens_float', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens_float', title='?'>span_lens_float</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.mask_alpha', title='float'>mask_alpha</a>) - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ctx_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ctx_len', title='?'>left_ctx_len</a>
<span class='lineno'> 304</span> 
<span class='lineno'> 305</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', title='?'>beg_indices</a> = (tf.cumsum(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ctx_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.left_ctx_len', title='?'>left_ctx_len</a>) +
<span class='lineno'> 306</span>                  tf.cumsum(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.right_offset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.right_offset', title='?'>right_offset</a>, exclusive=True))
<span class='lineno'> 307</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', title='?'>end_indices</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', title='?'>beg_indices</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.span_lens', title='?'>span_lens</a>
<span class='lineno'> 308</span> 
<span class='lineno'> 309</span>   # Remove out of range indices
<span class='lineno'> 310</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.max_boundary_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.max_boundary_index', title='?'>max_boundary_index</a> = tf.cast(tf.shape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.boundary', title='None'>boundary</a>)[0] - 1, tf.int64)
<span class='lineno'> 311</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.valid_idx_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.valid_idx_mask', title='bool'>valid_idx_mask</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', title='?'>end_indices</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.max_boundary_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.max_boundary_index', title='?'>max_boundary_index</a>
<span class='lineno'> 312</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', title='?'>beg_indices</a> = tf.boolean_mask(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', title='?'>beg_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.valid_idx_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.valid_idx_mask', title='bool'>valid_idx_mask</a>)
<span class='lineno'> 313</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', title='?'>end_indices</a> = tf.boolean_mask(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', title='?'>end_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.valid_idx_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.valid_idx_mask', title='bool'>valid_idx_mask</a>)
<span class='lineno'> 314</span> 
<span class='lineno'> 315</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', title='?'>beg_indices</a> = tf.gather(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.boundary', title='None'>boundary</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', title='?'>beg_indices</a>)
<span class='lineno'> 316</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', title='?'>end_indices</a> = tf.gather(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.boundary', title='None'>boundary</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', title='?'>end_indices</a>)
<span class='lineno'> 317</span> 
<span class='lineno'> 318</span>   # Shuffle valid indices
<span class='lineno'> 319</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_valid', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_valid', title='?'>num_valid</a> = tf.cast(tf.shape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', title='?'>beg_indices</a>)[0], tf.int64)
<span class='lineno'> 320</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.order', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.order', title='?'>order</a> = tf.random.shuffle(tf.range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_valid', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_valid', title='?'>num_valid</a>, dtype=tf.int64))
<span class='lineno'> 321</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', title='?'>beg_indices</a> = tf.gather(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', title='?'>beg_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.order', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.order', title='?'>order</a>)
<span class='lineno'> 322</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', title='?'>end_indices</a> = tf.gather(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', title='?'>end_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.order', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.order', title='?'>order</a>)
<span class='lineno'> 323</span> 
<span class='lineno'> 324</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask', title='(?, ?, ?, ?, None) -> (?, ?) / (?, ?, ?, ?, ?) -> (?, ?)'>_idx_pair_to_mask</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.beg_indices', title='?'>beg_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.end_indices', title='?'>end_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.tgt_len', title='?'>tgt_len</a>,
<span class='lineno'> 325</span>                            <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask.num_predict', title='None'>num_predict</a>)
<span class='lineno'> 326</span> 
<span class='lineno'> 327</span> 
<span class='lineno'> 328</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask', title='(?, ?, None, ?, ?) -> (?, ?) / (?, ?, ?, ?, ?) -> (?, ?)'>_token_span_mask</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.inputs', title='?'>inputs</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.tgt_len', title='?'>tgt_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_predict', title='None'>num_predict</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.min_num_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.min_num_tokens', title='?'>min_num_tokens</a>,
<span class='lineno'> 329</span>                      <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.max_num_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.max_num_tokens', title='?'>max_num_tokens</a>):
<span class='lineno'> 330</span>   &quot;&quot;&quot;Sample token spans as prediction targets.&quot;&quot;&quot;
<span class='lineno'> 331</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.mask_alpha', title='None'>mask_alpha</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.tgt_len', title='?'>tgt_len</a> / <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_predict', title='None'>num_predict</a>
<span class='lineno'> 332</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.round_to_int', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.round_to_int', title='? -> ? / int -> ?'>round_to_int</a> = lambda <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.lambda%99.x', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.lambda%99.x', title='int'>x</a>: tf.cast(tf.round(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.lambda%99.x', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.lambda%99.x', title='int'>x</a>), tf.int64)
<span class='lineno'> 333</span> 
<span class='lineno'> 334</span>   # Sample span lengths from a zipf distribution
<span class='lineno'> 335</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_len_seq', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_len_seq', title='?'>span_len_seq</a> = np.arange(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.min_num_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.min_num_tokens', title='?'>min_num_tokens</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.max_num_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.max_num_tokens', title='?'>max_num_tokens</a> + 1)
<span class='lineno'> 336</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.probs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.probs', title='?'>probs</a> = np.array([1.0 /  (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.i', title='?'>i</a> + 1) for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.i', title='?'><a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.i', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.i', title='?'>i</a></a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_len_seq', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_len_seq', title='?'>span_len_seq</a>])
<span class='lineno'> 337</span> 
<span class='lineno'> 338</span>   <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.probs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.probs', title='?'><a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.probs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.probs', title='?'>probs</a></a> /= np.sum(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.probs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.probs', title='?'>probs</a>)
<span class='lineno'> 339</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.logits', title='?'>logits</a> = tf.constant(np.log(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.probs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.probs', title='?'>probs</a>), dtype=tf.float32)
<span class='lineno'> 340</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens', title='?'>span_lens</a> = tf.random.categorical(
<span class='lineno'> 341</span>       logits=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.logits', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.logits', title='?'>logits</a>[None],
<span class='lineno'> 342</span>       num_samples=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_predict', title='None'>num_predict</a>,
<span class='lineno'> 343</span>       dtype=tf.int64,
<span class='lineno'> 344</span>   )[0] + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.min_num_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.min_num_tokens', title='?'>min_num_tokens</a>
<span class='lineno'> 345</span> 
<span class='lineno'> 346</span>   # Sample the ratio [0.0, 1.0) of left context lengths
<span class='lineno'> 347</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens_float', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens_float', title='?'>span_lens_float</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens', title='?'>span_lens</a>, tf.float32)
<span class='lineno'> 348</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ratio', title='?'>left_ratio</a> = tf.random.uniform(shape=[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_predict', title='None'>num_predict</a>], minval=0.0, maxval=1.0)
<span class='lineno'> 349</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ctx_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ctx_len', title='int'>left_ctx_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ratio', title='?'>left_ratio</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens_float', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens_float', title='?'>span_lens_float</a> * (<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.mask_alpha', title='None'>mask_alpha</a> - 1)
<span class='lineno'> 350</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ctx_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ctx_len', title='?'>left_ctx_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.round_to_int', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.round_to_int', title='? -> ? / int -> ?'>round_to_int</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ctx_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ctx_len', title='int'>left_ctx_len</a>)
<span class='lineno'> 351</span> 
<span class='lineno'> 352</span>   # Compute the offset from left start to the right end
<span class='lineno'> 353</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.right_offset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.right_offset', title='?'>right_offset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.round_to_int', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.round_to_int', title='? -> ? / int -> ?'>round_to_int</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens_float', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens_float', title='?'>span_lens_float</a> * <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.mask_alpha', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.mask_alpha', title='None'>mask_alpha</a>) - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ctx_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ctx_len', title='?'>left_ctx_len</a>
<span class='lineno'> 354</span> 
<span class='lineno'> 355</span>   # Get the actual begin and end indices
<span class='lineno'> 356</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', title='?'>beg_indices</a> = (tf.cumsum(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ctx_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.left_ctx_len', title='?'>left_ctx_len</a>) +
<span class='lineno'> 357</span>                  tf.cumsum(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.right_offset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.right_offset', title='?'>right_offset</a>, exclusive=True))
<span class='lineno'> 358</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', title='?'>end_indices</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', title='?'>beg_indices</a> + <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.span_lens', title='?'>span_lens</a>
<span class='lineno'> 359</span> 
<span class='lineno'> 360</span>   # Remove out of range indices
<span class='lineno'> 361</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.valid_idx_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.valid_idx_mask', title='bool'>valid_idx_mask</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', title='?'>end_indices</a> &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.tgt_len', title='?'>tgt_len</a>
<span class='lineno'> 362</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', title='?'>beg_indices</a> = tf.boolean_mask(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', title='?'>beg_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.valid_idx_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.valid_idx_mask', title='bool'>valid_idx_mask</a>)
<span class='lineno'> 363</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', title='?'>end_indices</a> = tf.boolean_mask(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', title='?'>end_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.valid_idx_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.valid_idx_mask', title='bool'>valid_idx_mask</a>)
<span class='lineno'> 364</span> 
<span class='lineno'> 365</span>   # Shuffle valid indices
<span class='lineno'> 366</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_valid', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_valid', title='?'>num_valid</a> = tf.cast(tf.shape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', title='?'>beg_indices</a>)[0], tf.int64)
<span class='lineno'> 367</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.order', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.order', title='?'>order</a> = tf.random.shuffle(tf.range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_valid', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_valid', title='?'>num_valid</a>, dtype=tf.int64))
<span class='lineno'> 368</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', title='?'>beg_indices</a> = tf.gather(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', title='?'>beg_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.order', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.order', title='?'>order</a>)
<span class='lineno'> 369</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', title='?'>end_indices</a> = tf.gather(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', title='?'>end_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.order', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.order', title='?'>order</a>)
<span class='lineno'> 370</span> 
<span class='lineno'> 371</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask', title='(?, ?, ?, ?, None) -> (?, ?) / (?, ?, ?, ?, ?) -> (?, ?)'>_idx_pair_to_mask</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.beg_indices', title='?'>beg_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.end_indices', title='?'>end_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.tgt_len', title='?'>tgt_len</a>,
<span class='lineno'> 372</span>                            <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask.num_predict', title='None'>num_predict</a>)
<span class='lineno'> 373</span> 
<span class='lineno'> 374</span> 
<span class='lineno'> 375</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask', title='(?, ?, None, None) -> (?, ?) / (?, ?, ?, ?) -> (?, ?) / (?, ?, ?, None) -> (?, ?)'>_whole_word_mask</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.inputs', title='?'>inputs</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.tgt_len', title='?'>tgt_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.num_predict', title='None'>num_predict</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.boundary', title='None'>boundary</a>):
<span class='lineno'> 376</span>   &quot;&quot;&quot;Sample whole words as prediction targets.&quot;&quot;&quot;
<span class='lineno'> 377</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.pair_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.pair_indices', title='?'>pair_indices</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.boundary', title='None'>boundary</a>[:-1, None], <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.boundary', title='None'>boundary</a>[1:, None]], axis=1)
<span class='lineno'> 378</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.cand_pair_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.cand_pair_indices', title='?'>cand_pair_indices</a> = tf.random.shuffle(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.pair_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.pair_indices', title='?'>pair_indices</a>)[:<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.num_predict', title='None'>num_predict</a>]
<span class='lineno'> 379</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.beg_indices', title='?'>beg_indices</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.cand_pair_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.cand_pair_indices', title='?'>cand_pair_indices</a>[:, 0]
<span class='lineno'> 380</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.end_indices', title='?'>end_indices</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.cand_pair_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.cand_pair_indices', title='?'>cand_pair_indices</a>[:, 1]
<span class='lineno'> 381</span> 
<span class='lineno'> 382</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._idx_pair_to_mask', title='(?, ?, ?, ?, None) -> (?, ?) / (?, ?, ?, ?, ?) -> (?, ?)'>_idx_pair_to_mask</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.beg_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.beg_indices', title='?'>beg_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.end_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.end_indices', title='?'>end_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.tgt_len', title='?'>tgt_len</a>,
<span class='lineno'> 383</span>                            <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask.num_predict', title='None'>num_predict</a>)
<span class='lineno'> 384</span> 
<span class='lineno'> 385</span> 
<span class='lineno'> 386</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask', title='(?, ?, None) -> (?, ?) / (?, ?, ?) -> (?, ?)'>_single_token_mask</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.inputs', title='?'>inputs</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.tgt_len', title='?'>tgt_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.num_predict', title='None'>num_predict</a>):
<span class='lineno'> 387</span>   &quot;&quot;&quot;Sample individual tokens as prediction targets.&quot;&quot;&quot;
<span class='lineno'> 388</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.all_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.all_indices', title='?'>all_indices</a> = tf.range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.tgt_len', title='?'>tgt_len</a>, dtype=tf.int64)
<span class='lineno'> 389</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.non_func_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.non_func_mask', title='?'>non_func_mask</a> = tf.logical_and(
<span class='lineno'> 390</span>       tf.not_equal(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEP_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEP_ID', title='int'>SEP_ID</a>),
<span class='lineno'> 391</span>       tf.not_equal(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.CLS_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.CLS_ID', title='int'>CLS_ID</a>))
<span class='lineno'> 392</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.non_func_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.non_func_indices', title='?'>non_func_indices</a> = tf.boolean_mask(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.all_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.all_indices', title='?'>all_indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.non_func_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.non_func_mask', title='?'>non_func_mask</a>)
<span class='lineno'> 393</span> 
<span class='lineno'> 394</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.masked_pos', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.masked_pos', title='?'>masked_pos</a> = tf.random.shuffle(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.non_func_indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.non_func_indices', title='?'>non_func_indices</a>)
<span class='lineno'> 395</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.masked_pos', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.masked_pos', title='?'>masked_pos</a> = tf.sort(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.masked_pos', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.masked_pos', title='?'>masked_pos</a>[:<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.num_predict', title='None'>num_predict</a>])
<span class='lineno'> 396</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.target_mask', title='?'>target_mask</a> = tf.sparse_to_dense(
<span class='lineno'> 397</span>       sparse_indices=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.masked_pos', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.masked_pos', title='?'>masked_pos</a>,
<span class='lineno'> 398</span>       output_shape=[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.tgt_len', title='?'>tgt_len</a>],
<span class='lineno'> 399</span>       sparse_values=1.0,
<span class='lineno'> 400</span>       default_value=0.0)
<span class='lineno'> 401</span> 
<span class='lineno'> 402</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.is_masked', title='?'>is_masked</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.target_mask', title='?'>target_mask</a>, tf.bool)
<span class='lineno'> 403</span> 
<span class='lineno'> 404</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.is_masked', title='?'>is_masked</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask.target_mask', title='?'>target_mask</a>
<span class='lineno'> 405</span> 
<span class='lineno'> 406</span> 
<span class='lineno'> 407</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks', title='(?, ?, None, ?, None) -> (?, ?) / (?, ?, ?, ?, None) -> (?, ?)'>_online_sample_masks</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.inputs', title='?'>inputs</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.tgt_len', title='?'>tgt_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.num_predict', title='None'>num_predict</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', title='?'>online_masking_config</a>,
<span class='lineno'> 408</span>                          <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.boundary', title='None'>boundary</a>=None):
<span class='lineno'> 409</span>   &quot;&quot;&quot;Sample target positions to predict.&quot;&quot;&quot;
<span class='lineno'> 410</span>   logging.info(&quot;Online sample with strategy: `%s`.&quot;,
<span class='lineno'> 411</span>                <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', title='?'>online_masking_config</a>.sample_strategy)
<span class='lineno'> 412</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', title='?'>online_masking_config</a>.sample_strategy == &quot;single_token&quot;:
<span class='lineno'> 413</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._single_token_mask', title='(?, ?, None) -> (?, ?) / (?, ?, ?) -> (?, ?)'>_single_token_mask</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.tgt_len', title='?'>tgt_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.num_predict', title='None'>num_predict</a>)
<span class='lineno'> 414</span>   elif <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', title='?'>online_masking_config</a>.sample_strategy == &quot;whole_word&quot;:
<span class='lineno'> 415</span>     assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.boundary', title='None'>boundary</a> is not None, &quot;whole word sampling requires `boundary`&quot;
<span class='lineno'> 416</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._whole_word_mask', title='(?, ?, None, None) -> (?, ?) / (?, ?, ?, ?) -> (?, ?) / (?, ?, ?, None) -> (?, ?)'>_whole_word_mask</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.tgt_len', title='?'>tgt_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.num_predict', title='None'>num_predict</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.boundary', title='None'>boundary</a>)
<span class='lineno'> 417</span>   elif <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', title='?'>online_masking_config</a>.sample_strategy == &quot;token_span&quot;:
<span class='lineno'> 418</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._token_span_mask', title='(?, ?, None, ?, ?) -> (?, ?) / (?, ?, ?, ?, ?) -> (?, ?)'>_token_span_mask</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.tgt_len', title='?'>tgt_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.num_predict', title='None'>num_predict</a>,
<span class='lineno'> 419</span>                             <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', title='?'>online_masking_config</a>.min_num_tokens,
<span class='lineno'> 420</span>                             <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', title='?'>online_masking_config</a>.max_num_tokens)
<span class='lineno'> 421</span>   elif <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', title='?'>online_masking_config</a>.sample_strategy == &quot;word_span&quot;:
<span class='lineno'> 422</span>     assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.boundary', title='None'>boundary</a> is not None, &quot;word span sampling requires `boundary`&quot;
<span class='lineno'> 423</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._word_span_mask', title='(?, ?, None, ?, ?, None) -> (?, ?) / (?, ?, ?, ?, ?, ?) -> (?, ?) / (?, ?, ?, ?, ?, None) -> (?, ?)'>_word_span_mask</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.tgt_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.tgt_len', title='?'>tgt_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.num_predict', title='None'>num_predict</a>,
<span class='lineno'> 424</span>                            <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', title='?'>online_masking_config</a>.min_num_words,
<span class='lineno'> 425</span>                            <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.online_masking_config', title='?'>online_masking_config</a>.max_num_words,
<span class='lineno'> 426</span>                            <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks.boundary', title='None'>boundary</a>)
<span class='lineno'> 427</span>   else:
<span class='lineno'> 428</span>     raise NotImplementedError
<span class='lineno'> 429</span> 
<span class='lineno'> 430</span> 
<span class='lineno'> 431</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset', title='({[?] | int}, int, ?, ?, ?, ?, ?, None, None) -> None / (?, ?, ?, ?, ?, ?, ?, None, None) -> None'>create_pretrain_dataset</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.file_names', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.file_names', title='{[?] | int}'>file_names</a>,
<span class='lineno'> 432</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.bsz_per_core', title='int'>bsz_per_core</a>,
<span class='lineno'> 433</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>,
<span class='lineno'> 434</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a>,
<span class='lineno'> 435</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', title='?'>perm_size</a>,
<span class='lineno'> 436</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.leak_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.leak_ratio', title='?'>leak_ratio</a>,
<span class='lineno'> 437</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.online_masking_config', title='?'>online_masking_config</a>,
<span class='lineno'> 438</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', title='None'>num_predict</a>=None,
<span class='lineno'> 439</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.input_pipeline_context', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.input_pipeline_context', title='None'>input_pipeline_context</a>=None):
<span class='lineno'> 440</span>   &quot;&quot;&quot;Creates pretrain dataset.&quot;&quot;&quot;
<span class='lineno'> 441</span> 
<span class='lineno'> 442</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser', title='? -> None'>parser</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.record', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.record', title='?'>record</a>):
<span class='lineno'> 443</span>     &quot;&quot;&quot;Function used to parse tfrecord.&quot;&quot;&quot;
<span class='lineno'> 444</span> 
<span class='lineno'> 445</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.record_spec', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.record_spec', title='dict'>record_spec</a> = {
<span class='lineno'> 446</span>         &quot;input&quot;: tf.io.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>], tf.int64),
<span class='lineno'> 447</span>         &quot;seg_id&quot;: tf.io.FixedLenFeature([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>], tf.int64),
<span class='lineno'> 448</span>         &quot;label&quot;: tf.io.FixedLenFeature([1], tf.int64),
<span class='lineno'> 449</span>     }
<span class='lineno'> 450</span> 
<span class='lineno'> 451</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.online_masking_config', title='?'>online_masking_config</a>.sample_strategy in [&quot;whole_word&quot;, &quot;word_span&quot;]:
<span class='lineno'> 452</span>       logging.info(&quot;Add `boundary` spec for %s&quot;,
<span class='lineno'> 453</span>                    <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.online_masking_config', title='?'>online_masking_config</a>.sample_strategy)
<span class='lineno'> 454</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.record_spec', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.record_spec', title='dict'>record_spec</a>[&quot;boundary&quot;] = tf.io.VarLenFeature(tf.int64)
<span class='lineno'> 455</span> 
<span class='lineno'> 456</span>     # retrieve serialized example
<span class='lineno'> 457</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a> = tf.io.parse_single_example(
<span class='lineno'> 458</span>         serialized=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.record', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.record', title='?'>record</a>, features=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.record_spec', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.record_spec', title='dict'>record_spec</a>)
<span class='lineno'> 459</span> 
<span class='lineno'> 460</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', title='?'>inputs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>.pop(&quot;input&quot;)
<span class='lineno'> 461</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.online_masking_config', title='?'>online_masking_config</a>.sample_strategy in [&quot;whole_word&quot;, &quot;word_span&quot;]:
<span class='lineno'> 462</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.boundary', title='?'>boundary</a> = tf.sparse.to_dense(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>.pop(&quot;boundary&quot;))
<span class='lineno'> 463</span>     else:
<span class='lineno'> 464</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.boundary', title='None'>boundary</a> = None
<span class='lineno'> 465</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.is_masked', title='?'>is_masked</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser._', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser._', title='?'>_</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._online_sample_masks', title='(?, ?, None, ?, None) -> (?, ?) / (?, ?, ?, ?, None) -> (?, ?)'>_online_sample_masks</a>(
<span class='lineno'> 466</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', title='None'>num_predict</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.online_masking_config', title='?'>online_masking_config</a>, boundary=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.boundary', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.boundary', title='None'>boundary</a>)
<span class='lineno'> 467</span> 
<span class='lineno'> 468</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a> &gt; 0:
<span class='lineno'> 469</span>       ##### Use memory
<span class='lineno'> 470</span>       # permutate the reuse and non-reuse parts separately
<span class='lineno'> 471</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.non_reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.non_reuse_len', title='?'>non_reuse_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a>
<span class='lineno'> 472</span>       assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a> % <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', title='?'>perm_size</a> == 0 and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.non_reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.non_reuse_len', title='?'>non_reuse_len</a> % <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', title='?'>perm_size</a> == 0
<span class='lineno'> 473</span> 
<span class='lineno'> 474</span>       # Creates permutation mask and target mask for the first reuse_len tokens.
<span class='lineno'> 475</span>       # The tokens in this part are reused from the last sequence.
<span class='lineno'> 476</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_0', title='float'>perm_mask_0</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask_0', title='?'>target_mask_0</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k_0', title='?'>input_k_0</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q_0', title='?'>input_q_0</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm', title='(?, ?, ?, ?, ?) -> (float, ?, ?, ?)'>_local_perm</a>(
<span class='lineno'> 477</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', title='?'>inputs</a>[:<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a>], <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.is_masked', title='?'>is_masked</a>[:<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a>], <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', title='?'>perm_size</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a>,
<span class='lineno'> 478</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.leak_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.leak_ratio', title='?'>leak_ratio</a>)
<span class='lineno'> 479</span> 
<span class='lineno'> 480</span>       # Creates permutation mask and target mask for the rest of tokens in
<span class='lineno'> 481</span>       # current example, which are concatentation of two new segments.
<span class='lineno'> 482</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_1', title='float'>perm_mask_1</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask_1', title='?'>target_mask_1</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k_1', title='?'>input_k_1</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q_1', title='?'>input_q_1</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm', title='(?, ?, ?, ?, ?) -> (float, ?, ?, ?)'>_local_perm</a>(
<span class='lineno'> 483</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', title='?'>inputs</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a>:], <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.is_masked', title='?'>is_masked</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a>:], <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', title='?'>perm_size</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.non_reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.non_reuse_len', title='?'>non_reuse_len</a>,
<span class='lineno'> 484</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.leak_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.leak_ratio', title='?'>leak_ratio</a>)
<span class='lineno'> 485</span> 
<span class='lineno'> 486</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_0', title='?'>perm_mask_0</a> = tf.concat(
<span class='lineno'> 487</span>           [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_0', title='float'>perm_mask_0</a>, tf.ones([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.non_reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.non_reuse_len', title='?'>non_reuse_len</a>])], axis=1)
<span class='lineno'> 488</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_1', title='?'>perm_mask_1</a> = tf.concat(
<span class='lineno'> 489</span>           [tf.zeros([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.non_reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.non_reuse_len', title='?'>non_reuse_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a>]), <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_1', title='float'>perm_mask_1</a>], axis=1)
<span class='lineno'> 490</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask', title='?'>perm_mask</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_0', title='?'>perm_mask_0</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask_1', title='?'>perm_mask_1</a>], axis=0)
<span class='lineno'> 491</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', title='?'>target_mask</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask_0', title='?'>target_mask_0</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask_1', title='?'>target_mask_1</a>], axis=0)
<span class='lineno'> 492</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k', title='?'>input_k</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k_0', title='?'>input_k_0</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k_1', title='?'>input_k_1</a>], axis=0)
<span class='lineno'> 493</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q', title='?'>input_q</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q_0', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q_0', title='?'>input_q_0</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q_1', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q_1', title='?'>input_q_1</a>], axis=0)
<span class='lineno'> 494</span>     else:
<span class='lineno'> 495</span>       ##### Do not use memory
<span class='lineno'> 496</span>       assert <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a> % <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', title='?'>perm_size</a> == 0
<span class='lineno'> 497</span>       # permutate the entire sequence together
<span class='lineno'> 498</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask', title='float'>perm_mask</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', title='?'>target_mask</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k', title='?'>input_k</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q', title='?'>input_q</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm', title='(?, ?, ?, ?, ?) -> (float, ?, ?, ?)'>_local_perm</a>(
<span class='lineno'> 499</span>           <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.is_masked', title='?'>is_masked</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.perm_size', title='?'>perm_size</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.leak_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.leak_ratio', title='?'>leak_ratio</a>)
<span class='lineno'> 500</span> 
<span class='lineno'> 501</span>     # reshape back to fixed shape
<span class='lineno'> 502</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>[&quot;perm_mask&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.perm_mask', title='float'>perm_mask</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 503</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>[&quot;input_k&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_k', title='?'>input_k</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 504</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>[&quot;input_q&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.input_q', title='?'>input_q</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 505</span> 
<span class='lineno'> 506</span>     # Directly use raw inputs as the target
<span class='lineno'> 507</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', title='?'>target</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.inputs', title='?'>inputs</a>
<span class='lineno'> 508</span> 
<span class='lineno'> 509</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', title='None'>num_predict</a> is not None:
<span class='lineno'> 510</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.indices', title='?'>indices</a> = tf.range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>, dtype=tf.int64)
<span class='lineno'> 511</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.bool_target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.bool_target_mask', title='?'>bool_target_mask</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', title='?'>target_mask</a>, tf.bool)
<span class='lineno'> 512</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.indices', title='?'>indices</a> = tf.boolean_mask(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.indices', title='?'>indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.bool_target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.bool_target_mask', title='?'>bool_target_mask</a>)
<span class='lineno'> 513</span> 
<span class='lineno'> 514</span>       ##### extra padding due to CLS/SEP introduced after prepro
<span class='lineno'> 515</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.actual_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.actual_num_predict', title='?'>actual_num_predict</a> = tf.shape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.indices', title='?'>indices</a>)[0]
<span class='lineno'> 516</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.pad_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.pad_len', title='None'>pad_len</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', title='None'>num_predict</a> - <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.actual_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.actual_num_predict', title='?'>actual_num_predict</a>
<span class='lineno'> 517</span> 
<span class='lineno'> 518</span>       ##### target_mapping
<span class='lineno'> 519</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mapping', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mapping', title='?'>target_mapping</a> = tf.one_hot(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.indices', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.indices', title='?'>indices</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>, dtype=tf.float32)
<span class='lineno'> 520</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.paddings', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.paddings', title='?'>paddings</a> = tf.zeros([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.pad_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.pad_len', title='None'>pad_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>], dtype=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mapping', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mapping', title='?'>target_mapping</a>.dtype)
<span class='lineno'> 521</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mapping', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mapping', title='?'>target_mapping</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mapping', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mapping', title='?'>target_mapping</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.paddings', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.paddings', title='?'>paddings</a>], axis=0)
<span class='lineno'> 522</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>[&quot;target_mapping&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mapping', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mapping', title='?'>target_mapping</a>,
<span class='lineno'> 523</span>                                              [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', title='None'>num_predict</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 524</span> 
<span class='lineno'> 525</span>       ##### target
<span class='lineno'> 526</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', title='?'>target</a> = tf.boolean_mask(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', title='?'>target</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.bool_target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.bool_target_mask', title='?'>bool_target_mask</a>)
<span class='lineno'> 527</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.paddings', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.paddings', title='?'>paddings</a> = tf.zeros([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.pad_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.pad_len', title='None'>pad_len</a>], dtype=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', title='?'>target</a>.dtype)
<span class='lineno'> 528</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', title='?'>target</a> = tf.concat([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', title='?'>target</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.paddings', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.paddings', title='?'>paddings</a>], axis=0)
<span class='lineno'> 529</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>[&quot;target&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', title='?'>target</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', title='None'>num_predict</a>])
<span class='lineno'> 530</span> 
<span class='lineno'> 531</span>       ##### target mask
<span class='lineno'> 532</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', title='?'>target_mask</a> = tf.concat(
<span class='lineno'> 533</span>           [tf.ones([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.actual_num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.actual_num_predict', title='?'>actual_num_predict</a>], dtype=tf.float32),
<span class='lineno'> 534</span>            tf.zeros([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.pad_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.pad_len', title='None'>pad_len</a>], dtype=tf.float32)],
<span class='lineno'> 535</span>           axis=0)
<span class='lineno'> 536</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>[&quot;target_mask&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', title='?'>target_mask</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.num_predict', title='None'>num_predict</a>])
<span class='lineno'> 537</span>     else:
<span class='lineno'> 538</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>[&quot;target&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target', title='?'>target</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 539</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>[&quot;target_mask&quot;] = tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.target_mask', title='?'>target_mask</a>, [<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.seq_len', title='?'>seq_len</a>])
<span class='lineno'> 540</span> 
<span class='lineno'> 541</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.key', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.key', title='<list>'>key</a> in list(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>.keys()):
<span class='lineno'> 542</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', title='?'>val</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.key', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.key', title='<list>'>key</a>]
<span class='lineno'> 543</span>       if tf.keras.backend.is_sparse(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', title='?'>val</a>):
<span class='lineno'> 544</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', title='?'>val</a> = tf.sparse.to_dense(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', title='?'>val</a>)
<span class='lineno'> 545</span>       if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', title='?'>val</a>.dtype == tf.int64:
<span class='lineno'> 546</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', title='?'>val</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', title='?'>val</a>, tf.int32)
<span class='lineno'> 547</span> 
<span class='lineno'> 548</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>[<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.key', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.key', title='<list>'>key</a>] = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.val', title='?'>val</a>
<span class='lineno'> 549</span> 
<span class='lineno'> 550</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.k', title='?'>k</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.v', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.v', title='?'>v</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>.items():
<span class='lineno'> 551</span>       logging.info(&quot;%s: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.k', title='?'>k</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.v', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.v', title='?'>v</a>)
<span class='lineno'> 552</span> 
<span class='lineno'> 553</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser.example', title='?'>example</a>
<span class='lineno'> 554</span> 
<span class='lineno'> 555</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.dataset', title='None'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset', title='(?, ?, ?, ?, None) -> None / (? -> None, ?, ?, bool, None) -> None / (? -> ?, {[?] | int}, int, bool, None) -> None'>parse_files_to_dataset</a>(
<span class='lineno'> 556</span>       parser=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.parser', title='? -> None'>parser</a>,
<span class='lineno'> 557</span>       file_paths=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.file_names', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.file_names', title='{[?] | int}'>file_names</a>,
<span class='lineno'> 558</span>       bsz_per_core=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.bsz_per_core', title='int'>bsz_per_core</a>,
<span class='lineno'> 559</span>       sequential=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.reuse_len', title='?'>reuse_len</a> &gt; 0,
<span class='lineno'> 560</span>       input_pipeline_context=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.input_pipeline_context', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.input_pipeline_context', title='None'>input_pipeline_context</a>)
<span class='lineno'> 561</span> 
<span class='lineno'> 562</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset.dataset', title='None'>dataset</a>
<span class='lineno'> 563</span> 
<span class='lineno'> 564</span> 
<span class='lineno'> 565</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename', title='(str, str, int, ?, None, bool) -> str / (?, ?, ?, ?, None, bool) -> str'>format_filename</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.prefix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.prefix', title='str'>prefix</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.suffix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.suffix', title='str'>suffix</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.bsz_per_host', title='int'>bsz_per_host</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.seq_len', title='?'>seq_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_len', title='None'>reuse_len</a>=None,
<span class='lineno'> 566</span>                     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.uncased', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.uncased', title='bool'>uncased</a>=False):
<span class='lineno'> 567</span>   &quot;&quot;&quot;Generates input file name pattern.&quot;&quot;&quot;
<span class='lineno'> 568</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_len', title='None'>reuse_len</a> is not None and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_len', title='None'>reuse_len</a> &gt; 0:
<span class='lineno'> 569</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_str', title='str'>reuse_str</a> = &quot;reuse-{}.&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_len', title='None'>reuse_len</a>)
<span class='lineno'> 570</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.bsz_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.bsz_str', title='str'>bsz_str</a> = &quot;hostbsz-{}.&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.bsz_per_host', title='int'>bsz_per_host</a>)
<span class='lineno'> 571</span>   else:
<span class='lineno'> 572</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_str', title='str'>reuse_str</a> = &quot;&quot;
<span class='lineno'> 573</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.bsz_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.bsz_str', title='str'>bsz_str</a> = &quot;&quot;
<span class='lineno'> 574</span> 
<span class='lineno'> 575</span>   if not <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.uncased', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.uncased', title='bool'>uncased</a>:
<span class='lineno'> 576</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.case_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.case_str', title='str'>case_str</a> = &quot;&quot;
<span class='lineno'> 577</span>   else:
<span class='lineno'> 578</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.case_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.case_str', title='str'>case_str</a> = &quot;uncased.&quot;
<span class='lineno'> 579</span> 
<span class='lineno'> 580</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.file_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.file_name', title='str'>file_name</a> = &quot;{}.seq-{}.{}{}{}{}&quot;.format(
<span class='lineno'> 581</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.prefix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.prefix', title='str'>prefix</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.seq_len', title='?'>seq_len</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.reuse_str', title='str'>reuse_str</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.bsz_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.bsz_str', title='str'>bsz_str</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.case_str', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.case_str', title='str'>case_str</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.suffix', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.suffix', title='str'>suffix</a>)
<span class='lineno'> 582</span> 
<span class='lineno'> 583</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.file_name', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename.file_name', title='str'>file_name</a>
<span class='lineno'> 584</span> 
<span class='lineno'> 585</span> 
<span class='lineno'> 586</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data', title='(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, int) -> None -> None'>get_pretrain_input_data</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', title='?'>batch_size</a>,
<span class='lineno'> 587</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.seq_len', title='?'>seq_len</a>,
<span class='lineno'> 588</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.strategy', title='?'>strategy</a>,
<span class='lineno'> 589</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.file_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.file_path', title='?'>file_path</a>,
<span class='lineno'> 590</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.reuse_len', title='?'>reuse_len</a>,
<span class='lineno'> 591</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.perm_size', title='?'>perm_size</a>,
<span class='lineno'> 592</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.leak_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.leak_ratio', title='?'>leak_ratio</a>,
<span class='lineno'> 593</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.num_predict', title='?'>num_predict</a>,
<span class='lineno'> 594</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.uncased', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.uncased', title='?'>uncased</a>,
<span class='lineno'> 595</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.online_masking_config', title='?'>online_masking_config</a>,
<span class='lineno'> 596</span>                             <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.num_hosts', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.num_hosts', title='int'>num_hosts</a>=1):
<span class='lineno'> 597</span>   &quot;&quot;&quot;Returns input dataset from input file string.&quot;&quot;&quot;
<span class='lineno'> 598</span> 
<span class='lineno'> 599</span>   # When using TPU pods, we need to clone dataset across
<span class='lineno'> 600</span>   # workers and need to pass in function that returns the dataset rather
<span class='lineno'> 601</span>   # than passing dataset instance itself.
<span class='lineno'> 602</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.use_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.use_dataset_fn', title='int'>use_dataset_fn</a> = isinstance(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.strategy', title='?'>strategy</a>, tf.distribute.experimental.TPUStrategy)
<span class='lineno'> 603</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.split', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.split', title='str'>split</a> = &quot;train&quot;
<span class='lineno'> 604</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.bsz_per_host', title='int'>bsz_per_host</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', title='?'>batch_size</a> / <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.num_hosts', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.num_hosts', title='int'>num_hosts</a>)
<span class='lineno'> 605</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_glob_base', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_glob_base', title='str'>record_glob_base</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.format_filename', title='(str, str, int, ?, None, bool) -> str / (?, ?, ?, ?, None, bool) -> str'>format_filename</a>(
<span class='lineno'> 606</span>       prefix=&quot;meta.{}.pass-*&quot;.format(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.split', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.split', title='str'>split</a>),
<span class='lineno'> 607</span>       suffix=&quot;json*&quot;,
<span class='lineno'> 608</span>       bsz_per_host=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.bsz_per_host', title='int'>bsz_per_host</a>,
<span class='lineno'> 609</span>       seq_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.seq_len', title='?'>seq_len</a>,
<span class='lineno'> 610</span>       reuse_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.reuse_len', title='?'>reuse_len</a>,
<span class='lineno'> 611</span>       uncased=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.uncased', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.uncased', title='?'>uncased</a>)
<span class='lineno'> 612</span> 
<span class='lineno'> 613</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch', title='? -> int'>_get_num_batch</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch.info', title='?'>info</a>):
<span class='lineno'> 614</span>     if &quot;num_batch&quot; in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch.info', title='?'>info</a>:
<span class='lineno'> 615</span>       return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch.info', title='?'>info</a>[&quot;num_batch&quot;]
<span class='lineno'> 616</span>     elif &quot;num_example&quot; in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch.info', title='?'>info</a>:
<span class='lineno'> 617</span>       return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch.info', title='?'>info</a>[&quot;num_example&quot;] / <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.bsz_per_host', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.bsz_per_host', title='int'>bsz_per_host</a>
<span class='lineno'> 618</span>     else:
<span class='lineno'> 619</span>       raise ValueError(&quot;Do not have sample info.&quot;)
<span class='lineno'> 620</span> 
<span class='lineno'> 621</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.use_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.use_dataset_fn', title='int'>use_dataset_fn</a>:
<span class='lineno'> 622</span>     if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', title='?'>batch_size</a> % <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.strategy', title='?'>strategy</a>.num_replicas_in_sync != 0:
<span class='lineno'> 623</span>       raise ValueError(
<span class='lineno'> 624</span>           &quot;Batch size must be divisible by number of replicas : {}&quot;.format(
<span class='lineno'> 625</span>               strategy.num_replicas_in_sync))
<span class='lineno'> 626</span> 
<span class='lineno'> 627</span>     # As auto rebatching is not supported in
<span class='lineno'> 628</span>     # `experimental_distribute_datasets_from_function()` API, which is
<span class='lineno'> 629</span>     # required when cloning dataset to multiple workers in eager mode,
<span class='lineno'> 630</span>     # we use per-replica batch size.
<span class='lineno'> 631</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', title='int'>batch_size</a> = int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', title='?'>batch_size</a> / <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.strategy', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.strategy', title='?'>strategy</a>.num_replicas_in_sync)
<span class='lineno'> 632</span> 
<span class='lineno'> 633</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', title='dict'>record_info</a> = {&quot;num_batch&quot;: 0, &quot;filenames&quot;: []}
<span class='lineno'> 634</span> 
<span class='lineno'> 635</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.tfrecord_dirs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.tfrecord_dirs', title='?'>tfrecord_dirs</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.file_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.file_path', title='?'>file_path</a>.split(&quot;,&quot;)
<span class='lineno'> 636</span>   logging.info(&quot;Use the following tfrecord dirs: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.tfrecord_dirs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.tfrecord_dirs', title='?'>tfrecord_dirs</a>)
<span class='lineno'> 637</span> 
<span class='lineno'> 638</span>   for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.idx', title='?'>idx</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_dir', title='?'>record_dir</a> in enumerate(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.tfrecord_dirs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.tfrecord_dirs', title='?'>tfrecord_dirs</a>):
<span class='lineno'> 639</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_glob', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_glob', title='str'>record_glob</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_dir', title='?'>record_dir</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_glob_base', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_glob_base', title='str'>record_glob_base</a>)
<span class='lineno'> 640</span>     logging.info(&quot;[%d] Record glob: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.idx', title='?'>idx</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_glob', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_glob', title='str'>record_glob</a>)
<span class='lineno'> 641</span> 
<span class='lineno'> 642</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_paths', title='?'>record_paths</a> = sorted(tf.io.gfile.glob(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_glob', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_glob', title='str'>record_glob</a>))
<span class='lineno'> 643</span>     logging.info(&quot;[%d] Num of record info path: %d&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.idx', title='?'>idx</a>, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_paths', title='?'>record_paths</a>))
<span class='lineno'> 644</span> 
<span class='lineno'> 645</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', title='dict'>cur_record_info</a> = {&quot;num_batch&quot;: 0, &quot;filenames&quot;: []}
<span class='lineno'> 646</span> 
<span class='lineno'> 647</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info_path', title='?'>record_info_path</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_paths', title='?'>record_paths</a>:
<span class='lineno'> 648</span>       with tf.io.gfile.GFile(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info_path', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info_path', title='?'>record_info_path</a>, &quot;r&quot;) as <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.fp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.fp', title='?'>fp</a>:
<span class='lineno'> 649</span>         <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.info', title='?'>info</a> = json.load(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.fp', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.fp', title='?'>fp</a>)
<span class='lineno'> 650</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', title='dict'>cur_record_info</a>[&quot;num_batch&quot;] += int(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._get_num_batch', title='? -> int'>_get_num_batch</a>(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.info', title='?'>info</a>))
<span class='lineno'> 651</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;] += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.info', title='?'>info</a>[&quot;filenames&quot;]
<span class='lineno'> 652</span> 
<span class='lineno'> 653</span>     # overwrite directory for `cur_record_info`
<span class='lineno'> 654</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.new_filenames', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.new_filenames', title='[str]'>new_filenames</a> = []
<span class='lineno'> 655</span>     for <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.filename', title='?'>filename</a> in <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;]:
<span class='lineno'> 656</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.basename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.basename', title='str'>basename</a> = os.path.basename(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.filename', title='?'>filename</a>)
<span class='lineno'> 657</span>       <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.new_filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.new_filename', title='str'>new_filename</a> = os.path.join(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_dir', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_dir', title='?'>record_dir</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.basename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.basename', title='str'>basename</a>)
<span class='lineno'> 658</span>       <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.new_filenames', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.new_filenames', title='[str]'>new_filenames</a>.append(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.new_filename', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.new_filename', title='str'>new_filename</a>)
<span class='lineno'> 659</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;] = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.new_filenames', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.new_filenames', title='[str]'>new_filenames</a>
<span class='lineno'> 660</span> 
<span class='lineno'> 661</span>     logging.info(&quot;[Dir %d] Number of chosen batches: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.idx', title='?'>idx</a>,
<span class='lineno'> 662</span>                  <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', title='dict'>cur_record_info</a>[&quot;num_batch&quot;])
<span class='lineno'> 663</span>     logging.info(&quot;[Dir %d] Number of chosen files: %s&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.idx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.idx', title='?'>idx</a>,
<span class='lineno'> 664</span>                  len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;]))
<span class='lineno'> 665</span>     logging.info(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;])
<span class='lineno'> 666</span> 
<span class='lineno'> 667</span>     # add `cur_record_info` to global `record_info`
<span class='lineno'> 668</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', title='dict'>record_info</a>[&quot;num_batch&quot;] += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', title='dict'>cur_record_info</a>[&quot;num_batch&quot;]
<span class='lineno'> 669</span>     <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', title='dict'>record_info</a>[&quot;filenames&quot;] += <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.cur_record_info', title='dict'>cur_record_info</a>[&quot;filenames&quot;]
<span class='lineno'> 670</span> 
<span class='lineno'> 671</span>   logging.info(&quot;Total number of batches: %d&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', title='dict'>record_info</a>[&quot;num_batch&quot;])
<span class='lineno'> 672</span>   logging.info(&quot;Total number of files: %d&quot;, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', title='dict'>record_info</a>[&quot;filenames&quot;]))
<span class='lineno'> 673</span>   logging.info(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', title='dict'>record_info</a>[&quot;filenames&quot;])
<span class='lineno'> 674</span> 
<span class='lineno'> 675</span>   def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn', title='None -> None'>_dataset_fn</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn.ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn.ctx', title='None'>ctx</a>=None):
<span class='lineno'> 676</span>     &quot;&quot;&quot;Function that can create a pretrain dataset.&quot;&quot;&quot;
<span class='lineno'> 677</span> 
<span class='lineno'> 678</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn.train_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn.train_dataset', title='None'>train_dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.create_pretrain_dataset', title='({[?] | int}, int, ?, ?, ?, ?, ?, None, None) -> None / (?, ?, ?, ?, ?, ?, ?, None, None) -> None'>create_pretrain_dataset</a>(
<span class='lineno'> 679</span>         file_names=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.record_info', title='dict'>record_info</a>[&quot;filenames&quot;],
<span class='lineno'> 680</span>         bsz_per_core=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.batch_size', title='int'>batch_size</a>,
<span class='lineno'> 681</span>         seq_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.seq_len', title='?'>seq_len</a>,
<span class='lineno'> 682</span>         reuse_len=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.reuse_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.reuse_len', title='?'>reuse_len</a>,
<span class='lineno'> 683</span>         perm_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.perm_size', title='?'>perm_size</a>,
<span class='lineno'> 684</span>         leak_ratio=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.leak_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.leak_ratio', title='?'>leak_ratio</a>,
<span class='lineno'> 685</span>         online_masking_config=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.online_masking_config', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.online_masking_config', title='?'>online_masking_config</a>,
<span class='lineno'> 686</span>         num_predict=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.num_predict', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.num_predict', title='?'>num_predict</a>,
<span class='lineno'> 687</span>         input_pipeline_context=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn.ctx', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn.ctx', title='None'>ctx</a>)
<span class='lineno'> 688</span>     return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn.train_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn.train_dataset', title='None'>train_dataset</a>
<span class='lineno'> 689</span> 
<span class='lineno'> 690</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn', title='None -> None'>_dataset_fn</a> if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.use_dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data.use_dataset_fn', title='int'>use_dataset_fn</a> else <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.get_pretrain_input_data._dataset_fn', title='None -> None'>_dataset_fn</a>()
<span class='lineno'> 691</span> 
<span class='lineno'> 692</span> 
<span class='lineno'> 693</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset', title='(?, ?, ?, ?, None) -> None / (? -> None, ?, ?, bool, None) -> None / (? -> ?, {[?] | int}, int, bool, None) -> None'>parse_files_to_dataset</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.parser', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.parser', title='? -> None'>parser</a>,
<span class='lineno'> 694</span>                            <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.file_paths', title='{[?] | int}'>file_paths</a>,
<span class='lineno'> 695</span>                            <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.bsz_per_core', title='int'>bsz_per_core</a>,
<span class='lineno'> 696</span>                            <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.sequential', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.sequential', title='bool'>sequential</a>,
<span class='lineno'> 697</span>                            <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.input_pipeline_context', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.input_pipeline_context', title='None'>input_pipeline_context</a>=None):
<span class='lineno'> 698</span>   &quot;&quot;&quot;Creates the dataset given file paths.&quot;&quot;&quot;
<span class='lineno'> 699</span> 
<span class='lineno'> 700</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a> = tf.data.Dataset.from_tensor_slices(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.file_paths', title='{[?] | int}'>file_paths</a>)
<span class='lineno'> 701</span> 
<span class='lineno'> 702</span>   # Note: we cannot perform sample-level shuffle here because this will violate
<span class='lineno'> 703</span>   # the consecutive requirement of data stream.
<span class='lineno'> 704</span> 
<span class='lineno'> 705</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.input_pipeline_context', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.input_pipeline_context', title='None'>input_pipeline_context</a> and <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.input_pipeline_context', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.input_pipeline_context', title='None'>input_pipeline_context</a>.num_input_pipelines &gt; 1:
<span class='lineno'> 706</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a>.shard(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.input_pipeline_context', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.input_pipeline_context', title='None'>input_pipeline_context</a>.num_input_pipelines,
<span class='lineno'> 707</span>                             <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.input_pipeline_context', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.input_pipeline_context', title='None'>input_pipeline_context</a>.input_pipeline_id)
<span class='lineno'> 708</span>   # file-level shuffle
<span class='lineno'> 709</span>   if len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.file_paths', title='{[?] | int}'>file_paths</a>) &gt; 1:
<span class='lineno'> 710</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a>.shuffle(len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.file_paths', title='{[?] | int}'>file_paths</a>))
<span class='lineno'> 711</span> 
<span class='lineno'> 712</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.sequential', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.sequential', title='bool'>sequential</a>:
<span class='lineno'> 713</span>     # Note: cannot perform sample-level shuffle here because this will violate
<span class='lineno'> 714</span>     # the consecutive requirement of data stream.
<span class='lineno'> 715</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a> = tf.data.TFRecordDataset(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a>)
<span class='lineno'> 716</span>   else:
<span class='lineno'> 717</span>     # `cycle_length` is the number of parallel files that get read.
<span class='lineno'> 718</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.cycle_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.cycle_length', title='int'>cycle_length</a> = min(8, len(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.file_paths', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.file_paths', title='{[?] | int}'>file_paths</a>))
<span class='lineno'> 719</span>     logging.info(&quot;Interleave %d files&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.cycle_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.cycle_length', title='int'>cycle_length</a>)
<span class='lineno'> 720</span> 
<span class='lineno'> 721</span>     # `sloppy` mode means that the interleaving is not exact. This adds
<span class='lineno'> 722</span>     # even more randomness to the training pipeline.
<span class='lineno'> 723</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a>.apply(
<span class='lineno'> 724</span>         tf.data.experimental.parallel_interleave(
<span class='lineno'> 725</span>             tf.data.TFRecordDataset,
<span class='lineno'> 726</span>             sloppy=True,
<span class='lineno'> 727</span>             cycle_length=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.cycle_length', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.cycle_length', title='int'>cycle_length</a>))
<span class='lineno'> 728</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.buffer_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.buffer_size', title='int'>buffer_size</a> = 2048
<span class='lineno'> 729</span>     logging.info(&quot;Perform sample-level shuffle with size %d&quot;, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.buffer_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.buffer_size', title='int'>buffer_size</a>)
<span class='lineno'> 730</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a>.shuffle(buffer_size=<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.buffer_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.buffer_size', title='int'>buffer_size</a>)
<span class='lineno'> 731</span> 
<span class='lineno'> 732</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a>.cache().repeat().map(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.parser', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.parser', title='? -> None'>parser</a>)
<span class='lineno'> 733</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a>.batch(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.bsz_per_core', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.bsz_per_core', title='int'>bsz_per_core</a>, drop_remainder=True)
<span class='lineno'> 734</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a>.prefetch(tf.data.experimental.AUTOTUNE)
<span class='lineno'> 735</span> 
<span class='lineno'> 736</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.parse_files_to_dataset.dataset', title='?'>dataset</a>
<span class='lineno'> 737</span> 
<span class='lineno'> 738</span> 
<span class='lineno'> 739</span> def <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm', title='(?, ?, ?, ?, ?) -> (float, ?, ?, ?)'>_local_perm</a>(<a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs', title='?'>inputs</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.is_masked', title='?'>is_masked</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.perm_size', title='?'>perm_size</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.seq_len', title='?'>seq_len</a>, <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.leak_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.leak_ratio', title='?'>leak_ratio</a>):
<span class='lineno'> 740</span>   &quot;&quot;&quot;Samples a permutation of the factorization order.
<span class='lineno'> 741</span> 
<span class='lineno'> 742</span>      Creates perm_mask and target_mask accordingly.
<span class='lineno'> 743</span> 
<span class='lineno'> 744</span>   Args:
<span class='lineno'> 745</span>     inputs: int64 Tensor in shape [seq_len], input ids.
<span class='lineno'> 746</span>     is_masked: bool Tensor in shape [seq_len]. True means being selected for
<span class='lineno'> 747</span>       partial prediction.
<span class='lineno'> 748</span>     perm_size: the length of longest permutation. Could be set to be reuse_len.
<span class='lineno'> 749</span>       Should not be larger than reuse_len or there will be data leaks.
<span class='lineno'> 750</span>     seq_len: int, sequence length.
<span class='lineno'> 751</span>     leak_ratio: float, percent of masked tokens that are leaked.
<span class='lineno'> 752</span> 
<span class='lineno'> 753</span>   Returns:
<span class='lineno'> 754</span>     perm_mask: float32 Tensor in shape [seq_len, seq_len] consisted of 0 and 1.
<span class='lineno'> 755</span>     If perm_mask[i][j] == 1, it means the ith token (in original order) cannot
<span class='lineno'> 756</span>     attend to the jth token
<span class='lineno'> 757</span>     (in original order). This case will happen only when the ith token&#39;s
<span class='lineno'> 758</span>     permutated position &lt;= the jth token&#39;s permutated position,
<span class='lineno'> 759</span>     and the jth token is masked or is func token. If perm_mask[i][j] == 0, it
<span class='lineno'> 760</span>     means the ith token (in original order) can attend to the jth token
<span class='lineno'> 761</span>     (in original order). Note that non-masked tokens can be attended by all
<span class='lineno'> 762</span>     other tokens, which is different from the description in original paper.
<span class='lineno'> 763</span>     target_mask: float32 Tensor in shape [seq_len] consisted of 0 and 1. If
<span class='lineno'> 764</span>     target_mask[i] == 1,
<span class='lineno'> 765</span>     the ith token needs to be predicted and mask will be used as input. This
<span class='lineno'> 766</span>     token will count for loss.
<span class='lineno'> 767</span>     If target_mask[i] == 0, token (or [SEP], [CLS]) will be used as input. This
<span class='lineno'> 768</span>     token will not count for loss.
<span class='lineno'> 769</span>     inputs_k: int64 Tensor in shape [seq_len], input ids.
<span class='lineno'> 770</span>     inputs_q: float32 Tensor in shape [seq_len], the same as target_mask.
<span class='lineno'> 771</span> 
<span class='lineno'> 772</span>   &quot;&quot;&quot;
<span class='lineno'> 773</span> 
<span class='lineno'> 774</span>   # Generate permutation indices
<span class='lineno'> 775</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', title='?'>index</a> = tf.range(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.seq_len', title='?'>seq_len</a>, dtype=tf.int64)
<span class='lineno'> 776</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', title='?'>index</a> = tf.transpose(tf.reshape(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', title='?'>index</a>, [-1, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.perm_size', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.perm_size', title='?'>perm_size</a>]))
<span class='lineno'> 777</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', title='?'>index</a> = tf.random.shuffle(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', title='?'>index</a>)
<span class='lineno'> 778</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', title='?'>index</a> = tf.reshape(tf.transpose(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', title='?'>index</a>), [-1])
<span class='lineno'> 779</span> 
<span class='lineno'> 780</span>   # non-functional tokens
<span class='lineno'> 781</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.non_func_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.non_func_tokens', title='?'>non_func_tokens</a> = tf.logical_not(tf.logical_or(
<span class='lineno'> 782</span>       tf.equal(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEP_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.SEP_ID', title='int'>SEP_ID</a>),
<span class='lineno'> 783</span>       tf.equal(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs', title='?'>inputs</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.CLS_ID', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils.CLS_ID', title='int'>CLS_ID</a>)))
<span class='lineno'> 784</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.masked_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.masked_tokens', title='?'>masked_tokens</a> = tf.logical_and(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.is_masked', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.is_masked', title='?'>is_masked</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.non_func_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.non_func_tokens', title='?'>non_func_tokens</a>)
<span class='lineno'> 785</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.non_masked_or_func_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.non_masked_or_func_tokens', title='?'>non_masked_or_func_tokens</a> = tf.logical_not(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.masked_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.masked_tokens', title='?'>masked_tokens</a>)
<span class='lineno'> 786</span> 
<span class='lineno'> 787</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.smallest_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.smallest_index', title='int'>smallest_index</a> = -2 * tf.ones([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.seq_len', title='?'>seq_len</a>], dtype=tf.int64)
<span class='lineno'> 788</span> 
<span class='lineno'> 789</span>   # Similar to BERT, randomly leak some masked tokens
<span class='lineno'> 790</span>   if <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.leak_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.leak_ratio', title='?'>leak_ratio</a> &gt; 0:
<span class='lineno'> 791</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.leak_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.leak_tokens', title='?'>leak_tokens</a> = tf.logical_and(
<span class='lineno'> 792</span>         <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.masked_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.masked_tokens', title='?'>masked_tokens</a>,
<span class='lineno'> 793</span>         tf.random.uniform([<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.seq_len', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.seq_len', title='?'>seq_len</a>], maxval=1.0) &lt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.leak_ratio', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.leak_ratio', title='?'>leak_ratio</a>)
<span class='lineno'> 794</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend_self', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend_self', title='?'>can_attend_self</a> = tf.logical_or(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.non_masked_or_func_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.non_masked_or_func_tokens', title='?'>non_masked_or_func_tokens</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.leak_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.leak_tokens', title='?'>leak_tokens</a>)
<span class='lineno'> 795</span>   else:
<span class='lineno'> 796</span>     <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend_self', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend_self', title='?'>can_attend_self</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.non_masked_or_func_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.non_masked_or_func_tokens', title='?'>non_masked_or_func_tokens</a>
<span class='lineno'> 797</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.to_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.to_index', title='?'>to_index</a> = tf.where(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend_self', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend_self', title='?'>can_attend_self</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.smallest_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.smallest_index', title='int'>smallest_index</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.index', title='?'>index</a>)
<span class='lineno'> 798</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.from_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.from_index', title='?'>from_index</a> = tf.where(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend_self', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend_self', title='?'>can_attend_self</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.to_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.to_index', title='?'>to_index</a> + 1, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.to_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.to_index', title='?'>to_index</a>)
<span class='lineno'> 799</span> 
<span class='lineno'> 800</span>   # For masked tokens, can attend if i &gt; j
<span class='lineno'> 801</span>   # For context tokens, always can attend each other
<span class='lineno'> 802</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend', title='bool'>can_attend</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.from_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.from_index', title='?'>from_index</a>[:, None] &gt; <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.to_index', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.to_index', title='?'>to_index</a>[None, :]
<span class='lineno'> 803</span> 
<span class='lineno'> 804</span>   # In modeling, 1 indicates cannot attend. Hence, reverse the value here.
<span class='lineno'> 805</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.perm_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.perm_mask', title='float'>perm_mask</a> = 1.0 - tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.can_attend', title='bool'>can_attend</a>, tf.float32)
<span class='lineno'> 806</span> 
<span class='lineno'> 807</span>   # Only masked tokens are included in the loss
<span class='lineno'> 808</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.target_mask', title='?'>target_mask</a> = tf.cast(<a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.masked_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.masked_tokens', title='?'>masked_tokens</a>, tf.float32)
<span class='lineno'> 809</span> 
<span class='lineno'> 810</span>   # construct inputs_k
<span class='lineno'> 811</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs_k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs_k', title='?'>inputs_k</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs', title='?'>inputs</a>
<span class='lineno'> 812</span> 
<span class='lineno'> 813</span>   # construct inputs_q
<span class='lineno'> 814</span>   <a name='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs_q', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs_q', title='?'>inputs_q</a> = <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.masked_tokens', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.masked_tokens', title='?'>masked_tokens</a>
<span class='lineno'> 815</span> 
<span class='lineno'> 816</span>   return <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.perm_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.perm_mask', title='float'>perm_mask</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.target_mask', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.target_mask', title='?'>target_mask</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs_k', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs_k', title='?'>inputs_k</a>, <a href='#.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs_q', xid ='.home.xxm.Desktop.EMSE.dataset.models.official.nlp.xlnet.data_utils._local_perm.inputs_q', title='?'>inputs_q</a>
</pre></td></tr></table></body></html>